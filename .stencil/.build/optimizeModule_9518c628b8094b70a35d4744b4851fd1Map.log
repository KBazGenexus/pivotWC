{"version":3,"names":["global","factory","module","exports","document","w","Error","window","this","noGlobal","arr","getProto","Object","getPrototypeOf","slice","flat","array","call","concat","apply","push","indexOf","class2type","toString","hasOwn","hasOwnProperty","fnToString","ObjectFunctionString","support","isFunction","obj","nodeType","item","isWindow","preservedScriptAttributes","type","src","nonce","noModule","DOMEval","code","node","doc","i","val","script","createElement","text","getAttribute","setAttribute","head","appendChild","parentNode","removeChild","toType","version","rhtmlSuffix","jQuery","selector","context","fn","init","prototype","jquery","constructor","length","toArray","get","num","pushStack","elems","ret","merge","prevObject","each","callback","map","elem","arguments","first","eq","last","even","grep","_elem","odd","len","j","end","sort","splice","extend","options","name","copy","copyIsArray","clone","target","deep","isPlainObject","Array","isArray","undefined","expando","Math","random","replace","isReady","error","msg","noop","proto","Ctor","isEmptyObject","globalEval","isArrayLike","textContent","documentElement","nodeValue","makeArray","results","inArray","isXMLDoc","namespace","namespaceURI","docElem","ownerDocument","test","nodeName","second","invert","callbackInverse","matches","callbackExpect","arg","value","guid","Symbol","iterator","split","_i","toLowerCase","pop","whitespace","rtrimCSS","RegExp","contains","a","b","bup","compareDocumentPosition","rcssescape","fcssescape","ch","asCodePoint","charCodeAt","escapeSelector","sel","preferredDoc","pushNative","Expr","outermostContext","sortInput","hasDuplicate","documentIsHTML","rbuggyQSA","dirruns","done","classCache","createCache","tokenCache","compilerCache","nonnativeSelectorCache","sortOrder","booleans","identifier","attributes","pseudos","rwhitespace","rcomma","rleadingCombinator","rdescend","rpseudo","ridentifier","matchExpr","ID","CLASS","TAG","ATTR","PSEUDO","CHILD","bool","needsContext","rinputs","rheader","rquickExpr","rsibling","runescape","funescape","escape","nonHex","high","String","fromCharCode","unloadHandler","setDocument","inDisabledFieldset","addCombinator","disabled","dir","next","safeActiveElement","activeElement","err","childNodes","e","els","find","seed","m","nid","match","groups","newSelector","newContext","exec","getElementById","id","getElementsByTagName","getElementsByClassName","testContext","scope","tokenize","toSelector","join","querySelectorAll","qsaError","removeAttribute","select","keys","cache","key","cacheLength","shift","markFunction","assert","el","createInputPseudo","createButtonPseudo","createDisabledPseudo","isDisabled","createPositionalPseudo","argument","matchIndexes","subWindow","webkitMatchesSelector","msMatchesSelector","defaultView","top","addEventListener","getById","getElementsByName","disconnectedMatch","cssHas","querySelector","filter","attrId","getAttributeNode","tag","className","input","innerHTML","compare","sortDetached","expr","elements","matchesSelector","attr","attrHandle","uniqueSort","duplicates","sortStable","createPseudo","relative","preFilter","excess","unquoted","nodeNameSelector","expectedNodeName","pattern","operator","check","result","what","_argument","simple","forward","ofType","_context","xml","outerCache","nodeIndex","start","parent","useCache","diff","firstChild","lastChild","pseudo","args","setFilters","idx","matched","not","matcher","compile","unmatched","has","lang","elemLang","hash","location","root","focus","hasFocus","href","tabIndex","enabled","checked","selected","empty","nextSibling","header","button","_matchIndexes","lt","gt","nth","radio","checkbox","file","password","image","submit","reset","filters","parseOnly","tokens","soFar","preFilters","cached","combinator","base","skip","checkNonElements","doneName","oldCache","newCache","elementMatcher","matchers","multipleContexts","contexts","condense","newUnmatched","mapped","setMatcher","postFilter","postFinder","postSelector","temp","matcherOut","preMap","postMap","preexisting","matcherIn","matcherFromTokens","checkContext","leadingRelative","implicitRelative","matchContext","matchAnyContext","matcherFromGroupMatchers","elementMatchers","setMatchers","bySet","byElement","superMatcher","outermost","matchedCount","setMatched","contextBackup","dirrunsUnique","token","compiled","unique","getText","isXML","selectors","until","truncate","is","siblings","n","rneedsContext","rsingleTag","winnow","qualifier","self","rootjQuery","parseHTML","ready","rparentsprev","guaranteedUnique","children","contents","prev","targets","l","closest","cur","index","prevAll","add","addBack","sibling","parents","parentsUntil","nextAll","nextUntil","prevUntil","contentDocument","content","reverse","rnothtmlwhite","createOptions","object","_","flag","Callbacks","firing","memory","fired","locked","list","queue","firingIndex","fire","once","stopOnFalse","remove","disable","lock","fireWith","Identity","v","Thrower","ex","adoptValue","resolve","reject","noValue","method","promise","fail","then","Deferred","func","tuples","state","always","deferred","catch","pipe","fns","newDefer","tuple","returned","progress","notify","onFulfilled","onRejected","onProgress","maxDepth","depth","handler","special","that","mightThrow","TypeError","notifyWith","resolveWith","process","exceptionHook","rejectWith","getErrorHook","getStackHook","setTimeout","stateString","when","singleValue","remaining","resolveContexts","resolveValues","primary","updateFunc","rerrorNames","asyncError","console","warn","message","stack","readyException","readyList","readyWait","wait","completed","removeEventListener","readyState","doScroll","access","chainable","emptyGet","raw","bulk","_key","rmsPrefix","rdashAlpha","fcamelCase","_all","letter","toUpperCase","camelCase","string","acceptData","owner","Data","uid","defineProperty","configurable","set","data","prop","hasData","dataPriv","dataUser","rbrace","rmultiDash","getData","JSON","parse","dataAttr","removeData","_data","_removeData","attrs","dequeue","startLength","hooks","_queueHooks","unshift","stop","setter","clearQueue","tmp","count","defer","pnum","source","rcssNum","cssExpand","isAttached","composed","getRootNode","isHiddenWithinTree","style","display","css","adjustCSS","valueParts","tween","adjusted","scale","maxIterations","currentValue","initial","unit","cssNumber","initialInUnit","defaultDisplayMap","getDefaultDisplay","body","showHide","show","values","hide","toggle","rcheckableType","rtagName","rscriptType","fragment","createDocumentFragment","div","checkClone","cloneNode","noCloneChecked","defaultValue","option","wrapMap","thead","col","tr","td","_default","tbody","tfoot","colgroup","caption","th","optgroup","getAll","setGlobalEval","refElements","rhtml","buildFragment","scripts","selection","ignored","wrap","attached","nodes","createTextNode","htmlPrefilter","rtypenamespace","returnTrue","returnFalse","on","types","one","origFn","event","off","handleObjIn","eventHandle","events","t","handleObj","handlers","namespaces","origType","elemData","create","handle","triggered","dispatch","delegateType","bindType","delegateCount","setup","mappedTypes","origCount","teardown","removeEvent","nativeEvent","handlerQueue","fix","delegateTarget","preDispatch","isPropagationStopped","currentTarget","isImmediatePropagationStopped","rnamespace","preventDefault","stopPropagation","postDispatch","matchedHandlers","matchedSelectors","addProp","hook","Event","enumerable","originalEvent","writable","load","noBubble","click","leverageNative","trigger","beforeunload","returnValue","isSetup","saved","isTrigger","stopImmediatePropagation","props","isDefaultPrevented","defaultPrevented","relatedTarget","timeStamp","Date","now","isSimulated","altKey","bubbles","cancelable","changedTouches","ctrlKey","detail","eventPhase","metaKey","pageX","pageY","shiftKey","view","char","charCode","keyCode","buttons","clientX","clientY","offsetX","offsetY","pointerId","pointerType","screenX","screenY","targetTouches","toElement","touches","which","blur","focusMappedHandler","documentMode","simulate","attaches","dataHolder","mouseenter","mouseleave","pointerenter","pointerleave","orig","related","rnoInnerhtml","rchecked","rcleanScript","manipulationTarget","disableScript","restoreScript","cloneCopyEvent","dest","pdataOld","udataOld","udataCur","fixInput","domManip","collection","hasScripts","iNoClone","valueIsFunction","html","_evalUrl","keepData","cleanData","dataAndEvents","deepDataAndEvents","srcElements","destElements","inPage","detach","append","prepend","insertBefore","before","after","replaceWith","replaceChild","appendTo","prependTo","insertAfter","replaceAll","original","insert","rnumnonpx","rcustomProp","getStyles","opener","getComputedStyle","swap","old","rboxStyle","computeStyleTests","container","cssText","divStyle","pixelPositionVal","reliableMarginLeftVal","roundPixelMeasures","marginLeft","right","pixelBoxStylesVal","boxSizingReliableVal","width","position","scrollboxSizeVal","offsetWidth","measure","round","parseFloat","reliableTrDimensionsVal","backgroundClip","clearCloneStyle","boxSizingReliable","pixelBoxStyles","pixelPosition","reliableMarginLeft","scrollboxSize","reliableTrDimensions","table","trChild","trStyle","height","parseInt","borderTopWidth","borderBottomWidth","offsetHeight","curCSS","computed","minWidth","maxWidth","isCustomProp","getPropertyValue","addGetHookIf","conditionFn","hookFn","cssPrefixes","emptyStyle","vendorProps","vendorPropName","capName","finalPropName","final","cssProps","rdisplayswap","cssShow","visibility","cssNormalTransform","letterSpacing","fontWeight","setPositiveNumber","subtract","max","boxModelAdjustment","dimension","box","isBorderBox","styles","computedVal","extra","delta","marginDelta","ceil","getWidthOrHeight","boxSizingNeeded","valueIsBorderBox","offsetProp","getClientRects","cssHooks","opacity","animationIterationCount","aspectRatio","borderImageSlice","columnCount","flexGrow","flexShrink","gridArea","gridColumn","gridColumnEnd","gridColumnStart","gridRow","gridRowEnd","gridRowStart","lineHeight","order","orphans","widows","zIndex","zoom","fillOpacity","floodOpacity","stopOpacity","strokeMiterlimit","strokeOpacity","origName","setProperty","isFinite","getBoundingClientRect","scrollboxSizeBuggy","left","margin","padding","border","prefix","suffix","expand","expanded","parts","Tween","easing","propHooks","run","percent","eased","duration","pos","step","fx","scrollTop","scrollLeft","linear","p","swing","cos","PI","fxNow","inProgress","rfxtypes","rrun","schedule","hidden","requestAnimationFrame","interval","tick","createFxNow","genFx","includeWidth","createTween","animation","Animation","tweeners","defaultPrefilter","opts","oldfire","propTween","restoreDisplay","isBox","anim","dataShow","unqueued","overflow","overflowX","overflowY","propFilter","specialEasing","properties","stopped","prefilters","currentTime","startTime","tweens","originalProperties","originalOptions","gotoEnd","bind","complete","timer","tweener","prefilter","speed","opt","speeds","fadeTo","to","animate","optall","doAnimation","finish","stopQueue","timers","cssFn","slideDown","slideUp","slideToggle","fadeIn","fadeOut","fadeToggle","slow","fast","delay","time","timeout","clearTimeout","checkOn","optSelected","radioValue","boolHook","removeAttr","nType","attrHooks","attrNames","getter","lowercaseName","rfocusable","rclickable","removeProp","propFix","tabindex","for","class","stripAndCollapse","getClass","classesToArray","addClass","classNames","curValue","finalValue","removeClass","toggleClass","stateVal","isValidValue","hasClass","rreturn","valHooks","selectedIndex","optionSet","rquery","parseXML","parserErrorElem","DOMParser","parseFromString","rfocusMorph","stopPropagationCallback","onlyHandlers","bubbleType","ontype","lastElement","eventPath","parentWindow","triggerHandler","rbracket","rCRLF","rsubmitterTypes","rsubmittable","buildParams","traditional","param","s","valueOrFunction","encodeURIComponent","serialize","serializeArray","r20","rhash","rantiCache","rheaders","rlocalProtocol","rnoContent","rprotocol","transports","allTypes","originAnchor","addToPrefiltersOrTransports","structure","dataTypeExpression","dataType","dataTypes","inspectPrefiltersOrTransports","jqXHR","inspected","seekingTransport","inspect","prefilterOrFactory","dataTypeOrTransport","ajaxExtend","flatOptions","ajaxSettings","ajaxHandleResponses","responses","ct","finalDataType","firstDataType","mimeType","getResponseHeader","converters","ajaxConvert","response","isSuccess","conv2","current","conv","responseFields","dataFilter","throws","active","lastModified","etag","url","isLocal","protocol","processData","async","contentType","accepts","json","ajaxSetup","settings","ajaxPrefilter","ajaxTransport","ajax","transport","cacheURL","responseHeadersString","responseHeaders","timeoutTimer","urlAnchor","fireGlobals","uncached","callbackContext","globalEventContext","completeDeferred","statusCode","requestHeaders","requestHeadersNames","strAbort","getAllResponseHeaders","setRequestHeader","overrideMimeType","status","abort","statusText","finalText","crossDomain","host","hasContent","ifModified","headers","beforeSend","success","send","nativeStatusText","modified","getJSON","getScript","wrapAll","firstElementChild","wrapInner","htmlIsFunction","unwrap","visible","xhr","XMLHttpRequest","xhrSuccessStatus","xhrSupported","cors","errorCallback","open","username","xhrFields","onload","onerror","onabort","ontimeout","onreadystatechange","responseType","responseText","binary","scriptAttrs","charset","scriptCharset","evt","oldCallbacks","rjsonp","jsonp","jsonpCallback","originalSettings","callbackName","overwritten","responseContainer","jsonProp","createHTMLDocument","implementation","keepScripts","parsed","params","animated","offset","setOffset","curPosition","curLeft","curCSSTop","curTop","curOffset","curCSSLeft","calculatePosition","curElem","using","rect","win","pageYOffset","pageXOffset","offsetParent","parentOffset","scrollTo","Height","Width","defaultExtra","funcName","unbind","delegate","undelegate","hover","fnOver","fnOut","rtrim","proxy","holdReady","hold","parseJSON","isNumeric","isNaN","trim","_jQuery","_$","$","noConflict","contains2","OAT","Preferences","showAjax","useCursors","windowTypeOverride","httpError","allowDefaultResize","allowDefaultDrag","something","elm","$$","elms","Dom","isClass","$v","findIndex","str","trimpivot","addTextNode","txtNode","nodeJ","addImageNode","icon_name","icon","replaceTextNode","AddItemToList","removeIconFont","ApplyPictureValue","defaultPicture","picture","defaultNull","decimalSeparator","decimalPlaces","defaultdate","newValue","hasprefix","substring","hassufix","sufix","qv","util","formatNumber","valueSplit","useSeparator","toFixed","z_pos","picteSplit","numoblig","newArray","charAt","numberoblig","dates","pict","substr","dividevalue","dividepicture","hourandms","digits","fromSafeXML","SetSelectedNodeBackgroundColor","color","$container","ClearSelectedNodes","SetNodeBackgroundColor","IsNodeSelected","SelectAllRow","row","avoid","cell","isSD","ua","navigator","userAgent","isAndroid","isIOs","isSafari","isIE","isWebkit","search","resourceURL","path","charReplace","Value","Chars","Repls","Ret","bFixed","len1","c","tagName","styleObj","createNS","ns","createElementNS","label","srcBlank","h","imageSrc","element","k","child","inputs_","inputs","inp","__checked","clear","unlink","center","x","y","reference","par_dims","getViewport","getWH","dims","new_x","new_y","getScroll","isChild","c_elm","p_elm","isKonqueror","isKHTML","attachEvent","isIE7","isIE6","isGecko","isOpera","isWebKit","isMac","platform","isLinux","isWindows","hex2dec","hex","tmpstr","setIdPropertyValue","innerWidth","innerHeight","compatMode","clientWidth","clientHeight","getLT","parent_coords","offsetTop","offsetLeft","curr_x","curr_y","curr_w","curr_h","Style","moveBy","dx","dy","bottom","resizeBy","decodeImage","decoded","Crypto","base64d","mime","removeSelection","selObj","getSelection","removeAllRanges","getFreeSpace","scroll","port","spaceLeft","spaceRight","spaceTop","spaceBottom","toSafeXML","uriParams","part","decodeURIComponent","r","changeHref","newHref","ok","oldParent","makePosition","include","relativePath","force","rel","property","cs","out","currentStyle","getExpression","background","png","backgroundImage","o","applyStyle","attach","detachEvent","srcElement","cancel","cancelBubble","prevent","eventPos","Loader","toolkitPath","loadOccurred","openAjax","MSG","DEBUG","OAT_DEBUG","OAT_LOAD","ANIMATION_STOP","TREE_EXPAND","TREE_COLLAPSE","DS_RECORD_PREADVANCE","DS_RECORD_ADVANCE","DS_PAGE_PREADVANCE","DS_PAGE_ADVANCE","AJAX_START","AJAX_ERROR","GD_START","GD_ABORT","GD_END","DOCK_DRAG","DOCK_REMOVE","SLB_OPENED","SLB_CLOSED","registry","sender","rec","record","senderOK","msgOK","re","callListeners","listeners","addListener","LoadJapanesseCharacters","uR","js_url","rP","gx","languageCode","resourceUrl","d","prevLoad","jsPDF","btoa","b64","b64a","o1","o2","o3","h1","h2","h3","h4","bits","ac","enc","tmp_arr","atob","dec","getObjectLength","PubSub","topics","publish","topic","currentTopic","toremove","pair","emptyFunc","subscribe","unsubscribe","orientation","format","compressPdf","wdt","hgt","zpipe","format_as_string","content_length","compress","pdfVersion","pageFormats","a3","a4","a5","legal","textColor","drawColor","page","pages","objectNumber","outToPages","offsets","fonts","fontmap","activeFontSize","activeFontKey","lineWidth","pageHeight","pageWidth","documentProperties","title","subject","author","keywords","creator","lineCapID","lineJoinID","API","plugin","f2","number","f3","padd2","padd10","newObject","putStream","wPt","hPt","kids","putPages","deflater","adler32","adler32cs","from","Deflater","Uint8Array","flush","putFont","font","PostScriptName","encoding","putFonts","fontKey","putXobjectDict","putResourceDictionary","putResources","addToFontDictionary","fontName","fontStyle","undef","addFont","metadata","addFonts","HELVETICA","TIMES","COURIER","NORMAL","BOLD","ITALIC","BOLD_ITALIC","standardFonts","dictionary","to8bitStream","flags","sourceEncoding","encodingBlock","outputEncoding","newtext","isUnicode","bch","autoencode","codePages","noBOM","pdfEscape","putInfo","created","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","putCatalog","putTrailer","beginPage","_addPage","pageNumber","getFont","buildDocument","getStyle","op","output","blob","getUserMedia","URL","createObjectURL","ArrayBuffer","Blob","saveAs","internal","getFontSize","write","string1","string2","string3","etc","getCoordinateString","getVerticalCoordinateString","collections","scaleFactor","pageSize","addPage","_first","_second","_third","line","x1","y1","x2","y2","lines","scalex","scaley","leg","x3","y3","x4","y4","setProperties","setFontSize","size","setFont","setFontStyle","setFontType","getFontList","setLineWidth","setDrawColor","ch1","ch2","ch3","ch4","setFillColor","setTextColor","g","CapJoinStyles","butt","but","bevel","rounded","circle","projecting","project","square","milter","setLineCap","setLineJoin","save","filename","newEvents","eventname","handler_and_args","jsPDFAPI","getJpegSize","imgData","blockLength","putImage","img","trns","putResourcesCallback","images","putXObjectsDictCallback","addImage","imageData","canvas","ctx","getContext","drawImage","toDataURL","imageIndex","coord","vcoord","info","bpc","f","uncompress","encoded","mapping","sign","stringparts","activeobject","parentchain","parent_key_pair","keyparts","valueparts","datalen","WinAnsiEncoding","encodings","Unicode","Courier","Helvetica","fontMetrics","fontManagementObjects","fontID","metrics","unicode_section","widths","kerning","getCharWidthsArray","widthsFractionOf","fof","kerningFractionOf","char_code","prior_char_code","default_char_width","getArraySum","getStringUnitWidth","splitLongWord","word","widths_array","firstLineMaxLen","maxLen","answer","workingLen","startOfLine","splitParagraphIntoLines","maxlen","spaceCharWidth","words","line_length","textIndent","separator_length","current_word_length","splitTextToSize","fsize","fontSize","newOptions","paragraphs","fontUnit_maxLen","addSVG","svgtext","InjectCSS","cssbody","styletag","styleSheet","createWorkerNode","frameID","frame","attachSVGToWorkerNode","framedoc","contentWindow","close","convertPathToPDFLinesArgs","vectors","workernode","svgnode","svgw","svgh","linesargs","items","get_URL","webkitURL","save_link","can_use_save_link","createEvent","initMouseEvent","dispatchEvent","webkit_req_fs","webkitRequestFileSystem","req_fs","requestFileSystem","mozRequestFileSystem","throw_outside","setImmediate","force_saveable_type","fs_min_size","deletion_queue","process_deletion_queue","revokeObjectURL","filesaver","event_types","listener","FileSaver","blob_changed","object_url","target_view","get_object_url","dispatch_all","fs_error","DONE","abortable","create_if_not_found","exclusive","INIT","download","chrome","webkitSlice","TEMPORARY","fs","getDirectory","getFile","createWriter","writer","onwriteend","toURL","ABORT_ERR","forEach","WRITING","NOT_FOUND_ERR","FS_proto","onwritestart","onprogress","onwrite","MAX_BITS","D_CODES","BL_CODES","LENGTH_CODES","LITERALS","L_CODES","HEAP_SIZE","END_BLOCK","MAX_BL_BITS","REP_3_6","REPZ_3_10","REPZ_11_138","Buf_size","Z_DEFAULT_COMPRESSION","Z_FILTERED","Z_HUFFMAN_ONLY","Z_DEFAULT_STRATEGY","Z_NO_FLUSH","Z_PARTIAL_FLUSH","Z_FULL_FLUSH","Z_FINISH","Z_OK","Z_STREAM_END","Z_NEED_DICT","Z_STREAM_ERROR","Z_DATA_ERROR","Z_BUF_ERROR","_dist_code","Tree","gen_bitlen","tree","dyn_tree","stree","stat_desc","static_tree","extra_bits","extra_base","max_length","xbits","bl_count","heap","heap_max","max_code","opt_len","static_len","bi_reverse","res","gen_codes","next_code","build_tree","heap_len","floor","pqdownheap","_length_code","base_length","base_dist","d_code","dist","extra_lbits","extra_dbits","extra_blbits","bl_order","StaticTree","static_ltree","static_dtree","static_l_desc","static_d_desc","static_bl_desc","MAX_MEM_LEVEL","DEF_MEM_LEVEL","Config","good_length","max_lazy","nice_length","max_chain","STORED","FAST","SLOW","config_table","z_errmsg","NeedMore","BlockDone","FinishStarted","FinishDone","PRESET_DICT","INIT_STATE","BUSY_STATE","FINISH_STATE","Z_DEFLATED","STORED_BLOCK","STATIC_TREES","DYN_TREES","MIN_MATCH","MAX_MATCH","MIN_LOOKAHEAD","smaller","tn2","tm2","Deflate","strm","pending_buf_size","last_flush","w_size","w_bits","w_mask","window_size","ins_h","hash_size","hash_bits","hash_mask","hash_shift","block_start","match_length","prev_match","match_available","strstart","match_start","lookahead","prev_length","max_chain_length","max_lazy_match","level","strategy","good_match","nice_match","dyn_ltree","dyn_dtree","bl_tree","l_desc","d_desc","bl_desc","l_buf","lit_bufsize","last_lit","d_buf","last_eob_len","bi_buf","bi_valid","lm_init","init_block","tr_init","scan_tree","prevlen","curlen","nextlen","max_count","min_count","build_bl_tree","max_blindex","put_byte","pending_buf","pending","put_short","putShortMSB","send_bits","send_code","c2","send_tree","send_all_trees","lcodes","dcodes","blcodes","rank","bi_flush","_tr_align","_tr_tally","lc","out_length","in_length","dcode","compress_block","ltree","dtree","lx","bi_windup","copy_block","buf","subarray","_tr_stored_block","stored_len","eof","_tr_flush_block","opt_lenb","static_lenb","flush_block_only","flush_pending","fill_window","more","avail_in","read_buf","deflate_stored","max_block_size","max_start","avail_out","longest_match","cur_match","chain_length","scan","best_len","limit","_nice_match","wmask","strend","scan_end1","scan_end","deflate_fast","hash_head","bflush","deflate_slow","max_insert","deflateReset","total_in","total_out","pending_out","deflateInit","_level","_method","memLevel","_strategy","dstate","deflateEnd","deflateParams","deflate","deflateSetDictionary","dictLength","_strm","level_flags","old_flush","bstate","next_out","next_in","ZStream","next_in_index","next_out_index","z","bufsize","buffers","lastIndex","bufferIndex","bufferSize","chunk","JSZip","files","signature","LOCAL_FILE_HEADER","CENTRAL_FILE_HEADER","CENTRAL_DIRECTORY_END","ZIP64_CENTRAL_DIRECTORY_LOCATOR","ZIP64_CENTRAL_DIRECTORY_END","DATA_DESCRIPTOR","defaults","base64","date","ZipObject","asText","utf8decode","asBinary","utf8encode","decToHex","bytes","prepareFileAttrs","fileAdd","parentFolder","folderAdd","lastSlash","lastIndexOf","prepareLocalHeaderData","utfEncodedFileName","compressionType","useUTF8","dosTime","dosDate","JSZipBase64","decode","compression","compressions","compressedData","magic","crc32","stream","fileClone","regexp","folder","newFolder","generate","directory","fileOffset","fileRecord","dirRecord","fileData","dirData","dirEnd","zip","encode","crc","iTop","newObj","utftext","c3","STORE","_keyStr","utf8","chr1","chr2","chr3","enc1","enc2","enc3","enc4","zip_WSIZE","zip_STORED_BLOCK","zip_STATIC_TREES","zip_DYN_TREES","zip_DEFAULT_LEVEL","zip_INBUFSIZ","zip_INBUF_EXTRA","zip_OUTBUFSIZ","zip_window_size","zip_MIN_MATCH","zip_MAX_MATCH","zip_BITS","zip_LIT_BUFSIZE","zip_HASH_BITS","zip_DIST_BUFSIZE","zip_HASH_SIZE","zip_HASH_MASK","zip_WMASK","zip_NIL","zip_TOO_FAR","zip_MIN_LOOKAHEAD","zip_MAX_DIST","zip_SMALLEST","zip_MAX_BITS","zip_MAX_BL_BITS","zip_LENGTH_CODES","zip_LITERALS","zip_END_BLOCK","zip_L_CODES","zip_D_CODES","zip_BL_CODES","zip_REP_3_6","zip_REPZ_3_10","zip_REPZ_11_138","zip_HEAP_SIZE","zip_H_SHIFT","zip_free_queue","zip_qhead","zip_qtail","zip_initflag","zip_outbuf","zip_outcnt","zip_outoff","zip_complete","zip_window","zip_d_buf","zip_l_buf","zip_prev","zip_bi_buf","zip_bi_valid","zip_block_start","zip_ins_h","zip_hash_head","zip_prev_match","zip_match_available","zip_match_length","zip_prev_length","zip_strstart","zip_match_start","zip_eofile","zip_lookahead","zip_max_chain_length","zip_max_lazy_match","zip_compr_level","zip_good_match","zip_dyn_ltree","zip_dyn_dtree","zip_static_ltree","zip_static_dtree","zip_bl_tree","zip_l_desc","zip_d_desc","zip_bl_desc","zip_bl_count","zip_heap","zip_heap_len","zip_heap_max","zip_depth","zip_length_code","zip_dist_code","zip_base_length","zip_base_dist","zip_flag_buf","zip_last_lit","zip_last_dist","zip_last_flags","zip_flags","zip_flag_bit","zip_opt_len","zip_static_len","zip_deflate_data","zip_deflate_pos","zip_DeflateCT","fc","dl","zip_DeflateTreeDesc","zip_DeflateConfiguration","zip_DeflateBuffer","ptr","zip_extra_lbits","zip_extra_dbits","zip_extra_blbits","zip_bl_order","zip_configuration_table","zip_deflate_start","zip_reuse_queue","zip_new_queue","zip_head1","zip_head2","zip_put_byte","zip_qoutbuf","zip_put_short","zip_INSERT_STRING","zip_SEND_CODE","zip_send_bits","zip_D_CODE","zip_SMALLER","zip_read_buff","buff","zip_lm_init","zip_fill_window","zip_longest_match","scanp","matchp","strendp","zip_deflate_fast","zip_ct_tally","zip_flush_block","zip_deflate_better","zip_init_deflate","zip_ct_init","zip_deflate_internal","buff_size","zip_qcopy","zip_gen_codes","zip_bi_reverse","zip_init_block","zip_pqdownheap","zip_gen_bitlen","desc","zip_build_tree","xnew","zip_scan_tree","zip_send_tree","zip_build_bl_tree","zip_send_all_trees","zip_bi_windup","zip_compress_block","zip_Buf_size","q","zip_deflate","aout","cbuf","zip_fixed_bd","zip_lbits","zip_dbits","zip_slide","zip_wp","zip_fixed_tl","zip_fixed_td","zip_fixed_bl","zip_bit_buf","zip_bit_len","zip_method","zip_eof","zip_copy_leng","zip_copy_dist","zip_tl","zip_td","zip_bl","zip_bd","zip_inflate_data","zip_inflate_pos","zip_MASK_BITS","zip_cplens","zip_cplext","zip_cpdist","zip_cpdext","zip_border","zip_HuftList","zip_HuftNode","zip_HuftBuild","mm","BMAX","N_MAX","pidx","u","xp","tail","zip_GET_BYTE","zip_NEEDBITS","zip_GETBITS","zip_DUMPBITS","zip_inflate_codes","zip_inflate_stored","zip_inflate_fixed","alert","zip_inflate_dynamic","nb","nl","nd","ll","zip_inflate_start","zip_inflate_internal","zip_inflate","pretty","findCompression","compressionMethod","StreamReader","checkOffset","checkIndex","newIndex","setIndex","byteAt","readByte","readInt","readString","readDate","dostime","ZipEntry","loadOptions","isEncrypted","bitFlag","hasDataDescriptor","isZIP64","zip64","readLocalPartHeader","reader","versionNeeded","compressedSize","uncompressedSize","fileNameLength","extraFieldsLength","readLocalPart","fileName","readExtraFields","compressedFileData","findDataUntilDataDescriptor","uncompressedFileData","checkCRC32","buffer","aByte","readCentralPart","versionMadeBy","fileCommentLength","diskNumberStart","internalFileAttributes","externalFileAttributes","localHeaderOffset","fileComment","parseZIP64ExtraField","extraReader","extraFields","extraFieldId","extraFieldLength","extraFieldValue","ZipEntries","checkSignature","expectedSignature","readBlockEndOfCentral","diskNumber","diskWithCentralDirStart","centralDirRecordsOnThisDisk","centralDirRecords","centralDirSize","centralDirOffset","zipCommentLength","zipComment","readBlockZip64EndOfCentral","zip64EndOfCentralSize","zip64ExtensibleData","extraDataSize","readBlockZip64EndOfCentralLocator","diskWithZip64CentralDirStart","relativeOffsetEndOfZip64CentralDir","disksCount","readLocalFiles","readCentralDir","readEndOfCentral","zipEntries","xlsx","defaultFontName","defaultFontSize","defaultFontColor","zipTime","processTime","sharedStrings","borders","borderIndex","fontIndex","docProps","xl","xlWorksheets","worksheet","contentTypes","xlRels","worksheets","columns","cols","colWidth","merges","merged","numFmts","alphabet","numAlpha","convertDate","typeOf","escapeXML","parseDate","ispivot","genexusType","genexusPicture","pars","formatCode","datetimepars","datePars","picturePars","pivot","folderPivotCache","pivotCacheDefinition","folderPivotTable","pivotTable1","fills","fillNumber","isString","hAlign","vAlign","bold","italic","fontColor","fill","stringify","autoWidth","colSpan","rowSpan","formula","activeWorksheet","actualFill","edge","diagonal","multStyle","dfx","lastModifiedBy","toISOString","dt","GeneratePDFOutput","totalColSpan","tablemarginleft","tablemargintop","cellwidth","controlName","query","title_row","row_num","tRow","columnsWidth","columnsSpan","colspan","desp","colConditions","prevSpan","prevR","tRowprev","prevC","prevRowSpan","prevColSpan","span","childText","oldCol","jChar","carInicialesNoJap","posC","nw","cWP","getXOffset","spanSobrantes","jR","ignore","hasBackground","IsTextAlignRight","textWidht","at","rgb","imgTxtData","lastTxt","posInitLastTxt","previousCharCode","cNo","getCharacterImg","posI","tempchildText","posE","indexTDel","exceso","preColsPan","preImage","prevColsSpan","removeComas","actPos","poVal","tempValue","cleanDistinctValue","ind","replaceAmp","getMeasureTitle","createExcelROWITEMS","pfvi","lastRowLevel","originalLevel","rs","createExcelCOLITEMS","iCV","measures","GenerateExcelOutput","componentToHex","rgbToHex","styleObject","alg","getMeasureIdentifier","formulaInfo","itemPosition","previous","dataTable","dataRow","cellObject","measureFormula","hasFormula","formMeasures","cantFormulaMeasures","fI","mI","relatedMeasures","numMeasure","dataToShow","GeneralDataRows","autoPaging","RowsWhenMoveToFilter","recordForFormula","cellObjectStyle","rN","conditions","dataRowPosition","applyFormatValues","defaultPictureValue","applyConditionalFormats","formItem","stylesList","columnWithStyle","styleId","measuresWidthStyle","ms","cacheDefinition","letras","withStyles","lastPos","firstDataRow","firstDataCol","totalsExportPivotPdfOptions","sheet","xlpivotTable1","pfi","pfviExclude","rowLevel","colLevel","lastColLevel","rowConditions","formulaOptionString","formulaItemString","pfvl","pfvlExclude","distinctValues","hiddenString","blackList","filterIndexes","it","rowStructure","colStructure","xlstyle","dfxStr","sheet2","rowNumber","colNumber","Sheet2","varRef","pageInfo","rowLabel","firstRow","firstCol","measuresXML","numFmt","distValues","colFormYaAgregada","numColFormula","addWhenFormula","space","aggregation","cantMeasureForm","cantNoMeasures","lastPosition","fld","mixed","GeneralDistinctValues","onlyNumber","textFormula","addNumberFormat","mPos","pivotFormat","excelFormat","charFP","byteCharacters","charCodeFromCharacter","byteNumbers","uint8Data","Dialog","modal","onshow","onhide","resize","autoEnter","imagePath","Window","min","marginTop","textAlign","Dimmer","accomodate","onclose","okBtn","cancelBtn","featureLoaded","ERROR","Drag","TYPE_X","TYPE_Y","TYPE_XY","mouse_x","mouse_y","move","abs","_Drag_movers","restrictionFunction","magnetsH","magnetsV","moveFunction","up","endFunction","cursor","initiate","_Drag_cursor","removeAll","createDefault","_Drag_pending","GhostDragData","onFail","originalElement","AnimationPosition","GhostDrag","sources","processes","callbacks","addSource","startDrag","delSource","clearSources","addTarget","delTarget","clearTargets","Instant","showCallback","hideCallback","handles","createHandle","removeHandle","_Instant_show","_Instant_hide","assign","GridData","LIMIT","ALIGN_CENTER","ALIGN_START","ALIGN_END","ALIGN_RIGHT","SORT_NONE","SORT_ASC","SORT_DESC","TYPE_STRING","TYPE_NUMERIC","TYPE_AUTO","Grid","columnsDataType","colms","QueryViewerCollection","disableColumnSort","UcId","IdForQueryViewerCollection","rememberLayout","serverPaging","HideDataFilds","OrderFildsHidden","TableDataFilds","GridTitle","translations","rowsPerPage","InitPageSize","iC","topDiv","_ControlRenderedTo","divContainer","ContainerName","divIeContainer","GridHeader","rows","rowBlock","previousThead","exportImg","exportPage","checkToClose","clean","closing","oat_component","resetAllScrollValue","Anchor","result_control","activation","WinData","TYPE_RECT","containerQuery","ControlName","generatePair","OAT_JS","grid","gridData","rowsMetadata","cells","check_class","checkedClass","unCheckedClass","newClass","newdisp","numCol","setColumnVisibleValue","clickRef","coords","iconExport","spantitle","GXPL_QViewerPopupTitle","someExport","div_upper","appendExportToXmlOption","appendExportToHtmlOption","appendExportToPdfOption","appendExportToExcelOption","appendExportToExcel2010Option","hr","div_down","GXPL_QViewerJSVisibleColumns","div_label","dataField","screenWidth","initialPopUpWidth","setPageDataForTable","resXML","lastCallToQueryViewer","lastCallData","PageNumber","RecalculateCantPages","redraw","DataFieldOrder","fromExternalRefresh","dataString","stringRecord","_selfgrid","recordData","CreateGridRow","ExportToPdf","ExportToXML","ExportToHtml","ExportToExcel","ExportToExcel2010","removeAllCollapseRows","setAttributeForTable","resJSON","changeValues","columnNumber","filterValue","appendNewValueData","appendNewFilteredValueData","posColumnNumber","filterText","initValueLoad","setFilterChangedWhenServerPagination","oatDimension","setDataSynForTable","dataSync","_self","ClickHandle","elemvalue","exportXMLButton","exportButtonSub","createExportButton","pvpl","GXPL_QViewerContextMenuExportXml","htmlFor","getAllDataRowsForExport","exportHTMLButton","ExportToHTML","GXPL_QViewerContextMenuExportHtml","exportPDFButton","ExportToPDF","GXPL_QViewerContextMenuExportPdf","exportXLSButton","ExportToXLS","GXPL_QViewerContextMenuExportXls2003","ExportToXLSX","GXPL_QViewerContextMenuExportXlsx","clearData","appendHeader","paramsObj","addCell","ieFix","createHeader","paramsList","fieldList","getHeaders","actualHeaders","createRow","customPicture","conditionalFormatsColumns","formatValues","customFormat","column","columnVisibility","GridRow","underRecursionStyle","loadDifferentValues","differentValue","removeAllRows","totalRows","removeRow","removeAllHiddenRows","removeColumn","hideColumnHeader","headerPos","showColumnHeader","changeSort","applySaveState","actualPagesize","exists","getState","filterRows","jC","applySortOrderType","applyCustomSort","sortData","dataRows","localName","applyCustomFilter","filterData","includeValues","applyFilter","dataFieldId","columnDataField","blackLists","defaultAction","hiddens","visibles","HideGridRow","actualizeBlackList","moveToNextPage","moveToFirstPage","moveToLastPage","moveToPreviousPage","selectValue","SelectedNode","DataField","SelectNodes","deselectValue","refreshPivot","sameQuery","parser","xmlData","dimensions","dataFieldOrderChanged","OrderChanged","colPosition","dim","dimID","dimPos","dimHeader","itC","getNamedItem","pD","updateFilterInfo","hides","sofs","differentValues","refreshPivotWhenServerPagination","getDataXML","serverData","dataStr","getFilteredDataXML","getTableWhenServerPagination","getMetadataXML","isMeasure","createXMLDimensionInfo","columnaentabla","celdaHeader","cantVisibles","located","colGrid","dataFieldColumn","isHidden","columnI","dataFieldOrder","orderType","previusValue","setInterval","actual_rowsPerPage","autoResize","containerWidth","wd2","widthTable","wid_topBar","marginBottom","nP","previousTHead","GridHeaderCell","tds","params_","sortable","align","updateSortImage","sorter","signal","divIcon","divCont","differentValuesPaginationInfo","previousPage","initValueRead","clickEvent","showPopup","mouseover","mouseout","isDecimal","expression","decimal","cellVisible","GridRowCell","setClickEventHandlers","deselect","firstAbove","lastBelow","cellvalue","datatype","measureDataType","defaultFormats","setStyleValues","recursive","equal","notequal","greaterThan","greaterOrEqual","lessThan","lessOrEqual","between","operation1","value1","operation2","value2","comparisons","dateElements","cmpar","cmparElements","cmpar2","cmparElements2","styleValues","hexToRgb","shorthandRegex","styleSplit","particularStyleSplit","backgroundColor","textDecoration","fontFamily","fontVariant","verticalAlign","wordSpacing","borderThickness","borderWidth","borderColor","borderWith","borderStyle","paddingBottom","paddingLeft","paddingRight","paddingTop","GenerateFormatDateForGrid","ShowGridRow","RestoreGridRow","colNum","RestoreGridOrder","RestoreGridColumns","tC","RowData","collapse","dataByField","tempcolumnsDataType","tempforPivotCustomPicture","tempforPivotCustomFormat","tempcolumnVisible","originalColumnDataField","forPivotCustomPicture","forPivotCustomFormat","columnVisible","conteiner","oper","_type","toAppend","refresh","redrawHeader","dimension_Title","div_order","asc","ascForId","origen","cellIndex","getDataForTable","idI","inputAsc","inputDsc","alabel","IStyle","GXPL_QViewerJSAscending","dscForId","dlabel","GXPL_QViewerJSDescending","hr4","hr3","dragDiv","dragDiv_L_sel_div","destino","i1","i2","strDestino","dataFieldsPos","idF","setDataFieldPosition","draglabel","GXPL_QViewerJSMoveColumnToLeft","dragDiv_R_sel_div","tHead","draglabelR","GXPL_QViewerJSMoveColumnToRight","gridStateChanged","restoreview","restoreview_sel_div","rl","GXPL_QViewerJSRestoreDefaultView","distinct","distinctDivs","realColNumber","getPairWithIcon","checked_value","getRefBool","onFilteredChangedEventHandle","allRef","noneRef","reverseRef","searchFilterClick","getValuesForColumn","all","GXPL_QViewerJSAll","none","GXPL_QViewerJSNone","GXPL_QViewerJSReverse","div_search","searchInput","GXPL_QViewerSearch","keyup","fixHeigthDiv","cantPairs","getCantDifferentValues","pairData","getDifferentValues","pict_value","resto","class_check_div","appendNewPairToPopUp","removeAllPairsFromPopUp","withScroll","dimensionNumber","dimensionDataField","itemValue","MeasureOrDimension","itemData","qViewer","RaiseItemClick","iT","Metadata","Axes","ItemClick","onclick","onClickEventHandle","Allow","onClickSelectNode","classList","PreClickHandle","requestDataSynForTable","spl","allRowsPivot","allFullRowsPivot","fullRecordData","pseudoRow","datastr","existNullValue","stringValues","coinc","row1","row2","fireOnItemClickEvent","isRefresh","selectedItemNumber","Color","rowData","rowsData","clicked","EntireLine","cellValue","sameValue","checkConditions","sameRow","RedrawSelectedNode","selectedRow","getStateChange","createXMLMetadata","serverPagination","posHeader","pH","dF","hiddenColumns","columnInPdf","colNro","nroPag","verticalHeight","styleString","dtltbl","rowsToAdd","datePicture","dateDefaultFormat","dateTimeDefaultFormat","valuetoString","di","dj","classString","SaveStateWhenServerPaging","localStorage","setItem","getURL","filterInfo","getStateWhenServingPaging","queryName","getItem","actualPageSize","retrocycle","px","rez","$ref","eval","retrievedObject","oldState","columnDisplay","SaveMetadata","metaDataString","removeItem","GetSavedMetadata","mdata","renderJSPivot","setPageDataForPivotTable","setAttributeValuesForPivotTable","setPivottableDataCalculation","setDataSynForPivotTable","pivotParams","RealType","ServerPaging","ServerPagingPivot","AutoRefreshGroup","ObjectName","renderJSPivotInter","previousDataFieldOrder","customFilterInfo","xmlDoc","withOrderCustom","getAttributeValuesSync","realValues","NotNullValues","realIncludeValues","DefaultAction","Excluded","Included","NullIncluded","oat_element","resText","queryself","PageSize","AutoResize","DisableColumnSort","RememberLayout","previousOrderType","previousFilters","previousColumnVisible","initialColumnVisible","previousState","gridCacheSize","ServerPagingCacheSize","hasShowValuesAs","splitMetadata","changeMetadata","ShowMeasuresAsRows","ShowDataLabelsIn","savedMd","t1","t2","t3","t4","name1","name2","fullXmlData","InitMetadata","DataString","Dimensions","Conditions","DataFields","RowsPerPage","initColumns","objectColumn","displayName","description","validPositions","metadatavisible","defaultPosition","Visible","validPosition","Measures","initMeasures","measureObject","DimensionPosition","OATgetState","hideDimension","hideMeasures","OATParseMetadata","GrandTotalVisibility","TotalForRows","TotalForColumns","orderFildsHidden","nameFildsHidden","pivotDiv","control","columnNumbers","rowNumbers","filterNumbers","conditionalFormats","formatValuesMeasures","forPivotFormatValues","forPivotFormats","columnNames","rowNames","filterNames","measureNames","preHeader","orderFilds","datePictures","intPictures","dateFields","intFields","crude","getDataFromXML","tableOrderField","ServerRecordCount","parseToIntRegisterValue","ServerPageCount","ServerPageNumber","filds","pos_init","fullRecord","maxLengthRecord","TableOrderFilds","pagingData","dataFields","furmulaIndex","recordDataLength","inlineFormula","inline","opers","inline2","polishNot","InfixToPostfix","polishNotationText","relatedMeasure","operPositionInDataRow","arrayNot","PolishNotation","urlRelative","fireOnPageChangeTable","paramobj","QueryviewerId","Navigation","initEvent","parameter","cb","rowNum","currPage","ignoreRows","optionsForRows","jstype","topNav","cantPages","controlUcId","partialTablePagination","wd","scrollBottom","scrollHeight","readScrollValue","recalculateCantPages","OrderType","DataFieldFilter","DataFieldBlackList","restoreDefaultView","layoutChanged","cleanCache","pageInCache","requestPageDataForTable","Filters","LayoutChange","getActualCantPages","actualCantPages","requestAttributeForTable","resetScrollValue","Page","fireOnFilterChanged","FilterChangedData","QueryViewerd","panel","tab","needs","forPivotCustomFormar","_mthis","actualPageNumber","AllowSelection","SelectLine","Title","QueryViewerCollectionItem","dtF","defaultValues","TableOrderFields","cacheSize","gridCache","pageData","nextCachePos","filteredValuesPaginationInfo","hasNull","blocked","totalPages","filtered","filteredText","defaultNullText","customOrderValues","columnOrderNumber","endValueRead","CurrentPage","__mthis","indCache","cP","actualheader","meta","currPageNumber","iter","NewFilter","tempArrayVisibles","tit","tempArrayHiddens","filterExist","nullIncluded","included","excluded","reallyPseudoNull","finded","data_length","allValuesLoaded","noFilterNeeded","notNullValues","ValuePageInfo","lastRequestValue","whenFilter","PagesCount","newValues","Null","originalColumn","nI","field","alreadyInValues","requestDataField","cantItems","origColumnNumber","records","finalRes","df","difValues","dvi","iparser","xml_doc","selectXPathNode","xpath","evaluate","XPathResult","ANY_TYPE","iterateNext","selectNodes","Node","Name","SelectedValues","valueIndex","tempInfo","indexHeader","defaultVisible","dataFieldPositions","QueryViewer","addValueToDifferentValues","sortInt","tempData","added","pivotdiv","formatValue","formatValueMeasures","initMetadata","prevCol","Pivot","registerValue","parseToStringRegisterValue","EvaluateExpressionPivotJs","evalStack","currentToken","isOperator","operand1","operand2","PerformOperation","outputQueue","operatorStack","getAssociativity","getPrecedence","OATSetCookie","expires","domain","secure","cookie","toGMTString","OATGetCookie","cname","dc","begin","unescape","OATGetRowsFromXML","rowsString","subTotal","headerString","headerrep","headersItems","datafield","totalizedItems","sumarized","ant","cellsString","ci","dField","columnsHeaders","ec","OATGetColumnsHeadersFromXML","columnsString","subHeaders","subHeadersString","sh","OATGetNewDataFromXMLForPivot","exportTo","OATgetDataFromXMLOldFormat","fullData","hideDataFilds","headMetadata","restMetadata","dimensionString","infoDisplayName","measuresString","allHide","GXPL_QViewerQuantity","taileMetadata","OATGetColumnsAndMeasureMeatadata","cookieValue","Layers","baseOffset","layers","currentIndex","raise","addLayer","removeLayer","_fadeIn","noOp","msie","ie6","setExpr","setExpression","blockUI","install","unblockUI","growlUI","onClose","$m","callBlock","centerY","showOverlay","onUnblock","growlCSS","displayBlock","block","fullOpts","$el","ignoreIfBlocked","unblock","draggable","theme","themedCSS","overlayCSS","cursorReset","iframeSrc","forceIframe","baseZ","centerX","allowBodyStretch","bindEvents","constrainTabKey","focusInput","focusableElements","onBlock","onOverlayClick","quirksmodeOffsetHack","blockMsgClass","pageBlock","pageBlockEls","full","lyr1","lyr2","lyr3","$par","boxModel","sz","fixT","fixL","cb1","cb2","cssW","fwd","back","GlobalPivotInterval","filterDiv","headerRow","headerRowIndexes","headerColIndexes","dataColumnIndex","condFormats","containerName","pivotTitle","nextRowWhenAutopaging","prevRowWhenAutopaging","paginationInfo","TempDataStructForAggStepOptimization","actualPaginationPage","allDataWithoutSort","rememberLayoutStateVersion","fromUndefinedToBlanck","sortIntMemory","ival","actualVal","initPos","PartialSort","tempDataRows","act_pos","repeated","tot","filaSumar","filaRepetida","formulasI","formulasJ","posB","PreviousPageNumber","AxisInfo","FilterInfo","initFilterIndexes","getFormulaRowByDataRow","measureNumber","caseId","hallado","searchIn","addedValues","coincide","selects","mforF","rforF","Infinity","autoPagingRowsPerPage","TotalPagesPaging","GrandTotalsPaging","fillGeneralDistinctValues","FilterByTopFilter","headingBefore","headingAfter","agg","aggTotals","customType","showEmpty","subtotals","totals","firstTime","readState","deleteState","gd","TitleDivId","PivotTitle","TitleDiv","defCArray","tempBlackLists","tempCollapsedValues","oldSortValues","stateChanged","allData","filteredData","tabularData","initRowConditions","initColConditions","colPointers","rowPointers","rowTotals","colTotals","gTotal","GreyList","EmptyValue","NullValue","initState","decycle","objects","paths","derez","nu","saveState","saveHiddenState","cleanState","il","whiteList","greyList","viejcolCond","viejcolRow","viejcolFilt","filterDivSelects","cleanStateWhenServerPagination","initValuePos","DataInfo","CollapseInfo","ip","ix","goWhenHide","requestPageDataForPivotTable","ReturnTotPages","AxesInfo","ExpandCollapse","preGoWhenServerPagination","stateLoad","goWhenServerPagination","ExportTo","lastNotAutorefreshIndicator","FileName","ExportToHTMLWhenServerPagination","ExportToXMLWhenServerPagination","ExportToXLSXWhenServerPagination","cleanGridCache","requestAttributeValues","FilterText","lastRequestAttributeValues","lastRequestAttributeColumnNumber","lastRequestAttributeAllData","lastRequestAttributeRequestDataField","includeLists","UserFilterValues","UserExpandValues","collapsedValues","createFilterInfo","actualValues","filteredShowValues","dimensionPictureValue","lastRequestAttributeFilterText","filterValuePars","lastRequestAttributeDataField","lastRequestAttributeUcId","lastColumnNumber","lastRequestAttributeValuesElemValue","action","lastRequestAttributeValuesAction","ExpandCollapseHandleWhenServerPaginationCreateXML","getDataForPivot","fireOnItemExpandCollapseEvent","onFilteredChangedEventHandleWhenServerPaginationCreateXML","IsCollapse","requestCalculatePivottableData","lastRequestCalculation","prevConditions","applyFilters","createAggStructure","fillAggStructure","checkAggStructure","Axis","Type","visibleData","filterDataXMLOK","forMetadatacolumns","rowPos","cantRowHidden","colPos","cantColHidden","pagePos","cantPageHidden","conPos","summarize","prevConPos","sortValue","findex","forMetadatameasures","measurePosition","yu","previuosXml","maxlevel","createXMLCOLITEMS","createXMLROWITEMS","parentCollapse","collapsed","inRow","superItem","parseText","previusJap","Hex","lightOn","lightOff","spanImageDragDrop","spanImageArrow","filterOK","fi","cond","sortFunc","coef","numSort","dictSort","prevValues","notTrimValue","initCondition","showSubtotals","hideSubtotalsOption","isDimension","hideSubtotalOption","topFilterValue","GXPL_QViewerJSAllOption","topFilterString","restoreSubtotalsAndSortLayout","mState","applyCustomFilters","initWhenServerPagination","propPage","searchInfo","oldConditions","defcolCond","defcolRow","defStIndex","oldInitMetadata","createAxisInfo","NewAxisInfo","createNewAxisInfo","createDataInfo","NewDataInfo","createNewDataInfo","oldFilterDivValues","fiv","existElm","tmp2","clearInterval","previousValuePivotWidth","antepreviusValuePivotWidth","pageFilter","MaxWidthFilters","pFIndx","clientWdt","actualWidth","ParmAxisInfo","ParmDataInfo","CreateExpandCollapseInfo","iP","filterDim","isInFilteredShowValues","fV","callServiceWhenCustomeValues","getOrderReference","conditionIndex","anchorRef","functionRef","divRef","sourceCI","targetCI","onDragundDropEventHandle","DiseablePivot","EneablePivot","startInRows","displayRef2","sourceType","sourceI","targetType","targetI","changesrowposition","getOrderReferenceProg","getClickReference","contentDiv","ShowPopUp","eventDiv","hr1","hr2","subtotal_sel_div","sl","GXPL_QViewerJSSubtotals","pivotStateChanged","appendActionsSeparator","pivotpurp","pivotpurp_sel_div","changedFromColumnToRow","GXPL_QViewerJSPivotDimensionToColumn","GXPL_QViewerJSPivotDimensionToRow","Ipadpurp","Ipadpurp_sel_div","ippl","GXPL_QViewerJSMoveToFilterBar","updateRowConditions","fromFilters","addCol","unhiddenDim","tempRowConditions","nO","axis","getDelFilterReference","ifs","filterIndex","valueIsShowed","allFilters","getPair","onFilteredChangedEventHandleWhenServerPagination","divDis","ht","addExpandCollapseFunctionality","rowConditionNumber","rowDimension","divImg","spanTxt","setExpandCollapseEventHandlers","ItemDoubleClick","raiseItemClick","onClickExpandCollapse","getPerFilterValue","prevFilterSelectedValue","actualfilterIndex","hayfiltro","distinctPerFilterValue","drawTitleDiv","drawFilters","savedValues","filterInfoIcon","spanHover","GXPL_QViewerInfoUser","strng","GXPL_QViewerJSDropFiltersHere","spanText","loadItems","callgo","loaded","ref","filterIcon","checkInfoFilters","preGoWhenShowHideDimension","preGoWhenShowHideMeasures","autoNumber","exportXMLButtonSub","lastRequestPivotDataCalculation","exportPdfButton","_drawCorner","setTitleTexrtAlign","_drawRowConditionsHeadingsCustom","isMeasureByName","resp","largo","GXPL_QViewerJSMeasures","headerName","ismeasure","pd","_drawRowConditionsHeadings","GXPL_QViewerJSValue","appendRowToTable","toolbarTable","_drawColConditionsHeadingsCustom","borderRightColor","_drawColConditionsHeadings","getClassName","columndatatype","lastMEasure","dat","getMeasureNumber","getMeasureName","countedRows","isTitleRow","drawTableWhenServerPagination","myTable","ni","columnValue","columnnumber","columndimension","rownumber","hiddenGrandTotal","isGrandTotal","GXPL_QViewerJSTotal","GXPL_QViewerJSTotalFor","borderLeftColor","repeticiones","several_totals","skipRow","itemCollapsed","collapsedCells","cc","measureTitle","getMeasureNumberByName","ji","mN","isTotal","subtitleClass","getMeasureNumberByDataField","valueClass","drawTableWhenShowMeasuresAsRows","firstRowTotalSpan","_mtotalSpan","collapsedColInfo","columnsDataHide","columnsDataHideFillWithBlanck","td_collection_forCollapseInfo","tempItem","blankcell","totalSpan","collapsedInfo","subtotalsmeasuresList","grandtotalsmeasuresList","searchVal","rowsPositions","ptrArray","measureslength","mesauresList","lateralMeasureList","itemMV","formulaRow","getFormulaRowByCoord","saveValue","colPointerNumber","columnCoord","rowCoord","getMeasureValueCoord","subValue","NaN","total_","calculateFormulaTotal","reduce","MaxDept","relativeDim","addSubTotal","itemTemp","ptrArrayTemp","ptrTemp","pDim","sumM","valuesToOperate","vt","IsReduceNuN","isNuN","vft","createTempDataStructForAggStepOptimization","getMeasureValue","colDim","dimValues","dimPosition","rowsCoord","colCoord","numRow","tosearch","coinciden","pC","inputData","addToStack","conditionList","value_cond_row_pos","value_prev_cond_row_pos","createPart","struct","tempSearchData","dimensionLenght","filaAOrdenar","sortNumeric","newstack","itemsInclude","newStackValues","addToStack3","used","conditionNumber","valuePositionInSearchData","addToStack2","measureName","podar","measureValue","orden","value_prev","valuePosition","fillPart","rindex","posTitleMeasure","fillAllPart","ptrT","tempPt","itemLg","iterI","resultado","applyDefaultFormats","decimalPoint","bli","tempBlack","ib","rowPosition","trimValue","fils","getRowFromDimensionRow","rowCollection","rCL","same","rwoI","notInBlackList","esta","presentMeasures","DataFile","columnIndex","previousPosition","defpos","posIndex","tempRowConsition","existe","tempColConsition","tempFilConsition","stateHidden","newMetadata","log","canBeConsiderNoNew","helperList","notNew","preGoWhenMoveTopFilter","initLoad","dataColumns","previousRecord","newRecord","isNotFilterByTopFilter","preGoWhenFilterByTopFilter","addPageToCache","pageNum","getPageDataFromCache","fireOnPageChange","autorefreshflag","AxisChangeDataField","layoutForCollapseExpand","notAutorefresh","layoutChange","notNullVal","Expanded","Collapsed","NullExpanded","hiddenPos","Order","Subtotal","Position","Subtotals","posincol","cont","noterminar","iterRC","dataFieldRC","itAI","positionDF","Hidden","visiblePos","isFromMetadata","toDelete","sInput","ExpandCollapseHandleWhenServerPagination","cleanValueForNull","isClickedRow","columnOfValue","otherrow","isColumnDimensionValue","isClickedRowMeasure","requestDataSynForPivotTable","LastElemValue","parentElement","previuosDat","dataFieldsList","isNotSubtotal","cellNumber","filtRows","filtFullRows","SelectedValue","SelectedType","SelectedMorDNumber","SelectedItem","found","selectedCellOffset","prevRow","foundTotal","posTotal","typeTotal","itemTotal","selectedRowOffset","exit","lastRow","iterRowOffset","topRow","iterTopRow","createDataRowFromItem","selectedItemRowSpam","postRow","bellowRow","rowOffset","iterRow","offsetIter","itemRowSpan","getRowInitialShift","initialShift","getCellPositionSpanWithSpans","posWithoutSpan","posWithSpan","cellPos","itemDataRow","val1","val2","NumberMorD","numberMorD","nameMeasure","maxNumberMorD","MorD","tempMorD","tempnumberMorD","ExpandCollapseHandle","eventName","actionName","fireOnFilterChangedEvent","fireOnDragundDropEvent","iAI","iDI","initCollapseInfo","actualCollapseInfo","sortUnidimensionalArray","numConds","Statistics","longDesc","shortDesc","sum","allNuN","product","amean","Number","MIN_VALUE","MAX_VALUE","deviation","variance","sqrt","median","mode","TYPE_TEMPLATE","TYPE_MS","TYPE_MAC","TYPE_ROUND","TYPE_ODS","Win","visibleButtons","enabledButtons","outerWidth","outerHeight","stackGroupBase","template","dom","M","resizeContainer","moveTo","innerResizeTo","outerResizeTo","minimize","maximize","flip","WinTemplate","WinMS","WinMAC","WinRECT","WinROUND","WinODS","Resize","WinManager","addWindow","oat_w_ctr","oat_w_title_ctr","oat_w_title_t_ctr","oat_w_content","oat_w_max_b","oat_w_min_b","oat_w_close_b","oat_w_flip_b","oat_w_resize_handle","rc","tr_t","td_lt","td_t","td_rt","tr_m","td_l","td_m","td_r","tr_b","td_lb","td_b","td_rb","Browser","stackingGroups","removeWindow","zI","_Resize_movers","_Resize_pending","XMLHTTP","iframe","temp_src","ifr","setResponse","getResponseText","getResponseXML","responseXML","getReadyState","getStatus","isIframe","ActiveXObject","XMLHTTP_supported","AnchorData","appendContent","fixSize","callForData","stat","datasource","connection","bindRecord","bindEmpty","FormObject","showAll","bindRecordCallback","bindPage","bindPageCallback","bindHeader","bindHeaderCallback","Form","onDone","resizeTo","totalWidth","totalHeight","anchorTo","bindFile","Xml","createXmlDoc","createFromXML","timeline","datasources","fieldSets","realIndexes","endpoint","DataSourceData","TYPE_SPARQL","SparqlQuery","fromString","variables","TYPE_GDATA","advanceRecord","arrow","endClose","startClose","displayRef","closeRef","closeFlag","openAnchor","startFunction","conditionFunction","stepFunction","stopFunction","running","AnimationSize","stepX","stepY","diffX","diffY","signX","signY","AnimationOpacity","step_","AnimationCSS","ext","arrayLength","partialArray","totalPagesId","currPageId","rowsPerPageId","firstPageId","prevPageId","nextPageId","lastPageId","tblLocation","possibleTableRows","resetTotalPages","resetCurrentPage","currPageNum","cantRows","resetPerPageValues","optsPerPage","perPageDropdown","Option","createPaginationElements","mul","prevButtonsClass","postButtonsClass","htmlBuffer","GXPL_QViewerJSPerPage","GXPL_QViewerJSPage","GXPL_QViewerJSOf","myPivotScss","QUERYVIEWER1_Queryviewer1","debugServices","fadeTimeouts","UseRecordsetCache","GXPL_QViewerSinceTheBeginningTrend","GXPL_QViewerLastDayTrend","GXPL_QViewerLastHourTrend","handledataforpivottable","componentDidLoad","QueryViewerTranslations","render"],"sources":["node_modules/jquery/dist/jquery.js","node_modules/jspivottable/oat_pivotTable.js","src/components/pivot/my-pivot.scss?tag=my-pivot","src/components/pivot/my-pivot.tsx"],"sourcesContent":["/*!\n * jQuery JavaScript Library v3.7.1\n * https://jquery.com/\n *\n * Copyright OpenJS Foundation and other contributors\n * Released under the MIT license\n * https://jquery.org/license\n *\n * Date: 2023-08-28T13:37Z\n */\n( function( global, factory ) {\n\n\t\"use strict\";\n\n\tif ( typeof module === \"object\" && typeof module.exports === \"object\" ) {\n\n\t\t// For CommonJS and CommonJS-like environments where a proper `window`\n\t\t// is present, execute the factory and get jQuery.\n\t\t// For environments that do not have a `window` with a `document`\n\t\t// (such as Node.js), expose a factory as module.exports.\n\t\t// This accentuates the need for the creation of a real `window`.\n\t\t// e.g. var jQuery = require(\"jquery\")(window);\n\t\t// See ticket trac-14549 for more info.\n\t\tmodule.exports = global.document ?\n\t\t\tfactory( global, true ) :\n\t\t\tfunction( w ) {\n\t\t\t\tif ( !w.document ) {\n\t\t\t\t\tthrow new Error( \"jQuery requires a window with a document\" );\n\t\t\t\t}\n\t\t\t\treturn factory( w );\n\t\t\t};\n\t} else {\n\t\tfactory( global );\n\t}\n\n// Pass this if window is not defined yet\n} )( typeof window !== \"undefined\" ? window : this, function( window, noGlobal ) {\n\n// Edge <= 12 - 13+, Firefox <=18 - 45+, IE 10 - 11, Safari 5.1 - 9+, iOS 6 - 9.1\n// throw exceptions when non-strict code (e.g., ASP.NET 4.5) accesses strict mode\n// arguments.callee.caller (trac-13335). But as of jQuery 3.0 (2016), strict mode should be common\n// enough that all such attempts are guarded in a try block.\n\"use strict\";\n\nvar arr = [];\n\nvar getProto = Object.getPrototypeOf;\n\nvar slice = arr.slice;\n\nvar flat = arr.flat ? function( array ) {\n\treturn arr.flat.call( array );\n} : function( array ) {\n\treturn arr.concat.apply( [], array );\n};\n\n\nvar push = arr.push;\n\nvar indexOf = arr.indexOf;\n\nvar class2type = {};\n\nvar toString = class2type.toString;\n\nvar hasOwn = class2type.hasOwnProperty;\n\nvar fnToString = hasOwn.toString;\n\nvar ObjectFunctionString = fnToString.call( Object );\n\nvar support = {};\n\nvar isFunction = function isFunction( obj ) {\n\n\t\t// Support: Chrome <=57, Firefox <=52\n\t\t// In some browsers, typeof returns \"function\" for HTML <object> elements\n\t\t// (i.e., `typeof document.createElement( \"object\" ) === \"function\"`).\n\t\t// We don't want to classify *any* DOM node as a function.\n\t\t// Support: QtWeb <=3.8.5, WebKit <=534.34, wkhtmltopdf tool <=0.12.5\n\t\t// Plus for old WebKit, typeof returns \"function\" for HTML collections\n\t\t// (e.g., `typeof document.getElementsByTagName(\"div\") === \"function\"`). (gh-4756)\n\t\treturn typeof obj === \"function\" && typeof obj.nodeType !== \"number\" &&\n\t\t\ttypeof obj.item !== \"function\";\n\t};\n\n\nvar isWindow = function isWindow( obj ) {\n\t\treturn obj != null && obj === obj.window;\n\t};\n\n\nvar document = window.document;\n\n\n\n\tvar preservedScriptAttributes = {\n\t\ttype: true,\n\t\tsrc: true,\n\t\tnonce: true,\n\t\tnoModule: true\n\t};\n\n\tfunction DOMEval( code, node, doc ) {\n\t\tdoc = doc || document;\n\n\t\tvar i, val,\n\t\t\tscript = doc.createElement( \"script\" );\n\n\t\tscript.text = code;\n\t\tif ( node ) {\n\t\t\tfor ( i in preservedScriptAttributes ) {\n\n\t\t\t\t// Support: Firefox 64+, Edge 18+\n\t\t\t\t// Some browsers don't support the \"nonce\" property on scripts.\n\t\t\t\t// On the other hand, just using `getAttribute` is not enough as\n\t\t\t\t// the `nonce` attribute is reset to an empty string whenever it\n\t\t\t\t// becomes browsing-context connected.\n\t\t\t\t// See https://github.com/whatwg/html/issues/2369\n\t\t\t\t// See https://html.spec.whatwg.org/#nonce-attributes\n\t\t\t\t// The `node.getAttribute` check was added for the sake of\n\t\t\t\t// `jQuery.globalEval` so that it can fake a nonce-containing node\n\t\t\t\t// via an object.\n\t\t\t\tval = node[ i ] || node.getAttribute && node.getAttribute( i );\n\t\t\t\tif ( val ) {\n\t\t\t\t\tscript.setAttribute( i, val );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tdoc.head.appendChild( script ).parentNode.removeChild( script );\n\t}\n\n\nfunction toType( obj ) {\n\tif ( obj == null ) {\n\t\treturn obj + \"\";\n\t}\n\n\t// Support: Android <=2.3 only (functionish RegExp)\n\treturn typeof obj === \"object\" || typeof obj === \"function\" ?\n\t\tclass2type[ toString.call( obj ) ] || \"object\" :\n\t\ttypeof obj;\n}\n/* global Symbol */\n// Defining this global in .eslintrc.json would create a danger of using the global\n// unguarded in another place, it seems safer to define global only for this module\n\n\n\nvar version = \"3.7.1\",\n\n\trhtmlSuffix = /HTML$/i,\n\n\t// Define a local copy of jQuery\n\tjQuery = function( selector, context ) {\n\n\t\t// The jQuery object is actually just the init constructor 'enhanced'\n\t\t// Need init if jQuery is called (just allow error to be thrown if not included)\n\t\treturn new jQuery.fn.init( selector, context );\n\t};\n\njQuery.fn = jQuery.prototype = {\n\n\t// The current version of jQuery being used\n\tjquery: version,\n\n\tconstructor: jQuery,\n\n\t// The default length of a jQuery object is 0\n\tlength: 0,\n\n\ttoArray: function() {\n\t\treturn slice.call( this );\n\t},\n\n\t// Get the Nth element in the matched element set OR\n\t// Get the whole matched element set as a clean array\n\tget: function( num ) {\n\n\t\t// Return all the elements in a clean array\n\t\tif ( num == null ) {\n\t\t\treturn slice.call( this );\n\t\t}\n\n\t\t// Return just the one element from the set\n\t\treturn num < 0 ? this[ num + this.length ] : this[ num ];\n\t},\n\n\t// Take an array of elements and push it onto the stack\n\t// (returning the new matched element set)\n\tpushStack: function( elems ) {\n\n\t\t// Build a new jQuery matched element set\n\t\tvar ret = jQuery.merge( this.constructor(), elems );\n\n\t\t// Add the old object onto the stack (as a reference)\n\t\tret.prevObject = this;\n\n\t\t// Return the newly-formed element set\n\t\treturn ret;\n\t},\n\n\t// Execute a callback for every element in the matched set.\n\teach: function( callback ) {\n\t\treturn jQuery.each( this, callback );\n\t},\n\n\tmap: function( callback ) {\n\t\treturn this.pushStack( jQuery.map( this, function( elem, i ) {\n\t\t\treturn callback.call( elem, i, elem );\n\t\t} ) );\n\t},\n\n\tslice: function() {\n\t\treturn this.pushStack( slice.apply( this, arguments ) );\n\t},\n\n\tfirst: function() {\n\t\treturn this.eq( 0 );\n\t},\n\n\tlast: function() {\n\t\treturn this.eq( -1 );\n\t},\n\n\teven: function() {\n\t\treturn this.pushStack( jQuery.grep( this, function( _elem, i ) {\n\t\t\treturn ( i + 1 ) % 2;\n\t\t} ) );\n\t},\n\n\todd: function() {\n\t\treturn this.pushStack( jQuery.grep( this, function( _elem, i ) {\n\t\t\treturn i % 2;\n\t\t} ) );\n\t},\n\n\teq: function( i ) {\n\t\tvar len = this.length,\n\t\t\tj = +i + ( i < 0 ? len : 0 );\n\t\treturn this.pushStack( j >= 0 && j < len ? [ this[ j ] ] : [] );\n\t},\n\n\tend: function() {\n\t\treturn this.prevObject || this.constructor();\n\t},\n\n\t// For internal use only.\n\t// Behaves like an Array's method, not like a jQuery method.\n\tpush: push,\n\tsort: arr.sort,\n\tsplice: arr.splice\n};\n\njQuery.extend = jQuery.fn.extend = function() {\n\tvar options, name, src, copy, copyIsArray, clone,\n\t\ttarget = arguments[ 0 ] || {},\n\t\ti = 1,\n\t\tlength = arguments.length,\n\t\tdeep = false;\n\n\t// Handle a deep copy situation\n\tif ( typeof target === \"boolean\" ) {\n\t\tdeep = target;\n\n\t\t// Skip the boolean and the target\n\t\ttarget = arguments[ i ] || {};\n\t\ti++;\n\t}\n\n\t// Handle case when target is a string or something (possible in deep copy)\n\tif ( typeof target !== \"object\" && !isFunction( target ) ) {\n\t\ttarget = {};\n\t}\n\n\t// Extend jQuery itself if only one argument is passed\n\tif ( i === length ) {\n\t\ttarget = this;\n\t\ti--;\n\t}\n\n\tfor ( ; i < length; i++ ) {\n\n\t\t// Only deal with non-null/undefined values\n\t\tif ( ( options = arguments[ i ] ) != null ) {\n\n\t\t\t// Extend the base object\n\t\t\tfor ( name in options ) {\n\t\t\t\tcopy = options[ name ];\n\n\t\t\t\t// Prevent Object.prototype pollution\n\t\t\t\t// Prevent never-ending loop\n\t\t\t\tif ( name === \"__proto__\" || target === copy ) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// Recurse if we're merging plain objects or arrays\n\t\t\t\tif ( deep && copy && ( jQuery.isPlainObject( copy ) ||\n\t\t\t\t\t( copyIsArray = Array.isArray( copy ) ) ) ) {\n\t\t\t\t\tsrc = target[ name ];\n\n\t\t\t\t\t// Ensure proper type for the source value\n\t\t\t\t\tif ( copyIsArray && !Array.isArray( src ) ) {\n\t\t\t\t\t\tclone = [];\n\t\t\t\t\t} else if ( !copyIsArray && !jQuery.isPlainObject( src ) ) {\n\t\t\t\t\t\tclone = {};\n\t\t\t\t\t} else {\n\t\t\t\t\t\tclone = src;\n\t\t\t\t\t}\n\t\t\t\t\tcopyIsArray = false;\n\n\t\t\t\t\t// Never move original objects, clone them\n\t\t\t\t\ttarget[ name ] = jQuery.extend( deep, clone, copy );\n\n\t\t\t\t// Don't bring in undefined values\n\t\t\t\t} else if ( copy !== undefined ) {\n\t\t\t\t\ttarget[ name ] = copy;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Return the modified object\n\treturn target;\n};\n\njQuery.extend( {\n\n\t// Unique for each copy of jQuery on the page\n\texpando: \"jQuery\" + ( version + Math.random() ).replace( /\\D/g, \"\" ),\n\n\t// Assume jQuery is ready without the ready module\n\tisReady: true,\n\n\terror: function( msg ) {\n\t\tthrow new Error( msg );\n\t},\n\n\tnoop: function() {},\n\n\tisPlainObject: function( obj ) {\n\t\tvar proto, Ctor;\n\n\t\t// Detect obvious negatives\n\t\t// Use toString instead of jQuery.type to catch host objects\n\t\tif ( !obj || toString.call( obj ) !== \"[object Object]\" ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tproto = getProto( obj );\n\n\t\t// Objects with no prototype (e.g., `Object.create( null )`) are plain\n\t\tif ( !proto ) {\n\t\t\treturn true;\n\t\t}\n\n\t\t// Objects with prototype are plain iff they were constructed by a global Object function\n\t\tCtor = hasOwn.call( proto, \"constructor\" ) && proto.constructor;\n\t\treturn typeof Ctor === \"function\" && fnToString.call( Ctor ) === ObjectFunctionString;\n\t},\n\n\tisEmptyObject: function( obj ) {\n\t\tvar name;\n\n\t\tfor ( name in obj ) {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t},\n\n\t// Evaluates a script in a provided context; falls back to the global one\n\t// if not specified.\n\tglobalEval: function( code, options, doc ) {\n\t\tDOMEval( code, { nonce: options && options.nonce }, doc );\n\t},\n\n\teach: function( obj, callback ) {\n\t\tvar length, i = 0;\n\n\t\tif ( isArrayLike( obj ) ) {\n\t\t\tlength = obj.length;\n\t\t\tfor ( ; i < length; i++ ) {\n\t\t\t\tif ( callback.call( obj[ i ], i, obj[ i ] ) === false ) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tfor ( i in obj ) {\n\t\t\t\tif ( callback.call( obj[ i ], i, obj[ i ] ) === false ) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn obj;\n\t},\n\n\n\t// Retrieve the text value of an array of DOM nodes\n\ttext: function( elem ) {\n\t\tvar node,\n\t\t\tret = \"\",\n\t\t\ti = 0,\n\t\t\tnodeType = elem.nodeType;\n\n\t\tif ( !nodeType ) {\n\n\t\t\t// If no nodeType, this is expected to be an array\n\t\t\twhile ( ( node = elem[ i++ ] ) ) {\n\n\t\t\t\t// Do not traverse comment nodes\n\t\t\t\tret += jQuery.text( node );\n\t\t\t}\n\t\t}\n\t\tif ( nodeType === 1 || nodeType === 11 ) {\n\t\t\treturn elem.textContent;\n\t\t}\n\t\tif ( nodeType === 9 ) {\n\t\t\treturn elem.documentElement.textContent;\n\t\t}\n\t\tif ( nodeType === 3 || nodeType === 4 ) {\n\t\t\treturn elem.nodeValue;\n\t\t}\n\n\t\t// Do not include comment or processing instruction nodes\n\n\t\treturn ret;\n\t},\n\n\t// results is for internal usage only\n\tmakeArray: function( arr, results ) {\n\t\tvar ret = results || [];\n\n\t\tif ( arr != null ) {\n\t\t\tif ( isArrayLike( Object( arr ) ) ) {\n\t\t\t\tjQuery.merge( ret,\n\t\t\t\t\ttypeof arr === \"string\" ?\n\t\t\t\t\t\t[ arr ] : arr\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tpush.call( ret, arr );\n\t\t\t}\n\t\t}\n\n\t\treturn ret;\n\t},\n\n\tinArray: function( elem, arr, i ) {\n\t\treturn arr == null ? -1 : indexOf.call( arr, elem, i );\n\t},\n\n\tisXMLDoc: function( elem ) {\n\t\tvar namespace = elem && elem.namespaceURI,\n\t\t\tdocElem = elem && ( elem.ownerDocument || elem ).documentElement;\n\n\t\t// Assume HTML when documentElement doesn't yet exist, such as inside\n\t\t// document fragments.\n\t\treturn !rhtmlSuffix.test( namespace || docElem && docElem.nodeName || \"HTML\" );\n\t},\n\n\t// Support: Android <=4.0 only, PhantomJS 1 only\n\t// push.apply(_, arraylike) throws on ancient WebKit\n\tmerge: function( first, second ) {\n\t\tvar len = +second.length,\n\t\t\tj = 0,\n\t\t\ti = first.length;\n\n\t\tfor ( ; j < len; j++ ) {\n\t\t\tfirst[ i++ ] = second[ j ];\n\t\t}\n\n\t\tfirst.length = i;\n\n\t\treturn first;\n\t},\n\n\tgrep: function( elems, callback, invert ) {\n\t\tvar callbackInverse,\n\t\t\tmatches = [],\n\t\t\ti = 0,\n\t\t\tlength = elems.length,\n\t\t\tcallbackExpect = !invert;\n\n\t\t// Go through the array, only saving the items\n\t\t// that pass the validator function\n\t\tfor ( ; i < length; i++ ) {\n\t\t\tcallbackInverse = !callback( elems[ i ], i );\n\t\t\tif ( callbackInverse !== callbackExpect ) {\n\t\t\t\tmatches.push( elems[ i ] );\n\t\t\t}\n\t\t}\n\n\t\treturn matches;\n\t},\n\n\t// arg is for internal usage only\n\tmap: function( elems, callback, arg ) {\n\t\tvar length, value,\n\t\t\ti = 0,\n\t\t\tret = [];\n\n\t\t// Go through the array, translating each of the items to their new values\n\t\tif ( isArrayLike( elems ) ) {\n\t\t\tlength = elems.length;\n\t\t\tfor ( ; i < length; i++ ) {\n\t\t\t\tvalue = callback( elems[ i ], i, arg );\n\n\t\t\t\tif ( value != null ) {\n\t\t\t\t\tret.push( value );\n\t\t\t\t}\n\t\t\t}\n\n\t\t// Go through every key on the object,\n\t\t} else {\n\t\t\tfor ( i in elems ) {\n\t\t\t\tvalue = callback( elems[ i ], i, arg );\n\n\t\t\t\tif ( value != null ) {\n\t\t\t\t\tret.push( value );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Flatten any nested arrays\n\t\treturn flat( ret );\n\t},\n\n\t// A global GUID counter for objects\n\tguid: 1,\n\n\t// jQuery.support is not used in Core but other projects attach their\n\t// properties to it so it needs to exist.\n\tsupport: support\n} );\n\nif ( typeof Symbol === \"function\" ) {\n\tjQuery.fn[ Symbol.iterator ] = arr[ Symbol.iterator ];\n}\n\n// Populate the class2type map\njQuery.each( \"Boolean Number String Function Array Date RegExp Object Error Symbol\".split( \" \" ),\n\tfunction( _i, name ) {\n\t\tclass2type[ \"[object \" + name + \"]\" ] = name.toLowerCase();\n\t} );\n\nfunction isArrayLike( obj ) {\n\n\t// Support: real iOS 8.2 only (not reproducible in simulator)\n\t// `in` check used to prevent JIT error (gh-2145)\n\t// hasOwn isn't used here due to false negatives\n\t// regarding Nodelist length in IE\n\tvar length = !!obj && \"length\" in obj && obj.length,\n\t\ttype = toType( obj );\n\n\tif ( isFunction( obj ) || isWindow( obj ) ) {\n\t\treturn false;\n\t}\n\n\treturn type === \"array\" || length === 0 ||\n\t\ttypeof length === \"number\" && length > 0 && ( length - 1 ) in obj;\n}\n\n\nfunction nodeName( elem, name ) {\n\n\treturn elem.nodeName && elem.nodeName.toLowerCase() === name.toLowerCase();\n\n}\nvar pop = arr.pop;\n\n\nvar sort = arr.sort;\n\n\nvar splice = arr.splice;\n\n\nvar whitespace = \"[\\\\x20\\\\t\\\\r\\\\n\\\\f]\";\n\n\nvar rtrimCSS = new RegExp(\n\t\"^\" + whitespace + \"+|((?:^|[^\\\\\\\\])(?:\\\\\\\\.)*)\" + whitespace + \"+$\",\n\t\"g\"\n);\n\n\n\n\n// Note: an element does not contain itself\njQuery.contains = function( a, b ) {\n\tvar bup = b && b.parentNode;\n\n\treturn a === bup || !!( bup && bup.nodeType === 1 && (\n\n\t\t// Support: IE 9 - 11+\n\t\t// IE doesn't have `contains` on SVG.\n\t\ta.contains ?\n\t\t\ta.contains( bup ) :\n\t\t\ta.compareDocumentPosition && a.compareDocumentPosition( bup ) & 16\n\t) );\n};\n\n\n\n\n// CSS string/identifier serialization\n// https://drafts.csswg.org/cssom/#common-serializing-idioms\nvar rcssescape = /([\\0-\\x1f\\x7f]|^-?\\d)|^-$|[^\\x80-\\uFFFF\\w-]/g;\n\nfunction fcssescape( ch, asCodePoint ) {\n\tif ( asCodePoint ) {\n\n\t\t// U+0000 NULL becomes U+FFFD REPLACEMENT CHARACTER\n\t\tif ( ch === \"\\0\" ) {\n\t\t\treturn \"\\uFFFD\";\n\t\t}\n\n\t\t// Control characters and (dependent upon position) numbers get escaped as code points\n\t\treturn ch.slice( 0, -1 ) + \"\\\\\" + ch.charCodeAt( ch.length - 1 ).toString( 16 ) + \" \";\n\t}\n\n\t// Other potentially-special ASCII characters get backslash-escaped\n\treturn \"\\\\\" + ch;\n}\n\njQuery.escapeSelector = function( sel ) {\n\treturn ( sel + \"\" ).replace( rcssescape, fcssescape );\n};\n\n\n\n\nvar preferredDoc = document,\n\tpushNative = push;\n\n( function() {\n\nvar i,\n\tExpr,\n\toutermostContext,\n\tsortInput,\n\thasDuplicate,\n\tpush = pushNative,\n\n\t// Local document vars\n\tdocument,\n\tdocumentElement,\n\tdocumentIsHTML,\n\trbuggyQSA,\n\tmatches,\n\n\t// Instance-specific data\n\texpando = jQuery.expando,\n\tdirruns = 0,\n\tdone = 0,\n\tclassCache = createCache(),\n\ttokenCache = createCache(),\n\tcompilerCache = createCache(),\n\tnonnativeSelectorCache = createCache(),\n\tsortOrder = function( a, b ) {\n\t\tif ( a === b ) {\n\t\t\thasDuplicate = true;\n\t\t}\n\t\treturn 0;\n\t},\n\n\tbooleans = \"checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|\" +\n\t\t\"loop|multiple|open|readonly|required|scoped\",\n\n\t// Regular expressions\n\n\t// https://www.w3.org/TR/css-syntax-3/#ident-token-diagram\n\tidentifier = \"(?:\\\\\\\\[\\\\da-fA-F]{1,6}\" + whitespace +\n\t\t\"?|\\\\\\\\[^\\\\r\\\\n\\\\f]|[\\\\w-]|[^\\0-\\\\x7f])+\",\n\n\t// Attribute selectors: https://www.w3.org/TR/selectors/#attribute-selectors\n\tattributes = \"\\\\[\" + whitespace + \"*(\" + identifier + \")(?:\" + whitespace +\n\n\t\t// Operator (capture 2)\n\t\t\"*([*^$|!~]?=)\" + whitespace +\n\n\t\t// \"Attribute values must be CSS identifiers [capture 5] or strings [capture 3 or capture 4]\"\n\t\t\"*(?:'((?:\\\\\\\\.|[^\\\\\\\\'])*)'|\\\"((?:\\\\\\\\.|[^\\\\\\\\\\\"])*)\\\"|(\" + identifier + \"))|)\" +\n\t\twhitespace + \"*\\\\]\",\n\n\tpseudos = \":(\" + identifier + \")(?:\\\\((\" +\n\n\t\t// To reduce the number of selectors needing tokenize in the preFilter, prefer arguments:\n\t\t// 1. quoted (capture 3; capture 4 or capture 5)\n\t\t\"('((?:\\\\\\\\.|[^\\\\\\\\'])*)'|\\\"((?:\\\\\\\\.|[^\\\\\\\\\\\"])*)\\\")|\" +\n\n\t\t// 2. simple (capture 6)\n\t\t\"((?:\\\\\\\\.|[^\\\\\\\\()[\\\\]]|\" + attributes + \")*)|\" +\n\n\t\t// 3. anything else (capture 2)\n\t\t\".*\" +\n\t\t\")\\\\)|)\",\n\n\t// Leading and non-escaped trailing whitespace, capturing some non-whitespace characters preceding the latter\n\trwhitespace = new RegExp( whitespace + \"+\", \"g\" ),\n\n\trcomma = new RegExp( \"^\" + whitespace + \"*,\" + whitespace + \"*\" ),\n\trleadingCombinator = new RegExp( \"^\" + whitespace + \"*([>+~]|\" + whitespace + \")\" +\n\t\twhitespace + \"*\" ),\n\trdescend = new RegExp( whitespace + \"|>\" ),\n\n\trpseudo = new RegExp( pseudos ),\n\tridentifier = new RegExp( \"^\" + identifier + \"$\" ),\n\n\tmatchExpr = {\n\t\tID: new RegExp( \"^#(\" + identifier + \")\" ),\n\t\tCLASS: new RegExp( \"^\\\\.(\" + identifier + \")\" ),\n\t\tTAG: new RegExp( \"^(\" + identifier + \"|[*])\" ),\n\t\tATTR: new RegExp( \"^\" + attributes ),\n\t\tPSEUDO: new RegExp( \"^\" + pseudos ),\n\t\tCHILD: new RegExp(\n\t\t\t\"^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\\\(\" +\n\t\t\t\twhitespace + \"*(even|odd|(([+-]|)(\\\\d*)n|)\" + whitespace + \"*(?:([+-]|)\" +\n\t\t\t\twhitespace + \"*(\\\\d+)|))\" + whitespace + \"*\\\\)|)\", \"i\" ),\n\t\tbool: new RegExp( \"^(?:\" + booleans + \")$\", \"i\" ),\n\n\t\t// For use in libraries implementing .is()\n\t\t// We use this for POS matching in `select`\n\t\tneedsContext: new RegExp( \"^\" + whitespace +\n\t\t\t\"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\\\(\" + whitespace +\n\t\t\t\"*((?:-\\\\d)?\\\\d*)\" + whitespace + \"*\\\\)|)(?=[^-]|$)\", \"i\" )\n\t},\n\n\trinputs = /^(?:input|select|textarea|button)$/i,\n\trheader = /^h\\d$/i,\n\n\t// Easily-parseable/retrievable ID or TAG or CLASS selectors\n\trquickExpr = /^(?:#([\\w-]+)|(\\w+)|\\.([\\w-]+))$/,\n\n\trsibling = /[+~]/,\n\n\t// CSS escapes\n\t// https://www.w3.org/TR/CSS21/syndata.html#escaped-characters\n\trunescape = new RegExp( \"\\\\\\\\[\\\\da-fA-F]{1,6}\" + whitespace +\n\t\t\"?|\\\\\\\\([^\\\\r\\\\n\\\\f])\", \"g\" ),\n\tfunescape = function( escape, nonHex ) {\n\t\tvar high = \"0x\" + escape.slice( 1 ) - 0x10000;\n\n\t\tif ( nonHex ) {\n\n\t\t\t// Strip the backslash prefix from a non-hex escape sequence\n\t\t\treturn nonHex;\n\t\t}\n\n\t\t// Replace a hexadecimal escape sequence with the encoded Unicode code point\n\t\t// Support: IE <=11+\n\t\t// For values outside the Basic Multilingual Plane (BMP), manually construct a\n\t\t// surrogate pair\n\t\treturn high < 0 ?\n\t\t\tString.fromCharCode( high + 0x10000 ) :\n\t\t\tString.fromCharCode( high >> 10 | 0xD800, high & 0x3FF | 0xDC00 );\n\t},\n\n\t// Used for iframes; see `setDocument`.\n\t// Support: IE 9 - 11+, Edge 12 - 18+\n\t// Removing the function wrapper causes a \"Permission Denied\"\n\t// error in IE/Edge.\n\tunloadHandler = function() {\n\t\tsetDocument();\n\t},\n\n\tinDisabledFieldset = addCombinator(\n\t\tfunction( elem ) {\n\t\t\treturn elem.disabled === true && nodeName( elem, \"fieldset\" );\n\t\t},\n\t\t{ dir: \"parentNode\", next: \"legend\" }\n\t);\n\n// Support: IE <=9 only\n// Accessing document.activeElement can throw unexpectedly\n// https://bugs.jquery.com/ticket/13393\nfunction safeActiveElement() {\n\ttry {\n\t\treturn document.activeElement;\n\t} catch ( err ) { }\n}\n\n// Optimize for push.apply( _, NodeList )\ntry {\n\tpush.apply(\n\t\t( arr = slice.call( preferredDoc.childNodes ) ),\n\t\tpreferredDoc.childNodes\n\t);\n\n\t// Support: Android <=4.0\n\t// Detect silently failing push.apply\n\t// eslint-disable-next-line no-unused-expressions\n\tarr[ preferredDoc.childNodes.length ].nodeType;\n} catch ( e ) {\n\tpush = {\n\t\tapply: function( target, els ) {\n\t\t\tpushNative.apply( target, slice.call( els ) );\n\t\t},\n\t\tcall: function( target ) {\n\t\t\tpushNative.apply( target, slice.call( arguments, 1 ) );\n\t\t}\n\t};\n}\n\nfunction find( selector, context, results, seed ) {\n\tvar m, i, elem, nid, match, groups, newSelector,\n\t\tnewContext = context && context.ownerDocument,\n\n\t\t// nodeType defaults to 9, since context defaults to document\n\t\tnodeType = context ? context.nodeType : 9;\n\n\tresults = results || [];\n\n\t// Return early from calls with invalid selector or context\n\tif ( typeof selector !== \"string\" || !selector ||\n\t\tnodeType !== 1 && nodeType !== 9 && nodeType !== 11 ) {\n\n\t\treturn results;\n\t}\n\n\t// Try to shortcut find operations (as opposed to filters) in HTML documents\n\tif ( !seed ) {\n\t\tsetDocument( context );\n\t\tcontext = context || document;\n\n\t\tif ( documentIsHTML ) {\n\n\t\t\t// If the selector is sufficiently simple, try using a \"get*By*\" DOM method\n\t\t\t// (excepting DocumentFragment context, where the methods don't exist)\n\t\t\tif ( nodeType !== 11 && ( match = rquickExpr.exec( selector ) ) ) {\n\n\t\t\t\t// ID selector\n\t\t\t\tif ( ( m = match[ 1 ] ) ) {\n\n\t\t\t\t\t// Document context\n\t\t\t\t\tif ( nodeType === 9 ) {\n\t\t\t\t\t\tif ( ( elem = context.getElementById( m ) ) ) {\n\n\t\t\t\t\t\t\t// Support: IE 9 only\n\t\t\t\t\t\t\t// getElementById can match elements by name instead of ID\n\t\t\t\t\t\t\tif ( elem.id === m ) {\n\t\t\t\t\t\t\t\tpush.call( results, elem );\n\t\t\t\t\t\t\t\treturn results;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn results;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t// Element context\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// Support: IE 9 only\n\t\t\t\t\t\t// getElementById can match elements by name instead of ID\n\t\t\t\t\t\tif ( newContext && ( elem = newContext.getElementById( m ) ) &&\n\t\t\t\t\t\t\tfind.contains( context, elem ) &&\n\t\t\t\t\t\t\telem.id === m ) {\n\n\t\t\t\t\t\t\tpush.call( results, elem );\n\t\t\t\t\t\t\treturn results;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t// Type selector\n\t\t\t\t} else if ( match[ 2 ] ) {\n\t\t\t\t\tpush.apply( results, context.getElementsByTagName( selector ) );\n\t\t\t\t\treturn results;\n\n\t\t\t\t// Class selector\n\t\t\t\t} else if ( ( m = match[ 3 ] ) && context.getElementsByClassName ) {\n\t\t\t\t\tpush.apply( results, context.getElementsByClassName( m ) );\n\t\t\t\t\treturn results;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Take advantage of querySelectorAll\n\t\t\tif ( !nonnativeSelectorCache[ selector + \" \" ] &&\n\t\t\t\t( !rbuggyQSA || !rbuggyQSA.test( selector ) ) ) {\n\n\t\t\t\tnewSelector = selector;\n\t\t\t\tnewContext = context;\n\n\t\t\t\t// qSA considers elements outside a scoping root when evaluating child or\n\t\t\t\t// descendant combinators, which is not what we want.\n\t\t\t\t// In such cases, we work around the behavior by prefixing every selector in the\n\t\t\t\t// list with an ID selector referencing the scope context.\n\t\t\t\t// The technique has to be used as well when a leading combinator is used\n\t\t\t\t// as such selectors are not recognized by querySelectorAll.\n\t\t\t\t// Thanks to Andrew Dupont for this technique.\n\t\t\t\tif ( nodeType === 1 &&\n\t\t\t\t\t( rdescend.test( selector ) || rleadingCombinator.test( selector ) ) ) {\n\n\t\t\t\t\t// Expand context for sibling selectors\n\t\t\t\t\tnewContext = rsibling.test( selector ) && testContext( context.parentNode ) ||\n\t\t\t\t\t\tcontext;\n\n\t\t\t\t\t// We can use :scope instead of the ID hack if the browser\n\t\t\t\t\t// supports it & if we're not changing the context.\n\t\t\t\t\t// Support: IE 11+, Edge 17 - 18+\n\t\t\t\t\t// IE/Edge sometimes throw a \"Permission denied\" error when\n\t\t\t\t\t// strict-comparing two documents; shallow comparisons work.\n\t\t\t\t\t// eslint-disable-next-line eqeqeq\n\t\t\t\t\tif ( newContext != context || !support.scope ) {\n\n\t\t\t\t\t\t// Capture the context ID, setting it first if necessary\n\t\t\t\t\t\tif ( ( nid = context.getAttribute( \"id\" ) ) ) {\n\t\t\t\t\t\t\tnid = jQuery.escapeSelector( nid );\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tcontext.setAttribute( \"id\", ( nid = expando ) );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Prefix every selector in the list\n\t\t\t\t\tgroups = tokenize( selector );\n\t\t\t\t\ti = groups.length;\n\t\t\t\t\twhile ( i-- ) {\n\t\t\t\t\t\tgroups[ i ] = ( nid ? \"#\" + nid : \":scope\" ) + \" \" +\n\t\t\t\t\t\t\ttoSelector( groups[ i ] );\n\t\t\t\t\t}\n\t\t\t\t\tnewSelector = groups.join( \",\" );\n\t\t\t\t}\n\n\t\t\t\ttry {\n\t\t\t\t\tpush.apply( results,\n\t\t\t\t\t\tnewContext.querySelectorAll( newSelector )\n\t\t\t\t\t);\n\t\t\t\t\treturn results;\n\t\t\t\t} catch ( qsaError ) {\n\t\t\t\t\tnonnativeSelectorCache( selector, true );\n\t\t\t\t} finally {\n\t\t\t\t\tif ( nid === expando ) {\n\t\t\t\t\t\tcontext.removeAttribute( \"id\" );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// All others\n\treturn select( selector.replace( rtrimCSS, \"$1\" ), context, results, seed );\n}\n\n/**\n * Create key-value caches of limited size\n * @returns {function(string, object)} Returns the Object data after storing it on itself with\n *\tproperty name the (space-suffixed) string and (if the cache is larger than Expr.cacheLength)\n *\tdeleting the oldest entry\n */\nfunction createCache() {\n\tvar keys = [];\n\n\tfunction cache( key, value ) {\n\n\t\t// Use (key + \" \") to avoid collision with native prototype properties\n\t\t// (see https://github.com/jquery/sizzle/issues/157)\n\t\tif ( keys.push( key + \" \" ) > Expr.cacheLength ) {\n\n\t\t\t// Only keep the most recent entries\n\t\t\tdelete cache[ keys.shift() ];\n\t\t}\n\t\treturn ( cache[ key + \" \" ] = value );\n\t}\n\treturn cache;\n}\n\n/**\n * Mark a function for special use by jQuery selector module\n * @param {Function} fn The function to mark\n */\nfunction markFunction( fn ) {\n\tfn[ expando ] = true;\n\treturn fn;\n}\n\n/**\n * Support testing using an element\n * @param {Function} fn Passed the created element and returns a boolean result\n */\nfunction assert( fn ) {\n\tvar el = document.createElement( \"fieldset\" );\n\n\ttry {\n\t\treturn !!fn( el );\n\t} catch ( e ) {\n\t\treturn false;\n\t} finally {\n\n\t\t// Remove from its parent by default\n\t\tif ( el.parentNode ) {\n\t\t\tel.parentNode.removeChild( el );\n\t\t}\n\n\t\t// release memory in IE\n\t\tel = null;\n\t}\n}\n\n/**\n * Returns a function to use in pseudos for input types\n * @param {String} type\n */\nfunction createInputPseudo( type ) {\n\treturn function( elem ) {\n\t\treturn nodeName( elem, \"input\" ) && elem.type === type;\n\t};\n}\n\n/**\n * Returns a function to use in pseudos for buttons\n * @param {String} type\n */\nfunction createButtonPseudo( type ) {\n\treturn function( elem ) {\n\t\treturn ( nodeName( elem, \"input\" ) || nodeName( elem, \"button\" ) ) &&\n\t\t\telem.type === type;\n\t};\n}\n\n/**\n * Returns a function to use in pseudos for :enabled/:disabled\n * @param {Boolean} disabled true for :disabled; false for :enabled\n */\nfunction createDisabledPseudo( disabled ) {\n\n\t// Known :disabled false positives: fieldset[disabled] > legend:nth-of-type(n+2) :can-disable\n\treturn function( elem ) {\n\n\t\t// Only certain elements can match :enabled or :disabled\n\t\t// https://html.spec.whatwg.org/multipage/scripting.html#selector-enabled\n\t\t// https://html.spec.whatwg.org/multipage/scripting.html#selector-disabled\n\t\tif ( \"form\" in elem ) {\n\n\t\t\t// Check for inherited disabledness on relevant non-disabled elements:\n\t\t\t// * listed form-associated elements in a disabled fieldset\n\t\t\t//   https://html.spec.whatwg.org/multipage/forms.html#category-listed\n\t\t\t//   https://html.spec.whatwg.org/multipage/forms.html#concept-fe-disabled\n\t\t\t// * option elements in a disabled optgroup\n\t\t\t//   https://html.spec.whatwg.org/multipage/forms.html#concept-option-disabled\n\t\t\t// All such elements have a \"form\" property.\n\t\t\tif ( elem.parentNode && elem.disabled === false ) {\n\n\t\t\t\t// Option elements defer to a parent optgroup if present\n\t\t\t\tif ( \"label\" in elem ) {\n\t\t\t\t\tif ( \"label\" in elem.parentNode ) {\n\t\t\t\t\t\treturn elem.parentNode.disabled === disabled;\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn elem.disabled === disabled;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Support: IE 6 - 11+\n\t\t\t\t// Use the isDisabled shortcut property to check for disabled fieldset ancestors\n\t\t\t\treturn elem.isDisabled === disabled ||\n\n\t\t\t\t\t// Where there is no isDisabled, check manually\n\t\t\t\t\telem.isDisabled !== !disabled &&\n\t\t\t\t\t\tinDisabledFieldset( elem ) === disabled;\n\t\t\t}\n\n\t\t\treturn elem.disabled === disabled;\n\n\t\t// Try to winnow out elements that can't be disabled before trusting the disabled property.\n\t\t// Some victims get caught in our net (label, legend, menu, track), but it shouldn't\n\t\t// even exist on them, let alone have a boolean value.\n\t\t} else if ( \"label\" in elem ) {\n\t\t\treturn elem.disabled === disabled;\n\t\t}\n\n\t\t// Remaining elements are neither :enabled nor :disabled\n\t\treturn false;\n\t};\n}\n\n/**\n * Returns a function to use in pseudos for positionals\n * @param {Function} fn\n */\nfunction createPositionalPseudo( fn ) {\n\treturn markFunction( function( argument ) {\n\t\targument = +argument;\n\t\treturn markFunction( function( seed, matches ) {\n\t\t\tvar j,\n\t\t\t\tmatchIndexes = fn( [], seed.length, argument ),\n\t\t\t\ti = matchIndexes.length;\n\n\t\t\t// Match elements found at the specified indexes\n\t\t\twhile ( i-- ) {\n\t\t\t\tif ( seed[ ( j = matchIndexes[ i ] ) ] ) {\n\t\t\t\t\tseed[ j ] = !( matches[ j ] = seed[ j ] );\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t} );\n}\n\n/**\n * Checks a node for validity as a jQuery selector context\n * @param {Element|Object=} context\n * @returns {Element|Object|Boolean} The input node if acceptable, otherwise a falsy value\n */\nfunction testContext( context ) {\n\treturn context && typeof context.getElementsByTagName !== \"undefined\" && context;\n}\n\n/**\n * Sets document-related variables once based on the current document\n * @param {Element|Object} [node] An element or document object to use to set the document\n * @returns {Object} Returns the current document\n */\nfunction setDocument( node ) {\n\tvar subWindow,\n\t\tdoc = node ? node.ownerDocument || node : preferredDoc;\n\n\t// Return early if doc is invalid or already selected\n\t// Support: IE 11+, Edge 17 - 18+\n\t// IE/Edge sometimes throw a \"Permission denied\" error when strict-comparing\n\t// two documents; shallow comparisons work.\n\t// eslint-disable-next-line eqeqeq\n\tif ( doc == document || doc.nodeType !== 9 || !doc.documentElement ) {\n\t\treturn document;\n\t}\n\n\t// Update global variables\n\tdocument = doc;\n\tdocumentElement = document.documentElement;\n\tdocumentIsHTML = !jQuery.isXMLDoc( document );\n\n\t// Support: iOS 7 only, IE 9 - 11+\n\t// Older browsers didn't support unprefixed `matches`.\n\tmatches = documentElement.matches ||\n\t\tdocumentElement.webkitMatchesSelector ||\n\t\tdocumentElement.msMatchesSelector;\n\n\t// Support: IE 9 - 11+, Edge 12 - 18+\n\t// Accessing iframe documents after unload throws \"permission denied\" errors\n\t// (see trac-13936).\n\t// Limit the fix to IE & Edge Legacy; despite Edge 15+ implementing `matches`,\n\t// all IE 9+ and Edge Legacy versions implement `msMatchesSelector` as well.\n\tif ( documentElement.msMatchesSelector &&\n\n\t\t// Support: IE 11+, Edge 17 - 18+\n\t\t// IE/Edge sometimes throw a \"Permission denied\" error when strict-comparing\n\t\t// two documents; shallow comparisons work.\n\t\t// eslint-disable-next-line eqeqeq\n\t\tpreferredDoc != document &&\n\t\t( subWindow = document.defaultView ) && subWindow.top !== subWindow ) {\n\n\t\t// Support: IE 9 - 11+, Edge 12 - 18+\n\t\tsubWindow.addEventListener( \"unload\", unloadHandler );\n\t}\n\n\t// Support: IE <10\n\t// Check if getElementById returns elements by name\n\t// The broken getElementById methods don't pick up programmatically-set names,\n\t// so use a roundabout getElementsByName test\n\tsupport.getById = assert( function( el ) {\n\t\tdocumentElement.appendChild( el ).id = jQuery.expando;\n\t\treturn !document.getElementsByName ||\n\t\t\t!document.getElementsByName( jQuery.expando ).length;\n\t} );\n\n\t// Support: IE 9 only\n\t// Check to see if it's possible to do matchesSelector\n\t// on a disconnected node.\n\tsupport.disconnectedMatch = assert( function( el ) {\n\t\treturn matches.call( el, \"*\" );\n\t} );\n\n\t// Support: IE 9 - 11+, Edge 12 - 18+\n\t// IE/Edge don't support the :scope pseudo-class.\n\tsupport.scope = assert( function() {\n\t\treturn document.querySelectorAll( \":scope\" );\n\t} );\n\n\t// Support: Chrome 105 - 111 only, Safari 15.4 - 16.3 only\n\t// Make sure the `:has()` argument is parsed unforgivingly.\n\t// We include `*` in the test to detect buggy implementations that are\n\t// _selectively_ forgiving (specifically when the list includes at least\n\t// one valid selector).\n\t// Note that we treat complete lack of support for `:has()` as if it were\n\t// spec-compliant support, which is fine because use of `:has()` in such\n\t// environments will fail in the qSA path and fall back to jQuery traversal\n\t// anyway.\n\tsupport.cssHas = assert( function() {\n\t\ttry {\n\t\t\tdocument.querySelector( \":has(*,:jqfake)\" );\n\t\t\treturn false;\n\t\t} catch ( e ) {\n\t\t\treturn true;\n\t\t}\n\t} );\n\n\t// ID filter and find\n\tif ( support.getById ) {\n\t\tExpr.filter.ID = function( id ) {\n\t\t\tvar attrId = id.replace( runescape, funescape );\n\t\t\treturn function( elem ) {\n\t\t\t\treturn elem.getAttribute( \"id\" ) === attrId;\n\t\t\t};\n\t\t};\n\t\tExpr.find.ID = function( id, context ) {\n\t\t\tif ( typeof context.getElementById !== \"undefined\" && documentIsHTML ) {\n\t\t\t\tvar elem = context.getElementById( id );\n\t\t\t\treturn elem ? [ elem ] : [];\n\t\t\t}\n\t\t};\n\t} else {\n\t\tExpr.filter.ID =  function( id ) {\n\t\t\tvar attrId = id.replace( runescape, funescape );\n\t\t\treturn function( elem ) {\n\t\t\t\tvar node = typeof elem.getAttributeNode !== \"undefined\" &&\n\t\t\t\t\telem.getAttributeNode( \"id\" );\n\t\t\t\treturn node && node.value === attrId;\n\t\t\t};\n\t\t};\n\n\t\t// Support: IE 6 - 7 only\n\t\t// getElementById is not reliable as a find shortcut\n\t\tExpr.find.ID = function( id, context ) {\n\t\t\tif ( typeof context.getElementById !== \"undefined\" && documentIsHTML ) {\n\t\t\t\tvar node, i, elems,\n\t\t\t\t\telem = context.getElementById( id );\n\n\t\t\t\tif ( elem ) {\n\n\t\t\t\t\t// Verify the id attribute\n\t\t\t\t\tnode = elem.getAttributeNode( \"id\" );\n\t\t\t\t\tif ( node && node.value === id ) {\n\t\t\t\t\t\treturn [ elem ];\n\t\t\t\t\t}\n\n\t\t\t\t\t// Fall back on getElementsByName\n\t\t\t\t\telems = context.getElementsByName( id );\n\t\t\t\t\ti = 0;\n\t\t\t\t\twhile ( ( elem = elems[ i++ ] ) ) {\n\t\t\t\t\t\tnode = elem.getAttributeNode( \"id\" );\n\t\t\t\t\t\tif ( node && node.value === id ) {\n\t\t\t\t\t\t\treturn [ elem ];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn [];\n\t\t\t}\n\t\t};\n\t}\n\n\t// Tag\n\tExpr.find.TAG = function( tag, context ) {\n\t\tif ( typeof context.getElementsByTagName !== \"undefined\" ) {\n\t\t\treturn context.getElementsByTagName( tag );\n\n\t\t// DocumentFragment nodes don't have gEBTN\n\t\t} else {\n\t\t\treturn context.querySelectorAll( tag );\n\t\t}\n\t};\n\n\t// Class\n\tExpr.find.CLASS = function( className, context ) {\n\t\tif ( typeof context.getElementsByClassName !== \"undefined\" && documentIsHTML ) {\n\t\t\treturn context.getElementsByClassName( className );\n\t\t}\n\t};\n\n\t/* QSA/matchesSelector\n\t---------------------------------------------------------------------- */\n\n\t// QSA and matchesSelector support\n\n\trbuggyQSA = [];\n\n\t// Build QSA regex\n\t// Regex strategy adopted from Diego Perini\n\tassert( function( el ) {\n\n\t\tvar input;\n\n\t\tdocumentElement.appendChild( el ).innerHTML =\n\t\t\t\"<a id='\" + expando + \"' href='' disabled='disabled'></a>\" +\n\t\t\t\"<select id='\" + expando + \"-\\r\\\\' disabled='disabled'>\" +\n\t\t\t\"<option selected=''></option></select>\";\n\n\t\t// Support: iOS <=7 - 8 only\n\t\t// Boolean attributes and \"value\" are not treated correctly in some XML documents\n\t\tif ( !el.querySelectorAll( \"[selected]\" ).length ) {\n\t\t\trbuggyQSA.push( \"\\\\[\" + whitespace + \"*(?:value|\" + booleans + \")\" );\n\t\t}\n\n\t\t// Support: iOS <=7 - 8 only\n\t\tif ( !el.querySelectorAll( \"[id~=\" + expando + \"-]\" ).length ) {\n\t\t\trbuggyQSA.push( \"~=\" );\n\t\t}\n\n\t\t// Support: iOS 8 only\n\t\t// https://bugs.webkit.org/show_bug.cgi?id=136851\n\t\t// In-page `selector#id sibling-combinator selector` fails\n\t\tif ( !el.querySelectorAll( \"a#\" + expando + \"+*\" ).length ) {\n\t\t\trbuggyQSA.push( \".#.+[+~]\" );\n\t\t}\n\n\t\t// Support: Chrome <=105+, Firefox <=104+, Safari <=15.4+\n\t\t// In some of the document kinds, these selectors wouldn't work natively.\n\t\t// This is probably OK but for backwards compatibility we want to maintain\n\t\t// handling them through jQuery traversal in jQuery 3.x.\n\t\tif ( !el.querySelectorAll( \":checked\" ).length ) {\n\t\t\trbuggyQSA.push( \":checked\" );\n\t\t}\n\n\t\t// Support: Windows 8 Native Apps\n\t\t// The type and name attributes are restricted during .innerHTML assignment\n\t\tinput = document.createElement( \"input\" );\n\t\tinput.setAttribute( \"type\", \"hidden\" );\n\t\tel.appendChild( input ).setAttribute( \"name\", \"D\" );\n\n\t\t// Support: IE 9 - 11+\n\t\t// IE's :disabled selector does not pick up the children of disabled fieldsets\n\t\t// Support: Chrome <=105+, Firefox <=104+, Safari <=15.4+\n\t\t// In some of the document kinds, these selectors wouldn't work natively.\n\t\t// This is probably OK but for backwards compatibility we want to maintain\n\t\t// handling them through jQuery traversal in jQuery 3.x.\n\t\tdocumentElement.appendChild( el ).disabled = true;\n\t\tif ( el.querySelectorAll( \":disabled\" ).length !== 2 ) {\n\t\t\trbuggyQSA.push( \":enabled\", \":disabled\" );\n\t\t}\n\n\t\t// Support: IE 11+, Edge 15 - 18+\n\t\t// IE 11/Edge don't find elements on a `[name='']` query in some cases.\n\t\t// Adding a temporary attribute to the document before the selection works\n\t\t// around the issue.\n\t\t// Interestingly, IE 10 & older don't seem to have the issue.\n\t\tinput = document.createElement( \"input\" );\n\t\tinput.setAttribute( \"name\", \"\" );\n\t\tel.appendChild( input );\n\t\tif ( !el.querySelectorAll( \"[name='']\" ).length ) {\n\t\t\trbuggyQSA.push( \"\\\\[\" + whitespace + \"*name\" + whitespace + \"*=\" +\n\t\t\t\twhitespace + \"*(?:''|\\\"\\\")\" );\n\t\t}\n\t} );\n\n\tif ( !support.cssHas ) {\n\n\t\t// Support: Chrome 105 - 110+, Safari 15.4 - 16.3+\n\t\t// Our regular `try-catch` mechanism fails to detect natively-unsupported\n\t\t// pseudo-classes inside `:has()` (such as `:has(:contains(\"Foo\"))`)\n\t\t// in browsers that parse the `:has()` argument as a forgiving selector list.\n\t\t// https://drafts.csswg.org/selectors/#relational now requires the argument\n\t\t// to be parsed unforgivingly, but browsers have not yet fully adjusted.\n\t\trbuggyQSA.push( \":has\" );\n\t}\n\n\trbuggyQSA = rbuggyQSA.length && new RegExp( rbuggyQSA.join( \"|\" ) );\n\n\t/* Sorting\n\t---------------------------------------------------------------------- */\n\n\t// Document order sorting\n\tsortOrder = function( a, b ) {\n\n\t\t// Flag for duplicate removal\n\t\tif ( a === b ) {\n\t\t\thasDuplicate = true;\n\t\t\treturn 0;\n\t\t}\n\n\t\t// Sort on method existence if only one input has compareDocumentPosition\n\t\tvar compare = !a.compareDocumentPosition - !b.compareDocumentPosition;\n\t\tif ( compare ) {\n\t\t\treturn compare;\n\t\t}\n\n\t\t// Calculate position if both inputs belong to the same document\n\t\t// Support: IE 11+, Edge 17 - 18+\n\t\t// IE/Edge sometimes throw a \"Permission denied\" error when strict-comparing\n\t\t// two documents; shallow comparisons work.\n\t\t// eslint-disable-next-line eqeqeq\n\t\tcompare = ( a.ownerDocument || a ) == ( b.ownerDocument || b ) ?\n\t\t\ta.compareDocumentPosition( b ) :\n\n\t\t\t// Otherwise we know they are disconnected\n\t\t\t1;\n\n\t\t// Disconnected nodes\n\t\tif ( compare & 1 ||\n\t\t\t( !support.sortDetached && b.compareDocumentPosition( a ) === compare ) ) {\n\n\t\t\t// Choose the first element that is related to our preferred document\n\t\t\t// Support: IE 11+, Edge 17 - 18+\n\t\t\t// IE/Edge sometimes throw a \"Permission denied\" error when strict-comparing\n\t\t\t// two documents; shallow comparisons work.\n\t\t\t// eslint-disable-next-line eqeqeq\n\t\t\tif ( a === document || a.ownerDocument == preferredDoc &&\n\t\t\t\tfind.contains( preferredDoc, a ) ) {\n\t\t\t\treturn -1;\n\t\t\t}\n\n\t\t\t// Support: IE 11+, Edge 17 - 18+\n\t\t\t// IE/Edge sometimes throw a \"Permission denied\" error when strict-comparing\n\t\t\t// two documents; shallow comparisons work.\n\t\t\t// eslint-disable-next-line eqeqeq\n\t\t\tif ( b === document || b.ownerDocument == preferredDoc &&\n\t\t\t\tfind.contains( preferredDoc, b ) ) {\n\t\t\t\treturn 1;\n\t\t\t}\n\n\t\t\t// Maintain original order\n\t\t\treturn sortInput ?\n\t\t\t\t( indexOf.call( sortInput, a ) - indexOf.call( sortInput, b ) ) :\n\t\t\t\t0;\n\t\t}\n\n\t\treturn compare & 4 ? -1 : 1;\n\t};\n\n\treturn document;\n}\n\nfind.matches = function( expr, elements ) {\n\treturn find( expr, null, null, elements );\n};\n\nfind.matchesSelector = function( elem, expr ) {\n\tsetDocument( elem );\n\n\tif ( documentIsHTML &&\n\t\t!nonnativeSelectorCache[ expr + \" \" ] &&\n\t\t( !rbuggyQSA || !rbuggyQSA.test( expr ) ) ) {\n\n\t\ttry {\n\t\t\tvar ret = matches.call( elem, expr );\n\n\t\t\t// IE 9's matchesSelector returns false on disconnected nodes\n\t\t\tif ( ret || support.disconnectedMatch ||\n\n\t\t\t\t\t// As well, disconnected nodes are said to be in a document\n\t\t\t\t\t// fragment in IE 9\n\t\t\t\t\telem.document && elem.document.nodeType !== 11 ) {\n\t\t\t\treturn ret;\n\t\t\t}\n\t\t} catch ( e ) {\n\t\t\tnonnativeSelectorCache( expr, true );\n\t\t}\n\t}\n\n\treturn find( expr, document, null, [ elem ] ).length > 0;\n};\n\nfind.contains = function( context, elem ) {\n\n\t// Set document vars if needed\n\t// Support: IE 11+, Edge 17 - 18+\n\t// IE/Edge sometimes throw a \"Permission denied\" error when strict-comparing\n\t// two documents; shallow comparisons work.\n\t// eslint-disable-next-line eqeqeq\n\tif ( ( context.ownerDocument || context ) != document ) {\n\t\tsetDocument( context );\n\t}\n\treturn jQuery.contains( context, elem );\n};\n\n\nfind.attr = function( elem, name ) {\n\n\t// Set document vars if needed\n\t// Support: IE 11+, Edge 17 - 18+\n\t// IE/Edge sometimes throw a \"Permission denied\" error when strict-comparing\n\t// two documents; shallow comparisons work.\n\t// eslint-disable-next-line eqeqeq\n\tif ( ( elem.ownerDocument || elem ) != document ) {\n\t\tsetDocument( elem );\n\t}\n\n\tvar fn = Expr.attrHandle[ name.toLowerCase() ],\n\n\t\t// Don't get fooled by Object.prototype properties (see trac-13807)\n\t\tval = fn && hasOwn.call( Expr.attrHandle, name.toLowerCase() ) ?\n\t\t\tfn( elem, name, !documentIsHTML ) :\n\t\t\tundefined;\n\n\tif ( val !== undefined ) {\n\t\treturn val;\n\t}\n\n\treturn elem.getAttribute( name );\n};\n\nfind.error = function( msg ) {\n\tthrow new Error( \"Syntax error, unrecognized expression: \" + msg );\n};\n\n/**\n * Document sorting and removing duplicates\n * @param {ArrayLike} results\n */\njQuery.uniqueSort = function( results ) {\n\tvar elem,\n\t\tduplicates = [],\n\t\tj = 0,\n\t\ti = 0;\n\n\t// Unless we *know* we can detect duplicates, assume their presence\n\t//\n\t// Support: Android <=4.0+\n\t// Testing for detecting duplicates is unpredictable so instead assume we can't\n\t// depend on duplicate detection in all browsers without a stable sort.\n\thasDuplicate = !support.sortStable;\n\tsortInput = !support.sortStable && slice.call( results, 0 );\n\tsort.call( results, sortOrder );\n\n\tif ( hasDuplicate ) {\n\t\twhile ( ( elem = results[ i++ ] ) ) {\n\t\t\tif ( elem === results[ i ] ) {\n\t\t\t\tj = duplicates.push( i );\n\t\t\t}\n\t\t}\n\t\twhile ( j-- ) {\n\t\t\tsplice.call( results, duplicates[ j ], 1 );\n\t\t}\n\t}\n\n\t// Clear input after sorting to release objects\n\t// See https://github.com/jquery/sizzle/pull/225\n\tsortInput = null;\n\n\treturn results;\n};\n\njQuery.fn.uniqueSort = function() {\n\treturn this.pushStack( jQuery.uniqueSort( slice.apply( this ) ) );\n};\n\nExpr = jQuery.expr = {\n\n\t// Can be adjusted by the user\n\tcacheLength: 50,\n\n\tcreatePseudo: markFunction,\n\n\tmatch: matchExpr,\n\n\tattrHandle: {},\n\n\tfind: {},\n\n\trelative: {\n\t\t\">\": { dir: \"parentNode\", first: true },\n\t\t\" \": { dir: \"parentNode\" },\n\t\t\"+\": { dir: \"previousSibling\", first: true },\n\t\t\"~\": { dir: \"previousSibling\" }\n\t},\n\n\tpreFilter: {\n\t\tATTR: function( match ) {\n\t\t\tmatch[ 1 ] = match[ 1 ].replace( runescape, funescape );\n\n\t\t\t// Move the given value to match[3] whether quoted or unquoted\n\t\t\tmatch[ 3 ] = ( match[ 3 ] || match[ 4 ] || match[ 5 ] || \"\" )\n\t\t\t\t.replace( runescape, funescape );\n\n\t\t\tif ( match[ 2 ] === \"~=\" ) {\n\t\t\t\tmatch[ 3 ] = \" \" + match[ 3 ] + \" \";\n\t\t\t}\n\n\t\t\treturn match.slice( 0, 4 );\n\t\t},\n\n\t\tCHILD: function( match ) {\n\n\t\t\t/* matches from matchExpr[\"CHILD\"]\n\t\t\t\t1 type (only|nth|...)\n\t\t\t\t2 what (child|of-type)\n\t\t\t\t3 argument (even|odd|\\d*|\\d*n([+-]\\d+)?|...)\n\t\t\t\t4 xn-component of xn+y argument ([+-]?\\d*n|)\n\t\t\t\t5 sign of xn-component\n\t\t\t\t6 x of xn-component\n\t\t\t\t7 sign of y-component\n\t\t\t\t8 y of y-component\n\t\t\t*/\n\t\t\tmatch[ 1 ] = match[ 1 ].toLowerCase();\n\n\t\t\tif ( match[ 1 ].slice( 0, 3 ) === \"nth\" ) {\n\n\t\t\t\t// nth-* requires argument\n\t\t\t\tif ( !match[ 3 ] ) {\n\t\t\t\t\tfind.error( match[ 0 ] );\n\t\t\t\t}\n\n\t\t\t\t// numeric x and y parameters for Expr.filter.CHILD\n\t\t\t\t// remember that false/true cast respectively to 0/1\n\t\t\t\tmatch[ 4 ] = +( match[ 4 ] ?\n\t\t\t\t\tmatch[ 5 ] + ( match[ 6 ] || 1 ) :\n\t\t\t\t\t2 * ( match[ 3 ] === \"even\" || match[ 3 ] === \"odd\" )\n\t\t\t\t);\n\t\t\t\tmatch[ 5 ] = +( ( match[ 7 ] + match[ 8 ] ) || match[ 3 ] === \"odd\" );\n\n\t\t\t// other types prohibit arguments\n\t\t\t} else if ( match[ 3 ] ) {\n\t\t\t\tfind.error( match[ 0 ] );\n\t\t\t}\n\n\t\t\treturn match;\n\t\t},\n\n\t\tPSEUDO: function( match ) {\n\t\t\tvar excess,\n\t\t\t\tunquoted = !match[ 6 ] && match[ 2 ];\n\n\t\t\tif ( matchExpr.CHILD.test( match[ 0 ] ) ) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\t// Accept quoted arguments as-is\n\t\t\tif ( match[ 3 ] ) {\n\t\t\t\tmatch[ 2 ] = match[ 4 ] || match[ 5 ] || \"\";\n\n\t\t\t// Strip excess characters from unquoted arguments\n\t\t\t} else if ( unquoted && rpseudo.test( unquoted ) &&\n\n\t\t\t\t// Get excess from tokenize (recursively)\n\t\t\t\t( excess = tokenize( unquoted, true ) ) &&\n\n\t\t\t\t// advance to the next closing parenthesis\n\t\t\t\t( excess = unquoted.indexOf( \")\", unquoted.length - excess ) - unquoted.length ) ) {\n\n\t\t\t\t// excess is a negative index\n\t\t\t\tmatch[ 0 ] = match[ 0 ].slice( 0, excess );\n\t\t\t\tmatch[ 2 ] = unquoted.slice( 0, excess );\n\t\t\t}\n\n\t\t\t// Return only captures needed by the pseudo filter method (type and argument)\n\t\t\treturn match.slice( 0, 3 );\n\t\t}\n\t},\n\n\tfilter: {\n\n\t\tTAG: function( nodeNameSelector ) {\n\t\t\tvar expectedNodeName = nodeNameSelector.replace( runescape, funescape ).toLowerCase();\n\t\t\treturn nodeNameSelector === \"*\" ?\n\t\t\t\tfunction() {\n\t\t\t\t\treturn true;\n\t\t\t\t} :\n\t\t\t\tfunction( elem ) {\n\t\t\t\t\treturn nodeName( elem, expectedNodeName );\n\t\t\t\t};\n\t\t},\n\n\t\tCLASS: function( className ) {\n\t\t\tvar pattern = classCache[ className + \" \" ];\n\n\t\t\treturn pattern ||\n\t\t\t\t( pattern = new RegExp( \"(^|\" + whitespace + \")\" + className +\n\t\t\t\t\t\"(\" + whitespace + \"|$)\" ) ) &&\n\t\t\t\tclassCache( className, function( elem ) {\n\t\t\t\t\treturn pattern.test(\n\t\t\t\t\t\ttypeof elem.className === \"string\" && elem.className ||\n\t\t\t\t\t\t\ttypeof elem.getAttribute !== \"undefined\" &&\n\t\t\t\t\t\t\t\telem.getAttribute( \"class\" ) ||\n\t\t\t\t\t\t\t\"\"\n\t\t\t\t\t);\n\t\t\t\t} );\n\t\t},\n\n\t\tATTR: function( name, operator, check ) {\n\t\t\treturn function( elem ) {\n\t\t\t\tvar result = find.attr( elem, name );\n\n\t\t\t\tif ( result == null ) {\n\t\t\t\t\treturn operator === \"!=\";\n\t\t\t\t}\n\t\t\t\tif ( !operator ) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\tresult += \"\";\n\n\t\t\t\tif ( operator === \"=\" ) {\n\t\t\t\t\treturn result === check;\n\t\t\t\t}\n\t\t\t\tif ( operator === \"!=\" ) {\n\t\t\t\t\treturn result !== check;\n\t\t\t\t}\n\t\t\t\tif ( operator === \"^=\" ) {\n\t\t\t\t\treturn check && result.indexOf( check ) === 0;\n\t\t\t\t}\n\t\t\t\tif ( operator === \"*=\" ) {\n\t\t\t\t\treturn check && result.indexOf( check ) > -1;\n\t\t\t\t}\n\t\t\t\tif ( operator === \"$=\" ) {\n\t\t\t\t\treturn check && result.slice( -check.length ) === check;\n\t\t\t\t}\n\t\t\t\tif ( operator === \"~=\" ) {\n\t\t\t\t\treturn ( \" \" + result.replace( rwhitespace, \" \" ) + \" \" )\n\t\t\t\t\t\t.indexOf( check ) > -1;\n\t\t\t\t}\n\t\t\t\tif ( operator === \"|=\" ) {\n\t\t\t\t\treturn result === check || result.slice( 0, check.length + 1 ) === check + \"-\";\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\t\t\t};\n\t\t},\n\n\t\tCHILD: function( type, what, _argument, first, last ) {\n\t\t\tvar simple = type.slice( 0, 3 ) !== \"nth\",\n\t\t\t\tforward = type.slice( -4 ) !== \"last\",\n\t\t\t\tofType = what === \"of-type\";\n\n\t\t\treturn first === 1 && last === 0 ?\n\n\t\t\t\t// Shortcut for :nth-*(n)\n\t\t\t\tfunction( elem ) {\n\t\t\t\t\treturn !!elem.parentNode;\n\t\t\t\t} :\n\n\t\t\t\tfunction( elem, _context, xml ) {\n\t\t\t\t\tvar cache, outerCache, node, nodeIndex, start,\n\t\t\t\t\t\tdir = simple !== forward ? \"nextSibling\" : \"previousSibling\",\n\t\t\t\t\t\tparent = elem.parentNode,\n\t\t\t\t\t\tname = ofType && elem.nodeName.toLowerCase(),\n\t\t\t\t\t\tuseCache = !xml && !ofType,\n\t\t\t\t\t\tdiff = false;\n\n\t\t\t\t\tif ( parent ) {\n\n\t\t\t\t\t\t// :(first|last|only)-(child|of-type)\n\t\t\t\t\t\tif ( simple ) {\n\t\t\t\t\t\t\twhile ( dir ) {\n\t\t\t\t\t\t\t\tnode = elem;\n\t\t\t\t\t\t\t\twhile ( ( node = node[ dir ] ) ) {\n\t\t\t\t\t\t\t\t\tif ( ofType ?\n\t\t\t\t\t\t\t\t\t\tnodeName( node, name ) :\n\t\t\t\t\t\t\t\t\t\tnode.nodeType === 1 ) {\n\n\t\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t// Reverse direction for :only-* (if we haven't yet done so)\n\t\t\t\t\t\t\t\tstart = dir = type === \"only\" && !start && \"nextSibling\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tstart = [ forward ? parent.firstChild : parent.lastChild ];\n\n\t\t\t\t\t\t// non-xml :nth-child(...) stores cache data on `parent`\n\t\t\t\t\t\tif ( forward && useCache ) {\n\n\t\t\t\t\t\t\t// Seek `elem` from a previously-cached index\n\t\t\t\t\t\t\touterCache = parent[ expando ] || ( parent[ expando ] = {} );\n\t\t\t\t\t\t\tcache = outerCache[ type ] || [];\n\t\t\t\t\t\t\tnodeIndex = cache[ 0 ] === dirruns && cache[ 1 ];\n\t\t\t\t\t\t\tdiff = nodeIndex && cache[ 2 ];\n\t\t\t\t\t\t\tnode = nodeIndex && parent.childNodes[ nodeIndex ];\n\n\t\t\t\t\t\t\twhile ( ( node = ++nodeIndex && node && node[ dir ] ||\n\n\t\t\t\t\t\t\t\t// Fallback to seeking `elem` from the start\n\t\t\t\t\t\t\t\t( diff = nodeIndex = 0 ) || start.pop() ) ) {\n\n\t\t\t\t\t\t\t\t// When found, cache indexes on `parent` and break\n\t\t\t\t\t\t\t\tif ( node.nodeType === 1 && ++diff && node === elem ) {\n\t\t\t\t\t\t\t\t\touterCache[ type ] = [ dirruns, nodeIndex, diff ];\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t// Use previously-cached element index if available\n\t\t\t\t\t\t\tif ( useCache ) {\n\t\t\t\t\t\t\t\touterCache = elem[ expando ] || ( elem[ expando ] = {} );\n\t\t\t\t\t\t\t\tcache = outerCache[ type ] || [];\n\t\t\t\t\t\t\t\tnodeIndex = cache[ 0 ] === dirruns && cache[ 1 ];\n\t\t\t\t\t\t\t\tdiff = nodeIndex;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// xml :nth-child(...)\n\t\t\t\t\t\t\t// or :nth-last-child(...) or :nth(-last)?-of-type(...)\n\t\t\t\t\t\t\tif ( diff === false ) {\n\n\t\t\t\t\t\t\t\t// Use the same loop as above to seek `elem` from the start\n\t\t\t\t\t\t\t\twhile ( ( node = ++nodeIndex && node && node[ dir ] ||\n\t\t\t\t\t\t\t\t\t( diff = nodeIndex = 0 ) || start.pop() ) ) {\n\n\t\t\t\t\t\t\t\t\tif ( ( ofType ?\n\t\t\t\t\t\t\t\t\t\tnodeName( node, name ) :\n\t\t\t\t\t\t\t\t\t\tnode.nodeType === 1 ) &&\n\t\t\t\t\t\t\t\t\t\t++diff ) {\n\n\t\t\t\t\t\t\t\t\t\t// Cache the index of each encountered element\n\t\t\t\t\t\t\t\t\t\tif ( useCache ) {\n\t\t\t\t\t\t\t\t\t\t\touterCache = node[ expando ] ||\n\t\t\t\t\t\t\t\t\t\t\t\t( node[ expando ] = {} );\n\t\t\t\t\t\t\t\t\t\t\touterCache[ type ] = [ dirruns, diff ];\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tif ( node === elem ) {\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Incorporate the offset, then check against cycle size\n\t\t\t\t\t\tdiff -= last;\n\t\t\t\t\t\treturn diff === first || ( diff % first === 0 && diff / first >= 0 );\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t},\n\n\t\tPSEUDO: function( pseudo, argument ) {\n\n\t\t\t// pseudo-class names are case-insensitive\n\t\t\t// https://www.w3.org/TR/selectors/#pseudo-classes\n\t\t\t// Prioritize by case sensitivity in case custom pseudos are added with uppercase letters\n\t\t\t// Remember that setFilters inherits from pseudos\n\t\t\tvar args,\n\t\t\t\tfn = Expr.pseudos[ pseudo ] || Expr.setFilters[ pseudo.toLowerCase() ] ||\n\t\t\t\t\tfind.error( \"unsupported pseudo: \" + pseudo );\n\n\t\t\t// The user may use createPseudo to indicate that\n\t\t\t// arguments are needed to create the filter function\n\t\t\t// just as jQuery does\n\t\t\tif ( fn[ expando ] ) {\n\t\t\t\treturn fn( argument );\n\t\t\t}\n\n\t\t\t// But maintain support for old signatures\n\t\t\tif ( fn.length > 1 ) {\n\t\t\t\targs = [ pseudo, pseudo, \"\", argument ];\n\t\t\t\treturn Expr.setFilters.hasOwnProperty( pseudo.toLowerCase() ) ?\n\t\t\t\t\tmarkFunction( function( seed, matches ) {\n\t\t\t\t\t\tvar idx,\n\t\t\t\t\t\t\tmatched = fn( seed, argument ),\n\t\t\t\t\t\t\ti = matched.length;\n\t\t\t\t\t\twhile ( i-- ) {\n\t\t\t\t\t\t\tidx = indexOf.call( seed, matched[ i ] );\n\t\t\t\t\t\t\tseed[ idx ] = !( matches[ idx ] = matched[ i ] );\n\t\t\t\t\t\t}\n\t\t\t\t\t} ) :\n\t\t\t\t\tfunction( elem ) {\n\t\t\t\t\t\treturn fn( elem, 0, args );\n\t\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn fn;\n\t\t}\n\t},\n\n\tpseudos: {\n\n\t\t// Potentially complex pseudos\n\t\tnot: markFunction( function( selector ) {\n\n\t\t\t// Trim the selector passed to compile\n\t\t\t// to avoid treating leading and trailing\n\t\t\t// spaces as combinators\n\t\t\tvar input = [],\n\t\t\t\tresults = [],\n\t\t\t\tmatcher = compile( selector.replace( rtrimCSS, \"$1\" ) );\n\n\t\t\treturn matcher[ expando ] ?\n\t\t\t\tmarkFunction( function( seed, matches, _context, xml ) {\n\t\t\t\t\tvar elem,\n\t\t\t\t\t\tunmatched = matcher( seed, null, xml, [] ),\n\t\t\t\t\t\ti = seed.length;\n\n\t\t\t\t\t// Match elements unmatched by `matcher`\n\t\t\t\t\twhile ( i-- ) {\n\t\t\t\t\t\tif ( ( elem = unmatched[ i ] ) ) {\n\t\t\t\t\t\t\tseed[ i ] = !( matches[ i ] = elem );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} ) :\n\t\t\t\tfunction( elem, _context, xml ) {\n\t\t\t\t\tinput[ 0 ] = elem;\n\t\t\t\t\tmatcher( input, null, xml, results );\n\n\t\t\t\t\t// Don't keep the element\n\t\t\t\t\t// (see https://github.com/jquery/sizzle/issues/299)\n\t\t\t\t\tinput[ 0 ] = null;\n\t\t\t\t\treturn !results.pop();\n\t\t\t\t};\n\t\t} ),\n\n\t\thas: markFunction( function( selector ) {\n\t\t\treturn function( elem ) {\n\t\t\t\treturn find( selector, elem ).length > 0;\n\t\t\t};\n\t\t} ),\n\n\t\tcontains: markFunction( function( text ) {\n\t\t\ttext = text.replace( runescape, funescape );\n\t\t\treturn function( elem ) {\n\t\t\t\treturn ( elem.textContent || jQuery.text( elem ) ).indexOf( text ) > -1;\n\t\t\t};\n\t\t} ),\n\n\t\t// \"Whether an element is represented by a :lang() selector\n\t\t// is based solely on the element's language value\n\t\t// being equal to the identifier C,\n\t\t// or beginning with the identifier C immediately followed by \"-\".\n\t\t// The matching of C against the element's language value is performed case-insensitively.\n\t\t// The identifier C does not have to be a valid language name.\"\n\t\t// https://www.w3.org/TR/selectors/#lang-pseudo\n\t\tlang: markFunction( function( lang ) {\n\n\t\t\t// lang value must be a valid identifier\n\t\t\tif ( !ridentifier.test( lang || \"\" ) ) {\n\t\t\t\tfind.error( \"unsupported lang: \" + lang );\n\t\t\t}\n\t\t\tlang = lang.replace( runescape, funescape ).toLowerCase();\n\t\t\treturn function( elem ) {\n\t\t\t\tvar elemLang;\n\t\t\t\tdo {\n\t\t\t\t\tif ( ( elemLang = documentIsHTML ?\n\t\t\t\t\t\telem.lang :\n\t\t\t\t\t\telem.getAttribute( \"xml:lang\" ) || elem.getAttribute( \"lang\" ) ) ) {\n\n\t\t\t\t\t\telemLang = elemLang.toLowerCase();\n\t\t\t\t\t\treturn elemLang === lang || elemLang.indexOf( lang + \"-\" ) === 0;\n\t\t\t\t\t}\n\t\t\t\t} while ( ( elem = elem.parentNode ) && elem.nodeType === 1 );\n\t\t\t\treturn false;\n\t\t\t};\n\t\t} ),\n\n\t\t// Miscellaneous\n\t\ttarget: function( elem ) {\n\t\t\tvar hash = window.location && window.location.hash;\n\t\t\treturn hash && hash.slice( 1 ) === elem.id;\n\t\t},\n\n\t\troot: function( elem ) {\n\t\t\treturn elem === documentElement;\n\t\t},\n\n\t\tfocus: function( elem ) {\n\t\t\treturn elem === safeActiveElement() &&\n\t\t\t\tdocument.hasFocus() &&\n\t\t\t\t!!( elem.type || elem.href || ~elem.tabIndex );\n\t\t},\n\n\t\t// Boolean properties\n\t\tenabled: createDisabledPseudo( false ),\n\t\tdisabled: createDisabledPseudo( true ),\n\n\t\tchecked: function( elem ) {\n\n\t\t\t// In CSS3, :checked should return both checked and selected elements\n\t\t\t// https://www.w3.org/TR/2011/REC-css3-selectors-20110929/#checked\n\t\t\treturn ( nodeName( elem, \"input\" ) && !!elem.checked ) ||\n\t\t\t\t( nodeName( elem, \"option\" ) && !!elem.selected );\n\t\t},\n\n\t\tselected: function( elem ) {\n\n\t\t\t// Support: IE <=11+\n\t\t\t// Accessing the selectedIndex property\n\t\t\t// forces the browser to treat the default option as\n\t\t\t// selected when in an optgroup.\n\t\t\tif ( elem.parentNode ) {\n\t\t\t\t// eslint-disable-next-line no-unused-expressions\n\t\t\t\telem.parentNode.selectedIndex;\n\t\t\t}\n\n\t\t\treturn elem.selected === true;\n\t\t},\n\n\t\t// Contents\n\t\tempty: function( elem ) {\n\n\t\t\t// https://www.w3.org/TR/selectors/#empty-pseudo\n\t\t\t// :empty is negated by element (1) or content nodes (text: 3; cdata: 4; entity ref: 5),\n\t\t\t//   but not by others (comment: 8; processing instruction: 7; etc.)\n\t\t\t// nodeType < 6 works because attributes (2) do not appear as children\n\t\t\tfor ( elem = elem.firstChild; elem; elem = elem.nextSibling ) {\n\t\t\t\tif ( elem.nodeType < 6 ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t},\n\n\t\tparent: function( elem ) {\n\t\t\treturn !Expr.pseudos.empty( elem );\n\t\t},\n\n\t\t// Element/input types\n\t\theader: function( elem ) {\n\t\t\treturn rheader.test( elem.nodeName );\n\t\t},\n\n\t\tinput: function( elem ) {\n\t\t\treturn rinputs.test( elem.nodeName );\n\t\t},\n\n\t\tbutton: function( elem ) {\n\t\t\treturn nodeName( elem, \"input\" ) && elem.type === \"button\" ||\n\t\t\t\tnodeName( elem, \"button\" );\n\t\t},\n\n\t\ttext: function( elem ) {\n\t\t\tvar attr;\n\t\t\treturn nodeName( elem, \"input\" ) && elem.type === \"text\" &&\n\n\t\t\t\t// Support: IE <10 only\n\t\t\t\t// New HTML5 attribute values (e.g., \"search\") appear\n\t\t\t\t// with elem.type === \"text\"\n\t\t\t\t( ( attr = elem.getAttribute( \"type\" ) ) == null ||\n\t\t\t\t\tattr.toLowerCase() === \"text\" );\n\t\t},\n\n\t\t// Position-in-collection\n\t\tfirst: createPositionalPseudo( function() {\n\t\t\treturn [ 0 ];\n\t\t} ),\n\n\t\tlast: createPositionalPseudo( function( _matchIndexes, length ) {\n\t\t\treturn [ length - 1 ];\n\t\t} ),\n\n\t\teq: createPositionalPseudo( function( _matchIndexes, length, argument ) {\n\t\t\treturn [ argument < 0 ? argument + length : argument ];\n\t\t} ),\n\n\t\teven: createPositionalPseudo( function( matchIndexes, length ) {\n\t\t\tvar i = 0;\n\t\t\tfor ( ; i < length; i += 2 ) {\n\t\t\t\tmatchIndexes.push( i );\n\t\t\t}\n\t\t\treturn matchIndexes;\n\t\t} ),\n\n\t\todd: createPositionalPseudo( function( matchIndexes, length ) {\n\t\t\tvar i = 1;\n\t\t\tfor ( ; i < length; i += 2 ) {\n\t\t\t\tmatchIndexes.push( i );\n\t\t\t}\n\t\t\treturn matchIndexes;\n\t\t} ),\n\n\t\tlt: createPositionalPseudo( function( matchIndexes, length, argument ) {\n\t\t\tvar i;\n\n\t\t\tif ( argument < 0 ) {\n\t\t\t\ti = argument + length;\n\t\t\t} else if ( argument > length ) {\n\t\t\t\ti = length;\n\t\t\t} else {\n\t\t\t\ti = argument;\n\t\t\t}\n\n\t\t\tfor ( ; --i >= 0; ) {\n\t\t\t\tmatchIndexes.push( i );\n\t\t\t}\n\t\t\treturn matchIndexes;\n\t\t} ),\n\n\t\tgt: createPositionalPseudo( function( matchIndexes, length, argument ) {\n\t\t\tvar i = argument < 0 ? argument + length : argument;\n\t\t\tfor ( ; ++i < length; ) {\n\t\t\t\tmatchIndexes.push( i );\n\t\t\t}\n\t\t\treturn matchIndexes;\n\t\t} )\n\t}\n};\n\nExpr.pseudos.nth = Expr.pseudos.eq;\n\n// Add button/input type pseudos\nfor ( i in { radio: true, checkbox: true, file: true, password: true, image: true } ) {\n\tExpr.pseudos[ i ] = createInputPseudo( i );\n}\nfor ( i in { submit: true, reset: true } ) {\n\tExpr.pseudos[ i ] = createButtonPseudo( i );\n}\n\n// Easy API for creating new setFilters\nfunction setFilters() {}\nsetFilters.prototype = Expr.filters = Expr.pseudos;\nExpr.setFilters = new setFilters();\n\nfunction tokenize( selector, parseOnly ) {\n\tvar matched, match, tokens, type,\n\t\tsoFar, groups, preFilters,\n\t\tcached = tokenCache[ selector + \" \" ];\n\n\tif ( cached ) {\n\t\treturn parseOnly ? 0 : cached.slice( 0 );\n\t}\n\n\tsoFar = selector;\n\tgroups = [];\n\tpreFilters = Expr.preFilter;\n\n\twhile ( soFar ) {\n\n\t\t// Comma and first run\n\t\tif ( !matched || ( match = rcomma.exec( soFar ) ) ) {\n\t\t\tif ( match ) {\n\n\t\t\t\t// Don't consume trailing commas as valid\n\t\t\t\tsoFar = soFar.slice( match[ 0 ].length ) || soFar;\n\t\t\t}\n\t\t\tgroups.push( ( tokens = [] ) );\n\t\t}\n\n\t\tmatched = false;\n\n\t\t// Combinators\n\t\tif ( ( match = rleadingCombinator.exec( soFar ) ) ) {\n\t\t\tmatched = match.shift();\n\t\t\ttokens.push( {\n\t\t\t\tvalue: matched,\n\n\t\t\t\t// Cast descendant combinators to space\n\t\t\t\ttype: match[ 0 ].replace( rtrimCSS, \" \" )\n\t\t\t} );\n\t\t\tsoFar = soFar.slice( matched.length );\n\t\t}\n\n\t\t// Filters\n\t\tfor ( type in Expr.filter ) {\n\t\t\tif ( ( match = matchExpr[ type ].exec( soFar ) ) && ( !preFilters[ type ] ||\n\t\t\t\t( match = preFilters[ type ]( match ) ) ) ) {\n\t\t\t\tmatched = match.shift();\n\t\t\t\ttokens.push( {\n\t\t\t\t\tvalue: matched,\n\t\t\t\t\ttype: type,\n\t\t\t\t\tmatches: match\n\t\t\t\t} );\n\t\t\t\tsoFar = soFar.slice( matched.length );\n\t\t\t}\n\t\t}\n\n\t\tif ( !matched ) {\n\t\t\tbreak;\n\t\t}\n\t}\n\n\t// Return the length of the invalid excess\n\t// if we're just parsing\n\t// Otherwise, throw an error or return tokens\n\tif ( parseOnly ) {\n\t\treturn soFar.length;\n\t}\n\n\treturn soFar ?\n\t\tfind.error( selector ) :\n\n\t\t// Cache the tokens\n\t\ttokenCache( selector, groups ).slice( 0 );\n}\n\nfunction toSelector( tokens ) {\n\tvar i = 0,\n\t\tlen = tokens.length,\n\t\tselector = \"\";\n\tfor ( ; i < len; i++ ) {\n\t\tselector += tokens[ i ].value;\n\t}\n\treturn selector;\n}\n\nfunction addCombinator( matcher, combinator, base ) {\n\tvar dir = combinator.dir,\n\t\tskip = combinator.next,\n\t\tkey = skip || dir,\n\t\tcheckNonElements = base && key === \"parentNode\",\n\t\tdoneName = done++;\n\n\treturn combinator.first ?\n\n\t\t// Check against closest ancestor/preceding element\n\t\tfunction( elem, context, xml ) {\n\t\t\twhile ( ( elem = elem[ dir ] ) ) {\n\t\t\t\tif ( elem.nodeType === 1 || checkNonElements ) {\n\t\t\t\t\treturn matcher( elem, context, xml );\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t} :\n\n\t\t// Check against all ancestor/preceding elements\n\t\tfunction( elem, context, xml ) {\n\t\t\tvar oldCache, outerCache,\n\t\t\t\tnewCache = [ dirruns, doneName ];\n\n\t\t\t// We can't set arbitrary data on XML nodes, so they don't benefit from combinator caching\n\t\t\tif ( xml ) {\n\t\t\t\twhile ( ( elem = elem[ dir ] ) ) {\n\t\t\t\t\tif ( elem.nodeType === 1 || checkNonElements ) {\n\t\t\t\t\t\tif ( matcher( elem, context, xml ) ) {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\twhile ( ( elem = elem[ dir ] ) ) {\n\t\t\t\t\tif ( elem.nodeType === 1 || checkNonElements ) {\n\t\t\t\t\t\touterCache = elem[ expando ] || ( elem[ expando ] = {} );\n\n\t\t\t\t\t\tif ( skip && nodeName( elem, skip ) ) {\n\t\t\t\t\t\t\telem = elem[ dir ] || elem;\n\t\t\t\t\t\t} else if ( ( oldCache = outerCache[ key ] ) &&\n\t\t\t\t\t\t\toldCache[ 0 ] === dirruns && oldCache[ 1 ] === doneName ) {\n\n\t\t\t\t\t\t\t// Assign to newCache so results back-propagate to previous elements\n\t\t\t\t\t\t\treturn ( newCache[ 2 ] = oldCache[ 2 ] );\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t// Reuse newcache so results back-propagate to previous elements\n\t\t\t\t\t\t\touterCache[ key ] = newCache;\n\n\t\t\t\t\t\t\t// A match means we're done; a fail means we have to keep checking\n\t\t\t\t\t\t\tif ( ( newCache[ 2 ] = matcher( elem, context, xml ) ) ) {\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t};\n}\n\nfunction elementMatcher( matchers ) {\n\treturn matchers.length > 1 ?\n\t\tfunction( elem, context, xml ) {\n\t\t\tvar i = matchers.length;\n\t\t\twhile ( i-- ) {\n\t\t\t\tif ( !matchers[ i ]( elem, context, xml ) ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t} :\n\t\tmatchers[ 0 ];\n}\n\nfunction multipleContexts( selector, contexts, results ) {\n\tvar i = 0,\n\t\tlen = contexts.length;\n\tfor ( ; i < len; i++ ) {\n\t\tfind( selector, contexts[ i ], results );\n\t}\n\treturn results;\n}\n\nfunction condense( unmatched, map, filter, context, xml ) {\n\tvar elem,\n\t\tnewUnmatched = [],\n\t\ti = 0,\n\t\tlen = unmatched.length,\n\t\tmapped = map != null;\n\n\tfor ( ; i < len; i++ ) {\n\t\tif ( ( elem = unmatched[ i ] ) ) {\n\t\t\tif ( !filter || filter( elem, context, xml ) ) {\n\t\t\t\tnewUnmatched.push( elem );\n\t\t\t\tif ( mapped ) {\n\t\t\t\t\tmap.push( i );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn newUnmatched;\n}\n\nfunction setMatcher( preFilter, selector, matcher, postFilter, postFinder, postSelector ) {\n\tif ( postFilter && !postFilter[ expando ] ) {\n\t\tpostFilter = setMatcher( postFilter );\n\t}\n\tif ( postFinder && !postFinder[ expando ] ) {\n\t\tpostFinder = setMatcher( postFinder, postSelector );\n\t}\n\treturn markFunction( function( seed, results, context, xml ) {\n\t\tvar temp, i, elem, matcherOut,\n\t\t\tpreMap = [],\n\t\t\tpostMap = [],\n\t\t\tpreexisting = results.length,\n\n\t\t\t// Get initial elements from seed or context\n\t\t\telems = seed ||\n\t\t\t\tmultipleContexts( selector || \"*\",\n\t\t\t\t\tcontext.nodeType ? [ context ] : context, [] ),\n\n\t\t\t// Prefilter to get matcher input, preserving a map for seed-results synchronization\n\t\t\tmatcherIn = preFilter && ( seed || !selector ) ?\n\t\t\t\tcondense( elems, preMap, preFilter, context, xml ) :\n\t\t\t\telems;\n\n\t\tif ( matcher ) {\n\n\t\t\t// If we have a postFinder, or filtered seed, or non-seed postFilter\n\t\t\t// or preexisting results,\n\t\t\tmatcherOut = postFinder || ( seed ? preFilter : preexisting || postFilter ) ?\n\n\t\t\t\t// ...intermediate processing is necessary\n\t\t\t\t[] :\n\n\t\t\t\t// ...otherwise use results directly\n\t\t\t\tresults;\n\n\t\t\t// Find primary matches\n\t\t\tmatcher( matcherIn, matcherOut, context, xml );\n\t\t} else {\n\t\t\tmatcherOut = matcherIn;\n\t\t}\n\n\t\t// Apply postFilter\n\t\tif ( postFilter ) {\n\t\t\ttemp = condense( matcherOut, postMap );\n\t\t\tpostFilter( temp, [], context, xml );\n\n\t\t\t// Un-match failing elements by moving them back to matcherIn\n\t\t\ti = temp.length;\n\t\t\twhile ( i-- ) {\n\t\t\t\tif ( ( elem = temp[ i ] ) ) {\n\t\t\t\t\tmatcherOut[ postMap[ i ] ] = !( matcherIn[ postMap[ i ] ] = elem );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif ( seed ) {\n\t\t\tif ( postFinder || preFilter ) {\n\t\t\t\tif ( postFinder ) {\n\n\t\t\t\t\t// Get the final matcherOut by condensing this intermediate into postFinder contexts\n\t\t\t\t\ttemp = [];\n\t\t\t\t\ti = matcherOut.length;\n\t\t\t\t\twhile ( i-- ) {\n\t\t\t\t\t\tif ( ( elem = matcherOut[ i ] ) ) {\n\n\t\t\t\t\t\t\t// Restore matcherIn since elem is not yet a final match\n\t\t\t\t\t\t\ttemp.push( ( matcherIn[ i ] = elem ) );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tpostFinder( null, ( matcherOut = [] ), temp, xml );\n\t\t\t\t}\n\n\t\t\t\t// Move matched elements from seed to results to keep them synchronized\n\t\t\t\ti = matcherOut.length;\n\t\t\t\twhile ( i-- ) {\n\t\t\t\t\tif ( ( elem = matcherOut[ i ] ) &&\n\t\t\t\t\t\t( temp = postFinder ? indexOf.call( seed, elem ) : preMap[ i ] ) > -1 ) {\n\n\t\t\t\t\t\tseed[ temp ] = !( results[ temp ] = elem );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t// Add elements to results, through postFinder if defined\n\t\t} else {\n\t\t\tmatcherOut = condense(\n\t\t\t\tmatcherOut === results ?\n\t\t\t\t\tmatcherOut.splice( preexisting, matcherOut.length ) :\n\t\t\t\t\tmatcherOut\n\t\t\t);\n\t\t\tif ( postFinder ) {\n\t\t\t\tpostFinder( null, results, matcherOut, xml );\n\t\t\t} else {\n\t\t\t\tpush.apply( results, matcherOut );\n\t\t\t}\n\t\t}\n\t} );\n}\n\nfunction matcherFromTokens( tokens ) {\n\tvar checkContext, matcher, j,\n\t\tlen = tokens.length,\n\t\tleadingRelative = Expr.relative[ tokens[ 0 ].type ],\n\t\timplicitRelative = leadingRelative || Expr.relative[ \" \" ],\n\t\ti = leadingRelative ? 1 : 0,\n\n\t\t// The foundational matcher ensures that elements are reachable from top-level context(s)\n\t\tmatchContext = addCombinator( function( elem ) {\n\t\t\treturn elem === checkContext;\n\t\t}, implicitRelative, true ),\n\t\tmatchAnyContext = addCombinator( function( elem ) {\n\t\t\treturn indexOf.call( checkContext, elem ) > -1;\n\t\t}, implicitRelative, true ),\n\t\tmatchers = [ function( elem, context, xml ) {\n\n\t\t\t// Support: IE 11+, Edge 17 - 18+\n\t\t\t// IE/Edge sometimes throw a \"Permission denied\" error when strict-comparing\n\t\t\t// two documents; shallow comparisons work.\n\t\t\t// eslint-disable-next-line eqeqeq\n\t\t\tvar ret = ( !leadingRelative && ( xml || context != outermostContext ) ) || (\n\t\t\t\t( checkContext = context ).nodeType ?\n\t\t\t\t\tmatchContext( elem, context, xml ) :\n\t\t\t\t\tmatchAnyContext( elem, context, xml ) );\n\n\t\t\t// Avoid hanging onto element\n\t\t\t// (see https://github.com/jquery/sizzle/issues/299)\n\t\t\tcheckContext = null;\n\t\t\treturn ret;\n\t\t} ];\n\n\tfor ( ; i < len; i++ ) {\n\t\tif ( ( matcher = Expr.relative[ tokens[ i ].type ] ) ) {\n\t\t\tmatchers = [ addCombinator( elementMatcher( matchers ), matcher ) ];\n\t\t} else {\n\t\t\tmatcher = Expr.filter[ tokens[ i ].type ].apply( null, tokens[ i ].matches );\n\n\t\t\t// Return special upon seeing a positional matcher\n\t\t\tif ( matcher[ expando ] ) {\n\n\t\t\t\t// Find the next relative operator (if any) for proper handling\n\t\t\t\tj = ++i;\n\t\t\t\tfor ( ; j < len; j++ ) {\n\t\t\t\t\tif ( Expr.relative[ tokens[ j ].type ] ) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn setMatcher(\n\t\t\t\t\ti > 1 && elementMatcher( matchers ),\n\t\t\t\t\ti > 1 && toSelector(\n\n\t\t\t\t\t\t// If the preceding token was a descendant combinator, insert an implicit any-element `*`\n\t\t\t\t\t\ttokens.slice( 0, i - 1 )\n\t\t\t\t\t\t\t.concat( { value: tokens[ i - 2 ].type === \" \" ? \"*\" : \"\" } )\n\t\t\t\t\t).replace( rtrimCSS, \"$1\" ),\n\t\t\t\t\tmatcher,\n\t\t\t\t\ti < j && matcherFromTokens( tokens.slice( i, j ) ),\n\t\t\t\t\tj < len && matcherFromTokens( ( tokens = tokens.slice( j ) ) ),\n\t\t\t\t\tj < len && toSelector( tokens )\n\t\t\t\t);\n\t\t\t}\n\t\t\tmatchers.push( matcher );\n\t\t}\n\t}\n\n\treturn elementMatcher( matchers );\n}\n\nfunction matcherFromGroupMatchers( elementMatchers, setMatchers ) {\n\tvar bySet = setMatchers.length > 0,\n\t\tbyElement = elementMatchers.length > 0,\n\t\tsuperMatcher = function( seed, context, xml, results, outermost ) {\n\t\t\tvar elem, j, matcher,\n\t\t\t\tmatchedCount = 0,\n\t\t\t\ti = \"0\",\n\t\t\t\tunmatched = seed && [],\n\t\t\t\tsetMatched = [],\n\t\t\t\tcontextBackup = outermostContext,\n\n\t\t\t\t// We must always have either seed elements or outermost context\n\t\t\t\telems = seed || byElement && Expr.find.TAG( \"*\", outermost ),\n\n\t\t\t\t// Use integer dirruns iff this is the outermost matcher\n\t\t\t\tdirrunsUnique = ( dirruns += contextBackup == null ? 1 : Math.random() || 0.1 ),\n\t\t\t\tlen = elems.length;\n\n\t\t\tif ( outermost ) {\n\n\t\t\t\t// Support: IE 11+, Edge 17 - 18+\n\t\t\t\t// IE/Edge sometimes throw a \"Permission denied\" error when strict-comparing\n\t\t\t\t// two documents; shallow comparisons work.\n\t\t\t\t// eslint-disable-next-line eqeqeq\n\t\t\t\toutermostContext = context == document || context || outermost;\n\t\t\t}\n\n\t\t\t// Add elements passing elementMatchers directly to results\n\t\t\t// Support: iOS <=7 - 9 only\n\t\t\t// Tolerate NodeList properties (IE: \"length\"; Safari: <number>) matching\n\t\t\t// elements by id. (see trac-14142)\n\t\t\tfor ( ; i !== len && ( elem = elems[ i ] ) != null; i++ ) {\n\t\t\t\tif ( byElement && elem ) {\n\t\t\t\t\tj = 0;\n\n\t\t\t\t\t// Support: IE 11+, Edge 17 - 18+\n\t\t\t\t\t// IE/Edge sometimes throw a \"Permission denied\" error when strict-comparing\n\t\t\t\t\t// two documents; shallow comparisons work.\n\t\t\t\t\t// eslint-disable-next-line eqeqeq\n\t\t\t\t\tif ( !context && elem.ownerDocument != document ) {\n\t\t\t\t\t\tsetDocument( elem );\n\t\t\t\t\t\txml = !documentIsHTML;\n\t\t\t\t\t}\n\t\t\t\t\twhile ( ( matcher = elementMatchers[ j++ ] ) ) {\n\t\t\t\t\t\tif ( matcher( elem, context || document, xml ) ) {\n\t\t\t\t\t\t\tpush.call( results, elem );\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif ( outermost ) {\n\t\t\t\t\t\tdirruns = dirrunsUnique;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Track unmatched elements for set filters\n\t\t\t\tif ( bySet ) {\n\n\t\t\t\t\t// They will have gone through all possible matchers\n\t\t\t\t\tif ( ( elem = !matcher && elem ) ) {\n\t\t\t\t\t\tmatchedCount--;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Lengthen the array for every element, matched or not\n\t\t\t\t\tif ( seed ) {\n\t\t\t\t\t\tunmatched.push( elem );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// `i` is now the count of elements visited above, and adding it to `matchedCount`\n\t\t\t// makes the latter nonnegative.\n\t\t\tmatchedCount += i;\n\n\t\t\t// Apply set filters to unmatched elements\n\t\t\t// NOTE: This can be skipped if there are no unmatched elements (i.e., `matchedCount`\n\t\t\t// equals `i`), unless we didn't visit _any_ elements in the above loop because we have\n\t\t\t// no element matchers and no seed.\n\t\t\t// Incrementing an initially-string \"0\" `i` allows `i` to remain a string only in that\n\t\t\t// case, which will result in a \"00\" `matchedCount` that differs from `i` but is also\n\t\t\t// numerically zero.\n\t\t\tif ( bySet && i !== matchedCount ) {\n\t\t\t\tj = 0;\n\t\t\t\twhile ( ( matcher = setMatchers[ j++ ] ) ) {\n\t\t\t\t\tmatcher( unmatched, setMatched, context, xml );\n\t\t\t\t}\n\n\t\t\t\tif ( seed ) {\n\n\t\t\t\t\t// Reintegrate element matches to eliminate the need for sorting\n\t\t\t\t\tif ( matchedCount > 0 ) {\n\t\t\t\t\t\twhile ( i-- ) {\n\t\t\t\t\t\t\tif ( !( unmatched[ i ] || setMatched[ i ] ) ) {\n\t\t\t\t\t\t\t\tsetMatched[ i ] = pop.call( results );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Discard index placeholder values to get only actual matches\n\t\t\t\t\tsetMatched = condense( setMatched );\n\t\t\t\t}\n\n\t\t\t\t// Add matches to results\n\t\t\t\tpush.apply( results, setMatched );\n\n\t\t\t\t// Seedless set matches succeeding multiple successful matchers stipulate sorting\n\t\t\t\tif ( outermost && !seed && setMatched.length > 0 &&\n\t\t\t\t\t( matchedCount + setMatchers.length ) > 1 ) {\n\n\t\t\t\t\tjQuery.uniqueSort( results );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Override manipulation of globals by nested matchers\n\t\t\tif ( outermost ) {\n\t\t\t\tdirruns = dirrunsUnique;\n\t\t\t\toutermostContext = contextBackup;\n\t\t\t}\n\n\t\t\treturn unmatched;\n\t\t};\n\n\treturn bySet ?\n\t\tmarkFunction( superMatcher ) :\n\t\tsuperMatcher;\n}\n\nfunction compile( selector, match /* Internal Use Only */ ) {\n\tvar i,\n\t\tsetMatchers = [],\n\t\telementMatchers = [],\n\t\tcached = compilerCache[ selector + \" \" ];\n\n\tif ( !cached ) {\n\n\t\t// Generate a function of recursive functions that can be used to check each element\n\t\tif ( !match ) {\n\t\t\tmatch = tokenize( selector );\n\t\t}\n\t\ti = match.length;\n\t\twhile ( i-- ) {\n\t\t\tcached = matcherFromTokens( match[ i ] );\n\t\t\tif ( cached[ expando ] ) {\n\t\t\t\tsetMatchers.push( cached );\n\t\t\t} else {\n\t\t\t\telementMatchers.push( cached );\n\t\t\t}\n\t\t}\n\n\t\t// Cache the compiled function\n\t\tcached = compilerCache( selector,\n\t\t\tmatcherFromGroupMatchers( elementMatchers, setMatchers ) );\n\n\t\t// Save selector and tokenization\n\t\tcached.selector = selector;\n\t}\n\treturn cached;\n}\n\n/**\n * A low-level selection function that works with jQuery's compiled\n *  selector functions\n * @param {String|Function} selector A selector or a pre-compiled\n *  selector function built with jQuery selector compile\n * @param {Element} context\n * @param {Array} [results]\n * @param {Array} [seed] A set of elements to match against\n */\nfunction select( selector, context, results, seed ) {\n\tvar i, tokens, token, type, find,\n\t\tcompiled = typeof selector === \"function\" && selector,\n\t\tmatch = !seed && tokenize( ( selector = compiled.selector || selector ) );\n\n\tresults = results || [];\n\n\t// Try to minimize operations if there is only one selector in the list and no seed\n\t// (the latter of which guarantees us context)\n\tif ( match.length === 1 ) {\n\n\t\t// Reduce context if the leading compound selector is an ID\n\t\ttokens = match[ 0 ] = match[ 0 ].slice( 0 );\n\t\tif ( tokens.length > 2 && ( token = tokens[ 0 ] ).type === \"ID\" &&\n\t\t\t\tcontext.nodeType === 9 && documentIsHTML && Expr.relative[ tokens[ 1 ].type ] ) {\n\n\t\t\tcontext = ( Expr.find.ID(\n\t\t\t\ttoken.matches[ 0 ].replace( runescape, funescape ),\n\t\t\t\tcontext\n\t\t\t) || [] )[ 0 ];\n\t\t\tif ( !context ) {\n\t\t\t\treturn results;\n\n\t\t\t// Precompiled matchers will still verify ancestry, so step up a level\n\t\t\t} else if ( compiled ) {\n\t\t\t\tcontext = context.parentNode;\n\t\t\t}\n\n\t\t\tselector = selector.slice( tokens.shift().value.length );\n\t\t}\n\n\t\t// Fetch a seed set for right-to-left matching\n\t\ti = matchExpr.needsContext.test( selector ) ? 0 : tokens.length;\n\t\twhile ( i-- ) {\n\t\t\ttoken = tokens[ i ];\n\n\t\t\t// Abort if we hit a combinator\n\t\t\tif ( Expr.relative[ ( type = token.type ) ] ) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif ( ( find = Expr.find[ type ] ) ) {\n\n\t\t\t\t// Search, expanding context for leading sibling combinators\n\t\t\t\tif ( ( seed = find(\n\t\t\t\t\ttoken.matches[ 0 ].replace( runescape, funescape ),\n\t\t\t\t\trsibling.test( tokens[ 0 ].type ) &&\n\t\t\t\t\t\ttestContext( context.parentNode ) || context\n\t\t\t\t) ) ) {\n\n\t\t\t\t\t// If seed is empty or no tokens remain, we can return early\n\t\t\t\t\ttokens.splice( i, 1 );\n\t\t\t\t\tselector = seed.length && toSelector( tokens );\n\t\t\t\t\tif ( !selector ) {\n\t\t\t\t\t\tpush.apply( results, seed );\n\t\t\t\t\t\treturn results;\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Compile and execute a filtering function if one is not provided\n\t// Provide `match` to avoid retokenization if we modified the selector above\n\t( compiled || compile( selector, match ) )(\n\t\tseed,\n\t\tcontext,\n\t\t!documentIsHTML,\n\t\tresults,\n\t\t!context || rsibling.test( selector ) && testContext( context.parentNode ) || context\n\t);\n\treturn results;\n}\n\n// One-time assignments\n\n// Support: Android <=4.0 - 4.1+\n// Sort stability\nsupport.sortStable = expando.split( \"\" ).sort( sortOrder ).join( \"\" ) === expando;\n\n// Initialize against the default document\nsetDocument();\n\n// Support: Android <=4.0 - 4.1+\n// Detached nodes confoundingly follow *each other*\nsupport.sortDetached = assert( function( el ) {\n\n\t// Should return 1, but returns 4 (following)\n\treturn el.compareDocumentPosition( document.createElement( \"fieldset\" ) ) & 1;\n} );\n\njQuery.find = find;\n\n// Deprecated\njQuery.expr[ \":\" ] = jQuery.expr.pseudos;\njQuery.unique = jQuery.uniqueSort;\n\n// These have always been private, but they used to be documented as part of\n// Sizzle so let's maintain them for now for backwards compatibility purposes.\nfind.compile = compile;\nfind.select = select;\nfind.setDocument = setDocument;\nfind.tokenize = tokenize;\n\nfind.escape = jQuery.escapeSelector;\nfind.getText = jQuery.text;\nfind.isXML = jQuery.isXMLDoc;\nfind.selectors = jQuery.expr;\nfind.support = jQuery.support;\nfind.uniqueSort = jQuery.uniqueSort;\n\n\t/* eslint-enable */\n\n} )();\n\n\nvar dir = function( elem, dir, until ) {\n\tvar matched = [],\n\t\ttruncate = until !== undefined;\n\n\twhile ( ( elem = elem[ dir ] ) && elem.nodeType !== 9 ) {\n\t\tif ( elem.nodeType === 1 ) {\n\t\t\tif ( truncate && jQuery( elem ).is( until ) ) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tmatched.push( elem );\n\t\t}\n\t}\n\treturn matched;\n};\n\n\nvar siblings = function( n, elem ) {\n\tvar matched = [];\n\n\tfor ( ; n; n = n.nextSibling ) {\n\t\tif ( n.nodeType === 1 && n !== elem ) {\n\t\t\tmatched.push( n );\n\t\t}\n\t}\n\n\treturn matched;\n};\n\n\nvar rneedsContext = jQuery.expr.match.needsContext;\n\nvar rsingleTag = ( /^<([a-z][^\\/\\0>:\\x20\\t\\r\\n\\f]*)[\\x20\\t\\r\\n\\f]*\\/?>(?:<\\/\\1>|)$/i );\n\n\n\n// Implement the identical functionality for filter and not\nfunction winnow( elements, qualifier, not ) {\n\tif ( isFunction( qualifier ) ) {\n\t\treturn jQuery.grep( elements, function( elem, i ) {\n\t\t\treturn !!qualifier.call( elem, i, elem ) !== not;\n\t\t} );\n\t}\n\n\t// Single element\n\tif ( qualifier.nodeType ) {\n\t\treturn jQuery.grep( elements, function( elem ) {\n\t\t\treturn ( elem === qualifier ) !== not;\n\t\t} );\n\t}\n\n\t// Arraylike of elements (jQuery, arguments, Array)\n\tif ( typeof qualifier !== \"string\" ) {\n\t\treturn jQuery.grep( elements, function( elem ) {\n\t\t\treturn ( indexOf.call( qualifier, elem ) > -1 ) !== not;\n\t\t} );\n\t}\n\n\t// Filtered directly for both simple and complex selectors\n\treturn jQuery.filter( qualifier, elements, not );\n}\n\njQuery.filter = function( expr, elems, not ) {\n\tvar elem = elems[ 0 ];\n\n\tif ( not ) {\n\t\texpr = \":not(\" + expr + \")\";\n\t}\n\n\tif ( elems.length === 1 && elem.nodeType === 1 ) {\n\t\treturn jQuery.find.matchesSelector( elem, expr ) ? [ elem ] : [];\n\t}\n\n\treturn jQuery.find.matches( expr, jQuery.grep( elems, function( elem ) {\n\t\treturn elem.nodeType === 1;\n\t} ) );\n};\n\njQuery.fn.extend( {\n\tfind: function( selector ) {\n\t\tvar i, ret,\n\t\t\tlen = this.length,\n\t\t\tself = this;\n\n\t\tif ( typeof selector !== \"string\" ) {\n\t\t\treturn this.pushStack( jQuery( selector ).filter( function() {\n\t\t\t\tfor ( i = 0; i < len; i++ ) {\n\t\t\t\t\tif ( jQuery.contains( self[ i ], this ) ) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} ) );\n\t\t}\n\n\t\tret = this.pushStack( [] );\n\n\t\tfor ( i = 0; i < len; i++ ) {\n\t\t\tjQuery.find( selector, self[ i ], ret );\n\t\t}\n\n\t\treturn len > 1 ? jQuery.uniqueSort( ret ) : ret;\n\t},\n\tfilter: function( selector ) {\n\t\treturn this.pushStack( winnow( this, selector || [], false ) );\n\t},\n\tnot: function( selector ) {\n\t\treturn this.pushStack( winnow( this, selector || [], true ) );\n\t},\n\tis: function( selector ) {\n\t\treturn !!winnow(\n\t\t\tthis,\n\n\t\t\t// If this is a positional/relative selector, check membership in the returned set\n\t\t\t// so $(\"p:first\").is(\"p:last\") won't return true for a doc with two \"p\".\n\t\t\ttypeof selector === \"string\" && rneedsContext.test( selector ) ?\n\t\t\t\tjQuery( selector ) :\n\t\t\t\tselector || [],\n\t\t\tfalse\n\t\t).length;\n\t}\n} );\n\n\n// Initialize a jQuery object\n\n\n// A central reference to the root jQuery(document)\nvar rootjQuery,\n\n\t// A simple way to check for HTML strings\n\t// Prioritize #id over <tag> to avoid XSS via location.hash (trac-9521)\n\t// Strict HTML recognition (trac-11290: must start with <)\n\t// Shortcut simple #id case for speed\n\trquickExpr = /^(?:\\s*(<[\\w\\W]+>)[^>]*|#([\\w-]+))$/,\n\n\tinit = jQuery.fn.init = function( selector, context, root ) {\n\t\tvar match, elem;\n\n\t\t// HANDLE: $(\"\"), $(null), $(undefined), $(false)\n\t\tif ( !selector ) {\n\t\t\treturn this;\n\t\t}\n\n\t\t// Method init() accepts an alternate rootjQuery\n\t\t// so migrate can support jQuery.sub (gh-2101)\n\t\troot = root || rootjQuery;\n\n\t\t// Handle HTML strings\n\t\tif ( typeof selector === \"string\" ) {\n\t\t\tif ( selector[ 0 ] === \"<\" &&\n\t\t\t\tselector[ selector.length - 1 ] === \">\" &&\n\t\t\t\tselector.length >= 3 ) {\n\n\t\t\t\t// Assume that strings that start and end with <> are HTML and skip the regex check\n\t\t\t\tmatch = [ null, selector, null ];\n\n\t\t\t} else {\n\t\t\t\tmatch = rquickExpr.exec( selector );\n\t\t\t}\n\n\t\t\t// Match html or make sure no context is specified for #id\n\t\t\tif ( match && ( match[ 1 ] || !context ) ) {\n\n\t\t\t\t// HANDLE: $(html) -> $(array)\n\t\t\t\tif ( match[ 1 ] ) {\n\t\t\t\t\tcontext = context instanceof jQuery ? context[ 0 ] : context;\n\n\t\t\t\t\t// Option to run scripts is true for back-compat\n\t\t\t\t\t// Intentionally let the error be thrown if parseHTML is not present\n\t\t\t\t\tjQuery.merge( this, jQuery.parseHTML(\n\t\t\t\t\t\tmatch[ 1 ],\n\t\t\t\t\t\tcontext && context.nodeType ? context.ownerDocument || context : document,\n\t\t\t\t\t\ttrue\n\t\t\t\t\t) );\n\n\t\t\t\t\t// HANDLE: $(html, props)\n\t\t\t\t\tif ( rsingleTag.test( match[ 1 ] ) && jQuery.isPlainObject( context ) ) {\n\t\t\t\t\t\tfor ( match in context ) {\n\n\t\t\t\t\t\t\t// Properties of context are called as methods if possible\n\t\t\t\t\t\t\tif ( isFunction( this[ match ] ) ) {\n\t\t\t\t\t\t\t\tthis[ match ]( context[ match ] );\n\n\t\t\t\t\t\t\t// ...and otherwise set as attributes\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.attr( match, context[ match ] );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\treturn this;\n\n\t\t\t\t// HANDLE: $(#id)\n\t\t\t\t} else {\n\t\t\t\t\telem = document.getElementById( match[ 2 ] );\n\n\t\t\t\t\tif ( elem ) {\n\n\t\t\t\t\t\t// Inject the element directly into the jQuery object\n\t\t\t\t\t\tthis[ 0 ] = elem;\n\t\t\t\t\t\tthis.length = 1;\n\t\t\t\t\t}\n\t\t\t\t\treturn this;\n\t\t\t\t}\n\n\t\t\t// HANDLE: $(expr, $(...))\n\t\t\t} else if ( !context || context.jquery ) {\n\t\t\t\treturn ( context || root ).find( selector );\n\n\t\t\t// HANDLE: $(expr, context)\n\t\t\t// (which is just equivalent to: $(context).find(expr)\n\t\t\t} else {\n\t\t\t\treturn this.constructor( context ).find( selector );\n\t\t\t}\n\n\t\t// HANDLE: $(DOMElement)\n\t\t} else if ( selector.nodeType ) {\n\t\t\tthis[ 0 ] = selector;\n\t\t\tthis.length = 1;\n\t\t\treturn this;\n\n\t\t// HANDLE: $(function)\n\t\t// Shortcut for document ready\n\t\t} else if ( isFunction( selector ) ) {\n\t\t\treturn root.ready !== undefined ?\n\t\t\t\troot.ready( selector ) :\n\n\t\t\t\t// Execute immediately if ready is not present\n\t\t\t\tselector( jQuery );\n\t\t}\n\n\t\treturn jQuery.makeArray( selector, this );\n\t};\n\n// Give the init function the jQuery prototype for later instantiation\ninit.prototype = jQuery.fn;\n\n// Initialize central reference\nrootjQuery = jQuery( document );\n\n\nvar rparentsprev = /^(?:parents|prev(?:Until|All))/,\n\n\t// Methods guaranteed to produce a unique set when starting from a unique set\n\tguaranteedUnique = {\n\t\tchildren: true,\n\t\tcontents: true,\n\t\tnext: true,\n\t\tprev: true\n\t};\n\njQuery.fn.extend( {\n\thas: function( target ) {\n\t\tvar targets = jQuery( target, this ),\n\t\t\tl = targets.length;\n\n\t\treturn this.filter( function() {\n\t\t\tvar i = 0;\n\t\t\tfor ( ; i < l; i++ ) {\n\t\t\t\tif ( jQuery.contains( this, targets[ i ] ) ) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t},\n\n\tclosest: function( selectors, context ) {\n\t\tvar cur,\n\t\t\ti = 0,\n\t\t\tl = this.length,\n\t\t\tmatched = [],\n\t\t\ttargets = typeof selectors !== \"string\" && jQuery( selectors );\n\n\t\t// Positional selectors never match, since there's no _selection_ context\n\t\tif ( !rneedsContext.test( selectors ) ) {\n\t\t\tfor ( ; i < l; i++ ) {\n\t\t\t\tfor ( cur = this[ i ]; cur && cur !== context; cur = cur.parentNode ) {\n\n\t\t\t\t\t// Always skip document fragments\n\t\t\t\t\tif ( cur.nodeType < 11 && ( targets ?\n\t\t\t\t\t\ttargets.index( cur ) > -1 :\n\n\t\t\t\t\t\t// Don't pass non-elements to jQuery#find\n\t\t\t\t\t\tcur.nodeType === 1 &&\n\t\t\t\t\t\t\tjQuery.find.matchesSelector( cur, selectors ) ) ) {\n\n\t\t\t\t\t\tmatched.push( cur );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn this.pushStack( matched.length > 1 ? jQuery.uniqueSort( matched ) : matched );\n\t},\n\n\t// Determine the position of an element within the set\n\tindex: function( elem ) {\n\n\t\t// No argument, return index in parent\n\t\tif ( !elem ) {\n\t\t\treturn ( this[ 0 ] && this[ 0 ].parentNode ) ? this.first().prevAll().length : -1;\n\t\t}\n\n\t\t// Index in selector\n\t\tif ( typeof elem === \"string\" ) {\n\t\t\treturn indexOf.call( jQuery( elem ), this[ 0 ] );\n\t\t}\n\n\t\t// Locate the position of the desired element\n\t\treturn indexOf.call( this,\n\n\t\t\t// If it receives a jQuery object, the first element is used\n\t\t\telem.jquery ? elem[ 0 ] : elem\n\t\t);\n\t},\n\n\tadd: function( selector, context ) {\n\t\treturn this.pushStack(\n\t\t\tjQuery.uniqueSort(\n\t\t\t\tjQuery.merge( this.get(), jQuery( selector, context ) )\n\t\t\t)\n\t\t);\n\t},\n\n\taddBack: function( selector ) {\n\t\treturn this.add( selector == null ?\n\t\t\tthis.prevObject : this.prevObject.filter( selector )\n\t\t);\n\t}\n} );\n\nfunction sibling( cur, dir ) {\n\twhile ( ( cur = cur[ dir ] ) && cur.nodeType !== 1 ) {}\n\treturn cur;\n}\n\njQuery.each( {\n\tparent: function( elem ) {\n\t\tvar parent = elem.parentNode;\n\t\treturn parent && parent.nodeType !== 11 ? parent : null;\n\t},\n\tparents: function( elem ) {\n\t\treturn dir( elem, \"parentNode\" );\n\t},\n\tparentsUntil: function( elem, _i, until ) {\n\t\treturn dir( elem, \"parentNode\", until );\n\t},\n\tnext: function( elem ) {\n\t\treturn sibling( elem, \"nextSibling\" );\n\t},\n\tprev: function( elem ) {\n\t\treturn sibling( elem, \"previousSibling\" );\n\t},\n\tnextAll: function( elem ) {\n\t\treturn dir( elem, \"nextSibling\" );\n\t},\n\tprevAll: function( elem ) {\n\t\treturn dir( elem, \"previousSibling\" );\n\t},\n\tnextUntil: function( elem, _i, until ) {\n\t\treturn dir( elem, \"nextSibling\", until );\n\t},\n\tprevUntil: function( elem, _i, until ) {\n\t\treturn dir( elem, \"previousSibling\", until );\n\t},\n\tsiblings: function( elem ) {\n\t\treturn siblings( ( elem.parentNode || {} ).firstChild, elem );\n\t},\n\tchildren: function( elem ) {\n\t\treturn siblings( elem.firstChild );\n\t},\n\tcontents: function( elem ) {\n\t\tif ( elem.contentDocument != null &&\n\n\t\t\t// Support: IE 11+\n\t\t\t// <object> elements with no `data` attribute has an object\n\t\t\t// `contentDocument` with a `null` prototype.\n\t\t\tgetProto( elem.contentDocument ) ) {\n\n\t\t\treturn elem.contentDocument;\n\t\t}\n\n\t\t// Support: IE 9 - 11 only, iOS 7 only, Android Browser <=4.3 only\n\t\t// Treat the template element as a regular one in browsers that\n\t\t// don't support it.\n\t\tif ( nodeName( elem, \"template\" ) ) {\n\t\t\telem = elem.content || elem;\n\t\t}\n\n\t\treturn jQuery.merge( [], elem.childNodes );\n\t}\n}, function( name, fn ) {\n\tjQuery.fn[ name ] = function( until, selector ) {\n\t\tvar matched = jQuery.map( this, fn, until );\n\n\t\tif ( name.slice( -5 ) !== \"Until\" ) {\n\t\t\tselector = until;\n\t\t}\n\n\t\tif ( selector && typeof selector === \"string\" ) {\n\t\t\tmatched = jQuery.filter( selector, matched );\n\t\t}\n\n\t\tif ( this.length > 1 ) {\n\n\t\t\t// Remove duplicates\n\t\t\tif ( !guaranteedUnique[ name ] ) {\n\t\t\t\tjQuery.uniqueSort( matched );\n\t\t\t}\n\n\t\t\t// Reverse order for parents* and prev-derivatives\n\t\t\tif ( rparentsprev.test( name ) ) {\n\t\t\t\tmatched.reverse();\n\t\t\t}\n\t\t}\n\n\t\treturn this.pushStack( matched );\n\t};\n} );\nvar rnothtmlwhite = ( /[^\\x20\\t\\r\\n\\f]+/g );\n\n\n\n// Convert String-formatted options into Object-formatted ones\nfunction createOptions( options ) {\n\tvar object = {};\n\tjQuery.each( options.match( rnothtmlwhite ) || [], function( _, flag ) {\n\t\tobject[ flag ] = true;\n\t} );\n\treturn object;\n}\n\n/*\n * Create a callback list using the following parameters:\n *\n *\toptions: an optional list of space-separated options that will change how\n *\t\t\tthe callback list behaves or a more traditional option object\n *\n * By default a callback list will act like an event callback list and can be\n * \"fired\" multiple times.\n *\n * Possible options:\n *\n *\tonce:\t\t\twill ensure the callback list can only be fired once (like a Deferred)\n *\n *\tmemory:\t\t\twill keep track of previous values and will call any callback added\n *\t\t\t\t\tafter the list has been fired right away with the latest \"memorized\"\n *\t\t\t\t\tvalues (like a Deferred)\n *\n *\tunique:\t\t\twill ensure a callback can only be added once (no duplicate in the list)\n *\n *\tstopOnFalse:\tinterrupt callings when a callback returns false\n *\n */\njQuery.Callbacks = function( options ) {\n\n\t// Convert options from String-formatted to Object-formatted if needed\n\t// (we check in cache first)\n\toptions = typeof options === \"string\" ?\n\t\tcreateOptions( options ) :\n\t\tjQuery.extend( {}, options );\n\n\tvar // Flag to know if list is currently firing\n\t\tfiring,\n\n\t\t// Last fire value for non-forgettable lists\n\t\tmemory,\n\n\t\t// Flag to know if list was already fired\n\t\tfired,\n\n\t\t// Flag to prevent firing\n\t\tlocked,\n\n\t\t// Actual callback list\n\t\tlist = [],\n\n\t\t// Queue of execution data for repeatable lists\n\t\tqueue = [],\n\n\t\t// Index of currently firing callback (modified by add/remove as needed)\n\t\tfiringIndex = -1,\n\n\t\t// Fire callbacks\n\t\tfire = function() {\n\n\t\t\t// Enforce single-firing\n\t\t\tlocked = locked || options.once;\n\n\t\t\t// Execute callbacks for all pending executions,\n\t\t\t// respecting firingIndex overrides and runtime changes\n\t\t\tfired = firing = true;\n\t\t\tfor ( ; queue.length; firingIndex = -1 ) {\n\t\t\t\tmemory = queue.shift();\n\t\t\t\twhile ( ++firingIndex < list.length ) {\n\n\t\t\t\t\t// Run callback and check for early termination\n\t\t\t\t\tif ( list[ firingIndex ].apply( memory[ 0 ], memory[ 1 ] ) === false &&\n\t\t\t\t\t\toptions.stopOnFalse ) {\n\n\t\t\t\t\t\t// Jump to end and forget the data so .add doesn't re-fire\n\t\t\t\t\t\tfiringIndex = list.length;\n\t\t\t\t\t\tmemory = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Forget the data if we're done with it\n\t\t\tif ( !options.memory ) {\n\t\t\t\tmemory = false;\n\t\t\t}\n\n\t\t\tfiring = false;\n\n\t\t\t// Clean up if we're done firing for good\n\t\t\tif ( locked ) {\n\n\t\t\t\t// Keep an empty list if we have data for future add calls\n\t\t\t\tif ( memory ) {\n\t\t\t\t\tlist = [];\n\n\t\t\t\t// Otherwise, this object is spent\n\t\t\t\t} else {\n\t\t\t\t\tlist = \"\";\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t// Actual Callbacks object\n\t\tself = {\n\n\t\t\t// Add a callback or a collection of callbacks to the list\n\t\t\tadd: function() {\n\t\t\t\tif ( list ) {\n\n\t\t\t\t\t// If we have memory from a past run, we should fire after adding\n\t\t\t\t\tif ( memory && !firing ) {\n\t\t\t\t\t\tfiringIndex = list.length - 1;\n\t\t\t\t\t\tqueue.push( memory );\n\t\t\t\t\t}\n\n\t\t\t\t\t( function add( args ) {\n\t\t\t\t\t\tjQuery.each( args, function( _, arg ) {\n\t\t\t\t\t\t\tif ( isFunction( arg ) ) {\n\t\t\t\t\t\t\t\tif ( !options.unique || !self.has( arg ) ) {\n\t\t\t\t\t\t\t\t\tlist.push( arg );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else if ( arg && arg.length && toType( arg ) !== \"string\" ) {\n\n\t\t\t\t\t\t\t\t// Inspect recursively\n\t\t\t\t\t\t\t\tadd( arg );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} );\n\t\t\t\t\t} )( arguments );\n\n\t\t\t\t\tif ( memory && !firing ) {\n\t\t\t\t\t\tfire();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn this;\n\t\t\t},\n\n\t\t\t// Remove a callback from the list\n\t\t\tremove: function() {\n\t\t\t\tjQuery.each( arguments, function( _, arg ) {\n\t\t\t\t\tvar index;\n\t\t\t\t\twhile ( ( index = jQuery.inArray( arg, list, index ) ) > -1 ) {\n\t\t\t\t\t\tlist.splice( index, 1 );\n\n\t\t\t\t\t\t// Handle firing indexes\n\t\t\t\t\t\tif ( index <= firingIndex ) {\n\t\t\t\t\t\t\tfiringIndex--;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t\treturn this;\n\t\t\t},\n\n\t\t\t// Check if a given callback is in the list.\n\t\t\t// If no argument is given, return whether or not list has callbacks attached.\n\t\t\thas: function( fn ) {\n\t\t\t\treturn fn ?\n\t\t\t\t\tjQuery.inArray( fn, list ) > -1 :\n\t\t\t\t\tlist.length > 0;\n\t\t\t},\n\n\t\t\t// Remove all callbacks from the list\n\t\t\tempty: function() {\n\t\t\t\tif ( list ) {\n\t\t\t\t\tlist = [];\n\t\t\t\t}\n\t\t\t\treturn this;\n\t\t\t},\n\n\t\t\t// Disable .fire and .add\n\t\t\t// Abort any current/pending executions\n\t\t\t// Clear all callbacks and values\n\t\t\tdisable: function() {\n\t\t\t\tlocked = queue = [];\n\t\t\t\tlist = memory = \"\";\n\t\t\t\treturn this;\n\t\t\t},\n\t\t\tdisabled: function() {\n\t\t\t\treturn !list;\n\t\t\t},\n\n\t\t\t// Disable .fire\n\t\t\t// Also disable .add unless we have memory (since it would have no effect)\n\t\t\t// Abort any pending executions\n\t\t\tlock: function() {\n\t\t\t\tlocked = queue = [];\n\t\t\t\tif ( !memory && !firing ) {\n\t\t\t\t\tlist = memory = \"\";\n\t\t\t\t}\n\t\t\t\treturn this;\n\t\t\t},\n\t\t\tlocked: function() {\n\t\t\t\treturn !!locked;\n\t\t\t},\n\n\t\t\t// Call all callbacks with the given context and arguments\n\t\t\tfireWith: function( context, args ) {\n\t\t\t\tif ( !locked ) {\n\t\t\t\t\targs = args || [];\n\t\t\t\t\targs = [ context, args.slice ? args.slice() : args ];\n\t\t\t\t\tqueue.push( args );\n\t\t\t\t\tif ( !firing ) {\n\t\t\t\t\t\tfire();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn this;\n\t\t\t},\n\n\t\t\t// Call all the callbacks with the given arguments\n\t\t\tfire: function() {\n\t\t\t\tself.fireWith( this, arguments );\n\t\t\t\treturn this;\n\t\t\t},\n\n\t\t\t// To know if the callbacks have already been called at least once\n\t\t\tfired: function() {\n\t\t\t\treturn !!fired;\n\t\t\t}\n\t\t};\n\n\treturn self;\n};\n\n\nfunction Identity( v ) {\n\treturn v;\n}\nfunction Thrower( ex ) {\n\tthrow ex;\n}\n\nfunction adoptValue( value, resolve, reject, noValue ) {\n\tvar method;\n\n\ttry {\n\n\t\t// Check for promise aspect first to privilege synchronous behavior\n\t\tif ( value && isFunction( ( method = value.promise ) ) ) {\n\t\t\tmethod.call( value ).done( resolve ).fail( reject );\n\n\t\t// Other thenables\n\t\t} else if ( value && isFunction( ( method = value.then ) ) ) {\n\t\t\tmethod.call( value, resolve, reject );\n\n\t\t// Other non-thenables\n\t\t} else {\n\n\t\t\t// Control `resolve` arguments by letting Array#slice cast boolean `noValue` to integer:\n\t\t\t// * false: [ value ].slice( 0 ) => resolve( value )\n\t\t\t// * true: [ value ].slice( 1 ) => resolve()\n\t\t\tresolve.apply( undefined, [ value ].slice( noValue ) );\n\t\t}\n\n\t// For Promises/A+, convert exceptions into rejections\n\t// Since jQuery.when doesn't unwrap thenables, we can skip the extra checks appearing in\n\t// Deferred#then to conditionally suppress rejection.\n\t} catch ( value ) {\n\n\t\t// Support: Android 4.0 only\n\t\t// Strict mode functions invoked without .call/.apply get global-object context\n\t\treject.apply( undefined, [ value ] );\n\t}\n}\n\njQuery.extend( {\n\n\tDeferred: function( func ) {\n\t\tvar tuples = [\n\n\t\t\t\t// action, add listener, callbacks,\n\t\t\t\t// ... .then handlers, argument index, [final state]\n\t\t\t\t[ \"notify\", \"progress\", jQuery.Callbacks( \"memory\" ),\n\t\t\t\t\tjQuery.Callbacks( \"memory\" ), 2 ],\n\t\t\t\t[ \"resolve\", \"done\", jQuery.Callbacks( \"once memory\" ),\n\t\t\t\t\tjQuery.Callbacks( \"once memory\" ), 0, \"resolved\" ],\n\t\t\t\t[ \"reject\", \"fail\", jQuery.Callbacks( \"once memory\" ),\n\t\t\t\t\tjQuery.Callbacks( \"once memory\" ), 1, \"rejected\" ]\n\t\t\t],\n\t\t\tstate = \"pending\",\n\t\t\tpromise = {\n\t\t\t\tstate: function() {\n\t\t\t\t\treturn state;\n\t\t\t\t},\n\t\t\t\talways: function() {\n\t\t\t\t\tdeferred.done( arguments ).fail( arguments );\n\t\t\t\t\treturn this;\n\t\t\t\t},\n\t\t\t\t\"catch\": function( fn ) {\n\t\t\t\t\treturn promise.then( null, fn );\n\t\t\t\t},\n\n\t\t\t\t// Keep pipe for back-compat\n\t\t\t\tpipe: function( /* fnDone, fnFail, fnProgress */ ) {\n\t\t\t\t\tvar fns = arguments;\n\n\t\t\t\t\treturn jQuery.Deferred( function( newDefer ) {\n\t\t\t\t\t\tjQuery.each( tuples, function( _i, tuple ) {\n\n\t\t\t\t\t\t\t// Map tuples (progress, done, fail) to arguments (done, fail, progress)\n\t\t\t\t\t\t\tvar fn = isFunction( fns[ tuple[ 4 ] ] ) && fns[ tuple[ 4 ] ];\n\n\t\t\t\t\t\t\t// deferred.progress(function() { bind to newDefer or newDefer.notify })\n\t\t\t\t\t\t\t// deferred.done(function() { bind to newDefer or newDefer.resolve })\n\t\t\t\t\t\t\t// deferred.fail(function() { bind to newDefer or newDefer.reject })\n\t\t\t\t\t\t\tdeferred[ tuple[ 1 ] ]( function() {\n\t\t\t\t\t\t\t\tvar returned = fn && fn.apply( this, arguments );\n\t\t\t\t\t\t\t\tif ( returned && isFunction( returned.promise ) ) {\n\t\t\t\t\t\t\t\t\treturned.promise()\n\t\t\t\t\t\t\t\t\t\t.progress( newDefer.notify )\n\t\t\t\t\t\t\t\t\t\t.done( newDefer.resolve )\n\t\t\t\t\t\t\t\t\t\t.fail( newDefer.reject );\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tnewDefer[ tuple[ 0 ] + \"With\" ](\n\t\t\t\t\t\t\t\t\t\tthis,\n\t\t\t\t\t\t\t\t\t\tfn ? [ returned ] : arguments\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t} );\n\t\t\t\t\t\tfns = null;\n\t\t\t\t\t} ).promise();\n\t\t\t\t},\n\t\t\t\tthen: function( onFulfilled, onRejected, onProgress ) {\n\t\t\t\t\tvar maxDepth = 0;\n\t\t\t\t\tfunction resolve( depth, deferred, handler, special ) {\n\t\t\t\t\t\treturn function() {\n\t\t\t\t\t\t\tvar that = this,\n\t\t\t\t\t\t\t\targs = arguments,\n\t\t\t\t\t\t\t\tmightThrow = function() {\n\t\t\t\t\t\t\t\t\tvar returned, then;\n\n\t\t\t\t\t\t\t\t\t// Support: Promises/A+ section 2.3.3.3.3\n\t\t\t\t\t\t\t\t\t// https://promisesaplus.com/#point-59\n\t\t\t\t\t\t\t\t\t// Ignore double-resolution attempts\n\t\t\t\t\t\t\t\t\tif ( depth < maxDepth ) {\n\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\treturned = handler.apply( that, args );\n\n\t\t\t\t\t\t\t\t\t// Support: Promises/A+ section 2.3.1\n\t\t\t\t\t\t\t\t\t// https://promisesaplus.com/#point-48\n\t\t\t\t\t\t\t\t\tif ( returned === deferred.promise() ) {\n\t\t\t\t\t\t\t\t\t\tthrow new TypeError( \"Thenable self-resolution\" );\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t// Support: Promises/A+ sections 2.3.3.1, 3.5\n\t\t\t\t\t\t\t\t\t// https://promisesaplus.com/#point-54\n\t\t\t\t\t\t\t\t\t// https://promisesaplus.com/#point-75\n\t\t\t\t\t\t\t\t\t// Retrieve `then` only once\n\t\t\t\t\t\t\t\t\tthen = returned &&\n\n\t\t\t\t\t\t\t\t\t\t// Support: Promises/A+ section 2.3.4\n\t\t\t\t\t\t\t\t\t\t// https://promisesaplus.com/#point-64\n\t\t\t\t\t\t\t\t\t\t// Only check objects and functions for thenability\n\t\t\t\t\t\t\t\t\t\t( typeof returned === \"object\" ||\n\t\t\t\t\t\t\t\t\t\t\ttypeof returned === \"function\" ) &&\n\t\t\t\t\t\t\t\t\t\treturned.then;\n\n\t\t\t\t\t\t\t\t\t// Handle a returned thenable\n\t\t\t\t\t\t\t\t\tif ( isFunction( then ) ) {\n\n\t\t\t\t\t\t\t\t\t\t// Special processors (notify) just wait for resolution\n\t\t\t\t\t\t\t\t\t\tif ( special ) {\n\t\t\t\t\t\t\t\t\t\t\tthen.call(\n\t\t\t\t\t\t\t\t\t\t\t\treturned,\n\t\t\t\t\t\t\t\t\t\t\t\tresolve( maxDepth, deferred, Identity, special ),\n\t\t\t\t\t\t\t\t\t\t\t\tresolve( maxDepth, deferred, Thrower, special )\n\t\t\t\t\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t\t\t\t// Normal processors (resolve) also hook into progress\n\t\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\t\t// ...and disregard older resolution values\n\t\t\t\t\t\t\t\t\t\t\tmaxDepth++;\n\n\t\t\t\t\t\t\t\t\t\t\tthen.call(\n\t\t\t\t\t\t\t\t\t\t\t\treturned,\n\t\t\t\t\t\t\t\t\t\t\t\tresolve( maxDepth, deferred, Identity, special ),\n\t\t\t\t\t\t\t\t\t\t\t\tresolve( maxDepth, deferred, Thrower, special ),\n\t\t\t\t\t\t\t\t\t\t\t\tresolve( maxDepth, deferred, Identity,\n\t\t\t\t\t\t\t\t\t\t\t\t\tdeferred.notifyWith )\n\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t// Handle all other returned values\n\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\t// Only substitute handlers pass on context\n\t\t\t\t\t\t\t\t\t\t// and multiple values (non-spec behavior)\n\t\t\t\t\t\t\t\t\t\tif ( handler !== Identity ) {\n\t\t\t\t\t\t\t\t\t\t\tthat = undefined;\n\t\t\t\t\t\t\t\t\t\t\targs = [ returned ];\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t// Process the value(s)\n\t\t\t\t\t\t\t\t\t\t// Default process is resolve\n\t\t\t\t\t\t\t\t\t\t( special || deferred.resolveWith )( that, args );\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},\n\n\t\t\t\t\t\t\t\t// Only normal processors (resolve) catch and reject exceptions\n\t\t\t\t\t\t\t\tprocess = special ?\n\t\t\t\t\t\t\t\t\tmightThrow :\n\t\t\t\t\t\t\t\t\tfunction() {\n\t\t\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\t\t\tmightThrow();\n\t\t\t\t\t\t\t\t\t\t} catch ( e ) {\n\n\t\t\t\t\t\t\t\t\t\t\tif ( jQuery.Deferred.exceptionHook ) {\n\t\t\t\t\t\t\t\t\t\t\t\tjQuery.Deferred.exceptionHook( e,\n\t\t\t\t\t\t\t\t\t\t\t\t\tprocess.error );\n\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t// Support: Promises/A+ section 2.3.3.3.4.1\n\t\t\t\t\t\t\t\t\t\t\t// https://promisesaplus.com/#point-61\n\t\t\t\t\t\t\t\t\t\t\t// Ignore post-resolution exceptions\n\t\t\t\t\t\t\t\t\t\t\tif ( depth + 1 >= maxDepth ) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t// Only substitute handlers pass on context\n\t\t\t\t\t\t\t\t\t\t\t\t// and multiple values (non-spec behavior)\n\t\t\t\t\t\t\t\t\t\t\t\tif ( handler !== Thrower ) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tthat = undefined;\n\t\t\t\t\t\t\t\t\t\t\t\t\targs = [ e ];\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\tdeferred.rejectWith( that, args );\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t// Support: Promises/A+ section 2.3.3.3.1\n\t\t\t\t\t\t\t// https://promisesaplus.com/#point-57\n\t\t\t\t\t\t\t// Re-resolve promises immediately to dodge false rejection from\n\t\t\t\t\t\t\t// subsequent errors\n\t\t\t\t\t\t\tif ( depth ) {\n\t\t\t\t\t\t\t\tprocess();\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t// Call an optional hook to record the error, in case of exception\n\t\t\t\t\t\t\t\t// since it's otherwise lost when execution goes async\n\t\t\t\t\t\t\t\tif ( jQuery.Deferred.getErrorHook ) {\n\t\t\t\t\t\t\t\t\tprocess.error = jQuery.Deferred.getErrorHook();\n\n\t\t\t\t\t\t\t\t// The deprecated alias of the above. While the name suggests\n\t\t\t\t\t\t\t\t// returning the stack, not an error instance, jQuery just passes\n\t\t\t\t\t\t\t\t// it directly to `console.warn` so both will work; an instance\n\t\t\t\t\t\t\t\t// just better cooperates with source maps.\n\t\t\t\t\t\t\t\t} else if ( jQuery.Deferred.getStackHook ) {\n\t\t\t\t\t\t\t\t\tprocess.error = jQuery.Deferred.getStackHook();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\twindow.setTimeout( process );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\n\t\t\t\t\treturn jQuery.Deferred( function( newDefer ) {\n\n\t\t\t\t\t\t// progress_handlers.add( ... )\n\t\t\t\t\t\ttuples[ 0 ][ 3 ].add(\n\t\t\t\t\t\t\tresolve(\n\t\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\t\tnewDefer,\n\t\t\t\t\t\t\t\tisFunction( onProgress ) ?\n\t\t\t\t\t\t\t\t\tonProgress :\n\t\t\t\t\t\t\t\t\tIdentity,\n\t\t\t\t\t\t\t\tnewDefer.notifyWith\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\t// fulfilled_handlers.add( ... )\n\t\t\t\t\t\ttuples[ 1 ][ 3 ].add(\n\t\t\t\t\t\t\tresolve(\n\t\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\t\tnewDefer,\n\t\t\t\t\t\t\t\tisFunction( onFulfilled ) ?\n\t\t\t\t\t\t\t\t\tonFulfilled :\n\t\t\t\t\t\t\t\t\tIdentity\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\t// rejected_handlers.add( ... )\n\t\t\t\t\t\ttuples[ 2 ][ 3 ].add(\n\t\t\t\t\t\t\tresolve(\n\t\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\t\tnewDefer,\n\t\t\t\t\t\t\t\tisFunction( onRejected ) ?\n\t\t\t\t\t\t\t\t\tonRejected :\n\t\t\t\t\t\t\t\t\tThrower\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t);\n\t\t\t\t\t} ).promise();\n\t\t\t\t},\n\n\t\t\t\t// Get a promise for this deferred\n\t\t\t\t// If obj is provided, the promise aspect is added to the object\n\t\t\t\tpromise: function( obj ) {\n\t\t\t\t\treturn obj != null ? jQuery.extend( obj, promise ) : promise;\n\t\t\t\t}\n\t\t\t},\n\t\t\tdeferred = {};\n\n\t\t// Add list-specific methods\n\t\tjQuery.each( tuples, function( i, tuple ) {\n\t\t\tvar list = tuple[ 2 ],\n\t\t\t\tstateString = tuple[ 5 ];\n\n\t\t\t// promise.progress = list.add\n\t\t\t// promise.done = list.add\n\t\t\t// promise.fail = list.add\n\t\t\tpromise[ tuple[ 1 ] ] = list.add;\n\n\t\t\t// Handle state\n\t\t\tif ( stateString ) {\n\t\t\t\tlist.add(\n\t\t\t\t\tfunction() {\n\n\t\t\t\t\t\t// state = \"resolved\" (i.e., fulfilled)\n\t\t\t\t\t\t// state = \"rejected\"\n\t\t\t\t\t\tstate = stateString;\n\t\t\t\t\t},\n\n\t\t\t\t\t// rejected_callbacks.disable\n\t\t\t\t\t// fulfilled_callbacks.disable\n\t\t\t\t\ttuples[ 3 - i ][ 2 ].disable,\n\n\t\t\t\t\t// rejected_handlers.disable\n\t\t\t\t\t// fulfilled_handlers.disable\n\t\t\t\t\ttuples[ 3 - i ][ 3 ].disable,\n\n\t\t\t\t\t// progress_callbacks.lock\n\t\t\t\t\ttuples[ 0 ][ 2 ].lock,\n\n\t\t\t\t\t// progress_handlers.lock\n\t\t\t\t\ttuples[ 0 ][ 3 ].lock\n\t\t\t\t);\n\t\t\t}\n\n\t\t\t// progress_handlers.fire\n\t\t\t// fulfilled_handlers.fire\n\t\t\t// rejected_handlers.fire\n\t\t\tlist.add( tuple[ 3 ].fire );\n\n\t\t\t// deferred.notify = function() { deferred.notifyWith(...) }\n\t\t\t// deferred.resolve = function() { deferred.resolveWith(...) }\n\t\t\t// deferred.reject = function() { deferred.rejectWith(...) }\n\t\t\tdeferred[ tuple[ 0 ] ] = function() {\n\t\t\t\tdeferred[ tuple[ 0 ] + \"With\" ]( this === deferred ? undefined : this, arguments );\n\t\t\t\treturn this;\n\t\t\t};\n\n\t\t\t// deferred.notifyWith = list.fireWith\n\t\t\t// deferred.resolveWith = list.fireWith\n\t\t\t// deferred.rejectWith = list.fireWith\n\t\t\tdeferred[ tuple[ 0 ] + \"With\" ] = list.fireWith;\n\t\t} );\n\n\t\t// Make the deferred a promise\n\t\tpromise.promise( deferred );\n\n\t\t// Call given func if any\n\t\tif ( func ) {\n\t\t\tfunc.call( deferred, deferred );\n\t\t}\n\n\t\t// All done!\n\t\treturn deferred;\n\t},\n\n\t// Deferred helper\n\twhen: function( singleValue ) {\n\t\tvar\n\n\t\t\t// count of uncompleted subordinates\n\t\t\tremaining = arguments.length,\n\n\t\t\t// count of unprocessed arguments\n\t\t\ti = remaining,\n\n\t\t\t// subordinate fulfillment data\n\t\t\tresolveContexts = Array( i ),\n\t\t\tresolveValues = slice.call( arguments ),\n\n\t\t\t// the primary Deferred\n\t\t\tprimary = jQuery.Deferred(),\n\n\t\t\t// subordinate callback factory\n\t\t\tupdateFunc = function( i ) {\n\t\t\t\treturn function( value ) {\n\t\t\t\t\tresolveContexts[ i ] = this;\n\t\t\t\t\tresolveValues[ i ] = arguments.length > 1 ? slice.call( arguments ) : value;\n\t\t\t\t\tif ( !( --remaining ) ) {\n\t\t\t\t\t\tprimary.resolveWith( resolveContexts, resolveValues );\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t};\n\n\t\t// Single- and empty arguments are adopted like Promise.resolve\n\t\tif ( remaining <= 1 ) {\n\t\t\tadoptValue( singleValue, primary.done( updateFunc( i ) ).resolve, primary.reject,\n\t\t\t\t!remaining );\n\n\t\t\t// Use .then() to unwrap secondary thenables (cf. gh-3000)\n\t\t\tif ( primary.state() === \"pending\" ||\n\t\t\t\tisFunction( resolveValues[ i ] && resolveValues[ i ].then ) ) {\n\n\t\t\t\treturn primary.then();\n\t\t\t}\n\t\t}\n\n\t\t// Multiple arguments are aggregated like Promise.all array elements\n\t\twhile ( i-- ) {\n\t\t\tadoptValue( resolveValues[ i ], updateFunc( i ), primary.reject );\n\t\t}\n\n\t\treturn primary.promise();\n\t}\n} );\n\n\n// These usually indicate a programmer mistake during development,\n// warn about them ASAP rather than swallowing them by default.\nvar rerrorNames = /^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;\n\n// If `jQuery.Deferred.getErrorHook` is defined, `asyncError` is an error\n// captured before the async barrier to get the original error cause\n// which may otherwise be hidden.\njQuery.Deferred.exceptionHook = function( error, asyncError ) {\n\n\t// Support: IE 8 - 9 only\n\t// Console exists when dev tools are open, which can happen at any time\n\tif ( window.console && window.console.warn && error && rerrorNames.test( error.name ) ) {\n\t\twindow.console.warn( \"jQuery.Deferred exception: \" + error.message,\n\t\t\terror.stack, asyncError );\n\t}\n};\n\n\n\n\njQuery.readyException = function( error ) {\n\twindow.setTimeout( function() {\n\t\tthrow error;\n\t} );\n};\n\n\n\n\n// The deferred used on DOM ready\nvar readyList = jQuery.Deferred();\n\njQuery.fn.ready = function( fn ) {\n\n\treadyList\n\t\t.then( fn )\n\n\t\t// Wrap jQuery.readyException in a function so that the lookup\n\t\t// happens at the time of error handling instead of callback\n\t\t// registration.\n\t\t.catch( function( error ) {\n\t\t\tjQuery.readyException( error );\n\t\t} );\n\n\treturn this;\n};\n\njQuery.extend( {\n\n\t// Is the DOM ready to be used? Set to true once it occurs.\n\tisReady: false,\n\n\t// A counter to track how many items to wait for before\n\t// the ready event fires. See trac-6781\n\treadyWait: 1,\n\n\t// Handle when the DOM is ready\n\tready: function( wait ) {\n\n\t\t// Abort if there are pending holds or we're already ready\n\t\tif ( wait === true ? --jQuery.readyWait : jQuery.isReady ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Remember that the DOM is ready\n\t\tjQuery.isReady = true;\n\n\t\t// If a normal DOM Ready event fired, decrement, and wait if need be\n\t\tif ( wait !== true && --jQuery.readyWait > 0 ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// If there are functions bound, to execute\n\t\treadyList.resolveWith( document, [ jQuery ] );\n\t}\n} );\n\njQuery.ready.then = readyList.then;\n\n// The ready event handler and self cleanup method\nfunction completed() {\n\tdocument.removeEventListener( \"DOMContentLoaded\", completed );\n\twindow.removeEventListener( \"load\", completed );\n\tjQuery.ready();\n}\n\n// Catch cases where $(document).ready() is called\n// after the browser event has already occurred.\n// Support: IE <=9 - 10 only\n// Older IE sometimes signals \"interactive\" too soon\nif ( document.readyState === \"complete\" ||\n\t( document.readyState !== \"loading\" && !document.documentElement.doScroll ) ) {\n\n\t// Handle it asynchronously to allow scripts the opportunity to delay ready\n\twindow.setTimeout( jQuery.ready );\n\n} else {\n\n\t// Use the handy event callback\n\tdocument.addEventListener( \"DOMContentLoaded\", completed );\n\n\t// A fallback to window.onload, that will always work\n\twindow.addEventListener( \"load\", completed );\n}\n\n\n\n\n// Multifunctional method to get and set values of a collection\n// The value/s can optionally be executed if it's a function\nvar access = function( elems, fn, key, value, chainable, emptyGet, raw ) {\n\tvar i = 0,\n\t\tlen = elems.length,\n\t\tbulk = key == null;\n\n\t// Sets many values\n\tif ( toType( key ) === \"object\" ) {\n\t\tchainable = true;\n\t\tfor ( i in key ) {\n\t\t\taccess( elems, fn, i, key[ i ], true, emptyGet, raw );\n\t\t}\n\n\t// Sets one value\n\t} else if ( value !== undefined ) {\n\t\tchainable = true;\n\n\t\tif ( !isFunction( value ) ) {\n\t\t\traw = true;\n\t\t}\n\n\t\tif ( bulk ) {\n\n\t\t\t// Bulk operations run against the entire set\n\t\t\tif ( raw ) {\n\t\t\t\tfn.call( elems, value );\n\t\t\t\tfn = null;\n\n\t\t\t// ...except when executing function values\n\t\t\t} else {\n\t\t\t\tbulk = fn;\n\t\t\t\tfn = function( elem, _key, value ) {\n\t\t\t\t\treturn bulk.call( jQuery( elem ), value );\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\t\tif ( fn ) {\n\t\t\tfor ( ; i < len; i++ ) {\n\t\t\t\tfn(\n\t\t\t\t\telems[ i ], key, raw ?\n\t\t\t\t\t\tvalue :\n\t\t\t\t\t\tvalue.call( elems[ i ], i, fn( elems[ i ], key ) )\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\n\tif ( chainable ) {\n\t\treturn elems;\n\t}\n\n\t// Gets\n\tif ( bulk ) {\n\t\treturn fn.call( elems );\n\t}\n\n\treturn len ? fn( elems[ 0 ], key ) : emptyGet;\n};\n\n\n// Matches dashed string for camelizing\nvar rmsPrefix = /^-ms-/,\n\trdashAlpha = /-([a-z])/g;\n\n// Used by camelCase as callback to replace()\nfunction fcamelCase( _all, letter ) {\n\treturn letter.toUpperCase();\n}\n\n// Convert dashed to camelCase; used by the css and data modules\n// Support: IE <=9 - 11, Edge 12 - 15\n// Microsoft forgot to hump their vendor prefix (trac-9572)\nfunction camelCase( string ) {\n\treturn string.replace( rmsPrefix, \"ms-\" ).replace( rdashAlpha, fcamelCase );\n}\nvar acceptData = function( owner ) {\n\n\t// Accepts only:\n\t//  - Node\n\t//    - Node.ELEMENT_NODE\n\t//    - Node.DOCUMENT_NODE\n\t//  - Object\n\t//    - Any\n\treturn owner.nodeType === 1 || owner.nodeType === 9 || !( +owner.nodeType );\n};\n\n\n\n\nfunction Data() {\n\tthis.expando = jQuery.expando + Data.uid++;\n}\n\nData.uid = 1;\n\nData.prototype = {\n\n\tcache: function( owner ) {\n\n\t\t// Check if the owner object already has a cache\n\t\tvar value = owner[ this.expando ];\n\n\t\t// If not, create one\n\t\tif ( !value ) {\n\t\t\tvalue = {};\n\n\t\t\t// We can accept data for non-element nodes in modern browsers,\n\t\t\t// but we should not, see trac-8335.\n\t\t\t// Always return an empty object.\n\t\t\tif ( acceptData( owner ) ) {\n\n\t\t\t\t// If it is a node unlikely to be stringify-ed or looped over\n\t\t\t\t// use plain assignment\n\t\t\t\tif ( owner.nodeType ) {\n\t\t\t\t\towner[ this.expando ] = value;\n\n\t\t\t\t// Otherwise secure it in a non-enumerable property\n\t\t\t\t// configurable must be true to allow the property to be\n\t\t\t\t// deleted when data is removed\n\t\t\t\t} else {\n\t\t\t\t\tObject.defineProperty( owner, this.expando, {\n\t\t\t\t\t\tvalue: value,\n\t\t\t\t\t\tconfigurable: true\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn value;\n\t},\n\tset: function( owner, data, value ) {\n\t\tvar prop,\n\t\t\tcache = this.cache( owner );\n\n\t\t// Handle: [ owner, key, value ] args\n\t\t// Always use camelCase key (gh-2257)\n\t\tif ( typeof data === \"string\" ) {\n\t\t\tcache[ camelCase( data ) ] = value;\n\n\t\t// Handle: [ owner, { properties } ] args\n\t\t} else {\n\n\t\t\t// Copy the properties one-by-one to the cache object\n\t\t\tfor ( prop in data ) {\n\t\t\t\tcache[ camelCase( prop ) ] = data[ prop ];\n\t\t\t}\n\t\t}\n\t\treturn cache;\n\t},\n\tget: function( owner, key ) {\n\t\treturn key === undefined ?\n\t\t\tthis.cache( owner ) :\n\n\t\t\t// Always use camelCase key (gh-2257)\n\t\t\towner[ this.expando ] && owner[ this.expando ][ camelCase( key ) ];\n\t},\n\taccess: function( owner, key, value ) {\n\n\t\t// In cases where either:\n\t\t//\n\t\t//   1. No key was specified\n\t\t//   2. A string key was specified, but no value provided\n\t\t//\n\t\t// Take the \"read\" path and allow the get method to determine\n\t\t// which value to return, respectively either:\n\t\t//\n\t\t//   1. The entire cache object\n\t\t//   2. The data stored at the key\n\t\t//\n\t\tif ( key === undefined ||\n\t\t\t\t( ( key && typeof key === \"string\" ) && value === undefined ) ) {\n\n\t\t\treturn this.get( owner, key );\n\t\t}\n\n\t\t// When the key is not a string, or both a key and value\n\t\t// are specified, set or extend (existing objects) with either:\n\t\t//\n\t\t//   1. An object of properties\n\t\t//   2. A key and value\n\t\t//\n\t\tthis.set( owner, key, value );\n\n\t\t// Since the \"set\" path can have two possible entry points\n\t\t// return the expected data based on which path was taken[*]\n\t\treturn value !== undefined ? value : key;\n\t},\n\tremove: function( owner, key ) {\n\t\tvar i,\n\t\t\tcache = owner[ this.expando ];\n\n\t\tif ( cache === undefined ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( key !== undefined ) {\n\n\t\t\t// Support array or space separated string of keys\n\t\t\tif ( Array.isArray( key ) ) {\n\n\t\t\t\t// If key is an array of keys...\n\t\t\t\t// We always set camelCase keys, so remove that.\n\t\t\t\tkey = key.map( camelCase );\n\t\t\t} else {\n\t\t\t\tkey = camelCase( key );\n\n\t\t\t\t// If a key with the spaces exists, use it.\n\t\t\t\t// Otherwise, create an array by matching non-whitespace\n\t\t\t\tkey = key in cache ?\n\t\t\t\t\t[ key ] :\n\t\t\t\t\t( key.match( rnothtmlwhite ) || [] );\n\t\t\t}\n\n\t\t\ti = key.length;\n\n\t\t\twhile ( i-- ) {\n\t\t\t\tdelete cache[ key[ i ] ];\n\t\t\t}\n\t\t}\n\n\t\t// Remove the expando if there's no more data\n\t\tif ( key === undefined || jQuery.isEmptyObject( cache ) ) {\n\n\t\t\t// Support: Chrome <=35 - 45\n\t\t\t// Webkit & Blink performance suffers when deleting properties\n\t\t\t// from DOM nodes, so set to undefined instead\n\t\t\t// https://bugs.chromium.org/p/chromium/issues/detail?id=378607 (bug restricted)\n\t\t\tif ( owner.nodeType ) {\n\t\t\t\towner[ this.expando ] = undefined;\n\t\t\t} else {\n\t\t\t\tdelete owner[ this.expando ];\n\t\t\t}\n\t\t}\n\t},\n\thasData: function( owner ) {\n\t\tvar cache = owner[ this.expando ];\n\t\treturn cache !== undefined && !jQuery.isEmptyObject( cache );\n\t}\n};\nvar dataPriv = new Data();\n\nvar dataUser = new Data();\n\n\n\n//\tImplementation Summary\n//\n//\t1. Enforce API surface and semantic compatibility with 1.9.x branch\n//\t2. Improve the module's maintainability by reducing the storage\n//\t\tpaths to a single mechanism.\n//\t3. Use the same single mechanism to support \"private\" and \"user\" data.\n//\t4. _Never_ expose \"private\" data to user code (TODO: Drop _data, _removeData)\n//\t5. Avoid exposing implementation details on user objects (eg. expando properties)\n//\t6. Provide a clear path for implementation upgrade to WeakMap in 2014\n\nvar rbrace = /^(?:\\{[\\w\\W]*\\}|\\[[\\w\\W]*\\])$/,\n\trmultiDash = /[A-Z]/g;\n\nfunction getData( data ) {\n\tif ( data === \"true\" ) {\n\t\treturn true;\n\t}\n\n\tif ( data === \"false\" ) {\n\t\treturn false;\n\t}\n\n\tif ( data === \"null\" ) {\n\t\treturn null;\n\t}\n\n\t// Only convert to a number if it doesn't change the string\n\tif ( data === +data + \"\" ) {\n\t\treturn +data;\n\t}\n\n\tif ( rbrace.test( data ) ) {\n\t\treturn JSON.parse( data );\n\t}\n\n\treturn data;\n}\n\nfunction dataAttr( elem, key, data ) {\n\tvar name;\n\n\t// If nothing was found internally, try to fetch any\n\t// data from the HTML5 data-* attribute\n\tif ( data === undefined && elem.nodeType === 1 ) {\n\t\tname = \"data-\" + key.replace( rmultiDash, \"-$&\" ).toLowerCase();\n\t\tdata = elem.getAttribute( name );\n\n\t\tif ( typeof data === \"string\" ) {\n\t\t\ttry {\n\t\t\t\tdata = getData( data );\n\t\t\t} catch ( e ) {}\n\n\t\t\t// Make sure we set the data so it isn't changed later\n\t\t\tdataUser.set( elem, key, data );\n\t\t} else {\n\t\t\tdata = undefined;\n\t\t}\n\t}\n\treturn data;\n}\n\njQuery.extend( {\n\thasData: function( elem ) {\n\t\treturn dataUser.hasData( elem ) || dataPriv.hasData( elem );\n\t},\n\n\tdata: function( elem, name, data ) {\n\t\treturn dataUser.access( elem, name, data );\n\t},\n\n\tremoveData: function( elem, name ) {\n\t\tdataUser.remove( elem, name );\n\t},\n\n\t// TODO: Now that all calls to _data and _removeData have been replaced\n\t// with direct calls to dataPriv methods, these can be deprecated.\n\t_data: function( elem, name, data ) {\n\t\treturn dataPriv.access( elem, name, data );\n\t},\n\n\t_removeData: function( elem, name ) {\n\t\tdataPriv.remove( elem, name );\n\t}\n} );\n\njQuery.fn.extend( {\n\tdata: function( key, value ) {\n\t\tvar i, name, data,\n\t\t\telem = this[ 0 ],\n\t\t\tattrs = elem && elem.attributes;\n\n\t\t// Gets all values\n\t\tif ( key === undefined ) {\n\t\t\tif ( this.length ) {\n\t\t\t\tdata = dataUser.get( elem );\n\n\t\t\t\tif ( elem.nodeType === 1 && !dataPriv.get( elem, \"hasDataAttrs\" ) ) {\n\t\t\t\t\ti = attrs.length;\n\t\t\t\t\twhile ( i-- ) {\n\n\t\t\t\t\t\t// Support: IE 11 only\n\t\t\t\t\t\t// The attrs elements can be null (trac-14894)\n\t\t\t\t\t\tif ( attrs[ i ] ) {\n\t\t\t\t\t\t\tname = attrs[ i ].name;\n\t\t\t\t\t\t\tif ( name.indexOf( \"data-\" ) === 0 ) {\n\t\t\t\t\t\t\t\tname = camelCase( name.slice( 5 ) );\n\t\t\t\t\t\t\t\tdataAttr( elem, name, data[ name ] );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tdataPriv.set( elem, \"hasDataAttrs\", true );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn data;\n\t\t}\n\n\t\t// Sets multiple values\n\t\tif ( typeof key === \"object\" ) {\n\t\t\treturn this.each( function() {\n\t\t\t\tdataUser.set( this, key );\n\t\t\t} );\n\t\t}\n\n\t\treturn access( this, function( value ) {\n\t\t\tvar data;\n\n\t\t\t// The calling jQuery object (element matches) is not empty\n\t\t\t// (and therefore has an element appears at this[ 0 ]) and the\n\t\t\t// `value` parameter was not undefined. An empty jQuery object\n\t\t\t// will result in `undefined` for elem = this[ 0 ] which will\n\t\t\t// throw an exception if an attempt to read a data cache is made.\n\t\t\tif ( elem && value === undefined ) {\n\n\t\t\t\t// Attempt to get data from the cache\n\t\t\t\t// The key will always be camelCased in Data\n\t\t\t\tdata = dataUser.get( elem, key );\n\t\t\t\tif ( data !== undefined ) {\n\t\t\t\t\treturn data;\n\t\t\t\t}\n\n\t\t\t\t// Attempt to \"discover\" the data in\n\t\t\t\t// HTML5 custom data-* attrs\n\t\t\t\tdata = dataAttr( elem, key );\n\t\t\t\tif ( data !== undefined ) {\n\t\t\t\t\treturn data;\n\t\t\t\t}\n\n\t\t\t\t// We tried really hard, but the data doesn't exist.\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Set the data...\n\t\t\tthis.each( function() {\n\n\t\t\t\t// We always store the camelCased key\n\t\t\t\tdataUser.set( this, key, value );\n\t\t\t} );\n\t\t}, null, value, arguments.length > 1, null, true );\n\t},\n\n\tremoveData: function( key ) {\n\t\treturn this.each( function() {\n\t\t\tdataUser.remove( this, key );\n\t\t} );\n\t}\n} );\n\n\njQuery.extend( {\n\tqueue: function( elem, type, data ) {\n\t\tvar queue;\n\n\t\tif ( elem ) {\n\t\t\ttype = ( type || \"fx\" ) + \"queue\";\n\t\t\tqueue = dataPriv.get( elem, type );\n\n\t\t\t// Speed up dequeue by getting out quickly if this is just a lookup\n\t\t\tif ( data ) {\n\t\t\t\tif ( !queue || Array.isArray( data ) ) {\n\t\t\t\t\tqueue = dataPriv.access( elem, type, jQuery.makeArray( data ) );\n\t\t\t\t} else {\n\t\t\t\t\tqueue.push( data );\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn queue || [];\n\t\t}\n\t},\n\n\tdequeue: function( elem, type ) {\n\t\ttype = type || \"fx\";\n\n\t\tvar queue = jQuery.queue( elem, type ),\n\t\t\tstartLength = queue.length,\n\t\t\tfn = queue.shift(),\n\t\t\thooks = jQuery._queueHooks( elem, type ),\n\t\t\tnext = function() {\n\t\t\t\tjQuery.dequeue( elem, type );\n\t\t\t};\n\n\t\t// If the fx queue is dequeued, always remove the progress sentinel\n\t\tif ( fn === \"inprogress\" ) {\n\t\t\tfn = queue.shift();\n\t\t\tstartLength--;\n\t\t}\n\n\t\tif ( fn ) {\n\n\t\t\t// Add a progress sentinel to prevent the fx queue from being\n\t\t\t// automatically dequeued\n\t\t\tif ( type === \"fx\" ) {\n\t\t\t\tqueue.unshift( \"inprogress\" );\n\t\t\t}\n\n\t\t\t// Clear up the last queue stop function\n\t\t\tdelete hooks.stop;\n\t\t\tfn.call( elem, next, hooks );\n\t\t}\n\n\t\tif ( !startLength && hooks ) {\n\t\t\thooks.empty.fire();\n\t\t}\n\t},\n\n\t// Not public - generate a queueHooks object, or return the current one\n\t_queueHooks: function( elem, type ) {\n\t\tvar key = type + \"queueHooks\";\n\t\treturn dataPriv.get( elem, key ) || dataPriv.access( elem, key, {\n\t\t\tempty: jQuery.Callbacks( \"once memory\" ).add( function() {\n\t\t\t\tdataPriv.remove( elem, [ type + \"queue\", key ] );\n\t\t\t} )\n\t\t} );\n\t}\n} );\n\njQuery.fn.extend( {\n\tqueue: function( type, data ) {\n\t\tvar setter = 2;\n\n\t\tif ( typeof type !== \"string\" ) {\n\t\t\tdata = type;\n\t\t\ttype = \"fx\";\n\t\t\tsetter--;\n\t\t}\n\n\t\tif ( arguments.length < setter ) {\n\t\t\treturn jQuery.queue( this[ 0 ], type );\n\t\t}\n\n\t\treturn data === undefined ?\n\t\t\tthis :\n\t\t\tthis.each( function() {\n\t\t\t\tvar queue = jQuery.queue( this, type, data );\n\n\t\t\t\t// Ensure a hooks for this queue\n\t\t\t\tjQuery._queueHooks( this, type );\n\n\t\t\t\tif ( type === \"fx\" && queue[ 0 ] !== \"inprogress\" ) {\n\t\t\t\t\tjQuery.dequeue( this, type );\n\t\t\t\t}\n\t\t\t} );\n\t},\n\tdequeue: function( type ) {\n\t\treturn this.each( function() {\n\t\t\tjQuery.dequeue( this, type );\n\t\t} );\n\t},\n\tclearQueue: function( type ) {\n\t\treturn this.queue( type || \"fx\", [] );\n\t},\n\n\t// Get a promise resolved when queues of a certain type\n\t// are emptied (fx is the type by default)\n\tpromise: function( type, obj ) {\n\t\tvar tmp,\n\t\t\tcount = 1,\n\t\t\tdefer = jQuery.Deferred(),\n\t\t\telements = this,\n\t\t\ti = this.length,\n\t\t\tresolve = function() {\n\t\t\t\tif ( !( --count ) ) {\n\t\t\t\t\tdefer.resolveWith( elements, [ elements ] );\n\t\t\t\t}\n\t\t\t};\n\n\t\tif ( typeof type !== \"string\" ) {\n\t\t\tobj = type;\n\t\t\ttype = undefined;\n\t\t}\n\t\ttype = type || \"fx\";\n\n\t\twhile ( i-- ) {\n\t\t\ttmp = dataPriv.get( elements[ i ], type + \"queueHooks\" );\n\t\t\tif ( tmp && tmp.empty ) {\n\t\t\t\tcount++;\n\t\t\t\ttmp.empty.add( resolve );\n\t\t\t}\n\t\t}\n\t\tresolve();\n\t\treturn defer.promise( obj );\n\t}\n} );\nvar pnum = ( /[+-]?(?:\\d*\\.|)\\d+(?:[eE][+-]?\\d+|)/ ).source;\n\nvar rcssNum = new RegExp( \"^(?:([+-])=|)(\" + pnum + \")([a-z%]*)$\", \"i\" );\n\n\nvar cssExpand = [ \"Top\", \"Right\", \"Bottom\", \"Left\" ];\n\nvar documentElement = document.documentElement;\n\n\n\n\tvar isAttached = function( elem ) {\n\t\t\treturn jQuery.contains( elem.ownerDocument, elem );\n\t\t},\n\t\tcomposed = { composed: true };\n\n\t// Support: IE 9 - 11+, Edge 12 - 18+, iOS 10.0 - 10.2 only\n\t// Check attachment across shadow DOM boundaries when possible (gh-3504)\n\t// Support: iOS 10.0-10.2 only\n\t// Early iOS 10 versions support `attachShadow` but not `getRootNode`,\n\t// leading to errors. We need to check for `getRootNode`.\n\tif ( documentElement.getRootNode ) {\n\t\tisAttached = function( elem ) {\n\t\t\treturn jQuery.contains( elem.ownerDocument, elem ) ||\n\t\t\t\telem.getRootNode( composed ) === elem.ownerDocument;\n\t\t};\n\t}\nvar isHiddenWithinTree = function( elem, el ) {\n\n\t\t// isHiddenWithinTree might be called from jQuery#filter function;\n\t\t// in that case, element will be second argument\n\t\telem = el || elem;\n\n\t\t// Inline style trumps all\n\t\treturn elem.style.display === \"none\" ||\n\t\t\telem.style.display === \"\" &&\n\n\t\t\t// Otherwise, check computed style\n\t\t\t// Support: Firefox <=43 - 45\n\t\t\t// Disconnected elements can have computed display: none, so first confirm that elem is\n\t\t\t// in the document.\n\t\t\tisAttached( elem ) &&\n\n\t\t\tjQuery.css( elem, \"display\" ) === \"none\";\n\t};\n\n\n\nfunction adjustCSS( elem, prop, valueParts, tween ) {\n\tvar adjusted, scale,\n\t\tmaxIterations = 20,\n\t\tcurrentValue = tween ?\n\t\t\tfunction() {\n\t\t\t\treturn tween.cur();\n\t\t\t} :\n\t\t\tfunction() {\n\t\t\t\treturn jQuery.css( elem, prop, \"\" );\n\t\t\t},\n\t\tinitial = currentValue(),\n\t\tunit = valueParts && valueParts[ 3 ] || ( jQuery.cssNumber[ prop ] ? \"\" : \"px\" ),\n\n\t\t// Starting value computation is required for potential unit mismatches\n\t\tinitialInUnit = elem.nodeType &&\n\t\t\t( jQuery.cssNumber[ prop ] || unit !== \"px\" && +initial ) &&\n\t\t\trcssNum.exec( jQuery.css( elem, prop ) );\n\n\tif ( initialInUnit && initialInUnit[ 3 ] !== unit ) {\n\n\t\t// Support: Firefox <=54\n\t\t// Halve the iteration target value to prevent interference from CSS upper bounds (gh-2144)\n\t\tinitial = initial / 2;\n\n\t\t// Trust units reported by jQuery.css\n\t\tunit = unit || initialInUnit[ 3 ];\n\n\t\t// Iteratively approximate from a nonzero starting point\n\t\tinitialInUnit = +initial || 1;\n\n\t\twhile ( maxIterations-- ) {\n\n\t\t\t// Evaluate and update our best guess (doubling guesses that zero out).\n\t\t\t// Finish if the scale equals or crosses 1 (making the old*new product non-positive).\n\t\t\tjQuery.style( elem, prop, initialInUnit + unit );\n\t\t\tif ( ( 1 - scale ) * ( 1 - ( scale = currentValue() / initial || 0.5 ) ) <= 0 ) {\n\t\t\t\tmaxIterations = 0;\n\t\t\t}\n\t\t\tinitialInUnit = initialInUnit / scale;\n\n\t\t}\n\n\t\tinitialInUnit = initialInUnit * 2;\n\t\tjQuery.style( elem, prop, initialInUnit + unit );\n\n\t\t// Make sure we update the tween properties later on\n\t\tvalueParts = valueParts || [];\n\t}\n\n\tif ( valueParts ) {\n\t\tinitialInUnit = +initialInUnit || +initial || 0;\n\n\t\t// Apply relative offset (+=/-=) if specified\n\t\tadjusted = valueParts[ 1 ] ?\n\t\t\tinitialInUnit + ( valueParts[ 1 ] + 1 ) * valueParts[ 2 ] :\n\t\t\t+valueParts[ 2 ];\n\t\tif ( tween ) {\n\t\t\ttween.unit = unit;\n\t\t\ttween.start = initialInUnit;\n\t\t\ttween.end = adjusted;\n\t\t}\n\t}\n\treturn adjusted;\n}\n\n\nvar defaultDisplayMap = {};\n\nfunction getDefaultDisplay( elem ) {\n\tvar temp,\n\t\tdoc = elem.ownerDocument,\n\t\tnodeName = elem.nodeName,\n\t\tdisplay = defaultDisplayMap[ nodeName ];\n\n\tif ( display ) {\n\t\treturn display;\n\t}\n\n\ttemp = doc.body.appendChild( doc.createElement( nodeName ) );\n\tdisplay = jQuery.css( temp, \"display\" );\n\n\ttemp.parentNode.removeChild( temp );\n\n\tif ( display === \"none\" ) {\n\t\tdisplay = \"block\";\n\t}\n\tdefaultDisplayMap[ nodeName ] = display;\n\n\treturn display;\n}\n\nfunction showHide( elements, show ) {\n\tvar display, elem,\n\t\tvalues = [],\n\t\tindex = 0,\n\t\tlength = elements.length;\n\n\t// Determine new display value for elements that need to change\n\tfor ( ; index < length; index++ ) {\n\t\telem = elements[ index ];\n\t\tif ( !elem.style ) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tdisplay = elem.style.display;\n\t\tif ( show ) {\n\n\t\t\t// Since we force visibility upon cascade-hidden elements, an immediate (and slow)\n\t\t\t// check is required in this first loop unless we have a nonempty display value (either\n\t\t\t// inline or about-to-be-restored)\n\t\t\tif ( display === \"none\" ) {\n\t\t\t\tvalues[ index ] = dataPriv.get( elem, \"display\" ) || null;\n\t\t\t\tif ( !values[ index ] ) {\n\t\t\t\t\telem.style.display = \"\";\n\t\t\t\t}\n\t\t\t}\n\t\t\tif ( elem.style.display === \"\" && isHiddenWithinTree( elem ) ) {\n\t\t\t\tvalues[ index ] = getDefaultDisplay( elem );\n\t\t\t}\n\t\t} else {\n\t\t\tif ( display !== \"none\" ) {\n\t\t\t\tvalues[ index ] = \"none\";\n\n\t\t\t\t// Remember what we're overwriting\n\t\t\t\tdataPriv.set( elem, \"display\", display );\n\t\t\t}\n\t\t}\n\t}\n\n\t// Set the display of the elements in a second loop to avoid constant reflow\n\tfor ( index = 0; index < length; index++ ) {\n\t\tif ( values[ index ] != null ) {\n\t\t\telements[ index ].style.display = values[ index ];\n\t\t}\n\t}\n\n\treturn elements;\n}\n\njQuery.fn.extend( {\n\tshow: function() {\n\t\treturn showHide( this, true );\n\t},\n\thide: function() {\n\t\treturn showHide( this );\n\t},\n\ttoggle: function( state ) {\n\t\tif ( typeof state === \"boolean\" ) {\n\t\t\treturn state ? this.show() : this.hide();\n\t\t}\n\n\t\treturn this.each( function() {\n\t\t\tif ( isHiddenWithinTree( this ) ) {\n\t\t\t\tjQuery( this ).show();\n\t\t\t} else {\n\t\t\t\tjQuery( this ).hide();\n\t\t\t}\n\t\t} );\n\t}\n} );\nvar rcheckableType = ( /^(?:checkbox|radio)$/i );\n\nvar rtagName = ( /<([a-z][^\\/\\0>\\x20\\t\\r\\n\\f]*)/i );\n\nvar rscriptType = ( /^$|^module$|\\/(?:java|ecma)script/i );\n\n\n\n( function() {\n\tvar fragment = document.createDocumentFragment(),\n\t\tdiv = fragment.appendChild( document.createElement( \"div\" ) ),\n\t\tinput = document.createElement( \"input\" );\n\n\t// Support: Android 4.0 - 4.3 only\n\t// Check state lost if the name is set (trac-11217)\n\t// Support: Windows Web Apps (WWA)\n\t// `name` and `type` must use .setAttribute for WWA (trac-14901)\n\tinput.setAttribute( \"type\", \"radio\" );\n\tinput.setAttribute( \"checked\", \"checked\" );\n\tinput.setAttribute( \"name\", \"t\" );\n\n\tdiv.appendChild( input );\n\n\t// Support: Android <=4.1 only\n\t// Older WebKit doesn't clone checked state correctly in fragments\n\tsupport.checkClone = div.cloneNode( true ).cloneNode( true ).lastChild.checked;\n\n\t// Support: IE <=11 only\n\t// Make sure textarea (and checkbox) defaultValue is properly cloned\n\tdiv.innerHTML = \"<textarea>x</textarea>\";\n\tsupport.noCloneChecked = !!div.cloneNode( true ).lastChild.defaultValue;\n\n\t// Support: IE <=9 only\n\t// IE <=9 replaces <option> tags with their contents when inserted outside of\n\t// the select element.\n\tdiv.innerHTML = \"<option></option>\";\n\tsupport.option = !!div.lastChild;\n} )();\n\n\n// We have to close these tags to support XHTML (trac-13200)\nvar wrapMap = {\n\n\t// XHTML parsers do not magically insert elements in the\n\t// same way that tag soup parsers do. So we cannot shorten\n\t// this by omitting <tbody> or other required elements.\n\tthead: [ 1, \"<table>\", \"</table>\" ],\n\tcol: [ 2, \"<table><colgroup>\", \"</colgroup></table>\" ],\n\ttr: [ 2, \"<table><tbody>\", \"</tbody></table>\" ],\n\ttd: [ 3, \"<table><tbody><tr>\", \"</tr></tbody></table>\" ],\n\n\t_default: [ 0, \"\", \"\" ]\n};\n\nwrapMap.tbody = wrapMap.tfoot = wrapMap.colgroup = wrapMap.caption = wrapMap.thead;\nwrapMap.th = wrapMap.td;\n\n// Support: IE <=9 only\nif ( !support.option ) {\n\twrapMap.optgroup = wrapMap.option = [ 1, \"<select multiple='multiple'>\", \"</select>\" ];\n}\n\n\nfunction getAll( context, tag ) {\n\n\t// Support: IE <=9 - 11 only\n\t// Use typeof to avoid zero-argument method invocation on host objects (trac-15151)\n\tvar ret;\n\n\tif ( typeof context.getElementsByTagName !== \"undefined\" ) {\n\t\tret = context.getElementsByTagName( tag || \"*\" );\n\n\t} else if ( typeof context.querySelectorAll !== \"undefined\" ) {\n\t\tret = context.querySelectorAll( tag || \"*\" );\n\n\t} else {\n\t\tret = [];\n\t}\n\n\tif ( tag === undefined || tag && nodeName( context, tag ) ) {\n\t\treturn jQuery.merge( [ context ], ret );\n\t}\n\n\treturn ret;\n}\n\n\n// Mark scripts as having already been evaluated\nfunction setGlobalEval( elems, refElements ) {\n\tvar i = 0,\n\t\tl = elems.length;\n\n\tfor ( ; i < l; i++ ) {\n\t\tdataPriv.set(\n\t\t\telems[ i ],\n\t\t\t\"globalEval\",\n\t\t\t!refElements || dataPriv.get( refElements[ i ], \"globalEval\" )\n\t\t);\n\t}\n}\n\n\nvar rhtml = /<|&#?\\w+;/;\n\nfunction buildFragment( elems, context, scripts, selection, ignored ) {\n\tvar elem, tmp, tag, wrap, attached, j,\n\t\tfragment = context.createDocumentFragment(),\n\t\tnodes = [],\n\t\ti = 0,\n\t\tl = elems.length;\n\n\tfor ( ; i < l; i++ ) {\n\t\telem = elems[ i ];\n\n\t\tif ( elem || elem === 0 ) {\n\n\t\t\t// Add nodes directly\n\t\t\tif ( toType( elem ) === \"object\" ) {\n\n\t\t\t\t// Support: Android <=4.0 only, PhantomJS 1 only\n\t\t\t\t// push.apply(_, arraylike) throws on ancient WebKit\n\t\t\t\tjQuery.merge( nodes, elem.nodeType ? [ elem ] : elem );\n\n\t\t\t// Convert non-html into a text node\n\t\t\t} else if ( !rhtml.test( elem ) ) {\n\t\t\t\tnodes.push( context.createTextNode( elem ) );\n\n\t\t\t// Convert html into DOM nodes\n\t\t\t} else {\n\t\t\t\ttmp = tmp || fragment.appendChild( context.createElement( \"div\" ) );\n\n\t\t\t\t// Deserialize a standard representation\n\t\t\t\ttag = ( rtagName.exec( elem ) || [ \"\", \"\" ] )[ 1 ].toLowerCase();\n\t\t\t\twrap = wrapMap[ tag ] || wrapMap._default;\n\t\t\t\ttmp.innerHTML = wrap[ 1 ] + jQuery.htmlPrefilter( elem ) + wrap[ 2 ];\n\n\t\t\t\t// Descend through wrappers to the right content\n\t\t\t\tj = wrap[ 0 ];\n\t\t\t\twhile ( j-- ) {\n\t\t\t\t\ttmp = tmp.lastChild;\n\t\t\t\t}\n\n\t\t\t\t// Support: Android <=4.0 only, PhantomJS 1 only\n\t\t\t\t// push.apply(_, arraylike) throws on ancient WebKit\n\t\t\t\tjQuery.merge( nodes, tmp.childNodes );\n\n\t\t\t\t// Remember the top-level container\n\t\t\t\ttmp = fragment.firstChild;\n\n\t\t\t\t// Ensure the created nodes are orphaned (trac-12392)\n\t\t\t\ttmp.textContent = \"\";\n\t\t\t}\n\t\t}\n\t}\n\n\t// Remove wrapper from fragment\n\tfragment.textContent = \"\";\n\n\ti = 0;\n\twhile ( ( elem = nodes[ i++ ] ) ) {\n\n\t\t// Skip elements already in the context collection (trac-4087)\n\t\tif ( selection && jQuery.inArray( elem, selection ) > -1 ) {\n\t\t\tif ( ignored ) {\n\t\t\t\tignored.push( elem );\n\t\t\t}\n\t\t\tcontinue;\n\t\t}\n\n\t\tattached = isAttached( elem );\n\n\t\t// Append to fragment\n\t\ttmp = getAll( fragment.appendChild( elem ), \"script\" );\n\n\t\t// Preserve script evaluation history\n\t\tif ( attached ) {\n\t\t\tsetGlobalEval( tmp );\n\t\t}\n\n\t\t// Capture executables\n\t\tif ( scripts ) {\n\t\t\tj = 0;\n\t\t\twhile ( ( elem = tmp[ j++ ] ) ) {\n\t\t\t\tif ( rscriptType.test( elem.type || \"\" ) ) {\n\t\t\t\t\tscripts.push( elem );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn fragment;\n}\n\n\nvar rtypenamespace = /^([^.]*)(?:\\.(.+)|)/;\n\nfunction returnTrue() {\n\treturn true;\n}\n\nfunction returnFalse() {\n\treturn false;\n}\n\nfunction on( elem, types, selector, data, fn, one ) {\n\tvar origFn, type;\n\n\t// Types can be a map of types/handlers\n\tif ( typeof types === \"object\" ) {\n\n\t\t// ( types-Object, selector, data )\n\t\tif ( typeof selector !== \"string\" ) {\n\n\t\t\t// ( types-Object, data )\n\t\t\tdata = data || selector;\n\t\t\tselector = undefined;\n\t\t}\n\t\tfor ( type in types ) {\n\t\t\ton( elem, type, selector, data, types[ type ], one );\n\t\t}\n\t\treturn elem;\n\t}\n\n\tif ( data == null && fn == null ) {\n\n\t\t// ( types, fn )\n\t\tfn = selector;\n\t\tdata = selector = undefined;\n\t} else if ( fn == null ) {\n\t\tif ( typeof selector === \"string\" ) {\n\n\t\t\t// ( types, selector, fn )\n\t\t\tfn = data;\n\t\t\tdata = undefined;\n\t\t} else {\n\n\t\t\t// ( types, data, fn )\n\t\t\tfn = data;\n\t\t\tdata = selector;\n\t\t\tselector = undefined;\n\t\t}\n\t}\n\tif ( fn === false ) {\n\t\tfn = returnFalse;\n\t} else if ( !fn ) {\n\t\treturn elem;\n\t}\n\n\tif ( one === 1 ) {\n\t\torigFn = fn;\n\t\tfn = function( event ) {\n\n\t\t\t// Can use an empty set, since event contains the info\n\t\t\tjQuery().off( event );\n\t\t\treturn origFn.apply( this, arguments );\n\t\t};\n\n\t\t// Use same guid so caller can remove using origFn\n\t\tfn.guid = origFn.guid || ( origFn.guid = jQuery.guid++ );\n\t}\n\treturn elem.each( function() {\n\t\tjQuery.event.add( this, types, fn, data, selector );\n\t} );\n}\n\n/*\n * Helper functions for managing events -- not part of the public interface.\n * Props to Dean Edwards' addEvent library for many of the ideas.\n */\njQuery.event = {\n\n\tglobal: {},\n\n\tadd: function( elem, types, handler, data, selector ) {\n\n\t\tvar handleObjIn, eventHandle, tmp,\n\t\t\tevents, t, handleObj,\n\t\t\tspecial, handlers, type, namespaces, origType,\n\t\t\telemData = dataPriv.get( elem );\n\n\t\t// Only attach events to objects that accept data\n\t\tif ( !acceptData( elem ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Caller can pass in an object of custom data in lieu of the handler\n\t\tif ( handler.handler ) {\n\t\t\thandleObjIn = handler;\n\t\t\thandler = handleObjIn.handler;\n\t\t\tselector = handleObjIn.selector;\n\t\t}\n\n\t\t// Ensure that invalid selectors throw exceptions at attach time\n\t\t// Evaluate against documentElement in case elem is a non-element node (e.g., document)\n\t\tif ( selector ) {\n\t\t\tjQuery.find.matchesSelector( documentElement, selector );\n\t\t}\n\n\t\t// Make sure that the handler has a unique ID, used to find/remove it later\n\t\tif ( !handler.guid ) {\n\t\t\thandler.guid = jQuery.guid++;\n\t\t}\n\n\t\t// Init the element's event structure and main handler, if this is the first\n\t\tif ( !( events = elemData.events ) ) {\n\t\t\tevents = elemData.events = Object.create( null );\n\t\t}\n\t\tif ( !( eventHandle = elemData.handle ) ) {\n\t\t\teventHandle = elemData.handle = function( e ) {\n\n\t\t\t\t// Discard the second event of a jQuery.event.trigger() and\n\t\t\t\t// when an event is called after a page has unloaded\n\t\t\t\treturn typeof jQuery !== \"undefined\" && jQuery.event.triggered !== e.type ?\n\t\t\t\t\tjQuery.event.dispatch.apply( elem, arguments ) : undefined;\n\t\t\t};\n\t\t}\n\n\t\t// Handle multiple events separated by a space\n\t\ttypes = ( types || \"\" ).match( rnothtmlwhite ) || [ \"\" ];\n\t\tt = types.length;\n\t\twhile ( t-- ) {\n\t\t\ttmp = rtypenamespace.exec( types[ t ] ) || [];\n\t\t\ttype = origType = tmp[ 1 ];\n\t\t\tnamespaces = ( tmp[ 2 ] || \"\" ).split( \".\" ).sort();\n\n\t\t\t// There *must* be a type, no attaching namespace-only handlers\n\t\t\tif ( !type ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// If event changes its type, use the special event handlers for the changed type\n\t\t\tspecial = jQuery.event.special[ type ] || {};\n\n\t\t\t// If selector defined, determine special event api type, otherwise given type\n\t\t\ttype = ( selector ? special.delegateType : special.bindType ) || type;\n\n\t\t\t// Update special based on newly reset type\n\t\t\tspecial = jQuery.event.special[ type ] || {};\n\n\t\t\t// handleObj is passed to all event handlers\n\t\t\thandleObj = jQuery.extend( {\n\t\t\t\ttype: type,\n\t\t\t\torigType: origType,\n\t\t\t\tdata: data,\n\t\t\t\thandler: handler,\n\t\t\t\tguid: handler.guid,\n\t\t\t\tselector: selector,\n\t\t\t\tneedsContext: selector && jQuery.expr.match.needsContext.test( selector ),\n\t\t\t\tnamespace: namespaces.join( \".\" )\n\t\t\t}, handleObjIn );\n\n\t\t\t// Init the event handler queue if we're the first\n\t\t\tif ( !( handlers = events[ type ] ) ) {\n\t\t\t\thandlers = events[ type ] = [];\n\t\t\t\thandlers.delegateCount = 0;\n\n\t\t\t\t// Only use addEventListener if the special events handler returns false\n\t\t\t\tif ( !special.setup ||\n\t\t\t\t\tspecial.setup.call( elem, data, namespaces, eventHandle ) === false ) {\n\n\t\t\t\t\tif ( elem.addEventListener ) {\n\t\t\t\t\t\telem.addEventListener( type, eventHandle );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( special.add ) {\n\t\t\t\tspecial.add.call( elem, handleObj );\n\n\t\t\t\tif ( !handleObj.handler.guid ) {\n\t\t\t\t\thandleObj.handler.guid = handler.guid;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Add to the element's handler list, delegates in front\n\t\t\tif ( selector ) {\n\t\t\t\thandlers.splice( handlers.delegateCount++, 0, handleObj );\n\t\t\t} else {\n\t\t\t\thandlers.push( handleObj );\n\t\t\t}\n\n\t\t\t// Keep track of which events have ever been used, for event optimization\n\t\t\tjQuery.event.global[ type ] = true;\n\t\t}\n\n\t},\n\n\t// Detach an event or set of events from an element\n\tremove: function( elem, types, handler, selector, mappedTypes ) {\n\n\t\tvar j, origCount, tmp,\n\t\t\tevents, t, handleObj,\n\t\t\tspecial, handlers, type, namespaces, origType,\n\t\t\telemData = dataPriv.hasData( elem ) && dataPriv.get( elem );\n\n\t\tif ( !elemData || !( events = elemData.events ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Once for each type.namespace in types; type may be omitted\n\t\ttypes = ( types || \"\" ).match( rnothtmlwhite ) || [ \"\" ];\n\t\tt = types.length;\n\t\twhile ( t-- ) {\n\t\t\ttmp = rtypenamespace.exec( types[ t ] ) || [];\n\t\t\ttype = origType = tmp[ 1 ];\n\t\t\tnamespaces = ( tmp[ 2 ] || \"\" ).split( \".\" ).sort();\n\n\t\t\t// Unbind all events (on this namespace, if provided) for the element\n\t\t\tif ( !type ) {\n\t\t\t\tfor ( type in events ) {\n\t\t\t\t\tjQuery.event.remove( elem, type + types[ t ], handler, selector, true );\n\t\t\t\t}\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tspecial = jQuery.event.special[ type ] || {};\n\t\t\ttype = ( selector ? special.delegateType : special.bindType ) || type;\n\t\t\thandlers = events[ type ] || [];\n\t\t\ttmp = tmp[ 2 ] &&\n\t\t\t\tnew RegExp( \"(^|\\\\.)\" + namespaces.join( \"\\\\.(?:.*\\\\.|)\" ) + \"(\\\\.|$)\" );\n\n\t\t\t// Remove matching events\n\t\t\torigCount = j = handlers.length;\n\t\t\twhile ( j-- ) {\n\t\t\t\thandleObj = handlers[ j ];\n\n\t\t\t\tif ( ( mappedTypes || origType === handleObj.origType ) &&\n\t\t\t\t\t( !handler || handler.guid === handleObj.guid ) &&\n\t\t\t\t\t( !tmp || tmp.test( handleObj.namespace ) ) &&\n\t\t\t\t\t( !selector || selector === handleObj.selector ||\n\t\t\t\t\t\tselector === \"**\" && handleObj.selector ) ) {\n\t\t\t\t\thandlers.splice( j, 1 );\n\n\t\t\t\t\tif ( handleObj.selector ) {\n\t\t\t\t\t\thandlers.delegateCount--;\n\t\t\t\t\t}\n\t\t\t\t\tif ( special.remove ) {\n\t\t\t\t\t\tspecial.remove.call( elem, handleObj );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Remove generic event handler if we removed something and no more handlers exist\n\t\t\t// (avoids potential for endless recursion during removal of special event handlers)\n\t\t\tif ( origCount && !handlers.length ) {\n\t\t\t\tif ( !special.teardown ||\n\t\t\t\t\tspecial.teardown.call( elem, namespaces, elemData.handle ) === false ) {\n\n\t\t\t\t\tjQuery.removeEvent( elem, type, elemData.handle );\n\t\t\t\t}\n\n\t\t\t\tdelete events[ type ];\n\t\t\t}\n\t\t}\n\n\t\t// Remove data and the expando if it's no longer used\n\t\tif ( jQuery.isEmptyObject( events ) ) {\n\t\t\tdataPriv.remove( elem, \"handle events\" );\n\t\t}\n\t},\n\n\tdispatch: function( nativeEvent ) {\n\n\t\tvar i, j, ret, matched, handleObj, handlerQueue,\n\t\t\targs = new Array( arguments.length ),\n\n\t\t\t// Make a writable jQuery.Event from the native event object\n\t\t\tevent = jQuery.event.fix( nativeEvent ),\n\n\t\t\thandlers = (\n\t\t\t\tdataPriv.get( this, \"events\" ) || Object.create( null )\n\t\t\t)[ event.type ] || [],\n\t\t\tspecial = jQuery.event.special[ event.type ] || {};\n\n\t\t// Use the fix-ed jQuery.Event rather than the (read-only) native event\n\t\targs[ 0 ] = event;\n\n\t\tfor ( i = 1; i < arguments.length; i++ ) {\n\t\t\targs[ i ] = arguments[ i ];\n\t\t}\n\n\t\tevent.delegateTarget = this;\n\n\t\t// Call the preDispatch hook for the mapped type, and let it bail if desired\n\t\tif ( special.preDispatch && special.preDispatch.call( this, event ) === false ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Determine handlers\n\t\thandlerQueue = jQuery.event.handlers.call( this, event, handlers );\n\n\t\t// Run delegates first; they may want to stop propagation beneath us\n\t\ti = 0;\n\t\twhile ( ( matched = handlerQueue[ i++ ] ) && !event.isPropagationStopped() ) {\n\t\t\tevent.currentTarget = matched.elem;\n\n\t\t\tj = 0;\n\t\t\twhile ( ( handleObj = matched.handlers[ j++ ] ) &&\n\t\t\t\t!event.isImmediatePropagationStopped() ) {\n\n\t\t\t\t// If the event is namespaced, then each handler is only invoked if it is\n\t\t\t\t// specially universal or its namespaces are a superset of the event's.\n\t\t\t\tif ( !event.rnamespace || handleObj.namespace === false ||\n\t\t\t\t\tevent.rnamespace.test( handleObj.namespace ) ) {\n\n\t\t\t\t\tevent.handleObj = handleObj;\n\t\t\t\t\tevent.data = handleObj.data;\n\n\t\t\t\t\tret = ( ( jQuery.event.special[ handleObj.origType ] || {} ).handle ||\n\t\t\t\t\t\thandleObj.handler ).apply( matched.elem, args );\n\n\t\t\t\t\tif ( ret !== undefined ) {\n\t\t\t\t\t\tif ( ( event.result = ret ) === false ) {\n\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t\tevent.stopPropagation();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Call the postDispatch hook for the mapped type\n\t\tif ( special.postDispatch ) {\n\t\t\tspecial.postDispatch.call( this, event );\n\t\t}\n\n\t\treturn event.result;\n\t},\n\n\thandlers: function( event, handlers ) {\n\t\tvar i, handleObj, sel, matchedHandlers, matchedSelectors,\n\t\t\thandlerQueue = [],\n\t\t\tdelegateCount = handlers.delegateCount,\n\t\t\tcur = event.target;\n\n\t\t// Find delegate handlers\n\t\tif ( delegateCount &&\n\n\t\t\t// Support: IE <=9\n\t\t\t// Black-hole SVG <use> instance trees (trac-13180)\n\t\t\tcur.nodeType &&\n\n\t\t\t// Support: Firefox <=42\n\t\t\t// Suppress spec-violating clicks indicating a non-primary pointer button (trac-3861)\n\t\t\t// https://www.w3.org/TR/DOM-Level-3-Events/#event-type-click\n\t\t\t// Support: IE 11 only\n\t\t\t// ...but not arrow key \"clicks\" of radio inputs, which can have `button` -1 (gh-2343)\n\t\t\t!( event.type === \"click\" && event.button >= 1 ) ) {\n\n\t\t\tfor ( ; cur !== this; cur = cur.parentNode || this ) {\n\n\t\t\t\t// Don't check non-elements (trac-13208)\n\t\t\t\t// Don't process clicks on disabled elements (trac-6911, trac-8165, trac-11382, trac-11764)\n\t\t\t\tif ( cur.nodeType === 1 && !( event.type === \"click\" && cur.disabled === true ) ) {\n\t\t\t\t\tmatchedHandlers = [];\n\t\t\t\t\tmatchedSelectors = {};\n\t\t\t\t\tfor ( i = 0; i < delegateCount; i++ ) {\n\t\t\t\t\t\thandleObj = handlers[ i ];\n\n\t\t\t\t\t\t// Don't conflict with Object.prototype properties (trac-13203)\n\t\t\t\t\t\tsel = handleObj.selector + \" \";\n\n\t\t\t\t\t\tif ( matchedSelectors[ sel ] === undefined ) {\n\t\t\t\t\t\t\tmatchedSelectors[ sel ] = handleObj.needsContext ?\n\t\t\t\t\t\t\t\tjQuery( sel, this ).index( cur ) > -1 :\n\t\t\t\t\t\t\t\tjQuery.find( sel, this, null, [ cur ] ).length;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif ( matchedSelectors[ sel ] ) {\n\t\t\t\t\t\t\tmatchedHandlers.push( handleObj );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif ( matchedHandlers.length ) {\n\t\t\t\t\t\thandlerQueue.push( { elem: cur, handlers: matchedHandlers } );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Add the remaining (directly-bound) handlers\n\t\tcur = this;\n\t\tif ( delegateCount < handlers.length ) {\n\t\t\thandlerQueue.push( { elem: cur, handlers: handlers.slice( delegateCount ) } );\n\t\t}\n\n\t\treturn handlerQueue;\n\t},\n\n\taddProp: function( name, hook ) {\n\t\tObject.defineProperty( jQuery.Event.prototype, name, {\n\t\t\tenumerable: true,\n\t\t\tconfigurable: true,\n\n\t\t\tget: isFunction( hook ) ?\n\t\t\t\tfunction() {\n\t\t\t\t\tif ( this.originalEvent ) {\n\t\t\t\t\t\treturn hook( this.originalEvent );\n\t\t\t\t\t}\n\t\t\t\t} :\n\t\t\t\tfunction() {\n\t\t\t\t\tif ( this.originalEvent ) {\n\t\t\t\t\t\treturn this.originalEvent[ name ];\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\tset: function( value ) {\n\t\t\t\tObject.defineProperty( this, name, {\n\t\t\t\t\tenumerable: true,\n\t\t\t\t\tconfigurable: true,\n\t\t\t\t\twritable: true,\n\t\t\t\t\tvalue: value\n\t\t\t\t} );\n\t\t\t}\n\t\t} );\n\t},\n\n\tfix: function( originalEvent ) {\n\t\treturn originalEvent[ jQuery.expando ] ?\n\t\t\toriginalEvent :\n\t\t\tnew jQuery.Event( originalEvent );\n\t},\n\n\tspecial: {\n\t\tload: {\n\n\t\t\t// Prevent triggered image.load events from bubbling to window.load\n\t\t\tnoBubble: true\n\t\t},\n\t\tclick: {\n\n\t\t\t// Utilize native event to ensure correct state for checkable inputs\n\t\t\tsetup: function( data ) {\n\n\t\t\t\t// For mutual compressibility with _default, replace `this` access with a local var.\n\t\t\t\t// `|| data` is dead code meant only to preserve the variable through minification.\n\t\t\t\tvar el = this || data;\n\n\t\t\t\t// Claim the first handler\n\t\t\t\tif ( rcheckableType.test( el.type ) &&\n\t\t\t\t\tel.click && nodeName( el, \"input\" ) ) {\n\n\t\t\t\t\t// dataPriv.set( el, \"click\", ... )\n\t\t\t\t\tleverageNative( el, \"click\", true );\n\t\t\t\t}\n\n\t\t\t\t// Return false to allow normal processing in the caller\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\ttrigger: function( data ) {\n\n\t\t\t\t// For mutual compressibility with _default, replace `this` access with a local var.\n\t\t\t\t// `|| data` is dead code meant only to preserve the variable through minification.\n\t\t\t\tvar el = this || data;\n\n\t\t\t\t// Force setup before triggering a click\n\t\t\t\tif ( rcheckableType.test( el.type ) &&\n\t\t\t\t\tel.click && nodeName( el, \"input\" ) ) {\n\n\t\t\t\t\tleverageNative( el, \"click\" );\n\t\t\t\t}\n\n\t\t\t\t// Return non-false to allow normal event-path propagation\n\t\t\t\treturn true;\n\t\t\t},\n\n\t\t\t// For cross-browser consistency, suppress native .click() on links\n\t\t\t// Also prevent it if we're currently inside a leveraged native-event stack\n\t\t\t_default: function( event ) {\n\t\t\t\tvar target = event.target;\n\t\t\t\treturn rcheckableType.test( target.type ) &&\n\t\t\t\t\ttarget.click && nodeName( target, \"input\" ) &&\n\t\t\t\t\tdataPriv.get( target, \"click\" ) ||\n\t\t\t\t\tnodeName( target, \"a\" );\n\t\t\t}\n\t\t},\n\n\t\tbeforeunload: {\n\t\t\tpostDispatch: function( event ) {\n\n\t\t\t\t// Support: Firefox 20+\n\t\t\t\t// Firefox doesn't alert if the returnValue field is not set.\n\t\t\t\tif ( event.result !== undefined && event.originalEvent ) {\n\t\t\t\t\tevent.originalEvent.returnValue = event.result;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n};\n\n// Ensure the presence of an event listener that handles manually-triggered\n// synthetic events by interrupting progress until reinvoked in response to\n// *native* events that it fires directly, ensuring that state changes have\n// already occurred before other listeners are invoked.\nfunction leverageNative( el, type, isSetup ) {\n\n\t// Missing `isSetup` indicates a trigger call, which must force setup through jQuery.event.add\n\tif ( !isSetup ) {\n\t\tif ( dataPriv.get( el, type ) === undefined ) {\n\t\t\tjQuery.event.add( el, type, returnTrue );\n\t\t}\n\t\treturn;\n\t}\n\n\t// Register the controller as a special universal handler for all event namespaces\n\tdataPriv.set( el, type, false );\n\tjQuery.event.add( el, type, {\n\t\tnamespace: false,\n\t\thandler: function( event ) {\n\t\t\tvar result,\n\t\t\t\tsaved = dataPriv.get( this, type );\n\n\t\t\tif ( ( event.isTrigger & 1 ) && this[ type ] ) {\n\n\t\t\t\t// Interrupt processing of the outer synthetic .trigger()ed event\n\t\t\t\tif ( !saved ) {\n\n\t\t\t\t\t// Store arguments for use when handling the inner native event\n\t\t\t\t\t// There will always be at least one argument (an event object), so this array\n\t\t\t\t\t// will not be confused with a leftover capture object.\n\t\t\t\t\tsaved = slice.call( arguments );\n\t\t\t\t\tdataPriv.set( this, type, saved );\n\n\t\t\t\t\t// Trigger the native event and capture its result\n\t\t\t\t\tthis[ type ]();\n\t\t\t\t\tresult = dataPriv.get( this, type );\n\t\t\t\t\tdataPriv.set( this, type, false );\n\n\t\t\t\t\tif ( saved !== result ) {\n\n\t\t\t\t\t\t// Cancel the outer synthetic event\n\t\t\t\t\t\tevent.stopImmediatePropagation();\n\t\t\t\t\t\tevent.preventDefault();\n\n\t\t\t\t\t\treturn result;\n\t\t\t\t\t}\n\n\t\t\t\t// If this is an inner synthetic event for an event with a bubbling surrogate\n\t\t\t\t// (focus or blur), assume that the surrogate already propagated from triggering\n\t\t\t\t// the native event and prevent that from happening again here.\n\t\t\t\t// This technically gets the ordering wrong w.r.t. to `.trigger()` (in which the\n\t\t\t\t// bubbling surrogate propagates *after* the non-bubbling base), but that seems\n\t\t\t\t// less bad than duplication.\n\t\t\t\t} else if ( ( jQuery.event.special[ type ] || {} ).delegateType ) {\n\t\t\t\t\tevent.stopPropagation();\n\t\t\t\t}\n\n\t\t\t// If this is a native event triggered above, everything is now in order\n\t\t\t// Fire an inner synthetic event with the original arguments\n\t\t\t} else if ( saved ) {\n\n\t\t\t\t// ...and capture the result\n\t\t\t\tdataPriv.set( this, type, jQuery.event.trigger(\n\t\t\t\t\tsaved[ 0 ],\n\t\t\t\t\tsaved.slice( 1 ),\n\t\t\t\t\tthis\n\t\t\t\t) );\n\n\t\t\t\t// Abort handling of the native event by all jQuery handlers while allowing\n\t\t\t\t// native handlers on the same element to run. On target, this is achieved\n\t\t\t\t// by stopping immediate propagation just on the jQuery event. However,\n\t\t\t\t// the native event is re-wrapped by a jQuery one on each level of the\n\t\t\t\t// propagation so the only way to stop it for jQuery is to stop it for\n\t\t\t\t// everyone via native `stopPropagation()`. This is not a problem for\n\t\t\t\t// focus/blur which don't bubble, but it does also stop click on checkboxes\n\t\t\t\t// and radios. We accept this limitation.\n\t\t\t\tevent.stopPropagation();\n\t\t\t\tevent.isImmediatePropagationStopped = returnTrue;\n\t\t\t}\n\t\t}\n\t} );\n}\n\njQuery.removeEvent = function( elem, type, handle ) {\n\n\t// This \"if\" is needed for plain objects\n\tif ( elem.removeEventListener ) {\n\t\telem.removeEventListener( type, handle );\n\t}\n};\n\njQuery.Event = function( src, props ) {\n\n\t// Allow instantiation without the 'new' keyword\n\tif ( !( this instanceof jQuery.Event ) ) {\n\t\treturn new jQuery.Event( src, props );\n\t}\n\n\t// Event object\n\tif ( src && src.type ) {\n\t\tthis.originalEvent = src;\n\t\tthis.type = src.type;\n\n\t\t// Events bubbling up the document may have been marked as prevented\n\t\t// by a handler lower down the tree; reflect the correct value.\n\t\tthis.isDefaultPrevented = src.defaultPrevented ||\n\t\t\t\tsrc.defaultPrevented === undefined &&\n\n\t\t\t\t// Support: Android <=2.3 only\n\t\t\t\tsrc.returnValue === false ?\n\t\t\treturnTrue :\n\t\t\treturnFalse;\n\n\t\t// Create target properties\n\t\t// Support: Safari <=6 - 7 only\n\t\t// Target should not be a text node (trac-504, trac-13143)\n\t\tthis.target = ( src.target && src.target.nodeType === 3 ) ?\n\t\t\tsrc.target.parentNode :\n\t\t\tsrc.target;\n\n\t\tthis.currentTarget = src.currentTarget;\n\t\tthis.relatedTarget = src.relatedTarget;\n\n\t// Event type\n\t} else {\n\t\tthis.type = src;\n\t}\n\n\t// Put explicitly provided properties onto the event object\n\tif ( props ) {\n\t\tjQuery.extend( this, props );\n\t}\n\n\t// Create a timestamp if incoming event doesn't have one\n\tthis.timeStamp = src && src.timeStamp || Date.now();\n\n\t// Mark it as fixed\n\tthis[ jQuery.expando ] = true;\n};\n\n// jQuery.Event is based on DOM3 Events as specified by the ECMAScript Language Binding\n// https://www.w3.org/TR/2003/WD-DOM-Level-3-Events-20030331/ecma-script-binding.html\njQuery.Event.prototype = {\n\tconstructor: jQuery.Event,\n\tisDefaultPrevented: returnFalse,\n\tisPropagationStopped: returnFalse,\n\tisImmediatePropagationStopped: returnFalse,\n\tisSimulated: false,\n\n\tpreventDefault: function() {\n\t\tvar e = this.originalEvent;\n\n\t\tthis.isDefaultPrevented = returnTrue;\n\n\t\tif ( e && !this.isSimulated ) {\n\t\t\te.preventDefault();\n\t\t}\n\t},\n\tstopPropagation: function() {\n\t\tvar e = this.originalEvent;\n\n\t\tthis.isPropagationStopped = returnTrue;\n\n\t\tif ( e && !this.isSimulated ) {\n\t\t\te.stopPropagation();\n\t\t}\n\t},\n\tstopImmediatePropagation: function() {\n\t\tvar e = this.originalEvent;\n\n\t\tthis.isImmediatePropagationStopped = returnTrue;\n\n\t\tif ( e && !this.isSimulated ) {\n\t\t\te.stopImmediatePropagation();\n\t\t}\n\n\t\tthis.stopPropagation();\n\t}\n};\n\n// Includes all common event props including KeyEvent and MouseEvent specific props\njQuery.each( {\n\taltKey: true,\n\tbubbles: true,\n\tcancelable: true,\n\tchangedTouches: true,\n\tctrlKey: true,\n\tdetail: true,\n\teventPhase: true,\n\tmetaKey: true,\n\tpageX: true,\n\tpageY: true,\n\tshiftKey: true,\n\tview: true,\n\t\"char\": true,\n\tcode: true,\n\tcharCode: true,\n\tkey: true,\n\tkeyCode: true,\n\tbutton: true,\n\tbuttons: true,\n\tclientX: true,\n\tclientY: true,\n\toffsetX: true,\n\toffsetY: true,\n\tpointerId: true,\n\tpointerType: true,\n\tscreenX: true,\n\tscreenY: true,\n\ttargetTouches: true,\n\ttoElement: true,\n\ttouches: true,\n\twhich: true\n}, jQuery.event.addProp );\n\njQuery.each( { focus: \"focusin\", blur: \"focusout\" }, function( type, delegateType ) {\n\n\tfunction focusMappedHandler( nativeEvent ) {\n\t\tif ( document.documentMode ) {\n\n\t\t\t// Support: IE 11+\n\t\t\t// Attach a single focusin/focusout handler on the document while someone wants\n\t\t\t// focus/blur. This is because the former are synchronous in IE while the latter\n\t\t\t// are async. In other browsers, all those handlers are invoked synchronously.\n\n\t\t\t// `handle` from private data would already wrap the event, but we need\n\t\t\t// to change the `type` here.\n\t\t\tvar handle = dataPriv.get( this, \"handle\" ),\n\t\t\t\tevent = jQuery.event.fix( nativeEvent );\n\t\t\tevent.type = nativeEvent.type === \"focusin\" ? \"focus\" : \"blur\";\n\t\t\tevent.isSimulated = true;\n\n\t\t\t// First, handle focusin/focusout\n\t\t\thandle( nativeEvent );\n\n\t\t\t// ...then, handle focus/blur\n\t\t\t//\n\t\t\t// focus/blur don't bubble while focusin/focusout do; simulate the former by only\n\t\t\t// invoking the handler at the lower level.\n\t\t\tif ( event.target === event.currentTarget ) {\n\n\t\t\t\t// The setup part calls `leverageNative`, which, in turn, calls\n\t\t\t\t// `jQuery.event.add`, so event handle will already have been set\n\t\t\t\t// by this point.\n\t\t\t\thandle( event );\n\t\t\t}\n\t\t} else {\n\n\t\t\t// For non-IE browsers, attach a single capturing handler on the document\n\t\t\t// while someone wants focusin/focusout.\n\t\t\tjQuery.event.simulate( delegateType, nativeEvent.target,\n\t\t\t\tjQuery.event.fix( nativeEvent ) );\n\t\t}\n\t}\n\n\tjQuery.event.special[ type ] = {\n\n\t\t// Utilize native event if possible so blur/focus sequence is correct\n\t\tsetup: function() {\n\n\t\t\tvar attaches;\n\n\t\t\t// Claim the first handler\n\t\t\t// dataPriv.set( this, \"focus\", ... )\n\t\t\t// dataPriv.set( this, \"blur\", ... )\n\t\t\tleverageNative( this, type, true );\n\n\t\t\tif ( document.documentMode ) {\n\n\t\t\t\t// Support: IE 9 - 11+\n\t\t\t\t// We use the same native handler for focusin & focus (and focusout & blur)\n\t\t\t\t// so we need to coordinate setup & teardown parts between those events.\n\t\t\t\t// Use `delegateType` as the key as `type` is already used by `leverageNative`.\n\t\t\t\tattaches = dataPriv.get( this, delegateType );\n\t\t\t\tif ( !attaches ) {\n\t\t\t\t\tthis.addEventListener( delegateType, focusMappedHandler );\n\t\t\t\t}\n\t\t\t\tdataPriv.set( this, delegateType, ( attaches || 0 ) + 1 );\n\t\t\t} else {\n\n\t\t\t\t// Return false to allow normal processing in the caller\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\t\ttrigger: function() {\n\n\t\t\t// Force setup before trigger\n\t\t\tleverageNative( this, type );\n\n\t\t\t// Return non-false to allow normal event-path propagation\n\t\t\treturn true;\n\t\t},\n\n\t\tteardown: function() {\n\t\t\tvar attaches;\n\n\t\t\tif ( document.documentMode ) {\n\t\t\t\tattaches = dataPriv.get( this, delegateType ) - 1;\n\t\t\t\tif ( !attaches ) {\n\t\t\t\t\tthis.removeEventListener( delegateType, focusMappedHandler );\n\t\t\t\t\tdataPriv.remove( this, delegateType );\n\t\t\t\t} else {\n\t\t\t\t\tdataPriv.set( this, delegateType, attaches );\n\t\t\t\t}\n\t\t\t} else {\n\n\t\t\t\t// Return false to indicate standard teardown should be applied\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\n\t\t// Suppress native focus or blur if we're currently inside\n\t\t// a leveraged native-event stack\n\t\t_default: function( event ) {\n\t\t\treturn dataPriv.get( event.target, type );\n\t\t},\n\n\t\tdelegateType: delegateType\n\t};\n\n\t// Support: Firefox <=44\n\t// Firefox doesn't have focus(in | out) events\n\t// Related ticket - https://bugzilla.mozilla.org/show_bug.cgi?id=687787\n\t//\n\t// Support: Chrome <=48 - 49, Safari <=9.0 - 9.1\n\t// focus(in | out) events fire after focus & blur events,\n\t// which is spec violation - http://www.w3.org/TR/DOM-Level-3-Events/#events-focusevent-event-order\n\t// Related ticket - https://bugs.chromium.org/p/chromium/issues/detail?id=449857\n\t//\n\t// Support: IE 9 - 11+\n\t// To preserve relative focusin/focus & focusout/blur event order guaranteed on the 3.x branch,\n\t// attach a single handler for both events in IE.\n\tjQuery.event.special[ delegateType ] = {\n\t\tsetup: function() {\n\n\t\t\t// Handle: regular nodes (via `this.ownerDocument`), window\n\t\t\t// (via `this.document`) & document (via `this`).\n\t\t\tvar doc = this.ownerDocument || this.document || this,\n\t\t\t\tdataHolder = document.documentMode ? this : doc,\n\t\t\t\tattaches = dataPriv.get( dataHolder, delegateType );\n\n\t\t\t// Support: IE 9 - 11+\n\t\t\t// We use the same native handler for focusin & focus (and focusout & blur)\n\t\t\t// so we need to coordinate setup & teardown parts between those events.\n\t\t\t// Use `delegateType` as the key as `type` is already used by `leverageNative`.\n\t\t\tif ( !attaches ) {\n\t\t\t\tif ( document.documentMode ) {\n\t\t\t\t\tthis.addEventListener( delegateType, focusMappedHandler );\n\t\t\t\t} else {\n\t\t\t\t\tdoc.addEventListener( type, focusMappedHandler, true );\n\t\t\t\t}\n\t\t\t}\n\t\t\tdataPriv.set( dataHolder, delegateType, ( attaches || 0 ) + 1 );\n\t\t},\n\t\tteardown: function() {\n\t\t\tvar doc = this.ownerDocument || this.document || this,\n\t\t\t\tdataHolder = document.documentMode ? this : doc,\n\t\t\t\tattaches = dataPriv.get( dataHolder, delegateType ) - 1;\n\n\t\t\tif ( !attaches ) {\n\t\t\t\tif ( document.documentMode ) {\n\t\t\t\t\tthis.removeEventListener( delegateType, focusMappedHandler );\n\t\t\t\t} else {\n\t\t\t\t\tdoc.removeEventListener( type, focusMappedHandler, true );\n\t\t\t\t}\n\t\t\t\tdataPriv.remove( dataHolder, delegateType );\n\t\t\t} else {\n\t\t\t\tdataPriv.set( dataHolder, delegateType, attaches );\n\t\t\t}\n\t\t}\n\t};\n} );\n\n// Create mouseenter/leave events using mouseover/out and event-time checks\n// so that event delegation works in jQuery.\n// Do the same for pointerenter/pointerleave and pointerover/pointerout\n//\n// Support: Safari 7 only\n// Safari sends mouseenter too often; see:\n// https://bugs.chromium.org/p/chromium/issues/detail?id=470258\n// for the description of the bug (it existed in older Chrome versions as well).\njQuery.each( {\n\tmouseenter: \"mouseover\",\n\tmouseleave: \"mouseout\",\n\tpointerenter: \"pointerover\",\n\tpointerleave: \"pointerout\"\n}, function( orig, fix ) {\n\tjQuery.event.special[ orig ] = {\n\t\tdelegateType: fix,\n\t\tbindType: fix,\n\n\t\thandle: function( event ) {\n\t\t\tvar ret,\n\t\t\t\ttarget = this,\n\t\t\t\trelated = event.relatedTarget,\n\t\t\t\thandleObj = event.handleObj;\n\n\t\t\t// For mouseenter/leave call the handler if related is outside the target.\n\t\t\t// NB: No relatedTarget if the mouse left/entered the browser window\n\t\t\tif ( !related || ( related !== target && !jQuery.contains( target, related ) ) ) {\n\t\t\t\tevent.type = handleObj.origType;\n\t\t\t\tret = handleObj.handler.apply( this, arguments );\n\t\t\t\tevent.type = fix;\n\t\t\t}\n\t\t\treturn ret;\n\t\t}\n\t};\n} );\n\njQuery.fn.extend( {\n\n\ton: function( types, selector, data, fn ) {\n\t\treturn on( this, types, selector, data, fn );\n\t},\n\tone: function( types, selector, data, fn ) {\n\t\treturn on( this, types, selector, data, fn, 1 );\n\t},\n\toff: function( types, selector, fn ) {\n\t\tvar handleObj, type;\n\t\tif ( types && types.preventDefault && types.handleObj ) {\n\n\t\t\t// ( event )  dispatched jQuery.Event\n\t\t\thandleObj = types.handleObj;\n\t\t\tjQuery( types.delegateTarget ).off(\n\t\t\t\thandleObj.namespace ?\n\t\t\t\t\thandleObj.origType + \".\" + handleObj.namespace :\n\t\t\t\t\thandleObj.origType,\n\t\t\t\thandleObj.selector,\n\t\t\t\thandleObj.handler\n\t\t\t);\n\t\t\treturn this;\n\t\t}\n\t\tif ( typeof types === \"object\" ) {\n\n\t\t\t// ( types-object [, selector] )\n\t\t\tfor ( type in types ) {\n\t\t\t\tthis.off( type, selector, types[ type ] );\n\t\t\t}\n\t\t\treturn this;\n\t\t}\n\t\tif ( selector === false || typeof selector === \"function\" ) {\n\n\t\t\t// ( types [, fn] )\n\t\t\tfn = selector;\n\t\t\tselector = undefined;\n\t\t}\n\t\tif ( fn === false ) {\n\t\t\tfn = returnFalse;\n\t\t}\n\t\treturn this.each( function() {\n\t\t\tjQuery.event.remove( this, types, fn, selector );\n\t\t} );\n\t}\n} );\n\n\nvar\n\n\t// Support: IE <=10 - 11, Edge 12 - 13 only\n\t// In IE/Edge using regex groups here causes severe slowdowns.\n\t// See https://connect.microsoft.com/IE/feedback/details/1736512/\n\trnoInnerhtml = /<script|<style|<link/i,\n\n\t// checked=\"checked\" or checked\n\trchecked = /checked\\s*(?:[^=]|=\\s*.checked.)/i,\n\n\trcleanScript = /^\\s*<!\\[CDATA\\[|\\]\\]>\\s*$/g;\n\n// Prefer a tbody over its parent table for containing new rows\nfunction manipulationTarget( elem, content ) {\n\tif ( nodeName( elem, \"table\" ) &&\n\t\tnodeName( content.nodeType !== 11 ? content : content.firstChild, \"tr\" ) ) {\n\n\t\treturn jQuery( elem ).children( \"tbody\" )[ 0 ] || elem;\n\t}\n\n\treturn elem;\n}\n\n// Replace/restore the type attribute of script elements for safe DOM manipulation\nfunction disableScript( elem ) {\n\telem.type = ( elem.getAttribute( \"type\" ) !== null ) + \"/\" + elem.type;\n\treturn elem;\n}\nfunction restoreScript( elem ) {\n\tif ( ( elem.type || \"\" ).slice( 0, 5 ) === \"true/\" ) {\n\t\telem.type = elem.type.slice( 5 );\n\t} else {\n\t\telem.removeAttribute( \"type\" );\n\t}\n\n\treturn elem;\n}\n\nfunction cloneCopyEvent( src, dest ) {\n\tvar i, l, type, pdataOld, udataOld, udataCur, events;\n\n\tif ( dest.nodeType !== 1 ) {\n\t\treturn;\n\t}\n\n\t// 1. Copy private data: events, handlers, etc.\n\tif ( dataPriv.hasData( src ) ) {\n\t\tpdataOld = dataPriv.get( src );\n\t\tevents = pdataOld.events;\n\n\t\tif ( events ) {\n\t\t\tdataPriv.remove( dest, \"handle events\" );\n\n\t\t\tfor ( type in events ) {\n\t\t\t\tfor ( i = 0, l = events[ type ].length; i < l; i++ ) {\n\t\t\t\t\tjQuery.event.add( dest, type, events[ type ][ i ] );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// 2. Copy user data\n\tif ( dataUser.hasData( src ) ) {\n\t\tudataOld = dataUser.access( src );\n\t\tudataCur = jQuery.extend( {}, udataOld );\n\n\t\tdataUser.set( dest, udataCur );\n\t}\n}\n\n// Fix IE bugs, see support tests\nfunction fixInput( src, dest ) {\n\tvar nodeName = dest.nodeName.toLowerCase();\n\n\t// Fails to persist the checked state of a cloned checkbox or radio button.\n\tif ( nodeName === \"input\" && rcheckableType.test( src.type ) ) {\n\t\tdest.checked = src.checked;\n\n\t// Fails to return the selected option to the default selected state when cloning options\n\t} else if ( nodeName === \"input\" || nodeName === \"textarea\" ) {\n\t\tdest.defaultValue = src.defaultValue;\n\t}\n}\n\nfunction domManip( collection, args, callback, ignored ) {\n\n\t// Flatten any nested arrays\n\targs = flat( args );\n\n\tvar fragment, first, scripts, hasScripts, node, doc,\n\t\ti = 0,\n\t\tl = collection.length,\n\t\tiNoClone = l - 1,\n\t\tvalue = args[ 0 ],\n\t\tvalueIsFunction = isFunction( value );\n\n\t// We can't cloneNode fragments that contain checked, in WebKit\n\tif ( valueIsFunction ||\n\t\t\t( l > 1 && typeof value === \"string\" &&\n\t\t\t\t!support.checkClone && rchecked.test( value ) ) ) {\n\t\treturn collection.each( function( index ) {\n\t\t\tvar self = collection.eq( index );\n\t\t\tif ( valueIsFunction ) {\n\t\t\t\targs[ 0 ] = value.call( this, index, self.html() );\n\t\t\t}\n\t\t\tdomManip( self, args, callback, ignored );\n\t\t} );\n\t}\n\n\tif ( l ) {\n\t\tfragment = buildFragment( args, collection[ 0 ].ownerDocument, false, collection, ignored );\n\t\tfirst = fragment.firstChild;\n\n\t\tif ( fragment.childNodes.length === 1 ) {\n\t\t\tfragment = first;\n\t\t}\n\n\t\t// Require either new content or an interest in ignored elements to invoke the callback\n\t\tif ( first || ignored ) {\n\t\t\tscripts = jQuery.map( getAll( fragment, \"script\" ), disableScript );\n\t\t\thasScripts = scripts.length;\n\n\t\t\t// Use the original fragment for the last item\n\t\t\t// instead of the first because it can end up\n\t\t\t// being emptied incorrectly in certain situations (trac-8070).\n\t\t\tfor ( ; i < l; i++ ) {\n\t\t\t\tnode = fragment;\n\n\t\t\t\tif ( i !== iNoClone ) {\n\t\t\t\t\tnode = jQuery.clone( node, true, true );\n\n\t\t\t\t\t// Keep references to cloned scripts for later restoration\n\t\t\t\t\tif ( hasScripts ) {\n\n\t\t\t\t\t\t// Support: Android <=4.0 only, PhantomJS 1 only\n\t\t\t\t\t\t// push.apply(_, arraylike) throws on ancient WebKit\n\t\t\t\t\t\tjQuery.merge( scripts, getAll( node, \"script\" ) );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tcallback.call( collection[ i ], node, i );\n\t\t\t}\n\n\t\t\tif ( hasScripts ) {\n\t\t\t\tdoc = scripts[ scripts.length - 1 ].ownerDocument;\n\n\t\t\t\t// Re-enable scripts\n\t\t\t\tjQuery.map( scripts, restoreScript );\n\n\t\t\t\t// Evaluate executable scripts on first document insertion\n\t\t\t\tfor ( i = 0; i < hasScripts; i++ ) {\n\t\t\t\t\tnode = scripts[ i ];\n\t\t\t\t\tif ( rscriptType.test( node.type || \"\" ) &&\n\t\t\t\t\t\t!dataPriv.access( node, \"globalEval\" ) &&\n\t\t\t\t\t\tjQuery.contains( doc, node ) ) {\n\n\t\t\t\t\t\tif ( node.src && ( node.type || \"\" ).toLowerCase()  !== \"module\" ) {\n\n\t\t\t\t\t\t\t// Optional AJAX dependency, but won't run scripts if not present\n\t\t\t\t\t\t\tif ( jQuery._evalUrl && !node.noModule ) {\n\t\t\t\t\t\t\t\tjQuery._evalUrl( node.src, {\n\t\t\t\t\t\t\t\t\tnonce: node.nonce || node.getAttribute( \"nonce\" )\n\t\t\t\t\t\t\t\t}, doc );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t// Unwrap a CDATA section containing script contents. This shouldn't be\n\t\t\t\t\t\t\t// needed as in XML documents they're already not visible when\n\t\t\t\t\t\t\t// inspecting element contents and in HTML documents they have no\n\t\t\t\t\t\t\t// meaning but we're preserving that logic for backwards compatibility.\n\t\t\t\t\t\t\t// This will be removed completely in 4.0. See gh-4904.\n\t\t\t\t\t\t\tDOMEval( node.textContent.replace( rcleanScript, \"\" ), node, doc );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn collection;\n}\n\nfunction remove( elem, selector, keepData ) {\n\tvar node,\n\t\tnodes = selector ? jQuery.filter( selector, elem ) : elem,\n\t\ti = 0;\n\n\tfor ( ; ( node = nodes[ i ] ) != null; i++ ) {\n\t\tif ( !keepData && node.nodeType === 1 ) {\n\t\t\tjQuery.cleanData( getAll( node ) );\n\t\t}\n\n\t\tif ( node.parentNode ) {\n\t\t\tif ( keepData && isAttached( node ) ) {\n\t\t\t\tsetGlobalEval( getAll( node, \"script\" ) );\n\t\t\t}\n\t\t\tnode.parentNode.removeChild( node );\n\t\t}\n\t}\n\n\treturn elem;\n}\n\njQuery.extend( {\n\thtmlPrefilter: function( html ) {\n\t\treturn html;\n\t},\n\n\tclone: function( elem, dataAndEvents, deepDataAndEvents ) {\n\t\tvar i, l, srcElements, destElements,\n\t\t\tclone = elem.cloneNode( true ),\n\t\t\tinPage = isAttached( elem );\n\n\t\t// Fix IE cloning issues\n\t\tif ( !support.noCloneChecked && ( elem.nodeType === 1 || elem.nodeType === 11 ) &&\n\t\t\t\t!jQuery.isXMLDoc( elem ) ) {\n\n\t\t\t// We eschew jQuery#find here for performance reasons:\n\t\t\t// https://jsperf.com/getall-vs-sizzle/2\n\t\t\tdestElements = getAll( clone );\n\t\t\tsrcElements = getAll( elem );\n\n\t\t\tfor ( i = 0, l = srcElements.length; i < l; i++ ) {\n\t\t\t\tfixInput( srcElements[ i ], destElements[ i ] );\n\t\t\t}\n\t\t}\n\n\t\t// Copy the events from the original to the clone\n\t\tif ( dataAndEvents ) {\n\t\t\tif ( deepDataAndEvents ) {\n\t\t\t\tsrcElements = srcElements || getAll( elem );\n\t\t\t\tdestElements = destElements || getAll( clone );\n\n\t\t\t\tfor ( i = 0, l = srcElements.length; i < l; i++ ) {\n\t\t\t\t\tcloneCopyEvent( srcElements[ i ], destElements[ i ] );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tcloneCopyEvent( elem, clone );\n\t\t\t}\n\t\t}\n\n\t\t// Preserve script evaluation history\n\t\tdestElements = getAll( clone, \"script\" );\n\t\tif ( destElements.length > 0 ) {\n\t\t\tsetGlobalEval( destElements, !inPage && getAll( elem, \"script\" ) );\n\t\t}\n\n\t\t// Return the cloned set\n\t\treturn clone;\n\t},\n\n\tcleanData: function( elems ) {\n\t\tvar data, elem, type,\n\t\t\tspecial = jQuery.event.special,\n\t\t\ti = 0;\n\n\t\tfor ( ; ( elem = elems[ i ] ) !== undefined; i++ ) {\n\t\t\tif ( acceptData( elem ) ) {\n\t\t\t\tif ( ( data = elem[ dataPriv.expando ] ) ) {\n\t\t\t\t\tif ( data.events ) {\n\t\t\t\t\t\tfor ( type in data.events ) {\n\t\t\t\t\t\t\tif ( special[ type ] ) {\n\t\t\t\t\t\t\t\tjQuery.event.remove( elem, type );\n\n\t\t\t\t\t\t\t// This is a shortcut to avoid jQuery.event.remove's overhead\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tjQuery.removeEvent( elem, type, data.handle );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Support: Chrome <=35 - 45+\n\t\t\t\t\t// Assign undefined instead of using delete, see Data#remove\n\t\t\t\t\telem[ dataPriv.expando ] = undefined;\n\t\t\t\t}\n\t\t\t\tif ( elem[ dataUser.expando ] ) {\n\n\t\t\t\t\t// Support: Chrome <=35 - 45+\n\t\t\t\t\t// Assign undefined instead of using delete, see Data#remove\n\t\t\t\t\telem[ dataUser.expando ] = undefined;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n} );\n\njQuery.fn.extend( {\n\tdetach: function( selector ) {\n\t\treturn remove( this, selector, true );\n\t},\n\n\tremove: function( selector ) {\n\t\treturn remove( this, selector );\n\t},\n\n\ttext: function( value ) {\n\t\treturn access( this, function( value ) {\n\t\t\treturn value === undefined ?\n\t\t\t\tjQuery.text( this ) :\n\t\t\t\tthis.empty().each( function() {\n\t\t\t\t\tif ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {\n\t\t\t\t\t\tthis.textContent = value;\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t}, null, value, arguments.length );\n\t},\n\n\tappend: function() {\n\t\treturn domManip( this, arguments, function( elem ) {\n\t\t\tif ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {\n\t\t\t\tvar target = manipulationTarget( this, elem );\n\t\t\t\ttarget.appendChild( elem );\n\t\t\t}\n\t\t} );\n\t},\n\n\tprepend: function() {\n\t\treturn domManip( this, arguments, function( elem ) {\n\t\t\tif ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {\n\t\t\t\tvar target = manipulationTarget( this, elem );\n\t\t\t\ttarget.insertBefore( elem, target.firstChild );\n\t\t\t}\n\t\t} );\n\t},\n\n\tbefore: function() {\n\t\treturn domManip( this, arguments, function( elem ) {\n\t\t\tif ( this.parentNode ) {\n\t\t\t\tthis.parentNode.insertBefore( elem, this );\n\t\t\t}\n\t\t} );\n\t},\n\n\tafter: function() {\n\t\treturn domManip( this, arguments, function( elem ) {\n\t\t\tif ( this.parentNode ) {\n\t\t\t\tthis.parentNode.insertBefore( elem, this.nextSibling );\n\t\t\t}\n\t\t} );\n\t},\n\n\tempty: function() {\n\t\tvar elem,\n\t\t\ti = 0;\n\n\t\tfor ( ; ( elem = this[ i ] ) != null; i++ ) {\n\t\t\tif ( elem.nodeType === 1 ) {\n\n\t\t\t\t// Prevent memory leaks\n\t\t\t\tjQuery.cleanData( getAll( elem, false ) );\n\n\t\t\t\t// Remove any remaining nodes\n\t\t\t\telem.textContent = \"\";\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t},\n\n\tclone: function( dataAndEvents, deepDataAndEvents ) {\n\t\tdataAndEvents = dataAndEvents == null ? false : dataAndEvents;\n\t\tdeepDataAndEvents = deepDataAndEvents == null ? dataAndEvents : deepDataAndEvents;\n\n\t\treturn this.map( function() {\n\t\t\treturn jQuery.clone( this, dataAndEvents, deepDataAndEvents );\n\t\t} );\n\t},\n\n\thtml: function( value ) {\n\t\treturn access( this, function( value ) {\n\t\t\tvar elem = this[ 0 ] || {},\n\t\t\t\ti = 0,\n\t\t\t\tl = this.length;\n\n\t\t\tif ( value === undefined && elem.nodeType === 1 ) {\n\t\t\t\treturn elem.innerHTML;\n\t\t\t}\n\n\t\t\t// See if we can take a shortcut and just use innerHTML\n\t\t\tif ( typeof value === \"string\" && !rnoInnerhtml.test( value ) &&\n\t\t\t\t!wrapMap[ ( rtagName.exec( value ) || [ \"\", \"\" ] )[ 1 ].toLowerCase() ] ) {\n\n\t\t\t\tvalue = jQuery.htmlPrefilter( value );\n\n\t\t\t\ttry {\n\t\t\t\t\tfor ( ; i < l; i++ ) {\n\t\t\t\t\t\telem = this[ i ] || {};\n\n\t\t\t\t\t\t// Remove element nodes and prevent memory leaks\n\t\t\t\t\t\tif ( elem.nodeType === 1 ) {\n\t\t\t\t\t\t\tjQuery.cleanData( getAll( elem, false ) );\n\t\t\t\t\t\t\telem.innerHTML = value;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\telem = 0;\n\n\t\t\t\t// If using innerHTML throws an exception, use the fallback method\n\t\t\t\t} catch ( e ) {}\n\t\t\t}\n\n\t\t\tif ( elem ) {\n\t\t\t\tthis.empty().append( value );\n\t\t\t}\n\t\t}, null, value, arguments.length );\n\t},\n\n\treplaceWith: function() {\n\t\tvar ignored = [];\n\n\t\t// Make the changes, replacing each non-ignored context element with the new content\n\t\treturn domManip( this, arguments, function( elem ) {\n\t\t\tvar parent = this.parentNode;\n\n\t\t\tif ( jQuery.inArray( this, ignored ) < 0 ) {\n\t\t\t\tjQuery.cleanData( getAll( this ) );\n\t\t\t\tif ( parent ) {\n\t\t\t\t\tparent.replaceChild( elem, this );\n\t\t\t\t}\n\t\t\t}\n\n\t\t// Force callback invocation\n\t\t}, ignored );\n\t}\n} );\n\njQuery.each( {\n\tappendTo: \"append\",\n\tprependTo: \"prepend\",\n\tinsertBefore: \"before\",\n\tinsertAfter: \"after\",\n\treplaceAll: \"replaceWith\"\n}, function( name, original ) {\n\tjQuery.fn[ name ] = function( selector ) {\n\t\tvar elems,\n\t\t\tret = [],\n\t\t\tinsert = jQuery( selector ),\n\t\t\tlast = insert.length - 1,\n\t\t\ti = 0;\n\n\t\tfor ( ; i <= last; i++ ) {\n\t\t\telems = i === last ? this : this.clone( true );\n\t\t\tjQuery( insert[ i ] )[ original ]( elems );\n\n\t\t\t// Support: Android <=4.0 only, PhantomJS 1 only\n\t\t\t// .get() because push.apply(_, arraylike) throws on ancient WebKit\n\t\t\tpush.apply( ret, elems.get() );\n\t\t}\n\n\t\treturn this.pushStack( ret );\n\t};\n} );\nvar rnumnonpx = new RegExp( \"^(\" + pnum + \")(?!px)[a-z%]+$\", \"i\" );\n\nvar rcustomProp = /^--/;\n\n\nvar getStyles = function( elem ) {\n\n\t\t// Support: IE <=11 only, Firefox <=30 (trac-15098, trac-14150)\n\t\t// IE throws on elements created in popups\n\t\t// FF meanwhile throws on frame elements through \"defaultView.getComputedStyle\"\n\t\tvar view = elem.ownerDocument.defaultView;\n\n\t\tif ( !view || !view.opener ) {\n\t\t\tview = window;\n\t\t}\n\n\t\treturn view.getComputedStyle( elem );\n\t};\n\nvar swap = function( elem, options, callback ) {\n\tvar ret, name,\n\t\told = {};\n\n\t// Remember the old values, and insert the new ones\n\tfor ( name in options ) {\n\t\told[ name ] = elem.style[ name ];\n\t\telem.style[ name ] = options[ name ];\n\t}\n\n\tret = callback.call( elem );\n\n\t// Revert the old values\n\tfor ( name in options ) {\n\t\telem.style[ name ] = old[ name ];\n\t}\n\n\treturn ret;\n};\n\n\nvar rboxStyle = new RegExp( cssExpand.join( \"|\" ), \"i\" );\n\n\n\n( function() {\n\n\t// Executing both pixelPosition & boxSizingReliable tests require only one layout\n\t// so they're executed at the same time to save the second computation.\n\tfunction computeStyleTests() {\n\n\t\t// This is a singleton, we need to execute it only once\n\t\tif ( !div ) {\n\t\t\treturn;\n\t\t}\n\n\t\tcontainer.style.cssText = \"position:absolute;left:-11111px;width:60px;\" +\n\t\t\t\"margin-top:1px;padding:0;border:0\";\n\t\tdiv.style.cssText =\n\t\t\t\"position:relative;display:block;box-sizing:border-box;overflow:scroll;\" +\n\t\t\t\"margin:auto;border:1px;padding:1px;\" +\n\t\t\t\"width:60%;top:1%\";\n\t\tdocumentElement.appendChild( container ).appendChild( div );\n\n\t\tvar divStyle = window.getComputedStyle( div );\n\t\tpixelPositionVal = divStyle.top !== \"1%\";\n\n\t\t// Support: Android 4.0 - 4.3 only, Firefox <=3 - 44\n\t\treliableMarginLeftVal = roundPixelMeasures( divStyle.marginLeft ) === 12;\n\n\t\t// Support: Android 4.0 - 4.3 only, Safari <=9.1 - 10.1, iOS <=7.0 - 9.3\n\t\t// Some styles come back with percentage values, even though they shouldn't\n\t\tdiv.style.right = \"60%\";\n\t\tpixelBoxStylesVal = roundPixelMeasures( divStyle.right ) === 36;\n\n\t\t// Support: IE 9 - 11 only\n\t\t// Detect misreporting of content dimensions for box-sizing:border-box elements\n\t\tboxSizingReliableVal = roundPixelMeasures( divStyle.width ) === 36;\n\n\t\t// Support: IE 9 only\n\t\t// Detect overflow:scroll screwiness (gh-3699)\n\t\t// Support: Chrome <=64\n\t\t// Don't get tricked when zoom affects offsetWidth (gh-4029)\n\t\tdiv.style.position = \"absolute\";\n\t\tscrollboxSizeVal = roundPixelMeasures( div.offsetWidth / 3 ) === 12;\n\n\t\tdocumentElement.removeChild( container );\n\n\t\t// Nullify the div so it wouldn't be stored in the memory and\n\t\t// it will also be a sign that checks already performed\n\t\tdiv = null;\n\t}\n\n\tfunction roundPixelMeasures( measure ) {\n\t\treturn Math.round( parseFloat( measure ) );\n\t}\n\n\tvar pixelPositionVal, boxSizingReliableVal, scrollboxSizeVal, pixelBoxStylesVal,\n\t\treliableTrDimensionsVal, reliableMarginLeftVal,\n\t\tcontainer = document.createElement( \"div\" ),\n\t\tdiv = document.createElement( \"div\" );\n\n\t// Finish early in limited (non-browser) environments\n\tif ( !div.style ) {\n\t\treturn;\n\t}\n\n\t// Support: IE <=9 - 11 only\n\t// Style of cloned element affects source element cloned (trac-8908)\n\tdiv.style.backgroundClip = \"content-box\";\n\tdiv.cloneNode( true ).style.backgroundClip = \"\";\n\tsupport.clearCloneStyle = div.style.backgroundClip === \"content-box\";\n\n\tjQuery.extend( support, {\n\t\tboxSizingReliable: function() {\n\t\t\tcomputeStyleTests();\n\t\t\treturn boxSizingReliableVal;\n\t\t},\n\t\tpixelBoxStyles: function() {\n\t\t\tcomputeStyleTests();\n\t\t\treturn pixelBoxStylesVal;\n\t\t},\n\t\tpixelPosition: function() {\n\t\t\tcomputeStyleTests();\n\t\t\treturn pixelPositionVal;\n\t\t},\n\t\treliableMarginLeft: function() {\n\t\t\tcomputeStyleTests();\n\t\t\treturn reliableMarginLeftVal;\n\t\t},\n\t\tscrollboxSize: function() {\n\t\t\tcomputeStyleTests();\n\t\t\treturn scrollboxSizeVal;\n\t\t},\n\n\t\t// Support: IE 9 - 11+, Edge 15 - 18+\n\t\t// IE/Edge misreport `getComputedStyle` of table rows with width/height\n\t\t// set in CSS while `offset*` properties report correct values.\n\t\t// Behavior in IE 9 is more subtle than in newer versions & it passes\n\t\t// some versions of this test; make sure not to make it pass there!\n\t\t//\n\t\t// Support: Firefox 70+\n\t\t// Only Firefox includes border widths\n\t\t// in computed dimensions. (gh-4529)\n\t\treliableTrDimensions: function() {\n\t\t\tvar table, tr, trChild, trStyle;\n\t\t\tif ( reliableTrDimensionsVal == null ) {\n\t\t\t\ttable = document.createElement( \"table\" );\n\t\t\t\ttr = document.createElement( \"tr\" );\n\t\t\t\ttrChild = document.createElement( \"div\" );\n\n\t\t\t\ttable.style.cssText = \"position:absolute;left:-11111px;border-collapse:separate\";\n\t\t\t\ttr.style.cssText = \"box-sizing:content-box;border:1px solid\";\n\n\t\t\t\t// Support: Chrome 86+\n\t\t\t\t// Height set through cssText does not get applied.\n\t\t\t\t// Computed height then comes back as 0.\n\t\t\t\ttr.style.height = \"1px\";\n\t\t\t\ttrChild.style.height = \"9px\";\n\n\t\t\t\t// Support: Android 8 Chrome 86+\n\t\t\t\t// In our bodyBackground.html iframe,\n\t\t\t\t// display for all div elements is set to \"inline\",\n\t\t\t\t// which causes a problem only in Android 8 Chrome 86.\n\t\t\t\t// Ensuring the div is `display: block`\n\t\t\t\t// gets around this issue.\n\t\t\t\ttrChild.style.display = \"block\";\n\n\t\t\t\tdocumentElement\n\t\t\t\t\t.appendChild( table )\n\t\t\t\t\t.appendChild( tr )\n\t\t\t\t\t.appendChild( trChild );\n\n\t\t\t\ttrStyle = window.getComputedStyle( tr );\n\t\t\t\treliableTrDimensionsVal = ( parseInt( trStyle.height, 10 ) +\n\t\t\t\t\tparseInt( trStyle.borderTopWidth, 10 ) +\n\t\t\t\t\tparseInt( trStyle.borderBottomWidth, 10 ) ) === tr.offsetHeight;\n\n\t\t\t\tdocumentElement.removeChild( table );\n\t\t\t}\n\t\t\treturn reliableTrDimensionsVal;\n\t\t}\n\t} );\n} )();\n\n\nfunction curCSS( elem, name, computed ) {\n\tvar width, minWidth, maxWidth, ret,\n\t\tisCustomProp = rcustomProp.test( name ),\n\n\t\t// Support: Firefox 51+\n\t\t// Retrieving style before computed somehow\n\t\t// fixes an issue with getting wrong values\n\t\t// on detached elements\n\t\tstyle = elem.style;\n\n\tcomputed = computed || getStyles( elem );\n\n\t// getPropertyValue is needed for:\n\t//   .css('filter') (IE 9 only, trac-12537)\n\t//   .css('--customProperty) (gh-3144)\n\tif ( computed ) {\n\n\t\t// Support: IE <=9 - 11+\n\t\t// IE only supports `\"float\"` in `getPropertyValue`; in computed styles\n\t\t// it's only available as `\"cssFloat\"`. We no longer modify properties\n\t\t// sent to `.css()` apart from camelCasing, so we need to check both.\n\t\t// Normally, this would create difference in behavior: if\n\t\t// `getPropertyValue` returns an empty string, the value returned\n\t\t// by `.css()` would be `undefined`. This is usually the case for\n\t\t// disconnected elements. However, in IE even disconnected elements\n\t\t// with no styles return `\"none\"` for `getPropertyValue( \"float\" )`\n\t\tret = computed.getPropertyValue( name ) || computed[ name ];\n\n\t\tif ( isCustomProp && ret ) {\n\n\t\t\t// Support: Firefox 105+, Chrome <=105+\n\t\t\t// Spec requires trimming whitespace for custom properties (gh-4926).\n\t\t\t// Firefox only trims leading whitespace. Chrome just collapses\n\t\t\t// both leading & trailing whitespace to a single space.\n\t\t\t//\n\t\t\t// Fall back to `undefined` if empty string returned.\n\t\t\t// This collapses a missing definition with property defined\n\t\t\t// and set to an empty string but there's no standard API\n\t\t\t// allowing us to differentiate them without a performance penalty\n\t\t\t// and returning `undefined` aligns with older jQuery.\n\t\t\t//\n\t\t\t// rtrimCSS treats U+000D CARRIAGE RETURN and U+000C FORM FEED\n\t\t\t// as whitespace while CSS does not, but this is not a problem\n\t\t\t// because CSS preprocessing replaces them with U+000A LINE FEED\n\t\t\t// (which *is* CSS whitespace)\n\t\t\t// https://www.w3.org/TR/css-syntax-3/#input-preprocessing\n\t\t\tret = ret.replace( rtrimCSS, \"$1\" ) || undefined;\n\t\t}\n\n\t\tif ( ret === \"\" && !isAttached( elem ) ) {\n\t\t\tret = jQuery.style( elem, name );\n\t\t}\n\n\t\t// A tribute to the \"awesome hack by Dean Edwards\"\n\t\t// Android Browser returns percentage for some values,\n\t\t// but width seems to be reliably pixels.\n\t\t// This is against the CSSOM draft spec:\n\t\t// https://drafts.csswg.org/cssom/#resolved-values\n\t\tif ( !support.pixelBoxStyles() && rnumnonpx.test( ret ) && rboxStyle.test( name ) ) {\n\n\t\t\t// Remember the original values\n\t\t\twidth = style.width;\n\t\t\tminWidth = style.minWidth;\n\t\t\tmaxWidth = style.maxWidth;\n\n\t\t\t// Put in the new values to get a computed value out\n\t\t\tstyle.minWidth = style.maxWidth = style.width = ret;\n\t\t\tret = computed.width;\n\n\t\t\t// Revert the changed values\n\t\t\tstyle.width = width;\n\t\t\tstyle.minWidth = minWidth;\n\t\t\tstyle.maxWidth = maxWidth;\n\t\t}\n\t}\n\n\treturn ret !== undefined ?\n\n\t\t// Support: IE <=9 - 11 only\n\t\t// IE returns zIndex value as an integer.\n\t\tret + \"\" :\n\t\tret;\n}\n\n\nfunction addGetHookIf( conditionFn, hookFn ) {\n\n\t// Define the hook, we'll check on the first run if it's really needed.\n\treturn {\n\t\tget: function() {\n\t\t\tif ( conditionFn() ) {\n\n\t\t\t\t// Hook not needed (or it's not possible to use it due\n\t\t\t\t// to missing dependency), remove it.\n\t\t\t\tdelete this.get;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Hook needed; redefine it so that the support test is not executed again.\n\t\t\treturn ( this.get = hookFn ).apply( this, arguments );\n\t\t}\n\t};\n}\n\n\nvar cssPrefixes = [ \"Webkit\", \"Moz\", \"ms\" ],\n\temptyStyle = document.createElement( \"div\" ).style,\n\tvendorProps = {};\n\n// Return a vendor-prefixed property or undefined\nfunction vendorPropName( name ) {\n\n\t// Check for vendor prefixed names\n\tvar capName = name[ 0 ].toUpperCase() + name.slice( 1 ),\n\t\ti = cssPrefixes.length;\n\n\twhile ( i-- ) {\n\t\tname = cssPrefixes[ i ] + capName;\n\t\tif ( name in emptyStyle ) {\n\t\t\treturn name;\n\t\t}\n\t}\n}\n\n// Return a potentially-mapped jQuery.cssProps or vendor prefixed property\nfunction finalPropName( name ) {\n\tvar final = jQuery.cssProps[ name ] || vendorProps[ name ];\n\n\tif ( final ) {\n\t\treturn final;\n\t}\n\tif ( name in emptyStyle ) {\n\t\treturn name;\n\t}\n\treturn vendorProps[ name ] = vendorPropName( name ) || name;\n}\n\n\nvar\n\n\t// Swappable if display is none or starts with table\n\t// except \"table\", \"table-cell\", or \"table-caption\"\n\t// See here for display values: https://developer.mozilla.org/en-US/docs/CSS/display\n\trdisplayswap = /^(none|table(?!-c[ea]).+)/,\n\tcssShow = { position: \"absolute\", visibility: \"hidden\", display: \"block\" },\n\tcssNormalTransform = {\n\t\tletterSpacing: \"0\",\n\t\tfontWeight: \"400\"\n\t};\n\nfunction setPositiveNumber( _elem, value, subtract ) {\n\n\t// Any relative (+/-) values have already been\n\t// normalized at this point\n\tvar matches = rcssNum.exec( value );\n\treturn matches ?\n\n\t\t// Guard against undefined \"subtract\", e.g., when used as in cssHooks\n\t\tMath.max( 0, matches[ 2 ] - ( subtract || 0 ) ) + ( matches[ 3 ] || \"px\" ) :\n\t\tvalue;\n}\n\nfunction boxModelAdjustment( elem, dimension, box, isBorderBox, styles, computedVal ) {\n\tvar i = dimension === \"width\" ? 1 : 0,\n\t\textra = 0,\n\t\tdelta = 0,\n\t\tmarginDelta = 0;\n\n\t// Adjustment may not be necessary\n\tif ( box === ( isBorderBox ? \"border\" : \"content\" ) ) {\n\t\treturn 0;\n\t}\n\n\tfor ( ; i < 4; i += 2 ) {\n\n\t\t// Both box models exclude margin\n\t\t// Count margin delta separately to only add it after scroll gutter adjustment.\n\t\t// This is needed to make negative margins work with `outerHeight( true )` (gh-3982).\n\t\tif ( box === \"margin\" ) {\n\t\t\tmarginDelta += jQuery.css( elem, box + cssExpand[ i ], true, styles );\n\t\t}\n\n\t\t// If we get here with a content-box, we're seeking \"padding\" or \"border\" or \"margin\"\n\t\tif ( !isBorderBox ) {\n\n\t\t\t// Add padding\n\t\t\tdelta += jQuery.css( elem, \"padding\" + cssExpand[ i ], true, styles );\n\n\t\t\t// For \"border\" or \"margin\", add border\n\t\t\tif ( box !== \"padding\" ) {\n\t\t\t\tdelta += jQuery.css( elem, \"border\" + cssExpand[ i ] + \"Width\", true, styles );\n\n\t\t\t// But still keep track of it otherwise\n\t\t\t} else {\n\t\t\t\textra += jQuery.css( elem, \"border\" + cssExpand[ i ] + \"Width\", true, styles );\n\t\t\t}\n\n\t\t// If we get here with a border-box (content + padding + border), we're seeking \"content\" or\n\t\t// \"padding\" or \"margin\"\n\t\t} else {\n\n\t\t\t// For \"content\", subtract padding\n\t\t\tif ( box === \"content\" ) {\n\t\t\t\tdelta -= jQuery.css( elem, \"padding\" + cssExpand[ i ], true, styles );\n\t\t\t}\n\n\t\t\t// For \"content\" or \"padding\", subtract border\n\t\t\tif ( box !== \"margin\" ) {\n\t\t\t\tdelta -= jQuery.css( elem, \"border\" + cssExpand[ i ] + \"Width\", true, styles );\n\t\t\t}\n\t\t}\n\t}\n\n\t// Account for positive content-box scroll gutter when requested by providing computedVal\n\tif ( !isBorderBox && computedVal >= 0 ) {\n\n\t\t// offsetWidth/offsetHeight is a rounded sum of content, padding, scroll gutter, and border\n\t\t// Assuming integer scroll gutter, subtract the rest and round down\n\t\tdelta += Math.max( 0, Math.ceil(\n\t\t\telem[ \"offset\" + dimension[ 0 ].toUpperCase() + dimension.slice( 1 ) ] -\n\t\t\tcomputedVal -\n\t\t\tdelta -\n\t\t\textra -\n\t\t\t0.5\n\n\t\t// If offsetWidth/offsetHeight is unknown, then we can't determine content-box scroll gutter\n\t\t// Use an explicit zero to avoid NaN (gh-3964)\n\t\t) ) || 0;\n\t}\n\n\treturn delta + marginDelta;\n}\n\nfunction getWidthOrHeight( elem, dimension, extra ) {\n\n\t// Start with computed style\n\tvar styles = getStyles( elem ),\n\n\t\t// To avoid forcing a reflow, only fetch boxSizing if we need it (gh-4322).\n\t\t// Fake content-box until we know it's needed to know the true value.\n\t\tboxSizingNeeded = !support.boxSizingReliable() || extra,\n\t\tisBorderBox = boxSizingNeeded &&\n\t\t\tjQuery.css( elem, \"boxSizing\", false, styles ) === \"border-box\",\n\t\tvalueIsBorderBox = isBorderBox,\n\n\t\tval = curCSS( elem, dimension, styles ),\n\t\toffsetProp = \"offset\" + dimension[ 0 ].toUpperCase() + dimension.slice( 1 );\n\n\t// Support: Firefox <=54\n\t// Return a confounding non-pixel value or feign ignorance, as appropriate.\n\tif ( rnumnonpx.test( val ) ) {\n\t\tif ( !extra ) {\n\t\t\treturn val;\n\t\t}\n\t\tval = \"auto\";\n\t}\n\n\n\t// Support: IE 9 - 11 only\n\t// Use offsetWidth/offsetHeight for when box sizing is unreliable.\n\t// In those cases, the computed value can be trusted to be border-box.\n\tif ( ( !support.boxSizingReliable() && isBorderBox ||\n\n\t\t// Support: IE 10 - 11+, Edge 15 - 18+\n\t\t// IE/Edge misreport `getComputedStyle` of table rows with width/height\n\t\t// set in CSS while `offset*` properties report correct values.\n\t\t// Interestingly, in some cases IE 9 doesn't suffer from this issue.\n\t\t!support.reliableTrDimensions() && nodeName( elem, \"tr\" ) ||\n\n\t\t// Fall back to offsetWidth/offsetHeight when value is \"auto\"\n\t\t// This happens for inline elements with no explicit setting (gh-3571)\n\t\tval === \"auto\" ||\n\n\t\t// Support: Android <=4.1 - 4.3 only\n\t\t// Also use offsetWidth/offsetHeight for misreported inline dimensions (gh-3602)\n\t\t!parseFloat( val ) && jQuery.css( elem, \"display\", false, styles ) === \"inline\" ) &&\n\n\t\t// Make sure the element is visible & connected\n\t\telem.getClientRects().length ) {\n\n\t\tisBorderBox = jQuery.css( elem, \"boxSizing\", false, styles ) === \"border-box\";\n\n\t\t// Where available, offsetWidth/offsetHeight approximate border box dimensions.\n\t\t// Where not available (e.g., SVG), assume unreliable box-sizing and interpret the\n\t\t// retrieved value as a content box dimension.\n\t\tvalueIsBorderBox = offsetProp in elem;\n\t\tif ( valueIsBorderBox ) {\n\t\t\tval = elem[ offsetProp ];\n\t\t}\n\t}\n\n\t// Normalize \"\" and auto\n\tval = parseFloat( val ) || 0;\n\n\t// Adjust for the element's box model\n\treturn ( val +\n\t\tboxModelAdjustment(\n\t\t\telem,\n\t\t\tdimension,\n\t\t\textra || ( isBorderBox ? \"border\" : \"content\" ),\n\t\t\tvalueIsBorderBox,\n\t\t\tstyles,\n\n\t\t\t// Provide the current computed size to request scroll gutter calculation (gh-3589)\n\t\t\tval\n\t\t)\n\t) + \"px\";\n}\n\njQuery.extend( {\n\n\t// Add in style property hooks for overriding the default\n\t// behavior of getting and setting a style property\n\tcssHooks: {\n\t\topacity: {\n\t\t\tget: function( elem, computed ) {\n\t\t\t\tif ( computed ) {\n\n\t\t\t\t\t// We should always get a number back from opacity\n\t\t\t\t\tvar ret = curCSS( elem, \"opacity\" );\n\t\t\t\t\treturn ret === \"\" ? \"1\" : ret;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\t// Don't automatically add \"px\" to these possibly-unitless properties\n\tcssNumber: {\n\t\tanimationIterationCount: true,\n\t\taspectRatio: true,\n\t\tborderImageSlice: true,\n\t\tcolumnCount: true,\n\t\tflexGrow: true,\n\t\tflexShrink: true,\n\t\tfontWeight: true,\n\t\tgridArea: true,\n\t\tgridColumn: true,\n\t\tgridColumnEnd: true,\n\t\tgridColumnStart: true,\n\t\tgridRow: true,\n\t\tgridRowEnd: true,\n\t\tgridRowStart: true,\n\t\tlineHeight: true,\n\t\topacity: true,\n\t\torder: true,\n\t\torphans: true,\n\t\tscale: true,\n\t\twidows: true,\n\t\tzIndex: true,\n\t\tzoom: true,\n\n\t\t// SVG-related\n\t\tfillOpacity: true,\n\t\tfloodOpacity: true,\n\t\tstopOpacity: true,\n\t\tstrokeMiterlimit: true,\n\t\tstrokeOpacity: true\n\t},\n\n\t// Add in properties whose names you wish to fix before\n\t// setting or getting the value\n\tcssProps: {},\n\n\t// Get and set the style property on a DOM Node\n\tstyle: function( elem, name, value, extra ) {\n\n\t\t// Don't set styles on text and comment nodes\n\t\tif ( !elem || elem.nodeType === 3 || elem.nodeType === 8 || !elem.style ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Make sure that we're working with the right name\n\t\tvar ret, type, hooks,\n\t\t\torigName = camelCase( name ),\n\t\t\tisCustomProp = rcustomProp.test( name ),\n\t\t\tstyle = elem.style;\n\n\t\t// Make sure that we're working with the right name. We don't\n\t\t// want to query the value if it is a CSS custom property\n\t\t// since they are user-defined.\n\t\tif ( !isCustomProp ) {\n\t\t\tname = finalPropName( origName );\n\t\t}\n\n\t\t// Gets hook for the prefixed version, then unprefixed version\n\t\thooks = jQuery.cssHooks[ name ] || jQuery.cssHooks[ origName ];\n\n\t\t// Check if we're setting a value\n\t\tif ( value !== undefined ) {\n\t\t\ttype = typeof value;\n\n\t\t\t// Convert \"+=\" or \"-=\" to relative numbers (trac-7345)\n\t\t\tif ( type === \"string\" && ( ret = rcssNum.exec( value ) ) && ret[ 1 ] ) {\n\t\t\t\tvalue = adjustCSS( elem, name, ret );\n\n\t\t\t\t// Fixes bug trac-9237\n\t\t\t\ttype = \"number\";\n\t\t\t}\n\n\t\t\t// Make sure that null and NaN values aren't set (trac-7116)\n\t\t\tif ( value == null || value !== value ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// If a number was passed in, add the unit (except for certain CSS properties)\n\t\t\t// The isCustomProp check can be removed in jQuery 4.0 when we only auto-append\n\t\t\t// \"px\" to a few hardcoded values.\n\t\t\tif ( type === \"number\" && !isCustomProp ) {\n\t\t\t\tvalue += ret && ret[ 3 ] || ( jQuery.cssNumber[ origName ] ? \"\" : \"px\" );\n\t\t\t}\n\n\t\t\t// background-* props affect original clone's values\n\t\t\tif ( !support.clearCloneStyle && value === \"\" && name.indexOf( \"background\" ) === 0 ) {\n\t\t\t\tstyle[ name ] = \"inherit\";\n\t\t\t}\n\n\t\t\t// If a hook was provided, use that value, otherwise just set the specified value\n\t\t\tif ( !hooks || !( \"set\" in hooks ) ||\n\t\t\t\t( value = hooks.set( elem, value, extra ) ) !== undefined ) {\n\n\t\t\t\tif ( isCustomProp ) {\n\t\t\t\t\tstyle.setProperty( name, value );\n\t\t\t\t} else {\n\t\t\t\t\tstyle[ name ] = value;\n\t\t\t\t}\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// If a hook was provided get the non-computed value from there\n\t\t\tif ( hooks && \"get\" in hooks &&\n\t\t\t\t( ret = hooks.get( elem, false, extra ) ) !== undefined ) {\n\n\t\t\t\treturn ret;\n\t\t\t}\n\n\t\t\t// Otherwise just get the value from the style object\n\t\t\treturn style[ name ];\n\t\t}\n\t},\n\n\tcss: function( elem, name, extra, styles ) {\n\t\tvar val, num, hooks,\n\t\t\torigName = camelCase( name ),\n\t\t\tisCustomProp = rcustomProp.test( name );\n\n\t\t// Make sure that we're working with the right name. We don't\n\t\t// want to modify the value if it is a CSS custom property\n\t\t// since they are user-defined.\n\t\tif ( !isCustomProp ) {\n\t\t\tname = finalPropName( origName );\n\t\t}\n\n\t\t// Try prefixed name followed by the unprefixed name\n\t\thooks = jQuery.cssHooks[ name ] || jQuery.cssHooks[ origName ];\n\n\t\t// If a hook was provided get the computed value from there\n\t\tif ( hooks && \"get\" in hooks ) {\n\t\t\tval = hooks.get( elem, true, extra );\n\t\t}\n\n\t\t// Otherwise, if a way to get the computed value exists, use that\n\t\tif ( val === undefined ) {\n\t\t\tval = curCSS( elem, name, styles );\n\t\t}\n\n\t\t// Convert \"normal\" to computed value\n\t\tif ( val === \"normal\" && name in cssNormalTransform ) {\n\t\t\tval = cssNormalTransform[ name ];\n\t\t}\n\n\t\t// Make numeric if forced or a qualifier was provided and val looks numeric\n\t\tif ( extra === \"\" || extra ) {\n\t\t\tnum = parseFloat( val );\n\t\t\treturn extra === true || isFinite( num ) ? num || 0 : val;\n\t\t}\n\n\t\treturn val;\n\t}\n} );\n\njQuery.each( [ \"height\", \"width\" ], function( _i, dimension ) {\n\tjQuery.cssHooks[ dimension ] = {\n\t\tget: function( elem, computed, extra ) {\n\t\t\tif ( computed ) {\n\n\t\t\t\t// Certain elements can have dimension info if we invisibly show them\n\t\t\t\t// but it must have a current display style that would benefit\n\t\t\t\treturn rdisplayswap.test( jQuery.css( elem, \"display\" ) ) &&\n\n\t\t\t\t\t// Support: Safari 8+\n\t\t\t\t\t// Table columns in Safari have non-zero offsetWidth & zero\n\t\t\t\t\t// getBoundingClientRect().width unless display is changed.\n\t\t\t\t\t// Support: IE <=11 only\n\t\t\t\t\t// Running getBoundingClientRect on a disconnected node\n\t\t\t\t\t// in IE throws an error.\n\t\t\t\t\t( !elem.getClientRects().length || !elem.getBoundingClientRect().width ) ?\n\t\t\t\t\tswap( elem, cssShow, function() {\n\t\t\t\t\t\treturn getWidthOrHeight( elem, dimension, extra );\n\t\t\t\t\t} ) :\n\t\t\t\t\tgetWidthOrHeight( elem, dimension, extra );\n\t\t\t}\n\t\t},\n\n\t\tset: function( elem, value, extra ) {\n\t\t\tvar matches,\n\t\t\t\tstyles = getStyles( elem ),\n\n\t\t\t\t// Only read styles.position if the test has a chance to fail\n\t\t\t\t// to avoid forcing a reflow.\n\t\t\t\tscrollboxSizeBuggy = !support.scrollboxSize() &&\n\t\t\t\t\tstyles.position === \"absolute\",\n\n\t\t\t\t// To avoid forcing a reflow, only fetch boxSizing if we need it (gh-3991)\n\t\t\t\tboxSizingNeeded = scrollboxSizeBuggy || extra,\n\t\t\t\tisBorderBox = boxSizingNeeded &&\n\t\t\t\t\tjQuery.css( elem, \"boxSizing\", false, styles ) === \"border-box\",\n\t\t\t\tsubtract = extra ?\n\t\t\t\t\tboxModelAdjustment(\n\t\t\t\t\t\telem,\n\t\t\t\t\t\tdimension,\n\t\t\t\t\t\textra,\n\t\t\t\t\t\tisBorderBox,\n\t\t\t\t\t\tstyles\n\t\t\t\t\t) :\n\t\t\t\t\t0;\n\n\t\t\t// Account for unreliable border-box dimensions by comparing offset* to computed and\n\t\t\t// faking a content-box to get border and padding (gh-3699)\n\t\t\tif ( isBorderBox && scrollboxSizeBuggy ) {\n\t\t\t\tsubtract -= Math.ceil(\n\t\t\t\t\telem[ \"offset\" + dimension[ 0 ].toUpperCase() + dimension.slice( 1 ) ] -\n\t\t\t\t\tparseFloat( styles[ dimension ] ) -\n\t\t\t\t\tboxModelAdjustment( elem, dimension, \"border\", false, styles ) -\n\t\t\t\t\t0.5\n\t\t\t\t);\n\t\t\t}\n\n\t\t\t// Convert to pixels if value adjustment is needed\n\t\t\tif ( subtract && ( matches = rcssNum.exec( value ) ) &&\n\t\t\t\t( matches[ 3 ] || \"px\" ) !== \"px\" ) {\n\n\t\t\t\telem.style[ dimension ] = value;\n\t\t\t\tvalue = jQuery.css( elem, dimension );\n\t\t\t}\n\n\t\t\treturn setPositiveNumber( elem, value, subtract );\n\t\t}\n\t};\n} );\n\njQuery.cssHooks.marginLeft = addGetHookIf( support.reliableMarginLeft,\n\tfunction( elem, computed ) {\n\t\tif ( computed ) {\n\t\t\treturn ( parseFloat( curCSS( elem, \"marginLeft\" ) ) ||\n\t\t\t\telem.getBoundingClientRect().left -\n\t\t\t\t\tswap( elem, { marginLeft: 0 }, function() {\n\t\t\t\t\t\treturn elem.getBoundingClientRect().left;\n\t\t\t\t\t} )\n\t\t\t) + \"px\";\n\t\t}\n\t}\n);\n\n// These hooks are used by animate to expand properties\njQuery.each( {\n\tmargin: \"\",\n\tpadding: \"\",\n\tborder: \"Width\"\n}, function( prefix, suffix ) {\n\tjQuery.cssHooks[ prefix + suffix ] = {\n\t\texpand: function( value ) {\n\t\t\tvar i = 0,\n\t\t\t\texpanded = {},\n\n\t\t\t\t// Assumes a single number if not a string\n\t\t\t\tparts = typeof value === \"string\" ? value.split( \" \" ) : [ value ];\n\n\t\t\tfor ( ; i < 4; i++ ) {\n\t\t\t\texpanded[ prefix + cssExpand[ i ] + suffix ] =\n\t\t\t\t\tparts[ i ] || parts[ i - 2 ] || parts[ 0 ];\n\t\t\t}\n\n\t\t\treturn expanded;\n\t\t}\n\t};\n\n\tif ( prefix !== \"margin\" ) {\n\t\tjQuery.cssHooks[ prefix + suffix ].set = setPositiveNumber;\n\t}\n} );\n\njQuery.fn.extend( {\n\tcss: function( name, value ) {\n\t\treturn access( this, function( elem, name, value ) {\n\t\t\tvar styles, len,\n\t\t\t\tmap = {},\n\t\t\t\ti = 0;\n\n\t\t\tif ( Array.isArray( name ) ) {\n\t\t\t\tstyles = getStyles( elem );\n\t\t\t\tlen = name.length;\n\n\t\t\t\tfor ( ; i < len; i++ ) {\n\t\t\t\t\tmap[ name[ i ] ] = jQuery.css( elem, name[ i ], false, styles );\n\t\t\t\t}\n\n\t\t\t\treturn map;\n\t\t\t}\n\n\t\t\treturn value !== undefined ?\n\t\t\t\tjQuery.style( elem, name, value ) :\n\t\t\t\tjQuery.css( elem, name );\n\t\t}, name, value, arguments.length > 1 );\n\t}\n} );\n\n\nfunction Tween( elem, options, prop, end, easing ) {\n\treturn new Tween.prototype.init( elem, options, prop, end, easing );\n}\njQuery.Tween = Tween;\n\nTween.prototype = {\n\tconstructor: Tween,\n\tinit: function( elem, options, prop, end, easing, unit ) {\n\t\tthis.elem = elem;\n\t\tthis.prop = prop;\n\t\tthis.easing = easing || jQuery.easing._default;\n\t\tthis.options = options;\n\t\tthis.start = this.now = this.cur();\n\t\tthis.end = end;\n\t\tthis.unit = unit || ( jQuery.cssNumber[ prop ] ? \"\" : \"px\" );\n\t},\n\tcur: function() {\n\t\tvar hooks = Tween.propHooks[ this.prop ];\n\n\t\treturn hooks && hooks.get ?\n\t\t\thooks.get( this ) :\n\t\t\tTween.propHooks._default.get( this );\n\t},\n\trun: function( percent ) {\n\t\tvar eased,\n\t\t\thooks = Tween.propHooks[ this.prop ];\n\n\t\tif ( this.options.duration ) {\n\t\t\tthis.pos = eased = jQuery.easing[ this.easing ](\n\t\t\t\tpercent, this.options.duration * percent, 0, 1, this.options.duration\n\t\t\t);\n\t\t} else {\n\t\t\tthis.pos = eased = percent;\n\t\t}\n\t\tthis.now = ( this.end - this.start ) * eased + this.start;\n\n\t\tif ( this.options.step ) {\n\t\t\tthis.options.step.call( this.elem, this.now, this );\n\t\t}\n\n\t\tif ( hooks && hooks.set ) {\n\t\t\thooks.set( this );\n\t\t} else {\n\t\t\tTween.propHooks._default.set( this );\n\t\t}\n\t\treturn this;\n\t}\n};\n\nTween.prototype.init.prototype = Tween.prototype;\n\nTween.propHooks = {\n\t_default: {\n\t\tget: function( tween ) {\n\t\t\tvar result;\n\n\t\t\t// Use a property on the element directly when it is not a DOM element,\n\t\t\t// or when there is no matching style property that exists.\n\t\t\tif ( tween.elem.nodeType !== 1 ||\n\t\t\t\ttween.elem[ tween.prop ] != null && tween.elem.style[ tween.prop ] == null ) {\n\t\t\t\treturn tween.elem[ tween.prop ];\n\t\t\t}\n\n\t\t\t// Passing an empty string as a 3rd parameter to .css will automatically\n\t\t\t// attempt a parseFloat and fallback to a string if the parse fails.\n\t\t\t// Simple values such as \"10px\" are parsed to Float;\n\t\t\t// complex values such as \"rotate(1rad)\" are returned as-is.\n\t\t\tresult = jQuery.css( tween.elem, tween.prop, \"\" );\n\n\t\t\t// Empty strings, null, undefined and \"auto\" are converted to 0.\n\t\t\treturn !result || result === \"auto\" ? 0 : result;\n\t\t},\n\t\tset: function( tween ) {\n\n\t\t\t// Use step hook for back compat.\n\t\t\t// Use cssHook if its there.\n\t\t\t// Use .style if available and use plain properties where available.\n\t\t\tif ( jQuery.fx.step[ tween.prop ] ) {\n\t\t\t\tjQuery.fx.step[ tween.prop ]( tween );\n\t\t\t} else if ( tween.elem.nodeType === 1 && (\n\t\t\t\tjQuery.cssHooks[ tween.prop ] ||\n\t\t\t\t\ttween.elem.style[ finalPropName( tween.prop ) ] != null ) ) {\n\t\t\t\tjQuery.style( tween.elem, tween.prop, tween.now + tween.unit );\n\t\t\t} else {\n\t\t\t\ttween.elem[ tween.prop ] = tween.now;\n\t\t\t}\n\t\t}\n\t}\n};\n\n// Support: IE <=9 only\n// Panic based approach to setting things on disconnected nodes\nTween.propHooks.scrollTop = Tween.propHooks.scrollLeft = {\n\tset: function( tween ) {\n\t\tif ( tween.elem.nodeType && tween.elem.parentNode ) {\n\t\t\ttween.elem[ tween.prop ] = tween.now;\n\t\t}\n\t}\n};\n\njQuery.easing = {\n\tlinear: function( p ) {\n\t\treturn p;\n\t},\n\tswing: function( p ) {\n\t\treturn 0.5 - Math.cos( p * Math.PI ) / 2;\n\t},\n\t_default: \"swing\"\n};\n\njQuery.fx = Tween.prototype.init;\n\n// Back compat <1.8 extension point\njQuery.fx.step = {};\n\n\n\n\nvar\n\tfxNow, inProgress,\n\trfxtypes = /^(?:toggle|show|hide)$/,\n\trrun = /queueHooks$/;\n\nfunction schedule() {\n\tif ( inProgress ) {\n\t\tif ( document.hidden === false && window.requestAnimationFrame ) {\n\t\t\twindow.requestAnimationFrame( schedule );\n\t\t} else {\n\t\t\twindow.setTimeout( schedule, jQuery.fx.interval );\n\t\t}\n\n\t\tjQuery.fx.tick();\n\t}\n}\n\n// Animations created synchronously will run synchronously\nfunction createFxNow() {\n\twindow.setTimeout( function() {\n\t\tfxNow = undefined;\n\t} );\n\treturn ( fxNow = Date.now() );\n}\n\n// Generate parameters to create a standard animation\nfunction genFx( type, includeWidth ) {\n\tvar which,\n\t\ti = 0,\n\t\tattrs = { height: type };\n\n\t// If we include width, step value is 1 to do all cssExpand values,\n\t// otherwise step value is 2 to skip over Left and Right\n\tincludeWidth = includeWidth ? 1 : 0;\n\tfor ( ; i < 4; i += 2 - includeWidth ) {\n\t\twhich = cssExpand[ i ];\n\t\tattrs[ \"margin\" + which ] = attrs[ \"padding\" + which ] = type;\n\t}\n\n\tif ( includeWidth ) {\n\t\tattrs.opacity = attrs.width = type;\n\t}\n\n\treturn attrs;\n}\n\nfunction createTween( value, prop, animation ) {\n\tvar tween,\n\t\tcollection = ( Animation.tweeners[ prop ] || [] ).concat( Animation.tweeners[ \"*\" ] ),\n\t\tindex = 0,\n\t\tlength = collection.length;\n\tfor ( ; index < length; index++ ) {\n\t\tif ( ( tween = collection[ index ].call( animation, prop, value ) ) ) {\n\n\t\t\t// We're done with this property\n\t\t\treturn tween;\n\t\t}\n\t}\n}\n\nfunction defaultPrefilter( elem, props, opts ) {\n\tvar prop, value, toggle, hooks, oldfire, propTween, restoreDisplay, display,\n\t\tisBox = \"width\" in props || \"height\" in props,\n\t\tanim = this,\n\t\torig = {},\n\t\tstyle = elem.style,\n\t\thidden = elem.nodeType && isHiddenWithinTree( elem ),\n\t\tdataShow = dataPriv.get( elem, \"fxshow\" );\n\n\t// Queue-skipping animations hijack the fx hooks\n\tif ( !opts.queue ) {\n\t\thooks = jQuery._queueHooks( elem, \"fx\" );\n\t\tif ( hooks.unqueued == null ) {\n\t\t\thooks.unqueued = 0;\n\t\t\toldfire = hooks.empty.fire;\n\t\t\thooks.empty.fire = function() {\n\t\t\t\tif ( !hooks.unqueued ) {\n\t\t\t\t\toldfire();\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t\thooks.unqueued++;\n\n\t\tanim.always( function() {\n\n\t\t\t// Ensure the complete handler is called before this completes\n\t\t\tanim.always( function() {\n\t\t\t\thooks.unqueued--;\n\t\t\t\tif ( !jQuery.queue( elem, \"fx\" ).length ) {\n\t\t\t\t\thooks.empty.fire();\n\t\t\t\t}\n\t\t\t} );\n\t\t} );\n\t}\n\n\t// Detect show/hide animations\n\tfor ( prop in props ) {\n\t\tvalue = props[ prop ];\n\t\tif ( rfxtypes.test( value ) ) {\n\t\t\tdelete props[ prop ];\n\t\t\ttoggle = toggle || value === \"toggle\";\n\t\t\tif ( value === ( hidden ? \"hide\" : \"show\" ) ) {\n\n\t\t\t\t// Pretend to be hidden if this is a \"show\" and\n\t\t\t\t// there is still data from a stopped show/hide\n\t\t\t\tif ( value === \"show\" && dataShow && dataShow[ prop ] !== undefined ) {\n\t\t\t\t\thidden = true;\n\n\t\t\t\t// Ignore all other no-op show/hide data\n\t\t\t\t} else {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t}\n\t\t\torig[ prop ] = dataShow && dataShow[ prop ] || jQuery.style( elem, prop );\n\t\t}\n\t}\n\n\t// Bail out if this is a no-op like .hide().hide()\n\tpropTween = !jQuery.isEmptyObject( props );\n\tif ( !propTween && jQuery.isEmptyObject( orig ) ) {\n\t\treturn;\n\t}\n\n\t// Restrict \"overflow\" and \"display\" styles during box animations\n\tif ( isBox && elem.nodeType === 1 ) {\n\n\t\t// Support: IE <=9 - 11, Edge 12 - 15\n\t\t// Record all 3 overflow attributes because IE does not infer the shorthand\n\t\t// from identically-valued overflowX and overflowY and Edge just mirrors\n\t\t// the overflowX value there.\n\t\topts.overflow = [ style.overflow, style.overflowX, style.overflowY ];\n\n\t\t// Identify a display type, preferring old show/hide data over the CSS cascade\n\t\trestoreDisplay = dataShow && dataShow.display;\n\t\tif ( restoreDisplay == null ) {\n\t\t\trestoreDisplay = dataPriv.get( elem, \"display\" );\n\t\t}\n\t\tdisplay = jQuery.css( elem, \"display\" );\n\t\tif ( display === \"none\" ) {\n\t\t\tif ( restoreDisplay ) {\n\t\t\t\tdisplay = restoreDisplay;\n\t\t\t} else {\n\n\t\t\t\t// Get nonempty value(s) by temporarily forcing visibility\n\t\t\t\tshowHide( [ elem ], true );\n\t\t\t\trestoreDisplay = elem.style.display || restoreDisplay;\n\t\t\t\tdisplay = jQuery.css( elem, \"display\" );\n\t\t\t\tshowHide( [ elem ] );\n\t\t\t}\n\t\t}\n\n\t\t// Animate inline elements as inline-block\n\t\tif ( display === \"inline\" || display === \"inline-block\" && restoreDisplay != null ) {\n\t\t\tif ( jQuery.css( elem, \"float\" ) === \"none\" ) {\n\n\t\t\t\t// Restore the original display value at the end of pure show/hide animations\n\t\t\t\tif ( !propTween ) {\n\t\t\t\t\tanim.done( function() {\n\t\t\t\t\t\tstyle.display = restoreDisplay;\n\t\t\t\t\t} );\n\t\t\t\t\tif ( restoreDisplay == null ) {\n\t\t\t\t\t\tdisplay = style.display;\n\t\t\t\t\t\trestoreDisplay = display === \"none\" ? \"\" : display;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tstyle.display = \"inline-block\";\n\t\t\t}\n\t\t}\n\t}\n\n\tif ( opts.overflow ) {\n\t\tstyle.overflow = \"hidden\";\n\t\tanim.always( function() {\n\t\t\tstyle.overflow = opts.overflow[ 0 ];\n\t\t\tstyle.overflowX = opts.overflow[ 1 ];\n\t\t\tstyle.overflowY = opts.overflow[ 2 ];\n\t\t} );\n\t}\n\n\t// Implement show/hide animations\n\tpropTween = false;\n\tfor ( prop in orig ) {\n\n\t\t// General show/hide setup for this element animation\n\t\tif ( !propTween ) {\n\t\t\tif ( dataShow ) {\n\t\t\t\tif ( \"hidden\" in dataShow ) {\n\t\t\t\t\thidden = dataShow.hidden;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tdataShow = dataPriv.access( elem, \"fxshow\", { display: restoreDisplay } );\n\t\t\t}\n\n\t\t\t// Store hidden/visible for toggle so `.stop().toggle()` \"reverses\"\n\t\t\tif ( toggle ) {\n\t\t\t\tdataShow.hidden = !hidden;\n\t\t\t}\n\n\t\t\t// Show elements before animating them\n\t\t\tif ( hidden ) {\n\t\t\t\tshowHide( [ elem ], true );\n\t\t\t}\n\n\t\t\t/* eslint-disable no-loop-func */\n\n\t\t\tanim.done( function() {\n\n\t\t\t\t/* eslint-enable no-loop-func */\n\n\t\t\t\t// The final step of a \"hide\" animation is actually hiding the element\n\t\t\t\tif ( !hidden ) {\n\t\t\t\t\tshowHide( [ elem ] );\n\t\t\t\t}\n\t\t\t\tdataPriv.remove( elem, \"fxshow\" );\n\t\t\t\tfor ( prop in orig ) {\n\t\t\t\t\tjQuery.style( elem, prop, orig[ prop ] );\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\n\t\t// Per-property setup\n\t\tpropTween = createTween( hidden ? dataShow[ prop ] : 0, prop, anim );\n\t\tif ( !( prop in dataShow ) ) {\n\t\t\tdataShow[ prop ] = propTween.start;\n\t\t\tif ( hidden ) {\n\t\t\t\tpropTween.end = propTween.start;\n\t\t\t\tpropTween.start = 0;\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction propFilter( props, specialEasing ) {\n\tvar index, name, easing, value, hooks;\n\n\t// camelCase, specialEasing and expand cssHook pass\n\tfor ( index in props ) {\n\t\tname = camelCase( index );\n\t\teasing = specialEasing[ name ];\n\t\tvalue = props[ index ];\n\t\tif ( Array.isArray( value ) ) {\n\t\t\teasing = value[ 1 ];\n\t\t\tvalue = props[ index ] = value[ 0 ];\n\t\t}\n\n\t\tif ( index !== name ) {\n\t\t\tprops[ name ] = value;\n\t\t\tdelete props[ index ];\n\t\t}\n\n\t\thooks = jQuery.cssHooks[ name ];\n\t\tif ( hooks && \"expand\" in hooks ) {\n\t\t\tvalue = hooks.expand( value );\n\t\t\tdelete props[ name ];\n\n\t\t\t// Not quite $.extend, this won't overwrite existing keys.\n\t\t\t// Reusing 'index' because we have the correct \"name\"\n\t\t\tfor ( index in value ) {\n\t\t\t\tif ( !( index in props ) ) {\n\t\t\t\t\tprops[ index ] = value[ index ];\n\t\t\t\t\tspecialEasing[ index ] = easing;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tspecialEasing[ name ] = easing;\n\t\t}\n\t}\n}\n\nfunction Animation( elem, properties, options ) {\n\tvar result,\n\t\tstopped,\n\t\tindex = 0,\n\t\tlength = Animation.prefilters.length,\n\t\tdeferred = jQuery.Deferred().always( function() {\n\n\t\t\t// Don't match elem in the :animated selector\n\t\t\tdelete tick.elem;\n\t\t} ),\n\t\ttick = function() {\n\t\t\tif ( stopped ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tvar currentTime = fxNow || createFxNow(),\n\t\t\t\tremaining = Math.max( 0, animation.startTime + animation.duration - currentTime ),\n\n\t\t\t\t// Support: Android 2.3 only\n\t\t\t\t// Archaic crash bug won't allow us to use `1 - ( 0.5 || 0 )` (trac-12497)\n\t\t\t\ttemp = remaining / animation.duration || 0,\n\t\t\t\tpercent = 1 - temp,\n\t\t\t\tindex = 0,\n\t\t\t\tlength = animation.tweens.length;\n\n\t\t\tfor ( ; index < length; index++ ) {\n\t\t\t\tanimation.tweens[ index ].run( percent );\n\t\t\t}\n\n\t\t\tdeferred.notifyWith( elem, [ animation, percent, remaining ] );\n\n\t\t\t// If there's more to do, yield\n\t\t\tif ( percent < 1 && length ) {\n\t\t\t\treturn remaining;\n\t\t\t}\n\n\t\t\t// If this was an empty animation, synthesize a final progress notification\n\t\t\tif ( !length ) {\n\t\t\t\tdeferred.notifyWith( elem, [ animation, 1, 0 ] );\n\t\t\t}\n\n\t\t\t// Resolve the animation and report its conclusion\n\t\t\tdeferred.resolveWith( elem, [ animation ] );\n\t\t\treturn false;\n\t\t},\n\t\tanimation = deferred.promise( {\n\t\t\telem: elem,\n\t\t\tprops: jQuery.extend( {}, properties ),\n\t\t\topts: jQuery.extend( true, {\n\t\t\t\tspecialEasing: {},\n\t\t\t\teasing: jQuery.easing._default\n\t\t\t}, options ),\n\t\t\toriginalProperties: properties,\n\t\t\toriginalOptions: options,\n\t\t\tstartTime: fxNow || createFxNow(),\n\t\t\tduration: options.duration,\n\t\t\ttweens: [],\n\t\t\tcreateTween: function( prop, end ) {\n\t\t\t\tvar tween = jQuery.Tween( elem, animation.opts, prop, end,\n\t\t\t\t\tanimation.opts.specialEasing[ prop ] || animation.opts.easing );\n\t\t\t\tanimation.tweens.push( tween );\n\t\t\t\treturn tween;\n\t\t\t},\n\t\t\tstop: function( gotoEnd ) {\n\t\t\t\tvar index = 0,\n\n\t\t\t\t\t// If we are going to the end, we want to run all the tweens\n\t\t\t\t\t// otherwise we skip this part\n\t\t\t\t\tlength = gotoEnd ? animation.tweens.length : 0;\n\t\t\t\tif ( stopped ) {\n\t\t\t\t\treturn this;\n\t\t\t\t}\n\t\t\t\tstopped = true;\n\t\t\t\tfor ( ; index < length; index++ ) {\n\t\t\t\t\tanimation.tweens[ index ].run( 1 );\n\t\t\t\t}\n\n\t\t\t\t// Resolve when we played the last frame; otherwise, reject\n\t\t\t\tif ( gotoEnd ) {\n\t\t\t\t\tdeferred.notifyWith( elem, [ animation, 1, 0 ] );\n\t\t\t\t\tdeferred.resolveWith( elem, [ animation, gotoEnd ] );\n\t\t\t\t} else {\n\t\t\t\t\tdeferred.rejectWith( elem, [ animation, gotoEnd ] );\n\t\t\t\t}\n\t\t\t\treturn this;\n\t\t\t}\n\t\t} ),\n\t\tprops = animation.props;\n\n\tpropFilter( props, animation.opts.specialEasing );\n\n\tfor ( ; index < length; index++ ) {\n\t\tresult = Animation.prefilters[ index ].call( animation, elem, props, animation.opts );\n\t\tif ( result ) {\n\t\t\tif ( isFunction( result.stop ) ) {\n\t\t\t\tjQuery._queueHooks( animation.elem, animation.opts.queue ).stop =\n\t\t\t\t\tresult.stop.bind( result );\n\t\t\t}\n\t\t\treturn result;\n\t\t}\n\t}\n\n\tjQuery.map( props, createTween, animation );\n\n\tif ( isFunction( animation.opts.start ) ) {\n\t\tanimation.opts.start.call( elem, animation );\n\t}\n\n\t// Attach callbacks from options\n\tanimation\n\t\t.progress( animation.opts.progress )\n\t\t.done( animation.opts.done, animation.opts.complete )\n\t\t.fail( animation.opts.fail )\n\t\t.always( animation.opts.always );\n\n\tjQuery.fx.timer(\n\t\tjQuery.extend( tick, {\n\t\t\telem: elem,\n\t\t\tanim: animation,\n\t\t\tqueue: animation.opts.queue\n\t\t} )\n\t);\n\n\treturn animation;\n}\n\njQuery.Animation = jQuery.extend( Animation, {\n\n\ttweeners: {\n\t\t\"*\": [ function( prop, value ) {\n\t\t\tvar tween = this.createTween( prop, value );\n\t\t\tadjustCSS( tween.elem, prop, rcssNum.exec( value ), tween );\n\t\t\treturn tween;\n\t\t} ]\n\t},\n\n\ttweener: function( props, callback ) {\n\t\tif ( isFunction( props ) ) {\n\t\t\tcallback = props;\n\t\t\tprops = [ \"*\" ];\n\t\t} else {\n\t\t\tprops = props.match( rnothtmlwhite );\n\t\t}\n\n\t\tvar prop,\n\t\t\tindex = 0,\n\t\t\tlength = props.length;\n\n\t\tfor ( ; index < length; index++ ) {\n\t\t\tprop = props[ index ];\n\t\t\tAnimation.tweeners[ prop ] = Animation.tweeners[ prop ] || [];\n\t\t\tAnimation.tweeners[ prop ].unshift( callback );\n\t\t}\n\t},\n\n\tprefilters: [ defaultPrefilter ],\n\n\tprefilter: function( callback, prepend ) {\n\t\tif ( prepend ) {\n\t\t\tAnimation.prefilters.unshift( callback );\n\t\t} else {\n\t\t\tAnimation.prefilters.push( callback );\n\t\t}\n\t}\n} );\n\njQuery.speed = function( speed, easing, fn ) {\n\tvar opt = speed && typeof speed === \"object\" ? jQuery.extend( {}, speed ) : {\n\t\tcomplete: fn || !fn && easing ||\n\t\t\tisFunction( speed ) && speed,\n\t\tduration: speed,\n\t\teasing: fn && easing || easing && !isFunction( easing ) && easing\n\t};\n\n\t// Go to the end state if fx are off\n\tif ( jQuery.fx.off ) {\n\t\topt.duration = 0;\n\n\t} else {\n\t\tif ( typeof opt.duration !== \"number\" ) {\n\t\t\tif ( opt.duration in jQuery.fx.speeds ) {\n\t\t\t\topt.duration = jQuery.fx.speeds[ opt.duration ];\n\n\t\t\t} else {\n\t\t\t\topt.duration = jQuery.fx.speeds._default;\n\t\t\t}\n\t\t}\n\t}\n\n\t// Normalize opt.queue - true/undefined/null -> \"fx\"\n\tif ( opt.queue == null || opt.queue === true ) {\n\t\topt.queue = \"fx\";\n\t}\n\n\t// Queueing\n\topt.old = opt.complete;\n\n\topt.complete = function() {\n\t\tif ( isFunction( opt.old ) ) {\n\t\t\topt.old.call( this );\n\t\t}\n\n\t\tif ( opt.queue ) {\n\t\t\tjQuery.dequeue( this, opt.queue );\n\t\t}\n\t};\n\n\treturn opt;\n};\n\njQuery.fn.extend( {\n\tfadeTo: function( speed, to, easing, callback ) {\n\n\t\t// Show any hidden elements after setting opacity to 0\n\t\treturn this.filter( isHiddenWithinTree ).css( \"opacity\", 0 ).show()\n\n\t\t\t// Animate to the value specified\n\t\t\t.end().animate( { opacity: to }, speed, easing, callback );\n\t},\n\tanimate: function( prop, speed, easing, callback ) {\n\t\tvar empty = jQuery.isEmptyObject( prop ),\n\t\t\toptall = jQuery.speed( speed, easing, callback ),\n\t\t\tdoAnimation = function() {\n\n\t\t\t\t// Operate on a copy of prop so per-property easing won't be lost\n\t\t\t\tvar anim = Animation( this, jQuery.extend( {}, prop ), optall );\n\n\t\t\t\t// Empty animations, or finishing resolves immediately\n\t\t\t\tif ( empty || dataPriv.get( this, \"finish\" ) ) {\n\t\t\t\t\tanim.stop( true );\n\t\t\t\t}\n\t\t\t};\n\n\t\tdoAnimation.finish = doAnimation;\n\n\t\treturn empty || optall.queue === false ?\n\t\t\tthis.each( doAnimation ) :\n\t\t\tthis.queue( optall.queue, doAnimation );\n\t},\n\tstop: function( type, clearQueue, gotoEnd ) {\n\t\tvar stopQueue = function( hooks ) {\n\t\t\tvar stop = hooks.stop;\n\t\t\tdelete hooks.stop;\n\t\t\tstop( gotoEnd );\n\t\t};\n\n\t\tif ( typeof type !== \"string\" ) {\n\t\t\tgotoEnd = clearQueue;\n\t\t\tclearQueue = type;\n\t\t\ttype = undefined;\n\t\t}\n\t\tif ( clearQueue ) {\n\t\t\tthis.queue( type || \"fx\", [] );\n\t\t}\n\n\t\treturn this.each( function() {\n\t\t\tvar dequeue = true,\n\t\t\t\tindex = type != null && type + \"queueHooks\",\n\t\t\t\ttimers = jQuery.timers,\n\t\t\t\tdata = dataPriv.get( this );\n\n\t\t\tif ( index ) {\n\t\t\t\tif ( data[ index ] && data[ index ].stop ) {\n\t\t\t\t\tstopQueue( data[ index ] );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfor ( index in data ) {\n\t\t\t\t\tif ( data[ index ] && data[ index ].stop && rrun.test( index ) ) {\n\t\t\t\t\t\tstopQueue( data[ index ] );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor ( index = timers.length; index--; ) {\n\t\t\t\tif ( timers[ index ].elem === this &&\n\t\t\t\t\t( type == null || timers[ index ].queue === type ) ) {\n\n\t\t\t\t\ttimers[ index ].anim.stop( gotoEnd );\n\t\t\t\t\tdequeue = false;\n\t\t\t\t\ttimers.splice( index, 1 );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Start the next in the queue if the last step wasn't forced.\n\t\t\t// Timers currently will call their complete callbacks, which\n\t\t\t// will dequeue but only if they were gotoEnd.\n\t\t\tif ( dequeue || !gotoEnd ) {\n\t\t\t\tjQuery.dequeue( this, type );\n\t\t\t}\n\t\t} );\n\t},\n\tfinish: function( type ) {\n\t\tif ( type !== false ) {\n\t\t\ttype = type || \"fx\";\n\t\t}\n\t\treturn this.each( function() {\n\t\t\tvar index,\n\t\t\t\tdata = dataPriv.get( this ),\n\t\t\t\tqueue = data[ type + \"queue\" ],\n\t\t\t\thooks = data[ type + \"queueHooks\" ],\n\t\t\t\ttimers = jQuery.timers,\n\t\t\t\tlength = queue ? queue.length : 0;\n\n\t\t\t// Enable finishing flag on private data\n\t\t\tdata.finish = true;\n\n\t\t\t// Empty the queue first\n\t\t\tjQuery.queue( this, type, [] );\n\n\t\t\tif ( hooks && hooks.stop ) {\n\t\t\t\thooks.stop.call( this, true );\n\t\t\t}\n\n\t\t\t// Look for any active animations, and finish them\n\t\t\tfor ( index = timers.length; index--; ) {\n\t\t\t\tif ( timers[ index ].elem === this && timers[ index ].queue === type ) {\n\t\t\t\t\ttimers[ index ].anim.stop( true );\n\t\t\t\t\ttimers.splice( index, 1 );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Look for any animations in the old queue and finish them\n\t\t\tfor ( index = 0; index < length; index++ ) {\n\t\t\t\tif ( queue[ index ] && queue[ index ].finish ) {\n\t\t\t\t\tqueue[ index ].finish.call( this );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Turn off finishing flag\n\t\t\tdelete data.finish;\n\t\t} );\n\t}\n} );\n\njQuery.each( [ \"toggle\", \"show\", \"hide\" ], function( _i, name ) {\n\tvar cssFn = jQuery.fn[ name ];\n\tjQuery.fn[ name ] = function( speed, easing, callback ) {\n\t\treturn speed == null || typeof speed === \"boolean\" ?\n\t\t\tcssFn.apply( this, arguments ) :\n\t\t\tthis.animate( genFx( name, true ), speed, easing, callback );\n\t};\n} );\n\n// Generate shortcuts for custom animations\njQuery.each( {\n\tslideDown: genFx( \"show\" ),\n\tslideUp: genFx( \"hide\" ),\n\tslideToggle: genFx( \"toggle\" ),\n\tfadeIn: { opacity: \"show\" },\n\tfadeOut: { opacity: \"hide\" },\n\tfadeToggle: { opacity: \"toggle\" }\n}, function( name, props ) {\n\tjQuery.fn[ name ] = function( speed, easing, callback ) {\n\t\treturn this.animate( props, speed, easing, callback );\n\t};\n} );\n\njQuery.timers = [];\njQuery.fx.tick = function() {\n\tvar timer,\n\t\ti = 0,\n\t\ttimers = jQuery.timers;\n\n\tfxNow = Date.now();\n\n\tfor ( ; i < timers.length; i++ ) {\n\t\ttimer = timers[ i ];\n\n\t\t// Run the timer and safely remove it when done (allowing for external removal)\n\t\tif ( !timer() && timers[ i ] === timer ) {\n\t\t\ttimers.splice( i--, 1 );\n\t\t}\n\t}\n\n\tif ( !timers.length ) {\n\t\tjQuery.fx.stop();\n\t}\n\tfxNow = undefined;\n};\n\njQuery.fx.timer = function( timer ) {\n\tjQuery.timers.push( timer );\n\tjQuery.fx.start();\n};\n\njQuery.fx.interval = 13;\njQuery.fx.start = function() {\n\tif ( inProgress ) {\n\t\treturn;\n\t}\n\n\tinProgress = true;\n\tschedule();\n};\n\njQuery.fx.stop = function() {\n\tinProgress = null;\n};\n\njQuery.fx.speeds = {\n\tslow: 600,\n\tfast: 200,\n\n\t// Default speed\n\t_default: 400\n};\n\n\n// Based off of the plugin by Clint Helfers, with permission.\njQuery.fn.delay = function( time, type ) {\n\ttime = jQuery.fx ? jQuery.fx.speeds[ time ] || time : time;\n\ttype = type || \"fx\";\n\n\treturn this.queue( type, function( next, hooks ) {\n\t\tvar timeout = window.setTimeout( next, time );\n\t\thooks.stop = function() {\n\t\t\twindow.clearTimeout( timeout );\n\t\t};\n\t} );\n};\n\n\n( function() {\n\tvar input = document.createElement( \"input\" ),\n\t\tselect = document.createElement( \"select\" ),\n\t\topt = select.appendChild( document.createElement( \"option\" ) );\n\n\tinput.type = \"checkbox\";\n\n\t// Support: Android <=4.3 only\n\t// Default value for a checkbox should be \"on\"\n\tsupport.checkOn = input.value !== \"\";\n\n\t// Support: IE <=11 only\n\t// Must access selectedIndex to make default options select\n\tsupport.optSelected = opt.selected;\n\n\t// Support: IE <=11 only\n\t// An input loses its value after becoming a radio\n\tinput = document.createElement( \"input\" );\n\tinput.value = \"t\";\n\tinput.type = \"radio\";\n\tsupport.radioValue = input.value === \"t\";\n} )();\n\n\nvar boolHook,\n\tattrHandle = jQuery.expr.attrHandle;\n\njQuery.fn.extend( {\n\tattr: function( name, value ) {\n\t\treturn access( this, jQuery.attr, name, value, arguments.length > 1 );\n\t},\n\n\tremoveAttr: function( name ) {\n\t\treturn this.each( function() {\n\t\t\tjQuery.removeAttr( this, name );\n\t\t} );\n\t}\n} );\n\njQuery.extend( {\n\tattr: function( elem, name, value ) {\n\t\tvar ret, hooks,\n\t\t\tnType = elem.nodeType;\n\n\t\t// Don't get/set attributes on text, comment and attribute nodes\n\t\tif ( nType === 3 || nType === 8 || nType === 2 ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Fallback to prop when attributes are not supported\n\t\tif ( typeof elem.getAttribute === \"undefined\" ) {\n\t\t\treturn jQuery.prop( elem, name, value );\n\t\t}\n\n\t\t// Attribute hooks are determined by the lowercase version\n\t\t// Grab necessary hook if one is defined\n\t\tif ( nType !== 1 || !jQuery.isXMLDoc( elem ) ) {\n\t\t\thooks = jQuery.attrHooks[ name.toLowerCase() ] ||\n\t\t\t\t( jQuery.expr.match.bool.test( name ) ? boolHook : undefined );\n\t\t}\n\n\t\tif ( value !== undefined ) {\n\t\t\tif ( value === null ) {\n\t\t\t\tjQuery.removeAttr( elem, name );\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( hooks && \"set\" in hooks &&\n\t\t\t\t( ret = hooks.set( elem, value, name ) ) !== undefined ) {\n\t\t\t\treturn ret;\n\t\t\t}\n\n\t\t\telem.setAttribute( name, value + \"\" );\n\t\t\treturn value;\n\t\t}\n\n\t\tif ( hooks && \"get\" in hooks && ( ret = hooks.get( elem, name ) ) !== null ) {\n\t\t\treturn ret;\n\t\t}\n\n\t\tret = jQuery.find.attr( elem, name );\n\n\t\t// Non-existent attributes return null, we normalize to undefined\n\t\treturn ret == null ? undefined : ret;\n\t},\n\n\tattrHooks: {\n\t\ttype: {\n\t\t\tset: function( elem, value ) {\n\t\t\t\tif ( !support.radioValue && value === \"radio\" &&\n\t\t\t\t\tnodeName( elem, \"input\" ) ) {\n\t\t\t\t\tvar val = elem.value;\n\t\t\t\t\telem.setAttribute( \"type\", value );\n\t\t\t\t\tif ( val ) {\n\t\t\t\t\t\telem.value = val;\n\t\t\t\t\t}\n\t\t\t\t\treturn value;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\tremoveAttr: function( elem, value ) {\n\t\tvar name,\n\t\t\ti = 0,\n\n\t\t\t// Attribute names can contain non-HTML whitespace characters\n\t\t\t// https://html.spec.whatwg.org/multipage/syntax.html#attributes-2\n\t\t\tattrNames = value && value.match( rnothtmlwhite );\n\n\t\tif ( attrNames && elem.nodeType === 1 ) {\n\t\t\twhile ( ( name = attrNames[ i++ ] ) ) {\n\t\t\t\telem.removeAttribute( name );\n\t\t\t}\n\t\t}\n\t}\n} );\n\n// Hooks for boolean attributes\nboolHook = {\n\tset: function( elem, value, name ) {\n\t\tif ( value === false ) {\n\n\t\t\t// Remove boolean attributes when set to false\n\t\t\tjQuery.removeAttr( elem, name );\n\t\t} else {\n\t\t\telem.setAttribute( name, name );\n\t\t}\n\t\treturn name;\n\t}\n};\n\njQuery.each( jQuery.expr.match.bool.source.match( /\\w+/g ), function( _i, name ) {\n\tvar getter = attrHandle[ name ] || jQuery.find.attr;\n\n\tattrHandle[ name ] = function( elem, name, isXML ) {\n\t\tvar ret, handle,\n\t\t\tlowercaseName = name.toLowerCase();\n\n\t\tif ( !isXML ) {\n\n\t\t\t// Avoid an infinite loop by temporarily removing this function from the getter\n\t\t\thandle = attrHandle[ lowercaseName ];\n\t\t\tattrHandle[ lowercaseName ] = ret;\n\t\t\tret = getter( elem, name, isXML ) != null ?\n\t\t\t\tlowercaseName :\n\t\t\t\tnull;\n\t\t\tattrHandle[ lowercaseName ] = handle;\n\t\t}\n\t\treturn ret;\n\t};\n} );\n\n\n\n\nvar rfocusable = /^(?:input|select|textarea|button)$/i,\n\trclickable = /^(?:a|area)$/i;\n\njQuery.fn.extend( {\n\tprop: function( name, value ) {\n\t\treturn access( this, jQuery.prop, name, value, arguments.length > 1 );\n\t},\n\n\tremoveProp: function( name ) {\n\t\treturn this.each( function() {\n\t\t\tdelete this[ jQuery.propFix[ name ] || name ];\n\t\t} );\n\t}\n} );\n\njQuery.extend( {\n\tprop: function( elem, name, value ) {\n\t\tvar ret, hooks,\n\t\t\tnType = elem.nodeType;\n\n\t\t// Don't get/set properties on text, comment and attribute nodes\n\t\tif ( nType === 3 || nType === 8 || nType === 2 ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( nType !== 1 || !jQuery.isXMLDoc( elem ) ) {\n\n\t\t\t// Fix name and attach hooks\n\t\t\tname = jQuery.propFix[ name ] || name;\n\t\t\thooks = jQuery.propHooks[ name ];\n\t\t}\n\n\t\tif ( value !== undefined ) {\n\t\t\tif ( hooks && \"set\" in hooks &&\n\t\t\t\t( ret = hooks.set( elem, value, name ) ) !== undefined ) {\n\t\t\t\treturn ret;\n\t\t\t}\n\n\t\t\treturn ( elem[ name ] = value );\n\t\t}\n\n\t\tif ( hooks && \"get\" in hooks && ( ret = hooks.get( elem, name ) ) !== null ) {\n\t\t\treturn ret;\n\t\t}\n\n\t\treturn elem[ name ];\n\t},\n\n\tpropHooks: {\n\t\ttabIndex: {\n\t\t\tget: function( elem ) {\n\n\t\t\t\t// Support: IE <=9 - 11 only\n\t\t\t\t// elem.tabIndex doesn't always return the\n\t\t\t\t// correct value when it hasn't been explicitly set\n\t\t\t\t// Use proper attribute retrieval (trac-12072)\n\t\t\t\tvar tabindex = jQuery.find.attr( elem, \"tabindex\" );\n\n\t\t\t\tif ( tabindex ) {\n\t\t\t\t\treturn parseInt( tabindex, 10 );\n\t\t\t\t}\n\n\t\t\t\tif (\n\t\t\t\t\trfocusable.test( elem.nodeName ) ||\n\t\t\t\t\trclickable.test( elem.nodeName ) &&\n\t\t\t\t\telem.href\n\t\t\t\t) {\n\t\t\t\t\treturn 0;\n\t\t\t\t}\n\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t}\n\t},\n\n\tpropFix: {\n\t\t\"for\": \"htmlFor\",\n\t\t\"class\": \"className\"\n\t}\n} );\n\n// Support: IE <=11 only\n// Accessing the selectedIndex property\n// forces the browser to respect setting selected\n// on the option\n// The getter ensures a default option is selected\n// when in an optgroup\n// eslint rule \"no-unused-expressions\" is disabled for this code\n// since it considers such accessions noop\nif ( !support.optSelected ) {\n\tjQuery.propHooks.selected = {\n\t\tget: function( elem ) {\n\n\t\t\t/* eslint no-unused-expressions: \"off\" */\n\n\t\t\tvar parent = elem.parentNode;\n\t\t\tif ( parent && parent.parentNode ) {\n\t\t\t\tparent.parentNode.selectedIndex;\n\t\t\t}\n\t\t\treturn null;\n\t\t},\n\t\tset: function( elem ) {\n\n\t\t\t/* eslint no-unused-expressions: \"off\" */\n\n\t\t\tvar parent = elem.parentNode;\n\t\t\tif ( parent ) {\n\t\t\t\tparent.selectedIndex;\n\n\t\t\t\tif ( parent.parentNode ) {\n\t\t\t\t\tparent.parentNode.selectedIndex;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n}\n\njQuery.each( [\n\t\"tabIndex\",\n\t\"readOnly\",\n\t\"maxLength\",\n\t\"cellSpacing\",\n\t\"cellPadding\",\n\t\"rowSpan\",\n\t\"colSpan\",\n\t\"useMap\",\n\t\"frameBorder\",\n\t\"contentEditable\"\n], function() {\n\tjQuery.propFix[ this.toLowerCase() ] = this;\n} );\n\n\n\n\n\t// Strip and collapse whitespace according to HTML spec\n\t// https://infra.spec.whatwg.org/#strip-and-collapse-ascii-whitespace\n\tfunction stripAndCollapse( value ) {\n\t\tvar tokens = value.match( rnothtmlwhite ) || [];\n\t\treturn tokens.join( \" \" );\n\t}\n\n\nfunction getClass( elem ) {\n\treturn elem.getAttribute && elem.getAttribute( \"class\" ) || \"\";\n}\n\nfunction classesToArray( value ) {\n\tif ( Array.isArray( value ) ) {\n\t\treturn value;\n\t}\n\tif ( typeof value === \"string\" ) {\n\t\treturn value.match( rnothtmlwhite ) || [];\n\t}\n\treturn [];\n}\n\njQuery.fn.extend( {\n\taddClass: function( value ) {\n\t\tvar classNames, cur, curValue, className, i, finalValue;\n\n\t\tif ( isFunction( value ) ) {\n\t\t\treturn this.each( function( j ) {\n\t\t\t\tjQuery( this ).addClass( value.call( this, j, getClass( this ) ) );\n\t\t\t} );\n\t\t}\n\n\t\tclassNames = classesToArray( value );\n\n\t\tif ( classNames.length ) {\n\t\t\treturn this.each( function() {\n\t\t\t\tcurValue = getClass( this );\n\t\t\t\tcur = this.nodeType === 1 && ( \" \" + stripAndCollapse( curValue ) + \" \" );\n\n\t\t\t\tif ( cur ) {\n\t\t\t\t\tfor ( i = 0; i < classNames.length; i++ ) {\n\t\t\t\t\t\tclassName = classNames[ i ];\n\t\t\t\t\t\tif ( cur.indexOf( \" \" + className + \" \" ) < 0 ) {\n\t\t\t\t\t\t\tcur += className + \" \";\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Only assign if different to avoid unneeded rendering.\n\t\t\t\t\tfinalValue = stripAndCollapse( cur );\n\t\t\t\t\tif ( curValue !== finalValue ) {\n\t\t\t\t\t\tthis.setAttribute( \"class\", finalValue );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\n\t\treturn this;\n\t},\n\n\tremoveClass: function( value ) {\n\t\tvar classNames, cur, curValue, className, i, finalValue;\n\n\t\tif ( isFunction( value ) ) {\n\t\t\treturn this.each( function( j ) {\n\t\t\t\tjQuery( this ).removeClass( value.call( this, j, getClass( this ) ) );\n\t\t\t} );\n\t\t}\n\n\t\tif ( !arguments.length ) {\n\t\t\treturn this.attr( \"class\", \"\" );\n\t\t}\n\n\t\tclassNames = classesToArray( value );\n\n\t\tif ( classNames.length ) {\n\t\t\treturn this.each( function() {\n\t\t\t\tcurValue = getClass( this );\n\n\t\t\t\t// This expression is here for better compressibility (see addClass)\n\t\t\t\tcur = this.nodeType === 1 && ( \" \" + stripAndCollapse( curValue ) + \" \" );\n\n\t\t\t\tif ( cur ) {\n\t\t\t\t\tfor ( i = 0; i < classNames.length; i++ ) {\n\t\t\t\t\t\tclassName = classNames[ i ];\n\n\t\t\t\t\t\t// Remove *all* instances\n\t\t\t\t\t\twhile ( cur.indexOf( \" \" + className + \" \" ) > -1 ) {\n\t\t\t\t\t\t\tcur = cur.replace( \" \" + className + \" \", \" \" );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Only assign if different to avoid unneeded rendering.\n\t\t\t\t\tfinalValue = stripAndCollapse( cur );\n\t\t\t\t\tif ( curValue !== finalValue ) {\n\t\t\t\t\t\tthis.setAttribute( \"class\", finalValue );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\n\t\treturn this;\n\t},\n\n\ttoggleClass: function( value, stateVal ) {\n\t\tvar classNames, className, i, self,\n\t\t\ttype = typeof value,\n\t\t\tisValidValue = type === \"string\" || Array.isArray( value );\n\n\t\tif ( isFunction( value ) ) {\n\t\t\treturn this.each( function( i ) {\n\t\t\t\tjQuery( this ).toggleClass(\n\t\t\t\t\tvalue.call( this, i, getClass( this ), stateVal ),\n\t\t\t\t\tstateVal\n\t\t\t\t);\n\t\t\t} );\n\t\t}\n\n\t\tif ( typeof stateVal === \"boolean\" && isValidValue ) {\n\t\t\treturn stateVal ? this.addClass( value ) : this.removeClass( value );\n\t\t}\n\n\t\tclassNames = classesToArray( value );\n\n\t\treturn this.each( function() {\n\t\t\tif ( isValidValue ) {\n\n\t\t\t\t// Toggle individual class names\n\t\t\t\tself = jQuery( this );\n\n\t\t\t\tfor ( i = 0; i < classNames.length; i++ ) {\n\t\t\t\t\tclassName = classNames[ i ];\n\n\t\t\t\t\t// Check each className given, space separated list\n\t\t\t\t\tif ( self.hasClass( className ) ) {\n\t\t\t\t\t\tself.removeClass( className );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tself.addClass( className );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t// Toggle whole class name\n\t\t\t} else if ( value === undefined || type === \"boolean\" ) {\n\t\t\t\tclassName = getClass( this );\n\t\t\t\tif ( className ) {\n\n\t\t\t\t\t// Store className if set\n\t\t\t\t\tdataPriv.set( this, \"__className__\", className );\n\t\t\t\t}\n\n\t\t\t\t// If the element has a class name or if we're passed `false`,\n\t\t\t\t// then remove the whole classname (if there was one, the above saved it).\n\t\t\t\t// Otherwise bring back whatever was previously saved (if anything),\n\t\t\t\t// falling back to the empty string if nothing was stored.\n\t\t\t\tif ( this.setAttribute ) {\n\t\t\t\t\tthis.setAttribute( \"class\",\n\t\t\t\t\t\tclassName || value === false ?\n\t\t\t\t\t\t\t\"\" :\n\t\t\t\t\t\t\tdataPriv.get( this, \"__className__\" ) || \"\"\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t},\n\n\thasClass: function( selector ) {\n\t\tvar className, elem,\n\t\t\ti = 0;\n\n\t\tclassName = \" \" + selector + \" \";\n\t\twhile ( ( elem = this[ i++ ] ) ) {\n\t\t\tif ( elem.nodeType === 1 &&\n\t\t\t\t( \" \" + stripAndCollapse( getClass( elem ) ) + \" \" ).indexOf( className ) > -1 ) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n} );\n\n\n\n\nvar rreturn = /\\r/g;\n\njQuery.fn.extend( {\n\tval: function( value ) {\n\t\tvar hooks, ret, valueIsFunction,\n\t\t\telem = this[ 0 ];\n\n\t\tif ( !arguments.length ) {\n\t\t\tif ( elem ) {\n\t\t\t\thooks = jQuery.valHooks[ elem.type ] ||\n\t\t\t\t\tjQuery.valHooks[ elem.nodeName.toLowerCase() ];\n\n\t\t\t\tif ( hooks &&\n\t\t\t\t\t\"get\" in hooks &&\n\t\t\t\t\t( ret = hooks.get( elem, \"value\" ) ) !== undefined\n\t\t\t\t) {\n\t\t\t\t\treturn ret;\n\t\t\t\t}\n\n\t\t\t\tret = elem.value;\n\n\t\t\t\t// Handle most common string cases\n\t\t\t\tif ( typeof ret === \"string\" ) {\n\t\t\t\t\treturn ret.replace( rreturn, \"\" );\n\t\t\t\t}\n\n\t\t\t\t// Handle cases where value is null/undef or number\n\t\t\t\treturn ret == null ? \"\" : ret;\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\tvalueIsFunction = isFunction( value );\n\n\t\treturn this.each( function( i ) {\n\t\t\tvar val;\n\n\t\t\tif ( this.nodeType !== 1 ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( valueIsFunction ) {\n\t\t\t\tval = value.call( this, i, jQuery( this ).val() );\n\t\t\t} else {\n\t\t\t\tval = value;\n\t\t\t}\n\n\t\t\t// Treat null/undefined as \"\"; convert numbers to string\n\t\t\tif ( val == null ) {\n\t\t\t\tval = \"\";\n\n\t\t\t} else if ( typeof val === \"number\" ) {\n\t\t\t\tval += \"\";\n\n\t\t\t} else if ( Array.isArray( val ) ) {\n\t\t\t\tval = jQuery.map( val, function( value ) {\n\t\t\t\t\treturn value == null ? \"\" : value + \"\";\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\thooks = jQuery.valHooks[ this.type ] || jQuery.valHooks[ this.nodeName.toLowerCase() ];\n\n\t\t\t// If set returns undefined, fall back to normal setting\n\t\t\tif ( !hooks || !( \"set\" in hooks ) || hooks.set( this, val, \"value\" ) === undefined ) {\n\t\t\t\tthis.value = val;\n\t\t\t}\n\t\t} );\n\t}\n} );\n\njQuery.extend( {\n\tvalHooks: {\n\t\toption: {\n\t\t\tget: function( elem ) {\n\n\t\t\t\tvar val = jQuery.find.attr( elem, \"value\" );\n\t\t\t\treturn val != null ?\n\t\t\t\t\tval :\n\n\t\t\t\t\t// Support: IE <=10 - 11 only\n\t\t\t\t\t// option.text throws exceptions (trac-14686, trac-14858)\n\t\t\t\t\t// Strip and collapse whitespace\n\t\t\t\t\t// https://html.spec.whatwg.org/#strip-and-collapse-whitespace\n\t\t\t\t\tstripAndCollapse( jQuery.text( elem ) );\n\t\t\t}\n\t\t},\n\t\tselect: {\n\t\t\tget: function( elem ) {\n\t\t\t\tvar value, option, i,\n\t\t\t\t\toptions = elem.options,\n\t\t\t\t\tindex = elem.selectedIndex,\n\t\t\t\t\tone = elem.type === \"select-one\",\n\t\t\t\t\tvalues = one ? null : [],\n\t\t\t\t\tmax = one ? index + 1 : options.length;\n\n\t\t\t\tif ( index < 0 ) {\n\t\t\t\t\ti = max;\n\n\t\t\t\t} else {\n\t\t\t\t\ti = one ? index : 0;\n\t\t\t\t}\n\n\t\t\t\t// Loop through all the selected options\n\t\t\t\tfor ( ; i < max; i++ ) {\n\t\t\t\t\toption = options[ i ];\n\n\t\t\t\t\t// Support: IE <=9 only\n\t\t\t\t\t// IE8-9 doesn't update selected after form reset (trac-2551)\n\t\t\t\t\tif ( ( option.selected || i === index ) &&\n\n\t\t\t\t\t\t\t// Don't return options that are disabled or in a disabled optgroup\n\t\t\t\t\t\t\t!option.disabled &&\n\t\t\t\t\t\t\t( !option.parentNode.disabled ||\n\t\t\t\t\t\t\t\t!nodeName( option.parentNode, \"optgroup\" ) ) ) {\n\n\t\t\t\t\t\t// Get the specific value for the option\n\t\t\t\t\t\tvalue = jQuery( option ).val();\n\n\t\t\t\t\t\t// We don't need an array for one selects\n\t\t\t\t\t\tif ( one ) {\n\t\t\t\t\t\t\treturn value;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Multi-Selects return an array\n\t\t\t\t\t\tvalues.push( value );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn values;\n\t\t\t},\n\n\t\t\tset: function( elem, value ) {\n\t\t\t\tvar optionSet, option,\n\t\t\t\t\toptions = elem.options,\n\t\t\t\t\tvalues = jQuery.makeArray( value ),\n\t\t\t\t\ti = options.length;\n\n\t\t\t\twhile ( i-- ) {\n\t\t\t\t\toption = options[ i ];\n\n\t\t\t\t\t/* eslint-disable no-cond-assign */\n\n\t\t\t\t\tif ( option.selected =\n\t\t\t\t\t\tjQuery.inArray( jQuery.valHooks.option.get( option ), values ) > -1\n\t\t\t\t\t) {\n\t\t\t\t\t\toptionSet = true;\n\t\t\t\t\t}\n\n\t\t\t\t\t/* eslint-enable no-cond-assign */\n\t\t\t\t}\n\n\t\t\t\t// Force browsers to behave consistently when non-matching value is set\n\t\t\t\tif ( !optionSet ) {\n\t\t\t\t\telem.selectedIndex = -1;\n\t\t\t\t}\n\t\t\t\treturn values;\n\t\t\t}\n\t\t}\n\t}\n} );\n\n// Radios and checkboxes getter/setter\njQuery.each( [ \"radio\", \"checkbox\" ], function() {\n\tjQuery.valHooks[ this ] = {\n\t\tset: function( elem, value ) {\n\t\t\tif ( Array.isArray( value ) ) {\n\t\t\t\treturn ( elem.checked = jQuery.inArray( jQuery( elem ).val(), value ) > -1 );\n\t\t\t}\n\t\t}\n\t};\n\tif ( !support.checkOn ) {\n\t\tjQuery.valHooks[ this ].get = function( elem ) {\n\t\t\treturn elem.getAttribute( \"value\" ) === null ? \"on\" : elem.value;\n\t\t};\n\t}\n} );\n\n\n\n\n// Return jQuery for attributes-only inclusion\nvar location = window.location;\n\nvar nonce = { guid: Date.now() };\n\nvar rquery = ( /\\?/ );\n\n\n\n// Cross-browser xml parsing\njQuery.parseXML = function( data ) {\n\tvar xml, parserErrorElem;\n\tif ( !data || typeof data !== \"string\" ) {\n\t\treturn null;\n\t}\n\n\t// Support: IE 9 - 11 only\n\t// IE throws on parseFromString with invalid input.\n\ttry {\n\t\txml = ( new window.DOMParser() ).parseFromString( data, \"text/xml\" );\n\t} catch ( e ) {}\n\n\tparserErrorElem = xml && xml.getElementsByTagName( \"parsererror\" )[ 0 ];\n\tif ( !xml || parserErrorElem ) {\n\t\tjQuery.error( \"Invalid XML: \" + (\n\t\t\tparserErrorElem ?\n\t\t\t\tjQuery.map( parserErrorElem.childNodes, function( el ) {\n\t\t\t\t\treturn el.textContent;\n\t\t\t\t} ).join( \"\\n\" ) :\n\t\t\t\tdata\n\t\t) );\n\t}\n\treturn xml;\n};\n\n\nvar rfocusMorph = /^(?:focusinfocus|focusoutblur)$/,\n\tstopPropagationCallback = function( e ) {\n\t\te.stopPropagation();\n\t};\n\njQuery.extend( jQuery.event, {\n\n\ttrigger: function( event, data, elem, onlyHandlers ) {\n\n\t\tvar i, cur, tmp, bubbleType, ontype, handle, special, lastElement,\n\t\t\teventPath = [ elem || document ],\n\t\t\ttype = hasOwn.call( event, \"type\" ) ? event.type : event,\n\t\t\tnamespaces = hasOwn.call( event, \"namespace\" ) ? event.namespace.split( \".\" ) : [];\n\n\t\tcur = lastElement = tmp = elem = elem || document;\n\n\t\t// Don't do events on text and comment nodes\n\t\tif ( elem.nodeType === 3 || elem.nodeType === 8 ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// focus/blur morphs to focusin/out; ensure we're not firing them right now\n\t\tif ( rfocusMorph.test( type + jQuery.event.triggered ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( type.indexOf( \".\" ) > -1 ) {\n\n\t\t\t// Namespaced trigger; create a regexp to match event type in handle()\n\t\t\tnamespaces = type.split( \".\" );\n\t\t\ttype = namespaces.shift();\n\t\t\tnamespaces.sort();\n\t\t}\n\t\tontype = type.indexOf( \":\" ) < 0 && \"on\" + type;\n\n\t\t// Caller can pass in a jQuery.Event object, Object, or just an event type string\n\t\tevent = event[ jQuery.expando ] ?\n\t\t\tevent :\n\t\t\tnew jQuery.Event( type, typeof event === \"object\" && event );\n\n\t\t// Trigger bitmask: & 1 for native handlers; & 2 for jQuery (always true)\n\t\tevent.isTrigger = onlyHandlers ? 2 : 3;\n\t\tevent.namespace = namespaces.join( \".\" );\n\t\tevent.rnamespace = event.namespace ?\n\t\t\tnew RegExp( \"(^|\\\\.)\" + namespaces.join( \"\\\\.(?:.*\\\\.|)\" ) + \"(\\\\.|$)\" ) :\n\t\t\tnull;\n\n\t\t// Clean up the event in case it is being reused\n\t\tevent.result = undefined;\n\t\tif ( !event.target ) {\n\t\t\tevent.target = elem;\n\t\t}\n\n\t\t// Clone any incoming data and prepend the event, creating the handler arg list\n\t\tdata = data == null ?\n\t\t\t[ event ] :\n\t\t\tjQuery.makeArray( data, [ event ] );\n\n\t\t// Allow special events to draw outside the lines\n\t\tspecial = jQuery.event.special[ type ] || {};\n\t\tif ( !onlyHandlers && special.trigger && special.trigger.apply( elem, data ) === false ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Determine event propagation path in advance, per W3C events spec (trac-9951)\n\t\t// Bubble up to document, then to window; watch for a global ownerDocument var (trac-9724)\n\t\tif ( !onlyHandlers && !special.noBubble && !isWindow( elem ) ) {\n\n\t\t\tbubbleType = special.delegateType || type;\n\t\t\tif ( !rfocusMorph.test( bubbleType + type ) ) {\n\t\t\t\tcur = cur.parentNode;\n\t\t\t}\n\t\t\tfor ( ; cur; cur = cur.parentNode ) {\n\t\t\t\teventPath.push( cur );\n\t\t\t\ttmp = cur;\n\t\t\t}\n\n\t\t\t// Only add window if we got to document (e.g., not plain obj or detached DOM)\n\t\t\tif ( tmp === ( elem.ownerDocument || document ) ) {\n\t\t\t\teventPath.push( tmp.defaultView || tmp.parentWindow || window );\n\t\t\t}\n\t\t}\n\n\t\t// Fire handlers on the event path\n\t\ti = 0;\n\t\twhile ( ( cur = eventPath[ i++ ] ) && !event.isPropagationStopped() ) {\n\t\t\tlastElement = cur;\n\t\t\tevent.type = i > 1 ?\n\t\t\t\tbubbleType :\n\t\t\t\tspecial.bindType || type;\n\n\t\t\t// jQuery handler\n\t\t\thandle = ( dataPriv.get( cur, \"events\" ) || Object.create( null ) )[ event.type ] &&\n\t\t\t\tdataPriv.get( cur, \"handle\" );\n\t\t\tif ( handle ) {\n\t\t\t\thandle.apply( cur, data );\n\t\t\t}\n\n\t\t\t// Native handler\n\t\t\thandle = ontype && cur[ ontype ];\n\t\t\tif ( handle && handle.apply && acceptData( cur ) ) {\n\t\t\t\tevent.result = handle.apply( cur, data );\n\t\t\t\tif ( event.result === false ) {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tevent.type = type;\n\n\t\t// If nobody prevented the default action, do it now\n\t\tif ( !onlyHandlers && !event.isDefaultPrevented() ) {\n\n\t\t\tif ( ( !special._default ||\n\t\t\t\tspecial._default.apply( eventPath.pop(), data ) === false ) &&\n\t\t\t\tacceptData( elem ) ) {\n\n\t\t\t\t// Call a native DOM method on the target with the same name as the event.\n\t\t\t\t// Don't do default actions on window, that's where global variables be (trac-6170)\n\t\t\t\tif ( ontype && isFunction( elem[ type ] ) && !isWindow( elem ) ) {\n\n\t\t\t\t\t// Don't re-trigger an onFOO event when we call its FOO() method\n\t\t\t\t\ttmp = elem[ ontype ];\n\n\t\t\t\t\tif ( tmp ) {\n\t\t\t\t\t\telem[ ontype ] = null;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Prevent re-triggering of the same event, since we already bubbled it above\n\t\t\t\t\tjQuery.event.triggered = type;\n\n\t\t\t\t\tif ( event.isPropagationStopped() ) {\n\t\t\t\t\t\tlastElement.addEventListener( type, stopPropagationCallback );\n\t\t\t\t\t}\n\n\t\t\t\t\telem[ type ]();\n\n\t\t\t\t\tif ( event.isPropagationStopped() ) {\n\t\t\t\t\t\tlastElement.removeEventListener( type, stopPropagationCallback );\n\t\t\t\t\t}\n\n\t\t\t\t\tjQuery.event.triggered = undefined;\n\n\t\t\t\t\tif ( tmp ) {\n\t\t\t\t\t\telem[ ontype ] = tmp;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn event.result;\n\t},\n\n\t// Piggyback on a donor event to simulate a different one\n\t// Used only for `focus(in | out)` events\n\tsimulate: function( type, elem, event ) {\n\t\tvar e = jQuery.extend(\n\t\t\tnew jQuery.Event(),\n\t\t\tevent,\n\t\t\t{\n\t\t\t\ttype: type,\n\t\t\t\tisSimulated: true\n\t\t\t}\n\t\t);\n\n\t\tjQuery.event.trigger( e, null, elem );\n\t}\n\n} );\n\njQuery.fn.extend( {\n\n\ttrigger: function( type, data ) {\n\t\treturn this.each( function() {\n\t\t\tjQuery.event.trigger( type, data, this );\n\t\t} );\n\t},\n\ttriggerHandler: function( type, data ) {\n\t\tvar elem = this[ 0 ];\n\t\tif ( elem ) {\n\t\t\treturn jQuery.event.trigger( type, data, elem, true );\n\t\t}\n\t}\n} );\n\n\nvar\n\trbracket = /\\[\\]$/,\n\trCRLF = /\\r?\\n/g,\n\trsubmitterTypes = /^(?:submit|button|image|reset|file)$/i,\n\trsubmittable = /^(?:input|select|textarea|keygen)/i;\n\nfunction buildParams( prefix, obj, traditional, add ) {\n\tvar name;\n\n\tif ( Array.isArray( obj ) ) {\n\n\t\t// Serialize array item.\n\t\tjQuery.each( obj, function( i, v ) {\n\t\t\tif ( traditional || rbracket.test( prefix ) ) {\n\n\t\t\t\t// Treat each array item as a scalar.\n\t\t\t\tadd( prefix, v );\n\n\t\t\t} else {\n\n\t\t\t\t// Item is non-scalar (array or object), encode its numeric index.\n\t\t\t\tbuildParams(\n\t\t\t\t\tprefix + \"[\" + ( typeof v === \"object\" && v != null ? i : \"\" ) + \"]\",\n\t\t\t\t\tv,\n\t\t\t\t\ttraditional,\n\t\t\t\t\tadd\n\t\t\t\t);\n\t\t\t}\n\t\t} );\n\n\t} else if ( !traditional && toType( obj ) === \"object\" ) {\n\n\t\t// Serialize object item.\n\t\tfor ( name in obj ) {\n\t\t\tbuildParams( prefix + \"[\" + name + \"]\", obj[ name ], traditional, add );\n\t\t}\n\n\t} else {\n\n\t\t// Serialize scalar item.\n\t\tadd( prefix, obj );\n\t}\n}\n\n// Serialize an array of form elements or a set of\n// key/values into a query string\njQuery.param = function( a, traditional ) {\n\tvar prefix,\n\t\ts = [],\n\t\tadd = function( key, valueOrFunction ) {\n\n\t\t\t// If value is a function, invoke it and use its return value\n\t\t\tvar value = isFunction( valueOrFunction ) ?\n\t\t\t\tvalueOrFunction() :\n\t\t\t\tvalueOrFunction;\n\n\t\t\ts[ s.length ] = encodeURIComponent( key ) + \"=\" +\n\t\t\t\tencodeURIComponent( value == null ? \"\" : value );\n\t\t};\n\n\tif ( a == null ) {\n\t\treturn \"\";\n\t}\n\n\t// If an array was passed in, assume that it is an array of form elements.\n\tif ( Array.isArray( a ) || ( a.jquery && !jQuery.isPlainObject( a ) ) ) {\n\n\t\t// Serialize the form elements\n\t\tjQuery.each( a, function() {\n\t\t\tadd( this.name, this.value );\n\t\t} );\n\n\t} else {\n\n\t\t// If traditional, encode the \"old\" way (the way 1.3.2 or older\n\t\t// did it), otherwise encode params recursively.\n\t\tfor ( prefix in a ) {\n\t\t\tbuildParams( prefix, a[ prefix ], traditional, add );\n\t\t}\n\t}\n\n\t// Return the resulting serialization\n\treturn s.join( \"&\" );\n};\n\njQuery.fn.extend( {\n\tserialize: function() {\n\t\treturn jQuery.param( this.serializeArray() );\n\t},\n\tserializeArray: function() {\n\t\treturn this.map( function() {\n\n\t\t\t// Can add propHook for \"elements\" to filter or add form elements\n\t\t\tvar elements = jQuery.prop( this, \"elements\" );\n\t\t\treturn elements ? jQuery.makeArray( elements ) : this;\n\t\t} ).filter( function() {\n\t\t\tvar type = this.type;\n\n\t\t\t// Use .is( \":disabled\" ) so that fieldset[disabled] works\n\t\t\treturn this.name && !jQuery( this ).is( \":disabled\" ) &&\n\t\t\t\trsubmittable.test( this.nodeName ) && !rsubmitterTypes.test( type ) &&\n\t\t\t\t( this.checked || !rcheckableType.test( type ) );\n\t\t} ).map( function( _i, elem ) {\n\t\t\tvar val = jQuery( this ).val();\n\n\t\t\tif ( val == null ) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tif ( Array.isArray( val ) ) {\n\t\t\t\treturn jQuery.map( val, function( val ) {\n\t\t\t\t\treturn { name: elem.name, value: val.replace( rCRLF, \"\\r\\n\" ) };\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\treturn { name: elem.name, value: val.replace( rCRLF, \"\\r\\n\" ) };\n\t\t} ).get();\n\t}\n} );\n\n\nvar\n\tr20 = /%20/g,\n\trhash = /#.*$/,\n\trantiCache = /([?&])_=[^&]*/,\n\trheaders = /^(.*?):[ \\t]*([^\\r\\n]*)$/mg,\n\n\t// trac-7653, trac-8125, trac-8152: local protocol detection\n\trlocalProtocol = /^(?:about|app|app-storage|.+-extension|file|res|widget):$/,\n\trnoContent = /^(?:GET|HEAD)$/,\n\trprotocol = /^\\/\\//,\n\n\t/* Prefilters\n\t * 1) They are useful to introduce custom dataTypes (see ajax/jsonp.js for an example)\n\t * 2) These are called:\n\t *    - BEFORE asking for a transport\n\t *    - AFTER param serialization (s.data is a string if s.processData is true)\n\t * 3) key is the dataType\n\t * 4) the catchall symbol \"*\" can be used\n\t * 5) execution will start with transport dataType and THEN continue down to \"*\" if needed\n\t */\n\tprefilters = {},\n\n\t/* Transports bindings\n\t * 1) key is the dataType\n\t * 2) the catchall symbol \"*\" can be used\n\t * 3) selection will start with transport dataType and THEN go to \"*\" if needed\n\t */\n\ttransports = {},\n\n\t// Avoid comment-prolog char sequence (trac-10098); must appease lint and evade compression\n\tallTypes = \"*/\".concat( \"*\" ),\n\n\t// Anchor tag for parsing the document origin\n\toriginAnchor = document.createElement( \"a\" );\n\noriginAnchor.href = location.href;\n\n// Base \"constructor\" for jQuery.ajaxPrefilter and jQuery.ajaxTransport\nfunction addToPrefiltersOrTransports( structure ) {\n\n\t// dataTypeExpression is optional and defaults to \"*\"\n\treturn function( dataTypeExpression, func ) {\n\n\t\tif ( typeof dataTypeExpression !== \"string\" ) {\n\t\t\tfunc = dataTypeExpression;\n\t\t\tdataTypeExpression = \"*\";\n\t\t}\n\n\t\tvar dataType,\n\t\t\ti = 0,\n\t\t\tdataTypes = dataTypeExpression.toLowerCase().match( rnothtmlwhite ) || [];\n\n\t\tif ( isFunction( func ) ) {\n\n\t\t\t// For each dataType in the dataTypeExpression\n\t\t\twhile ( ( dataType = dataTypes[ i++ ] ) ) {\n\n\t\t\t\t// Prepend if requested\n\t\t\t\tif ( dataType[ 0 ] === \"+\" ) {\n\t\t\t\t\tdataType = dataType.slice( 1 ) || \"*\";\n\t\t\t\t\t( structure[ dataType ] = structure[ dataType ] || [] ).unshift( func );\n\n\t\t\t\t// Otherwise append\n\t\t\t\t} else {\n\t\t\t\t\t( structure[ dataType ] = structure[ dataType ] || [] ).push( func );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n}\n\n// Base inspection function for prefilters and transports\nfunction inspectPrefiltersOrTransports( structure, options, originalOptions, jqXHR ) {\n\n\tvar inspected = {},\n\t\tseekingTransport = ( structure === transports );\n\n\tfunction inspect( dataType ) {\n\t\tvar selected;\n\t\tinspected[ dataType ] = true;\n\t\tjQuery.each( structure[ dataType ] || [], function( _, prefilterOrFactory ) {\n\t\t\tvar dataTypeOrTransport = prefilterOrFactory( options, originalOptions, jqXHR );\n\t\t\tif ( typeof dataTypeOrTransport === \"string\" &&\n\t\t\t\t!seekingTransport && !inspected[ dataTypeOrTransport ] ) {\n\n\t\t\t\toptions.dataTypes.unshift( dataTypeOrTransport );\n\t\t\t\tinspect( dataTypeOrTransport );\n\t\t\t\treturn false;\n\t\t\t} else if ( seekingTransport ) {\n\t\t\t\treturn !( selected = dataTypeOrTransport );\n\t\t\t}\n\t\t} );\n\t\treturn selected;\n\t}\n\n\treturn inspect( options.dataTypes[ 0 ] ) || !inspected[ \"*\" ] && inspect( \"*\" );\n}\n\n// A special extend for ajax options\n// that takes \"flat\" options (not to be deep extended)\n// Fixes trac-9887\nfunction ajaxExtend( target, src ) {\n\tvar key, deep,\n\t\tflatOptions = jQuery.ajaxSettings.flatOptions || {};\n\n\tfor ( key in src ) {\n\t\tif ( src[ key ] !== undefined ) {\n\t\t\t( flatOptions[ key ] ? target : ( deep || ( deep = {} ) ) )[ key ] = src[ key ];\n\t\t}\n\t}\n\tif ( deep ) {\n\t\tjQuery.extend( true, target, deep );\n\t}\n\n\treturn target;\n}\n\n/* Handles responses to an ajax request:\n * - finds the right dataType (mediates between content-type and expected dataType)\n * - returns the corresponding response\n */\nfunction ajaxHandleResponses( s, jqXHR, responses ) {\n\n\tvar ct, type, finalDataType, firstDataType,\n\t\tcontents = s.contents,\n\t\tdataTypes = s.dataTypes;\n\n\t// Remove auto dataType and get content-type in the process\n\twhile ( dataTypes[ 0 ] === \"*\" ) {\n\t\tdataTypes.shift();\n\t\tif ( ct === undefined ) {\n\t\t\tct = s.mimeType || jqXHR.getResponseHeader( \"Content-Type\" );\n\t\t}\n\t}\n\n\t// Check if we're dealing with a known content-type\n\tif ( ct ) {\n\t\tfor ( type in contents ) {\n\t\t\tif ( contents[ type ] && contents[ type ].test( ct ) ) {\n\t\t\t\tdataTypes.unshift( type );\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\t// Check to see if we have a response for the expected dataType\n\tif ( dataTypes[ 0 ] in responses ) {\n\t\tfinalDataType = dataTypes[ 0 ];\n\t} else {\n\n\t\t// Try convertible dataTypes\n\t\tfor ( type in responses ) {\n\t\t\tif ( !dataTypes[ 0 ] || s.converters[ type + \" \" + dataTypes[ 0 ] ] ) {\n\t\t\t\tfinalDataType = type;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif ( !firstDataType ) {\n\t\t\t\tfirstDataType = type;\n\t\t\t}\n\t\t}\n\n\t\t// Or just use first one\n\t\tfinalDataType = finalDataType || firstDataType;\n\t}\n\n\t// If we found a dataType\n\t// We add the dataType to the list if needed\n\t// and return the corresponding response\n\tif ( finalDataType ) {\n\t\tif ( finalDataType !== dataTypes[ 0 ] ) {\n\t\t\tdataTypes.unshift( finalDataType );\n\t\t}\n\t\treturn responses[ finalDataType ];\n\t}\n}\n\n/* Chain conversions given the request and the original response\n * Also sets the responseXXX fields on the jqXHR instance\n */\nfunction ajaxConvert( s, response, jqXHR, isSuccess ) {\n\tvar conv2, current, conv, tmp, prev,\n\t\tconverters = {},\n\n\t\t// Work with a copy of dataTypes in case we need to modify it for conversion\n\t\tdataTypes = s.dataTypes.slice();\n\n\t// Create converters map with lowercased keys\n\tif ( dataTypes[ 1 ] ) {\n\t\tfor ( conv in s.converters ) {\n\t\t\tconverters[ conv.toLowerCase() ] = s.converters[ conv ];\n\t\t}\n\t}\n\n\tcurrent = dataTypes.shift();\n\n\t// Convert to each sequential dataType\n\twhile ( current ) {\n\n\t\tif ( s.responseFields[ current ] ) {\n\t\t\tjqXHR[ s.responseFields[ current ] ] = response;\n\t\t}\n\n\t\t// Apply the dataFilter if provided\n\t\tif ( !prev && isSuccess && s.dataFilter ) {\n\t\t\tresponse = s.dataFilter( response, s.dataType );\n\t\t}\n\n\t\tprev = current;\n\t\tcurrent = dataTypes.shift();\n\n\t\tif ( current ) {\n\n\t\t\t// There's only work to do if current dataType is non-auto\n\t\t\tif ( current === \"*\" ) {\n\n\t\t\t\tcurrent = prev;\n\n\t\t\t// Convert response if prev dataType is non-auto and differs from current\n\t\t\t} else if ( prev !== \"*\" && prev !== current ) {\n\n\t\t\t\t// Seek a direct converter\n\t\t\t\tconv = converters[ prev + \" \" + current ] || converters[ \"* \" + current ];\n\n\t\t\t\t// If none found, seek a pair\n\t\t\t\tif ( !conv ) {\n\t\t\t\t\tfor ( conv2 in converters ) {\n\n\t\t\t\t\t\t// If conv2 outputs current\n\t\t\t\t\t\ttmp = conv2.split( \" \" );\n\t\t\t\t\t\tif ( tmp[ 1 ] === current ) {\n\n\t\t\t\t\t\t\t// If prev can be converted to accepted input\n\t\t\t\t\t\t\tconv = converters[ prev + \" \" + tmp[ 0 ] ] ||\n\t\t\t\t\t\t\t\tconverters[ \"* \" + tmp[ 0 ] ];\n\t\t\t\t\t\t\tif ( conv ) {\n\n\t\t\t\t\t\t\t\t// Condense equivalence converters\n\t\t\t\t\t\t\t\tif ( conv === true ) {\n\t\t\t\t\t\t\t\t\tconv = converters[ conv2 ];\n\n\t\t\t\t\t\t\t\t// Otherwise, insert the intermediate dataType\n\t\t\t\t\t\t\t\t} else if ( converters[ conv2 ] !== true ) {\n\t\t\t\t\t\t\t\t\tcurrent = tmp[ 0 ];\n\t\t\t\t\t\t\t\t\tdataTypes.unshift( tmp[ 1 ] );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Apply converter (if not an equivalence)\n\t\t\t\tif ( conv !== true ) {\n\n\t\t\t\t\t// Unless errors are allowed to bubble, catch and return them\n\t\t\t\t\tif ( conv && s.throws ) {\n\t\t\t\t\t\tresponse = conv( response );\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tresponse = conv( response );\n\t\t\t\t\t\t} catch ( e ) {\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\tstate: \"parsererror\",\n\t\t\t\t\t\t\t\terror: conv ? e : \"No conversion from \" + prev + \" to \" + current\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn { state: \"success\", data: response };\n}\n\njQuery.extend( {\n\n\t// Counter for holding the number of active queries\n\tactive: 0,\n\n\t// Last-Modified header cache for next request\n\tlastModified: {},\n\tetag: {},\n\n\tajaxSettings: {\n\t\turl: location.href,\n\t\ttype: \"GET\",\n\t\tisLocal: rlocalProtocol.test( location.protocol ),\n\t\tglobal: true,\n\t\tprocessData: true,\n\t\tasync: true,\n\t\tcontentType: \"application/x-www-form-urlencoded; charset=UTF-8\",\n\n\t\t/*\n\t\ttimeout: 0,\n\t\tdata: null,\n\t\tdataType: null,\n\t\tusername: null,\n\t\tpassword: null,\n\t\tcache: null,\n\t\tthrows: false,\n\t\ttraditional: false,\n\t\theaders: {},\n\t\t*/\n\n\t\taccepts: {\n\t\t\t\"*\": allTypes,\n\t\t\ttext: \"text/plain\",\n\t\t\thtml: \"text/html\",\n\t\t\txml: \"application/xml, text/xml\",\n\t\t\tjson: \"application/json, text/javascript\"\n\t\t},\n\n\t\tcontents: {\n\t\t\txml: /\\bxml\\b/,\n\t\t\thtml: /\\bhtml/,\n\t\t\tjson: /\\bjson\\b/\n\t\t},\n\n\t\tresponseFields: {\n\t\t\txml: \"responseXML\",\n\t\t\ttext: \"responseText\",\n\t\t\tjson: \"responseJSON\"\n\t\t},\n\n\t\t// Data converters\n\t\t// Keys separate source (or catchall \"*\") and destination types with a single space\n\t\tconverters: {\n\n\t\t\t// Convert anything to text\n\t\t\t\"* text\": String,\n\n\t\t\t// Text to html (true = no transformation)\n\t\t\t\"text html\": true,\n\n\t\t\t// Evaluate text as a json expression\n\t\t\t\"text json\": JSON.parse,\n\n\t\t\t// Parse text as xml\n\t\t\t\"text xml\": jQuery.parseXML\n\t\t},\n\n\t\t// For options that shouldn't be deep extended:\n\t\t// you can add your own custom options here if\n\t\t// and when you create one that shouldn't be\n\t\t// deep extended (see ajaxExtend)\n\t\tflatOptions: {\n\t\t\turl: true,\n\t\t\tcontext: true\n\t\t}\n\t},\n\n\t// Creates a full fledged settings object into target\n\t// with both ajaxSettings and settings fields.\n\t// If target is omitted, writes into ajaxSettings.\n\tajaxSetup: function( target, settings ) {\n\t\treturn settings ?\n\n\t\t\t// Building a settings object\n\t\t\tajaxExtend( ajaxExtend( target, jQuery.ajaxSettings ), settings ) :\n\n\t\t\t// Extending ajaxSettings\n\t\t\tajaxExtend( jQuery.ajaxSettings, target );\n\t},\n\n\tajaxPrefilter: addToPrefiltersOrTransports( prefilters ),\n\tajaxTransport: addToPrefiltersOrTransports( transports ),\n\n\t// Main method\n\tajax: function( url, options ) {\n\n\t\t// If url is an object, simulate pre-1.5 signature\n\t\tif ( typeof url === \"object\" ) {\n\t\t\toptions = url;\n\t\t\turl = undefined;\n\t\t}\n\n\t\t// Force options to be an object\n\t\toptions = options || {};\n\n\t\tvar transport,\n\n\t\t\t// URL without anti-cache param\n\t\t\tcacheURL,\n\n\t\t\t// Response headers\n\t\t\tresponseHeadersString,\n\t\t\tresponseHeaders,\n\n\t\t\t// timeout handle\n\t\t\ttimeoutTimer,\n\n\t\t\t// Url cleanup var\n\t\t\turlAnchor,\n\n\t\t\t// Request state (becomes false upon send and true upon completion)\n\t\t\tcompleted,\n\n\t\t\t// To know if global events are to be dispatched\n\t\t\tfireGlobals,\n\n\t\t\t// Loop variable\n\t\t\ti,\n\n\t\t\t// uncached part of the url\n\t\t\tuncached,\n\n\t\t\t// Create the final options object\n\t\t\ts = jQuery.ajaxSetup( {}, options ),\n\n\t\t\t// Callbacks context\n\t\t\tcallbackContext = s.context || s,\n\n\t\t\t// Context for global events is callbackContext if it is a DOM node or jQuery collection\n\t\t\tglobalEventContext = s.context &&\n\t\t\t\t( callbackContext.nodeType || callbackContext.jquery ) ?\n\t\t\t\tjQuery( callbackContext ) :\n\t\t\t\tjQuery.event,\n\n\t\t\t// Deferreds\n\t\t\tdeferred = jQuery.Deferred(),\n\t\t\tcompleteDeferred = jQuery.Callbacks( \"once memory\" ),\n\n\t\t\t// Status-dependent callbacks\n\t\t\tstatusCode = s.statusCode || {},\n\n\t\t\t// Headers (they are sent all at once)\n\t\t\trequestHeaders = {},\n\t\t\trequestHeadersNames = {},\n\n\t\t\t// Default abort message\n\t\t\tstrAbort = \"canceled\",\n\n\t\t\t// Fake xhr\n\t\t\tjqXHR = {\n\t\t\t\treadyState: 0,\n\n\t\t\t\t// Builds headers hashtable if needed\n\t\t\t\tgetResponseHeader: function( key ) {\n\t\t\t\t\tvar match;\n\t\t\t\t\tif ( completed ) {\n\t\t\t\t\t\tif ( !responseHeaders ) {\n\t\t\t\t\t\t\tresponseHeaders = {};\n\t\t\t\t\t\t\twhile ( ( match = rheaders.exec( responseHeadersString ) ) ) {\n\t\t\t\t\t\t\t\tresponseHeaders[ match[ 1 ].toLowerCase() + \" \" ] =\n\t\t\t\t\t\t\t\t\t( responseHeaders[ match[ 1 ].toLowerCase() + \" \" ] || [] )\n\t\t\t\t\t\t\t\t\t\t.concat( match[ 2 ] );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tmatch = responseHeaders[ key.toLowerCase() + \" \" ];\n\t\t\t\t\t}\n\t\t\t\t\treturn match == null ? null : match.join( \", \" );\n\t\t\t\t},\n\n\t\t\t\t// Raw string\n\t\t\t\tgetAllResponseHeaders: function() {\n\t\t\t\t\treturn completed ? responseHeadersString : null;\n\t\t\t\t},\n\n\t\t\t\t// Caches the header\n\t\t\t\tsetRequestHeader: function( name, value ) {\n\t\t\t\t\tif ( completed == null ) {\n\t\t\t\t\t\tname = requestHeadersNames[ name.toLowerCase() ] =\n\t\t\t\t\t\t\trequestHeadersNames[ name.toLowerCase() ] || name;\n\t\t\t\t\t\trequestHeaders[ name ] = value;\n\t\t\t\t\t}\n\t\t\t\t\treturn this;\n\t\t\t\t},\n\n\t\t\t\t// Overrides response content-type header\n\t\t\t\toverrideMimeType: function( type ) {\n\t\t\t\t\tif ( completed == null ) {\n\t\t\t\t\t\ts.mimeType = type;\n\t\t\t\t\t}\n\t\t\t\t\treturn this;\n\t\t\t\t},\n\n\t\t\t\t// Status-dependent callbacks\n\t\t\t\tstatusCode: function( map ) {\n\t\t\t\t\tvar code;\n\t\t\t\t\tif ( map ) {\n\t\t\t\t\t\tif ( completed ) {\n\n\t\t\t\t\t\t\t// Execute the appropriate callbacks\n\t\t\t\t\t\t\tjqXHR.always( map[ jqXHR.status ] );\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t// Lazy-add the new callbacks in a way that preserves old ones\n\t\t\t\t\t\t\tfor ( code in map ) {\n\t\t\t\t\t\t\t\tstatusCode[ code ] = [ statusCode[ code ], map[ code ] ];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn this;\n\t\t\t\t},\n\n\t\t\t\t// Cancel the request\n\t\t\t\tabort: function( statusText ) {\n\t\t\t\t\tvar finalText = statusText || strAbort;\n\t\t\t\t\tif ( transport ) {\n\t\t\t\t\t\ttransport.abort( finalText );\n\t\t\t\t\t}\n\t\t\t\t\tdone( 0, finalText );\n\t\t\t\t\treturn this;\n\t\t\t\t}\n\t\t\t};\n\n\t\t// Attach deferreds\n\t\tdeferred.promise( jqXHR );\n\n\t\t// Add protocol if not provided (prefilters might expect it)\n\t\t// Handle falsy url in the settings object (trac-10093: consistency with old signature)\n\t\t// We also use the url parameter if available\n\t\ts.url = ( ( url || s.url || location.href ) + \"\" )\n\t\t\t.replace( rprotocol, location.protocol + \"//\" );\n\n\t\t// Alias method option to type as per ticket trac-12004\n\t\ts.type = options.method || options.type || s.method || s.type;\n\n\t\t// Extract dataTypes list\n\t\ts.dataTypes = ( s.dataType || \"*\" ).toLowerCase().match( rnothtmlwhite ) || [ \"\" ];\n\n\t\t// A cross-domain request is in order when the origin doesn't match the current origin.\n\t\tif ( s.crossDomain == null ) {\n\t\t\turlAnchor = document.createElement( \"a\" );\n\n\t\t\t// Support: IE <=8 - 11, Edge 12 - 15\n\t\t\t// IE throws exception on accessing the href property if url is malformed,\n\t\t\t// e.g. http://example.com:80x/\n\t\t\ttry {\n\t\t\t\turlAnchor.href = s.url;\n\n\t\t\t\t// Support: IE <=8 - 11 only\n\t\t\t\t// Anchor's host property isn't correctly set when s.url is relative\n\t\t\t\turlAnchor.href = urlAnchor.href;\n\t\t\t\ts.crossDomain = originAnchor.protocol + \"//\" + originAnchor.host !==\n\t\t\t\t\turlAnchor.protocol + \"//\" + urlAnchor.host;\n\t\t\t} catch ( e ) {\n\n\t\t\t\t// If there is an error parsing the URL, assume it is crossDomain,\n\t\t\t\t// it can be rejected by the transport if it is invalid\n\t\t\t\ts.crossDomain = true;\n\t\t\t}\n\t\t}\n\n\t\t// Convert data if not already a string\n\t\tif ( s.data && s.processData && typeof s.data !== \"string\" ) {\n\t\t\ts.data = jQuery.param( s.data, s.traditional );\n\t\t}\n\n\t\t// Apply prefilters\n\t\tinspectPrefiltersOrTransports( prefilters, s, options, jqXHR );\n\n\t\t// If request was aborted inside a prefilter, stop there\n\t\tif ( completed ) {\n\t\t\treturn jqXHR;\n\t\t}\n\n\t\t// We can fire global events as of now if asked to\n\t\t// Don't fire events if jQuery.event is undefined in an AMD-usage scenario (trac-15118)\n\t\tfireGlobals = jQuery.event && s.global;\n\n\t\t// Watch for a new set of requests\n\t\tif ( fireGlobals && jQuery.active++ === 0 ) {\n\t\t\tjQuery.event.trigger( \"ajaxStart\" );\n\t\t}\n\n\t\t// Uppercase the type\n\t\ts.type = s.type.toUpperCase();\n\n\t\t// Determine if request has content\n\t\ts.hasContent = !rnoContent.test( s.type );\n\n\t\t// Save the URL in case we're toying with the If-Modified-Since\n\t\t// and/or If-None-Match header later on\n\t\t// Remove hash to simplify url manipulation\n\t\tcacheURL = s.url.replace( rhash, \"\" );\n\n\t\t// More options handling for requests with no content\n\t\tif ( !s.hasContent ) {\n\n\t\t\t// Remember the hash so we can put it back\n\t\t\tuncached = s.url.slice( cacheURL.length );\n\n\t\t\t// If data is available and should be processed, append data to url\n\t\t\tif ( s.data && ( s.processData || typeof s.data === \"string\" ) ) {\n\t\t\t\tcacheURL += ( rquery.test( cacheURL ) ? \"&\" : \"?\" ) + s.data;\n\n\t\t\t\t// trac-9682: remove data so that it's not used in an eventual retry\n\t\t\t\tdelete s.data;\n\t\t\t}\n\n\t\t\t// Add or update anti-cache param if needed\n\t\t\tif ( s.cache === false ) {\n\t\t\t\tcacheURL = cacheURL.replace( rantiCache, \"$1\" );\n\t\t\t\tuncached = ( rquery.test( cacheURL ) ? \"&\" : \"?\" ) + \"_=\" + ( nonce.guid++ ) +\n\t\t\t\t\tuncached;\n\t\t\t}\n\n\t\t\t// Put hash and anti-cache on the URL that will be requested (gh-1732)\n\t\t\ts.url = cacheURL + uncached;\n\n\t\t// Change '%20' to '+' if this is encoded form body content (gh-2658)\n\t\t} else if ( s.data && s.processData &&\n\t\t\t( s.contentType || \"\" ).indexOf( \"application/x-www-form-urlencoded\" ) === 0 ) {\n\t\t\ts.data = s.data.replace( r20, \"+\" );\n\t\t}\n\n\t\t// Set the If-Modified-Since and/or If-None-Match header, if in ifModified mode.\n\t\tif ( s.ifModified ) {\n\t\t\tif ( jQuery.lastModified[ cacheURL ] ) {\n\t\t\t\tjqXHR.setRequestHeader( \"If-Modified-Since\", jQuery.lastModified[ cacheURL ] );\n\t\t\t}\n\t\t\tif ( jQuery.etag[ cacheURL ] ) {\n\t\t\t\tjqXHR.setRequestHeader( \"If-None-Match\", jQuery.etag[ cacheURL ] );\n\t\t\t}\n\t\t}\n\n\t\t// Set the correct header, if data is being sent\n\t\tif ( s.data && s.hasContent && s.contentType !== false || options.contentType ) {\n\t\t\tjqXHR.setRequestHeader( \"Content-Type\", s.contentType );\n\t\t}\n\n\t\t// Set the Accepts header for the server, depending on the dataType\n\t\tjqXHR.setRequestHeader(\n\t\t\t\"Accept\",\n\t\t\ts.dataTypes[ 0 ] && s.accepts[ s.dataTypes[ 0 ] ] ?\n\t\t\t\ts.accepts[ s.dataTypes[ 0 ] ] +\n\t\t\t\t\t( s.dataTypes[ 0 ] !== \"*\" ? \", \" + allTypes + \"; q=0.01\" : \"\" ) :\n\t\t\t\ts.accepts[ \"*\" ]\n\t\t);\n\n\t\t// Check for headers option\n\t\tfor ( i in s.headers ) {\n\t\t\tjqXHR.setRequestHeader( i, s.headers[ i ] );\n\t\t}\n\n\t\t// Allow custom headers/mimetypes and early abort\n\t\tif ( s.beforeSend &&\n\t\t\t( s.beforeSend.call( callbackContext, jqXHR, s ) === false || completed ) ) {\n\n\t\t\t// Abort if not done already and return\n\t\t\treturn jqXHR.abort();\n\t\t}\n\n\t\t// Aborting is no longer a cancellation\n\t\tstrAbort = \"abort\";\n\n\t\t// Install callbacks on deferreds\n\t\tcompleteDeferred.add( s.complete );\n\t\tjqXHR.done( s.success );\n\t\tjqXHR.fail( s.error );\n\n\t\t// Get transport\n\t\ttransport = inspectPrefiltersOrTransports( transports, s, options, jqXHR );\n\n\t\t// If no transport, we auto-abort\n\t\tif ( !transport ) {\n\t\t\tdone( -1, \"No Transport\" );\n\t\t} else {\n\t\t\tjqXHR.readyState = 1;\n\n\t\t\t// Send global event\n\t\t\tif ( fireGlobals ) {\n\t\t\t\tglobalEventContext.trigger( \"ajaxSend\", [ jqXHR, s ] );\n\t\t\t}\n\n\t\t\t// If request was aborted inside ajaxSend, stop there\n\t\t\tif ( completed ) {\n\t\t\t\treturn jqXHR;\n\t\t\t}\n\n\t\t\t// Timeout\n\t\t\tif ( s.async && s.timeout > 0 ) {\n\t\t\t\ttimeoutTimer = window.setTimeout( function() {\n\t\t\t\t\tjqXHR.abort( \"timeout\" );\n\t\t\t\t}, s.timeout );\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tcompleted = false;\n\t\t\t\ttransport.send( requestHeaders, done );\n\t\t\t} catch ( e ) {\n\n\t\t\t\t// Rethrow post-completion exceptions\n\t\t\t\tif ( completed ) {\n\t\t\t\t\tthrow e;\n\t\t\t\t}\n\n\t\t\t\t// Propagate others as results\n\t\t\t\tdone( -1, e );\n\t\t\t}\n\t\t}\n\n\t\t// Callback for when everything is done\n\t\tfunction done( status, nativeStatusText, responses, headers ) {\n\t\t\tvar isSuccess, success, error, response, modified,\n\t\t\t\tstatusText = nativeStatusText;\n\n\t\t\t// Ignore repeat invocations\n\t\t\tif ( completed ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tcompleted = true;\n\n\t\t\t// Clear timeout if it exists\n\t\t\tif ( timeoutTimer ) {\n\t\t\t\twindow.clearTimeout( timeoutTimer );\n\t\t\t}\n\n\t\t\t// Dereference transport for early garbage collection\n\t\t\t// (no matter how long the jqXHR object will be used)\n\t\t\ttransport = undefined;\n\n\t\t\t// Cache response headers\n\t\t\tresponseHeadersString = headers || \"\";\n\n\t\t\t// Set readyState\n\t\t\tjqXHR.readyState = status > 0 ? 4 : 0;\n\n\t\t\t// Determine if successful\n\t\t\tisSuccess = status >= 200 && status < 300 || status === 304;\n\n\t\t\t// Get response data\n\t\t\tif ( responses ) {\n\t\t\t\tresponse = ajaxHandleResponses( s, jqXHR, responses );\n\t\t\t}\n\n\t\t\t// Use a noop converter for missing script but not if jsonp\n\t\t\tif ( !isSuccess &&\n\t\t\t\tjQuery.inArray( \"script\", s.dataTypes ) > -1 &&\n\t\t\t\tjQuery.inArray( \"json\", s.dataTypes ) < 0 ) {\n\t\t\t\ts.converters[ \"text script\" ] = function() {};\n\t\t\t}\n\n\t\t\t// Convert no matter what (that way responseXXX fields are always set)\n\t\t\tresponse = ajaxConvert( s, response, jqXHR, isSuccess );\n\n\t\t\t// If successful, handle type chaining\n\t\t\tif ( isSuccess ) {\n\n\t\t\t\t// Set the If-Modified-Since and/or If-None-Match header, if in ifModified mode.\n\t\t\t\tif ( s.ifModified ) {\n\t\t\t\t\tmodified = jqXHR.getResponseHeader( \"Last-Modified\" );\n\t\t\t\t\tif ( modified ) {\n\t\t\t\t\t\tjQuery.lastModified[ cacheURL ] = modified;\n\t\t\t\t\t}\n\t\t\t\t\tmodified = jqXHR.getResponseHeader( \"etag\" );\n\t\t\t\t\tif ( modified ) {\n\t\t\t\t\t\tjQuery.etag[ cacheURL ] = modified;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// if no content\n\t\t\t\tif ( status === 204 || s.type === \"HEAD\" ) {\n\t\t\t\t\tstatusText = \"nocontent\";\n\n\t\t\t\t// if not modified\n\t\t\t\t} else if ( status === 304 ) {\n\t\t\t\t\tstatusText = \"notmodified\";\n\n\t\t\t\t// If we have data, let's convert it\n\t\t\t\t} else {\n\t\t\t\t\tstatusText = response.state;\n\t\t\t\t\tsuccess = response.data;\n\t\t\t\t\terror = response.error;\n\t\t\t\t\tisSuccess = !error;\n\t\t\t\t}\n\t\t\t} else {\n\n\t\t\t\t// Extract error from statusText and normalize for non-aborts\n\t\t\t\terror = statusText;\n\t\t\t\tif ( status || !statusText ) {\n\t\t\t\t\tstatusText = \"error\";\n\t\t\t\t\tif ( status < 0 ) {\n\t\t\t\t\t\tstatus = 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Set data for the fake xhr object\n\t\t\tjqXHR.status = status;\n\t\t\tjqXHR.statusText = ( nativeStatusText || statusText ) + \"\";\n\n\t\t\t// Success/Error\n\t\t\tif ( isSuccess ) {\n\t\t\t\tdeferred.resolveWith( callbackContext, [ success, statusText, jqXHR ] );\n\t\t\t} else {\n\t\t\t\tdeferred.rejectWith( callbackContext, [ jqXHR, statusText, error ] );\n\t\t\t}\n\n\t\t\t// Status-dependent callbacks\n\t\t\tjqXHR.statusCode( statusCode );\n\t\t\tstatusCode = undefined;\n\n\t\t\tif ( fireGlobals ) {\n\t\t\t\tglobalEventContext.trigger( isSuccess ? \"ajaxSuccess\" : \"ajaxError\",\n\t\t\t\t\t[ jqXHR, s, isSuccess ? success : error ] );\n\t\t\t}\n\n\t\t\t// Complete\n\t\t\tcompleteDeferred.fireWith( callbackContext, [ jqXHR, statusText ] );\n\n\t\t\tif ( fireGlobals ) {\n\t\t\t\tglobalEventContext.trigger( \"ajaxComplete\", [ jqXHR, s ] );\n\n\t\t\t\t// Handle the global AJAX counter\n\t\t\t\tif ( !( --jQuery.active ) ) {\n\t\t\t\t\tjQuery.event.trigger( \"ajaxStop\" );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn jqXHR;\n\t},\n\n\tgetJSON: function( url, data, callback ) {\n\t\treturn jQuery.get( url, data, callback, \"json\" );\n\t},\n\n\tgetScript: function( url, callback ) {\n\t\treturn jQuery.get( url, undefined, callback, \"script\" );\n\t}\n} );\n\njQuery.each( [ \"get\", \"post\" ], function( _i, method ) {\n\tjQuery[ method ] = function( url, data, callback, type ) {\n\n\t\t// Shift arguments if data argument was omitted\n\t\tif ( isFunction( data ) ) {\n\t\t\ttype = type || callback;\n\t\t\tcallback = data;\n\t\t\tdata = undefined;\n\t\t}\n\n\t\t// The url can be an options object (which then must have .url)\n\t\treturn jQuery.ajax( jQuery.extend( {\n\t\t\turl: url,\n\t\t\ttype: method,\n\t\t\tdataType: type,\n\t\t\tdata: data,\n\t\t\tsuccess: callback\n\t\t}, jQuery.isPlainObject( url ) && url ) );\n\t};\n} );\n\njQuery.ajaxPrefilter( function( s ) {\n\tvar i;\n\tfor ( i in s.headers ) {\n\t\tif ( i.toLowerCase() === \"content-type\" ) {\n\t\t\ts.contentType = s.headers[ i ] || \"\";\n\t\t}\n\t}\n} );\n\n\njQuery._evalUrl = function( url, options, doc ) {\n\treturn jQuery.ajax( {\n\t\turl: url,\n\n\t\t// Make this explicit, since user can override this through ajaxSetup (trac-11264)\n\t\ttype: \"GET\",\n\t\tdataType: \"script\",\n\t\tcache: true,\n\t\tasync: false,\n\t\tglobal: false,\n\n\t\t// Only evaluate the response if it is successful (gh-4126)\n\t\t// dataFilter is not invoked for failure responses, so using it instead\n\t\t// of the default converter is kludgy but it works.\n\t\tconverters: {\n\t\t\t\"text script\": function() {}\n\t\t},\n\t\tdataFilter: function( response ) {\n\t\t\tjQuery.globalEval( response, options, doc );\n\t\t}\n\t} );\n};\n\n\njQuery.fn.extend( {\n\twrapAll: function( html ) {\n\t\tvar wrap;\n\n\t\tif ( this[ 0 ] ) {\n\t\t\tif ( isFunction( html ) ) {\n\t\t\t\thtml = html.call( this[ 0 ] );\n\t\t\t}\n\n\t\t\t// The elements to wrap the target around\n\t\t\twrap = jQuery( html, this[ 0 ].ownerDocument ).eq( 0 ).clone( true );\n\n\t\t\tif ( this[ 0 ].parentNode ) {\n\t\t\t\twrap.insertBefore( this[ 0 ] );\n\t\t\t}\n\n\t\t\twrap.map( function() {\n\t\t\t\tvar elem = this;\n\n\t\t\t\twhile ( elem.firstElementChild ) {\n\t\t\t\t\telem = elem.firstElementChild;\n\t\t\t\t}\n\n\t\t\t\treturn elem;\n\t\t\t} ).append( this );\n\t\t}\n\n\t\treturn this;\n\t},\n\n\twrapInner: function( html ) {\n\t\tif ( isFunction( html ) ) {\n\t\t\treturn this.each( function( i ) {\n\t\t\t\tjQuery( this ).wrapInner( html.call( this, i ) );\n\t\t\t} );\n\t\t}\n\n\t\treturn this.each( function() {\n\t\t\tvar self = jQuery( this ),\n\t\t\t\tcontents = self.contents();\n\n\t\t\tif ( contents.length ) {\n\t\t\t\tcontents.wrapAll( html );\n\n\t\t\t} else {\n\t\t\t\tself.append( html );\n\t\t\t}\n\t\t} );\n\t},\n\n\twrap: function( html ) {\n\t\tvar htmlIsFunction = isFunction( html );\n\n\t\treturn this.each( function( i ) {\n\t\t\tjQuery( this ).wrapAll( htmlIsFunction ? html.call( this, i ) : html );\n\t\t} );\n\t},\n\n\tunwrap: function( selector ) {\n\t\tthis.parent( selector ).not( \"body\" ).each( function() {\n\t\t\tjQuery( this ).replaceWith( this.childNodes );\n\t\t} );\n\t\treturn this;\n\t}\n} );\n\n\njQuery.expr.pseudos.hidden = function( elem ) {\n\treturn !jQuery.expr.pseudos.visible( elem );\n};\njQuery.expr.pseudos.visible = function( elem ) {\n\treturn !!( elem.offsetWidth || elem.offsetHeight || elem.getClientRects().length );\n};\n\n\n\n\njQuery.ajaxSettings.xhr = function() {\n\ttry {\n\t\treturn new window.XMLHttpRequest();\n\t} catch ( e ) {}\n};\n\nvar xhrSuccessStatus = {\n\n\t\t// File protocol always yields status code 0, assume 200\n\t\t0: 200,\n\n\t\t// Support: IE <=9 only\n\t\t// trac-1450: sometimes IE returns 1223 when it should be 204\n\t\t1223: 204\n\t},\n\txhrSupported = jQuery.ajaxSettings.xhr();\n\nsupport.cors = !!xhrSupported && ( \"withCredentials\" in xhrSupported );\nsupport.ajax = xhrSupported = !!xhrSupported;\n\njQuery.ajaxTransport( function( options ) {\n\tvar callback, errorCallback;\n\n\t// Cross domain only allowed if supported through XMLHttpRequest\n\tif ( support.cors || xhrSupported && !options.crossDomain ) {\n\t\treturn {\n\t\t\tsend: function( headers, complete ) {\n\t\t\t\tvar i,\n\t\t\t\t\txhr = options.xhr();\n\n\t\t\t\txhr.open(\n\t\t\t\t\toptions.type,\n\t\t\t\t\toptions.url,\n\t\t\t\t\toptions.async,\n\t\t\t\t\toptions.username,\n\t\t\t\t\toptions.password\n\t\t\t\t);\n\n\t\t\t\t// Apply custom fields if provided\n\t\t\t\tif ( options.xhrFields ) {\n\t\t\t\t\tfor ( i in options.xhrFields ) {\n\t\t\t\t\t\txhr[ i ] = options.xhrFields[ i ];\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Override mime type if needed\n\t\t\t\tif ( options.mimeType && xhr.overrideMimeType ) {\n\t\t\t\t\txhr.overrideMimeType( options.mimeType );\n\t\t\t\t}\n\n\t\t\t\t// X-Requested-With header\n\t\t\t\t// For cross-domain requests, seeing as conditions for a preflight are\n\t\t\t\t// akin to a jigsaw puzzle, we simply never set it to be sure.\n\t\t\t\t// (it can always be set on a per-request basis or even using ajaxSetup)\n\t\t\t\t// For same-domain requests, won't change header if already provided.\n\t\t\t\tif ( !options.crossDomain && !headers[ \"X-Requested-With\" ] ) {\n\t\t\t\t\theaders[ \"X-Requested-With\" ] = \"XMLHttpRequest\";\n\t\t\t\t}\n\n\t\t\t\t// Set headers\n\t\t\t\tfor ( i in headers ) {\n\t\t\t\t\txhr.setRequestHeader( i, headers[ i ] );\n\t\t\t\t}\n\n\t\t\t\t// Callback\n\t\t\t\tcallback = function( type ) {\n\t\t\t\t\treturn function() {\n\t\t\t\t\t\tif ( callback ) {\n\t\t\t\t\t\t\tcallback = errorCallback = xhr.onload =\n\t\t\t\t\t\t\t\txhr.onerror = xhr.onabort = xhr.ontimeout =\n\t\t\t\t\t\t\t\t\txhr.onreadystatechange = null;\n\n\t\t\t\t\t\t\tif ( type === \"abort\" ) {\n\t\t\t\t\t\t\t\txhr.abort();\n\t\t\t\t\t\t\t} else if ( type === \"error\" ) {\n\n\t\t\t\t\t\t\t\t// Support: IE <=9 only\n\t\t\t\t\t\t\t\t// On a manual native abort, IE9 throws\n\t\t\t\t\t\t\t\t// errors on any property access that is not readyState\n\t\t\t\t\t\t\t\tif ( typeof xhr.status !== \"number\" ) {\n\t\t\t\t\t\t\t\t\tcomplete( 0, \"error\" );\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tcomplete(\n\n\t\t\t\t\t\t\t\t\t\t// File: protocol always yields status 0; see trac-8605, trac-14207\n\t\t\t\t\t\t\t\t\t\txhr.status,\n\t\t\t\t\t\t\t\t\t\txhr.statusText\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tcomplete(\n\t\t\t\t\t\t\t\t\txhrSuccessStatus[ xhr.status ] || xhr.status,\n\t\t\t\t\t\t\t\t\txhr.statusText,\n\n\t\t\t\t\t\t\t\t\t// Support: IE <=9 only\n\t\t\t\t\t\t\t\t\t// IE9 has no XHR2 but throws on binary (trac-11426)\n\t\t\t\t\t\t\t\t\t// For XHR2 non-text, let the caller handle it (gh-2498)\n\t\t\t\t\t\t\t\t\t( xhr.responseType || \"text\" ) !== \"text\"  ||\n\t\t\t\t\t\t\t\t\ttypeof xhr.responseText !== \"string\" ?\n\t\t\t\t\t\t\t\t\t\t{ binary: xhr.response } :\n\t\t\t\t\t\t\t\t\t\t{ text: xhr.responseText },\n\t\t\t\t\t\t\t\t\txhr.getAllResponseHeaders()\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t};\n\n\t\t\t\t// Listen to events\n\t\t\t\txhr.onload = callback();\n\t\t\t\terrorCallback = xhr.onerror = xhr.ontimeout = callback( \"error\" );\n\n\t\t\t\t// Support: IE 9 only\n\t\t\t\t// Use onreadystatechange to replace onabort\n\t\t\t\t// to handle uncaught aborts\n\t\t\t\tif ( xhr.onabort !== undefined ) {\n\t\t\t\t\txhr.onabort = errorCallback;\n\t\t\t\t} else {\n\t\t\t\t\txhr.onreadystatechange = function() {\n\n\t\t\t\t\t\t// Check readyState before timeout as it changes\n\t\t\t\t\t\tif ( xhr.readyState === 4 ) {\n\n\t\t\t\t\t\t\t// Allow onerror to be called first,\n\t\t\t\t\t\t\t// but that will not handle a native abort\n\t\t\t\t\t\t\t// Also, save errorCallback to a variable\n\t\t\t\t\t\t\t// as xhr.onerror cannot be accessed\n\t\t\t\t\t\t\twindow.setTimeout( function() {\n\t\t\t\t\t\t\t\tif ( callback ) {\n\t\t\t\t\t\t\t\t\terrorCallback();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\t// Create the abort callback\n\t\t\t\tcallback = callback( \"abort\" );\n\n\t\t\t\ttry {\n\n\t\t\t\t\t// Do send the request (this may raise an exception)\n\t\t\t\t\txhr.send( options.hasContent && options.data || null );\n\t\t\t\t} catch ( e ) {\n\n\t\t\t\t\t// trac-14683: Only rethrow if this hasn't been notified as an error yet\n\t\t\t\t\tif ( callback ) {\n\t\t\t\t\t\tthrow e;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tabort: function() {\n\t\t\t\tif ( callback ) {\n\t\t\t\t\tcallback();\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}\n} );\n\n\n\n\n// Prevent auto-execution of scripts when no explicit dataType was provided (See gh-2432)\njQuery.ajaxPrefilter( function( s ) {\n\tif ( s.crossDomain ) {\n\t\ts.contents.script = false;\n\t}\n} );\n\n// Install script dataType\njQuery.ajaxSetup( {\n\taccepts: {\n\t\tscript: \"text/javascript, application/javascript, \" +\n\t\t\t\"application/ecmascript, application/x-ecmascript\"\n\t},\n\tcontents: {\n\t\tscript: /\\b(?:java|ecma)script\\b/\n\t},\n\tconverters: {\n\t\t\"text script\": function( text ) {\n\t\t\tjQuery.globalEval( text );\n\t\t\treturn text;\n\t\t}\n\t}\n} );\n\n// Handle cache's special case and crossDomain\njQuery.ajaxPrefilter( \"script\", function( s ) {\n\tif ( s.cache === undefined ) {\n\t\ts.cache = false;\n\t}\n\tif ( s.crossDomain ) {\n\t\ts.type = \"GET\";\n\t}\n} );\n\n// Bind script tag hack transport\njQuery.ajaxTransport( \"script\", function( s ) {\n\n\t// This transport only deals with cross domain or forced-by-attrs requests\n\tif ( s.crossDomain || s.scriptAttrs ) {\n\t\tvar script, callback;\n\t\treturn {\n\t\t\tsend: function( _, complete ) {\n\t\t\t\tscript = jQuery( \"<script>\" )\n\t\t\t\t\t.attr( s.scriptAttrs || {} )\n\t\t\t\t\t.prop( { charset: s.scriptCharset, src: s.url } )\n\t\t\t\t\t.on( \"load error\", callback = function( evt ) {\n\t\t\t\t\t\tscript.remove();\n\t\t\t\t\t\tcallback = null;\n\t\t\t\t\t\tif ( evt ) {\n\t\t\t\t\t\t\tcomplete( evt.type === \"error\" ? 404 : 200, evt.type );\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\n\t\t\t\t// Use native DOM manipulation to avoid our domManip AJAX trickery\n\t\t\t\tdocument.head.appendChild( script[ 0 ] );\n\t\t\t},\n\t\t\tabort: function() {\n\t\t\t\tif ( callback ) {\n\t\t\t\t\tcallback();\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}\n} );\n\n\n\n\nvar oldCallbacks = [],\n\trjsonp = /(=)\\?(?=&|$)|\\?\\?/;\n\n// Default jsonp settings\njQuery.ajaxSetup( {\n\tjsonp: \"callback\",\n\tjsonpCallback: function() {\n\t\tvar callback = oldCallbacks.pop() || ( jQuery.expando + \"_\" + ( nonce.guid++ ) );\n\t\tthis[ callback ] = true;\n\t\treturn callback;\n\t}\n} );\n\n// Detect, normalize options and install callbacks for jsonp requests\njQuery.ajaxPrefilter( \"json jsonp\", function( s, originalSettings, jqXHR ) {\n\n\tvar callbackName, overwritten, responseContainer,\n\t\tjsonProp = s.jsonp !== false && ( rjsonp.test( s.url ) ?\n\t\t\t\"url\" :\n\t\t\ttypeof s.data === \"string\" &&\n\t\t\t\t( s.contentType || \"\" )\n\t\t\t\t\t.indexOf( \"application/x-www-form-urlencoded\" ) === 0 &&\n\t\t\t\trjsonp.test( s.data ) && \"data\"\n\t\t);\n\n\t// Handle iff the expected data type is \"jsonp\" or we have a parameter to set\n\tif ( jsonProp || s.dataTypes[ 0 ] === \"jsonp\" ) {\n\n\t\t// Get callback name, remembering preexisting value associated with it\n\t\tcallbackName = s.jsonpCallback = isFunction( s.jsonpCallback ) ?\n\t\t\ts.jsonpCallback() :\n\t\t\ts.jsonpCallback;\n\n\t\t// Insert callback into url or form data\n\t\tif ( jsonProp ) {\n\t\t\ts[ jsonProp ] = s[ jsonProp ].replace( rjsonp, \"$1\" + callbackName );\n\t\t} else if ( s.jsonp !== false ) {\n\t\t\ts.url += ( rquery.test( s.url ) ? \"&\" : \"?\" ) + s.jsonp + \"=\" + callbackName;\n\t\t}\n\n\t\t// Use data converter to retrieve json after script execution\n\t\ts.converters[ \"script json\" ] = function() {\n\t\t\tif ( !responseContainer ) {\n\t\t\t\tjQuery.error( callbackName + \" was not called\" );\n\t\t\t}\n\t\t\treturn responseContainer[ 0 ];\n\t\t};\n\n\t\t// Force json dataType\n\t\ts.dataTypes[ 0 ] = \"json\";\n\n\t\t// Install callback\n\t\toverwritten = window[ callbackName ];\n\t\twindow[ callbackName ] = function() {\n\t\t\tresponseContainer = arguments;\n\t\t};\n\n\t\t// Clean-up function (fires after converters)\n\t\tjqXHR.always( function() {\n\n\t\t\t// If previous value didn't exist - remove it\n\t\t\tif ( overwritten === undefined ) {\n\t\t\t\tjQuery( window ).removeProp( callbackName );\n\n\t\t\t// Otherwise restore preexisting value\n\t\t\t} else {\n\t\t\t\twindow[ callbackName ] = overwritten;\n\t\t\t}\n\n\t\t\t// Save back as free\n\t\t\tif ( s[ callbackName ] ) {\n\n\t\t\t\t// Make sure that re-using the options doesn't screw things around\n\t\t\t\ts.jsonpCallback = originalSettings.jsonpCallback;\n\n\t\t\t\t// Save the callback name for future use\n\t\t\t\toldCallbacks.push( callbackName );\n\t\t\t}\n\n\t\t\t// Call if it was a function and we have a response\n\t\t\tif ( responseContainer && isFunction( overwritten ) ) {\n\t\t\t\toverwritten( responseContainer[ 0 ] );\n\t\t\t}\n\n\t\t\tresponseContainer = overwritten = undefined;\n\t\t} );\n\n\t\t// Delegate to script\n\t\treturn \"script\";\n\t}\n} );\n\n\n\n\n// Support: Safari 8 only\n// In Safari 8 documents created via document.implementation.createHTMLDocument\n// collapse sibling forms: the second one becomes a child of the first one.\n// Because of that, this security measure has to be disabled in Safari 8.\n// https://bugs.webkit.org/show_bug.cgi?id=137337\nsupport.createHTMLDocument = ( function() {\n\tvar body = document.implementation.createHTMLDocument( \"\" ).body;\n\tbody.innerHTML = \"<form></form><form></form>\";\n\treturn body.childNodes.length === 2;\n} )();\n\n\n// Argument \"data\" should be string of html\n// context (optional): If specified, the fragment will be created in this context,\n// defaults to document\n// keepScripts (optional): If true, will include scripts passed in the html string\njQuery.parseHTML = function( data, context, keepScripts ) {\n\tif ( typeof data !== \"string\" ) {\n\t\treturn [];\n\t}\n\tif ( typeof context === \"boolean\" ) {\n\t\tkeepScripts = context;\n\t\tcontext = false;\n\t}\n\n\tvar base, parsed, scripts;\n\n\tif ( !context ) {\n\n\t\t// Stop scripts or inline event handlers from being executed immediately\n\t\t// by using document.implementation\n\t\tif ( support.createHTMLDocument ) {\n\t\t\tcontext = document.implementation.createHTMLDocument( \"\" );\n\n\t\t\t// Set the base href for the created document\n\t\t\t// so any parsed elements with URLs\n\t\t\t// are based on the document's URL (gh-2965)\n\t\t\tbase = context.createElement( \"base\" );\n\t\t\tbase.href = document.location.href;\n\t\t\tcontext.head.appendChild( base );\n\t\t} else {\n\t\t\tcontext = document;\n\t\t}\n\t}\n\n\tparsed = rsingleTag.exec( data );\n\tscripts = !keepScripts && [];\n\n\t// Single tag\n\tif ( parsed ) {\n\t\treturn [ context.createElement( parsed[ 1 ] ) ];\n\t}\n\n\tparsed = buildFragment( [ data ], context, scripts );\n\n\tif ( scripts && scripts.length ) {\n\t\tjQuery( scripts ).remove();\n\t}\n\n\treturn jQuery.merge( [], parsed.childNodes );\n};\n\n\n/**\n * Load a url into a page\n */\njQuery.fn.load = function( url, params, callback ) {\n\tvar selector, type, response,\n\t\tself = this,\n\t\toff = url.indexOf( \" \" );\n\n\tif ( off > -1 ) {\n\t\tselector = stripAndCollapse( url.slice( off ) );\n\t\turl = url.slice( 0, off );\n\t}\n\n\t// If it's a function\n\tif ( isFunction( params ) ) {\n\n\t\t// We assume that it's the callback\n\t\tcallback = params;\n\t\tparams = undefined;\n\n\t// Otherwise, build a param string\n\t} else if ( params && typeof params === \"object\" ) {\n\t\ttype = \"POST\";\n\t}\n\n\t// If we have elements to modify, make the request\n\tif ( self.length > 0 ) {\n\t\tjQuery.ajax( {\n\t\t\turl: url,\n\n\t\t\t// If \"type\" variable is undefined, then \"GET\" method will be used.\n\t\t\t// Make value of this field explicit since\n\t\t\t// user can override it through ajaxSetup method\n\t\t\ttype: type || \"GET\",\n\t\t\tdataType: \"html\",\n\t\t\tdata: params\n\t\t} ).done( function( responseText ) {\n\n\t\t\t// Save response for use in complete callback\n\t\t\tresponse = arguments;\n\n\t\t\tself.html( selector ?\n\n\t\t\t\t// If a selector was specified, locate the right elements in a dummy div\n\t\t\t\t// Exclude scripts to avoid IE 'Permission Denied' errors\n\t\t\t\tjQuery( \"<div>\" ).append( jQuery.parseHTML( responseText ) ).find( selector ) :\n\n\t\t\t\t// Otherwise use the full result\n\t\t\t\tresponseText );\n\n\t\t// If the request succeeds, this function gets \"data\", \"status\", \"jqXHR\"\n\t\t// but they are ignored because response was set above.\n\t\t// If it fails, this function gets \"jqXHR\", \"status\", \"error\"\n\t\t} ).always( callback && function( jqXHR, status ) {\n\t\t\tself.each( function() {\n\t\t\t\tcallback.apply( this, response || [ jqXHR.responseText, status, jqXHR ] );\n\t\t\t} );\n\t\t} );\n\t}\n\n\treturn this;\n};\n\n\n\n\njQuery.expr.pseudos.animated = function( elem ) {\n\treturn jQuery.grep( jQuery.timers, function( fn ) {\n\t\treturn elem === fn.elem;\n\t} ).length;\n};\n\n\n\n\njQuery.offset = {\n\tsetOffset: function( elem, options, i ) {\n\t\tvar curPosition, curLeft, curCSSTop, curTop, curOffset, curCSSLeft, calculatePosition,\n\t\t\tposition = jQuery.css( elem, \"position\" ),\n\t\t\tcurElem = jQuery( elem ),\n\t\t\tprops = {};\n\n\t\t// Set position first, in-case top/left are set even on static elem\n\t\tif ( position === \"static\" ) {\n\t\t\telem.style.position = \"relative\";\n\t\t}\n\n\t\tcurOffset = curElem.offset();\n\t\tcurCSSTop = jQuery.css( elem, \"top\" );\n\t\tcurCSSLeft = jQuery.css( elem, \"left\" );\n\t\tcalculatePosition = ( position === \"absolute\" || position === \"fixed\" ) &&\n\t\t\t( curCSSTop + curCSSLeft ).indexOf( \"auto\" ) > -1;\n\n\t\t// Need to be able to calculate position if either\n\t\t// top or left is auto and position is either absolute or fixed\n\t\tif ( calculatePosition ) {\n\t\t\tcurPosition = curElem.position();\n\t\t\tcurTop = curPosition.top;\n\t\t\tcurLeft = curPosition.left;\n\n\t\t} else {\n\t\t\tcurTop = parseFloat( curCSSTop ) || 0;\n\t\t\tcurLeft = parseFloat( curCSSLeft ) || 0;\n\t\t}\n\n\t\tif ( isFunction( options ) ) {\n\n\t\t\t// Use jQuery.extend here to allow modification of coordinates argument (gh-1848)\n\t\t\toptions = options.call( elem, i, jQuery.extend( {}, curOffset ) );\n\t\t}\n\n\t\tif ( options.top != null ) {\n\t\t\tprops.top = ( options.top - curOffset.top ) + curTop;\n\t\t}\n\t\tif ( options.left != null ) {\n\t\t\tprops.left = ( options.left - curOffset.left ) + curLeft;\n\t\t}\n\n\t\tif ( \"using\" in options ) {\n\t\t\toptions.using.call( elem, props );\n\n\t\t} else {\n\t\t\tcurElem.css( props );\n\t\t}\n\t}\n};\n\njQuery.fn.extend( {\n\n\t// offset() relates an element's border box to the document origin\n\toffset: function( options ) {\n\n\t\t// Preserve chaining for setter\n\t\tif ( arguments.length ) {\n\t\t\treturn options === undefined ?\n\t\t\t\tthis :\n\t\t\t\tthis.each( function( i ) {\n\t\t\t\t\tjQuery.offset.setOffset( this, options, i );\n\t\t\t\t} );\n\t\t}\n\n\t\tvar rect, win,\n\t\t\telem = this[ 0 ];\n\n\t\tif ( !elem ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Return zeros for disconnected and hidden (display: none) elements (gh-2310)\n\t\t// Support: IE <=11 only\n\t\t// Running getBoundingClientRect on a\n\t\t// disconnected node in IE throws an error\n\t\tif ( !elem.getClientRects().length ) {\n\t\t\treturn { top: 0, left: 0 };\n\t\t}\n\n\t\t// Get document-relative position by adding viewport scroll to viewport-relative gBCR\n\t\trect = elem.getBoundingClientRect();\n\t\twin = elem.ownerDocument.defaultView;\n\t\treturn {\n\t\t\ttop: rect.top + win.pageYOffset,\n\t\t\tleft: rect.left + win.pageXOffset\n\t\t};\n\t},\n\n\t// position() relates an element's margin box to its offset parent's padding box\n\t// This corresponds to the behavior of CSS absolute positioning\n\tposition: function() {\n\t\tif ( !this[ 0 ] ) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar offsetParent, offset, doc,\n\t\t\telem = this[ 0 ],\n\t\t\tparentOffset = { top: 0, left: 0 };\n\n\t\t// position:fixed elements are offset from the viewport, which itself always has zero offset\n\t\tif ( jQuery.css( elem, \"position\" ) === \"fixed\" ) {\n\n\t\t\t// Assume position:fixed implies availability of getBoundingClientRect\n\t\t\toffset = elem.getBoundingClientRect();\n\n\t\t} else {\n\t\t\toffset = this.offset();\n\n\t\t\t// Account for the *real* offset parent, which can be the document or its root element\n\t\t\t// when a statically positioned element is identified\n\t\t\tdoc = elem.ownerDocument;\n\t\t\toffsetParent = elem.offsetParent || doc.documentElement;\n\t\t\twhile ( offsetParent &&\n\t\t\t\t( offsetParent === doc.body || offsetParent === doc.documentElement ) &&\n\t\t\t\tjQuery.css( offsetParent, \"position\" ) === \"static\" ) {\n\n\t\t\t\toffsetParent = offsetParent.parentNode;\n\t\t\t}\n\t\t\tif ( offsetParent && offsetParent !== elem && offsetParent.nodeType === 1 ) {\n\n\t\t\t\t// Incorporate borders into its offset, since they are outside its content origin\n\t\t\t\tparentOffset = jQuery( offsetParent ).offset();\n\t\t\t\tparentOffset.top += jQuery.css( offsetParent, \"borderTopWidth\", true );\n\t\t\t\tparentOffset.left += jQuery.css( offsetParent, \"borderLeftWidth\", true );\n\t\t\t}\n\t\t}\n\n\t\t// Subtract parent offsets and element margins\n\t\treturn {\n\t\t\ttop: offset.top - parentOffset.top - jQuery.css( elem, \"marginTop\", true ),\n\t\t\tleft: offset.left - parentOffset.left - jQuery.css( elem, \"marginLeft\", true )\n\t\t};\n\t},\n\n\t// This method will return documentElement in the following cases:\n\t// 1) For the element inside the iframe without offsetParent, this method will return\n\t//    documentElement of the parent window\n\t// 2) For the hidden or detached element\n\t// 3) For body or html element, i.e. in case of the html node - it will return itself\n\t//\n\t// but those exceptions were never presented as a real life use-cases\n\t// and might be considered as more preferable results.\n\t//\n\t// This logic, however, is not guaranteed and can change at any point in the future\n\toffsetParent: function() {\n\t\treturn this.map( function() {\n\t\t\tvar offsetParent = this.offsetParent;\n\n\t\t\twhile ( offsetParent && jQuery.css( offsetParent, \"position\" ) === \"static\" ) {\n\t\t\t\toffsetParent = offsetParent.offsetParent;\n\t\t\t}\n\n\t\t\treturn offsetParent || documentElement;\n\t\t} );\n\t}\n} );\n\n// Create scrollLeft and scrollTop methods\njQuery.each( { scrollLeft: \"pageXOffset\", scrollTop: \"pageYOffset\" }, function( method, prop ) {\n\tvar top = \"pageYOffset\" === prop;\n\n\tjQuery.fn[ method ] = function( val ) {\n\t\treturn access( this, function( elem, method, val ) {\n\n\t\t\t// Coalesce documents and windows\n\t\t\tvar win;\n\t\t\tif ( isWindow( elem ) ) {\n\t\t\t\twin = elem;\n\t\t\t} else if ( elem.nodeType === 9 ) {\n\t\t\t\twin = elem.defaultView;\n\t\t\t}\n\n\t\t\tif ( val === undefined ) {\n\t\t\t\treturn win ? win[ prop ] : elem[ method ];\n\t\t\t}\n\n\t\t\tif ( win ) {\n\t\t\t\twin.scrollTo(\n\t\t\t\t\t!top ? val : win.pageXOffset,\n\t\t\t\t\ttop ? val : win.pageYOffset\n\t\t\t\t);\n\n\t\t\t} else {\n\t\t\t\telem[ method ] = val;\n\t\t\t}\n\t\t}, method, val, arguments.length );\n\t};\n} );\n\n// Support: Safari <=7 - 9.1, Chrome <=37 - 49\n// Add the top/left cssHooks using jQuery.fn.position\n// Webkit bug: https://bugs.webkit.org/show_bug.cgi?id=29084\n// Blink bug: https://bugs.chromium.org/p/chromium/issues/detail?id=589347\n// getComputedStyle returns percent when specified for top/left/bottom/right;\n// rather than make the css module depend on the offset module, just check for it here\njQuery.each( [ \"top\", \"left\" ], function( _i, prop ) {\n\tjQuery.cssHooks[ prop ] = addGetHookIf( support.pixelPosition,\n\t\tfunction( elem, computed ) {\n\t\t\tif ( computed ) {\n\t\t\t\tcomputed = curCSS( elem, prop );\n\n\t\t\t\t// If curCSS returns percentage, fallback to offset\n\t\t\t\treturn rnumnonpx.test( computed ) ?\n\t\t\t\t\tjQuery( elem ).position()[ prop ] + \"px\" :\n\t\t\t\t\tcomputed;\n\t\t\t}\n\t\t}\n\t);\n} );\n\n\n// Create innerHeight, innerWidth, height, width, outerHeight and outerWidth methods\njQuery.each( { Height: \"height\", Width: \"width\" }, function( name, type ) {\n\tjQuery.each( {\n\t\tpadding: \"inner\" + name,\n\t\tcontent: type,\n\t\t\"\": \"outer\" + name\n\t}, function( defaultExtra, funcName ) {\n\n\t\t// Margin is only for outerHeight, outerWidth\n\t\tjQuery.fn[ funcName ] = function( margin, value ) {\n\t\t\tvar chainable = arguments.length && ( defaultExtra || typeof margin !== \"boolean\" ),\n\t\t\t\textra = defaultExtra || ( margin === true || value === true ? \"margin\" : \"border\" );\n\n\t\t\treturn access( this, function( elem, type, value ) {\n\t\t\t\tvar doc;\n\n\t\t\t\tif ( isWindow( elem ) ) {\n\n\t\t\t\t\t// $( window ).outerWidth/Height return w/h including scrollbars (gh-1729)\n\t\t\t\t\treturn funcName.indexOf( \"outer\" ) === 0 ?\n\t\t\t\t\t\telem[ \"inner\" + name ] :\n\t\t\t\t\t\telem.document.documentElement[ \"client\" + name ];\n\t\t\t\t}\n\n\t\t\t\t// Get document width or height\n\t\t\t\tif ( elem.nodeType === 9 ) {\n\t\t\t\t\tdoc = elem.documentElement;\n\n\t\t\t\t\t// Either scroll[Width/Height] or offset[Width/Height] or client[Width/Height],\n\t\t\t\t\t// whichever is greatest\n\t\t\t\t\treturn Math.max(\n\t\t\t\t\t\telem.body[ \"scroll\" + name ], doc[ \"scroll\" + name ],\n\t\t\t\t\t\telem.body[ \"offset\" + name ], doc[ \"offset\" + name ],\n\t\t\t\t\t\tdoc[ \"client\" + name ]\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\treturn value === undefined ?\n\n\t\t\t\t\t// Get width or height on the element, requesting but not forcing parseFloat\n\t\t\t\t\tjQuery.css( elem, type, extra ) :\n\n\t\t\t\t\t// Set width or height on the element\n\t\t\t\t\tjQuery.style( elem, type, value, extra );\n\t\t\t}, type, chainable ? margin : undefined, chainable );\n\t\t};\n\t} );\n} );\n\n\njQuery.each( [\n\t\"ajaxStart\",\n\t\"ajaxStop\",\n\t\"ajaxComplete\",\n\t\"ajaxError\",\n\t\"ajaxSuccess\",\n\t\"ajaxSend\"\n], function( _i, type ) {\n\tjQuery.fn[ type ] = function( fn ) {\n\t\treturn this.on( type, fn );\n\t};\n} );\n\n\n\n\njQuery.fn.extend( {\n\n\tbind: function( types, data, fn ) {\n\t\treturn this.on( types, null, data, fn );\n\t},\n\tunbind: function( types, fn ) {\n\t\treturn this.off( types, null, fn );\n\t},\n\n\tdelegate: function( selector, types, data, fn ) {\n\t\treturn this.on( types, selector, data, fn );\n\t},\n\tundelegate: function( selector, types, fn ) {\n\n\t\t// ( namespace ) or ( selector, types [, fn] )\n\t\treturn arguments.length === 1 ?\n\t\t\tthis.off( selector, \"**\" ) :\n\t\t\tthis.off( types, selector || \"**\", fn );\n\t},\n\n\thover: function( fnOver, fnOut ) {\n\t\treturn this\n\t\t\t.on( \"mouseenter\", fnOver )\n\t\t\t.on( \"mouseleave\", fnOut || fnOver );\n\t}\n} );\n\njQuery.each(\n\t( \"blur focus focusin focusout resize scroll click dblclick \" +\n\t\"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave \" +\n\t\"change select submit keydown keypress keyup contextmenu\" ).split( \" \" ),\n\tfunction( _i, name ) {\n\n\t\t// Handle event binding\n\t\tjQuery.fn[ name ] = function( data, fn ) {\n\t\t\treturn arguments.length > 0 ?\n\t\t\t\tthis.on( name, null, data, fn ) :\n\t\t\t\tthis.trigger( name );\n\t\t};\n\t}\n);\n\n\n\n\n// Support: Android <=4.0 only\n// Make sure we trim BOM and NBSP\n// Require that the \"whitespace run\" starts from a non-whitespace\n// to avoid O(N^2) behavior when the engine would try matching \"\\s+$\" at each space position.\nvar rtrim = /^[\\s\\uFEFF\\xA0]+|([^\\s\\uFEFF\\xA0])[\\s\\uFEFF\\xA0]+$/g;\n\n// Bind a function to a context, optionally partially applying any\n// arguments.\n// jQuery.proxy is deprecated to promote standards (specifically Function#bind)\n// However, it is not slated for removal any time soon\njQuery.proxy = function( fn, context ) {\n\tvar tmp, args, proxy;\n\n\tif ( typeof context === \"string\" ) {\n\t\ttmp = fn[ context ];\n\t\tcontext = fn;\n\t\tfn = tmp;\n\t}\n\n\t// Quick check to determine if target is callable, in the spec\n\t// this throws a TypeError, but we will just return undefined.\n\tif ( !isFunction( fn ) ) {\n\t\treturn undefined;\n\t}\n\n\t// Simulated bind\n\targs = slice.call( arguments, 2 );\n\tproxy = function() {\n\t\treturn fn.apply( context || this, args.concat( slice.call( arguments ) ) );\n\t};\n\n\t// Set the guid of unique handler to the same of original handler, so it can be removed\n\tproxy.guid = fn.guid = fn.guid || jQuery.guid++;\n\n\treturn proxy;\n};\n\njQuery.holdReady = function( hold ) {\n\tif ( hold ) {\n\t\tjQuery.readyWait++;\n\t} else {\n\t\tjQuery.ready( true );\n\t}\n};\njQuery.isArray = Array.isArray;\njQuery.parseJSON = JSON.parse;\njQuery.nodeName = nodeName;\njQuery.isFunction = isFunction;\njQuery.isWindow = isWindow;\njQuery.camelCase = camelCase;\njQuery.type = toType;\n\njQuery.now = Date.now;\n\njQuery.isNumeric = function( obj ) {\n\n\t// As of jQuery 3.0, isNumeric is limited to\n\t// strings and numbers (primitives or objects)\n\t// that can be coerced to finite numbers (gh-2662)\n\tvar type = jQuery.type( obj );\n\treturn ( type === \"number\" || type === \"string\" ) &&\n\n\t\t// parseFloat NaNs numeric-cast false positives (\"\")\n\t\t// ...but misinterprets leading-number strings, particularly hex literals (\"0x...\")\n\t\t// subtraction forces infinities to NaN\n\t\t!isNaN( obj - parseFloat( obj ) );\n};\n\njQuery.trim = function( text ) {\n\treturn text == null ?\n\t\t\"\" :\n\t\t( text + \"\" ).replace( rtrim, \"$1\" );\n};\n\n\n\n// Register as a named AMD module, since jQuery can be concatenated with other\n// files that may use define, but not via a proper concatenation script that\n// understands anonymous AMD modules. A named AMD is safest and most robust\n// way to register. Lowercase jquery is used because AMD module names are\n// derived from file names, and jQuery is normally delivered in a lowercase\n// file name. Do this after creating the global so that if an AMD module wants\n// to call noConflict to hide this version of jQuery, it will work.\n\n// Note that for maximum portability, libraries that are not jQuery should\n// declare themselves as anonymous modules, and avoid setting a global if an\n// AMD loader is present. jQuery is a special case. For more information, see\n// https://github.com/jrburke/requirejs/wiki/Updating-existing-libraries#wiki-anon\n\nif ( typeof define === \"function\" && define.amd ) {\n\tdefine( \"jquery\", [], function() {\n\t\treturn jQuery;\n\t} );\n}\n\n\n\n\nvar\n\n\t// Map over jQuery in case of overwrite\n\t_jQuery = window.jQuery,\n\n\t// Map over the $ in case of overwrite\n\t_$ = window.$;\n\njQuery.noConflict = function( deep ) {\n\tif ( window.$ === jQuery ) {\n\t\twindow.$ = _$;\n\t}\n\n\tif ( deep && window.jQuery === jQuery ) {\n\t\twindow.jQuery = _jQuery;\n\t}\n\n\treturn jQuery;\n};\n\n// Expose jQuery and $ identifiers, even in AMD\n// (trac-7102#comment:10, https://github.com/jquery/jquery/pull/557)\n// and CommonJS for browser emulators (trac-13566)\nif ( typeof noGlobal === \"undefined\" ) {\n\twindow.jQuery = window.$ = jQuery;\n}\n\n\n\n\nreturn jQuery;\n} );\n","\r\nconst contains2 = function (a, obj) {\r\n\tfor (var i = 0; i < a.length; i++) {\r\n\t\tif (a[i] === obj) {\r\n\t\t\treturn i;\r\n\t\t}\r\n\t}\r\n\treturn -1;\r\n}\r\n\r\n\r\nvar jQuery = require(\"jquery\");\r\n\r\nvar OAT = {};\r\n\r\n\r\n\t/* global namespace */\r\n\tOAT.Preferences = {\r\n\t\tshowAjax: 1, \r\n\t\tuseCursors: 1, \r\n\t\twindowTypeOverride: 0, \r\n\t\tversion: \"10.08.2023\",\r\n\t\thttpError: 1, \r\n\t\tallowDefaultResize: 1,\r\n\t\tallowDefaultDrag: 1\r\n\t}\r\n\r\n\tOAT.$ = function (something) {\r\n\t\tif (typeof (something) == \"string\") {\r\n\t\t\tvar elm = document.getElementById(something);\r\n\t\t} else {\r\n\t\t\tvar elm = something;\r\n\t\t}\r\n\t\tif (something instanceof Array) {\r\n\t\t\tvar elm = [];\r\n\t\t\tfor (var i = 0; i < something.length; i++) { elm.push(OAT.$(something[i])); }\r\n\t\t}\r\n\t\tif (!elm) return false;\r\n\t\treturn elm;\r\n\t}\r\n\r\n\tOAT.$$ = function (className, root) {\r\n\t\tvar e = root || document;\r\n\t\tvar elms = e.getElementsByTagName(\"*\");\r\n\t\tvar matches = [];\r\n\r\n\t\tif (OAT.Dom.isClass(e, className)) { matches.push(e); }\r\n\t\tfor (var i = 0; i < elms.length; i++) {\r\n\t\t\tif (OAT.Dom.isClass(elms[i], className)) { matches.push(elms[i]); }\r\n\t\t}\r\n\t\treturn matches;\r\n\t}\r\n\r\n\tOAT.$v = function (something) {\r\n\t\tvar e = OAT.$(something);\r\n\t\tif (!e) return false;\r\n\t\tif (!(\"value\" in e)) return false;\r\n\t\treturn e.value;\r\n\t}\r\n\r\n\r\n\t/* several helpful prototypes */\r\n\tArray.prototype.findIndex = function (str) {\r\n\t\tfor (var i = 0; i < this.length; i++) if (this[i] == str) { return i; }\r\n\t\treturn -1;\r\n\t}\r\n\r\n\tString.prototype.trimpivot = function () {\r\n\t\tvar result = this.match(/^ *(.*?) *$/);\r\n\t\treturn (result ? result[1] : this);\r\n\t}\r\n\r\n\r\n\tOAT.addTextNode = function (node, text) {\r\n\t\tvar txtNode = document.createTextNode(text)\r\n\t\tvar nodeJ = jQuery('<span id=\"span_txt_pivot\"></span>')[0]\r\n\t\tnodeJ.appendChild(txtNode)\r\n\t\tnode.appendChild(nodeJ)\r\n\t}\r\n\t\r\n\t\r\n\tOAT.addImageNode = function(parent, icon_name, style, id)\r\n\t{\r\n\t\tvar icon = document.createElement(\"i\");\r\n\t\tif (id!=undefined){\r\n\t\t\ticon.setAttribute(\"id\", id);\r\n\t\t}\r\n\t\ticon.setAttribute(\"class\", \"material-icons\");\r\n\t\ticon.setAttribute(\"style\", style)\r\n\t\ticon.textContent = icon_name;  \r\n\t\tparent.appendChild(icon);\t\r\n\t}\r\n\r\n\tOAT.replaceTextNode = function (node, text) {\r\n\t\twhile (node.firstChild) {\r\n\t\t\tnode.removeChild(node.firstChild);\r\n\t\t}\r\n\t\tvar txtNode = document.createTextNode(text)\r\n\t\tnode.appendChild(txtNode)\r\n\t}\r\n\t\r\n\tOAT.AddItemToList = function (list, item) {\r\n\t\tif (list.indexOf(item) == -1) {\r\n\t\t\tlist.push(item);\r\n\t\t}\r\n\t\treturn list.sort(function(a, b) {\r\n  \t\t\t\treturn a - b;\r\n\t\t\t\t});\r\n\t} \r\n\t\r\n\tOAT.removeIconFont = function (text) {\r\n\t\treturn text.replace(/arrow_drop_up/g, '').replace(/arrow_drop_down/g, '').replace(/remove/g, '').replace(/add/g, '').replace(/settings/g, '');\r\n\t}\r\n\r\n\tOAT.ApplyPictureValue = function (value, type, defaultPicture, picture) { /* function responsible for set pictures */\r\n\t\tif (value == \"#NuN#\") {\r\n\t\t\tvar defaultNull = defaultPicture.getAttribute(\"textForNullValues\");\r\n\t\t\tif (defaultNull == \"\") {\r\n\t\t\t\treturn \"\\u00A0\";\r\n\t\t\t}\r\n\t\t\tif (defaultNull != undefined) {\r\n\t\t\t\treturn defaultNull;\r\n\t\t\t}\r\n\t\t\treturn \"\\u00A0\";\r\n\r\n\t\t}\r\n\t\t\r\n\t\t\tvar decimalSeparator = (defaultPicture.getAttribute(\"decimalSeparator\") != undefined && defaultPicture.getAttribute(\"decimalSeparator\") != null) ? defaultPicture.getAttribute(\"decimalSeparator\") : \".\";\r\n\t\t\tvar decimalPlaces = (defaultPicture.getAttribute(\"decimalPlaces\") != undefined && defaultPicture.getAttribute(\"decimalPlaces\") != null) ? defaultPicture.getAttribute(\"decimalPlaces\") : 2;\r\n\t\t\tvar thseparator = defaultPicture.getAttribute(\"thousandsSeparator\")\r\n\t\t\tvar defaultdate = defaultPicture.getAttribute(\"dateFormat\")\r\n\t\t\tvar newValue = value;\r\n\t\t\tvar lastCharacter = false;\r\n\r\n\t\t\tvar hasprefix = false;\r\n\t\t\tvar prefix = \"\";\r\n\t\t\tif ((type == \"integer\") || (type == \"real\")) {\r\n\t\t\t\tif ((picture != undefined) || (picture != null)) {\r\n\t\t\t\t\tif ((picture[0] != \"Z\") || (picture[0] != \"9\") || (picture[0] != \",\") || (picture[0] != \".\")) {\r\n\t\t\t\t\t\thasprefix = true;\r\n\t\t\t\t\t\tvar index = 0;\r\n\t\t\t\t\t\twhile ((picture.length > index) && (picture[index] != \"Z\") && (picture[index] != \"9\") && (picture[index] != \",\") && (picture[index] != \".\")) {\r\n\t\t\t\t\t\t\tindex++;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tprefix = picture.substring(0, index);\r\n\t\t\t\t\t\tpicture = picture.substring(index);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar hassufix = false;\r\n\t\t\tvar sufix = \"\";\r\n\t\t\tif ((type == \"integer\") || (type == \"real\")) {\r\n\t\t\t\tif ((picture != undefined) || (picture != null)) {\r\n\t\t\t\t\tif ((picture[picture.length - 1] != \"Z\") || (picture[picture.length - 1] != \"9\") || (picture[picture.length - 1] != \",\") || (picture[picture.length - 1] != \".\")) {\r\n\t\t\t\t\t\thassufix = true;\r\n\t\t\t\t\t\tvar index = picture.length - 1;\r\n\t\t\t\t\t\twhile ((index > -1) && (picture[index] != \"Z\") && (picture[index] != \"9\") && (picture[index] != \",\") && (picture[index] != \".\")) {\r\n\t\t\t\t\t\t\tindex--;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tsufix = picture.substring(index + 1);\r\n\t\t\t\t\t\tpicture = picture.substring(0, index + 1);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tswitch (type) {\r\n\t\t\t\tcase \"integer\":\r\n\t\t\t\t\tdecimalPlaces = 0;\r\n\t\t\t\tcase \"real\":\r\n\t\t\t\t\t\r\n\t\t\t\t\tif ((picture != undefined) && (picture != \"\")) {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (typeof qv == \"undefined\")\r\n\t\t\t\t\t\t\tvar newValue = parseFloat(value)\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\tqv.util.formatNumber(parseFloat(value), decimalPlaces, picture, false);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvar valueSplit = value.split(\".\");\r\n\t\t\t\t\t\tvar useSeparator = true;\r\n\t\t\t\t\t\tif ((picture == \"\") && (type == \"integer\")) {\r\n\t\t\t\t\t\t\tuseSeparator = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (type == \"real\") {\r\n\t\t\t\t\t\t\tnewValue = parseFloat(value).toFixed(2);\r\n\t\t\t\t\t\t\tvalueSplit = newValue.split(\".\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\t\tnewValue = valueSplit[0];\r\n\t\t\t\t\t\r\n\r\n\r\n\t\t\t\t\t\tvar z_pos = -1;\r\n\t\t\t\t\t\tif ((picture != undefined) && (picture != \"\")) {\r\n\t\t\t\t\t\t\tvar picteSplit = picture.split(\".\");\r\n\t\t\t\t\t\t\tif (picteSplit.length > 1)\r\n\t\t\t\t\t\t\t\tz_pos = picteSplit[1].indexOf(\"Z\");\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (valueSplit[1] == null) {\r\n\t\t\t\t\t\t\tif (useSeparator) {\r\n\t\t\t\t\t\t\t\tvar numoblig = decimalPlaces;\r\n\t\t\t\t\t\t\t\tif (z_pos != -1) {\r\n\t\t\t\t\t\t\t\t\tnumoblig = z_pos;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (numoblig > 0) {\r\n\t\t\t\t\t\t\t\t\tnewValue = newValue + decimalSeparator;\r\n\t\t\t\t\t\t\t\t\tfor (var i = 0; i < numoblig; i++) {\r\n\t\t\t\t\t\t\t\t\t\tnewValue = newValue + \"0\";\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (useSeparator) {\r\n\r\n\t\t\t\t\t\t\t\tif (z_pos === -1) { //only 9s in decimal picture\r\n\t\t\t\t\t\t\t\t\tif (valueSplit[1].length < decimalPlaces) {\r\n\t\t\t\t\t\t\t\t\t\tnewValue = newValue + decimalSeparator + valueSplit[1];\r\n\t\t\t\t\t\t\t\t\t\tfor (var i = 0; i < decimalPlaces - valueSplit[1].length; i++) {\r\n\t\t\t\t\t\t\t\t\t\t\tnewValue = newValue + \"0\";\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tif (valueSplit[1].length > decimalPlaces) {\r\n\t\t\t\t\t\t\t\t\t\t\tvar newArray = \"\";\r\n\t\t\t\t\t\t\t\t\t\t\tfor (var i = 0; i < decimalPlaces; i++) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tnewArray = newArray + valueSplit[1].charAt(i);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\tnewValue = newValue + decimalSeparator + newArray;\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tnewValue = newValue + decimalSeparator + valueSplit[1];\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tvar numberoblig = z_pos;\r\n\t\t\t\t\t\t\t\t\tif (valueSplit[1].length < decimalPlaces) {\r\n\t\t\t\t\t\t\t\t\t\tif ((valueSplit[1].length > 0) || (numberoblig > 0)) {\r\n\t\t\t\t\t\t\t\t\t\t\tnewValue = newValue + decimalSeparator + valueSplit[1];\r\n\t\t\t\t\t\t\t\t\t\t\tfor (var i = 0; i < numberoblig - valueSplit[1].length; i++) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tnewValue = newValue + \"0\";\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t} else { //idem sin Z\r\n\t\t\t\t\t\t\t\t\t\tif (valueSplit[1].length > decimalPlaces) {\r\n\t\t\t\t\t\t\t\t\t\t\tvar newArray = \"\";\r\n\t\t\t\t\t\t\t\t\t\t\tfor (var i = 0; i < decimalPlaces; i++) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tnewArray = newArray + valueSplit[1].charAt(i);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\tnewValue = newValue + decimalSeparator + newArray;\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tnewValue = newValue + decimalSeparator + valueSplit[1];\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"date\":\r\n\t\t\t\t\tif (value == \"\") return \"\";\r\n\t\t\t\t\tif (picture === \"\") {\r\n\t\t\t\t\t\tvar dates = value.split(\"-\");\r\n\t\t\t\t\t\tvar newValue = value;\r\n\t\t\t\t\t\tif ((defaultdate != undefined) && (defaultdate != null)) {//if default picture\r\n\t\t\t\t\t\t\tpict = defaultdate.split(\"\");\r\n\t\t\t\t\t\t\tnewValue = \"\";\r\n\t\t\t\t\t\t\tfor (var i = 0; i <= 2; i++) {\r\n\t\t\t\t\t\t\t\tif (pict[i] === \"M\")\r\n\t\t\t\t\t\t\t\t\tnewValue = newValue + dates[1];\r\n\t\t\t\t\t\t\t\tif (pict[i] === \"D\")\r\n\t\t\t\t\t\t\t\t\tnewValue = newValue + dates[2];\r\n\t\t\t\t\t\t\t\tif (pict[i] === \"Y\")\r\n\t\t\t\t\t\t\t\t\tnewValue = newValue + dates[0];\r\n\t\t\t\t\t\t\t\tif (i != 2)\r\n\t\t\t\t\t\t\t\t\tnewValue = newValue + \"/\";\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tnewValue = dates[1] + \"/\" + dates[2] + \"/\" + dates[0];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tvar valueSplit = value.split(\"-\");\r\n\t\t\t\t\t\tnewValue = \"\";\r\n\t\t\t\t\t\tif (picture == \"99/99/9999\") {\r\n\t\t\t\t\t\t\tif (valueSplit[0].length == 4) {\r\n\t\t\t\t\t\t\t\tif ((defaultdate == undefined) || (defaultdate == null) || (defaultdate == \"MDY\")) {\r\n\t\t\t\t\t\t\t\t\tnewValue = valueSplit[1] + \"/\" + valueSplit[2] + \"/\" + valueSplit[0];\r\n\t\t\t\t\t\t\t\t} else if ((defaultdate != undefined) && (defaultdate == \"YMD\")) { //for japanese\r\n\t\t\t\t\t\t\t\t\tnewValue = valueSplit[0] + \"/\" + valueSplit[1] + \"/\" + valueSplit[2];\r\n\t\t\t\t\t\t\t\t} else { //DMY\r\n\t\t\t\t\t\t\t\t\tnewValue = valueSplit[2] + \"/\" + valueSplit[1] + \"/\" + valueSplit[0];\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tnewValue = value;\r\n\t\t\t\t\t\t\t\twhile (newValue.indexOf(\"-\") != -1) {\r\n\t\t\t\t\t\t\t\t\tnewValue.replace(\"-\", \"/\");\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else\r\n\r\n\t\t\t\t\t\t\tif (picture == \"99/99/99\") {\r\n\t\t\t\t\t\t\t\tif (valueSplit[0].length == 4) {\r\n\t\t\t\t\t\t\t\t\tvalueSplit[0] = valueSplit[0].substr(valueSplit[0].length - 2, 2);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif ((defaultdate == undefined) || (defaultdate == null) || (defaultdate == \"MDY\")) {\r\n\t\t\t\t\t\t\t\t\tnewValue = valueSplit[1] + \"/\" + valueSplit[2] + \"/\" + valueSplit[0];\r\n\t\t\t\t\t\t\t\t} else if ((defaultdate != undefined) && (defaultdate == \"YMD\")) { //for japanese\r\n\t\t\t\t\t\t\t\t\tnewValue = valueSplit[0] + \"/\" + valueSplit[1] + \"/\" + valueSplit[2];\r\n\t\t\t\t\t\t\t\t} else { //DMY\r\n\t\t\t\t\t\t\t\t\tnewValue = valueSplit[2] + \"/\" + valueSplit[1] + \"/\" + valueSplit[0];\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else if (picture == \"9999/99/99\") {\r\n\t\t\t\t\t\t\t\tif ((defaultdate == undefined) || (defaultdate == null) || (defaultdate == \"MDY\")) {\r\n\t\t\t\t\t\t\t\t\tnewValue = valueSplit[1] + \"/\" + valueSplit[2] + \"/\" + valueSplit[0];\r\n\t\t\t\t\t\t\t\t} else if ((defaultdate != undefined) && (defaultdate == \"YMD\")) { //for japanese\r\n\t\t\t\t\t\t\t\t\tnewValue = valueSplit[0] + \"/\" + valueSplit[1] + \"/\" + valueSplit[2];\r\n\t\t\t\t\t\t\t\t} else { //DMY\r\n\t\t\t\t\t\t\t\t\tnewValue = valueSplit[2] + \"/\" + valueSplit[1] + \"/\" + valueSplit[0];\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\tif (valueSplit[0].length == 4) {\r\n\t\t\t\t\t\t\t\t\tvalueSplit[0] = valueSplit[0].substr(valueSplit[0].length - 2, 2);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif ((defaultdate == undefined) || (defaultdate == null) || (defaultdate == \"MDY\")) {\r\n\t\t\t\t\t\t\t\t\tnewValue = valueSplit[1] + \"/\" + valueSplit[2] + \"/\" + valueSplit[0];\r\n\t\t\t\t\t\t\t\t} else if ((defaultdate != undefined) && (defaultdate == \"YMD\")) { //for japanese\r\n\t\t\t\t\t\t\t\t\tnewValue = valueSplit[0] + \"/\" + valueSplit[1] + \"/\" + valueSplit[2];\r\n\t\t\t\t\t\t\t\t} else { //DMY\r\n\t\t\t\t\t\t\t\t\tnewValue = valueSplit[2] + \"/\" + valueSplit[1] + \"/\" + valueSplit[0];\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak; // End execution\r\n\t\t\t\tcase \"datetime\":\r\n\t\t\t\t\tif (value == \"\") return \"\";\r\n\t\t\t\t\tvar dividevalue = value.split(\"T\");//separate date from hour\r\n\t\t\t\t\tif (value.indexOf(\"T\") === -1) {\r\n\t\t\t\t\t\tdividevalue = value.split(\" \");\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//formatting date\r\n\t\t\t\t\tif (picture === \"\") {\r\n\t\t\t\t\t\tvar dates = dividevalue[0].split(\"-\");\r\n\t\t\t\t\t\tvar newValue = value;\r\n\t\t\t\t\t\tif ((defaultdate != undefined) && (defaultdate != null)) {//if default picture\r\n\t\t\t\t\t\t\tpict = defaultdate.split(\"\");\r\n\t\t\t\t\t\t\tnewValue = \"\";\r\n\t\t\t\t\t\t\tfor (var i = 0; i <= 2; i++) {\r\n\t\t\t\t\t\t\t\tif (pict[i] === \"M\")\r\n\t\t\t\t\t\t\t\t\tnewValue = newValue + dates[1];\r\n\t\t\t\t\t\t\t\tif (pict[i] === \"D\")\r\n\t\t\t\t\t\t\t\t\tnewValue = newValue + dates[2];\r\n\t\t\t\t\t\t\t\tif (pict[i] === \"Y\")\r\n\t\t\t\t\t\t\t\t\tnewValue = newValue + dates[0];\r\n\t\t\t\t\t\t\t\tif (i != 2)\r\n\t\t\t\t\t\t\t\t\tnewValue = newValue + \"/\";\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tnewValue = dates[1] + \"/\" + dates[2] + \"/\" + dates[0];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvar dividepicture = picture.split(\" \");\r\n\t\t\t\t\t\tvar valueSplit = dividevalue[0].split(\"-\");\r\n\t\t\t\t\t\tnewValue = \"\";\r\n\t\t\t\t\t\tif (dividepicture[0] == \"99/99/9999\") {\r\n\t\t\t\t\t\t\tif (valueSplit[0].length == 4) {\r\n\t\t\t\t\t\t\t\tif ((defaultdate == undefined) || (defaultdate == null) || (defaultdate == \"MDY\")) {\r\n\t\t\t\t\t\t\t\t\tnewValue = valueSplit[1] + \"/\" + valueSplit[2] + \"/\" + valueSplit[0];\r\n\t\t\t\t\t\t\t\t} else if ((defaultdate != undefined) && (defaultdate == \"YMD\")) { //for japanese\r\n\t\t\t\t\t\t\t\t\tnewValue = valueSplit[0] + \"/\" + valueSplit[1] + \"/\" + valueSplit[2];\r\n\t\t\t\t\t\t\t\t} else { //DMY\r\n\t\t\t\t\t\t\t\t\tnewValue = valueSplit[2] + \"/\" + valueSplit[1] + \"/\" + valueSplit[0];\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tnewValue = value;\r\n\t\t\t\t\t\t\t\twhile (newValue.indexOf(\"-\") != -1) {\r\n\t\t\t\t\t\t\t\t\tnewValue.replace(\"-\", \"/\");\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else\r\n\r\n\t\t\t\t\t\t\tif (dividepicture[0] == \"99/99/99\") {\r\n\t\t\t\t\t\t\t\tif (valueSplit[0].length == 4) {\r\n\t\t\t\t\t\t\t\t\tvalueSplit[0] = valueSplit[0].substr(valueSplit[0].length - 2, 2);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif ((defaultdate == undefined) || (defaultdate == null) || (defaultdate == \"MDY\")) {\r\n\t\t\t\t\t\t\t\t\tnewValue = valueSplit[1] + \"/\" + valueSplit[2] + \"/\" + valueSplit[0];\r\n\t\t\t\t\t\t\t\t} else if ((defaultdate != undefined) && (defaultdate == \"YMD\")) { //for japanese\r\n\t\t\t\t\t\t\t\t\tnewValue = valueSplit[0] + \"/\" + valueSplit[1] + \"/\" + valueSplit[2];\r\n\t\t\t\t\t\t\t\t} else { //DMY\r\n\t\t\t\t\t\t\t\t\tnewValue = valueSplit[2] + \"/\" + valueSplit[1] + \"/\" + valueSplit[0];\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else\r\n\t\t\t\t\t\t\t\tif (dividepicture[0] == \"9999/99/99\")\r\n\t\t\t\t\t\t\t\t\tif ((defaultdate == undefined) || (defaultdate == null) || (defaultdate == \"MDY\")) {\r\n\t\t\t\t\t\t\t\t\t\tnewValue = valueSplit[1] + \"/\" + valueSplit[2] + \"/\" + valueSplit[0];\r\n\t\t\t\t\t\t\t\t\t} else if ((defaultdate != undefined) && (defaultdate == \"YMD\")) { //for japanese\r\n\t\t\t\t\t\t\t\t\t\tnewValue = valueSplit[0] + \"/\" + valueSplit[1] + \"/\" + valueSplit[2];\r\n\t\t\t\t\t\t\t\t\t} else { //DMY\r\n\t\t\t\t\t\t\t\t\t\tnewValue = valueSplit[2] + \"/\" + valueSplit[1] + \"/\" + valueSplit[0];\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse {\r\n\r\n\t\t\t\t\t\t\t\t\tnewValue = \"\";\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t//formating hour\r\n\r\n\t\t\t\t\tif (picture === \"\") {\r\n\t\t\t\t\t\tif (dividevalue.length > 1) {\r\n\t\t\t\t\t\t\tvar hourandms = dividevalue[1].split(\".\");\r\n\r\n\t\t\t\t\t\t\tnewValue = newValue + \" \" + hourandms[0]\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvar dividepicture = picture.split(\" \");\r\n\t\t\t\t\t\tif ((picture.split(\" \").length < 2) && (dividepicture[0] != \"99/99/9999\") && (dividepicture[0] != \"9999/99/99\") && (dividepicture[0] != \"99/99/99\")) {\r\n\t\t\t\t\t\t\tdividepicture.push(picture)\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (dividepicture.length > 1) {\r\n\t\t\t\t\t\t\tvar digits;\r\n\t\t\t\t\t\t\tif (dividevalue.length > 1) {\r\n\t\t\t\t\t\t\t\tvar hourandms = dividevalue[1].split(\".\");\r\n\r\n\t\t\t\t\t\t\t\tdigits = hourandms[0].split(\":\");\r\n\r\n\t\t\t\t\t\t\t\tif (digits.length < 2) {\r\n\t\t\t\t\t\t\t\t\tdigits[1] = \"00\";\r\n\t\t\t\t\t\t\t\t\tdigits[2] = \"00\";\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (digits.length < 3) {\r\n\t\t\t\t\t\t\t\t\tdigits[2] = \"00\";\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (hourandms.length < 2) {\r\n\t\t\t\t\t\t\t\t\tdigits[3] = \"000\"\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tdigits[3] = hourandms[1]\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tdigits = new Array(3)\r\n\t\t\t\t\t\t\t\tdigits[0] = \"00\";\r\n\t\t\t\t\t\t\t\tdigits[1] = \"00\";\r\n\t\t\t\t\t\t\t\tdigits[2] = \"00\";\r\n\t\t\t\t\t\t\t\tdigits[3] = \"000\";\r\n\t\t\t\t\t\t\t}\r\n\r\n\r\n\r\n\t\t\t\t\t\t\tswitch (dividepicture[1]) {\r\n\t\t\t\t\t\t\t\tcase \"99\":\r\n\t\t\t\t\t\t\t\t\tnewValue = newValue + \" \" + digits[0];\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\tcase \"99:99\":\r\n\t\t\t\t\t\t\t\t\tnewValue = newValue + \" \" + digits[0] + \":\" + digits[1];\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\tcase \"99:99:99\":\r\n\t\t\t\t\t\t\t\t\tnewValue = newValue + \" \" + digits[0] + \":\" + digits[1] + \":\" + digits[2];\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\tcase \"99:99:99.999\":\r\n\t\t\t\t\t\t\t\t\tnewValue = newValue + \" \" + digits[0] + \":\" + digits[1] + \":\" + digits[2] + \".\" + digits[3];\r\n\t\t\t\t\t\t\t\t\tbreak\r\n\t\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t\t\tnewValue = newValue + \" \" + digits[0] + \":\" + digits[1] + \":\" + digits[2];\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"character\":\r\n\t\t\t\t\tnewValue = OAT.Dom.fromSafeXML(value);\r\n\t\t\t\t\tif (picture == \"@!\") {\r\n\t\t\t\t\t\tnewValue = value.toUpperCase();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif (hasprefix) {\r\n\t\t\t\tnewValue = prefix + newValue;\r\n\t\t\t}\r\n\t\t\tif (hassufix) {\r\n\t\t\t\tnewValue = newValue + sufix;\r\n\t\t\t}\r\n\r\n\t\t\treturn newValue;\r\n\t\t}\r\n\t\r\n\t\r\n\t//Allow Selection methods \r\n\tOAT.SetSelectedNodeBackgroundColor = function(node, color, $container){\r\n\t\tOAT.ClearSelectedNodes($container)\r\n\t\tOAT.SetNodeBackgroundColor(node, color);\r\n\t}\r\n\t\r\n\tOAT.ClearSelectedNodes = function($container) {\r\n\t\t/*$container.find(\".gx-qv-selected-element\").each(function (index, value) {\r\n\t\t\tvar previousColor = jQuery(value).attr(\"previousBackgroundColor\");\r\n\t\t\tjQuery(value).css({backgroundColor: previousColor});\r\n\t\t});*/\r\n\t\t\r\n\t\t$container.find(\".gx-qv-selected-element\").removeClass(\"gx-qv-selected-element\");\r\n\t}\r\n\t\r\n\tOAT.SetNodeBackgroundColor = function(node, color){\r\n\t\tif (!jQuery(node).hasClass(\"gx-qv-selected-element\")){\r\n\t\t\t//var backgroundColor = jQuery(node).css(\"background-color\");\r\n\t\t\t//jQuery(node).attr(\"previousBackgroundColor\", backgroundColor);\r\n\t\t\r\n\t\t\t//jQuery(node).css({backgroundColor: color});\r\n\t\t\tjQuery(node).addClass(\"gx-qv-selected-element\");\r\n\t\t}\r\n\t}\r\n\t\r\n\tOAT.IsNodeSelected = function(node){\r\n\t\treturn jQuery(node).hasClass(\"gx-qv-selected-element\")\r\n\t}\r\n\t\r\n\tOAT.SelectAllRow = function(row, color, avoid){\r\n\t\tfor (var cell = 0; cell < row.children.length; cell++){\r\n\t\t\tif ((avoid == undefined) || (avoid != cell))\r\n\t\t\t\tOAT.SetNodeBackgroundColor(row.children[cell], color)\r\n\t\t}\r\n\t}\r\n\t//picture methods\r\n\r\n\tOAT.isSD = function(){\r\n\t\tvar ua = navigator.userAgent.toLowerCase();\r\n\t\tvar isAndroid = ua.indexOf(\"android\") > -1;\r\n\t\tvar isIOs = (ua.indexOf(\"iPhone\") != -1) || (ua.indexOf(\"iPad\") != -1) || (ua.indexOf(\"iPod\") != -1)\r\n\r\n\t\tif (isAndroid || isIOs) {\r\n\t\t\treturn true\r\n\t\t} else {\r\n\t\t\treturn false\r\n\t\t}\r\n\t}\r\n\t\r\n\tOAT.isAndroid = function(){\r\n\t\tvar ua = navigator.userAgent.toLowerCase();\r\n\t\treturn ua.indexOf(\"android\") > -1;\r\n\t}\r\n\t\r\n\tOAT.isSafari = function(){\r\n\t\tvar ua = navigator.userAgent.toLowerCase();\r\n\t\treturn ((ua.indexOf(\"Safari\") != -1) && (ua.indexOf(\"Chrome\") === -1))\r\n\t}\t\r\n\r\n\tOAT.isIE = function(){\r\n\t\tif (window.document.documentMode)\r\n\t\t\treturn true\r\n\t\telse\r\n\t\t\treturn false\r\n\t}\r\n\t\r\n\tOAT.isWebkit = function(){\r\n\t\tvar ua = navigator.userAgent.toLowerCase();\r\n\t\treturn (ua.search(/webkit/ig) != -1)\r\n\t}\r\n\t\r\n\tOAT.resourceURL = function(path){\r\n\t\treturn path;\r\n\t}\r\n\t\r\n\tOAT.charReplace = function (Value, Chars, Repls) {\r\n\t\tvar Ret = '';\r\n\t\tvar len = Value.length;\r\n\t\tfor (var i = 0; i < len; i++) {\r\n\t\t\tvar bFixed = false;\r\n\t\t\tvar len1 = Chars.length;\r\n\t\t\tfor (var c = 0; c < len1; c++) {\r\n\t\t\t\tif (Value.charAt(i) == Chars[c]) {\r\n\t\t\t\t\tif (c < Repls.length) {\r\n\t\t\t\t\t\tRet += Repls[c];\r\n\t\t\t\t\t\tbFixed = true;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (bFixed === false)\r\n\t\t\t\tRet += Value.charAt(i);\r\n\t\t}\r\n\t\treturn Ret;\r\n\t}\r\n\t\r\n\tOAT.Dom = { /* DOM common object */\r\n\t\tcreate: function (tagName, styleObj, className) {\r\n\t\t\tvar elm = document.createElement(tagName);\r\n\t\t\t// console.log(Object.keys(styleObj).length > 0);\r\n\t\t\t// if (styleObj && Object.keys(styleObj).length > 0) {\r\n\t\t\t// \t for (prop in styleObj) { \r\n\t\t\t// \t\tconsole.log(prop);\r\n\t\t\t// \t\telm.style[prop] = styleObj[prop]; }\r\n\t\t\t// }\r\n\t\t\tif (className) { elm.className = className; }\r\n\t\t\treturn elm;\r\n\t\t},\r\n\r\n\t\tcreateNS: function (ns, tagName) {\r\n\t\t\tif (document.createElementNS) {\r\n\t\t\t\tvar elm = document.createElementNS(ns, tagName);\r\n\t\t\t} else {\r\n\t\t\t\tvar elm = document.createElement(tagName);\r\n\t\t\t\telm.setAttribute(\"xmlns\", ns);\r\n\t\t\t}\r\n\t\t\treturn elm;\r\n\t\t},\r\n\r\n\t\ttext: function (text) {\r\n\t\t\tvar elm = document.createTextNode(text);\r\n\t\t\treturn elm;\r\n\t\t},\r\n\r\n\t\tbutton: function (label) {\r\n\t\t\tvar b = OAT.Dom.create(\"input\");\r\n\t\t\tb.type = \"button\";\r\n\t\t\tb.value = label;\r\n\t\t\treturn b;\r\n\t\t},\r\n\r\n\t\tradio: function (name) {\r\n\t\t\tif (OAT.isIE()) {\r\n\t\t\t\tvar elm = document.createElement('<input type=\"radio\" name=\"' + name + '\" />');\r\n\t\t\t\treturn elm;\r\n\t\t\t} else {\r\n\t\t\t\tvar elm = OAT.Dom.create(\"input\");\r\n\t\t\t\telm.name = name;\r\n\t\t\t\telm.type = \"radio\";\r\n\t\t\t\treturn elm;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\timage: function (src, srcBlank, w, h) {\r\n\t\t\tw = (w ? w + 'px' : 'auto');\r\n\t\t\th = (h ? h + 'px' : 'auto');\r\n\t\t\tvar elm = OAT.Dom.create(\"img\", { width: w, height: h });\r\n\t\t\tOAT.Dom.imageSrc(elm, src, srcBlank);\r\n\t\t\treturn elm;\r\n\t\t},\r\n\r\n\t\timageSrc: function (element, src, srcBlank) {\r\n\t\t\tvar elm = OAT.$(element);\r\n\t\t\tvar png = !!src.toLowerCase().match(/png$/);\r\n\t\t\telm.src = src;\r\n\t\t},\r\n\t\toption: function (name, value, parent) {\r\n\t\t\tvar opt = OAT.Dom.create(\"option\");\r\n\t\t\tOAT.addTextNode(opt, name)\r\n\t\t\topt.value = value;\r\n\t\t\tif (parent) { OAT.$(parent).appendChild(opt); }\r\n\t\t\treturn opt;\r\n\t\t},\r\n\t\tappend: function () {\r\n\t\t\tfor (var i = 0; i < arguments.length; i++) {\r\n\t\t\t\tvar arr = arguments[i];\r\n\t\t\t\tif (!(arr instanceof Array)) { continue; }\r\n\t\t\t\tif (arr.length < 2) { continue; }\r\n\t\t\t\tvar parent = OAT.$(arr[0]);\r\n\t\t\t\tfor (var j = 1; j < arr.length; j++) {\r\n\t\t\t\t\tvar children = arr[j];\r\n\t\t\t\t\tif (!(children instanceof Array)) { children = [children]; }\r\n\t\t\t\t\tfor (var k = 0; k < children.length; k++) {\r\n\t\t\t\t\t\tvar child = children[k];\r\n\t\t\t\t\t\tparent.appendChild(OAT.$(child));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\thide: function (element) {\r\n\t\t\tif (arguments.length > 1) {\r\n\t\t\t\tfor (var i = 0; i < arguments.length; i++) { OAT.Dom.hide(arguments[i]); }\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (element instanceof Array) {\r\n\t\t\t\tfor (var i = 0; i < element.length; i++) { OAT.Dom.hide(element[i]); }\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar elm = OAT.$(element);\r\n\t\t\tif (!elm) { return; }\r\n\t\t\t/* ie input hack */\r\n\t\t\tvar inputs_ = elm.getElementsByTagName(\"input\");\r\n\t\t\tvar inputs = [];\r\n\t\t\tfor (var i = 0; i < inputs_.length; i++) { inputs.push(inputs_[i]); }\r\n\t\t\tif (elm.tagName.toLowerCase() == \"input\") { inputs.push(elm); }\r\n\t\t\tfor (var i = 0; i < inputs.length; i++) {\r\n\t\t\t\tvar inp = inputs[i];\r\n\t\t\t\tif (inp.type == \"radio\" || inp.type == \"checkbox\") {\r\n\t\t\t\t\tif (!inp.__checked) { inp.__checked = (inp.checked ? \"1\" : \"0\"); }\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telm.style.display = \"none\";\r\n\t\t},\r\n\r\n\t\tshow: function (element) {\r\n\t\t\tif (arguments.length > 1) {\r\n\t\t\t\tfor (var i = 0; i < arguments.length; i++) { OAT.Dom.show(arguments[i]); }\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (element instanceof Array) {\r\n\t\t\t\tfor (var i = 0; i < element.length; i++) { OAT.Dom.show(element[i]); }\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar elm = OAT.$(element);\r\n\t\t\tif (!elm) { return; }\r\n\t\t\telm.style.display = \"\";\r\n\t\t\t/* ie input hack */\r\n\t\t\tvar inputs_ = elm.getElementsByTagName(\"input\");\r\n\t\t\tvar inputs = [];\r\n\t\t\tfor (var i = 0; i < inputs_.length; i++) { inputs.push(inputs_[i]); }\r\n\t\t\tif (elm.tagName.toLowerCase() == \"input\") { inputs.push(elm); }\r\n\t\t\tfor (var i = 0; i < inputs.length; i++) {\r\n\t\t\t\tvar inp = inputs[i];\r\n\t\t\t\tif (inp.type == \"radio\" || inp.type == \"checkbox\") {\r\n\t\t\t\t\tif (inp[\"__checked\"] && inp.__checked === \"1\") { inp.checked = true; }\r\n\t\t\t\t\tif (inp[\"__checked\"] && inp.__checked === \"0\") { inp.checked = false; }\r\n\t\t\t\t\tinp.__checked = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tclear: function (element) {\r\n\t\t\tvar elm = OAT.$(element);\r\n\t\t\twhile (elm.firstChild) { elm.removeChild(elm.firstChild); }\r\n\t\t},\r\n\r\n\t\tunlink: function (element) {\r\n\t\t\tvar elm = OAT.$(element);\r\n\t\t\tif (!elm) { return; }\r\n\t\t\tif (!elm.parentNode) { return; }\r\n\t\t\telm.parentNode.removeChild(elm);\r\n\t\t},\r\n\r\n\t\tcenter: function (element, x, y, reference) {\r\n\t\t\tvar elm = OAT.$(element);\r\n\t\t\tvar p = elm.offsetParent;\r\n\t\t\tif (reference) { p = reference; }\r\n\t\t\tif (!p) { return; }\r\n\t\t\tvar par_dims = (p == document.body || p.tagName.toLowerCase() == \"html\" ? OAT.Dom.getViewport() : OAT.Dom.getWH(p));\r\n\t\t\tvar dims = OAT.Dom.getWH(elm);\r\n\t\t\tvar new_x = Math.round(par_dims[0] / 2 - dims[0] / 2);\r\n\t\t\tvar new_y = Math.round(par_dims[1] / 2 - dims[1] / 2);\r\n\t\t\tif (new_y < 0) { new_y = 30; }\r\n\t\t\tvar s = OAT.Dom.getScroll();\r\n\t\t\tif (p == document.body || p.tagName.toLowerCase() == \"html\") {\r\n\t\t\t\tnew_x += s[0];\r\n\t\t\t\tnew_y += s[1];\r\n\t\t\t}\r\n\t\t\tif (x) { elm.style.left = new_x + \"px\"; }\r\n\t\t\tif (y) { elm.style.top = new_y + \"px\"; }\r\n\t\t},\r\n\r\n\t\tisChild: function (child, parent) {\r\n\t\t\tvar c_elm = OAT.$(child);\r\n\t\t\tvar p_elm = OAT.$(parent);\r\n\t\t\t/* walk up from the child. if we find parent element, return true */\r\n\t\t\tvar node = c_elm.parentNode;\r\n\t\t\tdo {\r\n\t\t\t\tif (!node) { return false; }\r\n\t\t\t\tif (node == p_elm) { return true; }\r\n\t\t\t\tnode = node.parentNode;\r\n\t\t\t} while (node != document.body && node != document);\r\n\t\t\treturn false;\r\n\t\t},\r\n\r\n\t\tisKonqueror: function () { return (navigator.userAgent.match(/konqueror/i) ? true : false); },\r\n\t\tisKHTML: function () { return (navigator.userAgent.match(/khtml/i) ? true : false); },\r\n\t\tisIE: function () { return (document.attachEvent && !document.addEventListener ? true : false); },\r\n\t\tisIE7: function () { return (navigator.userAgent.match(/msie 7/i) ? true : false); },\r\n\t\tisIE6: function () { return (OAT.Dom.isIE() && !OAT.Dom.isIE7()); },\r\n\t\tisGecko: function () { return ((!OAT.Dom.isKHTML() && navigator.userAgent.match(/Gecko/i)) ? true : false); },\r\n\t\tisOpera: function () { return (navigator.userAgent.match(/Opera/) ? true : false); },\r\n\t\tisWebKit: function () { return (navigator.userAgent.match(/AppleWebKit/) ? true : false); },\r\n\t\tisMac: function () { return (navigator.platform.toString().match(/mac/i) ? true : false); },\r\n\t\tisLinux: function () { return (navigator.platform.toString().match(/linux/i) ? true : false); },\r\n\t\tisWindows: function () { return (navigator.userAgent.toString().match(/windows/i) ? true : false); },\r\n\r\n\t\tcolor: function (str) {\r\n\t\t\tvar hex2dec = function (hex) { return parseInt(hex, 16); }\r\n\t\t\t/* returns [col1,col2,col3] in decimal */\r\n\t\t\tif (str.match(/#/)) {\r\n\t\t\t\t/* hex */\r\n\t\t\t\tif (str.length == 4) {\r\n\t\t\t\t\tvar tmpstr = \"#\" + str.charAt(1) + str.charAt(1) + str.charAt(2) + str.charAt(2) + str.charAt(3) + str.charAt(3);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar tmpstr = str;\r\n\t\t\t\t}\r\n\t\t\t\tvar tmp = tmpstr.match(/#(..)(..)(..)/);\r\n\t\t\t\treturn [hex2dec(tmp[1]), hex2dec(tmp[2]), hex2dec(tmp[3])];\r\n\t\t\t} else {\r\n\t\t\t\t/* decimal */\r\n\t\t\t\tvar tmp = str.match(/\\(([^,]*),([^,]*),([^\\)]*)/);\r\n\t\t\t\treturn [parseInt(tmp[1]), parseInt(tmp[2]), parseInt(tmp[3])];\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tisClass: function (something, className) {\r\n\t\t\tvar elm = OAT.$(something);\r\n\t\t\tif (!elm) { return false; }\r\n\t\t\tif (className == \"*\") { return true; }\r\n\t\t\tif (className == \"\") { return false; }\r\n\t\t\tif (!elm.className) { return false; }\r\n\t\t\tvar arr = elm.className.split(\" \");\r\n\t\t\tvar index = arr.indexOf(className);\r\n\t\t\treturn (index != -1);\r\n\t\t},\r\n\r\n\t\taddClass: function (something, className) {\r\n\t\t\tvar elm = OAT.$(something);\r\n\t\t\tif (!elm) { return; }\r\n\t\t\tif (OAT.Dom.isClass(elm, className)) { return; }\r\n\t\t\tvar arr = elm.className.split(\" \");\r\n\t\t\tarr.push(className);\r\n\t\t\tif (arr[0] == \"\") { arr.splice(0, 1); }\r\n\t\t\telm.className = arr.join(\" \");\r\n\t\t},\r\n\r\n\t\tsetIdPropertyValue: function (something, value) {\r\n\t\t\tvar elm = OAT.$(something);\r\n\t\t\tif (!elm) { return; }\r\n\t\t\telm.id = value;\r\n\t\t},\r\n\r\n\t\tremoveClass: function (something, className) {\r\n\t\t\tvar elm = OAT.$(something);\r\n\t\t\tif (!elm) { return; }\r\n\t\t\tif (!OAT.Dom.isClass(elm, className)) { return; } /* cannot remove non-existing class */\r\n\t\t\tif (className == \"*\") { elm.className = \"\"; } /* should not occur */\r\n\t\t\tvar arr = elm.className.split(\" \");\r\n\t\t\tvar index = arr.indexOf(className);\r\n\t\t\tif (index == -1) { return; } /* should NOT occur! */\r\n\t\t\tarr.splice(index, 1);\r\n\t\t\telm.className = arr.join(\" \");\r\n\t\t},\r\n\r\n\t\tgetViewport: function () {\r\n\t\t\tif (OAT.isWebkit()) {\r\n\t\t\t\treturn [window.innerWidth, window.innerHeight];\r\n\t\t\t}\r\n\t\t\tif ( (navigator.userAgent.match(/Opera/)) || document.compatMode == \"BackCompat\") {\r\n\t\t\t\treturn [document.body.clientWidth, document.body.clientHeight];\r\n\t\t\t} else {\r\n\t\t\t\treturn [document.documentElement.clientWidth, document.documentElement.clientHeight];\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tposition: function (something) {\r\n\t\t\tvar elm = OAT.$(something);\r\n\t\t\tvar parent = elm.offsetParent;\r\n\t\t\tif (elm == document.body || elm == document || !parent) { return OAT.Dom.getLT(elm); }\r\n\t\t\tvar parent_coords = OAT.Dom.position(parent);\r\n\t\t\tvar c = OAT.Dom.getLT(elm);\r\n\t\t\t/*\r\n\t\t\tvar x = elm.offsetLeft - elm.scrollLeft + parent_coords[0];\r\n\t\t\tvar y = elm.offsetTop - elm.scrollTop + parent_coords[1];\r\n\t\t\t*/\r\n\r\n\t\t\t/*\r\n\t\t\tthis is interesting: Opera with no scrolling reports scrollLeft/Top equal to offsetLeft/Top for <input> elements\r\n\t\t\t*/\r\n\t\t\tvar x = c[0];\r\n\t\t\tvar y = c[1];\r\n\t\t\tif (!(navigator.userAgent.match(/Opera/)) || elm.scrollTop != elm.offsetTop || elm.scrollLeft != elm.offsetLeft) {\r\n\t\t\t\tx -= elm.scrollLeft;\r\n\t\t\t\ty -= elm.scrollTop;\r\n\t\t\t}\r\n\r\n\t\t\tif (OAT.isWebkit() && parent == document.body && OAT.Dom.style(elm, \"position\") == \"absolute\") { return [x, y]; }\r\n\r\n\t\t\tx += parent_coords[0];\r\n\t\t\ty += parent_coords[1];\r\n\t\t\treturn [x, y];\r\n\t\t},\r\n\r\n\t\tgetLT: function (something) {\r\n\t\t\tvar elm = OAT.$(something);\r\n\t\t\tvar curr_x, curr_y;\r\n\t\t\tif (elm.style.left && elm.style.position != \"relative\") {\r\n\t\t\t\tcurr_x = parseInt(elm.style.left);\r\n\t\t\t} else {\r\n\t\t\t\tcurr_x = elm.offsetLeft;\r\n\t\t\t}\r\n\t\t\tif (elm.style.top && elm.style.position != \"relative\") {\r\n\t\t\t\tcurr_y = parseInt(elm.style.top);\r\n\t\t\t} else {\r\n\t\t\t\tcurr_y = elm.offsetTop;\r\n\t\t\t}\r\n\t\t\treturn [curr_x, curr_y];\r\n\t\t},\r\n\r\n\t\tgetWH: function (something) {\r\n\t\t\t/*\r\n\t\t\tThis is tricky: we need to measure current element's width & height.\r\n\t\t\tIf this property was already set (thus available directly through elm.style),\r\n\t\t\teverything is ok.\r\n\t\t\tIf nothing was set yet:\r\n\t\t\t* IE stores this information in offsetWidth and offsetHeight\r\n\t\t\t* Gecko doesn't count borders into offsetWidth and offsetHeight\r\n\t\t\tThus, we need another means for counting real dimensions.\r\n\t\t\t*/\r\n\t\t\tvar curr_w, curr_h;\r\n\t\t\tvar elm = OAT.$(something);\r\n\t\t\tif (elm.style.width && !elm.style.width.match(/%/) && elm.style.width != \"auto\") {\r\n\t\t\t\tcurr_w = parseInt(elm.style.width);\r\n\t\t\t} else if (OAT.Style.get(elm, \"width\") && !OAT.isIE()) {\r\n\t\t\t\tcurr_w = Math.round(parseFloat(OAT.Style.get(elm, \"width\")));\r\n\t\t\t} else {\r\n\t\t\t\tcurr_w = elm.offsetWidth;\r\n\t\t\t\tif (elm.tagName.toLowerCase() == \"input\") { curr_w += 5; }\r\n\t\t\t}\r\n\r\n\t\t\tif (elm.style.height && !elm.style.height.match(/%/) && elm.style.height != \"auto\") {\r\n\t\t\t\tcurr_h = parseInt(elm.style.height);\r\n\t\t\t} else if (OAT.Style.get(elm, \"height\") && !OAT.isIE()) {\r\n\t\t\t\tcurr_h = Math.round(parseFloat(OAT.Style.get(elm, \"height\")));\r\n\t\t\t} else {\r\n\t\t\t\tcurr_h = elm.offsetHeight;\r\n\t\t\t\tif (elm.tagName.toLowerCase() == \"input\") { curr_h += 5; }\r\n\t\t\t}\r\n\r\n\t\t\t/* one more bonus - if we are getting height of document.body, take window size */\r\n\t\t\tif (elm == document.body) {\r\n\t\t\t\tcurr_h = (OAT.isIE() ? document.body.clientHeight : window.innerHeight);\r\n\t\t\t}\r\n\t\t\treturn [curr_w, curr_h];\r\n\t\t},\r\n\r\n\t\tmoveBy: function (element, dx, dy) {\r\n\t\t\tvar curr_x, curr_y;\r\n\t\t\tvar elm = OAT.$(element);\r\n\t\t\t/*\r\n\t\t\tIf the element is not anchored to left top corner, strange things will happen during resizing;\r\n\t\t\ttherefore, we need to make sure it is anchored properly.\r\n\t\t\t*/\r\n\t\t\tif (OAT.Dom.style(elm, \"position\") == \"absolute\") {\r\n\t\t\t\tif (!elm.style.left) {\r\n\t\t\t\t\telm.style.left = elm.offsetLeft + \"px\";\r\n\t\t\t\t\telm.style.right = \"\";\r\n\t\t\t\t}\r\n\t\t\t\tif (!elm.style.top) {\r\n\t\t\t\t\telm.style.top = elm.offsetTop + \"px\";\r\n\t\t\t\t\telm.style.bottom = \"\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar tmp = OAT.Dom.getLT(elm);\r\n\t\t\tcurr_x = tmp[0];\r\n\t\t\tcurr_y = tmp[1];\r\n\t\t\tvar x = curr_x + dx;\r\n\t\t\tvar y = curr_y + dy;\r\n\t\t\telm.style.left = x + \"px\";\r\n\t\t\telm.style.top = y + \"px\";\r\n\t\t},\r\n\r\n\t\tresizeBy: function (element, dx, dy) {\r\n\t\t\tvar curr_w, curr_h;\r\n\t\t\tvar elm = OAT.$(element);\r\n\t\t\t/*\r\n\t\t\tIf the element is not anchored to left top corner, strange things will happen during resizing;\r\n\t\t\ttherefore, we need to make sure it is anchored properly.\r\n\t\t\t*/\r\n\t\t\tif (OAT.Dom.style(elm, \"position\") == \"absolute\" && dx) {\r\n\t\t\t\tif (!elm.style.left) {\r\n\t\t\t\t\telm.style.left = elm.offsetLeft + \"px\";\r\n\t\t\t\t\telm.style.right = \"\";\r\n\t\t\t\t}\r\n\t\t\t\tif (!elm.style.top && dy) {\r\n\t\t\t\t\telm.style.top = elm.offsetTop + \"px\";\r\n\t\t\t\t\telm.style.bottom = \"\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar tmp = OAT.Dom.getWH(elm);\r\n\t\t\tcurr_w = tmp[0];\r\n\t\t\tcurr_h = tmp[1];\r\n\t\t\tvar w = curr_w + dx;\r\n\t\t\tvar h = curr_h + dy;\r\n\t\t\tif (dx) { elm.style.width = w + \"px\"; }\r\n\t\t\tif (dy) { elm.style.height = h + \"px\"; }\r\n\t\t},\r\n\r\n\t\tdecodeImage: function (data) {\r\n\t\t\tvar decoded = OAT.Crypto.base64d(data);\r\n\t\t\tvar mime = \"image/\";\r\n\t\t\tswitch (decoded.charAt(1)) {\r\n\t\t\t\tcase \"I\": mime += \"gif\"; break;\r\n\t\t\t\tcase \"P\": mime += \"png\"; break;\r\n\t\t\t\tcase \"M\": mime += \"bmp\"; break;\r\n\t\t\t\tdefault: mime += \"jpeg\"; break;\r\n\r\n\t\t\t}\r\n\t\t\tvar src = \"data:\" + mime + \";base64,\" + data;\r\n\t\t\treturn src;\r\n\t\t},\r\n\r\n\t\tremoveSelection: function () {\r\n\t\t\tvar selObj = false;\r\n\t\t\tif (document.getSelection && !(!OAT.Dom.isKHTML() && navigator.userAgent.match(/Gecko/i)) ) { selObj = document.getSelection(); }\r\n\t\t\tif (window.getSelection) { selObj = window.getSelection(); }\r\n\t\t\tif (document.selection) { selObj = document.selection; }\r\n\t\t\tif (selObj) {\r\n\t\t\t\tif (selObj.empty) { selObj.empty(); }\r\n\t\t\t\tif (selObj.removeAllRanges) { selObj.removeAllRanges(); }\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tgetScroll: function () {\r\n\t\t\tvar l = Math.max(document.documentElement.scrollLeft, document.body.scrollLeft);\r\n\t\t\tvar t = Math.max(document.documentElement.scrollTop, document.body.scrollTop);\r\n\t\t\treturn [l, t];\r\n\t\t},\r\n\r\n\t\tgetFreeSpace: function (x, y) {\r\n\t\t\tvar scroll = OAT.Dom.getScroll();\r\n\t\t\tvar port = OAT.Dom.getViewport();\r\n\t\t\tvar spaceLeft = x - scroll[0];\r\n\t\t\tvar spaceRight = port[0] - x + scroll[0];\r\n\t\t\tvar spaceTop = y - scroll[1];\r\n\t\t\tvar spaceBottom = port[1] - y + scroll[1];\r\n\t\t\tvar left = (spaceLeft > spaceRight);\r\n\t\t\tvar top = (spaceTop > spaceBottom);\r\n\t\t\treturn [left, top];\r\n\r\n\t\t},\r\n\r\n\t\ttoSafeXML: function (str) {\r\n\t\t\tif (typeof (str) != \"string\") { return str; }\r\n\t\t\treturn str.replace(/&/g, \"&amp;\").replace(/>/g, \"&gt;\").replace(/</g, \"&lt;\");\r\n\t\t},\r\n\r\n\t\tfromSafeXML: function (str) {\r\n\t\t\treturn str.replace(/&amp;/g, \"&\").replace(/&gt;/g, \">\").replace(/&lt;/g, \"<\");\r\n\t\t},\r\n\r\n\t\turiParams: function () {\r\n\t\t\tvar result = {};\r\n\t\t\tvar s = location.search;\r\n\t\t\tif (s.length > 1) { s = s.substring(1); }\r\n\t\t\tif (!s) { return result; }\r\n\t\t\tvar parts = s.split(\"&\");\r\n\t\t\tfor (var i = 0; i < parts.length; i++) {\r\n\t\t\t\tvar part = parts[i];\r\n\t\t\t\tif (!part) { continue; }\r\n\t\t\t\tvar index = part.indexOf(\"=\");\r\n\t\t\t\tif (index == -1) { result[decodeURIComponent(part)] = \"\"; continue; } /* not a pair */\r\n\r\n\t\t\t\tvar key = part.substring(0, index);\r\n\t\t\t\tvar val = part.substring(index + 1);\r\n\t\t\t\tkey = decodeURIComponent(key);\r\n\t\t\t\tval = decodeURIComponent(val);\r\n\r\n\t\t\t\tvar r = false;\r\n\t\t\t\tif ((r = key.match(/(.*)\\[\\]$/))) {\r\n\t\t\t\t\tkey = r[1];\r\n\t\t\t\t\tif (key in result) {\r\n\t\t\t\t\t\tresult[key].push(val);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tresult[key] = [val];\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult[key] = val;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t},\r\n\r\n\t\tchangeHref: function (elm, newHref) {\r\n\t\t\t/* opera cannot do this with elements not being part of the page :/ */\r\n\t\t\tvar ok = false;\r\n\t\t\tvar e = OAT.$(elm);\r\n\t\t\tvar node = e;\r\n\t\t\twhile (node.parentNode) {\r\n\t\t\t\tnode = node.parentNode;\r\n\t\t\t\tif (node == document.body) { ok = true; }\r\n\t\t\t}\r\n\t\t\tif (ok) {\r\n\t\t\t\te.href = newHref;\r\n\t\t\t} else if (e.parentNode) {\r\n\t\t\t\tvar oldParent = e.parentNode;\r\n\t\t\t\tvar next = e.nextSibling;\r\n\t\t\t\tdocument.body.appendChild(e);\r\n\t\t\t\te.href = newHref;\r\n\t\t\t\tOAT.Dom.unlink(e);\r\n\t\t\t\toldParent.insertBefore(e, next);\r\n\t\t\t} else {\r\n\t\t\t\tdocument.body.appendChild(e);\r\n\t\t\t\te.href = newHref;\r\n\t\t\t\tOAT.Dom.unlink(e);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tmakePosition: function (elm) {\r\n\t\t\tvar e = OAT.$(elm);\r\n\t\t\tif (OAT.Dom.style(e, \"position\") != \"absolute\") {\r\n\t\t\t\te.style.position = \"relative\";\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tOAT.Style = { /* Style helper */\r\n\t\tinclude: function (file, relativePath, force) {\r\n\t\t\tif (!file) return;\r\n\t\t\tfile = relativePath + 'QueryViewer/oatPivot/css/' + file; /*OAT.Preferences.stylePath*/\r\n\t\t\tif (!force) { /* prevent loading when already loaded */\r\n\t\t\t\tvar styles = document.getElementsByTagName('link');\r\n\t\t\t\tvar host = location.protocol + '//' + location.host;\r\n\t\t\t\tfor (var i = 0; i < styles.length; i++)\r\n\t\t\t\t\tif (file == styles[i].getAttribute('href') || host + file == styles[i].getAttribute('href'))\r\n\t\t\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar elm = OAT.Dom.create(\"link\");\r\n\t\t\telm.rel = \"stylesheet\";\r\n\t\t\telm.type = \"text/css\";\r\n\t\t\telm.href = file;\r\n\t\t\t//document.getElementsByTagName(\"head\")[0].appendChild(elm);\r\n\t\t\tjQuery(\"head\").prepend(elm);\r\n\t\t\t\r\n\t\t},\r\n\r\n\t\tget: function (elm, property) {\r\n\t\t\tvar element = OAT.$(elm);\r\n\t\t\tif (document.defaultView && document.defaultView.getComputedStyle) {\r\n\t\t\t\tvar cs = document.defaultView.getComputedStyle(element, '');\r\n\t\t\t\tif (!cs) { return true; }\r\n\t\t\t\treturn cs[property];\r\n\t\t\t} else {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tvar out = element.currentStyle[property];\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tvar out = element.getExpression(property);\r\n\t\t\t\t}\r\n\t\t\t\treturn out;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tbackground: function (element, src) {\r\n\t\t\tvar elm = OAT.$(element);\r\n\t\t\tvar png = !!src.toLowerCase().match(/png$/);\r\n\t\t\tif (png && OAT.isIE()) {\r\n\t\t\t\telm.style.filter = \"progid:DXImageTransform.Microsoft.AlphaImageLoader(src='\" + src + \"', sizingMethod='crop')\";\r\n\t\t\t} else {\r\n\t\t\t\telm.style.backgroundImage = \"url(\" + src + \")\";\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tapply: function (something, obj) {\r\n\t\t\tvar elm = OAT.$(something);\r\n\t\t\tif (!elm) { return; }\r\n\t\t\tfor (var p in obj) { elm.style[p] = obj[p]; }\r\n\t\t},\r\n\r\n\t\topacity: function (element, opacity) {\r\n\t\t\tvar o = Math.max(opacity, 0);\r\n\t\t\tvar elm = OAT.$(element);\r\n\t\t\tif (OAT.isIE()) {\r\n\t\t\t\telm.style.filter = \"alpha(opacity=\" + Math.round(o * 100) + \")\";\r\n\t\t\t} else {\r\n\t\t\t\telm.style.opacity = o;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tOAT.Dom.style = OAT.Style.get; /* backward compatibility */\r\n\tOAT.Dom.applyStyle = OAT.Style.apply; /* backward compatibility */\r\n\r\n\t//OAT.Browser = { /* Browser helper */\r\n\t\t/*isIE: OAT.Dom.isIE(),\r\n\t\tisIE6: OAT.Dom.isIE6(),\r\n\t\tisIE7: OAT.Dom.isIE7(),*/\r\n\t\t//isGecko: OAT.Dom.isGecko(),\r\n\t\t//isOpera: OAT.Dom.isOpera(),\r\n\t\t//isKonqueror: OAT.Dom.isKonqueror(),\r\n\t\t//isKHTML: OAT.Dom.isKHTML(),\r\n\t\t//isWebKit: OAT.Dom.isWebKit(),\r\n\t\t//isMac: OAT.Dom.isMac(),\r\n\t\t//isLinux: OAT.Dom.isLinux(),\r\n\t\t//isWindows: OAT.Dom.isWindows()\r\n\t//}\r\n\r\n\tOAT.Event = { /* Event helper */\r\n\t\tattach: function (elm, event, callback) {\r\n\t\t\tvar element = OAT.$(elm);\r\n\t\t\tif (element.addEventListener) {\t/* gecko */\r\n\t\t\t\telement.addEventListener(event, callback, false);\r\n\t\t\t} else if (element.attachEvent) { /* ie */\r\n\t\t\t\telement.attachEvent(\"on\" + event, callback);\r\n\t\t\t} else { /* ??? */\r\n\t\t\t\telement[\"on\" + event] = callback;\r\n\t\t\t}\r\n\t\t},\r\n\t\tdetach: function (elm, event, callback) {\r\n\t\t\tvar element = OAT.$(elm);\r\n\t\t\tif (element.removeEventListener) { /* gecko */\r\n\t\t\t\telement.removeEventListener(event, callback, false);\r\n\t\t\t} else if (element.detachEvent) { /* ie */\r\n\t\t\t\telement.detachEvent(\"on\" + event, callback);\r\n\t\t\t} else { /* ??? */\r\n\t\t\t\telement[\"on\" + event] = false;\r\n\t\t\t}\r\n\t\t},\r\n\t\tsource: function (event) {\r\n\t\t\treturn (event.target ? event.target : event.srcElement);\r\n\t\t},\r\n\t\tcancel: function (event) {\r\n\t\t\tevent.cancelBubble = true;\r\n\t\t\tif (event.stopPropagation) { event.stopPropagation(); }\r\n\t\t},\r\n\t\tposition: function (event) {\r\n\t\t\tvar scroll = OAT.Dom.getScroll();\r\n\t\t\treturn [event.clientX + scroll[0], event.clientY + scroll[1]];\r\n\t\t},\r\n\t\tprevent: function (event) {\r\n\t\t\tif (event.preventDefault) { event.preventDefault(); }\r\n\t\t\t//if (gx.util.browser.isIE()) {\r\n\t\t\tif (window.document.documentMode) {\r\n\t\t\t\tevent.returnValue = false;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tOAT.Dom.attach = OAT.Event.attach;\r\n\tOAT.Dom.detach = OAT.Event.detach;\r\n\tOAT.Dom.source = OAT.Event.source;\r\n\tOAT.Dom.eventPos = OAT.Event.position;\r\n\tOAT.Dom.prevent = OAT.Event.prevent;\r\n\r\n\tOAT.Loader = { /* first part of loader object */\r\n\t\ttoolkitPath: false,\r\n\t\tloadOccurred: 0, /* was window.onload fired? */\r\n\t\topenAjax: false, /* OpenAjax.js included? */\r\n\r\n\t\t\r\n\t}\r\n\r\n\tOAT.MSG = { /* messages */\r\n\t\tDEBUG: 0,\r\n\t\tOAT_DEBUG: 0,\r\n\t\tOAT_LOAD: 1,\r\n\t\tANIMATION_STOP: 2,\r\n\t\tTREE_EXPAND: 3,\r\n\t\tTREE_COLLAPSE: 4,\r\n\t\tDS_RECORD_PREADVANCE: 5,\r\n\t\tDS_RECORD_ADVANCE: 6,\r\n\t\tDS_PAGE_PREADVANCE: 7,\r\n\t\tDS_PAGE_ADVANCE: 8,\r\n\t\tAJAX_START: 9,\r\n\t\tAJAX_ERROR: 10,\r\n\t\tGD_START: 11,\r\n\t\tGD_ABORT: 12,\r\n\t\tGD_END: 13,\r\n\t\tDOCK_DRAG: 14,\r\n\t\tDOCK_REMOVE: 15,\r\n\t\tSLB_OPENED: 16,\r\n\t\tSLB_CLOSED: 17,\r\n\t\tregistry: [],\r\n\t\tattach: function (sender, msg, callback) {\r\n\t\t\tif (!sender) { return; }\r\n\t\t\tOAT.MSG.registry.push([sender, msg, callback]);\r\n\t\t},\r\n\t\tdetach: function (sender, msg, callback) {\r\n\t\t\tif (!sender) { return; }\r\n\t\t\tvar index = -1;\r\n\t\t\tfor (var i = 0; i < OAT.MSG.registry.length; i++) {\r\n\t\t\t\tvar rec = OAT.MSG.registry[i];\r\n\t\t\t\tif (rec[0] == sender && rec[1] == msg && rec[2] == callback) { index = i; }\r\n\t\t\t}\r\n\t\t\tif (index != -1) { OAT.MSG.registry.splice(index, 1); }\r\n\t\t},\r\n\t\tsend: function (sender, msg, event) {\r\n\t\t\tfor (var i = 0; i < OAT.MSG.registry.length; i++) {\r\n\t\t\t\tvar record = OAT.MSG.registry[i];\r\n\t\t\t\tvar senderOK = (sender == record[0] || record[0] == \"*\");\r\n\t\t\t\tif (!senderOK) { continue; }\r\n\t\t\t\tvar msgOK = (msg == record[1] || record[1] == \"*\");\r\n\t\t\t\tif (!msgOK && record[1].toString().match(/\\*/)) { /* try regexp match */\r\n\t\t\t\t\tvar re = new RegExp(record[1]);\r\n\t\t\t\t\tvar str = \"\";\r\n\t\t\t\t\tfor (var p in OAT.MSG) {\r\n\t\t\t\t\t\tvar v = OAT.MSG[p];\r\n\t\t\t\t\t\tif (v == msg) { str = p; }\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (str.match(re)) { msgOK = true; }\r\n\t\t\t\t} /* regexp */\r\n\t\t\t\tif (msgOK) { record[2](sender, msg, event); }\r\n\t\t\t} /* for all listeners */\r\n\t\t} /* send message */\r\n\t}\r\n\r\n\t\r\n\t\r\n\tif (typeof window != \"undefined\"){\r\n\t\tOAT.Event.attach(window, \"load\", function () {\r\n\t\t\tOAT.Loader.loadOccurred = 1;\r\n\t\t\tOAT.Loader.callListeners();\r\n\t\t});\r\n\t}\r\n\t\r\n\r\n\t\r\n\tOAT.Loader.listeners = new Array();\r\n\tOAT.Loader.addListener = function (callback) {\r\n\t\tif (OAT.Loader.loadOccurred == 1)\r\n\t\t\tcallback(); // Habra que ser un poco ms defensivo ac, chequer que el typeof sea function\r\n\t\telse {\r\n\t\t\tOAT.Loader.listeners.push(callback);\r\n\t\t}\r\n\t};\r\n\r\n\tOAT.Loader.callListeners = function () {\r\n\t\tfor (var i = 0, len = this.listeners.length; i < len; i++)\r\n\t\t\tOAT.Loader.listeners[i](); // Habra que ser un poco ms defensivo ac, chequear que el typeof sea function\r\n\t};\r\n\r\n\tOAT.LoadJapanesseCharacters = function () {\r\n\t\t\r\n\t\tvar uR = \"\";\r\n\t\tfor (var i = 0; i < jQuery('script').length; i++) {\r\n\t\t\tvar js_url = jQuery('script')[i].src\r\n\t\t\tif (js_url.indexOf(\"gxpivotjs\") > 0) {\r\n\t\t\t\tuR = js_url\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tOAT.rP = uR.substring(0, uR.indexOf(\"QueryViewer/oatPivot\"));\r\n\r\n\r\n\t\t//load japanese lenguage character images files\r\n\t\tif ((gx.languageCode == \"jap\") || (gx.languageCode == \"jpn\") || (gx.languageCode == \"jp\") || (gx.languageCode == \"ja\") || (gx.languageCode == \"jpx\")\r\n\t\t\t|| (gx.languageCode == \"ain\") || (gx.languageCode == \"jpns\") || (gx.languageCode == \"ams\") || (gx.languageCode == 'japanese')\r\n\t\t\t|| (gx.languageCode == \"JAP\") || (gx.languageCode == \"JP\") || (gx.languageCode == \"JA\") || (gx.languageCode == \"JPN\")\r\n\t\t\t|| (gx.languageCode == \"ja-JP\") || (gx.languageCode == \"ja_JP\") || (gx.languageCode == \"jp\")) {\r\n\r\n\r\n\r\n\r\n\t\t\tvar b = gx.util.resourceUrl(OAT.rP + 'QueryViewer/oatPivot/downloadify/' + 'jsPDF_japanese.js', true);\r\n\r\n\r\n\t\t\tvar d = document.getElementsByTagName(\"head\")[0] || document.documentElement;\r\n\t\t\tvar s = d.getElementsByTagName(\"script\");\r\n\t\t\tvar prevLoad = false;\r\n\t\t\tfor (var i = 0; s.length > i; i++) {\r\n\t\t\t\tif (s[i].src == b) {\r\n\t\t\t\t\tprevLoad = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (!prevLoad) {\r\n\t\t\t\tvar e = document.createElement(\"script\");\r\n\t\t\t\te.type = \"text/javascript\";\r\n\t\t\t\te.src = b;\r\n\t\t\t\te.onerror = function () {\r\n\t\t\t\t\tvar e = document.createElement(\"script\");\r\n\t\t\t\t\te.type = \"text/javascript\";\r\n\t\t\t\t\te.src = gx.util.resourceUrl(OAT.rP + 'QueryViewer/oatPivot/downloadify/' + 'jsPDF_japanese.src.js', true);\r\n\t\t\t\t\tvar d = document.getElementsByTagName(\"head\")[0] || document.documentElement;\r\n\t\t\t\t\td.insertBefore(e, d.lastChild);\r\n\t\t\t\t};\r\n\t\t\t\te.onreadystatechange = function () {\r\n\t\t\t\t\tvar document = this.readyState;\r\n\t\t\t\t\tif (document === \"loaded\" || document === \"complete\") {\r\n\t\t\t\t\t\te.onreadystatechange = null;\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t\td.insertBefore(e, d.lastChild);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t}\r\n\r\n\r\n\r\n\tfunction loadJS(FILE_URL, async = true) {\r\n\t\tlet scriptEle = document.createElement(\"script\");\r\n\r\n\t\tscriptEle.setAttribute(\"src\", FILE_URL);\r\n\t\tscriptEle.setAttribute(\"type\", \"text/javascript\");\r\n\t\tscriptEle.setAttribute(\"async\", async);\r\n\r\n\t\tdocument.body.appendChild(scriptEle);\r\n\r\n  \t\t// success event \r\n  \t\tscriptEle.addEventListener(\"load\", () => {\r\n    \t\tconsole.log(\"File loaded\")\r\n  \t\t});\r\n   \t\t// error event\r\n  \t\tscriptEle.addEventListener(\"error\", (ev) => {\r\n    \t\tconsole.log(\"Error on loading file\", ev);\r\n  \t\t});\r\n\t}\r\n\r\n\r\n//jsPDF_output.src.js\r\nvar jsPDF = (function () {\r\n\t\t'use strict';\r\n\t\t/*jslint browser:true, plusplus: true, bitwise: true, nomen: true */\r\n\t\t/*global document: false, btoa, atob, zpipe, Uint8Array, ArrayBuffer, Blob, saveAs, adler32cs, Deflater */\r\n\r\n\t\t// this will run on <=IE9, possibly some niche browsers\r\n\t\t// new webkit-based, FireFox, IE10 already have native version of this.\r\n\t\tif (typeof btoa === 'undefined') {\r\n\t\t\twindow.btoa = function (data) {\r\n\t\t\t\t// DO NOT ADD UTF8 ENCODING CODE HERE!!!!\r\n\r\n\t\t\t\t// UTF8 encoding encodes bytes over char code 128\r\n\t\t\t\t// and, essentially, turns an 8-bit binary streams\r\n\t\t\t\t// (that base64 can deal with) into 7-bit binary streams.\r\n\t\t\t\t// (by default server does not know that and does not recode the data back to 8bit)\r\n\t\t\t\t// You destroy your data.\r\n\r\n\t\t\t\t// binary streams like jpeg image data etc, while stored in JavaScript strings,\r\n\t\t\t\t// (which are 16bit arrays) are in 8bit format already.\r\n\t\t\t\t// You do NOT need to char-encode that before base64 encoding.\r\n\r\n\t\t\t\t// if you, by act of fate\r\n\t\t\t\t// have string which has individual characters with code\r\n\t\t\t\t// above 255 (pure unicode chars), encode that BEFORE you base64 here.\r\n\t\t\t\t// you can use absolutely any approch there, as long as in the end,\r\n\t\t\t\t// base64 gets an 8bit (char codes 0 - 255) stream.\r\n\t\t\t\t// when you get it on the server after un-base64, you must\r\n\t\t\t\t// UNencode it too, to get back to 16, 32bit or whatever original bin stream.\r\n\r\n\t\t\t\t// Note, Yes, JavaScript strings are, in most cases UCS-2 -\r\n\t\t\t\t// 16-bit character arrays. This does not mean, however,\r\n\t\t\t\t// that you always have to UTF8 it before base64.\r\n\t\t\t\t// it means that if you have actual characters anywhere in\r\n\t\t\t\t// that string that have char code above 255, you need to\r\n\t\t\t\t// recode *entire* string from 16-bit (or 32bit) to 8-bit array.\r\n\t\t\t\t// You can do binary split to UTF16 (BE or LE)\r\n\t\t\t\t// you can do utf8, you can split the thing by hand and prepend BOM to it,\r\n\t\t\t\t// but whatever you do, make sure you mirror the opposite on\r\n\t\t\t\t// the server. If server does not expect to post-process un-base64\r\n\t\t\t\t// 8-bit binary stream, think very very hard about messing around with encoding.\r\n\r\n\t\t\t\t// so, long story short:\r\n\t\t\t\t// DO NOT ADD UTF8 ENCODING CODE HERE!!!!\r\n\r\n\r\n\r\n\t\t\t\tvar b64 = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\",\r\n\t\t\t\t\tb64a = b64.split(''),\r\n\t\t\t\t\to1,\r\n\t\t\t\t\to2,\r\n\t\t\t\t\to3,\r\n\t\t\t\t\th1,\r\n\t\t\t\t\th2,\r\n\t\t\t\t\th3,\r\n\t\t\t\t\th4,\r\n\t\t\t\t\tbits,\r\n\t\t\t\t\ti = 0,\r\n\t\t\t\t\tac = 0,\r\n\t\t\t\t\tenc = \"\",\r\n\t\t\t\t\ttmp_arr = [],\r\n\t\t\t\t\tr;\r\n\r\n\t\t\t\tdo { // pack three octets into four hexets\r\n\t\t\t\t\to1 = data.charCodeAt(i++);\r\n\t\t\t\t\to2 = data.charCodeAt(i++);\r\n\t\t\t\t\to3 = data.charCodeAt(i++);\r\n\r\n\t\t\t\t\tbits = o1 << 16 | o2 << 8 | o3;\r\n\r\n\t\t\t\t\th1 = bits >> 18 & 0x3f;\r\n\t\t\t\t\th2 = bits >> 12 & 0x3f;\r\n\t\t\t\t\th3 = bits >> 6 & 0x3f;\r\n\t\t\t\t\th4 = bits & 0x3f;\r\n\r\n\t\t\t\t\t// use hexets to index into b64, and append result to encoded string\r\n\t\t\t\t\ttmp_arr[ac++] = b64a[h1] + b64a[h2] + b64a[h3] + b64a[h4];\r\n\t\t\t\t} while (i < data.length);\r\n\r\n\t\t\t\tenc = tmp_arr.join('');\r\n\t\t\t\tr = data.length % 3;\r\n\t\t\t\treturn (r ? enc.slice(0, r - 3) : enc) + '==='.slice(r || 3);\r\n\t\t\t\t// end of base64 encoder MIT, GPL\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tif (typeof atob === 'undefined') {\r\n\t\t\twindow.atob = function (data) {\r\n\t\t\t\t// http://kevin.vanzonneveld.net\r\n\t\t\t\t// +   original by: Tyler Akins (http://rumkin.com)\r\n\t\t\t\t// +   improved by: Thunder.m\r\n\t\t\t\t// +      input by: Aman Gupta\r\n\t\t\t\t// +   improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)\r\n\t\t\t\t// +   bugfixed by: Onno Marsman\r\n\t\t\t\t// +   bugfixed by: Pellentesque Malesuada\r\n\t\t\t\t// +   improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)\r\n\t\t\t\t// +      input by: Brett Zamir (http://brett-zamir.me)\r\n\t\t\t\t// +   bugfixed by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)\r\n\t\t\t\t// *     example 1: base64_decode('S2V2aW4gdmFuIFpvbm5ldmVsZA==');\r\n\t\t\t\t// *     returns 1: 'Kevin van Zonneveld'\r\n\t\t\t\t// mozilla has this native\r\n\t\t\t\t// - but breaks in 2.0.0.12!\r\n\t\t\t\t//if (typeof this.window['atob'] == 'function') {\r\n\t\t\t\t//    return atob(data);\r\n\t\t\t\t//}\r\n\t\t\t\tvar b64 = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\",\r\n\t\t\t\t\to1,\r\n\t\t\t\t\to2,\r\n\t\t\t\t\to3,\r\n\t\t\t\t\th1,\r\n\t\t\t\t\th2,\r\n\t\t\t\t\th3,\r\n\t\t\t\t\th4,\r\n\t\t\t\t\tbits,\r\n\t\t\t\t\ti = 0,\r\n\t\t\t\t\tac = 0,\r\n\t\t\t\t\tdec = \"\",\r\n\t\t\t\t\ttmp_arr = [];\r\n\r\n\t\t\t\tif (!data) {\r\n\t\t\t\t\treturn data;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tdata += '';\r\n\r\n\t\t\t\tdo { // unpack four hexets into three octets using index points in b64\r\n\t\t\t\t\th1 = b64.indexOf(data.charAt(i++));\r\n\t\t\t\t\th2 = b64.indexOf(data.charAt(i++));\r\n\t\t\t\t\th3 = b64.indexOf(data.charAt(i++));\r\n\t\t\t\t\th4 = b64.indexOf(data.charAt(i++));\r\n\r\n\t\t\t\t\tbits = h1 << 18 | h2 << 12 | h3 << 6 | h4;\r\n\r\n\t\t\t\t\to1 = bits >> 16 & 0xff;\r\n\t\t\t\t\to2 = bits >> 8 & 0xff;\r\n\t\t\t\t\to3 = bits & 0xff;\r\n\r\n\t\t\t\t\tif (h3 === 64) {\r\n\t\t\t\t\t\ttmp_arr[ac++] = String.fromCharCode(o1);\r\n\t\t\t\t\t} else if (h4 === 64) {\r\n\t\t\t\t\t\ttmp_arr[ac++] = String.fromCharCode(o1, o2);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\ttmp_arr[ac++] = String.fromCharCode(o1, o2, o3);\r\n\t\t\t\t\t}\r\n\t\t\t\t} while (i < data.length);\r\n\t\t\t\tdec = tmp_arr.join('');\r\n\t\t\t\treturn dec;\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tvar getObjectLength = typeof Object.keys === 'function' ?\r\n\t\t\tfunction (object) {\r\n\t\t\t\treturn Object.keys(object).length;\r\n\t\t\t} :\r\n\t\t\tfunction (object) {\r\n\t\t\t\tvar i = 0, e;\r\n\t\t\t\tfor (e in object) {\r\n\t\t\t\t\tif (object.hasOwnProperty(e)) {\r\n\t\t\t\t\t\ti++;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn i;\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\tPubSub implementation\r\n\t\t\t\r\n\t\t\t@class\r\n\t\t\t@name PubSub\r\n\t\t\t*/\r\n\t\t\tPubSub = function (context) {\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t@private\r\n\t\t\t\t@fieldOf PubSub\r\n\t\t\t\t*/\r\n\t\t\t\tthis.topics = {};\r\n\t\t\t\t/**\r\n\t\t\t\tStores what will be `this` within the callback functions.\r\n\t\r\n\t\t\t\t@private\r\n\t\t\t\t@fieldOf PubSub#\r\n\t\t\t\t*/\r\n\t\t\t\tthis.context = context;\r\n\t\t\t\t/**\r\n\t\t\t\tAllows caller to emit an event and pass arguments to event listeners.\r\n\t\t\t\t@public\r\n\t\t\t\t@function\r\n\t\t\t\t@param topic {String} Name of the channel on which to voice this event\r\n\t\t\t\t@param args Any number of arguments you want to pass to the listeners of this event.\r\n\t\t\t\t@methodOf PubSub#\r\n\t\t\t\t@name publish\r\n\t\t\t\t*/\r\n\t\t\t\tthis.publish = function (topic, args) {\r\n\t\t\t\t\tif (this.topics[topic]) {\r\n\t\t\t\t\t\tvar currentTopic = this.topics[topic],\r\n\t\t\t\t\t\t\ttoremove = [],\r\n\t\t\t\t\t\t\tfn,\r\n\t\t\t\t\t\t\ti,\r\n\t\t\t\t\t\t\tl,\r\n\t\t\t\t\t\t\tpair,\r\n\t\t\t\t\t\t\temptyFunc = function () { };\r\n\t\t\t\t\t\targs = Array.prototype.slice.call(arguments, 1);\r\n\t\t\t\t\t\tfor (i = 0, l = currentTopic.length; i < l; i++) {\r\n\t\t\t\t\t\t\tpair = currentTopic[i]; // this is a [function, once_flag] array\r\n\t\t\t\t\t\t\tfn = pair[0];\r\n\t\t\t\t\t\t\tif (pair[1]) { /* 'run once' flag set */\r\n\t\t\t\t\t\t\t\tpair[0] = emptyFunc;\r\n\t\t\t\t\t\t\t\ttoremove.push(i);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tfn.apply(this.context, args);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tfor (i = 0, l = toremove.length; i < l; i++) {\r\n\t\t\t\t\t\t\tcurrentTopic.splice(toremove[i], 1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t\t/**\r\n\t\t\t\tAllows listener code to subscribe to channel and be called when data is available\r\n\t\t\t\t@public\r\n\t\t\t\t@function\r\n\t\t\t\t@param topic {String} Name of the channel on which to voice this event\r\n\t\t\t\t@param callback {Function} Executable (function pointer) that will be ran when event is voiced on this channel.\r\n\t\t\t\t@param once {Boolean} (optional. False by default) Flag indicating if the function is to be triggered only once.\r\n\t\t\t\t@returns {Object} A token object that cen be used for unsubscribing.\r\n\t\t\t\t@methodOf PubSub#\r\n\t\t\t\t@name subscribe\r\n\t\t\t\t*/\r\n\t\t\t\tthis.subscribe = function (topic, callback, once) {\r\n\t\t\t\t\tif (!this.topics[topic]) {\r\n\t\t\t\t\t\tthis.topics[topic] = [[callback, once]];\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.topics[topic].push([callback, once]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\"topic\": topic,\r\n\t\t\t\t\t\t\"callback\": callback\r\n\t\t\t\t\t};\r\n\t\t\t\t};\r\n\t\t\t\t/**\r\n\t\t\t\tAllows listener code to unsubscribe from a channel\r\n\t\t\t\t@public\r\n\t\t\t\t@function\r\n\t\t\t\t@param token {Object} A token object that was returned by `subscribe` method\r\n\t\t\t\t@methodOf PubSub#\r\n\t\t\t\t@name unsubscribe\r\n\t\t\t\t*/\r\n\t\t\t\tthis.unsubscribe = function (token) {\r\n\t\t\t\t\tif (this.topics[token.topic]) {\r\n\t\t\t\t\t\tvar currentTopic = this.topics[token.topic], i, l;\r\n\r\n\t\t\t\t\t\tfor (i = 0, l = currentTopic.length; i < l; i++) {\r\n\t\t\t\t\t\t\tif (currentTopic[i][0] === token.callback) {\r\n\t\t\t\t\t\t\t\tcurrentTopic.splice(i, 1);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t};\r\n\r\n\r\n\t\t/**\r\n\t\t@constructor\r\n\t\t@private\r\n\t\t*/\r\n\t\tfunction jsPDF(orientation, unit, format, compressPdf, wdt, hgt) { /** String orientation, String unit, String format, Boolean compressed */\r\n\r\n\t\t\t// Default parameter values\r\n\t\t\tif (typeof orientation === 'undefined') {\r\n\t\t\t\torientation = 'p';\r\n\t\t\t} else {\r\n\t\t\t\torientation = orientation.toString().toLowerCase();\r\n\t\t\t}\r\n\t\t\tif (typeof unit === 'undefined') { unit = 'mm'; }\r\n\t\t\tif (typeof format === 'undefined') { format = 'a4'; }\r\n\t\t\tif (typeof compressPdf === 'undefined' && typeof zpipe === 'undefined') { compressPdf = false; }\r\n\r\n\t\t\tvar format_as_string = format.toString().toLowerCase(),\r\n\t\t\t\tversion = '0.9.0rc2',\r\n\t\t\t\tcontent = [],\r\n\t\t\t\tcontent_length = 0,\r\n\t\t\t\tcompress = compressPdf,\r\n\t\t\t\tpdfVersion = '1.3', // PDF Version\r\n\t\t\t\tpageFormats = { // Size in pt of various paper formats\r\n\t\t\t\t\t'a3': [841.89, 1190.55],\r\n\t\t\t\t\t'a4': [wdt, hgt],//[595.28, 841.89],\r\n\t\t\t\t\t'a5': [420.94, 595.28],\r\n\t\t\t\t\t'letter': [612, 792],\r\n\t\t\t\t\t'legal': [612, 1008]\r\n\t\t\t\t},\r\n\t\t\t\ttextColor = '0 g',\r\n\t\t\t\tdrawColor = '0 G',\r\n\t\t\t\tpage = 0,\r\n\t\t\t\tpages = [],\r\n\t\t\t\tobjectNumber = 2, // 'n' Current object number\r\n\t\t\t\toutToPages = false, // switches where out() prints. outToPages true = push to pages obj. outToPages false = doc builder content\r\n\t\t\t\toffsets = [], // List of offsets. Activated and reset by buildDocument(). Pupulated by various calls buildDocument makes.\r\n\t\t\t\tfonts = {}, // collection of font objects, where key is fontKey - a dynamically created label for a given font.\r\n\t\t\t\tfontmap = {}, // mapping structure fontName > fontStyle > font key - performance layer. See addFont()\r\n\t\t\t\tactiveFontSize = 16,\r\n\t\t\t\tactiveFontKey, // will be string representing the KEY of the font as combination of fontName + fontStyle\r\n\t\t\t\tlineWidth = 0.200025, // 2mm\r\n\t\t\t\tpageHeight,\r\n\t\t\t\tpageWidth,\r\n\t\t\t\tk, // Scale factor\r\n\t\t\t\tdocumentProperties = { 'title': '', 'subject': '', 'author': '', 'keywords': '', 'creator': '' },\r\n\t\t\t\tlineCapID = 0,\r\n\t\t\t\tlineJoinID = 0,\r\n\t\t\t\tAPI = {},\r\n\t\t\t\tevents = new PubSub(API),\r\n\t\t\t\ttmp,\r\n\t\t\t\tplugin,\r\n\t\t\t\t/////////////////////\r\n\t\t\t\t// Private functions\r\n\t\t\t\t/////////////////////\r\n\t\t\t\t// simplified (speedier) replacement for sprintf's %.2f conversion\r\n\t\t\t\tf2 = function (number) {\r\n\t\t\t\t\treturn number.toFixed(2);\r\n\t\t\t\t},\r\n\t\t\t\t// simplified (speedier) replacement for sprintf's %.3f conversion\r\n\t\t\t\tf3 = function (number) {\r\n\t\t\t\t\treturn number.toFixed(3);\r\n\t\t\t\t},\r\n\t\t\t\t// simplified (speedier) replacement for sprintf's %02d\r\n\t\t\t\tpadd2 = function (number) {\r\n\t\t\t\t\tvar n = (number).toFixed(0);\r\n\t\t\t\t\tif (number < 10) {\r\n\t\t\t\t\t\treturn '0' + n;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn n;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t// simplified (speedier) replacement for sprintf's %02d\r\n\t\t\t\tpadd10 = function (number) {\r\n\t\t\t\t\tvar n = (number).toFixed(0);\r\n\t\t\t\t\tif (n.length < 10) {\r\n\t\t\t\t\t\treturn new Array(11 - n.length).join('0') + n;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn n;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tout = function (string) {\r\n\t\t\t\t\tif (outToPages) { /* set by beginPage */\r\n\t\t\t\t\t\tpages[page].push(string);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tcontent.push(string);\r\n\t\t\t\t\t\tcontent_length += string.length + 1; // +1 is for '\\n' that will be used to join contents of content\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tnewObject = function () {\r\n\t\t\t\t\t// Begin a new object\r\n\t\t\t\t\tobjectNumber++;\r\n\t\t\t\t\toffsets[objectNumber] = content_length;\r\n\t\t\t\t\tout(objectNumber + ' 0 obj');\r\n\t\t\t\t\treturn objectNumber;\r\n\t\t\t\t},\r\n\t\t\t\tputStream = function (str) {\r\n\t\t\t\t\tout('stream');\r\n\t\t\t\t\tout(str);\r\n\t\t\t\t\tout('endstream');\r\n\t\t\t\t},\r\n\t\t\t\twPt,\r\n\t\t\t\thPt,\r\n\t\t\t\tkids,\r\n\t\t\t\ti,\r\n\t\t\t\tputPages = function () {\r\n\t\t\t\t\twPt = pageWidth * k;\r\n\t\t\t\t\thPt = pageHeight * k;\r\n\r\n\t\t\t\t\t// outToPages = false as set in endDocument(). out() writes to content.\r\n\r\n\t\t\t\t\tvar n, p, arr, uint, i, deflater, adler32;\r\n\t\t\t\t\tfor (n = 1; n <= page; n++) {\r\n\t\t\t\t\t\tnewObject();\r\n\t\t\t\t\t\tout('<</Type /Page');\r\n\t\t\t\t\t\tout('/Parent 1 0 R');\r\n\t\t\t\t\t\tout('/Resources 2 0 R');\r\n\t\t\t\t\t\tout('/Contents ' + (objectNumber + 1) + ' 0 R>>');\r\n\t\t\t\t\t\tout('endobj');\r\n\r\n\t\t\t\t\t\t// Page content\r\n\t\t\t\t\t\tp = pages[n].join('\\n');\r\n\t\t\t\t\t\tnewObject();\r\n\t\t\t\t\t\tif (compress) {\r\n\t\t\t\t\t\t\tarr = [];\r\n\t\t\t\t\t\t\tfor (i = 0; i < p.length; ++i) {\r\n\t\t\t\t\t\t\t\tarr[i] = p.charCodeAt(i);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tadler32 = adler32cs.from(p);\r\n\t\t\t\t\t\t\tdeflater = new Deflater(6);\r\n\t\t\t\t\t\t\tdeflater.append(new Uint8Array(arr));\r\n\t\t\t\t\t\t\tp = deflater.flush();\r\n\t\t\t\t\t\t\tarr = [new Uint8Array([120, 156]), new Uint8Array(p),\r\n\t\t\t\t\t\t\tnew Uint8Array([adler32 & 0xFF, (adler32 >> 8) & 0xFF, (adler32 >> 16) & 0xFF, (adler32 >> 24) & 0xFF])];\r\n\t\t\t\t\t\t\tp = '';\r\n\t\t\t\t\t\t\tfor (i in arr) {\r\n\t\t\t\t\t\t\t\tif (arr.hasOwnProperty(i)) {\r\n\t\t\t\t\t\t\t\t\tp += String.fromCharCode.apply(null, arr[i]);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tout('<</Length ' + p.length + ' /Filter [/FlateDecode]>>');\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tout('<</Length ' + p.length + '>>');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tputStream(p);\r\n\t\t\t\t\t\tout('endobj');\r\n\t\t\t\t\t}\r\n\t\t\t\t\toffsets[1] = content_length;\r\n\t\t\t\t\tout('1 0 obj');\r\n\t\t\t\t\tout('<</Type /Pages');\r\n\t\t\t\t\tkids = '/Kids [';\r\n\t\t\t\t\tfor (i = 0; i < page; i++) {\r\n\t\t\t\t\t\tkids += (3 + 2 * i) + ' 0 R ';\r\n\t\t\t\t\t}\r\n\t\t\t\t\tout(kids + ']');\r\n\t\t\t\t\tout('/Count ' + page);\r\n\t\t\t\t\tout('/MediaBox [0 0 ' + f2(wPt) + ' ' + f2(hPt) + ']');\r\n\t\t\t\t\tout('>>');\r\n\t\t\t\t\tout('endobj');\r\n\t\t\t\t},\r\n\t\t\t\tputFont = function (font) {\r\n\t\t\t\t\tfont.objectNumber = newObject();\r\n\t\t\t\t\tout('<</BaseFont/' + font.PostScriptName + '/Type/Font');\r\n\t\t\t\t\tif (typeof font.encoding === 'string') {\r\n\t\t\t\t\t\tout('/Encoding/' + font.encoding);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tout('/Subtype/Type1>>');\r\n\t\t\t\t\tout('endobj');\r\n\t\t\t\t},\r\n\t\t\t\tputFonts = function () {\r\n\t\t\t\t\tvar fontKey;\r\n\t\t\t\t\tfor (fontKey in fonts) {\r\n\t\t\t\t\t\tif (fonts.hasOwnProperty(fontKey)) {\r\n\t\t\t\t\t\t\tputFont(fonts[fontKey]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tputXobjectDict = function () {\r\n\t\t\t\t\t// Loop through images, or other data objects\r\n\t\t\t\t\tevents.publish('putXobjectDict');\r\n\t\t\t\t},\r\n\t\t\t\tputResourceDictionary = function () {\r\n\t\t\t\t\tout('/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]');\r\n\t\t\t\t\tout('/Font <<');\r\n\t\t\t\t\t// Do this for each font, the '1' bit is the index of the font\r\n\t\t\t\t\tvar fontKey;\r\n\t\t\t\t\tfor (fontKey in fonts) {\r\n\t\t\t\t\t\tif (fonts.hasOwnProperty(fontKey)) {\r\n\t\t\t\t\t\t\tout('/' + fontKey + ' ' + fonts[fontKey].objectNumber + ' 0 R');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tout('>>');\r\n\t\t\t\t\tout('/XObject <<');\r\n\t\t\t\t\tputXobjectDict();\r\n\t\t\t\t\tout('>>');\r\n\t\t\t\t},\r\n\t\t\t\tputResources = function () {\r\n\t\t\t\t\tputFonts();\r\n\t\t\t\t\tevents.publish('putResources');\r\n\t\t\t\t\t// Resource dictionary\r\n\t\t\t\t\toffsets[2] = content_length;\r\n\t\t\t\t\tout('2 0 obj');\r\n\t\t\t\t\tout('<<');\r\n\t\t\t\t\tputResourceDictionary();\r\n\t\t\t\t\tout('>>');\r\n\t\t\t\t\tout('endobj');\r\n\t\t\t\t\tevents.publish('postPutResources');\r\n\t\t\t\t},\r\n\t\t\t\taddToFontDictionary = function (fontKey, fontName, fontStyle) {\r\n\t\t\t\t\t// this is mapping structure for quick font key lookup.\r\n\t\t\t\t\t// returns the KEY of the font (ex: \"F1\") for a given pair of font name and type (ex: \"Arial\". \"Italic\")\r\n\t\t\t\t\tvar undef;\r\n\t\t\t\t\tif (fontmap[fontName] === undef) {\r\n\t\t\t\t\t\tfontmap[fontName] = {}; // fontStyle is a var interpreted and converted to appropriate string. don't wrap in quotes.\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfontmap[fontName][fontStyle] = fontKey;\r\n\t\t\t\t},\r\n\t\t\t\t/**\r\n\t\t\t\tFontObject describes a particular font as member of an instnace of jsPDF\r\n\t\r\n\t\t\t\tIt's a collection of properties like 'id' (to be used in PDF stream),\r\n\t\t\t\t'fontName' (font's family name), 'fontStyle' (font's style variant label)\r\n\t\r\n\t\t\t\t@class\r\n\t\t\t\t@public\r\n\t\t\t\t@property id {String} PDF-document-instance-specific label assinged to the font.\r\n\t\t\t\t@property PostScriptName {String} PDF specification full name for the font\r\n\t\t\t\t@property encoding {Object} Encoding_name-to-Font_metrics_object mapping.\r\n\t\t\t\t@name FontObject\r\n\t\t\t\t*/\r\n\t\t\t\tFontObject = {},\r\n\t\t\t\taddFont = function (PostScriptName, fontName, fontStyle, encoding) {\r\n\t\t\t\t\tvar fontKey = 'F' + (getObjectLength(fonts) + 1).toString(10),\r\n\t\t\t\t\t\t// This is FontObject\r\n\t\t\t\t\t\tfont = fonts[fontKey] = {\r\n\t\t\t\t\t\t\t'id': fontKey,\r\n\t\t\t\t\t\t\t// , 'objectNumber':   will be set by putFont()\r\n\t\t\t\t\t\t\t'PostScriptName': PostScriptName,\r\n\t\t\t\t\t\t\t'fontName': fontName,\r\n\t\t\t\t\t\t\t'fontStyle': fontStyle,\r\n\t\t\t\t\t\t\t'encoding': encoding,\r\n\t\t\t\t\t\t\t'metadata': {}\r\n\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\taddToFontDictionary(fontKey, fontName, fontStyle);\r\n\r\n\t\t\t\t\tevents.publish('addFont', font);\r\n\r\n\t\t\t\t\treturn fontKey;\r\n\t\t\t\t},\r\n\t\t\t\taddFonts = function () {\r\n\r\n\t\t\t\t\tvar HELVETICA = \"helvetica\",\r\n\t\t\t\t\t\tTIMES = \"times\",\r\n\t\t\t\t\t\tCOURIER = \"courier\",\r\n\t\t\t\t\t\tNORMAL = \"normal\",\r\n\t\t\t\t\t\tBOLD = \"bold\",\r\n\t\t\t\t\t\tITALIC = \"italic\",\r\n\t\t\t\t\t\tBOLD_ITALIC = \"bolditalic\",\r\n\t\t\t\t\t\tencoding = 'StandardEncoding',\r\n\t\t\t\t\t\tstandardFonts = [\r\n\t\t\t\t\t\t\t['Helvetica', HELVETICA, NORMAL],\r\n\t\t\t\t\t\t\t['Helvetica-Bold', HELVETICA, BOLD],\r\n\t\t\t\t\t\t\t['Helvetica-Oblique', HELVETICA, ITALIC],\r\n\t\t\t\t\t\t\t['Helvetica-BoldOblique', HELVETICA, BOLD_ITALIC],\r\n\t\t\t\t\t\t\t['Courier', COURIER, NORMAL],\r\n\t\t\t\t\t\t\t['Courier-Bold', COURIER, BOLD],\r\n\t\t\t\t\t\t\t['Courier-Oblique', COURIER, ITALIC],\r\n\t\t\t\t\t\t\t['Courier-BoldOblique', COURIER, BOLD_ITALIC],\r\n\t\t\t\t\t\t\t['Times-Roman', TIMES, NORMAL],\r\n\t\t\t\t\t\t\t['Times-Bold', TIMES, BOLD],\r\n\t\t\t\t\t\t\t['Times-Italic', TIMES, ITALIC],\r\n\t\t\t\t\t\t\t['Times-BoldItalic', TIMES, BOLD_ITALIC]\r\n\t\t\t\t\t\t],\r\n\t\t\t\t\t\ti,\r\n\t\t\t\t\t\tl,\r\n\t\t\t\t\t\tfontKey,\r\n\t\t\t\t\t\tparts;\r\n\t\t\t\t\tfor (i = 0, l = standardFonts.length; i < l; i++) {\r\n\t\t\t\t\t\tfontKey = addFont(\r\n\t\t\t\t\t\t\tstandardFonts[i][0],\r\n\t\t\t\t\t\t\tstandardFonts[i][1],\r\n\t\t\t\t\t\t\tstandardFonts[i][2],\r\n\t\t\t\t\t\t\tencoding\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t// adding aliases for standard fonts, this time matching the capitalization\r\n\t\t\t\t\t\tparts = standardFonts[i][0].split('-');\r\n\t\t\t\t\t\taddToFontDictionary(fontKey, parts[0], parts[1] || '');\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tevents.publish('addFonts', { 'fonts': fonts, 'dictionary': fontmap });\r\n\t\t\t\t},\r\n\t\t\t\t/**\r\n\t\r\n\t\t\t\t@public\r\n\t\t\t\t@function\r\n\t\t\t\t@param text {String}\r\n\t\t\t\t@param flags {Object} Encoding flags.\r\n\t\t\t\t@returns {String} Encoded string\r\n\t\t\t\t*/\r\n\t\t\t\tto8bitStream = function (text, flags) {\r\n\t\t\t\t\t/* PDF 1.3 spec:\r\n\t\t\t\t\t\"For text strings encoded in Unicode, the first two bytes must be 254 followed by\r\n\t\t\t\t\t255, representing the Unicode byte order marker, U+FEFF. (This sequence conflicts\r\n\t\t\t\t\twith the PDFDocEncoding character sequence thorn ydieresis, which is unlikely\r\n\t\t\t\t\tto be a meaningful beginning of a word or phrase.) The remainder of the\r\n\t\t\t\t\tstring consists of Unicode character codes, according to the UTF-16 encoding\r\n\t\t\t\t\tspecified in the Unicode standard, version 2.0. Commonly used Unicode values\r\n\t\t\t\t\tare represented as 2 bytes per character, with the high-order byte appearing first\r\n\t\t\t\t\tin the string.\"\r\n\t\r\n\t\t\t\t\tIn other words, if there are chars in a string with char code above 255, we\r\n\t\t\t\t\trecode the string to UCS2 BE - string doubles in length and BOM is prepended.\r\n\t\r\n\t\t\t\t\tHOWEVER!\r\n\t\t\t\t\tActual *content* (body) text (as opposed to strings used in document properties etc)\r\n\t\t\t\t\tdoes NOT expect BOM. There, it is treated as a literal GID (Glyph ID)\r\n\t\r\n\t\t\t\t\tBecause of Adobe's focus on \"you subset your fonts!\" you are not supposed to have\r\n\t\t\t\t\ta font that maps directly Unicode (UCS2 / UTF16BE) code to font GID, but you could\r\n\t\t\t\t\tfudge it with \"Identity-H\" encoding and custom CIDtoGID map that mimics Unicode\r\n\t\t\t\t\tcode page. There, however, all characters in the stream are treated as GIDs,\r\n\t\t\t\t\tincluding BOM, which is the reason we need to skip BOM in content text (i.e. that\r\n\t\t\t\t\tthat is tied to a font).\r\n\t\r\n\t\t\t\t\tTo signal this \"special\" PDFEscape / to8bitStream handling mode,\r\n\t\t\t\t\tAPI.text() function sets (unless you overwrite it with manual values\r\n\t\t\t\t\tgiven to API.text(.., flags) )\r\n\t\t\t\t\t\tflags.autoencode = true\r\n\t\t\t\t\t\tflags.noBOM = true\r\n\t\r\n\t\t\t\t\t*/\r\n\r\n\t\t\t\t\t/*\r\n\t\t\t\t\t`flags` properties relied upon:\r\n\t\t\t\t\t.sourceEncoding = string with encoding label.\r\n\t\t\t\t\t\t\"Unicode\" by default. = encoding of the incoming text.\r\n\t\t\t\t\t\tpass some non-existing encoding name\r\n\t\t\t\t\t\t(ex: 'Do not touch my strings! I know what I am doing.')\r\n\t\t\t\t\t\tto make encoding code skip the encoding step.\r\n\t\t\t\t\t.outputEncoding = Either valid PDF encoding name\r\n\t\t\t\t\t\t(must be supported by jsPDF font metrics, otherwise no encoding)\r\n\t\t\t\t\t\tor a JS object, where key = sourceCharCode, value = outputCharCode\r\n\t\t\t\t\t\tmissing keys will be treated as: sourceCharCode === outputCharCode\r\n\t\t\t\t\t.noBOM\r\n\t\t\t\t\t\tSee comment higher above for explanation for why this is important\r\n\t\t\t\t\t.autoencode\r\n\t\t\t\t\t\tSee comment higher above for explanation for why this is important\r\n\t\t\t\t\t*/\r\n\r\n\t\t\t\t\tvar i, l, undef, sourceEncoding, encodingBlock, outputEncoding, newtext, isUnicode, ch, bch;\r\n\r\n\t\t\t\t\tif (flags === undef) {\r\n\t\t\t\t\t\tflags = {};\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tsourceEncoding = flags.sourceEncoding ? sourceEncoding : 'Unicode';\r\n\r\n\t\t\t\t\toutputEncoding = flags.outputEncoding;\r\n\r\n\t\t\t\t\t// This 'encoding' section relies on font metrics format\r\n\t\t\t\t\t// attached to font objects by, among others,\r\n\t\t\t\t\t// \"Willow Systems' standard_font_metrics plugin\"\r\n\t\t\t\t\t// see jspdf.plugin.standard_font_metrics.js for format\r\n\t\t\t\t\t// of the font.metadata.encoding Object.\r\n\t\t\t\t\t// It should be something like\r\n\t\t\t\t\t//   .encoding = {'codePages':['WinANSI....'], 'WinANSI...':{code:code, ...}}\r\n\t\t\t\t\t//   .widths = {0:width, code:width, ..., 'fof':divisor}\r\n\t\t\t\t\t//   .kerning = {code:{previous_char_code:shift, ..., 'fof':-divisor},...}\r\n\t\t\t\t\tif ((flags.autoencode || outputEncoding) &&\r\n\t\t\t\t\t\tfonts[activeFontKey].metadata &&\r\n\t\t\t\t\t\tfonts[activeFontKey].metadata[sourceEncoding] &&\r\n\t\t\t\t\t\tfonts[activeFontKey].metadata[sourceEncoding].encoding\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\tencodingBlock = fonts[activeFontKey].metadata[sourceEncoding].encoding;\r\n\r\n\t\t\t\t\t\t// each font has default encoding. Some have it clearly defined.\r\n\t\t\t\t\t\tif (!outputEncoding && fonts[activeFontKey].encoding) {\r\n\t\t\t\t\t\t\toutputEncoding = fonts[activeFontKey].encoding;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// Hmmm, the above did not work? Let's try again, in different place.\r\n\t\t\t\t\t\tif (!outputEncoding && encodingBlock.codePages) {\r\n\t\t\t\t\t\t\toutputEncoding = encodingBlock.codePages[0]; // let's say, first one is the default\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (typeof outputEncoding === 'string') {\r\n\t\t\t\t\t\t\toutputEncoding = encodingBlock[outputEncoding];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// we want output encoding to be a JS Object, where\r\n\t\t\t\t\t\t// key = sourceEncoding's character code and\r\n\t\t\t\t\t\t// value = outputEncoding's character code.\r\n\t\t\t\t\t\tif (outputEncoding) {\r\n\t\t\t\t\t\t\tisUnicode = false;\r\n\t\t\t\t\t\t\tnewtext = [];\r\n\t\t\t\t\t\t\tfor (i = 0, l = text.length; i < l; i++) {\r\n\t\t\t\t\t\t\t\tch = outputEncoding[text.charCodeAt(i)];\r\n\t\t\t\t\t\t\t\tif (ch) {\r\n\t\t\t\t\t\t\t\t\tnewtext.push(\r\n\t\t\t\t\t\t\t\t\t\tString.fromCharCode(ch)\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tnewtext.push(\r\n\t\t\t\t\t\t\t\t\t\ttext[i]\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t// since we are looping over chars anyway, might as well\r\n\t\t\t\t\t\t\t\t// check for residual unicodeness\r\n\t\t\t\t\t\t\t\tif (newtext[i].charCodeAt(0) >> 8) { /* more than 255 */\r\n\t\t\t\t\t\t\t\t\tisUnicode = true;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\ttext = newtext.join('');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\ti = text.length;\r\n\t\t\t\t\t// isUnicode may be set to false above. Hence the triple-equal to undefined\r\n\t\t\t\t\twhile (isUnicode === undef && i !== 0) {\r\n\t\t\t\t\t\tif (text.charCodeAt(i - 1) >> 8) { /* more than 255 */\r\n\t\t\t\t\t\t\tisUnicode = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ti--;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!isUnicode) {\r\n\t\t\t\t\t\treturn text;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tnewtext = flags.noBOM ? [] : [254, 255];\r\n\t\t\t\t\t\tfor (i = 0, l = text.length; i < l; i++) {\r\n\t\t\t\t\t\t\tch = text.charCodeAt(i);\r\n\t\t\t\t\t\t\tbch = ch >> 8; // divide by 256\r\n\t\t\t\t\t\t\tif (bch >> 8) { /* something left after dividing by 256 second time */\r\n\t\t\t\t\t\t\t\tthrow new Error(\"Character at position \" + i.toString(10) + \" of string '\" + text + \"' exceeds 16bits. Cannot be encoded into UCS-2 BE\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tnewtext.push(bch);\r\n\t\t\t\t\t\t\tnewtext.push(ch - (bch << 8));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn String.fromCharCode.apply(undef, newtext);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t// Replace '/', '(', and ')' with pdf-safe versions\r\n\t\t\t\tpdfEscape = function (text, flags) {\r\n\t\t\t\t\t// doing to8bitStream does NOT make this PDF display unicode text. For that\r\n\t\t\t\t\t// we also need to reference a unicode font and embed it - royal pain in the rear.\r\n\r\n\t\t\t\t\t// There is still a benefit to to8bitStream - PDF simply cannot handle 16bit chars,\r\n\t\t\t\t\t// which JavaScript Strings are happy to provide. So, while we still cannot display\r\n\t\t\t\t\t// 2-byte characters property, at least CONDITIONALLY converting (entire string containing)\r\n\t\t\t\t\t// 16bit chars to (USC-2-BE) 2-bytes per char + BOM streams we ensure that entire PDF\r\n\t\t\t\t\t// is still parseable.\r\n\t\t\t\t\t// This will allow immediate support for unicode in document properties strings.\r\n\t\t\t\t\treturn to8bitStream(text, flags).replace(/\\\\/g, '\\\\\\\\').replace(/\\(/g, '\\\\(').replace(/\\)/g, '\\\\)');\r\n\t\t\t\t},\r\n\t\t\t\tputInfo = function () {\r\n\t\t\t\t\tout('/Producer (jsPDF ' + version + ')');\r\n\t\t\t\t\tif (documentProperties.title) {\r\n\t\t\t\t\t\tout('/Title (' + pdfEscape(documentProperties.title) + ')');\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (documentProperties.subject) {\r\n\t\t\t\t\t\tout('/Subject (' + pdfEscape(documentProperties.subject) + ')');\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (documentProperties.author) {\r\n\t\t\t\t\t\tout('/Author (' + pdfEscape(documentProperties.author) + ')');\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (documentProperties.keywords) {\r\n\t\t\t\t\t\tout('/Keywords (' + pdfEscape(documentProperties.keywords) + ')');\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (documentProperties.creator) {\r\n\t\t\t\t\t\tout('/Creator (' + pdfEscape(documentProperties.creator) + ')');\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar created = new Date();\r\n\t\t\t\t\tout('/CreationDate (D:' +\r\n\t\t\t\t\t\t[\r\n\t\t\t\t\t\t\tcreated.getFullYear(),\r\n\t\t\t\t\t\t\tpadd2(created.getMonth() + 1),\r\n\t\t\t\t\t\t\tpadd2(created.getDate()),\r\n\t\t\t\t\t\t\tpadd2(created.getHours()),\r\n\t\t\t\t\t\t\tpadd2(created.getMinutes()),\r\n\t\t\t\t\t\t\tpadd2(created.getSeconds())\r\n\t\t\t\t\t\t].join('') +\r\n\t\t\t\t\t\t')'\r\n\t\t\t\t\t);\r\n\t\t\t\t},\r\n\t\t\t\tputCatalog = function () {\r\n\t\t\t\t\tout('/Type /Catalog');\r\n\t\t\t\t\tout('/Pages 1 0 R');\r\n\t\t\t\t\t// @TODO: Add zoom and layout modes\r\n\t\t\t\t\tout('/OpenAction [3 0 R /FitH null]');\r\n\t\t\t\t\tout('/PageLayout /OneColumn');\r\n\t\t\t\t\tevents.publish('putCatalog');\r\n\t\t\t\t},\r\n\t\t\t\tputTrailer = function () {\r\n\t\t\t\t\tout('/Size ' + (objectNumber + 1));\r\n\t\t\t\t\tout('/Root ' + objectNumber + ' 0 R');\r\n\t\t\t\t\tout('/Info ' + (objectNumber - 1) + ' 0 R');\r\n\t\t\t\t},\r\n\t\t\t\tbeginPage = function () {\r\n\t\t\t\t\tpage++;\r\n\t\t\t\t\t// Do dimension stuff\r\n\t\t\t\t\toutToPages = true;\r\n\t\t\t\t\tpages[page] = [];\r\n\t\t\t\t},\r\n\t\t\t\t_addPage = function () {\r\n\t\t\t\t\tbeginPage();\r\n\t\t\t\t\t// Set line width\r\n\t\t\t\t\tout(f2(lineWidth * k) + ' w');\r\n\t\t\t\t\t// Set draw color\r\n\t\t\t\t\tout(drawColor);\r\n\t\t\t\t\t// resurrecting non-default line caps, joins\r\n\t\t\t\t\tif (lineCapID !== 0) {\r\n\t\t\t\t\t\tout(lineCapID.toString(10) + ' J');\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (lineJoinID !== 0) {\r\n\t\t\t\t\t\tout(lineJoinID.toString(10) + ' j');\r\n\t\t\t\t\t}\r\n\t\t\t\t\tevents.publish('addPage', { 'pageNumber': page });\r\n\t\t\t\t},\r\n\t\t\t\t/**\r\n\t\t\t\tReturns a document-specific font key - a label assigned to a\r\n\t\t\t\tfont name + font type combination at the time the font was added\r\n\t\t\t\tto the font inventory.\r\n\t\r\n\t\t\t\tFont key is used as label for the desired font for a block of text\r\n\t\t\t\tto be added to the PDF document stream.\r\n\t\t\t\t@private\r\n\t\t\t\t@function\r\n\t\t\t\t@param fontName {String} can be undefined on \"falthy\" to indicate \"use current\"\r\n\t\t\t\t@param fontStyle {String} can be undefined on \"falthy\" to indicate \"use current\"\r\n\t\t\t\t@returns {String} Font key.\r\n\t\t\t\t*/\r\n\t\t\t\tgetFont = function (fontName, fontStyle) {\r\n\t\t\t\t\tvar key, undef;\r\n\r\n\t\t\t\t\tif (fontName === undef) {\r\n\t\t\t\t\t\tfontName = fonts[activeFontKey].fontName;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (fontStyle === undef) {\r\n\t\t\t\t\t\tfontStyle = fonts[activeFontKey].fontStyle;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tkey = fontmap[fontName][fontStyle]; // returns a string like 'F3' - the KEY corresponding tot he font + type combination.\r\n\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\tkey = undef;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!key) {\r\n\t\t\t\t\t\tthrow new Error(\"Unable to look up font label for font '\" + fontName + \"', '\" + fontStyle + \"'. Refer to getFontList() for available fonts.\");\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn key;\r\n\t\t\t\t},\r\n\t\t\t\tbuildDocument = function () {\r\n\r\n\t\t\t\t\toutToPages = false; // switches out() to content\r\n\t\t\t\t\tcontent = [];\r\n\t\t\t\t\toffsets = [];\r\n\r\n\t\t\t\t\t// putHeader()\r\n\t\t\t\t\tout('%PDF-' + pdfVersion);\r\n\r\n\t\t\t\t\tputPages();\r\n\r\n\t\t\t\t\tputResources();\r\n\r\n\t\t\t\t\t// Info\r\n\t\t\t\t\tnewObject();\r\n\t\t\t\t\tout('<<');\r\n\t\t\t\t\tputInfo();\r\n\t\t\t\t\tout('>>');\r\n\t\t\t\t\tout('endobj');\r\n\r\n\t\t\t\t\t// Catalog\r\n\t\t\t\t\tnewObject();\r\n\t\t\t\t\tout('<<');\r\n\t\t\t\t\tputCatalog();\r\n\t\t\t\t\tout('>>');\r\n\t\t\t\t\tout('endobj');\r\n\r\n\t\t\t\t\t// Cross-ref\r\n\t\t\t\t\tvar o = content_length, i;\r\n\t\t\t\t\tout('xref');\r\n\t\t\t\t\tout('0 ' + (objectNumber + 1));\r\n\t\t\t\t\tout('0000000000 65535 f ');\r\n\t\t\t\t\tfor (i = 1; i <= objectNumber; i++) {\r\n\t\t\t\t\t\tout(padd10(offsets[i]) + ' 00000 n ');\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// Trailer\r\n\t\t\t\t\tout('trailer');\r\n\t\t\t\t\tout('<<');\r\n\t\t\t\t\tputTrailer();\r\n\t\t\t\t\tout('>>');\r\n\t\t\t\t\tout('startxref');\r\n\t\t\t\t\tout(o);\r\n\t\t\t\t\tout('%%EOF');\r\n\r\n\t\t\t\t\toutToPages = true;\r\n\r\n\t\t\t\t\treturn content.join('\\n');\r\n\t\t\t\t},\r\n\t\t\t\tgetStyle = function (style) {\r\n\t\t\t\t\t// see Path-Painting Operators of PDF spec\r\n\t\t\t\t\tvar op = 'S'; // stroke\r\n\t\t\t\t\tif (style === 'F') {\r\n\t\t\t\t\t\top = 'f'; // fill\r\n\t\t\t\t\t} else if (style === 'FD' || style === 'DF') {\r\n\t\t\t\t\t\top = 'B'; // both\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn op;\r\n\t\t\t\t},\r\n\r\n\t\t\t\t/**\r\n\t\t\t\tGenerates the PDF document.\r\n\t\t\t\tPossible values:\r\n\t\t\t\t\tdatauristring (alias dataurlstring) - Data-Url-formatted data returned as string.\r\n\t\t\t\t\tdatauri (alias datauri) - Data-Url-formatted data pushed into current window's location (effectively reloading the window with contents of the PDF).\r\n\t\r\n\t\t\t\tIf `type` argument is undefined, output is raw body of resulting PDF returned as a string.\r\n\t\r\n\t\t\t\t@param {String} type A string identifying one of the possible output types.\r\n\t\t\t\t@param {Object} options An object providing some additional signalling to PDF generator.\r\n\t\t\t\t@function\r\n\t\t\t\t@returns {jsPDF}\r\n\t\t\t\t@methodOf jsPDF#\r\n\t\t\t\t@name output\r\n\t\t\t\t*/\r\n\t\t\t\toutput = function (type, options) {\r\n\r\n\t\t\t\t\t//for safari type -dataurlnewwindow-\r\n\r\n\t\t\t\t\tvar undef, data, length, array, i, blob;\r\n\t\t\t\t\tswitch (type) {\r\n\t\t\t\t\t\tcase undef:\r\n\t\t\t\t\t\t\treturn buildDocument();\r\n\t\t\t\t\t\tcase 'save':\r\n\t\t\t\t\t\t\tif (navigator.getUserMedia) {\r\n\t\t\t\t\t\t\t\tif (window.URL === undefined) {\r\n\t\t\t\t\t\t\t\t\treturn API.output('dataurlnewwindow');\r\n\t\t\t\t\t\t\t\t} else if (window.URL.createObjectURL === undefined) {\r\n\t\t\t\t\t\t\t\t\treturn API.output('dataurlnewwindow');\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tdata = buildDocument();\r\n\r\n\t\t\t\t\t\t\t// Need to add the file to BlobBuilder as a Uint8Array\r\n\t\t\t\t\t\t\tlength = data.length;\r\n\t\t\t\t\t\t\tarray = new Uint8Array(new ArrayBuffer(length));\r\n\r\n\t\t\t\t\t\t\tfor (i = 0; i < length; i++) {\r\n\t\t\t\t\t\t\t\tarray[i] = data.charCodeAt(i);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tblob = new Blob([array], { type: \"application/pdf\" });\r\n\r\n\t\t\t\t\t\t\tsaveAs(blob, options);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'datauristring':\r\n\t\t\t\t\t\tcase 'dataurlstring':\r\n\t\t\t\t\t\t\treturn 'data:application/pdf;base64,' + btoa(buildDocument());\r\n\t\t\t\t\t\tcase 'datauri':\r\n\t\t\t\t\t\tcase 'dataurl':\r\n\t\t\t\t\t\t\tdocument.location.href = 'data:application/pdf;base64,' + btoa(buildDocument());\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'dataurlnewwindow':\r\n\t\t\t\t\t\t\twindow.open('data:application/pdf;base64,' + btoa(buildDocument()));\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\tthrow new Error('Output type \"' + type + '\" is not supported.');\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// @TODO: Add different output options\r\n\r\n\t\t\t\t};\r\n\r\n\t\t\tif (unit === 'pt') {\r\n\t\t\t\tk = 1;\r\n\t\t\t} else if (unit === 'mm') {\r\n\t\t\t\tk = 72 / 25.4;\r\n\t\t\t} else if (unit === 'cm') {\r\n\t\t\t\tk = 72 / 2.54;\r\n\t\t\t} else if (unit === 'in') {\r\n\t\t\t\tk = 72;\r\n\t\t\t} else {\r\n\t\t\t\tthrow ('Invalid unit: ' + unit);\r\n\t\t\t}\r\n\r\n\t\t\t// Dimensions are stored as user units and converted to points on output\r\n\t\t\tif (pageFormats.hasOwnProperty(format_as_string)) {\r\n\t\t\t\tpageHeight = pageFormats[format_as_string][1] / k;\r\n\t\t\t\tpageWidth = pageFormats[format_as_string][0] / k;\r\n\t\t\t} else {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tpageHeight = format[1];\r\n\t\t\t\t\tpageWidth = format[0];\r\n\t\t\t\t} catch (err) {\r\n\t\t\t\t\tthrow ('Invalid format: ' + format);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (orientation === 'p' || orientation === 'portrait') {\r\n\t\t\t\torientation = 'p';\r\n\t\t\t\tif (pageWidth > pageHeight) {\r\n\t\t\t\t\ttmp = pageWidth;\r\n\t\t\t\t\tpageWidth = pageHeight;\r\n\t\t\t\t\tpageHeight = tmp;\r\n\t\t\t\t}\r\n\t\t\t} else if (orientation === 'l' || orientation === 'landscape') {\r\n\t\t\t\torientation = 'l';\r\n\t\t\t\tif (pageHeight > pageWidth) {\r\n\t\t\t\t\ttmp = pageWidth;\r\n\t\t\t\t\tpageWidth = pageHeight;\r\n\t\t\t\t\tpageHeight = tmp;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tthrow ('Invalid orientation: ' + orientation);\r\n\t\t\t}\r\n\r\n\r\n\r\n\t\t\t//---------------------------------------\r\n\t\t\t// Public API\r\n\r\n\t\t\t/*\r\n\t\t\tObject exposing internal API to plugins\r\n\t\t\t@public\r\n\t\t\t*/\r\n\t\t\tAPI.internal = {\r\n\t\t\t\t'pdfEscape': pdfEscape,\r\n\t\t\t\t'getStyle': getStyle,\r\n\t\t\t\t/**\r\n\t\t\t\tReturns {FontObject} describing a particular font.\r\n\t\t\t\t@public\r\n\t\t\t\t@function\r\n\t\t\t\t@param fontName {String} (Optional) Font's family name\r\n\t\t\t\t@param fontStyle {String} (Optional) Font's style variation name (Example:\"Italic\")\r\n\t\t\t\t@returns {FontObject}\r\n\t\t\t\t*/\r\n\t\t\t\t'getFont': function () { return fonts[getFont.apply(API, arguments)]; },\r\n\t\t\t\t'getFontSize': function () { return activeFontSize; },\r\n\t\t\t\t'btoa': btoa,\r\n\t\t\t\t'write': function (string1, string2, string3, etc) {\r\n\t\t\t\t\tout(\r\n\t\t\t\t\t\targuments.length === 1 ? string1 : Array.prototype.join.call(arguments, ' ')\r\n\t\t\t\t\t);\r\n\t\t\t\t},\r\n\t\t\t\t'getCoordinateString': function (value) {\r\n\t\t\t\t\treturn f2(value * k);\r\n\t\t\t\t},\r\n\t\t\t\t'getVerticalCoordinateString': function (value) {\r\n\t\t\t\t\treturn f2((pageHeight - value) * k);\r\n\t\t\t\t},\r\n\t\t\t\t'collections': {},\r\n\t\t\t\t'newObject': newObject,\r\n\t\t\t\t'putStream': putStream,\r\n\t\t\t\t'events': events,\r\n\t\t\t\t// ratio that you use in multiplication of a given \"size\" number to arrive to 'point'\r\n\t\t\t\t// units of measurement.\r\n\t\t\t\t// scaleFactor is set at initialization of the document and calculated against the stated\r\n\t\t\t\t// default measurement units for the document.\r\n\t\t\t\t// If default is \"mm\", k is the number that will turn number in 'mm' into 'points' number.\r\n\t\t\t\t// through multiplication.\r\n\t\t\t\t'scaleFactor': k,\r\n\t\t\t\t'pageSize': { 'width': pageWidth, 'height': pageHeight },\r\n\t\t\t\t'output': function (type, options) {\r\n\t\t\t\t\treturn output(type, options);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\t/**\r\n\t\t\tAdds (and transfers the focus to) new page to the PDF document.\r\n\t\t\t@function\r\n\t\t\t@returns {jsPDF}\r\n\t\r\n\t\t\t@methodOf jsPDF#\r\n\t\t\t@name addPage\r\n\t\t\t */\r\n\t\t\tAPI.addPage = function () {\r\n\t\t\t\t_addPage();\r\n\t\t\t\treturn this;\r\n\t\t\t};\r\n\r\n\t\t\t/**\r\n\t\t\tAdds text to page. Supports adding multiline text when 'text' argument is an Array of Strings.\r\n\t\t\t@function\r\n\t\t\t@param {String|Array} text String or array of strings to be added to the page. Each line is shifted one line down per font, spacing settings declared before this call.\r\n\t\t\t@param {Number} x Coordinate (in units declared at inception of PDF document) against left edge of the page\r\n\t\t\t@param {Number} y Coordinate (in units declared at inception of PDF document) against upper edge of the page\r\n\t\t\t@param {Object} flags Collection of settings signalling how the text must be encoded. Defaults are sane. If you think you want to pass some flags, you likely can read the source.\r\n\t\t\t@returns {jsPDF}\r\n\t\t\t@methodOf jsPDF#\r\n\t\t\t@name text\r\n\t\t\t */\r\n\t\t\tAPI.text = function (text, x, y, flags) {\r\n\t\t\t\t/**\r\n\t\t\t\t * Inserts something like this into PDF\r\n\t\t\t\t\tBT\r\n\t\t\t\t\t/F1 16 Tf  % Font name + size\r\n\t\t\t\t\t16 TL % How many units down for next line in multiline text\r\n\t\t\t\t\t0 g % color\r\n\t\t\t\t\t28.35 813.54 Td % position\r\n\t\t\t\t\t(line one) Tj\r\n\t\t\t\t\tT* (line two) Tj\r\n\t\t\t\t\tT* (line three) Tj\r\n\t\t\t\t\tET\r\n\t\t\t\t*/\r\n\r\n\t\t\t\tvar undef, _first, _second, _third, newtext, str, i;\r\n\t\t\t\t// Pre-August-2012 the order of arguments was function(x, y, text, flags)\r\n\t\t\t\t// in effort to make all calls have similar signature like\r\n\t\t\t\t//   function(data, coordinates... , miscellaneous)\r\n\t\t\t\t// this method had its args flipped.\r\n\t\t\t\t// code below allows backward compatibility with old arg order.\r\n\t\t\t\tif (typeof text === 'number') {\r\n\t\t\t\t\t_first = y;\r\n\t\t\t\t\t_second = text;\r\n\t\t\t\t\t_third = x;\r\n\r\n\t\t\t\t\ttext = _first;\r\n\t\t\t\t\tx = _second;\r\n\t\t\t\t\ty = _third;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// If there are any newlines in text, we assume\r\n\t\t\t\t// the user wanted to print multiple lines, so break the\r\n\t\t\t\t// text up into an array.  If the text is already an array,\r\n\t\t\t\t// we assume the user knows what they are doing.\r\n\t\t\t\tif (typeof text === 'string' && text.match(/[\\n\\r]/)) {\r\n\t\t\t\t\ttext = text.split(/\\r\\n|\\r|\\n/g);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (typeof flags === 'undefined') {\r\n\t\t\t\t\tflags = { 'noBOM': true, 'autoencode': true };\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tif (flags.noBOM === undef) {\r\n\t\t\t\t\t\tflags.noBOM = true;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (flags.autoencode === undef) {\r\n\t\t\t\t\t\tflags.autoencode = true;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (typeof text === 'string') {\r\n\t\t\t\t\tstr = pdfEscape(text, flags);\r\n\t\t\t\t} else if (text instanceof Array) {  /* Array */\r\n\t\t\t\t\t// we don't want to destroy  original text array, so cloning it\r\n\t\t\t\t\tnewtext = text.concat();\r\n\t\t\t\t\t// we do array.join('text that must not be PDFescaped\")\r\n\t\t\t\t\t// thus, pdfEscape each component separately\r\n\t\t\t\t\tfor (i = newtext.length - 1; i !== -1; i--) {\r\n\t\t\t\t\t\tnewtext[i] = pdfEscape(newtext[i], flags);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tstr = newtext.join(\") Tj\\nT* (\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthrow new Error('Type of text must be string or Array. \"' + text + '\" is not recognized.');\r\n\t\t\t\t}\r\n\t\t\t\t// Using \"'\" (\"go next line and render text\" mark) would save space but would complicate our rendering code, templates\r\n\r\n\t\t\t\t// BT .. ET does NOT have default settings for Tf. You must state that explicitely every time for BT .. ET\r\n\t\t\t\t// if you want text transformation matrix (+ multiline) to work reliably (which reads sizes of things from font declarations)\r\n\t\t\t\t// Thus, there is NO useful, *reliable* concept of \"default\" font for a page.\r\n\t\t\t\t// The fact that \"default\" (reuse font used before) font worked before in basic cases is an accident\r\n\t\t\t\t// - readers dealing smartly with brokenness of jsPDF's markup.\r\n\t\t\t\tout(\r\n\t\t\t\t\t'BT\\n/' +\r\n\t\t\t\t\tactiveFontKey + ' ' + activeFontSize + ' Tf\\n' + // font face, style, size\r\n\t\t\t\t\tactiveFontSize + ' TL\\n' + // line spacing\r\n\t\t\t\t\ttextColor +\r\n\t\t\t\t\t'\\n' + f2(x * k) + ' ' + f2((pageHeight - y) * k) + ' Td\\n(' +\r\n\t\t\t\t\tstr +\r\n\t\t\t\t\t') Tj\\nET'\r\n\t\t\t\t);\r\n\t\t\t\treturn this;\r\n\t\t\t};\r\n\r\n\t\t\tAPI.line = function (x1, y1, x2, y2) {\r\n\t\t\t\tout(\r\n\t\t\t\t\tf2(x1 * k) + ' ' + f2((pageHeight - y1) * k) + ' m ' +\r\n\t\t\t\t\tf2(x2 * k) + ' ' + f2((pageHeight - y2) * k) + ' l S'\r\n\t\t\t\t);\r\n\t\t\t\treturn this;\r\n\t\t\t};\r\n\r\n\t\t\t/**\r\n\t\t\tAdds series of curves (straight lines or cubic bezier curves) to canvas, starting at `x`, `y` coordinates.\r\n\t\t\tAll data points in `lines` are relative to last line origin.\r\n\t\t\t`x`, `y` become x1,y1 for first line / curve in the set.\r\n\t\t\tFor lines you only need to specify [x2, y2] - (ending point) vector against x1, y1 starting point.\r\n\t\t\tFor bezier curves you need to specify [x2,y2,x3,y3,x4,y4] - vectors to control points 1, 2, ending point. All vectors are against the start of the curve - x1,y1.\r\n\t\r\n\t\t\t@example .lines([[2,2],[-2,2],[1,1,2,2,3,3],[2,1]], 212,110, 10) // line, line, bezier curve, line\r\n\t\t\t@param {Array} lines Array of *vector* shifts as pairs (lines) or sextets (cubic bezier curves).\r\n\t\t\t@param {Number} x Coordinate (in units declared at inception of PDF document) against left edge of the page\r\n\t\t\t@param {Number} y Coordinate (in units declared at inception of PDF document) against upper edge of the page\r\n\t\t\t@param {Number} scale (Defaults to [1.0,1.0]) x,y Scaling factor for all vectors. Elements can be any floating number Sub-one makes drawing smaller. Over-one grows the drawing. Negative flips the direction.\r\n\t\t\t@function\r\n\t\t\t@returns {jsPDF}\r\n\t\t\t@methodOf jsPDF#\r\n\t\t\t@name lines\r\n\t\t\t */\r\n\t\t\tAPI.lines = function (lines, x, y, scale, style) {\r\n\t\t\t\tvar undef, _first, _second, _third, scalex, scaley, i, l, leg, x2, y2, x3, y3, x4, y4;\r\n\r\n\t\t\t\t// Pre-August-2012 the order of arguments was function(x, y, lines, scale, style)\r\n\t\t\t\t// in effort to make all calls have similar signature like\r\n\t\t\t\t//   function(content, coordinateX, coordinateY , miscellaneous)\r\n\t\t\t\t// this method had its args flipped.\r\n\t\t\t\t// code below allows backward compatibility with old arg order.\r\n\t\t\t\tif (typeof lines === 'number') {\r\n\t\t\t\t\t_first = y;\r\n\t\t\t\t\t_second = lines;\r\n\t\t\t\t\t_third = x;\r\n\r\n\t\t\t\t\tlines = _first;\r\n\t\t\t\t\tx = _second;\r\n\t\t\t\t\ty = _third;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tstyle = getStyle(style);\r\n\t\t\t\tscale = scale === undef ? [1, 1] : scale;\r\n\r\n\t\t\t\t// starting point\r\n\t\t\t\tout(f3(x * k) + ' ' + f3((pageHeight - y) * k) + ' m ');\r\n\r\n\t\t\t\tscalex = scale[0];\r\n\t\t\t\tscaley = scale[1];\r\n\t\t\t\tl = lines.length;\r\n\t\t\t\t//, x2, y2 // bezier only. In page default measurement \"units\", *after* scaling\r\n\t\t\t\t//, x3, y3 // bezier only. In page default measurement \"units\", *after* scaling\r\n\t\t\t\t// ending point for all, lines and bezier. . In page default measurement \"units\", *after* scaling\r\n\t\t\t\tx4 = x; // last / ending point = starting point for first item.\r\n\t\t\t\ty4 = y; // last / ending point = starting point for first item.\r\n\r\n\t\t\t\tfor (i = 0; i < l; i++) {\r\n\t\t\t\t\tleg = lines[i];\r\n\t\t\t\t\tif (leg.length === 2) {\r\n\t\t\t\t\t\t// simple line\r\n\t\t\t\t\t\tx4 = leg[0] * scalex + x4; // here last x4 was prior ending point\r\n\t\t\t\t\t\ty4 = leg[1] * scaley + y4; // here last y4 was prior ending point\r\n\t\t\t\t\t\tout(f3(x4 * k) + ' ' + f3((pageHeight - y4) * k) + ' l');\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// bezier curve\r\n\t\t\t\t\t\tx2 = leg[0] * scalex + x4; // here last x4 is prior ending point\r\n\t\t\t\t\t\ty2 = leg[1] * scaley + y4; // here last y4 is prior ending point\r\n\t\t\t\t\t\tx3 = leg[2] * scalex + x4; // here last x4 is prior ending point\r\n\t\t\t\t\t\ty3 = leg[3] * scaley + y4; // here last y4 is prior ending point\r\n\t\t\t\t\t\tx4 = leg[4] * scalex + x4; // here last x4 was prior ending point\r\n\t\t\t\t\t\ty4 = leg[5] * scaley + y4; // here last y4 was prior ending point\r\n\t\t\t\t\t\tout(\r\n\t\t\t\t\t\t\tf3(x2 * k) + ' ' +\r\n\t\t\t\t\t\t\tf3((pageHeight - y2) * k) + ' ' +\r\n\t\t\t\t\t\t\tf3(x3 * k) + ' ' +\r\n\t\t\t\t\t\t\tf3((pageHeight - y3) * k) + ' ' +\r\n\t\t\t\t\t\t\tf3(x4 * k) + ' ' +\r\n\t\t\t\t\t\t\tf3((pageHeight - y4) * k) + ' c'\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t// stroking / filling / both the path\r\n\t\t\t\tout(style);\r\n\t\t\t\treturn this;\r\n\t\t\t};\r\n\r\n\t\t\t/**\r\n\t\t\tAdds a rectangle to PDF\r\n\t\r\n\t\t\t@param {Number} x Coordinate (in units declared at inception of PDF document) against left edge of the page\r\n\t\t\t@param {Number} y Coordinate (in units declared at inception of PDF document) against upper edge of the page\r\n\t\t\t@param {Number} w Width (in units declared at inception of PDF document)\r\n\t\t\t@param {Number} h Height (in units declared at inception of PDF document)\r\n\t\t\t@param {String} style (Defaults to active fill/stroke style) A string signalling if stroke, fill or both are to be applied.\r\n\t\t\t@function\r\n\t\t\t@returns {jsPDF}\r\n\t\t\t@methodOf jsPDF#\r\n\t\t\t@name rect\r\n\t\t\t */\r\n\t\t\tAPI.rect = function (x, y, w, h, style) {\r\n\t\t\t\tvar op = getStyle(style);\r\n\t\t\t\tout([\r\n\t\t\t\t\tf2(x * k),\r\n\t\t\t\t\tf2((pageHeight - y) * k),\r\n\t\t\t\t\tf2(w * k),\r\n\t\t\t\t\tf2(-h * k),\r\n\t\t\t\t\t're',\r\n\t\t\t\t\top\r\n\t\t\t\t].join(' '));\r\n\t\t\t\treturn this;\r\n\t\t\t};\r\n\r\n\t\t\t/**\r\n\t\t\tAdds a properties to the PDF document\r\n\t\r\n\t\t\t@param {Object} A property_name-to-property_value object structure.\r\n\t\t\t@function\r\n\t\t\t@returns {jsPDF}\r\n\t\t\t@methodOf jsPDF#\r\n\t\t\t@name setProperties\r\n\t\t\t */\r\n\t\t\tAPI.setProperties = function (properties) {\r\n\t\t\t\t// copying only those properties we can render.\r\n\t\t\t\tvar property;\r\n\t\t\t\tfor (property in documentProperties) {\r\n\t\t\t\t\tif (documentProperties.hasOwnProperty(property) && properties[property]) {\r\n\t\t\t\t\t\tdocumentProperties[property] = properties[property];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn this;\r\n\t\t\t};\r\n\r\n\t\t\t/**\r\n\t\t\tSets font size for upcoming text elements.\r\n\t\r\n\t\t\t@param {Number} size Font size in points.\r\n\t\t\t@function\r\n\t\t\t@returns {jsPDF}\r\n\t\t\t@methodOf jsPDF#\r\n\t\t\t@name setFontSize\r\n\t\t\t */\r\n\t\t\tAPI.setFontSize = function (size) {\r\n\t\t\t\tactiveFontSize = size;\r\n\t\t\t\treturn this;\r\n\t\t\t};\r\n\r\n\t\t\t/**\r\n\t\t\tSets text font face, variant for upcoming text elements.\r\n\t\t\tSee output of jsPDF.getFontList() for possible font names, styles.\r\n\t\r\n\t\t\t@param {String} fontName Font name or family. Example: \"times\"\r\n\t\t\t@param {String} fontStyle Font style or variant. Example: \"italic\"\r\n\t\t\t@function\r\n\t\t\t@returns {jsPDF}\r\n\t\t\t@methodOf jsPDF#\r\n\t\t\t@name setFont\r\n\t\t\t */\r\n\t\t\tAPI.setFont = function (fontName, fontStyle) {\r\n\t\t\t\tactiveFontKey = getFont(fontName, fontStyle);\r\n\t\t\t\t// if font is not found, the above line blows up and we never go further\r\n\t\t\t\treturn this;\r\n\t\t\t};\r\n\r\n\t\t\t/**\r\n\t\t\tSwitches font style or variant for upcoming text elements,\r\n\t\t\twhile keeping the font face or family same.\r\n\t\t\tSee output of jsPDF.getFontList() for possible font names, styles.\r\n\t\r\n\t\t\t@param {String} style Font style or variant. Example: \"italic\"\r\n\t\t\t@function\r\n\t\t\t@returns {jsPDF}\r\n\t\t\t@methodOf jsPDF#\r\n\t\t\t@name setFontStyle\r\n\t\t\t */\r\n\t\t\tAPI.setFontStyle = API.setFontType = function (style) {\r\n\t\t\t\tvar undef;\r\n\t\t\t\tactiveFontKey = getFont(undef, style);\r\n\t\t\t\t// if font is not found, the above line blows up and we never go further\r\n\t\t\t\treturn this;\r\n\t\t\t};\r\n\r\n\t\t\t/**\r\n\t\t\tReturns an object - a tree of fontName to fontStyle relationships available to\r\n\t\t\tactive PDF document.\r\n\t\r\n\t\t\t@public\r\n\t\t\t@function\r\n\t\t\t@returns {Object} Like {'times':['normal', 'italic', ... ], 'arial':['normal', 'bold', ... ], ... }\r\n\t\t\t@methodOf jsPDF#\r\n\t\t\t@name getFontList\r\n\t\t\t*/\r\n\t\t\tAPI.getFontList = function () {\r\n\t\t\t\t// TODO: iterate over fonts array or return copy of fontmap instead in case more are ever added.\r\n\t\t\t\tvar list = {},\r\n\t\t\t\t\tfontName,\r\n\t\t\t\t\tfontStyle,\r\n\t\t\t\t\ttmp;\r\n\r\n\t\t\t\tfor (fontName in fontmap) {\r\n\t\t\t\t\tif (fontmap.hasOwnProperty(fontName)) {\r\n\t\t\t\t\t\tlist[fontName] = tmp = [];\r\n\t\t\t\t\t\tfor (fontStyle in fontmap[fontName]) {\r\n\t\t\t\t\t\t\tif (fontmap[fontName].hasOwnProperty(fontStyle)) {\r\n\t\t\t\t\t\t\t\ttmp.push(fontStyle);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn list;\r\n\t\t\t};\r\n\r\n\t\t\t/**\r\n\t\t\tSets line width for upcoming lines.\r\n\t\r\n\t\t\t@param {Number} width Line width (in units declared at inception of PDF document)\r\n\t\t\t@function\r\n\t\t\t@returns {jsPDF}\r\n\t\t\t@methodOf jsPDF#\r\n\t\t\t@name setLineWidth\r\n\t\t\t */\r\n\t\t\tAPI.setLineWidth = function (width) {\r\n\t\t\t\tout((width * k).toFixed(2) + ' w');\r\n\t\t\t\treturn this;\r\n\t\t\t};\r\n\r\n\t\t\t/**\r\n\t\t\tSets the stroke color for upcoming elements.\r\n\t\r\n\t\t\tDepending on the number of arguments given, Gray, RGB, or CMYK\r\n\t\t\tcolor space is implied.\r\n\t\r\n\t\t\tWhen only ch1 is given, \"Gray\" color space is implied and it\r\n\t\t\tmust be a value in the range from 0.00 (solid black) to to 1.00 (white)\r\n\t\t\tif values are communicated as String types, or in range from 0 (black)\r\n\t\t\tto 255 (white) if communicated as Number type.\r\n\t\t\tThe RGB-like 0-255 range is provided for backward compatibility.\r\n\t\r\n\t\t\tWhen only ch1,ch2,ch3 are given, \"RGB\" color space is implied and each\r\n\t\t\tvalue must be in the range from 0.00 (minimum intensity) to to 1.00\r\n\t\t\t(max intensity) if values are communicated as String types, or\r\n\t\t\tfrom 0 (min intensity) to to 255 (max intensity) if values are communicated\r\n\t\t\tas Number types.\r\n\t\t\tThe RGB-like 0-255 range is provided for backward compatibility.\r\n\t\r\n\t\t\tWhen ch1,ch2,ch3,ch4 are given, \"CMYK\" color space is implied and each\r\n\t\t\tvalue must be a in the range from 0.00 (0% concentration) to to\r\n\t\t\t1.00 (100% concentration)\r\n\t\r\n\t\t\tBecause JavaScript treats fixed point numbers badly (rounds to\r\n\t\t\tfloating point nearest to binary representation) it is highly advised to\r\n\t\t\tcommunicate the fractional numbers as String types, not JavaScript Number type.\r\n\t\r\n\t\t\t@param {Number|String} ch1 Color channel value\r\n\t\t\t@param {Number|String} ch2 Color channel value\r\n\t\t\t@param {Number|String} ch3 Color channel value\r\n\t\t\t@param {Number|String} ch4 Color channel value\r\n\t\r\n\t\t\t@function\r\n\t\t\t@returns {jsPDF}\r\n\t\t\t@methodOf jsPDF#\r\n\t\t\t@name setDrawColor\r\n\t\t\t */\r\n\t\t\tAPI.setDrawColor = function (ch1, ch2, ch3, ch4) {\r\n\t\t\t\tvar color;\r\n\t\t\t\tif (ch2 === undefined || (ch4 === undefined && ch1 === ch2 === ch3)) {\r\n\t\t\t\t\t// Gray color space.\r\n\t\t\t\t\tif (typeof ch1 === 'string') {\r\n\t\t\t\t\t\tcolor = ch1 + ' G';\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tcolor = f2(ch1 / 255) + ' G';\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (ch4 === undefined) {\r\n\t\t\t\t\t// RGB\r\n\t\t\t\t\tif (typeof ch1 === 'string') {\r\n\t\t\t\t\t\tcolor = [ch1, ch2, ch3, 'RG'].join(' ');\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tcolor = [f2(ch1 / 255), f2(ch2 / 255), f2(ch3 / 255), 'RG'].join(' ');\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// CMYK\r\n\t\t\t\t\tif (typeof ch1 === 'string') {\r\n\t\t\t\t\t\tcolor = [ch1, ch2, ch3, ch4, 'K'].join(' ');\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tcolor = [f2(ch1), f2(ch2), f2(ch3), f2(ch4), 'K'].join(' ');\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tout(color);\r\n\t\t\t\treturn this;\r\n\t\t\t};\r\n\r\n\t\t\t/**\r\n\t\t\tSets the fill color for upcoming elements.\r\n\t\r\n\t\t\tDepending on the number of arguments given, Gray, RGB, or CMYK\r\n\t\t\tcolor space is implied.\r\n\t\r\n\t\t\tWhen only ch1 is given, \"Gray\" color space is implied and it\r\n\t\t\tmust be a value in the range from 0.00 (solid black) to to 1.00 (white)\r\n\t\t\tif values are communicated as String types, or in range from 0 (black)\r\n\t\t\tto 255 (white) if communicated as Number type.\r\n\t\t\tThe RGB-like 0-255 range is provided for backward compatibility.\r\n\t\r\n\t\t\tWhen only ch1,ch2,ch3 are given, \"RGB\" color space is implied and each\r\n\t\t\tvalue must be in the range from 0.00 (minimum intensity) to to 1.00\r\n\t\t\t(max intensity) if values are communicated as String types, or\r\n\t\t\tfrom 0 (min intensity) to to 255 (max intensity) if values are communicated\r\n\t\t\tas Number types.\r\n\t\t\tThe RGB-like 0-255 range is provided for backward compatibility.\r\n\t\r\n\t\t\tWhen ch1,ch2,ch3,ch4 are given, \"CMYK\" color space is implied and each\r\n\t\t\tvalue must be a in the range from 0.00 (0% concentration) to to\r\n\t\t\t1.00 (100% concentration)\r\n\t\r\n\t\t\tBecause JavaScript treats fixed point numbers badly (rounds to\r\n\t\t\tfloating point nearest to binary representation) it is highly advised to\r\n\t\t\tcommunicate the fractional numbers as String types, not JavaScript Number type.\r\n\t\r\n\t\t\t@param {Number|String} ch1 Color channel value\r\n\t\t\t@param {Number|String} ch2 Color channel value\r\n\t\t\t@param {Number|String} ch3 Color channel value\r\n\t\t\t@param {Number|String} ch4 Color channel value\r\n\t\r\n\t\t\t@function\r\n\t\t\t@returns {jsPDF}\r\n\t\t\t@methodOf jsPDF#\r\n\t\t\t@name setFillColor\r\n\t\t\t */\r\n\t\t\tAPI.setFillColor = function (ch1, ch2, ch3, ch4) {\r\n\t\t\t\tvar color;\r\n\r\n\t\t\t\tif (ch2 === undefined || (ch4 === undefined && ch1 === ch2 === ch3)) {\r\n\t\t\t\t\t// Gray color space.\r\n\t\t\t\t\tif (typeof ch1 === 'string') {\r\n\t\t\t\t\t\tcolor = ch1 + ' g';\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tcolor = f2(ch1 / 255) + ' g';\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (ch4 === undefined) {\r\n\t\t\t\t\t// RGB\r\n\t\t\t\t\tif (typeof ch1 === 'string') {\r\n\t\t\t\t\t\tcolor = [ch1, ch2, ch3, 'rg'].join(' ');\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tcolor = [f2(ch1 / 255), f2(ch2 / 255), f2(ch3 / 255), 'rg'].join(' ');\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// CMYK\r\n\t\t\t\t\tif (typeof ch1 === 'string') {\r\n\t\t\t\t\t\tcolor = [ch1, ch2, ch3, ch4, 'k'].join(' ');\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tcolor = [f2(ch1), f2(ch2), f2(ch3), f2(ch4), 'k'].join(' ');\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tout(color);\r\n\t\t\t\treturn this;\r\n\t\t\t};\r\n\r\n\t\t\t/**\r\n\t\t\tSets the text color for upcoming elements.\r\n\t\t\tIf only one, first argument is given,\r\n\t\t\ttreats the value as gray-scale color value.\r\n\t\r\n\t\t\t@param {Number} r Red channel color value in range 0-255\r\n\t\t\t@param {Number} g Green channel color value in range 0-255\r\n\t\t\t@param {Number} b Blue channel color value in range 0-255\r\n\t\t\t@function\r\n\t\t\t@returns {jsPDF}\r\n\t\t\t@methodOf jsPDF#\r\n\t\t\t@name setTextColor\r\n\t\t\t*/\r\n\t\t\tAPI.setTextColor = function (r, g, b) {\r\n\t\t\t\tif ((r === 0 && g === 0 && b === 0) || (typeof g === 'undefined')) {\r\n\t\t\t\t\ttextColor = f3(r / 255) + ' g';\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttextColor = [f3(r / 255), f3(g / 255), f3(b / 255), 'rg'].join(' ');\r\n\t\t\t\t}\r\n\t\t\t\treturn this;\r\n\t\t\t};\r\n\r\n\t\t\t/**\r\n\t\t\tIs an Object providing a mapping from human-readable to\r\n\t\t\tinteger flag values designating the varieties of line cap\r\n\t\t\tand join styles.\r\n\t\r\n\t\t\t@returns {Object}\r\n\t\t\t@fieldOf jsPDF#\r\n\t\t\t@name CapJoinStyles\r\n\t\t\t*/\r\n\t\t\tAPI.CapJoinStyles = {\r\n\t\t\t\t0: 0,\r\n\t\t\t\t'butt': 0,\r\n\t\t\t\t'but': 0,\r\n\t\t\t\t'bevel': 0,\r\n\t\t\t\t1: 1,\r\n\t\t\t\t'round': 1,\r\n\t\t\t\t'rounded': 1,\r\n\t\t\t\t'circle': 1,\r\n\t\t\t\t2: 2,\r\n\t\t\t\t'projecting': 2,\r\n\t\t\t\t'project': 2,\r\n\t\t\t\t'square': 2,\r\n\t\t\t\t'milter': 2\r\n\t\t\t};\r\n\r\n\t\t\t/**\r\n\t\t\tSets the line cap styles\r\n\t\t\tSee {jsPDF.CapJoinStyles} for variants\r\n\t\r\n\t\t\t@param {String|Number} style A string or number identifying the type of line cap\r\n\t\t\t@function\r\n\t\t\t@returns {jsPDF}\r\n\t\t\t@methodOf jsPDF#\r\n\t\t\t@name setLineCap\r\n\t\t\t*/\r\n\t\t\tAPI.setLineCap = function (style) {\r\n\t\t\t\tvar id = this.CapJoinStyles[style];\r\n\t\t\t\tif (id === undefined) {\r\n\t\t\t\t\tthrow new Error(\"Line cap style of '\" + style + \"' is not recognized. See or extend .CapJoinStyles property for valid styles\");\r\n\t\t\t\t}\r\n\t\t\t\tlineCapID = id;\r\n\t\t\t\tout(id.toString(10) + ' J');\r\n\r\n\t\t\t\treturn this;\r\n\t\t\t};\r\n\r\n\t\t\t/**\r\n\t\t\tSets the line join styles\r\n\t\t\tSee {jsPDF.CapJoinStyles} for variants\r\n\t\r\n\t\t\t@param {String|Number} style A string or number identifying the type of line join\r\n\t\t\t@function\r\n\t\t\t@returns {jsPDF}\r\n\t\t\t@methodOf jsPDF#\r\n\t\t\t@name setLineJoin\r\n\t\t\t*/\r\n\t\t\tAPI.setLineJoin = function (style) {\r\n\t\t\t\tvar id = this.CapJoinStyles[style];\r\n\t\t\t\tif (id === undefined) {\r\n\t\t\t\t\tthrow new Error(\"Line join style of '\" + style + \"' is not recognized. See or extend .CapJoinStyles property for valid styles\");\r\n\t\t\t\t}\r\n\t\t\t\tlineJoinID = id;\r\n\t\t\t\tout(id.toString(10) + ' j');\r\n\r\n\t\t\t\treturn this;\r\n\t\t\t};\r\n\r\n\t\t\t// Output is both an internal (for plugins) and external function\r\n\t\t\tAPI.output = output;\r\n\r\n\t\t\t/**\r\n\t\t\t * Saves as PDF document. An alias of jsPDF.output('save', 'filename.pdf')\r\n\t\t\t * @param  {String} filename The filename including extension.\r\n\t\t\t *\r\n\t\t\t * @function\r\n\t\t\t * @returns {jsPDF}\r\n\t\t\t * @methodOf jsPDF#\r\n\t\t\t * @name save\r\n\t\t\t */\r\n\t\t\tAPI.save = function (filename) {\r\n\t\t\t\tAPI.output('save', filename);\r\n\t\t\t};\r\n\r\n\t\t\t// applying plugins (more methods) ON TOP of built-in API.\r\n\t\t\t// this is intentional as we allow plugins to override\r\n\t\t\t// built-ins\r\n\t\t\tfor (plugin in jsPDF.API) {\r\n\t\t\t\tif (jsPDF.API.hasOwnProperty(plugin)) {\r\n\t\t\t\t\tif (plugin === 'events' && jsPDF.API.events.length) {\r\n\t\t\t\t\t\t(function (events, newEvents) {\r\n\r\n\t\t\t\t\t\t\t// jsPDF.API.events is a JS Array of Arrays\r\n\t\t\t\t\t\t\t// where each Array is a pair of event name, handler\r\n\t\t\t\t\t\t\t// Events were added by plugins to the jsPDF instantiator.\r\n\t\t\t\t\t\t\t// These are always added to the new instance and some ran\r\n\t\t\t\t\t\t\t// during instantiation.\r\n\r\n\t\t\t\t\t\t\tvar eventname, handler_and_args, i;\r\n\r\n\t\t\t\t\t\t\tfor (i = newEvents.length - 1; i !== -1; i--) {\r\n\t\t\t\t\t\t\t\t// subscribe takes 3 args: 'topic', function, runonce_flag\r\n\t\t\t\t\t\t\t\t// if undefined, runonce is false.\r\n\t\t\t\t\t\t\t\t// users can attach callback directly,\r\n\t\t\t\t\t\t\t\t// or they can attach an array with [callback, runonce_flag]\r\n\t\t\t\t\t\t\t\t// that's what the \"apply\" magic is for below.\r\n\t\t\t\t\t\t\t\teventname = newEvents[i][0];\r\n\t\t\t\t\t\t\t\thandler_and_args = newEvents[i][1];\r\n\t\t\t\t\t\t\t\tevents.subscribe.apply(\r\n\t\t\t\t\t\t\t\t\tevents,\r\n\t\t\t\t\t\t\t\t\t[eventname].concat(\r\n\t\t\t\t\t\t\t\t\t\ttypeof handler_and_args === 'function' ?\r\n\t\t\t\t\t\t\t\t\t\t\t[handler_and_args] :\r\n\t\t\t\t\t\t\t\t\t\t\thandler_and_args\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}(events, jsPDF.API.events));\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tAPI[plugin] = jsPDF.API[plugin];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/////////////////////////////////////////\r\n\t\t\t// continuing initilisation of jsPDF Document object\r\n\t\t\t/////////////////////////////////////////\r\n\r\n\r\n\t\t\t// Add the first page automatically\r\n\t\t\taddFonts();\r\n\t\t\tactiveFontKey = 'F1';\r\n\t\t\t_addPage();\r\n\r\n\t\t\tevents.publish('initialized');\r\n\r\n\t\t\treturn API;\r\n\t\t}\r\n\r\n\r\n\t\t/**\r\n\t\tjsPDF.API is a STATIC property of jsPDF class.\r\n\t\tjsPDF.API is an object you can add methods and properties to.\r\n\t\tThe methods / properties you add will show up in new jsPDF objects.\r\n\t\t\r\n\t\tOne property is prepopulated. It is the 'events' Object. Plugin authors can add topics, callbacks to this object. These will be reassigned to all new instances of jsPDF.\r\n\t\tExamples:\r\n\t\t\tjsPDF.API.events['initialized'] = function(){ 'this' is API object }\r\n\t\t\tjsPDF.API.events['addFont'] = function(added_font_object){ 'this' is API object }\r\n\t\t\r\n\t\t@static\r\n\t\t@public\r\n\t\t@memberOf jsPDF\r\n\t\t@name API\r\n\t\t\r\n\t\t@example\r\n\t\t\tjsPDF.API.mymethod = function(){\r\n\t\t\t\t// 'this' will be ref to internal API object. see jsPDF source\r\n\t\t\t\t// , so you can refer to built-in methods like so:\r\n\t\t\t\t//     this.line(....)\r\n\t\t\t\t//     this.text(....)\r\n\t\t\t}\r\n\t\t\tvar pdfdoc = new jsPDF()\r\n\t\t\tpdfdoc.mymethod() // <- !!!!!!\r\n\t\t*/\r\n\t\tjsPDF.API = { 'events': [] };\r\n\r\n\t\treturn jsPDF;\r\n\t}());\r\n\r\n\r\n\r\n\tvar Base64 = {\r\n\r\n\t\t// private property\r\n\t\t_keyStr: \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\",\r\n\r\n\t\t// public method for encoding\r\n\t\tencode: function (input) {\r\n\t\t\tvar output = \"\";\r\n\t\t\tvar chr1, chr2, chr3, enc1, enc2, enc3, enc4;\r\n\t\t\tvar i = 0;\r\n\r\n\t\t\tinput = Base64._utf8_encode(input);\r\n\r\n\t\t\twhile (i < input.length) {\r\n\r\n\t\t\t\tchr1 = input.charCodeAt(i++);\r\n\t\t\t\tchr2 = input.charCodeAt(i++);\r\n\t\t\t\tchr3 = input.charCodeAt(i++);\r\n\r\n\t\t\t\tenc1 = chr1 >> 2;\r\n\t\t\t\tenc2 = ((chr1 & 3) << 4) | (chr2 >> 4);\r\n\t\t\t\tenc3 = ((chr2 & 15) << 2) | (chr3 >> 6);\r\n\t\t\t\tenc4 = chr3 & 63;\r\n\r\n\t\t\t\tif (isNaN(chr2)) {\r\n\t\t\t\t\tenc3 = enc4 = 64;\r\n\t\t\t\t} else if (isNaN(chr3)) {\r\n\t\t\t\t\tenc4 = 64;\r\n\t\t\t\t}\r\n\r\n\t\t\t\toutput = output +\r\n\t\t\t\t\tthis._keyStr.charAt(enc1) + this._keyStr.charAt(enc2) +\r\n\t\t\t\t\tthis._keyStr.charAt(enc3) + this._keyStr.charAt(enc4);\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn output;\r\n\t\t},\r\n\r\n\t\t// public method for decoding\r\n\t\tdecode: function (input) {\r\n\t\t\tvar output = \"\";\r\n\t\t\tvar chr1, chr2, chr3;\r\n\t\t\tvar enc1, enc2, enc3, enc4;\r\n\t\t\tvar i = 0;\r\n\r\n\t\t\tinput = input.replace(/[^A-Za-z0-9\\+\\/\\=]/g, \"\");\r\n\r\n\t\t\twhile (i < input.length) {\r\n\r\n\t\t\t\tenc1 = this._keyStr.indexOf(input.charAt(i++));\r\n\t\t\t\tenc2 = this._keyStr.indexOf(input.charAt(i++));\r\n\t\t\t\tenc3 = this._keyStr.indexOf(input.charAt(i++));\r\n\t\t\t\tenc4 = this._keyStr.indexOf(input.charAt(i++));\r\n\r\n\t\t\t\tchr1 = (enc1 << 2) | (enc2 >> 4);\r\n\t\t\t\tchr2 = ((enc2 & 15) << 4) | (enc3 >> 2);\r\n\t\t\t\tchr3 = ((enc3 & 3) << 6) | enc4;\r\n\r\n\t\t\t\toutput = output + String.fromCharCode(chr1);\r\n\r\n\t\t\t\tif (enc3 != 64) {\r\n\t\t\t\t\toutput = output + String.fromCharCode(chr2);\r\n\t\t\t\t}\r\n\t\t\t\tif (enc4 != 64) {\r\n\t\t\t\t\toutput = output + String.fromCharCode(chr3);\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\toutput = Base64._utf8_decode(output);\r\n\r\n\t\t\treturn output;\r\n\r\n\t\t},\r\n\r\n\t\t// private method for UTF-8 encoding\r\n\t\t_utf8_encode: function (string) {\r\n\t\t\tstring = string.replace(/\\r\\n/g, \"\\n\");\r\n\t\t\tvar utftext = \"\";\r\n\r\n\t\t\tfor (var n = 0; n < string.length; n++) {\r\n\r\n\t\t\t\tvar c = string.charCodeAt(n);\r\n\r\n\t\t\t\tif (c < 128) {\r\n\t\t\t\t\tutftext += String.fromCharCode(c);\r\n\t\t\t\t}\r\n\t\t\t\telse if ((c > 127) && (c < 2048)) {\r\n\t\t\t\t\tutftext += String.fromCharCode((c >> 6) | 192);\r\n\t\t\t\t\tutftext += String.fromCharCode((c & 63) | 128);\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tutftext += String.fromCharCode((c >> 12) | 224);\r\n\t\t\t\t\tutftext += String.fromCharCode(((c >> 6) & 63) | 128);\r\n\t\t\t\t\tutftext += String.fromCharCode((c & 63) | 128);\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn utftext;\r\n\t\t},\r\n\r\n\t\t// private method for UTF-8 decoding\r\n\t\t_utf8_decode: function (utftext) {\r\n\t\t\tvar string = \"\";\r\n\t\t\tvar i = 0;\r\n\t\t\tvar c = c1 = c2 = 0;\r\n\r\n\t\t\twhile (i < utftext.length) {\r\n\r\n\t\t\t\tc = utftext.charCodeAt(i);\r\n\r\n\t\t\t\tif (c < 128) {\r\n\t\t\t\t\tstring += String.fromCharCode(c);\r\n\t\t\t\t\ti++;\r\n\t\t\t\t}\r\n\t\t\t\telse if ((c > 191) && (c < 224)) {\r\n\t\t\t\t\tc2 = utftext.charCodeAt(i + 1);\r\n\t\t\t\t\tstring += String.fromCharCode(((c & 31) << 6) | (c2 & 63));\r\n\t\t\t\t\ti += 2;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tc2 = utftext.charCodeAt(i + 1);\r\n\t\t\t\t\tc3 = utftext.charCodeAt(i + 2);\r\n\t\t\t\t\tstring += String.fromCharCode(((c & 15) << 12) | ((c2 & 63) << 6) | (c3 & 63));\r\n\t\t\t\t\ti += 3;\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn string;\r\n\t\t}\r\n\r\n\t};\r\n\r\n\r\n\r\n\tfunction sprintf() {\r\n\t\t// Return a formatted string  \r\n\t\t// \r\n\t\t// version: 903.3016\r\n\t\t// discuss at: http://phpjs.org/functions/sprintf\r\n\t\t// +   original by: Ash Searle (http://hexmen.com/blog/)\r\n\t\t// + namespaced by: Michael White (http://getsprink.com)\r\n\t\t// +    tweaked by: Jack\r\n\t\t// +   improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)\r\n\t\t// +      input by: Paulo Ricardo F. Santos\r\n\t\t// +   improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)\r\n\t\t// +      input by: Brett Zamir (http://brettz9.blogspot.com)\r\n\t\t// +   improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)\r\n\t\t// *     example 1: sprintf(\"%01.2f\", 123.1);\r\n\t\t// *     returns 1: 123.10\r\n\t\t// *     example 2: sprintf(\"[%10s]\", 'monkey');\r\n\t\t// *     returns 2: '[    monkey]'\r\n\t\t// *     example 3: sprintf(\"[%'#10s]\", 'monkey');\r\n\t\t// *     returns 3: '[####monkey]'\r\n\t\tvar regex = /%%|%(\\d+\\$)?([-+\\'#0 ]*)(\\*\\d+\\$|\\*|\\d+)?(\\.(\\*\\d+\\$|\\*|\\d+))?([scboxXuidfegEG])/g;\r\n\t\tvar a = arguments, i = 0, format = a[i++];\r\n\r\n\t\t// pad()\r\n\t\tvar pad = function (str, len, chr, leftJustify) {\r\n\t\t\tif (!chr) chr = ' ';\r\n\t\t\tvar padding = (str.length >= len) ? '' : Array(1 + len - str.length >>> 0).join(chr);\r\n\t\t\treturn leftJustify ? str + padding : padding + str;\r\n\t\t};\r\n\r\n\t\t// justify()\r\n\t\tvar justify = function (value, prefix, leftJustify, minWidth, zeroPad, customPadChar) {\r\n\t\t\tvar diff = minWidth - value.length;\r\n\t\t\tif (diff > 0) {\r\n\t\t\t\tif (leftJustify || !zeroPad) {\r\n\t\t\t\t\tvalue = pad(value, minWidth, customPadChar, leftJustify);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvalue = value.slice(0, prefix.length) + pad('', diff, '0', true) + value.slice(prefix.length);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn value;\r\n\t\t};\r\n\r\n\t\t// formatBaseX()\r\n\t\tvar formatBaseX = function (value, base, prefix, leftJustify, minWidth, precision, zeroPad) {\r\n\t\t\t// Note: casts negative numbers to positive ones\r\n\t\t\tvar number = value >>> 0;\r\n\t\t\tprefix = prefix && number && { '2': '0b', '8': '0', '16': '0x' }[base] || '';\r\n\t\t\tvalue = prefix + pad(number.toString(base), precision || 0, '0', false);\r\n\t\t\treturn justify(value, prefix, leftJustify, minWidth, zeroPad);\r\n\t\t};\r\n\r\n\t\t// formatString()\r\n\t\tvar formatString = function (value, leftJustify, minWidth, precision, zeroPad, customPadChar) {\r\n\t\t\tif (precision != null) {\r\n\t\t\t\tvalue = value.slice(0, precision);\r\n\t\t\t}\r\n\t\t\treturn justify(value, '', leftJustify, minWidth, zeroPad, customPadChar);\r\n\t\t};\r\n\r\n\t\t// doFormat()\r\n\t\tvar doFormat = function (substring, valueIndex, flags, minWidth, _, precision, type) {\r\n\t\t\tvar number;\r\n\t\t\tvar prefix;\r\n\t\t\tvar method;\r\n\t\t\tvar textTransform;\r\n\t\t\tvar value;\r\n\r\n\t\t\tif (substring == '%%') return '%';\r\n\r\n\t\t\t// parse flags\r\n\t\t\tvar leftJustify = false, positivePrefix = '', zeroPad = false, prefixBaseX = false, customPadChar = ' ';\r\n\t\t\tvar flagsl = flags.length;\r\n\t\t\tfor (var j = 0; flags && j < flagsl; j++) switch (flags.charAt(j)) {\r\n\t\t\t\tcase ' ': positivePrefix = ' '; break;\r\n\t\t\t\tcase '+': positivePrefix = '+'; break;\r\n\t\t\t\tcase '-': leftJustify = true; break;\r\n\t\t\t\tcase \"'\": customPadChar = flags.charAt(j + 1); break;\r\n\t\t\t\tcase '0': zeroPad = true; break;\r\n\t\t\t\tcase '#': prefixBaseX = true; break;\r\n\t\t\t}\r\n\r\n\t\t\t// parameters may be null, undefined, empty-string or real valued\r\n\t\t\t// we want to ignore null, undefined and empty-string values\r\n\t\t\tif (!minWidth) {\r\n\t\t\t\tminWidth = 0;\r\n\t\t\t} else if (minWidth == '*') {\r\n\t\t\t\tminWidth = +a[i++];\r\n\t\t\t} else if (minWidth.charAt(0) == '*') {\r\n\t\t\t\tminWidth = +a[minWidth.slice(1, -1)];\r\n\t\t\t} else {\r\n\t\t\t\tminWidth = +minWidth;\r\n\t\t\t}\r\n\r\n\t\t\t// Note: undocumented perl feature:\r\n\t\t\tif (minWidth < 0) {\r\n\t\t\t\tminWidth = -minWidth;\r\n\t\t\t\tleftJustify = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (!isFinite(minWidth)) {\r\n\t\t\t\tthrow new Error('sprintf: (minimum-)width must be finite');\r\n\t\t\t}\r\n\r\n\t\t\tif (!precision) {\r\n\t\t\t\tprecision = 'fFeE'.indexOf(type) > -1 ? 6 : (type == 'd') ? 0 : void (0);\r\n\t\t\t} else if (precision == '*') {\r\n\t\t\t\tprecision = +a[i++];\r\n\t\t\t} else if (precision.charAt(0) == '*') {\r\n\t\t\t\tprecision = +a[precision.slice(1, -1)];\r\n\t\t\t} else {\r\n\t\t\t\tprecision = +precision;\r\n\t\t\t}\r\n\r\n\t\t\t// grab value using valueIndex if required?\r\n\t\t\tvalue = valueIndex ? a[valueIndex.slice(0, -1)] : a[i++];\r\n\r\n\t\t\tswitch (type) {\r\n\t\t\t\tcase 's': return formatString(String(value), leftJustify, minWidth, precision, zeroPad, customPadChar);\r\n\t\t\t\tcase 'c': return formatString(String.fromCharCode(+value), leftJustify, minWidth, precision, zeroPad);\r\n\t\t\t\tcase 'b': return formatBaseX(value, 2, prefixBaseX, leftJustify, minWidth, precision, zeroPad);\r\n\t\t\t\tcase 'o': return formatBaseX(value, 8, prefixBaseX, leftJustify, minWidth, precision, zeroPad);\r\n\t\t\t\tcase 'x': return formatBaseX(value, 16, prefixBaseX, leftJustify, minWidth, precision, zeroPad);\r\n\t\t\t\tcase 'X': return formatBaseX(value, 16, prefixBaseX, leftJustify, minWidth, precision, zeroPad).toUpperCase();\r\n\t\t\t\tcase 'u': return formatBaseX(value, 10, prefixBaseX, leftJustify, minWidth, precision, zeroPad);\r\n\t\t\t\tcase 'i':\r\n\t\t\t\tcase 'd': {\r\n\t\t\t\t\tnumber = parseInt(+value);\r\n\t\t\t\t\tprefix = number < 0 ? '-' : positivePrefix;\r\n\t\t\t\t\tvalue = prefix + pad(String(Math.abs(number)), precision, '0', false);\r\n\t\t\t\t\treturn justify(value, prefix, leftJustify, minWidth, zeroPad);\r\n\t\t\t\t}\r\n\t\t\t\tcase 'e':\r\n\t\t\t\tcase 'E':\r\n\t\t\t\tcase 'f':\r\n\t\t\t\tcase 'F':\r\n\t\t\t\tcase 'g':\r\n\t\t\t\tcase 'G': {\r\n\t\t\t\t\tnumber = +value;\r\n\t\t\t\t\tprefix = number < 0 ? '-' : positivePrefix;\r\n\t\t\t\t\tmethod = ['toExponential', 'toFixed', 'toPrecision']['efg'.indexOf(type.toLowerCase())];\r\n\t\t\t\t\ttextTransform = ['toString', 'toUpperCase']['eEfFgG'.indexOf(type) % 2];\r\n\t\t\t\t\tvalue = prefix + Math.abs(number)[method](precision);\r\n\t\t\t\t\treturn justify(value, prefix, leftJustify, minWidth, zeroPad)[textTransform]();\r\n\t\t\t\t}\r\n\t\t\t\tdefault: return substring;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\treturn format.replace(regex, doFormat);\r\n\t}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\t; (function (jsPDFAPI) {\r\n\t\t'use strict'\r\n\r\n\t\tvar namespace = 'addImage_'\r\n\r\n\t\t// takes a string imgData containing the raw bytes of\r\n\t\t// a jpeg image and returns [width, height]\r\n\t\t// Algorithm from: http://www.64lines.com/jpeg-width-height\r\n\t\tvar getJpegSize = function (imgData) {\r\n\t\t\t'use strict'\r\n\t\t\tvar width, height;\r\n\t\t\t// Verify we have a valid jpeg header 0xff,0xd8,0xff,0xe0,?,?,'J','F','I','F',0x00\r\n\t\t\tif (!imgData.charCodeAt(0) === 0xff ||\r\n\t\t\t\t!imgData.charCodeAt(1) === 0xd8 ||\r\n\t\t\t\t!imgData.charCodeAt(2) === 0xff ||\r\n\t\t\t\t!imgData.charCodeAt(3) === 0xe0 ||\r\n\t\t\t\t!imgData.charCodeAt(6) === 'J'.charCodeAt(0) ||\r\n\t\t\t\t!imgData.charCodeAt(7) === 'F'.charCodeAt(0) ||\r\n\t\t\t\t!imgData.charCodeAt(8) === 'I'.charCodeAt(0) ||\r\n\t\t\t\t!imgData.charCodeAt(9) === 'F'.charCodeAt(0) ||\r\n\t\t\t\t!imgData.charCodeAt(10) === 0x00) {\r\n\t\t\t\tthrow new Error('getJpegSize requires a binary jpeg file')\r\n\t\t\t}\r\n\t\t\tvar blockLength = imgData.charCodeAt(4) * 256 + imgData.charCodeAt(5);\r\n\t\t\tvar i = 4, len = imgData.length;\r\n\t\t\twhile (i < len) {\r\n\t\t\t\ti += blockLength;\r\n\t\t\t\tif (imgData.charCodeAt(i) !== 0xff) {\r\n\t\t\t\t\tthrow new Error('getJpegSize could not find the size of the image');\r\n\t\t\t\t}\r\n\t\t\t\tif (imgData.charCodeAt(i + 1) === 0xc0) {\r\n\t\t\t\t\theight = imgData.charCodeAt(i + 5) * 256 + imgData.charCodeAt(i + 6);\r\n\t\t\t\t\twidth = imgData.charCodeAt(i + 7) * 256 + imgData.charCodeAt(i + 8);\r\n\t\t\t\t\treturn [width, height];\r\n\t\t\t\t} else {\r\n\t\t\t\t\ti += 2;\r\n\t\t\t\t\tblockLength = imgData.charCodeAt(i) * 256 + imgData.charCodeAt(i + 1)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\t// Image functionality ported from pdf.js\r\n\t\t\t, putImage = function (img) {\r\n\t\t\t\tvar objectNumber = this.internal.newObject()\r\n\t\t\t\t\t, out = this.internal.write\r\n\t\t\t\t\t, putStream = this.internal.putStream\r\n\r\n\t\t\t\timg['n'] = objectNumber\r\n\r\n\t\t\t\tout('<</Type /XObject')\r\n\t\t\t\tout('/Subtype /Image')\r\n\t\t\t\tout('/Width ' + img['w'])\r\n\t\t\t\tout('/Height ' + img['h'])\r\n\t\t\t\tif (img['cs'] === 'Indexed') {\r\n\t\t\t\t\tout('/ColorSpace [/Indexed /DeviceRGB '\r\n\t\t\t\t\t\t+ (img['pal'].length / 3 - 1) + ' ' + (objectNumber + 1)\r\n\t\t\t\t\t\t+ ' 0 R]');\r\n\t\t\t\t} else {\r\n\t\t\t\t\tout('/ColorSpace /' + img['cs']);\r\n\t\t\t\t\tif (img['cs'] === 'DeviceCMYK') {\r\n\t\t\t\t\t\tout('/Decode [1 0 1 0 1 0 1 0]');\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tout('/BitsPerComponent ' + img['bpc']);\r\n\t\t\t\tif ('f' in img) {\r\n\t\t\t\t\tout('/Filter /' + img['f']);\r\n\t\t\t\t}\r\n\t\t\t\tif ('dp' in img) {\r\n\t\t\t\t\tout('/DecodeParms <<' + img['dp'] + '>>');\r\n\t\t\t\t}\r\n\t\t\t\tif ('trns' in img && img['trns'].constructor == Array) {\r\n\t\t\t\t\tvar trns = '';\r\n\t\t\t\t\tfor (var i = 0; i < img['trns'].length; i++) {\r\n\t\t\t\t\t\ttrns += (img[trns][i] + ' ' + img['trns'][i] + ' ');\r\n\t\t\t\t\t\tout('/Mask [' + trns + ']');\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif ('smask' in img) {\r\n\t\t\t\t\tout('/SMask ' + (objectNumber + 1) + ' 0 R');\r\n\t\t\t\t}\r\n\t\t\t\tout('/Length ' + img['data'].length + '>>');\r\n\r\n\t\t\t\tputStream(img['data']);\r\n\r\n\t\t\t\tout('endobj');\r\n\t\t\t}\r\n\t\t\t, putResourcesCallback = function () {\r\n\t\t\t\tvar images = this.internal.collections[namespace + 'images']\r\n\t\t\t\tfor (var i in images) {\r\n\t\t\t\t\tputImage.call(this, images[i])\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t, putXObjectsDictCallback = function () {\r\n\t\t\t\tvar images = this.internal.collections[namespace + 'images']\r\n\t\t\t\t\t, out = this.internal.write\r\n\t\t\t\t\t, image\r\n\t\t\t\tfor (var i in images) {\r\n\t\t\t\t\timage = images[i]\r\n\t\t\t\t\tout(\r\n\t\t\t\t\t\t'/I' + image['i']\r\n\t\t\t\t\t\t, image['n']\r\n\t\t\t\t\t\t, '0'\r\n\t\t\t\t\t\t, 'R'\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\tjsPDFAPI.addImage = function (imageData, format, x, y, w, h) {\r\n\t\t\t'use strict'\r\n\t\t\tif (typeof imageData === 'object' && imageData.nodeType === 1) {\r\n\t\t\t\tvar canvas = document.createElement('canvas');\r\n\t\t\t\tcanvas.width = imageData.clientWidth;\r\n\t\t\t\tcanvas.height = imageData.clientHeight;\r\n\r\n\t\t\t\tvar ctx = canvas.getContext('2d');\r\n\t\t\t\tif (!ctx) {\r\n\t\t\t\t\tthrow ('addImage requires canvas to be supported by browser.');\r\n\t\t\t\t}\r\n\t\t\t\tctx.drawImage(imageData, 0, 0, canvas.width, canvas.height);\r\n\t\t\t\timageData = canvas.toDataURL('image/jpeg');\r\n\t\t\t\tformat = \"JPEG\";\r\n\t\t\t}\r\n\t\t\tif (format.toUpperCase() !== 'JPEG') {\r\n\t\t\t\tthrow new Error('addImage currently only supports format \\'JPEG\\', not \\'' + format + '\\'');\r\n\t\t\t}\r\n\r\n\t\t\tvar imageIndex\r\n\t\t\t\t, images = this.internal.collections[namespace + 'images']\r\n\t\t\t\t, coord = this.internal.getCoordinateString\r\n\t\t\t\t, vcoord = this.internal.getVerticalCoordinateString;\r\n\r\n\t\t\t// Detect if the imageData is raw binary or Data URL\r\n\t\t\tif (imageData.substring(0, 23) === 'data:image/jpeg;base64,') {\r\n\t\t\t\timageData = atob(imageData.replace('data:image/jpeg;base64,', ''));\r\n\t\t\t}\r\n\r\n\t\t\tif (images) {\r\n\t\t\t\t// this is NOT the first time this method is ran on this instance of jsPDF object.\r\n\t\t\t\timageIndex = Object.keys ?\r\n\t\t\t\t\tObject.keys(images).length :\r\n\t\t\t\t\t(function (o) {\r\n\t\t\t\t\t\tvar i = 0\r\n\t\t\t\t\t\tfor (var e in o) { if (o.hasOwnProperty(e)) { i++ } }\r\n\t\t\t\t\t\treturn i\r\n\t\t\t\t\t})(images)\r\n\t\t\t} else {\r\n\t\t\t\t// this is the first time this method is ran on this instance of jsPDF object.\r\n\t\t\t\timageIndex = 0\r\n\t\t\t\tthis.internal.collections[namespace + 'images'] = images = {}\r\n\t\t\t\tthis.internal.events.subscribe('putResources', putResourcesCallback)\r\n\t\t\t\tthis.internal.events.subscribe('putXobjectDict', putXObjectsDictCallback)\r\n\t\t\t}\r\n\r\n\t\t\tvar dims = getJpegSize(imageData);\r\n\t\t\tvar info = {\r\n\t\t\t\tw: dims[0],\r\n\t\t\t\th: dims[1],\r\n\t\t\t\tcs: 'DeviceRGB',\r\n\t\t\t\tbpc: 8,\r\n\t\t\t\tf: 'DCTDecode',\r\n\t\t\t\ti: imageIndex,\r\n\t\t\t\tdata: imageData\r\n\t\t\t\t// n: objectNumber will be added by putImage code\r\n\r\n\t\t\t};\r\n\t\t\timages[imageIndex] = info\r\n\t\t\tif (!w && !h) {\r\n\t\t\t\tw = -96;\r\n\t\t\t\th = -96;\r\n\t\t\t}\r\n\t\t\tif (w < 0) {\r\n\t\t\t\tw = (-1) * info['w'] * 72 / w / this.internal.scaleFactor;\r\n\t\t\t}\r\n\t\t\tif (h < 0) {\r\n\t\t\t\th = (-1) * info['h'] * 72 / h / this.internal.scaleFactor;\r\n\t\t\t}\r\n\t\t\tif (w === 0) {\r\n\t\t\t\tw = h * info['w'] / info['h'];\r\n\t\t\t}\r\n\t\t\tif (h === 0) {\r\n\t\t\t\th = w * info['h'] / info['w'];\r\n\t\t\t}\r\n\r\n\t\t\tthis.internal.write(\r\n\t\t\t\t'q'\r\n\t\t\t\t, coord(w)\r\n\t\t\t\t, '0 0'\r\n\t\t\t\t, coord(h) // TODO: check if this should be shifted by vcoord\r\n\t\t\t\t, coord(x)\r\n\t\t\t\t, vcoord(y + h)\r\n\t\t\t\t, 'cm /I' + info['i']\r\n\t\t\t\t, 'Do Q'\r\n\t\t\t)\r\n\r\n\t\t\treturn this\r\n\t\t}\r\n\r\n\r\n\t})(jsPDF.API)\r\n\r\n\r\n\r\n\t//FILE jspdf_encoding\r\n\r\n\r\n\r\n\t; (function (API) {\r\n\t\t'use strict'\r\n\r\n\r\n\r\n\t\t/**\r\n\t\tUncompresses data compressed into custom, base16-like format. \r\n\t\t@public\r\n\t\t@function\r\n\t\t@param\r\n\t\t@returns {Type}\r\n\t\t*/\r\n\t\tvar uncompress = function (data) {\r\n\r\n\t\t\tvar decoded = '0123456789abcdef'\r\n\t\t\t\t, encoded = 'klmnopqrstuvwxyz'\r\n\t\t\t\t, mapping = {}\r\n\r\n\t\t\tfor (var i = 0; i < encoded.length; i++) {\r\n\t\t\t\tmapping[encoded[i]] = decoded[i]\r\n\t\t\t}\r\n\r\n\t\t\tvar undef\r\n\t\t\t\t, output = {}\r\n\t\t\t\t, sign = 1\r\n\t\t\t\t, stringparts // undef. will be [] in string mode\r\n\r\n\t\t\t\t, activeobject = output\r\n\t\t\t\t, parentchain = []\r\n\t\t\t\t, parent_key_pair\r\n\t\t\t\t, keyparts = ''\r\n\t\t\t\t, valueparts = ''\r\n\t\t\t\t, key // undef. will be Truthy when Key is resolved.\r\n\t\t\t\t, datalen = data.length - 1 // stripping ending }\r\n\t\t\t\t, ch\r\n\r\n\t\t\ti = 1 // stripping starting {\r\n\r\n\t\t\twhile (i != datalen) {\r\n\t\t\t\t// - { } ' are special.\r\n\r\n\t\t\t\tch = data[i]\r\n\t\t\t\ti += 1\r\n\r\n\t\t\t\tif (ch == \"'\") {\r\n\t\t\t\t\tif (stringparts) {\r\n\t\t\t\t\t\t// end of string mode\r\n\t\t\t\t\t\tkey = stringparts.join('')\r\n\t\t\t\t\t\tstringparts = undef\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// start of string mode\r\n\t\t\t\t\t\tstringparts = []\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (stringparts) {\r\n\t\t\t\t\tstringparts.push(ch)\r\n\t\t\t\t} else if (ch == '{') {\r\n\t\t\t\t\t// start of object\r\n\t\t\t\t\tparentchain.push([activeobject, key])\r\n\t\t\t\t\tactiveobject = {}\r\n\t\t\t\t\tkey = undef\r\n\t\t\t\t} else if (ch == '}') {\r\n\t\t\t\t\t// end of object\r\n\t\t\t\t\tparent_key_pair = parentchain.pop()\r\n\t\t\t\t\tparent_key_pair[0][parent_key_pair[1]] = activeobject\r\n\t\t\t\t\tkey = undef\r\n\t\t\t\t\tactiveobject = parent_key_pair[0]\r\n\t\t\t\t} else if (ch == '-') {\r\n\t\t\t\t\tsign = -1\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// must be number\r\n\t\t\t\t\tif (key === undef) {\r\n\t\t\t\t\t\tif (mapping.hasOwnProperty(ch)) {\r\n\t\t\t\t\t\t\tkeyparts += mapping[ch]\r\n\t\t\t\t\t\t\tkey = parseInt(keyparts, 16) * sign\r\n\t\t\t\t\t\t\tsign = +1\r\n\t\t\t\t\t\t\tkeyparts = ''\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tkeyparts += ch\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (mapping.hasOwnProperty(ch)) {\r\n\t\t\t\t\t\t\tvalueparts += mapping[ch]\r\n\t\t\t\t\t\t\tactiveobject[key] = parseInt(valueparts, 16) * sign\r\n\t\t\t\t\t\t\tsign = +1\r\n\t\t\t\t\t\t\tkey = undef\r\n\t\t\t\t\t\t\tvalueparts = ''\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tvalueparts += ch\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} // end while\r\n\r\n\t\t\treturn output\r\n\t\t}\r\n\r\n\t\t// encoding = 'Unicode' \r\n\t\t// NOT UTF8, NOT UTF16BE/LE, NOT UCS2BE/LE. NO clever BOM behavior\r\n\t\t// Actual 16bit char codes used.\r\n\t\t// no multi-byte logic here\r\n\r\n\t\t// Unicode characters to WinAnsiEncoding:\r\n\t\t// {402: 131, 8211: 150, 8212: 151, 8216: 145, 8217: 146, 8218: 130, 8220: 147, 8221: 148, 8222: 132, 8224: 134, 8225: 135, 8226: 149, 8230: 133, 8364: 128, 8240:137, 8249: 139, 8250: 155, 710: 136, 8482: 153, 338: 140, 339: 156, 732: 152, 352: 138, 353: 154, 376: 159, 381: 142, 382: 158}\r\n\t\t// as you can see, all Unicode chars are outside of 0-255 range. No char code conflicts.\r\n\t\t// this means that you can give Win cp1252 encoded strings to jsPDF for rendering directly\r\n\t\t// as well as give strings with some (supported by these fonts) Unicode characters and \r\n\t\t// these will be mapped to win cp1252 \r\n\t\t// for example, you can send char code (cp1252) 0x80 or (unicode) 0x20AC, getting \"Euro\" glyph displayed in both cases.\r\n\r\n\t\tvar encodingBlock = {\r\n\t\t\t'codePages': ['WinAnsiEncoding']\r\n\t\t\t, 'WinAnsiEncoding': uncompress(\"{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}\")\r\n\t\t}\r\n\t\t\t, encodings = {\r\n\t\t\t\t'Unicode': {\r\n\t\t\t\t\t'Courier': encodingBlock\r\n\t\t\t\t\t, 'Courier-Bold': encodingBlock\r\n\t\t\t\t\t, 'Courier-BoldOblique': encodingBlock\r\n\t\t\t\t\t, 'Courier-Oblique': encodingBlock\r\n\t\t\t\t\t, 'Helvetica': encodingBlock\r\n\t\t\t\t\t, 'Helvetica-Bold': encodingBlock\r\n\t\t\t\t\t, 'Helvetica-BoldOblique': encodingBlock\r\n\t\t\t\t\t, 'Helvetica-Oblique': encodingBlock\r\n\t\t\t\t\t, 'Times-Roman': encodingBlock\r\n\t\t\t\t\t, 'Times-Bold': encodingBlock\r\n\t\t\t\t\t, 'Times-BoldItalic': encodingBlock\r\n\t\t\t\t\t, 'Times-Italic': encodingBlock\r\n\t\t\t\t\t//\t, 'Symbol'\r\n\t\t\t\t\t//\t, 'ZapfDingbats'\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t/** \r\n\t\t\tResources:\r\n\t\t\tFont metrics data is reprocessed derivative of contents of\r\n\t\t\t\"Font Metrics for PDF Core 14 Fonts\" package, which exhibits the following copyright and license:\r\n\t\t\t\r\n\t\t\tCopyright (c) 1989, 1990, 1991, 1992, 1993, 1997 Adobe Systems Incorporated. All Rights Reserved.\r\n\t\t\t\r\n\t\t\tThis file and the 14 PostScript(R) AFM files it accompanies may be used,\r\n\t\t\tcopied, and distributed for any purpose and without charge, with or without\r\n\t\t\tmodification, provided that all copyright notices are retained; that the AFM\r\n\t\t\tfiles are not distributed without this file; that all modifications to this\r\n\t\t\tfile or any of the AFM files are prominently noted in the modified file(s);\r\n\t\t\tand that this paragraph is not modified. Adobe Systems has no responsibility\r\n\t\t\tor obligation to support the use of the AFM files.\r\n\t\t\t\r\n\t\t\t*/\r\n\t\t\t, fontMetrics = {\r\n\t\t\t\t'Unicode': {\r\n\t\t\t\t\t// all sizing numbers are n/fontMetricsFractionOf = one font size unit\r\n\t\t\t\t\t// this means that if fontMetricsFractionOf = 1000, and letter A's width is 476, it's\r\n\t\t\t\t\t// width is 476/1000 or 47.6% of its height (regardless of font size)\r\n\t\t\t\t\t// At this time this value applies to \"widths\" and \"kerning\" numbers.\r\n\r\n\t\t\t\t\t// char code 0 represents \"default\" (average) width - use it for chars missing in this table.\r\n\t\t\t\t\t// key 'fof' represents the \"fontMetricsFractionOf\" value\r\n\r\n\t\t\t\t\t'Courier-Oblique': uncompress(\"{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}\")\r\n\t\t\t\t\t, 'Times-BoldItalic': uncompress(\"{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}\")\r\n\t\t\t\t\t, 'Helvetica-Bold': uncompress(\"{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}\")\r\n\t\t\t\t\t, 'Courier': uncompress(\"{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}\")\r\n\t\t\t\t\t, 'Courier-BoldOblique': uncompress(\"{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}\")\r\n\t\t\t\t\t, 'Times-Bold': uncompress(\"{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}\")\r\n\t\t\t\t\t//, 'Symbol': uncompress(\"{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}\")\r\n\t\t\t\t\t, 'Helvetica': uncompress(\"{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}\")\r\n\t\t\t\t\t, 'Helvetica-BoldOblique': uncompress(\"{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}\")\r\n\t\t\t\t\t//, 'ZapfDingbats': uncompress(\"{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}\")\r\n\t\t\t\t\t, 'Courier-Bold': uncompress(\"{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}\")\r\n\t\t\t\t\t, 'Times-Italic': uncompress(\"{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}\")\r\n\t\t\t\t\t, 'Times-Roman': uncompress(\"{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}\")\r\n\t\t\t\t\t, 'Helvetica-Oblique': uncompress(\"{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}\")\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t/*\r\n\t\tThis event handler is fired when a new jsPDF object is initialized\r\n\t\tThis event handler appends metrics data to standard fonts within\r\n\t\tthat jsPDF instance. The metrics are mapped over Unicode character\r\n\t\tcodes, NOT CIDs or other codes matching the StandardEncoding table of the\r\n\t\tstandard PDF fonts.\r\n\t\tFuture:\r\n\t\tAlso included is the encoding maping table, converting Unicode (UCS-2, UTF-16)\r\n\t\tchar codes to StandardEncoding character codes. The encoding table is to be used\r\n\t\tsomewhere around \"pdfEscape\" call.\r\n\t\t*/\r\n\r\n\t\tAPI.events.push([\r\n\t\t\t'addFonts'\r\n\t\t\t, function (fontManagementObjects) {\r\n\t\t\t\t// fontManagementObjects is {\r\n\t\t\t\t//\t'fonts':font_ID-keyed hash of font objects\r\n\t\t\t\t//\t, 'dictionary': lookup object, linking [\"FontFamily\"]['Style'] to font ID\r\n\t\t\t\t//}\r\n\t\t\t\tvar font\r\n\t\t\t\t\t, fontID\r\n\t\t\t\t\t, metrics\r\n\t\t\t\t\t, unicode_section\r\n\t\t\t\t\t, encoding = 'Unicode'\r\n\t\t\t\t\t, encodingBlock\r\n\r\n\t\t\t\tfor (fontID in fontManagementObjects.fonts) {\r\n\t\t\t\t\tif (fontManagementObjects.fonts.hasOwnProperty(fontID)) {\r\n\t\t\t\t\t\tfont = fontManagementObjects.fonts[fontID]\r\n\r\n\t\t\t\t\t\t// // we only ship 'Unicode' mappings and metrics. No need for loop.\r\n\t\t\t\t\t\t// // still, leaving this for the future.\r\n\r\n\t\t\t\t\t\t// for (encoding in fontMetrics){\r\n\t\t\t\t\t\t// \tif (fontMetrics.hasOwnProperty(encoding)) {\r\n\r\n\t\t\t\t\t\tmetrics = fontMetrics[encoding][font.PostScriptName]\r\n\t\t\t\t\t\tif (metrics) {\r\n\t\t\t\t\t\t\tif (font.metadata[encoding]) {\r\n\t\t\t\t\t\t\t\tunicode_section = font.metadata[encoding]\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tunicode_section = font.metadata[encoding] = {}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tunicode_section.widths = metrics.widths\r\n\t\t\t\t\t\t\tunicode_section.kerning = metrics.kerning\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// \t}\r\n\t\t\t\t\t\t// }\r\n\t\t\t\t\t\t// for (encoding in encodings){\r\n\t\t\t\t\t\t// \tif (encodings.hasOwnProperty(encoding)) {\r\n\t\t\t\t\t\tencodingBlock = encodings[encoding][font.PostScriptName]\r\n\t\t\t\t\t\tif (encodingBlock) {\r\n\t\t\t\t\t\t\tif (font.metadata[encoding]) {\r\n\t\t\t\t\t\t\t\tunicode_section = font.metadata[encoding]\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tunicode_section = font.metadata[encoding] = {}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tunicode_section.encoding = encodingBlock\r\n\t\t\t\t\t\t\tif (encodingBlock.codePages && encodingBlock.codePages.length) {\r\n\t\t\t\t\t\t\t\tfont.encoding = encodingBlock.codePages[0]\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// \t}\r\n\t\t\t\t\t\t// }\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t]) // end of adding event handler\r\n\r\n\t})(jsPDF.API);\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\t/** @preserve \r\n\tjsPDF split_text_to_size plugin\r\n\tCopyright (c) 2012 Willow Systems Corporation, willow-systems.com\r\n\tMIT license.\r\n\t*/\r\n\t/**\r\n\t * Permission is hereby granted, free of charge, to any person obtaining\r\n\t * a copy of this software and associated documentation files (the\r\n\t * \"Software\"), to deal in the Software without restriction, including\r\n\t * without limitation the rights to use, copy, modify, merge, publish,\r\n\t * distribute, sublicense, and/or sell copies of the Software, and to\r\n\t * permit persons to whom the Software is furnished to do so, subject to\r\n\t * the following conditions:\r\n\t * \r\n\t * The above copyright notice and this permission notice shall be\r\n\t * included in all copies or substantial portions of the Software.\r\n\t * \r\n\t * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\r\n\t * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\r\n\t * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\r\n\t * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE\r\n\t * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\r\n\t * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\r\n\t * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n\t * ====================================================================\r\n\t */\r\n\r\n\t; (function (API) {\r\n\t\t'use strict'\r\n\r\n\t\t/**\r\n\t\tReturns an array of length matching length of the 'word' string, with each\r\n\t\tcell ocupied by the width of the char in that position.\r\n\t\t\r\n\t\t@function\r\n\t\t@param word {String}\r\n\t\t@param widths {Object}\r\n\t\t@param kerning {Object}\r\n\t\t@returns {Array}\r\n\t\t*/\r\n\t\tvar getCharWidthsArray = API.getCharWidthsArray = function (text, options) {\r\n\r\n\t\t\tif (!options) {\r\n\t\t\t\toptions = {}\r\n\t\t\t}\r\n\r\n\t\t\tvar widths = options.widths ? options.widths : this.internal.getFont().metadata.Unicode.widths\r\n\t\t\t\t, widthsFractionOf = widths.fof ? widths.fof : 1\r\n\t\t\t\t, kerning = options.kerning ? options.kerning : this.internal.getFont().metadata.Unicode.kerning\r\n\t\t\t\t, kerningFractionOf = kerning.fof ? kerning.fof : 1\r\n\r\n\t\t\t// console.log(\"widths, kergnings\", widths, kerning)\r\n\r\n\t\t\tvar i, l\r\n\t\t\t\t, char_code\r\n\t\t\t\t, char_width\r\n\t\t\t\t, prior_char_code = 0 // for kerning\r\n\t\t\t\t, default_char_width = widths[0] || widthsFractionOf\r\n\t\t\t\t, output = []\r\n\r\n\t\t\tfor (i = 0, l = text.length; i < l; i++) {\r\n\t\t\t\tchar_code = text.charCodeAt(i)\r\n\t\t\t\toutput.push(\r\n\t\t\t\t\t(widths[char_code] || default_char_width) / widthsFractionOf +\r\n\t\t\t\t\t(kerning[char_code] && kerning[char_code][prior_char_code] || 0) / kerningFractionOf\r\n\t\t\t\t)\r\n\t\t\t\tprior_char_code = char_code\r\n\t\t\t}\r\n\r\n\t\t\treturn output\r\n\t\t}\r\n\t\tvar getArraySum = function (array) {\r\n\t\t\tvar i = array.length\r\n\t\t\t\t, output = 0\r\n\t\t\twhile (i) {\r\n\t\t\t\t; i--;\r\n\t\t\t\toutput += array[i]\r\n\t\t\t}\r\n\t\t\treturn output\r\n\t\t}\r\n\t\t/**\r\n\t\tReturns a widths of string in a given font, if the font size is set as 1 point.\r\n\t\t\r\n\t\tIn other words, this is \"proportional\" value. For 1 unit of font size, the length\r\n\t\tof the string will be that much.\r\n\t\t\r\n\t\tMultiply by font size to get actual width in *points*\r\n\t\tThen divide by 72 to get inches or divide by (72/25.6) to get 'mm' etc.\r\n\t\t\r\n\t\t@public\r\n\t\t@function\r\n\t\t@param\r\n\t\t@returns {Type}\r\n\t\t*/\r\n\t\tvar getStringUnitWidth = API.getStringUnitWidth = function (text, options) {\r\n\t\t\treturn getArraySum(getCharWidthsArray.call(this, text, options))\r\n\t\t}\r\n\r\n\t\t/** \r\n\t\treturns array of lines\r\n\t\t*/\r\n\t\tvar splitLongWord = function (word, widths_array, firstLineMaxLen, maxLen) {\r\n\t\t\tvar answer = []\r\n\r\n\t\t\t// 1st, chop off the piece that can fit on the hanging line.\r\n\t\t\tvar i = 0\r\n\t\t\t\t, l = word.length\r\n\t\t\t\t, workingLen = 0\r\n\t\t\twhile (i !== l && workingLen + widths_array[i] < firstLineMaxLen) {\r\n\t\t\t\tworkingLen += widths_array[i]\r\n\t\t\t\t\t; i++;\r\n\t\t\t}\r\n\t\t\t// this is first line.\r\n\t\t\tanswer.push(word.slice(0, i))\r\n\r\n\t\t\t// 2nd. Split the rest into maxLen pieces.\r\n\t\t\tvar startOfLine = i\r\n\t\t\tworkingLen = 0\r\n\t\t\twhile (i !== l) {\r\n\t\t\t\tif (workingLen + widths_array[i] > maxLen) {\r\n\t\t\t\t\tanswer.push(word.slice(startOfLine, i))\r\n\t\t\t\t\tworkingLen = 0\r\n\t\t\t\t\tstartOfLine = i\r\n\t\t\t\t}\r\n\t\t\t\tworkingLen += widths_array[i]\r\n\t\t\t\t\t; i++;\r\n\t\t\t}\r\n\t\t\tif (startOfLine !== i) {\r\n\t\t\t\tanswer.push(word.slice(startOfLine, i))\r\n\t\t\t}\r\n\r\n\t\t\treturn answer\r\n\t\t}\r\n\r\n\t\t// Note, all sizing inputs for this function must be in \"font measurement units\"\r\n\t\t// By default, for PDF, it's \"point\".\r\n\t\tvar splitParagraphIntoLines = function (text, maxlen, options) {\r\n\t\t\t// at this time works only on Western scripts, ones with space char\r\n\t\t\t// separating the words. Feel free to expand.\r\n\r\n\t\t\tif (!options) {\r\n\t\t\t\toptions = {}\r\n\t\t\t}\r\n\r\n\t\t\tvar spaceCharWidth = getCharWidthsArray(' ', options)[0]\r\n\r\n\t\t\tvar words = text.split(' ')\r\n\r\n\t\t\tvar line = []\r\n\t\t\t\t, lines = [line]\r\n\t\t\t\t, line_length = options.textIndent || 0\r\n\t\t\t\t, separator_length = 0\r\n\t\t\t\t, current_word_length = 0\r\n\t\t\t\t, word\r\n\t\t\t\t, widths_array\r\n\r\n\t\t\tvar i, l, tmp\r\n\t\t\tfor (i = 0, l = words.length; i < l; i++) {\r\n\t\t\t\tword = words[i]\r\n\t\t\t\twidths_array = getCharWidthsArray(word, options)\r\n\t\t\t\tcurrent_word_length = getArraySum(widths_array)\r\n\r\n\t\t\t\tif (line_length + separator_length + current_word_length > maxlen) {\r\n\t\t\t\t\tif (current_word_length > maxlen) {\r\n\t\t\t\t\t\t// this happens when you have space-less long URLs for example.\r\n\t\t\t\t\t\t// we just chop these to size. We do NOT insert hiphens\r\n\t\t\t\t\t\ttmp = splitLongWord(word, widths_array, maxlen - (line_length + separator_length), maxlen)\r\n\t\t\t\t\t\t// first line we add to existing line object\r\n\t\t\t\t\t\tline.push(tmp.shift()) // it's ok to have extra space indicator there\r\n\t\t\t\t\t\t// last line we make into new line object\r\n\t\t\t\t\t\tline = [tmp.pop()]\r\n\t\t\t\t\t\t// lines in the middle we apped to lines object as whole lines\r\n\t\t\t\t\t\twhile (tmp.length) {\r\n\t\t\t\t\t\t\tlines.push([tmp.shift()]) // single fragment occupies whole line\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcurrent_word_length = getArraySum(widths_array.slice(word.length - line[0].length))\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// just put it on a new line\r\n\t\t\t\t\t\tline = [word]\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// now we attach new line to lines\r\n\t\t\t\t\tlines.push(line)\r\n\r\n\t\t\t\t\tline_length = current_word_length\r\n\t\t\t\t\tseparator_length = spaceCharWidth\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\tline.push(word)\r\n\r\n\t\t\t\t\tline_length += separator_length + current_word_length\r\n\t\t\t\t\tseparator_length = spaceCharWidth\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar output = []\r\n\t\t\tfor (i = 0, l = lines.length; i < l; i++) {\r\n\t\t\t\toutput.push(lines[i].join(' '))\r\n\t\t\t}\r\n\t\t\treturn output\r\n\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\tSplits a given string into an array of strings. Uses 'size' value\r\n\t\t(in measurement units declared as default for the jsPDF instance)\r\n\t\tand the font's \"widths\" and \"Kerning\" tables, where availabe, to\r\n\t\tdetermine display length of a given string for a given font.\r\n\t\t\r\n\t\tWe use character's 100% of unit size (height) as width when Width\r\n\t\ttable or other default width is not available.\r\n\t\t\r\n\t\t@public\r\n\t\t@function\r\n\t\t@param text {String} Unencoded, regular JavaScript (Unicode, UTF-16 / UCS-2) string.\r\n\t\t@param size {Number} Nominal number, measured in units default to this instance of jsPDF.\r\n\t\t@param options {Object} Optional flags needed for chopper to do the right thing.\r\n\t\t@returns {Array} with strings chopped to size.\r\n\t\t*/\r\n\t\tAPI.splitTextToSize = function (text, maxlen, options) {\r\n\t\t\t'use strict'\r\n\r\n\t\t\tif (!options) {\r\n\t\t\t\toptions = {}\r\n\t\t\t}\r\n\r\n\t\t\tvar fsize = options.fontSize || this.internal.getFontSize()\r\n\t\t\t\t, newOptions = (function (options) {\r\n\t\t\t\t\tvar widths = { 0: 1 }\r\n\t\t\t\t\t\t, kerning = {}\r\n\r\n\t\t\t\t\tif (!options.widths || !options.kerning) {\r\n\t\t\t\t\t\tvar f = this.internal.getFont(options.fontName, options.fontStyle)\r\n\t\t\t\t\t\t\t, encoding = 'Unicode'\r\n\t\t\t\t\t\t// NOT UTF8, NOT UTF16BE/LE, NOT UCS2BE/LE\r\n\t\t\t\t\t\t// Actual JavaScript-native String's 16bit char codes used.\r\n\t\t\t\t\t\t// no multi-byte logic here\r\n\r\n\t\t\t\t\t\tif (f.metadata[encoding]) {\r\n\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\twidths: f.metadata[encoding].widths || widths\r\n\t\t\t\t\t\t\t\t, kerning: f.metadata[encoding].kerning || kerning\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\twidths: options.widths\r\n\t\t\t\t\t\t\t, kerning: options.kerning\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// then use default values\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\twidths: widths\r\n\t\t\t\t\t\t, kerning: kerning\r\n\t\t\t\t\t}\r\n\t\t\t\t}).call(this, options)\r\n\r\n\t\t\t// first we split on end-of-line chars\r\n\t\t\tvar paragraphs\r\n\t\t\tif (text.match(/[\\n\\r]/)) {\r\n\t\t\t\tparagraphs = text.split(/\\r\\n|\\r|\\n/g)\r\n\t\t\t} else {\r\n\t\t\t\tparagraphs = [text]\r\n\t\t\t}\r\n\r\n\t\t\t// now we convert size (max length of line) into \"font size units\"\r\n\t\t\t// at present time, the \"font size unit\" is always 'point'\r\n\t\t\t// 'proportional' means, \"in proportion to font size\"\r\n\t\t\tvar fontUnit_maxLen = 1.0 * this.internal.scaleFactor * maxlen / fsize\r\n\t\t\t// at this time, fsize is always in \"points\" regardless of the default measurement unit of the doc.\r\n\t\t\t// this may change in the future?\r\n\t\t\t// until then, proportional_maxlen is likely to be in 'points'\r\n\r\n\t\t\t// If first line is to be indented (shorter or longer) than maxLen \r\n\t\t\t// we indicate that by using CSS-style \"text-indent\" option.\r\n\t\t\t// here it's in font units too (which is likely 'points')\r\n\t\t\t// it can be negative (which makes the first line longer than maxLen)\r\n\t\t\tnewOptions.textIndent = options.textIndent ?\r\n\t\t\t\toptions.textIndent * 1.0 * this.internal.scaleFactor / fsize :\r\n\t\t\t\t0\r\n\r\n\t\t\tvar i, l\r\n\t\t\t\t, output = []\r\n\t\t\tfor (i = 0, l = paragraphs.length; i < l; i++) {\r\n\t\t\t\toutput = output.concat(\r\n\t\t\t\t\tsplitParagraphIntoLines(\r\n\t\t\t\t\t\tparagraphs[i]\r\n\t\t\t\t\t\t, fontUnit_maxLen\r\n\t\t\t\t\t\t, newOptions\r\n\t\t\t\t\t)\r\n\t\t\t\t)\r\n\t\t\t}\r\n\r\n\t\t\treturn output\r\n\t\t}\r\n\r\n\t})(jsPDF.API);\r\n\r\n\r\n\r\n\t/** @preserve\r\n\tjsPDF Silly SVG plugin\r\n\tCopyright (c) 2012 Willow Systems Corporation, willow-systems.com\r\n\t*/\r\n\t/**\r\n\t * Permission is hereby granted, free of charge, to any person obtaining\r\n\t * a copy of this software and associated documentation files (the\r\n\t * \"Software\"), to deal in the Software without restriction, including\r\n\t * without limitation the rights to use, copy, modify, merge, publish,\r\n\t * distribute, sublicense, and/or sell copies of the Software, and to\r\n\t * permit persons to whom the Software is furnished to do so, subject to\r\n\t * the following conditions:\r\n\t * \r\n\t * The above copyright notice and this permission notice shall be\r\n\t * included in all copies or substantial portions of the Software.\r\n\t * \r\n\t * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\r\n\t * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\r\n\t * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\r\n\t * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE\r\n\t * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\r\n\t * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\r\n\t * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n\t * ====================================================================\r\n\t */\r\n\r\n\t; (function (jsPDFAPI) {\r\n\t\t'use strict'\r\n\r\n\t\t/**\r\n\t\tParses SVG XML and converts only some of the SVG elements into\r\n\t\tPDF elements.\r\n\t\t\r\n\t\tSupports:\r\n\t\t paths\r\n\t\t\r\n\t\t@public\r\n\t\t@function\r\n\t\t@param\r\n\t\t@returns {Type}\r\n\t\t*/\r\n\t\tjsPDFAPI.addSVG = function (svgtext, x, y, w, h) {\r\n\t\t\t// 'this' is _jsPDF object returned when jsPDF is inited (new jsPDF())\r\n\r\n\t\t\tvar undef\r\n\r\n\t\t\tif (x === undef || x === undef) {\r\n\t\t\t\tthrow new Error(\"addSVG needs values for 'x' and 'y'\")\r\n\t\t\t}\r\n\r\n\t\t\tfunction InjectCSS(cssbody, document) {\r\n\t\t\t\tvar styletag = document.createElement('style')\r\n\t\t\t\tstyletag.type = 'text/css'\r\n\t\t\t\tif (styletag.styleSheet) {\r\n\t\t\t\t\t// ie\r\n\t\t\t\t\tstyletag.styleSheet.cssText = cssbody\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// others\r\n\t\t\t\t\tstyletag.appendChild(document.createTextNode(cssbody))\r\n\t\t\t\t}\r\n\t\t\t\tdocument.getElementsByTagName(\"head\")[0].appendChild(styletag)\r\n\t\t\t}\r\n\r\n\t\t\tfunction createWorkerNode(document) {\r\n\r\n\t\t\t\tvar frameID = 'childframe' // Date.now().toString() + '_' + (Math.random() * 100).toString()\r\n\t\t\t\t\t, frame = document.createElement('iframe')\r\n\r\n\t\t\t\tInjectCSS(\r\n\t\t\t\t\t'.jsPDF_sillysvg_iframe {display:none;position:absolute;}'\r\n\t\t\t\t\t, document\r\n\t\t\t\t)\r\n\r\n\t\t\t\tframe.name = frameID\r\n\t\t\t\tframe.setAttribute(\"width\", 0)\r\n\t\t\t\tframe.setAttribute(\"height\", 0)\r\n\t\t\t\tframe.setAttribute(\"frameborder\", \"0\")\r\n\t\t\t\tframe.setAttribute(\"scrolling\", \"no\")\r\n\t\t\t\tframe.setAttribute(\"seamless\", \"seamless\")\r\n\t\t\t\tframe.setAttribute(\"class\", \"jsPDF_sillysvg_iframe\")\r\n\r\n\t\t\t\tdocument.body.appendChild(frame)\r\n\r\n\t\t\t\treturn frame\r\n\t\t\t}\r\n\r\n\t\t\tfunction attachSVGToWorkerNode(svgtext, frame) {\r\n\t\t\t\tvar framedoc = (frame.contentWindow || frame.contentDocument).document\r\n\t\t\t\tframedoc.write(svgtext)\r\n\t\t\t\tframedoc.close()\r\n\t\t\t\treturn framedoc.getElementsByTagName('svg')[0]\r\n\t\t\t}\r\n\r\n\t\t\tfunction convertPathToPDFLinesArgs(path) {\r\n\t\t\t\t'use strict'\r\n\t\t\t\t// we will use 'lines' method call. it needs:\r\n\t\t\t\t// - starting coordinate pair\r\n\t\t\t\t// - array of arrays of vector shifts (2-len for line, 6 len for bezier)\r\n\t\t\t\t// - scale array [horizontal, vertical] ratios\r\n\t\t\t\t// - style (stroke, fill, both)\r\n\r\n\t\t\t\tvar x = parseFloat(path[1])\r\n\t\t\t\t\t, y = parseFloat(path[2])\r\n\t\t\t\t\t, vectors = []\r\n\t\t\t\t\t, position = 3\r\n\t\t\t\t\t, len = path.length\r\n\r\n\t\t\t\twhile (position < len) {\r\n\t\t\t\t\tif (path[position] === 'c') {\r\n\t\t\t\t\t\tvectors.push([\r\n\t\t\t\t\t\t\tparseFloat(path[position + 1])\r\n\t\t\t\t\t\t\t, parseFloat(path[position + 2])\r\n\t\t\t\t\t\t\t, parseFloat(path[position + 3])\r\n\t\t\t\t\t\t\t, parseFloat(path[position + 4])\r\n\t\t\t\t\t\t\t, parseFloat(path[position + 5])\r\n\t\t\t\t\t\t\t, parseFloat(path[position + 6])\r\n\t\t\t\t\t\t])\r\n\t\t\t\t\t\tposition += 7\r\n\t\t\t\t\t} else if (path[position] === 'l') {\r\n\t\t\t\t\t\tvectors.push([\r\n\t\t\t\t\t\t\tparseFloat(path[position + 1])\r\n\t\t\t\t\t\t\t, parseFloat(path[position + 2])\r\n\t\t\t\t\t\t])\r\n\t\t\t\t\t\tposition += 3\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tposition += 1\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn [x, y, vectors]\r\n\t\t\t}\r\n\r\n\t\t\tvar workernode = createWorkerNode(document)\r\n\t\t\t\t, svgnode = attachSVGToWorkerNode(svgtext, workernode)\r\n\t\t\t\t, scale = [1, 1]\r\n\t\t\t\t, svgw = parseFloat(svgnode.getAttribute('width'))\r\n\t\t\t\t, svgh = parseFloat(svgnode.getAttribute('height'))\r\n\r\n\t\t\tif (svgw && svgh) {\r\n\t\t\t\t// setting both w and h makes image stretch to size.\r\n\t\t\t\t// this may distort the image, but fits your demanded size\r\n\t\t\t\tif (w && h) {\r\n\t\t\t\t\tscale = [w / svgw, h / svgh]\r\n\t\t\t\t}\r\n\t\t\t\t// if only one is set, that value is set as max and SVG \r\n\t\t\t\t// is scaled proportionately.\r\n\t\t\t\telse if (w) {\r\n\t\t\t\t\tscale = [w / svgw, w / svgw]\r\n\t\t\t\t} else if (h) {\r\n\t\t\t\t\tscale = [h / svgh, h / svgh]\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar i, l, tmp\r\n\t\t\t\t, linesargs\r\n\t\t\t\t, items = svgnode.childNodes\r\n\t\t\tfor (i = 0, l = items.length; i < l; i++) {\r\n\t\t\t\ttmp = items[i]\r\n\t\t\t\tif (tmp.tagName && tmp.tagName.toUpperCase() === 'PATH') {\r\n\t\t\t\t\tlinesargs = convertPathToPDFLinesArgs(tmp.getAttribute(\"d\").split(' '))\r\n\t\t\t\t\t// path start x coordinate\r\n\t\t\t\t\tlinesargs[0] = linesargs[0] * scale[0] + x // where x is upper left X of image\r\n\t\t\t\t\t// path start y coordinate\r\n\t\t\t\t\tlinesargs[1] = linesargs[1] * scale[1] + y // where y is upper left Y of image\r\n\t\t\t\t\t// the rest of lines are vectors. these will adjust with scale value auto.\r\n\t\t\t\t\tthis.lines.call(\r\n\t\t\t\t\t\tthis\r\n\t\t\t\t\t\t, linesargs[2] // lines\r\n\t\t\t\t\t\t, linesargs[0] // starting x\r\n\t\t\t\t\t\t, linesargs[1] // starting y\r\n\t\t\t\t\t\t, scale\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// clean up\r\n\t\t\t// workernode.parentNode.removeChild(workernode)\r\n\r\n\t\t\treturn this\r\n\t\t}\r\n\r\n\t})(jsPDF.API)\r\n\r\n\r\n\r\n\r\n\r\n/*global jsPDF */\r\n\r\n//FILE jspdf_output\r\n\r\n\r\n/** ====================================================================\r\n * jsPDF IE Below 9 Shim plugin 0.1.0\r\n * Known to be compatible with jsPDF 0.9.0\r\n *\r\n * Copyright (c) 2013 James Hall, james@snapshotmedia.co.uk\r\n *\r\n * Permission is hereby granted, free of charge, to any person obtaining\r\n * a copy of this software and associated documentation files (the\r\n * \"Software\"), to deal in the Software without restriction, including\r\n * without limitation the rights to use, copy, modify, merge, publish,\r\n * distribute, sublicense, and/or sell copies of the Software, and to\r\n * permit persons to whom the Software is furnished to do so, subject to\r\n * the following conditions:\r\n *\r\n * The above copyright notice and this permission notice shall be\r\n * included in all copies or substantial portions of the Software.\r\n *\r\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\r\n * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\r\n * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\r\n * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE\r\n * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\r\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\r\n * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n * ====================================================================\r\n */\r\n\r\n\r\n\t; (function (API) {\r\n\t\t'use strict'\r\n\r\n\t\tvar name = 'jsPDF IE Below 9 Shim plugin';\r\n\t\t// Shim in IE6-9 support\r\n\t\tAPI.output = function (type, options) {\r\n\r\n\t\t\t// If not IE then return early\r\n\t\t\treturn this.internal.output(type, options);\r\n\r\n\t\t\t/*var filename = 'Output.pdf';\r\n\t\t\tswitch (type) {\r\n\t\t\t\tcase 'datauristring':\r\n\t\t\t\tcase 'dataurlstring':\r\n\t\t\t\tcase 'datauri':\r\n\t\t\t\tcase 'dataurl':\r\n\t\t\t\tcase 'dataurlnewwindow':\r\n\t\t\t\t\tconsole.log(name + ': Data URIs are not supported on IE6-9.');\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'save':\r\n\t\t\t\t\tfilename = options;\r\n\t\t\t\t\tbreak;\r\n\t\t\t}*/\r\n\r\n\t\t\t// @TODO: IE shim \r\n\r\n\r\n\t\t};\r\n\r\n\r\n\r\n\t})(jsPDF.API)\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\t/* FileSaver.js\r\n\t * A saveAs() FileSaver implementation.\r\n\t * 2013-01-23\r\n\t * \r\n\t * By Eli Grey, http://eligrey.com\r\n\t * License: X11/MIT\r\n\t *   See LICENSE.md\r\n\t */\r\n\r\n\t/*global self */\r\n\t/*jslint bitwise: true, regexp: true, confusion: true, es5: true, vars: true, white: true,\r\n\t  plusplus: true */\r\n\r\n\t/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */\r\n\t\r\n\tif (typeof window != \"undefined\"){\r\n\t\t\r\n\tvar saveAs = saveAs\r\n\t\t//|| (navigator.msSaveBlob && navigator.msSaveBlob.bind(navigator))\r\n\t\t|| (function (view) {\r\n\t\t\t\r\n\t\t\tvar\r\n\t\t\t\tdoc = view.document\r\n\t\t\t\t// only get URL when necessary in case BlobBuilder.js hasn't overridden it yet\r\n\t\t\t\t, get_URL = function () {\r\n\t\t\t\t\treturn view.URL || view.webkitURL || view;\r\n\t\t\t\t}\r\n\t\t\t\t, URL = view.URL || view.webkitURL || view\r\n\t\t\t\t, save_link = doc.createElementNS(\"http://www.w3.org/1999/xhtml\", \"a\")\r\n\t\t\t\t, can_use_save_link = \"download\" in save_link\r\n\t\t\t\t, click = function (node) {\r\n\t\t\t\t\tvar event = doc.createEvent(\"MouseEvents\");\r\n\t\t\t\t\tevent.initMouseEvent(\r\n\t\t\t\t\t\t\"click\", true, false, view, 0, 0, 0, 0, 0\r\n\t\t\t\t\t\t, false, false, false, false, 0, null\r\n\t\t\t\t\t);\r\n\t\t\t\t\treturn node.dispatchEvent(event); // false if event was cancelled\r\n\t\t\t\t}\r\n\t\t\t\t, webkit_req_fs = view.webkitRequestFileSystem\r\n\t\t\t\t, req_fs = view.requestFileSystem || webkit_req_fs || view.mozRequestFileSystem\r\n\t\t\t\t, throw_outside = function (ex) {\r\n\t\t\t\t\t(view.setImmediate || view.setTimeout)(function () {\r\n\t\t\t\t\t\tthrow ex;\r\n\t\t\t\t\t}, 0);\r\n\t\t\t\t}\r\n\t\t\t\t, force_saveable_type = \"application/octet-stream\"\r\n\t\t\t\t, fs_min_size = 0\r\n\t\t\t\t, deletion_queue = []\r\n\t\t\t\t, process_deletion_queue = function () {\r\n\t\t\t\t\tvar i = deletion_queue.length;\r\n\t\t\t\t\twhile (i--) {\r\n\t\t\t\t\t\tvar file = deletion_queue[i];\r\n\t\t\t\t\t\tif (typeof file === \"string\") { // file is an object URL\r\n\t\t\t\t\t\t\tURL.revokeObjectURL(file);\r\n\t\t\t\t\t\t} else { // file is a File\r\n\t\t\t\t\t\t\tfile.remove();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdeletion_queue.length = 0; // clear queue\r\n\t\t\t\t}\r\n\t\t\t\t, dispatch = function (filesaver, event_types, event) {\r\n\t\t\t\t\tevent_types = [].concat(event_types);\r\n\t\t\t\t\tvar i = event_types.length;\r\n\t\t\t\t\twhile (i--) {\r\n\t\t\t\t\t\tvar listener = filesaver[\"on\" + event_types[i]];\r\n\t\t\t\t\t\tif (typeof listener === \"function\") {\r\n\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\tlistener.call(filesaver, event || filesaver);\r\n\t\t\t\t\t\t\t} catch (ex) {\r\n\t\t\t\t\t\t\t\tthrow_outside(ex);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t, FileSaver = function (blob, name) {\r\n\t\t\t\t\t// First try a.download, then web filesystem, then object URLs\r\n\t\t\t\t\tvar\r\n\t\t\t\t\t\tfilesaver = this\r\n\t\t\t\t\t\t, type = blob.type\r\n\t\t\t\t\t\t, blob_changed = false\r\n\t\t\t\t\t\t, object_url\r\n\t\t\t\t\t\t, target_view\r\n\t\t\t\t\t\t, get_object_url = function () {\r\n\t\t\t\t\t\t\tvar object_url = get_URL().createObjectURL(blob);\r\n\t\t\t\t\t\t\tdeletion_queue.push(object_url);\r\n\t\t\t\t\t\t\treturn object_url;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t, dispatch_all = function () {\r\n\t\t\t\t\t\t\tdispatch(filesaver, \"writestart progress write writeend\".split(\" \"));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// on any filesys errors revert to saving with object URLs\r\n\t\t\t\t\t\t, fs_error = function () {\r\n\t\t\t\t\t\t\t// don't create more object URLs than needed\r\n\t\t\t\t\t\t\tif (blob_changed || !object_url) {\r\n\t\t\t\t\t\t\t\tobject_url = get_object_url(blob);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (target_view) {\r\n\t\t\t\t\t\t\t\ttarget_view.location.href = object_url;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tfilesaver.readyState = filesaver.DONE;\r\n\t\t\t\t\t\t\tdispatch_all();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t, abortable = function (func) {\r\n\t\t\t\t\t\t\treturn function () {\r\n\t\t\t\t\t\t\t\tif (filesaver.readyState !== filesaver.DONE) {\r\n\t\t\t\t\t\t\t\t\treturn func.apply(this, arguments);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t, create_if_not_found = { create: true, exclusive: false }\r\n\t\t\t\t\t\t, slice\r\n\t\t\t\t\t\t;\r\n\t\t\t\t\tfilesaver.readyState = filesaver.INIT;\r\n\t\t\t\t\tif (!name) {\r\n\t\t\t\t\t\tname = \"download\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (can_use_save_link) {\r\n\t\t\t\t\t\tobject_url = get_object_url(blob);\r\n\t\t\t\t\t\tsave_link.href = object_url;\r\n\t\t\t\t\t\tsave_link.download = name;\r\n\t\t\t\t\t\tif (click(save_link)) {\r\n\t\t\t\t\t\t\tfilesaver.readyState = filesaver.DONE;\r\n\t\t\t\t\t\t\tdispatch_all();\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// Object and web filesystem URLs have a problem saving in Google Chrome when\r\n\t\t\t\t\t// viewed in a tab, so I force save with application/octet-stream\r\n\t\t\t\t\t// http://code.google.com/p/chromium/issues/detail?id=91158\r\n\t\t\t\t\tif (view.chrome && type && type !== force_saveable_type) {\r\n\t\t\t\t\t\tslice = blob.slice || blob.webkitSlice;\r\n\t\t\t\t\t\tblob = slice.call(blob, 0, blob.size, force_saveable_type);\r\n\t\t\t\t\t\tblob_changed = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// Since I can't be sure that the guessed media type will trigger a download\r\n\t\t\t\t\t// in WebKit, I append .download to the filename.\r\n\t\t\t\t\t// https://bugs.webkit.org/show_bug.cgi?id=65440\r\n\t\t\t\t\tif (webkit_req_fs && name !== \"download\") {\r\n\t\t\t\t\t\tname += \".download\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (type === force_saveable_type || webkit_req_fs) {\r\n\t\t\t\t\t\ttarget_view = view;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t//\ttarget_view = view.open();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!req_fs) {\r\n\t\t\t\t\t\tfs_error();\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfs_min_size += blob.size;\r\n\t\t\t\t\treq_fs(view.TEMPORARY, fs_min_size, abortable(function (fs) {\r\n\t\t\t\t\t\tfs.root.getDirectory(\"saved\", create_if_not_found, abortable(function (dir) {\r\n\t\t\t\t\t\t\tvar save = function () {\r\n\t\t\t\t\t\t\t\tdir.getFile(name, create_if_not_found, abortable(function (file) {\r\n\t\t\t\t\t\t\t\t\tfile.createWriter(abortable(function (writer) {\r\n\t\t\t\t\t\t\t\t\t\twriter.onwriteend = function (event) {\r\n\t\t\t\t\t\t\t\t\t\t\ttarget_view.location.href = file.toURL();\r\n\t\t\t\t\t\t\t\t\t\t\tdeletion_queue.push(file);\r\n\t\t\t\t\t\t\t\t\t\t\tfilesaver.readyState = filesaver.DONE;\r\n\t\t\t\t\t\t\t\t\t\t\tdispatch(filesaver, \"writeend\", event);\r\n\t\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t\t\twriter.onerror = function () {\r\n\t\t\t\t\t\t\t\t\t\t\tvar error = writer.error;\r\n\t\t\t\t\t\t\t\t\t\t\tif (error.code !== error.ABORT_ERR) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tfs_error();\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t\t\t\"writestart progress write abort\".split(\" \").forEach(function (event) {\r\n\t\t\t\t\t\t\t\t\t\t\twriter[\"on\" + event] = filesaver[\"on\" + event];\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\twriter.write(blob);\r\n\t\t\t\t\t\t\t\t\t\tfilesaver.abort = function () {\r\n\t\t\t\t\t\t\t\t\t\t\twriter.abort();\r\n\t\t\t\t\t\t\t\t\t\t\tfilesaver.readyState = filesaver.DONE;\r\n\t\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t\t\tfilesaver.readyState = filesaver.WRITING;\r\n\t\t\t\t\t\t\t\t\t}), fs_error);\r\n\t\t\t\t\t\t\t\t}), fs_error);\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\tdir.getFile(name, { create: false }, abortable(function (file) {\r\n\t\t\t\t\t\t\t\t// delete file if it already exists\r\n\t\t\t\t\t\t\t\tfile.remove();\r\n\t\t\t\t\t\t\t\tsave();\r\n\t\t\t\t\t\t\t}), abortable(function (ex) {\r\n\t\t\t\t\t\t\t\tif (ex.code === ex.NOT_FOUND_ERR) {\r\n\t\t\t\t\t\t\t\t\tsave();\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tfs_error();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}));\r\n\t\t\t\t\t\t}), fs_error);\r\n\t\t\t\t\t}), fs_error);\r\n\t\t\t\t}\r\n\t\t\t\t, FS_proto = FileSaver.prototype\r\n\t\t\t\t, saveAs = function (blob, name) {\r\n\t\t\t\t\treturn new FileSaver(blob, name);\r\n\t\t\t\t}\r\n\t\t\t\t;\r\n\t\t\tFS_proto.abort = function () {\r\n\t\t\t\tvar filesaver = this;\r\n\t\t\t\tfilesaver.readyState = filesaver.DONE;\r\n\t\t\t\tdispatch(filesaver, \"abort\");\r\n\t\t\t};\r\n\t\t\tFS_proto.readyState = FS_proto.INIT = 0;\r\n\t\t\tFS_proto.WRITING = 1;\r\n\t\t\tFS_proto.DONE = 2;\r\n\r\n\t\t\tFS_proto.error =\r\n\t\t\t\tFS_proto.onwritestart =\r\n\t\t\t\tFS_proto.onprogress =\r\n\t\t\t\tFS_proto.onwrite =\r\n\t\t\t\tFS_proto.onabort =\r\n\t\t\t\tFS_proto.onerror =\r\n\t\t\t\tFS_proto.onwriteend =\r\n\t\t\t\tnull;\r\n\r\n\t\t\tview.addEventListener(\"unload\", process_deletion_queue, false);\r\n\t\t\treturn saveAs;\r\n\t\t}(this));\r\n\r\n\t}\r\n\r\n\t/*\r\n\t Copyright (c) 2013 Gildas Lormeau. All rights reserved.\r\n\t\r\n\t Redistribution and use in source and binary forms, with or without\r\n\t modification, are permitted provided that the following conditions are met:\r\n\t\r\n\t 1. Redistributions of source code must retain the above copyright notice,\r\n\t this list of conditions and the following disclaimer.\r\n\t\r\n\t 2. Redistributions in binary form must reproduce the above copyright \r\n\t notice, this list of conditions and the following disclaimer in \r\n\t the documentation and/or other materials provided with the distribution.\r\n\t\r\n\t 3. The names of the authors may not be used to endorse or promote products\r\n\t derived from this software without specific prior written permission.\r\n\t\r\n\t THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED WARRANTIES,\r\n\t INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\r\n\t FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL JCRAFT,\r\n\t INC. OR ANY CONTRIBUTORS TO THIS SOFTWARE BE LIABLE FOR ANY DIRECT, INDIRECT,\r\n\t INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\r\n\t LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA,\r\n\t OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF\r\n\t LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\r\n\t NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,\r\n\t EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n\t */\r\n\r\n\t/*\r\n\t * This program is based on JZlib 1.0.2 ymnk, JCraft,Inc.\r\n\t * JZlib is based on zlib-1.1.3, so all credit should go authors\r\n\t * Jean-loup Gailly(jloup@gzip.org) and Mark Adler(madler@alumni.caltech.edu)\r\n\t * and contributors of zlib.\r\n\t */\r\n\r\n\t// Global\r\n\r\n\tvar MAX_BITS = 15;\r\n\tvar D_CODES = 30;\r\n\tvar BL_CODES = 19;\r\n\r\n\tvar LENGTH_CODES = 29;\r\n\tvar LITERALS = 256;\r\n\tvar L_CODES = (LITERALS + 1 + LENGTH_CODES);\r\n\tvar HEAP_SIZE = (2 * L_CODES + 1);\r\n\r\n\tvar END_BLOCK = 256;\r\n\r\n\t// Bit length codes must not exceed MAX_BL_BITS bits\r\n\tvar MAX_BL_BITS = 7;\r\n\r\n\t// repeat previous bit length 3-6 times (2 bits of repeat count)\r\n\tvar REP_3_6 = 16;\r\n\r\n\t// repeat a zero length 3-10 times (3 bits of repeat count)\r\n\tvar REPZ_3_10 = 17;\r\n\r\n\t// repeat a zero length 11-138 times (7 bits of repeat count)\r\n\tvar REPZ_11_138 = 18;\r\n\r\n\t// The lengths of the bit length codes are sent in order of decreasing\r\n\t// probability, to avoid transmitting the lengths for unused bit\r\n\t// length codes.\r\n\r\n\tvar Buf_size = 8 * 2;\r\n\r\n\t// JZlib version : \"1.0.2\"\r\n\tvar Z_DEFAULT_COMPRESSION = -1;\r\n\r\n\t// compression strategy\r\n\tvar Z_FILTERED = 1;\r\n\tvar Z_HUFFMAN_ONLY = 2;\r\n\tvar Z_DEFAULT_STRATEGY = 0;\r\n\r\n\tvar Z_NO_FLUSH = 0;\r\n\tvar Z_PARTIAL_FLUSH = 1;\r\n\tvar Z_FULL_FLUSH = 3;\r\n\tvar Z_FINISH = 4;\r\n\r\n\tvar Z_OK = 0;\r\n\tvar Z_STREAM_END = 1;\r\n\tvar Z_NEED_DICT = 2;\r\n\tvar Z_STREAM_ERROR = -2;\r\n\tvar Z_DATA_ERROR = -3;\r\n\tvar Z_BUF_ERROR = -5;\r\n\r\n\t// Tree\r\n\r\n\t// see definition of array dist_code below\r\n\tvar _dist_code = [0, 1, 2, 3, 4, 4, 5, 5, 6, 6, 6, 6, 7, 7, 7, 7, 8, 8, 8, 8, 8, 8, 8, 8, 9, 9, 9, 9, 9, 9, 9, 9, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10,\r\n\t\t10, 10, 10, 10, 10, 10, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12,\r\n\t\t12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13,\r\n\t\t13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14,\r\n\t\t14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14,\r\n\t\t14, 14, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15,\r\n\t\t15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 0, 0, 16, 17, 18, 18, 19, 19,\r\n\t\t20, 20, 20, 20, 21, 21, 21, 21, 22, 22, 22, 22, 22, 22, 22, 22, 23, 23, 23, 23, 23, 23, 23, 23, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,\r\n\t\t24, 24, 24, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26,\r\n\t\t26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27,\r\n\t\t27, 27, 27, 27, 27, 27, 27, 27, 27, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28,\r\n\t\t28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 29,\r\n\t\t29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29,\r\n\t\t29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29];\r\n\r\n\tfunction Tree() {\r\n\t\t'use strict';\r\n\t\tvar that = this;\r\n\r\n\t\t// dyn_tree; // the dynamic tree\r\n\t\t// max_code; // largest code with non zero frequency\r\n\t\t// stat_desc; // the corresponding static tree\r\n\r\n\t\t// Compute the optimal bit lengths for a tree and update the total bit\r\n\t\t// length\r\n\t\t// for the current block.\r\n\t\t// IN assertion: the fields freq and dad are set, heap[heap_max] and\r\n\t\t// above are the tree nodes sorted by increasing frequency.\r\n\t\t// OUT assertions: the field len is set to the optimal bit length, the\r\n\t\t// array bl_count contains the frequencies for each bit length.\r\n\t\t// The length opt_len is updated; static_len is also updated if stree is\r\n\t\t// not null.\r\n\t\tfunction gen_bitlen(s) {\r\n\t\t\tvar tree = that.dyn_tree;\r\n\t\t\tvar stree = that.stat_desc.static_tree;\r\n\t\t\tvar extra = that.stat_desc.extra_bits;\r\n\t\t\tvar base = that.stat_desc.extra_base;\r\n\t\t\tvar max_length = that.stat_desc.max_length;\r\n\t\t\tvar h; // heap index\r\n\t\t\tvar n, m; // iterate over the tree elements\r\n\t\t\tvar bits; // bit length\r\n\t\t\tvar xbits; // extra bits\r\n\t\t\tvar f; // frequency\r\n\t\t\tvar overflow = 0; // number of elements with bit length too large\r\n\r\n\t\t\tfor (bits = 0; bits <= MAX_BITS; bits++)\r\n\t\t\t\ts.bl_count[bits] = 0;\r\n\r\n\t\t\t// In a first pass, compute the optimal bit lengths (which may\r\n\t\t\t// overflow in the case of the bit length tree).\r\n\t\t\ttree[s.heap[s.heap_max] * 2 + 1] = 0; // root of the heap\r\n\r\n\t\t\tfor (h = s.heap_max + 1; h < HEAP_SIZE; h++) {\r\n\t\t\t\tn = s.heap[h];\r\n\t\t\t\tbits = tree[tree[n * 2 + 1] * 2 + 1] + 1;\r\n\t\t\t\tif (bits > max_length) {\r\n\t\t\t\t\tbits = max_length;\r\n\t\t\t\t\toverflow++;\r\n\t\t\t\t}\r\n\t\t\t\ttree[n * 2 + 1] = bits;\r\n\t\t\t\t// We overwrite tree[n*2+1] which is no longer needed\r\n\r\n\t\t\t\tif (n > that.max_code)\r\n\t\t\t\t\tcontinue; // not a leaf node\r\n\r\n\t\t\t\ts.bl_count[bits]++;\r\n\t\t\t\txbits = 0;\r\n\t\t\t\tif (n >= base)\r\n\t\t\t\t\txbits = extra[n - base];\r\n\t\t\t\tf = tree[n * 2];\r\n\t\t\t\ts.opt_len += f * (bits + xbits);\r\n\t\t\t\tif (stree)\r\n\t\t\t\t\ts.static_len += f * (stree[n * 2 + 1] + xbits);\r\n\t\t\t}\r\n\t\t\tif (overflow === 0)\r\n\t\t\t\treturn;\r\n\r\n\t\t\t// This happens for example on obj2 and pic of the Calgary corpus\r\n\t\t\t// Find the first bit length which could increase:\r\n\t\t\tdo {\r\n\t\t\t\tbits = max_length - 1;\r\n\t\t\t\twhile (s.bl_count[bits] === 0)\r\n\t\t\t\t\tbits--;\r\n\t\t\t\ts.bl_count[bits]--; // move one leaf down the tree\r\n\t\t\t\ts.bl_count[bits + 1] += 2; // move one overflow item as its brother\r\n\t\t\t\ts.bl_count[max_length]--;\r\n\t\t\t\t// The brother of the overflow item also moves one step up,\r\n\t\t\t\t// but this does not affect bl_count[max_length]\r\n\t\t\t\toverflow -= 2;\r\n\t\t\t} while (overflow > 0);\r\n\r\n\t\t\tfor (bits = max_length; bits !== 0; bits--) {\r\n\t\t\t\tn = s.bl_count[bits];\r\n\t\t\t\twhile (n !== 0) {\r\n\t\t\t\t\tm = s.heap[--h];\r\n\t\t\t\t\tif (m > that.max_code)\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\tif (tree[m * 2 + 1] != bits) {\r\n\t\t\t\t\t\ts.opt_len += (bits - tree[m * 2 + 1]) * tree[m * 2];\r\n\t\t\t\t\t\ttree[m * 2 + 1] = bits;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tn--;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Reverse the first len bits of a code, using straightforward code (a\r\n\t\t// faster\r\n\t\t// method would use a table)\r\n\t\t// IN assertion: 1 <= len <= 15\r\n\t\tfunction bi_reverse(code, // the value to invert\r\n\t\t\tlen // its bit length\r\n\t\t) {\r\n\t\t\tvar res = 0;\r\n\t\t\tdo {\r\n\t\t\t\tres |= code & 1;\r\n\t\t\t\tcode >>>= 1;\r\n\t\t\t\tres <<= 1;\r\n\t\t\t} while (--len > 0);\r\n\t\t\treturn res >>> 1;\r\n\t\t}\r\n\r\n\t\t// Generate the codes for a given tree and bit counts (which need not be\r\n\t\t// optimal).\r\n\t\t// IN assertion: the array bl_count contains the bit length statistics for\r\n\t\t// the given tree and the field len is set for all tree elements.\r\n\t\t// OUT assertion: the field code is set for all tree elements of non\r\n\t\t// zero code length.\r\n\t\tfunction gen_codes(tree, // the tree to decorate\r\n\t\t\tmax_code, // largest code with non zero frequency\r\n\t\t\tbl_count // number of codes at each bit length\r\n\t\t) {\r\n\t\t\tvar next_code = []; // next code value for each\r\n\t\t\t// bit length\r\n\t\t\tvar code = 0; // running code value\r\n\t\t\tvar bits; // bit index\r\n\t\t\tvar n; // code index\r\n\t\t\tvar len;\r\n\r\n\t\t\t// The distribution counts are first used to generate the code values\r\n\t\t\t// without bit reversal.\r\n\t\t\tfor (bits = 1; bits <= MAX_BITS; bits++) {\r\n\t\t\t\tnext_code[bits] = code = ((code + bl_count[bits - 1]) << 1);\r\n\t\t\t}\r\n\r\n\t\t\t// Check that the bit counts in bl_count are consistent. The last code\r\n\t\t\t// must be all ones.\r\n\t\t\t// Assert (code + bl_count[MAX_BITS]-1 == (1<<MAX_BITS)-1,\r\n\t\t\t// \"inconsistent bit counts\");\r\n\t\t\t// Tracev((stderr,\"\\ngen_codes: max_code %d \", max_code));\r\n\r\n\t\t\tfor (n = 0; n <= max_code; n++) {\r\n\t\t\t\tlen = tree[n * 2 + 1];\r\n\t\t\t\tif (len === 0)\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t// Now reverse the bits\r\n\t\t\t\ttree[n * 2] = bi_reverse(next_code[len]++, len);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Construct one Huffman tree and assigns the code bit strings and lengths.\r\n\t\t// Update the total bit length for the current block.\r\n\t\t// IN assertion: the field freq is set for all tree elements.\r\n\t\t// OUT assertions: the fields len and code are set to the optimal bit length\r\n\t\t// and corresponding code. The length opt_len is updated; static_len is\r\n\t\t// also updated if stree is not null. The field max_code is set.\r\n\t\tthat.build_tree = function (s) {\r\n\t\t\tvar tree = that.dyn_tree;\r\n\t\t\tvar stree = that.stat_desc.static_tree;\r\n\t\t\tvar elems = that.stat_desc.elems;\r\n\t\t\tvar n, m; // iterate over heap elements\r\n\t\t\tvar max_code = -1; // largest code with non zero frequency\r\n\t\t\tvar node; // new node being created\r\n\r\n\t\t\t// Construct the initial heap, with least frequent element in\r\n\t\t\t// heap[1]. The sons of heap[n] are heap[2*n] and heap[2*n+1].\r\n\t\t\t// heap[0] is not used.\r\n\t\t\ts.heap_len = 0;\r\n\t\t\ts.heap_max = HEAP_SIZE;\r\n\r\n\t\t\tfor (n = 0; n < elems; n++) {\r\n\t\t\t\tif (tree[n * 2] !== 0) {\r\n\t\t\t\t\ts.heap[++s.heap_len] = max_code = n;\r\n\t\t\t\t\ts.depth[n] = 0;\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttree[n * 2 + 1] = 0;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// The pkzip format requires that at least one distance code exists,\r\n\t\t\t// and that at least one bit should be sent even if there is only one\r\n\t\t\t// possible code. So to avoid special checks later on we force at least\r\n\t\t\t// two codes of non zero frequency.\r\n\t\t\twhile (s.heap_len < 2) {\r\n\t\t\t\tnode = s.heap[++s.heap_len] = max_code < 2 ? ++max_code : 0;\r\n\t\t\t\ttree[node * 2] = 1;\r\n\t\t\t\ts.depth[node] = 0;\r\n\t\t\t\ts.opt_len--;\r\n\t\t\t\tif (stree)\r\n\t\t\t\t\ts.static_len -= stree[node * 2 + 1];\r\n\t\t\t\t// node is 0 or 1 so it does not have extra bits\r\n\t\t\t}\r\n\t\t\tthat.max_code = max_code;\r\n\r\n\t\t\t// The elements heap[heap_len/2+1 .. heap_len] are leaves of the tree,\r\n\t\t\t// establish sub-heaps of increasing lengths:\r\n\r\n\t\t\tfor (n = Math.floor(s.heap_len / 2); n >= 1; n--)\r\n\t\t\t\ts.pqdownheap(tree, n);\r\n\r\n\t\t\t// Construct the Huffman tree by repeatedly combining the least two\r\n\t\t\t// frequent nodes.\r\n\r\n\t\t\tnode = elems; // next internal node of the tree\r\n\t\t\tdo {\r\n\t\t\t\t// n = node of least frequency\r\n\t\t\t\tn = s.heap[1];\r\n\t\t\t\ts.heap[1] = s.heap[s.heap_len--];\r\n\t\t\t\ts.pqdownheap(tree, 1);\r\n\t\t\t\tm = s.heap[1]; // m = node of next least frequency\r\n\r\n\t\t\t\ts.heap[--s.heap_max] = n; // keep the nodes sorted by frequency\r\n\t\t\t\ts.heap[--s.heap_max] = m;\r\n\r\n\t\t\t\t// Create a new node father of n and m\r\n\t\t\t\ttree[node * 2] = (tree[n * 2] + tree[m * 2]);\r\n\t\t\t\ts.depth[node] = Math.max(s.depth[n], s.depth[m]) + 1;\r\n\t\t\t\ttree[n * 2 + 1] = tree[m * 2 + 1] = node;\r\n\r\n\t\t\t\t// and insert the new node in the heap\r\n\t\t\t\ts.heap[1] = node++;\r\n\t\t\t\ts.pqdownheap(tree, 1);\r\n\t\t\t} while (s.heap_len >= 2);\r\n\r\n\t\t\ts.heap[--s.heap_max] = s.heap[1];\r\n\r\n\t\t\t// At this point, the fields freq and dad are set. We can now\r\n\t\t\t// generate the bit lengths.\r\n\r\n\t\t\tgen_bitlen(s);\r\n\r\n\t\t\t// The field len is now set, we can generate the bit codes\r\n\t\t\tgen_codes(tree, that.max_code, s.bl_count);\r\n\t\t};\r\n\r\n\t}\r\n\r\n\tTree._length_code = [0, 1, 2, 3, 4, 5, 6, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 12, 12, 13, 13, 13, 13, 14, 14, 14, 14, 15, 15, 15, 15, 16, 16, 16, 16,\r\n\t\t16, 16, 16, 16, 17, 17, 17, 17, 17, 17, 17, 17, 18, 18, 18, 18, 18, 18, 18, 18, 19, 19, 19, 19, 19, 19, 19, 19, 20, 20, 20, 20, 20, 20, 20, 20, 20,\r\n\t\t20, 20, 20, 20, 20, 20, 20, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22,\r\n\t\t22, 22, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,\r\n\t\t24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25,\r\n\t\t25, 25, 25, 25, 25, 25, 25, 25, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26,\r\n\t\t26, 26, 26, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 28];\r\n\r\n\tTree.base_length = [0, 1, 2, 3, 4, 5, 6, 7, 8, 10, 12, 14, 16, 20, 24, 28, 32, 40, 48, 56, 64, 80, 96, 112, 128, 160, 192, 224, 0];\r\n\r\n\tTree.base_dist = [0, 1, 2, 3, 4, 6, 8, 12, 16, 24, 32, 48, 64, 96, 128, 192, 256, 384, 512, 768, 1024, 1536, 2048, 3072, 4096, 6144, 8192, 12288, 16384,\r\n\t\t24576];\r\n\r\n\t// Mapping from a distance to a distance code. dist is the distance - 1 and\r\n\t// must not have side effects. _dist_code[256] and _dist_code[257] are never\r\n\t// used.\r\n\tTree.d_code = function (dist) {\r\n\t\treturn ((dist) < 256 ? _dist_code[dist] : _dist_code[256 + ((dist) >>> 7)]);\r\n\t};\r\n\r\n\t// extra bits for each length code\r\n\tTree.extra_lbits = [0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0];\r\n\r\n\t// extra bits for each distance code\r\n\tTree.extra_dbits = [0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13];\r\n\r\n\t// extra bits for each bit length code\r\n\tTree.extra_blbits = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 3, 7];\r\n\r\n\tTree.bl_order = [16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15];\r\n\r\n\t// StaticTree\r\n\r\n\tfunction StaticTree(static_tree, extra_bits, extra_base, elems, max_length) {\r\n\t\tvar that = this;\r\n\t\tthat.static_tree = static_tree;\r\n\t\tthat.extra_bits = extra_bits;\r\n\t\tthat.extra_base = extra_base;\r\n\t\tthat.elems = elems;\r\n\t\tthat.max_length = max_length;\r\n\t}\r\n\r\n\tStaticTree.static_ltree = [12, 8, 140, 8, 76, 8, 204, 8, 44, 8, 172, 8, 108, 8, 236, 8, 28, 8, 156, 8, 92, 8, 220, 8, 60, 8, 188, 8, 124, 8, 252, 8, 2, 8,\r\n\t\t130, 8, 66, 8, 194, 8, 34, 8, 162, 8, 98, 8, 226, 8, 18, 8, 146, 8, 82, 8, 210, 8, 50, 8, 178, 8, 114, 8, 242, 8, 10, 8, 138, 8, 74, 8, 202, 8, 42,\r\n\t\t8, 170, 8, 106, 8, 234, 8, 26, 8, 154, 8, 90, 8, 218, 8, 58, 8, 186, 8, 122, 8, 250, 8, 6, 8, 134, 8, 70, 8, 198, 8, 38, 8, 166, 8, 102, 8, 230, 8,\r\n\t\t22, 8, 150, 8, 86, 8, 214, 8, 54, 8, 182, 8, 118, 8, 246, 8, 14, 8, 142, 8, 78, 8, 206, 8, 46, 8, 174, 8, 110, 8, 238, 8, 30, 8, 158, 8, 94, 8,\r\n\t\t222, 8, 62, 8, 190, 8, 126, 8, 254, 8, 1, 8, 129, 8, 65, 8, 193, 8, 33, 8, 161, 8, 97, 8, 225, 8, 17, 8, 145, 8, 81, 8, 209, 8, 49, 8, 177, 8, 113,\r\n\t\t8, 241, 8, 9, 8, 137, 8, 73, 8, 201, 8, 41, 8, 169, 8, 105, 8, 233, 8, 25, 8, 153, 8, 89, 8, 217, 8, 57, 8, 185, 8, 121, 8, 249, 8, 5, 8, 133, 8,\r\n\t\t69, 8, 197, 8, 37, 8, 165, 8, 101, 8, 229, 8, 21, 8, 149, 8, 85, 8, 213, 8, 53, 8, 181, 8, 117, 8, 245, 8, 13, 8, 141, 8, 77, 8, 205, 8, 45, 8,\r\n\t\t173, 8, 109, 8, 237, 8, 29, 8, 157, 8, 93, 8, 221, 8, 61, 8, 189, 8, 125, 8, 253, 8, 19, 9, 275, 9, 147, 9, 403, 9, 83, 9, 339, 9, 211, 9, 467, 9,\r\n\t\t51, 9, 307, 9, 179, 9, 435, 9, 115, 9, 371, 9, 243, 9, 499, 9, 11, 9, 267, 9, 139, 9, 395, 9, 75, 9, 331, 9, 203, 9, 459, 9, 43, 9, 299, 9, 171, 9,\r\n\t\t427, 9, 107, 9, 363, 9, 235, 9, 491, 9, 27, 9, 283, 9, 155, 9, 411, 9, 91, 9, 347, 9, 219, 9, 475, 9, 59, 9, 315, 9, 187, 9, 443, 9, 123, 9, 379,\r\n\t\t9, 251, 9, 507, 9, 7, 9, 263, 9, 135, 9, 391, 9, 71, 9, 327, 9, 199, 9, 455, 9, 39, 9, 295, 9, 167, 9, 423, 9, 103, 9, 359, 9, 231, 9, 487, 9, 23,\r\n\t\t9, 279, 9, 151, 9, 407, 9, 87, 9, 343, 9, 215, 9, 471, 9, 55, 9, 311, 9, 183, 9, 439, 9, 119, 9, 375, 9, 247, 9, 503, 9, 15, 9, 271, 9, 143, 9,\r\n\t\t399, 9, 79, 9, 335, 9, 207, 9, 463, 9, 47, 9, 303, 9, 175, 9, 431, 9, 111, 9, 367, 9, 239, 9, 495, 9, 31, 9, 287, 9, 159, 9, 415, 9, 95, 9, 351, 9,\r\n\t\t223, 9, 479, 9, 63, 9, 319, 9, 191, 9, 447, 9, 127, 9, 383, 9, 255, 9, 511, 9, 0, 7, 64, 7, 32, 7, 96, 7, 16, 7, 80, 7, 48, 7, 112, 7, 8, 7, 72, 7,\r\n\t\t40, 7, 104, 7, 24, 7, 88, 7, 56, 7, 120, 7, 4, 7, 68, 7, 36, 7, 100, 7, 20, 7, 84, 7, 52, 7, 116, 7, 3, 8, 131, 8, 67, 8, 195, 8, 35, 8, 163, 8,\r\n\t\t99, 8, 227, 8];\r\n\r\n\tStaticTree.static_dtree = [0, 5, 16, 5, 8, 5, 24, 5, 4, 5, 20, 5, 12, 5, 28, 5, 2, 5, 18, 5, 10, 5, 26, 5, 6, 5, 22, 5, 14, 5, 30, 5, 1, 5, 17, 5, 9, 5,\r\n\t\t25, 5, 5, 5, 21, 5, 13, 5, 29, 5, 3, 5, 19, 5, 11, 5, 27, 5, 7, 5, 23, 5];\r\n\r\n\tStaticTree.static_l_desc = new StaticTree(StaticTree.static_ltree, Tree.extra_lbits, LITERALS + 1, L_CODES, MAX_BITS);\r\n\r\n\tStaticTree.static_d_desc = new StaticTree(StaticTree.static_dtree, Tree.extra_dbits, 0, D_CODES, MAX_BITS);\r\n\r\n\tStaticTree.static_bl_desc = new StaticTree(null, Tree.extra_blbits, 0, BL_CODES, MAX_BL_BITS);\r\n\r\n\t// Deflate\r\n\r\n\tvar MAX_MEM_LEVEL = 9;\r\n\tvar DEF_MEM_LEVEL = 8;\r\n\r\n\tfunction Config(good_length, max_lazy, nice_length, max_chain, func) {\r\n\t\tvar that = this;\r\n\t\tthat.good_length = good_length;\r\n\t\tthat.max_lazy = max_lazy;\r\n\t\tthat.nice_length = nice_length;\r\n\t\tthat.max_chain = max_chain;\r\n\t\tthat.func = func;\r\n\t}\r\n\r\n\tvar STORED = 0;\r\n\tvar FAST = 1;\r\n\tvar SLOW = 2;\r\n\tvar config_table = [new Config(0, 0, 0, 0, STORED), new Config(4, 4, 8, 4, FAST), new Config(4, 5, 16, 8, FAST), new Config(4, 6, 32, 32, FAST),\r\n\tnew Config(4, 4, 16, 16, SLOW), new Config(8, 16, 32, 32, SLOW), new Config(8, 16, 128, 128, SLOW), new Config(8, 32, 128, 256, SLOW),\r\n\tnew Config(32, 128, 258, 1024, SLOW), new Config(32, 258, 258, 4096, SLOW)];\r\n\r\n\tvar z_errmsg = [\"need dictionary\", // Z_NEED_DICT\r\n\t\t// 2\r\n\t\t\"stream end\", // Z_STREAM_END 1\r\n\t\t\"\", // Z_OK 0\r\n\t\t\"\", // Z_ERRNO (-1)\r\n\t\t\"stream error\", // Z_STREAM_ERROR (-2)\r\n\t\t\"data error\", // Z_DATA_ERROR (-3)\r\n\t\t\"\", // Z_MEM_ERROR (-4)\r\n\t\t\"buffer error\", // Z_BUF_ERROR (-5)\r\n\t\t\"\",// Z_VERSION_ERROR (-6)\r\n\t\t\"\"];\r\n\r\n\t// block not completed, need more input or more output\r\n\tvar NeedMore = 0;\r\n\r\n\t// block flush performed\r\n\tvar BlockDone = 1;\r\n\r\n\t// finish started, need only more output at next deflate\r\n\tvar FinishStarted = 2;\r\n\r\n\t// finish done, accept no more input or output\r\n\tvar FinishDone = 3;\r\n\r\n\t// preset dictionary flag in zlib header\r\n\tvar PRESET_DICT = 0x20;\r\n\r\n\tvar INIT_STATE = 42;\r\n\tvar BUSY_STATE = 113;\r\n\tvar FINISH_STATE = 666;\r\n\r\n\t// The deflate compression method\r\n\tvar Z_DEFLATED = 8;\r\n\r\n\tvar STORED_BLOCK = 0;\r\n\tvar STATIC_TREES = 1;\r\n\tvar DYN_TREES = 2;\r\n\r\n\tvar MIN_MATCH = 3;\r\n\tvar MAX_MATCH = 258;\r\n\tvar MIN_LOOKAHEAD = (MAX_MATCH + MIN_MATCH + 1);\r\n\r\n\tfunction smaller(tree, n, m, depth) {\r\n\t\tvar tn2 = tree[n * 2];\r\n\t\tvar tm2 = tree[m * 2];\r\n\t\treturn (tn2 < tm2 || (tn2 == tm2 && depth[n] <= depth[m]));\r\n\t}\r\n\r\n\tfunction Deflate() {\r\n\r\n\t\tvar that = this;\r\n\t\tvar strm; // pointer back to this zlib stream\r\n\t\tvar status; // as the name implies\r\n\t\t// pending_buf; // output still pending\r\n\t\tvar pending_buf_size; // size of pending_buf\r\n\t\t// pending_out; // next pending byte to output to the stream\r\n\t\t// pending; // nb of bytes in the pending buffer\r\n\t\tvar method; // STORED (for zip only) or DEFLATED\r\n\t\tvar last_flush; // value of flush param for previous deflate call\r\n\r\n\t\tvar w_size; // LZ77 window size (32K by default)\r\n\t\tvar w_bits; // log2(w_size) (8..16)\r\n\t\tvar w_mask; // w_size - 1\r\n\r\n\t\tvar window;\r\n\t\t// Sliding window. Input bytes are read into the second half of the window,\r\n\t\t// and move to the first half later to keep a dictionary of at least wSize\r\n\t\t// bytes. With this organization, matches are limited to a distance of\r\n\t\t// wSize-MAX_MATCH bytes, but this ensures that IO is always\r\n\t\t// performed with a length multiple of the block size. Also, it limits\r\n\t\t// the window size to 64K, which is quite useful on MSDOS.\r\n\t\t// To do: use the user input buffer as sliding window.\r\n\r\n\t\tvar window_size;\r\n\t\t// Actual size of window: 2*wSize, except when the user input buffer\r\n\t\t// is directly used as sliding window.\r\n\r\n\t\tvar prev;\r\n\t\t// Link to older string with same hash index. To limit the size of this\r\n\t\t// array to 64K, this link is maintained only for the last 32K strings.\r\n\t\t// An index in this array is thus a window index modulo 32K.\r\n\r\n\t\tvar head; // Heads of the hash chains or NIL.\r\n\r\n\t\tvar ins_h; // hash index of string to be inserted\r\n\t\tvar hash_size; // number of elements in hash table\r\n\t\tvar hash_bits; // log2(hash_size)\r\n\t\tvar hash_mask; // hash_size-1\r\n\r\n\t\t// Number of bits by which ins_h must be shifted at each input\r\n\t\t// step. It must be such that after MIN_MATCH steps, the oldest\r\n\t\t// byte no longer takes part in the hash key, that is:\r\n\t\t// hash_shift * MIN_MATCH >= hash_bits\r\n\t\tvar hash_shift;\r\n\r\n\t\t// Window position at the beginning of the current output block. Gets\r\n\t\t// negative when the window is moved backwards.\r\n\r\n\t\tvar block_start;\r\n\r\n\t\tvar match_length; // length of best match\r\n\t\tvar prev_match; // previous match\r\n\t\tvar match_available; // set if previous match exists\r\n\t\tvar strstart; // start of string to insert\r\n\t\tvar match_start; // start of matching string\r\n\t\tvar lookahead; // number of valid bytes ahead in window\r\n\r\n\t\t// Length of the best match at previous step. Matches not greater than this\r\n\t\t// are discarded. This is used in the lazy match evaluation.\r\n\t\tvar prev_length;\r\n\r\n\t\t// To speed up deflation, hash chains are never searched beyond this\r\n\t\t// length. A higher limit improves compression ratio but degrades the speed.\r\n\t\tvar max_chain_length;\r\n\r\n\t\t// Attempt to find a better match only when the current match is strictly\r\n\t\t// smaller than this value. This mechanism is used only for compression\r\n\t\t// levels >= 4.\r\n\t\tvar max_lazy_match;\r\n\r\n\t\t// Insert new strings in the hash table only if the match length is not\r\n\t\t// greater than this length. This saves time but degrades compression.\r\n\t\t// max_insert_length is used only for compression levels <= 3.\r\n\r\n\t\tvar level; // compression level (1..9)\r\n\t\tvar strategy; // favor or force Huffman coding\r\n\r\n\t\t// Use a faster search when the previous match is longer than this\r\n\t\tvar good_match;\r\n\r\n\t\t// Stop searching when current match exceeds this\r\n\t\tvar nice_match;\r\n\r\n\t\tvar dyn_ltree; // literal and length tree\r\n\t\tvar dyn_dtree; // distance tree\r\n\t\tvar bl_tree; // Huffman tree for bit lengths\r\n\r\n\t\tvar l_desc = new Tree(); // desc for literal tree\r\n\t\tvar d_desc = new Tree(); // desc for distance tree\r\n\t\tvar bl_desc = new Tree(); // desc for bit length tree\r\n\r\n\t\t// that.heap_len; // number of elements in the heap\r\n\t\t// that.heap_max; // element of largest frequency\r\n\t\t// The sons of heap[n] are heap[2*n] and heap[2*n+1]. heap[0] is not used.\r\n\t\t// The same heap array is used to build all trees.\r\n\r\n\t\t// Depth of each subtree used as tie breaker for trees of equal frequency\r\n\t\tthat.depth = [];\r\n\r\n\t\tvar l_buf; // index for literals or lengths */\r\n\r\n\t\t// Size of match buffer for literals/lengths. There are 4 reasons for\r\n\t\t// limiting lit_bufsize to 64K:\r\n\t\t// - frequencies can be kept in 16 bit counters\r\n\t\t// - if compression is not successful for the first block, all input\r\n\t\t// data is still in the window so we can still emit a stored block even\r\n\t\t// when input comes from standard input. (This can also be done for\r\n\t\t// all blocks if lit_bufsize is not greater than 32K.)\r\n\t\t// - if compression is not successful for a file smaller than 64K, we can\r\n\t\t// even emit a stored file instead of a stored block (saving 5 bytes).\r\n\t\t// This is applicable only for zip (not gzip or zlib).\r\n\t\t// - creating new Huffman trees less frequently may not provide fast\r\n\t\t// adaptation to changes in the input data statistics. (Take for\r\n\t\t// example a binary file with poorly compressible code followed by\r\n\t\t// a highly compressible string table.) Smaller buffer sizes give\r\n\t\t// fast adaptation but have of course the overhead of transmitting\r\n\t\t// trees more frequently.\r\n\t\t// - I can't count above 4\r\n\t\tvar lit_bufsize;\r\n\r\n\t\tvar last_lit; // running index in l_buf\r\n\r\n\t\t// Buffer for distances. To simplify the code, d_buf and l_buf have\r\n\t\t// the same number of elements. To use different lengths, an extra flag\r\n\t\t// array would be necessary.\r\n\r\n\t\tvar d_buf; // index of pendig_buf\r\n\r\n\t\t// that.opt_len; // bit length of current block with optimal trees\r\n\t\t// that.static_len; // bit length of current block with static trees\r\n\t\tvar matches; // number of string matches in current block\r\n\t\tvar last_eob_len; // bit length of EOB code for last block\r\n\r\n\t\t// Output buffer. bits are inserted starting at the bottom (least\r\n\t\t// significant bits).\r\n\t\tvar bi_buf;\r\n\r\n\t\t// Number of valid bits in bi_buf. All bits above the last valid bit\r\n\t\t// are always zero.\r\n\t\tvar bi_valid;\r\n\r\n\t\t// number of codes at each bit length for an optimal tree\r\n\t\tthat.bl_count = [];\r\n\r\n\t\t// heap used to build the Huffman trees\r\n\t\tthat.heap = [];\r\n\r\n\t\tdyn_ltree = [];\r\n\t\tdyn_dtree = [];\r\n\t\tbl_tree = [];\r\n\r\n\t\tfunction lm_init() {\r\n\t\t\tvar i;\r\n\t\t\twindow_size = 2 * w_size;\r\n\r\n\t\t\thead[hash_size - 1] = 0;\r\n\t\t\tfor (i = 0; i < hash_size - 1; i++) {\r\n\t\t\t\thead[i] = 0;\r\n\t\t\t}\r\n\r\n\t\t\t// Set the default configuration parameters:\r\n\t\t\tmax_lazy_match = config_table[level].max_lazy;\r\n\t\t\tgood_match = config_table[level].good_length;\r\n\t\t\tnice_match = config_table[level].nice_length;\r\n\t\t\tmax_chain_length = config_table[level].max_chain;\r\n\r\n\t\t\tstrstart = 0;\r\n\t\t\tblock_start = 0;\r\n\t\t\tlookahead = 0;\r\n\t\t\tmatch_length = prev_length = MIN_MATCH - 1;\r\n\t\t\tmatch_available = 0;\r\n\t\t\tins_h = 0;\r\n\t\t}\r\n\r\n\t\tfunction init_block() {\r\n\t\t\tvar i;\r\n\t\t\t// Initialize the trees.\r\n\t\t\tfor (i = 0; i < L_CODES; i++)\r\n\t\t\t\tdyn_ltree[i * 2] = 0;\r\n\t\t\tfor (i = 0; i < D_CODES; i++)\r\n\t\t\t\tdyn_dtree[i * 2] = 0;\r\n\t\t\tfor (i = 0; i < BL_CODES; i++)\r\n\t\t\t\tbl_tree[i * 2] = 0;\r\n\r\n\t\t\tdyn_ltree[END_BLOCK * 2] = 1;\r\n\t\t\tthat.opt_len = that.static_len = 0;\r\n\t\t\tlast_lit = matches = 0;\r\n\t\t}\r\n\r\n\t\t// Initialize the tree data structures for a new zlib stream.\r\n\t\tfunction tr_init() {\r\n\r\n\t\t\tl_desc.dyn_tree = dyn_ltree;\r\n\t\t\tl_desc.stat_desc = StaticTree.static_l_desc;\r\n\r\n\t\t\td_desc.dyn_tree = dyn_dtree;\r\n\t\t\td_desc.stat_desc = StaticTree.static_d_desc;\r\n\r\n\t\t\tbl_desc.dyn_tree = bl_tree;\r\n\t\t\tbl_desc.stat_desc = StaticTree.static_bl_desc;\r\n\r\n\t\t\tbi_buf = 0;\r\n\t\t\tbi_valid = 0;\r\n\t\t\tlast_eob_len = 8; // enough lookahead for inflate\r\n\r\n\t\t\t// Initialize the first block of the first file:\r\n\t\t\tinit_block();\r\n\t\t}\r\n\r\n\t\t// Restore the heap property by moving down the tree starting at node k,\r\n\t\t// exchanging a node with the smallest of its two sons if necessary,\r\n\t\t// stopping\r\n\t\t// when the heap property is re-established (each father smaller than its\r\n\t\t// two sons).\r\n\t\tthat.pqdownheap = function (tree, // the tree to restore\r\n\t\t\tk // node to move down\r\n\t\t) {\r\n\t\t\tvar heap = that.heap;\r\n\t\t\tvar v = heap[k];\r\n\t\t\tvar j = k << 1; // left son of k\r\n\t\t\twhile (j <= that.heap_len) {\r\n\t\t\t\t// Set j to the smallest of the two sons:\r\n\t\t\t\tif (j < that.heap_len && smaller(tree, heap[j + 1], heap[j], that.depth)) {\r\n\t\t\t\t\tj++;\r\n\t\t\t\t}\r\n\t\t\t\t// Exit if v is smaller than both sons\r\n\t\t\t\tif (smaller(tree, v, heap[j], that.depth))\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t// Exchange v with the smallest son\r\n\t\t\t\theap[k] = heap[j];\r\n\t\t\t\tk = j;\r\n\t\t\t\t// And continue down the tree, setting j to the left son of k\r\n\t\t\t\tj <<= 1;\r\n\t\t\t}\r\n\t\t\theap[k] = v;\r\n\t\t};\r\n\r\n\t\t// Scan a literal or distance tree to determine the frequencies of the codes\r\n\t\t// in the bit length tree.\r\n\t\tfunction scan_tree(tree,// the tree to be scanned\r\n\t\t\tmax_code // and its largest code of non zero frequency\r\n\t\t) {\r\n\t\t\tvar n; // iterates over all tree elements\r\n\t\t\tvar prevlen = -1; // last emitted length\r\n\t\t\tvar curlen; // length of current code\r\n\t\t\tvar nextlen = tree[0 * 2 + 1]; // length of next code\r\n\t\t\tvar count = 0; // repeat count of the current code\r\n\t\t\tvar max_count = 7; // max repeat count\r\n\t\t\tvar min_count = 4; // min repeat count\r\n\r\n\t\t\tif (nextlen === 0) {\r\n\t\t\t\tmax_count = 138;\r\n\t\t\t\tmin_count = 3;\r\n\t\t\t}\r\n\t\t\ttree[(max_code + 1) * 2 + 1] = 0xffff; // guard\r\n\r\n\t\t\tfor (n = 0; n <= max_code; n++) {\r\n\t\t\t\tcurlen = nextlen;\r\n\t\t\t\tnextlen = tree[(n + 1) * 2 + 1];\r\n\t\t\t\tif (++count < max_count && curlen == nextlen) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t} else if (count < min_count) {\r\n\t\t\t\t\tbl_tree[curlen * 2] += count;\r\n\t\t\t\t} else if (curlen !== 0) {\r\n\t\t\t\t\tif (curlen != prevlen)\r\n\t\t\t\t\t\tbl_tree[curlen * 2]++;\r\n\t\t\t\t\tbl_tree[REP_3_6 * 2]++;\r\n\t\t\t\t} else if (count <= 10) {\r\n\t\t\t\t\tbl_tree[REPZ_3_10 * 2]++;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tbl_tree[REPZ_11_138 * 2]++;\r\n\t\t\t\t}\r\n\t\t\t\tcount = 0;\r\n\t\t\t\tprevlen = curlen;\r\n\t\t\t\tif (nextlen === 0) {\r\n\t\t\t\t\tmax_count = 138;\r\n\t\t\t\t\tmin_count = 3;\r\n\t\t\t\t} else if (curlen == nextlen) {\r\n\t\t\t\t\tmax_count = 6;\r\n\t\t\t\t\tmin_count = 3;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tmax_count = 7;\r\n\t\t\t\t\tmin_count = 4;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Construct the Huffman tree for the bit lengths and return the index in\r\n\t\t// bl_order of the last bit length code to send.\r\n\t\tfunction build_bl_tree() {\r\n\t\t\tvar max_blindex; // index of last bit length code of non zero freq\r\n\r\n\t\t\t// Determine the bit length frequencies for literal and distance trees\r\n\t\t\tscan_tree(dyn_ltree, l_desc.max_code);\r\n\t\t\tscan_tree(dyn_dtree, d_desc.max_code);\r\n\r\n\t\t\t// Build the bit length tree:\r\n\t\t\tbl_desc.build_tree(that);\r\n\t\t\t// opt_len now includes the length of the tree representations, except\r\n\t\t\t// the lengths of the bit lengths codes and the 5+5+4 bits for the\r\n\t\t\t// counts.\r\n\r\n\t\t\t// Determine the number of bit length codes to send. The pkzip format\r\n\t\t\t// requires that at least 4 bit length codes be sent. (appnote.txt says\r\n\t\t\t// 3 but the actual value used is 4.)\r\n\t\t\tfor (max_blindex = BL_CODES - 1; max_blindex >= 3; max_blindex--) {\r\n\t\t\t\tif (bl_tree[Tree.bl_order[max_blindex] * 2 + 1] !== 0)\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\t// Update opt_len to include the bit length tree and counts\r\n\t\t\tthat.opt_len += 3 * (max_blindex + 1) + 5 + 5 + 4;\r\n\r\n\t\t\treturn max_blindex;\r\n\t\t}\r\n\r\n\t\t// Output a byte on the stream.\r\n\t\t// IN assertion: there is enough room in pending_buf.\r\n\t\tfunction put_byte(p) {\r\n\t\t\tthat.pending_buf[that.pending++] = p;\r\n\t\t}\r\n\r\n\t\tfunction put_short(w) {\r\n\t\t\tput_byte(w & 0xff);\r\n\t\t\tput_byte((w >>> 8) & 0xff);\r\n\t\t}\r\n\r\n\t\tfunction putShortMSB(b) {\r\n\t\t\tput_byte((b >> 8) & 0xff);\r\n\t\t\tput_byte((b & 0xff) & 0xff);\r\n\t\t}\r\n\r\n\t\tfunction send_bits(value, length) {\r\n\t\t\tvar val, len = length;\r\n\t\t\tif (bi_valid > Buf_size - len) {\r\n\t\t\t\tval = value;\r\n\t\t\t\t// bi_buf |= (val << bi_valid);\r\n\t\t\t\tbi_buf |= ((val << bi_valid) & 0xffff);\r\n\t\t\t\tput_short(bi_buf);\r\n\t\t\t\tbi_buf = val >>> (Buf_size - bi_valid);\r\n\t\t\t\tbi_valid += len - Buf_size;\r\n\t\t\t} else {\r\n\t\t\t\t// bi_buf |= (value) << bi_valid;\r\n\t\t\t\tbi_buf |= (((value) << bi_valid) & 0xffff);\r\n\t\t\t\tbi_valid += len;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction send_code(c, tree) {\r\n\t\t\tvar c2 = c * 2;\r\n\t\t\tsend_bits(tree[c2] & 0xffff, tree[c2 + 1] & 0xffff);\r\n\t\t}\r\n\r\n\t\t// Send a literal or distance tree in compressed form, using the codes in\r\n\t\t// bl_tree.\r\n\t\tfunction send_tree(tree,// the tree to be sent\r\n\t\t\tmax_code // and its largest code of non zero frequency\r\n\t\t) {\r\n\t\t\tvar n; // iterates over all tree elements\r\n\t\t\tvar prevlen = -1; // last emitted length\r\n\t\t\tvar curlen; // length of current code\r\n\t\t\tvar nextlen = tree[0 * 2 + 1]; // length of next code\r\n\t\t\tvar count = 0; // repeat count of the current code\r\n\t\t\tvar max_count = 7; // max repeat count\r\n\t\t\tvar min_count = 4; // min repeat count\r\n\r\n\t\t\tif (nextlen === 0) {\r\n\t\t\t\tmax_count = 138;\r\n\t\t\t\tmin_count = 3;\r\n\t\t\t}\r\n\r\n\t\t\tfor (n = 0; n <= max_code; n++) {\r\n\t\t\t\tcurlen = nextlen;\r\n\t\t\t\tnextlen = tree[(n + 1) * 2 + 1];\r\n\t\t\t\tif (++count < max_count && curlen == nextlen) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t} else if (count < min_count) {\r\n\t\t\t\t\tdo {\r\n\t\t\t\t\t\tsend_code(curlen, bl_tree);\r\n\t\t\t\t\t} while (--count !== 0);\r\n\t\t\t\t} else if (curlen !== 0) {\r\n\t\t\t\t\tif (curlen != prevlen) {\r\n\t\t\t\t\t\tsend_code(curlen, bl_tree);\r\n\t\t\t\t\t\tcount--;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tsend_code(REP_3_6, bl_tree);\r\n\t\t\t\t\tsend_bits(count - 3, 2);\r\n\t\t\t\t} else if (count <= 10) {\r\n\t\t\t\t\tsend_code(REPZ_3_10, bl_tree);\r\n\t\t\t\t\tsend_bits(count - 3, 3);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsend_code(REPZ_11_138, bl_tree);\r\n\t\t\t\t\tsend_bits(count - 11, 7);\r\n\t\t\t\t}\r\n\t\t\t\tcount = 0;\r\n\t\t\t\tprevlen = curlen;\r\n\t\t\t\tif (nextlen === 0) {\r\n\t\t\t\t\tmax_count = 138;\r\n\t\t\t\t\tmin_count = 3;\r\n\t\t\t\t} else if (curlen == nextlen) {\r\n\t\t\t\t\tmax_count = 6;\r\n\t\t\t\t\tmin_count = 3;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tmax_count = 7;\r\n\t\t\t\t\tmin_count = 4;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Send the header for a block using dynamic Huffman trees: the counts, the\r\n\t\t// lengths of the bit length codes, the literal tree and the distance tree.\r\n\t\t// IN assertion: lcodes >= 257, dcodes >= 1, blcodes >= 4.\r\n\t\tfunction send_all_trees(lcodes, dcodes, blcodes) {\r\n\t\t\tvar rank; // index in bl_order\r\n\r\n\t\t\tsend_bits(lcodes - 257, 5); // not +255 as stated in appnote.txt\r\n\t\t\tsend_bits(dcodes - 1, 5);\r\n\t\t\tsend_bits(blcodes - 4, 4); // not -3 as stated in appnote.txt\r\n\t\t\tfor (rank = 0; rank < blcodes; rank++) {\r\n\t\t\t\tsend_bits(bl_tree[Tree.bl_order[rank] * 2 + 1], 3);\r\n\t\t\t}\r\n\t\t\tsend_tree(dyn_ltree, lcodes - 1); // literal tree\r\n\t\t\tsend_tree(dyn_dtree, dcodes - 1); // distance tree\r\n\t\t}\r\n\r\n\t\t// Flush the bit buffer, keeping at most 7 bits in it.\r\n\t\tfunction bi_flush() {\r\n\t\t\tif (bi_valid == 16) {\r\n\t\t\t\tput_short(bi_buf);\r\n\t\t\t\tbi_buf = 0;\r\n\t\t\t\tbi_valid = 0;\r\n\t\t\t} else if (bi_valid >= 8) {\r\n\t\t\t\tput_byte(bi_buf & 0xff);\r\n\t\t\t\tbi_buf >>>= 8;\r\n\t\t\t\tbi_valid -= 8;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Send one empty static block to give enough lookahead for inflate.\r\n\t\t// This takes 10 bits, of which 7 may remain in the bit buffer.\r\n\t\t// The current inflate code requires 9 bits of lookahead. If the\r\n\t\t// last two codes for the previous block (real code plus EOB) were coded\r\n\t\t// on 5 bits or less, inflate may have only 5+3 bits of lookahead to decode\r\n\t\t// the last real code. In this case we send two empty static blocks instead\r\n\t\t// of one. (There are no problems if the previous block is stored or fixed.)\r\n\t\t// To simplify the code, we assume the worst case of last real code encoded\r\n\t\t// on one bit only.\r\n\t\tfunction _tr_align() {\r\n\t\t\tsend_bits(STATIC_TREES << 1, 3);\r\n\t\t\tsend_code(END_BLOCK, StaticTree.static_ltree);\r\n\r\n\t\t\tbi_flush();\r\n\r\n\t\t\t// Of the 10 bits for the empty block, we have already sent\r\n\t\t\t// (10 - bi_valid) bits. The lookahead for the last real code (before\r\n\t\t\t// the EOB of the previous block) was thus at least one plus the length\r\n\t\t\t// of the EOB plus what we have just sent of the empty static block.\r\n\t\t\tif (1 + last_eob_len + 10 - bi_valid < 9) {\r\n\t\t\t\tsend_bits(STATIC_TREES << 1, 3);\r\n\t\t\t\tsend_code(END_BLOCK, StaticTree.static_ltree);\r\n\t\t\t\tbi_flush();\r\n\t\t\t}\r\n\t\t\tlast_eob_len = 7;\r\n\t\t}\r\n\r\n\t\t// Save the match info and tally the frequency counts. Return true if\r\n\t\t// the current block must be flushed.\r\n\t\tfunction _tr_tally(dist, // distance of matched string\r\n\t\t\tlc // match length-MIN_MATCH or unmatched char (if dist==0)\r\n\t\t) {\r\n\t\t\tvar out_length, in_length, dcode;\r\n\t\t\tthat.pending_buf[d_buf + last_lit * 2] = (dist >>> 8) & 0xff;\r\n\t\t\tthat.pending_buf[d_buf + last_lit * 2 + 1] = dist & 0xff;\r\n\r\n\t\t\tthat.pending_buf[l_buf + last_lit] = lc & 0xff;\r\n\t\t\tlast_lit++;\r\n\r\n\t\t\tif (dist === 0) {\r\n\t\t\t\t// lc is the unmatched char\r\n\t\t\t\tdyn_ltree[lc * 2]++;\r\n\t\t\t} else {\r\n\t\t\t\tmatches++;\r\n\t\t\t\t// Here, lc is the match length - MIN_MATCH\r\n\t\t\t\tdist--; // dist = match distance - 1\r\n\t\t\t\tdyn_ltree[(Tree._length_code[lc] + LITERALS + 1) * 2]++;\r\n\t\t\t\tdyn_dtree[Tree.d_code(dist) * 2]++;\r\n\t\t\t}\r\n\r\n\t\t\tif ((last_lit & 0x1fff) === 0 && level > 2) {\r\n\t\t\t\t// Compute an upper bound for the compressed length\r\n\t\t\t\tout_length = last_lit * 8;\r\n\t\t\t\tin_length = strstart - block_start;\r\n\t\t\t\tfor (dcode = 0; dcode < D_CODES; dcode++) {\r\n\t\t\t\t\tout_length += dyn_dtree[dcode * 2] * (5 + Tree.extra_dbits[dcode]);\r\n\t\t\t\t}\r\n\t\t\t\tout_length >>>= 3;\r\n\t\t\t\tif ((matches < Math.floor(last_lit / 2)) && out_length < Math.floor(in_length / 2))\r\n\t\t\t\t\treturn true;\r\n\t\t\t}\r\n\r\n\t\t\treturn (last_lit == lit_bufsize - 1);\r\n\t\t\t// We avoid equality with lit_bufsize because of wraparound at 64K\r\n\t\t\t// on 16 bit machines and because stored blocks are restricted to\r\n\t\t\t// 64K-1 bytes.\r\n\t\t}\r\n\r\n\t\t// Send the block data compressed using the given Huffman trees\r\n\t\tfunction compress_block(ltree, dtree) {\r\n\t\t\tvar dist; // distance of matched string\r\n\t\t\tvar lc; // match length or unmatched char (if dist === 0)\r\n\t\t\tvar lx = 0; // running index in l_buf\r\n\t\t\tvar code; // the code to send\r\n\t\t\tvar extra; // number of extra bits to send\r\n\r\n\t\t\tif (last_lit !== 0) {\r\n\t\t\t\tdo {\r\n\t\t\t\t\tdist = ((that.pending_buf[d_buf + lx * 2] << 8) & 0xff00) | (that.pending_buf[d_buf + lx * 2 + 1] & 0xff);\r\n\t\t\t\t\tlc = (that.pending_buf[l_buf + lx]) & 0xff;\r\n\t\t\t\t\tlx++;\r\n\r\n\t\t\t\t\tif (dist === 0) {\r\n\t\t\t\t\t\tsend_code(lc, ltree); // send a literal byte\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// Here, lc is the match length - MIN_MATCH\r\n\t\t\t\t\t\tcode = Tree._length_code[lc];\r\n\r\n\t\t\t\t\t\tsend_code(code + LITERALS + 1, ltree); // send the length\r\n\t\t\t\t\t\t// code\r\n\t\t\t\t\t\textra = Tree.extra_lbits[code];\r\n\t\t\t\t\t\tif (extra !== 0) {\r\n\t\t\t\t\t\t\tlc -= Tree.base_length[code];\r\n\t\t\t\t\t\t\tsend_bits(lc, extra); // send the extra length bits\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tdist--; // dist is now the match distance - 1\r\n\t\t\t\t\t\tcode = Tree.d_code(dist);\r\n\r\n\t\t\t\t\t\tsend_code(code, dtree); // send the distance code\r\n\t\t\t\t\t\textra = Tree.extra_dbits[code];\r\n\t\t\t\t\t\tif (extra !== 0) {\r\n\t\t\t\t\t\t\tdist -= Tree.base_dist[code];\r\n\t\t\t\t\t\t\tsend_bits(dist, extra); // send the extra distance bits\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} // literal or match pair ?\r\n\r\n\t\t\t\t\t// Check that the overlay between pending_buf and d_buf+l_buf is\r\n\t\t\t\t\t// ok:\r\n\t\t\t\t} while (lx < last_lit);\r\n\t\t\t}\r\n\r\n\t\t\tsend_code(END_BLOCK, ltree);\r\n\t\t\tlast_eob_len = ltree[END_BLOCK * 2 + 1];\r\n\t\t}\r\n\r\n\t\t// Flush the bit buffer and align the output on a byte boundary\r\n\t\tfunction bi_windup() {\r\n\t\t\tif (bi_valid > 8) {\r\n\t\t\t\tput_short(bi_buf);\r\n\t\t\t} else if (bi_valid > 0) {\r\n\t\t\t\tput_byte(bi_buf & 0xff);\r\n\t\t\t}\r\n\t\t\tbi_buf = 0;\r\n\t\t\tbi_valid = 0;\r\n\t\t}\r\n\r\n\t\t// Copy a stored block, storing first the length and its\r\n\t\t// one's complement if requested.\r\n\t\tfunction copy_block(buf, // the input data\r\n\t\t\tlen, // its length\r\n\t\t\theader // true if block header must be written\r\n\t\t) {\r\n\t\t\tbi_windup(); // align on byte boundary\r\n\t\t\tlast_eob_len = 8; // enough lookahead for inflate\r\n\r\n\t\t\tif (header) {\r\n\t\t\t\tput_short(len);\r\n\t\t\t\tput_short(~len);\r\n\t\t\t}\r\n\r\n\t\t\tthat.pending_buf.set(window.subarray(buf, buf + len), that.pending);\r\n\t\t\tthat.pending += len;\r\n\t\t}\r\n\r\n\t\t// Send a stored block\r\n\t\tfunction _tr_stored_block(buf, // input block\r\n\t\t\tstored_len, // length of input block\r\n\t\t\teof // true if this is the last block for a file\r\n\t\t) {\r\n\t\t\tsend_bits((STORED_BLOCK << 1) + (eof ? 1 : 0), 3); // send block type\r\n\t\t\tcopy_block(buf, stored_len, true); // with header\r\n\t\t}\r\n\r\n\t\t// Determine the best encoding for the current block: dynamic trees, static\r\n\t\t// trees or store, and output the encoded block to the zip file.\r\n\t\tfunction _tr_flush_block(buf, // input block, or NULL if too old\r\n\t\t\tstored_len, // length of input block\r\n\t\t\teof // true if this is the last block for a file\r\n\t\t) {\r\n\t\t\tvar opt_lenb, static_lenb;// opt_len and static_len in bytes\r\n\t\t\tvar max_blindex = 0; // index of last bit length code of non zero freq\r\n\r\n\t\t\t// Build the Huffman trees unless a stored block is forced\r\n\t\t\tif (level > 0) {\r\n\t\t\t\t// Construct the literal and distance trees\r\n\t\t\t\tl_desc.build_tree(that);\r\n\r\n\t\t\t\td_desc.build_tree(that);\r\n\r\n\t\t\t\t// At this point, opt_len and static_len are the total bit lengths\r\n\t\t\t\t// of\r\n\t\t\t\t// the compressed block data, excluding the tree representations.\r\n\r\n\t\t\t\t// Build the bit length tree for the above two trees, and get the\r\n\t\t\t\t// index\r\n\t\t\t\t// in bl_order of the last bit length code to send.\r\n\t\t\t\tmax_blindex = build_bl_tree();\r\n\r\n\t\t\t\t// Determine the best encoding. Compute first the block length in\r\n\t\t\t\t// bytes\r\n\t\t\t\topt_lenb = (that.opt_len + 3 + 7) >>> 3;\r\n\t\t\t\tstatic_lenb = (that.static_len + 3 + 7) >>> 3;\r\n\r\n\t\t\t\tif (static_lenb <= opt_lenb)\r\n\t\t\t\t\topt_lenb = static_lenb;\r\n\t\t\t} else {\r\n\t\t\t\topt_lenb = static_lenb = stored_len + 5; // force a stored block\r\n\t\t\t}\r\n\r\n\t\t\tif ((stored_len + 4 <= opt_lenb) && buf != -1) {\r\n\t\t\t\t// 4: two words for the lengths\r\n\t\t\t\t// The test buf != NULL is only necessary if LIT_BUFSIZE > WSIZE.\r\n\t\t\t\t// Otherwise we can't have processed more than WSIZE input bytes\r\n\t\t\t\t// since\r\n\t\t\t\t// the last block flush, because compression would have been\r\n\t\t\t\t// successful. If LIT_BUFSIZE <= WSIZE, it is never too late to\r\n\t\t\t\t// transform a block into a stored block.\r\n\t\t\t\t_tr_stored_block(buf, stored_len, eof);\r\n\t\t\t} else if (static_lenb == opt_lenb) {\r\n\t\t\t\tsend_bits((STATIC_TREES << 1) + (eof ? 1 : 0), 3);\r\n\t\t\t\tcompress_block(StaticTree.static_ltree, StaticTree.static_dtree);\r\n\t\t\t} else {\r\n\t\t\t\tsend_bits((DYN_TREES << 1) + (eof ? 1 : 0), 3);\r\n\t\t\t\tsend_all_trees(l_desc.max_code + 1, d_desc.max_code + 1, max_blindex + 1);\r\n\t\t\t\tcompress_block(dyn_ltree, dyn_dtree);\r\n\t\t\t}\r\n\r\n\t\t\t// The above check is made mod 2^32, for files larger than 512 MB\r\n\t\t\t// and uLong implemented on 32 bits.\r\n\r\n\t\t\tinit_block();\r\n\r\n\t\t\tif (eof) {\r\n\t\t\t\tbi_windup();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction flush_block_only(eof) {\r\n\t\t\t_tr_flush_block(block_start >= 0 ? block_start : -1, strstart - block_start, eof);\r\n\t\t\tblock_start = strstart;\r\n\t\t\tstrm.flush_pending();\r\n\t\t}\r\n\r\n\t\t// Fill the window when the lookahead becomes insufficient.\r\n\t\t// Updates strstart and lookahead.\r\n\t\t//\r\n\t\t// IN assertion: lookahead < MIN_LOOKAHEAD\r\n\t\t// OUT assertions: strstart <= window_size-MIN_LOOKAHEAD\r\n\t\t// At least one byte has been read, or avail_in === 0; reads are\r\n\t\t// performed for at least two bytes (required for the zip translate_eol\r\n\t\t// option -- not supported here).\r\n\t\tfunction fill_window() {\r\n\t\t\tvar n, m;\r\n\t\t\tvar p;\r\n\t\t\tvar more; // Amount of free space at the end of the window.\r\n\r\n\t\t\tdo {\r\n\t\t\t\tmore = (window_size - lookahead - strstart);\r\n\r\n\t\t\t\t// Deal with !@#$% 64K limit:\r\n\t\t\t\tif (more === 0 && strstart === 0 && lookahead === 0) {\r\n\t\t\t\t\tmore = w_size;\r\n\t\t\t\t} else if (more == -1) {\r\n\t\t\t\t\t// Very unlikely, but possible on 16 bit machine if strstart ==\r\n\t\t\t\t\t// 0\r\n\t\t\t\t\t// and lookahead == 1 (input done one byte at time)\r\n\t\t\t\t\tmore--;\r\n\r\n\t\t\t\t\t// If the window is almost full and there is insufficient\r\n\t\t\t\t\t// lookahead,\r\n\t\t\t\t\t// move the upper half to the lower one to make room in the\r\n\t\t\t\t\t// upper half.\r\n\t\t\t\t} else if (strstart >= w_size + w_size - MIN_LOOKAHEAD) {\r\n\t\t\t\t\twindow.set(window.subarray(w_size, w_size + w_size), 0);\r\n\r\n\t\t\t\t\tmatch_start -= w_size;\r\n\t\t\t\t\tstrstart -= w_size; // we now have strstart >= MAX_DIST\r\n\t\t\t\t\tblock_start -= w_size;\r\n\r\n\t\t\t\t\t// Slide the hash table (could be avoided with 32 bit values\r\n\t\t\t\t\t// at the expense of memory usage). We slide even when level ==\r\n\t\t\t\t\t// 0\r\n\t\t\t\t\t// to keep the hash table consistent if we switch back to level\r\n\t\t\t\t\t// > 0\r\n\t\t\t\t\t// later. (Using level 0 permanently is not an optimal usage of\r\n\t\t\t\t\t// zlib, so we don't care about this pathological case.)\r\n\r\n\t\t\t\t\tn = hash_size;\r\n\t\t\t\t\tp = n;\r\n\t\t\t\t\tdo {\r\n\t\t\t\t\t\tm = (head[--p] & 0xffff);\r\n\t\t\t\t\t\thead[p] = (m >= w_size ? m - w_size : 0);\r\n\t\t\t\t\t} while (--n !== 0);\r\n\r\n\t\t\t\t\tn = w_size;\r\n\t\t\t\t\tp = n;\r\n\t\t\t\t\tdo {\r\n\t\t\t\t\t\tm = (prev[--p] & 0xffff);\r\n\t\t\t\t\t\tprev[p] = (m >= w_size ? m - w_size : 0);\r\n\t\t\t\t\t\t// If n is not on any hash chain, prev[n] is garbage but\r\n\t\t\t\t\t\t// its value will never be used.\r\n\t\t\t\t\t} while (--n !== 0);\r\n\t\t\t\t\tmore += w_size;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (strm.avail_in === 0)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t// If there was no sliding:\r\n\t\t\t\t// strstart <= WSIZE+MAX_DIST-1 && lookahead <= MIN_LOOKAHEAD - 1 &&\r\n\t\t\t\t// more == window_size - lookahead - strstart\r\n\t\t\t\t// => more >= window_size - (MIN_LOOKAHEAD-1 + WSIZE + MAX_DIST-1)\r\n\t\t\t\t// => more >= window_size - 2*WSIZE + 2\r\n\t\t\t\t// In the BIG_MEM or MMAP case (not yet supported),\r\n\t\t\t\t// window_size == input_size + MIN_LOOKAHEAD &&\r\n\t\t\t\t// strstart + s->lookahead <= input_size => more >= MIN_LOOKAHEAD.\r\n\t\t\t\t// Otherwise, window_size == 2*WSIZE so more >= 2.\r\n\t\t\t\t// If there was sliding, more >= WSIZE. So in all cases, more >= 2.\r\n\r\n\t\t\t\tn = strm.read_buf(window, strstart + lookahead, more);\r\n\t\t\t\tlookahead += n;\r\n\r\n\t\t\t\t// Initialize the hash value now that we have some input:\r\n\t\t\t\tif (lookahead >= MIN_MATCH) {\r\n\t\t\t\t\tins_h = window[strstart] & 0xff;\r\n\t\t\t\t\tins_h = (((ins_h) << hash_shift) ^ (window[strstart + 1] & 0xff)) & hash_mask;\r\n\t\t\t\t}\r\n\t\t\t\t// If the whole input has less than MIN_MATCH bytes, ins_h is\r\n\t\t\t\t// garbage,\r\n\t\t\t\t// but this is not important since only literal bytes will be\r\n\t\t\t\t// emitted.\r\n\t\t\t} while (lookahead < MIN_LOOKAHEAD && strm.avail_in !== 0);\r\n\t\t}\r\n\r\n\t\t// Copy without compression as much as possible from the input stream,\r\n\t\t// return\r\n\t\t// the current block state.\r\n\t\t// This function does not insert new strings in the dictionary since\r\n\t\t// uncompressible data is probably not useful. This function is used\r\n\t\t// only for the level=0 compression option.\r\n\t\t// NOTE: this function should be optimized to avoid extra copying from\r\n\t\t// window to pending_buf.\r\n\t\tfunction deflate_stored(flush) {\r\n\t\t\t// Stored blocks are limited to 0xffff bytes, pending_buf is limited\r\n\t\t\t// to pending_buf_size, and each stored block has a 5 byte header:\r\n\r\n\t\t\tvar max_block_size = 0xffff;\r\n\t\t\tvar max_start;\r\n\r\n\t\t\tif (max_block_size > pending_buf_size - 5) {\r\n\t\t\t\tmax_block_size = pending_buf_size - 5;\r\n\t\t\t}\r\n\r\n\t\t\t// Copy as much as possible from input to output:\r\n\t\t\twhile (true) {\r\n\t\t\t\t// Fill the window as much as possible:\r\n\t\t\t\tif (lookahead <= 1) {\r\n\t\t\t\t\tfill_window();\r\n\t\t\t\t\tif (lookahead === 0 && flush == Z_NO_FLUSH)\r\n\t\t\t\t\t\treturn NeedMore;\r\n\t\t\t\t\tif (lookahead === 0)\r\n\t\t\t\t\t\tbreak; // flush the current block\r\n\t\t\t\t}\r\n\r\n\t\t\t\tstrstart += lookahead;\r\n\t\t\t\tlookahead = 0;\r\n\r\n\t\t\t\t// Emit a stored block if pending_buf will be full:\r\n\t\t\t\tmax_start = block_start + max_block_size;\r\n\t\t\t\tif (strstart === 0 || strstart >= max_start) {\r\n\t\t\t\t\t// strstart === 0 is possible when wraparound on 16-bit machine\r\n\t\t\t\t\tlookahead = (strstart - max_start);\r\n\t\t\t\t\tstrstart = max_start;\r\n\r\n\t\t\t\t\tflush_block_only(false);\r\n\t\t\t\t\tif (strm.avail_out === 0)\r\n\t\t\t\t\t\treturn NeedMore;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Flush if we may have to slide, otherwise block_start may become\r\n\t\t\t\t// negative and the data will be gone:\r\n\t\t\t\tif (strstart - block_start >= w_size - MIN_LOOKAHEAD) {\r\n\t\t\t\t\tflush_block_only(false);\r\n\t\t\t\t\tif (strm.avail_out === 0)\r\n\t\t\t\t\t\treturn NeedMore;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tflush_block_only(flush == Z_FINISH);\r\n\t\t\tif (strm.avail_out === 0)\r\n\t\t\t\treturn (flush == Z_FINISH) ? FinishStarted : NeedMore;\r\n\r\n\t\t\treturn flush == Z_FINISH ? FinishDone : BlockDone;\r\n\t\t}\r\n\r\n\t\tfunction longest_match(cur_match) {\r\n\t\t\tvar chain_length = max_chain_length; // max hash chain length\r\n\t\t\tvar scan = strstart; // current string\r\n\t\t\tvar match; // matched string\r\n\t\t\tvar len; // length of current match\r\n\t\t\tvar best_len = prev_length; // best match length so far\r\n\t\t\tvar limit = strstart > (w_size - MIN_LOOKAHEAD) ? strstart - (w_size - MIN_LOOKAHEAD) : 0;\r\n\t\t\tvar _nice_match = nice_match;\r\n\r\n\t\t\t// Stop when cur_match becomes <= limit. To simplify the code,\r\n\t\t\t// we prevent matches with the string of window index 0.\r\n\r\n\t\t\tvar wmask = w_mask;\r\n\r\n\t\t\tvar strend = strstart + MAX_MATCH;\r\n\t\t\tvar scan_end1 = window[scan + best_len - 1];\r\n\t\t\tvar scan_end = window[scan + best_len];\r\n\r\n\t\t\t// The code is optimized for HASH_BITS >= 8 and MAX_MATCH-2 multiple of\r\n\t\t\t// 16.\r\n\t\t\t// It is easy to get rid of this optimization if necessary.\r\n\r\n\t\t\t// Do not waste too much time if we already have a good match:\r\n\t\t\tif (prev_length >= good_match) {\r\n\t\t\t\tchain_length >>= 2;\r\n\t\t\t}\r\n\r\n\t\t\t// Do not look for matches beyond the end of the input. This is\r\n\t\t\t// necessary\r\n\t\t\t// to make deflate deterministic.\r\n\t\t\tif (_nice_match > lookahead)\r\n\t\t\t\t_nice_match = lookahead;\r\n\r\n\t\t\tdo {\r\n\t\t\t\tmatch = cur_match;\r\n\r\n\t\t\t\t// Skip to next match if the match length cannot increase\r\n\t\t\t\t// or if the match length is less than 2:\r\n\t\t\t\tif (window[match + best_len] != scan_end || window[match + best_len - 1] != scan_end1 || window[match] != window[scan]\r\n\t\t\t\t\t|| window[++match] != window[scan + 1])\r\n\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\t// The check at best_len-1 can be removed because it will be made\r\n\t\t\t\t// again later. (This heuristic is not always a win.)\r\n\t\t\t\t// It is not necessary to compare scan[2] and match[2] since they\r\n\t\t\t\t// are always equal when the other bytes match, given that\r\n\t\t\t\t// the hash keys are equal and that HASH_BITS >= 8.\r\n\t\t\t\tscan += 2;\r\n\t\t\t\tmatch++;\r\n\r\n\t\t\t\t// We check for insufficient lookahead only every 8th comparison;\r\n\t\t\t\t// the 256th check will be made at strstart+258.\r\n\t\t\t\tdo {\r\n\t\t\t\t} while (window[++scan] == window[++match] && window[++scan] == window[++match] && window[++scan] == window[++match]\r\n\t\t\t\t&& window[++scan] == window[++match] && window[++scan] == window[++match] && window[++scan] == window[++match]\r\n\t\t\t\t&& window[++scan] == window[++match] && window[++scan] == window[++match] && scan < strend);\r\n\r\n\t\t\t\tlen = MAX_MATCH - (strend - scan);\r\n\t\t\t\tscan = strend - MAX_MATCH;\r\n\r\n\t\t\t\tif (len > best_len) {\r\n\t\t\t\t\tmatch_start = cur_match;\r\n\t\t\t\t\tbest_len = len;\r\n\t\t\t\t\tif (len >= _nice_match)\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tscan_end1 = window[scan + best_len - 1];\r\n\t\t\t\t\tscan_end = window[scan + best_len];\r\n\t\t\t\t}\r\n\r\n\t\t\t} while ((cur_match = (prev[cur_match & wmask] & 0xffff)) > limit && --chain_length !== 0);\r\n\r\n\t\t\tif (best_len <= lookahead)\r\n\t\t\t\treturn best_len;\r\n\t\t\treturn lookahead;\r\n\t\t}\r\n\r\n\t\t// Compress as much as possible from the input stream, return the current\r\n\t\t// block state.\r\n\t\t// This function does not perform lazy evaluation of matches and inserts\r\n\t\t// new strings in the dictionary only for unmatched strings or for short\r\n\t\t// matches. It is used only for the fast compression options.\r\n\t\tfunction deflate_fast(flush) {\r\n\t\t\t// short hash_head = 0; // head of the hash chain\r\n\t\t\tvar hash_head = 0; // head of the hash chain\r\n\t\t\tvar bflush; // set if current block must be flushed\r\n\r\n\t\t\twhile (true) {\r\n\t\t\t\t// Make sure that we always have enough lookahead, except\r\n\t\t\t\t// at the end of the input file. We need MAX_MATCH bytes\r\n\t\t\t\t// for the next match, plus MIN_MATCH bytes to insert the\r\n\t\t\t\t// string following the next match.\r\n\t\t\t\tif (lookahead < MIN_LOOKAHEAD) {\r\n\t\t\t\t\tfill_window();\r\n\t\t\t\t\tif (lookahead < MIN_LOOKAHEAD && flush == Z_NO_FLUSH) {\r\n\t\t\t\t\t\treturn NeedMore;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (lookahead === 0)\r\n\t\t\t\t\t\tbreak; // flush the current block\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Insert the string window[strstart .. strstart+2] in the\r\n\t\t\t\t// dictionary, and set hash_head to the head of the hash chain:\r\n\t\t\t\tif (lookahead >= MIN_MATCH) {\r\n\t\t\t\t\tins_h = (((ins_h) << hash_shift) ^ (window[(strstart) + (MIN_MATCH - 1)] & 0xff)) & hash_mask;\r\n\r\n\t\t\t\t\t// prev[strstart&w_mask]=hash_head=head[ins_h];\r\n\t\t\t\t\thash_head = (head[ins_h] & 0xffff);\r\n\t\t\t\t\tprev[strstart & w_mask] = head[ins_h];\r\n\t\t\t\t\thead[ins_h] = strstart;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Find the longest match, discarding those <= prev_length.\r\n\t\t\t\t// At this point we have always match_length < MIN_MATCH\r\n\r\n\t\t\t\tif (hash_head !== 0 && ((strstart - hash_head) & 0xffff) <= w_size - MIN_LOOKAHEAD) {\r\n\t\t\t\t\t// To simplify the code, we prevent matches with the string\r\n\t\t\t\t\t// of window index 0 (in particular we have to avoid a match\r\n\t\t\t\t\t// of the string with itself at the start of the input file).\r\n\t\t\t\t\tif (strategy != Z_HUFFMAN_ONLY) {\r\n\t\t\t\t\t\tmatch_length = longest_match(hash_head);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// longest_match() sets match_start\r\n\t\t\t\t}\r\n\t\t\t\tif (match_length >= MIN_MATCH) {\r\n\t\t\t\t\t// check_match(strstart, match_start, match_length);\r\n\r\n\t\t\t\t\tbflush = _tr_tally(strstart - match_start, match_length - MIN_MATCH);\r\n\r\n\t\t\t\t\tlookahead -= match_length;\r\n\r\n\t\t\t\t\t// Insert new strings in the hash table only if the match length\r\n\t\t\t\t\t// is not too large. This saves time but degrades compression.\r\n\t\t\t\t\tif (match_length <= max_lazy_match && lookahead >= MIN_MATCH) {\r\n\t\t\t\t\t\tmatch_length--; // string at strstart already in hash table\r\n\t\t\t\t\t\tdo {\r\n\t\t\t\t\t\t\tstrstart++;\r\n\r\n\t\t\t\t\t\t\tins_h = ((ins_h << hash_shift) ^ (window[(strstart) + (MIN_MATCH - 1)] & 0xff)) & hash_mask;\r\n\t\t\t\t\t\t\t// prev[strstart&w_mask]=hash_head=head[ins_h];\r\n\t\t\t\t\t\t\thash_head = (head[ins_h] & 0xffff);\r\n\t\t\t\t\t\t\tprev[strstart & w_mask] = head[ins_h];\r\n\t\t\t\t\t\t\thead[ins_h] = strstart;\r\n\r\n\t\t\t\t\t\t\t// strstart never exceeds WSIZE-MAX_MATCH, so there are\r\n\t\t\t\t\t\t\t// always MIN_MATCH bytes ahead.\r\n\t\t\t\t\t\t} while (--match_length !== 0);\r\n\t\t\t\t\t\tstrstart++;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tstrstart += match_length;\r\n\t\t\t\t\t\tmatch_length = 0;\r\n\t\t\t\t\t\tins_h = window[strstart] & 0xff;\r\n\r\n\t\t\t\t\t\tins_h = (((ins_h) << hash_shift) ^ (window[strstart + 1] & 0xff)) & hash_mask;\r\n\t\t\t\t\t\t// If lookahead < MIN_MATCH, ins_h is garbage, but it does\r\n\t\t\t\t\t\t// not\r\n\t\t\t\t\t\t// matter since it will be recomputed at next deflate call.\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// No match, output a literal byte\r\n\r\n\t\t\t\t\tbflush = _tr_tally(0, window[strstart] & 0xff);\r\n\t\t\t\t\tlookahead--;\r\n\t\t\t\t\tstrstart++;\r\n\t\t\t\t}\r\n\t\t\t\tif (bflush) {\r\n\r\n\t\t\t\t\tflush_block_only(false);\r\n\t\t\t\t\tif (strm.avail_out === 0)\r\n\t\t\t\t\t\treturn NeedMore;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tflush_block_only(flush == Z_FINISH);\r\n\t\t\tif (strm.avail_out === 0) {\r\n\t\t\t\tif (flush == Z_FINISH)\r\n\t\t\t\t\treturn FinishStarted;\r\n\t\t\t\telse\r\n\t\t\t\t\treturn NeedMore;\r\n\t\t\t}\r\n\t\t\treturn flush == Z_FINISH ? FinishDone : BlockDone;\r\n\t\t}\r\n\r\n\t\t// Same as above, but achieves better compression. We use a lazy\r\n\t\t// evaluation for matches: a match is finally adopted only if there is\r\n\t\t// no better match at the next window position.\r\n\t\tfunction deflate_slow(flush) {\r\n\t\t\t// short hash_head = 0; // head of hash chain\r\n\t\t\tvar hash_head = 0; // head of hash chain\r\n\t\t\tvar bflush; // set if current block must be flushed\r\n\t\t\tvar max_insert;\r\n\r\n\t\t\t// Process the input block.\r\n\t\t\twhile (true) {\r\n\t\t\t\t// Make sure that we always have enough lookahead, except\r\n\t\t\t\t// at the end of the input file. We need MAX_MATCH bytes\r\n\t\t\t\t// for the next match, plus MIN_MATCH bytes to insert the\r\n\t\t\t\t// string following the next match.\r\n\r\n\t\t\t\tif (lookahead < MIN_LOOKAHEAD) {\r\n\t\t\t\t\tfill_window();\r\n\t\t\t\t\tif (lookahead < MIN_LOOKAHEAD && flush == Z_NO_FLUSH) {\r\n\t\t\t\t\t\treturn NeedMore;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (lookahead === 0)\r\n\t\t\t\t\t\tbreak; // flush the current block\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Insert the string window[strstart .. strstart+2] in the\r\n\t\t\t\t// dictionary, and set hash_head to the head of the hash chain:\r\n\r\n\t\t\t\tif (lookahead >= MIN_MATCH) {\r\n\t\t\t\t\tins_h = (((ins_h) << hash_shift) ^ (window[(strstart) + (MIN_MATCH - 1)] & 0xff)) & hash_mask;\r\n\t\t\t\t\t// prev[strstart&w_mask]=hash_head=head[ins_h];\r\n\t\t\t\t\thash_head = (head[ins_h] & 0xffff);\r\n\t\t\t\t\tprev[strstart & w_mask] = head[ins_h];\r\n\t\t\t\t\thead[ins_h] = strstart;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Find the longest match, discarding those <= prev_length.\r\n\t\t\t\tprev_length = match_length;\r\n\t\t\t\tprev_match = match_start;\r\n\t\t\t\tmatch_length = MIN_MATCH - 1;\r\n\r\n\t\t\t\tif (hash_head !== 0 && prev_length < max_lazy_match && ((strstart - hash_head) & 0xffff) <= w_size - MIN_LOOKAHEAD) {\r\n\t\t\t\t\t// To simplify the code, we prevent matches with the string\r\n\t\t\t\t\t// of window index 0 (in particular we have to avoid a match\r\n\t\t\t\t\t// of the string with itself at the start of the input file).\r\n\r\n\t\t\t\t\tif (strategy != Z_HUFFMAN_ONLY) {\r\n\t\t\t\t\t\tmatch_length = longest_match(hash_head);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// longest_match() sets match_start\r\n\r\n\t\t\t\t\tif (match_length <= 5 && (strategy == Z_FILTERED || (match_length == MIN_MATCH && strstart - match_start > 4096))) {\r\n\r\n\t\t\t\t\t\t// If prev_match is also MIN_MATCH, match_start is garbage\r\n\t\t\t\t\t\t// but we will ignore the current match anyway.\r\n\t\t\t\t\t\tmatch_length = MIN_MATCH - 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// If there was a match at the previous step and the current\r\n\t\t\t\t// match is not better, output the previous match:\r\n\t\t\t\tif (prev_length >= MIN_MATCH && match_length <= prev_length) {\r\n\t\t\t\t\tmax_insert = strstart + lookahead - MIN_MATCH;\r\n\t\t\t\t\t// Do not insert strings in hash table beyond this.\r\n\r\n\t\t\t\t\t// check_match(strstart-1, prev_match, prev_length);\r\n\r\n\t\t\t\t\tbflush = _tr_tally(strstart - 1 - prev_match, prev_length - MIN_MATCH);\r\n\r\n\t\t\t\t\t// Insert in hash table all strings up to the end of the match.\r\n\t\t\t\t\t// strstart-1 and strstart are already inserted. If there is not\r\n\t\t\t\t\t// enough lookahead, the last two strings are not inserted in\r\n\t\t\t\t\t// the hash table.\r\n\t\t\t\t\tlookahead -= prev_length - 1;\r\n\t\t\t\t\tprev_length -= 2;\r\n\t\t\t\t\tdo {\r\n\t\t\t\t\t\tif (++strstart <= max_insert) {\r\n\t\t\t\t\t\t\tins_h = (((ins_h) << hash_shift) ^ (window[(strstart) + (MIN_MATCH - 1)] & 0xff)) & hash_mask;\r\n\t\t\t\t\t\t\t// prev[strstart&w_mask]=hash_head=head[ins_h];\r\n\t\t\t\t\t\t\thash_head = (head[ins_h] & 0xffff);\r\n\t\t\t\t\t\t\tprev[strstart & w_mask] = head[ins_h];\r\n\t\t\t\t\t\t\thead[ins_h] = strstart;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} while (--prev_length !== 0);\r\n\t\t\t\t\tmatch_available = 0;\r\n\t\t\t\t\tmatch_length = MIN_MATCH - 1;\r\n\t\t\t\t\tstrstart++;\r\n\r\n\t\t\t\t\tif (bflush) {\r\n\t\t\t\t\t\tflush_block_only(false);\r\n\t\t\t\t\t\tif (strm.avail_out === 0)\r\n\t\t\t\t\t\t\treturn NeedMore;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (match_available !== 0) {\r\n\r\n\t\t\t\t\t// If there was no match at the previous position, output a\r\n\t\t\t\t\t// single literal. If there was a match but the current match\r\n\t\t\t\t\t// is longer, truncate the previous match to a single literal.\r\n\r\n\t\t\t\t\tbflush = _tr_tally(0, window[strstart - 1] & 0xff);\r\n\r\n\t\t\t\t\tif (bflush) {\r\n\t\t\t\t\t\tflush_block_only(false);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tstrstart++;\r\n\t\t\t\t\tlookahead--;\r\n\t\t\t\t\tif (strm.avail_out === 0)\r\n\t\t\t\t\t\treturn NeedMore;\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// There is no previous match to compare with, wait for\r\n\t\t\t\t\t// the next step to decide.\r\n\r\n\t\t\t\t\tmatch_available = 1;\r\n\t\t\t\t\tstrstart++;\r\n\t\t\t\t\tlookahead--;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (match_available !== 0) {\r\n\t\t\t\tbflush = _tr_tally(0, window[strstart - 1] & 0xff);\r\n\t\t\t\tmatch_available = 0;\r\n\t\t\t}\r\n\t\t\tflush_block_only(flush == Z_FINISH);\r\n\r\n\t\t\tif (strm.avail_out === 0) {\r\n\t\t\t\tif (flush == Z_FINISH)\r\n\t\t\t\t\treturn FinishStarted;\r\n\t\t\t\telse\r\n\t\t\t\t\treturn NeedMore;\r\n\t\t\t}\r\n\r\n\t\t\treturn flush == Z_FINISH ? FinishDone : BlockDone;\r\n\t\t}\r\n\r\n\t\tfunction deflateReset(strm) {\r\n\t\t\tstrm.total_in = strm.total_out = 0;\r\n\t\t\tstrm.msg = null; //\r\n\r\n\t\t\tthat.pending = 0;\r\n\t\t\tthat.pending_out = 0;\r\n\r\n\t\t\tstatus = BUSY_STATE;\r\n\r\n\t\t\tlast_flush = Z_NO_FLUSH;\r\n\r\n\t\t\ttr_init();\r\n\t\t\tlm_init();\r\n\t\t\treturn Z_OK;\r\n\t\t}\r\n\r\n\t\tthat.deflateInit = function (strm, _level, bits, _method, memLevel, _strategy) {\r\n\t\t\tif (!_method)\r\n\t\t\t\t_method = Z_DEFLATED;\r\n\t\t\tif (!memLevel)\r\n\t\t\t\tmemLevel = DEF_MEM_LEVEL;\r\n\t\t\tif (!_strategy)\r\n\t\t\t\t_strategy = Z_DEFAULT_STRATEGY;\r\n\r\n\t\t\t// byte[] my_version=ZLIB_VERSION;\r\n\r\n\t\t\t//\r\n\t\t\t// if (!version || version[0] != my_version[0]\r\n\t\t\t// || stream_size != sizeof(z_stream)) {\r\n\t\t\t// return Z_VERSION_ERROR;\r\n\t\t\t// }\r\n\r\n\t\t\tstrm.msg = null;\r\n\r\n\t\t\tif (_level == Z_DEFAULT_COMPRESSION)\r\n\t\t\t\t_level = 6;\r\n\r\n\t\t\tif (memLevel < 1 || memLevel > MAX_MEM_LEVEL || _method != Z_DEFLATED || bits < 9 || bits > 15 || _level < 0 || _level > 9 || _strategy < 0\r\n\t\t\t\t|| _strategy > Z_HUFFMAN_ONLY) {\r\n\t\t\t\treturn Z_STREAM_ERROR;\r\n\t\t\t}\r\n\r\n\t\t\tstrm.dstate = that;\r\n\r\n\t\t\tw_bits = bits;\r\n\t\t\tw_size = 1 << w_bits;\r\n\t\t\tw_mask = w_size - 1;\r\n\r\n\t\t\thash_bits = memLevel + 7;\r\n\t\t\thash_size = 1 << hash_bits;\r\n\t\t\thash_mask = hash_size - 1;\r\n\t\t\thash_shift = Math.floor((hash_bits + MIN_MATCH - 1) / MIN_MATCH);\r\n\r\n\t\t\twindow = new Uint8Array(w_size * 2);\r\n\t\t\tprev = [];\r\n\t\t\thead = [];\r\n\r\n\t\t\tlit_bufsize = 1 << (memLevel + 6); // 16K elements by default\r\n\r\n\t\t\t// We overlay pending_buf and d_buf+l_buf. This works since the average\r\n\t\t\t// output size for (length,distance) codes is <= 24 bits.\r\n\t\t\tthat.pending_buf = new Uint8Array(lit_bufsize * 4);\r\n\t\t\tpending_buf_size = lit_bufsize * 4;\r\n\r\n\t\t\td_buf = Math.floor(lit_bufsize / 2);\r\n\t\t\tl_buf = (1 + 2) * lit_bufsize;\r\n\r\n\t\t\tlevel = _level;\r\n\r\n\t\t\tstrategy = _strategy;\r\n\t\t\tmethod = _method & 0xff;\r\n\r\n\t\t\treturn deflateReset(strm);\r\n\t\t};\r\n\r\n\t\tthat.deflateEnd = function () {\r\n\t\t\tif (status != INIT_STATE && status != BUSY_STATE && status != FINISH_STATE) {\r\n\t\t\t\treturn Z_STREAM_ERROR;\r\n\t\t\t}\r\n\t\t\t// Deallocate in reverse order of allocations:\r\n\t\t\tthat.pending_buf = null;\r\n\t\t\thead = null;\r\n\t\t\tprev = null;\r\n\t\t\twindow = null;\r\n\t\t\t// free\r\n\t\t\tthat.dstate = null;\r\n\t\t\treturn status == BUSY_STATE ? Z_DATA_ERROR : Z_OK;\r\n\t\t};\r\n\r\n\t\tthat.deflateParams = function (strm, _level, _strategy) {\r\n\t\t\tvar err = Z_OK;\r\n\r\n\t\t\tif (_level == Z_DEFAULT_COMPRESSION) {\r\n\t\t\t\t_level = 6;\r\n\t\t\t}\r\n\t\t\tif (_level < 0 || _level > 9 || _strategy < 0 || _strategy > Z_HUFFMAN_ONLY) {\r\n\t\t\t\treturn Z_STREAM_ERROR;\r\n\t\t\t}\r\n\r\n\t\t\tif (config_table[level].func != config_table[_level].func && strm.total_in !== 0) {\r\n\t\t\t\t// Flush the last buffer:\r\n\t\t\t\terr = strm.deflate(Z_PARTIAL_FLUSH);\r\n\t\t\t}\r\n\r\n\t\t\tif (level != _level) {\r\n\t\t\t\tlevel = _level;\r\n\t\t\t\tmax_lazy_match = config_table[level].max_lazy;\r\n\t\t\t\tgood_match = config_table[level].good_length;\r\n\t\t\t\tnice_match = config_table[level].nice_length;\r\n\t\t\t\tmax_chain_length = config_table[level].max_chain;\r\n\t\t\t}\r\n\t\t\tstrategy = _strategy;\r\n\t\t\treturn err;\r\n\t\t};\r\n\r\n\t\tthat.deflateSetDictionary = function (strm, dictionary, dictLength) {\r\n\t\t\tvar length = dictLength;\r\n\t\t\tvar n, index = 0;\r\n\r\n\t\t\tif (!dictionary || status != INIT_STATE)\r\n\t\t\t\treturn Z_STREAM_ERROR;\r\n\r\n\t\t\tif (length < MIN_MATCH)\r\n\t\t\t\treturn Z_OK;\r\n\t\t\tif (length > w_size - MIN_LOOKAHEAD) {\r\n\t\t\t\tlength = w_size - MIN_LOOKAHEAD;\r\n\t\t\t\tindex = dictLength - length; // use the tail of the dictionary\r\n\t\t\t}\r\n\t\t\twindow.set(dictionary.subarray(index, index + length), 0);\r\n\r\n\t\t\tstrstart = length;\r\n\t\t\tblock_start = length;\r\n\r\n\t\t\t// Insert all strings in the hash table (except for the last two bytes).\r\n\t\t\t// s->lookahead stays null, so s->ins_h will be recomputed at the next\r\n\t\t\t// call of fill_window.\r\n\r\n\t\t\tins_h = window[0] & 0xff;\r\n\t\t\tins_h = (((ins_h) << hash_shift) ^ (window[1] & 0xff)) & hash_mask;\r\n\r\n\t\t\tfor (n = 0; n <= length - MIN_MATCH; n++) {\r\n\t\t\t\tins_h = (((ins_h) << hash_shift) ^ (window[(n) + (MIN_MATCH - 1)] & 0xff)) & hash_mask;\r\n\t\t\t\tprev[n & w_mask] = head[ins_h];\r\n\t\t\t\thead[ins_h] = n;\r\n\t\t\t}\r\n\t\t\treturn Z_OK;\r\n\t\t};\r\n\r\n\t\tthat.deflate = function (_strm, flush) {\r\n\t\t\tvar i, header, level_flags, old_flush, bstate;\r\n\r\n\t\t\tif (flush > Z_FINISH || flush < 0) {\r\n\t\t\t\treturn Z_STREAM_ERROR;\r\n\t\t\t}\r\n\r\n\t\t\tif (!_strm.next_out || (!_strm.next_in && _strm.avail_in !== 0) || (status == FINISH_STATE && flush != Z_FINISH)) {\r\n\t\t\t\t_strm.msg = z_errmsg[Z_NEED_DICT - (Z_STREAM_ERROR)];\r\n\t\t\t\treturn Z_STREAM_ERROR;\r\n\t\t\t}\r\n\t\t\tif (_strm.avail_out === 0) {\r\n\t\t\t\t_strm.msg = z_errmsg[Z_NEED_DICT - (Z_BUF_ERROR)];\r\n\t\t\t\treturn Z_BUF_ERROR;\r\n\t\t\t}\r\n\r\n\t\t\tstrm = _strm; // just in case\r\n\t\t\told_flush = last_flush;\r\n\t\t\tlast_flush = flush;\r\n\r\n\t\t\t// Write the zlib header\r\n\t\t\tif (status == INIT_STATE) {\r\n\t\t\t\theader = (Z_DEFLATED + ((w_bits - 8) << 4)) << 8;\r\n\t\t\t\tlevel_flags = ((level - 1) & 0xff) >> 1;\r\n\r\n\t\t\t\tif (level_flags > 3)\r\n\t\t\t\t\tlevel_flags = 3;\r\n\t\t\t\theader |= (level_flags << 6);\r\n\t\t\t\tif (strstart !== 0)\r\n\t\t\t\t\theader |= PRESET_DICT;\r\n\t\t\t\theader += 31 - (header % 31);\r\n\r\n\t\t\t\tstatus = BUSY_STATE;\r\n\t\t\t\tputShortMSB(header);\r\n\t\t\t}\r\n\r\n\t\t\t// Flush as much pending output as possible\r\n\t\t\tif (that.pending !== 0) {\r\n\t\t\t\tstrm.flush_pending();\r\n\t\t\t\tif (strm.avail_out === 0) {\r\n\t\t\t\t\t// console.log(\" avail_out==0\");\r\n\t\t\t\t\t// Since avail_out is 0, deflate will be called again with\r\n\t\t\t\t\t// more output space, but possibly with both pending and\r\n\t\t\t\t\t// avail_in equal to zero. There won't be anything to do,\r\n\t\t\t\t\t// but this is not an error situation so make sure we\r\n\t\t\t\t\t// return OK instead of BUF_ERROR at next call of deflate:\r\n\t\t\t\t\tlast_flush = -1;\r\n\t\t\t\t\treturn Z_OK;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Make sure there is something to do and avoid duplicate\r\n\t\t\t\t// consecutive\r\n\t\t\t\t// flushes. For repeated and useless calls with Z_FINISH, we keep\r\n\t\t\t\t// returning Z_STREAM_END instead of Z_BUFF_ERROR.\r\n\t\t\t} else if (strm.avail_in === 0 && flush <= old_flush && flush != Z_FINISH) {\r\n\t\t\t\tstrm.msg = z_errmsg[Z_NEED_DICT - (Z_BUF_ERROR)];\r\n\t\t\t\treturn Z_BUF_ERROR;\r\n\t\t\t}\r\n\r\n\t\t\t// User must not provide more input after the first FINISH:\r\n\t\t\tif (status == FINISH_STATE && strm.avail_in !== 0) {\r\n\t\t\t\t_strm.msg = z_errmsg[Z_NEED_DICT - (Z_BUF_ERROR)];\r\n\t\t\t\treturn Z_BUF_ERROR;\r\n\t\t\t}\r\n\r\n\t\t\t// Start a new block or continue the current one.\r\n\t\t\tif (strm.avail_in !== 0 || lookahead !== 0 || (flush != Z_NO_FLUSH && status != FINISH_STATE)) {\r\n\t\t\t\tbstate = -1;\r\n\t\t\t\tswitch (config_table[level].func) {\r\n\t\t\t\t\tcase STORED:\r\n\t\t\t\t\t\tbstate = deflate_stored(flush);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase FAST:\r\n\t\t\t\t\t\tbstate = deflate_fast(flush);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase SLOW:\r\n\t\t\t\t\t\tbstate = deflate_slow(flush);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (bstate == FinishStarted || bstate == FinishDone) {\r\n\t\t\t\t\tstatus = FINISH_STATE;\r\n\t\t\t\t}\r\n\t\t\t\tif (bstate == NeedMore || bstate == FinishStarted) {\r\n\t\t\t\t\tif (strm.avail_out === 0) {\r\n\t\t\t\t\t\tlast_flush = -1; // avoid BUF_ERROR next call, see above\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn Z_OK;\r\n\t\t\t\t\t// If flush != Z_NO_FLUSH && avail_out === 0, the next call\r\n\t\t\t\t\t// of deflate should use the same flush parameter to make sure\r\n\t\t\t\t\t// that the flush is complete. So we don't have to output an\r\n\t\t\t\t\t// empty block here, this will be done at next call. This also\r\n\t\t\t\t\t// ensures that for a very small output buffer, we emit at most\r\n\t\t\t\t\t// one empty block.\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (bstate == BlockDone) {\r\n\t\t\t\t\tif (flush == Z_PARTIAL_FLUSH) {\r\n\t\t\t\t\t\t_tr_align();\r\n\t\t\t\t\t} else { // FULL_FLUSH or SYNC_FLUSH\r\n\t\t\t\t\t\t_tr_stored_block(0, 0, false);\r\n\t\t\t\t\t\t// For a full flush, this empty block will be recognized\r\n\t\t\t\t\t\t// as a special marker by inflate_sync().\r\n\t\t\t\t\t\tif (flush == Z_FULL_FLUSH) {\r\n\t\t\t\t\t\t\t// state.head[s.hash_size-1]=0;\r\n\t\t\t\t\t\t\tfor (i = 0; i < hash_size/*-1*/; i++)\r\n\t\t\t\t\t\t\t\t// forget history\r\n\t\t\t\t\t\t\t\thead[i] = 0;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tstrm.flush_pending();\r\n\t\t\t\t\tif (strm.avail_out === 0) {\r\n\t\t\t\t\t\tlast_flush = -1; // avoid BUF_ERROR at next call, see above\r\n\t\t\t\t\t\treturn Z_OK;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (flush != Z_FINISH)\r\n\t\t\t\treturn Z_OK;\r\n\t\t\treturn Z_STREAM_END;\r\n\t\t};\r\n\t}\r\n\r\n\t// ZStream\r\n\r\n\tfunction ZStream() {\r\n\t\tvar that = this;\r\n\t\tthat.next_in_index = 0;\r\n\t\tthat.next_out_index = 0;\r\n\t\t// that.next_in; // next input byte\r\n\t\tthat.avail_in = 0; // number of bytes available at next_in\r\n\t\tthat.total_in = 0; // total nb of input bytes read so far\r\n\t\t// that.next_out; // next output byte should be put there\r\n\t\tthat.avail_out = 0; // remaining free space at next_out\r\n\t\tthat.total_out = 0; // total nb of bytes output so far\r\n\t\t// that.msg;\r\n\t\t// that.dstate;\r\n\t}\r\n\r\n\tZStream.prototype = {\r\n\t\tdeflateInit: function (level, bits) {\r\n\t\t\tvar that = this;\r\n\t\t\tthat.dstate = new Deflate();\r\n\t\t\tif (!bits)\r\n\t\t\t\tbits = MAX_BITS;\r\n\t\t\treturn that.dstate.deflateInit(that, level, bits);\r\n\t\t},\r\n\r\n\t\tdeflate: function (flush) {\r\n\t\t\tvar that = this;\r\n\t\t\tif (!that.dstate) {\r\n\t\t\t\treturn Z_STREAM_ERROR;\r\n\t\t\t}\r\n\t\t\treturn that.dstate.deflate(that, flush);\r\n\t\t},\r\n\r\n\t\tdeflateEnd: function () {\r\n\t\t\tvar that = this;\r\n\t\t\tif (!that.dstate)\r\n\t\t\t\treturn Z_STREAM_ERROR;\r\n\t\t\tvar ret = that.dstate.deflateEnd();\r\n\t\t\tthat.dstate = null;\r\n\t\t\treturn ret;\r\n\t\t},\r\n\r\n\t\tdeflateParams: function (level, strategy) {\r\n\t\t\tvar that = this;\r\n\t\t\tif (!that.dstate)\r\n\t\t\t\treturn Z_STREAM_ERROR;\r\n\t\t\treturn that.dstate.deflateParams(that, level, strategy);\r\n\t\t},\r\n\r\n\t\tdeflateSetDictionary: function (dictionary, dictLength) {\r\n\t\t\tvar that = this;\r\n\t\t\tif (!that.dstate)\r\n\t\t\t\treturn Z_STREAM_ERROR;\r\n\t\t\treturn that.dstate.deflateSetDictionary(that, dictionary, dictLength);\r\n\t\t},\r\n\r\n\t\t// Read a new buffer from the current input stream, update the\r\n\t\t// total number of bytes read. All deflate() input goes through\r\n\t\t// this function so some applications may wish to modify it to avoid\r\n\t\t// allocating a large strm->next_in buffer and copying from it.\r\n\t\t// (See also flush_pending()).\r\n\t\tread_buf: function (buf, start, size) {\r\n\t\t\tvar that = this;\r\n\t\t\tvar len = that.avail_in;\r\n\t\t\tif (len > size)\r\n\t\t\t\tlen = size;\r\n\t\t\tif (len === 0)\r\n\t\t\t\treturn 0;\r\n\t\t\tthat.avail_in -= len;\r\n\t\t\tbuf.set(that.next_in.subarray(that.next_in_index, that.next_in_index + len), start);\r\n\t\t\tthat.next_in_index += len;\r\n\t\t\tthat.total_in += len;\r\n\t\t\treturn len;\r\n\t\t},\r\n\r\n\t\t// Flush as much pending output as possible. All deflate() output goes\r\n\t\t// through this function so some applications may wish to modify it\r\n\t\t// to avoid allocating a large strm->next_out buffer and copying into it.\r\n\t\t// (See also read_buf()).\r\n\t\tflush_pending: function () {\r\n\t\t\tvar that = this;\r\n\t\t\tvar len = that.dstate.pending;\r\n\r\n\t\t\tif (len > that.avail_out)\r\n\t\t\t\tlen = that.avail_out;\r\n\t\t\tif (len === 0)\r\n\t\t\t\treturn;\r\n\r\n\t\t\t// if (that.dstate.pending_buf.length <= that.dstate.pending_out || that.next_out.length <= that.next_out_index\r\n\t\t\t// || that.dstate.pending_buf.length < (that.dstate.pending_out + len) || that.next_out.length < (that.next_out_index +\r\n\t\t\t// len)) {\r\n\t\t\t// console.log(that.dstate.pending_buf.length + \", \" + that.dstate.pending_out + \", \" + that.next_out.length + \", \" +\r\n\t\t\t// that.next_out_index + \", \" + len);\r\n\t\t\t// console.log(\"avail_out=\" + that.avail_out);\r\n\t\t\t// }\r\n\r\n\t\t\tthat.next_out.set(that.dstate.pending_buf.subarray(that.dstate.pending_out, that.dstate.pending_out + len), that.next_out_index);\r\n\r\n\t\t\tthat.next_out_index += len;\r\n\t\t\tthat.dstate.pending_out += len;\r\n\t\t\tthat.total_out += len;\r\n\t\t\tthat.avail_out -= len;\r\n\t\t\tthat.dstate.pending -= len;\r\n\t\t\tif (that.dstate.pending === 0) {\r\n\t\t\t\tthat.dstate.pending_out = 0;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\t// Deflater\r\n\r\n\tfunction Deflater(level) {\r\n\t\tvar that = this;\r\n\t\tvar z = new ZStream();\r\n\t\tvar bufsize = 512;\r\n\t\tvar flush = Z_NO_FLUSH;\r\n\t\tvar buf = new Uint8Array(bufsize);\r\n\r\n\t\tif (typeof level == \"undefined\")\r\n\t\t\tlevel = Z_DEFAULT_COMPRESSION;\r\n\t\tz.deflateInit(level);\r\n\t\tz.next_out = buf;\r\n\r\n\t\tthat.append = function (data, onprogress) {\r\n\t\t\tvar err, buffers = [], lastIndex = 0, bufferIndex = 0, bufferSize = 0, array;\r\n\t\t\tif (!data.length)\r\n\t\t\t\treturn;\r\n\t\t\tz.next_in_index = 0;\r\n\t\t\tz.next_in = data;\r\n\t\t\tz.avail_in = data.length;\r\n\t\t\tdo {\r\n\t\t\t\tz.next_out_index = 0;\r\n\t\t\t\tz.avail_out = bufsize;\r\n\t\t\t\terr = z.deflate(flush);\r\n\t\t\t\tif (err != Z_OK)\r\n\t\t\t\t\tthrow \"deflating: \" + z.msg;\r\n\t\t\t\tif (z.next_out_index)\r\n\t\t\t\t\tif (z.next_out_index == bufsize)\r\n\t\t\t\t\t\tbuffers.push(new Uint8Array(buf));\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tbuffers.push(new Uint8Array(buf.subarray(0, z.next_out_index)));\r\n\t\t\t\tbufferSize += z.next_out_index;\r\n\t\t\t\tif (onprogress && z.next_in_index > 0 && z.next_in_index != lastIndex) {\r\n\t\t\t\t\tonprogress(z.next_in_index);\r\n\t\t\t\t\tlastIndex = z.next_in_index;\r\n\t\t\t\t}\r\n\t\t\t} while (z.avail_in > 0 || z.avail_out === 0);\r\n\t\t\tarray = new Uint8Array(bufferSize);\r\n\t\t\tbuffers.forEach(function (chunk) {\r\n\t\t\t\tarray.set(chunk, bufferIndex);\r\n\t\t\t\tbufferIndex += chunk.length;\r\n\t\t\t});\r\n\t\t\treturn array;\r\n\t\t};\r\n\t\tthat.flush = function () {\r\n\t\t\tvar err, buffers = [], bufferIndex = 0, bufferSize = 0, array;\r\n\t\t\tdo {\r\n\t\t\t\tz.next_out_index = 0;\r\n\t\t\t\tz.avail_out = bufsize;\r\n\t\t\t\terr = z.deflate(Z_FINISH);\r\n\t\t\t\tif (err != Z_STREAM_END && err != Z_OK)\r\n\t\t\t\t\tthrow \"deflating: \" + z.msg;\r\n\t\t\t\tif (bufsize - z.avail_out > 0)\r\n\t\t\t\t\tbuffers.push(new Uint8Array(buf.subarray(0, z.next_out_index)));\r\n\t\t\t\tbufferSize += z.next_out_index;\r\n\t\t\t} while (z.avail_in > 0 || z.avail_out === 0);\r\n\t\t\tz.deflateEnd();\r\n\t\t\tarray = new Uint8Array(bufferSize);\r\n\t\t\tbuffers.forEach(function (chunk) {\r\n\t\t\t\tarray.set(chunk, bufferIndex);\r\n\t\t\t\tbufferIndex += chunk.length;\r\n\t\t\t});\r\n\t\t\treturn array;\r\n\t\t};\r\n\t}\r\n\r\n\r\n\t/*\r\n\t * Copyright (c) 2012 chick307 <chick307@gmail.com>\r\n\t *\r\n\t * Licensed under the MIT License.\r\n\t * http://opensource.org/licenses/mit-license\r\n\t */\r\n\r\n\t/*var fVoid = function (global, callback) {\r\n\t\tif (typeof module === 'object') {\r\n\t\t\tmodule.exports = callback();\r\n\t\t} else if (typeof define === 'function') {\r\n\t\t\tdefine(callback);\r\n\t\t} else {\r\n\t\t\tglobal.adler32cs = callback();\r\n\t\t}\r\n\t}(this, function () {\r\n\t\tvar _hasArrayBuffer = typeof ArrayBuffer === 'function' &&\r\n\t\t\ttypeof Uint8Array === 'function';\r\n\r\n\t\tvar _Buffer = null, _isBuffer = (function () {\r\n\t\t\tif (!_hasArrayBuffer)\r\n\t\t\t\treturn function _isBuffer() { return false };\r\n\r\n\t\t\ttry {\r\n\t\t\t\tvar buffer = require('buffer');\r\n\t\t\t\tif (typeof buffer.Buffer === 'function')\r\n\t\t\t\t\t_Buffer = buffer.Buffer;\r\n\t\t\t} catch (error) { }\r\n\r\n\t\t\treturn function _isBuffer(value) {\r\n\t\t\t\treturn value instanceof ArrayBuffer ||\r\n\t\t\t\t\t_Buffer !== null && value instanceof _Buffer;\r\n\t\t\t};\r\n\t\t}());\r\n\r\n\t\tvar _utf8ToBinary = (function () {\r\n\t\t\tif (_Buffer !== null) {\r\n\t\t\t\treturn function _utf8ToBinary(utf8String) {\r\n\t\t\t\t\treturn new _Buffer(utf8String, 'utf8').toString('binary');\r\n\t\t\t\t};\r\n\t\t\t} else {\r\n\t\t\t\treturn function _utf8ToBinary(utf8String) {\r\n\t\t\t\t\treturn unescape(encodeURIComponent(utf8String));\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t}());\r\n\r\n\t\tvar MOD = 65521;\r\n\r\n\t\tvar _update = function _update(checksum, binaryString) {\r\n\t\t\tvar a = checksum & 0xFFFF, b = checksum >>> 16;\r\n\t\t\tfor (var i = 0, length = binaryString.length; i < length; i++) {\r\n\t\t\t\ta = (a + (binaryString.charCodeAt(i) & 0xFF)) % MOD;\r\n\t\t\t\tb = (b + a) % MOD;\r\n\t\t\t}\r\n\t\t\treturn (b << 16 | a) >>> 0;\r\n\t\t};\r\n\r\n\t\tvar _updateUint8Array = function _updateUint8Array(checksum, uint8Array) {\r\n\t\t\tvar a = checksum & 0xFFFF, b = checksum >>> 16;\r\n\t\t\tfor (var i = 0, length = uint8Array.length, x; i < length; i++) {\r\n\t\t\t\ta = (a + uint8Array[i]) % MOD;\r\n\t\t\t\tb = (b + a) % MOD;\r\n\t\t\t}\r\n\t\t\treturn (b << 16 | a) >>> 0\r\n\t\t};\r\n\r\n\t\tvar exports = {};\r\n\r\n\t\tvar Adler32 = exports.Adler32 = (function () {\r\n\t\t\tvar ctor = function Adler32(checksum) {\r\n\t\t\t\tif (!(this instanceof ctor)) {\r\n\t\t\t\t\tthrow new TypeError(\r\n\t\t\t\t\t\t'Constructor cannot called be as a function.');\r\n\t\t\t\t}\r\n\t\t\t\tif (!isFinite(checksum = checksum == null ? 1 : +checksum)) {\r\n\t\t\t\t\tthrow new Error(\r\n\t\t\t\t\t\t'First arguments needs to be a finite number.');\r\n\t\t\t\t}\r\n\t\t\t\tthis.checksum = checksum >>> 0;\r\n\t\t\t};\r\n\r\n\t\t\tvar proto = ctor.prototype = {};\r\n\t\t\tproto.constructor = ctor;\r\n\r\n\t\t\tctor.from = function (from) {\r\n\t\t\t\tfrom.prototype = proto;\r\n\t\t\t\treturn from;\r\n\t\t\t}(function from(binaryString) {\r\n\t\t\t\tif (!(this instanceof ctor)) {\r\n\t\t\t\t\tthrow new TypeError(\r\n\t\t\t\t\t\t'Constructor cannot called be as a function.');\r\n\t\t\t\t}\r\n\t\t\t\tif (binaryString == null)\r\n\t\t\t\t\tthrow new Error('First argument needs to be a string.');\r\n\t\t\t\tthis.checksum = _update(1, binaryString.toString());\r\n\t\t\t});\r\n\r\n\t\t\tctor.fromUtf8 = function (fromUtf8) {\r\n\t\t\t\tfromUtf8.prototype = proto;\r\n\t\t\t\treturn fromUtf8;\r\n\t\t\t}(function fromUtf8(utf8String) {\r\n\t\t\t\tif (!(this instanceof ctor)) {\r\n\t\t\t\t\tthrow new TypeError(\r\n\t\t\t\t\t\t'Constructor cannot called be as a function.');\r\n\t\t\t\t}\r\n\t\t\t\tif (utf8String == null)\r\n\t\t\t\t\tthrow new Error('First argument needs to be a string.');\r\n\t\t\t\tvar binaryString = _utf8ToBinary(utf8String.toString());\r\n\t\t\t\tthis.checksum = _update(1, binaryString);\r\n\t\t\t});\r\n\r\n\t\t\tif (_hasArrayBuffer) {\r\n\t\t\t\tctor.fromBuffer = function (fromBuffer) {\r\n\t\t\t\t\tfromBuffer.prototype = proto;\r\n\t\t\t\t\treturn fromBuffer;\r\n\t\t\t\t}(function fromBuffer(buffer) {\r\n\t\t\t\t\tif (!(this instanceof ctor)) {\r\n\t\t\t\t\t\tthrow new TypeError(\r\n\t\t\t\t\t\t\t'Constructor cannot called be as a function.');\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!_isBuffer(buffer))\r\n\t\t\t\t\t\tthrow new Error('First argument needs to be ArrayBuffer.');\r\n\t\t\t\t\tvar array = new Uint8Array(buffer);\r\n\t\t\t\t\treturn this.checksum = _updateUint8Array(1, array);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tproto.update = function update(binaryString) {\r\n\t\t\t\tif (binaryString == null)\r\n\t\t\t\t\tthrow new Error('First argument needs to be a string.');\r\n\t\t\t\tbinaryString = binaryString.toString();\r\n\t\t\t\treturn this.checksum = _update(this.checksum, binaryString);\r\n\t\t\t};\r\n\r\n\t\t\tproto.updateUtf8 = function updateUtf8(utf8String) {\r\n\t\t\t\tif (utf8String == null)\r\n\t\t\t\t\tthrow new Error('First argument needs to be a string.');\r\n\t\t\t\tvar binaryString = _utf8ToBinary(utf8String.toString());\r\n\t\t\t\treturn this.checksum = _update(this.checksum, binaryString);\r\n\t\t\t};\r\n\r\n\t\t\tif (_hasArrayBuffer) {\r\n\t\t\t\tproto.updateBuffer = function updateBuffer(buffer) {\r\n\t\t\t\t\tif (!_isBuffer(buffer))\r\n\t\t\t\t\t\tthrow new Error('First argument needs to be ArrayBuffer.');\r\n\t\t\t\t\tvar array = new Uint8Array(buffer);\r\n\t\t\t\t\treturn this.checksum = _updateUint8Array(this.checksum, array);\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\tproto.clone = function clone() {\r\n\t\t\t\treturn new Adler32(this.checksum);\r\n\t\t\t};\r\n\r\n\t\t\treturn ctor;\r\n\t\t}());\r\n\r\n\t\texports.from = function from(binaryString) {\r\n\t\t\tif (binaryString == null)\r\n\t\t\t\tthrow new Error('First argument needs to be a string.');\r\n\t\t\treturn _update(1, binaryString.toString());\r\n\t\t};\r\n\r\n\t\texports.fromUtf8 = function fromUtf8(utf8String) {\r\n\t\t\tif (utf8String == null)\r\n\t\t\t\tthrow new Error('First argument needs to be a string.');\r\n\t\t\tvar binaryString = _utf8ToBinary(utf8String.toString());\r\n\t\t\treturn _update(1, binaryString);\r\n\t\t};\r\n\r\n\t\tif (_hasArrayBuffer) {\r\n\t\t\texports.fromBuffer = function fromBuffer(buffer) {\r\n\t\t\t\tif (!_isBuffer(buffer))\r\n\t\t\t\t\tthrow new Error('First argument need to be ArrayBuffer.');\r\n\t\t\t\tvar array = new Uint8Array(buffer);\r\n\t\t\t\treturn _updateUint8Array(1, array);\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\treturn exports;\r\n\t});\r\n\r\n\r\n*/\r\n\r\n\tvar JSZip = function (data, options) { this.files = {}; this.root = \"\"; if (data) this.load(data, options); }\r\n\tJSZip.signature = { LOCAL_FILE_HEADER: \"\\x50\\x4b\\x03\\x04\", CENTRAL_FILE_HEADER: \"\\x50\\x4b\\x01\\x02\", CENTRAL_DIRECTORY_END: \"\\x50\\x4b\\x05\\x06\", ZIP64_CENTRAL_DIRECTORY_LOCATOR: \"\\x50\\x4b\\x06\\x07\", ZIP64_CENTRAL_DIRECTORY_END: \"\\x50\\x4b\\x06\\x06\", DATA_DESCRIPTOR: \"\\x50\\x4b\\x07\\x08\" }; JSZip.defaults = { base64: false, binary: false, dir: false, date: null }; JSZip.prototype = (function () {\r\n\t\tvar ZipObject = function (name, data, options) { this.name = name; this.data = data; this.options = options; }; ZipObject.prototype = {\r\n\t\t\tasText: function () { return this.options.binary ? JSZip.prototype.utf8decode(this.data) : this.data; }, asBinary: function () { return this.options.binary ? this.data : JSZip.prototype.utf8encode(this.data); }\r\n\t\t}; var decToHex = function (dec, bytes) {\r\n\t\t\tvar hex = \"\", i; for (i = 0; i < bytes; i++) { hex += String.fromCharCode(dec & 0xff); dec = dec >>> 8; }\r\n\t\t\treturn hex;\r\n\t\t}; var extend = function () {\r\n\t\t\tvar result = {}, i, attr; for (i = 0; i < arguments.length; i++) {\r\n\t\t\t\tfor (attr in arguments[i]) {\r\n\t\t\t\t\tif (typeof result[attr] === \"undefined\") { result[attr] = arguments[i][attr]; }\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t}; var prepareFileAttrs = function (o) { o = o || {}; if (o.base64 === true && o.binary == null) o.binary = true; o = extend(o, JSZip.defaults); o.date = o.date || new Date(); return o; }\r\n\t\tvar fileAdd = function (name, data, o) { var parent = parentFolder(name); if (parent) folderAdd.call(this, parent); o = prepareFileAttrs(o); return this.files[name] = { name: name, data: data, options: o }; }; var parentFolder = function (path) {\r\n\t\t\tif (path.slice(-1) == '/') { path = path.substring(0, path.length - 1); }\r\n\t\t\tvar lastSlash = path.lastIndexOf('/'); return (lastSlash > 0) ? path.substring(0, lastSlash) : \"\";\r\n\t\t}; var folderAdd = function (name) {\r\n\t\t\tif (name.slice(-1) != \"/\") name += \"/\"; if (!this.files[name]) { var parent = parentFolder(name); if (parent) folderAdd.call(this, parent); fileAdd.call(this, name, '', { dir: true }); }\r\n\t\t\treturn this.files[name];\r\n\t\t}; var prepareLocalHeaderData = function (file, utfEncodedFileName, compressionType) { var useUTF8 = utfEncodedFileName !== file.name, data = file.data, o = file.options, dosTime, dosDate; dosTime = o.date.getHours(); dosTime = dosTime << 6; dosTime = dosTime | o.date.getMinutes(); dosTime = dosTime << 5; dosTime = dosTime | o.date.getSeconds() / 2; dosDate = o.date.getFullYear() - 1980; dosDate = dosDate << 4; dosDate = dosDate | (o.date.getMonth() + 1); dosDate = dosDate << 5; dosDate = dosDate | o.date.getDate(); if (o.base64 === true) data = JSZipBase64.decode(data); if (o.binary === false) data = this.utf8encode(data); var compression = JSZip.compressions[compressionType]; var compressedData = compression.compress(data); var header = \"\"; header += \"\\x0A\\x00\"; header += useUTF8 ? \"\\x00\\x08\" : \"\\x00\\x00\"; header += compression.magic; header += decToHex(dosTime, 2); header += decToHex(dosDate, 2); header += decToHex(this.crc32(data), 4); header += decToHex(compressedData.length, 4); header += decToHex(data.length, 4); header += decToHex(utfEncodedFileName.length, 2); header += \"\\x00\\x00\"; return { header: header, compressedData: compressedData }; }; return {\r\n\t\t\tload: function (stream, options) { throw new Error(\"Load method is not defined. Is the file jszip-load.js included ?\"); }, filter: function (search) {\r\n\t\t\t\tvar result = [], filename, relativePath, file, fileClone; for (filename in this.files) {\r\n\t\t\t\t\tfile = this.files[filename]; fileClone = new ZipObject(file.name, file.data, extend(file.options)); relativePath = filename.slice(this.root.length, filename.length); if (filename.slice(0, this.root.length) === this.root && search(relativePath, fileClone)) { result.push(fileClone); }\r\n\t\t\t\t}\r\n\t\t\t\treturn result;\r\n\t\t\t}, file: function (name, data, o) {\r\n\t\t\t\tif (arguments.length === 1) {\r\n\t\t\t\t\tif (name instanceof RegExp) { var regexp = name; return this.filter(function (relativePath, file) { return !file.options.dir && regexp.test(relativePath); }); }\r\n\t\t\t\t\telse { return this.filter(function (relativePath, file) { return !file.options.dir && relativePath === name; })[0] || null; }\r\n\t\t\t\t}\r\n\t\t\t\telse { name = this.root + name; fileAdd.call(this, name, data, o); }\r\n\t\t\t\treturn this;\r\n\t\t\t}, folder: function (arg) {\r\n\t\t\t\tif (!arg) { throw new Error(\"folder : wrong argument\"); }\r\n\t\t\t\tif (arg instanceof RegExp) { return this.filter(function (relativePath, file) { return file.options.dir && arg.test(relativePath); }); }\r\n\t\t\t\tvar name = this.root + arg; var newFolder = folderAdd.call(this, name); var ret = this.clone(); ret.root = newFolder.name; return ret;\r\n\t\t\t}, remove: function (name) {\r\n\t\t\t\tname = this.root + name; var file = this.files[name]; if (!file) { if (name.slice(-1) != \"/\") name += \"/\"; file = this.files[name]; }\r\n\t\t\t\tif (file) {\r\n\t\t\t\t\tif (!file.options.dir) { delete this.files[name]; }\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tvar kids = this.filter(function (relativePath, file) { return file.name.slice(0, name.length) === name; }); for (var i = 0; i < kids.length; i++) { delete this.files[kids[i].name]; }\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn this;\r\n\t\t\t}, generate: function (options) {\r\n\t\t\t\toptions = extend(options || {}, { base64: true, compression: \"STORE\" }); var compression = options.compression.toUpperCase(); var directory = [], files = [], fileOffset = 0; if (!JSZip.compressions[compression]) { throw compression + \" is not a valid compression method !\"; }\r\n\t\t\t\tfor (var name in this.files) {\r\n\t\t\t\t\tif (!this.files.hasOwnProperty(name)) { continue; }\r\n\t\t\t\t\tvar file = this.files[name]; var utfEncodedFileName = this.utf8encode(file.name); var fileRecord = \"\", dirRecord = \"\", data = prepareLocalHeaderData.call(this, file, utfEncodedFileName, compression); fileRecord = JSZip.signature.LOCAL_FILE_HEADER + data.header + utfEncodedFileName + data.compressedData; dirRecord = JSZip.signature.CENTRAL_FILE_HEADER + \"\\x14\\x00\" +\r\n\t\t\t\t\t\tdata.header + \"\\x00\\x00\" + \"\\x00\\x00\" + \"\\x00\\x00\" +\r\n\t\t\t\t\t\t(this.files[name].dir === true ? \"\\x10\\x00\\x00\\x00\" : \"\\x00\\x00\\x00\\x00\") +\r\n\t\t\t\t\t\tdecToHex(fileOffset, 4) +\r\n\t\t\t\t\t\tutfEncodedFileName; fileOffset += fileRecord.length; files.push(fileRecord); directory.push(dirRecord);\r\n\t\t\t\t}\r\n\t\t\t\tvar fileData = files.join(\"\"); var dirData = directory.join(\"\"); var dirEnd = \"\"; dirEnd = JSZip.signature.CENTRAL_DIRECTORY_END + \"\\x00\\x00\" + \"\\x00\\x00\" +\r\n\t\t\t\t\tdecToHex(files.length, 2) +\r\n\t\t\t\t\tdecToHex(files.length, 2) +\r\n\t\t\t\t\tdecToHex(dirData.length, 4) +\r\n\t\t\t\t\tdecToHex(fileData.length, 4) + \"\\x00\\x00\"; var zip = fileData + dirData + dirEnd; return (options.base64) ? JSZipBase64.encode(zip) : zip;\r\n\t\t\t}, crc32: function (str, crc) {\r\n\t\t\t\tif (str === \"\" || typeof str === \"undefined\") return 0; var table = \"00000000 77073096 EE0E612C 990951BA 076DC419 706AF48F E963A535 9E6495A3 0EDB8832 79DCB8A4 E0D5E91E 97D2D988 09B64C2B 7EB17CBD E7B82D07 90BF1D91 1DB71064 6AB020F2 F3B97148 84BE41DE 1ADAD47D 6DDDE4EB F4D4B551 83D385C7 136C9856 646BA8C0 FD62F97A 8A65C9EC 14015C4F 63066CD9 FA0F3D63 8D080DF5 3B6E20C8 4C69105E D56041E4 A2677172 3C03E4D1 4B04D447 D20D85FD A50AB56B 35B5A8FA 42B2986C DBBBC9D6 ACBCF940 32D86CE3 45DF5C75 DCD60DCF ABD13D59 26D930AC 51DE003A C8D75180 BFD06116 21B4F4B5 56B3C423 CFBA9599 B8BDA50F 2802B89E 5F058808 C60CD9B2 B10BE924 2F6F7C87 58684C11 C1611DAB B6662D3D 76DC4190 01DB7106 98D220BC EFD5102A 71B18589 06B6B51F 9FBFE4A5 E8B8D433 7807C9A2 0F00F934 9609A88E E10E9818 7F6A0DBB 086D3D2D 91646C97 E6635C01 6B6B51F4 1C6C6162 856530D8 F262004E 6C0695ED 1B01A57B 8208F4C1 F50FC457 65B0D9C6 12B7E950 8BBEB8EA FCB9887C 62DD1DDF 15DA2D49 8CD37CF3 FBD44C65 4DB26158 3AB551CE A3BC0074 D4BB30E2 4ADFA541 3DD895D7 A4D1C46D D3D6F4FB 4369E96A 346ED9FC AD678846 DA60B8D0 44042D73 33031DE5 AA0A4C5F DD0D7CC9 5005713C 270241AA BE0B1010 C90C2086 5768B525 206F85B3 B966D409 CE61E49F 5EDEF90E 29D9C998 B0D09822 C7D7A8B4 59B33D17 2EB40D81 B7BD5C3B C0BA6CAD EDB88320 9ABFB3B6 03B6E20C 74B1D29A EAD54739 9DD277AF 04DB2615 73DC1683 E3630B12 94643B84 0D6D6A3E 7A6A5AA8 E40ECF0B 9309FF9D 0A00AE27 7D079EB1 F00F9344 8708A3D2 1E01F268 6906C2FE F762575D 806567CB 196C3671 6E6B06E7 FED41B76 89D32BE0 10DA7A5A 67DD4ACC F9B9DF6F 8EBEEFF9 17B7BE43 60B08ED5 D6D6A3E8 A1D1937E 38D8C2C4 4FDFF252 D1BB67F1 A6BC5767 3FB506DD 48B2364B D80D2BDA AF0A1B4C 36034AF6 41047A60 DF60EFC3 A867DF55 316E8EEF 4669BE79 CB61B38C BC66831A 256FD2A0 5268E236 CC0C7795 BB0B4703 220216B9 5505262F C5BA3BBE B2BD0B28 2BB45A92 5CB36A04 C2D7FFA7 B5D0CF31 2CD99E8B 5BDEAE1D 9B64C2B0 EC63F226 756AA39C 026D930A 9C0906A9 EB0E363F 72076785 05005713 95BF4A82 E2B87A14 7BB12BAE 0CB61B38 92D28E9B E5D5BE0D 7CDCEFB7 0BDBDF21 86D3D2D4 F1D4E242 68DDB3F8 1FDA836E 81BE16CD F6B9265B 6FB077E1 18B74777 88085AE6 FF0F6A70 66063BCA 11010B5C 8F659EFF F862AE69 616BFFD3 166CCF45 A00AE278 D70DD2EE 4E048354 3903B3C2 A7672661 D06016F7 4969474D 3E6E77DB AED16A4A D9D65ADC 40DF0B66 37D83BF0 A9BCAE53 DEBB9EC5 47B2CF7F 30B5FFE9 BDBDF21C CABAC28A 53B39330 24B4A3A6 BAD03605 CDD70693 54DE5729 23D967BF B3667A2E C4614AB8 5D681B02 2A6F2B94 B40BBE37 C30C8EA1 5A05DF1B 2D02EF8D\"; if (typeof (crc) == \"undefined\") { crc = 0; }\r\n\t\t\t\tvar x = 0; var y = 0; crc = crc ^ (-1); for (var i = 0, iTop = str.length; i < iTop; i++) { y = (crc ^ str.charCodeAt(i)) & 0xFF; x = \"0x\" + table.substr(y * 9, 8); crc = (crc >>> 8) ^ x; }\r\n\t\t\t\treturn crc ^ (-1);\r\n\t\t\t}, clone: function () {\r\n\t\t\t\tvar newObj = new JSZip(); for (var i in this) {\r\n\t\t\t\t\tif (typeof this[i] !== \"function\") { newObj[i] = this[i]; }\r\n\t\t\t\t}\r\n\t\t\t\treturn newObj;\r\n\t\t\t}, utf8encode: function (string) {\r\n\t\t\t\tstring = string.replace(/\\r\\n/g, \"\\n\"); var utftext = \"\"; for (var n = 0; n < string.length; n++) {\r\n\t\t\t\t\tvar c = string.charCodeAt(n); if (c < 128) { utftext += String.fromCharCode(c); }\r\n\t\t\t\t\telse if ((c > 127) && (c < 2048)) { utftext += String.fromCharCode((c >> 6) | 192); utftext += String.fromCharCode((c & 63) | 128); }\r\n\t\t\t\t\telse { utftext += String.fromCharCode((c >> 12) | 224); utftext += String.fromCharCode(((c >> 6) & 63) | 128); utftext += String.fromCharCode((c & 63) | 128); }\r\n\t\t\t\t}\r\n\t\t\t\treturn utftext;\r\n\t\t\t}, utf8decode: function (utftext) {\r\n\t\t\t\tvar string = \"\"; var i = 0; var c = 0, c1 = 0, c2 = 0, c3 = 0; while (i < utftext.length) {\r\n\t\t\t\t\tc = utftext.charCodeAt(i); if (c < 128) { string += String.fromCharCode(c); i++; }\r\n\t\t\t\t\telse if ((c > 191) && (c < 224)) { c2 = utftext.charCodeAt(i + 1); string += String.fromCharCode(((c & 31) << 6) | (c2 & 63)); i += 2; }\r\n\t\t\t\t\telse { c2 = utftext.charCodeAt(i + 1); c3 = utftext.charCodeAt(i + 2); string += String.fromCharCode(((c & 15) << 12) | ((c2 & 63) << 6) | (c3 & 63)); i += 3; }\r\n\t\t\t\t}\r\n\t\t\t\treturn string;\r\n\t\t\t}\r\n\t\t};\r\n\t})(); JSZip.compressions = {\r\n\t\t\"STORE\": {\r\n\t\t\tmagic: \"\\x00\\x00\", compress: function (content) { return content; }, uncompress: function (content) { return content; }\r\n\t\t}\r\n\t}; var JSZipBase64 = function () {\r\n\t\tvar _keyStr = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\"; return {\r\n\t\t\tencode: function (input, utf8) {\r\n\t\t\t\tvar output = \"\"; var chr1, chr2, chr3, enc1, enc2, enc3, enc4; var i = 0; while (i < input.length) {\r\n\t\t\t\t\tchr1 = input.charCodeAt(i++); chr2 = input.charCodeAt(i++); chr3 = input.charCodeAt(i++); enc1 = chr1 >> 2; enc2 = ((chr1 & 3) << 4) | (chr2 >> 4); enc3 = ((chr2 & 15) << 2) | (chr3 >> 6); enc4 = chr3 & 63; if (isNaN(chr2)) { enc3 = enc4 = 64; } else if (isNaN(chr3)) { enc4 = 64; }\r\n\t\t\t\t\toutput = output +\r\n\t\t\t\t\t\t_keyStr.charAt(enc1) + _keyStr.charAt(enc2) +\r\n\t\t\t\t\t\t_keyStr.charAt(enc3) + _keyStr.charAt(enc4);\r\n\t\t\t\t}\r\n\t\t\t\treturn output;\r\n\t\t\t}, decode: function (input, utf8) {\r\n\t\t\t\tvar output = \"\"; var chr1, chr2, chr3; var enc1, enc2, enc3, enc4; var i = 0; input = input.replace(/[^A-Za-z0-9\\+\\/\\=]/g, \"\"); while (i < input.length) {\r\n\t\t\t\t\tenc1 = _keyStr.indexOf(input.charAt(i++)); enc2 = _keyStr.indexOf(input.charAt(i++)); enc3 = _keyStr.indexOf(input.charAt(i++)); enc4 = _keyStr.indexOf(input.charAt(i++)); chr1 = (enc1 << 2) | (enc2 >> 4); chr2 = ((enc2 & 15) << 4) | (enc3 >> 2); chr3 = ((enc3 & 3) << 6) | enc4; output = output + String.fromCharCode(chr1); if (enc3 != 64) { output = output + String.fromCharCode(chr2); }\r\n\t\t\t\t\tif (enc4 != 64) { output = output + String.fromCharCode(chr3); }\r\n\t\t\t\t}\r\n\t\t\t\treturn output;\r\n\t\t\t}\r\n\t\t};\r\n\t}();\r\n\r\n\r\n\tif (!JSZip) { throw \"JSZip not defined\"; }\r\n\t(function () {\r\n\t\tvar zip_WSIZE = 32768; var zip_STORED_BLOCK = 0; var zip_STATIC_TREES = 1; var zip_DYN_TREES = 2; var zip_DEFAULT_LEVEL = 6; var zip_FULL_SEARCH = true; var zip_INBUFSIZ = 32768; var zip_INBUF_EXTRA = 64; var zip_OUTBUFSIZ = 1024 * 8; var zip_window_size = 2 * zip_WSIZE; var zip_MIN_MATCH = 3; var zip_MAX_MATCH = 258; var zip_BITS = 16; var zip_LIT_BUFSIZE = 0x2000; var zip_HASH_BITS = 13; if (zip_LIT_BUFSIZE > zip_INBUFSIZ)\r\n\t\t\talert(\"error: zip_INBUFSIZ is too small\"); if ((zip_WSIZE << 1) > (1 << zip_BITS))\r\n\t\t\talert(\"error: zip_WSIZE is too large\"); if (zip_HASH_BITS > zip_BITS - 1)\r\n\t\t\talert(\"error: zip_HASH_BITS is too large\"); if (zip_HASH_BITS < 8 || zip_MAX_MATCH != 258)\r\n\t\t\talert(\"error: Code too clever\"); var zip_DIST_BUFSIZE = zip_LIT_BUFSIZE; var zip_HASH_SIZE = 1 << zip_HASH_BITS; var zip_HASH_MASK = zip_HASH_SIZE - 1; var zip_WMASK = zip_WSIZE - 1; var zip_NIL = 0; var zip_TOO_FAR = 4096; var zip_MIN_LOOKAHEAD = zip_MAX_MATCH + zip_MIN_MATCH + 1; var zip_MAX_DIST = zip_WSIZE - zip_MIN_LOOKAHEAD; var zip_SMALLEST = 1; var zip_MAX_BITS = 15; var zip_MAX_BL_BITS = 7; var zip_LENGTH_CODES = 29; var zip_LITERALS = 256; var zip_END_BLOCK = 256; var zip_L_CODES = zip_LITERALS + 1 + zip_LENGTH_CODES; var zip_D_CODES = 30; var zip_BL_CODES = 19; var zip_REP_3_6 = 16; var zip_REPZ_3_10 = 17; var zip_REPZ_11_138 = 18; var zip_HEAP_SIZE = 2 * zip_L_CODES + 1; var zip_H_SHIFT = parseInt((zip_HASH_BITS + zip_MIN_MATCH - 1) / zip_MIN_MATCH); var zip_free_queue; var zip_qhead, zip_qtail; var zip_initflag; var zip_outbuf = null; var zip_outcnt, zip_outoff; var zip_complete; var zip_window; var zip_d_buf; var zip_l_buf; var zip_prev; var zip_bi_buf; var zip_bi_valid; var zip_block_start; var zip_ins_h; var zip_hash_head; var zip_prev_match; var zip_match_available; var zip_match_length; var zip_prev_length; var zip_strstart; var zip_match_start; var zip_eofile; var zip_lookahead; var zip_max_chain_length; var zip_max_lazy_match; var zip_compr_level; var zip_good_match; var zip_nice_match; var zip_dyn_ltree; var zip_dyn_dtree; var zip_static_ltree; var zip_static_dtree; var zip_bl_tree; var zip_l_desc; var zip_d_desc; var zip_bl_desc; var zip_bl_count; var zip_heap; var zip_heap_len; var zip_heap_max; var zip_depth; var zip_length_code; var zip_dist_code; var zip_base_length; var zip_base_dist; var zip_flag_buf; var zip_last_lit; var zip_last_dist; var zip_last_flags; var zip_flags; var zip_flag_bit; var zip_opt_len; var zip_static_len; var zip_deflate_data; var zip_deflate_pos; var zip_DeflateCT = function () { this.fc = 0; this.dl = 0; }\r\n\t\tvar zip_DeflateTreeDesc = function () { this.dyn_tree = null; this.static_tree = null; this.extra_bits = null; this.extra_base = 0; this.elems = 0; this.max_length = 0; this.max_code = 0; }\r\n\t\tvar zip_DeflateConfiguration = function (a, b, c, d) { this.good_length = a; this.max_lazy = b; this.nice_length = c; this.max_chain = d; }\r\n\t\tvar zip_DeflateBuffer = function () { this.next = null; this.len = 0; this.ptr = new Array(zip_OUTBUFSIZ); this.off = 0; }\r\n\t\tvar zip_extra_lbits = new Array(0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0); var zip_extra_dbits = new Array(0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13); var zip_extra_blbits = new Array(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 3, 7); var zip_bl_order = new Array(16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15); var zip_configuration_table = new Array(new zip_DeflateConfiguration(0, 0, 0, 0), new zip_DeflateConfiguration(4, 4, 8, 4), new zip_DeflateConfiguration(4, 5, 16, 8), new zip_DeflateConfiguration(4, 6, 32, 32), new zip_DeflateConfiguration(4, 4, 16, 16), new zip_DeflateConfiguration(8, 16, 32, 32), new zip_DeflateConfiguration(8, 16, 128, 128), new zip_DeflateConfiguration(8, 32, 128, 256), new zip_DeflateConfiguration(32, 128, 258, 1024), new zip_DeflateConfiguration(32, 258, 258, 4096)); var zip_deflate_start = function (level) {\r\n\t\t\tvar i; if (!level)\r\n\t\t\t\tlevel = zip_DEFAULT_LEVEL; else if (level < 1)\r\n\t\t\t\tlevel = 1; else if (level > 9)\r\n\t\t\t\tlevel = 9; zip_compr_level = level; zip_initflag = false; zip_eofile = false; if (zip_outbuf != null)\r\n\t\t\t\treturn; zip_free_queue = zip_qhead = zip_qtail = null; zip_outbuf = new Array(zip_OUTBUFSIZ); zip_window = new Array(zip_window_size); zip_d_buf = new Array(zip_DIST_BUFSIZE); zip_l_buf = new Array(zip_INBUFSIZ + zip_INBUF_EXTRA); zip_prev = new Array(1 << zip_BITS); zip_dyn_ltree = new Array(zip_HEAP_SIZE); for (i = 0; i < zip_HEAP_SIZE; i++)\r\n\t\t\t\tzip_dyn_ltree[i] = new zip_DeflateCT(); zip_dyn_dtree = new Array(2 * zip_D_CODES + 1); for (i = 0; i < 2 * zip_D_CODES + 1; i++)\r\n\t\t\t\tzip_dyn_dtree[i] = new zip_DeflateCT(); zip_static_ltree = new Array(zip_L_CODES + 2); for (i = 0; i < zip_L_CODES + 2; i++)\r\n\t\t\t\tzip_static_ltree[i] = new zip_DeflateCT(); zip_static_dtree = new Array(zip_D_CODES); for (i = 0; i < zip_D_CODES; i++)\r\n\t\t\t\tzip_static_dtree[i] = new zip_DeflateCT(); zip_bl_tree = new Array(2 * zip_BL_CODES + 1); for (i = 0; i < 2 * zip_BL_CODES + 1; i++)\r\n\t\t\t\tzip_bl_tree[i] = new zip_DeflateCT(); zip_l_desc = new zip_DeflateTreeDesc(); zip_d_desc = new zip_DeflateTreeDesc(); zip_bl_desc = new zip_DeflateTreeDesc(); zip_bl_count = new Array(zip_MAX_BITS + 1); zip_heap = new Array(2 * zip_L_CODES + 1); zip_depth = new Array(2 * zip_L_CODES + 1); zip_length_code = new Array(zip_MAX_MATCH - zip_MIN_MATCH + 1); zip_dist_code = new Array(512); zip_base_length = new Array(zip_LENGTH_CODES); zip_base_dist = new Array(zip_D_CODES); zip_flag_buf = new Array(parseInt(zip_LIT_BUFSIZE / 8));\r\n\t\t}\r\n\t\tvar zip_deflate_end = function () { zip_free_queue = zip_qhead = zip_qtail = null; zip_outbuf = null; zip_window = null; zip_d_buf = null; zip_l_buf = null; zip_prev = null; zip_dyn_ltree = null; zip_dyn_dtree = null; zip_static_ltree = null; zip_static_dtree = null; zip_bl_tree = null; zip_l_desc = null; zip_d_desc = null; zip_bl_desc = null; zip_bl_count = null; zip_heap = null; zip_depth = null; zip_length_code = null; zip_dist_code = null; zip_base_length = null; zip_base_dist = null; zip_flag_buf = null; }\r\n\t\tvar zip_reuse_queue = function (p) { p.next = zip_free_queue; zip_free_queue = p; }\r\n\t\tvar zip_new_queue = function () {\r\n\t\t\tvar p; if (zip_free_queue != null) { p = zip_free_queue; zip_free_queue = zip_free_queue.next; }\r\n\t\t\telse\r\n\t\t\t\tp = new zip_DeflateBuffer(); p.next = null; p.len = p.off = 0; return p;\r\n\t\t}\r\n\t\tvar zip_head1 = function (i) { return zip_prev[zip_WSIZE + i]; }\r\n\t\tvar zip_head2 = function (i, val) { return zip_prev[zip_WSIZE + i] = val; }\r\n\t\tvar zip_put_byte = function (c) {\r\n\t\tzip_outbuf[zip_outoff + zip_outcnt++] = c; if (zip_outoff + zip_outcnt == zip_OUTBUFSIZ)\r\n\t\t\tzip_qoutbuf();\r\n\t\t}\r\n\t\tvar zip_put_short = function (w) { w &= 0xffff; if (zip_outoff + zip_outcnt < zip_OUTBUFSIZ - 2) { zip_outbuf[zip_outoff + zip_outcnt++] = (w & 0xff); zip_outbuf[zip_outoff + zip_outcnt++] = (w >>> 8); } else { zip_put_byte(w & 0xff); zip_put_byte(w >>> 8); } }\r\n\t\tvar zip_INSERT_STRING = function () { zip_ins_h = ((zip_ins_h << zip_H_SHIFT) ^ (zip_window[zip_strstart + zip_MIN_MATCH - 1] & 0xff)) & zip_HASH_MASK; zip_hash_head = zip_head1(zip_ins_h); zip_prev[zip_strstart & zip_WMASK] = zip_hash_head; zip_head2(zip_ins_h, zip_strstart); }\r\n\t\tvar zip_SEND_CODE = function (c, tree) { zip_send_bits(tree[c].fc, tree[c].dl); }\r\n\t\tvar zip_D_CODE = function (dist) { return (dist < 256 ? zip_dist_code[dist] : zip_dist_code[256 + (dist >> 7)]) & 0xff; }\r\n\t\tvar zip_SMALLER = function (tree, n, m) { return tree[n].fc < tree[m].fc || (tree[n].fc == tree[m].fc && zip_depth[n] <= zip_depth[m]); }\r\n\t\tvar zip_read_buff = function (buff, offset, n) {\r\n\t\t\tvar i; for (i = 0; i < n && zip_deflate_pos < zip_deflate_data.length; i++)\r\n\t\t\t\tbuff[offset + i] = zip_deflate_data.charCodeAt(zip_deflate_pos++) & 0xff; return i;\r\n\t\t}\r\n\t\tvar zip_lm_init = function () {\r\n\t\t\tvar j; for (j = 0; j < zip_HASH_SIZE; j++)\r\n\t\t\t\tzip_prev[zip_WSIZE + j] = 0; zip_max_lazy_match = zip_configuration_table[zip_compr_level].max_lazy; zip_good_match = zip_configuration_table[zip_compr_level].good_length; if (!zip_FULL_SEARCH)\r\n\t\t\t\tzip_nice_match = zip_configuration_table[zip_compr_level].nice_length; zip_max_chain_length = zip_configuration_table[zip_compr_level].max_chain; zip_strstart = 0; zip_block_start = 0; zip_lookahead = zip_read_buff(zip_window, 0, 2 * zip_WSIZE); if (zip_lookahead <= 0) { zip_eofile = true; zip_lookahead = 0; return; }\r\n\t\t\tzip_eofile = false; while (zip_lookahead < zip_MIN_LOOKAHEAD && !zip_eofile)\r\n\t\t\t\tzip_fill_window(); zip_ins_h = 0; for (j = 0; j < zip_MIN_MATCH - 1; j++) { zip_ins_h = ((zip_ins_h << zip_H_SHIFT) ^ (zip_window[j] & 0xff)) & zip_HASH_MASK; }\r\n\t\t}\r\n\t\tvar zip_longest_match = function (cur_match) {\r\n\t\t\tvar chain_length = zip_max_chain_length; var scanp = zip_strstart; var matchp; var len; var best_len = zip_prev_length; var limit = (zip_strstart > zip_MAX_DIST ? zip_strstart - zip_MAX_DIST : zip_NIL); var strendp = zip_strstart + zip_MAX_MATCH; var scan_end1 = zip_window[scanp + best_len - 1]; var scan_end = zip_window[scanp + best_len]; if (zip_prev_length >= zip_good_match)\r\n\t\t\t\tchain_length >>= 2; do {\r\n\t\t\t\t\tmatchp = cur_match; if (zip_window[matchp + best_len] != scan_end || zip_window[matchp + best_len - 1] != scan_end1 || zip_window[matchp] != zip_window[scanp] || zip_window[++matchp] != zip_window[scanp + 1]) { continue; }\r\n\t\t\t\t\tscanp += 2; matchp++; do { } while (zip_window[++scanp] == zip_window[++matchp] && zip_window[++scanp] == zip_window[++matchp] && zip_window[++scanp] == zip_window[++matchp] && zip_window[++scanp] == zip_window[++matchp] && zip_window[++scanp] == zip_window[++matchp] && zip_window[++scanp] == zip_window[++matchp] && zip_window[++scanp] == zip_window[++matchp] && zip_window[++scanp] == zip_window[++matchp] && scanp < strendp); len = zip_MAX_MATCH - (strendp - scanp); scanp = strendp - zip_MAX_MATCH; if (len > best_len) {\r\n\t\t\t\t\t\tzip_match_start = cur_match; best_len = len; if (zip_FULL_SEARCH) { if (len >= zip_MAX_MATCH) break; } else { if (len >= zip_nice_match) break; }\r\n\t\t\t\t\t\tscan_end1 = zip_window[scanp + best_len - 1]; scan_end = zip_window[scanp + best_len];\r\n\t\t\t\t\t}\r\n\t\t\t\t} while ((cur_match = zip_prev[cur_match & zip_WMASK]) > limit && --chain_length != 0); return best_len;\r\n\t\t}\r\n\t\tvar zip_fill_window = function () {\r\n\t\t\tvar n, m; var more = zip_window_size - zip_lookahead - zip_strstart; if (more == -1) { more--; } else if (zip_strstart >= zip_WSIZE + zip_MAX_DIST) {\r\n\t\t\t\tfor (n = 0; n < zip_WSIZE; n++)\r\n\t\t\t\t\tzip_window[n] = zip_window[n + zip_WSIZE]; zip_match_start -= zip_WSIZE; zip_strstart -= zip_WSIZE; zip_block_start -= zip_WSIZE; for (n = 0; n < zip_HASH_SIZE; n++) { m = zip_head1(n); zip_head2(n, m >= zip_WSIZE ? m - zip_WSIZE : zip_NIL); }\r\n\t\t\t\tfor (n = 0; n < zip_WSIZE; n++) { m = zip_prev[n]; zip_prev[n] = (m >= zip_WSIZE ? m - zip_WSIZE : zip_NIL); }\r\n\t\t\t\tmore += zip_WSIZE;\r\n\t\t\t}\r\n\t\t\tif (!zip_eofile) {\r\n\t\t\t\tn = zip_read_buff(zip_window, zip_strstart + zip_lookahead, more); if (n <= 0)\r\n\t\t\t\t\tzip_eofile = true; else\r\n\t\t\t\t\tzip_lookahead += n;\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar zip_deflate_fast = function () {\r\n\t\t\twhile (zip_lookahead != 0 && zip_qhead == null) {\r\n\t\t\t\tvar flush; zip_INSERT_STRING(); if (zip_hash_head != zip_NIL && zip_strstart - zip_hash_head <= zip_MAX_DIST) {\r\n\t\t\t\t\tzip_match_length = zip_longest_match(zip_hash_head); if (zip_match_length > zip_lookahead)\r\n\t\t\t\t\t\tzip_match_length = zip_lookahead;\r\n\t\t\t\t}\r\n\t\t\t\tif (zip_match_length >= zip_MIN_MATCH) { flush = zip_ct_tally(zip_strstart - zip_match_start, zip_match_length - zip_MIN_MATCH); zip_lookahead -= zip_match_length; if (zip_match_length <= zip_max_lazy_match) { zip_match_length--; do { zip_strstart++; zip_INSERT_STRING(); } while (--zip_match_length != 0); zip_strstart++; } else { zip_strstart += zip_match_length; zip_match_length = 0; zip_ins_h = zip_window[zip_strstart] & 0xff; zip_ins_h = ((zip_ins_h << zip_H_SHIFT) ^ (zip_window[zip_strstart + 1] & 0xff)) & zip_HASH_MASK; } } else { flush = zip_ct_tally(0, zip_window[zip_strstart] & 0xff); zip_lookahead--; zip_strstart++; }\r\n\t\t\t\tif (flush) { zip_flush_block(0); zip_block_start = zip_strstart; }\r\n\t\t\t\twhile (zip_lookahead < zip_MIN_LOOKAHEAD && !zip_eofile)\r\n\t\t\t\t\tzip_fill_window();\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar zip_deflate_better = function () {\r\n\t\t\twhile (zip_lookahead != 0 && zip_qhead == null) {\r\n\t\t\t\tzip_INSERT_STRING(); zip_prev_length = zip_match_length; zip_prev_match = zip_match_start; zip_match_length = zip_MIN_MATCH - 1; if (zip_hash_head != zip_NIL && zip_prev_length < zip_max_lazy_match && zip_strstart - zip_hash_head <= zip_MAX_DIST) {\r\n\t\t\t\t\tzip_match_length = zip_longest_match(zip_hash_head); if (zip_match_length > zip_lookahead)\r\n\t\t\t\t\t\tzip_match_length = zip_lookahead; if (zip_match_length == zip_MIN_MATCH && zip_strstart - zip_match_start > zip_TOO_FAR) { zip_match_length--; }\r\n\t\t\t\t}\r\n\t\t\t\tif (zip_prev_length >= zip_MIN_MATCH && zip_match_length <= zip_prev_length) { var flush; flush = zip_ct_tally(zip_strstart - 1 - zip_prev_match, zip_prev_length - zip_MIN_MATCH); zip_lookahead -= zip_prev_length - 1; zip_prev_length -= 2; do { zip_strstart++; zip_INSERT_STRING(); } while (--zip_prev_length != 0); zip_match_available = 0; zip_match_length = zip_MIN_MATCH - 1; zip_strstart++; if (flush) { zip_flush_block(0); zip_block_start = zip_strstart; } } else if (zip_match_available != 0) {\r\n\t\t\t\t\tif (zip_ct_tally(0, zip_window[zip_strstart - 1] & 0xff)) { zip_flush_block(0); zip_block_start = zip_strstart; }\r\n\t\t\t\t\tzip_strstart++; zip_lookahead--;\r\n\t\t\t\t} else { zip_match_available = 1; zip_strstart++; zip_lookahead--; }\r\n\t\t\t\twhile (zip_lookahead < zip_MIN_LOOKAHEAD && !zip_eofile)\r\n\t\t\t\t\tzip_fill_window();\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar zip_init_deflate = function () {\r\n\t\t\tif (zip_eofile)\r\n\t\t\t\treturn; zip_bi_buf = 0; zip_bi_valid = 0; zip_ct_init(); zip_lm_init(); zip_qhead = null; zip_outcnt = 0; zip_outoff = 0; if (zip_compr_level <= 3) { zip_prev_length = zip_MIN_MATCH - 1; zip_match_length = 0; }\r\n\t\t\telse { zip_match_length = zip_MIN_MATCH - 1; zip_match_available = 0; }\r\n\t\t\tzip_complete = false;\r\n\t\t}\r\n\t\tvar zip_deflate_internal = function (buff, off, buff_size) {\r\n\t\t\tvar n; if (!zip_initflag) { zip_init_deflate(); zip_initflag = true; if (zip_lookahead == 0) { zip_complete = true; return 0; } }\r\n\t\t\tif ((n = zip_qcopy(buff, off, buff_size)) == buff_size)\r\n\t\t\t\treturn buff_size; if (zip_complete)\r\n\t\t\t\treturn n; if (zip_compr_level <= 3)\r\n\t\t\t\tzip_deflate_fast(); else\r\n\t\t\t\tzip_deflate_better(); if (zip_lookahead == 0) {\r\n\t\t\t\t\tif (zip_match_available != 0)\r\n\t\t\t\t\t\tzip_ct_tally(0, zip_window[zip_strstart - 1] & 0xff); zip_flush_block(1); zip_complete = true;\r\n\t\t\t\t}\r\n\t\t\treturn n + zip_qcopy(buff, n + off, buff_size - n);\r\n\t\t}\r\n\t\tvar zip_qcopy = function (buff, off, buff_size) {\r\n\t\t\tvar n, i, j; n = 0; while (zip_qhead != null && n < buff_size) {\r\n\t\t\t\ti = buff_size - n; if (i > zip_qhead.len)\r\n\t\t\t\t\ti = zip_qhead.len; for (j = 0; j < i; j++)\r\n\t\t\t\t\tbuff[off + n + j] = zip_qhead.ptr[zip_qhead.off + j]; zip_qhead.off += i; zip_qhead.len -= i; n += i; if (zip_qhead.len == 0) { var p; p = zip_qhead; zip_qhead = zip_qhead.next; zip_reuse_queue(p); }\r\n\t\t\t}\r\n\t\t\tif (n == buff_size)\r\n\t\t\t\treturn n; if (zip_outoff < zip_outcnt) {\r\n\t\t\t\t\ti = buff_size - n; if (i > zip_outcnt - zip_outoff)\r\n\t\t\t\t\t\ti = zip_outcnt - zip_outoff; for (j = 0; j < i; j++)\r\n\t\t\t\t\t\tbuff[off + n + j] = zip_outbuf[zip_outoff + j]; zip_outoff += i; n += i; if (zip_outcnt == zip_outoff)\r\n\t\t\t\t\t\tzip_outcnt = zip_outoff = 0;\r\n\t\t\t\t}\r\n\t\t\treturn n;\r\n\t\t}\r\n\t\tvar zip_ct_init = function () {\r\n\t\t\tvar n; var bits; var length; var code; var dist; if (zip_static_dtree[0].dl != 0) return; zip_l_desc.dyn_tree = zip_dyn_ltree; zip_l_desc.static_tree = zip_static_ltree; zip_l_desc.extra_bits = zip_extra_lbits; zip_l_desc.extra_base = zip_LITERALS + 1; zip_l_desc.elems = zip_L_CODES; zip_l_desc.max_length = zip_MAX_BITS; zip_l_desc.max_code = 0; zip_d_desc.dyn_tree = zip_dyn_dtree; zip_d_desc.static_tree = zip_static_dtree; zip_d_desc.extra_bits = zip_extra_dbits; zip_d_desc.extra_base = 0; zip_d_desc.elems = zip_D_CODES; zip_d_desc.max_length = zip_MAX_BITS; zip_d_desc.max_code = 0; zip_bl_desc.dyn_tree = zip_bl_tree; zip_bl_desc.static_tree = null; zip_bl_desc.extra_bits = zip_extra_blbits; zip_bl_desc.extra_base = 0; zip_bl_desc.elems = zip_BL_CODES; zip_bl_desc.max_length = zip_MAX_BL_BITS; zip_bl_desc.max_code = 0; length = 0; for (code = 0; code < zip_LENGTH_CODES - 1; code++) {\r\n\t\t\tzip_base_length[code] = length; for (n = 0; n < (1 << zip_extra_lbits[code]); n++)\r\n\t\t\t\tzip_length_code[length++] = code;\r\n\t\t\t}\r\n\t\t\tzip_length_code[length - 1] = code; dist = 0; for (code = 0; code < 16; code++) { zip_base_dist[code] = dist; for (n = 0; n < (1 << zip_extra_dbits[code]); n++) { zip_dist_code[dist++] = code; } }\r\n\t\t\tdist >>= 7; for (; code < zip_D_CODES; code++) {\r\n\t\t\tzip_base_dist[code] = dist << 7; for (n = 0; n < (1 << (zip_extra_dbits[code] - 7)); n++)\r\n\t\t\t\tzip_dist_code[256 + dist++] = code;\r\n\t\t\t}\r\n\t\t\tfor (bits = 0; bits <= zip_MAX_BITS; bits++)\r\n\t\t\t\tzip_bl_count[bits] = 0; n = 0; while (n <= 143) { zip_static_ltree[n++].dl = 8; zip_bl_count[8]++; }\r\n\t\t\twhile (n <= 255) { zip_static_ltree[n++].dl = 9; zip_bl_count[9]++; }\r\n\t\t\twhile (n <= 279) { zip_static_ltree[n++].dl = 7; zip_bl_count[7]++; }\r\n\t\t\twhile (n <= 287) { zip_static_ltree[n++].dl = 8; zip_bl_count[8]++; }\r\n\t\t\tzip_gen_codes(zip_static_ltree, zip_L_CODES + 1); for (n = 0; n < zip_D_CODES; n++) { zip_static_dtree[n].dl = 5; zip_static_dtree[n].fc = zip_bi_reverse(n, 5); }\r\n\t\t\tzip_init_block();\r\n\t\t}\r\n\t\tvar zip_init_block = function () { var n; for (n = 0; n < zip_L_CODES; n++)zip_dyn_ltree[n].fc = 0; for (n = 0; n < zip_D_CODES; n++)zip_dyn_dtree[n].fc = 0; for (n = 0; n < zip_BL_CODES; n++)zip_bl_tree[n].fc = 0; zip_dyn_ltree[zip_END_BLOCK].fc = 1; zip_opt_len = zip_static_len = 0; zip_last_lit = zip_last_dist = zip_last_flags = 0; zip_flags = 0; zip_flag_bit = 1; }\r\n\t\tvar zip_pqdownheap = function (tree, k) {\r\n\t\t\tvar v = zip_heap[k]; var j = k << 1; while (j <= zip_heap_len) {\r\n\t\t\t\tif (j < zip_heap_len && zip_SMALLER(tree, zip_heap[j + 1], zip_heap[j]))\r\n\t\t\t\t\tj++; if (zip_SMALLER(tree, v, zip_heap[j]))\r\n\t\t\t\t\tbreak; zip_heap[k] = zip_heap[j]; k = j; j <<= 1;\r\n\t\t\t}\r\n\t\t\tzip_heap[k] = v;\r\n\t\t}\r\n\t\tvar zip_gen_bitlen = function (desc) {\r\n\t\t\tvar tree = desc.dyn_tree; var extra = desc.extra_bits; var base = desc.extra_base; var max_code = desc.max_code; var max_length = desc.max_length; var stree = desc.static_tree; var h; var n, m; var bits; var xbits; var f; var overflow = 0; for (bits = 0; bits <= zip_MAX_BITS; bits++)\r\n\t\t\t\tzip_bl_count[bits] = 0; tree[zip_heap[zip_heap_max]].dl = 0; for (h = zip_heap_max + 1; h < zip_HEAP_SIZE; h++) {\r\n\t\t\t\t\tn = zip_heap[h]; bits = tree[tree[n].dl].dl + 1; if (bits > max_length) { bits = max_length; overflow++; }\r\n\t\t\t\t\ttree[n].dl = bits; if (n > max_code)\r\n\t\t\t\t\t\tcontinue; zip_bl_count[bits]++; xbits = 0; if (n >= base)\r\n\t\t\t\t\t\txbits = extra[n - base]; f = tree[n].fc; zip_opt_len += f * (bits + xbits); if (stree != null)\r\n\t\t\t\t\t\tzip_static_len += f * (stree[n].dl + xbits);\r\n\t\t\t\t}\r\n\t\t\tif (overflow == 0)\r\n\t\t\t\treturn; do {\r\n\t\t\t\t\tbits = max_length - 1; while (zip_bl_count[bits] == 0)\r\n\t\t\t\t\t\tbits--; zip_bl_count[bits]--; zip_bl_count[bits + 1] += 2; zip_bl_count[max_length]--; overflow -= 2;\r\n\t\t\t\t} while (overflow > 0); for (bits = max_length; bits != 0; bits--) {\r\n\t\t\t\t\tn = zip_bl_count[bits]; while (n != 0) {\r\n\t\t\t\t\t\tm = zip_heap[--h]; if (m > max_code)\r\n\t\t\t\t\t\t\tcontinue; if (tree[m].dl != bits) { zip_opt_len += (bits - tree[m].dl) * tree[m].fc; tree[m].fc = bits; }\r\n\t\t\t\t\t\tn--;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t}\r\n\t\tvar zip_gen_codes = function (tree, max_code) {\r\n\t\t\tvar next_code = new Array(zip_MAX_BITS + 1); var code = 0; var bits; var n; for (bits = 1; bits <= zip_MAX_BITS; bits++) { code = ((code + zip_bl_count[bits - 1]) << 1); next_code[bits] = code; }\r\n\t\t\tfor (n = 0; n <= max_code; n++) {\r\n\t\t\t\tvar len = tree[n].dl; if (len == 0)\r\n\t\t\t\t\tcontinue; tree[n].fc = zip_bi_reverse(next_code[len]++, len);\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar zip_build_tree = function (desc) {\r\n\t\t\tvar tree = desc.dyn_tree; var stree = desc.static_tree; var elems = desc.elems; var n, m; var max_code = -1; var node = elems; zip_heap_len = 0; zip_heap_max = zip_HEAP_SIZE; for (n = 0; n < elems; n++) {\r\n\t\t\t\tif (tree[n].fc != 0) { zip_heap[++zip_heap_len] = max_code = n; zip_depth[n] = 0; } else\r\n\t\t\t\t\ttree[n].dl = 0;\r\n\t\t\t}\r\n\t\t\twhile (zip_heap_len < 2) {\r\n\t\t\t\tvar xnew = zip_heap[++zip_heap_len] = (max_code < 2 ? ++max_code : 0); tree[xnew].fc = 1; zip_depth[xnew] = 0; zip_opt_len--; if (stree != null)\r\n\t\t\t\t\tzip_static_len -= stree[xnew].dl;\r\n\t\t\t}\r\n\t\t\tdesc.max_code = max_code; for (n = zip_heap_len >> 1; n >= 1; n--)\r\n\t\t\t\tzip_pqdownheap(tree, n); do {\r\n\t\t\t\t\tn = zip_heap[zip_SMALLEST]; zip_heap[zip_SMALLEST] = zip_heap[zip_heap_len--]; zip_pqdownheap(tree, zip_SMALLEST); m = zip_heap[zip_SMALLEST]; zip_heap[--zip_heap_max] = n; zip_heap[--zip_heap_max] = m; tree[node].fc = tree[n].fc + tree[m].fc; if (zip_depth[n] > zip_depth[m] + 1)\r\n\t\t\t\t\t\tzip_depth[node] = zip_depth[n]; else\r\n\t\t\t\t\t\tzip_depth[node] = zip_depth[m] + 1; tree[n].dl = tree[m].dl = node; zip_heap[zip_SMALLEST] = node++; zip_pqdownheap(tree, zip_SMALLEST);\r\n\t\t\t\t} while (zip_heap_len >= 2); zip_heap[--zip_heap_max] = zip_heap[zip_SMALLEST]; zip_gen_bitlen(desc); zip_gen_codes(tree, max_code);\r\n\t\t}\r\n\t\tvar zip_scan_tree = function (tree, max_code) {\r\n\t\t\tvar n; var prevlen = -1; var curlen; var nextlen = tree[0].dl; var count = 0; var max_count = 7; var min_count = 4; if (nextlen == 0) { max_count = 138; min_count = 3; }\r\n\t\t\ttree[max_code + 1].dl = 0xffff; for (n = 0; n <= max_code; n++) {\r\n\t\t\t\tcurlen = nextlen; nextlen = tree[n + 1].dl; if (++count < max_count && curlen == nextlen)\r\n\t\t\t\t\tcontinue; else if (count < min_count)\r\n\t\t\t\t\tzip_bl_tree[curlen].fc += count; else if (curlen != 0) {\r\n\t\t\t\t\t\tif (curlen != prevlen)\r\n\t\t\t\t\t\t\tzip_bl_tree[curlen].fc++; zip_bl_tree[zip_REP_3_6].fc++;\r\n\t\t\t\t\t} else if (count <= 10)\r\n\t\t\t\t\tzip_bl_tree[zip_REPZ_3_10].fc++; else\r\n\t\t\t\t\tzip_bl_tree[zip_REPZ_11_138].fc++; count = 0; prevlen = curlen; if (nextlen == 0) { max_count = 138; min_count = 3; } else if (curlen == nextlen) { max_count = 6; min_count = 3; } else { max_count = 7; min_count = 4; }\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar zip_send_tree = function (tree, max_code) {\r\n\t\t\tvar n; var prevlen = -1; var curlen; var nextlen = tree[0].dl; var count = 0; var max_count = 7; var min_count = 4; if (nextlen == 0) { max_count = 138; min_count = 3; }\r\n\t\t\tfor (n = 0; n <= max_code; n++) {\r\n\t\t\t\tcurlen = nextlen; nextlen = tree[n + 1].dl; if (++count < max_count && curlen == nextlen) { continue; } else if (count < min_count) { do { zip_SEND_CODE(curlen, zip_bl_tree); } while (--count != 0); } else if (curlen != 0) {\r\n\t\t\t\t\tif (curlen != prevlen) { zip_SEND_CODE(curlen, zip_bl_tree); count--; }\r\n\t\t\t\t\tzip_SEND_CODE(zip_REP_3_6, zip_bl_tree); zip_send_bits(count - 3, 2);\r\n\t\t\t\t} else if (count <= 10) { zip_SEND_CODE(zip_REPZ_3_10, zip_bl_tree); zip_send_bits(count - 3, 3); } else { zip_SEND_CODE(zip_REPZ_11_138, zip_bl_tree); zip_send_bits(count - 11, 7); }\r\n\t\t\t\tcount = 0; prevlen = curlen; if (nextlen == 0) { max_count = 138; min_count = 3; } else if (curlen == nextlen) { max_count = 6; min_count = 3; } else { max_count = 7; min_count = 4; }\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar zip_build_bl_tree = function () {\r\n\t\t\tvar max_blindex; zip_scan_tree(zip_dyn_ltree, zip_l_desc.max_code); zip_scan_tree(zip_dyn_dtree, zip_d_desc.max_code); zip_build_tree(zip_bl_desc); for (max_blindex = zip_BL_CODES - 1; max_blindex >= 3; max_blindex--) { if (zip_bl_tree[zip_bl_order[max_blindex]].dl != 0) break; }\r\n\t\t\tzip_opt_len += 3 * (max_blindex + 1) + 5 + 5 + 4; return max_blindex;\r\n\t\t}\r\n\t\tvar zip_send_all_trees = function (lcodes, dcodes, blcodes) {\r\n\t\t\tvar rank; zip_send_bits(lcodes - 257, 5); zip_send_bits(dcodes - 1, 5); zip_send_bits(blcodes - 4, 4); for (rank = 0; rank < blcodes; rank++) { zip_send_bits(zip_bl_tree[zip_bl_order[rank]].dl, 3); }\r\n\t\t\tzip_send_tree(zip_dyn_ltree, lcodes - 1); zip_send_tree(zip_dyn_dtree, dcodes - 1);\r\n\t\t}\r\n\t\tvar zip_flush_block = function (eof) {\r\n\t\t\tvar opt_lenb, static_lenb; var max_blindex; var stored_len; stored_len = zip_strstart - zip_block_start; zip_flag_buf[zip_last_flags] = zip_flags; zip_build_tree(zip_l_desc); zip_build_tree(zip_d_desc); max_blindex = zip_build_bl_tree(); opt_lenb = (zip_opt_len + 3 + 7) >> 3; static_lenb = (zip_static_len + 3 + 7) >> 3; if (static_lenb <= opt_lenb)\r\n\t\t\t\topt_lenb = static_lenb; if (stored_len + 4 <= opt_lenb && zip_block_start >= 0) {\r\n\t\t\t\t\tvar i; zip_send_bits((zip_STORED_BLOCK << 1) + eof, 3); zip_bi_windup(); zip_put_short(stored_len); zip_put_short(~stored_len); for (i = 0; i < stored_len; i++)\r\n\t\t\t\t\t\tzip_put_byte(zip_window[zip_block_start + i]);\r\n\t\t\t\t} else if (static_lenb == opt_lenb) { zip_send_bits((zip_STATIC_TREES << 1) + eof, 3); zip_compress_block(zip_static_ltree, zip_static_dtree); } else { zip_send_bits((zip_DYN_TREES << 1) + eof, 3); zip_send_all_trees(zip_l_desc.max_code + 1, zip_d_desc.max_code + 1, max_blindex + 1); zip_compress_block(zip_dyn_ltree, zip_dyn_dtree); }\r\n\t\t\tzip_init_block(); if (eof != 0)\r\n\t\t\t\tzip_bi_windup();\r\n\t\t}\r\n\t\tvar zip_ct_tally = function (dist, lc) {\r\n\t\tzip_l_buf[zip_last_lit++] = lc; if (dist == 0) { zip_dyn_ltree[lc].fc++; } else { dist--; zip_dyn_ltree[zip_length_code[lc] + zip_LITERALS + 1].fc++; zip_dyn_dtree[zip_D_CODE(dist)].fc++; zip_d_buf[zip_last_dist++] = dist; zip_flags |= zip_flag_bit; }\r\n\t\t\tzip_flag_bit <<= 1; if ((zip_last_lit & 7) == 0) { zip_flag_buf[zip_last_flags++] = zip_flags; zip_flags = 0; zip_flag_bit = 1; }\r\n\t\t\tif (zip_compr_level > 2 && (zip_last_lit & 0xfff) == 0) {\r\n\t\t\t\tvar out_length = zip_last_lit * 8; var in_length = zip_strstart - zip_block_start; var dcode; for (dcode = 0; dcode < zip_D_CODES; dcode++) { out_length += zip_dyn_dtree[dcode].fc * (5 + zip_extra_dbits[dcode]); }\r\n\t\t\t\tout_length >>= 3; if (zip_last_dist < parseInt(zip_last_lit / 2) && out_length < parseInt(in_length / 2))\r\n\t\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn (zip_last_lit == zip_LIT_BUFSIZE - 1 || zip_last_dist == zip_DIST_BUFSIZE);\r\n\t\t}\r\n\t\tvar zip_compress_block = function (ltree, dtree) {\r\n\t\t\tvar dist; var lc; var lx = 0; var dx = 0; var fx = 0; var flag = 0; var code; var extra; if (zip_last_lit != 0) do {\r\n\t\t\t\tif ((lx & 7) == 0)\r\n\t\t\t\t\tflag = zip_flag_buf[fx++]; lc = zip_l_buf[lx++] & 0xff; if ((flag & 1) == 0) { zip_SEND_CODE(lc, ltree); } else {\r\n\t\t\t\t\t\tcode = zip_length_code[lc]; zip_SEND_CODE(code + zip_LITERALS + 1, ltree); extra = zip_extra_lbits[code]; if (extra != 0) { lc -= zip_base_length[code]; zip_send_bits(lc, extra); }\r\n\t\t\t\t\t\tdist = zip_d_buf[dx++]; code = zip_D_CODE(dist); zip_SEND_CODE(code, dtree); extra = zip_extra_dbits[code]; if (extra != 0) { dist -= zip_base_dist[code]; zip_send_bits(dist, extra); }\r\n\t\t\t\t\t}\r\n\t\t\t\tflag >>= 1;\r\n\t\t\t} while (lx < zip_last_lit); zip_SEND_CODE(zip_END_BLOCK, ltree);\r\n\t\t}\r\n\t\tvar zip_Buf_size = 16; var zip_send_bits = function (value, length) { if (zip_bi_valid > zip_Buf_size - length) { zip_bi_buf |= (value << zip_bi_valid); zip_put_short(zip_bi_buf); zip_bi_buf = (value >> (zip_Buf_size - zip_bi_valid)); zip_bi_valid += length - zip_Buf_size; } else { zip_bi_buf |= value << zip_bi_valid; zip_bi_valid += length; } }\r\n\t\tvar zip_bi_reverse = function (code, len) { var res = 0; do { res |= code & 1; code >>= 1; res <<= 1; } while (--len > 0); return res >> 1; }\r\n\t\tvar zip_bi_windup = function () {\r\n\t\t\tif (zip_bi_valid > 8) { zip_put_short(zip_bi_buf); } else if (zip_bi_valid > 0) { zip_put_byte(zip_bi_buf); }\r\n\t\t\tzip_bi_buf = 0; zip_bi_valid = 0;\r\n\t\t}\r\n\t\tvar zip_qoutbuf = function () {\r\n\t\t\tif (zip_outcnt != 0) {\r\n\t\t\t\tvar q, i; q = zip_new_queue(); if (zip_qhead == null)\r\n\t\t\t\t\tzip_qhead = zip_qtail = q; else\r\n\t\t\t\t\tzip_qtail = zip_qtail.next = q; q.len = zip_outcnt - zip_outoff; for (i = 0; i < q.len; i++)\r\n\t\t\t\t\tq.ptr[i] = zip_outbuf[zip_outoff + i]; zip_outcnt = zip_outoff = 0;\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar zip_deflate = function (str, level) {\r\n\t\t\tvar i, j; zip_deflate_data = str; zip_deflate_pos = 0; if (typeof level == \"undefined\")\r\n\t\t\t\tlevel = zip_DEFAULT_LEVEL; zip_deflate_start(level); var buff = new Array(1024); var aout = []; while ((i = zip_deflate_internal(buff, 0, buff.length)) > 0) {\r\n\t\t\t\t\tvar cbuf = new Array(i); for (j = 0; j < i; j++) { cbuf[j] = String.fromCharCode(buff[j]); }\r\n\t\t\t\t\taout[aout.length] = cbuf.join(\"\");\r\n\t\t\t\t}\r\n\t\t\tzip_deflate_data = null; return aout.join(\"\");\r\n\t\t}\r\n\t\tif (!JSZip.compressions[\"DEFLATE\"]) { JSZip.compressions[\"DEFLATE\"] = { magic: \"\\x08\\x00\", compress: zip_deflate } } else { JSZip.compressions[\"DEFLATE\"].compress = zip_deflate; }\r\n\t})();\r\n\r\n\r\n\tif (!JSZip) { throw \"JSZip not defined\"; }\r\n\t(function () {\r\n\t\tvar zip_fixed_bd; var zip_WSIZE = 32768; var zip_STORED_BLOCK = 0; var zip_STATIC_TREES = 1; var zip_DYN_TREES = 2; var zip_lbits = 9; var zip_dbits = 6; var zip_INBUFSIZ = 32768; var zip_INBUF_EXTRA = 64; var zip_slide; var zip_wp; var zip_fixed_tl = null; var zip_fixed_td; var zip_fixed_bl, fixed_bd; var zip_bit_buf; var zip_bit_len; var zip_method; var zip_eof; var zip_copy_leng; var zip_copy_dist; var zip_tl, zip_td; var zip_bl, zip_bd; var zip_inflate_data; var zip_inflate_pos; var zip_MASK_BITS = new Array(0x0000, 0x0001, 0x0003, 0x0007, 0x000f, 0x001f, 0x003f, 0x007f, 0x00ff, 0x01ff, 0x03ff, 0x07ff, 0x0fff, 0x1fff, 0x3fff, 0x7fff, 0xffff); var zip_cplens = new Array(3, 4, 5, 6, 7, 8, 9, 10, 11, 13, 15, 17, 19, 23, 27, 31, 35, 43, 51, 59, 67, 83, 99, 115, 131, 163, 195, 227, 258, 0, 0); var zip_cplext = new Array(0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0, 99, 99); var zip_cpdist = new Array(1, 2, 3, 4, 5, 7, 9, 13, 17, 25, 33, 49, 65, 97, 129, 193, 257, 385, 513, 769, 1025, 1537, 2049, 3073, 4097, 6145, 8193, 12289, 16385, 24577); var zip_cpdext = new Array(0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13); var zip_border = new Array(16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15); function zip_HuftList() { this.next = null; this.list = null; }\r\n\t\tfunction zip_HuftNode() { this.e = 0; this.b = 0; this.n = 0; this.t = null; }\r\n\t\tfunction zip_HuftBuild(b, n, s, d, e, mm) {\r\n\t\tthis.BMAX = 16; this.N_MAX = 288; this.status = 0; this.root = null; this.m = 0; {\r\n\t\t\tvar a; var c = new Array(this.BMAX + 1); var el; var f; var g; var h; var i; var j; var k; var lx = new Array(this.BMAX + 1); var p; var pidx; var q; var r = new zip_HuftNode(); var u = new Array(this.BMAX); var v = new Array(this.N_MAX); var w; var x = new Array(this.BMAX + 1); var xp; var y; var z; var o; var tail; tail = this.root = null; for (i = 0; i < c.length; i++)\r\n\t\t\t\tc[i] = 0; for (i = 0; i < lx.length; i++)\r\n\t\t\t\tlx[i] = 0; for (i = 0; i < u.length; i++)\r\n\t\t\t\tu[i] = null; for (i = 0; i < v.length; i++)\r\n\t\t\t\tv[i] = 0; for (i = 0; i < x.length; i++)\r\n\t\t\t\tx[i] = 0; el = n > 256 ? b[256] : this.BMAX; p = b; pidx = 0; i = n; do { c[p[pidx]]++; pidx++; } while (--i > 0); if (c[0] == n) { this.root = null; this.m = 0; this.status = 0; return; }\r\n\t\t\tfor (j = 1; j <= this.BMAX; j++)\r\n\t\t\t\tif (c[j] != 0)\r\n\t\t\t\t\tbreak; k = j; if (mm < j)\r\n\t\t\t\tmm = j; for (i = this.BMAX; i != 0; i--)\r\n\t\t\t\tif (c[i] != 0)\r\n\t\t\t\t\tbreak; g = i; if (mm > i)\r\n\t\t\t\tmm = i; for (y = 1 << j; j < i; j++ , y <<= 1)\r\n\t\t\t\tif ((y -= c[j]) < 0) { this.status = 2; this.m = mm; return; }\r\n\t\t\tif ((y -= c[i]) < 0) { this.status = 2; this.m = mm; return; }\r\n\t\t\tc[i] += y; x[1] = j = 0; p = c; pidx = 1; xp = 2; while (--i > 0)\r\n\t\t\t\tx[xp++] = (j += p[pidx++]); p = b; pidx = 0; i = 0; do {\r\n\t\t\t\t\tif ((j = p[pidx++]) != 0)\r\n\t\t\t\t\t\tv[x[j]++] = i;\r\n\t\t\t\t} while (++i < n); n = x[g]; x[0] = i = 0; p = v; pidx = 0; h = -1; w = lx[0] = 0; q = null; z = 0; for (; k <= g; k++) {\r\n\t\t\t\t\ta = c[k]; while (a-- > 0) {\r\n\t\t\t\t\t\twhile (k > w + lx[1 + h]) {\r\n\t\t\t\t\t\t\tw += lx[1 + h]; h++; z = (z = g - w) > mm ? mm : z; if ((f = 1 << (j = k - w)) > a + 1) {\r\n\t\t\t\t\t\t\t\tf -= a + 1; xp = k; while (++j < z) {\r\n\t\t\t\t\t\t\t\t\tif ((f <<= 1) <= c[++xp])\r\n\t\t\t\t\t\t\t\t\t\tbreak; f -= c[xp];\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (w + j > el && w < el)\r\n\t\t\t\t\t\t\t\tj = el - w; z = 1 << j; lx[1 + h] = j; q = new Array(z); for (o = 0; o < z; o++) { q[o] = new zip_HuftNode(); }\r\n\t\t\t\t\t\t\tif (tail == null)\r\n\t\t\t\t\t\t\t\ttail = this.root = new zip_HuftList(); else\r\n\t\t\t\t\t\t\t\ttail = tail.next = new zip_HuftList(); tail.next = null; tail.list = q; u[h] = q; if (h > 0) { x[h] = i; r.b = lx[h]; r.e = 16 + j; r.t = q; j = (i & ((1 << w) - 1)) >> (w - lx[h]); u[h - 1][j].e = r.e; u[h - 1][j].b = r.b; u[h - 1][j].n = r.n; u[h - 1][j].t = r.t; }\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tr.b = k - w; if (pidx >= n)\r\n\t\t\t\t\t\t\tr.e = 99; else if (p[pidx] < s) { r.e = (p[pidx] < 256 ? 16 : 15); r.n = p[pidx++]; } else { r.e = e[p[pidx] - s]; r.n = d[p[pidx++] - s]; }\r\n\t\t\t\t\t\tf = 1 << (k - w); for (j = i >> w; j < z; j += f) { q[j].e = r.e; q[j].b = r.b; q[j].n = r.n; q[j].t = r.t; }\r\n\t\t\t\t\t\tfor (j = 1 << (k - 1); (i & j) != 0; j >>= 1)\r\n\t\t\t\t\t\t\ti ^= j; i ^= j; while ((i & ((1 << w) - 1)) != x[h]) { w -= lx[h]; h--; }\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\tthis.m = lx[1]; this.status = ((y != 0 && g != 1) ? 1 : 0);\r\n\t\t}\r\n\t\t}\r\n\t\tfunction zip_GET_BYTE() {\r\n\t\t\tif (zip_inflate_data.length == zip_inflate_pos)\r\n\t\t\t\treturn -1; return zip_inflate_data.charCodeAt(zip_inflate_pos++) & 0xff;\r\n\t\t}\r\n\t\tfunction zip_NEEDBITS(n) { while (zip_bit_len < n) { zip_bit_buf |= zip_GET_BYTE() << zip_bit_len; zip_bit_len += 8; } }\r\n\t\tfunction zip_GETBITS(n) { return zip_bit_buf & zip_MASK_BITS[n]; }\r\n\t\tfunction zip_DUMPBITS(n) { zip_bit_buf >>= n; zip_bit_len -= n; }\r\n\t\tfunction zip_inflate_codes(buff, off, size) {\r\n\t\t\tvar e; var t; var n; if (size == 0)\r\n\t\t\t\treturn 0; n = 0; for (; ;) {\r\n\t\t\t\t\tzip_NEEDBITS(zip_bl); t = zip_tl.list[zip_GETBITS(zip_bl)]; e = t.e; while (e > 16) {\r\n\t\t\t\t\t\tif (e == 99)\r\n\t\t\t\t\t\t\treturn -1; zip_DUMPBITS(t.b); e -= 16; zip_NEEDBITS(e); t = t.t[zip_GETBITS(e)]; e = t.e;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tzip_DUMPBITS(t.b); if (e == 16) {\r\n\t\t\t\t\t\tzip_wp &= zip_WSIZE - 1; buff[off + n++] = zip_slide[zip_wp++] = t.n; if (n == size)\r\n\t\t\t\t\t\t\treturn size; continue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (e == 15)\r\n\t\t\t\t\t\tbreak; zip_NEEDBITS(e); zip_copy_leng = t.n + zip_GETBITS(e); zip_DUMPBITS(e); zip_NEEDBITS(zip_bd); t = zip_td.list[zip_GETBITS(zip_bd)]; e = t.e; while (e > 16) {\r\n\t\t\t\t\t\t\tif (e == 99)\r\n\t\t\t\t\t\t\t\treturn -1; zip_DUMPBITS(t.b); e -= 16; zip_NEEDBITS(e); t = t.t[zip_GETBITS(e)]; e = t.e;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\tzip_DUMPBITS(t.b); zip_NEEDBITS(e); zip_copy_dist = zip_wp - t.n - zip_GETBITS(e); zip_DUMPBITS(e); while (zip_copy_leng > 0 && n < size) { zip_copy_leng--; zip_copy_dist &= zip_WSIZE - 1; zip_wp &= zip_WSIZE - 1; buff[off + n++] = zip_slide[zip_wp++] = zip_slide[zip_copy_dist++]; }\r\n\t\t\t\t\tif (n == size)\r\n\t\t\t\t\t\treturn size;\r\n\t\t\t\t}\r\n\t\t\tzip_method = -1; return n;\r\n\t\t}\r\n\t\tfunction zip_inflate_stored(buff, off, size) {\r\n\t\t\tvar n; n = zip_bit_len & 7; zip_DUMPBITS(n); zip_NEEDBITS(16); n = zip_GETBITS(16); zip_DUMPBITS(16); zip_NEEDBITS(16); if (n != ((~zip_bit_buf) & 0xffff))\r\n\t\t\t\treturn -1; zip_DUMPBITS(16); zip_copy_leng = n; n = 0; while (zip_copy_leng > 0 && n < size) { zip_copy_leng--; zip_wp &= zip_WSIZE - 1; zip_NEEDBITS(8); buff[off + n++] = zip_slide[zip_wp++] = zip_GETBITS(8); zip_DUMPBITS(8); }\r\n\t\t\tif (zip_copy_leng == 0)\r\n\t\t\t\tzip_method = -1; return n;\r\n\t\t}\r\n\t\tfunction zip_inflate_fixed(buff, off, size) {\r\n\t\t\tif (zip_fixed_tl == null) {\r\n\t\t\t\tvar i; var l = new Array(288); var h; for (i = 0; i < 144; i++)\r\n\t\t\t\t\tl[i] = 8; for (; i < 256; i++)\r\n\t\t\t\t\tl[i] = 9; for (; i < 280; i++)\r\n\t\t\t\t\tl[i] = 7; for (; i < 288; i++)\r\n\t\t\t\t\tl[i] = 8; zip_fixed_bl = 7; h = new zip_HuftBuild(l, 288, 257, zip_cplens, zip_cplext, zip_fixed_bl); if (h.status != 0) { alert(\"HufBuild error: \" + h.status); return -1; }\r\n\t\t\t\tzip_fixed_tl = h.root; zip_fixed_bl = h.m; for (i = 0; i < 30; i++)\r\n\t\t\t\t\tl[i] = 5; zip_fixed_bd = 5; h = new zip_HuftBuild(l, 30, 0, zip_cpdist, zip_cpdext, zip_fixed_bd); if (h.status > 1) { zip_fixed_tl = null; alert(\"HufBuild error: \" + h.status); return -1; }\r\n\t\t\t\tzip_fixed_td = h.root; zip_fixed_bd = h.m;\r\n\t\t\t}\r\n\t\t\tzip_tl = zip_fixed_tl; zip_td = zip_fixed_td; zip_bl = zip_fixed_bl; zip_bd = zip_fixed_bd; return zip_inflate_codes(buff, off, size);\r\n\t\t}\r\n\t\tfunction zip_inflate_dynamic(buff, off, size) {\r\n\t\t\tvar i; var j; var l; var n; var t; var nb; var nl; var nd; var ll = new Array(286 + 30); var h; for (i = 0; i < ll.length; i++)\r\n\t\t\t\tll[i] = 0; zip_NEEDBITS(5); nl = 257 + zip_GETBITS(5); zip_DUMPBITS(5); zip_NEEDBITS(5); nd = 1 + zip_GETBITS(5); zip_DUMPBITS(5); zip_NEEDBITS(4); nb = 4 + zip_GETBITS(4); zip_DUMPBITS(4); if (nl > 286 || nd > 30)\r\n\t\t\t\treturn -1; for (j = 0; j < nb; j++) { zip_NEEDBITS(3); ll[zip_border[j]] = zip_GETBITS(3); zip_DUMPBITS(3); }\r\n\t\t\tfor (; j < 19; j++)\r\n\t\t\t\tll[zip_border[j]] = 0; zip_bl = 7; h = new zip_HuftBuild(ll, 19, 19, null, null, zip_bl); if (h.status != 0)\r\n\t\t\t\treturn -1; zip_tl = h.root; zip_bl = h.m; n = nl + nd; i = l = 0; while (i < n) {\r\n\t\t\t\t\tzip_NEEDBITS(zip_bl); t = zip_tl.list[zip_GETBITS(zip_bl)]; j = t.b; zip_DUMPBITS(j); j = t.n; if (j < 16)\r\n\t\t\t\t\t\tll[i++] = l = j; else if (j == 16) {\r\n\t\t\t\t\t\t\tzip_NEEDBITS(2); j = 3 + zip_GETBITS(2); zip_DUMPBITS(2); if (i + j > n)\r\n\t\t\t\t\t\t\t\treturn -1; while (j-- > 0)\r\n\t\t\t\t\t\t\t\tll[i++] = l;\r\n\t\t\t\t\t\t} else if (j == 17) {\r\n\t\t\t\t\t\t\tzip_NEEDBITS(3); j = 3 + zip_GETBITS(3); zip_DUMPBITS(3); if (i + j > n)\r\n\t\t\t\t\t\t\t\treturn -1; while (j-- > 0)\r\n\t\t\t\t\t\t\t\tll[i++] = 0; l = 0;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tzip_NEEDBITS(7); j = 11 + zip_GETBITS(7); zip_DUMPBITS(7); if (i + j > n)\r\n\t\t\t\t\t\t\t\treturn -1; while (j-- > 0)\r\n\t\t\t\t\t\t\tll[i++] = 0; l = 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\tzip_bl = zip_lbits; h = new zip_HuftBuild(ll, nl, 257, zip_cplens, zip_cplext, zip_bl); if (zip_bl == 0)\r\n\t\t\t\th.status = 1; if (h.status != 0) {/*if(h.status==1);*/return -1; }\r\n\t\t\tzip_tl = h.root; zip_bl = h.m; for (i = 0; i < nd; i++)\r\n\t\t\t\tll[i] = ll[i + nl]; zip_bd = zip_dbits; h = new zip_HuftBuild(ll, nd, 0, zip_cpdist, zip_cpdext, zip_bd); zip_td = h.root; zip_bd = h.m; if (zip_bd == 0 && nl > 257) { return -1; }\r\n\t\t\t//if(h.status==1){;}\r\n\t\t\tif (h.status != 0)\r\n\t\t\t\treturn -1; return zip_inflate_codes(buff, off, size);\r\n\t\t}\r\n\t\tfunction zip_inflate_start() {\r\n\t\t\tvar i; if (zip_slide == null)\r\n\t\t\t\tzip_slide = new Array(2 * zip_WSIZE); zip_wp = 0; zip_bit_buf = 0; zip_bit_len = 0; zip_method = -1; zip_eof = false; zip_copy_leng = zip_copy_dist = 0; zip_tl = null;\r\n\t\t}\r\n\t\tfunction zip_inflate_internal(buff, off, size) {\r\n\t\t\tvar n, i; n = 0; while (n < size) {\r\n\t\t\t\tif (zip_eof && zip_method == -1)\r\n\t\t\t\t\treturn n; if (zip_copy_leng > 0) {\r\n\t\t\t\t\t\tif (zip_method != zip_STORED_BLOCK) { while (zip_copy_leng > 0 && n < size) { zip_copy_leng--; zip_copy_dist &= zip_WSIZE - 1; zip_wp &= zip_WSIZE - 1; buff[off + n++] = zip_slide[zip_wp++] = zip_slide[zip_copy_dist++]; } } else {\r\n\t\t\t\t\t\t\twhile (zip_copy_leng > 0 && n < size) { zip_copy_leng--; zip_wp &= zip_WSIZE - 1; zip_NEEDBITS(8); buff[off + n++] = zip_slide[zip_wp++] = zip_GETBITS(8); zip_DUMPBITS(8); }\r\n\t\t\t\t\t\t\tif (zip_copy_leng == 0)\r\n\t\t\t\t\t\t\t\tzip_method = -1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (n == size)\r\n\t\t\t\t\t\t\treturn n;\r\n\t\t\t\t\t}\r\n\t\t\t\tif (zip_method == -1) {\r\n\t\t\t\t\tif (zip_eof)\r\n\t\t\t\t\t\tbreak; zip_NEEDBITS(1); if (zip_GETBITS(1) != 0)\r\n\t\t\t\t\t\tzip_eof = true; zip_DUMPBITS(1); zip_NEEDBITS(2); zip_method = zip_GETBITS(2); zip_DUMPBITS(2); zip_tl = null; zip_copy_leng = 0;\r\n\t\t\t\t}\r\n\t\t\t\tswitch (zip_method) {\r\n\t\t\t\t\tcase 0: i = zip_inflate_stored(buff, off + n, size - n); break; case 1: if (zip_tl != null)\r\n\t\t\t\t\t\ti = zip_inflate_codes(buff, off + n, size - n); else\r\n\t\t\t\t\t\ti = zip_inflate_fixed(buff, off + n, size - n); break; case 2: if (zip_tl != null)\r\n\t\t\t\t\t\t\ti = zip_inflate_codes(buff, off + n, size - n); else\r\n\t\t\t\t\t\t\ti = zip_inflate_dynamic(buff, off + n, size - n); break; default: i = -1; break;\r\n\t\t\t\t}\r\n\t\t\t\tif (i == -1) {\r\n\t\t\t\t\tif (zip_eof)\r\n\t\t\t\t\t\treturn 0; return -1;\r\n\t\t\t\t}\r\n\t\t\t\tn += i;\r\n\t\t\t}\r\n\t\t\treturn n;\r\n\t\t}\r\n\t\tfunction zip_inflate(str) {\r\n\t\t\tvar out, buff; var i, j; zip_inflate_start(); zip_inflate_data = str; zip_inflate_pos = 0; buff = new Array(1024); out = \"\"; while ((i = zip_inflate_internal(buff, 0, buff.length)) > 0) {\r\n\t\t\t\tfor (j = 0; j < i; j++)\r\n\t\t\t\t\tout += String.fromCharCode(buff[j]);\r\n\t\t\t}\r\n\t\t\tzip_inflate_data = null; return out;\r\n\t\t}\r\n\t\tif (!JSZip.compressions[\"DEFLATE\"]) { JSZip.compressions[\"DEFLATE\"] = { magic: \"\\x08\\x00\", uncompress: zip_inflate } } else { JSZip.compressions[\"DEFLATE\"].uncompress = zip_inflate; }\r\n\t})();\r\n\r\n\r\n\r\n\t(function () {\r\n\t\tvar pretty = function (str) {\r\n\t\t\tvar res = '', code, i; for (i = 0; i < str.length; i++) { code = str.charCodeAt(i); res += '\\\\x' + (code < 10 ? \"0\" : \"\") + code.toString(16); }\r\n\t\t\treturn res;\r\n\t\t}; var findCompression = function (compressionMethod) {\r\n\t\t\tfor (var method in JSZip.compressions) {\r\n\t\t\t\tif (JSZip.compressions[method].magic === compressionMethod) { return JSZip.compressions[method]; }\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t}; function StreamReader(stream) { this.stream = stream; this.index = 0; }\r\n\t\tStreamReader.prototype = {\r\n\t\t\tcheckOffset: function (offset) { this.checkIndex(this.index + offset); }, checkIndex: function (newIndex) {\r\n\t\t\t\tif (this.stream.length < newIndex || newIndex < 0) {\r\n\t\t\t\t\tthrow new Error(\"End of stream reached (stream length = \" +\r\n\t\t\t\t\t\tthis.stream.length + \", asked index = \" +\r\n\t\t\t\t\t\t(newIndex) + \"). Corrupted zip ?\");\r\n\t\t\t\t}\r\n\t\t\t}, setIndex: function (newIndex) { this.checkIndex(newIndex); this.index = newIndex; }, eof: function () { return this.index >= this.stream.length; }, byteAt: function (i) { return this.stream.charCodeAt(i) & 0xff; }, readByte: function () { this.checkOffset(1); return this.byteAt(1 + this.index++); }, readInt: function (size) {\r\n\t\t\t\tvar result = 0, i; this.checkOffset(size); for (i = size - 1; i >= 0; i--) { result = (result << 8) + this.byteAt(this.index + i); }\r\n\t\t\t\tthis.index += size; return result;\r\n\t\t\t}, readString: function (size) {\r\n\t\t\t\tvar result = \"\", i, code; this.checkOffset(size); for (i = 0; i < size; i++) { code = this.byteAt(this.index + i); result += String.fromCharCode(code); }\r\n\t\t\t\tthis.index += size; return result;\r\n\t\t\t}, readDate: function () { var dostime = this.readInt(4); return new Date(((dostime >> 25) & 0x7f) + 1980, ((dostime >> 21) & 0x0f) - 1, (dostime >> 16) & 0x1f, (dostime >> 11) & 0x1f, (dostime >> 5) & 0x3f, (dostime & 0x1f) << 1); }\r\n\t\t}; function ZipEntry(options, loadOptions) { this.options = options; this.loadOptions = loadOptions; }\r\n\t\tZipEntry.prototype = {\r\n\t\t\tisEncrypted: function () { return (this.bitFlag & 0x0001) === 0x0001; }, hasDataDescriptor: function () { return (this.bitFlag & 0x0008) === 0x0008; }, useUTF8: function () { return (this.bitFlag & 0x0800) === 0x0800; }, isZIP64: function () { return this.options.zip64; }, readLocalPartHeader: function (reader) {\r\n\t\t\tthis.versionNeeded = reader.readInt(2); this.bitFlag = reader.readInt(2); this.compressionMethod = reader.readString(2); this.date = reader.readDate(); this.crc32 = reader.readInt(4); this.compressedSize = reader.readInt(4); this.uncompressedSize = reader.readInt(4); this.fileNameLength = reader.readInt(2); this.extraFieldsLength = reader.readInt(2); if (this.isEncrypted()) { throw new Error(\"Encrypted zip are not supported\"); }\r\n\t\t\t}, readLocalPart: function (reader) {\r\n\t\t\t\tvar compression; this.readLocalPartHeader(reader); this.fileName = reader.readString(this.fileNameLength); this.readExtraFields(reader); if (!this.hasDataDescriptor()) { this.compressedFileData = reader.readString(this.compressedSize); }\r\n\t\t\t\telse {\r\n\t\t\t\tthis.compressedFileData = this.findDataUntilDataDescriptor(reader); this.crc32 = reader.readInt(4); this.compressedSize = reader.readInt(this.isZIP64() ? 8 : 4); this.uncompressedSize = reader.readInt(this.isZIP64() ? 8 : 4); if (this.compressedFileData.length !== this.compressedSize) { throw new Error(\"Bug : data descriptor incorrectly read (size mismatch)\"); }\r\n\t\t\t\t}\r\n\t\t\t\tthis.uncompressedFileData = null; compression = findCompression(this.compressionMethod); if (compression === null) { throw new Error(\"Corrupted zip : compression \" + pretty(this.compressionMethod) + \" unknown (inner file : \" + this.fileName + \")\"); }\r\n\t\t\t\tthis.uncompressedFileData = compression.uncompress(this.compressedFileData); if (this.loadOptions.checkCRC32 && JSZip.prototype.crc32(this.uncompressedFileData) !== this.crc32) { throw new Error(\"Corrupted zip : CRC32 mismatch\"); }\r\n\t\t\t\tif (this.useUTF8()) { this.fileName = JSZip.prototype.utf8decode(this.fileName); }\r\n\t\t\t}, findDataUntilDataDescriptor: function (reader) {\r\n\t\t\t\tvar data = \"\", buffer = reader.readString(4), aByte; while (buffer !== JSZip.signature.DATA_DESCRIPTOR) { aByte = reader.readString(1); data += buffer.slice(0, 1); buffer = (buffer + aByte).slice(-4); }\r\n\t\t\t\treturn data;\r\n\t\t\t}, readCentralPart: function (reader) {\r\n\t\t\tthis.versionMadeBy = reader.readString(2); this.readLocalPartHeader(reader); this.fileCommentLength = reader.readInt(2); this.diskNumberStart = reader.readInt(2); this.internalFileAttributes = reader.readInt(2); this.externalFileAttributes = reader.readInt(4); this.localHeaderOffset = reader.readInt(4); this.fileName = reader.readString(this.fileNameLength); this.readExtraFields(reader); this.fileComment = reader.readString(this.fileCommentLength); if (this.useUTF8()) { this.fileName = JSZip.prototype.utf8decode(this.fileName); this.fileComment = JSZip.prototype.utf8decode(this.fileComment); }\r\n\t\t\t\tthis.dir = this.externalFileAttributes & 0x00000010 ? true : false;\r\n\t\t\t}, parseZIP64ExtraField: function (reader) {\r\n\t\t\t\tvar extraReader = new StreamReader(this.extraFields[0x0001].value); if (this.uncompressedSize === -1) { this.uncompressedSize = extraReader.readInt(8); }\r\n\t\t\t\tif (this.compressedSize === -1) { this.compressedSize = extraReader.readInt(8); }\r\n\t\t\t\tif (this.localHeaderOffset === -1) { this.localHeaderOffset = extraReader.readInt(8); }\r\n\t\t\t\tif (this.diskNumberStart === -1) { this.diskNumberStart = extraReader.readInt(4); }\r\n\t\t\t}, readExtraFields: function (reader) {\r\n\t\t\t\tvar start = reader.index, extraFieldId, extraFieldLength, extraFieldValue; this.extraFields = this.extraFields || {}; while (reader.index < start + this.extraFieldsLength) { extraFieldId = reader.readInt(2); extraFieldLength = reader.readInt(2); extraFieldValue = reader.readString(extraFieldLength); this.extraFields[extraFieldId] = { id: extraFieldId, length: extraFieldLength, value: extraFieldValue }; }\r\n\t\t\t\tif (this.isZIP64() && this.extraFields[0x0001]) { this.parseZIP64ExtraField(reader); }\r\n\t\t\t}\r\n\t\t}; function ZipEntries(data, loadOptions) { this.files = []; this.loadOptions = loadOptions; if (data) this.load(data); }\r\n\t\tZipEntries.prototype = {\r\n\t\t\tcheckSignature: function (expectedSignature) {\r\n\t\t\t\tvar signature = this.reader.readString(4); if (signature !== expectedSignature) { throw new Error(\"Corrupted zip or bug : unexpected signature \" + \"(\" + pretty(signature) + \", expected \" + pretty(expectedSignature) + \")\"); }\r\n\t\t\t}, readBlockEndOfCentral: function () { this.diskNumber = this.reader.readInt(2); this.diskWithCentralDirStart = this.reader.readInt(2); this.centralDirRecordsOnThisDisk = this.reader.readInt(2); this.centralDirRecords = this.reader.readInt(2); this.centralDirSize = this.reader.readInt(4); this.centralDirOffset = this.reader.readInt(4); this.zipCommentLength = this.reader.readInt(2); this.zipComment = this.reader.readString(this.zipCommentLength); }, readBlockZip64EndOfCentral: function () {\r\n\t\t\tthis.zip64EndOfCentralSize = this.reader.readInt(8); this.versionMadeBy = this.reader.readString(2); this.versionNeeded = this.reader.readInt(2); this.diskNumber = this.reader.readInt(4); this.diskWithCentralDirStart = this.reader.readInt(4); this.centralDirRecordsOnThisDisk = this.reader.readInt(8); this.centralDirRecords = this.reader.readInt(8); this.centralDirSize = this.reader.readInt(8); this.centralDirOffset = this.reader.readInt(8); this.zip64ExtensibleData = {}; var extraDataSize = this.zip64EndOfCentralSize - 44, index = 0, extraFieldId, extraFieldLength, extraFieldValue; while (index < extraDataSize) { extraFieldId = this.reader.readInt(2); extraFieldLength = this.reader.readInt(4); extraFieldValue = this.reader.readString(extraFieldLength); this.zip64ExtensibleData[extraFieldId] = { id: extraFieldId, length: extraFieldLength, value: extraFieldValue }; }\r\n\t\t\t}, readBlockZip64EndOfCentralLocator: function () {\r\n\t\t\tthis.diskWithZip64CentralDirStart = this.reader.readInt(4); this.relativeOffsetEndOfZip64CentralDir = this.reader.readInt(8); this.disksCount = this.reader.readInt(4); if (this.disksCount > 1) { throw new Error(\"Multi-volumes zip are not supported\"); }\r\n\t\t\t}, readLocalFiles: function () {\r\n\t\t\t\tvar i, file; for (i = 0; i < this.files.length; i++) { file = this.files[i]; this.reader.setIndex(file.localHeaderOffset); this.checkSignature(JSZip.signature.LOCAL_FILE_HEADER); file.readLocalPart(this.reader); }\r\n\t\t\t}, readCentralDir: function () {\r\n\t\t\t\tvar file; this.reader.setIndex(this.centralDirOffset); while (this.reader.readString(4) === JSZip.signature.CENTRAL_FILE_HEADER) { file = new ZipEntry({ zip64: this.zip64 }, this.loadOptions); file.readCentralPart(this.reader); this.files.push(file); }\r\n\t\t\t}, readEndOfCentral: function () {\r\n\t\t\t\tvar offset = this.reader.stream.lastIndexOf(JSZip.signature.ZIP64_CENTRAL_DIRECTORY_LOCATOR); if (offset === -1) {\r\n\t\t\t\tthis.zip64 = false; offset = this.reader.stream.lastIndexOf(JSZip.signature.CENTRAL_DIRECTORY_END); if (offset === -1) { throw new Error(\"Corrupted zip : can't find end of central directory\"); }\r\n\t\t\t\t\tthis.reader.setIndex(offset); this.checkSignature(JSZip.signature.CENTRAL_DIRECTORY_END); this.readBlockEndOfCentral();\r\n\t\t\t\t}\r\n\t\t\t\telse { this.zip64 = true; this.reader.setIndex(offset); this.checkSignature(JSZip.signature.ZIP64_CENTRAL_DIRECTORY_LOCATOR); this.readBlockZip64EndOfCentralLocator(); this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir); this.checkSignature(JSZip.signature.ZIP64_CENTRAL_DIRECTORY_END); this.readBlockZip64EndOfCentral(); }\r\n\t\t\t}, load: function (data) { this.reader = new StreamReader(data); this.readEndOfCentral(); this.readCentralDir(); this.readLocalFiles(); }\r\n\t\t}; JSZip.prototype.load = function (data, options) {\r\n\t\t\tvar files, zipEntries, i, input; options = options || {}; if (options.base64) { data = JSZipBase64.decode(data); }\r\n\t\t\tzipEntries = new ZipEntries(data, options); files = zipEntries.files; for (i in files) { input = files[i]; this.file(input.fileName, input.uncompressedFileData, { binary: true, date: input.date, dir: input.dir }); }\r\n\t\t\treturn this;\r\n\t\t};\r\n\t})();\r\n\r\n\r\n\t/*\r\n\tvar JSZip = null\r\n\tif (typeof require === 'function') {\r\n\t\tJSZip = require('node-zip');\r\n\t}*/\r\n\r\n\t//----------------------------------------------------------\r\n\t// Copyright (C) Microsoft Corporation. All rights reserved.\r\n\t// Released under the Microsoft Office Extensible File License\r\n\t// https://raw.github.com/stephen-hardy/xlsx.js/master/LICENSE.txt\r\n\t//----------------------------------------------------------\r\n\tfunction xlsx(file) {\r\n\t\t'use strict'; // v2.3.0\r\n\r\n\t\tvar defaultFontName = 'Calibri';\r\n\t\tvar defaultFontSize = 11;\r\n\t\tvar defaultFontColor = \"000000\";\r\n\r\n\t\tvar result, zip = new JSZip(), zipTime, processTime, s, f, i, j, k, l, t, w, sharedStrings, styles, index, data, val, style, borders, border, borderIndex, fonts, font, fontIndex,\r\n\t\t\tdocProps, xl, xlWorksheets, worksheet, contentTypes = [[], []], props = [], xlRels = [], worksheets = [], id, columns, cols, colWidth, cell, row, merges, merged,\r\n\t\t\tnumFmts = ['General', '0', '0.00', '#,##0', '#,##0.00', , , , , '0%', '0.00%', '0.00E+00', '# ?/?', '# ??/??', 'mm-dd-yy', 'd-mmm-yy', 'd-mmm', 'mmm-yy', 'h:mm AM/PM', 'h:mm:ss AM/PM',\r\n\t\t\t\t'h:mm', 'h:mm:ss', 'm/d/yy h:mm', , , , , , , , , , , , , , , '#,##0 ;(#,##0)', '#,##0 ;[Red](#,##0)', '#,##0.00;(#,##0.00)', '#,##0.00;[Red](#,##0.00)', , , , , 'mm:ss', '[h]:mm:ss', 'mmss.0', '##0.0E+0', '@'],\r\n\t\t\talphabet = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';\r\n\r\n\t\tfunction numAlpha(i) {\r\n\t\t\tvar t = Math.floor(i / 26) - 1; return (t > -1 ? numAlpha(t) : '') + alphabet.charAt(i % 26);\r\n\t\t}\r\n\r\n\t\tfunction alphaNum(s) {\r\n\t\t\tvar t = 0; if (s.length === 2) { t = alphaNum(s.charAt(0)) + 1; } return t * 26 + alphabet.indexOf(s.substr(-1));\r\n\t\t}\r\n\r\n\t\tfunction convertDate(input) {\r\n\t\t\treturn typeof input === 'object' ? ((input - new Date(1900, 0, 0)) / 86400000) + 1 : new Date(+new Date(1900, 0, 0) + (input - 1) * 86400000);\r\n\t\t}\r\n\r\n\t\tfunction typeOf(obj) {\r\n\t\t\treturn ({}).toString.call(obj).match(/\\s([a-zA-Z]+)/)[1].toLowerCase();\r\n\t\t}\r\n\r\n\t\tfunction getAttr(s, n) {\r\n\t\t\ts = s.substr(s.indexOf(n + '=\"') + n.length + 2); return s.substring(0, s.indexOf('\"'));\r\n\t\t}\r\n\r\n\t\tfunction escapeXML(s) {\r\n\t\t\treturn (s || '').replace(/&amp;/g, '&').replace(/&(?!(lt|gt))/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\"/g, '&quot;').replace(/'/g, '&#x27;').replace(\"settings\", \"\");\r\n\t\t} // see http://www.w3.org/TR/xml/#syntax\r\n\r\n\t\tfunction unescapeXML(s) {\r\n\t\t\treturn (s || '').replace(/&amp;/g, '&').replace(/&lt;/g, '<').replace(/&gt;/g, '>').replace(/&quot;/g, '\"').replace(/&#x27;/g, '\\'').replace(\"settings\", \"\");\r\n\t\t}\r\n\t\t\r\n\t\tfunction parseDate(val, cell, ispivot){\r\n\t\t\t\r\n\t\t\tif ((val == undefined) || (val.trim() == \"\")){\r\n\t\t\t\tval = \"\"\r\n\t\t\t} else { \r\n\t\t\t\tif (cell.genexusType == 'date'){\r\n\t\t\t\t\tvar format = (ispivot) ? [\"DMY\", \"YMD\", \"YDM\"] : (cell.genexusPicture == \"99/99/99\") ? [\"dd/mm/yy\",\"yy/mm/dd\",\"yyyy/dd/mm\"] : [\"dd/mm/yyyy\",\"yyyy/mm/dd\",\"yyyy/dd/mm\"];\r\n\t\t\t\t\tvar pars  = val.split(\"-\")\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\tif (!(cell.genexusPicture) || (cell.genexusPicture == \"99/99/99\")){\r\n\t\t\t\t\t\tval = pars[1] + \"/\" + pars[2] + \"/\" + pars[0].substring(2)\r\n\t\t\t\t\t\tif (cell.formatCode == format[0]/*\"DMY\"*/) val = pars[2] + \"/\" + pars[1] + \"/\" + pars[0].substring(2)\r\n\t\t\t\t\t\tif (cell.formatCode == format[1]/*\"YMD\"*/) val = pars[0].substring(2) + \"/\" + pars[1] + \"/\" + pars[2] \r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (cell.genexusPicture == \"99/99/9999\"){\r\n\t\t\t\t\t\tval = pars[1] + \"/\" + pars[2] + \"/\" + pars[0]\r\n\t\t\t\t\t\tif (cell.formatCode == format[0]/*\"DMY\"*/) val = pars[2] + \"/\" + pars[1] + \"/\" + pars[0]\r\n\t\t\t\t\t\tif (cell.formatCode == format[1]/*\"YMD\"*/) val = pars[0] + \"/\" + pars[1] + \"/\" + pars[2] \r\n\t\t\t\t\t}\r\n\t\t\t\t\t\tif (cell.genexusPicture == \"9999/99/99\"){\r\n\t\t\t\t\t\t\tval = pars[0] + \"/\" + pars[1] + \"/\" + pars[2]\r\n\t\t\t\t\t\t\tif (cell.formatCode == format[2]/*\"YDM\"*/)  val = pars[0] + \"/\" + pars[2] + \"/\" + pars[1]\r\n\t\t\t\t\t\t\tif (cell.formatCode == format[1]/*\"YMD\"*/)  val = pars[0] + \"/\" + pars[1] + \"/\" + pars[2] \r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvar datetimepars  = val.split(\" \")\r\n\t\t\t\t\t\tvar pars = datetimepars[0].split(\"-\")\r\n\t\t\t\t\t\tdatePars = datetimepars[1].split(\":\")\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (!cell.genexusPicture){\r\n\t\t\t\t\t\t\tval = pars[1] + \"/\" + pars[2] + \"/\" + pars[0].substring(2) + \" \" + datePars[0] + \":\" + datePars[1] \r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tvar picturePars = cell.genexusPicture.split(\" \")\r\n\t\t\t\t\t\t\tvar format = (ispivot) ? [\"DMY\", \"YMD\", \"YDM\"] : (picturePars[0] == \"99/99/99\") ? [\"dd/mm/yy\",\"yy/mm/dd\",\"yyyy/dd/mm\"] : [\"dd/mm/yyyy\",\"yyyy/mm/dd\",\"yyyy/dd/mm\"];\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (picturePars[0] == \"99/99/99\"){\r\n\t\t\t\t\t\t\t\tval = pars[1] + \"/\" + pars[2] + \"/\" + pars[0].substring(2)\r\n\t\t\t\t\t\t\t\tif (cell.formatCode == format[0]) val = pars[2] + \"/\" + pars[1] + \"/\" + pars[0].substring(2)\r\n\t\t\t\t\t\t\t\tif (cell.formatCode == format[1]) val = pars[0].substring(2) + \"/\" + pars[1] + \"/\" + pars[2]\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (picturePars[0] == \"99/99/9999\"){\r\n\t\t\t\t\t\t\t\tval = pars[1] + \"/\" + pars[2] + \"/\" + pars[0]\r\n\t\t\t\t\t\t\t\tif (cell.formatCode == format[0]) val = pars[2] + \"/\" + pars[1] + \"/\" + pars[0]\r\n\t\t\t\t\t\t\t\tif (cell.formatCode == format[1]) val = pars[0] + \"/\" + pars[1] + \"/\" + pars[2] \r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (picturePars[0] == \"9999/99/99\"){\r\n\t\t\t\t\t\t\t\tval = pars[0] + \"/\" + pars[1] + \"/\" + pars[2]\r\n\t\t\t\t\t\t\t\tif (cell.formatCode == format[2])  val = pars[0] + \"/\" + pars[2] + \"/\" + pars[1]\r\n\t\t\t\t\t\t\t\tif (cell.formatCode == format[1])  val = pars[0] + \"/\" + pars[1] + \"/\" + pars[2] \r\n\t\t\t\t\t\t\t}\t\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (picturePars[1] == \"99\")\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tval = val + \" \" + datePars[0]\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (picturePars[1] == \"99:99\")\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tval = val + \" \" + datePars[0] + \":\" + datePars[1] \t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (picturePars[1] == \"99:99:99\")\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tval = val + \" \" + datePars[0] + \":\" + datePars[1] + \":\" + datePars[2].split(\".\")[0]\r\n\t\t\t\t\t\t\t}\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (picturePars[1] == \"99:99:99.999\")\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tval = val + \" \" + datePars[0] + \":\" + datePars[1] + \":\" + datePars[2]\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\treturn val;\r\n\t\t\t\r\n\t\t}\r\n\t\tif (file.pivot) {\r\n\t\t\tprocessTime = Date.now();\r\n\r\n\t\t\t//file _rels/.rels\r\n\t\t\tzip.folder('_rels').file('.rels', '<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?>'\r\n\t\t\t\t+ '<Relationships xmlns=\"http://schemas.openxmlformats.org/package/2006/relationships\">'\r\n\t\t\t\t+ '<Relationship Id=\"rId1\" Type=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument\" Target=\"xl/workbook.xml\"/>'\r\n\t\t\t\t+ '<Relationship Id=\"rId2\" Type=\"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties\" Target=\"docProps/core.xml\"/>'\r\n\t\t\t\t+ '<Relationship Id=\"rId3\" Type=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties\" Target=\"docProps/app.xml\"/>'\r\n\t\t\t\t+ '</Relationships>');\r\n\r\n\t\t\t//files folder docProps\r\n\t\t\tdocProps = zip.folder('docProps');\r\n\t\t\tdocProps.file('core.xml', '<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?>'\r\n\t\t\t\t+ '<cp:coreProperties xmlns:cp=\"http://schemas.openxmlformats.org/package/2006/metadata/core-properties\" xmlns:dc=\"http://purl.org/dc/elements/1.1/\" xmlns:dcterms=\"http://purl.org/dc/terms/\" xmlns:dcmitype=\"http://purl.org/dc/dcmitype/\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">'\r\n\t\t\t\t+ '<dc:creator>gonzalo</dc:creator>'\r\n\t\t\t\t+ '<dcterms:created xsi:type=\"dcterms:W3CDTF\">2010-12-23T01:32:21Z</dcterms:created>'\r\n\t\t\t\t+ '<cp:lastModifiedBy>xperTools</cp:lastModifiedBy>'\r\n\t\t\t\t+ '<dcterms:modified xsi:type=\"dcterms:W3CDTF\">2010-02-23T01:32:21Z</dcterms:modified>'\r\n\t\t\t\t+ '</cp:coreProperties>')\r\n\t\t\tdocProps.file('app.xml', '<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?>'\r\n\t\t\t\t+ '<Properties xmlns=\"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties\" xmlns:vt=\"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes\">'\r\n\t\t\t\t+ '<DocSecurity>0</DocSecurity>'\r\n\t\t\t\t+ '<ScaleCrop>false</ScaleCrop>'\r\n\t\t\t\t+ '<HeadingPairs>'\r\n\t\t\t\t+ '<vt:vector size=\"2\" baseType=\"variant\">'\r\n\t\t\t\t+ '<vt:variant>'\r\n\t\t\t\t+ '<vt:lpstr>Hojas de clculo</vt:lpstr>'\r\n\t\t\t\t+ '</vt:variant>'\r\n\t\t\t\t+ '<vt:variant>'\r\n\t\t\t\t+ '<vt:i4>2</vt:i4>'\r\n\t\t\t\t+ '</vt:variant>'\r\n\t\t\t\t+ '</vt:vector>'\r\n\t\t\t\t+ '</HeadingPairs>'\r\n\t\t\t\t+ '<TitlesOfParts>'\r\n\t\t\t\t+ '<vt:vector size=\"2\" baseType=\"lpstr\">'\r\n\t\t\t\t+ '<vt:lpstr>PivotTable</vt:lpstr>'\r\n\t\t\t\t+ '<vt:lpstr>SourceData</vt:lpstr>'\r\n\t\t\t\t+ '</vt:vector>'\r\n\t\t\t\t+ '</TitlesOfParts>'\r\n\t\t\t\t+ '<LinksUpToDate>false</LinksUpToDate>'\r\n\t\t\t\t+ '<SharedDoc>false</SharedDoc>'\r\n\t\t\t\t+ '<HyperlinksChanged>false</HyperlinksChanged>'\r\n\t\t\t\t+ '<AppVersion>12.0000</AppVersion>'\r\n\t\t\t\t+ '</Properties>');\r\n\r\n\r\n\t\t\t// [Content_Types].xml\r\n\t\t\tzip.file('[Content_Types].xml', '<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?>'\r\n\t\t\t\t+ '<Types xmlns=\"http://schemas.openxmlformats.org/package/2006/content-types\">'\r\n\t\t\t\t+ '<Default Extension=\"xml\" ContentType=\"application/xml\"/>'\r\n\t\t\t\t+ '<Default Extension=\"rels\" ContentType=\"application/vnd.openxmlformats-package.relationships+xml\"/>'\r\n\t\t\t\t+ '<Override PartName=\"/docProps/app.xml\" ContentType=\"application/vnd.openxmlformats-officedocument.extended-properties+xml\"/>'\r\n\t\t\t\t+ '<Override PartName=\"/docProps/core.xml\" ContentType=\"application/vnd.openxmlformats-package.core-properties+xml\"/>'\r\n\t\t\t\t+ '<Override PartName=\"/xl/workbook.xml\" ContentType=\"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml\"/>'\r\n\t\t\t\t+ '<Override PartName=\"/xl/worksheets/sheet2.xml\" ContentType=\"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml\"/>'\r\n\t\t\t\t+ '<Override PartName=\"/xl/sharedStrings.xml\" ContentType=\"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml\"/>'\r\n\t\t\t\t+ '<Override PartName=\"/xl/styles.xml\" ContentType=\"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml\"/>'\r\n\t\t\t\t+ '<Override PartName=\"/xl/theme/theme1.xml\" ContentType=\"application/vnd.openxmlformats-officedocument.theme+xml\"/>'\r\n\t\t\t\t+ '<Override PartName=\"/xl/worksheets/sheet1.xml\" ContentType=\"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml\"/>'\r\n\t\t\t\t+ '<Override PartName=\"/xl/pivotTables/pivotTable1.xml\" ContentType=\"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml\"/>'\r\n\t\t\t\t+ '<Override PartName=\"/xl/pivotCache/pivotCacheDefinition1.xml\" ContentType=\"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml\"/>'\r\n\t\t\t\t+ '<Override PartName=\"/xl/pivotCache/pivotCacheRecords1.xml\" ContentType=\"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml\"/>'\r\n\t\t\t\t+ '</Types>');\r\n\r\n\r\n\t\t\t//xl folder\t\r\n\t\t\txl = zip.folder('xl');\r\n\r\n\t\t\t// xl/_rels/workbook.xml.rels\r\n\t\t\txl.folder('_rels').file('workbook.xml.rels', '<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?>'\r\n\t\t\t\t+ '<Relationships xmlns=\"http://schemas.openxmlformats.org/package/2006/relationships\">'\r\n\t\t\t\t+ '<Relationship Id=\"rId1\" Type=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet\" Target=\"worksheets/sheet1.xml\"/>'\r\n\t\t\t\t+ '<Relationship Id=\"rId2\" Type=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet\" Target=\"worksheets/sheet2.xml\"/>'\r\n\t\t\t\t+ '<Relationship Id=\"rId3\" Type=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships/pivotCacheDefinition\" Target=\"pivotCache/pivotCacheDefinition1.xml\"/>'\r\n\t\t\t\t+ '<Relationship Id=\"rId4\" Type=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme\" Target=\"theme/theme1.xml\"/>'\r\n\t\t\t\t+ '<Relationship Id=\"rId5\" Type=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles\" Target=\"styles.xml\"/>'\r\n\t\t\t\t+ '<Relationship Id=\"rId6\" Type=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings\" Target=\"sharedStrings.xml\"/>'\r\n\t\t\t\t+ '</Relationships>');\r\n\r\n\t\t\t//pivot cache folder\r\n\t\t\tvar folderPivotCache = xl.folder('pivotCache').file('pivotCacheRecords1.xml', '<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?>'\r\n\t\t\t\t+ '<pivotCacheRecords xmlns=\"http://schemas.openxmlformats.org/spreadsheetml/2006/main\" xmlns:r=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships\">'\r\n\t\t\t\t+ '</pivotCacheRecords>');\r\n\r\n\r\n\t\t\tfolderPivotCache.file('pivotCacheDefinition1.xml', file.pivotCacheDefinition)\r\n\r\n\r\n\t\t\tfolderPivotCache.folder('_rels').file('pivotCacheDefinition1.xml.rels', '<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?>'\r\n\t\t\t\t+ '<Relationships xmlns=\"http://schemas.openxmlformats.org/package/2006/relationships\">'\r\n\t\t\t\t+ '<Relationship Id=\"rId1\" Type=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships/pivotCacheRecords\" Target=\"pivotCacheRecords1.xml\"/>'\r\n\t\t\t\t+ '</Relationships>')\r\n\r\n\r\n\r\n\t\t\t//folder pivot table\t\r\n\t\t\tvar folderPivotTable = xl.folder('pivotTables').file('pivotTable1.xml', file.pivotTable1);\r\n\r\n\t\t\tfolderPivotTable.folder('_rels').file('pivotTable1.xml.rels', '<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?>'\r\n\t\t\t\t+ '<Relationships xmlns=\"http://schemas.openxmlformats.org/package/2006/relationships\">'\r\n\t\t\t\t+ '<Relationship Id=\"rId1\" Type=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships/pivotCacheDefinition\" Target=\"../pivotCache/pivotCacheDefinition1.xml\"/>'\r\n\t\t\t\t+ '</Relationships>');\r\n\r\n\t\t\t//folder theme file theme1.xml\r\n\t\t\txl.folder('theme').file('theme1.xml', '<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?>'\r\n\t\t\t\t+ '<a:theme name=\"Tema de Office\" xmlns:a=\"http://schemas.openxmlformats.org/drawingml/2006/main\"/>');\r\n\r\n\t\t\t//xl/worksheets\r\n\t\t\txlWorksheets = xl.folder('worksheets');\r\n\t\t\txlWorksheets.file('sheet1.xml', '<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?>'\r\n\t\t\t\t+ '<worksheet xmlns=\"http://schemas.openxmlformats.org/spreadsheetml/2006/main\" xmlns:r=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships\">'\r\n\t\t\t\t+ '<sheetData/>'\r\n\t\t\t\t+ '</worksheet>');\r\n\r\n\r\n\r\n\t\t\t// Content dependent\r\n\t\t\tstyles = new Array(1);\r\n\t\t\tborders = new Array(1);\r\n\t\t\tfonts = new Array(1);\r\n\t\t\tvar fills = \"\";\r\n\t\t\tvar fillNumber = 1;\r\n\t\t\tw = file.worksheets.length;\r\n\t\t\twhile (w--) {\r\n\t\t\t\t// Generate worksheet (gather sharedStrings), and possibly table files, then generate entries for constant files below\r\n\t\t\t\tid = w + 1;\r\n\t\t\t\t// Generate sheetX.xml in var s\r\n\t\t\t\tworksheet = file.worksheets[w]; data = worksheet.data;\r\n\t\t\t\ts = '';\r\n\t\t\t\tcolumns = [];\r\n\t\t\t\tmerges = [];\r\n\t\t\t\ti = -1; l = data.length;\r\n\t\t\t\twhile (++i < l) {\r\n\t\t\t\t\tj = -1; k = data[i].length;\r\n\t\t\t\t\ts += '<row r=\"' + (i + 1) + '\" x14ac:dyDescent=\"0.25\">';\r\n\t\t\t\t\twhile (++j < k) {\r\n\t\t\t\t\t\tvar isString = false;\r\n\t\t\t\t\t\tcell = data[i][j]; val = cell.hasOwnProperty('value') ? cell.value : cell; t = '';\r\n\t\t\t\t\t\t// supported styles: borders, hAlign, formatCode and font style\r\n\t\t\t\t\t\tstyle = {\r\n\t\t\t\t\t\t\tborders: cell.borders,\r\n\t\t\t\t\t\t\thAlign: cell.hAlign,\r\n\t\t\t\t\t\t\tvAlign: cell.vAlign,\r\n\t\t\t\t\t\t\tbold: cell.bold,\r\n\t\t\t\t\t\t\titalic: cell.italic,\r\n\t\t\t\t\t\t\tfontColor: cell.fontColor,\r\n\t\t\t\t\t\t\tfontName: cell.fontName,\r\n\t\t\t\t\t\t\tfontSize: cell.fontSize,\r\n\t\t\t\t\t\t\tfill: cell.fill,\r\n\t\t\t\t\t\t\tformatCode: cell.formatCode || 'General'\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tcolWidth = 0;\r\n\t\t\t\t\t\tif (( ((cell.isString) || (val && typeof val === 'string' && !isFinite(val))) && !(cell.genexusType == 'date') && !(cell.genexusType == 'datetime')) || (cell.genexusType == 'character')) {\r\n\t\t\t\t\t\t\t// If value is string, and not string of just a number\r\n\t\t\t\t\t\t\tval = escapeXML(val);\r\n\t\t\t\t\t\t\tt = 'inlineStr';\r\n\t\t\t\t\t\t\tisString = true;\r\n\t\t\t\t\t\t} else if (typeof val === 'boolean') {\r\n\t\t\t\t\t\t\tval = (val ? 1 : 0); t = 'b';\r\n\t\t\t\t\t\t\tcolWidth = 1;\r\n\t\t\t\t\t\t} else if ((typeOf(val) === 'date') || (cell.genexusType == 'date') || (cell.genexusType == 'datetime')) {\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tval = parseDate(val , cell, true);\r\n\t\t\t\t\t\t\tt = 'inlineStr';\r\n\t\t\t\t\t\t\tisString = true;\r\n\t\t\t\t\t\t\tstyle.hAlign = \"right\"\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t} else if (typeof val === 'object') {\r\n\t\t\t\t\t\t\t// unsupported value\r\n\t\t\t\t\t\t\tval = null\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t// number, or string which is a number \r\n\t\t\t\t\t\t\tcolWidth = ('' + val).length;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// use stringified version as unic and reproductible style signature\r\n\t\t\t\t\t\tstyle = JSON.stringify(style);\r\n\t\t\t\t\t\tindex = styles.indexOf(style);\r\n\t\t\t\t\t\tif (index < 0) {\r\n\t\t\t\t\t\t\tstyle = styles.push(style) - 1;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tstyle = index;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// keeps largest cell in column, and autoWidth flag that may be set on any cell\r\n\t\t\t\t\t\tif (columns[j] == null) {\r\n\t\t\t\t\t\t\tcolumns[j] = { autoWidth: false, max: 0 };\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (cell.autoWidth) {\r\n\t\t\t\t\t\t\tcolumns[j].autoWidth = true\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (colWidth > columns[j].max) {\r\n\t\t\t\t\t\t\tcolumns[j].max = colWidth;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// store merges if needed and add missing cells. Cannot have rowSpan AND colSpan\r\n\t\t\t\t\t\tif (cell.colSpan > 1) {\r\n\t\t\t\t\t\t\t// horizontal merge. ex: B12:E12. Add missing cells (with same attribute but value) to current row\r\n\t\t\t\t\t\t\tmerges.push([numAlpha(j) + (i + 1), numAlpha(j + cell.colSpan - 1) + (i + 1)]);\r\n\t\t\t\t\t\t\tmerged = [j, 0]\r\n\t\t\t\t\t\t\tfor (var m = 0; m < cell.colSpan - 1; m++) {\r\n\t\t\t\t\t\t\t\tmerged.push(cell);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tdata[i].splice.apply(data[i], merged);\r\n\t\t\t\t\t\t\tk += cell.colSpan - 1;\r\n\t\t\t\t\t\t} else if (cell.rowSpan > 1) {\r\n\t\t\t\t\t\t\t// vertical merge. ex: B12:B15. Add missing cells (with same attribute but value) to next columns\r\n\t\t\t\t\t\t\tfor (var m = 1; m < cell.rowSpan; m++) {\r\n\t\t\t\t\t\t\t\tif (data[i + m]) {\r\n\t\t\t\t\t\t\t\t\tdata[i + m].splice(j, 0, cell)\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t// read the end of data\r\n\t\t\t\t\t\t\t\t\tcell.rowSpan = m;\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tmerges.push([numAlpha(j) + (i + 1), numAlpha(j) + (i + cell.rowSpan)]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (cell.rowSpan > 1 || cell.colSpan > 1) {\r\n\t\t\t\t\t\t\t// deletes value, rowSpan and colSpan from cell to avoid refering it from copied cells\r\n\t\t\t\t\t\t\tdelete cell.value;\r\n\t\t\t\t\t\t\tdelete cell.rowSpan;\r\n\t\t\t\t\t\t\tdelete cell.colSpan;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ts += '<c r=\"' + numAlpha(j) + (i + 1) + '\"' + (style ? ' s=\"' + style + '\"' : '') + (t ? ' t=\"' + t + '\"' : '');\r\n\t\t\t\t\t\tif (val != null) {\r\n\t\t\t\t\t\t\tif (isString) {\r\n\t\t\t\t\t\t\t\ts += '>' + (cell.formula ? '<f>' + cell.formula + '</f>' : '') + '<is><t>' + val + '</t></is></c>';\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\ts += '>' + (cell.formula ? '<f>' + cell.formula + '</f>' : '') + '<v>' + val + '</v></c>';\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\ts += '/>';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\ts += '</row>';\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcols = []\r\n\t\t\t\tfor (i = 0; i < columns.length; i++) {\r\n\t\t\t\t\tif (columns[i].autoWidth) {\r\n\t\t\t\t\t\tcols.push('<col min=\"', i + 1, '\" max=\"', i + 1, '\" width=\"', columns[i].max, '\" bestFit=\"1\"/>');\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t// only add cols definition if not empty\r\n\t\t\t\tif (cols.length > 0) {\r\n\t\t\t\t\tcols = ['<cols>'].concat(cols, ['</cols>']).join('');\r\n\t\t\t\t}\r\n\r\n\t\t\t\ts = '<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?><worksheet xmlns=\"http://schemas.openxmlformats.org/spreadsheetml/2006/main\" xmlns:r=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships\" xmlns:mc=\"http://schemas.openxmlformats.org/markup-compatibility/2006\" mc:Ignorable=\"x14ac\" xmlns:x14ac=\"http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac\">'\r\n\t\t\t\t\t+ '<dimension ref=\"A1:' + numAlpha(data[0].length - 1) + data.length + '\"/><sheetViews><sheetView ' + (w === file.activeWorksheet ? 'tabSelected=\"1\" ' : '')\r\n\t\t\t\t\t+ ' workbookViewId=\"0\"/></sheetViews><sheetFormatPr defaultRowHeight=\"15\" x14ac:dyDescent=\"0.25\"/>'\r\n\t\t\t\t\t+ cols\r\n\t\t\t\t\t+ '<sheetData>'\r\n\t\t\t\t\t+ s\r\n\t\t\t\t\t+ '</sheetData>';\r\n\t\t\t\tif (merges.length > 0) {\r\n\t\t\t\t\ts += '<mergeCells count=\"' + merges.length + '\">';\r\n\t\t\t\t\tfor (i = 0; i < merges.length; i++) {\r\n\t\t\t\t\t\ts += '<mergeCell ref=\"' + merges[i].join(':') + '\"/>';\r\n\t\t\t\t\t}\r\n\t\t\t\t\ts += '</mergeCells>';\r\n\t\t\t\t}\r\n\t\t\t\ts += '<pageMargins left=\"0.7\" right=\"0.7\" top=\"0.75\" bottom=\"0.75\" header=\"0.3\" footer=\"0.3\"/>';\r\n\t\t\t\tif (worksheet.table) {\r\n\t\t\t\t\ts += '<tableParts count=\"1\"><tablePart r:id=\"rId1\"/></tableParts>';\r\n\t\t\t\t}\r\n\t\t\t\txlWorksheets.file('sheet2.xml', s + '</worksheet>');\r\n\t\t\t}\r\n\t\t\t//xlWorksheets.file('sheet2.xml', file.Sheet2);\r\n\r\n\t\t\t// xl/styles.xml\r\n\t\t\ti = styles.length; t = [];\r\n\t\t\tvar fillIndex = 2;\r\n\t\t\tvar actualFill = 0;\r\n\t\t\twhile (--i) {\r\n\t\t\t\t// Don't process index 0, already added\r\n\t\t\t\tstyle = JSON.parse(styles[i]);\r\n\r\n\t\t\t\t// cell formating, refer to it if necessary\r\n\t\t\t\tif (style.formatCode !== 'General') {\r\n\t\t\t\t\tindex = numFmts.indexOf(style.formatCode);\r\n\t\t\t\t\tif (index < 0) {\r\n\t\t\t\t\t\tindex = 164 + t.length;\r\n\t\t\t\t\t\tt.push('<numFmt formatCode=\"' + style.formatCode + '\" numFmtId=\"' + index + '\"/>');\r\n\t\t\t\t\t}\r\n\t\t\t\t\tstyle.formatCode = index\r\n\t\t\t\t} else {\r\n\t\t\t\t\tstyle.formatCode = 0\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// border declaration: add a new declaration and refer to it in style\r\n\t\t\t\tborderIndex = 0\r\n\t\t\t\tif (style.borders) {\r\n\t\t\t\t\tborder = ['<border>']\r\n\t\t\t\t\t// order is significative\r\n\t\t\t\t\tfor (var edge in { left: 0, right: 0, top: 0, bottom: 0, diagonal: 0 }) {\r\n\t\t\t\t\t\tif (style.borders[edge]) {\r\n\t\t\t\t\t\t\tvar color = style.borders[edge];\r\n\t\t\t\t\t\t\t// add transparency if missing\r\n\t\t\t\t\t\t\tif (color.length === 6) {\r\n\t\t\t\t\t\t\t\tcolor = 'FF' + color;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tborder.push('<', edge, ' style=\"thin\">', '<color rgb=\"', style.borders[edge], '\"/></', edge, '>');\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tborder.push('<', edge, '/>');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tborder.push('</border>');\r\n\t\t\t\t\tborder = border.join('');\r\n\t\t\t\t\t// try to reuse existing border\r\n\t\t\t\t\tborderIndex = borders.indexOf(border);\r\n\t\t\t\t\tif (borderIndex < 0) {\r\n\t\t\t\t\t\tborderIndex = borders.push(border) - 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// font declaration: add a new declaration and refer to it in style\r\n\t\t\t\tfontIndex = 0\r\n\t\t\t\tif (style.bold || style.italic || style.fontSize || style.fontName || style.fontColor) {\r\n\t\t\t\t\tfont = ['<font>']\r\n\t\t\t\t\tif (style.bold) {\r\n\t\t\t\t\t\tfont.push('<b/>');\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (style.italic) {\r\n\t\t\t\t\t\tfont.push('<i/>');\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfont.push('<sz val=\"', style.fontSize || defaultFontSize, '\"/>');\r\n\t\t\t\t\tvar colString =\r\n\t\t\t\t\t\tfont.push('<color rgb=\"FF', style.fontColor || defaultFontColor, '\"/>');\r\n\t\t\t\t\tfont.push('<name val=\"', style.fontName || defaultFontName, '\"/>');\r\n\t\t\t\t\tfont.push('<family val=\"2\"/>', '</font>');\r\n\t\t\t\t\tfont = font.join('');\r\n\t\t\t\t\t// try to reuse existing font\r\n\t\t\t\t\tfontIndex = fonts.indexOf(font);\r\n\t\t\t\t\tif (fontIndex < 0) {\r\n\t\t\t\t\t\tfontIndex = fonts.push(font) - 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//fill declaration: add a new declaration and refer to it in style\r\n\t\t\t\tactualFill = 0;\r\n\t\t\t\tif (style.fill) {\r\n\t\t\t\t\tfills = fills + '<fill><patternFill patternType=\"solid\"><fgColor rgb=\"FF' + style.fill + '\"/>'\r\n\t\t\t\t\t\t+ '<bgColor indexed=\"64\"/></patternFill></fill>'\r\n\t\t\t\t\tfillNumber++;\r\n\t\t\t\t\tactualFill = fillNumber;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// declares style, and refer to optionnal formatCode, font and borders\r\n\t\t\t\tstyles[i] = ['<xf xfId=\"0\" borderId=\"', //fillId=\"0\"  \r\n\t\t\t\t\tborderIndex,\r\n\t\t\t\t\t'\" fontId=\"',\r\n\t\t\t\t\tfontIndex,\r\n\t\t\t\t\t'\" numFmtId=\"',\r\n\t\t\t\t\tstyle.formatCode,\r\n\t\t\t\t\t'\" fillId=\"',\r\n\t\t\t\t\tactualFill,\r\n\t\t\t\t\t'\" ',\r\n\t\t\t\t\t(style.hAlign || style.vAlign ? 'applyAlignment=\"1\" ' : ' '),\r\n\t\t\t\t\t(style.formatCode > 0 ? 'applyNumberFormat=\"1\" ' : ' '),\r\n\t\t\t\t\t(borderIndex > 0 ? 'applyBorder=\"1\" ' : ' '),\r\n\t\t\t\t\t(fontIndex > 0 ? 'applyFont=\"1\" ' : ' '),\r\n\t\t\t\t\t(actualFill > 0 ? 'applyFill=\"1\" ' : ' '),\r\n\t\t\t\t\t'>'\r\n\t\t\t\t];\r\n\t\t\t\tif (style.hAlign || style.vAlign) {\r\n\t\t\t\t\tstyles[i].push('<alignment');\r\n\t\t\t\t\tif (style.hAlign) {\r\n\t\t\t\t\t\tstyles[i].push(' horizontal=\"', style.hAlign, '\"');\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (style.vAlign) {\r\n\t\t\t\t\t\tstyles[i].push(' vertical=\"', style.vAlign, '\"');\r\n\t\t\t\t\t}\r\n\t\t\t\t\tstyles[i].push('/>');\r\n\t\t\t\t}\r\n\t\t\t\tstyles[i].push('</xf>');\r\n\t\t\t\tstyles[i] = styles[i].join('');\r\n\t\t\t}\r\n\t\t\tt = t.length ? '<numFmts count=\"' + t.length + '\">' + t.join('') + '</numFmts>' : '';\r\n\r\n\t\t\tif (file.style != \"\") {\r\n\t\t\t\tt = file.style //TODO: concat with the previous number format\r\n\t\t\t}\r\n\t\t\tvar multStyle = '<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?><styleSheet xmlns=\"http://schemas.openxmlformats.org/spreadsheetml/2006/main\" xmlns:mc=\"http://schemas.openxmlformats.org/markup-compatibility/2006\" mc:Ignorable=\"x14ac\" xmlns:x14ac=\"http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac\">'\r\n\t\t\t\t+ t + '<fonts count=\"' + fonts.length + '\" x14ac:knownFonts=\"1\"><font><sz val=\"' + defaultFontSize + '\"/><color theme=\"1\"/><name val=\"' + defaultFontName + '\"/><family val=\"2\"/>'\r\n\t\t\t\t+ '<scheme val=\"minor\"/></font>' + fonts.join('') + '</fonts>'\r\n\t\t\t\t+ '<fills><fill><patternFill patternType=\"none\"/></fill><fill><patternFill patternType=\"gray125\"/></fill>' + fills + '</fills>'\r\n\t\t\t\t+ '<borders count=\"' + borders.length + '\"><border><left/><right/><top/><bottom/><diagonal/></border>'\r\n\t\t\t\t+ borders.join('') + '</borders><cellStyleXfs count=\"1\">'\r\n\t\t\t\t+ '<xf numFmtId=\"0\" fontId=\"0\" fillId=\"0\" borderId=\"0\"/></cellStyleXfs><cellXfs count=\"' + styles.length + '\"><xf numFmtId=\"0\" fontId=\"0\" fillId=\"0\" borderId=\"0\" xfId=\"0\"/>'\r\n\t\t\t\t+ styles.join('') + '</cellXfs><cellStyles count=\"1\"><cellStyle name=\"Normal\" xfId=\"0\" builtinId=\"0\"/></cellStyles>' //<dxfs count=\"0\"/>'\r\n\t\t\tif (file.dfx != undefined) {\r\n\t\t\t\tmultStyle = multStyle + '<dxfs>' + file.dfx + '</dxfs>';\r\n\t\t\t} else {\r\n\t\t\t\tmultStyle = multStyle + '<dxfs count=\"0\"/>'\r\n\t\t\t}\r\n\t\t\tmultStyle = multStyle + '<tableStyles count=\"0\" defaultTableStyle=\"TableStyleMedium2\" defaultPivotStyle=\"PivotStyleLight16\"/>'\r\n\t\t\t\t+ '<extLst><ext uri=\"{EB79DEF2-80B8-43e5-95BD-54CBDDF9020C}\" xmlns:x14=\"http://schemas.microsoft.com/office/spreadsheetml/2009/9/main\">'\r\n\t\t\t\t+ '<x14:slicerStyles defaultSlicerStyle=\"SlicerStyleLight1\"/></ext></extLst></styleSheet>'\r\n\r\n\t\t\txl.file('styles.xml', multStyle)\r\n\t\t\t//xl.file('styles.xml', file.style);\r\n\r\n\t\t\txlWorksheets.folder('_rels').file('sheet1.xml.rels', '<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?>'\r\n\t\t\t\t+ '<Relationships xmlns=\"http://schemas.openxmlformats.org/package/2006/relationships\"><Relationship Id=\"rId1\" Type=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships/pivotTable\" Target=\"../pivotTables/pivotTable1.xml\"/></Relationships>')\r\n\r\n\t\t\t//shared strings\r\n\t\t\txl.file('sharedStrings.xml', '<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?>'\r\n\t\t\t\t+ '<sst xmlns=\"http://schemas.openxmlformats.org/spreadsheetml/2006/main\">'\r\n\t\t\t\t+ '</sst>')\r\n\r\n\r\n\t\t\t//workwood\r\n\t\t\txl.file('workbook.xml', '<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?>'\r\n\t\t\t\t+ '<workbook xmlns=\"http://schemas.openxmlformats.org/spreadsheetml/2006/main\" xmlns:r=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships\">'\r\n\t\t\t\t+ '<fileVersion appName=\"xl\" lastEdited=\"4\" lowestEdited=\"4\" rupBuild=\"4506\"/>'\r\n\t\t\t\t+ '<workbookPr defaultThemeVersion=\"124226\"/>'\r\n\t\t\t\t+ '<bookViews>'\r\n\t\t\t\t+ '<workbookView xWindow=\"360\" yWindow=\"555\" windowWidth=\"21015\" windowHeight=\"9405\"/>'\r\n\t\t\t\t+ '</bookViews>'\r\n\t\t\t\t+ '<sheets>'\r\n\t\t\t\t+ '<sheet name=\"PivotTable\" sheetId=\"1\" r:id=\"rId1\"/>'\r\n\t\t\t\t+ '<sheet name=\"SourceData\" sheetId=\"2\" r:id=\"rId2\"/>'\r\n\t\t\t\t+ '</sheets>'\r\n\t\t\t\t+ '<calcPr calcId=\"125725\"/>'\r\n\t\t\t\t+ '<pivotCaches>'\r\n\t\t\t\t+ '<pivotCache cacheId=\"5\" r:id=\"rId3\"/>'\r\n\t\t\t\t+ '</pivotCaches>'\r\n\t\t\t\t+ '<fileRecoveryPr repairLoad=\"1\"/>'\r\n\t\t\t\t+ '</workbook>');\r\n\r\n\r\n\t\t\t//xl styles\r\n\r\n\r\n\r\n\t\t\tprocessTime = Date.now() - processTime;\r\n\t\t\tzipTime = Date.now();\r\n\t\t\tresult = {\r\n\t\t\t\tbase64: zip.generate({ compression: 'STORE' }), zipTime: Date.now() - zipTime, processTime: processTime,\r\n\t\t\t\thref: function () { return 'data:application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;base64,' + this.base64; }\r\n\t\t\t};\r\n\t\t} else {\r\n\t\t\t// Save\r\n\t\t\tprocessTime = Date.now();\r\n\t\t\tsharedStrings = [[], 0];\r\n\t\t\t// Fully static\r\n\t\t\tzip.folder('_rels').file('.rels', '<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?><Relationships xmlns=\"http://schemas.openxmlformats.org/package/2006/relationships\"><Relationship Id=\"rId3\" Type=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties\" Target=\"docProps/app.xml\"/><Relationship Id=\"rId2\" Type=\"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties\" Target=\"docProps/core.xml\"/><Relationship Id=\"rId1\" Type=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument\" Target=\"xl/workbook.xml\"/></Relationships>');\r\n\t\t\tdocProps = zip.folder('docProps');\r\n\r\n\t\t\txl = zip.folder('xl');\r\n\t\t\txl.folder('theme').file('theme1.xml', '<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?><a:theme xmlns:a=\"http://schemas.openxmlformats.org/drawingml/2006/main\" name=\"Office Theme\"><a:themeElements><a:clrScheme name=\"Office\"><a:dk1><a:sysClr val=\"windowText\" lastClr=\"000000\"/></a:dk1><a:lt1><a:sysClr val=\"window\" lastClr=\"FFFFFF\"/></a:lt1><a:dk2><a:srgbClr val=\"1F497D\"/></a:dk2><a:lt2><a:srgbClr val=\"EEECE1\"/></a:lt2><a:accent1><a:srgbClr val=\"4F81BD\"/></a:accent1><a:accent2><a:srgbClr val=\"C0504D\"/></a:accent2><a:accent3><a:srgbClr val=\"9BBB59\"/></a:accent3><a:accent4><a:srgbClr val=\"8064A2\"/></a:accent4><a:accent5><a:srgbClr val=\"4BACC6\"/></a:accent5><a:accent6><a:srgbClr val=\"F79646\"/></a:accent6><a:hlink><a:srgbClr val=\"0000FF\"/></a:hlink><a:folHlink><a:srgbClr val=\"800080\"/></a:folHlink></a:clrScheme><a:fontScheme name=\"Office\"><a:majorFont><a:latin typeface=\"Cambria\"/><a:ea typeface=\"\"/><a:cs typeface=\"\"/><a:font script=\"Jpan\" typeface=\"MS P????\"/><a:font script=\"Hang\" typeface=\"?? ??\"/><a:font script=\"Hans\" typeface=\"??\"/><a:font script=\"Hant\" typeface=\"????\"/><a:font script=\"Arab\" typeface=\"Times New Roman\"/><a:font script=\"Hebr\" typeface=\"Times New Roman\"/><a:font script=\"Thai\" typeface=\"Tahoma\"/><a:font script=\"Ethi\" typeface=\"Nyala\"/><a:font script=\"Beng\" typeface=\"Vrinda\"/><a:font script=\"Gujr\" typeface=\"Shruti\"/><a:font script=\"Khmr\" typeface=\"MoolBoran\"/><a:font script=\"Knda\" typeface=\"Tunga\"/><a:font script=\"Guru\" typeface=\"Raavi\"/><a:font script=\"Cans\" typeface=\"Euphemia\"/><a:font script=\"Cher\" typeface=\"Plantagenet Cherokee\"/><a:font script=\"Yiii\" typeface=\"Microsoft Yi Baiti\"/><a:font script=\"Tibt\" typeface=\"Microsoft Himalaya\"/><a:font script=\"Thaa\" typeface=\"MV Boli\"/><a:font script=\"Deva\" typeface=\"Mangal\"/><a:font script=\"Telu\" typeface=\"Gautami\"/><a:font script=\"Taml\" typeface=\"Latha\"/><a:font script=\"Syrc\" typeface=\"Estrangelo Edessa\"/><a:font script=\"Orya\" typeface=\"Kalinga\"/><a:font script=\"Mlym\" typeface=\"Kartika\"/><a:font script=\"Laoo\" typeface=\"DokChampa\"/><a:font script=\"Sinh\" typeface=\"Iskoola Pota\"/><a:font script=\"Mong\" typeface=\"Mongolian Baiti\"/><a:font script=\"Viet\" typeface=\"Times New Roman\"/><a:font script=\"Uigh\" typeface=\"Microsoft Uighur\"/><a:font script=\"Geor\" typeface=\"Sylfaen\"/></a:majorFont><a:minorFont><a:latin typeface=\"Calibri\"/><a:ea typeface=\"\"/><a:cs typeface=\"\"/><a:font script=\"Jpan\" typeface=\"MS P????\"/><a:font script=\"Hang\" typeface=\"?? ??\"/><a:font script=\"Hans\" typeface=\"??\"/><a:font script=\"Hant\" typeface=\"????\"/><a:font script=\"Arab\" typeface=\"Arial\"/><a:font script=\"Hebr\" typeface=\"Arial\"/><a:font script=\"Thai\" typeface=\"Tahoma\"/><a:font script=\"Ethi\" typeface=\"Nyala\"/><a:font script=\"Beng\" typeface=\"Vrinda\"/><a:font script=\"Gujr\" typeface=\"Shruti\"/><a:font script=\"Khmr\" typeface=\"DaunPenh\"/><a:font script=\"Knda\" typeface=\"Tunga\"/><a:font script=\"Guru\" typeface=\"Raavi\"/><a:font script=\"Cans\" typeface=\"Euphemia\"/><a:font script=\"Cher\" typeface=\"Plantagenet Cherokee\"/><a:font script=\"Yiii\" typeface=\"Microsoft Yi Baiti\"/><a:font script=\"Tibt\" typeface=\"Microsoft Himalaya\"/><a:font script=\"Thaa\" typeface=\"MV Boli\"/><a:font script=\"Deva\" typeface=\"Mangal\"/><a:font script=\"Telu\" typeface=\"Gautami\"/><a:font script=\"Taml\" typeface=\"Latha\"/><a:font script=\"Syrc\" typeface=\"Estrangelo Edessa\"/><a:font script=\"Orya\" typeface=\"Kalinga\"/><a:font script=\"Mlym\" typeface=\"Kartika\"/><a:font script=\"Laoo\" typeface=\"DokChampa\"/><a:font script=\"Sinh\" typeface=\"Iskoola Pota\"/><a:font script=\"Mong\" typeface=\"Mongolian Baiti\"/><a:font script=\"Viet\" typeface=\"Arial\"/><a:font script=\"Uigh\" typeface=\"Microsoft Uighur\"/><a:font script=\"Geor\" typeface=\"Sylfaen\"/></a:minorFont></a:fontScheme><a:fmtScheme name=\"Office\"><a:fillStyleLst><a:solidFill><a:schemeClr val=\"phClr\"/></a:solidFill><a:gradFill rotWithShape=\"1\"><a:gsLst><a:gs pos=\"0\"><a:schemeClr val=\"phClr\"><a:tint val=\"50000\"/><a:satMod val=\"300000\"/></a:schemeClr></a:gs><a:gs pos=\"35000\"><a:schemeClr val=\"phClr\"><a:tint val=\"37000\"/><a:satMod val=\"300000\"/></a:schemeClr></a:gs><a:gs pos=\"100000\"><a:schemeClr val=\"phClr\"><a:tint val=\"15000\"/><a:satMod val=\"350000\"/></a:schemeClr></a:gs></a:gsLst><a:lin ang=\"16200000\" scaled=\"1\"/></a:gradFill><a:gradFill rotWithShape=\"1\"><a:gsLst><a:gs pos=\"0\"><a:schemeClr val=\"phClr\"><a:shade val=\"51000\"/><a:satMod val=\"130000\"/></a:schemeClr></a:gs><a:gs pos=\"80000\"><a:schemeClr val=\"phClr\"><a:shade val=\"93000\"/><a:satMod val=\"130000\"/></a:schemeClr></a:gs><a:gs pos=\"100000\"><a:schemeClr val=\"phClr\"><a:shade val=\"94000\"/><a:satMod val=\"135000\"/></a:schemeClr></a:gs></a:gsLst><a:lin ang=\"16200000\" scaled=\"0\"/></a:gradFill></a:fillStyleLst><a:lnStyleLst><a:ln w=\"9525\" cap=\"flat\" cmpd=\"sng\" algn=\"ctr\"><a:solidFill><a:schemeClr val=\"phClr\"><a:shade val=\"95000\"/><a:satMod val=\"105000\"/></a:schemeClr></a:solidFill><a:prstDash val=\"solid\"/></a:ln><a:ln w=\"25400\" cap=\"flat\" cmpd=\"sng\" algn=\"ctr\"><a:solidFill><a:schemeClr val=\"phClr\"/></a:solidFill><a:prstDash val=\"solid\"/></a:ln><a:ln w=\"38100\" cap=\"flat\" cmpd=\"sng\" algn=\"ctr\"><a:solidFill><a:schemeClr val=\"phClr\"/></a:solidFill><a:prstDash val=\"solid\"/></a:ln></a:lnStyleLst><a:effectStyleLst><a:effectStyle><a:effectLst><a:outerShdw blurRad=\"40000\" dist=\"20000\" dir=\"5400000\" rotWithShape=\"0\"><a:srgbClr val=\"000000\"><a:alpha val=\"38000\"/></a:srgbClr></a:outerShdw></a:effectLst></a:effectStyle><a:effectStyle><a:effectLst><a:outerShdw blurRad=\"40000\" dist=\"23000\" dir=\"5400000\" rotWithShape=\"0\"><a:srgbClr val=\"000000\"><a:alpha val=\"35000\"/></a:srgbClr></a:outerShdw></a:effectLst></a:effectStyle><a:effectStyle><a:effectLst><a:outerShdw blurRad=\"40000\" dist=\"23000\" dir=\"5400000\" rotWithShape=\"0\"><a:srgbClr val=\"000000\"><a:alpha val=\"35000\"/></a:srgbClr></a:outerShdw></a:effectLst><a:scene3d><a:camera prst=\"orthographicFront\"><a:rot lat=\"0\" lon=\"0\" rev=\"0\"/></a:camera><a:lightRig rig=\"threePt\" dir=\"t\"><a:rot lat=\"0\" lon=\"0\" rev=\"1200000\"/></a:lightRig></a:scene3d><a:sp3d><a:bevelT w=\"63500\" h=\"25400\"/></a:sp3d></a:effectStyle></a:effectStyleLst><a:bgFillStyleLst><a:solidFill><a:schemeClr val=\"phClr\"/></a:solidFill><a:gradFill rotWithShape=\"1\"><a:gsLst><a:gs pos=\"0\"><a:schemeClr val=\"phClr\"><a:tint val=\"40000\"/><a:satMod val=\"350000\"/></a:schemeClr></a:gs><a:gs pos=\"40000\"><a:schemeClr val=\"phClr\"><a:tint val=\"45000\"/><a:shade val=\"99000\"/><a:satMod val=\"350000\"/></a:schemeClr></a:gs><a:gs pos=\"100000\"><a:schemeClr val=\"phClr\"><a:shade val=\"20000\"/><a:satMod val=\"255000\"/></a:schemeClr></a:gs></a:gsLst><a:path path=\"circle\"><a:fillToRect l=\"50000\" t=\"-80000\" r=\"50000\" b=\"180000\"/></a:path></a:gradFill><a:gradFill rotWithShape=\"1\"><a:gsLst><a:gs pos=\"0\"><a:schemeClr val=\"phClr\"><a:tint val=\"80000\"/><a:satMod val=\"300000\"/></a:schemeClr></a:gs><a:gs pos=\"100000\"><a:schemeClr val=\"phClr\"><a:shade val=\"30000\"/><a:satMod val=\"200000\"/></a:schemeClr></a:gs></a:gsLst><a:path path=\"circle\"><a:fillToRect l=\"50000\" t=\"50000\" r=\"50000\" b=\"50000\"/></a:path></a:gradFill></a:bgFillStyleLst></a:fmtScheme></a:themeElements><a:objectDefaults/><a:extraClrSchemeLst/></a:theme>');\r\n\t\t\txlWorksheets = xl.folder('worksheets');\r\n\r\n\t\t\t// Not content dependent\r\n\t\t\tdocProps.file('core.xml', '<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?><cp:coreProperties xmlns:cp=\"http://schemas.openxmlformats.org/package/2006/metadata/core-properties\" xmlns:dc=\"http://purl.org/dc/elements/1.1/\" xmlns:dcterms=\"http://purl.org/dc/terms/\" xmlns:dcmitype=\"http://purl.org/dc/dcmitype/\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"><dc:creator>'\r\n\t\t\t\t+ (file.creator || 'XLSX.js') + '</dc:creator><cp:lastModifiedBy>' + (file.lastModifiedBy || 'XLSX.js') + '</cp:lastModifiedBy><dcterms:created xsi:type=\"dcterms:W3CDTF\">'\r\n\t\t\t\t+ (file.created || new Date()).toISOString() + '</dcterms:created><dcterms:modified xsi:type=\"dcterms:W3CDTF\">' + (file.modified || new Date()).toISOString() + '</dcterms:modified></cp:coreProperties>');\r\n\r\n\t\t\t// Content dependent\r\n\t\t\tstyles = new Array(1);\r\n\t\t\tborders = new Array(1);\r\n\t\t\tfonts = new Array(1);\r\n\t\t\tvar fills = \"\";\r\n\t\t\tvar fillNumber = 1;\r\n\t\t\tw = file.worksheets.length;\r\n\t\t\twhile (w--) {\r\n\t\t\t\t// Generate worksheet (gather sharedStrings), and possibly table files, then generate entries for constant files below\r\n\t\t\t\tid = w + 1;\r\n\t\t\t\t// Generate sheetX.xml in var s\r\n\t\t\t\tworksheet = file.worksheets[w]; data = worksheet.data;\r\n\t\t\t\ts = '';\r\n\t\t\t\tcolumns = [];\r\n\t\t\t\tmerges = [];\r\n\t\t\t\ti = -1; l = data.length;\r\n\t\t\t\twhile (++i < l) {\r\n\t\t\t\t\tj = -1; k = data[i].length;\r\n\t\t\t\t\ts += '<row r=\"' + (i + 1) + '\" x14ac:dyDescent=\"0.25\">';\r\n\t\t\t\t\twhile (++j < k) {\r\n\t\t\t\t\t\tcell = data[i][j]; val = cell.hasOwnProperty('value') ? cell.value : cell; t = '';\r\n\t\t\t\t\t\t// supported styles: borders, hAlign, formatCode and font style\r\n\t\t\t\t\t\tstyle = {\r\n\t\t\t\t\t\t\tborders: cell.borders,\r\n\t\t\t\t\t\t\thAlign: cell.hAlign,\r\n\t\t\t\t\t\t\tvAlign: cell.vAlign,\r\n\t\t\t\t\t\t\tbold: cell.bold,\r\n\t\t\t\t\t\t\titalic: cell.italic,\r\n\t\t\t\t\t\t\tfontColor: cell.fontColor,\r\n\t\t\t\t\t\t\tfontName: cell.fontName,\r\n\t\t\t\t\t\t\tfontSize: cell.fontSize,\r\n\t\t\t\t\t\t\tfill: cell.fill,\r\n\t\t\t\t\t\t\tformatCode: cell.formatCode || 'General'\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tcolWidth = 0;\r\n\t\t\t\t\t\tif ((val && typeof val === 'string' && !isFinite(val) && !(cell.genexusType == 'date') && !(cell.genexusType == 'datetime')) || (cell.genexusType == 'character'))  {\r\n\t\t\t\t\t\t\t// If value is string, and not string of just a number, place a sharedString reference instead of the value\r\n\t\t\t\t\t\t\tval = escapeXML(val);\r\n\t\t\t\t\t\t\tsharedStrings[1]++; // Increment total count, unique count derived from sharedStrings[0].length\r\n\t\t\t\t\t\t\tindex = sharedStrings[0].indexOf(val);\r\n\t\t\t\t\t\t\tcolWidth = val.length;\r\n\t\t\t\t\t\t\tif (index < 0) {\r\n\t\t\t\t\t\t\t\tindex = sharedStrings[0].push(val) - 1;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tval = index;\r\n\t\t\t\t\t\t\tt = 's';\r\n\t\t\t\t\t\t} else if (typeof val === 'boolean') {\r\n\t\t\t\t\t\t\tval = (val ? 1 : 0); t = 'b';\r\n\t\t\t\t\t\t\tcolWidth = 1;\r\n\t\t\t\t\t\t} else if ((typeOf(val) === 'date') /*|| (cell.genexusType == 'date') */){\r\n\t\t\t\t\t\t\tvar pars  = val.split(\"-\")\r\n\t\t\t\t\t\t\tvar datePars;\r\n\t\t\t\t\t\t\tif (cell.genexusType == \"datetime\") {\r\n\t\t\t\t\t\t\t\tvar datetimepars  = val.split(\" \")\r\n\t\t\t\t\t\t\t\tpars = datetimepars[0].split(\"-\")\r\n\t\t\t\t\t\t\t\tdatePars = datetimepars[1].split(\":\")\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tvar dt = null;\r\n\t\t\t\t\t\t\t//var dt = new Date(pars[0], parseInt(pars[1])-1, parseInt(pars[2])+1) //, 5+1, 30-15, 0-9);\r\n\t\t\t\t\t\t\tif (cell.genexusType == 'datetime'){\r\n\t\t\t\t\t\t\t\tdt = new Date(pars[0], parseInt(pars[1])-1, parseInt(pars[2]), parseInt(datePars[0])+1, parseInt(datePars[1])-15, parseInt(datePars[2])-9);\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tdt = new Date(pars[0], parseInt(pars[1])-1, parseInt(pars[2])+1)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tval = convertDate(dt);//convertDate(val);\r\n\t\t\t\t\t\t\tif (cell.genexusType == 'date') {\r\n\t\t\t\t\t\t\t\tval = parseInt(val)\r\n\t\t\t\t\t\t\t\tstyle.formatCode = cell.formatCode || 'mm/dd/yy';\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tstyle.formatCode = cell.formatCode || 'mm/dd/yy hh:mm';\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tcolWidth = cell.formatCode.length + 1;\r\n\t\t\t\t\t\t} else if ((cell.genexusType == 'date') || (cell.genexusType == \"datetime\")) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tval = parseDate(val , cell, false);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tval = escapeXML(val);\r\n\t\t\t\t\t\t\tsharedStrings[1]++; // Increment total count, unique count derived from sharedStrings[0].length\r\n\t\t\t\t\t\t\tindex = sharedStrings[0].indexOf(val);\r\n\t\t\t\t\t\t\tcolWidth = val.length;\r\n\t\t\t\t\t\t\tif (index < 0) {\r\n\t\t\t\t\t\t\t\tindex = sharedStrings[0].push(val) - 1;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tval = index;\r\n\t\t\t\t\t\t\tt = 's';\r\n\t\t\t\t\t\t\tstyle.formatCode = 'General'\r\n\t\t\t\t\t\t\tstyle.hAlign = 'right'\r\n\t\t\t\t\t\t} else if (typeof val === 'object') {\r\n\t\t\t\t\t\t\t// unsupported value\r\n\t\t\t\t\t\t\tval = null\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t// number, or string which is a number \r\n\t\t\t\t\t\t\tcolWidth = ('' + val).length;\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t//if (cell.genexusType == \"boolean\"){\r\n\t\t\t\t\t\t\tif ((val == undefined) || (val.trim() == \"\")){ \r\n\t\t\t\t\t\t\t\tval = escapeXML(val);\r\n\t\t\t\t\t\t\t\tsharedStrings[1]++; // Increment total count, unique count derived from sharedStrings[0].length\r\n\t\t\t\t\t\t\t\tindex = sharedStrings[0].indexOf(val);\r\n\t\t\t\t\t\t\t\tcolWidth = val.length;\r\n\t\t\t\t\t\t\t\tif (index < 0) {\r\n\t\t\t\t\t\t\t\t\tindex = sharedStrings[0].push(val) - 1;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tval = index;\r\n\t\t\t\t\t\t\t\tt = 's';\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// use stringified version as unic and reproductible style signature\r\n\t\t\t\t\t\tstyle = JSON.stringify(style);\r\n\t\t\t\t\t\tindex = styles.indexOf(style);\r\n\t\t\t\t\t\tif (index < 0) {\r\n\t\t\t\t\t\t\tstyle = styles.push(style) - 1;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tstyle = index;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// keeps largest cell in column, and autoWidth flag that may be set on any cell\r\n\t\t\t\t\t\tif (columns[j] == null) {\r\n\t\t\t\t\t\t\tcolumns[j] = { autoWidth: false, max: 0 };\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif ((cell.autoWidth) || (cell.genexusType == 'date') || (cell.genexusType == 'datetime')) {\r\n\t\t\t\t\t\t\t//auto width for date and datetime columns\r\n\t\t\t\t\t\t\tcolumns[j].autoWidth = true\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (colWidth > columns[j].max) {\r\n\t\t\t\t\t\t\tcolumns[j].max = colWidth;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// store merges if needed and add missing cells. Cannot have rowSpan AND colSpan\r\n\t\t\t\t\t\tif (cell.colSpan > 1) {\r\n\t\t\t\t\t\t\t// horizontal merge. ex: B12:E12. Add missing cells (with same attribute but value) to current row\r\n\t\t\t\t\t\t\tmerges.push([numAlpha(j) + (i + 1), numAlpha(j + cell.colSpan - 1) + (i + 1)]);\r\n\t\t\t\t\t\t\tmerged = [j, 0]\r\n\t\t\t\t\t\t\tfor (var m = 0; m < cell.colSpan - 1; m++) {\r\n\t\t\t\t\t\t\t\tmerged.push(cell);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tdata[i].splice.apply(data[i], merged);\r\n\t\t\t\t\t\t\tk += cell.colSpan - 1;\r\n\t\t\t\t\t\t} else if (cell.rowSpan > 1) {\r\n\t\t\t\t\t\t\t// vertical merge. ex: B12:B15. Add missing cells (with same attribute but value) to next columns\r\n\t\t\t\t\t\t\tfor (var m = 1; m < cell.rowSpan; m++) {\r\n\t\t\t\t\t\t\t\tif (data[i + m]) {\r\n\t\t\t\t\t\t\t\t\tdata[i + m].splice(j, 0, cell)\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t// readh the end of data\r\n\t\t\t\t\t\t\t\t\tcell.rowSpan = m;\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tmerges.push([numAlpha(j) + (i + 1), numAlpha(j) + (i + cell.rowSpan)]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (cell.rowSpan > 1 || cell.colSpan > 1) {\r\n\t\t\t\t\t\t\t// deletes value, rowSpan and colSpan from cell to avoid refering it from copied cells\r\n\t\t\t\t\t\t\tdelete cell.value;\r\n\t\t\t\t\t\t\tdelete cell.rowSpan;\r\n\t\t\t\t\t\t\tdelete cell.colSpan;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ts += '<c r=\"' + numAlpha(j) + (i + 1) + '\"' + (style ? ' s=\"' + style + '\"' : '') + (t ? ' t=\"' + t + '\"' : '');\r\n\t\t\t\t\t\tif (val != null) {\r\n\t\t\t\t\t\t\ts += '>' + (cell.formula ? '<f>' + cell.formula + '</f>' : '') + '<v>' + val + '</v></c>';\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\ts += '/>';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\ts += '</row>';\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcols = []\r\n\t\t\t\tfor (i = 0; i < columns.length; i++) {\r\n\t\t\t\t\tif (columns[i].autoWidth) {\r\n\t\t\t\t\t\tcols.push('<col min=\"', i + 1, '\" max=\"', i + 1, '\" width=\"', columns[i].max, '\" bestFit=\"1\"/>');\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t// only add cols definition if not empty\r\n\t\t\t\tif (cols.length > 0) {\r\n\t\t\t\t\tcols = ['<cols>'].concat(cols, ['</cols>']).join('');\r\n\t\t\t\t}\r\n\r\n\t\t\t\ts = '<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?><worksheet xmlns=\"http://schemas.openxmlformats.org/spreadsheetml/2006/main\" xmlns:r=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships\" xmlns:mc=\"http://schemas.openxmlformats.org/markup-compatibility/2006\" mc:Ignorable=\"x14ac\" xmlns:x14ac=\"http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac\">'\r\n\t\t\t\t\t+ '<dimension ref=\"A1:' + numAlpha(data[0].length - 1) + data.length + '\"/><sheetViews><sheetView ' + (w === file.activeWorksheet ? 'tabSelected=\"1\" ' : '')\r\n\t\t\t\t\t+ ' workbookViewId=\"0\"/></sheetViews><sheetFormatPr defaultRowHeight=\"15\" x14ac:dyDescent=\"0.25\"/>'\r\n\t\t\t\t\t+ cols\r\n\t\t\t\t\t+ '<sheetData>'\r\n\t\t\t\t\t+ s\r\n\t\t\t\t\t+ '</sheetData>';\r\n\t\t\t\tif (merges.length > 0) {\r\n\t\t\t\t\ts += '<mergeCells count=\"' + merges.length + '\">';\r\n\t\t\t\t\tfor (i = 0; i < merges.length; i++) {\r\n\t\t\t\t\t\ts += '<mergeCell ref=\"' + merges[i].join(':') + '\"/>';\r\n\t\t\t\t\t}\r\n\t\t\t\t\ts += '</mergeCells>';\r\n\t\t\t\t}\r\n\t\t\t\ts += '<pageMargins left=\"0.7\" right=\"0.7\" top=\"0.75\" bottom=\"0.75\" header=\"0.3\" footer=\"0.3\"/>';\r\n\t\t\t\tif (worksheet.table) {\r\n\t\t\t\t\ts += '<tableParts count=\"1\"><tablePart r:id=\"rId1\"/></tableParts>';\r\n\t\t\t\t}\r\n\t\t\t\txlWorksheets.file('sheet' + id + '.xml', s + '</worksheet>');\r\n\r\n\t\t\t\tif (worksheet.table) {\r\n\t\t\t\t\ti = -1; l = data[0].length; t = numAlpha(data[0].length - 1) + data.length;\r\n\t\t\t\t\ts = '<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?><table xmlns=\"http://schemas.openxmlformats.org/spreadsheetml/2006/main\" id=\"' + id\r\n\t\t\t\t\t\t+ '\" name=\"Table' + id + '\" displayName=\"Table' + id + '\" ref=\"A1:' + t + '\" totalsRowShown=\"0\"><autoFilter ref=\"A1:' + t + '\"/><tableColumns count=\"' + data[0].length + '\">';\r\n\t\t\t\t\twhile (++i < l) {\r\n\t\t\t\t\t\ts += '<tableColumn id=\"' + (i + 1) + '\" name=\"' + (data[0][i].hasOwnProperty('value') ? data[0][i].value : data[0][i]) + '\"/>';\r\n\t\t\t\t\t}\r\n\t\t\t\t\ts += '</tableColumns><tableStyleInfo name=\"TableStyleMedium2\" showFirstColumn=\"0\" showLastColumn=\"0\" showRowStripes=\"1\" showColumnStripes=\"0\"/></table>';\r\n\r\n\t\t\t\t\txl.folder('tables').file('table' + id + '.xml', s);\r\n\t\t\t\t\txlWorksheets.folder('_rels').file('sheet' + id + '.xml.rels', '<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?><Relationships xmlns=\"http://schemas.openxmlformats.org/package/2006/relationships\"><Relationship Id=\"rId1\" Type=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships/table\" Target=\"../tables/table' + id + '.xml\"/></Relationships>');\r\n\t\t\t\t\tcontentTypes[1].unshift('<Override PartName=\"/xl/tables/table' + id + '.xml\" ContentType=\"application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml\"/>');\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcontentTypes[0].unshift('<Override PartName=\"/xl/worksheets/sheet' + id + '.xml\" ContentType=\"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml\"/>');\r\n\t\t\t\tprops.unshift(escapeXML(worksheet.name) || 'Sheet' + id);\r\n\t\t\t\txlRels.unshift('<Relationship Id=\"rId' + id + '\" Type=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet\" Target=\"worksheets/sheet' + id + '.xml\"/>');\r\n\t\t\t\tworksheets.unshift('<sheet name=\"' + (escapeXML(worksheet.name) || 'Sheet' + id) + '\" sheetId=\"' + id + '\" r:id=\"rId' + id + '\"/>');\r\n\t\t\t}\r\n\r\n\t\t\t// xl/styles.xml\r\n\t\t\ti = styles.length; t = [];\r\n\t\t\tvar fillIndex = 2;\r\n\t\t\tvar actualFill = 0;\r\n\t\t\twhile (--i) {\r\n\t\t\t\t// Don't process index 0, already added\r\n\t\t\t\tstyle = JSON.parse(styles[i]);\r\n\r\n\t\t\t\t// cell formating, refer to it if necessary\r\n\t\t\t\tif (style.formatCode !== 'General') {\r\n\t\t\t\t\tindex = numFmts.indexOf(style.formatCode);\r\n\t\t\t\t\tif (index < 0) {\r\n\t\t\t\t\t\tindex = 164 + t.length;\r\n\t\t\t\t\t\tt.push('<numFmt formatCode=\"' + style.formatCode + '\" numFmtId=\"' + index + '\"/>');\r\n\t\t\t\t\t}\r\n\t\t\t\t\tstyle.formatCode = index\r\n\t\t\t\t} else {\r\n\t\t\t\t\tstyle.formatCode = 0\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// border declaration: add a new declaration and refer to it in style\r\n\t\t\t\tborderIndex = 0\r\n\t\t\t\tif (style.borders) {\r\n\t\t\t\t\tborder = ['<border>']\r\n\t\t\t\t\t// order is significative\r\n\t\t\t\t\tfor (var edge in { left: 0, right: 0, top: 0, bottom: 0, diagonal: 0 }) {\r\n\t\t\t\t\t\tif (style.borders[edge]) {\r\n\t\t\t\t\t\t\tvar color = style.borders[edge];\r\n\t\t\t\t\t\t\t// add transparency if missing\r\n\t\t\t\t\t\t\tif (color.length === 6) {\r\n\t\t\t\t\t\t\t\tcolor = 'FF' + color;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tborder.push('<', edge, ' style=\"thin\">', '<color rgb=\"', style.borders[edge], '\"/></', edge, '>');\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tborder.push('<', edge, '/>');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tborder.push('</border>');\r\n\t\t\t\t\tborder = border.join('');\r\n\t\t\t\t\t// try to reuse existing border\r\n\t\t\t\t\tborderIndex = borders.indexOf(border);\r\n\t\t\t\t\tif (borderIndex < 0) {\r\n\t\t\t\t\t\tborderIndex = borders.push(border) - 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// font declaration: add a new declaration and refer to it in style\r\n\t\t\t\tfontIndex = 0\r\n\t\t\t\tif (style.bold || style.italic || style.fontSize || style.fontName || style.fontColor) {\r\n\t\t\t\t\tfont = ['<font>']\r\n\t\t\t\t\tif (style.bold) {\r\n\t\t\t\t\t\tfont.push('<b/>');\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (style.italic) {\r\n\t\t\t\t\t\tfont.push('<i/>');\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfont.push('<sz val=\"', style.fontSize || defaultFontSize, '\"/>');\r\n\t\t\t\t\tvar colString =\r\n\t\t\t\t\t\tfont.push('<color rgb=\"FF', style.fontColor || defaultFontColor, '\"/>');\r\n\t\t\t\t\tfont.push('<name val=\"', style.fontName || defaultFontName, '\"/>');\r\n\t\t\t\t\tfont.push('<family val=\"2\"/>', '</font>');\r\n\t\t\t\t\tfont = font.join('');\r\n\t\t\t\t\t// try to reuse existing font\r\n\t\t\t\t\tfontIndex = fonts.indexOf(font);\r\n\t\t\t\t\tif (fontIndex < 0) {\r\n\t\t\t\t\t\tfontIndex = fonts.push(font) - 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//fill declaration: add a new declaration and refer to it in style\r\n\t\t\t\tactualFill = 0;\r\n\t\t\t\tif (style.fill) {\r\n\t\t\t\t\tfills = fills + '<fill><patternFill patternType=\"solid\"><fgColor rgb=\"FF' + style.fill + '\"/>'\r\n\t\t\t\t\t\t+ '<bgColor indexed=\"64\"/></patternFill></fill>'\r\n\t\t\t\t\tfillNumber++;\r\n\t\t\t\t\tactualFill = fillNumber;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// declares style, and refer to optionnal formatCode, font and borders\r\n\t\t\t\tstyles[i] = ['<xf xfId=\"0\" borderId=\"', //fillId=\"0\"  \r\n\t\t\t\t\tborderIndex,\r\n\t\t\t\t\t'\" fontId=\"',\r\n\t\t\t\t\tfontIndex,\r\n\t\t\t\t\t'\" numFmtId=\"',\r\n\t\t\t\t\tstyle.formatCode,\r\n\t\t\t\t\t'\" fillId=\"',\r\n\t\t\t\t\tactualFill,\r\n\t\t\t\t\t'\" ',\r\n\t\t\t\t\t(style.hAlign || style.vAlign ? 'applyAlignment=\"1\" ' : ' '),\r\n\t\t\t\t\t(style.formatCode > 0 ? 'applyNumberFormat=\"1\" ' : ' '),\r\n\t\t\t\t\t(borderIndex > 0 ? 'applyBorder=\"1\" ' : ' '),\r\n\t\t\t\t\t(fontIndex > 0 ? 'applyFont=\"1\" ' : ' '),\r\n\t\t\t\t\t(actualFill > 0 ? 'applyFill=\"1\" ' : ' '),\r\n\t\t\t\t\t'>'\r\n\t\t\t\t];\r\n\t\t\t\tif (style.hAlign || style.vAlign) {\r\n\t\t\t\t\tstyles[i].push('<alignment');\r\n\t\t\t\t\tif (style.hAlign) {\r\n\t\t\t\t\t\tstyles[i].push(' horizontal=\"', style.hAlign, '\"');\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (style.vAlign) {\r\n\t\t\t\t\t\tstyles[i].push(' vertical=\"', style.vAlign, '\"');\r\n\t\t\t\t\t}\r\n\t\t\t\t\tstyles[i].push('/>');\r\n\t\t\t\t}\r\n\t\t\t\tstyles[i].push('</xf>');\r\n\t\t\t\tstyles[i] = styles[i].join('');\r\n\t\t\t}\r\n\t\t\tt = t.length ? '<numFmts count=\"' + t.length + '\">' + t.join('') + '</numFmts>' : '';\r\n\r\n\t\t\txl.file('styles.xml', '<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?><styleSheet xmlns=\"http://schemas.openxmlformats.org/spreadsheetml/2006/main\" xmlns:mc=\"http://schemas.openxmlformats.org/markup-compatibility/2006\" mc:Ignorable=\"x14ac\" xmlns:x14ac=\"http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac\">'\r\n\t\t\t\t+ t + '<fonts count=\"' + fonts.length + '\" x14ac:knownFonts=\"1\"><font><sz val=\"' + defaultFontSize + '\"/><color theme=\"1\"/><name val=\"' + defaultFontName + '\"/><family val=\"2\"/>'\r\n\t\t\t\t+ '<scheme val=\"minor\"/></font>' + fonts.join('') + '</fonts>'\r\n\t/*count=\"2\"*/ + '<fills><fill><patternFill patternType=\"none\"/></fill><fill><patternFill patternType=\"gray125\"/></fill>' + fills + '</fills>'\r\n\t\t\t\t+ '<borders count=\"' + borders.length + '\"><border><left/><right/><top/><bottom/><diagonal/></border>'\r\n\t\t\t\t+ borders.join('') + '</borders><cellStyleXfs count=\"1\">'\r\n\t\t\t\t+ '<xf numFmtId=\"0\" fontId=\"0\" fillId=\"0\" borderId=\"0\"/></cellStyleXfs><cellXfs count=\"' + styles.length + '\"><xf numFmtId=\"0\" fontId=\"0\" fillId=\"0\" borderId=\"0\" xfId=\"0\"/>'\r\n\t\t\t\t+ styles.join('') + '</cellXfs><cellStyles count=\"1\"><cellStyle name=\"Normal\" xfId=\"0\" builtinId=\"0\"/></cellStyles><dxfs count=\"0\"/>'\r\n\t\t\t\t+ '<tableStyles count=\"0\" defaultTableStyle=\"TableStyleMedium2\" defaultPivotStyle=\"PivotStyleLight16\"/>'\r\n\t\t\t\t+ '<extLst><ext uri=\"{EB79DEF2-80B8-43e5-95BD-54CBDDF9020C}\" xmlns:x14=\"http://schemas.microsoft.com/office/spreadsheetml/2009/9/main\">'\r\n\t\t\t\t+ '<x14:slicerStyles defaultSlicerStyle=\"SlicerStyleLight1\"/></ext></extLst></styleSheet>');\r\n\r\n\t\t\t// [Content_Types].xml\r\n\t\t\tzip.file('[Content_Types].xml', '<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?><Types xmlns=\"http://schemas.openxmlformats.org/package/2006/content-types\"><Default Extension=\"rels\" ContentType=\"application/vnd.openxmlformats-package.relationships+xml\"/><Default Extension=\"xml\" ContentType=\"application/xml\"/><Override PartName=\"/xl/workbook.xml\" ContentType=\"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml\"/>'\r\n\t\t\t\t+ contentTypes[0].join('') + '<Override PartName=\"/xl/theme/theme1.xml\" ContentType=\"application/vnd.openxmlformats-officedocument.theme+xml\"/><Override PartName=\"/xl/styles.xml\" ContentType=\"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml\"/><Override PartName=\"/xl/sharedStrings.xml\" ContentType=\"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml\"/>'\r\n\t\t\t\t+ contentTypes[1].join('') + '<Override PartName=\"/docProps/core.xml\" ContentType=\"application/vnd.openxmlformats-package.core-properties+xml\"/><Override PartName=\"/docProps/app.xml\" ContentType=\"application/vnd.openxmlformats-officedocument.extended-properties+xml\"/></Types>');\r\n\r\n\t\t\t// docProps/app.xml\r\n\t\t\tdocProps.file('app.xml', '<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?><Properties xmlns=\"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties\" xmlns:vt=\"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes\"><Application>XLSX.js</Application><DocSecurity>0</DocSecurity><ScaleCrop>false</ScaleCrop><HeadingPairs><vt:vector size=\"2\" baseType=\"variant\"><vt:variant><vt:lpstr>Worksheets</vt:lpstr></vt:variant><vt:variant><vt:i4>'\r\n\t\t\t\t+ file.worksheets.length + '</vt:i4></vt:variant></vt:vector></HeadingPairs><TitlesOfParts><vt:vector size=\"' + props.length + '\" baseType=\"lpstr\"><vt:lpstr>' + props.join('</vt:lpstr><vt:lpstr>')\r\n\t\t\t\t+ '</vt:lpstr></vt:vector></TitlesOfParts><Manager></Manager><Company>Microsoft Corporation</Company><LinksUpToDate>false</LinksUpToDate><SharedDoc>false</SharedDoc><HyperlinksChanged>false</HyperlinksChanged><AppVersion>1.0</AppVersion></Properties>');\r\n\r\n\t\t\t// xl/_rels/workbook.xml.rels\r\n\t\t\txl.folder('_rels').file('workbook.xml.rels', '<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?><Relationships xmlns=\"http://schemas.openxmlformats.org/package/2006/relationships\">'\r\n\t\t\t\t+ xlRels.join('') + '<Relationship Id=\"rId' + (xlRels.length + 1) + '\" Type=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings\" Target=\"sharedStrings.xml\"/>'\r\n\t\t\t\t+ '<Relationship Id=\"rId' + (xlRels.length + 2) + '\" Type=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles\" Target=\"styles.xml\"/>'\r\n\t\t\t\t+ '<Relationship Id=\"rId' + (xlRels.length + 3) + '\" Type=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme\" Target=\"theme/theme1.xml\"/></Relationships>');\r\n\r\n\t\t\t// xl/sharedStrings.xml\r\n\t\t\txl.file('sharedStrings.xml', '<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?><sst xmlns=\"http://schemas.openxmlformats.org/spreadsheetml/2006/main\" count=\"'\r\n\t\t\t\t+ sharedStrings[1] + '\" uniqueCount=\"' + sharedStrings[0].length + '\"><si><t>' + sharedStrings[0].join('</t></si><si><t>') + '</t></si></sst>');\r\n\r\n\t\t\t// xl/workbook.xml\r\n\t\t\txl.file('workbook.xml', '<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?><workbook xmlns=\"http://schemas.openxmlformats.org/spreadsheetml/2006/main\" xmlns:r=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships\">'\r\n\t\t\t\t+ '<fileVersion appName=\"xl\" lastEdited=\"5\" lowestEdited=\"5\" rupBuild=\"9303\"/><workbookPr defaultThemeVersion=\"124226\"/><bookViews><workbookView '\r\n\t\t\t\t+ (file.activeWorksheet ? 'activeTab=\"' + file.activeWorksheet + '\" ' : '') + 'xWindow=\"480\" yWindow=\"60\" windowWidth=\"18195\" windowHeight=\"8505\"/></bookViews><sheets>'\r\n\t\t\t\t+ worksheets.join('') + '</sheets><calcPr calcId=\"145621\"/></workbook>');\r\n\r\n\t\t\tprocessTime = Date.now() - processTime;\r\n\t\t\tzipTime = Date.now();\r\n\t\t\tresult = {\r\n\t\t\t\tbase64: zip.generate({ compression: 'DEFLATE' }), zipTime: Date.now() - zipTime, processTime: processTime,\r\n\t\t\t\thref: function () { return 'data:application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;base64,' + this.base64; }\r\n\t\t\t};\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\r\n\t// NodeJs export\r\n\t/*if (typeof exports === 'object' && typeof module === 'object') {\r\n\t\tmodule.exports = xlsx;\r\n\t}*/\r\n\r\n\tOAT.GeneratePDFOutput = function (self, fileName) {\r\n\t\tvar totalColSpan = -1;\r\n\t\tvar tablemarginleft = 10;\r\n\t\tvar tablemargintop = 13;\r\n\t\tvar cellwidth = 25;\r\n\t\tvar y = -1;\r\n\r\n\t\t//calc max length of paper\r\n\t\tvar hgt = tablemargintop + jQuery(\"#\" + self.controlName + \"_\" + self.query + \" tr\").length * 30 + 5;\r\n\t\tif (hgt < 841) {\r\n\t\t\thgt = 841;\r\n\t\t}\r\n\r\n\t\t//calc max width of paper\r\n\t\tvar wdt = 0;\r\n\r\n\t\tvar title_row = true;\r\n\t\tvar row_num = 0\r\n\t\twhile ((title_row) && (row_num < jQuery(\"#\" + self.controlName + \"_\" + self.query + \" tr\").length)) {\r\n\t\t\tif (jQuery(\"#\" + self.controlName + \"_\" + self.query + \" tr\")[row_num].getAttribute(\"title_row\") != \"true\")\r\n\t\t\t\ttitle_row = false\r\n\t\t\telse\r\n\t\t\t\trow_num++\r\n\t\t}\r\n\r\n\t\tvar tRow = jQuery(\"#\" + self.controlName + \"_\" + self.query + \" tr\")[row_num];\r\n\r\n\t\tif (tRow == undefined) {\r\n\t\t\ttRow = jQuery(\"#\" + self.controlName + \"_\" + self.query + \" tr\")[0];\r\n\t\t}\r\n\t\t//var tRow = jQuery(\"#\" + self.controlName + \"_\" + self.query + \" tr\")[jQuery(\"#\" + self.controlName + \"_\" + self.query + \" tr\").length-1];\r\n\t\tfor (var j = 0; j < tRow.children.length; j++) {\r\n\t\t\tif (tRow.children[j].getAttribute('colspan') != null) {\r\n\t\t\t\twdt = wdt + parseInt(tRow.children[j].getAttribute('colspan'));\r\n\t\t\t} else {\r\n\t\t\t\twdt = wdt + 1;\r\n\t\t\t}\r\n\t\t}\r\n\t\twdt = tablemarginleft + wdt * (cellwidth + 48) + 5;\r\n\t\tif (wdt < 595) {\r\n\t\t\twdt = 595;\r\n\t\t}\r\n\r\n\r\n\r\n\t\t//calculate columns width\r\n\t\tvar columnsWidth = [];\r\n\t\tvar columnsSpan = [];\r\n\t\tfor (var p = 0; p < tRow.childNodes.length; p++){\r\n\t\t\tcolumnsSpan[p] = 0;\r\n\t\t}\r\n\t\tfor (var i = 0; i < jQuery(\"#\" + self.controlName + \"_\" + self.query + \" tr\").length; i++) {//for every row\r\n\r\n\t\t\tvar colspan = -1;\r\n\t\t\ttotalColSpan = -1;\r\n\r\n\t\t\t//calcular el desplazamiento hacia la derecha de la fila, cuando en las filas superiores hay celdas con rowspan mayor a 1\r\n\t\t\tvar desp = 0;\r\n\t\t\t\r\n\t\t\tif (self.colConditions.length == 0){\r\n\t\t\t\tfor (var prevSpan = 0; prevSpan < columnsSpan.length; prevSpan++)\r\n\t\t\t\t{\r\n\t\t\t\t\tif (columnsSpan[prevSpan] > 0) {\r\n\t\t\t\t\t\tdesp = 1 + desp;\r\n\t\t\t\t\t\tcolumnsSpan[prevSpan] = columnsSpan[prevSpan] - 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tfor (var prevR = 0; prevR < i; prevR++) {\t //empiezo desde la de mas arriba\r\n\t\t\t\t\tvar tRowprev = jQuery(\"#\" + self.controlName + \"_\" + self.query + \" tr\")[prevR]; //obtengo la fila\r\n\r\n\t\t\t\t\tfor (var prevC = 0; prevC < tRowprev.children.length; prevC++) {\r\n\t\t\t\t\t\tvar prevRowSpan = tRowprev.children[prevC].getAttribute('rowspan'); //obtengo el rowspan\r\n\t\t\t\t\t\tif ((prevRowSpan != null) && (parseInt(prevRowSpan) > (i - prevR))) { //si el rowspan alcanza a esta fila\r\n\t\t\t\t\t\t\t// el desplazamiento es 1 o el colspan de la celda de arriba\r\n\t\t\t\t\t\t\tvar prevColSpan = tRowprev.children[prevC].getAttribute('colspan'); //obtengo el rowspan\r\n\t\t\t\t\t\t\tif (prevColSpan === null) {\r\n\t\t\t\t\t\t\t\tdesp = 1 + desp;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tdesp = parseInt(prevColSpan) + desp;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tcolspan = desp - 1;\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tvar tRow = jQuery(\"#\" + self.controlName + \"_\" + self.query + \" tr\")[i];\r\n\t\t\t\r\n\t\t\tif (self.colConditions.length == 0){\r\n\t\t\t\t//actualizar rowSpan\r\n\t\t\t\tfor (var j = 0; j < tRow.children.length; j++) {\r\n\t\t\t\t\tvar span = tRow.children[j].getAttribute('rowspan');\r\n\t\t\t\t\tif (span == null) span = 0;\r\n\t\t\t\t\tcolumnsSpan[desp + j] = parseInt(span) - 1\t\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tfor (var j = 0; j < tRow.children.length; j++) { //for every column\r\n\t\t\t\tcolspan++;\r\n\t\t\t\tvar childText = OAT.removeIconFont(tRow.children[j].textContent.replace(/^\\s+|\\s+$/g, ''));\r\n\t\t\t\tvar hidden = tRow.children[j].getAttribute('hidden');\r\n\r\n\t\t\t\tif (hidden === null) {\r\n\r\n\t\t\t\t\tvar row = tRow.children[j].getAttribute('rowspan');\r\n\t\t\t\t\tvar col = tRow.children[j].getAttribute('colspan');\r\n\r\n\t\t\t\t\tvar oldCol = colspan;\r\n\t\t\t\t\tif (columnsWidth[oldCol] == undefined) {\r\n\t\t\t\t\t\tcolumnsWidth[oldCol] = cellwidth;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (((row === null) && (col === null)) || ((j === tRow.children.length - 1) && (col === '3'))) {\r\n\t\t\t\t\t\tif ((col != null) && (childText === \"\")) {\r\n\t\t\t\t\t\t\tcolspan = parseInt(col) + colspan - 1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else if (col === null) {\r\n\t\t\t\t\t} else if (row === null) {\r\n\t\t\t\t\t\tcolspan = parseInt(col) + colspan - 1;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tcolspan = parseInt(col) + colspan - 1;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t//japanese characters\r\n\t\t\t\t\tvar jChar = 0;\r\n\t\t\t\t\tvar carInicialesNoJap = 0\r\n\t\t\t\t\tvar posC = 0;\r\n\t\t\t\t\twhile ((posC < childText.length) && (childText.charCodeAt(posC) < 1000)) {\r\n\t\t\t\t\t\tcarInicialesNoJap++;\r\n\t\t\t\t\t\tposC++;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tjChar = childText.length - carInicialesNoJap;\r\n\t\t\t\t\t//for (var p = 0; p < childText.length; p++){\r\n\t\t\t\t\t//\tif (childText.charCodeAt(p) > 1000){\r\n\t\t\t\t\t//\t\tjChar++;\r\n\t\t\t\t\t//\t}\r\n\t\t\t\t\t//} \r\n\r\n\t\t\t\t\tif (jChar == 0) {\r\n\t\t\t\t\t\tif ((childText.length > 14) && ((col == null) || (i == 0) || (parseInt(col) < 2))) {\r\n\t\t\t\t\t\t\tif ((childText.length * 1.98) > columnsWidth[oldCol]) {\r\n\t\t\t\t\t\t\t\tcolumnsWidth[oldCol] = childText.length * 1.98;//la proporcion aurea?\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t//calculate for japanese space\r\n\t\t\t\t\t\tvar w = jChar * 3.10 + (childText.length - jChar) * 2.00;\r\n\t\t\t\t\t\tif ((w > columnsWidth[oldCol]) && ((col == null) || (i == 0) || (parseInt(col) < 2))) {\r\n\t\t\t\t\t\t\tcolumnsWidth[oldCol] = w;//la proporcion aurea?\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\ttotalColSpan = colspan;\r\n\t\t\t}\r\n\t\t}\r\n\t\t//recalculate widht\r\n\t\tvar nw = 0\r\n\t\tfor (var cWP = 0; cWP < columnsWidth.length; cWP++) {\r\n\t\t\tnw = nw + columnsWidth[cWP] * 2.5 + 48;\r\n\t\t}\r\n\t\tnw = tablemarginleft + nw + 5;\r\n\t\tif (nw > wdt) {\r\n\t\t\twdt = nw;\r\n\t\t}\r\n\r\n\t\tvar getXOffset = function (colspan, columnsWidth) {\r\n\t\t\tif (colspan > columnsWidth.length) {\r\n\t\t\t\tcolspan = columnsWidth.length\r\n\t\t\t}\r\n\t\t\tvar offset = 0;\r\n\t\t\tfor (var cWP = 0; cWP < colspan; cWP++) {\r\n\t\t\t\toffset = offset + columnsWidth[cWP];\r\n\t\t\t}\r\n\t\t\treturn offset;\r\n\t\t}\r\n\r\n\t\tvar getYOffset = function (rowspan, rowsHeight) {\r\n\t\t\t/*if (rowspan > rowsHeight.length){\r\n\t\t\t\trowspan = rowspan.length;\r\n\t\t\t}*/\r\n\t\t\tvar offsety = 0;\r\n\t\t\tfor (var j = 0; j < rowspan; j++) {\r\n\t\t\t\toffsety = offsety + columnsWith[i];\r\n\t\t\t}\r\n\t\t\treturn offsety;\r\n\t\t}\r\n\r\n\r\n\t\t//draw pivot on PDF\r\n\t\tvar doc;\r\n\t\tif (wdt <= 595) {\r\n\t\t\tdoc = new jsPDF('portrait', 'mm', 'a4', false, wdt, 792)//hgt); //landscape or portrait  //con 792 son 26 filas por hoja\r\n\t\t} else if ((wdt > 595) && (wdt < 792)) {\r\n\t\t\tdoc = new jsPDF('landscape', 'mm', 'a4', false, 793, 792)//hgt); //landscape or portrait\t\r\n\t\t} else {\r\n\t\t\tdoc = new jsPDF('landscape', 'mm', 'a4', false, wdt, 792)//hgt); //landscape or portrait\r\n\t\t}\r\n\r\n\r\n\t\tdoc.setFontSize(8);\r\n\t\tvar spanSobrantes = [];\r\n\t\tif (jQuery(\"#\" + self.controlName + \"_\" + self.query + \" tr\")[1 + self.colConditions.length] != undefined) {\r\n\t\t\tfor (var n = 0; n < jQuery(\"#\" + self.controlName + \"_\" + self.query + \" tr\")[1 + self.colConditions.length].children.length; n++) { spanSobrantes[n] = 0 }\r\n\t\t} else {\r\n\t\t\tfor (var n = 0; n < jQuery(\"#\" + self.controlName + \"_\" + self.query + \" tr\")[self.colConditions.length].children.length; n++) { spanSobrantes[n] = 0 }\r\n\t\t}\r\n\t\tcolumnsSpan = [];\r\n\t\tfor (var p = 0; p < columnsWidth.length; p++){\r\n\t\t\tcolumnsSpan[p] = 0;\r\n\t\t}\r\n\t\tfor (var i = 0; i < jQuery(\"#\" + self.controlName + \"_\" + self.query + \" tr\").length; i++) {//for every row\r\n\t\t\t//nroFilaHoja++; \r\n\r\n\t\t\tvar colspan = -1;\r\n\t\t\ttotalColSpan = -1;\r\n\t\t\ty++;\r\n\t\t\t//calcular el desplazamiento hacia la derecha de la fila, cuando en las filas superiores hay celdas con rowspan mayor a 1\r\n\t\t\tvar desp = 0;\r\n\t\t\t\r\n\t\t\tif (self.colConditions.length == 0){\r\n\t\t\t\tfor (var prevSpan = 0; prevSpan < columnsSpan.length; prevSpan++)\r\n\t\t\t\t{\r\n\t\t\t\t\tif (columnsSpan[prevSpan] > 0) {\r\n\t\t\t\t\t\tdesp = 1 + desp;\r\n\t\t\t\t\t\tcolumnsSpan[prevSpan] = columnsSpan[prevSpan] - 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tfor (var prevR = 0; prevR < i; prevR++) {\t //empiezo desde la de mas arriba\r\n\t\t\t\t\tvar tRowprev = jQuery(\"#\" + self.controlName + \"_\" + self.query + \" tr\")[prevR]; //obtengo la fila\r\n\r\n\t\t\t\t\tfor (var prevC = 0; prevC < tRowprev.children.length; prevC++) {\r\n\t\t\t\t\t\tvar prevRowSpan = tRowprev.children[prevC].getAttribute('rowspan'); //obtengo el rowspan\r\n\t\t\t\t\t\tif ((prevRowSpan != null) && (parseInt(prevRowSpan) > (i - prevR))) { //si el rowspan alcanza a esta fila\r\n\t\t\t\t\t\t\t// el desplazamiento es 1 o el colspan de la celda de arriba\r\n\t\t\t\t\t\t\tvar prevColSpan = tRowprev.children[prevC].getAttribute('colspan'); //obtengo el rowspan\r\n\t\t\t\t\t\t\tif (prevColSpan === null) {\r\n\t\t\t\t\t\t\t\tdesp = 1 + desp;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tdesp = parseInt(prevColSpan) + desp;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tcolspan = desp - 1;\r\n\t\t\tvar tRow = jQuery(\"#\" + self.controlName + \"_\" + self.query + \" tr\")[i];\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tif (self.colConditions.length == 0){\r\n\t\t\t\t//actualizar rowSpan\r\n\t\t\t\tfor (var j = 0; j < tRow.children.length; j++) {\r\n\t\t\t\t\tvar span = tRow.children[j].getAttribute('rowspan');\r\n\t\t\t\t\tif (span == null) span = 0;\r\n\t\t\t\t\tcolumnsSpan[desp + j] = parseInt(span) - 1\t\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tvar jR = -1;\r\n\t\t\tfor (var j = 0; j < tRow.children.length; j++) {\r\n\r\n\t\t\t\tvar childText = OAT.removeIconFont(tRow.children[j].textContent.replace(/^\\s+|\\s+$/g, '')); \r\n\t\t\t\tvar hidden = tRow.children[j].getAttribute('hidden');\r\n\t\t\t\tvar ignore = tRow.children[j].getAttribute('pivotcorrect')\r\n\r\n\r\n\t\t\t\t//set styles\r\n\t\t\t\tvar hasBackground = false;\r\n\t\t\t\tdoc.setDrawColor(0, 0, 0);\r\n\t\t\t\tdoc.setTextColor(0, 0, 0);\r\n\t\t\t\tdoc.setFontStyle('normal')\r\n\t\t\t\tvar IsTextAlignRight = (!isNaN(parseFloat(childText)) ||\r\n\t\t\t\t\t((childText == \"-\") && ((tRow.children[j].getAttribute(\"style\") == undefined) || (tRow.children[j].getAttribute(\"style\").indexOf(\"text-align: left\") == -1))));\r\n\t\t\t\tvar textWidht = 0;\r\n\t\t\t\ttextWidht = doc.getStringUnitWidth(childText)\r\n\t\t\t\tif ((tRow.children[j].getAttribute(\"style\") != undefined) && (tRow.children[j].getAttribute(\"style\") != null)) {\r\n\t\t\t\t\tvar attributes = tRow.children[j].getAttribute(\"style\").split(\";\");\r\n\t\t\t\t\tfor (var at = 0; at < attributes.length; at++) {\r\n\t\t\t\t\t\tvar detail = attributes[at].split(\":\");\r\n\t\t\t\t\t\tif (detail[0].replace(/^\\s+|\\s+$/g, '') === \"color\") {\r\n\t\t\t\t\t\t\tvar rgb = detail[1].replace(/^\\s+|\\s+$/g, '');\r\n\t\t\t\t\t\t\trgb = rgb.substring(4, rgb.length);\r\n\t\t\t\t\t\t\trgb = rgb.substring(0, rgb.length - 1);\r\n\t\t\t\t\t\t\tdoc.setTextColor(parseInt(rgb.split(\",\")[0]), parseInt(rgb.split(\",\")[1]), parseInt(rgb.split(\",\")[2]));\r\n\r\n\t\t\t\t\t\t} else if (detail[0].replace(/^\\s+|\\s+$/g, '') === \"text-align\") {\r\n\t\t\t\t\t\t\t//var alg = detail[1].replace(/^\\s+|\\s+$/g, '');\r\n\t\t\t\t\t\t\t//cellObject.vAlign = alg;\r\n\t\t\t\t\t\t\tIsTextAlignRight = (detail[1].replace(/^\\s+|\\s+$/g, '') == \"right\")\r\n\t\t\t\t\t\t} else if (detail[0].replace(/^\\s+|\\s+$/g, '') === \"font-style\") {\r\n\t\t\t\t\t\t\tdoc.setFontStyle('italic')\r\n\t\t\t\t\t\t} else if (detail[0].replace(/^\\s+|\\s+$/g, '') === \"font-weight\") {\r\n\t\t\t\t\t\t\tif (detail[1].replace(/^\\s+|\\s+$/g, '') === \"bold\") {\r\n\t\t\t\t\t\t\t\tdoc.setFontStyle('bold')\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else if (detail[0].replace(/^\\s+|\\s+$/g, '') === \"background-color\") {\r\n\t\t\t\t\t\t\tvar rgb = detail[1].replace(/^\\s+|\\s+$/g, '');\r\n\t\t\t\t\t\t\trgb = rgb.substring(4, rgb.length);\r\n\t\t\t\t\t\t\trgb = rgb.substring(0, rgb.length - 1);\r\n\t\t\t\t\t\t\tdoc.setFillColor(parseInt(rgb.split(\",\")[0]), parseInt(rgb.split(\",\")[1]), parseInt(rgb.split(\",\")[2]));\r\n\t\t\t\t\t\t\t//doc.setDrawColor( parseInt(rgb.split(\",\")[0]) , parseInt(rgb.split(\",\")[1]) , parseInt(rgb.split(\",\")[2]) );\r\n\t\t\t\t\t\t\thasBackground = true;\r\n\t\t\t\t\t\t} else if (detail[0].replace(/^\\s+|\\s+$/g, '') === \"border-color\") {\r\n\t\t\t\t\t\t\tvar rgb = detail[1].replace(/^\\s+|\\s+$/g, '');\r\n\t\t\t\t\t\t\trgb = rgb.substring(4, rgb.length);\r\n\t\t\t\t\t\t\trgb = rgb.substring(0, rgb.length - 1);\r\n\r\n\t\t\t\t\t\t\tdoc.setDrawColor(parseInt(rgb.split(\",\")[0]), parseInt(rgb.split(\",\")[1]), parseInt(rgb.split(\",\")[2]));\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\tvar imgTxtData = []\r\n\t\t\t\tvar lastTxt = \"\", posInitLastTxt = -1\r\n\t\t\t\tvar previousCharCode = 0\r\n\t\t\t\tif (childText.charCodeAt(0) > 1000) {\r\n\t\t\t\t\tfor (var cNo = 0; cNo < childText.length; cNo++) {\r\n\t\t\t\t\t\tif (((previousCharCode == 58) || (previousCharCode == 65306)) && (childText.charCodeAt(cNo) == 32)) {\r\n\t\t\t\t\t\t\timgTxtData[cNo] = \"ToDelete\"\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\timgTxtData[cNo] = OAT.getCharacterImg(childText.charCodeAt(cNo))\r\n\t\t\t\t\t\t\tpreviousCharCode = childText.charCodeAt(cNo)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (childText.charCodeAt(cNo) < 1000) {\r\n\t\t\t\t\t\t\tlastTxt = lastTxt + childText[cNo]\r\n\t\t\t\t\t\t\tif (posInitLastTxt == -1) posInitLastTxt = cNo;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tlastTxt = \"\"\r\n\t\t\t\t\t\t\tposInitLastTxt = -1\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar posI = -1;\r\n\t\t\t\t\t//cNo = 0;\r\n\t\t\t\t\tfor (var p = 1; p < childText.length; p++) {\r\n\t\t\t\t\t\tif (childText.charCodeAt(p) > 1000) {\r\n\t\t\t\t\t\t\tposI = p;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (posI > 0) {\r\n\t\t\t\t\t\tvar tempchildText = childText.substring(0, posI);\r\n\t\t\t\t\t\tvar posE = 0\r\n\t\t\t\t\t\tfor (var cNo = posI; cNo < childText.length; cNo++) {\r\n\t\t\t\t\t\t\tif (childText.charCodeAt(cNo) < 1000) {\r\n\t\t\t\t\t\t\t\tlastTxt = lastTxt + childText[cNo]\r\n\t\t\t\t\t\t\t\tif (posInitLastTxt == -1) posInitLastTxt = cNo - posI;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tlastTxt = \"\"\r\n\t\t\t\t\t\t\t\tposInitLastTxt = -1\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (((previousCharCode == 58) || (previousCharCode == 65306)) && (childText.charCodeAt(cNo) == 32)) {\r\n\t\t\t\t\t\t\t\timgTxtData[posE] = \"ToDelete\"\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\timgTxtData[posE] = OAT.getCharacterImg(childText.charCodeAt(cNo))\r\n\t\t\t\t\t\t\t\tpreviousCharCode = childText.charCodeAt(cNo)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tposE++;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tchildText = tempchildText;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\ttry {\r\n\t\t\t\t\tif ((posInitLastTxt != -1) && (!IsTextAlignRight)) {\r\n\t\t\t\t\t\timgTxtData = imgTxtData.slice(0, posInitLastTxt);\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (Error) { }\r\n\r\n\t\t\t\twhile ((imgTxtData.length > 0) && (imgTxtData.indexOf(\"ToDelete\") != -1)) {\r\n\t\t\t\t\tvar indexTDel = imgTxtData.indexOf(\"ToDelete\")\r\n\t\t\t\t\timgTxtData.splice(indexTDel, 1);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ((hidden === null) && (!ignore)) {\r\n\r\n\t\t\t\t\tcolspan++;\r\n\t\t\t\t\tvar row = tRow.children[j].getAttribute('rowspan');\r\n\t\t\t\t\tvar col = tRow.children[j].getAttribute('colspan');\r\n\t\t\t\t\tjR = jR + 1;\r\n\t\t\t\t\tif (row && ((y + parseInt(row)) > 26)) { //si excedo a la hoja\r\n\t\t\t\t\t\tvar exceso = y + parseInt(row) - 26\r\n\t\t\t\t\t\trow = parseInt(row) - exceso\r\n\t\t\t\t\t\tspanSobrantes[jR + desp] = exceso\r\n\t\t\t\t\t}\r\n\t\t\t\t\t/*for very long text*/\r\n\t\t\t\t\tvar colN = 1;\r\n\t\t\t\t\tif (col != null) colN = parseInt(col);\r\n\t\t\t\t\tif ((j === tRow.children.length - 1) && (colN === 3) && (self.colConditions.length == 0)) colN = 1;\r\n\t\t\t\t\tvar textinic = null; var textend = null;\r\n\t\t\t\t\t/*if (childText.length > 22*colN){\r\n\t\t\t\t\t\tdoc.setFontSize(6);\r\n\t\t\t\t\t\ttextinic = childText.substring(0,21);\r\n\t\t\t\t\t\ttextend  = childText.substring(21,childText.length);\r\n\t\t\t\t\t}*/\r\n\r\n\t\t\t\t\tvar oldCol = colspan;\r\n\t\t\t\t\tif (((row === null) && (col === null)) || ((j === tRow.children.length - 1) && (col === '3') && (self.colConditions.length == 0))) {\r\n\r\n\t\t\t\t\t\tif (hasBackground) {\r\n\t\t\t\t\t\t\tvar preColsPan = colspan;\r\n\t\t\t\t\t\t\tif ((col != null) && (childText === \"\")) {\r\n\t\t\t\t\t\t\t\tpreColsPan = parseInt(col) + colspan - 1;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tdoc.rect(tablemarginleft - 2 + getXOffset(oldCol, columnsWidth), tablemargintop + y * 10 - 7, getXOffset(preColsPan + 1, columnsWidth) - getXOffset(oldCol, columnsWidth), 10, 'F');\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvar preImage = 0;\r\n\t\t\t\t\t\tif (childText.charCodeAt(0) < 1000) {\r\n\t\t\t\t\t\t\tpreImage = childText.length * 1.4 + 2\r\n\t\t\t\t\t\t\tif (IsTextAlignRight) {\r\n\t\t\t\t\t\t\t\tdoc.text(tablemarginleft + getXOffset(colspan + 1, columnsWidth) - textWidht * 3 - 4, tablemargintop + y * 10, childText);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tdoc.text(tablemarginleft + getXOffset(colspan, columnsWidth), tablemargintop + y * 10, childText);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (imgTxtData.length > 0) {\r\n\t\t\t\t\t\t\tfor (var cNo = 0; cNo < imgTxtData.length; cNo++) {\r\n\t\t\t\t\t\t\t\tdoc.addImage(imgTxtData[cNo], 'JPEG', tablemarginleft + getXOffset(colspan, columnsWidth) + preImage + cNo * 2.5, tablemargintop + y * 10 - 2.3, 2.5, 2.5);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif ((posInitLastTxt != -1) && (!IsTextAlignRight)) { //add last text\r\n\t\t\t\t\t\t\tdoc.text(tablemarginleft + getXOffset(colspan, columnsWidth) + preImage + imgTxtData.length * 2.5, tablemargintop + y * 10, lastTxt);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif ((col != null) && (childText === \"\")) {\r\n\t\t\t\t\t\t\tcolspan = parseInt(col) + colspan - 1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t//draw rectangle border\r\n\t\t\t\t\t\tdoc.line(tablemarginleft - 2 + getXOffset(oldCol, columnsWidth), tablemargintop + y * 10 - 7, tablemarginleft - 2 + getXOffset((colspan + 1), columnsWidth), tablemargintop + y * 10 - 7); //top border\r\n\t\t\t\t\t\tdoc.line(tablemarginleft - 2 + getXOffset(oldCol, columnsWidth), tablemargintop + y * 10 - 7, tablemarginleft - 2 + getXOffset(oldCol, columnsWidth), tablemargintop + y * 10 + 3); //left border\r\n\r\n\t\t\t\t\t} else if (col === null) {\r\n\r\n\t\t\t\t\t\tif (hasBackground) {\r\n\t\t\t\t\t\t\tif (row === null) {\r\n\t\t\t\t\t\t\t\tdoc.rect(tablemarginleft - 2 + getXOffset(colspan, columnsWidth), tablemargintop + y * 10 - 7, cellwidth, 10, 'F');\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tdoc.rect(tablemarginleft - 2 + getXOffset(colspan, columnsWidth), tablemargintop + y * 10 - 7, cellwidth, 10 + (parseInt(row) - 1) * 10, 'F');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar preImage = 0;\r\n\t\t\t\t\t\tif (childText.charCodeAt(0) < 1000) {\r\n\t\t\t\t\t\t\tpreImage = childText.length * 1.4 + 2\r\n\t\t\t\t\t\t\tdoc.text(tablemarginleft + getXOffset(colspan, columnsWidth), tablemargintop + y * 10, childText);\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (imgTxtData.length > 0) {\r\n\t\t\t\t\t\t\tfor (var cNo = 0; cNo < imgTxtData.length; cNo++) {\r\n\t\t\t\t\t\t\t\tdoc.addImage(imgTxtData[cNo], 'JPEG', tablemarginleft + getXOffset(colspan, columnsWidth) + preImage + cNo * 2.5, tablemargintop + y * 10 - 2.3, 2.5, 2.5);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif ((posInitLastTxt != -1) && (!IsTextAlignRight)) { //add last text\r\n\t\t\t\t\t\t\tdoc.text(tablemarginleft + getXOffset(colspan, columnsWidth) + preImage + imgTxtData.length * 2.5, tablemargintop + y * 10, lastTxt);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tdoc.line(tablemarginleft - 2 + getXOffset(colspan, columnsWidth), tablemargintop + y * 10 - 7, tablemarginleft - 2 + getXOffset((colspan + 1), columnsWidth), tablemargintop + y * 10 - 7); //top border\r\n\t\t\t\t\t\tif (row === null) {\r\n\t\t\t\t\t\t\tdoc.line(tablemarginleft - 2 + getXOffset(colspan, columnsWidth), tablemargintop + y * 10 - 7, tablemarginleft - 2 + getXOffset(colspan, columnsWidth), tablemargintop + y * 10 + 3); //left border\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tdoc.line(tablemarginleft - 2 + getXOffset(oldCol, columnsWidth), tablemargintop + y * 10 - 7, tablemarginleft - 2 + getXOffset(oldCol, columnsWidth), tablemargintop + (y + parseInt(row) - 1) * 10 + 3); //left border\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else if (row === null) {\r\n\r\n\t\t\t\t\t\tif (hasBackground) {\r\n\t\t\t\t\t\t\tvar prevColsSpan = parseInt(col) + colspan - 1;\r\n\t\t\t\t\t\t\tdoc.rect(tablemarginleft - 2 + getXOffset(oldCol, columnsWidth), tablemargintop + y * 10 - 7, getXOffset((prevColsSpan + 1), columnsWidth) - getXOffset(oldCol, columnsWidth), 10, 'F');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar preImage = 0;\r\n\t\t\t\t\t\tif (childText.charCodeAt(0) < 1000) {\r\n\t\t\t\t\t\t\tpreImage = childText.length * 1.4 + 2\r\n\t\t\t\t\t\t\tdoc.text(tablemarginleft + getXOffset(colspan, columnsWidth), tablemargintop + y * 10, childText);\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (imgTxtData.length > 0) {\r\n\t\t\t\t\t\t\tfor (var cNo = 0; cNo < imgTxtData.length; cNo++) {\r\n\t\t\t\t\t\t\t\tdoc.addImage(imgTxtData[cNo], 'JPEG', tablemarginleft + getXOffset(colspan, columnsWidth) + preImage + cNo * 2.5, tablemargintop + y * 10 - 2.3, 2.5, 2.5);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif ((posInitLastTxt != -1) && (!IsTextAlignRight)) { //add last text\r\n\t\t\t\t\t\t\tdoc.text(tablemarginleft + getXOffset(colspan, columnsWidth) + preImage + imgTxtData.length * 2.5, tablemargintop + y * 10, lastTxt);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tcolspan = parseInt(col) + colspan - 1;\r\n\r\n\t\t\t\t\t\tdoc.line(tablemarginleft - 2 + getXOffset(oldCol, columnsWidth), tablemargintop + y * 10 - 7, tablemarginleft - 2 + getXOffset((colspan + 1), columnsWidth), tablemargintop + y * 10 - 7); //top border\r\n\t\t\t\t\t\tdoc.line(tablemarginleft - 2 + getXOffset(oldCol, columnsWidth), tablemargintop + y * 10 - 7, tablemarginleft - 2 + getXOffset(oldCol, columnsWidth), tablemargintop + y * 10 + 3); //left border\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (hasBackground) {\r\n\t\t\t\t\t\t\tvar prevColsSpan = parseInt(col) + colspan - 1;\r\n\t\t\t\t\t\t\tif (row === null) {\r\n\t\t\t\t\t\t\t\tdoc.rect(tablemarginleft - 2 + getXOffset(oldCol, columnsWidth), tablemargintop + y * 10 - 7, getXOffset((prevColsSpan + 1), columnsWidth) - getXOffset(oldCol, columnsWidth), 10, 'F');\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tdoc.rect(tablemarginleft - 2 + getXOffset(oldCol, columnsWidth), tablemargintop + y * 10 - 7, getXOffset((prevColsSpan + 1), columnsWidth) - getXOffset(oldCol, columnsWidth), (parseInt(row) - 1) * 10, 'F');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar preImage = 0;\r\n\t\t\t\t\t\tif (childText.charCodeAt(0) < 1000) {\r\n\t\t\t\t\t\t\tpreImage = childText.length * 1.4 + 2\r\n\t\t\t\t\t\t\tdoc.text(tablemarginleft /*- 2*/ + getXOffset(colspan, columnsWidth), tablemargintop + y * 10, childText);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (imgTxtData.length > 0) {\r\n\t\t\t\t\t\t\tfor (var cNo = 0; cNo < imgTxtData.length; cNo++) {\r\n\t\t\t\t\t\t\t\tdoc.addImage(imgTxtData[cNo], 'JPEG', tablemarginleft /*- 2*/ + getXOffset(colspan, columnsWidth) + preImage + cNo * 2.5, tablemargintop + y * 10 - 2.3, 2.5, 2.5);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif ((posInitLastTxt != -1) && (!IsTextAlignRight)) { //add last text\r\n\t\t\t\t\t\t\tdoc.text(tablemarginleft /*- 2*/ + getXOffset(colspan, columnsWidth) + preImage + imgTxtData.length * 2.5, tablemargintop + y * 10, lastTxt);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tcolspan = parseInt(col) + colspan - 1;\r\n\r\n\t\t\t\t\t\tdoc.line(tablemarginleft - 2 + getXOffset(oldCol, columnsWidth), tablemargintop + y * 10 - 7, tablemarginleft - 2 + getXOffset((colspan + 1), columnsWidth), tablemargintop + y * 10 - 7); //top border\r\n\t\t\t\t\t\tif (row === null) {\r\n\t\t\t\t\t\t\tdoc.line(tablemarginleft - 2 + getXOffset(oldCol, columnsWidth), tablemargintop + y * 10 - 7, tablemarginleft - 2 + getXOffset(oldCol, columnsWidth), tablemargintop + y * 10 + 3); //left border\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tdoc.line(tablemarginleft - 2 + getXOffset(oldCol, columnsWidth), tablemargintop + y * 10 - 7, tablemarginleft - 2 + getXOffset(oldCol, columnsWidth), tablemargintop + (y + parseInt(row) - 1) * 10 + 3); //left border\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tdoc.setFontSize(8);\r\n\r\n\t\t\t\ttotalColSpan = colspan;\r\n\t\t\t\t//last right border\r\n\t\t\t\tif (j === tRow.children.length - 1) {\r\n\t\t\t\t\tdoc.line(tablemarginleft - 2 + getXOffset((colspan + 1), columnsWidth), tablemargintop + y * 10 - 7, tablemarginleft - 2 + getXOffset((colspan + 1), columnsWidth), tablemargintop + y * 10 + 3);\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t\tif (y >= 25) {\r\n\t\t\t\tdoc.setDrawColor(0, 0, 0)\r\n\t\t\t\t//bottom last line\r\n\t\t\t\tdoc.line(tablemarginleft - 2, tablemargintop + (y + 1) * 10 - 7, tablemarginleft - 2 + getXOffset((totalColSpan + 1), columnsWidth), tablemargintop + (y + 1) * 10 - 7);\r\n\t\t\t\ty = 0\r\n\t\t\t\tdoc.addPage()\r\n\t\t\t\t//add sobrantes\r\n\t\t\t\tfor (var t = 0; t < spanSobrantes.length; t++) {\r\n\t\t\t\t\tif (!isNaN(spanSobrantes[t])) {\r\n\t\t\t\t\t\tif (spanSobrantes[t] >= 25) {\r\n\t\t\t\t\t\t\tspanSobrantes[t] = spanSobrantes[t] - 25\r\n\t\t\t\t\t\t\tdoc.line(tablemarginleft - 2 + getXOffset(t, columnsWidth), tablemargintop + (1) * 10 - 7, tablemarginleft - 2 + getXOffset((t + 1), columnsWidth), tablemargintop + (1) * 10 - 7); //top border\r\n\t\t\t\t\t\t\tdoc.line(tablemarginleft - 2 + getXOffset(t, columnsWidth), tablemargintop + (1) * 10 - 7, tablemarginleft - 2 + getXOffset(t, columnsWidth), tablemargintop + ((1) + 25 - 1) * 10 + 3); //left border\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tdoc.line(tablemarginleft - 2 + getXOffset(t, columnsWidth), tablemargintop + (1) * 10 - 7, tablemarginleft - 2 + getXOffset((t + 1), columnsWidth), tablemargintop + (1) * 10 - 7); //top border\r\n\t\t\t\t\t\t\tdoc.line(tablemarginleft - 2 + getXOffset(t, columnsWidth), tablemargintop + (1) * 10 - 7, tablemarginleft - 2 + getXOffset(t, columnsWidth), tablemargintop + ((1) + spanSobrantes[t] - 1) * 10 + 3); //left border\r\n\t\t\t\t\t\t\tspanSobrantes[t] = 0\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t//spanSobrantes = [] \r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\tdoc.setDrawColor(0, 0, 0)\r\n\t\t//bottom last line\r\n\t\tdoc.line(tablemarginleft - 2, tablemargintop + (y + 1) * 10 - 7, tablemarginleft - 2 + getXOffset((totalColSpan + 1), columnsWidth), tablemargintop + (y + 1) * 10 - 7);\r\n\r\n\t\tif (OAT.isSafari() || (self.isSD)){ //for safari\r\n\t\t\tdoc.output('dataurlnewwindow');\r\n\t\t} else  {\r\n\t\t\tdoc.save(fileName + '.pdf');\r\n\t\t}\r\n\r\n\r\n\t}\r\n\r\n\tvar removeComas = function (value, self) { //TODO: also remove $ and none digital or . characters\r\n\t\tvar newValue = \"\"; actPos = 0;\r\n\r\n\t\tvar decimalSeparator = self.defaultPicture.getAttribute(\"decimalSeparator\");\r\n\r\n\t\tfor (var poVal = 0; poVal < value.length; poVal++) {\r\n\t\t\tif ((value[poVal] == \"0\") || (value[poVal] == \"1\") || (value[poVal] == \"2\")\r\n\t\t\t\t|| (value[poVal] == \"3\") || (value[poVal] == \"4\") || (value[poVal] == \"5\")\r\n\t\t\t\t|| (value[poVal] == \"6\") || (value[poVal] == \"7\") || (value[poVal] == \"8\")\r\n\t\t\t\t|| (value[poVal] == \"9\") || (value[poVal] == decimalSeparator/*\".\"*/) || (value[poVal] == \"-\")) {\r\n\t\t\t\tnewValue = newValue + value[poVal];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (decimalSeparator != \".\") {\r\n\t\t\tvar tempValue = \"\";\r\n\t\t\tfor (var poVal = 0; poVal < newValue.length; poVal++) {\r\n\t\t\t\tif (newValue[poVal] == decimalSeparator) {\r\n\t\t\t\t\ttempValue = tempValue + '.';\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttempValue = tempValue + newValue[poVal];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tnewValue = tempValue;\r\n\t\t}\r\n\t\t//while (value.indexOf(\",\") != -1){\r\n\t\t//\tvalue = value.slice(0, value.indexOf(\",\")) + value.slice(value.indexOf(\",\")+1); \r\n\t\t//}\r\n\t\treturn newValue;\r\n\t}\r\n\t\r\n\t\r\n\tvar cleanDistinctValue = function (value, self, ind) {\r\n\t\tif (value == \"#NuN#\") {\r\n\t\t\treturn \" \";\r\n\t\t} else {\r\n\t\t\tvar replaceAmp = true;\r\n\t\t\tif (value.indexOf(\">\") > -1) {\r\n\t\t\t\tvalue = value.replace(/\\>/g,\"&lt;\")\r\n\t\t\t\treplaceAmp = false\r\n\t\t\t} \r\n\t\t\tif (value.indexOf(\"<\") > -1) {\r\n\t\t\t\tvalue = value.replace(/\\</g,\"&gt;\")\r\n\t\t\t\treplaceAmp = false\r\n\t\t\t}\r\n\t\t\tif (value.indexOf(\"settings\") > -1) {\r\n\t\t\t\tvalue = value.replace(\"settings\", \"\")\r\n\t\t\t\treplaceAmp = false\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif ((value.indexOf(\"%\") > -1) && (ind != undefined)) {\r\n\t\t\t\treturn value.replace(/\\&/g, \"&amp;\").replace(/\"/g, \"&quot;\").replace(/\\%/g, \"%\" + ind).trimpivot() \r\n\t\t\t} else {\r\n\t\t\t\tvalue = value.replace(/\"/g, \"&quot;\")\r\n\t\t\t\tif (replaceAmp){\r\n\t\t\t\t\tvalue = value.replace(/\\&/g, \"&amp;\")\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (value.indexOf(\"&amp;lt;\") > -1){\r\n\t\t\t\t\tvalue = value.replace(/\\&amp\\;lt\\;/g, \"&lt;\")\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\treturn value.trimpivot()\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tvar headers = [];\r\n\tvar getMeasureTitle = function(value, pos){\r\n\t\tif (headers[pos] != undefined)\r\n\t\t{\r\n\t\t\treturn headers[pos]\r\n\t\t} \r\n\t\telse\r\n\t\t{\r\n\t\t\treturn value\r\n\t\t}\r\n\t}\r\n\t\r\n\tvar createExcelROWITEMS = function (item, level, pfvi, lastRowLevel, originalLevel) {\r\n\t\tif (level === 0) {\r\n\t\t\tvar index = pfvi[lastRowLevel].indexOf(item.value);\r\n\t\t\tvar rs = \"\"\r\n\t\t\tif (originalLevel === 0) {\r\n\t\t\t\trs = \"<i>\"\r\n\t\t\t} else {\r\n\t\t\t\trs = \"<i r=\\\"\" + originalLevel + \"\\\">\";\r\n\t\t\t}\r\n\t\t\tif (index > 0) {\r\n\t\t\t\treturn rs + \"<x v=\\\"\" + index + \"\\\"/></i>\";\r\n\t\t\t} else {\r\n\t\t\t\treturn rs + \"<x/></i>\";\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tlevel--;\r\n\t\t\tvar str = \"\"\r\n\t\t\tfor (var i = 0; i < item.items.length; i++) {\r\n\t\t\t\tstr = str + createExcelROWITEMS(item.items[i], level, pfvi, lastRowLevel, originalLevel);\r\n\t\t\t}\r\n\t\t\treturn str;\r\n\t\t}\r\n\t}\r\n\r\n\tvar createExcelCOLITEMS = function (item, level, pfvi, lastRowLevel, originalLevel) {\r\n\t\tif (level === 0) {\r\n\t\t\tvar index = pfvi[lastRowLevel].indexOf(item.value.trimpivot());\r\n\t\t\tvar rs = \"\"\r\n\t\t\tfor (var iCV = 0; iCV < measures.length; iCV++) {\r\n\t\t\t\tif (originalLevel === 0) {\r\n\t\t\t\t\trs = \"<i>\"\r\n\t\t\t\t} else {\r\n\t\t\t\t\trs = \"<i r=\\\"\" + originalLevel + \"\\\">\";\r\n\t\t\t\t}\r\n\t\t\t\t//if (index > 0){\r\n\t\t\t\trs = rs + \"<x v=\\\"\" + index + \"\\\"/>\";\r\n\t\t\t\t//} else {\r\n\t\t\t\t//\trs =  rs +\"<x/></i>\";\r\n\t\t\t\t//}\r\n\t\t\t\tif (measures.length > 1) {\r\n\t\t\t\t\trs = rs + \"<x/>\";\r\n\t\t\t\t}\r\n\t\t\t\trs = rs + \"</i>\";\r\n\t\t\t}\r\n\t\t\treturn rs;\r\n\t\t} else {\r\n\t\t\tlevel--;\r\n\t\t\tvar str = \"\"\r\n\t\t\tfor (var i = 0; i < item.items.length; i++) {\r\n\t\t\t\tstr = str + createExcelROWITEMS(item.items[i], level, pfvi, lastRowLevel, originalLevel);\r\n\t\t\t}\r\n\t\t\treturn str;\r\n\t\t}\r\n\t}\r\n\r\n\tOAT.GenerateExcelOutput = function (fileName, self, measures) {\r\n\t\tfunction componentToHex(c) {\r\n\t\t\tvar hex = c.toString(16);\r\n\t\t\treturn hex.length == 1 ? \"0\" + hex : hex;\r\n\t\t}\r\n\r\n\t\tfunction rgbToHex(r, g, b) {\r\n\t\t\treturn componentToHex(r) + componentToHex(g) + componentToHex(b);\r\n\t\t}\r\n\r\n\t\tfunction getStyles(attributes) {\r\n\t\t\tvar styleObject = {};\r\n\t\t\tfor (var at = 0; at < attributes.length; at++) {\r\n\t\t\t\tvar detail = attributes[at].split(\":\");\r\n\t\t\t\tif (detail[0].replace(/^\\s+|\\s+$/g, '') === \"color\") {\r\n\t\t\t\t\tvar rgb = detail[1].replace(/^\\s+|\\s+$/g, '');\r\n\t\t\t\t\trgb = rgb.substring(4, rgb.length);\r\n\t\t\t\t\trgb = rgb.substring(0, rgb.length - 1);\r\n\t\t\t\t\tvar hex = rgbToHex(parseInt(rgb.split(\",\")[0]), parseInt(rgb.split(\",\")[1]), parseInt(rgb.split(\",\")[2]))\r\n\t\t\t\t\tstyleObject.fontColor = hex;\r\n\t\t\t\t} else if (detail[0].replace(/^\\s+|\\s+$/g, '') === \"text-align\") {\r\n\t\t\t\t\tvar alg = detail[1].replace(/^\\s+|\\s+$/g, '');\r\n\t\t\t\t\tstyleObject.vAlign = alg;\r\n\t\t\t\t} else if (detail[0].replace(/^\\s+|\\s+$/g, '') === \"font-style\") {\r\n\t\t\t\t\tif (detail[1].replace(/^\\s+|\\s+$/g, '') === \"italic\") {\r\n\t\t\t\t\t\tstyleObject.italic = 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (detail[0].replace(/^\\s+|\\s+$/g, '') === \"font-weight\") {\r\n\t\t\t\t\tif (detail[1].replace(/^\\s+|\\s+$/g, '') === \"bold\") {\r\n\t\t\t\t\t\tstyleObject.bold = 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (detail[0].replace(/^\\s+|\\s+$/g, '') === \"background-color\") {\r\n\t\t\t\t\tvar rgb = detail[1].replace(/^\\s+|\\s+$/g, '');\r\n\t\t\t\t\trgb = rgb.substring(4, rgb.length);\r\n\t\t\t\t\trgb = rgb.substring(0, rgb.length - 1);\r\n\t\t\t\t\tvar hex = rgbToHex(parseInt(rgb.split(\",\")[0]), parseInt(rgb.split(\",\")[1]), parseInt(rgb.split(\",\")[2]))\r\n\t\t\t\t\tstyleObject.fill = hex;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn styleObject;\r\n\t\t}\r\n\r\n\t\tvar getMeasureIdentifier = function (self, value) {\r\n\t\t\tfor (var name in self.formulaInfo.itemPosition) {\r\n\t\t\t\tif (self.formulaInfo.itemPosition[name] == value) {\r\n\t\t\t\t\treturn name;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//search repeat column header\r\n\t\theaders = []\r\n\t\tvar previous = []\r\n\t\tfor (var iCV = 0; iCV < measures.length; iCV++) {\r\n\t\t\tfor(var pos = 0; pos < previous.length; pos++){\r\n\t\t\t\tif (previous[pos] == cleanDistinctValue(measures[iCV].getAttribute(\"displayName\"), self, measures[iCV].getAttribute(\"name\")))\r\n\t\t\t\t{\r\n\t\t\t\t\theaders[iCV] = \tcleanDistinctValue(measures[iCV].getAttribute(\"displayName\"), self, measures[iCV].getAttribute(\"name\")) + \" (\" + measures[iCV].getAttribute(\"dataField\") + \")\"\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tprevious.push(cleanDistinctValue(measures[iCV].getAttribute(\"displayName\"), self, measures[iCV].getAttribute(\"name\"))) \r\n\t\t}\r\n\t\t//\t\r\n\r\n\t\tdataTable = [];\r\n\t\t//headers\r\n\t\tdataRow = [];\r\n\t\tfor (var col = 0; col < self.columns.length; col++) {\r\n\t\t\tvar cellObject = { value: cleanDistinctValue(self.columns[col].getAttribute(\"displayName\"), self, self.columns[col].getAttribute(\"name\")) };\r\n\t\t\tcellObject.isString = 1;\r\n\t\t\tdataRow.push(cellObject)\r\n\t\t}\r\n\t\tfor (var iCV = 0; iCV < measures.length; iCV++) {\r\n\t\t\tif (!self.formulaInfo.measureFormula[iCV].hasFormula) {\r\n\t\t\t\tvar cellObject = { value: cleanDistinctValue( getMeasureTitle(measures[iCV].getAttribute(\"displayName\"), iCV), self, measures[iCV].getAttribute(\"name\")) };\r\n\t\t\t\tdataRow.push(cellObject)\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar formMeasures = [];\r\n\t\tif (self.formulaInfo.cantFormulaMeasures > 0) {\r\n\t\t\tfor (var fI = 0; fI < self.formulaInfo.measureFormula.length; fI++) {\r\n\t\t\t\tif (self.formulaInfo.measureFormula[fI].hasFormula) {\r\n\t\t\t\t\tfor (var mI = 0; mI < self.formulaInfo.measureFormula[fI].relatedMeasures.length; mI++) {\r\n\t\t\t\t\t\tvar numMeasure = self.formulaInfo.measureFormula[fI].relatedMeasures[mI]\r\n\t\t\t\t\t\tif (formMeasures.indexOf(numMeasure) == -1) {\r\n\t\t\t\t\t\t\tformMeasures.push(numMeasure)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tformMeasures.sort();\r\n\t\t\tfor (var iCV = 0; iCV < formMeasures.length; iCV++) {\r\n\t\t\t\tvar cellObject = { value: getMeasureIdentifier(self, formMeasures[iCV]) };\r\n\t\t\t\tdataRow.push(cellObject)\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tdataTable.push(dataRow);\r\n\r\n\t\tvar dataToShow = self.GeneralDataRows\r\n\t\tif (self.autoPaging) {\r\n\t\t\tdataToShow = self.RowsWhenMoveToFilter\r\n\t\t}\r\n\t\tif (self.formulaInfo.cantFormulaMeasures > 0) {\r\n\t\t\tdataToShow = self.recordForFormula\r\n\t\t}\r\n\r\n\t\tvar cellObjectStyle = function(element, cellObject){\r\n\t\t\tif (element.getAttribute(\"style\") != undefined) {\r\n\t\t\t\tvar attributes = element.getAttribute(\"style\").split(\";\");\r\n\t\t\t\tfor (var at = 0; at < attributes.length; at++) {\r\n\t\t\t\t\tvar detail = attributes[at].split(\":\");\r\n\t\t\t\t\tif (detail[0].replace(/^\\s+|\\s+$/g, '') === \"color\") {\r\n\t\t\t\t\t\tvar rgb = detail[1].replace(/^\\s+|\\s+$/g, '');\r\n\t\t\t\t\t\trgb = rgb.substring(4, rgb.length);\r\n\t\t\t\t\t\trgb = rgb.substring(0, rgb.length - 1);\r\n\t\t\t\t\t\tvar hex = rgbToHex(parseInt(rgb.split(\",\")[0]), parseInt(rgb.split(\",\")[1]), parseInt(rgb.split(\",\")[2]))\r\n\t\t\t\t\t\tcellObject.fontColor = hex;\r\n\t\t\t\t\t} else if (detail[0].replace(/^\\s+|\\s+$/g, '') === \"text-align\") {\r\n\t\t\t\t\t\tvar alg = detail[1].replace(/^\\s+|\\s+$/g, '');\r\n\t\t\t\t\t\tcellObject.vAlign = alg;\r\n\t\t\t\t\t} else if (detail[0].replace(/^\\s+|\\s+$/g, '') === \"font-style\") {\r\n\t\t\t\t\t\tif (detail[1].replace(/^\\s+|\\s+$/g, '') === \"italic\") {\r\n\t\t\t\t\t\t\tcellObject.italic = 1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else if (detail[0].replace(/^\\s+|\\s+$/g, '') === \"font-weight\") {\r\n\t\t\t\t\t\tif (detail[1].replace(/^\\s+|\\s+$/g, '') === \"bold\") {\r\n\t\t\t\t\t\t\tcellObject.bold = 1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else if (detail[0].replace(/^\\s+|\\s+$/g, '') === \"background-color\") {\r\n\t\t\t\t\t\tvar rgb = detail[1].replace(/^\\s+|\\s+$/g, '');\r\n\t\t\t\t\t\trgb = rgb.substring(4, rgb.length);\r\n\t\t\t\t\t\trgb = rgb.substring(0, rgb.length - 1);\r\n\t\t\t\t\t\tvar hex = rgbToHex(parseInt(rgb.split(\",\")[0]), parseInt(rgb.split(\",\")[1]), parseInt(rgb.split(\",\")[2]))\r\n\t\t\t\t\t\tcellObject.fill = hex;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn cellObject\r\n\t\t}\r\n\r\n\r\n\t\tfor (var rN = 0; rN < dataToShow.length; rN++) {\r\n\t\t\tdataRow = [];\r\n\t\t\tfor (var col = 0; col < self.columns.length; col++) {\r\n\t\t\t\tvar pos = self.conditions[col].dataRowPosition\r\n\t\t\t\tvar value = dataToShow[rN][pos];  \r\n\t\t\t\tif (value == \"#NuN#\") { value = \" \" }\r\n\t\t\t\tvar cellObject = { value: value };\r\n\t\t\t\tcellObject.isString = 1;\r\n\t\t\t\tvar th = OAT.Dom.create(\"th\", {}, \"\");\r\n\t\t\t\tth = self.applyFormatValues(th, dataToShow[rN][pos], pos)\r\n\t\t\t\tcellObject = cellObjectStyle(th, cellObject)\r\n\t\t\t\tcellObject.formatCode = self.defaultPicture.getAttribute(\"dateFormat\")\r\n\t\t\t\tcellObject.genexusType = self.columns[col].getAttribute(\"dataType\");\r\n\t\t\t\tcellObject.genexusPicture = self.columns[col].getAttribute(\"picture\");\r\n\t\t\t\tdataRow.push(cellObject)\r\n\t\t\t}\r\n\t\t\tfor (var iCV = 0; iCV < measures.length; iCV++) {\r\n\t\t\t\tif (!self.formulaInfo.measureFormula[iCV].hasFormula) {\r\n\t\t\t\t\tvar pos = self.columns.length + iCV;\r\n\t\t\t\t\tvar value = dataToShow[rN][pos];\r\n\t\t\t\t\tvalue = self.defaultPictureValue(value, (iCV == measures.length - 1), iCV)\r\n\t\t\t\t\tvalue = removeComas(value, self);\r\n\t\t\t\t\tvar cellObject = { value: value };\r\n\t\t\t\t\tvar td = OAT.Dom.create(\"td\", {}, \"\");\r\n\t\t\t\t\ttd = self.applyConditionalFormats(td, dataToShow[rN][pos], (iCV === (measures.length - 1)) ? true : false, iCV)\r\n\t\t\t\t\tcellObject = cellObjectStyle(td, cellObject)\r\n\t\t\t\t\tcellObject.formatCode = self.defaultPicture.getAttribute(\"dateFormat\")\r\n\t\t\t\t\tcellObject.genexusType = measures[iCV].getAttribute(\"dataType\");\r\n\t\t\t\t\tcellObject.genexusPicture = measures[iCV].getAttribute(\"picture\");\r\n\t\t\t\t\tdataRow.push(cellObject)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfor (var formItem = 0; formItem < formMeasures.length; formItem++) {\r\n\t\t\t\tdataRow.push({ value: dataToShow[rN][formMeasures[formItem]] })\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tdataTable.push(dataRow);\r\n\t\t}\r\n\r\n\r\n\t\tvar stylesList = [];\r\n\t\tvar columnWithStyle = [];\r\n\t\tvar styleId = 1\r\n\t\tfor (var col = 0; col < self.columns.length; col++) {\r\n\t\t\tcolumnWithStyle[col] = 0;\r\n\t\t\tvar th = OAT.Dom.create(\"th\", {}, \"\");\r\n\t\t\tvar pos = self.conditions[col].dataRowPosition\r\n\t\t\tth = self.applyFormatValues(th, dataToShow[0][pos], pos)\r\n\r\n\t\t\tif (th.getAttribute(\"style\") != undefined) {\r\n\t\t\t\tvar attributes = th.getAttribute(\"style\").split(\";\");\r\n\t\t\t\tvar styleObject = getStyles(attributes);\r\n\t\t\t\tif ((styleObject.fontColor != undefined) || (styleObject.italic != undefined) || (styleObject.bold != undefined)) {\r\n\t\t\t\t\tcolumnWithStyle[col] = styleId;\r\n\t\t\t\t\tstyleId++;\r\n\t\t\t\t\tstylesList.push(styleObject);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar measuresWidthStyle = [];\r\n\t\tfor (var ms = 0; ms < measures.length; ms++) {\r\n\t\t\tmeasuresWidthStyle[ms] = 0;\r\n\t\t\tvar td = OAT.Dom.create(\"td\", {}, \"\");\r\n\t\t\tvar pos = self.columns.length + ms;\r\n\t\t\ttd = self.applyConditionalFormats(td, dataToShow[0][pos], (ms === (measures.length - 1)) ? true : false, ms)\r\n\r\n\t\t\tif (td.getAttribute(\"style\") != undefined) {\r\n\t\t\t\tvar attributes = td.getAttribute(\"style\").split(\";\");\r\n\t\t\t\tvar styleObject = getStyles(attributes);\r\n\t\t\t\tif ((styleObject.fontColor != undefined) || (styleObject.italic != undefined) || (styleObject.bold != undefined)) {\r\n\t\t\t\t\tmeasuresWidthStyle[ms] = styleId;\r\n\t\t\t\t\tstyleId++;\r\n\t\t\t\t\tstylesList.push(styleObject);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\r\n\t\t\r\n\t\t\r\n\t\tvar cacheRecords = '<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?>\\n'\r\n\t\t\t\t+ '<pivotCacheRecords xmlns=\"http://schemas.openxmlformats.org/spreadsheetml/2006/main\" xmlns:r=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships\">'\r\n\t\tvar cacheDefinition = '<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?>\\n'\r\n\t\t\t\t+ '<pivotCacheDefinition r:id=\"rId1\" refreshOnLoad=\"1\" xmlns=\"http://schemas.openxmlformats.org/spreadsheetml/2006/main\" xmlns:r=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships\">\\n'\r\n\t\t\t\t+ '<cacheSource type=\"worksheet\">\\n'\r\n\t\tvar letras = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z', 'AA', 'AB', 'AC', 'AD'];\r\n\t\t\r\n\t\tvar withStyles = (stylesList.length > 0);\r\n\t\tvar lastPos = letras[(measures.length + self.columns.length) - 1] + (dataToShow.length + 1 + 2);\r\n\t\t//xl/pivotTables/pivotTable1.xml string definition\r\n\t\tvar firstDataRow = self.colConditions.length + 2;\r\n\t\tvar firstDataCol = (((self.colConditions.length > 0)) ? self.colConditions.length : 1);\r\n\r\n\t\tvar hasFormula = false;\r\n\t\tvar totalsExportPivotPdfOptions = \" \";\r\n\t\tfor (var fIdx = 0; fIdx < self.formulaInfo.measureFormula.length; fIdx++) {\r\n\t\t\tif (self.formulaInfo.measureFormula[fIdx].hasFormula) {\r\n\t\t\t\thasFormula = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar dataToShow = self.GeneralDataRows\r\n\t\tif (self.autoPaging) {\r\n\t\t\tdataToShow = self.RowsWhenMoveToFilter\r\n\t\t}\r\n\r\n\t\tvar sheet;\r\n\t\t//--------------\r\n\t\tif (self.columns.length < 0) {\r\n\r\n\t\t\tvar xlpivotTable1 = '<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?>'\r\n\t\t\t\t+ '<pivotTableDefinition name=\"Tabla dinamica1\" cacheId=\"5\" dataCaption=\"' + \"Value\"/*gx.getMessage(\"GXPL_QViewerJSValue\")*/ + '\" createdVersion=\"3\" updatedVersion=\"3\" minRefreshableVersion=\"3\" applyNumberFormats=\"0\" applyBorderFormats=\"0\" applyFontFormats=\"0\" applyPatternFormats=\"0\" applyAlignmentFormats=\"0\" applyWidthHeightFormats=\"1\" showCalcMbrs=\"0\" useAutoFormatting=\"1\" itemPrintTitles=\"1\" indent=\"0\" outline=\"1\" outlineData=\"1\" multipleFieldFilters=\"0\" rowHeaderCaption=\"Make\" ' + totalsExportPivotPdfOptions + 'xmlns=\"http://schemas.openxmlformats.org/spreadsheetml/2006/main\">'\r\n\t\t\t\t+ \"<location ref=\\\"A1:\" + lastPos + \"\\\" firstHeaderRow=\\\"1\\\" firstDataRow=\\\"\" + firstDataRow + \"\\\" firstDataCol=\\\"\" + firstDataCol + \"\\\"/>\"\r\n\t\t\t\t+ \"<pivotFields>\"\r\n\t\t\tvar pfi = [];\r\n\t\t\tvar pfvi = [];\r\n\t\t\tvar pfviExclude = [];\r\n\r\n\t\t\tvar rowLevel = -1;\r\n\t\t\tvar lastRowLevel = 0;\r\n\t\t\tvar colLevel = -1;\r\n\t\t\tvar lastColLevel = 0;\r\n\t\t\tfor (var iCV = 0; iCV < self.columns.length; iCV++) {\r\n\r\n\t\t\t\tvar position = 'axisRow';\r\n\t\t\t\tif (self.rowConditions.findIndex(iCV) != -1) {\r\n\t\t\t\t\tposition = 'axisRow';\r\n\t\t\t\t\trowLevel++;\r\n\t\t\t\t\tlastRowLevel = iCV;\r\n\t\t\t\t} else if (self.colConditions.findIndex(iCV) != -1) {\r\n\t\t\t\t\tposition = 'axisCol';\r\n\t\t\t\t\tcolLevel++;\r\n\t\t\t\t\tlastColLevel = iCV;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tposition = 'axisRow';\r\n\t\t\t\t\trowLevel++;\r\n\t\t\t\t\tlastRowLevel = iCV;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar formulaOptionString = '';\r\n\t\t\t\tvar formulaItemString = \"<item t=\\\"default\\\"/>\"\r\n  \r\n\t\t\t\txlpivotTable1 = xlpivotTable1 + \"<pivotField axis=\\\"\" + position + \"\\\" showAll=\\\"0\\\" \" + formulaOptionString + \">\" + //numFmtId=\\\"\" + 163 + \"\\\"\r\n\t\t\t\t\t\"<items>\"\r\n\t\t\t\tvar pfvl; var pfvlExclude;\r\n\t\t\t\tif (self.conditions[iCV].distinctValues != undefined) {\r\n\t\t\t\t\tpfvl = []; pfvlExclude = [];\r\n\t\t\t\t\tfor (var val = 0; val < self.conditions[iCV].distinctValues.length; val++) {\r\n\t\t\t\t\t\tpfvl.push(cleanDistinctValue(self.conditions[iCV].distinctValues[val], self));\r\n\t\t\t\t\t\tvar hiddenString = \"\";\r\n\t\t\t\t\t\tif (self.conditions[iCV].blackList.findIndex(self.conditions[iCV].distinctValues[val]) != -1) {\r\n\t\t\t\t\t\t\thiddenString = \" h=\\\"1\\\"\";\r\n\t\t\t\t\t\t\tpfvlExclude.push(cleanDistinctValue(self.conditions[iCV].distinctValues[val], self));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\txlpivotTable1 = xlpivotTable1 + \"<item x=\\\"\" + val + \"\\\" \" + hiddenString + \" />\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\txlpivotTable1 = xlpivotTable1 + formulaItemString\r\n\t\t\t\t\t\t+ \"</items>\"\r\n\t\t\t\t\t\t+ \"</pivotField>\";\r\n\t\t\t\t}\r\n\t\t\t\tpfvi[iCV] = pfvl;\r\n\t\t\t\tpfviExclude[iCV] = pfvlExclude[iCV]\r\n\t\t\t\tpfi.push(iCV);\r\n\t\t\t}\r\n\r\n\t\t\tfor (var iCV = 0; iCV < measures.length; iCV++) {\r\n\t\t\t\txlpivotTable1 = xlpivotTable1 + \"<pivotField dataField=\\\"1\\\" showAll=\\\"0\\\"/>\"; //numFmtId=\\\"\" + 163 + \"\\\"\r\n\t\t\t\tpfi.push(cleanDistinctValue(getMeasureTitle(measures[iCV].getAttribute(\"displayName\"), iCV), self, measures[iCV].getAttribute(\"name\")));\r\n\t\t\t}\r\n\r\n\t\t\txlpivotTable1 = xlpivotTable1 + \"</pivotFields>\"\r\n\t\t\txlpivotTable1 = xlpivotTable1 + \"<rowFields>\"\r\n\t\t\tfor (var iCV = 0; iCV < self.columns.length; iCV++) {\r\n\t\t\t\tif ((self.rowConditions.findIndex(iCV) != -1) || (self.filterIndexes.findIndex(iCV) != -1)) {\r\n\t\t\t\t\txlpivotTable1 = xlpivotTable1 + \"<field x=\\\"\" + 0 + \"\\\"/>\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\txlpivotTable1 = xlpivotTable1 + \"</rowFields>\"\r\n\r\n\t\t\txlpivotTable1 = xlpivotTable1 + \"<rowItems>\"\r\n\t\t\tfor (var it = 0; it < self.rowStructure.items.length; it++) {\r\n\t\t\t\txlpivotTable1 = xlpivotTable1 + createExcelROWITEMS(self.rowStructure.items[it], rowLevel, pfvi, lastRowLevel, rowLevel)\r\n\t\t\t}\r\n\t\t\txlpivotTable1 = xlpivotTable1 + \"<i t=\\\"grand\\\"><x/></i>\"\r\n\t\t\t\t+ \"</rowItems>\"\r\n\r\n\t\t\tif ((((colLevel > -1)) || ((measures.length > 1)))) {\r\n\t\t\t\txlpivotTable1 = xlpivotTable1 + \"<colFields>\"\r\n\r\n\t\t\t\tfor (var iCV = 0; iCV < self.columns.length; iCV++) {\r\n\t\t\t\t\tif (self.colConditions.findIndex(iCV) != -1) {\r\n\t\t\t\t\t\tvar pos = pfi.indexOf(iCV);\r\n\t\t\t\t\t\txlpivotTable1 = xlpivotTable1 + \"<field x=\\\"\" + pos + \"\\\"/>\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (measures.length > 1) {\r\n\t\t\t\t\txlpivotTable1 = xlpivotTable1 + \"<field x=\\\"-2\\\"/>\";\r\n\t\t\t\t};\r\n\r\n\t\t\t\txlpivotTable1 = xlpivotTable1 + \"</colFields>\"\r\n\t\t\t}\r\n\r\n\t\t\t//col items\r\n\t\t\txlpivotTable1 = xlpivotTable1 + \"<colItems>\"\r\n\t\t\tif (self.colStructure.items) {\r\n\t\t\t\tfor (var it = 0; it < self.colStructure.items.length; it++) {\r\n\t\t\t\t\txlpivotTable1 = xlpivotTable1 + createExcelCOLITEMS(self.colStructure.items[it], colLevel, pfvi, lastColLevel, colLevel)\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tfor (var iCV = 0; iCV < measures.length; iCV++) {\r\n\t\t\t\t\txlpivotTable1 = xlpivotTable1 + '<i/>';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\txlpivotTable1 = xlpivotTable1 + \"</colItems>\"\r\n\r\n\t\t\txlpivotTable1 = xlpivotTable1 + \"<dataFields>\"\r\n\t\t\tfor (var iCV = 0; iCV < measures.length; iCV++) {\r\n\t\t\t\txlpivotTable1 = xlpivotTable1 + \"<dataField name=\\\"\" + cleanDistinctValue(getMeasureTitle(measures[iCV].getAttribute(\"displayName\"), iCV), self, measures[iCV].getAttribute(\"name\")) + \"\\\" fld=\\\"\" + (iCV + self.columns.length) + \"\\\"/>\" //\\\" subtotal=\\\"sum\\\" numFmtId=\\\"163\\\"\t\t\r\n\t\t\t}\r\n\r\n\t\t\txlpivotTable1 = xlpivotTable1 + \"</dataFields>\"\r\n\r\n\r\n\t\t\tif (withStyles) {\r\n\t\t\t\txlpivotTable1 = xlpivotTable1 + '<formats>'\r\n\t\t\t\t//format for columns\r\n\t\t\t\tfor (var iCV = 0; iCV < self.columns.length; iCV++) {\r\n\t\t\t\t\tif (columnWithStyle[iCV] > 0) {\r\n\t\t\t\t\t\txlpivotTable1 = xlpivotTable1 + '<format dxfId=\"' + columnWithStyle[iCV] + '\">' + '<pivotArea dataOnly=\"0\" labelOnly=\"1\" fieldPosition=\"0\">' + '<references ><reference field=\"0\">'\r\n\r\n\t\t\t\t\t\tif (self.conditions[iCV].distinctValues != undefined) {\r\n\t\t\t\t\t\t\tfor (var val = 0; val < self.conditions[iCV].distinctValues.length; val++) {\r\n\t\t\t\t\t\t\t\txlpivotTable1 = xlpivotTable1 + '<x v=\"' + val + '\"/>';\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\txlpivotTable1 = xlpivotTable1 + '</reference></references>' + '</pivotArea>' + '</format>'\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor (var it = 0; it < measures.length; it++) {\r\n\t\t\t\t\tif (measuresWidthStyle[it] > 0) {\r\n\t\t\t\t\t\txlpivotTable1 = xlpivotTable1 + '<format dxfId=\"' + measuresWidthStyle[it] + '\">'\r\n\t\t\t\t\t\txlpivotTable1 = xlpivotTable1 + '<pivotArea  fieldPosition=\"0\">'\r\n\t\t\t\t\t\txlpivotTable1 = xlpivotTable1 + '<references>'\r\n\t\t\t\t\t\txlpivotTable1 = xlpivotTable1 + '<reference field=\"4294967294\" selected=\"0\">'\r\n\t\t\t\t\t\txlpivotTable1 = xlpivotTable1 + '<x v=\"' + it + '\"/></reference>'\r\n\t\t\t\t\t\txlpivotTable1 = xlpivotTable1 + '<reference field=\"0\">'\r\n\t\t\t\t\t\tfor (var p = 0; p < self.rowStructure.items.length; p++) {\r\n\t\t\t\t\t\t\txlpivotTable1 = xlpivotTable1 + '<x v=\"' + p + '\"/>'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\txlpivotTable1 = xlpivotTable1 + '</reference>'\r\n\t\t\t\t\t\txlpivotTable1 = xlpivotTable1 + '</references></pivotArea>'\r\n\t\t\t\t\t\txlpivotTable1 = xlpivotTable1 + '</format>'\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\txlpivotTable1 = xlpivotTable1 + '</formats>'\r\n\t\t\t}\r\n\r\n\t\t\txlpivotTable1 = xlpivotTable1 + \"<pivotTableStyleInfo name=\\\"PivotStyleLight16\\\" showRowHeaders=\\\"1\\\" showColHeaders=\\\"1\\\" showRowStripes=\\\"0\\\" showColStripes=\\\"0\\\" showLastColumn=\\\"1\\\"/>\"\r\n\t\t\t\t+ \"</pivotTableDefinition>\"\r\n\r\n\t\t\tvar xlstyle = '<dxf><font><color rgb=\"FFCCCCCC\" /></font></dxf>';\r\n\t\t\tif (withStyles) {\r\n\t\t\t\tfor (var s = 0; s < stylesList.length; s++) {\r\n\t\t\t\t\txlstyle = xlstyle + '<dxf><font>'\r\n\t\t\t\t\tif (stylesList[s].bold != undefined) {\r\n\t\t\t\t\t\txlstyle = xlstyle + '<b/>'\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (stylesList[s].italic != undefined) {\r\n\t\t\t\t\t\txlstyle = xlstyle + '<i/>'\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (stylesList[s].fontColor != undefined) {\r\n\t\t\t\t\t\txlstyle = xlstyle + '<color rgb=\"FF' + stylesList[s].fontColor + '\"/>'\r\n\t\t\t\t\t}\r\n\t\t\t\t\txlstyle = xlstyle + '</font></dxf>';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar dfxStr = xlstyle;\r\n\t\t\t//xl/pivotCache/cacheRecords\r\n\t\t\tfor (var rN = 0; rN < dataToShow.length; rN++) {\r\n\t\t\t\tcacheRecords = cacheRecords + \"<r>\"\r\n\r\n\t\t\t\tfor (var col = 0; col < self.columns.length; col++) {\r\n\t\t\t\t\tvar vvalue = pfvi[col].indexOf(dataToShow[rN][col])\r\n\t\t\t\t\tcacheRecords = cacheRecords + '<x v=\"' + vvalue + '\"/>'\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor (var iCV = 0; iCV < measures.length; iCV++) {\r\n\t\t\t\t\tvar pos = self.columns.length + iCV;\r\n\t\t\t\t\tvar value = self.defaultPictureValue(dataToShow[rN][pos], (iCV == measures.length - 1), iCV)\r\n\t\t\t\t\tvalue = removeComas(value, self);\r\n\t\t\t\t\tvalue = cleanDistinctValue(value, self)\r\n\t\t\t\t\tcacheRecords = cacheRecords + '<n v=\\\"' + value + '\"/>';\r\n\t\t\t\t}\r\n\t\t\t\tcacheRecords = cacheRecords + \"</r>\"\r\n\t\t\t}\r\n\t\t\tcacheRecords = cacheRecords + '</pivotCacheRecords>';\r\n\r\n\r\n\t\t\t//xl/pivotCache/cacheDefinition\r\n\t\t\t\r\n\t\t\tcacheDefinition = cacheDefinition + '<worksheetSource ref=\"A1:' + letras[self.columns.length + measures.length - 1] + (dataToShow.length + 1) + '\" sheet=\"SourceData\"/>'\r\n\t\t\tcacheDefinition = cacheDefinition + '</cacheSource>'\r\n\t\t\tcacheDefinition = cacheDefinition + '<cacheFields count=\"' + (self.columns.length + measures.length) + '\">'\r\n\t\t\tfor (var col = 0; col < self.columns.length; col++) {\r\n\t\t\t\tcacheDefinition = cacheDefinition + '<cacheField name=\"' + cleanDistinctValue(self.columns[col].getAttribute(\"displayName\"), self, self.columns[col].getAttribute(\"name\")).replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(\"settings\", \"\") + '\" numFmtId=\"0\">'\r\n\t\t\t\tcacheDefinition = cacheDefinition + '<sharedItems count=\"' + self.conditions[col].distinctValues.length + '\">'\r\n\t\t\t\tfor (var val = 0; val < self.conditions[col].distinctValues.length; val++) {\r\n\t\t\t\t\tcacheDefinition = cacheDefinition + '<s v=\"' + cleanDistinctValue(self.conditions[col].distinctValues[val], self)/*self.conditions[col].distinctValues[val].replace(/\\&/g, \"&amp;\").replace(/\"/g, \"&quot;\")*/ + '\"/>';\r\n\t\t\t\t}\r\n\t\t\t\tcacheDefinition = cacheDefinition + '</sharedItems>'\r\n\t\t\t\tcacheDefinition = cacheDefinition + '</cacheField>'\r\n\t\t\t}\r\n\t\t\tfor (var iCV = 0; iCV < measures.length; iCV++) {\r\n\t\t\t\tcacheDefinition = cacheDefinition + '<cacheField name=\"' + cleanDistinctValue(getMeasureTitle(measures[iCV].getAttribute(\"displayName\"),iCV), self, measures[iCV].getAttribute(\"name\")) + '\" numFmtId=\"0\">'\r\n\t\t\t\tcacheDefinition = cacheDefinition + '<sharedItems/>'\r\n\t\t\t\tcacheDefinition = cacheDefinition + '</cacheField>'\r\n\t\t\t}\r\n\t\t\tcacheDefinition = cacheDefinition + '</cacheFields>'\r\n\t\t\tcacheDefinition = cacheDefinition + '</pivotCacheDefinition>'\r\n\r\n\t\t\t//xl - woorksheet - sheet2\r\n\t\t\tvar sheet2 = '<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?>'\r\n\t\t\t\t+ '<worksheet xmlns=\"http://schemas.openxmlformats.org/spreadsheetml/2006/main\" xmlns:r=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships\">'\r\n\t\t\t\t+ '<dimension ref=\"A1:' + letras[self.columns.length + measures.length - 1] + (dataToShow.length + 1) + '\"/>'\r\n\t\t\t\t+ '<sheetViews>'\r\n\t\t\t\t+ '<sheetView workbookViewId=\"0\"/>'\r\n\t\t\t\t+ '</sheetViews>'\r\n\t\t\t\t+ '<sheetData>'\r\n\t\t\tvar rowNumber = 1;\r\n\t\t\tvar colNumber = 0;\r\n\t\t\t//headers\r\n\t\t\tsheet2 = sheet2 + '<row r=\"' + rowNumber + '\" span=\"1:3\">'\r\n\t\t\tfor (var col = 0; col < self.columns.length; col++) {\r\n\t\t\t\tsheet2 = sheet2 + '<c t=\"inlineStr\" r=\"' + letras[colNumber] + rowNumber + '\">'\r\n\t\t\t\tsheet2 = sheet2 + '<is><t>' + cleanDistinctValue(self.columns[col].getAttribute(\"displayName\"), self, self.columns[col].getAttribute(\"name\")) + '</t></is>'\r\n\t\t\t\tsheet2 = sheet2 + '</c>'\r\n\t\t\t\tcolNumber++;\r\n\t\t\t}\r\n\t\t\tfor (var iCV = 0; iCV < measures.length; iCV++) {\r\n\t\t\t\tsheet2 = sheet2 + '<c t=\"inlineStr\" r=\"' + letras[colNumber] + rowNumber + '\">'\r\n\t\t\t\tsheet2 = sheet2 + '<is><t>' + cleanDistinctValue(getMeasureTitle(measures[iCV].getAttribute(\"displayName\"),iCV), self, measures[iCV].getAttribute(\"name\")) + '</t></is>'\r\n\t\t\t\tsheet2 = sheet2 + '</c>'\r\n\t\t\t\tcolNumber++;\r\n\t\t\t}\r\n\t\t\tsheet2 = sheet2 + '</row>'\r\n\r\n\t\t\tfor (var rN = 0; rN < dataToShow.length; rN++) {\r\n\t\t\t\tcolNumber = 0;\r\n\t\t\t\trowNumber++;\r\n\t\t\t\tsheet2 = sheet2 + '<row r=\"' + rowNumber + '\" span=\"1:3\">'\r\n\t\t\t\tfor (var col = 0; col < self.columns.length; col++) {\r\n\t\t\t\t\tvar pos = self.conditions[col].dataRowPosition\r\n\t\t\t\t\tvar value = cleanDistinctValue(dataToShow[rN][pos], self)\r\n\r\n\t\t\t\t\tsheet2 = sheet2 + '<c t=\"inlineStr\" r=\"' + letras[colNumber] + rowNumber + '\">'\r\n\t\t\t\t\tsheet2 = sheet2 + '<is><t>' + value + '</t></is>'\r\n\t\t\t\t\tsheet2 = sheet2 + '</c>'\r\n\t\t\t\t\tcolNumber++;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor (var iCV = 0; iCV < measures.length; iCV++) {\r\n\t\t\t\t\tpos = self.columns.length + iCV;\r\n\t\t\t\t\tvar value = self.defaultPictureValue(dataToShow[rN][pos], (iCV == measures.length - 1), iCV)\r\n\t\t\t\t\tvalue = removeComas(value, self);\r\n\t\t\t\t\tvalue = cleanDistinctValue(value);\r\n\t\t\t\t\tif ((measures[iCV].getAttribute('dataType') === \"real\") || (measures[iCV].getAttribute('dataType') === \"integer\")) {\r\n\t\t\t\t\t\tsheet2 = sheet2 + '<c r=\"' + letras[colNumber] + rowNumber + '\">'\r\n\t\t\t\t\t\tsheet2 = sheet2 + '<v>' + value + '</v>'\r\n\t\t\t\t\t\tsheet2 = sheet2 + '</c>'\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tsheet2 = sheet2 + '<c t=\"inlineStr\" r=\"' + letras[colNumber] + rowNumber + '\">'\r\n\t\t\t\t\t\tsheet2 = sheet2 + '<is><t>' + value + '</t></is>'\r\n\t\t\t\t\t\tsheet2 = sheet2 + '</c>'\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcolNumber++;\r\n\t\t\t\t}\r\n\t\t\t\tsheet2 = sheet2 + '</row>'\r\n\t\t\t}\r\n\r\n\t\t\tsheet2 = sheet2 + '</sheetData>'\r\n\t\t\tsheet2 = sheet2 + '</worksheet>'\r\n\r\n\t\t\tsheet = xlsx({\r\n\t\t\t\tcreator: 'Genexus',\r\n\t\t\t\tlastModifiedBy: 'Genexus',\r\n\t\t\t\tpivot: true,\r\n\t\t\t\tpivotCacheDefinition: cacheDefinition,\r\n\t\t\t\tpivotTable1: xlpivotTable1,\r\n\t\t\t\tSheet2: sheet2,\r\n\t\t\t\tstyle: xlstyle,\r\n\t\t\t\tdfx: dfxStr,\r\n\t\t\t\tworksheets: [{\r\n\t\t\t\t\tdata: dataTable,\r\n\t\t\t\t\tname: 'Sheet 1'\r\n\t\t\t\t}]\r\n\t\t\t});\r\n\r\n\r\n\t\t} else {\r\n\r\n\t\t\t//xl/pivotTables/pivotTable1.xml string definition\r\n\t\t\tvar firstDataRow = self.colConditions.length + 1;\r\n\t\t\tvar firstDataCol = (((self.colConditions.length > 0)) ? self.colConditions.length : 1);\r\n\t\t\tif ((self.filterIndexes.length > 0) && (self.rowConditions.length + 1 == measures.length)) {\r\n\t\t\t\tfirstDataCol = 0;\r\n\t\t\t}\r\n\r\n\t\t\tif ((self.rowConditions.length + self.filterIndexes.length) == 0) {\r\n\t\t\t\tfirstDataRow = 1;\r\n\t\t\t\tfirstDataCol = 1;\r\n\t\t\t}\r\n\r\n\t\t\tvar varRef = \"1\"\r\n\t\t\tvar pageInfo = \"\"\r\n\t\t\tif (self.filterIndexes.length > 0) {\r\n\t\t\t\tfirstDataRow = firstDataRow + self.filterIndexes.length;\r\n\t\t\t\tpageInfo = \" rowPageCount=\\\"\" + self.filterIndexes.length + \"'\\\" colPageCount=\\\"1\\\" \"\r\n\t\t\t\tvarRef = firstDataRow + 1\r\n\t\t\t}\r\n\r\n\t\t\tvar rowLabel = \"\";\r\n\t\t\tif (self.rowConditions.length > 0) {\r\n\t\t\t\tvar firstRow = self.rowConditions[0]\r\n\t\t\t\tif (self.columns.length > firstRow) {\r\n\t\t\t\t\trowLabel = ' rowHeaderCaption=\"' + cleanDistinctValue(self.columns[firstRow].getAttribute(\"displayName\"), self, self.columns[firstRow].getAttribute(\"name\")) + '\" ';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (self.colConditions.length > 0) {\r\n\t\t\t\tvar firstCol = self.colConditions[0]\r\n\t\t\t\tif (self.columns.length > firstCol) {\r\n\t\t\t\t\trowLabel = rowLabel + ' colHeaderCaption=\"' + cleanDistinctValue(self.columns[firstCol].getAttribute(\"displayName\"), self, self.columns[firstCol].getAttribute(\"name\")) + '\" ';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar xlpivotTable1 = '<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?>\\n'\r\n\t\t\t\t+ '<pivotTableDefinition name=\"Tabla dinamica1\" cacheId=\"5\" dataCaption=\"' + \"Value\"/*gx.getMessage(\"GXPL_QViewerJSValue\")*/ + '\" createdVersion=\"3\" updatedVersion=\"3\" minRefreshableVersion=\"3\" applyNumberFormats=\"0\" applyBorderFormats=\"0\" applyFontFormats=\"0\" applyPatternFormats=\"0\" applyAlignmentFormats=\"0\" applyWidthHeightFormats=\"1\" showCalcMbrs=\"0\" useAutoFormatting=\"1\" itemPrintTitles=\"1\" indent=\"0\" outline=\"1\" outlineData=\"1\" multipleFieldFilters=\"0\" '\r\n\t\t\t\t+ rowLabel + ' ' + totalsExportPivotPdfOptions + ' xmlns=\"http://schemas.openxmlformats.org/spreadsheetml/2006/main\">\\n'\r\n\t\t\t\t+ \"<location \"\r\n\t\t\t\t+ \"ref=\\\"A\" + varRef + \"\\\"\"//ref=\\\"A1\\\"' \r\n\t\t\t\t+ \" firstHeaderRow=\\\"1\\\" firstDataRow=\\\"\" + firstDataRow + \"\\\" firstDataCol=\\\"\" + firstDataCol + \"\\\" \"\r\n\t\t\t\t+ pageInfo\r\n\t\t\t\t+ \"/>\\n\"\r\n\t\t\t\t+ \"<pivotFields>\\n\"\r\n\t\t\tvar pfi = [];\r\n\t\t\tvar pfvi = [];\r\n\t\t\tvar pfviExclude = [];\r\n\t\t\t\r\n\t\t\tvar measuresXML = \"\"\r\n\t\t\tif (self.formulaInfo.cantFormulaMeasures == 0) {\r\n\t\t\t\tfor (var iCV = 0; iCV < measures.length; iCV++) {\r\n\t\t\t\t\tvar numFmt = 163\r\n\t\t\t\t\tif (measures[iCV].getAttribute('picture') != \"\") {\r\n\t\t\t\t\t\tnumFmt = 164 + iCV\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ( (self.rowConditions.length > 0) || (self.colConditions.length == 0)){\r\n\t\t\t\t\t\txlpivotTable1 = xlpivotTable1 + \"<pivotField dataField=\\\"1\\\" showAll=\\\"0\\\"  numFmtId=\\\"\" + numFmt + \"\\\"/>\\n\";\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tmeasuresXML = measuresXML + \"<pivotField dataField=\\\"1\\\" showAll=\\\"0\\\"  numFmtId=\\\"\" + numFmt + \"\\\"/>\\n\";\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tpfi.push(cleanDistinctValue(getMeasureTitle(measures[iCV].getAttribute(\"displayName\"), iCV), self, measures[iCV].getAttribute(\"name\")));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar rowLevel = -1;\r\n\t\t\tvar lastRowLevel = 0;\r\n\t\t\tvar colLevel = -1;\r\n\t\t\tvar lastColLevel = 0;\r\n\r\n\t\t\t\r\n\t\t\tfor (var filter = 0; filter < self.filterIndexes.length; filter++) {\r\n\t\t\t\tvar iCV = self.filterIndexes[filter];\r\n\r\n\t\t\t\tposition = 'axisPage';\r\n\r\n\t\t\t\tvar formulaOptionString = 'numFmtId=\"163\"';\r\n\t\t\t\tvar formulaItemString = \"<item t=\\\"default\\\"/>\\n\"\r\n\t\t\t\t\r\n\r\n\t\t\t\txlpivotTable1 = xlpivotTable1 + \"<pivotField axis=\\\"\" + position + \"\\\" showAll=\\\"0\\\" \" + formulaOptionString + \" >\\n\"\r\n\t\t\t\t\t+ \"<items>\\n\"\r\n\t\t\t\tvar pfvl; var pfvlExclude;\r\n\t\t\t\tif (self.conditions[iCV].distinctValues != undefined) {\r\n\t\t\t\t\tpfvl = []; pfvlExclude = [];\r\n\t\t\t\t\tvar distValues = self.conditions[iCV].distinctValues\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar pos = 0;\r\n\t\t\t\t\tfor (var val = 0; val < distValues.length; val++) {\r\n\t\t\t\t\t\tif (!((distValues[val] == '') && (distValues.findIndex(\"#NuN#\") != -1))) {//and  ( distValues.findIndex(\"#NuN#\") != -1) )  )  {  //se omite un valor porque con el #NUN# el '' queda de mas \r\n\r\n\t\t\t\t\t\t\tpfvl.push(cleanDistinctValue(distValues[val], self));\r\n\t\t\t\t\t\t\tvar hiddenString = \"\";\r\n\t\t\t\t\t\t\tif (self.conditions[iCV].blackList.findIndex(distValues[val]) != -1) {\r\n\t\t\t\t\t\t\t\thiddenString = \" h=\\\"1\\\"\";\r\n\t\t\t\t\t\t\t\tpfvlExclude.push(cleanDistinctValue(distValues[val], self));\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\txlpivotTable1 = xlpivotTable1 + \"<item x=\\\"\" + pos + \"\\\" \" + hiddenString + \" />\\n\";\r\n\r\n\t\t\t\t\t\t\tpos = pos + 1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\txlpivotTable1 = xlpivotTable1 + formulaItemString /*+ \"<item t=\\\"default\\\"/>\"*/\r\n\t\t\t\t\t\t+ \"</items>\\n\"\r\n\t\t\t\t\t\t+ \"</pivotField>\\n\";\r\n\t\t\t\t}\r\n\t\t\t\tpfvi[iCV] = pfvl;\r\n\t\t\t\tpfviExclude[iCV] = pfvlExclude[iCV]\r\n\t\t\t\tpfi.push(iCV);\r\n\t\t\t}\r\n\t\t\t\r\n\r\n\t\t\tfor (var iCV = 0; iCV < self.columns.length; iCV++) {\r\n\t\t\t\tif (self.filterIndexes.indexOf(iCV) == -1) { //C-L\r\n\t\t\t\t\tvar position = 'axisRow';\r\n\t\t\t\t\tif (  ((self.rowConditions.length > 0) && (self.rowConditions.indexOf(iCV) != -1)) || (((self.rowConditions.length + self.filterIndexes.length + self.colConditions.length) == 0))) {\r\n\t\t\t\t\t\tposition = 'axisRow';\r\n\t\t\t\t\t\trowLevel++;\r\n\t\t\t\t\t\tlastRowLevel = iCV;\r\n\t\t\t\t\t} else if (self.colConditions.indexOf(iCV) != -1) {\r\n\t\t\t\t\t\tposition = 'axisCol';\r\n\t\t\t\t\t\tcolLevel++;\r\n\t\t\t\t\t\tlastColLevel = iCV;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tposition = 'axisPage';\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar formulaOptionString = 'numFmtId=\"163\"';\r\n\t\t\t\t\tvar formulaItemString = \"<item t=\\\"default\\\"/>\\n\"\r\n\t\t\t\t\t\r\n\r\n\t\t\t\t\txlpivotTable1 = xlpivotTable1 + \"<pivotField axis=\\\"\" + position + \"\\\" showAll=\\\"0\\\" \" + formulaOptionString + \" >\\n\"\r\n\t\t\t\t\t\t+ \"<items>\\n\"\r\n\t\t\t\t\tvar pfvl; var pfvlExclude;\r\n\t\t\t\t\tif (self.conditions[iCV].distinctValues != undefined) {\r\n\t\t\t\t\t\tpfvl = []; pfvlExclude = [];\r\n\t\t\t\t\t\tvar distValues = self.conditions[iCV].distinctValues\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tvar pos = 0;\r\n\t\t\t\t\t\tfor (var val = 0; val < distValues.length; val++) {\r\n\t\t\t\t\t\t\tif (!((distValues[val] == '') && (distValues.findIndex(\"#NuN#\") != -1))) {\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tpfvl.push(cleanDistinctValue(distValues[val], self));\r\n\t\t\t\t\t\t\t\tvar hiddenString = \"\";\r\n\t\t\t\t\t\t\t\tif (self.conditions[iCV].blackList.findIndex(distValues[val]) != -1) {\r\n\t\t\t\t\t\t\t\t\thiddenString = \" h=\\\"1\\\"\";\r\n\t\t\t\t\t\t\t\t\tpfvlExclude.push(cleanDistinctValue(distValues[val], self));\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\txlpivotTable1 = xlpivotTable1 + \"<item x=\\\"\" + pos + \"\\\" \" + hiddenString + \" />\";\r\n\t\t\t\t\t\t\t\tpos = pos + 1\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\txlpivotTable1 = xlpivotTable1 + formulaItemString /*+ \"<item t=\\\"default\\\"/>\"*/\r\n\t\t\t\t\t\t\t+ \"</items>\\n\"\r\n\t\t\t\t\t\t\t+ \"</pivotField>\\n\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\tpfvi[iCV] = pfvl;\r\n\t\t\t\t\tpfviExclude[iCV] = pfvlExclude[iCV]\r\n\t\t\t\t\tpfi.push(iCV);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\r\n\t\t\tif (self.formulaInfo.cantFormulaMeasures > 0) {\r\n\t\t\t\tfor (var iCV = 0; iCV < measures.length; iCV++) { //first visible measures\r\n\t\t\t\t\tvar numFmt = 163\r\n\t\t\t\t\tif (measures[iCV].getAttribute('picture') != \"\") {\r\n\t\t\t\t\t\tnumFmt = 164 + iCV\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!self.formulaInfo.measureFormula[iCV].hasFormula) {\r\n\r\n\t\t\t\t\t\txlpivotTable1 = xlpivotTable1 + \"<pivotField dataField=\\\"1\\\" showAll=\\\"0\\\"  numFmtId=\\\"\" + numFmt + \"\\\"/>\\n\";\r\n\r\n\t\t\t\t\t\tpfi.push(cleanDistinctValue(getMeasureTitle(measures[iCV].getAttribute(\"displayName\"),iCV), self, measures[iCV].getAttribute(\"name\")));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor (var iCV = 0; iCV < formMeasures.length; iCV++) {//add hidden measures for formula\r\n\t\t\t\t\txlpivotTable1 = xlpivotTable1 + '<pivotField showAll=\"0\" defaultSubtotal=\"0\"/>\\n'\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor (var iCV = 0; iCV < measures.length; iCV++) { //second formula measures\r\n\t\t\t\t\tif (self.formulaInfo.measureFormula[iCV].hasFormula) {\r\n\t\t\t\t\t\txlpivotTable1 = xlpivotTable1 + '<pivotField dataField=\"1\" dragToRow=\"0\" dragToCol=\"0\" dragToPage=\"0\" showAll=\"0\" defaultSubtotal=\"0\" numFmtId=\"' + numFmt + '\"/>\\n'\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif ( (self.rowConditions.length == 0) && (self.colConditions.length > 0)){\r\n\t\t\t\txlpivotTable1 = xlpivotTable1 + measuresXML\t\t\t\t\t\r\n\t\t\t}\r\n\r\n\t\t\txlpivotTable1 = xlpivotTable1 + \"</pivotFields>\\n\"\r\n\r\n\t\t\tif ((self.rowConditions.length + 1 != measures.length)) {\r\n\t\t\t\txlpivotTable1 = xlpivotTable1 + \"<rowFields>\\n\"\r\n\t\t\t\tfor (var iCV = 0; iCV < self.columns.length; iCV++) {\r\n\t\t\t\t\tif ((self.rowConditions.findIndex(iCV) != -1) /*|| (self.filterIndexes.find(iCV)!=-1)*/ //<-- cambio\r\n\t\t\t\t\t\t|| (((self.rowConditions.length + self.filterIndexes.length) == 0))\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\tvar pos = pfi.indexOf(iCV);\r\n\t\t\t\t\t\txlpivotTable1 = xlpivotTable1 + \"<field x=\\\"\" + pos + \"\\\"/>\\n\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\txlpivotTable1 = xlpivotTable1 + \"</rowFields>\\n\"\r\n\t\t\t}\r\n\r\n\r\n\t\t\txlpivotTable1 = xlpivotTable1 + \"<rowItems>\\n\"\r\n\t\t\tfor (var it = 0; it < self.rowStructure.items.length; it++) {\r\n\t\t\t\txlpivotTable1 = xlpivotTable1 + createExcelROWITEMS(self.rowStructure.items[it], rowLevel, pfvi, lastRowLevel, rowLevel)\r\n\t\t\t}\r\n\t\t\tif ( (self.rowConditions.length == 0) && (self.colConditions.length > 0)){\r\n\t\t\t\txlpivotTable1 = xlpivotTable1 + \"<i/>\\n\" + \"</rowItems>\\n\"\r\n\t\t\t} else {\r\n\t\t\t\txlpivotTable1 = xlpivotTable1 + \"<i t=\\\"grand\\\"><x/></i>\\n\" + \"</rowItems>\\n\"\r\n\t\t\t}\r\n\r\n\t\t\tif ((((colLevel > -1)) || ((measures.length > 1)))) {\r\n\t\t\t\txlpivotTable1 = xlpivotTable1 + \"<colFields>\\n\"\r\n\r\n\t\t\t\tfor (var iCV = 0; iCV < self.columns.length; iCV++) {\r\n\t\t\t\t\tif ((self.colConditions.findIndex(iCV) != -1) && ((((self.rowConditions.length + self.filterIndexes.length) != 0)))) {\r\n\t\t\t\t\t\tvar pos = pfi.indexOf(iCV)\r\n\t\t\t\t\t\txlpivotTable1 = xlpivotTable1 + \"<field x=\\\"\" + pos + \"\\\"/>\\n\";\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif ((self.colConditions.findIndex(iCV) != -1) && ((((self.rowConditions.length + self.filterIndexes.length) == 0)))){\r\n\t\t\t\t\t\t\tvar pos = pfi.indexOf(iCV)\r\n\t\t\t\t\t\t\tif (self.rowConditions.length == 0)\r\n\t\t\t\t\t\t\t\tpos = pfi.indexOf(iCV) - measures.length;\r\n\t\t\t\t\t\t\txlpivotTable1 = xlpivotTable1 + \"<field x=\\\"\" + pos + \"\\\"/>\\n\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\tif (measures.length > 1) {\r\n\t\t\t\t\txlpivotTable1 = xlpivotTable1 + \"<field x=\\\"-2\\\"/>\\n\";\r\n\t\t\t\t};\r\n\t\t\t\t//<field x=\"-2\"/>\r\n\t\t\t\txlpivotTable1 = xlpivotTable1 + \"</colFields>\\n\"\r\n\t\t\t}\r\n\r\n\t\t\t//col items\r\n\t\t\txlpivotTable1 = xlpivotTable1 + \"<colItems>\\n\"\r\n\t\t\tif ((self.colStructure.items)){// && ((self.rowConditions.length + self.filterIndexes.length) != 0)) {\r\n\t\t\t\tfor (var it = 0; it < self.colStructure.items.length; it++) {\r\n\t\t\t\t\txlpivotTable1 = xlpivotTable1 + createExcelCOLITEMS(self.colStructure.items[it], colLevel, pfvi, lastColLevel, colLevel)\r\n\t\t\t\t}\r\n\t\t\t\tif (self.rowConditions.length==0){\r\n\t\t\t\t\txlpivotTable1 = xlpivotTable1  + \"<i t=\\\"grand\\\"><x/></i>\"\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tfor (var iCV = 0; iCV < measures.length; iCV++) {\r\n\t\t\t\t\txlpivotTable1 = xlpivotTable1 + '<i/>\\n';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\txlpivotTable1 = xlpivotTable1 + \"</colItems>\\n\"\r\n\r\n\t\t\tif (self.filterIndexes.length > 0) {\r\n\t\t\t\txlpivotTable1 = xlpivotTable1 + \"<pageFields>\\n\"\r\n\t\t\t\tfor (var find = 0; find < self.filterIndexes.length; find++) {\r\n\t\t\t\t\txlpivotTable1 = xlpivotTable1 + \"<pageField fld=\\\"\" + (measures.length + find) + \"\\\" hier=\\\"-1\\\"/>\\n\" //C-L +find\r\n\t\t\t\t}\r\n\t\t\t\txlpivotTable1 = xlpivotTable1 + \"</pageFields>\\n\"\r\n\t\t\t}\r\n\r\n\t\t\txlpivotTable1 = xlpivotTable1 + \"<dataFields>\\n\"\r\n\t\t\tvar colFormYaAgregada = 0; var numColFormula = 0;\r\n\t\t\tfor (var iCV = 0; iCV < measures.length; iCV++) {\r\n\t\t\t\tvar numFmt = 163\r\n\t\t\t\tif (measures[iCV].getAttribute('picture') != \"\") {\r\n\t\t\t\t\tnumFmt = 164 + iCV\r\n\t\t\t\t}\r\n\t\t\t\tif (!self.formulaInfo.measureFormula[iCV].hasFormula) {\r\n\t\t\t\t\tvar addWhenFormula = 0;\r\n\t\t\t\t\tif (self.formulaInfo.cantFormulaMeasures > 0) addWhenFormula = self.columns.length - colFormYaAgregada//self.columns.length\r\n\t\t\t\t\tvar space = \"\";\r\n\t\t\t\t\tvar aggregation = (measures[iCV].getAttribute(\"aggregation\") == \"count\") ? \"sum\" : measures[iCV].getAttribute(\"aggregation\") \r\n\t\t\t\t\tif (measures[iCV].getAttribute(\"displayName\").indexOf(\"%\") > -1) {\r\n\t\t\t\t\t\tfor (var t = 0; t < iCV; t++) {\r\n\t\t\t\t\t\t\tspace = space + \" \";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\txlpivotTable1 = xlpivotTable1 + \"<dataField name=\\\"\" + measures[iCV].getAttribute(\"displayName\") + space + \"\\\" fld=\\\"\" + (iCV + addWhenFormula) + \"\\\" subtotal=\\\"\" + aggregation + \"\\\" numFmtId=\\\"\" + numFmt + \"\\\"/>\\n\"\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (self.rowConditions.length > 0) {\r\n\t\t\t\t\t\t\txlpivotTable1 = xlpivotTable1 + \"<dataField name=\\\"\" + cleanDistinctValue(getMeasureTitle(measures[iCV].getAttribute(\"displayName\"), iCV), self, measures[iCV].getAttribute(\"name\")).replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(\"settings\", \"\") + \"\\\" fld=\\\"\" + (iCV + addWhenFormula) + \"\\\" subtotal=\\\"\" + aggregation + \"\\\" numFmtId=\\\"\" + numFmt + \"\\\"/>\\n\"\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\txlpivotTable1 = xlpivotTable1 + \"<dataField name=\\\"\" + cleanDistinctValue(getMeasureTitle(measures[iCV].getAttribute(\"displayName\"), iCV), self, measures[iCV].getAttribute(\"name\")).replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(\"settings\", \"\") + \"\\\" fld=\\\"\" + (iCV + addWhenFormula + self.colConditions.length) + \"\\\" numFmtId=\\\"\" + numFmt + \"\\\"/>\\n\"\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcolFormYaAgregada++;\r\n\t\t\t\t\tvar numFmt = 163\r\n\t\t\t\t\tif (measures[iCV].getAttribute('picture') != \"\") {\r\n\t\t\t\t\t\tnumFmt = 164 + iCV\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (self.formulaInfo.measureFormula[iCV].hasFormula) {\r\n\t\t\t\t\t\tif (measures[iCV].getAttribute(\"displayName\").indexOf(\"%\") > -1) {\r\n\t\t\t\t\t\t\tfor (var t = 0; t < iCV; t++) {\r\n\t\t\t\t\t\t\t\tspace = space + \" \";\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\txlpivotTable1 = xlpivotTable1 + \"<dataField name=\\\"\" + measures[iCV].getAttribute(\"displayName\").replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(\"settings\", \"\") + space + \" \\\" fld=\\\"\" + (iCV + self.columns.length + formMeasures.length) + \"\\\" numFmtId=\\\"\" + numFmt + \"\\\" baseField=\\\"0\\\" baseItem=\\\"0\\\"/>\\n\"\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t//get cantidad de mesaures de formulas\r\n\t\t\t\t\t\t\tvar cantMeasureForm = 0;\r\n\t\t\t\t\t\t\tvar cantNoMeasures = 0\r\n\t\t\t\t\t\t\tfor (var t = 0; t < self.formulaInfo.measureFormula.length; t++) {\r\n\t\t\t\t\t\t\t\tif (self.formulaInfo.measureFormula[t].hasFormula) {\r\n\t\t\t\t\t\t\t\t\tcantMeasureForm = cantMeasureForm + self.formulaInfo.measureFormula[t].relatedMeasures.length\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tcantNoMeasures++\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tvar lastPosition = cantMeasureForm + cantNoMeasures + self.columns.length + numColFormula//self.formulaInfo.measureFormula[iCV].relatedMeasures.length\r\n\t\t\t\t\t\t\tvar fld = lastPosition //self.formulaInfo.measureFormula[iCV].relatedMeasures[lastPosition-1]\r\n\t\t\t\t\t\t\txlpivotTable1 = xlpivotTable1 + \"<dataField name=\\\"\" + cleanDistinctValue(getMeasureTitle(measures[iCV].getAttribute(\"displayName\"), iCV), self, measures[iCV].getAttribute(\"name\")) + \" \\\" fld=\\\"\" + fld + \"\\\" numFmtId=\\\"\" + numFmt + \"\\\" baseField=\\\"0\\\" baseItem=\\\"0\\\"/>\\n\"\r\n\r\n\t\t\t\t\t\t\tnumColFormula++;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\txlpivotTable1 = xlpivotTable1 + \"</dataFields>\\n\"\r\n\t\t\t\t+ \"<pivotTableStyleInfo name=\\\"PivotStyleLight16\\\" showRowHeaders=\\\"1\\\" showColHeaders=\\\"1\\\" showRowStripes=\\\"0\\\" showColStripes=\\\"0\\\" showLastColumn=\\\"1\\\"/>\\n\"\r\n\t\t\t\t+ \"</pivotTableDefinition>\\n\"\r\n\r\n\r\n\t\t\t//xl/pivotCache/cacheRecords\r\n\t\t\tfor (var rN = 0; rN < dataToShow.length; rN++) {\r\n\t\t\t\tcacheRecords = cacheRecords + \"<r>\"\r\n\r\n\t\t\t\tfor (var col = 0; col < self.columns.length; col++) {\r\n\t\t\t\t\tvar vvalue = pfvi[col].indexOf(cleanDistinctValue(dataToShow[rN][col], self))\r\n\t\t\t\t\tcacheRecords = cacheRecords + '<x v=\"' + vvalue + '\"/>'\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor (var iCV = 0; iCV < measures.length; iCV++) {\r\n\t\t\t\t\tvar pos = self.columns.length + iCV;\r\n\r\n\t\t\t\t\tvar value = self.defaultPictureValue(dataToShow[rN][pos], (iCV == measures.length - 1), iCV)\r\n\t\t\t\t\tvalue = removeComas(value, self);\r\n\t\t\t\t\tvalue = cleanDistinctValue(value, self)\r\n\t\t\t\t\tcacheRecords = cacheRecords + '<n v=\\\"' + value + '\"/>';\r\n\r\n\t\t\t\t}\r\n\t\t\t\tcacheRecords = cacheRecords + \"</r>\"\r\n\t\t\t}\r\n\t\t\tcacheRecords = cacheRecords + '</pivotCacheRecords>';\r\n\r\n\r\n\t\t\t//xl/pivotCache/cacheDefinition\r\n\t\t\tcacheDefinition = cacheDefinition + '<worksheetSource ref=\"A1:' + letras[self.columns.length + measures.length - 1 - self.formulaInfo.cantFormulaMeasures + formMeasures.length] + (dataToShow.length + 1) + '\" sheet=\"SourceData\"/>\\n'\r\n\t\t\tcacheDefinition = cacheDefinition + '</cacheSource>\\n'\r\n\t\t\tcacheDefinition = cacheDefinition + '<cacheFields count=\"' + (self.columns.length + measures.length + formMeasures.length) + '\">\\n'\r\n\t\t\tif ((self.formulaInfo.cantFormulaMeasures == 0) && ( (self.rowConditions.length > 0) || (self.colConditions.length == 0))) {\r\n\t\t\t\tfor (var iCV = 0; iCV < measures.length; iCV++) {\r\n\t\t\t\t\tcacheDefinition = cacheDefinition + '<cacheField name=\"' + cleanDistinctValue(getMeasureTitle(measures[iCV].getAttribute(\"displayName\"), iCV), self, measures[iCV].getAttribute(\"name\")).replace(/\\</g, '&lt;').replace(/\\>/g, '&gt;').replace(\"settings\", \"\") + '\" numFmtId=\"0\">\\n'\r\n\t\t\t\t\tcacheDefinition = cacheDefinition + '<sharedItems/>\\n'\r\n\t\t\t\t\tcacheDefinition = cacheDefinition + '</cacheField>\\n'\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfor (var filter = 0; filter < self.filterIndexes.length; filter++) {\r\n\t\t\t\tvar col = self.filterIndexes[filter];\r\n\r\n\t\t\t\t//containmixed\r\n\t\t\t\tvar mixed = \"\";\r\n\t\t\t\tfor (var val = 0; val < self.GeneralDistinctValues[col].length; val++) {\r\n\t\t\t\t\tif (!isNaN(self.GeneralDistinctValues[col][val])) {\r\n\t\t\t\t\t\tmixed = ' containsMixedTypes=\"1\" containsString=\"1\" containsNumber=\"1\" containsInteger=\"1\" ';\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (mixed != \"\") {\r\n\t\t\t\t\tvar onlyNumber = true;\r\n\t\t\t\t\tfor (var val = 0; val < self.GeneralDistinctValues[col].length; val++) {\r\n\t\t\t\t\t\tif (isNaN(self.GeneralDistinctValues[col][val])) {\r\n\t\t\t\t\t\t\tonlyNumber = false;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (onlyNumber) {\r\n\t\t\t\t\t\tmixed = ' containsSemiMixedTypes=\"0\" containsString=\"0\" containsNumber=\"1\" containsInteger=\"1\" ';\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcacheDefinition = cacheDefinition + '<cacheField name=\"' + cleanDistinctValue(self.columns[col].getAttribute(\"displayName\"), self, self.columns[col].getAttribute(\"name\")) + '\" numFmtId=\"0\">\\n'\r\n\t\t\t\tcacheDefinition = cacheDefinition + '<sharedItems ' + mixed + ' count=\"' + self.GeneralDistinctValues[col].length + '\">\\n'\r\n\t\t\t\tfor (var val = 0; val < self.GeneralDistinctValues[col].length; val++) {\r\n\t\t\t\t\tif (!isNaN(self.GeneralDistinctValues[col][val])) {\r\n\t\t\t\t\t\tcacheDefinition = cacheDefinition + '<n v=\"' + cleanDistinctValue(self.GeneralDistinctValues[col][val], self) + '\"/>\\n';\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tcacheDefinition = cacheDefinition + '<s v=\"' + cleanDistinctValue(self.GeneralDistinctValues[col][val], self) + '\"/>\\n';\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tcacheDefinition = cacheDefinition + '</sharedItems>\\n'\r\n\t\t\t\tcacheDefinition = cacheDefinition + '</cacheField>\\n'\r\n\t\t\t}\r\n\r\n\t\t\tfor (var col = 0; col < self.columns.length; col++) {\r\n\t\t\t\tif (self.filterIndexes.indexOf(col) == -1) { //C-L\r\n\t\t\t\t\tcacheDefinition = cacheDefinition + '<cacheField name=\"' + cleanDistinctValue(self.columns[col].getAttribute(\"displayName\"), self, self.columns[col].getAttribute(\"name\")) + '\" numFmtId=\"0\">\\n'\r\n\t\t\t\t\tcacheDefinition = cacheDefinition + '<sharedItems count=\"' + self.conditions[col].distinctValues.length + '\">\\n'\r\n\t\t\t\t\tfor (var val = 0; val < self.conditions[col].distinctValues.length; val++) {\r\n\t\t\t\t\t\tcacheDefinition = cacheDefinition + '<s v=\"' + cleanDistinctValue(self.conditions[col].distinctValues[val], self)/*.replace(/\\</g,\"&lt;\").replace(/\\>/g,\"&gt;\")*//*self.conditions[col].distinctValues[val].replace(/\\&/g, \"&amp;\").replace(/\"/g, \"&quot;\")*/ + '\"/>\\n';\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcacheDefinition = cacheDefinition + '</sharedItems>\\n'\r\n\t\t\t\t\tcacheDefinition = cacheDefinition + '</cacheField>\\n'\r\n\t\t\t\t} \r\n\t\t\t}\r\n\r\n\t\t\tif (self.formulaInfo.cantFormulaMeasures > 0) {\r\n\t\t\t\tfor (var iCV = 0; iCV < measures.length; iCV++) {\r\n\t\t\t\t\tif (!self.formulaInfo.measureFormula[iCV].hasFormula) {  //normal measures\r\n\t\t\t\t\t\tcacheDefinition = cacheDefinition + '<cacheField name=\"' + cleanDistinctValue(getMeasureTitle(measures[iCV].getAttribute(\"displayName\"),iCV), self, measures[iCV].getAttribute(\"name\")) + '\" numFmtId=\"165\">\\n'\r\n\t\t\t\t\t\tcacheDefinition = cacheDefinition + '<sharedItems/>\\n'\r\n\t\t\t\t\t\tcacheDefinition = cacheDefinition + '</cacheField>\\n'\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor (var iCV = 0; iCV < formMeasures.length; iCV++) {//add hidden measures for formula\r\n\t\t\t\t\tcacheDefinition = cacheDefinition + '<cacheField name=\"' + getMeasureIdentifier(self, formMeasures[iCV]) + '\" numFmtId=\"0\">\\n' +\r\n\t\t\t\t\t\t'</cacheField>\\n'\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor (var iCV = 0; iCV < measures.length; iCV++) { //formula measures\r\n\t\t\t\t\tif (self.formulaInfo.measureFormula[iCV].hasFormula) {\r\n\t\t\t\t\t\tcacheDefinition = cacheDefinition + '<cacheField name=\"' + cleanDistinctValue(getMeasureTitle(measures[iCV].getAttribute(\"displayName\"),iCV), self, measures[iCV].getAttribute(\"name\")) + '\" numFmtId=\"165\" formula=\"' + self.formulaInfo.measureFormula[iCV].textFormula + '\" databaseField=\"0\"/>\\n'\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif ((self.formulaInfo.cantFormulaMeasures == 0) && ( (self.rowConditions.length == 0) && (self.colConditions.length > 0))) {\r\n\t\t\t\tfor (var iCV = 0; iCV < measures.length; iCV++) {\r\n\t\t\t\t\tcacheDefinition = cacheDefinition + '<cacheField name=\"' + cleanDistinctValue(getMeasureTitle(measures[iCV].getAttribute(\"displayName\"), iCV), self, measures[iCV].getAttribute(\"name\")).replace(/\\</g, '&lt;').replace(/\\>/g, '&gt;').replace(\"settings\", \"\") + '\" numFmtId=\"164\">\\n'\r\n\t\t\t\t\tcacheDefinition = cacheDefinition + '<sharedItems/>\\n'\r\n\t\t\t\t\tcacheDefinition = cacheDefinition + '</cacheField>\\n'\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tcacheDefinition = cacheDefinition + '</cacheFields>\\n'\r\n\t\t\tcacheDefinition = cacheDefinition + '</pivotCacheDefinition>\\n'\r\n\r\n\r\n\t\t\t//unicamente la seccion de las numberFormat\r\n\t\t\t//conversion a hacer letras P prefijas se cambian por \\P la primera por \\\\P las demas\r\n\t\t\t//Z se cambia por #\r\n\t\t\t//, y . quedan por , y .\r\n\t\t\t//9 se cambia por 0\r\n\r\n\t\t\tvar xlstyle = '<numFmts>'\r\n\t\t\tvar addNumberFormat = false\r\n\t\t\tfor (var mPos = 0; mPos < measures.length; mPos++) {\r\n\t\t\t\tif (measures[mPos].getAttribute('picture') != \"\") {\r\n\t\t\t\t\tvar pivotFormat = measures[mPos].getAttribute('picture')\r\n\t\t\t\t\tvar numFmt = 164 + mPos\r\n\r\n\t\t\t\t\tvar excelFormat = \"\"\r\n\t\t\t\t\tfor (var charFP = 0; charFP < pivotFormat.length; charFP++) {\r\n\t\t\t\t\t\tif (pivotFormat[charFP] == 'Z') {\r\n\t\t\t\t\t\t\texcelFormat = excelFormat + \"#\"\r\n\t\t\t\t\t\t} else if (pivotFormat[charFP] == '9') {\r\n\t\t\t\t\t\t\texcelFormat = excelFormat + \"0\"\r\n\t\t\t\t\t\t} else if ((pivotFormat[charFP] == '.') || (pivotFormat[charFP] == ',')) {\r\n\t\t\t\t\t\t\texcelFormat = excelFormat + pivotFormat[charFP]\r\n\t\t\t\t\t\t} else /*if ((charFP == 0))*/ {\r\n\t\t\t\t\t\t\texcelFormat = excelFormat + \"\\\\\" + pivotFormat[charFP]\r\n\t\t\t\t\t\t} \r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t//var excelFormat = \"###,###.00\"\r\n\t\t\t\t\t//xlstyle = xlstyle + '<numFmt formatCode=\"' + excelFormat + '\" numFmtId=\"' + numFmt + '\"/>'\r\n\t\t\t\t\txlstyle = xlstyle + '<numFmt formatCode=\"' + excelFormat + '\" numFmtId=\"' + numFmt + '\"/>'\r\n\t\t\t\t\taddNumberFormat = true\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (addNumberFormat) {\r\n\t\t\t\txlstyle = xlstyle + '</numFmts>'\r\n\t\t\t} else {\r\n\t\t\t\txlstyle = ''\r\n\t\t\t}\r\n\r\n\t\t\tsheet = xlsx({\r\n\t\t\t\tcreator: 'Genexus',\r\n\t\t\t\tlastModifiedBy: 'Genexus',\r\n\t\t\t\tpivot: true,\r\n\t\t\t\tpivotCacheDefinition: cacheDefinition,\r\n\t\t\t\tpivotTable1: xlpivotTable1,\r\n\t\t\t\tSheet2: \"\",//sheet2,\r\n\t\t\t\tstyle: xlstyle,\r\n\t\t\t\tworksheets: [{\r\n\t\t\t\t\tdata: dataTable,\r\n\t\t\t\t\tname: 'Sheet 1'\r\n\t\t\t\t}]\r\n\t\t\t});\r\n\r\n\r\n\t\t}\r\n\r\n\t\tif (OAT.isSafari() || (self.isSD)) { //for safari\r\n\t\t\twindow.location = sheet.href();\r\n\t\t} else {\r\n\r\n\t\t\tvar byteCharacters = atob(sheet.base64);\r\n\t\t\tfunction charCodeFromCharacter(c) {\r\n\t\t\t\treturn c.charCodeAt(0);\r\n\t\t\t}\r\n\r\n\t\t\tvar byteNumbers = Array.prototype.map.call(byteCharacters, charCodeFromCharacter);\r\n\t\t\tvar uint8Data = new Uint8Array(byteNumbers);\r\n\r\n\t\t\tvar blob = new Blob([uint8Data], { type: \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\" });\r\n\t\t\tsaveAs(blob, fileName + \".xlsx\");\r\n\t\t} \r\n\r\n\r\n\r\n\t}\r\n\r\n\r\n//FILE OAT.Dialog\r\n\r\n\r\n\r\n\tOAT.Dialog = function (i, d, c) {\r\n\t\tvar e = this, a = {\r\n\t\t\twidth: 0,\r\n\t\t\theight: 0,\r\n\t\t\tmodal: 0,\r\n\t\t\tonshow: function () {\r\n\t\t\t},\r\n\t\t\tonhide: function () {\r\n\t\t\t},\r\n\t\t\tzIndex: 1E3,\r\n\t\t\tbuttons: 1,\r\n\t\t\tresize: 1,\r\n\t\t\tclose: 1,\r\n\t\t\tautoEnter: 1,\r\n\t\t\timagePath: OAT.Preferences.imagePath\r\n\t\t};\r\n\t\tif (c)\r\n\t\t\tfor (var f in c)\r\n\t\t\t\ta[f] = c[f];\r\n\t\tvar b = new OAT.Window({\r\n\t\t\tclose: a.close,\r\n\t\t\tmax: 0,\r\n\t\t\tmin: 0,\r\n\t\t\twidth: a.width,\r\n\t\t\theight: a.height,\r\n\t\t\tx: 0,\r\n\t\t\ty: 0,\r\n\t\t\ttitle: i,\r\n\t\t\tresize: a.resize,\r\n\t\t\timagePath: a.imagePath\r\n\t\t});\r\n\t\tOAT.Dom.hide(b.div);\r\n\t\ttry {\r\n\t\t\tOAT.$(d).style.margin = \"10px\"\r\n\t\t} catch (k) {\r\n\t\t}\r\n\t\ti = OAT.Dom.create(\"table\", {\r\n\t\t\tmarginTop: \"1em\",\r\n\t\t\twidth: \"90%\",\r\n\t\t\ttextAlign: \"center\"\r\n\t\t});\r\n\t\tc = OAT.Dom.create(\"tbody\");\r\n\t\tf = OAT.Dom.create(\"tr\");\r\n\t\tvar j = OAT.Dom.create(\"td\", {\r\n\t\t\tborder: \"none\"\r\n\t\t}), g = OAT.Dom.create(\"input\");\r\n\t\tg.setAttribute(\"type\", \"button\");\r\n\t\tg.value = \" OK \";\r\n\t\tj.appendChild(g);\r\n\t\tvar h = OAT.Dom.create(\"input\", {\r\n\t\t\tmarginLeft: \"2em\"\r\n\t\t});\r\n\t\th.setAttribute(\"type\", \"button\");\r\n\t\th.value = \"Cancel\";\r\n\t\tj.appendChild(h);\r\n\t\tf.appendChild(j);\r\n\t\tc.appendChild(f);\r\n\t\ti.appendChild(c);\r\n\t\ta.buttons && OAT.$(d).appendChild(i);\r\n\t\tdocument.body.appendChild(b.div);\r\n\t\tb.content.appendChild(OAT.$(d));\r\n\t\tb.div.style.zIndex = a.zIndex;\r\n\t\ta.modal ? (this.show = function () {\r\n\t\t\tOAT.Dimmer.show(b.div, {});\r\n\t\t\tb.accomodate();\r\n\t\t\tOAT.Dom.center(b.div, 1, 1);\r\n\t\t\ta.onshow()\r\n\t\t}, this.hide = function () {\r\n\t\t\tOAT.Dimmer.hide();\r\n\t\t\ta.onhide()\r\n\t\t}) : (this.show = function () {\r\n\t\t\tOAT.Dom.show(b.div);\r\n\t\t\tb.accomodate();\r\n\t\t\tOAT.Dom.center(b.div, 1, 1);\r\n\t\t\ta.onshow()\r\n\t\t}, this.hide = function () {\r\n\t\t\tOAT.Dom.hide(b.div);\r\n\t\t\ta.onhide()\r\n\t\t});\r\n\t\tb.onclose = this.hide;\r\n\t\tthis.accomodate = b.accomodate;\r\n\t\tthis.ok = function () {\r\n\t\t};\r\n\t\tthis.cancel = function () {\r\n\t\t};\r\n\t\tthis.okBtn = g;\r\n\t\tthis.cancelBtn = h;\r\n\t\tOAT.Dom.attach(g, \"click\", function () {\r\n\t\t\te.ok()\r\n\t\t});\r\n\t\tOAT.Dom.attach(h, \"click\", function () {\r\n\t\t\te.cancel()\r\n\t\t});\r\n\t\td = function (a) {\r\n\t\t\tif (e.okBtn.getAttribute(\"disabled\") != \"disabled\") {\r\n\t\t\ta.keyCode == 13 && e.ok();\r\n\t\t\t\ta.keyCode == 27 && e.cancel()\r\n\t\t\t}\r\n\t\t};\r\n\t\ta.autoEnter && OAT.Dom.attach(b.div, \"keypress\", d)\r\n\t};\r\n\ttry {\r\n\t\tOAT.Loader.featureLoaded(\"dialog\");\r\n\t} catch (ERROR) {\r\n\r\n\t}\r\n\r\n\tOAT.Drag = {\r\n\t\tTYPE_X: 1, TYPE_Y: 2, TYPE_XY: 3, elm: !1, mouse_x: 0, mouse_y: 0,\r\n\t\tmove: function (b) {\r\n\t\t\tfunction d(a, b) { return Math.abs(a - b) <= o }\r\n\t\t\tif (OAT.Drag.elm) {\r\n\t\t\t\tOAT.Dom.removeSelection();\r\n\t\t\t\tvar e = OAT.Dom.getViewport(), a = OAT.Dom.position(OAT.Drag.elm);\r\n\t\t\t\tOAT.Dom.eventPos(b); OAT.Dom.getWH(OAT.Drag.elm);\r\n\t\t\t\tif (!(b.clientX > e[0] || 0 > b.clientX || b.clientY > e[1] || 0 > b.clientY)) {\r\n\t\t\t\t\tfor (var e = b.clientX - OAT.Drag.mouse_x, c = b.clientY - OAT.Drag.mouse_y, q = !0, j = OAT.Drag.elm._Drag_movers, h = 0; h < j.length; h++) { var a = j[h][0], i = j[h][1], a = OAT.Dom.getLT(a); i.restrictionFunction(a[0] + e, a[1] + c) && (q = !1) }\r\n\t\t\t\t\tfor (var k = !0, o = 10, h = 0; h < j.length; h++) {\r\n\t\t\t\t\t\tfor (var a = j[h][0], i = j[h][1], l = OAT.Dom.getWH(a), m = OAT.Dom.position(a), r = m[0] + e, m = m[1] + c, n = 0; n < i.magnetsH.length; n++) {\r\n\t\t\t\t\t\t\tvar g = OAT.$(i.magnetsH[n]), f = OAT.Dom.position(g), g = OAT.Dom.getWH(g);\r\n\t\t\t\t\t\t\tif (d(r, f[0])) { a.style.left = f[0] + \"px\"; k = !1; break }\r\n\t\t\t\t\t\t\tif (d(r + l[0], f[0])) { a.style.left = f[0] - l[0] + \"px\"; k = !1; break }\r\n\t\t\t\t\t\t\tif (d(r, f[0] + g[0])) { a.style.left = f[0] + g[0] + \"px\"; k = !1; break }\r\n\t\t\t\t\t\t\tif (d(r + l[0], f[0] + g[0])) { a.style.left = f[0] + g[0] - l[0] + \"px\"; k = !1; break }\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tfor (n = 0; n < i.magnetsV.length; n++) {\r\n\t\t\t\t\t\t\tg = OAT.$(i.magnetsV[n]); f = OAT.Dom.position(g);\r\n\t\t\t\t\t\t\tg = OAT.Dom.getWH(g);\r\n\t\t\t\t\t\t\tif (d(m, f[1])) { a.style.top = f[1] + \"px\"; k = !1; break }\r\n\t\t\t\t\t\t\tif (d(m + l[1], f[1])) { a.style.top = f[1] - l[1] + \"px\"; k = !1; break } if (d(m, f[1] + g[1])) { a.style.top = f[1] + g[1] + \"px\"; k = !1; break }\r\n\t\t\t\t\t\t\tif (d(m + l[1], f[1] + g[1])) { a.style.top = f[1] + g[1] - l[1] + \"px\"; k = !1; break }\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} if (q && k) {\r\n\t\t\t\t\t\tfor (h = 0; h < j.length; h++)if (a = j[h][0], i = j[h][1], i.moveFunction) i.moveFunction(e, c); else switch (i.type) {\r\n\t\t\t\t\t\t\tcase OAT.Drag.TYPE_X: OAT.Dom.moveBy(a, e, 0); break; case OAT.Drag.TYPE_Y: OAT.Dom.moveBy(a, 0, c); break; case OAT.Drag.TYPE_XY: OAT.Dom.moveBy(a,\r\n\t\t\t\t\t\t\t\te, c)\r\n\t\t\t\t\t\t}OAT.Drag.mouse_x = b.clientX; OAT.Drag.mouse_y = b.clientY\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}, up: function () { if (OAT.Drag.elm) { for (var b = OAT.Drag.elm._Drag_movers, d = 0; d < b.length; d++)b[d][1].endFunction(b[d][0]); OAT.Drag.elm = !1 } }, create: function (b, d, e) {\r\n\t\t\tvar a = { type: OAT.Drag.TYPE_XY, restrictionFunction: function () { return !1 }, endFunction: function () { }, moveFunction: !1, magnetsH: [], magnetsV: [], cursor: !0 }; if (e) for (p in e) a[p] = e[p]; var c = OAT.$(b), b = OAT.$(d), d = function (a) { OAT.Drag.initiate(a, c) }; c._Drag_movers || (OAT.Dom.attach(c, \"mousedown\", d), c._Drag_movers =\r\n\t\t\t\t[], c._Drag_cursor = c.style.cursor); a.cursor && (c.style.cursor = \"move\"); c._Drag_movers.push([b, a])\r\n\t\t}, initiate: function (b, d) { OAT.Drag.elm = d; OAT.Drag.mouse_x = b.clientX; OAT.Drag.mouse_y = b.clientY }, remove: function (b, d) { var e = OAT.$(b); OAT.$(d); if (e._Drag_movers) { for (var a = -1, c = 0; c < e._Drag_movers.length; c++)e._Drag_movers[c][0] == d && (a = c); -1 != a && e._Drag_movers.splice(a, 1) } }, removeAll: function (b) { b = OAT.$(b); b._Drag_movers && (b._Drag_movers = [], b.style.cursor = b._Drag_cursor) }, createDefault: function (b, d) {\r\n\t\t\tif (OAT.Preferences.allowDefaultDrag) {\r\n\t\t\t\tvar e =\r\n\t\t\t\t\tOAT.$(b), a = OAT.Dom.create(\"div\", { position: \"absolute\", width: \"21px\", height: \"21px\"}), c = OAT.Dom.getLT(e); a.style.left = c[0] - 21 + \"px\"; a.style.top = c[1] - 21 + \"px\"; if (d) {\r\n\t\t\t\t\t\te.parentNode.appendChild(a); c = function (a, b) { var c = OAT.Dom.getWH(e), d = OAT.Dom.getWH(e.parentNode), o = a + c[0], c = b + c[1]; return 20 > a || 20 > b || o > d[0] || c > d[1] }; OAT.Drag.create(a, a); OAT.Drag.create(a, e, { restrictionFunction: c }); OAT.Dom.hide(a); var q = function () { a._Drag_pending && OAT.Dom.hide(a) }; OAT.Dom.attach(e,\r\n\t\t\t\t\t\t\t\"mouseover\", function () { OAT.Dom.show(a); a._Drag_pending = 0 }); OAT.Dom.attach(e, \"mouseout\", function () { a._Drag_pending = 1; setTimeout(q, 3E3) })\r\n\t\t\t\t\t} else c = function (a, b) { var c = OAT.Dom.getWH(e), d = OAT.Dom.getWH(e.parentNode), o = a + c[0], c = b + c[1]; return 0 > a || 0 > b || o > d[0] || c > d[1] }, OAT.Drag.create(e, e, { restrictionFunction: c })\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tif(typeof document != \"undefined\"){\r\n\t OAT.Dom.attach(document, \"mousemove\", OAT.Drag.move); \r\n\t OAT.Dom.attach(document, \"mouseup\", OAT.Drag.up); \r\n\t}\r\n\ttry {\r\n\t\tOAT.Loader.featureLoaded(\"drag\");\r\n\t} catch (ERROR) {\r\n\r\n\t}\r\n\r\n\r\n\tOAT.GhostDragData = {\r\n\t\tlock: !1,\r\n\t\tup: function (a) {\r\n\t\t\tif (OAT.GhostDragData.lock) {\r\n\t\t\t\tvar b = OAT.GhostDragData.lock, c = b.object;\r\n\t\t\t\tif (c.pending)\r\n\t\t\t\t\tc.pending = 0, OAT.GhostDragData.lock = !1;\r\n\t\t\t\telse {\r\n\t\t\t\t\tOAT.GhostDragData.lock = !1;\r\n\t\t\t\t\tfor (var d = OAT.Dom.eventPos(a), a = d[0], d = d[1], e = 0, f = 0; f < c.targets.length; f++) {\r\n\t\t\t\t\t\tvar g = c.targets[f], h = g[1] ? g[1](a, d) : OAT.GhostDragData.pos(g[0], a, d);\r\n\t\t\t\t\t\t!e && h && (e = 1, c.callback(g[0], a, d))\r\n\t\t\t\t\t}\r\n\t\t\t\t\te ? (OAT.Dom.unlink(b), OAT.MSG.send(c, OAT.MSG.GD_END, b)) : (OAT.MSG.send(c, OAT.MSG.GD_ABORT, b), c.onFail(), c = OAT.Dom.position(c.originalElement),\r\n\t\t\t\t\t\ta = c[0], d = c[1], c = new OAT.AnimationPosition(b, { speed: 10, delay: 10, left: a, top: d }), OAT.MSG.attach(c.animation, OAT.MSG.ANIMATION_STOP, function () { OAT.Dom.unlink(b) }), c.start())\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tmove: function (a) {\r\n\t\t\tif (OAT.GhostDragData.lock) {/*OAT.Dom.prevent(a);*/var b = OAT.GhostDragData.lock, c = b.object; c.pending && (document.body.appendChild(b), b.style.zIndex = 2E3,\r\n\t\t\t\tc.process && c.process(b),\r\n\t\t\t\tc.pending = 0, OAT.MSG.send(c, OAT.MSG.GD_START, b)); OAT.Dom.removeSelection(); var d = a.clientX - b.mouse_x, c = a.clientY - b.mouse_y, d = parseInt(OAT.Dom.style(b,\r\n\t\t\t\t\t\"left\")) + d, c = parseInt(OAT.Dom.style(b, \"top\")) + c; b.style.left = d + \"px\"; b.style.top = c + \"px\"; b.mouse_x = a.clientX; b.mouse_y = a.clientY\r\n\t\t\t}\r\n\t\t}, pos: function (a, b, c) { if (!a || \"none\" == a.style.display.toLowerCase()) return 0; var d = OAT.Dom.position(a), e = d[0] - 2, d = d[1] - 2, f = parseInt(a.offsetWidth) + 2, a = parseInt(a.offsetHeight) + 2; return b >= e && b <= e + f && c >= d && c <= d + a }\r\n\t};\r\n\tOAT.GhostDrag = function () {\r\n\t\tvar a = this;\r\n\t\tthis.onFail = function () { };\r\n\t\tthis.sources = [];\r\n\t\tthis.processes = [];\r\n\t\tthis.callbacks = [];\r\n\t\tthis.targets = [];\r\n\t\tthis.pending = 0;\r\n\t\tthis.addSource = function (b, c, d) {\r\n\t\t\tvar e = OAT.$(b);\r\n\t\t\ta.sources.push(e);\r\n\t\t\ta.processes.push(c);\r\n\t\t\ta.callbacks.push(d);\r\n\t\t\tOAT.Dom.attach(e, \"mousedown\",\r\n\t\t\t\tfunction (b) {\r\n\t\t\t\t\tOAT.Dom.prevent(b);\r\n\t\t\t\t\tvar c = a.sources.indexOf(e);\r\n\t\t\t\t\t-1 != c && a.startDrag(a.sources[c], a.processes[c], a.callbacks[c], b.clientX, b.clientY);\r\n\r\n\t\t\t\t}\r\n\t\t\t)\r\n\t\t};\r\n\t\tthis.delSource = function (b) { b = $(b); b = a.sources.indexOf(b); -1 != b && (a.sources.splice(b, 1), a.processes.splice(b, 1), a.callbacks.splice(b, 1)) };\r\n\t\tthis.clearSources = function () { a.sources = []; a.processes = []; a.callbacks = [] };\r\n\t\tthis.addTarget = function (b, c, d) { b = [OAT.$(b), c, d]; a.targets.length && a.targets[a.targets.length - 1][2] ? a.targets.splice(a.targets.length - 1, 0, b) : a.targets.push(b) };\r\n\t\tthis.delTarget = function (b) { for (var b = OAT.$(b), c = -1, d = 0; d < a.targets.length; d++)a.targets[d][0] == b && (c = d); -1 != c && a.targets.splice(c, 1) };\r\n\t\tthis.clearTargets = function () { a.targets = [] };\r\n\t\tthis.startDrag = function (b, c, d, e, f) { OAT.GhostDragData.lock || (a.pending = 1, a.originalElement = b, a.callback = d, d = OAT.Dom.create(\"div\", { position: \"absolute\" }), a.process = c, c = OAT.Dom.position(b), d.style.left = c[0] + \"px\", d.style.top = c[1] + \"px\", OAT.Style.opacity(d, 0.5), d.appendChild(b.cloneNode(!0)), d.mouse_x = e, d.mouse_y = f, d.object = a, OAT.GhostDragData.lock = d) }\r\n\t};\r\n\tif(typeof document != \"undefined\"){\r\n\tOAT.Dom.attach(document, \"mousemove\", OAT.GhostDragData.move);\r\n\tOAT.Dom.attach(document, \"mouseup\", OAT.GhostDragData.up);\r\n\t};\r\n\ttry {\r\n\t\tOAT.Loader.featureLoaded(\"ghostdrag\");\r\n\t} catch (ERROR) {\r\n\r\n\t}\r\n\r\n\tOAT.Instant = function (d, c) {\r\n\t\tvar a = this;\r\n\t\tthis.options = {\r\n\t\t\tshowCallback: !1,\r\n\t\t\thideCallback: !1\r\n\t\t};\r\n\t\tfor (var e in c)\r\n\t\t\ta.options[e] = c[e];\r\n\t\tthis.state = 1;\r\n\t\tthis.elm = OAT.$(d);\r\n\t\tthis.handles = [];\r\n\t\tthis.hide = function () {\r\n\t\t\ta.state = 0;\r\n\t\t\tOAT.Dom.hide(a.elm)\r\n\t\t};\r\n\t\tthis.show = function () {\r\n\t\t\ta.options.showCallback && a.options.showCallback();\r\n\t\t\tOAT.Dom.show(a.elm);\r\n\t\t\ta.state = 1\r\n\t\t};\r\n\t\tthis.check = function (b) {\r\n\t\t\ta.state && (b = OAT.Event.source(b), b == a.elm || OAT.Dom.isChild(b, a.elm) || (a.options.hideCallback && a.options.hideCallback(), a.hide()))\r\n\t\t};\r\n\t\tthis.createHandle = function (b) {\r\n\t\t\tvar c = OAT.$(b);\r\n\t\t\ta.handles.push(c);\r\n\t\t\tOAT.Event.attach(c, \"mousedown\", function (b) {\r\n\t\t\t-1 != a.handles.indexOf(c) && !a.state && (OAT.Event.cancel(b), a.show())\r\n\t\t\t})\r\n\t\t};\r\n\t\tthis.removeHandle = function (b) {\r\n\t\t\tb = OAT.$(b);\r\n\t\t\tb = a.handles.indexOf(b);\r\n\t\t\t-1 != b && a.handles.splice(b, 1)\r\n\t\t};\r\n\t\ta.elm._Instant_show = a.show;\r\n\t\ta.elm._Instant_hide = a.hide;\r\n\t\ta.hide();\r\n\t\tOAT.Dom.attach(document, \"mousedown\", a.check)\r\n\t};\r\n\tOAT.Instant.assign = function (d, c) {\r\n\t\tnew OAT.Instant(d, {\r\n\t\t\thideCallback: c\r\n\t\t})\r\n\t};\r\n\ttry {\r\n\t\tOAT.Loader.featureLoaded(\"instant\");\r\n\t} catch (ERROR) {\r\n\r\n\t}\r\n\t\r\n\t\r\n\t//FILE oat_grid -----------------------------------------------------------------------------------------------------------------------------------------------\r\n\r\n\r\n\r\n\r\n\tOAT.GridData = {\r\n\t\tindex: 0,        /* column in action */\r\n\t\tLIMIT: 15,       /* minimum width */\r\n\t\tALIGN_CENTER: 1,\r\n\t\tALIGN_START: 2,\r\n\t\tALIGN_END: 3,\r\n\t\tALIGN_RIGHT: 4,\r\n\t\tSORT_NONE: 1,\r\n\t\tSORT_ASC: 2,\r\n\t\tSORT_DESC: 3,\r\n\t\tTYPE_STRING: 1,\r\n\t\tTYPE_NUMERIC: 2,\r\n\t\tTYPE_AUTO: 3\r\n\t} /* GridData */\r\n\r\n\tOAT.Grid = function (element, controlName, query, columnsDataType, colms, QueryViewerCollection,\r\n\t\tpageSize, disableColumnSort, UcId, IdForQueryViewerCollection, rememberLayout, serverPaging, HideDataFilds, OrderFildsHidden, TableDataFilds, relativePath, selection, GridTitle, translations) {\r\n\t\tvar self = this;\r\n\t\tself.controlName = controlName;\r\n\t\tself.columnsDataType = columnsDataType;\r\n\t\tself.query = query;\r\n\t\tself.rowsPerPage = \"\";\r\n\t\tself.columns = colms;\r\n\t\tself.QueryViewerCollection = QueryViewerCollection;\r\n\t\tself.InitPageSize = pageSize;\r\n\t\tself.disableColumnSort = disableColumnSort\r\n\t\tself.UcId = UcId;\r\n\t\tself.IdForQueryViewerCollection = IdForQueryViewerCollection;\r\n\t\tself.rememberLayout = rememberLayout;\r\n\t\tself.serverPaging = serverPaging;\r\n\t\tself.HideDataFilds = HideDataFilds;\r\n\t\tself.OrderFildsHidden = OrderFildsHidden;\r\n\t\tself.TableDataFilds = TableDataFilds;\r\n\t\tself.relativePath = relativePath;\r\n\t\tself.selection = selection;\r\n\t\tself.translations = translations\r\n\t\tself.isSD = OAT.isSD() \r\n\r\n\t\tself.conditions = new Array(columnsDataType.length);\r\n\t\tfor (iC = 0; iC < columnsDataType.length; iC++) {\r\n\t\t\tself.conditions[iC] = {\r\n\t\t\t\tblackList: [],\r\n\t\t\t\tsort: 1\r\n\t\t\t};\r\n\t\t};\r\n\r\n\t\tthis.init = function () {\r\n\r\n\t\t\tvar topDiv;\r\n\r\n\t\t\tif ((jQuery(\"#\" + self.controlName + \"_grid_top_div\").length == 0)\r\n\t\t\t\t|| (self.QueryViewerCollection[self.IdForQueryViewerCollection]._ControlRenderedTo == undefined)) {\r\n\t\t\t\tvar divContainer = OAT.$(element);\r\n\t\t\t\tself.ContainerName = divContainer.getAttribute(\"id\")\r\n\t\t\t\tOAT.Dom.clear(divContainer);\r\n\r\n\t\t\t\tvar divIeContainer = document.createElement(\"div\");\r\n\t\t\t\tdivIeContainer.setAttribute(\"class\", \"divIeContainer\");\r\n\t\t\t\tdivIeContainer.setAttribute(\"style\", \"position: relative;opacity: 0\");\r\n\t\t\t\tdivContainer.appendChild(divIeContainer);\r\n\t\t\t\tself.div = divIeContainer;\r\n\r\n\r\n\t\t\t\ttopDiv = OAT.Dom.create(\"div\");\r\n\r\n\t\t\t\tif (self.isSD) { //android\r\n\t\t\t\t\ttopDiv.setAttribute(\"class\", \"oatgrid_top_div oatgrid_top_div_small\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttopDiv.setAttribute(\"class\", \"oatgrid_top_div\");\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (GridTitle) {\r\n\t\t\t\t\tOAT.addTextNode(topDiv, \" \" + GridTitle)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tOAT.addTextNode(topDiv, \"\")\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\ttopDiv.setAttribute(\"id\", self.controlName + \"_grid_top_div\");\r\n\t\t\t\tvar hide = OAT.Dom.create(\"a\");\r\n\t\t\t\thide.href = \"#\";\r\n\r\n\t\t\t\tOAT.addTextNode(hide, document.createTextNode(\"GXPL_QViewerJSVisibleColumns\"))\r\n\r\n\t\t\t\tself.div.appendChild(topDiv);\r\n\r\n\t\t\t\tOAT.Dom.makePosition(self.div);\r\n\t\t\t\tself.html = OAT.Dom.create(\"table\");\r\n\t\t\t\tOAT.Dom.addClass(self.html, \"oatgrid\");\r\n\t\t\t\tOAT.Dom.setIdPropertyValue(self.html, self.controlName);\r\n\t\t\t\tself.header = new OAT.GridHeader(self);\r\n\r\n\t\t\t\tself.rows = [];\r\n\t\t\t\tself.rowBlock = OAT.Dom.create(\"tbody\");\r\n\t\t\t\tOAT.Dom.append([self.div, self.html], [self.html, self.header.html, self.rowBlock]);\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tvar divContainer = OAT.$(element);\r\n\t\t\t\tself.ContainerName = divContainer.getAttribute(\"id\")\r\n\r\n\t\t\t\tself.div = jQuery(\"#\" + self.ContainerName).find(\".divIeContainer\")[0]\r\n\r\n\t\t\t\ttopDiv = jQuery(\"#\" + self.ContainerName).find(\".oatgrid_top_div\")[0]\r\n\t\t\t\tOAT.Dom.clear(topDiv);\r\n\t\t\t\tif (GridTitle) {\r\n\t\t\t\t\tOAT.addTextNode(topDiv, \" \" + GridTitle)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tOAT.addTextNode(topDiv, \"\")\r\n\t\t\t\t}\r\n\r\n\t\t\t\tself.html = jQuery(\"#\" + self.ContainerName).find(\"table\")[0]\r\n\r\n\t\t\t\tvar previousThead = jQuery(\"#\" + self.ContainerName).find(\"thead\")[0]\r\n\t\t\t\tOAT.Dom.clear(previousThead);\r\n\t\t\t\tself.header = new OAT.GridHeader(self, previousThead);\r\n\r\n\t\t\t\tself.rows = [];\r\n\t\t\t\tself.rowBlock = jQuery(\"#\" + self.ContainerName).find(\"tbody\")[0]\r\n\t\t\t\tOAT.Dom.clear(self.rowBlock);\r\n\t\t\t}\r\n\r\n\r\n\r\n\t\t\t//draw export image and pop up of export options\r\n\t\t\tvar exportImg = OAT.Dom.create(\"div\");\r\n\t\t\texportImg.href = \"#\";\r\n\t\t\tif (self.isSD) { //android\r\n\t\t\t\texportImg.setAttribute(\"class\", \"exportOptionsAnchor exportOptionsAnchor_small\");\r\n\t\t\t} else {\r\n\t\t\t\texportImg.setAttribute(\"class\", \"exportOptionsAnchor\");\r\n\t\t\t}\r\n\t\t\tself.exportPage = OAT.Dom.create(\"div\", { padding: \"0px\" });\r\n\t\t\tOAT.addImageNode(exportImg, \"menu\", \"\")\r\n\r\n\t\t\tvar checkToClose = function (b) {\r\n\t\t\t\tOAT.Dom.source = OAT.Event.source(b);\r\n\t\t\t\tvar clean = false;\r\n\t\t\t\tvar closing = false;\r\n\t\t\t\tvar isInside = false\r\n\t\t\t\tfor (var i = 0; i < jQuery(\".oat_winrect_container\").length; i++) {\r\n\t\t\t\t\tvar obj = jQuery(\".oat_winrect_container\")[i];\r\n\t\t\t\t\tif (!(OAT.Dom.source == obj) && !OAT.Dom.isChild(OAT.Dom.source, obj)) {\r\n\t\t\t\t\t\tclean = true;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tclean = false; isInside = true; break;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tfor (var i = 0; i < jQuery(\".oat_winrect_container\").length; i++) {\r\n\t\t\t\t\tif (jQuery(\".oat_winrect_container\")[i].style.display != \"none\") {\r\n\t\t\t\t\t\tclosing = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (((source.getAttribute(\"class\") == \"oat_winrect_close_b\") || (!OAT.Dom.isChild(source, obj))) &&\r\n\t\t\t\t\t(closing)) {\r\n\t\t\t\t\tself.oat_component.resetAllScrollValue(self.UcId);\r\n\t\t\t\t}\r\n\t\t\t\tif (clean) {\r\n\t\t\t\t\tjQuery(\".oat_winrect_container\").css({ display: \"none\" });\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tOAT.Dom.attach(document, \"mousedown\", checkToClose)\r\n\r\n\t\t\tOAT.Anchor.assign(exportImg, {\r\n\t\t\t\ttitle: \" \",\r\n\t\t\t\tcontent: self.exportPage,\r\n\t\t\t\tresult_control: false,\r\n\t\t\t\tactivation: \"click\",\r\n\t\t\t\ttype: OAT.WinData.TYPE_RECT,\r\n\t\t\t\twidth: \"auto\",\r\n\t\t\t\tcontainerQuery: self.QueryViewerCollection[IdForQueryViewerCollection].ControlName + \"-table\" + \" ExportPopup \"\r\n\t\t\t\t\r\n\t\t\t});\r\n\r\n\t\t\tvar generatePair = function (index) {\r\n\t\t\t\t\r\n\t\t\t\tif (OAT_JS.grid.gridData[self.UcId].rowsMetadata.columns[index].getAttribute(\"visible\") != \"Never\"){\t\r\n\t\t\t\t\r\n\t\t\t\t\tvar state = (self.header.cells[index].html.style.display != \"none\");\r\n\t\t\t\t\tvar pair = OAT.Dom.create(\"div\");\r\n\t\t\t\t\tvar check_class = (state) ? \"check_item_img\" : \"uncheck_item_img\";\r\n\t\t\t\t\tif (self.isSD) {//android\r\n\t\t\t\t\t\tcheck_class = (state) ? \"check_item_img_small\" : \"uncheck_item_img_small\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\tOAT.addImageNode(pair, state ? \"check_box\" : \"check_box_outline_blank\", \"\");\r\n\t\t\t\t\tpair.setAttribute(\"class\", check_class);\r\n\t\t\t\t\tvar span = OAT.Dom.create(\"span\");\r\n\r\n\t\t\t\t\tOAT.addTextNode(span, \" \" + self.header.cells[index].value.textContent.replace(\"settings\",\"\"))\r\n\t\t\t\t\tpair.appendChild(span);\r\n\t\t\t\t\tOAT.Event.attach(pair, \"click\", function () { // this hide or show the columns\r\n\t\t\t\t\t\tvar checkedClass = \"check_item_img\"\r\n\t\t\t\t\t\tvar unCheckedClass = \"uncheck_item_img\"\r\n\t\t\t\t\t\tif (self.isSD) {//android\r\n\t\t\t\t\t\t\tcheckedClass = \"check_item_img_small\"\r\n\t\t\t\t\t\t\tunCheckedClass = \"uncheck_item_img_small\"\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvar newClass = (this.getAttribute(\"class\") === checkedClass) ? unCheckedClass : checkedClass;\r\n\t\t\t\t\t\tthis.setAttribute(\"class\", newClass);\r\n\t\t\t\t\t\r\n\t\t\t\t\t\tjQuery(this).find(\"i\")[0].textContent = (this.getAttribute(\"class\") === checkedClass) ? \"check_box\" : \"check_box_outline_blank\";\r\n\r\n\t\t\t\t\t\tvar newdisp = (self.header.cells[index].html.style.display == \"none\" ? \"\" : \"none\");\r\n\t\t\t\t\t\tself.header.cells[index].html.style.display = newdisp;\r\n\t\t\t\t\t\tvar numCol = index;//self.columnsDataType.length - 1 - index;\r\n\r\n\t\t\t\t\t\tfor (var i = 0; i < self.rows.length; i++) {\r\n\t\t\t\t\t\t\tself.rows[i].cells[numCol].html.style.display = newdisp;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t\tOAT_JS.grid.setColumnVisibleValue(self.UcId, numCol, (newdisp == \"\"))\r\n\t\t\t\t\r\n\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn pair;\r\n\t\t\t\t\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar clickRef = function (event) {\r\n\t\t\t\tvar coords = OAT.Event.position(event);\r\n\t\t\t\tself.exportPage.style.left = coords[0] + \"px\";\r\n\t\t\t\tself.exportPage.style.top = coords[1] + \"px\";\r\n\t\t\t\tself.exportPage.id = \"exportOptionsContainer\";\r\n\t\t\t\tif (OAT.isIE()) {\r\n\t\t\t\t\tself.exportPage.id = \"exportOptionsContainerGrid\";\r\n\t\t\t\t\tself.exportPage.className = \"export_option_container\"\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\tvar screenWidth = window.innerWidth;\r\n\t\t\t\tvar initialPopUpWidth = Math.max(jQuery(\".ExportPopup\")[0].clientWidth, 300)\r\n\t\t\t\tvar offsetLeft = jQuery(event.currentTarget).offset().left\r\n\r\n\t\t\t\tvar iconExport = event.currentTarget\r\n\r\n\t\t\t\tjQuery(\".ExportPopup\").css({ left: -2500 + \"px\", top: 0 + \"px\" })\r\n\r\n\t\t\t\t//title\r\n\t\t\t\tjQuery(\".oat_winrect_title\").find(\".winrect_title_label\").remove()\r\n\r\n\t\t\t\tvar spantitle = OAT.Dom.create(\"label\");\r\n\t\t\t\tif (self.isSD) {\r\n\t\t\t\t\tjQuery(\".oat_winrect_container\").addClass(\"oat_winrect_container_small\")\r\n\t\t\t\t\tspantitle.setAttribute(\"class\", \"winrect_title_label winrect_title_label_small\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tspantitle.setAttribute(\"class\", \"winrect_title_label\");\r\n\t\t\t\t}\r\n\t\t\t\tOAT.addTextNode(spantitle,  self.translations.GXPL_QViewerPopupTitle); //gx.getMessage(\"GXPL_QViewerPopupTitle\"));\r\n\t\t\t\tjQuery(\".oat_winrect_title\").append(spantitle)\r\n\r\n\t\t\t\tOAT.Dom.clear(self.exportPage);\r\n\t\t\t\t//botton to allow show all filters in pop up\r\n\t\t\t\tvar someExport = false;\r\n\t\t\t\tvar div_upper = document.createElement(\"div\");\r\n\t\t\t\tdiv_upper.setAttribute(\"class\", \"upper_container\");\r\n\r\n\t\t\t\tjQuery('#divtoxml').remove();\r\n\t\t\t\tjQuery('#divtoxls').remove();\r\n\t\t\t\tjQuery('#divtoxlsx').remove();\r\n\t\t\t\tjQuery('#divtoexport').remove();\r\n\t\t\t\tjQuery('#divtohtml').remove();\r\n\t\t\t\tsomeExport = self.appendExportToXmlOption(div_upper, someExport);\r\n\t\t\t\tsomeExport = self.appendExportToHtmlOption(div_upper, someExport);\r\n\t\t\t\tsomeExport = self.appendExportToPdfOption(div_upper, someExport);\r\n\t\t\t\tsomeExport = self.appendExportToExcelOption(div_upper, someExport);\r\n\t\t\t\tsomeExport = self.appendExportToExcel2010Option(div_upper, someExport);\r\n\r\n\t\t\t\tself.exportPage.appendChild(div_upper);\r\n\r\n\r\n\t\t\t\tif (someExport) {\r\n\t\t\t\t\tvar hr = OAT.Dom.create(\"hr\", {});\r\n\t\t\t\t\tself.exportPage.appendChild(hr);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar div_down = document.createElement(\"div\");\r\n\t\t\t\tdiv_down.setAttribute(\"class\", \"down_container\");\r\n\t\t\t\tself.exportPage.appendChild(div_down);\r\n\r\n\t\t\t\tvar label = document.createElement(\"span\");\r\n\t\t\t\tlabel.textContent = self.translations.GXPL_QViewerJSVisibleColumns;//gx.getMessage(\"GXPL_QViewerJSVisibleColumns\");\r\n\t\t\t\tvar div_label = document.createElement(\"div\");\r\n\t\t\t\tdiv_label.setAttribute(\"class\", \"div_label_win\");\r\n\t\t\t\tdiv_label.appendChild(label);\r\n\t\t\t\tdiv_down.appendChild(div_label);\r\n\r\n\r\n\t\t\t\tfor (var c = 0; c < self.columns.length; c++) {\r\n\t\t\t\t\tfor (var i = 0; i < self.header.cells.length; i++) {\r\n\t\t\t\t\t\tif (self.header.cells[i].dataField == self.columns[c].getAttribute(\"dataField\")){ \r\n\t\t\t\t\t\t\tvar pair = generatePair(i);\r\n\t\t\t\t\t\t\tif (pair)\r\n\t\t\t\t\t\t\t\tdiv_down.appendChild(pair);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\r\n\r\n\t\t\t\tsetTimeout(function () {\r\n\r\n\t\t\t\t\tvar screenWidth = window.innerWidth;\r\n\t\t\t\t\tvar initialPopUpWidth = jQuery(\".ExportPopup\")[0].clientWidth\r\n\r\n\r\n\t\t\t\t\tif (initialPopUpWidth == 0) {\r\n\t\t\t\t\t\tvar last = jQuery(\".ExportPopup\").length;\r\n\t\t\t\t\t\tinitialPopUpWidth = jQuery(\".ExportPopup\")[last - 1].clientWidth\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (self.isSD) {//android\r\n\t\t\t\t\t\tif (initialPopUpWidth < 235) {\r\n\t\t\t\t\t\t\tinitialPopUpWidth = 235\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvar padding = (screenWidth - initialPopUpWidth) / 2 + jQuery(window).scrollLeft()\r\n\r\n\t\t\t\t\t\tjQuery(\".ExportPopup\").css({ left: padding + \"px\", top: jQuery(iconExport).offset().top + \"px\", width: initialPopUpWidth + \"px\" })\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tvar offsetLeft = jQuery(iconExport).offset().left\r\n\r\n\t\t\t\t\t\tif (offsetLeft + initialPopUpWidth + 15 < screenWidth) {\r\n\t\t\t\t\t\t\tjQuery(\".ExportPopup\").css({ left: jQuery(iconExport).offset().left + \"px\", top: jQuery(iconExport).offset().top + \"px\" })\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tjQuery(\".ExportPopup\").css({ left: (offsetLeft - initialPopUpWidth + 16) + \"px\", top: jQuery(iconExport).offset().top + \"px\" })\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}, 50)\r\n\t\t\t}\r\n\r\n\t\t\tOAT.Event.attach(exportImg, \"click\", clickRef);\r\n\t\t\ttopDiv.appendChild(exportImg);\r\n\r\n\t\t}\r\n\t\t\r\n\t\tthis.setPageDataForTable = function(resXML) {\r\n\t\t\tswitch(self.oat_component.lastCallToQueryViewer) {\r\n\t\t\t\tcase \"getDataForTable\":\r\n\t\t\t\t\tif (self.oat_component.lastCallData.PageNumber == 0) { self.oat_component.lastCallData.PageNumber = 1, self.oat_component.lastCallData.RecalculateCantPages = false; }\r\n\t\t\t\t\tOAT_JS.grid.redraw(self.oat_component.lastCallData.self, self.oat_component.lastCallData.UcId, resXML, self.oat_component.lastCallData.RecalculateCantPages, self.oat_component.lastCallData.DataFieldOrder != \"\", self.oat_component.lastCallData.PageNumber, self.oat_component.lastCallData.fromExternalRefresh)\r\n\t\t\t\tbreak;\r\n\t\t\t\tcase \"getAllDataRowsForExport\":\r\n\t\t\t\t\tvar dataString = resXML;\r\n\t\t\t\t\tvar stringRecord = dataString.split(\"<Record>\");\r\n\t\t\t\t\tvar data = [];\r\n\t\t\t\t\tvar UcId = self.oat_component.lastCallData.UcId\r\n\t\t\t\t\tvar fileName = self.oat_component.lastCallData.fileName\r\n\t\t\t\t\tvar _selfgrid = self.oat_component.lastCallData._selfgrid\r\n\t\t\t\t\tvar format = self.oat_component.lastCallData.format\r\n\t\t\t\t\tfor (var i = 1; i < stringRecord.length; i++) {\r\n\t\t\t\t\t\tvar recordData = [];\r\n\t\t\t\t\t\tfor (var j = 0; j < OAT_JS.grid.gridData[UcId].grid.columns.length; j++) {\r\n\t\t\t\t\t\t\trecordData[j] = \"#NuN#\"\r\n\t\t\t\t\t\t\tvar dt = stringRecord[i].split(\"<\" + OAT_JS.grid.gridData[UcId].grid.columns[j].getAttribute(\"dataField\") + \">\")\r\n\t\t\t\t\t\t\tif (dt.length > 1) {\r\n\t\t\t\t\t\t\t\tvar at = dt[1].split(\"</\" + OAT_JS.grid.gridData[UcId].grid.columns[j].getAttribute(\"dataField\") + \">\")\r\n\t\t\t\t\t\t\t\trecordData[j] = at[0]\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tdata.push(recordData)\r\n\r\n\t\t\t\t\t\tif (format != \"xlsx\") {\r\n\t\t\t\t\t\t\tif ((i > OAT_JS.grid.gridData[UcId].rowsPerPage) && !(OAT_JS.grid.gridData[UcId].rowsPerPage == \"\")) {\r\n\t\t\t\t\t\t\t\tOAT.CreateGridRow(recordData, OAT_JS.grid.gridData[UcId], true)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tswitch (format) {\r\n\t\t\t\t\t\tcase \"pdf\": OAT.ExportToPdf(_selfgrid, fileName); break;\r\n\t\t\t\t\t\tcase \"xml\": OAT.ExportToXML(_selfgrid, fileName); break;\r\n\t\t\t\t\t\tcase \"html\": OAT_JS.grid.gridData[UcId].grid.ExportToHtml(_selfgrid, fileName); break;\r\n\t\t\t\t\t\tcase \"xls\": OAT.ExportToExcel(_selfgrid, fileName); break;\r\n\t\t\t\t\t\tcase \"xlsx\": OAT.ExportToExcel2010(_selfgrid, fileName, true, data, UcId); break;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tOAT_JS.grid.gridData[UcId].grid.removeAllCollapseRows()\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tthis.setAttributeForTable = function(resJSON){\r\n\t\t\tvar res = JSON.parse(resJSON);\r\n\t\t\tswitch(self.oat_component.lastCallToQueryViewer) {\r\n\t\t\t\tcase \"getValuesForColumn\":\r\n\t\t\t\t\tOAT_JS.grid.changeValues(self.oat_component.lastCallData.UcId, self.oat_component.lastCallData.dataField, self.oat_component.lastCallData.columnNumber, res, self.oat_component.lastCallData.filterValue);\r\n\t\t\t\tbreak;\r\n\t\t\t\tcase \"readScrollValue\":\r\n\t\t\t\t\tOAT_JS.grid.appendNewValueData(self.oat_component.lastCallData.UcId, res);\r\n\t\t\t\t\r\n\t\t\t\tbreak;\r\n\t\t\t\tcase \"readScrollValueFilter\":\r\n\t\t\t\t\tOAT_JS.grid.appendNewFilteredValueData(self.oat_component.lastCallData.UcId, res, self.oat_component.lastCallData.posColumnNumber, self.oat_component.lastCallData.filterText)\r\n\t\t\t\tcase \"initValueRead\":\r\n\t\t\t\t\tOAT_JS.grid.initValueLoad(res, self.oat_component.lastCallData.UcId, self.oat_component.lastCallData.dataField)\r\n\t\t\t\tbreak;\r\n\t\t\t\tcase \"filterChange\":\r\n\t\t\t\t\tOAT_JS.grid.appendNewValueData(self.oat_component.lastCallData.UcId, res, true)\r\n\t\t\t\t\tOAT_JS.grid.setFilterChangedWhenServerPagination(self.oat_component.lastCallData.UcId, self.oat_component.lastCallData.oatDimension)\r\n\t\t\t\tbreak;\r\n\t\t\t}\t\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\tthis.setDataSynForTable = function(dataSync){\r\n\t\t\t_self = self.oat_component.lastCallData.self\r\n\t\t\t\r\n\t\t\tOAT.ClickHandle(_self, self.oat_component.lastCallData.elemvalue, dataSync)\r\n\t\t}\r\n\t\t\r\n\t\tthis.appendExportToXmlOption = function (content, someExport) {\r\n\t\t\tvar exportXMLButton;\r\n\t\t\tvar fileName = this.query;\r\n\t\t\tif (fileName == \"\") {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tfileName = self.controlName.substr(4).split(\"_\")[0]\r\n\t\t\t\t} catch (error) { }\r\n\t\t\t}\r\n\t\t\tif (self.QueryViewerCollection[self.IdForQueryViewerCollection].ExportToXML) {\r\n\t\t\t\t\r\n\t\t\t\t\texportXMLButton = OAT.Dom.create(\"div\");\r\n\t\t\t\t\tvar exportButtonSub = self.createExportButton(exportXMLButton)\r\n\r\n\t\t\t\t\tvar pvpl = OAT.Dom.create(\"label\");\r\n\t\t\t\t\tOAT.addTextNode(pvpl, self.translations.GXPL_QViewerContextMenuExportXml)//gx.getMessage(\"GXPL_QViewerContextMenuExportXml\"))\r\n\t\t\t\t\tpvpl.htmlFor = \"pivot_checkbox_restoreview\";\r\n\t\t\t\t\texportXMLButton.appendChild(pvpl);\r\n\r\n\t\t\t\t\tOAT.Dom.attach(exportButtonSub, \"click\", function () {\r\n\t\t\t\t\t\tOAT_JS.grid.getAllDataRowsForExport(self.UcId, { grid: self }, fileName, \"xml\")\r\n\t\t\t\t\t}\r\n\t\t\t\t\t);\r\n\t\t\t\t\r\n\r\n\t\t\t\tcontent.appendChild(exportXMLButton);\r\n\t\t\t\tif (!someExport) someExport = true;\r\n\t\t\t}\r\n\t\t\treturn someExport;\r\n\t\t}\r\n\r\n\t\tthis.appendExportToHtmlOption = function (content, someExport) {\r\n\t\t\tvar exportHTMLButton;\r\n\t\t\tvar fileName = this.query;\r\n\t\t\tif (fileName == \"\") {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tfileName = self.controlName.substr(4).split(\"_\")[0]\r\n\t\t\t\t} catch (error) { }\r\n\t\t\t}\r\n\t\t\tif (self.QueryViewerCollection[self.IdForQueryViewerCollection].ExportToHTML) {\r\n\t\t\t\t\r\n\t\t\t\t\texportHTMLButton = OAT.Dom.create(\"div\");\r\n\t\t\t\t\tvar exportButtonSub = self.createExportButton(exportHTMLButton)\r\n\r\n\t\t\t\t\tvar pvpl = OAT.Dom.create(\"label\");\r\n\t\t\t\t\tOAT.addTextNode(pvpl, self.translations.GXPL_QViewerContextMenuExportHtml)//gx.getMessage(\"GXPL_QViewerContextMenuExportHtml\"))\r\n\t\t\t\t\tpvpl.htmlFor = \"pivot_checkbox_restoreview\";\r\n\t\t\t\t\texportHTMLButton.appendChild(pvpl);\r\n\r\n\t\t\t\t\tOAT.Dom.attach(exportButtonSub, \"click\", function () { \r\n\t\t\t\t\t\tOAT_JS.grid.getAllDataRowsForExport(self.UcId, self, fileName, \"html\")\r\n\t\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tcontent.appendChild(exportHTMLButton);\r\n\t\t\t\tif (!someExport) someExport = true;\r\n\t\t\t}\r\n\t\t\treturn someExport;\r\n\t\t}\r\n\r\n\t\tthis.ExportToHtml = function (self, fileName) {\r\n\t\t\tvar dir = OAT.resourceURL(self.relativePath + 'QueryViewer/oatPivot/css/grid.css')\r\n\t\t\tvar str = \"<!DOCTYPE><HTML><BODY>\";\r\n\r\n\t\t\tstr = str + \"<HEAD>\";\r\n\t\t\tstr = str + '<META content=\"text/html; charset=utf-8\" http-equiv=\"Content-Type\"/>'\r\n\r\n\t\t\tstr = str + '<link id=\"gxtheme_css_reference\" rel=\"stylesheet\" type=\"text/css\" href=\"' + dir + '\" />'\r\n\t\t\t\r\n\t\t\t//add other css file\r\n\t\t\tfor(var i = 0; i < jQuery('link').length; i++)\r\n\t\t\t{\r\n\t\t\t\tif (jQuery('link')[i].href.indexOf(\"QueryViewer.css\") < 0) {\r\n\t\t\t\t\tstr = str + '<link id=\"gxtheme_css_reference\" rel=\"stylesheet\" type=\"text/css\" href=\"' + jQuery('link')[i].href + '\" />'\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tstr = str + \"</STYLE>\"\r\n\t\t\tstr = str + \"</HEAD>\"\r\n\t\t\t\r\n\t\t\tstr = str + '<div class=\"gx_usercontrol qv-table QueryViewer-table\">'\r\n\t\t\t\r\n\t\t\tstr = str + '<table class=\"oatgrid\"  style=\"width: 100%;\">'\r\n\t\t\t\r\n\t\t\tstr = str + OAT.removeIconFont(jQuery(\"#\" + self.controlName)[0].innerHTML.replace(/visibility: collapse;/g, \"\").replace(/visibility:collapse;/g, \"\"))\r\n\t\t\t\r\n\t\t\tstr = str + '</table>'\r\n\t\t\t\r\n\t\t\tstr = str + '</div>'\r\n\t\t\tstr = str + \"</BODY></HTML>\";\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tisSD = OAT.isSD(); \r\n\t\t\t\r\n\r\n\t\t\tif (OAT.isSafari() || (isSD)) { \r\n\t\t\t\twindow.open('data:text/html,' + str);\r\n\t\t\t} else {\r\n\t\t\t\tvar blob = new Blob([str], { type: \"text/html\" });\r\n\t\t\t\tsaveAs(blob, fileName + \".html\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.appendExportToPdfOption = function (content, someExport) {\r\n\t\t\tvar fileName = this.query;\r\n\t\t\tif (fileName == \"\") {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tfileName = self.controlName.substr(4).split(\"_\")[0]\r\n\t\t\t\t} catch (error) { }\r\n\t\t\t}\r\n\t\t\tvar exportPDFButton;\r\n\t\t\tif (self.QueryViewerCollection[self.IdForQueryViewerCollection].ExportToPDF) {\r\n\t\t\t\t\r\n\t\t\t\t\texportPDFButton = OAT.Dom.create(\"div\");\r\n\t\t\t\t\tvar exportButtonSub = self.createExportButton(exportPDFButton)\r\n\r\n\t\t\t\t\tvar pvpl = OAT.Dom.create(\"label\");\r\n\t\t\t\t\tOAT.addTextNode(pvpl, self.translations.GXPL_QViewerContextMenuExportPdf); //gx.getMessage(\"GXPL_QViewerContextMenuExportPdf\"))\r\n\t\t\t\t\tpvpl.htmlFor = \"pivot_checkbox_restoreview\";\r\n\t\t\t\t\texportPDFButton.appendChild(pvpl);\r\n\r\n\t\t\t\t\t\r\n\t\t\t\t\tOAT.Dom.attach(exportButtonSub, \"click\", function () {\r\n\t\t\t\t\t\tOAT_JS.grid.getAllDataRowsForExport(self.UcId, { grid: self }, fileName, \"pdf\")\r\n\t\t\t\t\t});\r\n\t\t\t\t\t\r\n\t\t\t\t\r\n\r\n\t\t\t\tcontent.appendChild(exportPDFButton);\r\n\t\t\t\tif (!someExport) someExport = true;\r\n\t\t\t}\r\n\r\n\t\t\treturn someExport;\r\n\t\t}\r\n\r\n\t\tthis.appendExportToExcelOption = function (content, someExport) {\r\n\t\t\tvar fileName = this.query;\r\n\t\t\tif (fileName == \"\") {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tfileName = self.controlName.substr(4).split(\"_\")[0]\r\n\t\t\t\t} catch (error) { }\r\n\t\t\t}\r\n\t\t\tvar exportXLSButton\r\n\t\t\tif (self.QueryViewerCollection[self.IdForQueryViewerCollection].ExportToXLS) {\r\n\t\t\t\t\r\n\t\t\t\t\texportXLSButton = OAT.Dom.create(\"div\");\r\n\r\n\t\t\t\t\tvar exportButtonSub = self.createExportButton(exportXLSButton)\r\n\r\n\t\t\t\t\tvar pvpl = OAT.Dom.create(\"label\");\r\n\t\t\t\t\tOAT.addTextNode(pvpl, self.translations.GXPL_QViewerContextMenuExportXls2003); //gx.getMessage(\"GXPL_QViewerContextMenuExportXls2003\"))\r\n\t\t\t\t\tpvpl.htmlFor = \"pivot_checkbox_restoreview\";\r\n\t\t\t\t\texportXLSButton.appendChild(pvpl);\r\n\r\n\t\t\t\t\tOAT.Dom.attach(exportButtonSub, \"click\", function () {\r\n\t\t\t\t\t\tOAT_JS.grid.getAllDataRowsForExport(self.UcId, { grid: self }, fileName, \"xls\")\r\n\t\t\t\t\t});\r\n\t\t\t\t\r\n\r\n\t\t\t\tcontent.appendChild(exportXLSButton);\r\n\t\t\t\tif (!someExport) someExport = true;\r\n\t\t\t}\r\n\r\n\t\t\treturn someExport;\r\n\t\t}\r\n\r\n\t\tthis.appendExportToExcel2010Option = function (content, someExport) {\r\n\t\t\tvar fileName = this.query;\r\n\t\t\tif (fileName == \"\") {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tfileName = self.controlName.substr(4).split(\"_\")[0]\r\n\t\t\t\t} catch (error) { }\r\n\t\t\t}\r\n\t\t\tvar exportXLSButton\r\n\t\t\tif (self.QueryViewerCollection[self.IdForQueryViewerCollection].ExportToXLSX) {\r\n\t\t\t\t\r\n\t\t\t\t\texportXLSButton = OAT.Dom.create(\"div\");\r\n\r\n\t\t\t\t\tvar exportButtonSub = self.createExportButton(exportXLSButton)\r\n\r\n\r\n\t\t\t\t\tvar pvpl = OAT.Dom.create(\"label\");\r\n\t\t\t\t\tOAT.addTextNode(pvpl, self.translations.GXPL_QViewerContextMenuExportXlsx);// gx.getMessage(\"GXPL_QViewerContextMenuExportXlsx\"))\r\n\t\t\t\t\tpvpl.htmlFor = \"pivot_checkbox_restoreview\";\r\n\t\t\t\t\texportXLSButton.appendChild(pvpl);\r\n\r\n\t\t\t\t\tOAT.Dom.attach(exportButtonSub, \"click\", function () {\r\n\t\t\t\t\t\tOAT_JS.grid.getAllDataRowsForExport(self.UcId, { grid: self }, fileName, \"xlsx\")\r\n\t\t\t\t\t});\r\n\t\t\t\t\r\n\r\n\t\t\t\tcontent.appendChild(exportXLSButton);\r\n\t\t\t\tif (!someExport) someExport = true;\r\n\t\t\t}\r\n\r\n\t\t\treturn someExport;\r\n\t\t}\r\n\r\n\t\tthis.createExportButton = function (divContainer) {\r\n\r\n\t\t\tvar exportButtonSub = OAT.Dom.create(\"div\", {});\r\n\t\t\texportButtonSub.setAttribute('id', 'divtoxml');\r\n\t\t\tdivContainer.appendChild(exportButtonSub);\r\n\r\n\t\t\tif (self.isSD) {//android\t\t\t\t\r\n\t\t\t\texportButtonSub.setAttribute(\"class\", \"download_file_img_small\");\r\n\t\t\t} else {\r\n\t\t\t\texportButtonSub.setAttribute(\"class\", \"download_file_img\");\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tOAT.addImageNode(exportButtonSub, \"download\", \"\");\r\n\r\n\t\t\tdivContainer.setAttribute(\"class\", \"export_item_div\");\r\n\t\t\tif (self.isSD) { //android\t\t\r\n\t\t\t\tdivContainer.setAttribute(\"class\", \"export_item_div export_item_div_small\");\r\n\t\t\t}\r\n\t\t\treturn divContainer;\r\n\t\t}\r\n\r\n\r\n\t\tthis.clearData = function () {\r\n\t\t\tself.rows = [];\r\n\t\t\tOAT.Dom.clear(self.rowBlock);\r\n\t\t}\r\n\r\n\t\tthis.appendHeader = function (paramsObj, dataField, index) { /* append one header */\r\n\t\t\tvar i = (!index ? self.header.cells.length : index);\r\n\t\t\tvar cell = self.header.addCell(paramsObj, \"character\", i, dataField);\r\n\t\t\tfor (var i = 0; i < self.header.cells.length; i++) {\r\n\t\t\t\tself.header.cells[i].number = i;\r\n\t\t\t}\r\n\t\t\treturn cell;\r\n\t\t}\r\n\r\n\t\tthis.ieFix = function () {\r\n\t\t\tfor (var i = 0; i < self.header.cells.length; i++) {\r\n\t\t\t\tvar html = self.header.cells[i].html;\r\n\t\t\t\tOAT.Dom.addClass(html, \"hover\");\r\n\t\t\t\tOAT.Dom.removeClass(html, \"hover\");\r\n\t\t\t\tvar value = self.header.cells[i].value;\r\n\t\t\t\tvar dims = OAT.Dom.getWH(value);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.createHeader = function (paramsList, fieldList) { /* add new header */\r\n\t\t\tself.header.clear();\r\n\r\n\t\t\tfor (var i = 0; i < paramsList.length; i++) {\r\n\t\t\t\tself.appendHeader(paramsList[i], fieldList[i]);\r\n\t\t\t}\r\n\t\t\tif (OAT.isIE()) { self.ieFix(); }\r\n\t\t} /* Grid::createHeader */\r\n\r\n\t\tthis.getHeaders = function (){\r\n\t\t\tvar actualHeaders = []\r\n\t\t\t\r\n\t\t\tfor (var i = 0; i < self.header.cells.length; i++) {\r\n\t\t\t\tactualHeaders.push(self.header.cells[i].value.textContent);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn actualHeaders\r\n\t\t}\r\n\r\n\t\tthis.createRow = function (paramsList, columnsDataType, defaultPicture, customPicture, conditionalFormatsColumns, formatValues, customFormat, column, index, columnVisibility) { /* add new row */\r\n\t\t\tvar number = (!index ? self.rows.length : index);\r\n\t\t\tvar row = new OAT.GridRow(self, number);\r\n\t\t\tif (index == number || number == self.rows.length) {\r\n\t\t\t\tself.rowBlock.appendChild(row.html);\r\n\t\t\t} else {\r\n\t\t\t\tself.rowBlock.insertBefore(row.html, self.rowBlock.childNodes[number]);\r\n\t\t\t}\r\n\t\t\tOAT.underRecursionStyle = [];\r\n\t\t\tfor (var i = 0; i < paramsList.length; i++) {\r\n\t\t\t\trow.addCell(paramsList[i], columnsDataType[i], defaultPicture, customPicture[i], conditionalFormatsColumns, formatValues, customFormat, i, index, columnVisibility[i]);\r\n\t\t\t}\r\n\t\t\tself.rows.splice(number, 0, row);\r\n\t\t\treturn row.html;\r\n\t\t} /* Grid::createRow() */\r\n\r\n\t\tthis.loadDifferentValues = function (columnNumber, values) {\r\n\t\t\tself.conditions[columnNumber].differentValue = [];\r\n\t\t\tfor (var i = 0; i < values.length; i++) {\r\n\t\t\t\tself.conditions[columnNumber].differentValue.push(values[i]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.removeAllRows = function () {\r\n\t\t\tvar totalRows = self.rows.length\r\n\t\t\tfor (var l = 0; l < totalRows; l++) {\r\n\t\t\t\tself.removeRow(0)\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.removeAllHiddenRows = function () {\r\n\t\t\tvar totalRows = self.rows.length\r\n\t\t\tvar rowNumber = self.rows.length - 1;\r\n\t\t\twhile ((rowNumber > 0) && (self.rows[rowNumber].html.style.display == \"none\")) {\r\n\t\t\t\tself.removeRow(rowNumber);\r\n\t\t\t\trowNumber--;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.removeAllCollapseRows = function () {\r\n\t\t\tvar totalRows = self.rows.length\r\n\t\t\tvar rowNumber = self.rows.length - 1;\r\n\t\t\twhile ((rowNumber > 0) && (self.rows[rowNumber].html.style.visibility == \"collapse\")) {\r\n\t\t\t\tself.removeRow(rowNumber);\r\n\t\t\t\trowNumber--;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.removeRow = function (rowNumber) {\r\n\t\t\tjQuery(self.rows[rowNumber].html).remove()\r\n\r\n\t\t\tself.rows.splice(rowNumber, 1);\r\n\t\t}\r\n\r\n\t\tthis.removeColumn = function (index) {\r\n\t\t\tself.header.removeColumn(index);\r\n\t\t\tfor (var i = 0; i < self.rows.length; i++) { self.rows[i].removeColumn(index); }\r\n\t\t}\r\n\r\n\t\tthis.hideColumnHeader = function (index) {\r\n\t\t\tvar headerPos = /*self.columnsDataType.length - 1 -*/ index;\r\n\t\t\tself.header.cells[headerPos].html.style.display = \"none\";\r\n\t\t}\r\n\r\n\t\tthis.showColumnHeader = function (index) {\r\n\t\t\t//var headerPos = self.columnsDataType.length - 1 - index;\r\n\t\t\t//self.header.cells[headerPos].html.style.display = \"\";\r\n\t\t\tself.header.cells[index].html.style.display = \"\";\r\n\t\t}\r\n\r\n\t\tthis.sort = function (index, type, numCol) {\r\n\t\t\tfor (var i = 0; i < self.header.cells.length; i++) {\r\n\t\t\t\t/* aca cambio la info de estado sobre las oredenaciones de las columnas */\r\n\t\t\t\tself.conditions[i].sort = 1;\r\n\t\t\t\tself.header.cells[i].changeSort(OAT.GridData.SORT_NONE);\r\n\t\t\t}\r\n\t\t\tself.conditions[index].sort = type;\r\n\t\t\tself.header.cells[numCol].changeSort(type);\r\n\t\t\t/* sort elements here */\r\n\t\t\tvar coltype = self.header.cells[numCol].options.type;\r\n\t\t\tvar c1, c2;\r\n\t\t\tswitch (type) {\r\n\t\t\t\tcase OAT.GridData.SORT_ASC: c1 = 1; c2 = -1; break;\r\n\t\t\t\tcase OAT.GridData.SORT_DESC: c1 = -1; c2 = 1; break;\r\n\t\t\t}\r\n\r\n\t\t\tvar useCustomOrder = (OAT_JS.grid.gridData[self.UcId].customOrderValues)\r\n\t\t\t\t&& (OAT_JS.grid.gridData[self.UcId].customOrderValues[index] != false)\r\n\t\t\t\t&& (OAT_JS.grid.gridData[self.UcId].customOrderValues[index].length > 0)\r\n\r\n\r\n\t\t\tvar numCmp = function (row_a, row_b) {\r\n\t\t\t\tvar a = row_a.cells[index].options.value;\r\n\t\t\t\tvar b = row_b.cells[index].options.value;\r\n\t\t\t\tif (a == b) { return 0; }\r\n\t\t\t\treturn (parseFloat(a) > parseFloat(b) ? c1 : c2);\r\n\t\t\t}\r\n\t\t\tvar strCmp = function (row_a, row_b) {\r\n\t\t\t\tvar a = row_a.cells[index].options.value;\r\n\t\t\t\tvar b = row_b.cells[index].options.value;\r\n\t\t\t\tif (a == b) { return 0; }\r\n\t\t\t\treturn (a > b ? c1 : c2);\r\n\t\t\t}\r\n\t\t\tvar cusCmp = function (row_a, row_b) {\r\n\t\t\t\tvar a = row_a.cells[index].options.value;\r\n\t\t\t\tvar b = row_b.cells[index].options.value;\r\n\t\t\t\tvar indexA = OAT_JS.grid.gridData[self.UcId].customOrderValues[index].indexOf(a)\r\n\t\t\t\tvar indexB = OAT_JS.grid.gridData[self.UcId].customOrderValues[index].indexOf(b)\r\n\t\t\t\tif (indexA == indexB) { return 0; }\r\n\t\t\t\treturn (indexA > indexB ? c1 : c2);\r\n\t\t\t}\r\n\t\t\tvar cmp;\r\n\r\n\r\n\t\t\t\r\n\t\t} /* Grid::sort() */\r\n\r\n\t\tthis.applySaveState = function (actualPagesize) {\r\n\t\t\tif ((self.rememberLayout) && (self.rememberLayout != \"false\")) {\r\n\t\t\t\tself = this;\r\n\t\t\t\tvar exists = OAT.getState(self, actualPagesize);\r\n\t\t\t\tif (exists) {\r\n\t\t\t\t\tOAT.filterRows(self);\r\n\r\n\r\n\t\t\t\t\tfor (var jC = 0; jC < self.columnsDataType.length; jC++) {\r\n\t\t\t\t\t\tif (self.conditions[jC].sort != 1) {\r\n\t\t\t\t\t\t\tself.sort(jC, self.conditions[jC].sort, /*self.columnsDataType.length -1 -*/ jC);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.applySortOrderType = function (columnNumber, sortOrder) {\r\n\t\t\tself.sort(columnNumber, sortOrder, /*self.columnsDataType.length -1 -*/ columnNumber)\r\n\t\t}\r\n\r\n\t\tthis.applyCustomSort = function (columnNumber, sortData, dataRows) {\r\n\t\t\tvar distinctValues = [];\r\n\t\t\tfor (var h = 0; h < sortData.childNodes.length; h++) {\r\n\t\t\t\tif ((sortData.childNodes[h] != undefined) &&\r\n\t\t\t\t\t(sortData.childNodes[h].localName != undefined) &&\r\n\t\t\t\t\t(sortData.childNodes[h].localName === \"customOrder\")) {\r\n\t\t\t\t\tfor (var n = 0; n < sortData.childNodes[h].childNodes.length; n++) {\r\n\t\t\t\t\t\tif (sortData.childNodes[h].childNodes[n].localName == \"Value\") {\r\n\t\t\t\t\t\t\tdistinctValues.push(sortData.childNodes[h].childNodes[n].textContent.trimpivot());\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfor (var d = 0; d < dataRows.length; d++) {\r\n\t\t\t\tif (distinctValues.indexOf(dataRows[d][columnNumber].trimpivot()) == -1) {\r\n\t\t\t\t\tdistinctValues.push(dataRows[d][columnNumber])\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar temp = dataRows;\r\n\t\t\tdataRows = [];\r\n\t\t\tfor (var i = 0; i < distinctValues.length; i++) {\r\n\t\t\t\tfor (var j = 0; j < temp.length; j++) {\r\n\t\t\t\t\tif (temp[j][columnNumber].trimpivot() === distinctValues[i].trimpivot()) {\r\n\t\t\t\t\t\tdataRows.push(temp[j]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn [dataRows, distinctValues];\r\n\t\t}\r\n\r\n\t\tthis.applyCustomFilter = function (columnNumber, filterData) {\r\n\t\t\ttry {\r\n\t\t\t\tvar includeValues = []; //the only values to show\r\n\t\t\t\tvar applyFilter = false;\r\n\t\t\t\tfor (var h = 0; h < filterData.childNodes.length; h++) {\r\n\t\t\t\t\tif ((filterData.childNodes[h] != undefined) &&\r\n\t\t\t\t\t\t(filterData.childNodes[h].localName != undefined) &&\r\n\t\t\t\t\t\t(filterData.childNodes[h].localName === \"include\")) {\r\n\t\t\t\t\t\tapplyFilter = true;\r\n\t\t\t\t\t\tfor (var n = 0; n < filterData.childNodes[h].childNodes.length; n++) {\r\n\t\t\t\t\t\t\tif ((filterData.childNodes[h].childNodes[n].localName != null) &&\r\n\t\t\t\t\t\t\t\t(filterData.childNodes[h].childNodes[n].localName.toLowerCase() === \"value\")) {\r\n\t\t\t\t\t\t\t\tincludeValues.push(filterData.childNodes[h].childNodes[n].textContent);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (applyFilter) {\r\n\t\t\t\t\tself.conditions[columnNumber].blackList = [];\r\n\r\n\t\t\t\t\tvar dataFieldId = OAT_JS.grid.gridData[self.UcId].columnDataField[columnNumber];\r\n\t\t\t\t\tOAT_JS.grid.gridData[self.UcId].blackLists[dataFieldId].state = \"\"\r\n\t\t\t\t\tOAT_JS.grid.gridData[self.UcId].blackLists[dataFieldId].defaultAction = \"Exclude\"\r\n\t\t\t\t\tOAT_JS.grid.gridData[self.UcId].blackLists[dataFieldId].hiddens = []\r\n\t\t\t\t\tfor (var i = 0; i < includeValues.length; i++) {\r\n\t\t\t\t\t\tif (includeValues[i] != \"TOTAL\")\r\n\t\t\t\t\t\t\tOAT_JS.grid.gridData[self.UcId].blackLists[dataFieldId].visibles.push(includeValues[i]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfor (var i = 0; i < self.rows.length; i++) {\r\n\t\t\t\t\t\tvar col = columnNumber;\r\n\t\t\t\t\t\tif ((includeValues.findIndex(self.rows[i].cells[col].options.value) === -1)\r\n\t\t\t\t\t\t\t&& (includeValues.findIndex(self.rows[i].cells[col].options.value.trimpivot()) === -1)\r\n\t\t\t\t\t\t\t&& (self.conditions[col].blackList.findIndex(self.rows[i].cells[col].options.value) === -1)) {\r\n\t\t\t\t\t\t\tself.conditions[col].blackList.push(self.rows[i].cells[col].options.value);\r\n\t\t\t\t\t\t\tOAT.HideGridRow({ grid: self }, columnNumber, self.rows[i].cells[columnNumber].options.value);\r\n\t\t\t\t\t\t\tOAT.actualizeBlackList(\"push\", self, columnNumber, self.rows[i].cells[columnNumber].options.value, false);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} catch (error) {\r\n\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.moveToNextPage = function () {\r\n\t\t\tself.oat_component.moveToNextPage(self.UcId);\r\n\t\t}\r\n\r\n\t\tthis.moveToFirstPage = function () {\r\n\t\t\tself.oat_component.moveToFirstPage(self.UcId);\r\n\t\t}\r\n\r\n\t\tthis.moveToLastPage = function () {\r\n\t\t\tself.oat_component.moveToLastPage(self.UcId);\r\n\t\t}\r\n\r\n\t\tthis.moveToPreviousPage = function () {\r\n\t\t\tself.oat_component.moveToPreviousPage(self.UcId);\r\n\t\t}\r\n\t\t\r\n\t\tthis.selectValue = function (selection) {\r\n\t\t\t//clear previous selection\r\n\t\t\tOAT_JS.grid.gridData[self.UcId].selection.SelectedNode = [];\r\n\t\t\tOAT.ClearSelectedNodes(jQuery(self.html));\r\n\t\t\t\t\r\n\t\t\t//find column number first condition\r\n\t\t\tvar s = 0;\r\n\t\t\tvar colNumber = OAT_JS.grid.gridData[self.UcId].columnDataField.indexOf(selection[s].DataField);\r\n\t\t\t\t\r\n\t\t\tOAT.SelectNodes({grid: self}, selection[s].Value, false, colNumber, -1, s, selection);\r\n\t\t}\r\n\t\t\r\n\t\tthis.deselectValue = function(){\r\n\t\t\tOAT_JS.grid.gridData[self.UcId].selection.SelectedNode = [];\r\n\t\t\tOAT.ClearSelectedNodes(jQuery(self.html));\r\n\t\t}\r\n\t\t\r\n\t\tthis.refreshPivot = function (metadata, data, sameQuery) {\r\n\r\n\t\t\tif ((metadata != \"\") && (data != \"\")) {\r\n\t\t\t\tvar parser = new DOMParser();\r\n\t\t\t\tvar xmlData = parser.parseFromString(metadata, 'text/xml');\r\n\t\t\t\tvar dimensions = xmlData.getElementsByTagName(\"OLAPDimension\");\r\n\r\n\t\t\t\tvar dataFieldOrderChanged = \"\";\r\n\t\t\t\tvar OrderChanged = \"\";\r\n\t\t\t\tvar colPosition = [];\r\n\t\t\t\tfor (var dim = 0; dim < dimensions.length; dim++) { //for every dimensions of the other querie\r\n\t\t\t\t\tvar dimID = dimensions[dim].getElementsByTagName(\"name\")[0].childNodes[0].nodeValue; //get the name - \"Identifier\" of this dimension\r\n\r\n\t\t\t\t\t//now search for this name at this querie\r\n\t\t\t\t\tvar dimPos = -1; //the columns number of the dimension in this table\r\n\t\t\t\t\tvar dimHeader = -1; //the number of the title (bug!)\r\n\t\t\t\t\tfor (var itC = 0; itC < self.columns.length; itC++) {\r\n\t\t\t\t\t\tif (self.columns[itC].attributes.getNamedItem(\"name\").nodeValue === dimID) {\r\n\t\t\t\t\t\t\tvar display = self.columns[itC].attributes.getNamedItem(\"displayName\").nodeValue\r\n\t\t\t\t\t\t\t//search in the header for \"display\" name to know the position\r\n\t\t\t\t\t\t\tfor (var pD = 0; pD < self.header.cells.length; pD++) {\r\n\t\t\t\t\t\t\t\tif (self.header.cells[pD].options.value === display) {\r\n\t\t\t\t\t\t\t\t\tdimPos = self.header.cells.length - 1 - pD;\t\t//this is the number of the columns of the dimesnion at this table\r\n\t\t\t\t\t\t\t\t\tdimHeader = pD;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (dimPos != -1) { //the dimension exists in this table\r\n\t\t\t\t\t\t//make the changes\r\n\t\t\t\t\t\tvar position = dimensions[dim].getElementsByTagName(\"condition\")[0].childNodes[0].nodeValue;\r\n\t\t\t\t\t\tif (position === \"none\") {\r\n\t\t\t\t\t\t\tvar newdisp = \"none\";\r\n\t\t\t\t\t\t\tself.header.cells[dimHeader].html.style.display = newdisp;\r\n\t\t\t\t\t\t\tfor (var i = 0; i < self.rows.length; i++) {\r\n\t\t\t\t\t\t\t\tself.rows[i].cells[dimPos].html.style.display = newdisp;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tOAT_JS.grid.setColumnVisibleValue(self.UcId, dimHeader, (newdisp == \"\"))\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tvar newdisp = \"\";\r\n\t\t\t\t\t\t\tself.header.cells[dimHeader].html.style.display = newdisp;\r\n\t\t\t\t\t\t\tfor (var i = 0; i < self.rows.length; i++) {\r\n\t\t\t\t\t\t\t\tself.rows[i].cells[dimPos].html.style.display = newdisp;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tOAT_JS.grid.setColumnVisibleValue(self.UcId, dimHeader, (newdisp == \"\"))\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t//set column position\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tvar dataFieldId = OAT_JS.grid.gridData[self.UcId].columnDataField[dimHeader];\r\n\t\t\t\t\t\t\tcolPosition[parseInt(dimensions[dim].getElementsByTagName(\"position\")[0].childNodes[0].nodeValue)] = dataFieldId\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t} catch (error) { }\r\n\t\t\t\t\t\t//reset blacklists\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tvar dataFieldId = OAT_JS.grid.gridData[self.UcId].columnDataField[dimHeader];\r\n\t\t\t\t\t\tOAT_JS.grid.updateFilterInfo(self.UcId, dataFieldId, { op: \"all\", values: [] });\r\n\t\t\t\t\t\t\r\n\r\n\t\t\t\t\t\t//set order value if changed\r\n\t\t\t\t\t\tvar order = dimensions[dim].getElementsByTagName(\"order\")[0].childNodes[0].nodeValue;\r\n\t\t\t\t\t\tif ((order == \"ascending\") && (self.conditions[dimPos].sort == 3)) {\r\n\t\t\t\t\t\t\tself.sort(dimPos, OAT.GridData.SORT_ASC, dimHeader);\r\n\t\t\t\t\t\t\tOrderChanged = \"Ascending\"\r\n\t\t\t\t\t\t\tdataFieldOrderChanged = dimensions[dim].getElementsByTagName(\"dataField\")[0].childNodes[0].nodeValue\r\n\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t} else if ((order == \"descending\") && (self.conditions[dimPos].sort != 3)) {\r\n\t\t\t\t\t\t\tself.sort(dimPos, OAT.GridData.SORT_DESC, dimHeader);\r\n\r\n\t\t\t\t\t\t\tOrderChanged = \"Descending\"\r\n\t\t\t\t\t\t\tdataFieldOrderChanged = dimensions[dim].getElementsByTagName(\"dataField\")[0].childNodes[0].nodeValue\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvar hides = dimensions[dim].getElementsByTagName(\"hide\")[0].childNodes;\r\n\t\t\t\t\t\tfor (var sofs = 0; sofs < hides.length; sofs++) {\r\n\t\t\t\t\t\t\tif (hides[sofs].tagName === \"value\") {\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tvar dataFieldId = OAT_JS.grid.gridData[self.UcId].columnDataField[dimHeader];\r\n\t\t\t\t\t\t\t\t\tvar distinctValues = OAT_JS.grid.gridData[self.UcId].differentValues[dataFieldId];\r\n\t\t\t\t\t\t\t\t\tfor (var i = 0; i < distinctValues.length; i++) {\r\n\t\t\t\t\t\t\t\t\t\tif (distinctValues[i].trimpivot() == hides[sofs].textContent) {\r\n\t\t\t\t\t\t\t\t\t\t\tOAT_JS.grid.updateFilterInfo(self.UcId, dataFieldId, { op: \"push\", values: distinctValues[i] });\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} //else the dimension doesnt exist in this table\r\n\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\r\n\t\t\t\tif (colPosition.length != OAT_JS.grid.gridData[self.UcId].columnDataField.length) {\r\n\t\t\t\t\tcolPosition = [];\r\n\t\t\t\t}\r\n\t\t\t\tvar dimensions = xmlData.getElementsByTagName(\"OLAPDimension\");\r\n\t\t\t\tOAT_JS.grid.refreshPivotWhenServerPagination(self.UcId, dataFieldOrderChanged, OrderChanged, colPosition);\r\n\t\t\t\t\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tthis.getDataXML = function (serverData) {\r\n\r\n\t\t\t\t//spl = self.IdForQueryViewerCollection;\r\n\t\t\t\t//var temp = self.QueryViewerCollection[spl].getPivottableDataSync();\r\n\r\n\t\t\t\tvar dataStr = serverData.split(\"<Recordset\")[1];\r\n\r\n\t\t\t\tdataStr = \"<Recordset\" + dataStr;\r\n\r\n\t\r\n\t\t\t\treturn dataStr;\r\n\t\t}\r\n\r\n\t\tthis.getFilteredDataXML = function (serverData) {\r\n\t\t\treturn OAT_JS.grid.getTableWhenServerPagination(self.UcId, serverData);\r\n\t\t}\r\n\r\n\r\n\t\tthis.getMetadataXML = function () {\r\n\r\n\r\n\t\t\tvar xml = '<OLAPCube format=\"' + \"compact\" + '\" thousandsSeparator=\"' + \",\" + '\" decimalSeparator=\"' + \".\" + '\" dateFormat=\"' + \"MDY\" + '\">';\r\n\r\n\t\t\tfor (var iCV = 0; iCV < self.columns.length; iCV++) {\r\n\t\t\t\t\r\n\t\t\t\tvar isMeasure = (self.columns[iCV].getAttribute(\"isMeasure\") != undefined)\r\n\t\t\t\t\r\n\t\t\t\tif (isMeasure)\r\n\t\t\t\t\txml = xml + '<OLAPMeasure> ';\r\n\t\t\t\telse\r\n\t\t\t\t\txml = xml + '<OLAPDimension> ';\r\n\r\n\t\t\t\txml = xml + OAT.createXMLDimensionInfo(self, iCV);\r\n\r\n\t\t\t\tvar columnaentabla = 0\r\n\t\t\t\tfor (var celdaHeader = 0; celdaHeader < self.header.cells.length; celdaHeader++){\r\n\t\t\t\t\tif (self.header.cells[celdaHeader].dataField == self.columns[iCV].getAttribute(\"dataField\")){ \r\n\t\t\t\t\t\tcolumnaentabla = celdaHeader\r\n\t\t\t\t\t\tif (self.header.cells[celdaHeader].html.style.display == \"none\") {\r\n\t\t\t\t\t\t\txml = xml + '<hidden>true</hidden>'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (self.columns[iCV].getAttribute(\"picture\") === \"\") {\r\n\t\t\t\t\txml = xml + '<picture/> '\r\n\t\t\t\t} else {\r\n\t\t\t\t\txml = xml + '<picture>' + self.columns[iCV].getAttribute(\"picture\") + '</picture> ';\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (self.columns[iCV].getAttribute(\"format\") === \"\") {\r\n\t\t\t\t\txml = xml + '<format/> ';\r\n\t\t\t\t} else {\r\n\t\t\t\t\txml = xml + '<format>' + self.columns[iCV].getAttribute(\"format\") + '</format> ';\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tvar cantVisibles = 0\r\n\t\t\t\tvar located = false\r\n\t\t\t\tvar pos = -1;\r\n\t\t\t\tfor (var colGrid = 0; (colGrid < OAT_JS.grid.gridData[self.UcId].columnDataField.length) && (!located); colGrid++)\r\n\t\t\t\t{\r\n\t\t\t\t\tvar dataFieldColumn = OAT_JS.grid.gridData[self.UcId].columnDataField[colGrid];\r\n\t\t\t\t\tvar isHidden = false;\r\n\t\t\t\t\tfor (var columnI = 0; columnI < self.columns.length; columnI++){\r\n\t\t\t\t\t\tif (dataFieldColumn == self.columns[columnI].getAttribute(\"dataField\"))\r\n\t\t\t\t\t\t\tisHidden = (self.columns[columnI].getAttribute(\"visible\").toLowerCase() == \"never\")\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!isHidden)\r\n\t\t\t\t\t\tcantVisibles=cantVisibles+1\r\n\t\t\t\t\tif (dataFieldColumn==self.columns[iCV].getAttribute(\"dataField\")){\r\n\t\t\t\t\t\tlocated=true;\r\n\t\t\t\t\t\tif (!isHidden) pos = cantVisibles\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (pos>0)\r\n\t\t\t\t\txml = xml + '<position>' + pos + '</position> ';\r\n\t\t\t\telse\r\n\t\t\t\t\txml = xml + '<position/>'\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tif (OAT_JS.grid.gridData[self.UcId].dataFieldOrder == self.columns[iCV].getAttribute(\"dataField\")){\r\n\t\t\t\t\tif (OAT_JS.grid.gridData[self.UcId].orderType == \"Descending\")\r\n\t\t\t\t\t\txml = xml + '<order>descending</order> '\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\txml = xml + '<order>ascending</order> '\r\n\t\t\t\t\t\r\n\t\t\t\t} else {\r\n\t\t\t\t\txml = xml + '<order>none</order> '\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\t\t\t\t\r\n\r\n\t\t\t\txml = xml + '<customOrder/> ';\r\n\t\t\t\txml = xml + '<include> ';\r\n\r\n\t\t\t\tvar previusValue = [];\r\n\t\t\t\tfor (var i = 0; i < self.rows.length; i++) {\r\n\t\t\t\t\tif (self.rows[i].cells[columnaentabla] != undefined) {\r\n\t\t\t\t\t\tif (previusValue.findIndex(self.rows[i].cells[columnaentabla].options.value) === -1) {\r\n\t\t\t\t\t\t\tif (self.conditions[iCV].blackList.findIndex(self.rows[i].cells[columnaentabla].options.value) === -1) {\r\n\t\t\t\t\t\t\t\txml = xml + '<value>' + self.rows[i].cells[columnaentabla].options.value + '</value> ';\r\n\t\t\t\t\t\t\t\tpreviusValue.push(self.rows[i].cells[columnaentabla].options.value);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\txml = xml + '<value>TOTAL</value> </include> <collapse/> ';\r\n\r\n\t\t\t\tif (isMeasure)\r\n\t\t\t\t\txml = xml + '</OLAPMeasure>';\r\n\t\t\t\telse\r\n\t\t\t\t\txml = xml + ' </OLAPDimension>';\r\n\t\t\t}\r\n\r\n\t\t\txml = xml + \"</OLAPCube>\";\r\n\r\n\t\t\treturn xml;\r\n\t\t}\r\n\r\n\t\tself.init();\r\n\r\n\r\n\r\n\r\n\t\tvar itvl = setInterval(function () {\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tif ((jQuery(\"#\" + self.controlName).length > 0) && (jQuery(\"#\" + self.controlName)[0].getAttribute(\"class\") === \"oatgrid\")) {\r\n\t\t\t\tvar actual_rowsPerPage = 0;\r\n\t\t\t\tif (jQuery(\"#\" + self.controlName + \"tablePagination_rowsPerPage\").length > 0) {\r\n\r\n\t\t\t\t\tif (!OAT_JS.grid.gridData[self.UcId].autoResize){\r\n\t\t\t\t\t\tvar containerWidth = jQuery(\"#\" + self.ContainerName)[0].clientWidth\r\n\r\n\t\t\t\t\t\tjQuery(\"#\" + self.controlName).css({\r\n\t\t\t\t\t\t\twidth: containerWidth + \"px\"\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tcontainerWidth = jQuery(\"#\" + self.controlName)[0].clientWidth\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\r\n\t\t\t\t\tactual_rowsPerPage = parseInt(jQuery(\"#\" + self.controlName + \"tablePagination_rowsPerPage\")[0].value);\r\n\t\t\t\t\tif (!isNaN(actual_rowsPerPage)) {\r\n\t\t\t\t\t\tif (self.rowsPerPage != actual_rowsPerPage) {\r\n\t\t\t\t\t\t\tvar stateChange = (self.rowsPerPage != \"\")\r\n\t\t\t\t\t\t\tself.rowsPerPage = actual_rowsPerPage;\r\n\t\t\t\t\t\t\tvar conteiner = {\r\n\t\t\t\t\t\t\t\tgrid: self\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tself.rowsPerPage = actual_rowsPerPage;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar wd2 = containerWidth;\r\n\r\n\t\t\t\t\tjQuery(\"#\" + self.controlName + \"_tablePagination\").css({\r\n\t\t\t\t\t\twidth: wd2 + \"px\"\r\n\t\t\t\t\t});\r\n\t\t\t\t\tjQuery(\"#\" + self.controlName + \"_grid_top_div\").css({\r\n\t\t\t\t\t\twidth: wd2 + \"px\"\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\t//ajustar ancho de footer y top div si el contenido sobrepasa al contenedor\r\n\t\t\t\t\tvar widthTable = jQuery(\"#\" + self.controlName)[0].clientWidth\r\n\t\t\t\t\t\r\n\t\t\t\t\tif ((widthTable > (containerWidth + 10)) || (jQuery(\"#\" + self.controlName).closest(\".gxwebcomponent\").length > 0)) {\r\n\t\t\t\t\t\tjQuery(\"#\" + self.controlName + \"_tablePagination\").css({\r\n\t\t\t\t\t\t\twidth: (widthTable+1) + \"px\"\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tjQuery(\"#\" + self.controlName + \"_grid_top_div\").css({\r\n\t\t\t\t\t\t\twidth: (widthTable+1) + \"px\"\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tif (!OAT_JS.grid.gridData[self.UcId].autoResize){\r\n\t\t\t\t\t\tvar containerWidth = jQuery(\"#\" + self.ContainerName)[0].clientWidth\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tjQuery(\"#\" + self.controlName).css({\r\n\t\t\t\t\t\t\twidth: containerWidth + \"px\"\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tcontainerWidth = jQuery(\"#\" + self.controlName)[0].clientWidth\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar wid_topBar = containerWidth;\r\n\r\n\t\t\t\t\tjQuery(\"#\" + self.controlName + \"_grid_top_div\").css({\r\n\t\t\t\t\t\twidth: wid_topBar + \"px\"\r\n\t\t\t\t\t})\r\n\t\t\t\t\tjQuery(\".oatgrid\").css({ marginBottom: \"0px\" })\r\n\r\n\t\t\t\t\t//ajustar ancho de footer y top div si el contenido sobrepasa al contenedor\r\n\t\t\t\t\tvar widthTable = jQuery(\"#\" + self.controlName)[0].clientWidth\r\n\t\t\t\t\t\r\n\t\t\t\t\tif ((widthTable > (containerWidth + 10)) || (jQuery(\"#\" + self.controlName).closest(\".gxwebcomponent\").length > 0)) { \r\n\t\t\t\t\t\tjQuery(\"#\" + self.controlName + \"_grid_top_div\").css({\r\n\t\t\t\t\t\t\twidth: (widthTable+1) + \"px\"\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tjQuery(\".divIeContainer\").css({ opacity: \"1\" });\r\n\r\n\t\t\t\t//actualizar colores\r\n\r\n\t\t\t\tif (jQuery(\"#\" + self.controlName + \" tr\").length < 500) {\r\n\t\t\t\t\tvar nP = 1;\r\n\t\t\t\t\tfor (var i = 1; i < jQuery(\"#\" + self.controlName + \" tr\").length; i++) {\r\n\t\t\t\t\t\tif (jQuery(\"#\" + self.controlName + \" tr\")[i].style.display != \"none\") {\r\n\t\t\t\t\t\t\tif (nP % 2 === 1) {\r\n\t\t\t\t\t\t\t\tjQuery(\"#\" + self.controlName + \" tr\")[i].className = 'odd';\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tjQuery(\"#\" + self.controlName + \" tr\")[i].className = 'even';\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tnP++;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ((jQuery(\"#\" + self.controlName + \"tablePagination_rowsPerPage\").length > 0) && (self.QueryViewerCollection.length === 0)) {\r\n\t\t\t\t\tjQuery(\".pivot_pag_div\").css({\r\n\t\t\t\t\t\tmarginBottom: \"0px\"\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}, 150);\r\n\r\n\r\n\r\n\r\n\t}  /* Grid */\r\n\r\n\tOAT.GridHeader = function (grid, previousTHead) {\r\n\t\tvar self = this;\r\n\t\tthis.cells = [];\r\n\t\tthis.grid = grid;\r\n\t\tif (previousTHead) {\r\n\t\t\tthis.html = previousTHead;\r\n\t\t} else {\r\n\t\t\tthis.html = OAT.Dom.create(\"thead\");\r\n\t\t}\r\n\t\tthis.container = OAT.Dom.create(\"tr\");\r\n\t\tthis.html.appendChild(self.container);\r\n\r\n\t\tthis.clear = function () {\r\n\t\t\tOAT.Dom.clear(self.container);\r\n\t\t\tself.cells = [];\r\n\t\t}\r\n\r\n\t\tthis.addCell = function (params, columnsDataType, index, dataField) {\r\n\t\t\tvar cell = new OAT.GridHeaderCell(self.grid, params, index, dataField);\r\n\t\t\tvar tds = self.container.childNodes;\r\n\r\n\t\t\tif (tds.length && index < tds.length) {\r\n\t\t\t\tself.container.insertBefore(cell.html, tds[index]);\r\n\t\t\t} else { self.container.appendChild(cell.html); }\r\n\r\n\t\t\tself.cells.splice(index, 0, cell);\r\n\t\t\treturn cell;\r\n\t\t}\r\n\r\n\t\tself.removeColumn = function (index) {\r\n\t\t\tOAT.Dom.unlink(self.cells[index].html);\r\n\t\t\tself.cells.splice(index, 1);\r\n\t\t\tfor (var i = 0; i < self.cells.length; i++) { self.cells[i].number = i; }\r\n\t\t}\r\n\t} /* GridHeader */\r\n\r\n\tOAT.GridHeaderCell = function (grid, params_, number, dataField) {\r\n\t\tvar self = this;\r\n\t\tthis.options = {\r\n\t\t\tvalue: \"\",\r\n\t\t\tsortable: 1,\r\n\t\t\t//draggable:1,\r\n\t\t\t//resizable:0,\r\n\t\t\talign: OAT.GridData.ALIGN_START,\r\n\t\t\tsort: OAT.GridData.SORT_NONE,\r\n\t\t\ttype: OAT.GridData.TYPE_AUTO\r\n\t\t}\r\n\r\n\t\tvar params = (typeof (params_) == \"object\" ? params_ : { value: params_ });\r\n\t\tfor (var p in params) { self.options[p] = params[p]; }\r\n\r\n\t\tthis.changeSort = function (type) {\r\n\t\t\tself.options.sort = type;\r\n\t\t\tself.updateSortImage();\r\n\t\t}\r\n\r\n\t\tthis.updateSortImage = function () {\r\n\t\t\tif (!self.sorter) { return; }\r\n\t\t\tvar path = \"none\";\r\n\t\t\tswitch (self.options.sort) {\r\n\t\t\t\tcase OAT.GridData.SORT_NONE: path = \"none\"; break;\r\n\t\t\t\tcase OAT.GridData.SORT_ASC: path = \"asc\"; break;\r\n\t\t\t\tcase OAT.GridData.SORT_DESC: path = \"desc\"; break;\r\n\t\t\t}\r\n\t\t\tself.sorter.className = \"table-sort-image table-sort-\" + path;\r\n\t\t\tjQuery(self.sorter).find(\"i\")[0].textContent = (path == \"none\") ? \"\" : (path == \"asc\") ? \"arrow_drop_up\" : \"arrow_drop_down\";\r\n\t\t}\r\n\r\n\t\tthis.signal = 0;\r\n\t\tthis.number = number;\r\n\t\tthis.grid = grid;\r\n\t\tthis.dataField = dataField;\r\n\r\n\t\tthis.html = OAT.Dom.create(\"td\"); /* cell */\r\n\t\tthis.container = OAT.Dom.create(\"div\", { position: \"relative\" }); /* cell interior */\r\n\t\tthis.value = OAT.Dom.create(\"div\", { overflow: \"hidden\" });\r\n\t\tOAT.Dom.addClass(self.value, \"header_value\");\r\n\r\n\t\tOAT.addTextNode(this.value, params.value.replace(/ /g, \"\\u00A0\"))\r\n\t\tthis.value.setAttribute(\"title_v\", params.value);\r\n\t\tthis.value.setAttribute(\"dataField\", dataField);\r\n\t\tthis.html.setAttribute(\"title_v\", params.value);\r\n\t\tthis.html.setAttribute(\"dataField\", dataField);\r\n\r\n\t\tvar divIcon = OAT.Dom.create(\"div\");\r\n\t\tdivIcon.className = \"div_settings\";\r\n\t\tOAT.addImageNode(divIcon, \"settings\", \"\");\r\n\t\tOAT.Dom.append([self.html, self.container], [self.container, self.value], [self.value, divIcon]);\r\n\t\t\r\n\t\tif (self.options.sortable) {\r\n\t\t\tself.html.style.cursor = \"pointer\";\r\n\t\t\tself.sorter = OAT.Dom.create(\"div\", { position: \"absolute\", right: \"6px\", bottom: \"4px\" });\r\n\t\t\tOAT.addImageNode(self.sorter, \"arrow_drop_up\", \"\");\r\n\t\t\t\r\n\t\t\tself.container.appendChild(self.sorter);\r\n\t\t\tself.updateSortImage();\r\n\t\t\tvar divCont;\r\n\t\t\tif (OAT.isIE()) {\r\n\t\t\t\tvar className = \"oatfilterwindowGrid\"\r\n\t\t\t\tif (grid.isSD) { //android\r\n\t\t\t\t\tdivCont = OAT.Dom.create(\"div\", \"\", \"oatfilterwindowGrid oatfilterwindow_small\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdivCont = OAT.Dom.create(\"div\", \"\", \"oatfilterwindowGrid\");\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tvar className = \"oatfilterwindow\"\r\n\t\t\t\tif (grid.isSD) {//android\r\n\t\t\t\t\tdivCont = OAT.Dom.create(\"div\", \"\", \"oatfilterwindow oatfilterwindow_small\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdivCont = OAT.Dom.create(\"div\", \"\", \"oatfilterwindow\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tOAT.Anchor.assign(self.container, {\r\n\t\t\t\ttitle: \" \",\r\n\t\t\t\tcontent: divCont,\r\n\t\t\t\tresult_control: false,\r\n\t\t\t\tactivation: \"click\",\r\n\t\t\t\ttype: OAT.WinData.TYPE_RECT,\r\n\t\t\t\twidth: \"auto\",\r\n\t\t\t\tcontainerQuery: self.grid.QueryViewerCollection[IdForQueryViewerCollection].ControlName + \"-table\" + \" FilterPopup \"\r\n\t\t\t\t\r\n\t\t\t});\r\n\t\t\tvar callback = function (event) {\r\n\t\t\t\tvar type = OAT.GridData.SORT_NONE;\r\n\t\t\t\tswitch (self.options.sort) {\r\n\t\t\t\t\tcase OAT.GridData.SORT_NONE: type = OAT.GridData.SORT_ASC; break;\r\n\t\t\t\t\tcase OAT.GridData.SORT_ASC: type = OAT.GridData.SORT_DESC; break;\r\n\t\t\t\t\tcase OAT.GridData.SORT_DESC: type = OAT.GridData.SORT_ASC; break;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (OAT_JS.grid.gridData[self.grid.UcId].differentValuesPaginationInfo[dataField].previousPage == 0)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tOAT_JS.grid.initValueRead(self.grid.UcId, 0, dataField)\r\n\t\t\t\t\t\tjQuery(\".oat_winrect_container\").css({ left:  \"-10000000px\", top: \"-10000000px\" })\r\n\t\t\t\t\t\tvar clickEvent = jQuery.extend(true, {}, event);\r\n\t\t\t\t\t\tvar wait = function(){\r\n\t\t\t\t\t\t\tif (OAT_JS.grid.gridData[self.grid.UcId].differentValuesPaginationInfo[dataField].previousPage == 0) {\r\n\t\t\t\t\t\t\t\tsetTimeout( wait , 100)\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tOAT.showPopup(clickEvent, self, type, divCont);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\twait();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tOAT.showPopup(event, self, type, divCont);\r\n\t\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\tOAT.Event.attach(self.container, \"click\", callback);\r\n\r\n\t\t}\r\n\r\n\r\n\r\n\t\tswitch (self.options.align) {\r\n\t\t\tcase OAT.GridData.ALIGN_START: self.html.style.textAlign = \"start\"; break;\r\n\t\t\tcase OAT.GridData.ALIGN_CENTER: self.html.style.textAlign = \"center\"; break;\r\n\t\t\tcase OAT.GridData.ALIGN_END: self.html.style.textAlign = \"end\"; break;\r\n\t\t}\r\n\r\n\t\tvar mouseover = function (event) { OAT.Dom.addClass(self.html, \"hover\"); }\r\n\t\tvar mouseout = function (event) { OAT.Dom.removeClass(self.html, \"hover\"); }\r\n\t\tOAT.Event.attach(self.html, \"mouseover\", mouseover);\r\n\t\tOAT.Event.attach(self.html, \"mouseout\", mouseout);\r\n\t} /* GridHeaderCell */\r\n\r\n\tOAT.GridRow = function (grid, number) {\r\n\t\tvar self = this;\r\n\r\n\t\tthis.clear = function () {\r\n\t\t\tOAT.Dom.clear(self.html);\r\n\t\t\tself.cells = [];\r\n\t\t}\r\n\r\n\t\tthis.removeColumn = function (index) {\r\n\t\t\tOAT.Dom.unlink(self.cells[index].html);\r\n\t\t\tself.cells.splice(index, 1);\r\n\t\t}\r\n\t\tthis.isDecimal = function (expression, max) {\r\n\t\t\tvar decimal = /^[0-9]+(\\.[0-9]+)+$/;\r\n\t\t\tif (expression.match(decimal)) {\r\n\t\t\t\treturn true;\r\n\t\t\t} else {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.addCell = function (params, columnsDataType, defaultPicture, customPicture, conditionalFormatsColumns, formatValues, customFormat, numCol, index, cellVisible) {\r\n\t\t\tvar i = (!index ? self.cells.length : index);\r\n\t\t\tif (params == undefined) {\r\n\t\t\t\tparams = \"\"\r\n\t\t\t}\r\n\r\n\t\t\tvar cell = new OAT.GridRowCell(params, i, columnsDataType, defaultPicture, customPicture, conditionalFormatsColumns, formatValues, customFormat, numCol, cellVisible);\r\n\t\t\tvar tds = self.html.childNodes;\r\n\t\t\tif (tds.length && i != tds.length) {\r\n\t\t\t\tself.html.insertBefore(cell.html, tds[i]);\r\n\t\t\t\tif (!cellVisible) tds[i].style.display = \"none\"\r\n\t\t\t} else {\r\n\t\t\t\tself.html.appendChild(cell.html);\r\n\t\t\t\tif (!cellVisible) cell.html.style.display = \"none\"\r\n\t\t\t}\r\n\r\n\t\t\tOAT.setClickEventHandlers(self, tds[tds.length - 1], params, \"DIMENSION\", numCol, self.grid.rows.length);\r\n\r\n\t\t\tself.cells.splice(i, 0, cell);\r\n\t\t\treturn cell.value;\r\n\t\t}\r\n\r\n\t\tthis.select = function () {\r\n\t\t\tself.selected = 1;\r\n\t\t\t//OAT.Dom.addClass(self.html, \"selected\");\r\n\t\t}\r\n\r\n\t\tthis.deselect = function () {\r\n\t\t\tself.selected = 0;\r\n\t\t\tOAT.Dom.removeClass(self.html, \"selected\");\r\n\t\t}\r\n\r\n\t\tthis.grid = grid; /* parent */\r\n\t\tthis.cells = [];\r\n\t\tthis.html = OAT.Dom.create(\"tr\");\r\n\t\tthis.selected = 0;\r\n\r\n\t\tOAT.Dom.addClass(self.html, (number % 2 ? \"even\" : \"odd\"));\r\n\r\n\t\tvar mouseover = function (event) { OAT.Dom.addClass(self.html, \"hover\"); }\r\n\t\tvar mouseout = function (event) { OAT.Dom.removeClass(self.html, \"hover\"); }\r\n\t\tvar click = function (event) {\r\n\t\t\tif (!event.shiftKey && !event.ctrlKey) {\r\n\t\t\t\t/* deselect all */\r\n\t\t\t\tfor (var i = 0; i < self.grid.rows.length; i++) {\r\n\t\t\t\t\tvar r = self.grid.rows[i];\r\n\t\t\t\t\tif (r != self) { r.deselect(); }\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (event.shiftKey) {\r\n\t\t\t\t/* select all above */\r\n\t\t\t\tvar firstAbove = -1;\r\n\t\t\t\tvar lastBelow = -1;\r\n\t\t\t\tvar done = 0;\r\n\t\t\t\tfor (var i = 0; i < self.grid.rows.length; i++) {\r\n\t\t\t\t\tvar r = self.grid.rows[i];\r\n\t\t\t\t\tif (r != self) {\r\n\t\t\t\t\t\tif (!done && r.selected) { firstAbove = i; } /* first selected above */\r\n\t\t\t\t\t\tif (!done && firstAbove != -1) { r.select(); }\r\n\t\t\t\t\t\tif (done && r.selected) { lastBelow = i; } /* last selected below */\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdone = 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t} /* all rows */\r\n\t\t\t\t/* if none are above, then try below */\r\n\t\t\t\tif (firstAbove == -1 && lastBelow != -1) {\r\n\t\t\t\t\tvar done = 0;\r\n\t\t\t\t\tfor (var i = 0; i < self.grid.rows.length; i++) {\r\n\t\t\t\t\t\tvar r = self.grid.rows[i];\r\n\t\t\t\t\t\tif (r == self) { done = 1; }\r\n\t\t\t\t\t\tif (done && r != self && i < lastBelow) { r.select(); }\r\n\t\t\t\t\t} /* all rows */\r\n\t\t\t\t} /* below */\r\n\t\t\t} /* if shift */\r\n\r\n\t\t\tself.selected ? self.deselect() : self.select();\r\n\t\t}\r\n\r\n\t\tOAT.Event.attach(self.html, \"mouseover\", mouseover);\r\n\t\tOAT.Event.attach(self.html, \"mouseout\", mouseout);\r\n\t\tOAT.Event.attach(self.html, \"click\", click);\r\n\r\n\t}      /* GridRow */\r\n\r\n\tOAT.GridRowCell = function (params_, number, columnsDataType, defaultPicture, customPicture, conditionalFormatsColumns, formatValues, customFormat, numCol, visible) {\r\n\t\tvar self = this;\r\n\r\n\t\tthis.options = {\r\n\t\t\tvalue: \"\",\r\n\t\t\talign: OAT.GridData.ALIGN_START\r\n\t\t}\r\n\r\n\t\tvar params = (typeof (params_) == \"object\" ? params_ : { value: params_ });\r\n\t\tfor (p in params) { self.options[p] = params[p]; }\r\n\r\n\t\tthis.html = OAT.Dom.create(\"td\");\r\n\t\tthis.container = OAT.Dom.create(\"div\");\r\n\t\tthis.value = OAT.Dom.create(\"div\", { overflow: \"hidden\" });\r\n\t\tOAT.Dom.addClass(self.value, \"row_value\");\r\n\r\n\t\tOAT.addTextNode(this.value, OAT.ApplyPictureValue(self.options.value, columnsDataType, defaultPicture, customPicture).trim().replace(/ /g, \"\\u00A0\"))\r\n\t\t\r\n\t\tvar cellvalue =  self.options.value\r\n\t\tif (columnsDataType == \"date\") {\r\n\t\t\tcellvalue = OAT.ApplyPictureValue(self.options.value, columnsDataType, defaultPicture, customPicture)\r\n\t\t}\r\n\t\tthis.html = OAT.applyFormatValues(this.html, cellvalue, columnsDataType, numCol, formatValues, conditionalFormatsColumns, customFormat, defaultPicture); /* Apply Format */\r\n\r\n\t\tthis.html.setAttribute(\"title\", OAT.ApplyPictureValue(self.options.value, columnsDataType, defaultPicture, customPicture));//self.options.value);\r\n\t\tOAT.Dom.append([self.html, self.container], [self.container, self.value]);\r\n\t\tthis.html.setAttribute(\"sin_pictureValue\", params_);\r\n\t\t//align numbers right\r\n\t\tif ((columnsDataType != \"character\") && (columnsDataType != \"guid\")){\r\n\t\t\tif (!isNaN(self.options.value)) {\r\n\t\t\t\tself.options.align = 4; //right\r\n\t\t\t}\r\n\t\t\tif (self.options.value) {\r\n\t\t\t\tself.options.align = 4; //right\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (columnsDataType === 'date') {\r\n\t\t\tself.options.align = 4;\r\n\t\t}\r\n\t\tswitch (self.options.align) {\r\n\t\t\tcase OAT.GridData.ALIGN_START: self.html.style.textAlign = \"start\"; break;\r\n\t\t\tcase OAT.GridData.ALIGN_CENTER: self.html.style.textAlign = \"center\"; break;\r\n\t\t\tcase OAT.GridData.ALIGN_END: self.html.style.textAlign = \"end\"; break;\r\n\t\t\tcase OAT.GridData.ALIGN_RIGHT: self.html.style.textAlign = \"right\"; break;\r\n\t\t}\r\n\r\n\t}         /* GridRowCell */\r\n\r\n\tOAT.underRecursionStyle = [];\r\n\tOAT.applyFormatValues = function (td, value, datatype, columnNumber, formatValues, conditionalFormatsColumns, customFormat) { /* Format for dimensions (\"header columns\") */\r\n\t\tvar measureDataType = datatype;\r\n\r\n\t\t//apply default format\r\n\t\tvar defaultFormats = customFormat[columnNumber];\r\n\t\tif ((defaultFormats != null) && (defaultFormats != \"\")) {\r\n\t\t\ttd = OAT.setStyleValues(td, defaultFormats);\r\n\t\t}\r\n\t\t//apply format value\r\n\t\tif (OAT.underRecursionStyle.length > 0) {\r\n\t\t\tfor (var i = 0; i < OAT.underRecursionStyle.length; i++) {\r\n\t\t\t\ttd = OAT.setStyleValues(td, OAT.underRecursionStyle[i].format);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor (var i = 0; i < formatValues.length; i++) {\r\n\t\t\tif (formatValues[i].columnNumber == columnNumber) { //a format for this column\r\n\t\t\t\tif (formatValues[i].value === value.trimpivot()) {\r\n\t\t\t\t\ttd = OAT.setStyleValues(td, formatValues[i].format);\r\n\t\t\t\t\tif ((self.formatValues[i].recursive != undefined) && (self.formatValues[i].recursive == \"yes\")) {\r\n\t\t\t\t\t\tOAT.underRecursionStyle.push(formatValues[i])\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t//apply conditional values\r\n\t\tvar equal = [];\r\n\t\tvar notequal = [];\r\n\t\tvar greaterThan = [];\r\n\t\tvar greaterOrEqual = [];\r\n\t\tvar lessThan = [];\r\n\t\tvar lessOrEqual = [];\r\n\t\tvar greaterOrEqual = [];\r\n\t\tvar between = [];\r\n\t\tfor (var i = 0; i < conditionalFormatsColumns.length; i++) {\r\n\t\t\tif (conditionalFormatsColumns[i].columnNumber == columnNumber) {\r\n\t\t\t\tif (conditionalFormatsColumns[i].operation1 == \"equal\") {\r\n\t\t\t\t\tif ((measureDataType === \"real\") || (measureDataType === \"integer\")) {\r\n\t\t\t\t\t\tequal[0] = parseFloat(conditionalFormatsColumns[i].value1);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tequal[0] = conditionalFormatsColumns[i].value1\r\n\t\t\t\t\t}\r\n\t\t\t\t\tequal[1] = conditionalFormatsColumns[i].format;\r\n\t\t\t\t}\r\n\t\t\t\tif (conditionalFormatsColumns[i].operation1 == \"notequal\") {\r\n\t\t\t\t\tif ((measureDataType === \"real\") || (measureDataType === \"integer\")) {\r\n\t\t\t\t\t\tnotequal[0] = parseFloat(conditionalFormatsColumns[i].value1);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tnotequal[0] = conditionalFormatsColumns[i].value1\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnotequal[1] = conditionalFormatsColumns[i].format;\r\n\t\t\t\t}\r\n\t\t\t\tif (conditionalFormatsColumns[i].operation1 == \"less\") {\r\n\t\t\t\t\tif ((measureDataType === \"real\") || (measureDataType === \"integer\")) {\r\n\t\t\t\t\t\tlessThan[0] = parseFloat(conditionalFormatsColumns[i].value1);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tlessThan[0] = conditionalFormatsColumns[i].value1;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlessThan[1] = conditionalFormatsColumns[i].format;\r\n\t\t\t\t}\r\n\t\t\t\tif (conditionalFormatsColumns[i].operation1 == \"lessequal\") {\r\n\t\t\t\t\tif ((measureDataType === \"real\") || (measureDataType === \"integer\")) {\r\n\t\t\t\t\t\tlessOrEqual[0] = parseFloat(conditionalFormatsColumns[i].value1);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tlessOrEqual[0] = conditionalFormatsColumns[i].value1\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlessThan[1] = conditionalFormatsColumns[i].format;\r\n\t\t\t\t}\r\n\t\t\t\tif (conditionalFormatsColumns[i].operation1 == \"greater\") {\r\n\t\t\t\t\tif ((measureDataType === \"real\") || (measureDataType === \"integer\")) {\r\n\t\t\t\t\t\tgreaterThan[0] = parseFloat(conditionalFormatsColumns[i].value1);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tgreaterThan[0] = conditionalFormatsColumns[i].value1;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tgreaterThan[1] = conditionalFormatsColumns[i].format;\r\n\t\t\t\t}\r\n\t\t\t\tif ((conditionalFormatsColumns[i].operation1 == \"greaterequal\") && (conditionalFormatsColumns[i].operation2 == undefined)) { \r\n\t\t\t\t\tif ((measureDataType === \"real\") || (measureDataType === \"integer\")) {\r\n\t\t\t\t\t\tgreaterOrEqual[0] = parseFloat(conditionalFormatsColumns[i].value1);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tgreaterOrEqual[0] = conditionalFormatsColumns[i].value1;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tgreaterThan[1] = conditionalFormatsColumns[i].format;\r\n\t\t\t\t}\r\n\t\t\t\tif (conditionalFormatsColumns[i].operation2 && conditionalFormatsColumns[i].operation1 == \"greaterequal\") {\r\n\t\t\t\t\t//greaterOrEqual = []\r\n\t\t\t\t\tif ((measureDataType === \"real\") || (measureDataType === \"integer\")) {\r\n\t\t\t\t\t\tbetween[0] = parseFloat(conditionalFormatsColumns[i].value1);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tbetween[0] = conditionalFormatsColumns[i].value1;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (conditionalFormatsColumns[i].operation2 && conditionalFormatsColumns[i].operation2 == \"lessequal\") {\r\n\t\t\t\t\t\tif ((measureDataType === \"real\") || (measureDataType === \"integer\")) {\r\n\t\t\t\t\t\t\tbetween[1] = parseFloat(conditionalFormatsColumns[i].value2);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tbetween[1] = conditionalFormatsColumns[i].value2;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbetween[2] = conditionalFormatsColumns[i].format;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar comparisons = new Array(3);\r\n\r\n\t\tif (measureDataType === \"real\") {\r\n\t\t\tvalue = parseFloat(value);\r\n\t\t\tif ((greaterThan[0] != undefined) && (greaterThan[0] != \"\")) {\r\n\t\t\t\tcomparisons[0] = parseFloat(greaterThan[0]);\r\n\t\t\t}\r\n\t\t\tif ((lessThan[0] != undefined) && (lessThan[0] != \"\")) {\r\n\t\t\t\tcomparisons[1] = parseFloat(lessThan[0]);\r\n\t\t\t}\r\n\t\t\tif ((between[0] != undefined) && (between[0] != \"\")) {\r\n\t\t\t\tcomparisons[2] = parseFloat(between[0]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (measureDataType === \"integer\") {\r\n\t\t\tvalue = parseInt(value);\r\n\t\t\tif ((greaterThan[0] != undefined) && (greaterThan[0] != \"\")) {\r\n\t\t\t\tcomparisons[0] = parseInt(greaterThan[0]);\r\n\t\t\t}\r\n\t\t\tif ((lessThan[0] != undefined) && (lessThan[0] != \"\")) {\r\n\t\t\t\tcomparisons[1] = parseInt(lessThan[0]);\r\n\t\t\t}\r\n\t\t\tif ((between[0] != undefined) && (between[0] != \"\")) {\r\n\t\t\t\tcomparisons[2] = parseInt(between[0]);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\r\n\t\tif (measureDataType === \"date\") {\r\n\t\t\tvar dates = value.split(\"-\");\r\n\r\n\t\t\tvar dateElements = new Array(3);\r\n\t\t\tdateElements[0] = parseInt(dates[0]);\r\n\t\t\tdateElements[1] = parseInt(dates[1]);\r\n\t\t\tdateElements[2] = parseInt(dates[2]);\r\n\r\n\t\t\ttry {\r\n\t\t\t\tif ((equal[0] != undefined) || (greaterOrEqual[0] != undefined) || (lessOrEqual[0] != undefined)) {\r\n\t\t\t\t\tvar cmpar;\r\n\t\t\t\t\tif (equal[0] != undefined) {\r\n\t\t\t\t\t\tcmpar = equal[0].split(\"-\");\r\n\t\t\t\t\t} else if (greaterOrEqual[0] != undefined) {\r\n\t\t\t\t\t\tcmpar = greaterOrEqual[0].split(\"-\");\r\n\t\t\t\t\t} else if (greaterOrEqual[0] != undefined) {\r\n\t\t\t\t\t\tcmpar = lessOrEqual[0].split(\"-\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar cmparElements = new Array(3);\r\n\t\t\t\t\tcmparElements[1] = parseInt(cmpar[1]);\r\n\t\t\t\t\tcmparElements[2] = parseInt(cmpar[2]);\r\n\t\t\t\t\tcmparElements[0] = parseInt(cmpar[0]);\r\n\r\n\t\t\t\t\tif ((cmparElements[0] == dateElements[0]) || ((cmparElements[0] == dateElements[0]) && (cmparElements[1] == dateElements[1]))) {\r\n\t\t\t\t\t\tif (equal[1] != undefined)\r\n\t\t\t\t\t\t\ttd = OAT.setStyleValues(td, equal[1]);\r\n\t\t\t\t\t\telse if (greaterThan[1] != undefined)\r\n\t\t\t\t\t\t\ttd = OAT.setStyleValues(td, greaterThan[1]);\r\n\t\t\t\t\t\telse if (lessThan[1] != undefined)\r\n\t\t\t\t\t\t\ttd = OAT.setStyleValues(td, lessThan[1]);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ((notequal[0] != undefined)) {\r\n\t\t\t\t\tvar cmpar = notequal[0].split(\"-\");\r\n\t\t\t\t\tvar cmparElements = new Array(3);\r\n\t\t\t\t\tcmparElements[1] = parseInt(cmpar[1]);\r\n\t\t\t\t\tcmparElements[2] = parseInt(cmpar[2]);\r\n\t\t\t\t\tcmparElements[0] = parseInt(cmpar[0]);\r\n\r\n\t\t\t\t\tif ((cmparElements[0] != dateElements[0]) || ((cmparElements[0] != dateElements[0]) && (cmparElements[1] != dateElements[1]))) {\r\n\t\t\t\t\t\ttd = OAT.setStyleValues(td, notequal[1]);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\tif ((greaterThan[0] != undefined) || (greaterOrEqual[0] != undefined)) {\r\n\t\t\t\t\tvar cmpar;\r\n\t\t\t\t\tif (greaterThan[0].split(\"-\") != undefined) {\r\n\t\t\t\t\t\tcmpar = greaterThan[0].split(\"-\");\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tcmpar = greaterOrEqual[0].split(\"-\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcmparElements[1] = parseInt(cmpar[1]);\r\n\t\t\t\t\tcmparElements[2] = parseInt(cmpar[2]);\r\n\t\t\t\t\tcmparElements[0] = parseInt(cmpar[0]);\r\n\r\n\t\t\t\t\tif ((cmparElements[0] < dateElements[0]) || ((cmparElements[0] <= dateElements[0]) && (cmparElements[1] < dateElements[1]))\r\n\t\t\t\t\t\t|| ((cmparElements[0] <= dateElements[0]) && (cmparElements[1] <= dateElements[1]) && (cmparElements[2] < dateElements[2]))) {\r\n\t\t\t\t\t\ttd = OAT.setStyleValues(td, greaterThan[1]);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\tif ((lessThan[0] != undefined) || (lessOrEqual[0] != undefined)) {\r\n\t\t\t\t\tvar cmpar;\r\n\t\t\t\t\tif (lessThan[0].split(\"-\") != undefined) {\r\n\t\t\t\t\t\tcmpar = lessThan[0].split(\"-\");\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tcmpar = lessOrEqual[0].split(\"-\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcmparElements = new Array(3);\r\n\t\t\t\t\tcmparElements[1] = parseInt(cmpar[1]);\r\n\t\t\t\t\tcmparElements[2] = parseInt(cmpar[2]);\r\n\t\t\t\t\tcmparElements[0] = parseInt(cmpar[0]);\r\n\r\n\t\t\t\t\tif ((cmparElements[0] > dateElements[0]) || ((cmparElements[0] >= dateElements[0]) && (cmparElements[1] > dateElements[1]))\r\n\t\t\t\t\t\t|| ((cmparElements[0] >= dateElements[0]) && (cmparElements[1] >= dateElements[1]) && (cmparElements[2] > dateElements[2]))) {\r\n\t\t\t\t\t\ttd = OAT.setStyleValues(td, lessThan[1]);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ((between[0] != undefined) && (between[1] != undefined)) {\r\n\t\t\t\t\tvar cmpar = between[0].split(\"-\");\r\n\t\t\t\t\tvar cmpar2 = between[1].split(\"-\");\r\n\t\t\t\t\tcmparElements = new Array(3);\r\n\t\t\t\t\tcmparElements2 = new Array(3);\r\n\t\t\t\t\tcmparElements[1] = parseInt(cmpar[1]);\r\n\t\t\t\t\tcmparElements[2] = parseInt(cmpar[2]);\r\n\t\t\t\t\tcmparElements[0] = parseInt(cmpar[0]);\r\n\r\n\t\t\t\t\tcmparElements2[1] = parseInt(cmpar2[1]);\r\n\t\t\t\t\tcmparElements2[2] = parseInt(cmpar2[2]);\r\n\t\t\t\t\tcmparElements2[0] = parseInt(cmpar2[0]);\r\n\r\n\t\t\t\t\tif (((cmparElements[0] <= dateElements[0]) || ((cmparElements[0] <= dateElements[0]) && (cmparElements[1] < dateElements[1]))\r\n\t\t\t\t\t\t|| ((cmparElements[0] <= dateElements[0]) && (cmparElements[1] <= dateElements[1]) && (cmparElements[2] < dateElements[2])))\r\n\t\t\t\t\t\t&&\r\n\t\t\t\t\t\t((cmparElements2[0] > dateElements[0]) || ((cmparElements2[0] >= dateElements[0]) && (cmparElements2[1] > dateElements[1]))\r\n\t\t\t\t\t\t\t|| ((cmparElements2[0] >= dateElements[0]) && (cmparElements2[1] >= dateElements[1]) && (cmparElements2[2] > dateElements[2])))\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\ttd = OAT.setStyleValues(td, between[2]);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} catch (ERROR) {\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif (measureDataType != \"date\") {\r\n\t\t\tif ((equal[0] != undefined) && (value == equal[0])) {\r\n\t\t\t\ttd = OAT.setStyleValues(td, equal[1]);\r\n\t\t\t}\r\n\t\t\tif ((notequal[0] != undefined) && (value != notequal[0])) {\r\n\t\t\t\ttd = OAT.setStyleValues(td, notequal[1]);\r\n\t\t\t}\r\n\t\t\tif (((greaterThan[0] != undefined) && (value > greaterThan[0])) ||\r\n\t\t\t\t((greaterOrEqual[0] != undefined) && (value >= greaterOrEqual[0]))) {\r\n\t\t\t\ttd = OAT.setStyleValues(td, greaterThan[1]);\r\n\t\t\t}\r\n\t\t\tif (((lessThan[0] != undefined) && (value < lessThan[0])) ||\r\n\t\t\t\t((lessOrEqual[0] != undefined) && (value <= lessOrEqual[0]))) {\r\n\t\t\t\ttd = OAT.setStyleValues(td, lessThan[1]);\r\n\t\t\t}\r\n\t\t\tif ((between[0] != undefined && between[1] != undefined) && (value >= between[0] && value <= between[1])) {\r\n\t\t\t\ttd = OAT.setStyleValues(td, between[2]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn td;\r\n\t}\r\n\r\n\tOAT.setStyleValues = function (elem, styleValues) {\r\n\t\tif (styleValues == undefined)\r\n\t\t\treturn elem;\r\n\t\tfunction hexToRgb(hex) {\r\n\t\t\t// Expand shorthand form (e.g. \"03F\") to full form (e.g. \"0033FF\")\r\n\t\t\tvar shorthandRegex = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\r\n\t\t\thex = hex.replace(shorthandRegex, function (m, r, g, b) {\r\n\t\t\t\treturn r + r + g + g + b + b;\r\n\t\t\t});\r\n\r\n\t\t\tvar result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\r\n\t\t\treturn result ? {\r\n\t\t\t\tr: parseInt(result[1], 16),\r\n\t\t\t\tg: parseInt(result[2], 16),\r\n\t\t\t\tb: parseInt(result[3], 16)\r\n\t\t\t} : null;\r\n\t\t}\r\n\r\n\t\tvar styleSplit = styleValues.split(\";\");\r\n\t\tfor (var j = 0; j < styleSplit.length; j++) {\r\n\t\t\tvar particularStyleSplit = styleSplit[j].split(\":\");\r\n\t\t\tvar property = particularStyleSplit[0].replace(/^[\\s]+/, '').replace(/[\\s]+$/, '').replace(/[\\s]{2,}/, ' '); \r\n\t\t\tvar value = particularStyleSplit[1].replace(/^[\\s]+/, '').replace(/[\\s]+$/, '').replace(/[\\s]{2,}/, ' '); \r\n\r\n\t\t\tswitch (property) {\r\n\t\t\t\tcase \"color\": if ((value[0] != undefined) && (value[0] === '#')) {\r\n\t\t\t\t\telem.style.color = 'rgb(' + hexToRgb(value).r + ',' + hexToRgb(value).g + ',' + hexToRgb(value).b + ')'\r\n\t\t\t\t} else {\r\n\t\t\t\t\telem.style.color = value;\r\n\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"fontStyle\": elem.style.fontStyle = value;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"backgroundColor\": elem.style.backgroundColor = value;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"textDecoration\": elem.style.textDecoration = value;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"fontWeight\": elem.style.fontWeight = value;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"fontFamily\": elem.style.fontFamily = value;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"fontVariant\": elem.style.fontVariant = value;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"fontSize\": elem.style.fontSize = value.replace(\"px\", \"\") + \"px\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"textAlign\": elem.style.textAlign = value;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"lineHeight\": elem.style.lineHeight = value;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"textIndent\": elem.style.textIndent = value;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"verticalAlign\": elem.style.verticalAlign = value;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"wordSpacing\": elem.style.wordSpacing = value;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"display\": elem.style.display = value;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"borderThickness\": elem.style.borderThickness = value;\r\n\t\t\t\t\telem.style.borderWidth = value + \"px\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"borderColor\": elem.style.borderColor = value;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"borderWith\": elem.style.borderWith = value;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"borderStyle\": elem.style.borderStyle = value;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"padding\": elem.style.padding = value;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"paddingBottom\": elem.style.paddingBottom = value;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"paddingLeft\": elem.style.paddingLeft = value;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"paddingRight\": elem.style.paddingRight = value;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"paddingTop\": elem.style.paddingTop = value;\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn elem;\r\n\t}\r\n\r\n\tOAT.GenerateFormatDateForGrid = function (value, picture) {\r\n\t\tvar dividepicture = picture.split(\" \");\r\n\t\tvar valueSplit = value[0].split(\"-\");\r\n\t\tvar newValue = \"\"\r\n\t\tswitch (picture) {\r\n\t\t\tcase \"99/99/9999\":\r\n\t\t\t\tnewValue = valueSplit[1] + \"/\" + valueSplit[2] + \"/\" + valueSplit[0];\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"99/99/99\":\r\n\t\t\t\tif (valueSplit[0].length == 4) {\r\n\t\t\t\t\tvalueSplit[0] = valueSplit[0].substr(valueSplit[0].length - 2, 2);\r\n\t\t\t\t}\r\n\t\t\t\tnewValue = valueSplit[1] + \"/\" + valueSplit[2] + \"/\" + valueSplit[0];\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tnewValue = valueSplit[2] + \"/\" + valueSplit[1] + \"/\" + valueSplit[0];\r\n\t\t}\r\n\t\treturn newValue;\r\n\t}\r\n\r\n\tOAT.HideGridRow = function (_self, colNumber, value) {\r\n\r\n\t\tfor (var i = 0; i < _self.grid.rows.length; i++) {\r\n\t\t\tif (_self.grid.rows[i].cells[colNumber].options.value.toString().trimpivot() === value.toString().trimpivot()) {\r\n\t\t\t\t_self.grid.rows[i].html.style.display = \"none\";\r\n\t\t\t\t_self.grid.rows[i].html.setAttribute('visibQ', 'tf');\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tOAT.ShowGridRow = function (_self, colNumber, value) {\r\n\r\n\t\tfor (var i = 0; i < _self.grid.rows.length; i++) {\r\n\t\t\tif (_self.grid.rows[i].cells[colNumber].options.value.toString().trimpivot() === value.toString().trimpivot()) {\r\n\t\t\t\t_self.grid.rows[i].html.style.display = \"\";\r\n\t\t\t\t_self.grid.rows[i].html.setAttribute('visibQ', 'tt');\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tOAT.RestoreGridRow = function (_self) { /* restore GRID  */\r\n\r\n\t\tfor (var i = 0; i < _self.grid.rows.length; i++) {\r\n\t\t\t//if (_self.grid.rows[i].html.getAttribute('visib')!='fp'){\r\n\t\t\t_self.grid.rows[i].html.style.display = \"\";\r\n\t\t\t//}\r\n\t\t\t_self.grid.rows[i].html.setAttribute('visibQ', 'tt');\r\n\t\t}\r\n\r\n\t\tfor (var colNum = 0; colNum < _self.grid.columnsDataType.length; colNum++) {\r\n\t\t\t_self.grid.conditions[colNum].blackList = [];\r\n\t\t}\r\n\t}\r\n\r\n\tOAT.RestoreGridOrder = function (_self) {\r\n\t\t//for (var colNum = 0; colNum < _self.grid.columnsDataType.length; colNum++){\r\n\t\t//\t\tif (_self.grid.conditions[colNum].sort != 1){\r\n\t\t//\t\t\t_self.grid.sort( colNum, 1, _self.grid.columnsDataType.length -1 - colNum);\t\t\t\t\t\r\n\t\t// \t}\t\t\r\n\t\t//}\r\n\t\t_self.grid.sort(0, 2, _self.grid.columnsDataType.length - 1 - 0);\r\n\t\t_self.grid.sort(0, 1, _self.grid.columnsDataType.length - 1 - 0);\r\n\t}\r\n\r\n\tOAT.RestoreGridColumns = function (_self) {\r\n\t\tfor (var tC = 0; tC < _self.grid.columnsDataType.length; tC++) {\r\n\t\t\t_self.grid.header.cells[tC].html.style.display = \"\";\r\n\t\t\tvar j = 0;\r\n\t\t\tvar numCol = _self.grid.columnsDataType.length - 1 - tC;\r\n\t\t\tfor (j = 0; j < _self.grid.rows.length; j++) {\r\n\t\t\t\t_self.grid.rows[j].cells[numCol].html.style.display = \"\";\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\t\r\n\tOAT.CreateGridRow = function (RowData, GridData, collapse){\r\n\t\tvar dataByField = []; var tempcolumnsDataType = []; var tempforPivotCustomPicture = []; var tempforPivotCustomFormat = []; var tempcolumnVisible = [];\r\n\t\tfor (var p = 0; p < GridData.columnDataField.length; p++) {\r\n\t\t\tvar pos = GridData.originalColumnDataField.indexOf(GridData.columnDataField[p])\r\n\t\t\tdataByField[p] = RowData[pos];\r\n\t\t\ttempcolumnsDataType[p] = GridData.rowsMetadata.columnsDataType[pos];\r\n\t\t\ttempforPivotCustomPicture[p] = GridData.rowsMetadata.forPivotCustomPicture[pos]\r\n\t\t\ttempforPivotCustomFormat[p] = GridData.rowsMetadata.forPivotCustomFormat[pos]\r\n\t\t\ttempcolumnVisible[p] = GridData.columnVisible[pos]\r\n\t\t}\r\n\t\tvar row = GridData.grid.createRow(dataByField, tempcolumnsDataType, GridData.rowsMetadata.defaultPicture,\r\n\t\t\ttempforPivotCustomPicture, GridData.rowsMetadata.conditionalFormatsColumns,\r\n\t\t\tGridData.rowsMetadata.formatValues, tempforPivotCustomFormat, GridData.rowsMetadata.columns,\r\n\t\t\tnull, tempcolumnVisible);\r\n\t\tif (collapse)\r\n\t\t\trow.style.visibility = \"collapse\";\r\n\t}\r\n\t\r\n\tOAT.filterRows = function (grid) {\r\n\r\n\t\tvar conteiner = {\r\n\t\t\tgrid: grid\r\n\t\t}\r\n\r\n\t\tfor (var colNum = 0; colNum < grid.columnsDataType.length; colNum++) {\r\n\r\n\t\t\tfor (var item = 0; item < grid.conditions[colNum].blackList.length; item++) {\r\n\t\t\t\tOAT.HideGridRow(conteiner, colNum, grid.conditions[colNum].blackList[item]);\r\n\t\t\t\tOAT.actualizeBlackList(\"push\", grid, colNum, grid.conditions[colNum].blackList[item], false);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tOAT.actualizeBlackList = function (oper, grid, colNumber, value, serverPaging) { //oper = push add value to blackList\r\n\t\tif (oper === \"push\") {\r\n\t\t\tif (grid.conditions[colNumber].blackList.indexOf(value) === -1)\r\n\t\t\t\tgrid.conditions[colNumber].blackList.push(value);\r\n\t\t} else { //pop\r\n\t\t\tvar index = grid.conditions[colNumber].blackList.indexOf(value);\r\n\t\t\tif (index != -1)\r\n\t\t\t\tgrid.conditions[colNumber].blackList.splice(index, 1);\r\n\t\t}\r\n\r\n\t}\r\n\r\n\r\n\tOAT.showPopup = function (pos, _self, _type, div) {\r\n\r\n\t\tvar toAppend = [];\r\n\r\n\r\n\t\tvar refresh = function () {\r\n\t\t\tjQuery(\".oat_winrect_container\").css({ display: \"none\" });\r\n\t\t}\r\n\r\n\t\tvar colNumber = _self.number;\r\n\t\tif (OAT_JS.grid.gridData[_self.grid.UcId].redrawHeader){\r\n\t\t\tvar columnCount = 0\r\n\t\t\tfor( var t=0; t<_self.grid.columns.length; t++){\r\n\t\t\t\tif (OAT_JS.grid.gridData[_self.grid.UcId].columnVisible[t])\r\n\t\t\t\t\tcolumnCount = columnCount + 1\r\n\t\t\t\tif (_self.grid.columns[t].getAttribute(\"dataField\") == _self.dataField)\r\n\t\t\t\t\tcolNumber = columnCount-1\r\n\t\t\t}\t\t\r\n\t\t}\r\n\r\n\t\tvar coords = pos;\r\n\t\tvar event = pos;\r\n\r\n\t\tif (_self.grid.isSD) { //android\r\n\t\t\tjQuery(\".oat_winrect_container\").css({ left: \"-1500px\", top: jQuery(event.currentTarget).offset().top + \"px\" })\r\n\t\t} else {\r\n\t\t\tjQuery(\".oat_winrect_container\").css({ left: jQuery(event.currentTarget).offset().left + \"px\", top: jQuery(event.currentTarget).offset().top + \"px\" })\r\n\t\t}\r\n\r\n\t\tOAT.Dom.clear(div);\r\n\t\ttoAppend.push(div);\r\n\t\t/* contents */\r\n\r\n\t\t//add title\r\n\t\tjQuery(\".oat_winrect_title\").find(\".winrect_title_label\").remove()\r\n\r\n\t\tvar spantitle = OAT.Dom.create(\"label\");\r\n\t\tif (_self.grid.isSD) { //android\r\n\t\t\tjQuery(\".oat_winrect_container\").addClass(\"oat_winrect_container_small\")\r\n\t\t\tspantitle.setAttribute(\"class\", \"winrect_title_label winrect_title_label_small\");\r\n\t\t} else {\r\n\t\t\tspantitle.setAttribute(\"class\", \"winrect_title_label\");\r\n\t\t}\r\n\t\t\r\n\t\tvar dimension_Title = _self.grid.columns[colNumber].getAttribute(\"displayName\")\r\n\t\tfor(var iC = 0; iC < _self.grid.columns.length; iC++)\r\n\t\t{\r\n\t\t\tif (_self.dataField == _self.grid.columns[iC].getAttribute(\"dataField\"))\r\n\t\t\t{\r\n\t\t\t\tdimension_Title = _self.grid.columns[iC].getAttribute(\"displayName\")\r\n\t\t\t}\r\n\t\t}\r\n\t\tOAT.addTextNode(spantitle, dimension_Title);\r\n\t\t\r\n\t\t//OAT.addTextNode(spantitle, _self.grid.columns[colNumber].getAttribute(\"displayName\"));\r\n\t\tjQuery(\".oat_winrect_title\").append(spantitle)\r\n\r\n\t\t\r\n\t\tvar cached = Math.floor(Math.random() * 10000)\r\n\t\t\r\n\t\tif (!_self.grid.disableColumnSort) {\r\n\t\t\tvar div_order = document.createElement(\"div\");\r\n\t\t\tdiv_order.setAttribute(\"class\", \"first_popup_subdiv\");\r\n\r\n\t\t\tvar asc = OAT.Dom.radio(\"order\");\r\n\t\t\t\r\n\t\t\tvar ascForId = \"pivot_order_asc\" + \"_\" + _self.grid.ContainerName + \"_\" + _self.grid.TableDataFilds[_self.number] + cached;\r\n\t\t\tasc.id = ascForId;\r\n\t\t\tasc.className = \"input_radio_popup\"\r\n\t\t\tasc.checked = (_self.grid.conditions[colNumber].sort === 2);  // _self.grid.conditions[colNumber] puede dar undefined\r\n\t\t\tOAT.Dom.attach(asc, \"change\", function () { });\r\n\t\t\tOAT.Dom.attach(asc, \"click\", function () {\r\n\t\t\t\tvar previousSortValue = _self.grid.conditions[colNumber].sort;\r\n\t\t\t\t_self.grid.sort(colNumber, OAT.GridData.SORT_ASC, _self.number);\r\n\t\t\t\tvar currentSortValue = _self.grid.conditions[colNumber].sort;\r\n\t\t\t\t/*if (qv.util.isGeneXusPreview()) {\r\n\t\t\t\t\tif (currentSortValue != previousSortValue && previousSortValue != OAT.GridData.SORT_NONE) {\t\t// First ascending sort must not fire event\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\tvar datastr = \"<DATA event=\\\"OrderChanged\\\" name=\\\"\" + _self.grid.columns[_self.number].getAttribute(\"name\") + \"\\\" displayName=\\\"\" + _self.grid.columns[_self.number].getAttribute(\"displayName\") + \"\\\"  order=\\\"ascending\\\">\"\r\n\t\t\t\t\t\t\tdatastr = datastr + \"</DATA>\"\r\n\t\t\t\t\t\t\twindow.external.SendText(qv.collection[OAT_JS.grid.gridData[UcId].IdForQueryViewerCollection].ControlName, datastr);\r\n\t\t\t\t\t\t} catch (error) { }\r\n\t\t\t\t\t}\r\n\t\t\t\t}*/\r\n\t\t\t\t\r\n\t\t\t\t\tvar origen = _self.container.parentNode.cellIndex; \r\n\t\t\t\t\tvar dataFieldId;\r\n\t\t\t\t\tif (origen < 0) \r\n\t\t\t\t\t\tdataFieldId = _self.dataField\r\n\t\t\t\t\telse\r\n\t\t\t\t\t    dataFieldId = OAT_JS.grid.gridData[_self.grid.UcId].columnDataField[origen];\r\n\t\t\t\t\tself.getDataForTable(_self.grid.UcId, 1, _self.grid.rowsPerPage, false, dataFieldId, \"Ascending\", \"\", \"\")\r\n\t\t\t\t\r\n\t\t\t\tvar idI = \"i_\" + this.getAttribute(\"id\");\r\n\t\t\t\tvar inputAsc = document.getElementById(idI);\r\n\t\t\t\tinputAsc.textContent = \"radio_button_checked\";\r\n\t\t\t\tvar inputDsc = document.getElementById(idI.replace(\"asc\", \"desc\"));\r\n\t\t\t\tinputDsc.textContent = \"radio_button_unchecked\";\r\n\t\t\t\t\r\n\t\t\t});\r\n\t\t\tdiv_order.appendChild(asc);\r\n\r\n\t\t\tvar alabel = OAT.Dom.create(\"label\");\r\n\t\t\talabel.className = \"first_div_label\";\r\n\t\t\talabel.htmlFor = ascForId;\r\n\t\t\t\r\n\t\t\tvar IStyle = OAT.isIE() ? \"top:-10px;\" : \"\"; \r\n\t\t\tOAT.addImageNode(alabel, (_self.grid.conditions[colNumber].sort === 2)?\"radio_button_checked\":\"radio_button_unchecked\", IStyle, \"i_\"+ascForId);\r\n\t\t\tOAT.addTextNode(alabel, self.translations.GXPL_QViewerJSAscending); //gx.getMessage(\"GXPL_QViewerJSAscending\"))\r\n\t\t\tdiv_order.appendChild(alabel);\r\n\t\t\tdiv_order.appendChild(OAT.Dom.create(\"br\"));\r\n\t\t\t\r\n\t\t\tvar desc = OAT.Dom.radio(\"order\");\r\n\t\t\tvar dscForId = \"pivot_order_desc\" + \"_\" + _self.grid.ContainerName + \"_\" + _self.grid.TableDataFilds[_self.number] + cached;\r\n\t\t\tdesc.id = dscForId;\r\n\t\t\tdesc.className = \"input_radio_popup\"\r\n\t\t\tdesc.checked = (_self.grid.conditions[colNumber].sort === 3);\r\n\t\t\tOAT.Dom.attach(desc, \"change\", function () { });\r\n\t\t\tOAT.Dom.attach(desc, \"click\", function () {\r\n\t\t\t\tvar previousSortValue = _self.grid.conditions[colNumber].sort;\r\n\t\t\t\t_self.grid.sort(colNumber, OAT.GridData.SORT_DESC, _self.number);\r\n\t\t\t\tvar currentSortValue = _self.grid.conditions[colNumber].sort;\r\n\t\t\t\t/*if (qv.util.isGeneXusPreview()) {\r\n\t\t\t\t\tif (currentSortValue != previousSortValue) {\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\tvar datastr = \"<DATA event=\\\"OrderChanged\\\" name=\\\"\" + _self.grid.columns[_self.number].getAttribute(\"name\") + \"\\\" displayName=\\\"\" + _self.grid.columns[_self.number].getAttribute(\"displayName\") + \"\\\"  order=\\\"descending\\\">\"\r\n\t\t\t\t\t\t\tdatastr = datastr + \"</DATA>\"\r\n\t\t\t\t\t\t\twindow.external.SendText(qv.collection[OAT_JS.grid.gridData[UcId].IdForQueryViewerCollection].ControlName, datastr);\r\n\t\t\t\t\t\t} catch (error) { }\r\n\t\t\t\t\t}\r\n\t\t\t\t}*/\r\n\r\n\t\t\t\t\tvar origen = _self.container.parentNode.cellIndex; \r\n\t\t\t\t\tvar dataFieldId;\r\n\t\t\t\t\tif (origen < 0) \r\n\t\t\t\t\t\tdataFieldId = _self.dataField\r\n\t\t\t\t\telse\r\n\t\t\t\t\t    dataFieldId = OAT_JS.grid.gridData[_self.grid.UcId].columnDataField[origen]; //_self.grid.columns[colNumber].getAttribute(\"dataField\"); \r\n\t\t\t\t\tself.getDataForTable(_self.grid.UcId, 1, _self.grid.rowsPerPage, false, dataFieldId, \"Descending\", \"\", \"\");\r\n\t\t\t\t\r\n\t\t\t\tvar idI = \"i_\" + this.getAttribute(\"id\");\r\n\t\t\t\tvar inputDsc = document.getElementById(idI);\r\n\t\t\t\tinputDsc.textContent = \"radio_button_checked\";\r\n\t\t\t\tvar inputAsc = document.getElementById(idI.replace(\"desc\", \"asc\"));\r\n\t\t\t\tinputAsc.textContent = \"radio_button_unchecked\";\r\n\t\t\t\t\r\n\t\t\t});\r\n\t\t\tvar dlabel = OAT.Dom.create(\"label\");\r\n\t\t\tdlabel.className = \"first_div_label\";\r\n\t\t\tdlabel.htmlFor = dscForId;\r\n\t\t\tOAT.addImageNode(dlabel, (_self.grid.conditions[colNumber].sort === 3)?\"radio_button_checked\":\"radio_button_unchecked\", IStyle, \"i_\"+dscForId);\r\n\t\t\tOAT.addTextNode(dlabel, self.translations.GXPL_QViewerJSDescending); //gx.getMessage(\"GXPL_QViewerJSDescending\"))\r\n\r\n\t\t\tdiv_order.appendChild(desc);\r\n\t\t\tdiv_order.appendChild(dlabel);\r\n\r\n\t\t\ttoAppend.push(div_order);\r\n\r\n\t\t\tif (self.header.length > 1) {\r\n\t\t\t\tvar hr4 = OAT.Dom.create(\"hr\", {});\r\n\t\t\t\t//begin drag options\r\n\t\t\t\ttoAppend.push(hr4);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar hr3 = OAT.Dom.create(\"hr\", {});\r\n\r\n\t\t//to left\r\n\t\tvar dragDiv = OAT.Dom.create(\"div\");\r\n\t\tif (_self.grid.disableColumnSort) {\r\n\t\t\tdragDiv.setAttribute(\"class\", \"first_popup_subdiv\");\r\n\t\t}\r\n\t\tif ((_self.container.parentNode.cellIndex > 0)) {\r\n\r\n\t\t\tvar dragDiv_L_sel_div = document.createElement(\"div\");\r\n\t\t\tdragDiv_L_sel_div.setAttribute(\"class\", \"move_item_img\");\r\n\r\n\t\t\tOAT.Dom.attach(dragDiv_L_sel_div, \"click\", function () {\r\n\t\t\t\tvar origen = _self.container.parentNode.cellIndex; //the real position of the item click\r\n\t\t\t\tvar destino = origen - 1;\r\n\t\t\t\t\r\n\t\t\t\twhile ((destino >= 0) && (_self.container.parentNode.parentNode.children[destino].clientWidth == 0))\r\n\t\t\t\t{\r\n\t\t\t\t\tdestino = destino - 1\r\n\t\t\t\t}\r\n\t\t\t\tif (destino == -1) return; \r\n\t\t\t\t\r\n\t\t\t\tvar i1 = 0;\r\n\t\t\t\tvar i2 = 0;\r\n\r\n\t\t\t\tvar strDestino = _self.container.parentNode.parentNode.children[destino].getAttribute('title_v');\r\n\t\t\t\tfor (var i = 0; i < _self.grid.header.cells.length; i++) {\r\n\t\t\t\t\tif (_self.container.children[0].getAttribute('title_v') === _self.grid.header.cells[i].value.firstChild.textContent.replace(/\\u00A0/g, \" \")) {\r\n\t\t\t\t\t\ti1 = i; //pos on cell array\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (strDestino === _self.grid.header.cells[i].value.firstChild.textContent.replace(/\\u00A0/g, \" \")) {\r\n\t\t\t\t\t\ti2 = i;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t_self.grid.header.cells[i1].html.parentNode.insertBefore(_self.grid.header.cells[i1].html, _self.grid.header.cells[i2].html);\r\n\r\n\t\t\t\t\r\n\t\t\t\t\tOAT_JS.grid.gridData[_self.grid.UcId].redrawHeader = true;\r\n\t\t\t\t\tfor (var i = 0; i < _self.grid.rows.length; i++) {\r\n\t\t\t\t\t\t_self.grid.rows[i].cells[i1].html.parentNode.insertBefore(_self.grid.rows[i].cells[i1].html, _self.grid.rows[i].cells[i2].html);\r\n\t\t\t\t\t}\r\n\t\t\t\t\r\n\r\n\t\t\t\tvar dataFieldsPos = [];\r\n\t\t\t\tfor (var idF = 0; idF < jQuery(\"#\" + _self.grid.controlName).find(\"thead td\").length; idF++) {\r\n\t\t\t\t\tdataFieldsPos.push(jQuery(\"#\" + _self.grid.controlName).find(\"thead td\")[idF].getAttribute(\"dataField\"))\r\n\t\t\t\t}\r\n\t\t\t\tOAT_JS.grid.setDataFieldPosition(_self.grid.UcId, dataFieldsPos);\r\n\t\t\t\trefresh();\r\n\t\t\t});\r\n\r\n\t\t\tvar draglabel = OAT.Dom.create(\"label\");\r\n\t\t\tOAT.addTextNode(draglabel, self.translations.GXPL_QViewerJSMoveColumnToLeft); //gx.getMessage(\"GXPL_QViewerJSMoveColumnToLeft\"))\r\n\t\t\tdraglabel.htmlFor = \"move_column_to_left\" + cached;\r\n\t\t\tdragDiv_L_sel_div.appendChild(draglabel);\r\n\r\n\t\t\tOAT.Dom.append([dragDiv, dragDiv_L_sel_div]);\r\n\t\t\tif (_self.container.parentNode.cellIndex >= _self.grid.header.cells.length - 2) { \r\n\t\t\t\ttoAppend.push(dragDiv);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//to right\r\n\t\tif (_self.container.parentNode.cellIndex < _self.grid.header.cells.length - 1) { //si no es la ultima columna\r\n\r\n\t\t\tvar dragDiv_R_sel_div = document.createElement(\"div\");\r\n\t\t\tdragDiv_R_sel_div.setAttribute(\"class\", \"move_item_img\");\r\n\r\n\t\t\tOAT.Dom.attach(dragDiv_R_sel_div, \"click\", function () {\r\n\t\t\t\tvar origen = _self.container.parentNode.cellIndex; //the real position of the item click\r\n\t\t\t\tif (origen == -1){\r\n\t\t\t\t\tfor (var c = 0; c < _self.grid.html.tHead.rows[0].cells.length; c++){\r\n\t\t\t\t\t\tif (_self.container.children[0].getAttribute('title_v') == _self.grid.html.tHead.rows[0].cells[c].getAttribute('title_v')){\r\n\t\t\t\t\t\t\torigen = c;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tvar destino = origen + 1;\r\n\t\t\t\t\r\n\t\t\t\tvar headers = _self.container.parentNode.parentNode\r\n\t\t\t\t\r\n\t\t\t\tif (_self.container.parentNode.parentNode == undefined)\r\n\t\t\t\t\theaders = _self.grid.div.children[1].children[0].children[0]\r\n\t\t\t\t\r\n\t\t\t\twhile ((destino < headers.children.length-1) && (headers.children[destino].clientWidth == 0))\r\n\t\t\t\t{\r\n\t\t\t\t\tdestino = destino + 1\r\n\t\t\t\t}\r\n\t\t\t\tif (destino >= headers.children.length) return;\r\n\t\t\t\t\r\n\t\t\t\tvar i1 = 0;\r\n\t\t\t\tvar i2 = 0;\r\n\r\n\t\t\t\t//var strDestino = _self.container.parentNode.parentNode.children[destino].textContent;\r\n\t\t\t\tvar strDestino;\r\n\t\t\t\tif (_self.container.parentNode.parentNode != undefined){\r\n\t\t\t\t\tstrDestino = _self.container.parentNode.parentNode.children[destino].getAttribute('title_v');\r\n\t\t\t\t} else {\r\n\t\t\t\t\tstrDestino = _self.grid.html.tHead.rows[0].cells[destino].getAttribute('title_v')\r\n\t\t\t\t}\r\n\t\t\t\tfor (var i = 0; i < _self.grid.header.cells.length; i++) {\r\n\t\t\t\t\tif (_self.container.children[0].getAttribute('title_v') /*textContent*/ === _self.grid.header.cells[i].value.firstChild.textContent.replace(/\\u00A0/g, \" \")) {\r\n\t\t\t\t\t\ti1 = i; //pos on cell array\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (strDestino === _self.grid.header.cells[i].value.firstChild.textContent.replace(/\\u00A0/g, \" \")) {\r\n\t\t\t\t\t\ti2 = i;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t_self.grid.header.cells[i1].html.parentNode.insertBefore(_self.grid.header.cells[i2].html, _self.grid.header.cells[i1].html);\r\n\r\n\t\t\t\t\r\n\t\t\t\t\tOAT_JS.grid.gridData[_self.grid.UcId].redrawHeader = true;\r\n\t\t\t\t\tfor (var i = 0; i < _self.grid.rows.length; i++) {\r\n\t\t\t\t\t\t_self.grid.rows[i].cells[i1].html.parentNode.insertBefore(_self.grid.rows[i].cells[i2].html, _self.grid.rows[i].cells[i1].html);\r\n\t\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tvar dataFieldsPos = [];\r\n\t\t\t\tfor (var idF = 0; idF < jQuery(\"#\" + _self.grid.controlName).find(\"thead td\").length; idF++) {\r\n\t\t\t\t\tdataFieldsPos.push(jQuery(\"#\" + _self.grid.controlName).find(\"thead td\")[idF].getAttribute(\"dataField\"))\r\n\t\t\t\t}\r\n\t\t\t\tOAT_JS.grid.setDataFieldPosition(_self.grid.UcId, dataFieldsPos);\r\n\t\t\t\trefresh();\r\n\t\t\t});\r\n\r\n\r\n\t\t\tvar draglabelR = OAT.Dom.create(\"label\");\r\n\t\t\tOAT.addTextNode(draglabelR, self.translations.GXPL_QViewerJSMoveColumnToRight)//gx.getMessage(\"GXPL_QViewerJSMoveColumnToRight\"))\r\n\t\t\tdraglabelR.htmlFor = \"move_column_to_right\" + cached;\r\n\t\t\tdragDiv_R_sel_div.appendChild(draglabelR);\r\n\t\t\tOAT.Dom.append([dragDiv, dragDiv_R_sel_div]);\r\n\t\t\ttoAppend.push(dragDiv);\r\n\t\t}\r\n\t\t//end drag options\r\n\r\n\t\tif (OAT.gridStateChanged(_self)) {\r\n\r\n\t\t\tvar restoreview = OAT.Dom.create(\"div\");\r\n\t\t\tvar restoreview_sel_div = document.createElement(\"div\");\r\n\r\n\t\t\tOAT.Dom.attach(restoreview_sel_div, \"click\", function () {\r\n\t\t\t\tself.getDataForTable(_self.grid.UcId, 1, _self.grid.rowsPerPage, true, \"\", \"\", \"\", \"\", true)\r\n\t\t\t\trefresh()\r\n\t\t\t});\r\n\r\n\t\t\tvar rl = OAT.Dom.create(\"label\");\r\n\t\t\tOAT.addTextNode(rl, self.translations.GXPL_QViewerJSRestoreDefaultView);//gx.getMessage(\"GXPL_QViewerJSRestoreDefaultView\"))\r\n\t\t\trl.htmlFor = \"pivot_checkbox_restoreview\";\r\n\t\t\trestoreview_sel_div.appendChild(rl);\r\n\t\t\tOAT.Dom.append([restoreview, restoreview_sel_div]);\r\n\t\t\ttoAppend.push(restoreview);\r\n\t\t}\r\n\r\n\t\tvar distinct = OAT.Dom.create(\"div\");\r\n\t\tdistinct.setAttribute(\"class\", \"last_div_popup\");\r\n\t\tOAT.distinctDivs(_self, distinct);\r\n\t\ttoAppend.push(hr3);\r\n\r\n\t\ttoAppend.push(distinct);\r\n\r\n\r\n\t\tOAT.Dom.append(toAppend);\r\n\r\n\r\n\r\n\r\n\t\t//for smart device center pop-up\r\n\t\tif (_self.grid.isSD) {//android\r\n\t\t\tsetTimeout(function () {\r\n\r\n\t\t\t\tvar screenWidth = window.innerWidth;\r\n\t\t\t\tvar initialPopUpWidth = jQuery(\".oat_winrect_container\")[0].clientWidth\r\n\r\n\r\n\t\t\t\tif (initialPopUpWidth == 0) {\r\n\t\t\t\t\tvar last = jQuery(\".oat_winrect_container\").length;\r\n\t\t\t\t\tinitialPopUpWidth = jQuery(\".oat_winrect_container\")[last - 1].clientWidth\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\tif (initialPopUpWidth < 220) {\r\n\t\t\t\t\tinitialPopUpWidth = 220\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar padding = (screenWidth - initialPopUpWidth) / 2 + jQuery(window).scrollLeft()\r\n\r\n\t\t\t\tjQuery(\".oat_winrect_container\").css({ left: padding + \"px\", width: initialPopUpWidth + \"px\" })\r\n\r\n\r\n\t\t\t}, 50)\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tOAT.distinctDivs = function (_self, div) { /* set of distinct values checkboxes */\r\n\t\tvar colNumber = _self.grid.columns.length - 1 - _self.number;\r\n\t\tvar realColNumber = _self.container.parentNode.cellIndex; //the real position of the item click\r\n\t\r\n\t\t\tif (realColNumber > -1) {\r\n\t\t\t\tcolNumber = realColNumber\r\n\t\t\t} else {\r\n\t\t\t\tcolNumber = _self.number\r\n\t\t\t}\r\n\t\t\r\n\r\n\t\t//var colNumber = _self.grid.rows[0].cells.length - 1 - _self.number;\r\n\t\tvar getPair = function (text, id) {\r\n\t\t\tvar div = OAT.Dom.create(\"div\");\r\n\t\t\tvar ch = OAT.Dom.create(\"input\");\r\n\t\t\t//ch.type = \"checkbox\";\r\n\t\t\t//ch.id = id;\r\n\t\t\tvar t = OAT.Dom.create(\"label\");\r\n\r\n\t\t\tOAT.addTextNode(t, text)\r\n\t\t\tt.htmlFor = id;\r\n\t\t\t//div.appendChild(ch);\r\n\t\t\tdiv.appendChild(t);\r\n\t\t\treturn [div, ch];\r\n\t\t}\r\n\t\t\r\n\t\tvar getPairWithIcon = function (text, id, checked_value) {\r\n\t\t\tvar div = OAT.Dom.create(\"div\");\r\n\t\t\tvar ch = OAT.Dom.create(\"input\");\r\n\t\t\t//ch.type = \"checkbox\";\r\n\t\t\t//ch.id = id;\r\n\t\t\tvar t = OAT.Dom.create(\"label\");\r\n\r\n\t\t\tOAT.addTextNode(t, text)\r\n\t\t\tt.htmlFor = id;\r\n\t\t\t//div.appendChild(ch);\r\n\t\t\t\r\n\t\t\tOAT.addImageNode(div, checked_value ? \"check_box\" : \"check_box_outline_blank\", \"\");\r\n\t\t\t\r\n\t\t\tdiv.appendChild(t);\r\n\t\t\treturn [div, ch];\r\n\t\t}\r\n\r\n\t\tvar getRef = function (ch, value) {\r\n\t\t\treturn function () {\r\n\t\t\t\tif (ch.checked) {\r\n\t\t\t\t\tOAT.ShowGridRow(_self, colNumber, value);\r\n\t\t\t\t\tOAT.actualizeBlackList(\"pop\", _self.grid, colNumber, value, _self.grid.serverPaging);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tOAT.HideGridRow(_self, colNumber, value);\r\n\t\t\t\t\tOAT.actualizeBlackList(\"push\", _self.grid, colNumber, value, _self.grid.serverPaging);\r\n\t\t\t\t}\r\n\t\t\t\tOAT.onFilteredChangedEventHandle(_self, colNumber);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar getRefBool = function (checked, value) {\r\n\t\t\tvar oper = \"pop\";\r\n\t\t\tif (checked) {\r\n\r\n\t\t\t\tOAT.actualizeBlackList(\"pop\", _self.grid, colNumber, value, _self.grid.serverPaging);\r\n\t\t\t} else {\r\n\r\n\t\t\t\toper = \"push\";\r\n\t\t\t\tOAT.actualizeBlackList(\"push\", _self.grid, colNumber, value, _self.grid.serverPaging);\r\n\t\t\t}\r\n\r\n\t\t\t\r\n\t\t\t\tvar dataFieldId = OAT_JS.grid.gridData[_self.grid.UcId].columnDataField[colNumber];//_self.grid.columns[colNumber].getAttribute(\"dataField\")\r\n\t\t\t\tself.getDataForTable(_self.grid.UcId, 1, _self.grid.rowsPerPage, true, \"\", \"\", dataFieldId, { op: oper, values: value })\r\n\t\t\t\r\n\r\n\t\t\tOAT.onFilteredChangedEventHandle(_self, colNumber);\r\n\t\t}\r\n\r\n\t\tvar allRef = function () {\r\n\t\t\t\r\n\t\t\t\tvar dataFieldId = OAT_JS.grid.gridData[_self.grid.UcId].columnDataField[colNumber];\r\n\t\t\t\t//_self.grid.conditions[colNumber].blackList = [];\r\n\t\t\t\tself.getDataForTable(_self.grid.UcId, 1, _self.grid.rowsPerPage, true, \"\", \"\", dataFieldId, { op: \"all\", values: [] })\r\n\t\t\t\r\n\t\t\tOAT.onFilteredChangedEventHandle(_self, colNumber);\r\n\t\t\tOAT.distinctDivs(_self, div);\r\n\t\t}\r\n\r\n\t\tvar noneRef = function () {\r\n\t\t\t\r\n\t\t\t\tvar dataFieldId = OAT_JS.grid.gridData[_self.grid.UcId].columnDataField[colNumber];\r\n\t\t\t\tself.getDataForTable(_self.grid.UcId, 1, _self.grid.rowsPerPage, true, \"\", \"\", dataFieldId, { op: \"none\", values: [] })\r\n\t\t\t\r\n\r\n\t\t\tOAT.onFilteredChangedEventHandle(_self, colNumber);\r\n\t\t\tOAT.distinctDivs(_self, div);\r\n\t\t}\r\n\r\n\t\tvar reverseRef = function () {\r\n\t\t\t\r\n\t\t\t\tvar dataFieldId = OAT_JS.grid.gridData[_self.grid.UcId].columnDataField[colNumber];\r\n\t\t\t\tself.getDataForTable(_self.grid.UcId, 1, _self.grid.rowsPerPage, true, \"\", \"\", dataFieldId, { op: \"reverse\", values: [] })\r\n\t\t\t\r\n\r\n\t\t\tOAT.distinctDivs(_self, div);\r\n\t\t\tOAT.onFilteredChangedEventHandle(_self, colNumber);\r\n\t\t}\r\n\r\n\t\tvar searchFilterClick = function () {\r\n\t\t\tself.getValuesForColumn(_self.grid.UcId, colNumber, this.value)\r\n\t\t}\r\n\r\n\t\tOAT.Dom.clear(div);\r\n\t\tvar d = OAT.Dom.create(\"div\");\r\n\t\td.setAttribute(\"class\", \"div_buttons_popup\");\r\n\r\n\t\tvar all = document.createElement(\"button\");\r\n\t\tall.textContent = self.translations.GXPL_QViewerJSAll; //gx.getMessage(\"GXPL_QViewerJSAll\");\r\n\t\tall.setAttribute(\"class\", \"btn\");\r\n\t\tjQuery(all).click(allRef);\r\n\r\n\t\tvar none = document.createElement(\"button\");\r\n\t\tnone.textContent = self.translations.GXPL_QViewerJSNone; //gx.getMessage(\"GXPL_QViewerJSNone\");\r\n\t\tnone.setAttribute(\"class\", \"btn\");\r\n\t\tjQuery(none).click(noneRef);\r\n\r\n\t\tvar reverse = document.createElement(\"button\");\r\n\t\treverse.textContent = self.translations.GXPL_QViewerJSReverse; //gx.getMessage(\"GXPL_QViewerJSReverse\");\r\n\t\treverse.setAttribute(\"class\", \"btn\");\r\n\t\tjQuery(reverse).click(reverseRef);\r\n\r\n\t\tOAT.Dom.append([d, all, none, reverse], [div, d]);\r\n\r\n\t\tvar div_search = OAT.Dom.create(\"div\");\r\n\t\tdiv_search.setAttribute(\"class\", \"div_filter_input\");\r\n\t\tOAT.addImageNode(div_search, \"search\", \"\");\r\n\r\n\t\t\r\n\t\t\tvar searchInput = document.createElement(\"input\");\r\n\t\t\tsearchInput.textContent = \"none\";\r\n\t\t\tsearchInput.setAttribute(\"class\", \"search_input\");\r\n\t\t\tsearchInput.setAttribute(\"type\", \"text\");\r\n\t\t\tsearchInput.setAttribute(\"label\", self.translations.GXPL_QViewerSearch); //gx.getMessage(\"GXPL_QViewerSearch\"));\r\n\t\t\tsearchInput.setAttribute(\"title\", self.translations.GXPL_QViewerSearch);  \r\n\t\t\tsearchInput.setAttribute(\"placeholder\", self.translations.GXPL_QViewerSearch); \r\n\t\t\tsearchInput.setAttribute(\"id\", _self.grid.UcId + OAT_JS.grid.gridData[_self.grid.UcId].columnDataField[colNumber]);\r\n\t\t\tjQuery(searchInput).keyup(searchFilterClick);\r\n\r\n\t\t\tOAT.Dom.append([div_search, searchInput], [div, div_search]);\r\n\t\t\r\n\r\n\t\tvar fixHeigthDiv = OAT.Dom.create(\"div\");\r\n\r\n\r\n\t\t\tvar cantPairs = OAT_JS.grid.getCantDifferentValues(_self.grid.UcId, colNumber);\r\n\t\t\tfor (var i = 0; i < cantPairs; i++) {\r\n\t\t\t\tvar pairData = OAT_JS.grid.getDifferentValues(_self.grid.UcId, colNumber, i)\r\n\t\t\t\tif (pairData) {\r\n\t\t\t\t\tvar value = pairData.value;\r\n\t\t\t\t\tvar pict_value = pairData.pict_value;\r\n\t\t\t\t\tif ((pairData.value == \"#NuN#\") || (pict_value.trimpivot() == \"\")) {\r\n\t\t\t\t\t\tpict_value = pict_value + \"\\u00A0\"\r\n\t\t\t\t\t}\r\n\t\t\t\t\tpict_value = pict_value.replace(/\\&amp;/g, \"&\").replace(/\\u00A0/g, \" \")\r\n\t\t\t\t\tif (pict_value.length > 33) {\r\n\t\t\t\t\t\tvar resto = (pict_value.substring(32, pict_value.length).trimpivot().length > 0) ? '...' : '';\r\n\t\t\t\t\t\tpict_value = pict_value.substring(0, 32) + resto\r\n\t\t\t\t\t}\r\n\t\t\t\t\tpict_value = pict_value.replace(/ /g, \"\\u00A0\") + '\\u00A0\\u00A0\\u00A0\\u00A0\\u00A0'\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar checked_value = pairData.checked;\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar pair = getPairWithIcon(pict_value, \"pivot_distinct_\" + i, checked_value);\r\n\t\t\t\t\tpair[0].setAttribute('value', value);\r\n\t\t\t\t\tfixHeigthDiv.appendChild(pair[0]);\r\n\r\n\t\t\t\t\tvar class_check_div = (checked_value) ? \"check_item_img\" : \"uncheck_item_img\";\r\n\t\t\t\t\tif (_self.grid.isSD) {//android\r\n\t\t\t\t\t\tvar class_check_div = (checked_value) ? \"check_item_img_small\" : \"uncheck_item_img_small\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\tpair[0].setAttribute(\"class\", class_check_div);\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\tOAT.Dom.attach(pair[0], \"click\", function () {\r\n\t\t\t\t\t\tvar checkedClass = \"check_item_img\"\r\n\t\t\t\t\t\tvar unCheckedClass = \"uncheck_item_img\"\r\n\t\t\t\t\t\tif (_self.grid.isSD) {//android\r\n\t\t\t\t\t\t\tcheckedClass = \"check_item_img_small\"\r\n\t\t\t\t\t\t\tunCheckedClass = \"uncheck_item_img_small\"\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar checked = !(this.getAttribute(\"class\") === checkedClass);\r\n\t\t\t\t\t\tvar newClass = (this.getAttribute(\"class\") === checkedClass) ? unCheckedClass : checkedClass;\r\n\t\t\t\t\t\tthis.setAttribute(\"class\", newClass);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tjQuery(this).find(\"i\")[0].textContent = checked ? \"check_box\" : \"check_box_outline_blank\";\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tgetRefBool(checked, this.getAttribute(\"value\"));\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (OAT_JS.grid.getCantDifferentValues(_self.grid.UcId, colNumber) <= 9) {\r\n\t\t\t\tfixHeigthDiv.setAttribute(\"class\", \"pivot_popup_auto\");\r\n\t\t\t} else {\r\n\t\t\t\tfixHeigthDiv.setAttribute(\"class\", \"pivot_popup_fix\");\r\n\t\t\t}\r\n\t\t\tfixHeigthDiv.setAttribute(\"ucid\", _self.grid.UcId);\r\n\t\t\tfixHeigthDiv.setAttribute(\"columnnumber\", colNumber);\r\n\t\t\tfixHeigthDiv.setAttribute(\"id\", \"values_\" + _self.grid.UcId + \"_\" + OAT_JS.grid.gridData[_self.grid.UcId].columnDataField[colNumber])//_self.grid.UcId + \"_\" + colNumber)\r\n\t\t\r\n\r\n\r\n\t\tdiv.appendChild(fixHeigthDiv);\r\n\t}\r\n\r\n\r\n\tOAT.appendNewPairToPopUp = function (_self, value, colNumber, checked, pict_value, dataField) {\r\n\t\tvar getPair = function (text, id) {\r\n\t\t\tvar div = OAT.Dom.create(\"div\");\r\n\t\t\tvar ch = OAT.Dom.create(\"input\");\r\n\t\t\tvar t = OAT.Dom.create(\"label\");\r\n\t\t\tOAT.addTextNode(t, text)\r\n\t\t\tt.htmlFor = id;\r\n\t\t\tdiv.appendChild(t);\r\n\t\t\treturn [div, ch];\r\n\t\t}\r\n\t\t\r\n\t\tvar getPairWithIcon = function (text, id, checked_value) {\r\n\t\t\tvar div = OAT.Dom.create(\"div\");\r\n\t\t\tvar ch = OAT.Dom.create(\"input\");\r\n\t\t\tvar t = OAT.Dom.create(\"label\");\r\n\t\t\tOAT.addTextNode(t, text)\r\n\t\t\tt.htmlFor = id;\r\n\t\t\tOAT.addImageNode(div, checked_value ? \"check_box\" : \"check_box_outline_blank\", \"\");\r\n\t\t\tdiv.appendChild(t);\r\n\t\t\treturn [div, ch];\r\n\t\t}\r\n\r\n\t\tvar getRefBool = function (checked, value) {\r\n\t\t\tvar oper = \"pop\";\r\n\t\t\tif (!checked) {\r\n\t\t\t\toper = \"push\";\r\n\t\t\t}\r\n\t\t\tvar filteredValues = _self.grid.conditions[colNumber].blackList\r\n\t\t\tself.getDataForTable(_self.grid.UcId, 1, _self.grid.rowsPerPage, true, \"\", \"\", dataField, { op: oper, values: value })\r\n\r\n\t\t\tOAT.onFilteredChangedEventHandle(_self, colNumber);\r\n\t\t}\r\n\r\n\t\tvar pict_value = pict_value;\r\n\t\tif (value == \"#NuN#\") {\r\n\t\t\tpict_value = \"\\u00A0\"\r\n\t\t}\r\n\t\tpict_value = pict_value.replace(/\\&amp;/g, \"&\").replace(/\\u00A0/g, \" \")\r\n\t\tif (pict_value.length > 33) {\r\n\t\t\tvar resto = (pict_value.substring(32, pict_value.length).trimpivot().length > 0) ? '...' : '';\r\n\t\t\tpict_value = pict_value.substring(0, 32) + resto\r\n\t\t}\r\n\t\tpict_value = pict_value.replace(/ /g, \"\\u00A0\") + '\\u00A0\\u00A0\\u00A0\\u00A0\\u00A0'\r\n\t\tvar pair = getPairWithIcon(pict_value, \"pivot_distinct_\" + i, checked);\r\n\t\tpair[0].setAttribute('value', value);\r\n\t\tvar fixHeigthDiv = jQuery(\"#values_\" + _self.grid.UcId + \"_\" + dataField)[0]//colNumber)[0]\r\n\t\tfixHeigthDiv.appendChild(pair[0]);\r\n\r\n\t\tvar checked_value = checked;\r\n\t\tvar class_check_div = (checked_value) ? \"check_item_img\" : \"uncheck_item_img\";\r\n\t\tif (_self.grid.isSD) {//android\r\n\t\t\tvar class_check_div = (checked_value) ? \"check_item_img_small\" : \"uncheck_item_img_small\";\r\n\t\t}\r\n\t\tpair[0].setAttribute(\"class\", class_check_div);\r\n\r\n\t\tOAT.Dom.attach(pair[0], \"click\", function () {\r\n\t\t\tvar checkedClass = \"check_item_img\"\r\n\t\t\tvar unCheckedClass = \"uncheck_item_img\"\r\n\t\t\tif (_self.grid.isSD) {//android\r\n\t\t\t\tcheckedClass = \"check_item_img_small\"\r\n\t\t\t\tunCheckedClass = \"uncheck_item_img_small\"\r\n\t\t\t}\r\n\t\t\tvar checked = !(this.getAttribute(\"class\") === checkedClass);\r\n\t\t\tvar newClass = (this.getAttribute(\"class\") === checkedClass) ? unCheckedClass : checkedClass;\r\n\t\t\t\r\n\t\t\tjQuery(this).find(\"i\")[0].textContent = checked ? \"check_box\" : \"check_box_outline_blank\";\r\n\t\t\t\r\n\t\t\tthis.setAttribute(\"class\", newClass);\r\n\t\t\tgetRefBool(checked, this.getAttribute(\"value\"));\r\n\t\t});\r\n\r\n\t}\r\n\r\n\tOAT.removeAllPairsFromPopUp = function (_self, colNumber, withScroll) {\r\n\t\tvar checkedClass = \"check_item_img\"\r\n\t\tvar unCheckedClass = \"uncheck_item_img\"\r\n\t\tif (_self.grid.isSD) { //android\r\n\t\t\tcheckedClass = \"check_item_img_small\"\r\n\t\t\tunCheckedClass = \"uncheck_item_img_small\"\r\n\t\t}\r\n\r\n\t\tjQuery(\"#values_\" + _self.grid.UcId + \"_\" + OAT_JS.grid.gridData[_self.grid.UcId].columnDataField[colNumber]).find(\".\" + checkedClass).remove()\r\n\t\tjQuery(\"#values_\" + _self.grid.UcId + \"_\" + OAT_JS.grid.gridData[_self.grid.UcId].columnDataField[colNumber]).find(\".\" + unCheckedClass).remove()\r\n\r\n\t\tjQuery(\".last_div_popup .\" + checkedClass).remove()\r\n\t\tjQuery(\".last_div_popup .\" + unCheckedClass).remove()\r\n\r\n\t\t//set class of pairs container\r\n\t\tif (withScroll) {\r\n\t\t\tjQuery(\"#values_\" + _self.grid.UcId + \"_\" + OAT_JS.grid.gridData[_self.grid.UcId].columnDataField[colNumber]).removeClass(\"pivot_popup_auto\");\r\n\t\t\tjQuery(\"#values_\" + _self.grid.UcId + \"_\" + OAT_JS.grid.gridData[_self.grid.UcId].columnDataField[colNumber]).addClass(\"pivot_popup_fix\");\r\n\t\t} else {\r\n\t\t\tjQuery(\"#values_\" + _self.grid.UcId + \"_\" + OAT_JS.grid.gridData[_self.grid.UcId].columnDataField[colNumber]).removeClass(\"pivot_popup_fix\");\r\n\t\t\tjQuery(\"#values_\" + _self.grid.UcId + \"_\" + OAT_JS.grid.gridData[_self.grid.UcId].columnDataField[colNumber]).addClass(\"pivot_popup_auto\");\r\n\t\t}\r\n\t}\r\n\t/* statefull Rutines */\r\n\tOAT.onFilteredChangedEventHandle = function (self, dimensionNumber) {\r\n\r\n\t\t\t\r\n\t\t\tvar dimensionDataField = self.dataField\r\n\t\t\t\r\n\t\t\tvar columnNumber = dimensionNumber\r\n\t\t\tfor(var col=0; col < self.grid.columns.length; col++)\r\n\t\t\t{\r\n\t\t\t\tif (dimensionDataField == self.grid.columns[col].getAttribute(\"dataField\"))\r\n\t\t\t\t\tcolumnNumber = col;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn OAT_JS.grid.setFilterChangedWhenServerPagination(self.grid.UcId, self.grid.columns[columnNumber]);\r\n\r\n\t}\r\n\r\n\tOAT.setClickEventHandlers = function (self, td, itemValue, MeasureOrDimension, dimensionNumber, itemData) {\r\n\t\tvar span = jQuery(td).find(\"#span_txt_pivot\")[0];\r\n\t\tif (span) {\r\n\t\t\tjQuery(td).data('itemValue', itemValue);\r\n\t\t\tjQuery(td).data('numberMorD', dimensionNumber);\r\n\t\t\tjQuery(td).data('itemInfo', itemData);\r\n\t\t\t\r\n\t\t\tjQuery(span).data('itemValue', itemValue);\r\n\t\t\tjQuery(span).data('typeMorD', MeasureOrDimension);\r\n\t\t\tjQuery(span).data('numberMorD', dimensionNumber);\r\n\t\t\tjQuery(span).data('itemInfo', itemData);\r\n\t\t\tvar qViewer = self.grid.QueryViewerCollection[self.grid.IdForQueryViewerCollection];\r\n\t\t\t\r\n\t\t\tvar RaiseItemClick = true;\r\n\t\t\tfor (var iT = 0; iT < qViewer.Metadata.Axes.length; iT++){\r\n\t\t\t\tif (self.grid.TableDataFilds[dimensionNumber] == qViewer.Metadata.Axes[iT].DataField)\r\n\t\t\t\t{\r\n\t\t\t\t\tRaiseItemClick = qViewer.Metadata.Axes[iT].RaiseItemClick\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfor (var iT = 0; iT < qViewer.Metadata.Data.length; iT++){\r\n\t\t\t\tif (self.grid.TableDataFilds[dimensionNumber] == qViewer.Metadata.Data[iT].DataField)\r\n\t\t\t\t{\r\n\t\t\t\t\tRaiseItemClick = qViewer.Metadata.Data[iT].RaiseItemClick\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tif (qViewer.ItemClick && RaiseItemClick){//qViewer.Metadata.Axes[dimensionNumber].RaiseItemClick) {\r\n\t\t\t\tspan.onclick = function () { \r\n\t\t\t\t\t\tOAT.onClickEventHandle(self, this); \r\n\t\t\t\t\t\tif (OAT_JS.grid.gridData[self.grid.UcId].selection.Allow){ \r\n\t\t\t\t\t\t\tOAT.onClickSelectNode(td, self);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\tspan.classList.add(\"gx-qv-clickable-element\");\r\n\t\t\t} else if (OAT_JS.grid.gridData[self.grid.UcId].selection.Allow){ \r\n\t\t\t\tspan.onclick = function () { OAT.onClickSelectNode(td, self); }\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tvar alreadyclicked = false;\r\n\tvar alreadyclickedTimeout;\r\n\tOAT.onClickEventHandle = function (self, elemvalue) {\r\n\t\tvar datastr = OAT.PreClickHandle(self, elemvalue);\r\n\t\t\r\n\r\n\t}\r\n\t\r\n\r\n\r\n\tOAT.PreClickHandle = function (self, elemvalue) {\r\n\t\t//if (self.grid.HideDataFilds.length) {\r\n\t\t\tOAT_JS.grid.lastCallData = { \"self\": self, \"elemvalue\": elemvalue }\r\n\t\t\tif (self.grid.HideDataFilds.length) {\r\n\t\t\t\tOAT_JS.grid.requestDataSynForTable(self.grid.IdForQueryViewerCollection)\r\n\t\t\t} else {\r\n\t\t\t\tOAT.ClickHandle(self, elemvalue);\r\n\t\t\t}\t\r\n\t\t//}\r\n\t}\r\n\r\n\tOAT.ClickHandle = function (self, elemvalue, dataSync) {\r\n\t\tif (self.grid.HideDataFilds.length) {\r\n\t\t\tvar spl = self.grid.IdForQueryViewerCollection\r\n\t\t\tvar temp = dataSync //self.grid.QueryViewerCollection[spl].getPivottableDataSync();\r\n\r\n\t\t\tself.grid.allRowsPivot = []\r\n\t\t\tself.grid.allFullRowsPivot = []\r\n\t\t\tvar stringRecord = temp.split(\"<Record>\")\r\n\t\t\tfor (var i = 1; i < stringRecord.length; i++) {\r\n\t\t\t\tvar recordData = [];\r\n\t\t\t\tvar fullRecordData = [];\r\n\t\t\t\tfor (var j = 0; j < self.grid.TableDataFilds.length; j++) {\r\n\t\t\t\t\trecordData[j] = \"#NuN#\"\r\n\t\t\t\t\tvar dt = stringRecord[i].split(\"<\" + self.grid.TableDataFilds[j] + \">\")\r\n\t\t\t\t\tif (dt.length > 1) {\r\n\t\t\t\t\t\tvar at = dt[1].split(\"</\" + self.grid.TableDataFilds[j] + \">\")\r\n\t\t\t\t\t\trecordData[j] = at[0]\r\n\t\t\t\t\t\tfullRecordData[j] = recordData[j]\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (stringRecord[i].indexOf(\"<\" + self.grid.TableDataFilds[j] + \"/>\") >= 0) {\r\n\t\t\t\t\t\t\trecordData[j] = \"\"\r\n\t\t\t\t\t\t\tfullRecordData[j] = \"\"\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\trecordData[j] = \"#NuN#\"\r\n\t\t\t\t\t\t\tfullRecordData[j] = \"#NuN#\"\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tself.grid.allRowsPivot.push(recordData);\r\n\r\n\t\t\t\t//add hide columns values\r\n\t\t\t\tfor (var j = 0; j < self.grid.HideDataFilds.length; j++) {\r\n\t\t\t\t\tvar dt = stringRecord[i].split(\"<\" + self.grid.HideDataFilds[j] + \">\")\r\n\t\t\t\t\tif (dt.length > 1) {\r\n\t\t\t\t\t\tvar at = dt[1].split(\"</\" + self.grid.HideDataFilds[j] + \">\")\r\n\t\t\t\t\t\tfullRecordData[fullRecordData.length + j] = at[0]\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (stringRecord[i].indexOf(\"<\" + self.grid.HideDataFilds[j] + \"/>\") >= 0) {\r\n\t\t\t\t\t\t\tfullRecordData[fullRecordData.length + j] = \"\"\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tfullRecordData[fullRecordData.length + j]  = \"#NuN#\"\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tself.grid.allFullRowsPivot.push(fullRecordData);\r\n\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar pseudoRow = []\r\n\r\n\t\tvar value = jQuery(elemvalue).data('itemValue');\r\n\t\tvar type = jQuery(elemvalue).data('typeMorD');\r\n\t\tvar number = jQuery(elemvalue).data('numberMorD');\r\n\t\tvar columnNumber = jQuery(elemvalue).data('itemInfo');\r\n\t\tvar selected = OAT.IsNodeSelected(self.cells[number].html);\r\n\t\tvar datastr = \"<DATA><ITEM type=\\\"\" + type + \"\\\" \";\r\n\t\t\r\n\t\tdatastr = datastr + \"name=\\\"\" + self.grid.columns[number].getAttribute(\"name\") + \"\\\" \";\r\n\t\tdatastr = datastr + \"displayName=\\\"\" + self.grid.columns[number].getAttribute(\"displayName\") + \"\\\" \";\r\n\t\tdatastr = datastr + \"selected=\\\"\" + selected.toString() + \"\\\" \";\r\n\t\tdatastr = datastr + \"location=\\\"rows\\\">\"\r\n\t\tdatastr = datastr + value\r\n\r\n\r\n\t\tdatastr = datastr + \"</ITEM>\";\r\n\r\n\t\tdatastr = datastr + \"<CONTEXT>\";\r\n\t\tdatastr = datastr + \"<RELATED>\";\r\n\t\tfor (var i = 0; i < self.grid.rows[columnNumber].cells.length; i++) {\r\n\t\t\tdatastr = datastr + \"<ITEM name=\\\"\" + self.grid.columns[i].getAttribute(\"name\") + \"\\\">\";\r\n\t\t\tdatastr = datastr + \"<VALUES\";\r\n\t\t\tvar existNullValue = false;\r\n\t\t\tvar stringValues = \"\";\r\n\t\t\t\r\n\t\t\tif (self.grid.rows[columnNumber].cells[i].options.value != \"#NuN#\"){\r\n\t\t\t\tstringValues = stringValues + \"<VALUE>\" + self.grid.rows[columnNumber].cells[i].options.value + \"</VALUE>\";\r\n\t\t\t} else {\r\n\t\t\t\texistNullValue = true\r\n\t\t\t}\r\n\t\t\tpseudoRow.push(self.grid.rows[columnNumber].cells[i].options.value)\r\n\t\t\t\r\n\t\t\tif (existNullValue){\r\n\t\t\t\tdatastr = datastr + \" Null=\\\"true\\\"\"\r\n\t\t\t}\r\n\t\t\tdatastr = datastr + \">\" + stringValues \r\n\t\t\tdatastr = datastr + \"</VALUES>\";\r\n\t\t\tdatastr = datastr + \"</ITEM>\";\r\n\t\t}\r\n\t\tif (self.grid.HideDataFilds.length) {\r\n\t\t\tvar coinc = function (row1, row2) {\r\n\t\t\t\tfor (var o = 0; o < row1.length; o++) {\r\n\t\t\t\t\tif ((row1[o] != undefined) && (row1[o] != row2[o])) {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tfor (var r = 0; r < self.grid.allFullRowsPivot.length; r++) {\r\n\t\t\t\tif (coinc(pseudoRow, self.grid.allFullRowsPivot[r])) {\r\n\t\t\t\t\tfor (var h = 0; h < self.grid.HideDataFilds.length; h++) {\r\n\t\t\t\t\t\tdatastr = datastr + \"<ITEM name=\\\"\" + self.grid.OrderFildsHidden[h] + \"\\\">\";\r\n\t\t\t\t\t\tdatastr = datastr + \"<VALUES\";\r\n\t\t\t\t\t\tvar existNullValue = false;\r\n\t\t\t\t\t\tvar stringValues = \"\";\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (self.grid.rows[columnNumber].cells[i].options.value != \"#NuN#\"){\r\n\t\t\t\t\t\t\tstringValues = stringValues + \"<VALUE>\" + self.grid.allFullRowsPivot[r][h + self.grid.rows[columnNumber].cells.length] + \"</VALUE>\";\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\texistNullValue = true\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (existNullValue){\r\n\t\t\t\t\t\t\tdatastr = datastr + \" Null=\\\"true\\\"\"\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tdatastr = datastr + \">\" + stringValues \r\n\t\t\t\t\t\tdatastr = datastr + \"</VALUES>\";\r\n\t\t\t\t\t\tdatastr = datastr + \"</ITEM>\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\tdatastr = datastr + \"</RELATED>\";\r\n\t\tdatastr = datastr + \"<FILTERS>\";\r\n\t\tdatastr = datastr + \"</FILTERS>\";\r\n\t\tdatastr = datastr + \"</CONTEXT>\";\r\n\r\n\t\tdatastr = datastr + \"</DATA>\"\r\n\r\n\r\n\t\tvar spl = self.grid.IdForQueryViewerCollection;\r\n\t\tOAT_JS.grid.fireOnItemClickEvent(self.grid.QueryViewerCollection[spl], datastr, false)\r\n\t\t//return datastr;\r\n\t}\r\n\r\n\tOAT.onClickSelectNode = function (elemvalue, self) {\r\n\t\t \r\n\t\tvar value = jQuery(elemvalue).data('itemValue');\r\n\t\tvar number = jQuery(elemvalue).data('numberMorD');\r\n\t\tvar rowNumber = jQuery(elemvalue).data('itemInfo');\r\n\t\t\r\n\t\tvar colNumber = OAT_JS.grid.gridData[self.grid.UcId].columnDataField.indexOf(self.grid.TableDataFilds[number]);\r\n\t\t\r\n\t\tif (OAT_JS.grid.gridData[self.grid.UcId].selection.Allow){ \r\n\t\t\tOAT.SelectNodes(self, value, false, colNumber, rowNumber);\r\n\t\t}\r\n\t\t\t\r\n\t}\r\n\r\n\r\n\tOAT.SelectNodes = function(self, value, isRefresh, colNumber, rowNumber, selectedItemNumber, conditions) {\r\n\t\tif (rowNumber >= 0) {\r\n\r\n\t\t\tvar row = jQuery(\"#\" + self.grid.controlName + \" tbody\").find(\"tr\")[rowNumber];\r\n\r\n\t\t\tif (OAT.IsNodeSelected(jQuery(row).find(\"td\")[colNumber])) {\r\n\t\t\t\tOAT.ClearSelectedNodes(jQuery(self.grid.html));\r\n\t\t\t\tOAT_JS.grid.gridData[self.grid.UcId].selection.SelectedNode = [];\r\n\t\t\t} else {\r\n\r\n\t\t\t\tif (!isRefresh) {\r\n\t\t\t\t\tOAT.SetSelectedNodeBackgroundColor(jQuery(row).find(\"td\")[colNumber], self.grid.selection.Color, jQuery(self.grid.html))\r\n\r\n\t\t\t\t\t//save selected node\r\n\t\t\t\t\tOAT_JS.grid.gridData[self.grid.UcId].selection.SelectedNode = []\r\n\t\t\t\t\tOAT_JS.grid.gridData[self.grid.UcId].selection.SelectedNode[0] = {\r\n\t\t\t\t\t\tvalue : value,\r\n\t\t\t\t\t\tdataField : OAT_JS.grid.gridData[self.grid.UcId].columnDataField[colNumber],\r\n\t\t\t\t\t\trowData : [OAT_JS.grid.gridData[self.grid.UcId].rowsData[rowNumber]],\r\n\t\t\t\t\t\tclicked : true\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tOAT.SetNodeBackgroundColor(jQuery(row).find(\"td\")[colNumber], self.grid.selection.Color);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (OAT_JS.grid.gridData[self.grid.UcId].selection.EntireLine) {\r\n\t\t\t\t\tfor (var t = 0; t < self.grid.rows[rowNumber].cells.length; t++) {\r\n\t\t\t\t\t\tif (t != colNumber) {\r\n\t\t\t\t\t\t\tOAT.SetNodeBackgroundColor(jQuery(row).find(\"td\")[t], OAT_JS.grid.gridData[self.grid.UcId].selection.Color)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else {\r\n\r\n\t\t\t//search for row\r\n\t\t\tif (!isRefresh)\r\n\t\t\t\tOAT_JS.grid.gridData[self.grid.UcId].selection.SelectedNode[selectedItemNumber] = {\r\n\t\t\t\t\tvalue : value,\r\n\t\t\t\t\tdataField : OAT_JS.grid.gridData[self.grid.UcId].columnDataField[colNumber],\r\n\t\t\t\t\trowData : [],\r\n\t\t\t\t\tclicked : false,\r\n\t\t\t\t\tconditions : conditions\r\n\t\t\t\t}\r\n\r\n\t\t\tfor (var i = 0; i < jQuery(\"#\" + self.grid.controlName + \" tbody\").find(\"tr\").length; i++) {\r\n\r\n\t\t\t\tvar dataType = self.grid.columnsDataType[ self.grid.TableDataFilds.indexOf(OAT_JS.grid.gridData[self.grid.UcId].columnDataField[colNumber])];\r\n\r\n\t\t\t\tvar cellValue = OAT_JS.grid.gridData[self.grid.UcId].rowsData[i][self.grid.TableDataFilds.indexOf(OAT_JS.grid.gridData[self.grid.UcId].columnDataField[colNumber])];\r\n\t\t\t\tvar sameValue = false;\r\n\r\n\t\t\t\tif ((dataType == \"real\") || (dataType == \"integer\")) {\r\n\t\t\t\t\tsameValue = (parseFloat(value) == cellValue);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsameValue = (cellValue.trim() == value.trim());\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (sameValue) {\r\n\t\t\t\t\t//check all conditions\r\n\t\t\t\t\tif (OAT.checkConditions(self, OAT_JS.grid.gridData[self.grid.UcId].rowsData[i], conditions)) {\r\n\t\t\t\t\t\tvar row = jQuery(\"#\" + self.grid.controlName + \" tbody\").find(\"tr\")[i];\r\n\r\n\t\t\t\t\t\tOAT.SetNodeBackgroundColor(jQuery(row).find(\"td\")[colNumber], self.grid.selection.Color, jQuery(self.grid.html))\r\n\t\t\t\t\t\t//save selected node\r\n\t\t\t\t\t\tOAT_JS.grid.gridData[self.grid.UcId].selection.SelectedNode[selectedItemNumber].rowData.push(OAT_JS.grid.gridData[self.grid.UcId].rowsData[i]);\r\n\r\n\t\t\t\t\t\tif (OAT_JS.grid.gridData[self.grid.UcId].selection.EntireLine) {\r\n\t\t\t\t\t\t\tfor (var t = 0; t < self.grid.rows[i].cells.length; t++) {\r\n\t\t\t\t\t\t\t\tif (t != colNumber) {\r\n\t\t\t\t\t\t\t\t\tOAT.SetNodeBackgroundColor(jQuery(row).find(\"td\")[t], OAT_JS.grid.gridData[self.grid.UcId].selection.Color)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tOAT.checkConditions = function(self, rowData, conditions){\r\n\t\tvar sameRow = true;\r\n\t\t\r\n\t\tfor(var s = 0; s < conditions.length; s++){\r\n\t\t\tvar colNumber = OAT_JS.grid.gridData[self.grid.UcId].columnDataField.indexOf(conditions[s].DataField);\r\n\t\t\tvar dataType = self.grid.columnsDataType[ self.grid.TableDataFilds.indexOf(OAT_JS.grid.gridData[self.grid.UcId].columnDataField[colNumber])];\r\n\t\t\tvar sameValue = true;\r\n\t\t\tif ((dataType == \"real\") || (dataType == \"integer\")) {\r\n\t\t\t\tsameValue = (parseFloat(conditions[s].Value) == parseFloat(rowData[colNumber]));\r\n\t\t\t} else {\r\n\t\t\t\tsameValue = (conditions[s].Value.trim() == rowData[colNumber].trim());\r\n\t\t\t}\r\n\t\t\tif (!sameValue){\r\n\t\t\t\treturn false;\r\n\t\t\t}\t\t\r\n\t\t}\r\n\t\t\r\n\t\treturn sameRow;\r\n\t}\r\n\t\r\n\tOAT.RedrawSelectedNode = function(grid){\r\n\t\tif (OAT_JS.grid.gridData[grid.UcId].selection.SelectedNode) {\r\n\t\t\tOAT.ClearSelectedNodes(jQuery(grid.html));\r\n\t\t\t\r\n\t\t\tfor (var s = 0; s < OAT_JS.grid.gridData[grid.UcId].selection.SelectedNode.length; s++) {\r\n\t\t\t\r\n\t\t\t\tif (OAT_JS.grid.gridData[grid.UcId].selection.SelectedNode[s].clicked){\r\n\t\t\t\t\t//search for row\r\n\t\t\t\t\tfor (var r = 0; r < OAT_JS.grid.gridData[grid.UcId].selection.SelectedNode[s].rowData.length; r++){\r\n\t\t\t\t\t\tvar selectedRow = OAT_JS.grid.gridData[grid.UcId].selection.SelectedNode[s].rowData[r];\r\n\t\t\t\t\t\tfor (var i = 0; i < OAT_JS.grid.gridData[grid.UcId].rowsData.length; i++){\r\n\t\t\t\t\t\t\tvar sameRow = true;\r\n\t\t\t\t\t\t\tfor (var j = 0; j < OAT_JS.grid.gridData[grid.UcId].rowsData[i].length; j++)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tif (OAT_JS.grid.gridData[grid.UcId].rowsData[i][j] != selectedRow[j])\r\n\t\t\t\t\t\t\t\t\tsameRow = false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\t\t\tif (sameRow)\r\n\t\t\t\t\t\t\t\tOAT.SelectNodes({grid: grid}, OAT_JS.grid.gridData[grid.UcId].selection.SelectedNode[s].value, true, OAT_JS.grid.gridData[self.UcId].columnDataField.indexOf(OAT_JS.grid.gridData[grid.UcId].selection.SelectedNode[s].dataField), i)\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\r\n\t\t\t\t\tOAT.SelectNodes({grid: grid}, OAT_JS.grid.gridData[grid.UcId].selection.SelectedNode[s].value, true, OAT_JS.grid.gridData[self.UcId].columnDataField.indexOf(OAT_JS.grid.gridData[grid.UcId].selection.SelectedNode[s].dataField), -1, s, OAT_JS.grid.gridData[grid.UcId].selection.SelectedNode[s].conditions);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tOAT.gridStateChanged = function (self) { //true is state changed\r\n\t\t\r\n\t\treturn OAT_JS.grid.getStateChange(self.grid.UcId)\r\n\t\t\r\n\t}\r\n\r\n\tOAT.createXMLDimensionInfo = function (self, iCV) {\r\n\t\treturn  '<name>' + self.columns[iCV].getAttribute(\"name\") + '</name> '\r\n\t\t\t\t+ '<displayName>' + self.columns[iCV].getAttribute(\"displayName\") + '</displayName> '\r\n\t\t \t\t+ '<description>' + self.columns[iCV].getAttribute(\"description\") + '</description> '\r\n\t\t\t\t+ '<dataField>' + self.columns[iCV].getAttribute(\"dataField\") + '</dataField> '\r\n\t\t \t\t+ '<dataType>' + self.columns[iCV].getAttribute(\"dataType\") + '</dataType> '\r\n\t\t \t\t+ '<summarize>' + self.columns[iCV].getAttribute(\"summarize\") + '</summarize> '\r\n\t\t\t\t+ '<align>' + self.columns[iCV].getAttribute(\"align\") + '</align> '\r\n\t\t\t \t+ '<axis>' + self.columns[iCV].getAttribute(\"axis\") + '</axis> ';\r\n\t}\r\n\t\r\n\tOAT.createXMLMetadata = function (self, columnNumber, serverPagination) {\r\n\r\n\t\tvar xml = '<OLAPCube format=\"' + \"compact\" + '\" thousandsSeparator=\"' + \",\" + '\" decimalSeparator=\"' + \".\" + '\" dateFormat=\"' + \"MDY\" + '\">';\r\n\r\n\t\tfor (var iC = 0; iC <= self.grid.columns.length - 1; iC++) {\r\n\t\t\tvar iCV = iC;\r\n\t\t\t\r\n\t\t\txml = xml + '<OLAPDimension> ';\r\n\t\t\t\r\n\t\t\txml = xml + OAT.createXMLDimensionInfo(self.grid, iCV);\r\n\t\t\t\r\n\t\t\tvar posHeader = 0\r\n\t\t\tfor(var pH = 0; pH < self.grid.header.cells.length; pH++){\r\n\t\t\t\tif (self.grid.header.cells[pH].dataField == self.grid.columns[iCV].getAttribute(\"dataField\")){\r\n\t\t\t\t\tposHeader = pH\r\n\t\t\t\t}\t\t\t\t\r\n\t\t\t}\r\n\t\t\tif (self.grid.header.cells[posHeader].html.style.display == \"none\") {\r\n\t\t\t\txml = xml + '<hidden>true</hidden>'\r\n\t\t\t}\r\n\r\n\t\t\tif (self.grid.columns[iCV].getAttribute(\"picture\") === \"\") {\r\n\t\t\t\txml = xml + '<picture/> '\r\n\t\t\t} else {\r\n\t\t\t\txml = xml + '<picture>' + self.grid.columns[iCV].getAttribute(\"picture\") + '</picture> ';\r\n\t\t\t}\r\n\r\n\t\t\tif (self.grid.columns[iCV].getAttribute(\"picture\") === \"\") {\r\n\t\t\t\txml = xml + '<format/> ';\r\n\t\t\t} else {\r\n\t\t\t\txml = xml + '<format>' + self.grid.columns[iCV].getAttribute(\"format\") + '</format> ';\r\n\t\t\t}\r\n\r\n\t\t\tif (OAT_JS.grid.gridData[self.grid.UcId].dataFieldOrder == self.grid.columns[iCV].getAttribute(\"dataField\")){\r\n\t\t\t\tif (OAT_JS.grid.gridData[self.grid.UcId].orderType == \"Descending\")\r\n\t\t\t\t\txml = xml + '<order>descending</order> '\r\n\t\t\t\telse\r\n\t\t\t\t\txml = xml + '<order>ascending</order> '\r\n\t\t\t} else {\r\n\t\t\t\txml = xml + '<order>none</order> '\r\n\t\t\t}\r\n\r\n\t\t\txml = xml + '<customOrder/> ';\r\n\t\t\txml = xml + '<include> ';\r\n\r\n\t\t\t\r\n\t\t\t\tvar dF = self.grid.columns[iCV].getAttribute(\"dataField\");\r\n\t\t\t\tif ((self.blackLists[dF].state != \"none\") && (self.blackLists[dF].state != \"all\")) {\r\n\t\t\t\t\tfor (var i = 0; i < self.blackLists[dF].visibles.length; i++) {\r\n\t\t\t\t\t\txml = xml + '<value>' + self.blackLists[dF].visibles[i].trimpivot() + '</value> ';\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (self.blackLists[dF].state != \"none\") {\r\n\t\t\t\t\tfor (var i = 0; i < self.differentValues[dF].length; i++) {\r\n\t\t\t\t\t\txml = xml + '<value>' + self.differentValues[dF][i].trimpivot() + '</value> ';\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\r\n\t\t\txml = xml + '<value>TOTAL</value> </include> <collapse/> ';\r\n\r\n\t\t\txml = xml + '<hide> '\r\n\t\t\t\r\n\t\t\t\tvar dF = self.grid.columns[iCV].getAttribute(\"dataField\");\r\n\t\t\t\tif ((self.blackLists[dF].state != \"none\") && (self.blackLists[dF].state != \"all\")) {\r\n\t\t\t\t\tfor (var i = 0; i < self.blackLists[dF].hiddens.length; i++) {\r\n\t\t\t\t\t\txml = xml + '<value>' + self.blackLists[dF].hiddens[i].trimpivot() + '</value> ';\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (self.blackLists[dF].state != \"all\") {\r\n\t\t\t\t\tfor (var i = 0; i < self.differentValues[dF].length; i++) {\r\n\t\t\t\t\t\txml = xml + '<value>' + self.differentValues[dF][i].trimpivot() + '</value> ';\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\r\n\t\t\txml = xml + '</hide> '\r\n\r\n\t\t\tvar numCol = self.grid.columnsDataType.length - 1 - iCV;\r\n\t\t\ttry {\r\n\t\t\t\tif (self.grid.header.cells[numCol] != undefined) {\r\n\t\t\t\t\tif (self.grid.header.cells[numCol].html.style.display === \"\") {\r\n\t\t\t\t\t\txml = xml + '<condition>table</condition> ';\r\n\t\t\t\t\t\txml = xml + '<filterbar>no</filterbar> ';\r\n\t\t\t\t\t\t//xml = xml + '<position>' + self.columnDataField.indexOf(self.grid.columns[iCV].getAttribute(\"dataField\")) + '</position>'\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\txml = xml + '<condition>none</condition> ';\r\n\t\t\t\t\t\txml = xml + '<filterbar>yes</filterbar> ';\r\n\t\t\t\t\t\t//xml = xml + '<position>' + self.columnDataField.indexOf(self.grid.columns[iCV].getAttribute(\"dataField\")) + '</position>'\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} catch (ERROR) { }\r\n\t\t\t\r\n\t\t\tvar cantVisibles = 0\r\n\t\t\tvar located = false\r\n\t\t\tvar pos = -1;\r\n\t\t\tfor (var colGrid = 0; (self.columnDataField) && (colGrid < self.columnDataField.length) && (!located); colGrid++)\r\n\t\t\t\t{\r\n\t\t\t\t\tvar dataFieldColumn = self.columnDataField[colGrid];\r\n\t\t\t\t\tvar isHidden = false;\r\n\t\t\t\t\tfor (var columnI = 0; columnI < self.grid.columns.length; columnI++){\r\n\t\t\t\t\t\tif (dataFieldColumn == self.grid.columns[columnI].getAttribute(\"dataField\"))\r\n\t\t\t\t\t\t\tisHidden = (self.grid.columns[columnI].getAttribute(\"visible\").toLowerCase() == \"never\")\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!isHidden)\r\n\t\t\t\t\t\tcantVisibles=cantVisibles+1\r\n\t\t\t\t\tif (dataFieldColumn==self.grid.columns[iCV].getAttribute(\"dataField\")){\r\n\t\t\t\t\t\tlocated=true;\r\n\t\t\t\t\t\tif (!isHidden) pos = cantVisibles\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (pos>0)\r\n\t\t\t\t\txml = xml + '<position>' + pos + '</position> ';\r\n\t\t\t\telse\r\n\t\t\t\t\txml = xml + '<position/>'\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t/*try {\r\n\t\t\t\tvar axisOrder = self.columnDataField.indexOf(self.grid.columns[iCV].getAttribute(\"dataField\")) + 1\r\n\t\t\t\txml = xml + '<axisOrder>' + axisOrder + '</axisOrder>'\r\n\t\t\t} catch (ERROR) { }*/\r\n\r\n\t\t\txml = xml + '<restoreview>no</restoreview> ';\r\n\t\t\txml = xml + ' </OLAPDimension>';\r\n\t\t}\r\n\r\n\r\n\t\txml = xml + \"</OLAPCube>\";\r\n\r\n\t\treturn xml;\r\n\t}\r\n\r\n\tOAT.ExportToPdf = function (_self, fileName) {\r\n\t\t//count hidden columns\r\n\t\tvar hiddenColumns = [];\r\n\t\tfor (var i = 0; i < 1; i++) {\r\n\t\t\tvar tRow = jQuery(\"#\" + _self.grid.controlName + \" tr\")[i];\r\n\t\t\tfor (var j = 0; j < tRow.children.length; j++) {\r\n\t\t\t\tif (tRow.children[j].style.display == \"none\") {\r\n\t\t\t\t\thiddenColumns.push(j);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\t//calc max length of paper\r\n\t\tvar hgt = 20 + jQuery(\"#\" + _self.grid.controlName + \" tr\").length * 30 + 5;\r\n\t\tif (hgt < 841) {\r\n\t\t\thgt = 841;\r\n\t\t}\r\n\r\n\t\t//calc max width of paper\r\n\t\tvar wdt = 0;\r\n\t\tvar tRow = jQuery(\"#\" + _self.grid.controlName + \" tr\")[0].children.length - hiddenColumns.length;\r\n\t\twdt = 20 + tRow * (30 + 65) + 5;\r\n\t\tif (wdt < 595) {\r\n\t\t\twdt = 595;\r\n\t\t}\r\n\r\n\t\t//calculate columns width\r\n\t\tvar columnsWidth = [];\r\n\r\n\t\tfor (var i = 0; i < jQuery(\"#\" + _self.grid.controlName + \" tr\").length; i++) {\r\n\r\n\t\t\tvar tRow = jQuery(\"#\" + _self.grid.controlName + \" tr\")[i];\r\n\t\t\tvar columnInPdf = 0;\r\n\t\t\tfor (var j = 0; j < tRow.children.length; j++) {//for every cell in the row\r\n\t\t\t\tvar childText = tRow.children[j].textContent;\r\n\t\t\t\tvar hidden = tRow.children[j].getAttribute('hidden');\r\n\r\n\t\t\t\tif (tRow.children[j].style.display != \"none\") {\r\n\r\n\t\t\t\t\tif (hidden === null) {\r\n\t\t\t\t\t\tif (columnsWidth[columnInPdf] == undefined) {\r\n\t\t\t\t\t\t\tcolumnsWidth[columnInPdf] = 30;\r\n\t\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\t\t//japanese character\r\n\t\t\t\t\t\tvar jChar = 0;\r\n\t\t\t\t\t\tfor (var p = 0; p < childText.length; p++) {\r\n\t\t\t\t\t\t\tif (childText.charCodeAt(p) > 1000) {\r\n\t\t\t\t\t\t\t\tjChar++;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (jChar === 0) {\r\n\t\t\t\t\t\t\tif (childText.length > 14) {\r\n\t\t\t\t\t\t\t\tif (childText.length * 1.68 > columnsWidth[columnInPdf]) {\r\n\t\t\t\t\t\t\t\t\tcolumnsWidth[columnInPdf] = childText.length * 1.68;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tvar w = jChar * 2.8 + (childText.length - jChar) * 1.68;\r\n\t\t\t\t\t\t\tif (w > columnsWidth[columnInPdf]) {\r\n\t\t\t\t\t\t\t\tcolumnsWidth[columnInPdf] = w;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tcolumnInPdf = columnInPdf + 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t//recalculate width\r\n\t\tvar nw = 0\r\n\t\tfor (var i = 0; i < columnsWidth.length; i++) {\r\n\t\t\tnw = nw + columnsWidth[i] * 2.5 + 65;\r\n\t\t}\r\n\t\tnw = 20 + nw + 5;\r\n\t\tif (nw > wdt) {\r\n\t\t\twdt = nw;\r\n\t\t}\r\n\r\n\t\tvar getXOffset = function (colNro, columnsWidth) {\r\n\t\t\tvar offset = 0;\r\n\t\t\tfor (var i = 0; i < colNro; i++) {\r\n\t\t\t\toffset = offset + columnsWidth[i];\r\n\t\t\t}\r\n\t\t\treturn offset;\r\n\t\t}\r\n\r\n\t\tvar getYOffset = function (rowNro, rowsHeight) {\r\n\t\t\tvar offsety = 0;\r\n\t\t\tfor (var j = 0; j < rowNro; j++) {\r\n\t\t\t\toffsety = offsety + rowsHeight[j];\r\n\t\t\t}\r\n\t\t\treturn offsety;\r\n\t\t}\r\n\r\n\t\tvar doc;\r\n\t\tif (wdt <= hgt) {\r\n\t\t\tdoc = new jsPDF('portrait', 'mm', 'a4', false, wdt, 792); //landscape or portrait\r\n\t\t} else {\r\n\t\t\tdoc = new jsPDF('landscape', 'mm', 'a4', false, wdt, 792); //landscape or portrait\r\n\t\t}\r\n\t\tdoc.setFontSize(8);\r\n\r\n\t\tdoc.line(18, 13, 20 + getXOffset(jQuery(\"#\" + _self.grid.controlName + \" tr\")[0].children.length - hiddenColumns.length, columnsWidth), 13);\r\n\r\n\t\tvar y = -1;\r\n\t\tvar nroPag = 1\r\n\t\tvar verticalHeight = Math.min((jQuery(\"#\" + _self.grid.controlName + \" tr\").length) - (nroPag - 1) * 26, 26)\r\n\t\tfor (var i = 0; i < jQuery(\"#\" + _self.grid.controlName + \" tr\").length; i++) {\r\n\t\t\ty++;\r\n\t\t\tvar tRow = jQuery(\"#\" + _self.grid.controlName + \" tr\")[i];\r\n\r\n\t\t\tvar columnInPdf = 0;\r\n\r\n\t\t\tfor (var j = 0; j < tRow.children.length; j++) {//for every cell in the row\r\n\r\n\t\t\t\tif (tRow.children[j].style.display != \"none\") {\r\n\t\t\t\t\t//vertical line\r\n\t\t\t\t\tdoc.line(18 + getXOffset(columnInPdf, columnsWidth), 13, 18 + getXOffset(columnInPdf, columnsWidth), 23 + (verticalHeight - 1) * 10);\r\n\r\n\t\t\t\t\tvar childText = OAT.removeIconFont(tRow.children[j].textContent);\r\n\t\t\t\t\tvar hidden = tRow.children[j].getAttribute('hidden');\r\n\r\n\t\t\t\t\tvar imgTxtData = []\r\n\t\t\t\t\tif (childText.charCodeAt(0) > 1000) {\r\n\t\t\t\t\t\tfor (var cNo = 0; cNo < childText.length; cNo++) {\r\n\t\t\t\t\t\t\timgTxtData[cNo] = OAT.getCharacterImg(childText.charCodeAt(cNo))\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvar posI = -1;\r\n\t\t\t\t\t\tfor (var p = 1; p < childText.length; p++) {\r\n\t\t\t\t\t\t\tif (childText.charCodeAt(p) > 1000) {\r\n\t\t\t\t\t\t\t\tposI = p;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (posI > 0) {\r\n\t\t\t\t\t\t\tvar tempchildText = childText.substring(0, posI);\r\n\t\t\t\t\t\t\tvar posE = 0\r\n\t\t\t\t\t\t\tfor (var cNo = posI; cNo < childText.length; cNo++) {\r\n\t\t\t\t\t\t\t\timgTxtData[posE] = OAT.getCharacterImg(childText.charCodeAt(cNo))\r\n\t\t\t\t\t\t\t\tposE++;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tchildText = tempchildText;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t//set styles\r\n\t\t\t\t\tvar hasBackground = false;\r\n\t\t\t\t\tdoc.setTextColor(0, 0, 0);\r\n\t\t\t\t\tdoc.setFontStyle('normal');\r\n\t\t\t\t\tvar IsTextAlignRight = !isNaN(parseFloat(childText));\r\n\t\t\t\t\tvar textWidht = doc.getStringUnitWidth(childText);\r\n\t\t\t\t\tif ((tRow.children[j].getAttribute(\"style\") != undefined) && (tRow.children[j].getAttribute(\"style\") != null)) {\r\n\t\t\t\t\t\tvar attributes = tRow.children[j].getAttribute(\"style\").split(\";\");\r\n\t\t\t\t\t\tfor (var at = 0; at < attributes.length; at++) {\r\n\t\t\t\t\t\t\tvar detail = attributes[at].split(\":\");\r\n\t\t\t\t\t\t\tif (detail[0].replace(/^\\s+|\\s+$/g, '') === \"color\") {\r\n\t\t\t\t\t\t\t\tvar rgb = detail[1].replace(/^\\s+|\\s+$/g, '');\r\n\t\t\t\t\t\t\t\trgb = rgb.substring(4, rgb.length);\r\n\t\t\t\t\t\t\t\trgb = rgb.substring(0, rgb.length - 1);\r\n\t\t\t\t\t\t\t\tdoc.setTextColor(parseInt(rgb.split(\",\")[0]), parseInt(rgb.split(\",\")[1]), parseInt(rgb.split(\",\")[2]));\r\n\r\n\t\t\t\t\t\t\t} else if (detail[0].replace(/^\\s+|\\s+$/g, '') === \"text-align\") {\r\n\t\t\t\t\t\t\t\t//var alg = detail[1].replace(/^\\s+|\\s+$/g, '');\r\n\t\t\t\t\t\t\t\tIsTextAlignRight = (detail[1].replace(/^\\s+|\\s+$/g, '') == \"right\")\r\n\t\t\t\t\t\t\t} else if (detail[0].replace(/^\\s+|\\s+$/g, '') === \"font-style\") {\r\n\t\t\t\t\t\t\t\tdoc.setFontStyle('italic')\r\n\t\t\t\t\t\t\t} else if (detail[0].replace(/^\\s+|\\s+$/g, '') === \"font-weight\") {\r\n\t\t\t\t\t\t\t\tif (detail[1].replace(/^\\s+|\\s+$/g, '') === \"bold\") {\r\n\t\t\t\t\t\t\t\t\tdoc.setFontStyle('bold')\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else if (detail[0].replace(/^\\s+|\\s+$/g, '') === \"background-color\") {\r\n\t\t\t\t\t\t\t\tvar rgb = detail[1].replace(/^\\s+|\\s+$/g, '');\r\n\t\t\t\t\t\t\t\trgb = rgb.substring(4, rgb.length);\r\n\t\t\t\t\t\t\t\trgb = rgb.substring(0, rgb.length - 1);\r\n\t\t\t\t\t\t\t\tdoc.setFillColor(parseInt(rgb.split(\",\")[0]), parseInt(rgb.split(\",\")[1]), parseInt(rgb.split(\",\")[2]));\r\n\t\t\t\t\t\t\t\thasBackground = true;\r\n\t\t\t\t\t\t\t} else if (detail[0].replace(/^\\s+|\\s+$/g, '') === \"border-color\") {\r\n\t\t\t\t\t\t\t\tvar rgb = detail[1].replace(/^\\s+|\\s+$/g, '');\r\n\t\t\t\t\t\t\t\trgb = rgb.substring(4, rgb.length);\r\n\t\t\t\t\t\t\t\trgb = rgb.substring(0, rgb.length - 1);\r\n\t\t\t\t\t\t\t\tdoc.setDrawColor(parseInt(rgb.split(\",\")[0]), parseInt(rgb.split(\",\")[1]), parseInt(rgb.split(\",\")[2]));\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ((hasBackground) && (j == (tRow.children.length - 1))) {//for the last column more width\r\n\t\t\t\t\t\tdoc.rect(18 + getXOffset(columnInPdf, columnsWidth), 23 + (y - 1) * 10, 32, 10, 'FD');\r\n\t\t\t\t\t} else if (hasBackground) {\r\n\t\t\t\t\t\tdoc.rect(18 + getXOffset(columnInPdf, columnsWidth), 23 + (y - 1) * 10, 30, 10, 'FD');\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tdoc.setDrawColor(0, 0, 0);\r\n\t\t\t\t\tdoc.setFontSize(8);\r\n\r\n\t\t\t\t\tif ((hidden === null) /*&& (tRow.children[j].style.display != \"none\")*/) {\r\n\t\t\t\t\t\tvar preImage = 0;\r\n\t\t\t\t\t\tif (childText.charCodeAt(0) < 1000) {\r\n\t\t\t\t\t\t\tpreImage = childText.length + 2\r\n\t\t\t\t\t\t\tif (IsTextAlignRight) {\r\n\t\t\t\t\t\t\t\tdoc.text(20 + getXOffset(columnInPdf + 1, columnsWidth) - textWidht * 3 - 4, 20 + y * 10, childText);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tdoc.text(20 + getXOffset(columnInPdf, columnsWidth), 20 + y * 10, childText);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (imgTxtData.length > 0) {\r\n\t\t\t\t\t\t\tfor (var cNo = 0; cNo < imgTxtData.length; cNo++) {\r\n\t\t\t\t\t\t\t\tdoc.addImage(imgTxtData[cNo], 'JPEG', 20 + getXOffset(columnInPdf, columnsWidth) + preImage + cNo * 2.5, 20 + y * 10 - 2.5, 2.5, 2.5);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tcolumnInPdf = columnInPdf + 1;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t\t//last vertical line\r\n\t\t\tdoc.line(20 + getXOffset(tRow.children.length - hiddenColumns.length, columnsWidth), 13, 20 + getXOffset(tRow.children.length - hiddenColumns.length, columnsWidth), 23 + (verticalHeight - 1) * 10);\r\n\r\n\t\t\tdoc.line(18, 23 + y * 10, 20 + getXOffset(tRow.children.length - hiddenColumns.length, columnsWidth), 23 + y * 10);\r\n\t\t\tif (y >= 25) {\r\n\t\t\t\tdoc.setDrawColor(0, 0, 0)\r\n\t\t\t\tnroPag++\r\n\t\t\t\tverticalHeight = Math.min((jQuery(\"#\" + _self.grid.controlName + \" tr\").length - 1) - (nroPag - 1) * 26 + 1, 26)\r\n\t\t\t\ty = -1\r\n\t\t\t\tdoc.addPage()\r\n\t\t\t\t//top horizontal line\r\n\t\t\t\tdoc.line(18, 13, 20 + getXOffset(jQuery(\"#\" + _self.grid.controlName + \" tr\")[0].children.length - hiddenColumns.length, columnsWidth), 13);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tisSD = OAT.isSD();\r\n\t\t\r\n\t\tif (OAT.isSafari() || (isSD)) { //for safari\r\n\t\t\tdoc.output('dataurlnewwindow');\r\n\t\t} else  {\r\n\t\t\tdoc.save(fileName + '.pdf');\r\n\t\t}\r\n\t}\r\n\r\n\tOAT.ExportToExcel = function (_self, fileName) {\r\n\t\t\r\n\t\tvar table = '<table><tbody>'\r\n\r\n\t\tfor (var i = 0; i < jQuery(\"#\" + _self.grid.controlName + \" tr\").length; i++) {//for every row\r\n\t\t\ttable = table + '<tr>';\r\n\r\n\t\t\tvar tRow = jQuery(\"#\" + _self.grid.controlName + \" tr\")[i];\r\n\t\t\tfor (var j = 0; j < tRow.children.length; j++) {//for every cell in the row\r\n\t\t\t\tvar childText;\r\n\t\t\t\tif (i === 0) {\r\n\t\t\t\t\tchildText = tRow.children[j].getAttribute(\"title_v\");\r\n\t\t\t\t\tif (childText === undefined) {\r\n\t\t\t\t\t\tchildText = OAT.removeIconFont(tRow.children[j].textContent).trim();\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tchildText = tRow.children[j].getAttribute(\"title\"); \r\n\t\t\t\t\t//childText = OAT.removeIconFont(tRow.children[j].title/*.textContent*/).trim();\r\n\t\t\t\t\tif (childText === undefined) {\r\n\t\t\t\t\t\tchildText = tRow.children[j].textContent;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t/*if (((_self.grid.columns[j].getAttribute(\"dataType\") == \"date\") || (_self.grid.columns[j].getAttribute(\"dataType\") == \"datetime\")) \r\n\t\t\t\t\t\t&& (OAT_JS.grid.gridData[UcId].rowsMetadata.defaultPicture.getAttribute(\"dateFormat\") == \"YMD\"))\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tchildText = '=\"' + childText + '\"';\r\n\t\t\t\t\t}*/\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tchildText = childText.replace(/\\u00A0/g, \" \")\r\n\t\t\t\tvar hidden = tRow.children[j].getAttribute('hidden');\r\n\t\t\t\tif (tRow.children[j].style.display != \"none\") {\r\n\t\t\t\t\tif (hidden === null) {\r\n\t\t\t\t\t\tvar rowSpan = tRow.children[j].getAttribute('rowspan');\r\n\t\t\t\t\t\tvar colSpan = tRow.children[j].getAttribute('colspan');\r\n\r\n\t\t\t\t\t\tvar styleString = \"\";\r\n\t\t\t\t\t\tif ((tRow.children[j].getAttribute(\"style\") != undefined) && (tRow.children[j].getAttribute(\"style\") != null)) {\r\n\t\t\t\t\t\t\tstyleString = \" style=\\\"\" + tRow.children[j].getAttribute(\"style\") + \"\\\" \";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t/*if (((_self.grid.columns[j].getAttribute(\"dataType\") == \"date\") || (_self.grid.columns[j].getAttribute(\"dataType\") == \"datetime\")) \r\n\t\t\t\t\t\t&& (OAT_JS.grid.gridData[UcId].rowsMetadata.defaultPicture.getAttribute(\"dateFormat\") == \"YMD\"))\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tif (_self.grid.columns[j].getAttribute(\"dataType\") == \"date\")\r\n\t\t\t\t\t\t\t\tstyleString = ' style=\"width:80px;\" ';\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\tstyleString = ' style=\"width:140px;\" ';\r\n\t\t\t\t\t\t}*/\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif ((rowSpan === null) && (colSpan === null)) {\r\n\t\t\t\t\t\t\ttable = table + '<td ' + styleString + '>' + childText + '</td>';\r\n\t\t\t\t\t\t} else if (colSpan === null) {\r\n\t\t\t\t\t\t\ttable = table + '<td ' + styleString + ' rowspan=\"' + rowSpan + '\">' + childText + '</td>';\r\n\t\t\t\t\t\t} else if (rowSpan === null) {\r\n\t\t\t\t\t\t\ttable = table + '<td ' + styleString + ' colspan=\"' + colSpan + '\">' + childText + '</td>';\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\ttable = table + '<td ' + styleString + ' colspan=\"' + colSpan + '\" rowspan=\"' + rowSpan + '\">' + childText + '</td>';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\ttable = table + '</tr>';\r\n\t\t}\r\n\r\n\r\n\t\ttable = table + '</tbody></table>';\r\n\t\t\r\n\t\t//add header for special characters \r\n\t\tvar header = '<head><meta http-equiv=\"Content-Type\" content=\"text/html;charset=utf-8\"></head><body>'\r\n\t\ttable = header + table + '</body>'\r\n\t\t\r\n\t\tvar dtltbl = table;\r\n\t\t\r\n\t\tisSD = OAT.isSD();\r\n\t\t\r\n\t\t\r\n\t\tif (OAT.isSafari() || (isSD)){\r\n\t\t\twindow.open('data:application/vnd.ms-excel,' + encodeURIComponent(dtltbl));\r\n\t\t} else {\r\n\t\t\treturn dtltbl;\r\n\t\t}\r\n\r\n\r\n\t}\r\n\r\n\r\n\tOAT.ExportToExcel2010 = function (_self, fileName, serverPagination, recordData, UcId) {\r\n\r\n\r\n\t\tfunction componentToHex(c) {\r\n\t\t\tvar hex = c.toString(16);\r\n\t\t\treturn hex.length == 1 ? \"0\" + hex : hex;\r\n\t\t}\r\n\r\n\t\tfunction rgbToHex(r, g, b) {\r\n\t\t\treturn componentToHex(r) + componentToHex(g) + componentToHex(b);\r\n\t\t}\r\n\r\n\r\n\r\n\t\tdataTable = [];\r\n\r\n\t\tvar rowsToAdd = jQuery(\"#\" + _self.grid.controlName + \" tr\").length;\r\n\t\tif ((serverPagination != undefined) && (serverPagination)) {\r\n\t\t\trowsToAdd = 1;\r\n\t\t}\r\n\r\n\t\tvar hiddenColumns = []\r\n\r\n\t\tfor (var i = 0; i < rowsToAdd; i++) {//for every row\r\n\t\t\tdataRow = [];\r\n\r\n\t\t\tvar tRow = jQuery(\"#\" + _self.grid.controlName + \" tr\")[i];\r\n\t\t\tfor (var j = 0; j < tRow.children.length; j++) {//for every cell in the row\r\n\t\t\t\tvar childText = tRow.children[j].textContent;\r\n\t\t\t\tvar hidden = tRow.children[j].getAttribute('hidden');\r\n\t\t\t\tif (tRow.children[j].style.display != \"none\") {\r\n\t\t\t\t\tif (hidden === null) {\r\n\t\t\t\t\t\tvar rowSpan = tRow.children[j].getAttribute('rowspan');\r\n\t\t\t\t\t\tvar colSpan = tRow.children[j].getAttribute('colspan');\r\n\r\n\t\t\t\t\t\tvar styleString = \"\";\r\n\t\t\t\t\t\tvar cellObject = { value: childText };\r\n\t\t\t\t\t\tif ((tRow.children[j].getAttribute(\"style\") != undefined) && (tRow.children[j].getAttribute(\"style\") != null)) {\r\n\t\t\t\t\t\t\tvar attributes = tRow.children[j].getAttribute(\"style\").split(\";\");\r\n\t\t\t\t\t\t\tfor (var at = 0; at < attributes.length; at++) {\r\n\t\t\t\t\t\t\t\tvar detail = attributes[at].split(\":\");\r\n\t\t\t\t\t\t\t\tif (detail[0].replace(/^\\s+|\\s+$/g, '') === \"color\") {\r\n\t\t\t\t\t\t\t\t\tvar rgb = detail[1].replace(/^\\s+|\\s+$/g, '');\r\n\t\t\t\t\t\t\t\t\trgb = rgb.substring(4, rgb.length);\r\n\t\t\t\t\t\t\t\t\trgb = rgb.substring(0, rgb.length - 1);\r\n\t\t\t\t\t\t\t\t\tvar hex = rgbToHex(parseInt(rgb.split(\",\")[0]), parseInt(rgb.split(\",\")[1]), parseInt(rgb.split(\",\")[2]))\r\n\t\t\t\t\t\t\t\t\tcellObject.fontColor = hex;\r\n\t\t\t\t\t\t\t\t} else if (detail[0].replace(/^\\s+|\\s+$/g, '') === \"text-align\") {\r\n\t\t\t\t\t\t\t\t\tvar alg = detail[1].replace(/^\\s+|\\s+$/g, '');\r\n\t\t\t\t\t\t\t\t\tcellObject.hAlign = alg;\r\n\t\t\t\t\t\t\t\t} else if (detail[0].replace(/^\\s+|\\s+$/g, '') === \"font-style\") {\r\n\t\t\t\t\t\t\t\t\tif (detail[1].replace(/^\\s+|\\s+$/g, '') === \"italic\") {\r\n\t\t\t\t\t\t\t\t\t\tcellObject.italic = 1;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} else if (detail[0].replace(/^\\s+|\\s+$/g, '') === \"font-weight\") {\r\n\t\t\t\t\t\t\t\t\tif (detail[1].replace(/^\\s+|\\s+$/g, '') === \"bold\") {\r\n\t\t\t\t\t\t\t\t\t\tcellObject.bold = 1;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} else if (detail[0].replace(/^\\s+|\\s+$/g, '') === \"background-color\") {\r\n\t\t\t\t\t\t\t\t\tvar rgb = detail[1].replace(/^\\s+|\\s+$/g, '');\r\n\t\t\t\t\t\t\t\t\trgb = rgb.substring(4, rgb.length);\r\n\t\t\t\t\t\t\t\t\trgb = rgb.substring(0, rgb.length - 1);\r\n\t\t\t\t\t\t\t\t\tvar hex = rgbToHex(parseInt(rgb.split(\",\")[0]), parseInt(rgb.split(\",\")[1]), parseInt(rgb.split(\",\")[2]))\r\n\t\t\t\t\t\t\t\t\tcellObject.fill = hex;\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif ((rowSpan === null) && (colSpan === null)) {\r\n\t\t\t\t\t\t\tdataRow.push(cellObject)\r\n\t\t\t\t\t\t} else if (colSpan === null) {\r\n\t\t\t\t\t\t\tcellObject.rowSpan = parseInt(rowSpan);\r\n\t\t\t\t\t\t\tdataRow.push(cellObject)\r\n\t\t\t\t\t\t} else if (rowSpan === null) {\r\n\t\t\t\t\t\t\tcellObject.colSpan = parseInt(colSpan);\r\n\t\t\t\t\t\t\tdataRow.push(cellObject)\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tcellObject.colSpan = parseInt(colSpan);\r\n\t\t\t\t\t\t\tcellObject.rowSpan = parseInt(rowSpan);\r\n\t\t\t\t\t\t\tdataRow.push(cellObject)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\thiddenColumns.push(j);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tdataTable.push(dataRow);\r\n\t\t}\r\n\r\n\r\n\t\tif ((serverPagination != undefined) && (serverPagination)) {\r\n\t\t\tfor (var i = 0; i < recordData.length; i++) {\r\n\t\t\t\tdataRow = [];\r\n\t\t\t\tfor (var j = 0; j < recordData[i].length; j++) {\r\n\t\t\t\t\tif (hiddenColumns.indexOf(j) == -1) {\r\n\t\t\t\t\t\tvar childText = OAT.ApplyPictureValue(recordData[i][j], \"\", OAT_JS.grid.gridData[UcId].rowsMetadata.defaultPicture, OAT_JS.grid.gridData[UcId].rowsMetadata.forPivotCustomPicture[j]) /* Apply Picture */\r\n\r\n\t\t\t\t\t\tvar td = OAT.Dom.create(\"td\");\r\n\r\n\t\t\t\t\t\ttd.setAttribute(\"title\", childText);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tvar cellvalue =  recordData[i][j]\r\n\t\t\t\t\t\tif (_self.grid.columnsDataType[j] == \"date\") {\r\n\t\t\t\t\t\t\tcellvalue = OAT.ApplyPictureValue(recordData[i][j], _self.grid.columnsDataType[j], OAT_JS.grid.gridData[UcId].rowsMetadata.defaultPicture, OAT_JS.grid.gridData[UcId].rowsMetadata.forPivotCustomPicture[j]) /* Apply Picture */\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ttd = OAT.applyFormatValues(td, cellvalue, _self.grid.columnsDataType, j, OAT_JS.grid.gridData[UcId].rowsMetadata.formatValues, OAT_JS.grid.gridData[UcId].rowsMetadata.conditionalFormatsColumns, OAT_JS.grid.gridData[UcId].rowsMetadata.forPivotCustomFormat);\r\n\r\n\t\t\t\t\t\t//align numbers right\r\n\t\t\t\t\t\tif ( ((_self.grid.columnsDataType[j] != \"character\") && (_self.grid.columnsDataType[j] != \"guid\")) || (_self.grid.columnsDataType[j] === 'date')) {\r\n\t\t\t\t\t\t\ttd.style.textAlign = \"right\";\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t//td.style.textAlign = \"left\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tvar cellObject = { value: childText };\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif ( !isNaN(parseFloat(childText)) && (_self.grid.columnsDataType[j] != \"character\")\r\n\t\t\t\t\t\t\t && (_self.grid.columnsDataType[j] != \"date\") && (_self.grid.columnsDataType[j] != \"datetime\") && (_self.grid.columnsDataType[j] != \"guid\") ) \r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tcellObject = { value: parseFloat(childText) + \"\" };\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif ((td.getAttribute(\"style\") != undefined) && (td.getAttribute(\"style\") != null)) {\r\n\t\t\t\t\t\t\tvar attributes = td.getAttribute(\"style\").split(\";\");\r\n\t\t\t\t\t\t\tfor (var at = 0; at < attributes.length; at++) {\r\n\t\t\t\t\t\t\t\tvar detail = attributes[at].split(\":\");\r\n\t\t\t\t\t\t\t\tif (detail[0].replace(/^\\s+|\\s+$/g, '') === \"color\") {\r\n\t\t\t\t\t\t\t\t\tvar rgb = detail[1].replace(/^\\s+|\\s+$/g, '');\r\n\t\t\t\t\t\t\t\t\trgb = rgb.substring(4, rgb.length);\r\n\t\t\t\t\t\t\t\t\trgb = rgb.substring(0, rgb.length - 1);\r\n\t\t\t\t\t\t\t\t\tvar hex = rgbToHex(parseInt(rgb.split(\",\")[0]), parseInt(rgb.split(\",\")[1]), parseInt(rgb.split(\",\")[2]))\r\n\t\t\t\t\t\t\t\t\tcellObject.fontColor = hex;\r\n\t\t\t\t\t\t\t\t} else if (detail[0].replace(/^\\s+|\\s+$/g, '') === \"text-align\") {\r\n\t\t\t\t\t\t\t\t\tvar alg = detail[1].replace(/^\\s+|\\s+$/g, '');\r\n\t\t\t\t\t\t\t\t\tcellObject.hAlign = alg;\r\n\t\t\t\t\t\t\t\t} else if (detail[0].replace(/^\\s+|\\s+$/g, '') === \"font-style\") {\r\n\t\t\t\t\t\t\t\t\tif (detail[1].replace(/^\\s+|\\s+$/g, '') === \"italic\") {\r\n\t\t\t\t\t\t\t\t\t\tcellObject.italic = 1;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} else if (detail[0].replace(/^\\s+|\\s+$/g, '') === \"font-weight\") {\r\n\t\t\t\t\t\t\t\t\tif (detail[1].replace(/^\\s+|\\s+$/g, '') === \"bold\") {\r\n\t\t\t\t\t\t\t\t\t\tcellObject.bold = 1;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} else if (detail[0].replace(/^\\s+|\\s+$/g, '') === \"background-color\") {\r\n\t\t\t\t\t\t\t\t\tvar rgb = detail[1].replace(/^\\s+|\\s+$/g, '');\r\n\t\t\t\t\t\t\t\t\trgb = rgb.substring(4, rgb.length);\r\n\t\t\t\t\t\t\t\t\trgb = rgb.substring(0, rgb.length - 1);\r\n\t\t\t\t\t\t\t\t\tvar hex = rgbToHex(parseInt(rgb.split(\",\")[0]), parseInt(rgb.split(\",\")[1]), parseInt(rgb.split(\",\")[2]))\r\n\t\t\t\t\t\t\t\t\tcellObject.fill = hex;\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif ((_self.grid.columnsDataType[j] == \"real\") || (_self.grid.columnsDataType[j] == \"integer\")){\r\n\t\t\t\t\t\t\tcellObject.formatCode = OAT_JS.grid.gridData[UcId].rowsMetadata.forPivotCustomPicture[j].replace(/Z/g,\"#\").replace(/9/g, \"0\")\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (_self.grid.columnsDataType[j] == \"date\"){\r\n\t\t\t\t\t\t\tif (OAT_JS.grid.gridData[UcId].rowsMetadata.forPivotCustomPicture[j] != undefined){ \r\n\t\t\t\t\t\t\t\t var datePicture = OAT_JS.grid.gridData[UcId].rowsMetadata.forPivotCustomPicture[j].trim()\r\n\t\t\t\t\t\t\t\t var dateDefaultFormat = OAT_JS.grid.gridData[UcId].rowsMetadata.defaultPicture.getAttribute(\"dateFormat\")\r\n\t\t\t\t\t\t\t\t if (datePicture == \"99/99/99\")\r\n\t\t\t\t\t\t\t\t {\r\n\t\t\t\t\t\t\t\t \tcellObject.formatCode = \"mm/dd/yy\"\r\n\t\t\t\t\t\t\t\t\tif (dateDefaultFormat == \"DMY\")\r\n\t\t\t\t\t\t\t\t\t\tcellObject.formatCode = \"dd/mm/yy\"\r\n\t\t\t\t\t\t\t\t\tif (dateDefaultFormat == \"YMD\")\r\n\t\t\t\t\t\t\t\t\t\tcellObject.formatCode = \"yy/mm/dd\"\r\n\t\t\t\t\t\t\t\t }\r\n\t\t\t\t\t\t\t\t if (datePicture == \"99/99/9999\"){\r\n\t\t\t\t\t\t\t\t\tcellObject.formatCode = \"mm/dd/yyyy\"\r\n\t\t\t\t\t\t\t\t\tif (dateDefaultFormat == \"DMY\")\r\n\t\t\t\t\t\t\t\t\t\tcellObject.formatCode = \"dd/mm/yyyy\"\r\n\t\t\t\t\t\t\t\t\tif (dateDefaultFormat == \"YMD\")\r\n\t\t\t\t\t\t\t\t\t\tcellObject.formatCode = \"yyyy/mm/dd\"\r\n\t\t\t\t\t\t\t\t }\r\n\t\t\t\t\t\t\t\t if (datePicture == \"9999/99/99\"){\r\n\t\t\t\t\t\t\t\t\tcellObject.formatCode = \"yyyy/mm/dd\"\r\n\t\t\t\t\t\t\t\t\tif (dateDefaultFormat == \"YDM\")\r\n\t\t\t\t\t\t\t\t\t\tcellObject.formatCode = \"yyyy/dd/mm\"\r\n\t\t\t\t\t\t\t\t\tif (dateDefaultFormat == \"YMD\")\r\n\t\t\t\t\t\t\t\t\t\tcellObject.formatCode = \"yyyy/mm/dd\"\r\n\t\t\t\t\t\t\t\t }\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (_self.grid.columnsDataType[j] == \"datetime\"){\r\n\t\t\t\t\t\t\tif (OAT_JS.grid.gridData[UcId].rowsMetadata.forPivotCustomPicture[j] != undefined){ \r\n\t\t\t\t\t\t\t\tvar datePicture = OAT_JS.grid.gridData[UcId].rowsMetadata.forPivotCustomPicture[j].trim().split(\" \")\r\n\t\t\t\t\t\t\t\tvar formatDatePicture = \"\"\r\n\t\t\t\t\t\t\t\tvar dateTimeDefaultFormat = OAT_JS.grid.gridData[UcId].rowsMetadata.defaultPicture.getAttribute(\"dateFormat\")\r\n\t\t\t\t\t\t\t\tif (datePicture[0] == \"99/99/99\")\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t \tformatDatePicture = \"mm/dd/yy\"\r\n\t\t\t\t\t\t\t\t\tif (dateTimeDefaultFormat == \"DMY\")\r\n\t\t\t\t\t\t\t\t\t\tcellObject.formatCode = \"dd/mm/yy\"\r\n\t\t\t\t\t\t\t\t\tif (dateTimeDefaultFormat == \"YMD\")\r\n\t\t\t\t\t\t\t\t\t\tcellObject.formatCode = \"yy/mm/dd\"\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (datePicture[0] == \"99/99/9999\"){\r\n\t\t\t\t\t\t\t\t\tformatDatePicture = \"mm/dd/yyyy\"\r\n\t\t\t\t\t\t\t\t\tif (dateTimeDefaultFormat == \"DMY\")\r\n\t\t\t\t\t\t\t\t\t\tcellObject.formatCode = \"dd/mm/yyyy\"\r\n\t\t\t\t\t\t\t\t\tif (dateTimeDefaultFormat == \"YMD\")\r\n\t\t\t\t\t\t\t\t\t\tcellObject.formatCode = \"yyyy/mm/dd\"\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (datePicture[0] == \"9999/99/99\"){\r\n\t\t\t\t\t\t\t\t\tformatDatePicture = \"yyyy/mm/dd\"\r\n\t\t\t\t\t\t\t\t\tif (dateTimeDefaultFormat == \"YDM\")\r\n\t\t\t\t\t\t\t\t\t\tcellObject.formatCode = \"yyyy/dd/mm\"\r\n\t\t\t\t\t\t\t\t\tif (dateTimeDefaultFormat == \"YMD\")\r\n\t\t\t\t\t\t\t\t\t\tcellObject.formatCode = \"yyyy/mm/dd\"\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t/*if (datePicture[1] == \"99\")\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tcellObject.formatCode = formatDatePicture + \" hh\"\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (datePicture[1] == \"99:99\")\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tcellObject.formatCode = formatDatePicture + \" hh:mm\"\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (datePicture[1] == \"99:99:99\")\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tcellObject.formatCode = formatDatePicture + \" hh:mm:ss\"\t\t\r\n\t\t\t\t\t\t\t\t}\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tif (datePicture[1] == \"99:99:99.999\")\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tcellObject.formatCode = formatDatePicture + \" hh:mm:ss\"\r\n\t\t\t\t\t\t\t\t}*/\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tcellObject.genexusType = _self.grid.columnsDataType[j];\r\n\t\t\t\t\t\tcellObject.genexusPicture = OAT_JS.grid.gridData[UcId].rowsMetadata.forPivotCustomPicture[j];\r\n\r\n\t\t\t\t\t\tdataRow.push(cellObject)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tdataTable.push(dataRow);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar sheet = xlsx({\r\n\t\t\tcreator: 'Genexus',\r\n\t\t\tlastModifiedBy: 'Genexus',\r\n\t\t\tpivot: false,\r\n\t\t\tworksheets: [{\r\n\t\t\t\tdata: dataTable,\r\n\t\t\t\tname: 'Sheet 1'\r\n\t\t\t}]\r\n\t\t});\r\n\t\t\r\n\t\tisSD = OAT.isSD();\r\n\t\t\t\t\r\n\t\tif (OAT.isSafari() || (isSD)){ //for safari\r\n\t\t\twindow.location = sheet.href();\r\n\t\t} else  {\r\n\t\t\t//window.location = sheet.href();\r\n\t\t\tvar byteCharacters = atob(sheet.base64);\r\n\t\t\tfunction charCodeFromCharacter(c) {\r\n\t\t\t\treturn c.charCodeAt(0);\r\n\t\t\t}\r\n\r\n\t\t\tvar byteNumbers = Array.prototype.map.call(byteCharacters, charCodeFromCharacter);\r\n\t\t\tvar uint8Data = new Uint8Array(byteNumbers);\r\n\r\n\t\t\tvar blob = new Blob([uint8Data], { type: \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\" });\r\n\t\t\tsaveAs(blob, fileName + \".xlsx\");\r\n\t\t} \r\n\t}\r\n\r\n\tOAT.ExportToXML = function (self, fileName) {\r\n\t\tvar hiddenColumns = [];\r\n\t\tfor (var i = 0; i < 1; i++) {\r\n\t\t\tvar tRow = jQuery(\"#\" + self.grid.controlName + \" tr\")[i];\r\n\t\t\tfor (var j = 0; j < tRow.children.length; j++) {\r\n\t\t\t\tif (tRow.children[j].style.display == \"none\") {\r\n\t\t\t\t\thiddenColumns.push(j);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar xml = '<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?><EXPORT format=\"XML\" type=\"flat\">';\r\n\t\txml = xml + '<METADATA>';\r\n\t\tfor (var iCV = 0; iCV < self.grid.columns.length; iCV++) {\r\n\t\t\tif (hiddenColumns.indexOf(iCV) == -1) {\r\n\t\t\t\tvar position = 'row';\r\n\r\n\t\t\t\txml = xml + '<OLAPDimension ';\r\n\t\t\t\txml = xml + 'name=\"' + self.grid.columns[iCV].getAttribute(\"dataField\") + '\" ';\r\n\t\t\t\txml = xml + 'label=\"' + self.grid.columns[iCV].getAttribute(\"displayName\") + '\" ';\r\n\t\t\t\txml = xml + 'picture=\"' + self.grid.columns[iCV].getAttribute(\"picture\") + '\" ';\r\n\t\t\t\txml = xml + 'datatype=\"' + self.grid.columns[iCV].getAttribute(\"dataType\") + '\" ';\r\n\t\t\t\txml = xml + 'showAll=\"false\" ';\r\n\t\t\t\txml = xml + 'position=\"' + position + '\">';\r\n\r\n\r\n\t\t\t\tvar previusValue = [];\r\n\t\t\t\tfor (var i = 0; i < self.grid.rows.length; i++) {\r\n\t\t\t\t\tif (previusValue.findIndex(self.grid.rows[i].cells[iCV].options.value) === -1) {\r\n\t\t\t\t\t\txml = xml + '<VALUE CHECKED=';\r\n\t\t\t\t\t\tif (self.grid.conditions[iCV].blackList.findIndex(self.grid.rows[i].cells[iCV].options.value) === -1) {\r\n\t\t\t\t\t\t\tpreviusValue.push(self.grid.rows[i].cells[iCV].options.value);\r\n\t\t\t\t\t\t\txml = xml + '\"true\"';\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\txml = xml + '\"false\"';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\txml = xml + ' COLLAPSED=\"false\">'\r\n\r\n\t\t\t\t\t\t/*Set the value with the original format, for numeric values*/\r\n\t\t\t\t\t\tvar valuetoString = self.grid.rows[i].cells[iCV].options.value;\r\n\t\t\t\t\t\tif (!isNaN(parseFloat(self.grid.rows[i].cells[iCV].options.value))) {\r\n\t\t\t\t\t\t\tvar numRecord = parseFloat(self.grid.rows[i].cells[iCV].options.value);\r\n\t\t\t\t\t\t\tif (data != undefined) {\r\n\t\t\t\t\t\t\t\tfor (var di = 0; di < data.length; di++) {\r\n\t\t\t\t\t\t\t\t\tif (data[di] != undefined) {\r\n\t\t\t\t\t\t\t\t\t\tfor (var dj = 0; dj < data[di].length; dj++) {\r\n\t\t\t\t\t\t\t\t\t\t\tif ((parseFloat(data[di][dj]) != undefined) && (!isNaN(data[di][dj]))) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (parseFloat(data[di][dj]) === parseFloat(self.grid.rows[i].cells[iCV].options.value)) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvaluetoString = data[di][dj];\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\txml = xml + valuetoString + '</VALUE>';\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\txml = xml + '</OLAPDimension>';\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor (var iCV = 0; iCV < measures.length; iCV++) {\r\n\t\t\txml = xml + '<OLAPMeasure ';\r\n\t\t\txml = xml + 'name=\"' + measures[iCV].getAttribute(\"dataField\") + '\" ';\r\n\t\t\txml = xml + 'label=\"' + measures[iCV].getAttribute(\"displayName\") + '\" ';\r\n\t\t\txml = xml + 'picture=\"' + measures[iCV].getAttribute(\"picture\") + '\" ';\r\n\t\t\txml = xml + 'datatype=\"' + measures[iCV].getAttribute(\"dataType\") + '\" ';\r\n\t\t\txml = xml + 'showAll=\"true\" ';\r\n\t\t\txml = xml + 'aggregator=\"sum\"/>';\r\n\t\t}\r\n\r\n\t\txml = xml + '</METADATA>';\r\n\r\n\t\txml = xml + '<FLATDATA>';\r\n\t\tif (data != undefined) {\r\n\t\t\tfor (var i = 0; i < data.length; i++) {\r\n\t\t\t\txml = xml + '<ROW ';\r\n\t\t\t\tfor (var iCV = 0; iCV < data[0].length; iCV++) {\r\n\t\t\t\t\tif (hiddenColumns.indexOf(iCV) == -1) {\r\n\t\t\t\t\t\tvar valuetoString = data[i][iCV];\r\n\t\t\t\t\t\txml = xml + self.grid.columns[iCV].getAttribute(\"dataField\") + '=\"' + valuetoString + '\" ';\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\txml = xml + '/>';\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tfor (var i = 0; i < self.grid.rows.length; i++) {\r\n\t\t\t\txml = xml + '<ROW ';\r\n\r\n\r\n\t\t\t\tfor (var iCV = 0; iCV < self.grid.rows[0].cells.length; iCV++) {\r\n\t\t\t\t\t/*Set the value with the original format, for numeric values*/\r\n\t\t\t\t\tvar valuetoString = \"\";\r\n\t\t\t\t\tvaluetoString = self.grid.rows[i].cells[iCV].options.value;\r\n\t\t\t\t\tif (!isNaN(parseFloat(self.grid.rows[i].cells[iCV].options.value))) {\r\n\t\t\t\t\t\tvar numRecord = parseFloat(self.grid.rows[i].cells[iCV].options.value);\r\n\t\t\t\t\t\tif (data != undefined) {\r\n\t\t\t\t\t\t\tfor (var di = 0; di < data.length; di++) {\r\n\t\t\t\t\t\t\t\tif (data[di] != undefined) {\r\n\t\t\t\t\t\t\t\t\tfor (var dj = 0; dj < data[di].length; dj++) {\r\n\t\t\t\t\t\t\t\t\t\tif ((parseFloat(data[di][dj]) != undefined) && (!isNaN(data[di][dj]))) {\r\n\t\t\t\t\t\t\t\t\t\t\tif (parseFloat(data[di][dj]) === parseFloat(self.grid.rows[i].cells[iCV].options.value)) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tvaluetoString = data[di][dj];\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\txml = xml + self.grid.columns[iCV].getAttribute(\"dataField\") + '=\"' + valuetoString + '\" ';\r\n\t\t\t\t}\r\n\r\n\t\t\t\txml = xml + '/>'\r\n\t\t\t}\r\n\t\t}\r\n\t\txml = xml + '</FLATDATA>';\r\n\r\n\r\n\t\txml = xml + '<HTML>';\r\n\r\n\t\txml = xml + '<HEAD>';\r\n\t\txml = xml + '<META content=\"text/html; charset=utf-8\" http-equiv=\"Content-Type\"/>';\r\n\r\n\t\txml = xml + '<STYLE>';\r\n\r\n\t\txml = xml + '.odd {background-color: #FEFEFE; font-family: Verdana; font-size: 10pt;}\\n';\r\n\t\txml = xml + '.event {background-color: #EBEBEB; font-family: Verdana; font-size: 10pt;}\\n';\r\n\t\txml = xml + '.even {background-color: #FEFEFE;\tfont-weight: normal; font-family: Verdana; font-size: 10pt;\tpadding: 5px; }\\n';\r\n\t\txml = xml + 'tr {border-left: 1px solid #BBBBBB; border-right: 1px solid #BBBBBB; line-height: 22px;}\\n';\r\n\t\txml = xml + 'table {border-collapse: collapse;}\\n'\r\n\r\n\t\txml = xml + '</STYLE>';\r\n\t\txml = xml + '</HEAD>';\r\n\t\txml = xml + '<BODY>';\r\n\r\n\t\tfor (var i = 0; i < jQuery(\"#\" + self.grid.controlName + \" tr\").length; i++) {//for every row\r\n\t\t\txml = xml + '<TR>';\r\n\r\n\t\t\tvar tRow = jQuery(\"#\" + self.grid.controlName + \" tr\")[i];\r\n\t\t\tfor (var j = 0; j < tRow.children.length; j++) {//for every cell in the row\r\n\t\t\t\tvar childText = OAT.removeIconFont(tRow.children[j].textContent).trim();\r\n\t\t\t\tvar hidden = tRow.children[j].getAttribute('hidden');\r\n\t\t\t\tif (tRow.children[j].style.display != \"none\") {\r\n\t\t\t\t\tif (hidden === null) {\r\n\t\t\t\t\t\tvar rowSpan = tRow.children[j].getAttribute('rowspan');\r\n\t\t\t\t\t\tvar colSpan = tRow.children[j].getAttribute('colspan');\r\n\r\n\t\t\t\t\t\tvar styleString = \"\";\r\n\t\t\t\t\t\tif ((tRow.children[j].getAttribute(\"style\") != undefined) && (tRow.children[j].getAttribute(\"style\") != null)) {\r\n\t\t\t\t\t\t\tstyleString = \" style=\\\"\" + tRow.children[j].getAttribute(\"style\") + \"\\\" \";\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvar classString = \"\";\r\n\t\t\t\t\t\tif ((tRow.getAttribute(\"class\") != undefined) && (tRow.getAttribute(\"class\") != null)) {\r\n\t\t\t\t\t\t\tclassString = \" class=\\\"\" + tRow.getAttribute(\"class\") + \"\\\" \";\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif ((rowSpan === null) && (colSpan === null)) {\r\n\t\t\t\t\t\t\txml = xml + '<TD ' + classString + ' ' + styleString + ' >' + childText + '</TD>';\r\n\t\t\t\t\t\t} else if (colSpan === null) {\r\n\t\t\t\t\t\t\txml = xml + '<TD ' + classString + ' ' + styleString + ' rowspan=\"' + rowSpan + '\">' + childText + '</TD>';\r\n\t\t\t\t\t\t} else if (rowSpan === null) {\r\n\t\t\t\t\t\t\txml = xml + '<TD ' + classString + ' ' + styleString + ' colspan=\"' + colSpan + '\">' + childText + '</TD>';\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\txml = xml + '<TD ' + classString + ' ' + styleString + ' colspan=\"' + colSpan + '\" rowspan=\"' + rowSpan + '\">' + childText + '</TD>';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\txml = xml + '</TR>';\r\n\t\t}\r\n\r\n\r\n\t\txml = xml + '</BODY>';\r\n\t\txml = xml + '</HTML>';\r\n\r\n\r\n\t\txml = xml + \"</EXPORT>\";\r\n\r\n\t\tvar isSD = OAT.isSD();\r\n\t\t\r\n\r\n\t\t\r\n\t\t\txml = xml.replace(/\\&/g, \"&amp;\");\r\n\t\t\tif ((OAT.isSafari()) || (isSD)) { //for safari\t\t\t\r\n\t\t\t\twindow.open('data:text/xml,' + encodeURIComponent(xml));\r\n\t\t\t} else {\r\n\t\t\t\tvar blob = new Blob([xml], { type: \"text/xml\" });\r\n\t\t\t\tsaveAs(blob, fileName + \".xml\");\r\n\t\t\t}\r\n\t\t\r\n\t}\r\n\r\n\r\n\tOAT.SaveStateWhenServerPaging = function (self, UcId) {\r\n\t\tlocalStorage.setItem(OAT.getURL() + self.grid.controlName + self.grid.query, JSON.stringify({\r\n\t\t\tpageSize: self.rowsPerPage,\r\n\t\t\tdataFieldOrder: self.dataFieldOrder,\r\n\t\t\torderType: self.orderType,\r\n\t\t\tfilters: self.filterInfo,\r\n\t\t\tblackLists: self.blackLists,\r\n\t\t\tcolumnVisible: self.columnVisible,\r\n\t\t\tcolumnDataField: self.columnDataField\r\n\t\t}));\r\n\t}\r\n\r\n\tOAT.getStateWhenServingPaging = function (controlName, queryName) {\r\n\t\treturn JSON.parse(localStorage.getItem(OAT.getURL() + controlName + queryName));\r\n\t}\r\n\r\n\r\n\r\n\r\n\tOAT.getState = function (grid, actualPageSize) {\r\n\t\tif (typeof JSON.retrocycle !== 'function') {\r\n\t\t\tJSON.retrocycle = function retrocycle($) {\r\n\t\t\t\t'use strict';\r\n\r\n\t\t\t\tvar px =\r\n\t\t\t\t\t/^\\$(?:\\[(?:\\d+|\\\"(?:[^\\\\\\\"\\u0000-\\u001f]|\\\\([\\\\\\\"\\/bfnrt]|u[0-9a-zA-Z]{4}))*\\\")\\])*$/;\r\n\r\n\t\t\t\t(function rez(value) {\r\n\r\n\t\t\t\t\tvar i, item, name, path;\r\n\r\n\t\t\t\t\tif (value && typeof value === 'object') {\r\n\t\t\t\t\t\tif (Object.prototype.toString.apply(value) === '[object Array]') {\r\n\t\t\t\t\t\t\tfor (i = 0; i < value.length; i += 1) {\r\n\t\t\t\t\t\t\t\titem = value[i];\r\n\t\t\t\t\t\t\t\tif (item && typeof item === 'object') {\r\n\t\t\t\t\t\t\t\t\tpath = item.$ref;\r\n\t\t\t\t\t\t\t\t\tif (typeof path === 'string' && px.test(path)) {\r\n\t\t\t\t\t\t\t\t\t\tvalue[i] = eval(path);\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\trez(item);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tfor (name in value) {\r\n\t\t\t\t\t\t\t\tif (typeof value[name] === 'object') {\r\n\t\t\t\t\t\t\t\t\titem = value[name];\r\n\t\t\t\t\t\t\t\t\tif (item) {\r\n\t\t\t\t\t\t\t\t\t\tpath = item.$ref;\r\n\t\t\t\t\t\t\t\t\t\tif (typeof path === 'string' && px.test(path)) {\r\n\t\t\t\t\t\t\t\t\t\t\tvalue[name] = eval(path);\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\trez(item);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}($));\r\n\t\t\t\treturn $;\r\n\t\t\t};\r\n\t\t}\r\n\t\tvar retrievedObject = localStorage.getItem(OAT.getURL() + grid.controlName + grid.query);\r\n\t\tvar oldState = JSON.retrocycle(JSON.parse(retrievedObject));\r\n\r\n\t\tif ((oldState != null) && ((oldState.rowsPerPage + \" \") == (actualPageSize + \" \"))) {\r\n\r\n\t\t\tfor (var tC = 0; tC < grid.columnsDataType.length; tC++) {\r\n\t\t\t\tgrid.header.cells[tC].html.style.display = oldState.columnDisplay[tC];\r\n\t\t\t\tvar numCol = grid.columnsDataType.length - 1 - tC;\r\n\t\t\t\tvar j = 0;\r\n\t\t\t\tfor (j = 0; j < grid.rows.length; j++) {\r\n\t\t\t\t\tgrid.rows[j].cells[numCol].html.style.display = oldState.columnDisplay[tC];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tgrid.conditions = oldState.conditions;\r\n\t\t\tgrid.rowsPerPage = oldState.rowsPerPage;\r\n\t\t\treturn true;\r\n\t\t} else\r\n\t\t\treturn false;\r\n\r\n\t}\r\n\r\n\tOAT.SaveMetadata = function (metaDataString, key) {\r\n\t\ttry {\r\n\t\t\tif (!!window.localStorage) {\r\n\t\t\t\tlocalStorage.removeItem(OAT.getURL() + key);\r\n\t\t\t\tlocalStorage.setItem(OAT.getURL() + key, metaDataString);\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\r\n\t\t}\r\n\t}\r\n\r\n\tOAT.GetSavedMetadata = function (key) {\r\n\t\ttry {\r\n\t\t\tif (localStorage.getItem(OAT.getURL() + key) != null) {\r\n\t\t\t\tvar mdata = localStorage.getItem(OAT.getURL() + key);\r\n\t\t\t\tif ((mdata != undefined) && (mdata != null)) {\r\n\t\t\t\t\treturn mdata;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\treturn \"\";\r\n\t\t}\r\n\t\treturn \"\"\r\n\t}\r\n\r\n\r\n\ttry {\r\n\t\tOAT.Loader.featureLoaded(\"grid\");\r\n\t} catch (ERROR) {\r\n\r\n\t}\r\n\t\r\n\t\r\n\t\r\n\t//OAT_IMPL file\r\n\r\n\r\n\tthis.contains = function (a, obj) {\r\n\t\tfor (var i = 0; i < a.length; i++) {\r\n\t\t\tif (a[i] === obj) {\r\n\t\t\t\treturn i;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn -1;\r\n\t}\r\n\r\nif (typeof exports != \"undefined\") {\r\n\t\r\n\t\"use strict\";\r\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\r\n\texports.renderJSPivot = void 0;\r\n\texports.setPageDataForPivotTable = void 0;\r\n\texports.setAttributeValuesForPivotTable = void 0;\r\n\texports.setPivottableDataCalculation = void 0;\r\n\texports.setDataSynForPivotTable = void 0;\r\n\texports.setPageDataForTable = void 0;\r\n\texports.setAttributeForTable = void 0;\r\n\texports.setDataSynForTable = void 0;\r\n\texports.getDataXML = void 0;\r\n\texports.getFilteredDataXML = void 0;\r\n\t\r\n}\r\n\t\r\n\tfunction renderJSPivot(pivotParams, QueryViewerCollection, translations, qViewer) {\r\n\t\tif (pivotParams.RealType != \"Table\") {\r\n\t\t\tpivotParams.ServerPaging = false;\r\n\t\t}\r\n\t\tif (pivotParams.RealType == \"Table\") {\r\n\t\t\tpivotParams.ServerPagingPivot = false;\r\n\t\t\tif (QueryViewerCollection.AutoRefreshGroup == \"\") {//if (qv.collection[pivotParams.UcId].AutoRefreshGroup == \"\") {\r\n\t\t\t\tjQuery(\".oat_winrect_container\").remove()\r\n\t\t\t}\r\n\t\t}\r\n\t\tif ((pivotParams.RememberLayout) && (pivotParams.ServerPaging) && (pivotParams.RealType != \"PivotTable\")) {\r\n\t\t\tvar state = OAT.getStateWhenServingPaging(pivotParams.UcId + '_' + pivotParams.ObjectName.replace(/\\./g, \"\"), pivotParams.ObjectName.replace(/\\./g, \"\"))\r\n\t\t\tif (!state) {\r\n\t\t\t\trenderJSPivotInter(pivotParams, QueryViewerCollection,translations, null, qViewer)\r\n\t\t\t} else {\r\n\t\t\t\tvar pageValue = 1;\r\n\t\t\t\tif (state.pageSize == \"\") { state.pageSize = undefined; pageValue = 0; }\r\n\t\t\t\t\r\n\t\t\t\tpivotParams.previousDataFieldOrder = state.dataFieldOrder;\r\n\t\t\t\tpivotParams.orderType = state.orderType;\r\n\t\t\t\trenderJSPivotInter(pivotParams, QueryViewerCollection,translations, state, qViewer)\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (pivotParams.RealType != \"Table\") {\r\n\t\t\t\trenderJSPivotInter(pivotParams, QueryViewerCollection,translations, null, qViewer)\r\n\t\t\t} else {\r\n\r\n\t\t\t\tpivotParams.customFilterInfo = \"\";\r\n\t\t\t\tvar xmlDoc = jQuery.parseXML(pivotParams.metadata);\r\n\t\t\t\tvar columns = xmlDoc.getElementsByTagName(\"OLAPDimension\");\r\n\r\n\t\t\t\tvar withOrderCustom = false\r\n\t\t\t\tvar dataFieldOrder = \"\"\r\n\t\t\t\tvar orderType = \"\"\r\n\r\n\t\t\t\tfor (var u = 0; u < columns.length; u++) {\r\n\t\t\t\t\tvar dataField = columns[u].getAttribute(\"dataField\")\r\n\r\n\t\t\t\t\tvar includeValues = []; //the only values to show\r\n\t\t\t\t\tvar applyFilter = false;\r\n\t\t\t\t\tfor (var h = 0; h < columns[u].childNodes.length; h++) {\r\n\t\t\t\t\t\tif ((columns[u].childNodes[h] != undefined) &&\r\n\t\t\t\t\t\t\t(columns[u].childNodes[h].localName != undefined) &&\r\n\t\t\t\t\t\t\t(columns[u].childNodes[h].localName === \"include\")) {\r\n\t\t\t\t\t\t\tapplyFilter = true;\r\n\t\t\t\t\t\t\tfor (var n = 0; n < columns[u].childNodes[h].childNodes.length; n++) {\r\n\t\t\t\t\t\t\t\tif ((columns[u].childNodes[h].childNodes[n].localName != null) &&\r\n\t\t\t\t\t\t\t\t\t(columns[u].childNodes[h].childNodes[n].localName.toLowerCase() === \"value\")) {\r\n\t\t\t\t\t\t\t\t\tincludeValues.push(columns[u].childNodes[h].childNodes[n].textContent);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\tif (!withOrderCustom) {\r\n\t\t\t\t\t\tif ((columns[u].getAttribute(\"order\") != undefined) && (columns[u].getAttribute(\"order\") != \"\")) {\r\n\t\t\t\t\t\t\tdataFieldOrder = columns[u].getAttribute(\"dataField\")\r\n\t\t\t\t\t\t\torderType = (columns[u].getAttribute(\"order\") == \"descending\") ? \"Descending\" : \"Ascending\";\r\n\t\t\t\t\t\t\twithOrderCustom = true//(columns[u].getAttribute(\"order\") == \"custom\")  \r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\tif (applyFilter) {\r\n\r\n\t\t\t\t\t\tvar res = QueryViewerCollection[pivotParams.UcId].getAttributeValuesSync([columns[u].getAttribute(\"dataField\"), 1, 0, \"\"]);\r\n\t\t\t\t\t\tvar res = JSON.parse(res);\r\n\t\t\t\t\t\tvar realValues = res.NotNullValues;\r\n\t\t\t\t\t\tvar realIncludeValues = [];\r\n\t\t\t\t\t\tfor (var j = 0; j < includeValues.length; j++) {\r\n\t\t\t\t\t\t\tfor (var h = 0; h < realValues.length; h++) {\r\n\t\t\t\t\t\t\t\tif (realValues[h].trimpivot() == includeValues[j].trimpivot()) {\r\n\t\t\t\t\t\t\t\t\trealIncludeValues.push(realValues[h])\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\t\tif (pivotParams.customFilterInfo == \"\") {\r\n\t\t\t\t\t\t\tpivotParams.customFilterInfo = [];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar obj = {\r\n\t\t\t\t\t\t\tDataField: columns[u].getAttribute(\"dataField\"),\r\n\t\t\t\t\t\t\tNotNullValues: {\r\n\t\t\t\t\t\t\t\tDefaultAction: \"Exclude\",\r\n\t\t\t\t\t\t\t\tExcluded: \"\",\r\n\t\t\t\t\t\t\t\tIncluded: realIncludeValues\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tNullIncluded: true\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tpivotParams.customFilterInfo.push(obj)\r\n\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/*if (pivotParams.ServerPaging && (pivotParams.customFilterInfo != \"\" || dataFieldOrder != \"\")) {\r\n\t\t\t\t\tQueryViewerCollection[pivotParams.UcId].getPageDataForTable((function (resXML) {\r\n\t\t\t\t\t\tpivotParams.data = resXML;\r\n\t\t\t\t\t\trenderJSPivotInter(pivotParams, QueryViewerCollection, null, queryself)\r\n\t\t\t\t\t}).closure(this), [1, pivotParams.PageSize, true, dataFieldOrder, orderType, pivotParams.customFilterInfo, false]);\r\n\t\t\t\t} else {*/\r\n\t\t\t\t\trenderJSPivotInter(pivotParams, QueryViewerCollection, translations, null, qViewer)\r\n\t\t\t\t//}\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\nif (typeof exports != \"undefined\") {\r\n\texports.renderJSPivot = renderJSPivot;\r\n}\r\n\r\n\r\n//PIVOT TABLE\r\n\tfunction setPageDataForPivotTable(oat_element, resXML){\r\n\t\toat_element.setPageDataForPivotTable(resXML)\r\n\t}\r\n\r\n\r\nif (typeof exports != \"undefined\") {\r\n\texports.setPageDataForPivotTable = setPageDataForPivotTable;\r\n}\r\n\r\nfunction setAttributeValuesForPivotTable(oat_element, resJSON){\r\n\t\toat_element.setAttributeValuesForPivotTable(resJSON);\r\n\t}\r\n\r\nif (typeof exports != \"undefined\") {\r\n\texports.setAttributeValuesForPivotTable = setAttributeValuesForPivotTable;\r\n}\r\n\r\nfunction setPivottableDataCalculation(oat_element, resText){\r\n\t\toat_element.setPivottableDataCalculation(resText)\r\n\t}\r\n\r\nif (typeof exports != \"undefined\") {\r\n\texports.setPivottableDataCalculation = setPivottableDataCalculation;\r\n}\r\n\r\nfunction setDataSynForPivotTable(oat_element, result){\r\n\t\toat_element.setDataSynForPivotTable(result)\r\n\t}\r\n\r\nif (typeof exports != \"undefined\") {\r\n\texports.setDataSynForPivotTable = setDataSynForPivotTable;\r\n}\r\n\r\n//TABLE\r\n\tfunction setPageDataForTable(oat_element, resXML){\r\n\t\toat_element.setPageDataForTable(resXML)\r\n\t}\r\n\r\n\r\nif (typeof exports != \"undefined\") {\r\n\texports.setPageDataForTable = setPageDataForTable;\r\n}\r\n\r\n\r\n\tfunction setAttributeForTable(oat_element, resJSON){\r\n\t\toat_element.setAttributeForTable(resJSON)\r\n\t}\r\n\r\n\r\nif (typeof exports != \"undefined\") {\r\n\texports.setAttributeForTable = setAttributeForTable;\r\n}\r\n\r\n\r\n\tfunction setDataSynForTable(oat_element, result){\r\n\t\toat_element.setDataSynForTable(result)\r\n\t}\r\n\r\nif (typeof exports != \"undefined\") {\r\n\texports.setDataSynForTable = setDataSynForTable;\r\n}\r\n\r\n//EVENTS\r\n\tfunction getDataXML(oat_element, serverData){\r\n\t\tresult = oat_element.getDataXML(serverData)\r\n\t\treturn result;\r\n\t}\r\n\r\nif (typeof exports != \"undefined\") {\r\n\texports.getDataXML = getDataXML;\r\n}\r\n\r\n\tfunction getFilteredDataXML(oat_element, serverData){\r\n\t\tresult = oat_element.getFilteredDataXML(serverData)\r\n\t\treturn result;\r\n\t}\r\n\r\nif (typeof exports != \"undefined\") {\r\n\texports.getFilteredDataXML = getFilteredDataXML;\r\n}\r\n\r\n\r\n\r\n\tvar renderJSPivotInter = function (pivotParams, QueryViewerCollection, translations, state, queryself) {\r\n\t\tvar type = pivotParams.RealType\r\n\t\tvar container = pivotParams.container\r\n\t\tvar page = pivotParams.page\r\n\t\tvar content = pivotParams.content\r\n\t\tvar metadata = pivotParams.metadata\r\n\t\trenderJSPivotInter.dataString = pivotParams.data\r\n\t\tvar queryName = pivotParams.ObjectName\r\n\t\tvar controlName = pivotParams.ControlName\r\n\t\tvar pageSize = parseInt(pivotParams.PageSize)\r\n\t\tvar autoResize = pivotParams.AutoResize\r\n\t\tvar DisableColumnSort = pivotParams.DisableColumnSort\r\n\t\tvar UcId = pivotParams.UcId\r\n\t\tvar rememberLayout = pivotParams.RememberLayout\r\n\t\trenderJSPivotInter.pivotParams = pivotParams\r\n\t\trenderJSPivotInter.serverPaging = pivotParams.ServerPaging\r\n\t\trenderJSPivotInter.previousDataFieldOrder = pivotParams.previousDataFieldOrder;\r\n\t\trenderJSPivotInter.previousOrderType = pivotParams.orderType;\r\n\t\trenderJSPivotInter.previousFilters = (state) ? state.filters : undefined;\r\n\t\trenderJSPivotInter.previousColumnVisible = (state) ? state.columnVisible : undefined; renderJSPivotInter.initialColumnVisible = []\r\n\t\trenderJSPivotInter.previousState = state\r\n\t\trenderJSPivotInter.customFilterInfo = pivotParams.customFilterInfo\r\n\t\trenderJSPivotInter.gridCacheSize = pivotParams.ServerPagingCacheSize;\r\n\t\trenderJSPivotInter.hasShowValuesAs = (pivotParams.metadata.indexOf(\"showValuesAs\") > 0)\r\n\r\n\t\t//replace OLAPMeasure for OLAPDimensions\r\n\t\tif (pivotParams.RealType == \"Table\"){\r\n\t\t\tmetadata = metadata.replace(/\\<OLAPMeasure/g, '<OLAPMeasure axis=\"\" isMeasure=\"true\" '); \r\n\t\t\tmetadata = metadata.replace(/OLAPMeasure/g, \"OLAPDimension\")\r\n\t\t} \r\n\t\t//replace OLAPMeasure for OLAPDimensions when isComponent=true\r\n\t\tif (pivotParams.RealType != \"Table\"){\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tvar splitMetadata = metadata.split('<OLAPMeasure');\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tvar changeMetadata = splitMetadata[0];\r\n\t\t\t\r\n\t\t\tfor (var t=1; t < splitMetadata.length; t++)\r\n\t\t\t{\r\n\t\t\t\tvar line = \"\";\r\n\t\t\t\t\r\n\t\t\t\tif (splitMetadata[t].indexOf('isComponent=\"true\"') > -1)\r\n\t\t\t\t{\r\n\t\t\t\t\tline = '<OLAPDimension' + splitMetadata[t].replace(/OLAPMeasure/g, \"OLAPDimension\")\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tline = '<OLAPMeasure' + splitMetadata[t]\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tchangeMetadata = changeMetadata + line\r\n\t\t\t}\r\n\t\t\tmetadata = changeMetadata\r\n\t\t}\r\n\t\t\r\n\t\tvar ShowMeasuresAsRows = (pivotParams.ShowDataLabelsIn == \"Rows\")\r\n\t\tif ((rememberLayout == undefined) || (rememberLayout == \"false\")) {\r\n\t\t\trememberLayout = false\r\n\t\t}\r\n\t\t//recover metadata when metadata error, is there no metadata save it\r\n\t\ttry {\r\n\t\t\tif (rememberLayout) {\r\n\t\t\t\tvar savedMd = OAT.GetSavedMetadata(container.id + queryName + UcId + controlName + type + \"metadata\")\r\n\t\t\t\tif (savedMd === \"\") {\r\n\t\t\t\t\tOAT.SaveMetadata(metadata, container.id + queryName + UcId + controlName + type + \"metadata\")\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar t1 = savedMd.split('OLAPDimension').length === metadata.split('OLAPDimension').length;\r\n\t\t\t\t\tvar t2 = savedMd.split('OLAPMeasure').length === metadata.split('OLAPMeasure').length;\r\n\t\t\t\t\tvar t3 = savedMd.split('name').length === metadata.split('name').length;\r\n\t\t\t\t\tvar t4 = true\r\n\t\t\t\t\tif (t1 && t2 && t3) {\r\n\t\t\t\t\t\tfor (var i = 1; i < savedMd.split('name').length; i++) {\r\n\t\t\t\t\t\t\tvar name1 = savedMd.split('name')[i].substring(2, savedMd.split('name')[i].length).split(\"\\\"\")[0];\r\n\t\t\t\t\t\t\tvar name2 = metadata.split('name')[i].substring(2, metadata.split('name')[i].length).split(\"\\\"\")[0];\r\n\t\t\t\t\t\t\tif (name1 != name2) {\r\n\t\t\t\t\t\t\t\tt4 = false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!(t1 && t2 && t3 && t4)) {\r\n\t\t\t\t\t\tif (OAT.isIE()) {\r\n\t\t\t\t\t\t\trememberLayout = false\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\tif (!!window.localStorage) {\r\n\t\t\t\t\t\t\t\t\tlocalStorage.removeItem(OAT.getURL() + container.id + queryName + UcId + controlName + type + \"metadata\");\r\n\t\t\t\t\t\t\t\t\tlocalStorage.removeItem(OAT.getURL() + queryName + UcId);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} catch (ERROR) {\r\n\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} catch (ERROR) {\r\n\r\n\t\t}\r\n\t\tvar fullXmlData = jQuery.parseXML(metadata); //metada for formulas and hide columns\r\n\t\trenderJSPivotInter.InitMetadata = {};\r\n\t\trenderJSPivotInter.InitMetadata.Metadata = metadata\r\n\t\trenderJSPivotInter.InitMetadata.DataString = renderJSPivotInter.dataString;\r\n\t\trenderJSPivotInter.InitMetadata.Dimensions = []\r\n\t\trenderJSPivotInter.InitMetadata.Conditions = []\r\n\t\trenderJSPivotInter.InitMetadata.DataFields = []\r\n\t\trenderJSPivotInter.InitMetadata.RowsPerPage = pageSize\r\n\t\tvar initColumns = fullXmlData.getElementsByTagName(\"OLAPDimension\");\r\n\t\tfor (var i = 0; i < initColumns.length; i++) {\r\n\t\t\tvar objectColumn = {}\r\n\t\t\tobjectColumn.name = initColumns[i].getAttribute(\"name\")\r\n\t\t\tobjectColumn.displayName = initColumns[i].getAttribute(\"displayName\")\r\n\t\t\tobjectColumn.description = initColumns[i].getAttribute(\"description\")\r\n\t\t\tobjectColumn.dataField = initColumns[i].getAttribute(\"dataField\")\r\n\t\t\t\r\n\t\t\t/*calculate default and valid position*/\r\n\t\t\t\r\n\t\t\tvar validPositions = \"\"\r\n\t\t\t\r\n\t\t\tvar metadatavisible = initColumns[i].getAttribute(\"visible\")\r\n\t\t\tif (metadatavisible == \"Never\"){\r\n\t\t\t\tobjectColumn.defaultPosition = \"hidden\"\r\n\t\t\t\tobjectColumn.Visible = false\r\n\t\t\t} else {\r\n\t\t\t\tif (metadatavisible == \"No\"){\r\n\t\t\t\t\tobjectColumn.Visible = false\r\n\t\t\t\t} else {\r\n\t\t\t\t\tobjectColumn.Visible = true\r\n\t\t\t\t}\r\n\t\t\t\tobjectColumn.defaultPosition = initColumns[i].getAttribute(\"axis\")\r\n\t\t\t\tvar j = 0;\r\n\t\t\t\tvalidPositions = (initColumns[i].getAttribute(\"canDragToPages\") == \"true\") ? \"filters;\" : \"\"\r\n\t\t\t\tvalidPositions = validPositions + \"rows;columns;hidden\"\r\n\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tobjectColumn.validPosition = validPositions\r\n\t\t\trenderJSPivotInter.InitMetadata.Dimensions.push(objectColumn)\r\n\t\t\trenderJSPivotInter.InitMetadata.Conditions.push(\"\")\r\n\t\t\trenderJSPivotInter.InitMetadata.DataFields.push(objectColumn.dataField)\r\n\t\t}\r\n\t\trenderJSPivotInter.InitMetadata.Measures = []\r\n\t\tvar initMeasures = fullXmlData.getElementsByTagName(\"OLAPMeasure\");\r\n\t\tfor (var i = 0; i < initMeasures.length; i++) {\r\n\t\t\tvar measureObject = {}\r\n\t\t\tmeasureObject.name = initMeasures[i].attributes.getNamedItem(\"name\").nodeValue;\r\n\t\t\tmeasureObject.displayName = initMeasures[i].attributes.getNamedItem(\"displayName\").nodeValue;\r\n\t\t\tmeasureObject.dataField = initMeasures[i].attributes.getNamedItem(\"dataField\").nodeValue;\r\n\t\t\tmeasureObject.dataType = initMeasures[i].attributes.getNamedItem(\"dataType\").nodeValue;\r\n\t\t\t\r\n\t\t\tmeasureObject.Visible = initMeasures[i].attributes.getNamedItem(\"visible\").nodeValue.toLowerCase() == \"yes\"\r\n\t\t\t\r\n\t\t\tif (initMeasures[i].attributes.getNamedItem(\"visible\").nodeValue.toLowerCase() != \"never\") {\r\n\t\t\t\tmeasureObject.defaultPosition = (initMeasures[i].attributes.getNamedItem(\"axis\")) ? initMeasures[i].attributes.getNamedItem(\"axis\") : \"data\"\r\n\t\t\t\tmeasureObject.validPosition = \"data;hidden\"\r\n\t\t\t} else {\r\n\t\t\t\tmeasureObject.defaultPosition = \"hidden\"\r\n\t\t\t\tmeasureObject.validPosition = \"hidden\"\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t//measureObject.Visible = measureObject.defaultPosition != \"hidden\"\r\n\t\t\trenderJSPivotInter.InitMetadata.Measures.push(measureObject)\r\n\t\t}\r\n\t\trenderJSPivotInter.InitMetadata.DimensionPosition = []\r\n\r\n\t\t//parse metadata\r\n\t\trenderJSPivotInter.HideDataFilds = []\r\n\r\n\t\tvar result;\r\n\t\tvar previousState = OATgetState(queryName, UcId.replace(/,/g, \"\").replace(/\\./g, \"\"))\r\n\t\tif ((rememberLayout) && (previousState != undefined)) {\r\n\t\t\tvar hideDimension = [];\r\n\t\t\tfor (var i = 0; i < previousState.Dimensions.length; i++) {\r\n\t\t\t\tif (!previousState.Dimensions[i].Visible) {\r\n\t\t\t\t\thideDimension.push(previousState.Dimensions[i].dataField)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar hideMeasures = [];\r\n\t\t\tfor (var i = 0; i < previousState.Measures.length; i++) {\r\n\t\t\t\tif (!previousState.Measures[i].Visible) {\r\n\t\t\t\t\thideMeasures.push(previousState.Measures[i].dataField)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\trenderJSPivotInter.InitMetadata.Measures = previousState.Measures\r\n\t\t\trenderJSPivotInter.InitMetadata.Dimensions = previousState.Dimensions\r\n\t\t\trenderJSPivotInter.InitMetadata.DataFields = previousState.DataFields\r\n\t\t\trenderJSPivotInter.InitMetadata.DimensionPosition = previousState.DimensionPosition\r\n\r\n\t\t\tif (pivotParams.ServerPagingPivot) {\r\n\t\t\t\trenderJSPivotInter.InitMetadata.Conditions = previousState.Conditions\r\n\t\t\t}\r\n\r\n\t\t\tresult = OATParseMetadata(metadata, hideDimension, hideMeasures, pivotParams.ServerPagingPivot, translations)\r\n\t\t} else {\r\n\t\t\tvar hideDimension = [];\r\n\t\t\tfor (var i = 0; i < renderJSPivotInter.InitMetadata.Dimensions.length; i++) {\r\n\t\t\t\tif (!renderJSPivotInter.InitMetadata.Dimensions[i].Visible) {\r\n\t\t\t\t\thideDimension.push(renderJSPivotInter.InitMetadata.Dimensions[i].dataField)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar hideMeasures = [];\r\n\t\t\tfor (var i = 0; i < renderJSPivotInter.InitMetadata.Measures.length; i++) {\r\n\t\t\t\tif (!renderJSPivotInter.InitMetadata.Measures[i].Visible) {\r\n\t\t\t\t\thideMeasures.push(renderJSPivotInter.InitMetadata.Measures[i].dataField)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif ((pivotParams.RealType == \"Table\")) {\r\n\t\t\t\tresult = OATParseMetadata(metadata, [], hideMeasures, pivotParams.ServerPagingPivot, translations)\r\n\t\t\t} else {\r\n\t\t\t\tresult = OATParseMetadata(metadata, hideDimension, hideMeasures, pivotParams.ServerPagingPivot, translations)\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\trenderJSPivotInter.InitMetadata.GrandTotalVisibility = { TotalForRows: pivotParams.TotalForRows, TotalForColumns: pivotParams.TotalForColumns }\r\n\t\t\r\n\r\n\t\tmetadata = result[0]; var orderFildsHidden = result[1]; var nameFildsHidden = result[3]; renderJSPivotInter.HideDataFilds = result[2];\r\n\r\n\r\n\t\tvar xmlDoc = jQuery.parseXML(metadata);\r\n\r\n\t\tvar defaultPicture = xmlDoc.childNodes[0];\r\n\r\n\t\trenderJSPivotInter.IdForQueryViewerCollection = UcId;\r\n\t\tUcId = UcId.replace(/,/g, \"\").replace(/\\./g, \"\")\r\n\t\trenderJSPivotInter.UcId = UcId;\r\n\t\trenderJSPivotInter.pivotDiv = container.id;\r\n\t\trenderJSPivotInter.query = queryName;\r\n\t\trenderJSPivotInter.control = controlName;\r\n\t\trenderJSPivotInter.pageSize = pageSize;\r\n\t\trenderJSPivotInter.autoResize = autoResize;\r\n\t\trenderJSPivotInter.disableColumnSort = DisableColumnSort;\r\n\t\trenderJSPivotInter.header = [];\r\n\t\trenderJSPivotInter.data = [];\r\n\t\trenderJSPivotInter.columnNumbers = [];\r\n\t\trenderJSPivotInter.rowNumbers = [];\r\n\t\trenderJSPivotInter.filterNumbers = [];\r\n\t\trenderJSPivotInter.cols = 0;\r\n\t\trenderJSPivotInter.conditionalFormats = [];\r\n\t\trenderJSPivotInter.conditionalFormatsColumns = []; //conditional format for columns - needed?\r\n\t\trenderJSPivotInter.formatValues = [];\r\n\t\trenderJSPivotInter.formatValuesMeasures = [];\r\n\r\n\t\trenderJSPivotInter.forPivotFormatValues = [];\r\n\t\trenderJSPivotInter.forPivotFormats = [];\r\n\t\trenderJSPivotInter.forPivotCustomPicture = [];\r\n\t\trenderJSPivotInter.forPivotCustomFormat = [];\r\n\r\n\r\n\t\t//Columns and measures names\r\n\t\tvar columns = xmlDoc.getElementsByTagName(\"OLAPDimension\");\r\n\t\tvar columnNames = [];\r\n\t\tvar rowNames = [];\r\n\t\tvar filterNames = [];\r\n\t\trenderJSPivotInter.measures = xmlDoc.getElementsByTagName(\"OLAPMeasure\");\r\n\r\n\t\tvar columnsDataType = [];\r\n\t\tvar measureNames = []; var measuresNamesWidthHidden = [];\r\n\t\tvar j = 0;\r\n\t\tvar k = 0;\r\n\t\tvar preHeader = [];\r\n\t\tvar formulaInfo = { measureFormula: [], itemPosition: [] }\r\n\t\t//handle pictures\r\n\t\tvar orderFilds = [];\r\n\t\tvar datePictures = [];\r\n\t\tvar intPictures = [];\r\n\t\tvar dateFields = [];\r\n\t\tvar intFields = [];\r\n\r\n\t\tif ((pivotParams.RealType == \"Table\")) {\r\n\t\t\tfor (var i = 0; i < columns.length; i++) {\r\n\t\t\t\trenderJSPivotInter.initialColumnVisible[i] = true\r\n\t\t\t\tif (columns[i].attributes.getNamedItem(\"visible\").nodeValue != \"Yes\") {\r\n\t\t\t\t\trenderJSPivotInter.initialColumnVisible[i] = false\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//get columns\r\n\t\tfor (var i = 0; i < columns.length; i++) {\r\n\r\n\t\t\tif ((columns[i].attributes.getNamedItem(\"axis\").nodeValue == \"Rows\")\r\n\t\t\t\t|| (pivotParams.RealType == \"Table\") || (renderJSPivotInter.InitMetadata.Dimensions[i].validPosition == \"\")) {\r\n\t\t\t\tcolumnNames[j] = columns[i].attributes.getNamedItem(\"displayName\").nodeValue;\r\n\t\t\t\tpreHeader[i] = columnNames[j];\r\n\t\t\t\tj++;\r\n\t\t\t}\r\n\t\t\tif (columns[i].attributes.getNamedItem(\"axis\").nodeValue == \"Columns\") {\r\n\t\t\t\trowNames[k] = columns[i].attributes.getNamedItem(\"displayName\").nodeValue;\r\n\t\t\t\tpreHeader[i] = rowNames[k];\r\n\t\t\t\tk++;\r\n\t\t\t}\r\n\t\t\tif (columns[i].attributes.getNamedItem(\"axis\").nodeValue == \"Pages\") {\r\n\t\t\t\tfilterNames[k] = columns[i].attributes.getNamedItem(\"displayName\").nodeValue;\r\n\t\t\t\tpreHeader[i] = filterNames[k];\r\n\t\t\t\tk++;\r\n\t\t\t}\r\n\t\t\tif (pivotParams.ServerPagingPivot && (columns[i].attributes.getNamedItem(\"axis\").nodeValue == \"\")) {\r\n\t\t\t\tfor (var t = 0; t < renderJSPivotInter.InitMetadata.Dimensions.length; t++) {\r\n\t\t\t\t\tif (renderJSPivotInter.InitMetadata.Dimensions[t].dataField == columns[i].attributes.getNamedItem(\"dataField\").nodeValue) {\r\n\t\t\t\t\t\tif (renderJSPivotInter.InitMetadata.Dimensions[t].Visible) {\r\n\t\t\t\t\t\t\tcolumnNames[j] = columns[i].attributes.getNamedItem(\"displayName\").nodeValue;\r\n\t\t\t\t\t\t\tj++;\r\n\t\t\t\t\t\t\tpreHeader[i] = columns[i].attributes.getNamedItem(\"displayName\").nodeValue;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tcolumnsDataType[i] = columns[i].attributes.getNamedItem(\"dataType\").nodeValue;\r\n\t\t\t//handle formats values\r\n\t\t\tif (columns[i].childNodes.length > 0) {\r\n\t\t\t\tif (columns[i].childNodes != null) {\r\n\t\t\t\t\tfor (var m = 0; m < columns[i].childNodes.length; m++) {\r\n\t\t\t\t\t\tif (columns[i].childNodes[m].localName == \"formatValues\") {\r\n\t\t\t\t\t\t\tfor (var n = 0; n < columns[i].childNodes[m].childNodes.length; n++) {\r\n\t\t\t\t\t\t\t\tif (columns[i].childNodes[m].childNodes[n].localName == \"value\") {\r\n\t\t\t\t\t\t\t\t\tvar value = {};\r\n\t\t\t\t\t\t\t\t\tvalue.format = columns[i].childNodes[m].childNodes[n].attributes.getNamedItem(\"format\").nodeValue;\r\n\t\t\t\t\t\t\t\t\tvalue.recursive = columns[i].childNodes[m].childNodes[n].attributes.getNamedItem(\"recursive\").nodeValue;\r\n\t\t\t\t\t\t\t\t\tvar crude = columns[i].childNodes[m].childNodes[n].textContent;\r\n\t\t\t\t\t\t\t\t\tvalue.value = crude.replace(/^\\s+|\\s+$/g, '');\r\n\t\t\t\t\t\t\t\t\tvalue.columnNumber = i;\r\n\t\t\t\t\t\t\t\t\trenderJSPivotInter.formatValues.push(value);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}//handle conditional formats\r\n\t\t\tif (columns[i].childNodes.length > 0) {\r\n\t\t\t\tif (columns[i].childNodes != null) {\r\n\t\t\t\t\tfor (var m = 0; m < columns[i].childNodes.length; m++) {\r\n\t\t\t\t\t\tif (columns[i].childNodes[m].localName == \"conditionalFormats\") {\r\n\t\t\t\t\t\t\tfor (var n = 0; n < columns[i].childNodes[m].childNodes.length; n++) {\r\n\t\t\t\t\t\t\t\tif (columns[i].childNodes[m].childNodes[n].localName == \"rule\") {\r\n\t\t\t\t\t\t\t\t\tvar format = {};\r\n\t\t\t\t\t\t\t\t\tformat.format = columns[i].childNodes[m].childNodes[n].attributes.getNamedItem(\"format\").nodeValue;\r\n\t\t\t\t\t\t\t\t\tformat.operation1 = columns[i].childNodes[m].childNodes[n].attributes.getNamedItem(\"op1\").nodeValue;\r\n\t\t\t\t\t\t\t\t\tformat.value1 = columns[i].childNodes[m].childNodes[n].attributes.getNamedItem(\"value1\").nodeValue;\r\n\t\t\t\t\t\t\t\t\tif (columns[i].childNodes[m].childNodes[n].attributes.getNamedItem(\"op2\") != null) {\r\n\t\t\t\t\t\t\t\t\t\tformat.operation2 = columns[i].childNodes[m].childNodes[n].attributes.getNamedItem(\"op2\").nodeValue;\r\n\t\t\t\t\t\t\t\t\t\tformat.value2 = columns[i].childNodes[m].childNodes[n].attributes.getNamedItem(\"value2\").nodeValue;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tformat.columnNumber = i;\r\n\t\t\t\t\t\t\t\t\trenderJSPivotInter.conditionalFormatsColumns.push(format);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t//manage pictures\r\n\t\t\tif (columns[i].attributes.getNamedItem(\"picture\").nodeValue != \"\") {\r\n\t\t\t\tif (columns[i].attributes.getNamedItem(\"dataType\").nodeValue == \"date\") {\r\n\t\t\t\t\tdatePictures.push(columns[i].attributes.getNamedItem(\"picture\").nodeValue);\r\n\t\t\t\t\tdateFields.push(columns[i].attributes.getNamedItem(\"dataField\").nodeValue);\r\n\t\t\t\t}\r\n\t\t\t\t//if (columns[i].attributes.getNamedItem(\"dataType\").nodeValue == \"integer\" || measures[i].attributes.getNamedItem(\"dataType\").nodeValue == \"real\") {\r\n\t\t\t\tif (columns[i].attributes.getNamedItem(\"dataType\").nodeValue == \"integer\") {\r\n\t\t\t\t\tintPictures.push(columns[i].attributes.getNamedItem(\"picture\").nodeValue);\r\n\t\t\t\t\tintFields.push(columns[i].attributes.getNamedItem(\"dataField\").nodeValue);\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t\trenderJSPivotInter.forPivotCustomPicture.push(columns[i].attributes.getNamedItem(\"picture\").nodeValue);\r\n\t\t\trenderJSPivotInter.forPivotCustomFormat.push(columns[i].attributes.getNamedItem(\"format\").nodeValue);\r\n\t\t\torderFilds.push(columns[i].attributes.getNamedItem(\"dataField\").nodeValue);\r\n\r\n\t\t}\r\n\r\n\t\t//var measures;\r\n\t\tfor (var i = 0; i < renderJSPivotInter.measures.length; i++) {\r\n\r\n\t\t\tmeasureNames[i] = renderJSPivotInter.measures[i].attributes.getNamedItem(\"displayName\").nodeValue;\r\n\t\t\t//manage format values\r\n\t\t\tif (renderJSPivotInter.measures[i].childNodes.length > 0) {\r\n\t\t\t\tif (renderJSPivotInter.measures[i].childNodes != null) {\r\n\t\t\t\t\tfor (var m = 0; m < renderJSPivotInter.measures[i].childNodes.length; m++) {\r\n\t\t\t\t\t\tif (renderJSPivotInter.measures[i].childNodes[m].localName == \"formatValues\") {\r\n\t\t\t\t\t\t\tfor (var n = 0; n < renderJSPivotInter.measures[i].childNodes[m].childNodes.length; n++) {\r\n\t\t\t\t\t\t\t\tif (renderJSPivotInter.measures[i].childNodes[m].childNodes[n].localName == \"value\") {\r\n\t\t\t\t\t\t\t\t\tvar value = {};\r\n\t\t\t\t\t\t\t\t\tvalue.format = renderJSPivotInter.measures[i].childNodes[m].childNodes[n].attributes.getNamedItem(\"format\").nodeValue;\r\n\t\t\t\t\t\t\t\t\tvalue.recursive = renderJSPivotInter.measures[i].childNodes[m].childNodes[n].attributes.getNamedItem(\"recursive\").nodeValue;\r\n\t\t\t\t\t\t\t\t\tvar crude = renderJSPivotInter.measures[i].childNodes[m].childNodes[n].textContent;\r\n\t\t\t\t\t\t\t\t\tvalue.value = crude.replace(/^\\s+|\\s+$/g, '');\r\n\t\t\t\t\t\t\t\t\tvalue.columnNumber = i;\r\n\t\t\t\t\t\t\t\t\tformatValuesMeasures.push(value);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t//manage conditional formats\r\n\t\t\tif (renderJSPivotInter.measures[i].childNodes.length > 0) {\r\n\t\t\t\tif (renderJSPivotInter.measures[i].childNodes != null) {\r\n\t\t\t\t\tfor (var m = 0; m < renderJSPivotInter.measures[i].childNodes.length; m++) {\r\n\t\t\t\t\t\tif (renderJSPivotInter.measures[i].childNodes[m].localName == \"conditionalFormats\") {\r\n\t\t\t\t\t\t\tfor (var n = 0; n < renderJSPivotInter.measures[i].childNodes[m].childNodes.length; n++) {\r\n\t\t\t\t\t\t\t\tif (renderJSPivotInter.measures[i].childNodes[m].childNodes[n].localName == \"rule\") {\r\n\t\t\t\t\t\t\t\t\tvar format = {};\r\n\t\t\t\t\t\t\t\t\tformat.format = renderJSPivotInter.measures[i].childNodes[m].childNodes[n].attributes.getNamedItem(\"format\").nodeValue;\r\n\t\t\t\t\t\t\t\t\tformat.operation1 = renderJSPivotInter.measures[i].childNodes[m].childNodes[n].attributes.getNamedItem(\"op1\").nodeValue;\r\n\t\t\t\t\t\t\t\t\tformat.value1 = renderJSPivotInter.measures[i].childNodes[m].childNodes[n].attributes.getNamedItem(\"value1\").nodeValue;\r\n\t\t\t\t\t\t\t\t\tif (renderJSPivotInter.measures[i].childNodes[m].childNodes[n].attributes.getNamedItem(\"op2\") != null) {\r\n\t\t\t\t\t\t\t\t\t\tformat.operation2 = renderJSPivotInter.measures[i].childNodes[m].childNodes[n].attributes.getNamedItem(\"op2\").nodeValue;\r\n\t\t\t\t\t\t\t\t\t\tformat.value2 = renderJSPivotInter.measures[i].childNodes[m].childNodes[n].attributes.getNamedItem(\"value2\").nodeValue;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tformat.columnNumber = i; //+ columns.length; Only the measure number\r\n\t\t\t\t\t\t\t\t\tconditionalFormats.push(format);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t//manage pictures\r\n\t\t\tif (renderJSPivotInter.measures[i].attributes.getNamedItem(\"picture\").nodeValue != \"\") {\r\n\t\t\t\tif (renderJSPivotInter.measures[i].attributes.getNamedItem(\"dataType\").nodeValue == \"date\") {\r\n\t\t\t\t\tdatePictures.push(renderJSPivotInter.measures[i].attributes.getNamedItem(\"picture\").nodeValue);\r\n\t\t\t\t\tdateFields.push(renderJSPivotInter.measures[i].attributes.getNamedItem(\"dataField\").nodeValue);\r\n\t\t\t\t}\r\n\t\t\t\tif (renderJSPivotInter.measures[i].attributes.getNamedItem(\"dataType\").nodeValue == \"integer\" || renderJSPivotInter.measures[i].attributes.getNamedItem(\"dataType\").nodeValue == \"real\") {\r\n\t\t\t\t\tintPictures.push(renderJSPivotInter.measures[i].attributes.getNamedItem(\"picture\").nodeValue);\r\n\t\t\t\t\tintFields.push(renderJSPivotInter.measures[i].attributes.getNamedItem(\"dataField\").nodeValue);/* */\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t//manage formula\r\n\t\t\tif ((renderJSPivotInter.measures[i].attributes.getNamedItem(\"formula\") != undefined) && (renderJSPivotInter.measures[i].attributes.getNamedItem(\"formula\").nodeValue != \"\")) {\r\n\t\t\t\tformulaInfo.measureFormula.push({ hasFormula: true, textFormula: renderJSPivotInter.measures[i].attributes.getNamedItem(\"formula\").nodeValue })\r\n\t\t\t} else {\r\n\t\t\t\tformulaInfo.measureFormula.push({ hasFormula: false })\r\n\t\t\t}\r\n\r\n\t\t\trenderJSPivotInter.forPivotCustomPicture.push(renderJSPivotInter.measures[i].attributes.getNamedItem(\"picture\").nodeValue);\r\n\t\t\torderFilds.push(renderJSPivotInter.measures[i].attributes.getNamedItem(\"dataField\").nodeValue);\r\n\t\t}\r\n\r\n\r\n\t\trenderJSPivotInter.header = preHeader.concat(measureNames);\r\n\r\n\t\trenderJSPivotInter.getDataFromXML = function (dataString, tableOrderField){\r\n\t\t\tvar stringRecord = dataString.split(\"<Record>\")\r\n\r\n\t\t\t//get server pagination info\r\n\t\t\tif (renderJSPivotInter.serverPaging) {\r\n\t\t\t\trenderJSPivotInter.ServerRecordCount = parseToIntRegisterValue(stringRecord[0], \"RecordCount\")\r\n\t\t\t\trenderJSPivotInter.ServerPageCount = parseToIntRegisterValue(stringRecord[0], \"PageCount\")\r\n\t\t\t\trenderJSPivotInter.ServerPageNumber = parseToIntRegisterValue(stringRecord[0], \"PageNumber\")\r\n\t\t\t}\r\n\t\t\t//get records of the table\r\n\t\t\t/*var filds = orderFilds;\r\n\t\t\tif (renderJSPivotInter.TableOrderFilds != undefined) {\r\n\t\t\t\tfilds = renderJSPivotInter.TableOrderFilds;\r\n\t\t\t}*/\r\n\t\t\tfilds = tableOrderField;\r\n\t\t\t\r\n\t\t\tfor (var i = 1; i < stringRecord.length; i++) {\r\n\t\t\t\tvar recordData = [];\r\n\t\t\t\tvar fullRecordData = [];\r\n\t\t\t\tfor (var j = 0; j < filds.length; j++) {\r\n\t\t\t\t\trecordData[j] = \"#NuN#\"\r\n\t\t\t\t\tvar dt = stringRecord[i].split(\"<\" + filds[j] + \">\")\r\n\t\t\t\t\tif (dt.length > 1) {\r\n\t\t\t\t\t\tvar at = dt[1].split(\"</\" + filds[j] + \">\")\r\n\t\t\t\t\t\t/*var rp = at[0].replace(/^\\s+|\\s+$/g, '')\r\n\t\t\t\t\t\trecordData[j] = (rp != \"\") ? rp : undefined*/\r\n\t\t\t\t\t\trecordData[j] = at[0]\r\n\t\t\t\t\t\tfullRecordData[j] = recordData[j]\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (stringRecord[i].indexOf(\"<\" + filds[j] + \"/>\") >= 0) {\r\n\t\t\t\t\t\t\trecordData[j] = \"\"\r\n\t\t\t\t\t\t\tfullRecordData[j] = \"\"\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\trenderJSPivotInter.data.push(recordData);\r\n\r\n\t\t\t\tvar pos_init = filds.length;\r\n\t\t\t\tfor (var j = 0; j < renderJSPivotInter.HideDataFilds.length; j++) {\r\n\t\t\t\t\tfullRecordData[pos_init + j] = undefined\r\n\t\t\t\t\tvar dt = stringRecord[i].split(\"<\" + renderJSPivotInter.HideDataFilds[j] + \">\")\r\n\t\t\t\t\tif (dt.length > 1) {\r\n\t\t\t\t\t\tvar at = dt[1].split(\"</\" + renderJSPivotInter.HideDataFilds[j] + \">\")\r\n\t\t\t\t\t\tfullRecordData[pos_init + j] = at[0]\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\trenderJSPivotInter.fullRecord.push(fullRecordData);\r\n\t\t\t\tif (fullRecordData.length > renderJSPivotInter.maxLengthRecord) renderJSPivotInter.maxLengthRecord = fullRecordData.length;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\trenderJSPivotInter.maxLengthRecord = 0;\r\n\t\trenderJSPivotInter.data = []\r\n\t\trenderJSPivotInter.fullRecord = []  //array to store extra data for formulas\r\n\t\trenderJSPivotInter.orderFildsHidden = orderFildsHidden\r\n\t\trenderJSPivotInter.TableOrderFilds = orderFilds;\r\n\t\tif (!pivotParams.ServerPagingPivot) {\r\n\t\t\trenderJSPivotInter.getDataFromXML(pivotParams.data, renderJSPivotInter.TableOrderFilds);\r\n\t\t} else {\r\n\t\t\t\r\n\t\t\tShowMeasuresAsRows = ((ShowMeasuresAsRows) && (renderJSPivotInter.measures.length > 1))\r\n\t\t\trenderJSPivotInter.pagingData = {}//OATGetDataFromXMLForPivot(renderJSPivotInter.dataString, ShowMeasuresAsRows);\r\n\t\t\trenderJSPivotInter.pagingData.dataFields = orderFilds;\r\n\t\t}\r\n\r\n\t\tvar furmulaIndex = {}\r\n\t\tfor (var j = 0; j < orderFildsHidden.length; j++) {\r\n\t\t\tfurmulaIndex[orderFildsHidden[j]] = orderFilds.length + j\r\n\t\t}\r\n\t\trenderJSPivotInter.orderFildsHidden = nameFildsHidden\r\n\t\tformulaInfo.itemPosition = furmulaIndex\r\n\t\tformulaInfo.recordDataLength = renderJSPivotInter.maxLengthRecord;\r\n\t\tformulaInfo.cantFormulaMeasures = 0;\r\n\r\n\t\tfor (var n = 0; n < formulaInfo.measureFormula.length; n++) {\r\n\t\t\tif (formulaInfo.measureFormula[n].hasFormula) {\r\n\t\t\t\tformulaInfo.cantFormulaMeasures++;\r\n\r\n\t\t\t\tvar inlineFormula = formulaInfo.measureFormula[n].textFormula\r\n\r\n\t\t\t\tvar inline = inlineFormula\r\n\t\t\t\tvar opers = ['*', '-', '+', '/', '(', ')']\r\n\t\t\t\tfor (var j = 0; j < opers.length; j++) {\r\n\t\t\t\t\tvar inline2 = inline.split(opers[j])\r\n\t\t\t\t\tif (inline2.length > 1) {\r\n\t\t\t\t\t\tinline = \"\"\r\n\t\t\t\t\t\tfor (var i = 0; i < inline2.length - 1; i++) {\r\n\t\t\t\t\t\t\tinline = inline + inline2[i] + \" \" + opers[j] + \" \"\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tinline = inline + inline2[inline2.length - 1]\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar polishNot = InfixToPostfix(inline)\r\n\t\t\t\tformulaInfo.measureFormula[n].polishNotationText = polishNot\r\n\t\t\t\tvar items = polishNot.split(\" \")\r\n\t\t\t\twhile (items.indexOf(\"\") != -1) {\r\n\t\t\t\t\titems.splice(items.indexOf(\"\"), 1)\r\n\t\t\t\t}\r\n\t\t\t\tvar relatedMeasure = []\r\n\t\t\t\tfor (var k = 0; k < items.length; k++) {\r\n\t\t\t\t\tif ((opers.indexOf(items[k]) == -1) && (isNaN(parseInt(items[k])))) {\r\n\t\t\t\t\t\t//add item\r\n\t\t\t\t\t\tvar operPositionInDataRow = formulaInfo.itemPosition[items[k]]\r\n\t\t\t\t\t\tif (relatedMeasure.indexOf(operPositionInDataRow) == -1)\r\n\t\t\t\t\t\t\trelatedMeasure.push(operPositionInDataRow)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tformulaInfo.measureFormula[n].relatedMeasures = relatedMeasure\r\n\r\n\t\t\t\tvar arrayNot = polishNot.split(\" \")\r\n\t\t\t\twhile (arrayNot.indexOf(\"\") != -1) {\r\n\t\t\t\t\tarrayNot.splice(arrayNot.indexOf(\"\"), 1)\r\n\t\t\t\t}\r\n\t\t\t\tformulaInfo.measureFormula[n].PolishNotation = arrayNot\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar l = 0;\r\n\t\tvar m = 0;\r\n\t\tvar d = 0;\r\n\t\tfor (var i = 0; i < preHeader.length; i++) {\r\n\t\t\tif (contains2(columnNames, preHeader[i]) != -1) {\r\n\t\t\t\trenderJSPivotInter.columnNumbers[l] = i;\r\n\t\t\t\tl++;\r\n\t\t\t}\r\n\t\t\tif (contains2(rowNames, preHeader[i]) != -1) {\r\n\t\t\t\trenderJSPivotInter.rowNumbers[m] = i;\r\n\t\t\t\tm++;\r\n\t\t\t}\r\n\t\t\tif (contains2(filterNames, preHeader[i]) != -1) {\r\n\t\t\t\trenderJSPivotInter.filterNumbers[d] = i;\r\n\t\t\t\td++;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//crear arreglo de columnas\r\n\t\tvar colms = new Array();\r\n\t\tfor (var t = 0; t < columns.length; t++) {\r\n\t\t\tcolms[t] = columns[t];\r\n\t\t}\r\n\r\n\t\tvar urlRelative = \"\"\r\n\r\n\t\tfor (var i = 0; i < jQuery('script').length; i++) {\r\n\t\t\tvar js_url = jQuery('script')[i].src\r\n\t\t\tif (js_url.indexOf(\"gxpivotjs\") > 0) {\r\n\t\t\t\turlRelative = js_url\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tif (js_url.indexOf(\"oat_loader\") > 0) {\r\n\t\t\t\turlRelative = js_url\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\r\n\t\tvar relativePath = urlRelative.substring(0, urlRelative.indexOf(\"QueryViewer/oatPivot\"));\r\n\t\trenderJSPivotInter.relativePath = relativePath\r\n\t\r\n\t\trenderJSPivotInter.fireOnPageChangeTable = function(UcId, move){\r\n\t\t\tsetTimeout( function() {\r\n\t\t\t\tvar paramobj = {\"QueryviewerId\": UcId, \"Navigation\": move};\r\n\t\t\t\tvar evt = document.createEvent(\"Events\")\r\n\t\t\t\tevt.initEvent(\"TableOnPageChangeEvent\", true, true);\r\n\t\t\t\tevt.parameter = paramobj;\r\n\t\t\t\tdocument.dispatchEvent(evt);\r\n\t\t\t}, 0)\r\n\t\t}\r\n\t\r\n\t\tvar pivot;\r\n\r\n\t\tqueryName = queryName.replace(/\\./g, \"\")\r\n\t\trenderJSPivotInter.query = queryName\r\n\t\trenderJSPivotInter.translations = translations\r\n\t\tif (type == \"PivotTable\") {\r\n\t\t\tpivot = OAT_JS.pivot.cb(renderJSPivotInter, renderJSPivotInter.pivotDiv, page, content, defaultPicture, QueryViewerCollection, colms,\r\n\t\t\t\trenderJSPivotInter.formatValues, renderJSPivotInter.conditionalFormatsColumns, renderJSPivotInter.formatValuesMeasures, renderJSPivotInter.autoResize, renderJSPivotInter.disableColumnSort, renderJSPivotInter.UcId, renderJSPivotInter.IdForQueryViewerCollection,\r\n\t\t\t\trememberLayout, ShowMeasuresAsRows, formulaInfo, renderJSPivotInter.fullRecord,\r\n\t\t\t\tpivotParams.ServerPagingPivot, renderJSPivotInter.pagingData, renderJSPivotInter.HideDataFilds, renderJSPivotInter.orderFildsHidden, renderJSPivotInter.InitMetadata, renderJSPivotInter.relativePath,\r\n\t\t\t    renderJSPivotInter.pivotParams );\r\n\t\t\tif (pivot == 'error') {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (type == \"Table\") {\r\n\t\t\t\tpivot = OAT_JS.grid.cb(renderJSPivotInter.pivotDiv, renderJSPivotInter.UcId + '_' + queryName, columnsDataType, defaultPicture, renderJSPivotInter.forPivotCustomPicture, renderJSPivotInter.conditionalFormatsColumns,\r\n\t\t\t\t\trenderJSPivotInter.formatValues, renderJSPivotInter.forPivotCustomFormat, colms, columns, QueryViewerCollection, renderJSPivotInter.pageSize, renderJSPivotInter.disableColumnSort, renderJSPivotInter.UcId, renderJSPivotInter.IdForQueryViewerCollection,\r\n\t\t\t\t\trememberLayout, renderJSPivotInter);\r\n\t\t\t}\r\n\t\t}\r\n\t\t//add pagination functionality\r\n\t\tif (type == \"Table\") {\r\n\t\t\trenderJSPivotInter.pageSize = (renderJSPivotInter.previousState) ? renderJSPivotInter.previousState.pageSize : pageSize;\r\n\r\n\t\t\tvar rowNum = renderJSPivotInter.pageSize;\r\n\t\t\tif ((pivot.rowsPerPage != undefined) && (pivot.rowsPerPage != \"\")) {\r\n\t\t\t\trowNum = pivot.rowsPerPage;\r\n\t\t\t}\r\n\r\n\t\t\tif (QueryViewerCollection[renderJSPivotInter.UcId]._ControlRenderedTo) {\r\n\t\t\t\tjQuery(\"#\"+renderJSPivotInter.UcId + \"_\" + renderJSPivotInter.query + \"_tablePagination\").remove(); //jQuery(\".pivot_pag_div\").remove()\r\n\t\t\t}\r\n\r\n\t\t\tif (renderJSPivotInter.pageSize) {\r\n\t\t\t\t\r\n\t\t\t\t\tvar options = {\r\n\t\t\t\t\t\tcurrPage: renderJSPivotInter.ServerPageNumber,\r\n\t\t\t\t\t\tignoreRows: jQuery('tbody tr[visibQ=tf]', jQuery(\"#\" + renderJSPivotInter.UcId + \"_\" + renderJSPivotInter.query)),\r\n\t\t\t\t\t\toptionsForRows: OAT.AddItemToList([10, 15, 20], renderJSPivotInter.InitMetadata.RowsPerPage),\r\n\t\t\t\t\t\trowsPerPage: rowNum != 'undefined' ? rowNum : 10,\r\n\t\t\t\t\t\tjstype: \"table\",\r\n\t\t\t\t\t\ttopNav: false,\r\n\t\t\t\t\t\tcontrolName: renderJSPivotInter.UcId + \"_\" + renderJSPivotInter.query,\r\n\t\t\t\t\t\tcantPages: renderJSPivotInter.ServerPageCount,\r\n\t\t\t\t\t\tcontrolUcId: renderJSPivotInter.UcId,\r\n\t\t\t\t\t\ttranslations: translations,\r\n\t\t\t\t\t\tcontrol: renderJSPivotInter\r\n\t\t\t\t\t}\r\n\t\t\t\t\tOAT.partialTablePagination(jQuery(\"#\" + renderJSPivotInter.UcId + \"_\" + renderJSPivotInter.query),options);\r\n\t\t\t\t\tvar wd2 = jQuery(\"#\" + renderJSPivotInter.UcId + \"_\" + renderJSPivotInter.query)[0].clientWidth - 1;\r\n\t\t\t\t\tjQuery(\"#\" + renderJSPivotInter.UcId + \"_\" + renderJSPivotInter.query + \"_tablePagination\").css({ width: wd2 + \"px\" });\r\n\t\t\t\t\tif (jQuery(\"#\" + renderJSPivotInter.UcId + \"_\" + renderJSPivotInter.query + \"_tablePagination\").css('display') === 'none') {\r\n\t\t\t\t\t\tjQuery(\"#\" + renderJSPivotInter.UcId + \"_\" + renderJSPivotInter.query).css({ marginBottom: \"0px\" });\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tjQuery(\"#\" + renderJSPivotInter.UcId + \"_\" + renderJSPivotInter.query).css(\"margin-bottom\", \"0px\");\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ((jQuery(\"#\" + renderJSPivotInter.UcId + \"_\" + renderJSPivotInter.query + \"_tablePagination_paginater\").length > 0) && (jQuery(\"#\" + renderJSPivotInter.UcId + \"_\" + renderJSPivotInter.query + \"_tablePagination\")[0].getBoundingClientRect().bottom < jQuery(\"#\" + renderJSPivotInter.UcId + \"_\" + renderJSPivotInter.query + \"_tablePagination_paginater\")[0].getBoundingClientRect().bottom)) {\r\n\t\t\t\t\t\tjQuery(\"#\" + renderJSPivotInter.UcId + \"_\" + renderJSPivotInter.query + \"_tablePagination\").css({ marginBottom: \"0px\" })\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar wd = jQuery(\"#\" + renderJSPivotInter.UcId + \"_\" + renderJSPivotInter.query)[0].offsetWidth - 4;\r\n\t\t\t\t\tjQuery(\"#\" + renderJSPivotInter.UcId + \"_\" + renderJSPivotInter.query + \"_grid_top_div\").css({ width: wd + \"px\" });\r\n\r\n\t\t\t\t\tif ((renderJSPivotInter.serverPaging) && ((renderJSPivotInter.pageSize == 10) || (renderJSPivotInter.ServerRecordCount < 10))) {\r\n\t\t\t\t\t\tif (renderJSPivotInter.ServerPageCount <= 1) { //hide pagiantion\r\n\t\t\t\t\t\t\tjQuery(\"#\" + renderJSPivotInter.UcId + \"_\" + renderJSPivotInter.query + \"_tablePagination\").css({ display: \"none\" });\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\r\n\r\n\t\t\t}\r\n\t\t\tvar wd = jQuery(\"#\" + renderJSPivotInter.UcId + \"_\" + renderJSPivotInter.query)[0].offsetWidth - 4;\r\n\t\t\ttry {\r\n\t\t\t\tif (jQuery(\"#MAINFORM\")[0].className.indexOf(\"form-horizontal\") > -1) {\r\n\t\t\t\t\twd = wd + 4;\r\n\t\t\t\t}\r\n\t\t\t} catch (Error) {\r\n\t\t\t}\r\n\t\t\tjQuery(\"#\" + renderJSPivotInter.UcId + \"_\" + renderJSPivotInter.query + \"_grid_top_div\").css({ width: wd + \"px\" });\r\n\r\n\t\t\t//set interval for handler values infinite scroll\r\n\t\t\tif (self.serverPaging) {\r\n\t\t\t\tsetInterval(function () {\r\n\t\t\t\t\tfor (var t = 0; t < jQuery(\".oat_winrect_container .pivot_popup_fix\").length; t++) {\r\n\t\t\t\t\t\tif ((!jQuery(\".oat_winrect_container .pivot_popup_fix\").closest(\".oat_winrect_container\")[t].style.display) ||\r\n\t\t\t\t\t\t\t(jQuery(\".oat_winrect_container .pivot_popup_fix\").closest(\".oat_winrect_container\")[t].style.display != \"none\")) {\r\n\r\n\t\t\t\t\t\t\tif (jQuery(\".oat_winrect_container .pivot_popup_fix\").length > 0) {\r\n\t\t\t\t\t\t\t\tvar element = jQuery(\".oat_winrect_container .pivot_popup_fix\")[t];\r\n\t\t\t\t\t\t\t\tvar scrollBottom = element.scrollHeight - element.clientHeight - element.scrollTop\r\n\t\t\t\t\t\t\t\tif (scrollBottom < 25) {\r\n\t\t\t\t\t\t\t\t\tvar UcId = element.getAttribute(\"ucid\")\r\n\t\t\t\t\t\t\t\t\tvar columnNumber = parseInt(element.getAttribute(\"columnNumber\"))\r\n\t\t\t\t\t\t\t\t\tOAT_JS.grid.readScrollValue(UcId, columnNumber)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t\t250)\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif (!pivotParams.ServerPagingPivot) {\r\n\t\t\tif (renderJSPivotInter.autoResize) {\r\n\t\t\t\tjQuery(\"#\" + renderJSPivotInter.UcId + \"_\" + renderJSPivotInter.query).css({ minWidth: \"10px\" });\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\trenderJSPivotInter.getDataForTable = function (UcId, pageNumber, rowsPerPage, recalculateCantPages, DataFieldOrder, OrderType, DataFieldFilter, DataFieldBlackList, restoreDefaultView, fromExternalRefresh) {\r\n\t\t\tvar layoutChanged = false;\r\n\t\t\tif ((recalculateCantPages) || (DataFieldOrder != \"\") || (DataFieldFilter != \"\")) {\r\n\t\t\t\tOAT_JS.grid.cleanCache(renderJSPivotInter, UcId);\r\n\t\t\t\tlayoutChanged = true;\r\n\t\t\t}\r\n\t\t\tif (DataFieldOrder != \"\") OAT_JS.grid.gridData[UcId].dataFieldOrder = DataFieldOrder;\r\n\t\t\tif (OrderType != \"\") OAT_JS.grid.gridData[UcId].orderType = OrderType;\r\n\t\t\tif (DataFieldFilter != \"\") OAT_JS.grid.updateFilterInfo(UcId, DataFieldFilter, DataFieldBlackList);\r\n\t\t\tif (restoreDefaultView) { OAT_JS.grid.restoreDefaultView(UcId); rowsPerPage = OAT_JS.grid.gridData[UcId].rowsPerPage }\r\n\r\n\t\t\tOAT_JS.grid.gridData[UcId].rowsPerPage = rowsPerPage\r\n\t\t\tif ((recalculateCantPages) || (DataFieldOrder != \"\") || (DataFieldFilter != \"\")) {//save state\r\n\t\t\t\tOAT.SaveStateWhenServerPaging(OAT_JS.grid.gridData[UcId], UcId, OAT_JS.grid.gridData[UcId].blackLists, OAT_JS.grid.gridData[UcId].columnVisible, OAT_JS.grid.gridData[UcId].columnDataField)\r\n\t\t\t}\r\n\r\n\t\t\t\r\n\t\t\tif (rowsPerPage == \"\") { rowsPerPage = undefined; pageNumber = 0; }\r\n\r\n\t\t\tif (!OAT_JS.grid.pageInCache(UcId, pageNumber)) {\r\n\t\t\t\t\r\n\t\t\t\tOAT_JS.grid.lastCallToQueryViewer = \"getDataForTable\"\r\n\t\t\t\tOAT_JS.grid.lastCallData = { \"self\": renderJSPivotInter, \"UcId\": OAT_JS.grid.gridData[UcId].IdForQueryViewerCollection, \"RecalculateCantPages\":recalculateCantPages, \"DataFieldOrder\":DataFieldOrder, \"PageNumber\": pageNumber, \"fromExternalRefresh\": fromExternalRefresh}\r\n\t\t\t\trenderJSPivotInter.requestPageDataForTable(pageNumber, rowsPerPage, recalculateCantPages, OAT_JS.grid.gridData[UcId].dataFieldOrder, OAT_JS.grid.gridData[UcId].orderType, OAT_JS.grid.gridData[UcId].filterInfo, layoutChanged, OAT_JS.grid.gridData[UcId].IdForQueryViewerCollection)\r\n\t\t\t\t\r\n\t\t\t\t/*qv.collection[OAT_JS.grid.gridData[UcId].IdForQueryViewerCollection].getPageDataForTable((function (resXML) {\r\n\t\t\t\t\tif (pageNumber == 0) { pageNumber = 1, recalculateCantPages = false; }\r\n\t\t\t\t\tOAT_JS.grid.redraw(renderJSPivotInter, UcId, resXML, recalculateCantPages, DataFieldOrder != \"\", pageNumber, fromExternalRefresh)\r\n\t\t\t\t}).closure(renderJSPivotInter), [pageNumber, rowsPerPage, recalculateCantPages, OAT_JS.grid.gridData[UcId].dataFieldOrder, OAT_JS.grid.gridData[UcId].orderType, OAT_JS.grid.gridData[UcId].filterInfo, layoutChanged]);*/\r\n\t\t\t} else {\r\n\t\t\t\tOAT_JS.grid.redraw(renderJSPivotInter, UcId, OAT_JS.grid.pageInCache(UcId, pageNumber), false, false, pageNumber, true)\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\trenderJSPivotInter.requestPageDataForTable = function(PageNumber, PageSize, recalculateCantPages, DataFieldOrder, OrderType, Filters, LayoutChange, IdForQueryViewerCollection){\r\n\t\t\tsetTimeout( function() {\r\n\t\t\t\tvar paramobj = {  \"PageNumber\": PageNumber, \"PageSize\": PageSize,\"RecalculateCantPages\":recalculateCantPages, \"DataFieldOrder\":DataFieldOrder, \r\n\t\t\t\t\t\"OrderType\":OrderType, \"Filters\":Filters, \"LayoutChange\":LayoutChange, \"QueryviewerId\": IdForQueryViewerCollection};\r\n\t\t\t\tvar evt = document.createEvent(\"Events\")\r\n\t\t\t\tevt.initEvent(\"RequestPageDataForTable\", true, true);\r\n\t\t\t\tevt.parameter = paramobj;\r\n\t\t\t\tdocument.dispatchEvent(evt);\r\n\t\t\t}, 0)\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\trenderJSPivotInter.getActualCantPages = function(UcId){  \r\n\t\t \treturn OAT_JS.grid.gridData[UcId].actualCantPages\r\n\t\t}\r\n\t\t\r\n\t\trenderJSPivotInter.getValuesForColumn = function (UcId, columnNumber, filterValue) {\r\n\t\t\tvar dataField = OAT_JS.grid.gridData[UcId].columnDataField[columnNumber]\r\n\t\t\tif (filterValue != \"\") {\r\n\t\t\t\tvar page = 1;\r\n\t\t\t\t\r\n\t\t\t\tOAT_JS.grid.lastCallToQueryViewer = \"getValuesForColumn\"\r\n\t\t\t\tOAT_JS.grid.lastCallData = { \"self\": renderJSPivotInter, \"UcId\": UcId, \"columnNumber\": columnNumber, \"filterValue\": filterValue, \"dataField\": dataField }\r\n\t\t\t\t\r\n\t\t\t\trenderJSPivotInter.requestAttributeForTable(UcId, dataField, page, filterValue, 10)\r\n\t\t\t\t/*qv.collection[OAT_JS.grid.gridData[UcId].IdForQueryViewerCollection].getAttributeValues((function (resJSON) {\r\n\t\t\t\t\tvar res = JSON.parse(resJSON);\r\n\t\t\t\t\tOAT_JS.grid.changeValues(UcId, dataField, columnNumber, res, filterValue);\r\n\t\t\t\t}).closure(renderJSPivotInter), [dataField, page, 10, filterValue]);*/\r\n\t\t\t} else {\r\n\t\t\t\tOAT_JS.grid.resetScrollValue(UcId, dataField, columnNumber)\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\trenderJSPivotInter.requestAttributeForTable = function(UcId, dataField, page, filterValue, pageSize){\r\n\t\t\tsetTimeout( function() {\r\n\t\t\t\tvar paramobj = {  \"Page\": page, \"PageSize\": pageSize, \"DataField\": dataField, \"Filters\":filterValue, \"QueryviewerId\": UcId};\r\n\t\t\t\tvar evt = document.createEvent(\"Events\")\r\n\t\t\t\tevt.initEvent(\"RequestAttributeForTable\", true, true);\r\n\t\t\t\tevt.parameter = paramobj;\r\n\t\t\t\tdocument.dispatchEvent(evt);\r\n\t\t\t}, 0)\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\trenderJSPivotInter.fireOnFilterChanged = function(UcId, FilterChangedData){\r\n\t\t\tsetTimeout( function() {\r\n\t\t\t\tvar paramobj = {\"QueryViewerd\": UcId, \"FilterChangedData\": FilterChangedData};\r\n\t\t\t\tvar evt = document.createEvent(\"Events\")\r\n\t\t\t\tevt.initEvent(\"TableOnFilterChangedEvent\", true, true);\r\n\t\t\t\tevt.parameter = paramobj;\r\n\t\t\t\tdocument.dispatchEvent(evt);\r\n\t\t\t}, 0)\r\n\t\t}\r\n\t\t\r\n\t\tqueryself.oat_element = pivot;\r\n\r\n\r\n\t}\r\n\r\n\tvar OAT_JS = {};\r\n\r\n\tOAT_JS.grid = {\r\n\t\tpanel: 1,\r\n\t\ttab: 4,\r\n\t\tdiv: \"\",\r\n\t\tneeds: [\"grid\"],\r\n\t\tgridData: [],\r\n\t\tcb: function (content, controlName, columnsDataType, defaultPicture, forPivotCustomPicture, conditionalFormatsColumns, formatValues, forPivotCustomFormar, colms, columns,\r\n\t\t\tQueryViewerCollection, pageSize, disableColumnSort, UcId, IdForQueryViewerCollection, rememberLayout, _mthis) {\r\n\t\t\tthis.gridData[UcId] = {};\r\n\t\t\tthis.gridData[UcId].div = content;\r\n\t\t\tthis.gridData[UcId].controlName = controlName;\r\n\r\n\t\t\tthis.gridData[UcId].actualPageNumber = 1;\r\n\t\t\tthis.gridData[UcId].rowsPerPage = (_mthis.previousState) ? _mthis.previousState.pageSize : pageSize;\r\n\t\t\tthis.gridData[UcId].actualCantPages = _mthis.ServerPageCount;\r\n\t\t\t\r\n\t\t\tthis.gridData[UcId].autoResize = _mthis.autoResize;\r\n\t\t\tthis.gridData[UcId].selection = {Allow: _mthis.pivotParams.AllowSelection, EntireLine: _mthis.pivotParams.SelectLine, SelectedNode: []};\r\n\t\t\t\r\n\t\t\tthis.gridData[UcId].grid = new OAT.Grid(content, controlName, query, columnsDataType, colms, QueryViewerCollection, this.gridData[UcId].rowsPerPage,\r\n\t\t\t\tdisableColumnSort, UcId, IdForQueryViewerCollection, rememberLayout, _mthis.serverPaging, _mthis.HideDataFilds, _mthis.orderFildsHidden, _mthis.TableOrderFilds, _mthis.relativePath,\r\n\t\t\t\tthis.gridData[UcId].selection, _mthis.pivotParams.Title, _mthis.translations );\r\n\t\t\tthis.gridData[UcId].grid.oat_component = this;\r\n\t\t\tthis.gridData[UcId].QueryViewerCollectionItem = QueryViewerCollection[IdForQueryViewerCollection];\r\n\r\n\t\t\t//initialize \r\n\t\t\tthis.gridData[UcId].columnDataField = []\r\n\t\t\tif ((_mthis.previousState) && (_mthis.previousState.columnDataField)){\r\n\t\t\t\tthis.gridData[UcId].columnDataField = _mthis.previousState.columnDataField\r\n\t\t\t\tvar header = [];\r\n\t\t\t\r\n\t\t\t\tfor(var i = 0; i < this.gridData[UcId].columnDataField.length; i++){\r\n\t\t\t\t\tvar dtF = this.gridData[UcId].columnDataField[i]\r\n\t\t\t\t\tfor(var j = 0 ; j < columns.length; j++){\r\n\t\t\t\t\t\tif (dtF == columns[j].getAttribute(\"dataField\"))\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\theader.push(columns[j].getAttribute(\"displayName\"));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.gridData[UcId].grid.createHeader(header, this.gridData[UcId].columnDataField);\r\n\t\t\t} else {\r\n\t\t\t\tfor (var id = 0; id < columns.length; id++) {\r\n\t\t\t\t\tthis.gridData[UcId].columnDataField[id] = columns[id].getAttribute(\"dataField\");\r\n\t\t\t\t}\r\n\t\t\t\tthis.gridData[UcId].grid.createHeader(_mthis.header, this.gridData[UcId].columnDataField);\r\n\t\t\t}\r\n\r\n\t\t\t\r\n\t\t\tthis.gridData[UcId].redrawHeader = false\r\n\t\t\t\r\n\t\t\t//initialize default data\r\n\t\t\tthis.gridData[UcId].defaultValues = {}\r\n\t\t\tthis.gridData[UcId].defaultValues.rowsPerPage = pageSize;\r\n\t\t\tthis.gridData[UcId].defaultValues.dataFieldOrder = \"\";\r\n\t\t\tthis.gridData[UcId].defaultValues.orderType = \"\"\r\n\t\t\tthis.gridData[UcId].defaultValues.filterInfo = [];\r\n\r\n\r\n\t\t\tthis.gridData[UcId].IdForQueryViewerCollection = IdForQueryViewerCollection;\r\n\t\t\t\r\n\t\t\tthis.gridData[UcId].TableOrderFields = _mthis.TableOrderFilds;\r\n\r\n\t\t\t//initialize cache\r\n\t\t\tthis.gridData[UcId].cacheSize = (_mthis.gridCacheSize == 0) ? (_mthis.ServerPageCount * ((this.gridData[UcId].rowsPerPage > 0) ? this.gridData[UcId].rowsPerPage : 1)) : _mthis.gridCacheSize;\r\n\t\t\tthis.gridData[UcId].gridCache = [];\r\n\t\t\tthis.gridData[UcId].gridCache[0] = { page: 1, pageData: _mthis.dataString };\r\n\t\t\tthis.gridData[UcId].nextCachePos = 1;\r\n\t\t\t//end initialize cache\r\n\t\t\t\r\n\t\t\t//initialize  dataFields\r\n\t\t\tthis.gridData[UcId].originalColumnDataField = []\r\n\t\t\tfor (var id = 0; id < columns.length; id++) {\r\n\t\t\t\tthis.gridData[UcId].originalColumnDataField[id] = columns[id].getAttribute(\"dataField\");\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t//initialize column visibility\r\n\t\t\tthis.gridData[UcId].columnVisible = [];\r\n\t\t\tfor (var id = 0; id < columns.length; id++) {\r\n\t\t\t\tthis.gridData[UcId].columnVisible[id] = true\r\n\t\t\t\tif (_mthis.previousColumnVisible) {\r\n\t\t\t\t\tthis.gridData[UcId].columnVisible[id] = _mthis.previousColumnVisible[id]\r\n\t\t\t\t\tif (!this.gridData[UcId].columnVisible[id]){\r\n\t\t\t\t\t\tvar dtF = this.gridData[UcId].originalColumnDataField[id]\t\r\n\t\t\t\t\t\tthis.gridData[UcId].grid.hideColumnHeader(this.gridData[UcId].columnDataField.indexOf(dtF));\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (_mthis.initialColumnVisible) {\r\n\t\t\t\t\tthis.gridData[UcId].columnVisible[id] = _mthis.initialColumnVisible[id]\r\n\t\t\t\t\tif (!this.gridData[UcId].columnVisible[id])\r\n\t\t\t\t\t\tthis.gridData[UcId].grid.hideColumnHeader(id);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\r\n\t\t\t//initialize filter info\r\n\t\t\tthis.gridData[UcId].filterInfo = [];\r\n\t\t\tthis.gridData[UcId].differentValues = [];\r\n\t\t\tthis.gridData[UcId].blackLists = [];\r\n\t\t\tthis.gridData[UcId].differentValuesPaginationInfo = [];\r\n\t\t\tthis.gridData[UcId].filteredValuesPaginationInfo = [];\r\n\t\t\tfor (var id = 0; id < columns.length; id++) {\r\n\t\t\t\tthis.gridData[UcId].differentValues[columns[id].getAttribute(\"dataField\")] = [];\r\n\t\t\t\tthis.gridData[UcId].blackLists[columns[id].getAttribute(\"dataField\")] = { state: \"all\", visibles: [], hiddens: [], defaultAction: \"Include\", hasNull: true };\r\n\t\t\t\tthis.gridData[UcId].differentValuesPaginationInfo[columns[id].getAttribute(\"dataField\")] = {\r\n\t\t\t\t\tblocked: false, previousPage: 0,\r\n\t\t\t\t\ttotalPages: true, filtered: false\r\n\t\t\t\t}\r\n\t\t\t\tthis.gridData[UcId].filteredValuesPaginationInfo[columns[id].getAttribute(\"dataField\")] = { previousPage: 0, totalPages: 0, filteredText: \"\", values: [] }\r\n\t\t\t}\r\n\r\n\t\t\tthis.gridData[UcId].defaultNullText = defaultPicture.getAttribute(\"textForNullValues\");\r\n\r\n\t\t\tif (_mthis.previousFilters != undefined) {//load previus state filter info\r\n\t\t\t\tthis.gridData[UcId].filterInfo = _mthis.previousFilters;\r\n\t\t\t\tfor (var u = 0; u < this.gridData[UcId].filterInfo.length; u++) {\r\n\t\t\t\t\tfor (var t = 0; t < this.gridData[UcId].filterInfo[u].NotNullValues.Included.length; t++) {\r\n\t\t\t\t\t\tvar val = this.gridData[UcId].filterInfo[u].NotNullValues.Included[t];\r\n\t\t\t\t\t\tif (this.gridData[UcId].blackLists[this.gridData[UcId].filterInfo[u].DataField].visibles.indexOf(val) == -1) {\r\n\t\t\t\t\t\t\tthis.gridData[UcId].blackLists[this.gridData[UcId].filterInfo[u].DataField].visibles.push(val);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfor (var t = 0; t < this.gridData[UcId].filterInfo[u].NotNullValues.Excluded.length; t++) {\r\n\t\t\t\t\t\tvar val = this.gridData[UcId].filterInfo[u].NotNullValues.Excluded[t];\r\n\t\t\t\t\t\tif (this.gridData[UcId].blackLists[this.gridData[UcId].filterInfo[u].DataField].hiddens.indexOf(val) == -1) {\r\n\t\t\t\t\t\t\tthis.gridData[UcId].blackLists[this.gridData[UcId].filterInfo[u].DataField].hiddens.push(val);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (this.gridData[UcId].filterInfo[u].NotNullValues.Included.length > 0) {\r\n\t\t\t\t\t\tthis.gridData[UcId].blackLists[this.gridData[UcId].filterInfo[u].DataField].state = \"\";\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.gridData[UcId].blackLists[this.gridData[UcId].filterInfo[u].DataField].state = \"none\";\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis.gridData[UcId].blackLists[this.gridData[UcId].filterInfo[u].DataField].defaultAction = this.gridData[UcId].filterInfo[u].NotNullValues.DefaultAction;\r\n\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif ((_mthis.customFilterInfo != undefined) & (_mthis.customFilterInfo != \"\")) {\r\n\t\t\t\t\tthis.gridData[UcId].filterInfo = _mthis.customFilterInfo;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t//end initialize filter info\r\n\t\t\t//initialize order info\r\n\t\t\tthis.gridData[UcId].dataFieldOrder = (_mthis.previousDataFieldOrder != undefined) ? _mthis.previousDataFieldOrder : \"\"\r\n\t\t\tthis.gridData[UcId].orderType = (_mthis.previousOrderType != undefined) ? _mthis.previousOrderType : \"\"\r\n\t\t\t//end initialize order info\r\n\t\t\t//for custom order\r\n\t\t\tthis.gridData[UcId].customOrderValues = [];\r\n\t\t\tfor (var index = 0; index < columns.length; index++) {\r\n\t\t\t\tif ((columns[index].getAttribute(\"order\") != undefined) && (columns[index].getAttribute(\"order\") === \"custom\")) {\r\n\t\t\t\t\tresult = this.gridData[UcId].grid.applyCustomSort(index, columns[index], data);\r\n\t\t\t\t\tdata = result[0]\r\n\t\t\t\t\tthis.gridData[UcId].customOrderValues[index] = result[1]\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.gridData[UcId].customOrderValues[index] = false\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.gridData[UcId].rowsMetadata = {\r\n\t\t\t\tcolumnsDataType: columnsDataType, defaultPicture: defaultPicture, forPivotCustomPicture: forPivotCustomPicture,\r\n\t\t\t\tconditionalFormatsColumns: conditionalFormatsColumns, formatValues: formatValues, forPivotCustomFormat: forPivotCustomFormat, columns: columns\r\n\t\t\t}\r\n\t\t\tthis.gridData[UcId].rowsData = data;\r\n\t\t\tfor (var i = 0; i < data.length; i++) {\r\n\t\t\t\tOAT.CreateGridRow(_mthis.data[i], this.gridData[UcId])\r\n\t\t\t}\r\n\r\n\t\t\t//for ascending or descending order\r\n\t\t\tif (!_mthis.serverPaging) {\r\n\t\t\t\tfor (var index = 0; index < columns.length; index++) {\r\n\t\t\t\t\tif ((columns[index].getAttribute(\"order\") != undefined) && (columns[index].getAttribute(\"order\") === \"ascending\")) {\r\n\t\t\t\t\t\tthis.gridData[UcId].grid.applySortOrderType(index, 2);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ((columns[index].getAttribute(\"order\") != undefined) && (columns[index].getAttribute(\"order\") === \"descending\")) {\r\n\t\t\t\t\t\tthis.gridData[UcId].grid.applySortOrderType(index, 3);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (columns[index].getAttribute(\"order\") != undefined) {\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tvar withOrderCustom = false\r\n\t\t\t\tfor (var index = 0; index < columns.length; index++) {\r\n\t\t\t\t\tif ((columns[index].getAttribute(\"order\") != undefined) && (columns[index].getAttribute(\"order\") != \"\")) {\r\n\t\t\t\t\t\tthis.gridData[UcId].dataFieldOrder = columns[index].getAttribute(\"dataField\")\r\n\t\t\t\t\t\tthis.gridData[UcId].orderType = (columns[index].getAttribute(\"order\") == \"descending\") ? \"Descending\" : \"Ascending\";\r\n\t\t\t\t\t\twithOrderCustom = (columns[index].getAttribute(\"order\") == \"custom\")\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ((this.gridData[UcId].dataFieldOrder != \"\") && (!withOrderCustom)) {\r\n\t\t\t\t\tvar columnOrderNumber = 0;\r\n\t\t\t\t\tfor (var t = 0; t < this.gridData[UcId].grid.columns.length; t++) {\r\n\t\t\t\t\t\tif (this.gridData[UcId].dataFieldOrder == this.gridData[UcId].columnDataField[t]) { //this.gridData[UcId].grid.columns[t].getAttribute(\"dataField\")){\r\n\t\t\t\t\t\t\tcolumnOrderNumber = t;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//var colNumber = columns.length - 1 - columnOrderNumber;\r\n\t\t\t\t\tthis.gridData[UcId].grid.applySortOrderType(columnOrderNumber, (this.gridData[UcId].orderType.toLowerCase() == \"ascending\") ? 2 : 3);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t//apply custom filters\r\n\t\t\t//this.gridData[UcId].mustRedraw = false; \r\n\t\t\tfor (var index = 0; index < columns.length; index++) {\r\n\t\t\t\tthis.gridData[UcId].grid.applyCustomFilter(index, columns[index]);\r\n\t\t\t\t//var toRedraw = this.gridData[UcId].grid.applyCustomFilter(index, columns[index]);\r\n\t\t\t\t//if (toRedraw) { this.gridData[UcId].mustRedraw = true; }\r\n\t\t\t}\r\n\r\n\t\t\t//load different values\r\n\t\t\tif (_mthis.serverPaging) {\r\n\t\t\t\t//OAT_JS.grid.initValueRead(UcId, 0)\r\n\t\t\t\tthis.gridData[UcId].endValueRead = false\r\n\t\t\t\t//call OnFirstPage on load\r\n\t\t\t\tQueryViewerCollection[this.gridData[UcId].IdForQueryViewerCollection].CurrentPage = 1;//qv.collection[this.gridData[UcId].IdForQueryViewerCollection].CurrentPage = 1;\r\n\t\t\t\t//if (typeof (qv.collection[this.gridData[UcId].IdForQueryViewerCollection].OnFirstPage) == 'function')\r\n\t\t\t\tif (typeof (QueryViewerCollection[this.gridData[UcId].IdForQueryViewerCollection].OnFirstPage) == 'function') \r\n\t\t\t\t\t//qv.collection[this.gridData[UcId].IdForQueryViewerCollection].OnFirstPage()\r\n\t\t\t\t\tself.fireOnPageChangeTable(this.gridData[UcId].IdForQueryViewerCollection, \"OnFirstPage\")\r\n\t\t\t}\r\n\r\n\t\t\tif (!_mthis.serverPaging) {\r\n\t\t\t\tthis.gridData[UcId].grid.applySaveState(this.gridData[UcId].rowsPerPage);\r\n\t\t\t}\r\n\r\n\t\t\tif (_mthis.previousState) {\r\n\t\t\t\tvar __mthis = this\r\n\t\t\t\tsetTimeout( function() {\r\n\t\t\t\t\tself.getDataForTable(UcId, 1, __mthis.gridData[UcId].rowsPerPage, true, __mthis.gridData[UcId].dataFieldOrder, __mthis.gridData[UcId].orderType, \"\", \"\", \"\", false);\r\n\t\t\t\t} , 0)\r\n\t\t\t}\r\n\r\n\t\t\treturn this.gridData[UcId].grid;\r\n\t\t},\r\n\t\tredraw: function (_mthis, UcId, xmlData, recalculateCantPages, moveToFirstPage, pageNumber, fromExternalRefresh) {\r\n\t\t\t//add data to cache\r\n\t\t\tif (!this.pageInCache(UcId, pageNumber)) {\r\n\t\t\t\tthis.gridData[UcId].gridCache.push({ page: pageNumber, pageData: xmlData })\r\n\t\t\t\tif (this.gridData[UcId].gridCache.length > this.gridData[UcId].cacheSize) {\r\n\t\t\t\t\tthis.gridData[UcId].gridCache.splice(0, 1)\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tvar indCache = -1;\r\n\t\t\t\tfor (var cP = 0; cP < this.gridData[UcId].gridCache.length; cP++) {\r\n\t\t\t\t\tif (this.gridData[UcId].gridCache[cP].page == pageNumber) {\r\n\t\t\t\t\t\tindCache = cP;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.gridData[UcId].gridCache.splice(indCache, 1)\r\n\t\t\t\tthis.gridData[UcId].gridCache.push({ page: pageNumber, pageData: xmlData })\r\n\t\t\t}\r\n\t\t\t//end add data to cache\r\n\t\t\t_mthis.data = []\r\n\t\t\t_mthis.getDataFromXML(xmlData, this.gridData[UcId].TableOrderFields);\r\n\t\t\tif (_mthis.ServerPageCount >= 0) {\r\n\t\t\t\tthis.gridData[UcId].actualCantPages = _mthis.ServerPageCount;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t//redraw header when neded\r\n\t\t\tif (this.gridData[UcId].redrawHeader){\r\n\t\t\t\tvar actualheader = [];\r\n\t\t\t\r\n\t\t\t\tfor(var i = 0; i < this.gridData[UcId].columnDataField.length; i++){\r\n\t\t\t\t\tvar dtF = this.gridData[UcId].columnDataField[i]\r\n\t\t\t\t\tfor(var j = 0 ; j < this.gridData[UcId].rowsMetadata.columns.length; j++){\r\n\t\t\t\t\t\tif (dtF == this.gridData[UcId].rowsMetadata.columns[j].getAttribute(\"dataField\"))\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tactualheader.push(this.gridData[UcId].rowsMetadata.columns[j].getAttribute(\"displayName\"));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\r\n\t\t\t\tthis.gridData[UcId].grid.createHeader(actualheader, this.gridData[UcId].columnDataField);\r\n\t\t\t\r\n\t\t\t\tif ((this.gridData[UcId].dataFieldOrder != \"\")){ //&& (!withOrderCustom)) {\r\n\t\t\t\t\tvar columnOrderNumber = 0;\r\n\t\t\t\t\tfor (var t = 0; t < this.gridData[UcId].grid.columns.length; t++) {\r\n\t\t\t\t\t\tif (this.gridData[UcId].dataFieldOrder == this.gridData[UcId].columnDataField[t]) { //this.gridData[UcId].grid.columns[t].getAttribute(\"dataField\")){\r\n\t\t\t\t\t\t\tcolumnOrderNumber = t;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.gridData[UcId].grid.applySortOrderType(columnOrderNumber, (this.gridData[UcId].orderType.toLowerCase() == \"ascending\") ? 2 : 3);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t//hide hidden columns\r\n\t\t\t\tfor(var i = 0; i < this.gridData[UcId].columnVisible.length; i++){\r\n\t\t\t\t\tif (!this.gridData[UcId].columnVisible[i]){\r\n\t\t\t\t\t\tvar dtF = this.gridData[UcId].originalColumnDataField[i]\r\n\t\t\t\t\t\tthis.gridData[UcId].grid.hideColumnHeader(this.gridData[UcId].columnDataField.indexOf(dtF));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t}\t\t\t\r\n\t\t\t//end redraw header\r\n\t\t\t\r\n\t\t\tthis.gridData[UcId].grid.removeAllRows();\r\n\t\t\tif (recalculateCantPages) {\r\n\t\t\t\tif (jQuery(\"#\" + this.gridData[UcId].controlName + \"_tablePagination \" + \"#tablePagination_totalPages\").length > 0) {\r\n\t\t\t\t\tOAT.replaceTextNode(jQuery(\"#\" + this.gridData[UcId].controlName + \"_tablePagination \" + \"#tablePagination_totalPages\")[0], \" \" + _mthis.ServerPageCount)\r\n\t\t\t\t\tif ((_mthis.ServerPageCount <= 1) /*&& (this.gridData[UcId].rowsPerPage == 10)*/) { //hide pagiantion\r\n\t\t\t\t\t\tjQuery(\"#\" + this.gridData[UcId].controlName + \"_tablePagination \").css({ display: \"none\" });\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tjQuery(\"#\" + this.gridData[UcId].controlName + \"_tablePagination \").css({ display: \"\" });\r\n\t\t\t\t\t\tif (_mthis.ServerPageCount == 1) {\r\n\t\t\t\t\t\t\tjQuery('#' + this.gridData[UcId].controlName + '_tablePagination_paginater').css('display', 'none');\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tjQuery('#' + this.gridData[UcId].controlName + '_tablePagination_paginater').css('display', '');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t//call navigational events\r\n\t\t\tif (OAT_JS.grid.gridData[UcId].actualPageNumber != pageNumber) {\r\n\t\t\t\tthis.gridData[UcId].QueryViewerCollectionItem.CurrentPage = pageNumber;//qv.collection[this.gridData[UcId].IdForQueryViewerCollection].CurrentPage = pageNumber;\r\n\t\t\t\tif (pageNumber == 1) {\r\n\t\t\t\t\tif (typeof (this.gridData[UcId].QueryViewerCollectionItem.OnFirstPage) == 'function') \r\n\t\t\t\t\t//qv.collection[this.gridData[UcId].IdForQueryViewerCollection].OnFirstPage()\r\n\t\t\t\t\tself.fireOnPageChangeTable(this.gridData[UcId].IdForQueryViewerCollection, \"OnFirstPage\")\r\n\t\t\t\t} else if (pageNumber == this.gridData[UcId].actualCantPages) {\r\n\t\t\t\t\tif (typeof (this.gridData[UcId].QueryViewerCollectionItem.OnLastPage) == 'function') \r\n\t\t\t\t\t//qv.collection[this.gridData[UcId].IdForQueryViewerCollection].OnLastPage()\r\n\t\t\t\t\tself.fireOnPageChangeTable(this.gridData[UcId].IdForQueryViewerCollection, \"OnLastPage\")\r\n\t\t\t\t} else if (pageNumber < OAT_JS.grid.gridData[UcId].actualPageNumber) {\r\n\t\t\t\t\tif (typeof (this.gridData[UcId].QueryViewerCollectionItem.OnPreviousPage) == 'function') //qv.collection[this.gridData[UcId].IdForQueryViewerCollection].OnPreviousPage()\r\n\t\t\t\t\tself.fireOnPageChangeTable(this.gridData[UcId].IdForQueryViewerCollection, \"OnPreviousPage\")\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (typeof (this.gridData[UcId].QueryViewerCollectionItem.OnNextPage) == 'function') //qv.collection[this.gridData[UcId].IdForQueryViewerCollection].OnNextPage()\r\n\t\t\t\t\tself.fireOnPageChangeTable(this.gridData[UcId].IdForQueryViewerCollection, \"OnNextPage\")\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t//call autorefresh\r\n\t\t\tif ((!fromExternalRefresh) && (this.gridData[UcId].QueryViewerCollectionItem.AutoRefreshGroup != \"\")) {\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tOAT_JS.grid.initValueRead(UcId, 0)\r\n\t\t\t\t\r\n\t\t\t\tvar wait = function(){\r\n\t\t\t\t\tif (!OAT_JS.grid.gridData[UcId].endValueRead) {\r\n\t\t\t\t\t\tsetTimeout( wait , 100)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvar meta = OAT.createXMLMetadata(OAT_JS.grid.gridData[UcId], null, true);\r\n\t\t\t\t\t\tvar spl = OAT_JS.grid.gridData[UcId].IdForQueryViewerCollection;\r\n\t\t\t\t\t\t//var listennings = qv.collection[spl];\r\n\t\t\t\t\t\t/*if ((listennings != \"\") && (listennings != null) && (listennings != undefined)) {\r\n\t\t\t\t\t\t\tqv.util.autorefresh.UpdateLayoutSameGroup(listennings, qv.pivot.GetRuntimeMetadata(meta, listennings.RealType), true);\r\n\t\t\t\t\t\t}*/\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tsetTimeout( function() {\r\n\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tvar paramobj = {  \"QueryviewerId\": spl, \"Metadata\": meta};\r\n\t\t\t\t\t\t\t\t\tvar evt = document.createEvent(\"Events\")\r\n\t\t\t\t\t\t\t\t\tevt.initEvent(\"RequestUpdateLayoutSameGroup\", true, true);\r\n\t\t\t\t\t\t\t\t\tevt.parameter = paramobj;\r\n\t\t\t\t\t\t\t\t\tdocument.dispatchEvent(evt);\r\n\t\t\t\t\r\n\t\t\t\t\t\t\t\t}, 50)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\twait();\r\n\t\t\t}\r\n\r\n\t\t\t//set new current page\r\n\t\t\tOAT_JS.grid.gridData[UcId].actualPageNumber = pageNumber\r\n\t\t\tcurrPageNumber[this.gridData[UcId].controlName] = pageNumber\r\n\t\t\tjQuery(\"#\" + this.gridData[UcId].controlName + \"_tablePagination \" + \"#tablePagination_currPage\").val(pageNumber)\r\n\t\t\t\r\n\t\t\tthis.gridData[UcId].rowsData = _mthis.data;\r\n\t\t\tfor (var i = 0; i < _mthis.data.length; i++) {\r\n\t\t\t\tOAT.CreateGridRow(_mthis.data[i], this.gridData[UcId])\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t//redraw selection\r\n\t\t\tOAT.RedrawSelectedNode(this.gridData[UcId].grid)\r\n\t\t},\r\n\t\tgetDifferentValues: function (UcId, columnNumber, iter) { //return the list of distint values of a column, and if it checked or not\r\n\t\t\tvar dataField = this.gridData[UcId].columnDataField[columnNumber];//this.gridData[UcId].grid.columns[columnNumber].getAttribute(\"dataField\")\r\n\t\t\tvar value = this.gridData[UcId].differentValues[dataField][iter]\r\n\t\t\tvar pos = this.gridData[UcId].originalColumnDataField.indexOf(this.gridData[UcId].columnDataField[columnNumber])\r\n\t\t\tvar pict_value = OAT.ApplyPictureValue(value.trimpivot(), this.gridData[UcId].rowsMetadata.columnsDataType[pos],\r\n\t\t\t\tthis.gridData[UcId].rowsMetadata.defaultPicture, this.gridData[UcId].rowsMetadata.forPivotCustomPicture[pos]).replace(/ /g, \"\\u00A0\");\r\n\r\n\t\t\tif ((this.gridData[UcId].blackLists[dataField].hasNull) && (value.trimpivot() == this.gridData[UcId].defaultNullText)) {\r\n\t\t\t\tvalue = \"#NuN#\" //tomo este valor como el null\r\n\t\t\t\treturn false;//{value: \"\", checked: true, pict_value: \"\"} \r\n\t\t\t}\r\n\t\t\tvar checked = true;\r\n\t\t\tif (this.gridData[UcId].blackLists[dataField].state != \"all\") {\r\n\t\t\t\tif (this.gridData[UcId].blackLists[dataField].visibles.indexOf(value) < 0) {\r\n\t\t\t\t\tchecked = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn { value: value, checked: checked, pict_value: pict_value };\r\n\t\t},\r\n\t\tgetCantDifferentValues: function (UcId, columnNumber) {\r\n\t\t\tvar dataField = this.gridData[UcId].columnDataField[columnNumber];//this.gridData[UcId].grid.columns[columnNumber].getAttribute(\"dataField\")\r\n\t\t\treturn this.gridData[UcId].differentValues[dataField].length\r\n\t\t},\r\n\t\tcleanCache: function (_mthis, UcId) {\r\n\t\t\tfor (var cP = 0; cP < this.gridData[UcId].gridCache.length; cP++) {\r\n\t\t\t\tthis.gridData[UcId].gridCache[cP] = { page: -1, pageData: \"\" };\r\n\t\t\t}\r\n\t\t\tthis.gridData[UcId].nextCachePos = 0;\r\n\t\t},\r\n\t\tpageInCache: function (UcId, pageNumber) {\r\n\t\t\tfor (var cP = 0; cP < this.gridData[UcId].gridCache.length; cP++) {\r\n\t\t\t\tif (this.gridData[UcId].gridCache[cP].page == pageNumber) {\r\n\t\t\t\t\treturn this.gridData[UcId].gridCache[cP].pageData;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t},\r\n\t\tupdateFilterInfo: function (UcId, DataFieldFilter, NewFilter) {\r\n\t\t\tif (NewFilter.op == \"all\") {\r\n\t\t\t\t//remove filter from filterInof\r\n\t\t\t\tvar pos = -1;\r\n\t\t\t\tfor (var p = 0; p < this.gridData[UcId].filterInfo.length; p++) {\r\n\t\t\t\t\tif (DataFieldFilter == this.gridData[UcId].filterInfo[p].DataField) { pos = p; break; }\r\n\t\t\t\t}\r\n\t\t\t\tif (pos > -1) this.gridData[UcId].filterInfo.splice(pos, 1)\r\n\t\t\t\tthis.gridData[UcId].blackLists[DataFieldFilter].state = \"all\"\r\n\t\t\t\tthis.gridData[UcId].blackLists[DataFieldFilter].visibles = []\r\n\t\t\t\tthis.gridData[UcId].blackLists[DataFieldFilter].hiddens = []\r\n\t\t\t\tthis.gridData[UcId].blackLists[DataFieldFilter].defaultAction = \"Include\"\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif (this.gridData[UcId].blackLists[DataFieldFilter].state == \"none\") {\r\n\t\t\t\tthis.gridData[UcId].blackLists[DataFieldFilter].visibles = []\r\n\t\t\t\tfor (var u = 0; u < this.gridData[UcId].differentValues[DataFieldFilter].length; u++) {\r\n\t\t\t\t\tif (this.gridData[UcId].blackLists[DataFieldFilter].hiddens.indexOf(this.gridData[UcId].differentValues[DataFieldFilter][u]) == -1) {\r\n\t\t\t\t\t\tthis.gridData[UcId].blackLists[DataFieldFilter].hiddens.push(this.gridData[UcId].differentValues[DataFieldFilter][u])\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else if (this.gridData[UcId].blackLists[DataFieldFilter].state == \"all\") {\r\n\t\t\t\tthis.gridData[UcId].blackLists[DataFieldFilter].hiddens = []\r\n\t\t\t\tfor (var u = 0; u < this.gridData[UcId].differentValues[DataFieldFilter].length; u++) {\r\n\t\t\t\t\tif (this.gridData[UcId].blackLists[DataFieldFilter].visibles.indexOf(this.gridData[UcId].differentValues[DataFieldFilter][u]) == -1) {\r\n\t\t\t\t\t\tthis.gridData[UcId].blackLists[DataFieldFilter].visibles.push(this.gridData[UcId].differentValues[DataFieldFilter][u])\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar notNullValue = [];\r\n\t\t\tif (NewFilter.op == \"none\") {\r\n\t\t\t\tnotNullValue = [];\r\n\t\t\t\tthis.gridData[UcId].blackLists[DataFieldFilter].state = \"none\"\r\n\t\t\t\tthis.gridData[UcId].blackLists[DataFieldFilter].visibles = []\r\n\t\t\t\tthis.gridData[UcId].blackLists[DataFieldFilter].hiddens = []\r\n\t\t\t\tthis.gridData[UcId].blackLists[DataFieldFilter].defaultAction = \"Exclude\"\r\n\t\t\t} else {\r\n\r\n\t\t\t\tif (NewFilter.op == \"push\") {\r\n\t\t\t\t\tthis.gridData[UcId].blackLists[DataFieldFilter].state = \"\"\r\n\t\t\t\t\tvar pos = this.gridData[UcId].blackLists[DataFieldFilter].visibles.indexOf(NewFilter.values)\r\n\t\t\t\t\tif (pos > -1) this.gridData[UcId].blackLists[DataFieldFilter].visibles.splice(pos, 1);\r\n\t\t\t\t\tif (this.gridData[UcId].blackLists[DataFieldFilter].hiddens.indexOf(NewFilter.values) == -1)\r\n\t\t\t\t\t\tthis.gridData[UcId].blackLists[DataFieldFilter].hiddens.push(NewFilter.values)\r\n\t\t\t\t} else if (NewFilter.op == \"pop\") {\r\n\t\t\t\t\tthis.gridData[UcId].blackLists[DataFieldFilter].state = \"\"\r\n\t\t\t\t\tif (this.gridData[UcId].blackLists[DataFieldFilter].visibles.indexOf(NewFilter.values) == -1)\r\n\t\t\t\t\t\tthis.gridData[UcId].blackLists[DataFieldFilter].visibles.push(NewFilter.values)\r\n\t\t\t\t\tvar pos = this.gridData[UcId].blackLists[DataFieldFilter].hiddens.indexOf(NewFilter.values)\r\n\t\t\t\t\tif (pos > -1) this.gridData[UcId].blackLists[DataFieldFilter].hiddens.splice(pos, 1);\r\n\t\t\t\t} else if (NewFilter.op == \"reverse\") {\r\n\t\t\t\t\tif (this.gridData[UcId].blackLists[DataFieldFilter].defaultAction == \"Include\") {\r\n\t\t\t\t\t\tthis.gridData[UcId].blackLists[DataFieldFilter].defaultAction = \"Exclude\"\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.gridData[UcId].blackLists[DataFieldFilter].defaultAction = \"Include\"\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (this.gridData[UcId].blackLists[DataFieldFilter].state == \"none\") {//si el estado anterior es none pasa a all\r\n\t\t\t\t\t\tvar pos = -1;\r\n\t\t\t\t\t\tfor (var p = 0; p < this.gridData[UcId].filterInfo.length; p++) {\r\n\t\t\t\t\t\t\tif (DataFieldFilter == this.gridData[UcId].filterInfo[p].DataField) { pos = p; break; }\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (pos > -1) this.gridData[UcId].filterInfo.splice(pos, 1)\r\n\t\t\t\t\t\tthis.gridData[UcId].blackLists[DataFieldFilter].state = \"all\"\r\n\t\t\t\t\t\tthis.gridData[UcId].blackLists[DataFieldFilter].visibles = []\r\n\t\t\t\t\t\tthis.gridData[UcId].blackLists[DataFieldFilter].hiddens = []\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t} else if (this.gridData[UcId].blackLists[DataFieldFilter].state == \"all\") {//si el estado anterior es all pasa a none\r\n\t\t\t\t\t\tnotNullValue = [];\r\n\t\t\t\t\t\tthis.gridData[UcId].blackLists[DataFieldFilter].state = \"none\"\r\n\t\t\t\t\t\tthis.gridData[UcId].blackLists[DataFieldFilter].visibles = []\r\n\t\t\t\t\t\tthis.gridData[UcId].blackLists[DataFieldFilter].hiddens = []\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tvar tempArrayVisibles = []; for (var tit = 0; tit < this.gridData[UcId].blackLists[DataFieldFilter].visibles.length; tit++) { tempArrayVisibles.push(this.gridData[UcId].blackLists[DataFieldFilter].visibles[tit]) }\r\n\t\t\t\t\t\tvar tempArrayHiddens = []; for (var tit = 0; tit < this.gridData[UcId].blackLists[DataFieldFilter].hiddens.length; tit++) { tempArrayHiddens.push(this.gridData[UcId].blackLists[DataFieldFilter].hiddens[tit]) }\r\n\r\n\t\t\t\t\t\tthis.gridData[UcId].blackLists[DataFieldFilter].visibles = []\r\n\t\t\t\t\t\tthis.gridData[UcId].blackLists[DataFieldFilter].hiddens = []\r\n\r\n\t\t\t\t\t\tfor (var u = 0; u < this.gridData[UcId].differentValues[DataFieldFilter].length; u++) {\r\n\t\t\t\t\t\t\tvar val = this.gridData[UcId].differentValues[DataFieldFilter][u];\r\n\t\t\t\t\t\t\tif (tempArrayVisibles.indexOf(val) == -1) {\r\n\t\t\t\t\t\t\t\tthis.gridData[UcId].blackLists[DataFieldFilter].visibles.push(val)\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.gridData[UcId].blackLists[DataFieldFilter].hiddens.push(val)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tfor (var u = 0; u < tempArrayHiddens.length; u++) {\r\n\t\t\t\t\t\t\tif (this.gridData[UcId].blackLists[DataFieldFilter].visibles.indexOf(tempArrayHiddens[u]) == -1) {\r\n\t\t\t\t\t\t\t\tthis.gridData[UcId].blackLists[DataFieldFilter].visibles.push(tempArrayHiddens[u])\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tfor (var u = 0; u < tempArrayVisibles.length; u++) {\r\n\t\t\t\t\t\t\tif (this.gridData[UcId].blackLists[DataFieldFilter].hiddens.indexOf(tempArrayVisibles[u]) == -1) {\r\n\t\t\t\t\t\t\t\tthis.gridData[UcId].blackLists[DataFieldFilter].hiddens.push(tempArrayVisibles[u])\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar filterExist = false; var nullIncluded = true;\r\n\t\t\tvar included = [];\r\n\t\t\tfor (var t = 0; t < this.gridData[UcId].blackLists[DataFieldFilter].visibles.length; t++) {\r\n\t\t\t\tif (this.gridData[UcId].blackLists[DataFieldFilter].visibles[t] != \"#NuN#\") {\r\n\t\t\t\t\tincluded.push(this.gridData[UcId].blackLists[DataFieldFilter].visibles[t])\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar excluded = [];\r\n\t\t\tif (this.gridData[UcId].blackLists[DataFieldFilter].state != \"none\") {\r\n\t\t\t\tfor (var t = 0; t < this.gridData[UcId].differentValues[DataFieldFilter].length; t++) {\r\n\t\t\t\t\tvar val = this.gridData[UcId].differentValues[DataFieldFilter][t]\r\n\t\t\t\t\tif ((val != \"#NuN#\") && (included.indexOf(val) == -1)) {\r\n\t\t\t\t\t\texcluded.push(val)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tfor (var t = 0; t < this.gridData[UcId].blackLists[DataFieldFilter].hiddens.length; t++) {\r\n\t\t\t\t\tif ((this.gridData[UcId].blackLists[DataFieldFilter].hiddens[t] != \"#NuN#\")\r\n\t\t\t\t\t\t&& (excluded.indexOf(this.gridData[UcId].blackLists[DataFieldFilter].hiddens[t]) == -1)) {\r\n\t\t\t\t\t\texcluded.push(this.gridData[UcId].blackLists[DataFieldFilter].hiddens[t])\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif ((included.length == 0) && ((this.gridData[UcId].blackLists[DataFieldFilter].defaultAction == \"Exclude\"))) {\r\n\t\t\t\t\texcluded = [];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (NewFilter.op == \"none\") {\r\n\t\t\t\tnullIncluded = false;\r\n\t\t\t\tincluded = []; excluded = [];\r\n\t\t\t} else {\r\n\t\t\t\tif ((this.gridData[UcId].differentValues[DataFieldFilter].indexOf(\"#NuN#\") > -1) ||\r\n\t\t\t\t\t(excluded.indexOf(this.gridData[UcId].blackLists[DataFieldFilter].hiddens[t]) != -1)) {\r\n\t\t\t\t\tif (this.gridData[UcId].blackLists[DataFieldFilter].visibles.indexOf(\"#NuN#\") == -1) {\r\n\t\t\t\t\t\tnullIncluded = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (this.gridData[UcId].blackLists[DataFieldFilter].defaultAction == \"Exclude\") {\r\n\t\t\t\t\t\tnullIncluded = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\r\n\t\t\tif ((this.gridData[UcId].blackLists[DataFieldFilter].hasNull) && (!(NewFilter.op == \"none\"))) {\r\n\t\t\t\t//asociated psuedo-Null\r\n\t\t\t\tvar reallyPseudoNull = this.gridData[UcId].defaultNullText\r\n\t\t\t\tvar finded = false\r\n\t\t\t\tvar data_length = 0;\r\n\t\t\t\tfor (var u = 0; u < this.gridData[UcId].differentValues[DataFieldFilter].length; u++) {\r\n\t\t\t\t\tdata_length = this.gridData[UcId].differentValues[DataFieldFilter][u].length;\r\n\t\t\t\t}\r\n\t\t\t\tfor (var u = 0; u < this.gridData[UcId].differentValues[DataFieldFilter].length; u++) {\r\n\t\t\t\t\tif (this.gridData[UcId].differentValues[DataFieldFilter][u].trimpivot() == this.gridData[UcId].defaultNullText) {\r\n\t\t\t\t\t\treallyPseudoNull = this.gridData[UcId].differentValues[DataFieldFilter][u];\r\n\t\t\t\t\t\tfinded = true;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (!finded) {\r\n\t\t\t\t\tfor (var t = 0; t < data_length - this.gridData[UcId].defaultNullText.length; t++) {\r\n\t\t\t\t\t\treallyPseudoNull = reallyPseudoNull + \" \";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!nullIncluded) {\r\n\t\t\t\t\tif (excluded.indexOf(reallyPseudoNull) == -1) {\r\n\t\t\t\t\t\texcluded.push(reallyPseudoNull)\r\n\t\t\t\t\t\tif (this.gridData[UcId].blackLists[DataFieldFilter].hiddens.indexOf(reallyPseudoNull) == -1) {\r\n\t\t\t\t\t\t\tthis.gridData[UcId].blackLists[DataFieldFilter].hiddens.push(reallyPseudoNull)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (included.indexOf(reallyPseudoNull) != -1) {\r\n\t\t\t\t\t\tincluded.splice(included.indexOf(reallyPseudoNull), 1)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (this.gridData[UcId].blackLists[DataFieldFilter].visibles.indexOf(reallyPseudoNull) != -1) {\r\n\t\t\t\t\t\tthis.gridData[UcId].blackLists[DataFieldFilter].visibles.splice(this.gridData[UcId].blackLists[DataFieldFilter].visibles.indexOf(reallyPseudoNull), 1)\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (included.indexOf(reallyPseudoNull) == -1) {\r\n\t\t\t\t\t\tif (excluded.indexOf(reallyPseudoNull) != -1) {\r\n\t\t\t\t\t\t\texcluded.splice(excluded.indexOf(reallyPseudoNull), 1)\r\n\t\t\t\t\t\t\tincluded.push(reallyPseudoNull)\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (this.gridData[UcId].blackLists[DataFieldFilter].defaultAction == \"Exclude\") {\r\n\t\t\t\t\t\t\t\tincluded.push(reallyPseudoNull)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (this.gridData[UcId].blackLists[DataFieldFilter].hiddens.indexOf(reallyPseudoNull) != -1) {\r\n\t\t\t\t\t\t\tthis.gridData[UcId].blackLists[DataFieldFilter].hiddens.splice(this.gridData[UcId].blackLists[DataFieldFilter].hiddens.indexOf(reallyPseudoNull), 1)\r\n\t\t\t\t\t\t\tif (this.gridData[UcId].blackLists[DataFieldFilter].visibles.indexOf(reallyPseudoNull) == -1) {\r\n\t\t\t\t\t\t\t\tthis.gridData[UcId].blackLists[DataFieldFilter].visibles.push(reallyPseudoNull)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar allValuesLoaded = false;\r\n\t\t\tif (this.gridData[UcId].differentValuesPaginationInfo[DataFieldFilter] != null) {\r\n\t\t\t\tallValuesLoaded = (this.gridData[UcId].differentValuesPaginationInfo[DataFieldFilter].previousPage == this.gridData[UcId].differentValuesPaginationInfo[DataFieldFilter].totalPages)\r\n\t\t\t}\r\n\t\t\tvar noFilterNeeded = (((nullIncluded) || (!this.gridData[UcId].blackLists[DataFieldFilter].hasNull))\r\n\t\t\t\t&& (excluded.length == 0) && (NewFilter.op != \"none\") && (NewFilter.op != \"push\")\r\n\t\t\t\t&& ((this.gridData[UcId].blackLists[DataFieldFilter].defaultAction == \"Include\") || (allValuesLoaded))\r\n\t\t\t\t&& (!(NewFilter.op == \"reverse\"))\r\n\t\t\t);\r\n\r\n\t\t\tvar pos = 0;\r\n\t\t\tfor (var t = 0; t < this.gridData[UcId].filterInfo.length; t++) {\r\n\t\t\t\tif (this.gridData[UcId].filterInfo[t].DataField == DataFieldFilter) {\r\n\t\t\t\t\tfilterExist = true;\r\n\t\t\t\t\tthis.gridData[UcId].filterInfo[t].NullIncluded = nullIncluded\r\n\t\t\t\t\tthis.gridData[UcId].filterInfo[t].NotNullValues.Included = included\r\n\t\t\t\t\tthis.gridData[UcId].filterInfo[t].NotNullValues.Excluded = excluded\r\n\t\t\t\t\tthis.gridData[UcId].filterInfo[t].NotNullValues.DefaultAction = this.gridData[UcId].blackLists[DataFieldFilter].defaultAction\r\n\t\t\t\t\tpos = t;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (noFilterNeeded) {\r\n\t\t\t\tthis.gridData[UcId].filterInfo.splice(pos, 1)\r\n\t\t\t}\r\n\t\t\tif ((!filterExist) && (!noFilterNeeded)) {\r\n\t\t\t\tvar notNullValues = { Included: included, Excluded: excluded, DefaultAction: this.gridData[UcId].blackLists[DataFieldFilter].defaultAction }\r\n\t\t\t\tfilter = { DataField: DataFieldFilter, NullIncluded: nullIncluded, NotNullValues: notNullValues }\r\n\t\t\t\tthis.gridData[UcId].filterInfo.push(filter);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\treadScrollValue: function (UcId, columnNumber) {\r\n\t\t\tvar dataField = this.gridData[UcId].columnDataField[columnNumber];\r\n\t\t\tvar posColumnNumber = this.gridData[UcId].originalColumnDataField.indexOf(this.gridData[UcId].columnDataField[columnNumber])\r\n\t\t\tif (!this.gridData[UcId].differentValuesPaginationInfo[dataField].blocked) {\r\n\t\t\t\tthis.gridData[UcId].differentValuesPaginationInfo[dataField].blocked = true;\r\n\t\t\t\tif (!this.gridData[UcId].differentValuesPaginationInfo[dataField].filtered) {\r\n\t\t\t\t\tvar ValuePageInfo = this.gridData[UcId].differentValuesPaginationInfo[dataField]\r\n\t\t\t\t\tvar page = ValuePageInfo.previousPage + 1;\r\n\t\t\t\t\tthis.gridData[UcId].lastRequestValue = dataField;\r\n\t\t\t\t\t\r\n\t\t\t\t\tOAT_JS.grid.lastCallToQueryViewer = \"readScrollValue\"\r\n\t\t\t\t\tOAT_JS.grid.lastCallData = { \"self\": this, \"UcId\": UcId, \"columnNumber\": columnNumber, \"filterValue\": \"\", \"dataField\": dataField }\r\n\t\t\t\t\r\n\t\t\t\t\tself.requestAttributeForTable(UcId, dataField, page, \"\", 10)\r\n\t\t\t\t\t/*qv.collection[this.gridData[UcId].IdForQueryViewerCollection].getAttributeValues((function (resJSON) {\r\n\t\t\t\t\t\tvar res = JSON.parse(resJSON);\r\n\t\t\t\t\t\tOAT_JS.grid.appendNewValueData(UcId, res)\r\n\t\t\t\t\t}).closure(this), [dataField, page, 10, \"\"]);*/\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar ValuePageInfo = this.gridData[UcId].filteredValuesPaginationInfo[dataField]\r\n\t\t\t\t\tvar page = ValuePageInfo.previousPage + 1;\r\n\t\t\t\t\tthis.gridData[UcId].lastRequestValue = dataField;\r\n\t\t\t\t\tvar filterText = ValuePageInfo.filteredText\r\n\t\t\t\t\t\r\n\t\t\t\t\tOAT_JS.grid.lastCallToQueryViewer = \"readScrollValueFilter\"\r\n\t\t\t\t\tOAT_JS.grid.lastCallData = { \"self\": this, \"UcId\": UcId, \"columnNumber\": columnNumber, \"posColumnNumber\": posColumnNumber, \"filterValue\": filterText, \"dataField\": dataField, \"filterText\": filterText }\r\n\t\t\t\t\r\n\t\t\t\t\tself.requestAttributeForTable(UcId, dataField, page, filterText, 10)\r\n\t\t\t\t\t/*qv.collection[this.gridData[UcId].IdForQueryViewerCollection].getAttributeValues((function (resJSON) {\r\n\t\t\t\t\t\tvar res = JSON.parse(resJSON);\r\n\t\t\t\t\t\tOAT_JS.grid.appendNewFilteredValueData(UcId, res, posColumnNumber, filterText)\r\n\t\t\t\t\t}).closure(this), [dataField, page, 10, ValuePageInfo.filteredText]);*/\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar j = 0;\r\n\t\t},\r\n\t\tappendNewValueData: function (UcId, data, whenFilter) {\r\n\t\t\tvar dataField = this.gridData[UcId].lastRequestValue\r\n\t\t\tvar ValuePageInfo = this.gridData[UcId].differentValuesPaginationInfo[dataField]\r\n\t\t\tif ((data.PageNumber > ValuePageInfo.previousPage) || (whenFilter)) {\r\n\t\t\t\tthis.gridData[UcId].differentValuesPaginationInfo[dataField].previousPage = data.PageNumber\r\n\t\t\t\tthis.gridData[UcId].differentValuesPaginationInfo[dataField].totalPages = data.PagesCount\r\n\t\t\t\tvar newValues = [];\r\n\r\n\t\t\t\tif (data.Null) {\r\n\t\t\t\t\tif (this.gridData[UcId].differentValues[dataField].indexOf(\"#NuN#\") == -1) {\r\n\t\t\t\t\t\tthis.gridData[UcId].differentValues[dataField].push(\"#NuN#\")\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//add to differentValues\r\n\t\t\t\tfor (var i = 0; i < data.NotNullValues.length; i++) {\r\n\t\t\t\t\tvar val = data.NotNullValues[i];\r\n\t\t\t\t\tif (this.gridData[UcId].differentValues[dataField].indexOf(val) == -1) {\r\n\t\t\t\t\t\tthis.gridData[UcId].differentValues[dataField].push(val)\r\n\t\t\t\t\t\tnewValues.push(val)\r\n\t\t\t\t\t}//lo mismo\r\n\t\t\t\t\tif (this.gridData[UcId].blackLists[dataField].defaultAction == \"Include\") {\r\n\t\t\t\t\t\tif ((this.gridData[UcId].blackLists[dataField].visibles.indexOf(val) == -1)\r\n\t\t\t\t\t\t\t&& (this.gridData[UcId].blackLists[dataField].hiddens.indexOf(val) == -1)) {\r\n\t\t\t\t\t\t\tthis.gridData[UcId].blackLists[dataField].visibles.push(val)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif ((this.gridData[UcId].blackLists[dataField].visibles.indexOf(val) == -1)\r\n\t\t\t\t\t\t\t&& (this.gridData[UcId].blackLists[dataField].hiddens.indexOf(val) == -1)) {\r\n\t\t\t\t\t\t\tthis.gridData[UcId].blackLists[dataField].hiddens.push(val)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar columnNumber = this.gridData[UcId].columnDataField.indexOf(dataField);\r\n\t\t\t\tvar originalColumn = this.gridData[UcId].originalColumnDataField.indexOf(dataField)\r\n\r\n\t\t\t\tthis.gridData[UcId].grid.loadDifferentValues(columnNumber, this.gridData[UcId].differentValues[dataField])\r\n\r\n\t\t\t\tfor (var nI = 0; nI < newValues.length; nI++) {\r\n\t\t\t\t\tvar checked = true;\r\n\t\t\t\t\tif (this.gridData[UcId].blackLists[dataField].state != \"all\") {\r\n\t\t\t\t\t\tif (this.gridData[UcId].blackLists[dataField].visibles.indexOf(newValues[nI]) < 0) {\r\n\t\t\t\t\t\t\tchecked = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (!((this.gridData[UcId].blackLists[dataField].hasNull) && (newValues[nI].trimpivot() == this.gridData[UcId].defaultNullText))) {\r\n\t\t\t\t\t\tvar pict_value = OAT.ApplyPictureValue(newValues[nI].trimpivot(), this.gridData[UcId].rowsMetadata.columnsDataType[originalColumn],\r\n\t\t\t\t\t\t\tthis.gridData[UcId].rowsMetadata.defaultPicture, this.gridData[UcId].rowsMetadata.forPivotCustomPicture[originalColumn]).replace(/ /g, \"\\u00A0\");\r\n\t\t\t\t\t\tOAT.appendNewPairToPopUp(this.gridData[UcId], newValues[nI], columnNumber, checked, pict_value, dataField)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (this.gridData[UcId].differentValuesPaginationInfo[dataField].previousPage < data.PagesCount)\r\n\t\t\t\tthis.gridData[UcId].differentValuesPaginationInfo[dataField].blocked = false;\r\n\t\t},\r\n\t\tresetScrollValue: function (UcId, dataField, columnNumber) { //after filtered when input serach is clean, restor values without filter\r\n\t\t\tthis.gridData[UcId].differentValuesPaginationInfo[dataField].filtered = false;\r\n\t\t\tthis.gridData[UcId].differentValuesPaginationInfo[dataField].blocked = true;\r\n\r\n\t\t\tvar columnNumber = this.gridData[UcId].columnDataField.indexOf(dataField);\r\n\t\t\tvar originalColumn = this.gridData[UcId].originalColumnDataField.indexOf(dataField)\r\n\r\n\t\t\tOAT.removeAllPairsFromPopUp(this.gridData[UcId], columnNumber, OAT_JS.grid.cantPages(UcId, dataField) > 1);\r\n\r\n\t\t\tfor (var u = 0; u < this.gridData[UcId].differentValues[dataField].length; u++) {\r\n\t\t\t\tvar checked = true;\r\n\t\t\t\tvar value = this.gridData[UcId].differentValues[dataField][u];\r\n\t\t\t\tif (this.gridData[UcId].blackLists[dataField].state != \"all\") {\r\n\t\t\t\t\tif (this.gridData[UcId].blackLists[dataField].visibles.indexOf(value) < 0) {\r\n\t\t\t\t\t\tchecked = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tvar pict_value = OAT.ApplyPictureValue(value.trimpivot(), this.gridData[UcId].rowsMetadata.columnsDataType[originalColumn],\r\n\t\t\t\t\tthis.gridData[UcId].rowsMetadata.defaultPicture, this.gridData[UcId].rowsMetadata.forPivotCustomPicture[originalColumn]).replace(/ /g, \"\\u00A0\");\r\n\r\n\t\t\t\tif (!((this.gridData[UcId].blackLists[dataField].hasNull) && (value.trimpivot() == this.gridData[UcId].defaultNullText))) {\r\n\t\t\t\t\tOAT.appendNewPairToPopUp(this.gridData[UcId], value, columnNumber, checked, pict_value, dataField)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (this.gridData[UcId].differentValuesPaginationInfo[dataField].previousPage < OAT_JS.grid.cantPages(UcId, dataField))\r\n\t\t\t\tthis.gridData[UcId].differentValuesPaginationInfo[dataField].blocked = false;\r\n\t\t},\r\n\t\tresetAllScrollValue: function (UcId) { //when closing the filter popup\r\n\t\t\tfor (var id = 0; id < this.gridData[UcId].grid.columns.length; id++) {\r\n\t\t\t\tvar field = this.gridData[UcId].grid.columns[id].getAttribute(\"dataField\");\r\n\t\t\t\tthis.gridData[UcId].differentValuesPaginationInfo[field].filtered = false;\r\n\t\t\t\tthis.gridData[UcId].differentValuesPaginationInfo[field].blocked = true;\r\n\t\t\t\tif (this.gridData[UcId].differentValuesPaginationInfo[field].previousPage < this.gridData[UcId].differentValuesPaginationInfo[field].totalPages)\r\n\t\t\t\t\tthis.gridData[UcId].differentValuesPaginationInfo[field].blocked = false;\r\n\t\t\t}\r\n\t\t},\r\n\t\tappendNewFilteredValueData: function (UcId, data, columnNumber, filterValue) { //add pairs when filtering by filter input\r\n\t\t\tvar dataField = this.gridData[UcId].lastRequestValue\r\n\t\t\tvar columnNumber = this.gridData[UcId].columnDataField.indexOf(dataField);\r\n\t\t\tvar originalColumn = this.gridData[UcId].originalColumnDataField.indexOf(dataField)\r\n\r\n\t\t\tvar ValuePageInfo = this.gridData[UcId].filteredValuesPaginationInfo[dataField]\r\n\t\t\tif (((filterValue) || (filterValue == \"\")) && (ValuePageInfo.filteredText != filterValue)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (data.PageNumber > ValuePageInfo.previousPage) {\r\n\t\t\t\tthis.gridData[UcId].filteredValuesPaginationInfo[dataField].previousPage = data.PageNumber\r\n\t\t\t\tthis.gridData[UcId].filteredValuesPaginationInfo[dataField].totalPages = data.PagesCount\r\n\r\n\t\t\t\tif (data.Null) {\r\n\t\t\t\t\tif (this.gridData[UcId].differentValues[dataField].indexOf(\"#NuN#\") == -1) {\r\n\t\t\t\t\t\tthis.gridData[UcId].differentValues[dataField].push(\"#NuN#\")\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor (var i = 0; i < data.NotNullValues.length; i++) {\r\n\t\t\t\t\tvar alreadyInValues = (this.gridData[UcId].differentValues[dataField].indexOf(data.NotNullValues[i]) != -1)\r\n\t\t\t\t\t//append to different values\r\n\t\t\t\t\tif (this.gridData[UcId].differentValues[dataField].indexOf(data.NotNullValues[i]) == -1) {\r\n\t\t\t\t\t\tthis.gridData[UcId].differentValues[dataField].push(data.NotNullValues[i])\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ((this.gridData[UcId].blackLists[dataField].defaultAction == \"Include\") && (!alreadyInValues)) {\r\n\t\t\t\t\t\tif ((this.gridData[UcId].blackLists[dataField].visibles.indexOf(data.NotNullValues[i]) == -1)\r\n\t\t\t\t\t\t\t&& (this.gridData[UcId].blackLists[dataField].hiddens.indexOf(data.NotNullValues[i]) == -1)) {\r\n\t\t\t\t\t\t\tthis.gridData[UcId].blackLists[dataField].visibles.push(data.NotNullValues[i])\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif ((this.gridData[UcId].blackLists[dataField].visibles.indexOf(data.NotNullValues[i]) == -1)\r\n\t\t\t\t\t\t\t&& (this.gridData[UcId].blackLists[dataField].hiddens.indexOf(data.NotNullValues[i]) == -1)) {\r\n\t\t\t\t\t\t\tthis.gridData[UcId].blackLists[dataField].hiddens.push(data.NotNullValues[i])\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar checked = true;\r\n\t\t\t\t\tif (this.gridData[UcId].blackLists[dataField].state != \"all\") {\r\n\t\t\t\t\t\tif (this.gridData[UcId].blackLists[dataField].visibles.indexOf(data.NotNullValues[i]) < 0) {\r\n\t\t\t\t\t\t\tchecked = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar pict_value = OAT.ApplyPictureValue(data.NotNullValues[i].trimpivot(), this.gridData[UcId].rowsMetadata.columnsDataType[originalColumn],\r\n\t\t\t\t\t\tthis.gridData[UcId].rowsMetadata.defaultPicture, this.gridData[UcId].rowsMetadata.forPivotCustomPicture[originalColumn]).replace(/ /g, \"\\u00A0\");\r\n\t\t\t\t\tif (!((this.gridData[UcId].blackLists[dataField].hasNull) && (data.NotNullValues[i].trimpivot() == this.gridData[UcId].defaultNullText))) {\r\n\t\t\t\t\t\tOAT.appendNewPairToPopUp(this.gridData[UcId], data.NotNullValues[i], columnNumber, checked, pict_value, dataField)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (this.gridData[UcId].filteredValuesPaginationInfo[dataField].previousPage < data.PagesCount)\r\n\t\t\t\t\tthis.gridData[UcId].differentValuesPaginationInfo[dataField].blocked = false;\r\n\t\t\t}\r\n\t\t},\r\n\t\tinitValueRead: function (UcId, columnNumber, requestDataField) {\r\n\t\t\tif (columnNumber >= this.gridData[UcId].grid.columns.length) {\r\n\t\t\t\tthis.gridData[UcId].endValueRead = true;\r\n\t\t\t\treturn;\r\n\t\t\t} else {\r\n\t\t\t  if (this.gridData[UcId].grid.columns[columnNumber].getAttribute(\"visible\") != \"Never\"){\r\n\t\t\t  \tif (requestDataField == undefined){\r\n\t\t\t\t\tthis.gridData[UcId].grid.lastRequestValue = this.gridData[UcId].grid.columns[columnNumber].getAttribute(\"dataField\")\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.gridData[UcId].grid.lastRequestValue = requestDataField\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (this.gridData[UcId].differentValuesPaginationInfo[this.gridData[UcId].grid.lastRequestValue].previousPage > 0){\r\n\t\t\t\t\tif (requestDataField == undefined){\r\n\t\t\t\t\t\tcolumnNumber++;\r\n\t\t\t\t\t\tOAT_JS.grid.initValueRead(UcId, columnNumber)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tvar cantItems = 10;\r\n\t\t\t\tif ((this.gridData[UcId].QueryViewerCollectionItem.AutoRefreshGroup != \"\")) {\r\n\t\t\t\t\tcantItems = 0;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tOAT_JS.grid.lastCallToQueryViewer = \"initValueRead\"\r\n\t\t\t\tOAT_JS.grid.lastCallData = { \"self\": this, \"UcId\": UcId, \"columnNumber\": columnNumber, \"filterValue\": \"\", \"dataField\": requestDataField }\r\n\t\t\t\t\r\n\t\t\t\tself.requestAttributeForTable(UcId, this.gridData[UcId].grid.lastRequestValue, 1, \"\", cantItems)\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t/*qv.collection[this.gridData[UcId].IdForQueryViewerCollection].getAttributeValues((function (resJSON) {\r\n\t\t\t\t\tvar data = JSON.parse(resJSON);\r\n\t\t\t\t\t//load data\r\n\t\t\t\t\tdataField = this.gridData[UcId].grid.lastRequestValue\r\n\t\t\t\t\tthis.gridData[UcId].differentValuesPaginationInfo[dataField].previousPage = data.PageNumber\r\n\t\t\t\t\tthis.gridData[UcId].differentValuesPaginationInfo[dataField].totalPages = data.PagesCount\r\n\r\n\t\t\t\t\t//end load data\r\n\t\t\t\t\tvar columnNumber = 0;\r\n\t\t\t\t\tfor (var t = 0; t < this.gridData[UcId].grid.columns.length; t++) {\r\n\t\t\t\t\t\tif (this.gridData[UcId].grid.lastRequestValue == this.gridData[UcId].grid.columns[t].getAttribute(\"dataField\")) {\r\n\t\t\t\t\t\t\tcolumnNumber = t;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\t//null value?\r\n\t\t\t\t\tif (data.Null) {\r\n\t\t\t\t\t\tthis.gridData[UcId].blackLists[dataField].hasNull = true;\r\n\t\t\t\t\t\tif (this.gridData[UcId].differentValues[dataField].indexOf(\"#NuN#\") == -1) {\r\n\t\t\t\t\t\t\tthis.gridData[UcId].differentValues[dataField].push(\"#NuN#\")\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar nullIncluded = true;\r\n\t\t\t\t\t\tfor (var i = 0; i < this.gridData[UcId].filterInfo.length; i++) {\r\n\t\t\t\t\t\t\tif (this.gridData[UcId].filterInfo[i].DataField == dataField) {\r\n\t\t\t\t\t\t\t\tif (!this.gridData[UcId].filterInfo[i].NullIncluded) {\r\n\t\t\t\t\t\t\t\t\tnullIncluded = false;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif ((nullIncluded) && (this.gridData[UcId].blackLists[dataField].visibles.indexOf(\"#NuN#\") == -1)) {\r\n\t\t\t\t\t\t\tthis.gridData[UcId].blackLists[dataField].visibles.push(\"#NuN#\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.gridData[UcId].blackLists[dataField].hasNull = false;\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\tfor (var i = 0; i < data.NotNullValues.length; i++) {\r\n\t\t\t\t\t\tif (this.gridData[UcId].differentValues[dataField].indexOf(data.NotNullValues[i]) == -1) {\r\n\t\t\t\t\t\t\tthis.gridData[UcId].differentValues[dataField].push(data.NotNullValues[i])\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif ((this.gridData[UcId].blackLists[dataField].state == \"all\")\r\n\t\t\t\t\t\t\t&& (this.gridData[UcId].blackLists[dataField].visibles.indexOf(data.NotNullValues[i]) == -1)) {\r\n\t\t\t\t\t\t\tthis.gridData[UcId].blackLists[dataField].visibles.push(data.NotNullValues[i])\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif ((this.gridData[UcId].blackLists[dataField].state == \"none\")\r\n\t\t\t\t\t\t\t&& (this.gridData[UcId].blackLists[dataField].hiddens.indexOf(data.NotNullValues[i]) == -1)) {\r\n\t\t\t\t\t\t\tthis.gridData[UcId].blackLists[dataField].hiddens.push(data.NotNullValues[i])\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif ((this.gridData[UcId].blackLists[dataField].defaultAction == \"Exclude\")\r\n\t\t\t\t\t\t\t&& (this.gridData[UcId].blackLists[dataField].state == \"\") && (data.NotNullValues[i].trimpivot() != \"\")\r\n\t\t\t\t\t\t\t&& (this.gridData[UcId].blackLists[dataField].visibles.length > 0)) { //correct blanck spaces when initial user filter\r\n\t\t\t\t\t\t\tfor (var j = 0; j < this.gridData[UcId].blackLists[dataField].visibles.length; j++) {\r\n\t\t\t\t\t\t\t\tif (this.gridData[UcId].blackLists[dataField].visibles[j] == data.NotNullValues[i].trimpivot()) {\r\n\t\t\t\t\t\t\t\t\tthis.gridData[UcId].blackLists[dataField].visibles[j] = data.NotNullValues[i]\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\r\n\r\n\t\t\t\t\tthis.gridData[UcId].grid.loadDifferentValues(columnNumber, this.gridData[UcId].differentValues[dataField]);\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (requestDataField == undefined){\r\n\t\t\t\t\t\tcolumnNumber++;\r\n\t\t\t\t\t\tOAT_JS.grid.initValueRead(UcId, columnNumber)\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}).closure(this), [this.gridData[UcId].grid.lastRequestValue, 1, cantItems, \"\"]);*/\r\n\t\t\t  } else {\r\n\t\t\t  \t\tcolumnNumber++;\r\n\t\t\t\t\tOAT_JS.grid.initValueRead(UcId, columnNumber, requestDataField)\r\n\t\t\t  }\r\n\t\t\t}\r\n\t\t},\r\n\t\tinitValueLoad: function (data, UcId, requestDataField){\r\n\t\t\t//load data\r\n\t\t\tdataField = this.gridData[UcId].grid.lastRequestValue\r\n\t\t\tthis.gridData[UcId].differentValuesPaginationInfo[dataField].previousPage = data.PageNumber\r\n\t\t\tthis.gridData[UcId].differentValuesPaginationInfo[dataField].totalPages = data.PagesCount\r\n\r\n\t\t\t//end load data\r\n\t\t\tvar columnNumber = 0;\r\n\t\t\tfor (var t = 0; t < this.gridData[UcId].grid.columns.length; t++) {\r\n\t\t\t\tif (this.gridData[UcId].grid.lastRequestValue == this.gridData[UcId].grid.columns[t].getAttribute(\"dataField\")) {\r\n\t\t\t\t\tcolumnNumber = t;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\r\n\t\t\t//null value?\r\n\t\t\tif (data.Null) {\r\n\t\t\t\tthis.gridData[UcId].blackLists[dataField].hasNull = true;\r\n\t\t\t\tif (this.gridData[UcId].differentValues[dataField].indexOf(\"#NuN#\") == -1) {\r\n\t\t\t\t\tthis.gridData[UcId].differentValues[dataField].push(\"#NuN#\")\r\n\t\t\t\t}\r\n\t\t\t\tvar nullIncluded = true;\r\n\t\t\t\tfor (var i = 0; i < this.gridData[UcId].filterInfo.length; i++) {\r\n\t\t\t\t\tif (this.gridData[UcId].filterInfo[i].DataField == dataField) {\r\n\t\t\t\t\t\tif (!this.gridData[UcId].filterInfo[i].NullIncluded) {\r\n\t\t\t\t\t\t\tnullIncluded = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif ((nullIncluded) && (this.gridData[UcId].blackLists[dataField].visibles.indexOf(\"#NuN#\") == -1)) {\r\n\t\t\t\t\tthis.gridData[UcId].blackLists[dataField].visibles.push(\"#NuN#\");\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tthis.gridData[UcId].blackLists[dataField].hasNull = false;\r\n\t\t\t}\r\n\r\n\r\n\t\t\tfor (var i = 0; i < data.NotNullValues.length; i++) {\r\n\t\t\t\tif (this.gridData[UcId].differentValues[dataField].indexOf(data.NotNullValues[i]) == -1) {\r\n\t\t\t\t\tthis.gridData[UcId].differentValues[dataField].push(data.NotNullValues[i])\r\n\t\t\t\t}\r\n\t\t\t\tif ((this.gridData[UcId].blackLists[dataField].state == \"all\")\r\n\t\t\t\t\t&& (this.gridData[UcId].blackLists[dataField].visibles.indexOf(data.NotNullValues[i]) == -1)) {\r\n\t\t\t\t\tthis.gridData[UcId].blackLists[dataField].visibles.push(data.NotNullValues[i])\r\n\t\t\t\t}\r\n\t\t\t\tif ((this.gridData[UcId].blackLists[dataField].state == \"none\")\r\n\t\t\t\t\t&& (this.gridData[UcId].blackLists[dataField].hiddens.indexOf(data.NotNullValues[i]) == -1)) {\r\n\t\t\t\t\t\tthis.gridData[UcId].blackLists[dataField].hiddens.push(data.NotNullValues[i])\r\n\t\t\t\t}\r\n\t\t\t\tif ((this.gridData[UcId].blackLists[dataField].defaultAction == \"Exclude\")\r\n\t\t\t\t\t&& (this.gridData[UcId].blackLists[dataField].state == \"\") && (data.NotNullValues[i].trimpivot() != \"\")\r\n\t\t\t\t\t&& (this.gridData[UcId].blackLists[dataField].visibles.length > 0)) { //correct blanck spaces when initial user filter\r\n\t\t\t\t\tfor (var j = 0; j < this.gridData[UcId].blackLists[dataField].visibles.length; j++) {\r\n\t\t\t\t\t\tif (this.gridData[UcId].blackLists[dataField].visibles[j] == data.NotNullValues[i].trimpivot()) {\r\n\t\t\t\t\t\t\tthis.gridData[UcId].blackLists[dataField].visibles[j] = data.NotNullValues[i]\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\r\n\r\n\t\t\tthis.gridData[UcId].grid.loadDifferentValues(columnNumber, this.gridData[UcId].differentValues[dataField]);\r\n\t\t\t\t\t\r\n\t\t\tif (requestDataField == undefined){\r\n\t\t\t\tcolumnNumber++;\r\n\t\t\t\tOAT_JS.grid.initValueRead(UcId, columnNumber)\r\n\t\t\t}\r\n\t\t},\r\n\t\tchangeValues: function (UcId, dataField, columnNumber, data, filterText) { //when filter by search filter, delete pairs and show new ones\r\n\t\t\tvar searchInput = jQuery(\"#\" + UcId + dataField)[0];\r\n\r\n\t\t\tif (((searchInput.value) || (searchInput.value == \"\")) && (searchInput.value != filterText)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar columnNumber = this.gridData[UcId].columnDataField.indexOf(dataField);\r\n\t\t\tvar originalColumn = this.gridData[UcId].originalColumnDataField.indexOf(dataField)\r\n\r\n\t\t\tthis.gridData[UcId].differentValuesPaginationInfo[dataField].filtered = true;\r\n\t\t\tthis.gridData[UcId].differentValuesPaginationInfo[dataField].blocked = true;\r\n\t\t\tOAT.removeAllPairsFromPopUp(this.gridData[UcId], columnNumber, data.PagesCount > 1);\r\n\r\n\t\t\t//set filtered pagination info\r\n\t\t\tthis.gridData[UcId].filteredValuesPaginationInfo[dataField].previousPage = 1\r\n\t\t\tthis.gridData[UcId].filteredValuesPaginationInfo[dataField].totalPages = data.PagesCount\r\n\t\t\tthis.gridData[UcId].filteredValuesPaginationInfo[dataField].filteredText = filterText\r\n\r\n\t\t\tfor (var i = 0; i < data.NotNullValues.length; i++) {\r\n\t\t\t\tvar alreadyInValues = (this.gridData[UcId].differentValues[dataField].indexOf(data.NotNullValues[i]) != -1)\r\n\t\t\t\t//append to different values\r\n\t\t\t\tif (this.gridData[UcId].differentValues[dataField].indexOf(data.NotNullValues[i]) == -1) {\r\n\t\t\t\t\tthis.gridData[UcId].differentValues[dataField].push(data.NotNullValues[i])\r\n\t\t\t\t}\r\n\t\t\t\tif ((this.gridData[UcId].blackLists[dataField].state == \"all\") ||\r\n\t\t\t\t\t((this.gridData[UcId].blackLists[dataField].defaultAction == \"Include\") && (!alreadyInValues))) {\r\n\t\t\t\t\t//if Include new values and is a new value\r\n\t\t\t\t\tif ((this.gridData[UcId].blackLists[dataField].visibles.indexOf(data.NotNullValues[i]) == -1)\r\n\t\t\t\t\t\t&& (this.gridData[UcId].blackLists[dataField].hiddens.indexOf(data.NotNullValues[i]) == -1)) {\r\n\t\t\t\t\t\tthis.gridData[UcId].blackLists[dataField].visibles.push(data.NotNullValues[i])\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t//\r\n\r\n\r\n\t\t\t\tvar checked = true;\r\n\t\t\t\tif (this.gridData[UcId].blackLists[dataField].state != \"all\") {\r\n\t\t\t\t\tif (this.gridData[UcId].blackLists[dataField].visibles.indexOf(data.NotNullValues[i]) < 0) {\r\n\t\t\t\t\t\tchecked = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.gridData[UcId].filteredValuesPaginationInfo[dataField].values.push(data.NotNullValues[i]);\r\n\t\t\t\tvar pict_value = OAT.ApplyPictureValue(data.NotNullValues[i].trimpivot(), this.gridData[UcId].rowsMetadata.columnsDataType[originalColumn],\r\n\t\t\t\t\tthis.gridData[UcId].rowsMetadata.defaultPicture, this.gridData[UcId].rowsMetadata.forPivotCustomPicture[originalColumn]).replace(/ /g, \"\\u00A0\");\r\n\t\t\t\tif (!((this.gridData[UcId].blackLists[dataField].hasNull) && (data.NotNullValues[i].trimpivot() == this.gridData[UcId].defaultNullText))) {\r\n\t\t\t\t\tOAT.appendNewPairToPopUp(this.gridData[UcId], data.NotNullValues[i], columnNumber, checked, pict_value, dataField);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (data.PagesCount > 0)\r\n\t\t\t\tthis.gridData[UcId].differentValuesPaginationInfo[dataField].blocked = false;\r\n\t\t},\r\n\t\tsetColumnVisibleValue: function (UcId, column, visible) {\r\n\t\t\tvar origColumnNumber = this.gridData[UcId].originalColumnDataField.indexOf(this.gridData[UcId].columnDataField[column])\r\n\t\t\tthis.gridData[UcId].columnVisible[origColumnNumber] = visible\r\n\t\t\tOAT.SaveStateWhenServerPaging(OAT_JS.grid.gridData[UcId], UcId, OAT_JS.grid.gridData[UcId].blackLists, OAT_JS.grid.gridData[UcId].columnVisible,\r\n\t\t\t\tOAT_JS.grid.gridData[UcId].columnDataField)\r\n\r\n\t\t\t//call autorefresh\r\n\t\t\tif (this.gridData[UcId].QueryViewerCollectionItem.AutoRefreshGroup != \"\") {\r\n\t\t\t\t\r\n\t\t\t\tOAT_JS.grid.initValueRead(UcId, 0)\r\n\t\t\t\t\r\n\t\t\t\tvar wait = function(){\r\n\t\t\t\t\tif (!OAT_JS.grid.gridData[UcId].endValueRead) {\r\n\t\t\t\t\t\tsetTimeout( wait , 100)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvar meta = OAT.createXMLMetadata(OAT_JS.grid.gridData[UcId], null, true);\r\n\r\n\t\t\t\t\t\tvar spl = OAT_JS.grid.gridData[UcId].IdForQueryViewerCollection;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tsetTimeout( function() {\r\n\t\t\t\t\r\n\t\t\t\t\t\t\tvar paramobj = {  \"QueryviewerId\": spl, \"Metadata\": meta};\r\n\t\t\t\t\t\t\tvar evt = document.createEvent(\"Events\")\r\n\t\t\t\t\t\t\tevt.initEvent(\"RequestUpdateLayoutSameGroup\", true, true);\r\n\t\t\t\t\t\t\tevt.parameter = paramobj;\r\n\t\t\t\t\t\t\tdocument.dispatchEvent(evt);\r\n\t\t\t\t\r\n\t\t\t\t\t\t}, 50)\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t/*var listennings = qv.collection[spl];\r\n\t\t\t\t\t\tif ((listennings != \"\") && (listennings != null) && (listennings != undefined)) {\r\n\t\t\t\t\t\t\tqv.util.autorefresh.UpdateLayoutSameGroup(listennings, qv.pivot.GetRuntimeMetadata(meta, listennings.RealType), true);\r\n\t\t\t\t\t\t}*/\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\twait();\r\n\t\t\t}\r\n\r\n\t\t},\r\n\t\tgetTableWhenServerPagination: function (UcId, res) {\r\n\t\t\t//var res = qv.collection[OAT_JS.grid.gridData[UcId].IdForQueryViewerCollection].getPageDataForTableSync([1, 0, true, \"\", \"\", OAT_JS.grid.gridData[UcId].filterInfo, false]);\r\n\t\t\tvar t = 0;\r\n\t\t\tvar records = res.split(\"<Recordset\");\r\n\t\t\tvar rec = \"<Recordset\" + records[1]\r\n\t\t\tvar last = rec.split(\"</Page>\");\r\n\t\t\tvar finalRes = last[0] + '</Page>\\n</Recordset>';//\"</Table>\";\r\n\t\t\treturn finalRes;\r\n\t\t},\r\n\t\tsetFilterChangedWhenServerPagination: function (UcId, oatDimension) {\r\n\t\t\tif ((this.gridData[UcId].QueryViewerCollectionItem.FilterChanged) /*|| (qv.util.isGeneXusPreview())*/) {\r\n\t\t\t\tvar df = oatDimension.getAttribute(\"dataField\")\r\n\r\n\t\t\t\tvar difValues = OAT_JS.grid.gridData[UcId].differentValues[df];\r\n\t\t\t\tvar diffValuesPagInfo = OAT_JS.grid.gridData[UcId].differentValuesPaginationInfo[df];\r\n\r\n\t\t\t\tif (OAT_JS.grid.gridData[UcId].differentValuesPaginationInfo[df].previousPage == OAT_JS.grid.gridData[UcId].differentValuesPaginationInfo[df].totalPages) {\r\n\r\n\t\t\t\t\tvar blacInfo = OAT_JS.grid.gridData[UcId].blackLists[df]\r\n\r\n\t\t\t\t\tvar datastr = \"<DATA event=\\\"FilterChanged\\\" name=\\\"\" + oatDimension.getAttribute(\"name\") + \"\\\" displayName=\\\"\" + oatDimension.getAttribute(\"displayName\") + \"\\\">\"\r\n\r\n\t\t\t\t\tfor (var dvi = 0; dvi < difValues.length; dvi++) {\r\n\t\t\t\t\t\tvar checked = true;\r\n\t\t\t\t\t\tif (OAT_JS.grid.gridData[UcId].blackLists[df].state != \"all\") {\r\n\t\t\t\t\t\t\tif (OAT_JS.grid.gridData[UcId].blackLists[df].visibles.indexOf(difValues[dvi]) < 0) {\r\n\t\t\t\t\t\t\t\tchecked = false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (checked) {\r\n\t\t\t\t\t\t\tdatastr = datastr + '<VALUE>' + difValues[dvi] + '</VALUE>';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tdatastr = datastr + \"</DATA>\"\r\n\r\n\r\n\t\t\t\t\t/*if (qv.util.isGeneXusPreview())\r\n\t\t\t\t\t\twindow.external.SendText(qv.collection[OAT_JS.grid.gridData[UcId].IdForQueryViewerCollection].ControlName, datastr);*/\r\n\r\n\t\t\t\t\t//var xml_doc = qv.util.dom.xmlDocument(datastr);\r\n\t\t\t\t\tvar iparser = new DOMParser();\r\n\t\t\t\t\tvar xml_doc = iparser.parseFromString(datastr, \"text/xml\");\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar selectXPathNode = function (xmlDoc, xpath) {\r\n\t\t\t\t\t\tvar nodes;\r\n\t\t\t\t\t\tvar node;\r\n\t\t\t\t\t\tif (xmlDoc.evaluate) { // Firefox, Chrome, Opera and Safari\r\n\t\t\t\t\t\t\tnodes = xmlDoc.evaluate(xpath, xmlDoc, null, XPathResult.ANY_TYPE, null);\r\n\t\t\t\t\t\t\tnode = nodes.iterateNext();\r\n\t\t\t\t\t\t} else {\t\t\t// Internet Explorer\r\n\t\t\t\t\t\t\tnodes = xmlDoc.selectNodes(xpath);\r\n\t\t\t\t\t\t\tnode = (nodes.length > 0 ? nodes[0] : null);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn node;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar Node = selectXPathNode(xml_doc, \"/DATA\");\r\n\t\t\t\t\t/*qv.collection[OAT_JS.grid.gridData[UcId].IdForQueryViewerCollection].FilterChangedData = {};\r\n\t\t\t\t\tqv.collection[OAT_JS.grid.gridData[UcId].IdForQueryViewerCollection].FilterChangedData.Name = Node.getAttribute(\"name\");\r\n\t\t\t\t\tqv.collection[OAT_JS.grid.gridData[UcId].IdForQueryViewerCollection].FilterChangedData.SelectedValues = [];\r\n\t\t\t\t\tvar valueIndex = -1;\r\n\t\t\t\t\tfor (var i = 0; i < Node.childNodes.length; i++)\r\n\t\t\t\t\t\tif (Node.childNodes[i].nodeName == \"VALUE\") {\r\n\t\t\t\t\t\t\tvalueIndex++;\r\n\t\t\t\t\t\t\tqv.collection[OAT_JS.grid.gridData[UcId].IdForQueryViewerCollection].FilterChangedData.SelectedValues[valueIndex] = Node.childNodes[i].firstChild.nodeValue;\r\n\t\t\t\t\t\t}*/\r\n\t\t\t\t\t\t\r\n\t\t\t\t\tvar FilterChangedData = {};\r\n\t\t\t\t\tFilterChangedData.Name = Node.getAttribute(\"name\");\r\n\t\t\t\t\tFilterChangedData.SelectedValues = [];\r\n\t\t\t\t\tvar valueIndex = -1;\r\n\t\t\t\t\tfor (var i = 0; i < Node.childNodes.length; i++)\r\n\t\t\t\t\t\tif (Node.childNodes[i].nodeName == \"VALUE\") {\r\n\t\t\t\t\t\t\tvalueIndex++;\r\n\t\t\t\t\t\t\tFilterChangedData.SelectedValues[valueIndex] = Node.childNodes[i].firstChild.nodeValue;\r\n\t\t\t\t\t\t}\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\tself.fireOnFilterChanged(UcId, FilterChangedData)\r\n\t\t\t\t\t/*if (qv.collection[OAT_JS.grid.gridData[UcId].IdForQueryViewerCollection].FilterChanged) {\r\n\t\t\t\t\t\tqv.collection[OAT_JS.grid.gridData[UcId].IdForQueryViewerCollection].FilterChanged();\r\n\t\t\t\t\t}*/\r\n\t\t\t\t} else {\r\n\t\t\t\t\tOAT_JS.grid.gridData[UcId].differentValuesPaginationInfo[df].blocked = true;\r\n\t\t\t\t\tvar ValuePageInfo = OAT_JS.grid.gridData[UcId].differentValuesPaginationInfo[df]\r\n\t\t\t\t\tvar page = ValuePageInfo.previousPage + 1;\r\n\t\t\t\t\tOAT_JS.grid.gridData[UcId].lastRequestValue = df;\r\n\t\t\t\t\t\r\n\t\t\t\t\tOAT_JS.grid.lastCallToQueryViewer = \"filterChange\"\r\n\t\t\t\t\tOAT_JS.grid.lastCallData = { \"self\": this, \"UcId\": UcId,  \"filterValue\": \"\", \"dataField\": df, \"oatDimension\": oatDimension }\r\n\t\t\t\t\r\n\t\t\t\t\tself.requestAttributeForTable(UcId, df, page, \"\", 0)\r\n\t\t\t\t\r\n\t\t\t\t\t/*qv.collection[OAT_JS.grid.gridData[UcId].IdForQueryViewerCollection].getAttributeValues((function (resJSON) {\r\n\t\t\t\t\t\tvar res = JSON.parse(resJSON);\r\n\t\t\t\t\t\tOAT_JS.grid.appendNewValueData(UcId, res, true)\r\n\t\t\t\t\t\tOAT_JS.grid.setFilterChangedWhenServerPagination(UcId, oatDimension)\r\n\t\t\t\t\t}).closure(this), [df, page, 0, \"\"]);*/\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t},\r\n\t\t\r\n\t\tgetAllDataRowsForExport: function (UcId, _selfgrid, fileName, format) {\r\n\t\t\t\r\n\t\t\tOAT_JS.grid.lastCallToQueryViewer = \"getAllDataRowsForExport\"\r\n\t\t\tOAT_JS.grid.lastCallData = {  \"UcId\": UcId, \"_selfgrid\":_selfgrid, \"fileName\":fileName, \"format\": format}\r\n\t\t\tself.requestPageDataForTable(1, 0, false, OAT_JS.grid.gridData[UcId].dataFieldOrder, OAT_JS.grid.gridData[UcId].orderType, OAT_JS.grid.gridData[UcId].filterInfo, false, OAT_JS.grid.gridData[UcId].IdForQueryViewerCollection)\r\n\t\t\t\t\r\n\t\t\t\r\n\t\t\t/*\r\n\t\t\tqv.collection[OAT_JS.grid.gridData[UcId].IdForQueryViewerCollection].getPageDataForTable((function (resXML) {\r\n\t\t\t\tvar dataString = resXML;\r\n\t\t\t\tvar stringRecord = dataString.split(\"<Record>\");\r\n\t\t\t\tvar data = []\r\n\t\t\t\tfor (var i = 1; i < stringRecord.length; i++) {\r\n\t\t\t\t\tvar recordData = [];\r\n\t\t\t\t\tfor (var j = 0; j < OAT_JS.grid.gridData[UcId].grid.columns.length; j++) {\r\n\t\t\t\t\t\trecordData[j] = \"#NuN#\"\r\n\t\t\t\t\t\tvar dt = stringRecord[i].split(\"<\" + OAT_JS.grid.gridData[UcId].grid.columns[j].getAttribute(\"dataField\") + \">\")\r\n\t\t\t\t\t\tif (dt.length > 1) {\r\n\t\t\t\t\t\t\tvar at = dt[1].split(\"</\" + OAT_JS.grid.gridData[UcId].grid.columns[j].getAttribute(\"dataField\") + \">\")\r\n\t\t\t\t\t\t\trecordData[j] = at[0]\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdata.push(recordData)\r\n\r\n\t\t\t\t\tif (format != \"xlsx\") {\r\n\t\t\t\t\t\tif ((i > OAT_JS.grid.gridData[UcId].rowsPerPage) && !(OAT_JS.grid.gridData[UcId].rowsPerPage == \"\")) {\r\n\t\t\t\t\t\t\tOAT.CreateGridRow(recordData, OAT_JS.grid.gridData[UcId], true)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tswitch (format) {\r\n\t\t\t\t\tcase \"pdf\": OAT.ExportToPdf(_selfgrid, fileName); break;\r\n\t\t\t\t\tcase \"xml\": OAT.ExportToXML(_selfgrid, fileName); break;\r\n\t\t\t\t\tcase \"html\": OAT_JS.grid.gridData[UcId].grid.ExportToHtml(_selfgrid, fileName); break;\r\n\t\t\t\t\tcase \"xls\": OAT.ExportToExcel(_selfgrid, fileName); break;\r\n\t\t\t\t\tcase \"xlsx\": OAT.ExportToExcel2010(_selfgrid, fileName, true, data, UcId); break;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tOAT_JS.grid.gridData[UcId].grid.removeAllCollapseRows()\r\n\r\n\t\t\t}).closure(this), [1, 0, false, OAT_JS.grid.gridData[UcId].dataFieldOrder, OAT_JS.grid.gridData[UcId].orderType, OAT_JS.grid.gridData[UcId].filterInfo], false);\r\n*/\r\n\t\t\t\r\n\t\t},\r\n\t\trestoreDefaultView: function (UcId) {\r\n\t\t\tthis.gridData[UcId].redrawHeader = true\r\n\t\t\tthis.gridData[UcId].columnDataField = this.gridData[UcId].originalColumnDataField\r\n\t\t\t//reset order\r\n\t\t\tOAT_JS.grid.gridData[UcId].dataFieldOrder = \"\"\r\n\t\t\tOAT_JS.grid.gridData[UcId].orderType = \"\"\r\n\t\t\t//reset filter info\r\n\t\t\tthis.gridData[UcId].filterInfo = [];\r\n\t\t\tvar tempInfo = [];\r\n\t\t\tfor (var id = 0; id < OAT_JS.grid.gridData[UcId].grid.columns.length; id++) {\r\n\t\t\t\ttempInfo[OAT_JS.grid.gridData[UcId].grid.columns[id].getAttribute(\"dataField\")] = this.gridData[UcId].blackLists[OAT_JS.grid.gridData[UcId].grid.columns[id].getAttribute(\"dataField\")].hasNull;\r\n\t\t\t}\r\n\t\t\tfor (var id = 0; id < OAT_JS.grid.gridData[UcId].grid.columns.length; id++) {\r\n\t\t\t\tthis.gridData[UcId].blackLists[OAT_JS.grid.gridData[UcId].grid.columns[id].getAttribute(\"dataField\")] = {\r\n\t\t\t\t\tstate: \"all\", visibles: [], defaultAction: \"Include\", hiddens: [],\r\n\t\t\t\t\thasNull: tempInfo[OAT_JS.grid.gridData[UcId].grid.columns[id].getAttribute(\"dataField\")]\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tvar indexHeader = 0\r\n\t\t\tfor (var c = 0; c < this.gridData[UcId].columnVisible.length; c++) {\r\n\t\t\t\tthis.gridData[UcId].grid.applySortOrderType(c, 1);\r\n\t\t\t\tthis.gridData[UcId].columnVisible[c] = OAT_JS.grid.gridData[UcId].grid.columns[c].getAttribute(\"visible\").toLowerCase() == \"yes\"; //true;\r\n\t\t\t\tif (this.gridData[UcId].columnVisible[c]){\r\n\t\t\t\t\tthis.gridData[UcId].grid.showColumnHeader(indexHeader);\r\n\t\t\t\t\tindexHeader = indexHeader + 1;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.gridData[UcId].grid.hideColumnHeader(indexHeader);\r\n\t\t\t\t\tindexHeader = indexHeader + 1;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.gridData[UcId].rowsPerPage = this.gridData[UcId].defaultValues.rowsPerPage\r\n\t\t\tif (jQuery(\"#\" + this.gridData[UcId].grid.controlName + \"tablePagination_rowsPerPage\").length > 0) {\r\n\t\t\t\tjQuery(\"#\" + this.gridData[UcId].grid.controlName + \"tablePagination_rowsPerPage\")[0].value = this.gridData[UcId].defaultValues.rowsPerPage\r\n\t\t\t}\r\n\r\n\t\t},\r\n\t\tgetStateChange: function (UcId) {\r\n\t\t\tif (this.gridData[UcId].rowsPerPage != this.gridData[UcId].defaultValues.rowsPerPage) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tif ((this.gridData[UcId].defaultValues.dataFieldOrder != OAT_JS.grid.gridData[UcId].dataFieldOrder) || (this.gridData[UcId].defaultValues.orderType != OAT_JS.grid.gridData[UcId].orderType)) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tif ((this.gridData[UcId].filterInfo != undefined) && (this.gridData[UcId].filterInfo.length > 0)) {\r\n\t\t\t\treturn true\r\n\t\t\t}\r\n\t\t\tfor (var t = 0; t < this.gridData[UcId].columnVisible.length; t++) {\r\n\t\t\t\tvar defaultVisible = OAT_JS.grid.gridData[UcId].grid.columns[t].getAttribute(\"visible\").toLowerCase() == \"yes\";\r\n\t\t\t\tif (this.gridData[UcId].columnVisible[t] != defaultVisible) {\r\n\t\t\t\t\treturn true\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfor (var c = 0; c < this.gridData[UcId].columnDataField.length; c++) {\r\n\t\t\t\tif (this.gridData[UcId].columnDataField[c] != this.gridData[UcId].originalColumnDataField[c])\r\n\t\t\t\t\treturn true\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn false\r\n\t\t},\r\n\t\trefreshPivotWhenServerPagination: function (UcId, dataFieldOrderChanged, OrderChanged, dataFieldPositions) {\r\n\r\n\t\t\tself.getDataForTable(UcId, 1, this.gridData[UcId].rowsPerPage, true, dataFieldOrderChanged, OrderChanged, \"\", \"\", \"\", true);\r\n\t\t},\r\n\t\tmoveToFirstPage: function (UcId) {\r\n\t\t\tif (this.gridData[UcId].actualPageNumber > 1) {\r\n\t\t\t\tself.getDataForTable(UcId, 1, this.gridData[UcId].rowsPerPage, false, \"\", \"\", \"\", \"\", false);\r\n\t\t\t}\r\n\t\t},\r\n\t\tmoveToNextPage: function (UcId) {\r\n\t\t\tif (this.gridData[UcId].actualPageNumber < this.gridData[UcId].actualCantPages) {\r\n\t\t\t\tself.getDataForTable(UcId, this.gridData[UcId].actualPageNumber + 1, this.gridData[UcId].rowsPerPage, false, \"\", \"\", \"\", \"\", false);\r\n\t\t\t}\r\n\t\t},\r\n\t\tmoveToLastPage: function (UcId) {\r\n\t\t\tif (this.gridData[UcId].actualPageNumber < this.gridData[UcId].actualCantPages) {\r\n\t\t\t\tself.getDataForTable(UcId, this.gridData[UcId].actualCantPages, this.gridData[UcId].rowsPerPage, false, \"\", \"\", \"\", \"\", false);\r\n\t\t\t}\r\n\t\t},\r\n\t\tmoveToPreviousPage: function (UcId) {\r\n\t\t\tif (this.gridData[UcId].actualPageNumber > 1) {\r\n\t\t\t\tself.getDataForTable(UcId, this.gridData[UcId].actualPageNumber - 1, this.gridData[UcId].rowsPerPage, false, \"\", \"\", \"\", \"\", false);\r\n\t\t\t}\r\n\t\t},\r\n\t\tcantPages: function (UcId, dataField) {\r\n\t\t\treturn this.gridData[UcId].differentValuesPaginationInfo[dataField].totalPages\r\n\t\t},\r\n\t\tsetDataFieldPosition: function (UcId, dataFieldPositions) {\r\n\t\t\tthis.gridData[UcId].columnDataField = []\r\n\t\t\tthis.gridData[UcId].columnDataField = dataFieldPositions\r\n\t\t\t\r\n\t\t\tOAT.SaveStateWhenServerPaging(this.gridData[UcId], UcId, this.gridData[UcId].blackLists, this.gridData[UcId].columnVisible,\r\n\t\t\t\tthis.gridData[UcId].columnDataField)\r\n\r\n\t\t\t//call autorefresh\r\n\t\t\tif (this.gridData[UcId].QueryViewerCollectionItem.AutoRefreshGroup != \"\") {\r\n\t\t\t\tOAT_JS.grid.initValueRead(UcId, 0)\r\n\t\t\t\t\r\n\t\t\t\tvar wait = function(){\r\n\t\t\t\t\tif (!OAT_JS.grid.gridData[UcId].endValueRead) {\r\n\t\t\t\t\t\tsetTimeout( wait , 100)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvar meta = OAT.createXMLMetadata(OAT_JS.grid.gridData[UcId], null, true);\r\n\t\t\t\t\t\tvar spl = OAT_JS.grid.gridData[UcId].IdForQueryViewerCollection;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tsetTimeout( function() {\r\n\t\t\t\t\r\n\t\t\t\t\t\t\tvar paramobj = {  \"QueryviewerId\": spl, \"Metadata\": meta};\r\n\t\t\t\t\t\t\tvar evt = document.createEvent(\"Events\")\r\n\t\t\t\t\t\t\tevt.initEvent(\"RequestUpdateLayoutSameGroup\", true, true);\r\n\t\t\t\t\t\t\tevt.parameter = paramobj;\r\n\t\t\t\t\t\t\tdocument.dispatchEvent(evt);\r\n\t\t\t\t\r\n\t\t\t\t\t\t}, 50)\r\n\t\t\t\t\t\t/*var listennings = qv.collection[spl];\r\n\t\t\t\t\t\tif ((listennings != \"\") && (listennings != null) && (listennings != undefined)) {\r\n\t\t\t\t\t\t\tqv.util.autorefresh.UpdateLayoutSameGroup(listennings, qv.pivot.GetRuntimeMetadata(meta, listennings.RealType), true);\r\n\t\t\t\t\t\t}*/\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\twait();\r\n\t\t\t}\r\n\t\t},\r\n\t\tfireOnItemClickEvent: function(query, datastr){\r\n\t\t\tsetTimeout( function() {\r\n\t\t\t\tvar paramobj = {\"QueryViewer\": query, \"Data\": datastr, \"QueryviewerId\": self.IdForQueryViewerCollection};\r\n\t\t\t\tvar evt = document.createEvent(\"Events\")\r\n\t\t\t\tevt.initEvent(\"TableOnItemClickEvent\", true, true);\r\n\t\t\t\tevt.parameter = paramobj;\r\n\t\t\t\tdocument.dispatchEvent(evt);\r\n\t\t\t}, 0)\r\n\t\t},\t\t\r\n\t\trequestDataSynForTable: function(UcId){\r\n\t\t\tsetTimeout( function() {\r\n\t\t\t\tvar paramobj = {\"QueryviewerId\": UcId};\r\n\t\t\t\tvar evt = document.createEvent(\"Events\")\r\n\t\t\t\tevt.initEvent(\"RequestDataSynForTable\", true, true);\r\n\t\t\t\tevt.parameter = paramobj;\r\n\t\t\t\tdocument.dispatchEvent(evt);\r\n\t\t\t}, 0)\r\n\t\t},\r\n\t\taddValueToDifferentValues: function (UcId, dataField, val) {\r\n\t\t\tvar originalColumn = this.gridData[UcId].originalColumnDataField.indexOf(dataField);\r\n\t\t\tvar dataType = this.gridData[UcId].grid.columnsDataType[originalColumn];\r\n\t\t\tvar sortInt = false;\r\n\t\t\tif ((dataType == \"integer\") || (dataType == \"real\")) {\r\n\t\t\t\tsortInt = true;\r\n\t\t\t}\r\n\r\n\r\n\r\n\t\t\tvar tempData = [];\r\n\t\t\tvar added = false;\r\n\r\n\t\t\tif (val == \"#NuN#\") {\r\n\t\t\t\ttempData.push(val);\r\n\t\t\t\tadded = true;\r\n\t\t\t}\r\n\r\n\t\t\tfor (var l = 0; l < this.gridData[UcId].differentValues[dataField].length; l++) {\r\n\t\t\t\tif (!sortInt) {\r\n\t\t\t\t\tif ((val < this.gridData[UcId].differentValues[dataField][l]) && (!added)) {\r\n\t\t\t\t\t\ttempData.push(val);\r\n\t\t\t\t\t\tadded = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttempData.push(this.gridData[UcId].differentValues[dataField][l])\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif ((parseFloat(val) < parseFloat(this.gridData[UcId].differentValues[dataField][l])) && (!added)) {\r\n\t\t\t\t\t\ttempData.push(val);\r\n\t\t\t\t\t\tadded = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttempData.push(this.gridData[UcId].differentValues[dataField][l])\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (!added) {\r\n\t\t\t\ttempData.push(val)\r\n\t\t\t}\r\n\r\n\t\t\tthis.gridData[UcId].differentValues[dataField] = tempData;\r\n\r\n\t\t}\r\n\t}\r\n\r\n\tOAT_JS.pivot = {\r\n\t\tpanel: 1,\r\n\t\ttab: 5,\r\n\t\tdiv: \"\",\r\n\t\tneeds: [\"pivot\", \"statistics\"],\r\n\t\tcb: function (_mthis, pivotdiv, page, content, defaultPicture, QueryViewerCollection, colms, formatValue, conditionalFormatsColumns,\r\n\t\t\tformatValueMeasures, autoResize, disableColumnSort, UcId, IdForQueryViewerCollection, rememberLayout, ShowMeasuresAsRows,\r\n\t\t\tformulaInfo, fullRecord, serverPagination, pagingData, HideDataFilds, OrderFildsHidden, initMetadata, relativePath, pivotParams) {\r\n\t\t\tthis.div = pivotdiv;\r\n\t\t\tvar cols = _mthis.columnNumbers.length + _mthis.rowNumbers.length + _mthis.filterNumbers.length;\r\n\t\t\tif (_mthis.measures.length > 1) {\r\n\t\t\t\tvar prevCol = cols;\r\n\t\t\t\tcols = cols + _mthis.measures.length - 1;\r\n\t\t\t\tfor (var i = prevCol; i < cols; i++) {\r\n\t\t\t\t\t_mthis.columnNumbers.push(i);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tfor (var i = 0; i < _mthis.data.length; i++) {\r\n\t\t\t\t\t_mthis.data[i].push(\"0\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar pivot;\r\n\t\t\t// try {\r\n\t\t\t\tpivot = new OAT.Pivot(_mthis, content, page, _mthis.header, _mthis.data, _mthis.columnNumbers, _mthis.rowNumbers, _mthis.filterNumbers, cols, _mthis.query, _mthis.conditionalFormats, UcId, _mthis.pageSize, defaultPicture, QueryViewerCollection, colms, pivotdiv,\r\n\t\t\t\t\tformatValue, conditionalFormatsColumns, formatValueMeasures, _mthis.measures, autoResize, disableColumnSort, UcId, IdForQueryViewerCollection, rememberLayout,\r\n\t\t\t\t\tShowMeasuresAsRows, formulaInfo, fullRecord, serverPagination, pagingData, HideDataFilds, OrderFildsHidden, initMetadata, relativePath,\r\n\t\t\t\t\t{ Allow: pivotParams.AllowSelection, EntireLine: pivotParams.SelectLine}, { TotalForRows: pivotParams.TotalForRows, TotalForColumns: pivotParams.TotalForColumns } , pivotParams.Title );\r\n\t\t\t// } catch (Error) {\r\n\t\t\t\t// alert(Error)\r\n\t\t\t// }\r\n\t\t\treturn pivot;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction parseToIntRegisterValue(string, registerValue) {\r\n\t\tif (string.indexOf(registerValue) > 0) {\r\n\t\t\tvar tmpstr = string.split(registerValue + '=\"');\r\n\t\t\tif (tmpstr.length == 1) {\r\n\t\t\t\ttmpstr = string.split(registerValue + \"='\");\r\n\t\t\t\treturn (tmpstr[1]) ? parseInt(tmpstr[1].split(\"'\")[0]) : -1;\r\n\t\t\t}\r\n\t\t\treturn (tmpstr[1]) ? parseInt(tmpstr[1].split('\"')[0]) : -1;\r\n\t\t}\r\n\t\treturn -1;\r\n\t}\r\n\r\n\tfunction parseToStringRegisterValue(string, registerValue) {\r\n\t\tif (string.indexOf(registerValue) > 0) {\r\n\t\t\tvar tmpstr = string.split(registerValue + '=\"');\r\n\t\t\tif (tmpstr.length == 1) {\r\n\t\t\t\ttmpstr = string.split(registerValue + \"='\");\r\n\t\t\t\treturn (tmpstr[1]) ? (tmpstr[1].split(\"'\")[0]) : -1;\r\n\t\t\t}\r\n\t\t\treturn (tmpstr[1]) ? (tmpstr[1].split('\"')[0]) : -1;\r\n\t\t}\r\n\t\treturn -1;\r\n\t}\r\n\r\n\tfunction EvaluateExpressionPivotJs(expression, data, formulaInfo) {\r\n\t\tvar tokens = []\r\n\t\tfor (var i = 0; i < expression.length; i++) {\r\n\t\t\ttokens[i] = expression[i]\r\n\t\t}\r\n\t\tvar evalStack = [];\r\n\r\n\t\twhile (tokens.length != 0) {\r\n\t\t\tvar currentToken = tokens.shift();\r\n\t\t\tif (isOperator(currentToken)) {\r\n\t\t\t\tvar operand1 = evalStack.pop();\r\n\t\t\t\tvar operand2 = evalStack.pop();\r\n\r\n\t\t\t\tvar result = PerformOperation(parseFloat(operand1), parseFloat(operand2), currentToken);\r\n\t\t\t\tevalStack.push(result);\r\n\t\t\t} else {\r\n\t\t\t\tif (isNaN(parseInt(currentToken))) {\r\n\t\t\t\t\tif (data[formulaInfo.itemPosition[currentToken]] == \"#NuN#\") return \"#NuN#\";\r\n\t\t\t\t\tevalStack.push(data[formulaInfo.itemPosition[currentToken]]);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tevalStack.push(currentToken);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn evalStack.pop();\r\n\t}\r\n\r\n\tfunction PerformOperation(operand1, operand2, operator) {\r\n\t\tswitch (operator) {\r\n\t\t\tcase '+':\r\n\t\t\t\treturn operand1 + operand2;\r\n\t\t\tcase '-':\r\n\t\t\t\treturn operand2 - operand1;\r\n\t\t\tcase '*':\r\n\t\t\t\treturn operand1 * operand2;\r\n\t\t\tcase '/':\r\n\t\t\t\treturn operand2 / operand1;\r\n\t\t\tdefault:\r\n\t\t\t\treturn;\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction InfixToPostfix(expression) {\r\n\t\t//var tokens = expression.split(/([0-9]+|[*+-\\/()])/);\r\n\t\tvar tokens = expression.split(\" \");\r\n\t\tvar outputQueue = [];\r\n\t\tvar operatorStack = [];\r\n\r\n\t\twhile (tokens.length != 0) {\r\n\t\t\tvar currentToken = tokens.shift();\r\n\r\n\t\t\tif (isOperator(currentToken)) {\r\n\t\t\t\twhile ((getAssociativity(currentToken) == 'left' &&\r\n\t\t\t\t\tgetPrecedence(currentToken) <= getPrecedence(operatorStack[operatorStack.length - 1])) ||\r\n\t\t\t\t\t(getAssociativity(currentToken) == 'right' &&\r\n\t\t\t\t\t\tgetPrecedence(currentToken) < getPrecedence(operatorStack[operatorStack.length - 1]))) {\r\n\t\t\t\t\toutputQueue.push(operatorStack.pop())\r\n\t\t\t\t}\r\n\r\n\t\t\t\toperatorStack.push(currentToken);\r\n\r\n\t\t\t}\r\n\t\t\telse if (currentToken == '(') {\r\n\t\t\t\toperatorStack.push(currentToken);\r\n\t\t\t}\r\n\t\t\telse if (currentToken == ')') {\r\n\t\t\t\twhile (operatorStack[operatorStack.length - 1] != '(') {\r\n\t\t\t\t\tif (operatorStack.length == 0)\r\n\t\t\t\t\t\tthrow (\"\");\r\n\r\n\t\t\t\t\toutputQueue.push(operatorStack.pop());\r\n\t\t\t\t}\r\n\t\t\t\toperatorStack.pop();\r\n\t\t\t} else {\r\n\t\t\t\toutputQueue.push(currentToken);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\twhile (operatorStack.length != 0) {\r\n\t\t\tif (!operatorStack[operatorStack.length - 1].match(/([()])/))\r\n\t\t\t\toutputQueue.push(operatorStack.pop());\r\n\t\t\telse\r\n\t\t\t\tthrow (\"Parenthesis balancing error! Shame on you!\");\r\n\t\t}\r\n\r\n\t\treturn outputQueue.join(\" \");\r\n\t}\r\n\r\n\r\n\tfunction isOperator(token) {\r\n\t\tif (!token.match(/([*+-\\/])/))\r\n\t\t\treturn false;\r\n\t\telse\r\n\t\t\treturn true;\r\n\t}\r\n\r\n\r\n\tfunction isNumber(token) {\r\n\t\tif (!token.match(/([0-9]+)/))\r\n\t\t\treturn false;\r\n\t\telse\r\n\t\t\treturn true;\r\n\t}\r\n\r\n\r\n\tfunction getPrecedence(token) {\r\n\t\tswitch (token) {\r\n\t\t\tcase '^':\r\n\t\t\t\treturn 9;\r\n\t\t\tcase '*':\r\n\t\t\tcase '/':\r\n\t\t\tcase '%':\r\n\t\t\t\treturn 8;\r\n\t\t\tcase '+':\r\n\t\t\tcase '-':\r\n\t\t\t\treturn 6;\r\n\t\t\tdefault:\r\n\t\t\t\treturn -1;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction getAssociativity(token) {\r\n\t\tswitch (token) {\r\n\t\t\tcase '+':\r\n\t\t\tcase '-':\r\n\t\t\tcase '*':\r\n\t\t\tcase '/':\r\n\t\t\t\treturn 'left';\r\n\t\t\tcase '^':\r\n\t\t\t\treturn 'right';\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tfunction OATSetCookie(name, value, expires, path, domain, secure) {\r\n\t\tdocument.cookie = name + \"=\" + escape(value) +\r\n\t\t\t((expires == null) ? \"\" : \"; expires=\" + expires.toGMTString()) +\r\n\t\t\t((path == null) ? \"\" : \"; path=\" + path) +\r\n\t\t\t((domain == null) ? \"\" : \"; domain=\" + domain) +\r\n\t\t\t((secure == null) ? \"\" : \"; secure\");\r\n\t}\r\n\tfunction OATGetCookie(name) {\r\n\t\tvar cname = name + \"=\";\r\n\t\tvar dc = document.cookie;\r\n\t\tif (dc.length > 0) {\r\n\t\t\tbegin = dc.indexOf(cname);\r\n\t\t\tif (begin != -1) {\r\n\t\t\t\tbegin += cname.length;\r\n\t\t\t\tend = dc.indexOf(\";\", begin);\r\n\t\t\t\tif (end == -1) end = dc.length;\r\n\t\t\t\treturn unescape(dc.substring(begin, end));\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\tfunction OATIsNotEmptyValue(value) {\r\n\t\treturn (value != \"#NaV#\") && (value != \"#NuN#\")\r\n\t}\r\n\r\n\tfunction OATGetRowsFromXML(data, obj, ShowMeasuresAsRows) {\r\n\t\tvar rows = [];\r\n\r\n\t\tvar rowsString = data.split(\"<Rows>\")\r\n\t\tif (rowsString.length) {\r\n\t\t\trowsString = rowsString[1].split(\"</Rows>\")\r\n\t\t\trowsString = rowsString[0].split(\"<Row>\")\r\n\t\t\tvar isTitle = 0;\r\n\t\t\tfor (var l = 1; l < rowsString.length; l++) {\r\n\t\t\t\tvar row = { headers: [], cells: [], subTotal: false, dataField: -1, rowSpan: 0 }\r\n\r\n\t\t\t\tvar subTotal = parseToStringRegisterValue(rowsString[l], \"Subtotal\")\r\n\t\t\t\tif (subTotal == \"true\") {\r\n\t\t\t\t\trow.subTotal = true\r\n\t\t\t\t}\r\n\t\t\t\tvar headerString\r\n\t\t\t\tif (rowsString[l].indexOf(\"</Header>\") > 0) {\r\n\t\t\t\t\theaderString = rowsString[l].split(\"</Header>\")[0].replace(\"<Header>\", \"\")\r\n\t\t\t\t} else {\r\n\t\t\t\t\theaderString = rowsString[l].split(\"/>\")[0].replace(\"<Header\", \"\")\r\n\t\t\t\t}\r\n\r\n\t\t\t\trow.dataField = parseToStringRegisterValue(headerString, \"DataField\"); //for columns in rows only\r\n\r\n\t\t\t\t//get dataFields of headers\r\n\t\t\t\tvar headerrep = headerString.replace(/<\\//g, \"-*-5\").replace(/\\/>/g, \"-*-5\")\r\n\t\t\t\tvar headersItems = headerrep.split(\"-*-5\");\r\n\r\n\t\t\t\tfor (var df = 1; df < headersItems.length; df++) {\r\n\t\t\t\t\tvar value;\r\n\t\t\t\t\tvar datafield = headersItems[df].split(\">\")[0]\r\n\t\t\t\t\tif (datafield == \"\") {\r\n\t\t\t\t\t\tdatafield = headersItems[df - 1].split(\"<\")[1].split(\" \")[0]\r\n\t\t\t\t\t\tvalue = \"#NuN#\";\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\tvalue = headersItems[df - 1].split(datafield + \">\")[1].split(\"<\")[0]\r\n\t\t\t\t\t\t} catch (ERROR) {\r\n\t\t\t\t\t\t\tvalue = \"#NuN#\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar h = { dataField: datafield, value: value, rowSpan: 1 }\r\n\r\n\r\n\t\t\t\t\tvar totalizedItems = headersItems.length - 1\r\n\t\t\t\t\tif (ShowMeasuresAsRows) {\r\n\t\t\t\t\t\ttotalizedItems = headersItems.length\r\n\t\t\t\t\t\tif (row.subTotal) {\r\n\t\t\t\t\t\t\ttotalizedItems--;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar sumarized = (df - totalizedItems >= 0)\r\n\r\n\t\t\t\t\tif ((rows.length > 0) && (!sumarized)) { //set rowspan\r\n\t\t\t\t\t\tif ((df - 1 == 0) || (row.headers[df - 2].rowSpan == 0)) { //no es la 1er columna, pero la anterior tiene span\r\n\t\t\t\t\t\t\tif (value == rows[l - 2].headers[df - 1].value) {\r\n\t\t\t\t\t\t\t\th.rowSpan = 0\r\n\t\t\t\t\t\t\t\tvar ant = l - 2\r\n\t\t\t\t\t\t\t\twhile (ant >= 0) {\r\n\t\t\t\t\t\t\t\t\tif (rows[ant].headers[df - 1].rowSpan > 0) {\r\n\t\t\t\t\t\t\t\t\t\trows[ant].headers[df - 1].rowSpan++\r\n\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tant--;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\trow.headers.push(h);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ((ShowMeasuresAsRows) && (row.subTotal)) {\r\n\t\t\t\t\tif ((l == 1) || (!rows[l - 2].subTotal) || (row.headers.length != rows[l - 2].headers.length)) {\r\n\t\t\t\t\t\trow.rowSpan = 1\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvar ant = l - 2;\r\n\t\t\t\t\t\twhile (ant >= 0) {\r\n\t\t\t\t\t\t\tif (rows[ant].rowSpan > 0) {\r\n\t\t\t\t\t\t\t\trows[ant].rowSpan++\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tant--\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t//get cells values\r\n\t\t\t\tvar cellsString = rowsString[l].split(\"<Cells>\")[1].split(\"</Cell>\")\r\n\t\t\t\tfor (var ci = 0; ci < cellsString.length - 1; ci++) {\r\n\r\n\t\t\t\t\tvar dField = (row.dataField != -1) ? row.dataField : obj.columnsHeaders[ci].dataField;\r\n\t\t\t\t\t//add empty cells\r\n\t\t\t\t\tfor (var ec = 1; ec < cellsString[ci].split(\"<Cell />\").length; ec++) {\r\n\t\t\t\t\t\tvar c = { value: \"#NuN#\", dataField: dField }\r\n\t\t\t\t\t\trow.cells.push(c);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar value = cellsString[ci].split(\"<Cell>\")[1]\r\n\t\t\t\t\tvar c = { value: value, dataField: dField }\r\n\t\t\t\t\trow.cells.push(c);\r\n\t\t\t\t}\r\n\t\t\t\t//add empty cells\r\n\t\t\t\tfor (var ec = 1; ec < cellsString[ci].split(\"<Cell />\").length; ec++) {\r\n\t\t\t\t\tvar c = { value: \"#NuN#\", dataField: dField }\r\n\t\t\t\t\trow.cells.push(c);\r\n\t\t\t\t}\r\n\r\n\t\t\t\trows.push(row);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\treturn rows;\r\n\t}\r\n\r\n\tfunction OATGetColumnsHeadersFromXML(dataString) {\r\n\t\tvar columnsString = dataString.split(\"<Columns>\")\r\n\t\tvar columnsHeaders = [];\r\n\t\tif (columnsString.length > 1) {\r\n\r\n\t\t\tcolumnsString = columnsString[1].split(\"</Columns>\")[0]\r\n\t\t\tvar headerString = columnsString.split(\"<Header\")\r\n\r\n\t\t\tfor (var t = 1; t < headerString.length; t++) {\r\n\t\t\t\tvar o = parseToStringRegisterValue(headerString[t], \"DataField\")\r\n\t\t\t\tvar subTotal = parseToStringRegisterValue(headerString[t], \"Subtotal\")\r\n\r\n\t\t\t\tvar subHeaders = [];\r\n\t\t\t\tvar subHeadersString = headerString[t].replace(\"DataField=\\\"\" + o + \"\\\">\", \"\").replace(\"DataField='\" + o + \"'>\", \"\").replace(\"</Header>\", \"\").replace(/IsNull=\"true\" \\/>/g, \">#NuN#<F>\").replace(/IsNull='true' \\/>/g, \">#NuN#<F>\").replace(/IsNull=\"true\"\\/>/g, \">#NuN#<F>\").split(\"<\")\r\n\t\t\t\tif (subHeadersString.length > 1) { //hay dimensiones en las columnas\r\n\t\t\t\t\tfor (var sh = 1; sh < subHeadersString.length - 1; sh++) {\r\n\t\t\t\t\t\tif (sh % 2 == 1) {\r\n\t\t\t\t\t\t\tvar datafield = subHeadersString[sh].split(\">\")[0]\r\n\t\t\t\t\t\t\tvar value = subHeadersString[sh].split(datafield + \">\")[1]\r\n\t\t\t\t\t\t\tvar h = { dataField: datafield, value: value, colSpan: 1 }\r\n\t\t\t\t\t\t\tsubHeaders.push(h)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcolumnsHeaders.push({ dataField: o, subTotal: (subTotal == \"true\"), subHeaders: subHeaders })\r\n\r\n\t\t\t}\r\n\r\n\t\t\t//obj.columnsHeaders = columnsHeaders;\r\n\t\t}\r\n\t\treturn columnsHeaders\r\n\t}\r\n\r\n\tfunction OATGetDataFromXMLForPivot(data, ShowMeasuresAsRows) {\r\n\t\tvar stringRecord = dataString.split(\"<Record>\")\r\n\r\n\t\tvar obj = {};\r\n\t\tobj.ServerRecordCount = parseToIntRegisterValue(data, \"RecordCount\")\r\n\t\tobj.ServerPageCount = parseToIntRegisterValue(data, \"PageCount\")\r\n\t\tobj.ServerPageNumber = parseToIntRegisterValue(data, \"PageNumber\")\r\n\r\n\t\tobj.columnsHeaders = OATGetColumnsHeadersFromXML(data);\r\n\t\tobj.rows = OATGetRowsFromXML(data, obj, ShowMeasuresAsRows);\r\n\r\n\r\n\t\treturn obj;\r\n\t}\r\n\r\n\tfunction OATGetNewDataFromXMLForPivot(data, obj, ShowMeasuresAsRows, exportTo) {\r\n\t\tdata = data.replace(/<Cell\\/>/g, \"<Cell \\/>\")\r\n\t\tif ((exportTo == undefined) || (exportTo == \"\")) {\r\n\t\t\tif (parseToIntRegisterValue(data, \"RecordCount\") != -1) {\r\n\t\t\t\tobj.ServerRecordCount = parseToIntRegisterValue(data, \"RecordCount\")\r\n\t\t\t}\r\n\t\t\tif (parseToIntRegisterValue(data, \"PageCount\") != -1) {\r\n\t\t\t\tobj.ServerPageCount = parseToIntRegisterValue(data, \"PageCount\")\r\n\t\t\t}\r\n\t\t}\r\n\t\tobj.ServerPageNumber = parseToIntRegisterValue(data, \"PageNumber\")\r\n\r\n\t\tif (data.split(\"<Columns>\").length > 1) {\r\n\t\t\tobj.columnsHeaders = OATGetColumnsHeadersFromXML(data);\r\n\t\t}\r\n\r\n\t\tobj.rows = OATGetRowsFromXML(data, obj, ShowMeasuresAsRows);\r\n\r\n\t\treturn obj;\r\n\t}\r\n\r\n\tfunction OATgetDataFromXMLOldFormat(dataString, orderFilds, orderFildsHidden) {\r\n\t\tvar stringRecord = dataString.split(\"<Record>\")\r\n\r\n\t\tvar data = [];\r\n\t\tvar fullData = [];\r\n\t\tfor (var i = 1; i < stringRecord.length; i++) {\r\n\t\t\tvar recordData = [];\r\n\t\t\tvar fullRecordData = [];\r\n\t\t\tfor (var j = 0; j < orderFilds.length; j++) {\r\n\t\t\t\trecordData[j] = \"#NuN#\"\r\n\t\t\t\tvar dt = stringRecord[i].split(\"<\" + orderFilds[j] + \">\")\r\n\t\t\t\tif (dt.length > 1) {\r\n\t\t\t\t\tvar at = dt[1].split(\"</\" + orderFilds[j] + \">\")\r\n\t\t\t\t\t/*var rp = at[0].replace(/^\\s+|\\s+$/g, '')\r\n\t\t\t\t\trecordData[j] = (rp != \"\") ? rp : undefined*/\r\n\t\t\t\t\trecordData[j] = at[0]\r\n\t\t\t\t\tfullRecordData[j] = recordData[j]\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tdata.push(recordData);\r\n\r\n\t\t\tif (orderFildsHidden != undefined) {\r\n\t\t\t\tvar pos_init = orderFilds.length;\r\n\t\t\t\tfor (var j = 0; j < orderFildsHidden.length; j++) {\r\n\t\t\t\t\tfullRecordData[pos_init + j] = undefined\r\n\t\t\t\t\tvar dt = stringRecord[i].split(\"<\" + orderFildsHidden[j] + \">\")\r\n\t\t\t\t\tif (dt.length > 1) {\r\n\t\t\t\t\t\tvar at = dt[1].split(\"</\" + orderFildsHidden[j] + \">\")\r\n\t\t\t\t\t\tfullRecordData[pos_init + j] = at[0]\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tfullData.push(fullRecordData);\r\n\t\t\t}\r\n\t\t\t/*\tif (fullRecordData.length > this.maxLengthRecord) this.maxLengthRecord = fullRecordData.length;*/\r\n\t\t}\r\n\r\n\t\tif (orderFildsHidden != undefined) {\r\n\t\t\treturn [data, fullData];\r\n\t\t} else {\r\n\t\t\treturn data;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction OATgetAllDataFromXMLOldFormat(dataString, orderFilds, orderFildsHidden) {\r\n\t\tvar stringRecord = dataString.split(\"<Record>\")\r\n\r\n\t\tvar data = [];\r\n\t\tvar fullData = [];\r\n\t\tfor (var i = 1; i < stringRecord.length; i++) {\r\n\t\t\tvar recordData = [];\r\n\t\t\tvar fullRecordData = [];\r\n\t\t\tfor (var j = 0; j < orderFilds.length; j++) {\r\n\t\t\t\trecordData[j] = \"#NuN#\"\r\n\t\t\t\tvar dt = stringRecord[i].split(\"<\" + orderFilds[j] + \">\")\r\n\t\t\t\tif (dt.length > 1) {\r\n\t\t\t\t\tvar at = dt[1].split(\"</\" + orderFilds[j] + \">\")\r\n\t\t\t\t\t/*var rp = at[0].replace(/^\\s+|\\s+$/g, '')\r\n\t\t\t\t\trecordData[j] = (rp != \"\") ? rp : undefined*/\r\n\t\t\t\t\trecordData[j] = at[0]\r\n\t\t\t\t\tfullRecordData[j] = recordData[j]\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tdata.push(recordData);\r\n\r\n\t\t\tvar pos_init = orderFilds.length;\r\n\t\t\tfor (var j = 0; j < orderFildsHidden.length; j++) {\r\n\t\t\t\tfullRecordData[pos_init + j] = undefined\r\n\t\t\t\tvar dt = stringRecord[i].split(\"<\" + orderFildsHidden[j] + \">\")\r\n\t\t\t\tif (dt.length > 1) {\r\n\t\t\t\t\tvar at = dt[1].split(\"</\" + orderFildsHidden[j] + \">\")\r\n\t\t\t\t\tfullRecordData[pos_init + j] = at[0]\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfullData.push(fullRecordData);\r\n\t\t\t//if (fullRecordData.length > this.maxLengthRecord) this.maxLengthRecord = fullRecordData.length; \r\n\t\t}\r\n\r\n\t\treturn [data, fullData];\r\n\t}\r\n\r\n\tvar OATParseMetadata = function (metadata, hideDimension, hideMeasures, serverPaging, translations) {\r\n\t\t//Parsear string metadata para remover measures ocultas\r\n\t\tvar orderFildsHidden = []; var hideDataFilds = []; var nameFildsHidden = [];\r\n\r\n\t\tvar removeMeasures = []; //number of remove measures\r\n\t\tvar headMetadata;\r\n\t\tif (metadata.indexOf('<OLAPDimension') != -1) {\r\n\t\t\theadMetadata = metadata.substring(0, metadata.indexOf('<OLAPDimension'));\r\n\t\t} else {\r\n\t\t\theadMetadata = metadata.substring(0, metadata.indexOf('<OLAPMeasure'));\r\n\t\t}\r\n\t\tvar restMetadata = metadata.substring(metadata.indexOf('<OLAPDimension'), metadata.length);\r\n\r\n\t\tvar dimensionString = restMetadata.split(\"<OLAPDimension\");\r\n\t\tfor (var i = 1; i < dimensionString.length; i++) {\r\n\t\t\tif (dimensionString[i].length > 0) {\r\n\t\t\t\tif (dimensionString[i].indexOf('</OLAPDimension>') != -1) {\r\n\t\t\t\t\tdimensionString[i] = dimensionString[i].substring(0, dimensionString[i].indexOf('</OLAPDimension>'));\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdimensionString[i] = dimensionString[i].substring(0, dimensionString[i].indexOf('/>')) + \">\";\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar hide = false\r\n\t\t\t\tif ((hideDimension != undefined) && (hideDimension.length > 0)) {\r\n\t\t\t\t\tvar dataField = dimensionString[i].split(\"dataField=\\\"\")[1].split(\"\\\"\")[0]\r\n\t\t\t\t\thide = (hideDimension.indexOf(dataField) != -1)\r\n\t\t\t\t}\r\n\t\t\t\t//if (serverPaging) hide = false;\r\n\r\n\t\t\t\tif (( ((dimensionString[i].indexOf(\"visible=\\\"No\\\"\") != -1) || (dimensionString[i].indexOf(\"visible=\\\"Never\\\"\") != -1)) && (hideDimension == undefined)) ||\r\n\t\t\t\t\t(hide && (hideDimension != undefined))) {//hide dimension\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tif (dimensionString[i].indexOf(\"displayName=\") != -1) {\r\n\t\t\t\t\t\t\tvar infoDisplayName = dimensionString[i].substring(dimensionString[i].indexOf(\"displayName=\") + 13)\r\n\t\t\t\t\t\t\torderFildsHidden.push(infoDisplayName.split('\"')[0])\r\n\t\t\t\t\t\t\thideDataFilds.push(dimensionString[i].substring(dimensionString[i].indexOf(\"dataField=\") + 11).split('\"')[0])\r\n\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\tnameFildsHidden.push(dimensionString[i].substring(dimensionString[i].indexOf(\"name=\") + 6).split('\"')[0])\r\n\t\t\t\t\t\t\t} catch (ERROR) {\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} catch (ERROR) { }\r\n\t\t\t\t\tdimensionString[i] = \"\";\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdimensionString[i] = \"<OLAPDimension \" + dimensionString[i] + \"</OLAPDimension>\"\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tdimensionString[i] = \"\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar measuresString = restMetadata.split(\"<OLAPMeasure\");\r\n\t\tvar allHide = true;\r\n\t\tfor (var i = 1; i < measuresString.length; i++) {\r\n\r\n\t\t\tvar hide = false\r\n\t\t\tif ((hideMeasures != undefined) && (hideMeasures.length > 0)) {\r\n\t\t\t\tvar dataField = measuresString[i].split(\"dataField=\\\"\")[1].split(\"\\\"\")[0]\r\n\t\t\t\thide = (hideMeasures.indexOf(dataField) != -1)\r\n\t\t\t}\r\n\t\t\t//if (serverPaging) hide = false;\r\n\r\n\t\t\tif (!hide) {\r\n\t\t\t\tif (measuresString[i].indexOf(\"</OLAPMeasure\") != -1) {\r\n\t\t\t\t\tmeasuresString[i] = \"<OLAPMeasure \" + measuresString[i].substring(0, measuresString[i].indexOf('</OLAPMeasure>')) + \"</OLAPMeasure>\"\r\n\t\t\t\t} else if (measuresString[i].indexOf(\"/>\") != -1) {\r\n\t\t\t\t\tmeasuresString[i] = \"<OLAPMeasure \" + measuresString[i].substring(0, measuresString[i].indexOf('/>')) + \"/>\";\r\n\t\t\t\t} else {\r\n\t\t\t\t\tmeasuresString[i] = \"\";\r\n\t\t\t\t}\r\n\t\t\t\tallHide = false;\r\n\t\t\t} else {\r\n\t\t\t\tmeasuresString[i] = \"\";\r\n\t\t\t}\r\n\t\t}\r\n\t\tif ((serverPaging) && (allHide)) {\r\n\t\t\tmeasuresString.push('<OLAPMeasure name=\"Quantity\" displayName=\"' + translations.GXPL_QViewerQuantity/*gx.getMessage(\"GXPL_QViewerQuantity\")*/ + '\" description=\"' + translations.GXPL_QViewerQuantity + '\" dataField=\"F0\" aggregation=\"count\" summarize=\"yes\" align=\"right\" picture=\"\" targetValue=\"0\" defaultPosition=\"data\" validPositions=\"data\" dataType=\"integer\" format=\"borderThickness:1\"> </OLAPMeasure>');\r\n\t\t}\r\n\r\n\t\tvar taileMetadata = \"</OLAPCube>\";\r\n\r\n\t\tmetadata = \"\";\r\n\t\tmetadata = headMetadata;\r\n\t\tfor (var i = 1; i < dimensionString.length; i++) {\r\n\t\t\tif (dimensionString[i].length > 0) {\r\n\t\t\t\tmetadata = metadata + dimensionString[i];\r\n\t\t\t}\r\n\t\t}\r\n\t\tfor (var i = 1; i < measuresString.length; i++) {\r\n\t\t\tif (measuresString[i].length > 0) {\r\n\t\t\t\tmetadata = metadata + measuresString[i]\r\n\t\t\t}\r\n\t\t}\r\n\t\tmetadata = metadata + taileMetadata;\r\n\t\t//end parsing metadata\r\n\t\treturn [metadata, orderFildsHidden, hideDataFilds, nameFildsHidden]\r\n\t}\r\n\r\n\r\n\tvar OATGetColumnsAndMeasureMeatadata = function (columns, measures, formulaInfo, OrderFildsHidden) {\r\n\t\tvar preHeader = []; var columnNames = []; var rowNames = []; var filterNames = [];\r\n\t\tvar formatValues = []; var conditionalFormatsColumns = []; var formatValuesMeasures = []; var conditionalFormats = [];\r\n\t\tvar orderFilds = []; var j = 0; var k = 0; var columnsDataType = []; var measureNames = [];\r\n\t\tvar forPivotCustomPicture = []; var forPivotCustomFormat = [];\r\n\t\t//get columns\r\n\t\tfor (var i = 0; i < columns.length; i++) {\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tif ((columns[i].attributes.getNamedItem(\"axis\").nodeValue.toLowerCase() == \"rows\") ||\r\n\t\t\t\t(columns[i].attributes.getNamedItem(\"axis\").nodeValue == \"\")) {\r\n\t\t\t\tcolumnNames[j] = columns[i].attributes.getNamedItem(\"displayName\").nodeValue;\r\n\t\t\t\tpreHeader[i] = columnNames[j];\r\n\t\t\t\tj++;\r\n\t\t\t}\r\n\t\t\tif (columns[i].attributes.getNamedItem(\"axis\").nodeValue.toLowerCase() == \"columns\") {\r\n\t\t\t\trowNames[k] = columns[i].attributes.getNamedItem(\"displayName\").nodeValue;\r\n\t\t\t\tpreHeader[i] = rowNames[k];\r\n\t\t\t\tk++;\r\n\t\t\t}\r\n\t\t\tif (columns[i].attributes.getNamedItem(\"axis\").nodeValue.toLowerCase() == \"pages\") {\r\n\t\t\t\tfilterNames[k] = columns[i].attributes.getNamedItem(\"displayName\").nodeValue;\r\n\t\t\t\tpreHeader[i] = filterNames[k];\r\n\t\t\t\tk++;\r\n\t\t\t}\r\n\r\n\t\t\tcolumnsDataType[i] = columns[i].attributes.getNamedItem(\"dataType\").nodeValue;\r\n\t\t\t//handle formats values\r\n\t\t\tif (columns[i].childNodes.length > 0) {\r\n\t\t\t\tif (columns[i].childNodes != null) {\r\n\t\t\t\t\tfor (var m = 0; m < columns[i].childNodes.length; m++) {\r\n\t\t\t\t\t\tif (columns[i].childNodes[m].localName == \"formatValues\") {\r\n\t\t\t\t\t\t\tfor (var n = 0; n < columns[i].childNodes[m].childNodes.length; n++) {\r\n\t\t\t\t\t\t\t\tif (columns[i].childNodes[m].childNodes[n].localName == \"value\") {\r\n\t\t\t\t\t\t\t\t\tvar value = {};\r\n\t\t\t\t\t\t\t\t\tvalue.format = columns[i].childNodes[m].childNodes[n].attributes.getNamedItem(\"format\").nodeValue;\r\n\t\t\t\t\t\t\t\t\tvalue.recursive = columns[i].childNodes[m].childNodes[n].attributes.getNamedItem(\"recursive\").nodeValue;\r\n\t\t\t\t\t\t\t\t\tvar crude = columns[i].childNodes[m].childNodes[n].textContent;\r\n\t\t\t\t\t\t\t\t\tvalue.value = crude.replace(/^\\s+|\\s+$/g, '');\r\n\t\t\t\t\t\t\t\t\tvalue.columnNumber = i;\r\n\t\t\t\t\t\t\t\t\tformatValues.push(value);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}//handle conditional formats\r\n\t\t\tif (columns[i].childNodes.length > 0) {\r\n\t\t\t\tif (columns[i].childNodes != null) {\r\n\t\t\t\t\tfor (var m = 0; m < columns[i].childNodes.length; m++) {\r\n\t\t\t\t\t\tif (columns[i].childNodes[m].localName == \"conditionalFormats\") {\r\n\t\t\t\t\t\t\tfor (var n = 0; n < columns[i].childNodes[m].childNodes.length; n++) {\r\n\t\t\t\t\t\t\t\tif (columns[i].childNodes[m].childNodes[n].localName == \"rule\") {\r\n\t\t\t\t\t\t\t\t\tvar format = {};\r\n\t\t\t\t\t\t\t\t\tformat.format = columns[i].childNodes[m].childNodes[n].attributes.getNamedItem(\"format\").nodeValue;\r\n\t\t\t\t\t\t\t\t\tformat.operation1 = columns[i].childNodes[m].childNodes[n].attributes.getNamedItem(\"op1\").nodeValue;\r\n\t\t\t\t\t\t\t\t\tformat.value1 = columns[i].childNodes[m].childNodes[n].attributes.getNamedItem(\"value1\").nodeValue;\r\n\t\t\t\t\t\t\t\t\tif (columns[i].childNodes[m].childNodes[n].attributes.getNamedItem(\"op2\") != null) {\r\n\t\t\t\t\t\t\t\t\t\tformat.operation2 = columns[i].childNodes[m].childNodes[n].attributes.getNamedItem(\"op2\").nodeValue;\r\n\t\t\t\t\t\t\t\t\t\tformat.value2 = columns[i].childNodes[m].childNodes[n].attributes.getNamedItem(\"value2\").nodeValue;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tformat.columnNumber = i;\r\n\t\t\t\t\t\t\t\t\tconditionalFormatsColumns.push(format);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t//manage pictures\r\n\t\t\t/*if (columns[i].attributes.getNamedItem(\"picture\").nodeValue != \"\") {\r\n\t\t\t\tif (columns[i].attributes.getNamedItem(\"dataType\").nodeValue == \"date\") {\r\n\t\t\t\t\tdatePictures.push(columns[i].attributes.getNamedItem(\"picture\").nodeValue);\r\n\t\t\t\t\tdateFields.push(columns[i].attributes.getNamedItem(\"dataField\").nodeValue);\r\n\t\t\t\t}\r\n\t\t\t\t//if (columns[i].attributes.getNamedItem(\"dataType\").nodeValue == \"integer\" || measures[i].attributes.getNamedItem(\"dataType\").nodeValue == \"real\") {\r\n\t\t\t\tif (columns[i].attributes.getNamedItem(\"dataType\").nodeValue == \"integer\") {\r\n\t\t\t\t\tintPictures.push(columns[i].attributes.getNamedItem(\"picture\").nodeValue);\r\n\t\t\t\t\tintFields.push(columns[i].attributes.getNamedItem(\"dataField\").nodeValue);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t}*/\r\n\t\t\tforPivotCustomPicture.push(columns[i].attributes.getNamedItem(\"picture\").nodeValue);\r\n\t\t\tforPivotCustomFormat.push(columns[i].attributes.getNamedItem(\"format\").nodeValue);\r\n\t\t\torderFilds.push(columns[i].attributes.getNamedItem(\"dataField\").nodeValue);\r\n\r\n\t\t}\r\n\r\n\t\t//var measures;\r\n\t\tvar measureFormula = [];\r\n\t\tfor (var i = 0; i < measures.length; i++) {\r\n\r\n\t\t\tmeasureNames[i] = measures[i].attributes.getNamedItem(\"displayName\").nodeValue;\r\n\t\t\t//manage format values\r\n\t\t\tif (measures[i].childNodes.length > 0) {\r\n\t\t\t\tif (measures[i].childNodes != null) {\r\n\t\t\t\t\tfor (var m = 0; m < measures[i].childNodes.length; m++) {\r\n\t\t\t\t\t\tif (measures[i].childNodes[m].localName == \"formatValues\") {\r\n\t\t\t\t\t\t\tfor (var n = 0; n < measures[i].childNodes[m].childNodes.length; n++) {\r\n\t\t\t\t\t\t\t\tif (measures[i].childNodes[m].childNodes[n].localName == \"value\") {\r\n\t\t\t\t\t\t\t\t\tvar value = {};\r\n\t\t\t\t\t\t\t\t\tvalue.format = measures[i].childNodes[m].childNodes[n].attributes.getNamedItem(\"format\").nodeValue;\r\n\t\t\t\t\t\t\t\t\tvalue.recursive = measures[i].childNodes[m].childNodes[n].attributes.getNamedItem(\"recursive\").nodeValue;\r\n\t\t\t\t\t\t\t\t\tvar crude = measures[i].childNodes[m].childNodes[n].textContent;\r\n\t\t\t\t\t\t\t\t\tvalue.value = crude.replace(/^\\s+|\\s+$/g, '');\r\n\t\t\t\t\t\t\t\t\tvalue.columnNumber = i;\r\n\t\t\t\t\t\t\t\t\tformatValuesMeasures.push(value);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t//manage conditional formats\r\n\t\t\tif (measures[i].childNodes.length > 0) {\r\n\t\t\t\tif (measures[i].childNodes != null) {\r\n\t\t\t\t\tfor (var m = 0; m < measures[i].childNodes.length; m++) {\r\n\t\t\t\t\t\tif (measures[i].childNodes[m].localName == \"conditionalFormats\") {\r\n\t\t\t\t\t\t\tfor (var n = 0; n < measures[i].childNodes[m].childNodes.length; n++) {\r\n\t\t\t\t\t\t\t\tif (measures[i].childNodes[m].childNodes[n].localName == \"rule\") {\r\n\t\t\t\t\t\t\t\t\tvar format = {};\r\n\t\t\t\t\t\t\t\t\tformat.format = measures[i].childNodes[m].childNodes[n].attributes.getNamedItem(\"format\").nodeValue;\r\n\t\t\t\t\t\t\t\t\tformat.operation1 = measures[i].childNodes[m].childNodes[n].attributes.getNamedItem(\"op1\").nodeValue;\r\n\t\t\t\t\t\t\t\t\tformat.value1 = measures[i].childNodes[m].childNodes[n].attributes.getNamedItem(\"value1\").nodeValue;\r\n\t\t\t\t\t\t\t\t\tif (measures[i].childNodes[m].childNodes[n].attributes.getNamedItem(\"op2\") != null) {\r\n\t\t\t\t\t\t\t\t\t\tformat.operation2 = measures[i].childNodes[m].childNodes[n].attributes.getNamedItem(\"op2\").nodeValue;\r\n\t\t\t\t\t\t\t\t\t\tformat.value2 = measures[i].childNodes[m].childNodes[n].attributes.getNamedItem(\"value2\").nodeValue;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tformat.columnNumber = i; //+ columns.length; Only the measure number\r\n\t\t\t\t\t\t\t\t\tconditionalFormats.push(format);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t//manage pictures\r\n\t\t\t/*if (measures[i].attributes.getNamedItem(\"picture\").nodeValue != \"\") {\r\n\t\t\t\tif (measures[i].attributes.getNamedItem(\"dataType\").nodeValue == \"date\") {\r\n\t\t\t\t\tdatePictures.push(measures[i].attributes.getNamedItem(\"picture\").nodeValue);\r\n\t\t\t\t\tdateFields.push(measures[i].attributes.getNamedItem(\"dataField\").nodeValue);\r\n\t\t\t\t}\r\n\t\t\t\tif (measures[i].attributes.getNamedItem(\"dataType\").nodeValue == \"integer\" || measures[i].attributes.getNamedItem(\"dataType\").nodeValue == \"real\") {\r\n\t\t\t\t\tintPictures.push(measures[i].attributes.getNamedItem(\"picture\").nodeValue);\r\n\t\t\t\t\tintFields.push(measures[i].attributes.getNamedItem(\"dataField\").nodeValue);\r\n\t\t\t\t}\r\n\t\t\t}*/\r\n\r\n\t\t\t//manage formula\r\n\t\t\tif ((measures[i].attributes.getNamedItem(\"formula\") != undefined) && (measures[i].attributes.getNamedItem(\"formula\").nodeValue != \"\")) {\r\n\t\t\t\tmeasureFormula.push({ hasFormula: true, textFormula: measures[i].attributes.getNamedItem(\"formula\").nodeValue })\r\n\t\t\t} else {\r\n\t\t\t\tmeasureFormula.push({ hasFormula: false })\r\n\t\t\t}\r\n\r\n\t\t\tforPivotCustomPicture.push(measures[i].attributes.getNamedItem(\"picture\").nodeValue);\r\n\t\t\torderFilds.push(measures[i].attributes.getNamedItem(\"dataField\").nodeValue);\r\n\t\t}\r\n\r\n\r\n\t\tvar furmulaIndex = {}\r\n\t\tfor (var j = 0; j < OrderFildsHidden.length; j++) {\r\n\t\t\tfurmulaIndex[OrderFildsHidden[j]] = orderFilds.length + j\r\n\t\t}\r\n\t\tformulaInfo.itemPosition = furmulaIndex\r\n\t\t//formulaInfo.recordDataLength = this.maxLengthRecord;\r\n\t\tformulaInfo.measureFormula = measureFormula\r\n\t\tformulaInfo.cantFormulaMeasures = 0;\r\n\r\n\t\tfor (var n = 0; n < formulaInfo.measureFormula.length; n++) {\r\n\t\t\tif (formulaInfo.measureFormula[n].hasFormula) {\r\n\t\t\t\tformulaInfo.cantFormulaMeasures++;\r\n\r\n\t\t\t\tvar inlineFormula = formulaInfo.measureFormula[n].textFormula\r\n\r\n\t\t\t\tvar inline = inlineFormula\r\n\t\t\t\tvar opers = ['*', '-', '+', '/', '(', ')']\r\n\t\t\t\tfor (var j = 0; j < opers.length; j++) {\r\n\t\t\t\t\tvar inline2 = inline.split(opers[j])\r\n\t\t\t\t\tif (inline2.length > 1) {\r\n\t\t\t\t\t\tinline = \"\"\r\n\t\t\t\t\t\tfor (var i = 0; i < inline2.length - 1; i++) {\r\n\t\t\t\t\t\t\tinline = inline + inline2[i] + \" \" + opers[j] + \" \"\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tinline = inline + inline2[inline2.length - 1]\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar polishNot = InfixToPostfix(inline)\r\n\t\t\t\tformulaInfo.measureFormula[n].polishNotationText = polishNot\r\n\t\t\t\tvar items = polishNot.split(\" \")\r\n\t\t\t\twhile (items.indexOf(\"\") != -1) {\r\n\t\t\t\t\titems.splice(items.indexOf(\"\"), 1)\r\n\t\t\t\t}\r\n\t\t\t\tvar relatedMeasure = []\r\n\t\t\t\tfor (var k = 0; k < items.length; k++) {\r\n\t\t\t\t\tif ((opers.indexOf(items[k]) == -1) && (isNaN(parseInt(items[k])))) {\r\n\t\t\t\t\t\t//add item\r\n\t\t\t\t\t\tvar operPositionInDataRow = formulaInfo.itemPosition[items[k]]\r\n\t\t\t\t\t\tif (relatedMeasure.indexOf(operPositionInDataRow) == -1)\r\n\t\t\t\t\t\t\trelatedMeasure.push(operPositionInDataRow)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tformulaInfo.measureFormula[n].relatedMeasures = relatedMeasure\r\n\r\n\t\t\t\tvar arrayNot = polishNot.split(\" \")\r\n\t\t\t\twhile (arrayNot.indexOf(\"\") != -1) {\r\n\t\t\t\t\tarrayNot.splice(arrayNot.indexOf(\"\"), 1)\r\n\t\t\t\t}\r\n\t\t\t\tformulaInfo.measureFormula[n].PolishNotation = arrayNot\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn [preHeader.concat(measureNames), orderFilds, measureFormula, conditionalFormats, conditionalFormatsColumns, forPivotCustomPicture, forPivotCustomFormat];\r\n\t}\r\n\r\n\r\n\tvar OATgetState = function (query, controlName) {\r\n\t\tif (typeof JSON.retrocycle !== 'function') {\r\n\t\t\tJSON.retrocycle = function retrocycle($) {\r\n\t\t\t\t'use strict';\r\n\r\n\t\t\t\tvar px =\r\n\t\t\t\t\t/^\\$(?:\\[(?:\\d+|\\\"(?:[^\\\\\\\"\\u0000-\\u001f]|\\\\([\\\\\\\"\\/bfnrt]|u[0-9a-zA-Z]{4}))*\\\")\\])*$/;\r\n\t\t\t\t(function rez(value) {\r\n\t\t\t\t\tvar i, item, name, path;\r\n\t\t\t\t\tif (value && typeof value === 'object') {\r\n\t\t\t\t\t\tif (Object.prototype.toString.apply(value) === '[object Array]') {\r\n\t\t\t\t\t\t\tfor (i = 0; i < value.length; i += 1) {\r\n\t\t\t\t\t\t\t\titem = value[i];\r\n\t\t\t\t\t\t\t\tif (item && typeof item === 'object') {\r\n\t\t\t\t\t\t\t\t\tpath = item.$ref;\r\n\t\t\t\t\t\t\t\t\tif (typeof path === 'string' && px.test(path)) {\r\n\t\t\t\t\t\t\t\t\t\tvalue[i] = eval(path);\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\trez(item);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tfor (name in value) {\r\n\t\t\t\t\t\t\t\tif (typeof value[name] === 'object') {\r\n\t\t\t\t\t\t\t\t\titem = value[name];\r\n\t\t\t\t\t\t\t\t\tif (item) {\r\n\t\t\t\t\t\t\t\t\t\tpath = item.$ref;\r\n\t\t\t\t\t\t\t\t\t\tif (typeof path === 'string' && px.test(path)) {\r\n\t\t\t\t\t\t\t\t\t\t\tvalue[name] = eval(path);\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\trez(item);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}($));\r\n\t\t\t\treturn $;\r\n\t\t\t};\r\n\t\t}\r\n\t\ttry {\r\n\t\t\tvar i;\r\n\t\t\tif (localStorage.getItem(OAT.getURL() + query + controlName + \"HiddenState\") != null) {\r\n\t\t\t\tvar retrievedObject = localStorage.getItem(OAT.getURL() + query + controlName + \"HiddenState\");\r\n\t\t\t\ti = JSON.retrocycle(JSON.parse(retrievedObject));\r\n\t\t\t}\r\n\r\n\t\t\tif (i == null) {\r\n\t\t\t\tvar cookieValue = OATGetCookie('\"' + OAT.getURL() + query + controlName + \"HiddenState\" + 'cookie' + '\"')\r\n\t\t\t\tif (cookieValue != null) {\r\n\t\t\t\t\ti = JSON.parse(cookieValue)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn i;\r\n\t\t} catch (error) {\r\n\t\t\ttry {\r\n\t\t\t\tvar cookieValue = OATGetCookie('\"' + OAT.getURL() + query + controlName + \"HiddenState\" + 'cookie' + '\"')\r\n\t\t\t\tvar i = JSON.parse(cookieValue)\r\n\t\t\t\treturn i\r\n\t\t\t} catch (error) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tfunction init() {\r\n\r\n\t}\r\n\t\r\n\t\r\n\t//FILE OAT.Layers\r\n\tOAT.Layers = function (f) {\r\n\t\tvar a = this;\r\n\t\tthis.baseOffset = f;\r\n\t\tthis.layers = [];\r\n\t\tthis.currentIndex = 0;\r\n\t\tthis.raise = function (b) {\r\n\t\t\tif (-1 != a.layers.indexOf(b)) {\r\n\t\t\t\tfor (var d = b.style.zIndex, c = 0; c < a.layers.length; c++) {\r\n\t\t\t\t\tvar e = a.layers[c];\r\n\t\t\t\t\te.style.zIndex > d && e.style.zIndex--\r\n\t\t\t\t}\r\n\t\t\t\tb.style.zIndex = a.currentIndex\r\n\t\t\t}\r\n\t\t};\r\n\t\tthis.addLayer = function (b, d) {\r\n\t\t\tvar c = OAT.$(b);\r\n\t\t\tc && (a.currentIndex++ , c.style.zIndex = a.currentIndex, a.layers.push(c), OAT.Dom.attach(c, d ? d : \"mousedown\", function () {\r\n\t\t\t\ta.raise(c)\r\n\t\t\t}))\r\n\t\t};\r\n\t\tthis.removeLayer = function (b) {\r\n\t\t\tb = OAT.$(b);\r\n\t\t\tb = a.layers.indexOf(b);\r\n\t\t\t-1 != b && a.layers.splice(b, 1)\r\n\t\t};\r\n\t\ta.currentIndex = a.baseOffset\r\n\t};\r\n\r\n\r\n\r\n\r\n\r\n\r\n\t; (function () {\r\n\t\t/*jshint eqeqeq:false curly:false latedef:false */\r\n\t\t\"use strict\";\r\n\r\n\t\tfunction setup($) {\r\n\t\t\t$.fn._fadeIn = $.fn.fadeIn;\r\n\r\n\t\t\tvar noOp = $.noop || function () { };\r\n\r\n\t\t\t// this bit is to ensure we don't call setExpression when we shouldn't (with extra muscle to handle\r\n\t\t\t// confusing userAgent strings on Vista)\r\n\t\t\tvar msie = /MSIE/.test(navigator.userAgent);\r\n\t\t\tvar ie6 = /MSIE 6.0/.test(navigator.userAgent) && ! /MSIE 8.0/.test(navigator.userAgent);\r\n\t\t\tvar mode = document.documentMode || 0;\r\n\t\t\tvar setExpr = $.isFunction(document.createElement('div').style.setExpression);\r\n\r\n\t\t\t// global $ methods for blocking/unblocking the entire page\r\n\t\t\t$.blockUI = function (opts) { install(window, opts); };\r\n\t\t\t$.unblockUI = function (opts) { remove(window, opts); };\r\n\r\n\t\t\t// convenience method for quick growl-like notifications  (http://www.google.com/search?q=growl)\r\n\t\t\t$.growlUI = function (title, message, timeout, onClose) {\r\n\t\t\t\tvar $m = $('<div class=\"growlUI\"></div>');\r\n\t\t\t\tif (title) $m.append('<h1>' + title + '</h1>');\r\n\t\t\t\tif (message) $m.append('<h2>' + message + '</h2>');\r\n\t\t\t\tif (timeout === undefined) timeout = 3000;\r\n\r\n\t\t\t\t// Added by konapun: Set timeout to 30 seconds if this growl is moused over, like normal toast notifications\r\n\t\t\t\tvar callBlock = function (opts) {\r\n\t\t\t\t\topts = opts || {};\r\n\r\n\t\t\t\t\t$.blockUI({\r\n\t\t\t\t\t\tmessage: $m,\r\n\t\t\t\t\t\tfadeIn: typeof opts.fadeIn !== 'undefined' ? opts.fadeIn : 700,\r\n\t\t\t\t\t\tfadeOut: typeof opts.fadeOut !== 'undefined' ? opts.fadeOut : 1000,\r\n\t\t\t\t\t\ttimeout: typeof opts.timeout !== 'undefined' ? opts.timeout : timeout,\r\n\t\t\t\t\t\tcenterY: false,\r\n\t\t\t\t\t\tshowOverlay: false,\r\n\t\t\t\t\t\tonUnblock: onClose,\r\n\t\t\t\t\t\tcss: $.blockUI.defaults.growlCSS\r\n\t\t\t\t\t});\r\n\t\t\t\t};\r\n\r\n\t\t\t\tcallBlock();\r\n\t\t\t\tvar nonmousedOpacity = $m.css('opacity');\r\n\t\t\t\t$m.mouseover(function () {\r\n\t\t\t\t\tcallBlock({\r\n\t\t\t\t\t\tfadeIn: 0,\r\n\t\t\t\t\t\ttimeout: 30000\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tvar displayBlock = $('.blockMsg');\r\n\t\t\t\t\tdisplayBlock.stop(); // cancel fadeout if it has started\r\n\t\t\t\t\tdisplayBlock.fadeTo(300, 1); // make it easier to read the message by removing transparency\r\n\t\t\t\t}).mouseout(function () {\r\n\t\t\t\t\t$('.blockMsg').fadeOut(1000);\r\n\t\t\t\t});\r\n\t\t\t\t// End konapun additions\r\n\t\t\t};\r\n\r\n\t\t\t// plugin method for blocking element content\r\n\t\t\t$.fn.block = function (opts) {\r\n\t\t\t\tif (this[0] === window) {\r\n\t\t\t\t\t$.blockUI(opts);\r\n\t\t\t\t\treturn this;\r\n\t\t\t\t}\r\n\t\t\t\tvar fullOpts = $.extend({}, $.blockUI.defaults, opts || {});\r\n\t\t\t\tthis.each(function () {\r\n\t\t\t\t\tvar $el = $(this);\r\n\t\t\t\t\tif (fullOpts.ignoreIfBlocked && $el.data('blockUI.isBlocked'))\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t$el.unblock({ fadeOut: 0 });\r\n\t\t\t\t});\r\n\r\n\t\t\t\treturn this.each(function () {\r\n\t\t\t\t\tif ($.css(this, 'position') == 'static') {\r\n\t\t\t\t\t\tthis.style.position = 'relative';\r\n\t\t\t\t\t\t$(this).data('blockUI.static', true);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.style.zoom = 1; // force 'hasLayout' in ie\r\n\t\t\t\t\tinstall(this, opts);\r\n\t\t\t\t});\r\n\t\t\t};\r\n\r\n\t\t\t// plugin method for unblocking element content\r\n\t\t\t$.fn.unblock = function (opts) {\r\n\t\t\t\tif (this[0] === window) {\r\n\t\t\t\t\t$.unblockUI(opts);\r\n\t\t\t\t\treturn this;\r\n\t\t\t\t}\r\n\t\t\t\treturn this.each(function () {\r\n\t\t\t\t\tremove(this, opts);\r\n\t\t\t\t});\r\n\t\t\t};\r\n\r\n\t\t\t$.blockUI.version = 2.70; // 2nd generation blocking at no extra cost!\r\n\r\n\t\t\t// override these in your code to change the default behavior and style\r\n\t\t\t$.blockUI.defaults = {\r\n\t\t\t\t// message displayed when blocking (use null for no message)\r\n\t\t\t\tmessage: '<h1>Please wait...</h1>',\r\n\r\n\t\t\t\ttitle: null,\t\t// title string; only used when theme == true\r\n\t\t\t\tdraggable: true,\t// only used when theme == true (requires jquery-ui.js to be loaded)\r\n\r\n\t\t\t\ttheme: false, // set to true to use with jQuery UI themes\r\n\r\n\t\t\t\t// styles for the message when blocking; if you wish to disable\r\n\t\t\t\t// these and use an external stylesheet then do this in your code:\r\n\t\t\t\t// $.blockUI.defaults.css = {};\r\n\t\t\t\tcss: {\r\n\t\t\t\t\tpadding: 0,\r\n\t\t\t\t\tmargin: 0,\r\n\t\t\t\t\twidth: '30%',\r\n\t\t\t\t\ttop: '40%',\r\n\t\t\t\t\tleft: '35%',\r\n\t\t\t\t\ttextAlign: 'center',\r\n\t\t\t\t\tcolor: '#000',\r\n\t\t\t\t\tborder: '3px solid #aaa',\r\n\t\t\t\t\tbackgroundColor: '#fff',\r\n\t\t\t\t\tcursor: 'wait'\r\n\t\t\t\t},\r\n\r\n\t\t\t\t// minimal style set used when themes are used\r\n\t\t\t\tthemedCSS: {\r\n\t\t\t\t\twidth: '30%',\r\n\t\t\t\t\ttop: '40%',\r\n\t\t\t\t\tleft: '35%'\r\n\t\t\t\t},\r\n\r\n\t\t\t\t// styles for the overlay\r\n\t\t\t\toverlayCSS: {\r\n\t\t\t\t\tbackgroundColor: '#000',\r\n\t\t\t\t\topacity: 0.1,\r\n\t\t\t\t\tcursor: 'wait'\r\n\t\t\t\t},\r\n\r\n\t\t\t\t// style to replace wait cursor before unblocking to correct issue\r\n\t\t\t\t// of lingering wait cursor\r\n\t\t\t\tcursorReset: 'default',\r\n\r\n\t\t\t\t// styles applied when using $.growlUI\r\n\t\t\t\tgrowlCSS: {\r\n\t\t\t\t\twidth: '350px',\r\n\t\t\t\t\ttop: '10px',\r\n\t\t\t\t\tleft: '',\r\n\t\t\t\t\tright: '10px',\r\n\t\t\t\t\tborder: 'none',\r\n\t\t\t\t\tpadding: '5px',\r\n\t\t\t\t\topacity: 0.6,\r\n\t\t\t\t\tcursor: 'default',\r\n\t\t\t\t\tcolor: '#fff',\r\n\t\t\t\t\tbackgroundColor: '#000',\r\n\t\t\t\t\t'-webkit-border-radius': '10px',\r\n\t\t\t\t\t'-moz-border-radius': '10px',\r\n\t\t\t\t\t'border-radius': '10px'\r\n\t\t\t\t},\r\n\r\n\t\t\t\t// IE issues: 'about:blank' fails on HTTPS and javascript:false is s-l-o-w\r\n\t\t\t\t// (hat tip to Jorge H. N. de Vasconcelos)\r\n\t\t\t\t/*jshint scripturl:true */\r\n\t\t\t\tiframeSrc: /^https/i.test(window.location.href || '') ? 'javascript:false' : 'about:blank',\r\n\r\n\t\t\t\t// force usage of iframe in non-IE browsers (handy for blocking applets)\r\n\t\t\t\tforceIframe: false,\r\n\r\n\t\t\t\t// z-index for the blocking overlay\r\n\t\t\t\tbaseZ: 1000,\r\n\r\n\t\t\t\t// set these to true to have the message automatically centered\r\n\t\t\t\tcenterX: true, // <-- only effects element blocking (page block controlled via css above)\r\n\t\t\t\tcenterY: true,\r\n\r\n\t\t\t\t// allow body element to be stetched in ie6; this makes blocking look better\r\n\t\t\t\t// on \"short\" pages.  disable if you wish to prevent changes to the body height\r\n\t\t\t\tallowBodyStretch: true,\r\n\r\n\t\t\t\t// enable if you want key and mouse events to be disabled for content that is blocked\r\n\t\t\t\tbindEvents: true,\r\n\r\n\t\t\t\t// be default blockUI will supress tab navigation from leaving blocking content\r\n\t\t\t\t// (if bindEvents is true)\r\n\t\t\t\tconstrainTabKey: true,\r\n\r\n\t\t\t\t// fadeIn time in millis; set to 0 to disable fadeIn on block\r\n\t\t\t\tfadeIn: 200,\r\n\r\n\t\t\t\t// fadeOut time in millis; set to 0 to disable fadeOut on unblock\r\n\t\t\t\tfadeOut: 400,\r\n\r\n\t\t\t\t// time in millis to wait before auto-unblocking; set to 0 to disable auto-unblock\r\n\t\t\t\ttimeout: 0,\r\n\r\n\t\t\t\t// disable if you don't want to show the overlay\r\n\t\t\t\tshowOverlay: true,\r\n\r\n\t\t\t\t// if true, focus will be placed in the first available input field when\r\n\t\t\t\t// page blocking\r\n\t\t\t\tfocusInput: true,\r\n\r\n\t\t\t\t// elements that can receive focus\r\n\t\t\t\tfocusableElements: ':input:enabled:visible',\r\n\r\n\t\t\t\t// suppresses the use of overlay styles on FF/Linux (due to performance issues with opacity)\r\n\t\t\t\t// no longer needed in 2012\r\n\t\t\t\t// applyPlatformOpacityRules: true,\r\n\r\n\t\t\t\t// callback method invoked when fadeIn has completed and blocking message is visible\r\n\t\t\t\tonBlock: null,\r\n\r\n\t\t\t\t// callback method invoked when unblocking has completed; the callback is\r\n\t\t\t\t// passed the element that has been unblocked (which is the window object for page\r\n\t\t\t\t// blocks) and the options that were passed to the unblock call:\r\n\t\t\t\t//\tonUnblock(element, options)\r\n\t\t\t\tonUnblock: null,\r\n\r\n\t\t\t\t// callback method invoked when the overlay area is clicked.\r\n\t\t\t\t// setting this will turn the cursor to a pointer, otherwise cursor defined in overlayCss will be used.\r\n\t\t\t\tonOverlayClick: null,\r\n\r\n\t\t\t\t// don't ask; if you really must know: http://groups.google.com/group/jquery-en/browse_thread/thread/36640a8730503595/2f6a79a77a78e493#2f6a79a77a78e493\r\n\t\t\t\tquirksmodeOffsetHack: 4,\r\n\r\n\t\t\t\t// class name of the message block\r\n\t\t\t\tblockMsgClass: 'blockMsg',\r\n\r\n\t\t\t\t// if it is already blocked, then ignore it (don't unblock and reblock)\r\n\t\t\t\tignoreIfBlocked: false\r\n\t\t\t};\r\n\r\n\t\t\t// private data and functions follow...\r\n\r\n\t\t\tvar pageBlock = null;\r\n\t\t\tvar pageBlockEls = [];\r\n\r\n\t\t\tfunction install(el, opts) {\r\n\t\t\t\tvar css, themedCSS;\r\n\t\t\t\tvar full = (el == window);\r\n\t\t\t\tvar msg = (opts && opts.message !== undefined ? opts.message : undefined);\r\n\t\t\t\topts = $.extend({}, $.blockUI.defaults, opts || {});\r\n\r\n\t\t\t\tif (opts.ignoreIfBlocked && $(el).data('blockUI.isBlocked'))\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\topts.overlayCSS = $.extend({}, $.blockUI.defaults.overlayCSS, opts.overlayCSS || {});\r\n\t\t\t\tcss = $.extend({}, $.blockUI.defaults.css, opts.css || {});\r\n\t\t\t\tif (opts.onOverlayClick)\r\n\t\t\t\t\topts.overlayCSS.cursor = 'pointer';\r\n\r\n\t\t\t\tthemedCSS = $.extend({}, $.blockUI.defaults.themedCSS, opts.themedCSS || {});\r\n\t\t\t\tmsg = msg === undefined ? opts.message : msg;\r\n\r\n\t\t\t\t// remove the current block (if there is one)\r\n\t\t\t\tif (full && pageBlock)\r\n\t\t\t\t\tremove(window, { fadeOut: 0 });\r\n\r\n\t\t\t\t// if an existing element is being used as the blocking content then we capture\r\n\t\t\t\t// its current place in the DOM (and current display style) so we can restore\r\n\t\t\t\t// it when we unblock\r\n\t\t\t\tif (msg && typeof msg != 'string' && (msg.parentNode || msg.jquery)) {\r\n\t\t\t\t\tvar node = msg.jquery ? msg[0] : msg;\r\n\t\t\t\t\tvar data = {};\r\n\t\t\t\t\t$(el).data('blockUI.history', data);\r\n\t\t\t\t\tdata.el = node;\r\n\t\t\t\t\tdata.parent = node.parentNode;\r\n\t\t\t\t\tdata.display = node.style.display;\r\n\t\t\t\t\tdata.position = node.style.position;\r\n\t\t\t\t\tif (data.parent)\r\n\t\t\t\t\t\tdata.parent.removeChild(node);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t$(el).data('blockUI.onUnblock', opts.onUnblock);\r\n\t\t\t\tvar z = opts.baseZ;\r\n\r\n\t\t\t\t// blockUI uses 3 layers for blocking, for simplicity they are all used on every platform;\r\n\t\t\t\t// layer1 is the iframe layer which is used to supress bleed through of underlying content\r\n\t\t\t\t// layer2 is the overlay layer which has opacity and a wait cursor (by default)\r\n\t\t\t\t// layer3 is the message content that is displayed while blocking\r\n\t\t\t\tvar lyr1, lyr2, lyr3, s;\r\n\t\t\t\tif (msie || opts.forceIframe)\r\n\t\t\t\t\tlyr1 = $('<iframe class=\"blockUI\" style=\"z-index:' + (z++) + ';display:none;border:none;margin:0;padding:0;position:absolute;width:100%;height:100%;top:0;left:0\" src=\"' + opts.iframeSrc + '\"></iframe>');\r\n\t\t\t\telse\r\n\t\t\t\t\tlyr1 = $('<div class=\"blockUI\" style=\"display:none\"></div>');\r\n\r\n\t\t\t\tif (opts.theme)\r\n\t\t\t\t\tlyr2 = $('<div class=\"blockUI blockOverlay ui-widget-overlay\" style=\"z-index:' + (z++) + ';display:none\"></div>');\r\n\t\t\t\telse\r\n\t\t\t\t\tlyr2 = $('<div class=\"blockUI blockOverlay\" style=\"z-index:' + (z++) + ';display:none;border:none;margin:0;padding:0;width:100%;height:100%;top:0;left:0\"></div>');\r\n\r\n\t\t\t\tif (opts.theme && full) {\r\n\t\t\t\t\ts = '<div class=\"blockUI ' + opts.blockMsgClass + ' blockPage ui-dialog ui-widget ui-corner-all\" style=\"z-index:' + (z + 10) + ';display:none;position:fixed\">';\r\n\t\t\t\t\tif (opts.title) {\r\n\t\t\t\t\t\ts += '<div class=\"ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle\">' + (opts.title || '&nbsp;') + '</div>';\r\n\t\t\t\t\t}\r\n\t\t\t\t\ts += '<div class=\"ui-widget-content ui-dialog-content\"></div>';\r\n\t\t\t\t\ts += '</div>';\r\n\t\t\t\t}\r\n\t\t\t\telse if (opts.theme) {\r\n\t\t\t\t\ts = '<div class=\"blockUI ' + opts.blockMsgClass + ' blockElement ui-dialog ui-widget ui-corner-all\" style=\"z-index:' + (z + 10) + ';display:none;position:absolute\">';\r\n\t\t\t\t\tif (opts.title) {\r\n\t\t\t\t\t\ts += '<div class=\"ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle\">' + (opts.title || '&nbsp;') + '</div>';\r\n\t\t\t\t\t}\r\n\t\t\t\t\ts += '<div class=\"ui-widget-content ui-dialog-content\"></div>';\r\n\t\t\t\t\ts += '</div>';\r\n\t\t\t\t}\r\n\t\t\t\telse if (full) {\r\n\t\t\t\t\ts = '<div class=\"blockUI ' + opts.blockMsgClass + ' blockPage\" style=\"z-index:' + (z + 10) + ';display:none;position:fixed\"></div>';\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\ts = '<div class=\"blockUI ' + opts.blockMsgClass + ' blockElement\" style=\"z-index:' + (z + 10) + ';display:none;position:absolute\"></div>';\r\n\t\t\t\t}\r\n\t\t\t\tlyr3 = $(s);\r\n\r\n\t\t\t\t// if we have a message, style it\r\n\t\t\t\tif (msg) {\r\n\t\t\t\t\tif (opts.theme) {\r\n\t\t\t\t\t\tlyr3.css(themedCSS);\r\n\t\t\t\t\t\tlyr3.addClass('ui-widget-content');\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tlyr3.css(css);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// style the overlay\r\n\t\t\t\tif (!opts.theme /*&& (!opts.applyPlatformOpacityRules)*/)\r\n\t\t\t\t\tlyr2.css(opts.overlayCSS);\r\n\t\t\t\tlyr2.css('position', full ? 'fixed' : 'absolute');\r\n\r\n\t\t\t\t// make iframe layer transparent in IE\r\n\t\t\t\tif (msie || opts.forceIframe)\r\n\t\t\t\t\tlyr1.css('opacity', 0.0);\r\n\r\n\t\t\t\t//$([lyr1[0],lyr2[0],lyr3[0]]).appendTo(full ? 'body' : el);\r\n\t\t\t\tvar layers = [lyr1, lyr2, lyr3], $par = full ? $('body') : $(el);\r\n\t\t\t\t$.each(layers, function () {\r\n\t\t\t\t\tthis.appendTo($par);\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif (opts.theme && opts.draggable && $.fn.draggable) {\r\n\t\t\t\t\tlyr3.draggable({\r\n\t\t\t\t\t\thandle: '.ui-dialog-titlebar',\r\n\t\t\t\t\t\tcancel: 'li'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// ie7 must use absolute positioning in quirks mode and to account for activex issues (when scrolling)\r\n\t\t\t\tvar expr = setExpr && (!$.support.boxModel || $('object,embed', full ? null : el).length > 0);\r\n\t\t\t\tif (ie6 || expr) {\r\n\t\t\t\t\t// give body 100% height\r\n\t\t\t\t\tif (full && opts.allowBodyStretch && $.support.boxModel)\r\n\t\t\t\t\t\t$('html,body').css('height', '100%');\r\n\r\n\t\t\t\t\t// fix ie6 issue when blocked element has a border width\r\n\t\t\t\t\tif ((ie6 || !$.support.boxModel) && !full) {\r\n\t\t\t\t\t\tvar t = sz(el, 'borderTopWidth'), l = sz(el, 'borderLeftWidth');\r\n\t\t\t\t\t\tvar fixT = t ? '(0 - ' + t + ')' : 0;\r\n\t\t\t\t\t\tvar fixL = l ? '(0 - ' + l + ')' : 0;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// simulate fixed position\r\n\t\t\t\t\t$.each(layers, function (i, o) {\r\n\t\t\t\t\t\tvar s = o[0].style;\r\n\t\t\t\t\t\ts.position = 'absolute';\r\n\t\t\t\t\t\tif (i < 2) {\r\n\t\t\t\t\t\t\tif (full)\r\n\t\t\t\t\t\t\t\ts.setExpression('height', 'Math.max(document.body.scrollHeight, document.body.offsetHeight) - (jQuery.support.boxModel?0:' + opts.quirksmodeOffsetHack + ') + \"px\"');\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\ts.setExpression('height', 'this.parentNode.offsetHeight + \"px\"');\r\n\t\t\t\t\t\t\tif (full)\r\n\t\t\t\t\t\t\t\ts.setExpression('width', 'jQuery.support.boxModel && document.documentElement.clientWidth || document.body.clientWidth + \"px\"');\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\ts.setExpression('width', 'this.parentNode.offsetWidth + \"px\"');\r\n\t\t\t\t\t\t\tif (fixL) s.setExpression('left', fixL);\r\n\t\t\t\t\t\t\tif (fixT) s.setExpression('top', fixT);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if (opts.centerY) {\r\n\t\t\t\t\t\t\tif (full) s.setExpression('top', '(document.documentElement.clientHeight || document.body.clientHeight) / 2 - (this.offsetHeight / 2) + (blah = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + \"px\"');\r\n\t\t\t\t\t\t\ts.marginTop = 0;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if (!opts.centerY && full) {\r\n\t\t\t\t\t\t\tvar top = (opts.css && opts.css.top) ? parseInt(opts.css.top, 10) : 0;\r\n\t\t\t\t\t\t\tvar expression = '((document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + ' + top + ') + \"px\"';\r\n\t\t\t\t\t\t\ts.setExpression('top', expression);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// show the message\r\n\t\t\t\tif (msg) {\r\n\t\t\t\t\tif (opts.theme)\r\n\t\t\t\t\t\tlyr3.find('.ui-widget-content').append(msg);\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tlyr3.append(msg);\r\n\t\t\t\t\tif (msg.jquery || msg.nodeType)\r\n\t\t\t\t\t\t$(msg).show();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ((msie || opts.forceIframe) && opts.showOverlay)\r\n\t\t\t\t\tlyr1.show(); // opacity is zero\r\n\t\t\t\tif (opts.fadeIn) {\r\n\t\t\t\t\tvar cb = opts.onBlock ? opts.onBlock : noOp;\r\n\t\t\t\t\tvar cb1 = (opts.showOverlay && !msg) ? cb : noOp;\r\n\t\t\t\t\tvar cb2 = msg ? cb : noOp;\r\n\t\t\t\t\tif (opts.showOverlay)\r\n\t\t\t\t\t\tlyr2._fadeIn(opts.fadeIn, cb1);\r\n\t\t\t\t\tif (msg)\r\n\t\t\t\t\t\tlyr3._fadeIn(opts.fadeIn, cb2);\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tif (opts.showOverlay)\r\n\t\t\t\t\t\tlyr2.show();\r\n\t\t\t\t\tif (msg)\r\n\t\t\t\t\t\tlyr3.show();\r\n\t\t\t\t\tif (opts.onBlock)\r\n\t\t\t\t\t\topts.onBlock.bind(lyr3)();\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// bind key and mouse events\r\n\t\t\t\tbind(1, el, opts);\r\n\r\n\t\t\t\tif (full) {\r\n\t\t\t\t\tpageBlock = lyr3[0];\r\n\t\t\t\t\tpageBlockEls = $(opts.focusableElements, pageBlock);\r\n\t\t\t\t\tif (opts.focusInput)\r\n\t\t\t\t\t\tsetTimeout(focus, 20);\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t\tcenter(lyr3[0], opts.centerX, opts.centerY);\r\n\r\n\t\t\t\tif (opts.timeout) {\r\n\t\t\t\t\t// auto-unblock\r\n\t\t\t\t\tvar to = setTimeout(function () {\r\n\t\t\t\t\t\tif (full)\r\n\t\t\t\t\t\t\t$.unblockUI(opts);\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t$(el).unblock(opts);\r\n\t\t\t\t\t}, opts.timeout);\r\n\t\t\t\t\t$(el).data('blockUI.timeout', to);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// remove the block\r\n\t\t\tfunction remove(el, opts) {\r\n\t\t\t\tvar count;\r\n\t\t\t\tvar full = (el == window);\r\n\t\t\t\tvar $el = $(el);\r\n\t\t\t\tvar data = $el.data('blockUI.history');\r\n\t\t\t\tvar to = $el.data('blockUI.timeout');\r\n\t\t\t\tif (to) {\r\n\t\t\t\t\tclearTimeout(to);\r\n\t\t\t\t\t$el.removeData('blockUI.timeout');\r\n\t\t\t\t}\r\n\t\t\t\topts = $.extend({}, $.blockUI.defaults, opts || {});\r\n\t\t\t\tbind(0, el, opts); // unbind events\r\n\r\n\t\t\t\tif (opts.onUnblock === null) {\r\n\t\t\t\t\topts.onUnblock = $el.data('blockUI.onUnblock');\r\n\t\t\t\t\t$el.removeData('blockUI.onUnblock');\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar els;\r\n\t\t\t\tif (full) // crazy selector to handle odd field errors in ie6/7\r\n\t\t\t\t\tels = $('body').children().filter('.blockUI').add('body > .blockUI');\r\n\t\t\t\telse\r\n\t\t\t\t\tels = $el.find('>.blockUI');\r\n\r\n\t\t\t\t// fix cursor issue\r\n\t\t\t\tif (opts.cursorReset) {\r\n\t\t\t\t\tif (els.length > 1)\r\n\t\t\t\t\t\tels[1].style.cursor = opts.cursorReset;\r\n\t\t\t\t\tif (els.length > 2)\r\n\t\t\t\t\t\tels[2].style.cursor = opts.cursorReset;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (full)\r\n\t\t\t\t\tpageBlock = pageBlockEls = null;\r\n\r\n\t\t\t\tif (opts.fadeOut) {\r\n\t\t\t\t\tcount = els.length;\r\n\t\t\t\t\tels.stop().fadeOut(opts.fadeOut, function () {\r\n\t\t\t\t\t\tif (--count === 0)\r\n\t\t\t\t\t\t\treset(els, data, opts, el);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t\treset(els, data, opts, el);\r\n\t\t\t}\r\n\r\n\t\t\t// move blocking element back into the DOM where it started\r\n\t\t\tfunction reset(els, data, opts, el) {\r\n\t\t\t\tvar $el = $(el);\r\n\t\t\t\tif ($el.data('blockUI.isBlocked'))\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tels.each(function (i, o) {\r\n\t\t\t\t\t// remove via DOM calls so we don't lose event handlers\r\n\t\t\t\t\tif (this.parentNode)\r\n\t\t\t\t\t\tthis.parentNode.removeChild(this);\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif (data && data.el) {\r\n\t\t\t\t\tdata.el.style.display = data.display;\r\n\t\t\t\t\tdata.el.style.position = data.position;\r\n\t\t\t\t\tdata.el.style.cursor = 'default'; // #59\r\n\t\t\t\t\tif (data.parent)\r\n\t\t\t\t\t\tdata.parent.appendChild(data.el);\r\n\t\t\t\t\t$el.removeData('blockUI.history');\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ($el.data('blockUI.static')) {\r\n\t\t\t\t\t$el.css('position', 'static'); // #22\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (typeof opts.onUnblock == 'function')\r\n\t\t\t\t\topts.onUnblock(el, opts);\r\n\r\n\t\t\t\t// fix issue in Safari 6 where block artifacts remain until reflow\r\n\t\t\t\tvar body = $(document.body), w = body.width(), cssW = body[0].style.width;\r\n\t\t\t\tbody.width(w - 1).width(w);\r\n\t\t\t\tbody[0].style.width = cssW;\r\n\t\t\t}\r\n\r\n\t\t\t// bind/unbind the handler\r\n\t\t\tfunction bind(b, el, opts) {\r\n\t\t\t\tvar full = el == window, $el = $(el);\r\n\r\n\t\t\t\t// don't bother unbinding if there is nothing to unbind\r\n\t\t\t\tif (!b && (full && !pageBlock || !full && !$el.data('blockUI.isBlocked')))\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t$el.data('blockUI.isBlocked', b);\r\n\r\n\t\t\t\t// don't bind events when overlay is not in use or if bindEvents is false\r\n\t\t\t\tif (!full || !opts.bindEvents || (b && !opts.showOverlay))\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t// bind anchors and inputs for mouse and key events\r\n\t\t\t\tvar events = 'mousedown mouseup keydown keypress keyup touchstart touchend touchmove';\r\n\t\t\t\tif (b)\r\n\t\t\t\t\t$(document).bind(events, opts, handler);\r\n\t\t\t\telse\r\n\t\t\t\t\t$(document).unbind(events, handler);\r\n\r\n\t\t\t\t// former impl...\r\n\t\t\t\t//\t\tvar $e = $('a,:input');\r\n\t\t\t\t//\t\tb ? $e.bind(events, opts, handler) : $e.unbind(events, handler);\r\n\t\t\t}\r\n\r\n\t\t\t// event handler to suppress keyboard/mouse events when blocking\r\n\t\t\tfunction handler(e) {\r\n\t\t\t\t// allow tab navigation (conditionally)\r\n\t\t\t\tif (e.type === 'keydown' && e.keyCode && e.keyCode == 9) {\r\n\t\t\t\t\tif (pageBlock && e.data.constrainTabKey) {\r\n\t\t\t\t\t\tvar els = pageBlockEls;\r\n\t\t\t\t\t\tvar fwd = !e.shiftKey && e.target === els[els.length - 1];\r\n\t\t\t\t\t\tvar back = e.shiftKey && e.target === els[0];\r\n\t\t\t\t\t\tif (fwd || back) {\r\n\t\t\t\t\t\t\tsetTimeout(function () { focus(back); }, 10);\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tvar opts = e.data;\r\n\t\t\t\tvar target = $(e.target);\r\n\t\t\t\tif (target.hasClass('blockOverlay') && opts.onOverlayClick)\r\n\t\t\t\t\topts.onOverlayClick(e);\r\n\r\n\t\t\t\t// allow events within the message content\r\n\t\t\t\tif (target.parents('div.' + opts.blockMsgClass).length > 0)\r\n\t\t\t\t\treturn true;\r\n\r\n\t\t\t\t// allow events for content that is not being blocked\r\n\t\t\t\treturn target.parents().children().filter('div.blockUI').length === 0;\r\n\t\t\t}\r\n\r\n\t\t\tfunction focus(back) {\r\n\t\t\t\tif (!pageBlockEls)\r\n\t\t\t\t\treturn;\r\n\t\t\t\tvar e = pageBlockEls[back === true ? pageBlockEls.length - 1 : 0];\r\n\t\t\t\tif (e)\r\n\t\t\t\t\te.focus();\r\n\t\t\t}\r\n\r\n\t\t\tfunction center(el, x, y) {\r\n\t\t\t\tvar p = el.parentNode, s = el.style;\r\n\t\t\t\tvar l = ((p.offsetWidth - el.offsetWidth) / 2) - sz(p, 'borderLeftWidth');\r\n\t\t\t\tvar t = ((p.offsetHeight - el.offsetHeight) / 2) - sz(p, 'borderTopWidth');\r\n\t\t\t\tif (x) s.left = l > 0 ? (l + 'px') : '0';\r\n\t\t\t\tif (y) s.top = t > 0 ? (t + 'px') : '0';\r\n\t\t\t}\r\n\r\n\t\t\tfunction sz(el, p) {\r\n\t\t\t\treturn parseInt($.css(el, p), 10) || 0;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\r\n\t\t/*global define:true */\r\n\t\tif (typeof define === 'function' && define.amd && define.amd.jQuery) {\r\n\t\t\tdefine(['jquery'], setup);\r\n\t\t} else {\r\n\t\t\tif(typeof jQuery != \"undefined\"){\r\n\t\t\t\tsetup(jQuery);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t})();\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\ttry {\r\n\t\tOAT.Loader.featureLoaded(\"layers\");\r\n\t} catch (ERROR) {\r\n\r\n\t}\r\n\r\n\r\n\t\r\n\r\n//FILE OAT.Layers\r\n\tOAT.Layers = function (f) {\r\n\t\tvar a = this;\r\n\t\tthis.baseOffset = f;\r\n\t\tthis.layers = [];\r\n\t\tthis.currentIndex = 0;\r\n\t\tthis.raise = function (b) {\r\n\t\t\tif (-1 != a.layers.indexOf(b)) {\r\n\t\t\t\tfor (var d = b.style.zIndex, c = 0; c < a.layers.length; c++) {\r\n\t\t\t\t\tvar e = a.layers[c];\r\n\t\t\t\t\te.style.zIndex > d && e.style.zIndex--\r\n\t\t\t\t}\r\n\t\t\t\tb.style.zIndex = a.currentIndex\r\n\t\t\t}\r\n\t\t};\r\n\t\tthis.addLayer = function (b, d) {\r\n\t\t\tvar c = OAT.$(b);\r\n\t\t\tc && (a.currentIndex++ , c.style.zIndex = a.currentIndex, a.layers.push(c), OAT.Dom.attach(c, d ? d : \"mousedown\", function () {\r\n\t\t\t\ta.raise(c)\r\n\t\t\t}))\r\n\t\t};\r\n\t\tthis.removeLayer = function (b) {\r\n\t\t\tb = OAT.$(b);\r\n\t\t\tb = a.layers.indexOf(b);\r\n\t\t\t-1 != b && a.layers.splice(b, 1)\r\n\t\t};\r\n\t\ta.currentIndex = a.baseOffset\r\n\t};\r\n\r\n\r\n\r\n\r\n\r\n\r\n\t; (function () {\r\n\t\t/*jshint eqeqeq:false curly:false latedef:false */\r\n\t\t\"use strict\";\r\n\r\n\t\tfunction setup($) {\r\n\t\t\t$.fn._fadeIn = $.fn.fadeIn;\r\n\r\n\t\t\tvar noOp = $.noop || function () { };\r\n\r\n\t\t\t// this bit is to ensure we don't call setExpression when we shouldn't (with extra muscle to handle\r\n\t\t\t// confusing userAgent strings on Vista)\r\n\t\t\tvar msie = /MSIE/.test(navigator.userAgent);\r\n\t\t\tvar ie6 = /MSIE 6.0/.test(navigator.userAgent) && ! /MSIE 8.0/.test(navigator.userAgent);\r\n\t\t\tvar mode = document.documentMode || 0;\r\n\t\t\tvar setExpr = $.isFunction(document.createElement('div').style.setExpression);\r\n\r\n\t\t\t// global $ methods for blocking/unblocking the entire page\r\n\t\t\t$.blockUI = function (opts) { install(window, opts); };\r\n\t\t\t$.unblockUI = function (opts) { remove(window, opts); };\r\n\r\n\t\t\t// convenience method for quick growl-like notifications  (http://www.google.com/search?q=growl)\r\n\t\t\t$.growlUI = function (title, message, timeout, onClose) {\r\n\t\t\t\tvar $m = $('<div class=\"growlUI\"></div>');\r\n\t\t\t\tif (title) $m.append('<h1>' + title + '</h1>');\r\n\t\t\t\tif (message) $m.append('<h2>' + message + '</h2>');\r\n\t\t\t\tif (timeout === undefined) timeout = 3000;\r\n\r\n\t\t\t\t// Added by konapun: Set timeout to 30 seconds if this growl is moused over, like normal toast notifications\r\n\t\t\t\tvar callBlock = function (opts) {\r\n\t\t\t\t\topts = opts || {};\r\n\r\n\t\t\t\t\t$.blockUI({\r\n\t\t\t\t\t\tmessage: $m,\r\n\t\t\t\t\t\tfadeIn: typeof opts.fadeIn !== 'undefined' ? opts.fadeIn : 700,\r\n\t\t\t\t\t\tfadeOut: typeof opts.fadeOut !== 'undefined' ? opts.fadeOut : 1000,\r\n\t\t\t\t\t\ttimeout: typeof opts.timeout !== 'undefined' ? opts.timeout : timeout,\r\n\t\t\t\t\t\tcenterY: false,\r\n\t\t\t\t\t\tshowOverlay: false,\r\n\t\t\t\t\t\tonUnblock: onClose,\r\n\t\t\t\t\t\tcss: $.blockUI.defaults.growlCSS\r\n\t\t\t\t\t});\r\n\t\t\t\t};\r\n\r\n\t\t\t\tcallBlock();\r\n\t\t\t\tvar nonmousedOpacity = $m.css('opacity');\r\n\t\t\t\t$m.mouseover(function () {\r\n\t\t\t\t\tcallBlock({\r\n\t\t\t\t\t\tfadeIn: 0,\r\n\t\t\t\t\t\ttimeout: 30000\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tvar displayBlock = $('.blockMsg');\r\n\t\t\t\t\tdisplayBlock.stop(); // cancel fadeout if it has started\r\n\t\t\t\t\tdisplayBlock.fadeTo(300, 1); // make it easier to read the message by removing transparency\r\n\t\t\t\t}).mouseout(function () {\r\n\t\t\t\t\t$('.blockMsg').fadeOut(1000);\r\n\t\t\t\t});\r\n\t\t\t\t// End konapun additions\r\n\t\t\t};\r\n\r\n\t\t\t// plugin method for blocking element content\r\n\t\t\t$.fn.block = function (opts) {\r\n\t\t\t\tif (this[0] === window) {\r\n\t\t\t\t\t$.blockUI(opts);\r\n\t\t\t\t\treturn this;\r\n\t\t\t\t}\r\n\t\t\t\tvar fullOpts = $.extend({}, $.blockUI.defaults, opts || {});\r\n\t\t\t\tthis.each(function () {\r\n\t\t\t\t\tvar $el = $(this);\r\n\t\t\t\t\tif (fullOpts.ignoreIfBlocked && $el.data('blockUI.isBlocked'))\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t$el.unblock({ fadeOut: 0 });\r\n\t\t\t\t});\r\n\r\n\t\t\t\treturn this.each(function () {\r\n\t\t\t\t\tif ($.css(this, 'position') == 'static') {\r\n\t\t\t\t\t\tthis.style.position = 'relative';\r\n\t\t\t\t\t\t$(this).data('blockUI.static', true);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.style.zoom = 1; // force 'hasLayout' in ie\r\n\t\t\t\t\tinstall(this, opts);\r\n\t\t\t\t});\r\n\t\t\t};\r\n\r\n\t\t\t// plugin method for unblocking element content\r\n\t\t\t$.fn.unblock = function (opts) {\r\n\t\t\t\tif (this[0] === window) {\r\n\t\t\t\t\t$.unblockUI(opts);\r\n\t\t\t\t\treturn this;\r\n\t\t\t\t}\r\n\t\t\t\treturn this.each(function () {\r\n\t\t\t\t\tremove(this, opts);\r\n\t\t\t\t});\r\n\t\t\t};\r\n\r\n\t\t\t$.blockUI.version = 2.70; // 2nd generation blocking at no extra cost!\r\n\r\n\t\t\t// override these in your code to change the default behavior and style\r\n\t\t\t$.blockUI.defaults = {\r\n\t\t\t\t// message displayed when blocking (use null for no message)\r\n\t\t\t\tmessage: '<h1>Please wait...</h1>',\r\n\r\n\t\t\t\ttitle: null,\t\t// title string; only used when theme == true\r\n\t\t\t\tdraggable: true,\t// only used when theme == true (requires jquery-ui.js to be loaded)\r\n\r\n\t\t\t\ttheme: false, // set to true to use with jQuery UI themes\r\n\r\n\t\t\t\t// styles for the message when blocking; if you wish to disable\r\n\t\t\t\t// these and use an external stylesheet then do this in your code:\r\n\t\t\t\t// $.blockUI.defaults.css = {};\r\n\t\t\t\tcss: {\r\n\t\t\t\t\tpadding: 0,\r\n\t\t\t\t\tmargin: 0,\r\n\t\t\t\t\twidth: '30%',\r\n\t\t\t\t\ttop: '40%',\r\n\t\t\t\t\tleft: '35%',\r\n\t\t\t\t\ttextAlign: 'center',\r\n\t\t\t\t\tcolor: '#000',\r\n\t\t\t\t\tborder: '3px solid #aaa',\r\n\t\t\t\t\tbackgroundColor: '#fff',\r\n\t\t\t\t\tcursor: 'wait'\r\n\t\t\t\t},\r\n\r\n\t\t\t\t// minimal style set used when themes are used\r\n\t\t\t\tthemedCSS: {\r\n\t\t\t\t\twidth: '30%',\r\n\t\t\t\t\ttop: '40%',\r\n\t\t\t\t\tleft: '35%'\r\n\t\t\t\t},\r\n\r\n\t\t\t\t// styles for the overlay\r\n\t\t\t\toverlayCSS: {\r\n\t\t\t\t\tbackgroundColor: '#000',\r\n\t\t\t\t\topacity: 0.1,\r\n\t\t\t\t\tcursor: 'wait'\r\n\t\t\t\t},\r\n\r\n\t\t\t\t// style to replace wait cursor before unblocking to correct issue\r\n\t\t\t\t// of lingering wait cursor\r\n\t\t\t\tcursorReset: 'default',\r\n\r\n\t\t\t\t// styles applied when using $.growlUI\r\n\t\t\t\tgrowlCSS: {\r\n\t\t\t\t\twidth: '350px',\r\n\t\t\t\t\ttop: '10px',\r\n\t\t\t\t\tleft: '',\r\n\t\t\t\t\tright: '10px',\r\n\t\t\t\t\tborder: 'none',\r\n\t\t\t\t\tpadding: '5px',\r\n\t\t\t\t\topacity: 0.6,\r\n\t\t\t\t\tcursor: 'default',\r\n\t\t\t\t\tcolor: '#fff',\r\n\t\t\t\t\tbackgroundColor: '#000',\r\n\t\t\t\t\t'-webkit-border-radius': '10px',\r\n\t\t\t\t\t'-moz-border-radius': '10px',\r\n\t\t\t\t\t'border-radius': '10px'\r\n\t\t\t\t},\r\n\r\n\t\t\t\t// IE issues: 'about:blank' fails on HTTPS and javascript:false is s-l-o-w\r\n\t\t\t\t// (hat tip to Jorge H. N. de Vasconcelos)\r\n\t\t\t\t/*jshint scripturl:true */\r\n\t\t\t\tiframeSrc: /^https/i.test(window.location.href || '') ? 'javascript:false' : 'about:blank',\r\n\r\n\t\t\t\t// force usage of iframe in non-IE browsers (handy for blocking applets)\r\n\t\t\t\tforceIframe: false,\r\n\r\n\t\t\t\t// z-index for the blocking overlay\r\n\t\t\t\tbaseZ: 1000,\r\n\r\n\t\t\t\t// set these to true to have the message automatically centered\r\n\t\t\t\tcenterX: true, // <-- only effects element blocking (page block controlled via css above)\r\n\t\t\t\tcenterY: true,\r\n\r\n\t\t\t\t// allow body element to be stetched in ie6; this makes blocking look better\r\n\t\t\t\t// on \"short\" pages.  disable if you wish to prevent changes to the body height\r\n\t\t\t\tallowBodyStretch: true,\r\n\r\n\t\t\t\t// enable if you want key and mouse events to be disabled for content that is blocked\r\n\t\t\t\tbindEvents: true,\r\n\r\n\t\t\t\t// be default blockUI will supress tab navigation from leaving blocking content\r\n\t\t\t\t// (if bindEvents is true)\r\n\t\t\t\tconstrainTabKey: true,\r\n\r\n\t\t\t\t// fadeIn time in millis; set to 0 to disable fadeIn on block\r\n\t\t\t\tfadeIn: 200,\r\n\r\n\t\t\t\t// fadeOut time in millis; set to 0 to disable fadeOut on unblock\r\n\t\t\t\tfadeOut: 400,\r\n\r\n\t\t\t\t// time in millis to wait before auto-unblocking; set to 0 to disable auto-unblock\r\n\t\t\t\ttimeout: 0,\r\n\r\n\t\t\t\t// disable if you don't want to show the overlay\r\n\t\t\t\tshowOverlay: true,\r\n\r\n\t\t\t\t// if true, focus will be placed in the first available input field when\r\n\t\t\t\t// page blocking\r\n\t\t\t\tfocusInput: true,\r\n\r\n\t\t\t\t// elements that can receive focus\r\n\t\t\t\tfocusableElements: ':input:enabled:visible',\r\n\r\n\t\t\t\t// suppresses the use of overlay styles on FF/Linux (due to performance issues with opacity)\r\n\t\t\t\t// no longer needed in 2012\r\n\t\t\t\t// applyPlatformOpacityRules: true,\r\n\r\n\t\t\t\t// callback method invoked when fadeIn has completed and blocking message is visible\r\n\t\t\t\tonBlock: null,\r\n\r\n\t\t\t\t// callback method invoked when unblocking has completed; the callback is\r\n\t\t\t\t// passed the element that has been unblocked (which is the window object for page\r\n\t\t\t\t// blocks) and the options that were passed to the unblock call:\r\n\t\t\t\t//\tonUnblock(element, options)\r\n\t\t\t\tonUnblock: null,\r\n\r\n\t\t\t\t// callback method invoked when the overlay area is clicked.\r\n\t\t\t\t// setting this will turn the cursor to a pointer, otherwise cursor defined in overlayCss will be used.\r\n\t\t\t\tonOverlayClick: null,\r\n\r\n\t\t\t\t// don't ask; if you really must know: http://groups.google.com/group/jquery-en/browse_thread/thread/36640a8730503595/2f6a79a77a78e493#2f6a79a77a78e493\r\n\t\t\t\tquirksmodeOffsetHack: 4,\r\n\r\n\t\t\t\t// class name of the message block\r\n\t\t\t\tblockMsgClass: 'blockMsg',\r\n\r\n\t\t\t\t// if it is already blocked, then ignore it (don't unblock and reblock)\r\n\t\t\t\tignoreIfBlocked: false\r\n\t\t\t};\r\n\r\n\t\t\t// private data and functions follow...\r\n\r\n\t\t\tvar pageBlock = null;\r\n\t\t\tvar pageBlockEls = [];\r\n\r\n\t\t\tfunction install(el, opts) {\r\n\t\t\t\tvar css, themedCSS;\r\n\t\t\t\tvar full = (el == window);\r\n\t\t\t\tvar msg = (opts && opts.message !== undefined ? opts.message : undefined);\r\n\t\t\t\topts = $.extend({}, $.blockUI.defaults, opts || {});\r\n\r\n\t\t\t\tif (opts.ignoreIfBlocked && $(el).data('blockUI.isBlocked'))\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\topts.overlayCSS = $.extend({}, $.blockUI.defaults.overlayCSS, opts.overlayCSS || {});\r\n\t\t\t\tcss = $.extend({}, $.blockUI.defaults.css, opts.css || {});\r\n\t\t\t\tif (opts.onOverlayClick)\r\n\t\t\t\t\topts.overlayCSS.cursor = 'pointer';\r\n\r\n\t\t\t\tthemedCSS = $.extend({}, $.blockUI.defaults.themedCSS, opts.themedCSS || {});\r\n\t\t\t\tmsg = msg === undefined ? opts.message : msg;\r\n\r\n\t\t\t\t// remove the current block (if there is one)\r\n\t\t\t\tif (full && pageBlock)\r\n\t\t\t\t\tremove(window, { fadeOut: 0 });\r\n\r\n\t\t\t\t// if an existing element is being used as the blocking content then we capture\r\n\t\t\t\t// its current place in the DOM (and current display style) so we can restore\r\n\t\t\t\t// it when we unblock\r\n\t\t\t\tif (msg && typeof msg != 'string' && (msg.parentNode || msg.jquery)) {\r\n\t\t\t\t\tvar node = msg.jquery ? msg[0] : msg;\r\n\t\t\t\t\tvar data = {};\r\n\t\t\t\t\t$(el).data('blockUI.history', data);\r\n\t\t\t\t\tdata.el = node;\r\n\t\t\t\t\tdata.parent = node.parentNode;\r\n\t\t\t\t\tdata.display = node.style.display;\r\n\t\t\t\t\tdata.position = node.style.position;\r\n\t\t\t\t\tif (data.parent)\r\n\t\t\t\t\t\tdata.parent.removeChild(node);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t$(el).data('blockUI.onUnblock', opts.onUnblock);\r\n\t\t\t\tvar z = opts.baseZ;\r\n\r\n\t\t\t\t// blockUI uses 3 layers for blocking, for simplicity they are all used on every platform;\r\n\t\t\t\t// layer1 is the iframe layer which is used to supress bleed through of underlying content\r\n\t\t\t\t// layer2 is the overlay layer which has opacity and a wait cursor (by default)\r\n\t\t\t\t// layer3 is the message content that is displayed while blocking\r\n\t\t\t\tvar lyr1, lyr2, lyr3, s;\r\n\t\t\t\tif (msie || opts.forceIframe)\r\n\t\t\t\t\tlyr1 = $('<iframe class=\"blockUI\" style=\"z-index:' + (z++) + ';display:none;border:none;margin:0;padding:0;position:absolute;width:100%;height:100%;top:0;left:0\" src=\"' + opts.iframeSrc + '\"></iframe>');\r\n\t\t\t\telse\r\n\t\t\t\t\tlyr1 = $('<div class=\"blockUI\" style=\"display:none\"></div>');\r\n\r\n\t\t\t\tif (opts.theme)\r\n\t\t\t\t\tlyr2 = $('<div class=\"blockUI blockOverlay ui-widget-overlay\" style=\"z-index:' + (z++) + ';display:none\"></div>');\r\n\t\t\t\telse\r\n\t\t\t\t\tlyr2 = $('<div class=\"blockUI blockOverlay\" style=\"z-index:' + (z++) + ';display:none;border:none;margin:0;padding:0;width:100%;height:100%;top:0;left:0\"></div>');\r\n\r\n\t\t\t\tif (opts.theme && full) {\r\n\t\t\t\t\ts = '<div class=\"blockUI ' + opts.blockMsgClass + ' blockPage ui-dialog ui-widget ui-corner-all\" style=\"z-index:' + (z + 10) + ';display:none;position:fixed\">';\r\n\t\t\t\t\tif (opts.title) {\r\n\t\t\t\t\t\ts += '<div class=\"ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle\">' + (opts.title || '&nbsp;') + '</div>';\r\n\t\t\t\t\t}\r\n\t\t\t\t\ts += '<div class=\"ui-widget-content ui-dialog-content\"></div>';\r\n\t\t\t\t\ts += '</div>';\r\n\t\t\t\t}\r\n\t\t\t\telse if (opts.theme) {\r\n\t\t\t\t\ts = '<div class=\"blockUI ' + opts.blockMsgClass + ' blockElement ui-dialog ui-widget ui-corner-all\" style=\"z-index:' + (z + 10) + ';display:none;position:absolute\">';\r\n\t\t\t\t\tif (opts.title) {\r\n\t\t\t\t\t\ts += '<div class=\"ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle\">' + (opts.title || '&nbsp;') + '</div>';\r\n\t\t\t\t\t}\r\n\t\t\t\t\ts += '<div class=\"ui-widget-content ui-dialog-content\"></div>';\r\n\t\t\t\t\ts += '</div>';\r\n\t\t\t\t}\r\n\t\t\t\telse if (full) {\r\n\t\t\t\t\ts = '<div class=\"blockUI ' + opts.blockMsgClass + ' blockPage\" style=\"z-index:' + (z + 10) + ';display:none;position:fixed\"></div>';\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\ts = '<div class=\"blockUI ' + opts.blockMsgClass + ' blockElement\" style=\"z-index:' + (z + 10) + ';display:none;position:absolute\"></div>';\r\n\t\t\t\t}\r\n\t\t\t\tlyr3 = $(s);\r\n\r\n\t\t\t\t// if we have a message, style it\r\n\t\t\t\tif (msg) {\r\n\t\t\t\t\tif (opts.theme) {\r\n\t\t\t\t\t\tlyr3.css(themedCSS);\r\n\t\t\t\t\t\tlyr3.addClass('ui-widget-content');\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tlyr3.css(css);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// style the overlay\r\n\t\t\t\tif (!opts.theme /*&& (!opts.applyPlatformOpacityRules)*/)\r\n\t\t\t\t\tlyr2.css(opts.overlayCSS);\r\n\t\t\t\tlyr2.css('position', full ? 'fixed' : 'absolute');\r\n\r\n\t\t\t\t// make iframe layer transparent in IE\r\n\t\t\t\tif (msie || opts.forceIframe)\r\n\t\t\t\t\tlyr1.css('opacity', 0.0);\r\n\r\n\t\t\t\t//$([lyr1[0],lyr2[0],lyr3[0]]).appendTo(full ? 'body' : el);\r\n\t\t\t\tvar layers = [lyr1, lyr2, lyr3], $par = full ? $('body') : $(el);\r\n\t\t\t\t$.each(layers, function () {\r\n\t\t\t\t\tthis.appendTo($par);\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif (opts.theme && opts.draggable && $.fn.draggable) {\r\n\t\t\t\t\tlyr3.draggable({\r\n\t\t\t\t\t\thandle: '.ui-dialog-titlebar',\r\n\t\t\t\t\t\tcancel: 'li'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// ie7 must use absolute positioning in quirks mode and to account for activex issues (when scrolling)\r\n\t\t\t\tvar expr = setExpr && (!$.support.boxModel || $('object,embed', full ? null : el).length > 0);\r\n\t\t\t\tif (ie6 || expr) {\r\n\t\t\t\t\t// give body 100% height\r\n\t\t\t\t\tif (full && opts.allowBodyStretch && $.support.boxModel)\r\n\t\t\t\t\t\t$('html,body').css('height', '100%');\r\n\r\n\t\t\t\t\t// fix ie6 issue when blocked element has a border width\r\n\t\t\t\t\tif ((ie6 || !$.support.boxModel) && !full) {\r\n\t\t\t\t\t\tvar t = sz(el, 'borderTopWidth'), l = sz(el, 'borderLeftWidth');\r\n\t\t\t\t\t\tvar fixT = t ? '(0 - ' + t + ')' : 0;\r\n\t\t\t\t\t\tvar fixL = l ? '(0 - ' + l + ')' : 0;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// simulate fixed position\r\n\t\t\t\t\t$.each(layers, function (i, o) {\r\n\t\t\t\t\t\tvar s = o[0].style;\r\n\t\t\t\t\t\ts.position = 'absolute';\r\n\t\t\t\t\t\tif (i < 2) {\r\n\t\t\t\t\t\t\tif (full)\r\n\t\t\t\t\t\t\t\ts.setExpression('height', 'Math.max(document.body.scrollHeight, document.body.offsetHeight) - (jQuery.support.boxModel?0:' + opts.quirksmodeOffsetHack + ') + \"px\"');\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\ts.setExpression('height', 'this.parentNode.offsetHeight + \"px\"');\r\n\t\t\t\t\t\t\tif (full)\r\n\t\t\t\t\t\t\t\ts.setExpression('width', 'jQuery.support.boxModel && document.documentElement.clientWidth || document.body.clientWidth + \"px\"');\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\ts.setExpression('width', 'this.parentNode.offsetWidth + \"px\"');\r\n\t\t\t\t\t\t\tif (fixL) s.setExpression('left', fixL);\r\n\t\t\t\t\t\t\tif (fixT) s.setExpression('top', fixT);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if (opts.centerY) {\r\n\t\t\t\t\t\t\tif (full) s.setExpression('top', '(document.documentElement.clientHeight || document.body.clientHeight) / 2 - (this.offsetHeight / 2) + (blah = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + \"px\"');\r\n\t\t\t\t\t\t\ts.marginTop = 0;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if (!opts.centerY && full) {\r\n\t\t\t\t\t\t\tvar top = (opts.css && opts.css.top) ? parseInt(opts.css.top, 10) : 0;\r\n\t\t\t\t\t\t\tvar expression = '((document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + ' + top + ') + \"px\"';\r\n\t\t\t\t\t\t\ts.setExpression('top', expression);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// show the message\r\n\t\t\t\tif (msg) {\r\n\t\t\t\t\tif (opts.theme)\r\n\t\t\t\t\t\tlyr3.find('.ui-widget-content').append(msg);\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tlyr3.append(msg);\r\n\t\t\t\t\tif (msg.jquery || msg.nodeType)\r\n\t\t\t\t\t\t$(msg).show();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ((msie || opts.forceIframe) && opts.showOverlay)\r\n\t\t\t\t\tlyr1.show(); // opacity is zero\r\n\t\t\t\tif (opts.fadeIn) {\r\n\t\t\t\t\tvar cb = opts.onBlock ? opts.onBlock : noOp;\r\n\t\t\t\t\tvar cb1 = (opts.showOverlay && !msg) ? cb : noOp;\r\n\t\t\t\t\tvar cb2 = msg ? cb : noOp;\r\n\t\t\t\t\tif (opts.showOverlay)\r\n\t\t\t\t\t\tlyr2._fadeIn(opts.fadeIn, cb1);\r\n\t\t\t\t\tif (msg)\r\n\t\t\t\t\t\tlyr3._fadeIn(opts.fadeIn, cb2);\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tif (opts.showOverlay)\r\n\t\t\t\t\t\tlyr2.show();\r\n\t\t\t\t\tif (msg)\r\n\t\t\t\t\t\tlyr3.show();\r\n\t\t\t\t\tif (opts.onBlock)\r\n\t\t\t\t\t\topts.onBlock.bind(lyr3)();\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// bind key and mouse events\r\n\t\t\t\tbind(1, el, opts);\r\n\r\n\t\t\t\tif (full) {\r\n\t\t\t\t\tpageBlock = lyr3[0];\r\n\t\t\t\t\tpageBlockEls = $(opts.focusableElements, pageBlock);\r\n\t\t\t\t\tif (opts.focusInput)\r\n\t\t\t\t\t\tsetTimeout(focus, 20);\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t\tcenter(lyr3[0], opts.centerX, opts.centerY);\r\n\r\n\t\t\t\tif (opts.timeout) {\r\n\t\t\t\t\t// auto-unblock\r\n\t\t\t\t\tvar to = setTimeout(function () {\r\n\t\t\t\t\t\tif (full)\r\n\t\t\t\t\t\t\t$.unblockUI(opts);\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t$(el).unblock(opts);\r\n\t\t\t\t\t}, opts.timeout);\r\n\t\t\t\t\t$(el).data('blockUI.timeout', to);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// remove the block\r\n\t\t\tfunction remove(el, opts) {\r\n\t\t\t\tvar count;\r\n\t\t\t\tvar full = (el == window);\r\n\t\t\t\tvar $el = $(el);\r\n\t\t\t\tvar data = $el.data('blockUI.history');\r\n\t\t\t\tvar to = $el.data('blockUI.timeout');\r\n\t\t\t\tif (to) {\r\n\t\t\t\t\tclearTimeout(to);\r\n\t\t\t\t\t$el.removeData('blockUI.timeout');\r\n\t\t\t\t}\r\n\t\t\t\topts = $.extend({}, $.blockUI.defaults, opts || {});\r\n\t\t\t\tbind(0, el, opts); // unbind events\r\n\r\n\t\t\t\tif (opts.onUnblock === null) {\r\n\t\t\t\t\topts.onUnblock = $el.data('blockUI.onUnblock');\r\n\t\t\t\t\t$el.removeData('blockUI.onUnblock');\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar els;\r\n\t\t\t\tif (full) // crazy selector to handle odd field errors in ie6/7\r\n\t\t\t\t\tels = $('body').children().filter('.blockUI').add('body > .blockUI');\r\n\t\t\t\telse\r\n\t\t\t\t\tels = $el.find('>.blockUI');\r\n\r\n\t\t\t\t// fix cursor issue\r\n\t\t\t\tif (opts.cursorReset) {\r\n\t\t\t\t\tif (els.length > 1)\r\n\t\t\t\t\t\tels[1].style.cursor = opts.cursorReset;\r\n\t\t\t\t\tif (els.length > 2)\r\n\t\t\t\t\t\tels[2].style.cursor = opts.cursorReset;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (full)\r\n\t\t\t\t\tpageBlock = pageBlockEls = null;\r\n\r\n\t\t\t\tif (opts.fadeOut) {\r\n\t\t\t\t\tcount = els.length;\r\n\t\t\t\t\tels.stop().fadeOut(opts.fadeOut, function () {\r\n\t\t\t\t\t\tif (--count === 0)\r\n\t\t\t\t\t\t\treset(els, data, opts, el);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t\treset(els, data, opts, el);\r\n\t\t\t}\r\n\r\n\t\t\t// move blocking element back into the DOM where it started\r\n\t\t\tfunction reset(els, data, opts, el) {\r\n\t\t\t\tvar $el = $(el);\r\n\t\t\t\tif ($el.data('blockUI.isBlocked'))\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tels.each(function (i, o) {\r\n\t\t\t\t\t// remove via DOM calls so we don't lose event handlers\r\n\t\t\t\t\tif (this.parentNode)\r\n\t\t\t\t\t\tthis.parentNode.removeChild(this);\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif (data && data.el) {\r\n\t\t\t\t\tdata.el.style.display = data.display;\r\n\t\t\t\t\tdata.el.style.position = data.position;\r\n\t\t\t\t\tdata.el.style.cursor = 'default'; // #59\r\n\t\t\t\t\tif (data.parent)\r\n\t\t\t\t\t\tdata.parent.appendChild(data.el);\r\n\t\t\t\t\t$el.removeData('blockUI.history');\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ($el.data('blockUI.static')) {\r\n\t\t\t\t\t$el.css('position', 'static'); // #22\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (typeof opts.onUnblock == 'function')\r\n\t\t\t\t\topts.onUnblock(el, opts);\r\n\r\n\t\t\t\t// fix issue in Safari 6 where block artifacts remain until reflow\r\n\t\t\t\tvar body = $(document.body), w = body.width(), cssW = body[0].style.width;\r\n\t\t\t\tbody.width(w - 1).width(w);\r\n\t\t\t\tbody[0].style.width = cssW;\r\n\t\t\t}\r\n\r\n\t\t\t// bind/unbind the handler\r\n\t\t\tfunction bind(b, el, opts) {\r\n\t\t\t\tvar full = el == window, $el = $(el);\r\n\r\n\t\t\t\t// don't bother unbinding if there is nothing to unbind\r\n\t\t\t\tif (!b && (full && !pageBlock || !full && !$el.data('blockUI.isBlocked')))\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t$el.data('blockUI.isBlocked', b);\r\n\r\n\t\t\t\t// don't bind events when overlay is not in use or if bindEvents is false\r\n\t\t\t\tif (!full || !opts.bindEvents || (b && !opts.showOverlay))\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t// bind anchors and inputs for mouse and key events\r\n\t\t\t\tvar events = 'mousedown mouseup keydown keypress keyup touchstart touchend touchmove';\r\n\t\t\t\tif (b)\r\n\t\t\t\t\t$(document).bind(events, opts, handler);\r\n\t\t\t\telse\r\n\t\t\t\t\t$(document).unbind(events, handler);\r\n\r\n\t\t\t\t// former impl...\r\n\t\t\t\t//\t\tvar $e = $('a,:input');\r\n\t\t\t\t//\t\tb ? $e.bind(events, opts, handler) : $e.unbind(events, handler);\r\n\t\t\t}\r\n\r\n\t\t\t// event handler to suppress keyboard/mouse events when blocking\r\n\t\t\tfunction handler(e) {\r\n\t\t\t\t// allow tab navigation (conditionally)\r\n\t\t\t\tif (e.type === 'keydown' && e.keyCode && e.keyCode == 9) {\r\n\t\t\t\t\tif (pageBlock && e.data.constrainTabKey) {\r\n\t\t\t\t\t\tvar els = pageBlockEls;\r\n\t\t\t\t\t\tvar fwd = !e.shiftKey && e.target === els[els.length - 1];\r\n\t\t\t\t\t\tvar back = e.shiftKey && e.target === els[0];\r\n\t\t\t\t\t\tif (fwd || back) {\r\n\t\t\t\t\t\t\tsetTimeout(function () { focus(back); }, 10);\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tvar opts = e.data;\r\n\t\t\t\tvar target = $(e.target);\r\n\t\t\t\tif (target.hasClass('blockOverlay') && opts.onOverlayClick)\r\n\t\t\t\t\topts.onOverlayClick(e);\r\n\r\n\t\t\t\t// allow events within the message content\r\n\t\t\t\tif (target.parents('div.' + opts.blockMsgClass).length > 0)\r\n\t\t\t\t\treturn true;\r\n\r\n\t\t\t\t// allow events for content that is not being blocked\r\n\t\t\t\treturn target.parents().children().filter('div.blockUI').length === 0;\r\n\t\t\t}\r\n\r\n\t\t\tfunction focus(back) {\r\n\t\t\t\tif (!pageBlockEls)\r\n\t\t\t\t\treturn;\r\n\t\t\t\tvar e = pageBlockEls[back === true ? pageBlockEls.length - 1 : 0];\r\n\t\t\t\tif (e)\r\n\t\t\t\t\te.focus();\r\n\t\t\t}\r\n\r\n\t\t\tfunction center(el, x, y) {\r\n\t\t\t\tvar p = el.parentNode, s = el.style;\r\n\t\t\t\tvar l = ((p.offsetWidth - el.offsetWidth) / 2) - sz(p, 'borderLeftWidth');\r\n\t\t\t\tvar t = ((p.offsetHeight - el.offsetHeight) / 2) - sz(p, 'borderTopWidth');\r\n\t\t\t\tif (x) s.left = l > 0 ? (l + 'px') : '0';\r\n\t\t\t\tif (y) s.top = t > 0 ? (t + 'px') : '0';\r\n\t\t\t}\r\n\r\n\t\t\tfunction sz(el, p) {\r\n\t\t\t\treturn parseInt($.css(el, p), 10) || 0;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\r\n\t\t/*global define:true */\r\n\t\tif (typeof define === 'function' && define.amd && define.amd.jQuery) {\r\n\t\t\tdefine(['jquery'], setup);\r\n\t\t} else {\r\n\t\t\tif(typeof jQuery != \"undefined\"){\r\n\t\t\t\tsetup(jQuery);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t})();\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\ttry {\r\n\t\tOAT.Loader.featureLoaded(\"layers\");\r\n\t} catch (ERROR) {\r\n\r\n\t}\r\n\r\n\r\n\r\n//FILE oat_pivot -----------------------------------------------------------------------------------------------------------------------------------------------\r\n\r\n\r\n\r\n\tif (GlobalPivotInterval == undefined) {\r\n\t\tvar GlobalPivotInterval = [];\r\n\t}\r\n\r\n\tOAT.Pivot = function (_mthis, div, filterDiv, headerRow, dataRows, headerRowIndexes,\r\n\t\theaderColIndexes, filterIndexes, dataColumnIndex, query,\r\n\t\tcondFormats, control, pageSize, defaultPicture, QueryViewerCollection,\r\n\t\tcolumns, containerName, formatValue, conditionalFormatsColumns, formatValueMeasures,\r\n\t\tmeasures, autoResize, disableColumnSort, UcId, IdForQueryViewerCollection, rememberLayout,\r\n\t\tShowMeasuresAsRows, formulaInfo, fullRecord, serverPagination, pageData, hideDataFilds,\r\n\t\torderFildsHidden, initMetadata, relativePath, selection, GrandTotalVisibility, pivotTitle) {\r\n\t\tvar self = this;\r\n\t\tthis.autoPaging = false;\r\n\t\tthis.nextRowWhenAutopaging = 0;\r\n\t\tthis.prevRowWhenAutopaging = 0;\r\n\t\tthis.paginationInfo = false;\r\n\t\tthis.TempDataStructForAggStepOptimization = [];\r\n\t\tthis.actualPaginationPage = 1;\r\n\t\tthis.allDataWithoutSort = jQuery.extend(true, [], dataRows);\r\n\t\tthis.IdForQueryViewerCollection = IdForQueryViewerCollection;\r\n\t\tthis.UcId = UcId;\r\n\t\tthis.ShowMeasuresAsRows = ShowMeasuresAsRows;\r\n\t\tthis.rememberLayoutStateVersion = (serverPagination) ? \"4.3.8SP\" : \"4.3.8\";\r\n\t\tif (measures.length < 2) { //si solo tiene una medida no aplica esta propiedad\r\n\t\t\tthis.ShowMeasuresAsRows = false\r\n\t\t}\r\n\t\tthis.allRowsPivot = \"vacio\";\r\n\t\tthis.HideDataFilds = hideDataFilds;\r\n\t\tthis.OrderFildsHidden = orderFildsHidden;\r\n\t\tthis.initMetadata = initMetadata;\r\n\t\tthis.relativePath = relativePath;\r\n\t\tthis.selection = selection;\r\n\t\tthis.GrandTotalVisibility = GrandTotalVisibility;\r\n\t\tthis.translations = _mthis.translations\r\n\t\tthis.isSD = OAT.isSD();\r\n\t\t\r\n\t\tfromUndefinedToBlanck(dataRows);\r\n\r\n\t\tif (dataRows[0] != undefined) {\r\n\r\n\t\t\t//agregar indice de fila\r\n\t\t\tif (formulaInfo.cantFormulaMeasures > 0) {\r\n\t\t\t\tfor (var i = 0; i < dataRows.length; i++) {\r\n\t\t\t\t\tdataRows[i][headerRow.length] = i;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t//end agregar indice a filas\r\n\t\t\tvar sortIntMemory = [];\r\n\r\n\t\t\t//get sort value\r\n\t\t\tfor (var index = headerRow.length - 1; index > -1; index--) { //*dataRows[0].length*/\r\n\t\t\t\tvar sortInt = true;\r\n\t\t\t\tfor (var ival = 0; ival < dataRows.length; ival++) {\r\n\t\t\t\t\tif ((sortInt) && (dataRows[ival][index] != parseInt(dataRows[ival][index]))) {\r\n\t\t\t\t\t\tsortInt = false;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tsortIntMemory[index] = sortInt;\r\n\t\t\t}\r\n\t\t\tvar index = 0;\r\n\t\t\tif (sortIntMemory[index]) {\r\n\t\t\t\tdataRows = dataRows.sort((function (index) {\r\n\t\t\t\t\treturn function (a, b) {\r\n\t\t\t\t\t\treturn (parseInt(a[index]) === parseInt(b[index]) ? 0 : (parseInt(a[index]) < parseInt(b[index]) ? -1 : 1));\r\n\t\t\t\t\t};\r\n\t\t\t\t})(index));\r\n\t\t\t} else {\r\n\t\t\t\tdataRows = dataRows.sort((function (index) {\r\n\t\t\t\t\treturn function (a, b) {\r\n\t\t\t\t\t\treturn (a[index] === b[index] ? 0 : (a[index] < b[index] ? -1 : 1));\r\n\t\t\t\t\t};\r\n\t\t\t\t})(index));\r\n\t\t\t}\r\n\r\n\t\t\tvar actualVal = dataRows[0][index];\r\n\t\t\tvar initPos = 0;\r\n\t\t\tfor (var i = 0; i < dataRows.length; i++) {\r\n\t\t\t\tif ((actualVal != dataRows[i][index])) {\r\n\t\t\t\t\tactualVal = dataRows[i][index]\r\n\t\t\t\t\tdataRows = OAT.PartialSort(dataRows, initPos, i - 1, index + 1, headerRow.length, sortIntMemory)\r\n\t\t\t\t\tinitPos = i;\r\n\t\t\t\t} else if ((i == dataRows.length - 1)) {\r\n\t\t\t\t\tdataRows = OAT.PartialSort(dataRows, initPos, i, index + 1, headerRow.length, sortIntMemory)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\t//collapse repeate rows\r\n\t\tvar tempDataRows = dataRows;\r\n\t\tdataRows = [];\r\n\t\tif (tempDataRows.length > 0) {\r\n\t\t\tdataRows[0] = tempDataRows[0]\r\n\t\t}\r\n\t\tvar act_pos = 0;\r\n\t\tfor (var i = 1; i < tempDataRows.length; i++) {\r\n\t\t\tvar repeated = true;\r\n\t\t\tfor (var j = 0; j < columns.length; j++) {\r\n\t\t\t\tif (tempDataRows[i][j] != tempDataRows[i - 1][j]) { repeated = false; break; }\r\n\t\t\t}\r\n\t\t\tif (repeated) {\r\n\t\t\t\tfor (var j = columns.length; j < columns.length + measures.length; j++) {\r\n\t\t\t\t\tvar tot = parseFloat(dataRows[act_pos][j]) + parseFloat(tempDataRows[i][j])\r\n\t\t\t\t\tif ((dataRows[act_pos][j] == \"#NuN#\") && (tempDataRows[i][j] == \"#NuN#\")) {\r\n\t\t\t\t\t\ttot = \"#NuN#\"\r\n\t\t\t\t\t} else if (dataRows[act_pos][j] == \"#NuN#\") {\r\n\t\t\t\t\t\ttot = tempDataRows[i][j] + \"\"\r\n\t\t\t\t\t} else if (tempDataRows[i][j] == \"#NuN#\") {\r\n\t\t\t\t\t\ttot = dataRows[act_pos][j] + \"\"\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdataRows[act_pos][j] = tot + \"\";\r\n\t\t\t\t}\r\n\t\t\t\t//colapsar filas de formula\r\n\t\t\t\tif (formulaInfo.cantFormulaMeasures > 0) {\r\n\t\t\t\t\tvar filaSumar = dataRows[act_pos][headerRow.length];\r\n\t\t\t\t\tvar filaRepetida = tempDataRows[i][headerRow.length];\r\n\t\t\t\t\tfor (var formulasI = 0; formulasI < formulaInfo.measureFormula.length; formulasI++) { //campos formulas\r\n\t\t\t\t\t\tif (formulaInfo.measureFormula[formulasI].hasFormula) {\r\n\t\t\t\t\t\t\tfor (var formulasJ = 0; formulasJ < formulaInfo.measureFormula[formulasI].relatedMeasures.length; formulasJ++) {\r\n\t\t\t\t\t\t\t\tvar pos = formulaInfo.measureFormula[formulasI].relatedMeasures[formulasJ];\r\n\t\t\t\t\t\t\t\tvar tot = parseFloat(fullRecord[filaSumar][pos]) + parseFloat(fullRecord[filaRepetida][pos])\r\n\t\t\t\t\t\t\t\tfullRecord[filaSumar][pos] = tot + \"\";\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfor (var j = columns.length; j < columns.length + measures.length; j++) { //restantes medidas para mantener coherencia\r\n\t\t\t\t\t\tvar tot = parseFloat(fullRecord[filaSumar][j]) + parseFloat(fullRecord[filaRepetida][j])\r\n\t\t\t\t\t\tfullRecord[filaSumar][j] = tot + \"\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfor (var posB = 0; posB < headerRow.length; posB++) { //anular fila ya sumada\r\n\t\t\t\t\t\tfullRecord[filaRepetida][posB] = \"\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t//end colapsar formula info\r\n\t\t\t} else {\r\n\t\t\t\tact_pos++\r\n\t\t\t\tdataRows[act_pos] = tempDataRows[i];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//eliminar indice de fila\r\n\t\tif (formulaInfo.cantFormulaMeasures > 0) {\r\n\t\t\tif (dataRows[0] != undefined) {\r\n\t\t\t\tfor (var it = 0; it < dataRows.length; it++) {\r\n\t\t\t\t\tdataRows[it].splice(headerRow.length, 1)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t//end borrar incide a filas\r\n\t\tthis.serverPagination = serverPagination;\r\n\t\tthis.pageData = pageData;\r\n\t\tif (this.serverPagination) {\r\n\t\t\tthis.pageData.PreviousPageNumber = -1;\r\n\t\t\tthis.pageData.AxisInfo = [];\r\n\t\t\tthis.pageData.FilterInfo = [];\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\tthis.autoPaging = false;\r\n\t\t\r\n\r\n\t\tthis.recordForFormula = fullRecord;\r\n\t\tthis.formulaInfo = formulaInfo;\r\n\t\tthis.filterIndexes = filterIndexes; /* indexes of column conditions */\r\n\t\tthis.initFilterIndexes = [];\r\n\t\tfor (var i = 0; i < this.filterIndexes.length; i++) {\r\n\t\t\tthis.initFilterIndexes[i] = this.filterIndexes[i];\r\n\t\t}\r\n\t\tthis.getFormulaRowByDataRow = function (row, measureNumber, caseId) {\r\n\t\t\tvar value = \"\"\r\n\t\t\tvar hallado = false\r\n\t\t\tvar numRow = 0\r\n\t\t\tvar searchIn = self.recordForFormula\r\n\t\t\t//if (self.filterIndexes.length > 0){ searchIn = self.filteredData }\r\n\t\t\tvar addedValues = []; for (var o = 0; o < self.formulaInfo.recordDataLength; o++) { addedValues[o] = 0 }\r\n\t\t\tfor (var i = 0; i < searchIn.length; i++) {\r\n\t\t\t\tvar coincide = false\r\n\t\t\t\tfor (var j = 0; j < row.length; j++) {\r\n\t\t\t\t\tif (self.filterIndexes.indexOf(j) != -1) { //case filter to top bar\r\n\t\t\t\t\t\tvar pos = self.filterIndexes.indexOf(j)\r\n\t\t\t\t\t\tif (self.filterDiv != undefined) {\r\n\t\t\t\t\t\t\tvar s = self.filterDiv.selects[pos]; /* select node */\r\n\t\t\t\t\t\t\tvar val = OAT.$v(s)\r\n\t\t\t\t\t\t\tif (val == \"[all]\") { coincide = true } //case [all]\r\n\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\tcoincide = (val == searchIn[i][j])\r\n\t\t\t\t\t\t\t\tif (!coincide) break;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tcoincide = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else if ((self.filterIndexes.length > 0) && (j >= row.length - measures.length)) { //case filter to top bar y measure item\r\n\t\t\t\t\t\tcoincide = true;\r\n\t\t\t\t\t} else if ((searchIn[i][j] == row[j]) || ((row[j] == \"#FoE#\") && (searchIn[i][j] == 0))) {\r\n\t\t\t\t\t\tcoincide = true;\r\n\t\t\t\t\t} else if ((headerRowIndexes != undefined) && (headerRowIndexes.indexOf(j) != -1)\r\n\t\t\t\t\t\t&& (headerRowIndexes.indexOf(j) > headerRowIndexes.length - measures.length)) { //if a measure, when rowConditions is not defined yet\r\n\t\t\t\t\t\tcoincide = true;\r\n\t\t\t\t\t} else if ((dataColumnIndex > 0) && (dataColumnIndex == j)) {\r\n\t\t\t\t\t\tcoincide = true;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif ((row[j] == undefined) && (self.filterIndexes.length > 0)) {\r\n\t\t\t\t\t\t\tcoincide = true;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tcoincide = false;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (coincide) {\r\n\t\t\t\t\tfor (var t = 0; t < self.formulaInfo.measureFormula[measureNumber].relatedMeasures.length; t++) {\r\n\t\t\t\t\t\tvar pos = self.formulaInfo.measureFormula[measureNumber].relatedMeasures[t]\r\n\t\t\t\t\t\taddedValues[pos] = addedValues[pos] + parseFloat(searchIn[i][pos]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\thallado = true\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (hallado)\r\n\t\t\t\treturn addedValues;\r\n\t\t\telse\r\n\t\t\t\treturn \"#NuN#\"//self.EmptyValue; //\"#NuN#\"\r\n\t\t}\r\n\r\n\r\n\t\t//calculate single measure formula value\r\n\t\tfor (var mforF = 0; mforF < measures.length; mforF++) {\r\n\t\t\tif (formulaInfo.measureFormula[mforF].hasFormula) {\r\n\t\t\t\tfor (var rforF = 0; rforF < dataRows.length; rforF++) {\r\n\t\t\t\t\tif (dataRows[rforF][dataRows[rforF].length - measures.length + mforF] == 0) {\r\n\t\t\t\t\t\tvar formula = this.getFormulaRowByDataRow(dataRows[rforF], mforF, \"\");\r\n\t\t\t\t\t\tvar result = EvaluateExpressionPivotJs(formulaInfo.measureFormula[mforF].PolishNotation, formula, formulaInfo)\r\n\t\t\t\t\t\tif ((result == Infinity) || isNaN(result)) {\r\n\t\t\t\t\t\t\tdataRows[rforF][dataRows[rforF].length - measures.length + mforF] = \"#FoE#\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.GeneralDataRows = dataRows;\r\n\t\tthis.autoPagingRowsPerPage = (pageSize != undefined) ? parseInt(pageSize) : 10;\r\n\t\tthis.TotalPagesPaging = parseInt(dataRows.length / this.autoPagingRowsPerPage);\r\n\t\tif ((dataRows.length % this.autoPagingRowsPerPage) != 0) {\r\n\t\t\tthis.TotalPagesPaging++;\r\n\t\t}\r\n\t\tthis.GeneralDistinctValues = [];\r\n\t\tthis.GrandTotalsPaging = [];\r\n\t\tthis.columns = columns;\r\n\t\tif (dataRows.length > 0) {\r\n\t\t\tfillGeneralDistinctValues(headerRow.length - measures.length, self, dataRows);\r\n\t\t}\r\n\t\t\r\n\t\tthis.RowsWhenMoveToFilter = []\r\n\t\tthis.FilterByTopFilter = false\r\n\t\tthis.options = {\r\n\t\t\theadingBefore: 1,\r\n\t\t\theadingAfter: 0,\r\n\t\t\tagg: 1, /* index of default statistic function, SUM */\r\n\t\t\taggTotals: 1, /* dtto for subtotals & totals */\r\n\t\t\tcustomType: function (data) {\r\n\t\t\t\treturn data;\r\n\t\t\t},\r\n\t\t\t//currencySymbol: \"$\",\r\n\t\t\tshowEmpty: 0,\r\n\t\t\tsubtotals: 1,\r\n\t\t\ttotals: 1\r\n\t\t}\r\n\r\n\r\n\t\tthis.firstTime = true;\r\n\t\tthis.readState = false;\r\n\t\tthis.deleteState = false;\r\n\t\tthis.defaultPicture = defaultPicture;\r\n\t\tthis.gd = new OAT.GhostDrag();\r\n\t\tthis.div = OAT.$(div);\r\n\t\tthis.filterDiv = OAT.$(filterDiv);\r\n\t\tthis.hasShowValuesAs = _mthis.hasShowValuesAs;\r\n\t\t\r\n\t\tthis.TitleDivId = filterDiv.replace(\"pivot_page\", \"title_div\")\r\n\t\tif (pivotTitle){\r\n\t\t\tthis.PivotTitle = pivotTitle\r\n\t\t\tthis.TitleDiv = OAT.$(this.TitleDivId);\r\n\t\t\tif (!this.TitleDiv){\r\n\t\t\t\t jQuery(\"#\"+this.TitleDivId).remove()\r\n\t\t\t\t this.TitleDiv = OAT.Dom.create(\"div\", {});\r\n\t\t\t\t this.TitleDiv.id = this.TitleDivId\r\n\t\t\t\t jQuery(\"#\" + containerName).prepend(this.TitleDiv); \r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tjQuery(\"#\"+this.TitleDivId).remove()\r\n\t\t}\r\n\t\t\r\n\t\tthis.defCArray = [\"rgb(153,153,255)\", \"rgb(153,51,205)\", \"rgb(255,255,204)\", \"rgb(204,255,255)\", \"rgb(102,0,102)\",\r\n\t\t\t\"rgb(255,128,128)\", \"rgb(0,102,204)\", \"rgb(204,204,255)\", \"rgb(0,0,128)\", \"rgb(255,0,255)\",\r\n\t\t\t\"rgb(0,255,255)\", \"rgb(255,255,0)\"];\r\n\t\tthis.QueryViewerCollection = QueryViewerCollection;\r\n\t\tthis.containerName = containerName;\r\n\t\tthis.formatValues = formatValue;\r\n\t\tthis.formatValuesMeasures = formatValueMeasures;\r\n\t\tthis.tempBlackLists = []; this.tempCollapsedValues = []; this.oldSortValues = [];\r\n\t\tthis.stateChanged = false;\r\n\t\tthis.rowsPerPage = pageSize;\r\n\r\n\r\n\r\n\t\tthis.headerRow = headerRow; /* store data */\r\n\t\tthis.allData = dataRows; /* store data */\r\n\t\tthis.filteredData = [];\r\n\t\tthis.tabularData = []; /* result */\r\n\r\n\t\tthis.dataColumnIndex = dataColumnIndex; /* store data */\r\n\t\tthis.rowConditions = headerRowIndexes; /* indexes of row conditions */\r\n\t\tthis.colConditions = headerColIndexes; /* indexes of column conditions */\r\n\r\n\t\tthis.initRowConditions = [];\r\n\t\tfor (var i = 0; i < this.rowConditions.length; i++) {\r\n\t\t\tthis.initRowConditions[i] = this.rowConditions[i];\r\n\t\t}\r\n\t\tthis.initColConditions = []\r\n\t\tfor (var i = 0; i < this.colConditions.length; i++) {\r\n\t\t\tthis.initColConditions[i] = this.colConditions[i];\r\n\t\t}\r\n\r\n\t\tif ((columns.length == 1) && (measures.length == 0)) {\r\n\t\t\tthis.rowConditions = [0];\r\n\t\t}\r\n\r\n\t\tthis.conditions = [];\r\n\t\tthis.filterDiv.selects = [];\r\n\t\tthis.rowStructure = {};\r\n\t\tthis.colStructure = {};\r\n\t\tthis.colPointers = [];\r\n\t\tthis.rowPointers = [];\r\n\t\tthis.rowTotals = [[], []];\r\n\t\tthis.colTotals = [[], []];\r\n\t\tthis.gTotal = [];\r\n\r\n\t\tthis.query = query;\r\n\t\tthis.controlName = control;\r\n\t\tthis.conditionalFormats = condFormats;\r\n\t\tthis.conditionalFormatsColumns = conditionalFormatsColumns;\r\n\t\tthis.GreyList = [];\r\n\t\tthis.EmptyValue = \"#NaV#\"\r\n\t\tthis.NullValue = \"#NuN#\"\r\n\r\n\t\tthis.initState = {};\r\n\r\n\t\t/* supplemental routines */\r\n\t\tif (typeof JSON.decycle !== 'function') {\r\n\t\t\tJSON.decycle = function decycle(object) {\r\n\t\t\t\t'use strict';\r\n\t\t\t\tvar objects = [], // Keep a reference to each unique object or array\r\n\t\t\t\t\tpaths = [];\r\n\t\t\t\treturn (function derez(value, path) {\r\n\t\t\t\t\tvar i, // The loop counter\r\n\t\t\t\t\t\tname, // Property name\r\n\t\t\t\t\t\tnu;\r\n\t\t\t\t\tswitch (typeof value) {\r\n\t\t\t\t\t\tcase 'object':\r\n\t\t\t\t\t\t\tif (!value) {\r\n\t\t\t\t\t\t\t\treturn null;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tfor (i = 0; i < objects.length; i += 1) {\r\n\t\t\t\t\t\t\t\tif (objects[i] === value) {\r\n\t\t\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t\t\t$ref: paths[i]\r\n\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tobjects.push(value);\r\n\t\t\t\t\t\t\tpaths.push(path);\r\n\t\t\t\t\t\t\tif (Object.prototype.toString.apply(value) === '[object Array]') {\r\n\t\t\t\t\t\t\t\tnu = [];\r\n\t\t\t\t\t\t\t\tfor (i = 0; i < value.length; i += 1) {\r\n\t\t\t\t\t\t\t\t\tnu[i] = derez(value[i], path + '[' + i + ']');\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tnu = {};\r\n\t\t\t\t\t\t\t\tfor (name in value) {\r\n\t\t\t\t\t\t\t\t\tif (Object.prototype.hasOwnProperty.call(value, name)) {\r\n\t\t\t\t\t\t\t\t\t\tnu[name] = derez(value[name], path + '[' + JSON.stringify(name) + ']');\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn nu;\r\n\t\t\t\t\t\tcase 'number':\r\n\t\t\t\t\t\tcase 'string':\r\n\t\t\t\t\t\tcase 'boolean':\r\n\t\t\t\t\t\t\treturn value;\r\n\t\t\t\t\t}\r\n\t\t\t\t}(object, '$'));\r\n\t\t\t};\r\n\t\t}\r\n\r\n\r\n\t\tthis.saveState = function (state) {\r\n\t\t\ttry {\r\n\t\t\t\tif (!!window.localStorage) {\r\n\t\t\t\t\tlocalStorage.removeItem(OAT.getURL() + self.query + self.controlName);\r\n\t\t\t\t\tlocalStorage.setItem(OAT.getURL() + self.query + self.controlName, JSON.stringify(JSON.decycle(state)));\r\n\t\t\t\t} else {\r\n\t\t\t\t\tOATSetCookie('\"' + OAT.getURL() + self.query + self.controlName + 'cookie' + '\"', JSON.stringify(state), null, \"/\");\r\n\t\t\t\t}\r\n\t\t\t} catch (error) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tOATSetCookie('\"' + OAT.getURL() + self.query + self.controlName + 'cookie' + '\"', JSON.stringify(state), null, \"/\");\r\n\t\t\t\t} catch (error) { }\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.saveHiddenState = function (state) {\r\n\t\t\ttry {\r\n\t\t\t\tif (!!window.localStorage) {\r\n\t\t\t\t\tlocalStorage.removeItem(OAT.getURL() + self.query + self.controlName + \"HiddenState\");\r\n\t\t\t\t\tlocalStorage.setItem(OAT.getURL() + self.query + self.controlName + \"HiddenState\", JSON.stringify(JSON.decycle(state)));\r\n\t\t\t\t} else {\r\n\t\t\t\t\tOATSetCookie('\"' + OAT.getURL() + self.query + self.controlName + \"HiddenState\" + 'cookie' + '\"', JSON.stringify(state), null, \"/\");\r\n\t\t\t\t}\r\n\t\t\t} catch (error) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tOATSetCookie('\"' + OAT.getURL() + self.query + self.controlName + \"HiddenState\" + 'cookie' + '\"', JSON.stringify(state), null, \"/\");\r\n\t\t\t\t} catch (error) { }\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.getState = function () {\r\n\t\t\tif (typeof JSON.retrocycle !== 'function') {\r\n\t\t\t\tJSON.retrocycle = function retrocycle($) {\r\n\t\t\t\t\t'use strict';\r\n\r\n\t\t\t\t\tvar px =\r\n\t\t\t\t\t\t/^\\$(?:\\[(?:\\d+|\\\"(?:[^\\\\\\\"\\u0000-\\u001f]|\\\\([\\\\\\\"\\/bfnrt]|u[0-9a-zA-Z]{4}))*\\\")\\])*$/;\r\n\r\n\t\t\t\t\t(function rez(value) {\r\n\r\n\t\t\t\t\t\tvar i, item, name, path;\r\n\r\n\t\t\t\t\t\tif (value && typeof value === 'object') {\r\n\t\t\t\t\t\t\tif (Object.prototype.toString.apply(value) === '[object Array]') {\r\n\t\t\t\t\t\t\t\tfor (i = 0; i < value.length; i += 1) {\r\n\t\t\t\t\t\t\t\t\titem = value[i];\r\n\t\t\t\t\t\t\t\t\tif (item && typeof item === 'object') {\r\n\t\t\t\t\t\t\t\t\t\tpath = item.$ref;\r\n\t\t\t\t\t\t\t\t\t\tif (typeof path === 'string' && px.test(path)) {\r\n\t\t\t\t\t\t\t\t\t\t\tvalue[i] = eval(path);\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\trez(item);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tfor (name in value) {\r\n\t\t\t\t\t\t\t\t\tif (typeof value[name] === 'object') {\r\n\t\t\t\t\t\t\t\t\t\titem = value[name];\r\n\t\t\t\t\t\t\t\t\t\tif (item) {\r\n\t\t\t\t\t\t\t\t\t\t\tpath = item.$ref;\r\n\t\t\t\t\t\t\t\t\t\t\tif (typeof path === 'string' && px.test(path)) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalue[name] = eval(path);\r\n\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\trez(item);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}($));\r\n\t\t\t\t\treturn $;\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\ttry {\r\n\t\t\t\tvar i;\r\n\t\t\t\tif (localStorage.getItem(OAT.getURL() + self.query + self.controlName) != null) {\r\n\t\t\t\t\tvar retrievedObject = localStorage.getItem(OAT.getURL() + self.query + self.controlName);\r\n\t\t\t\t\ti = JSON.retrocycle(JSON.parse(retrievedObject));\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (i == null) {\r\n\t\t\t\t\tvar cookieValue = OATGetCookie('\"' + OAT.getURL() + self.query + self.controlName + 'cookie' + '\"')\r\n\t\t\t\t\tif (cookieValue != null) {\r\n\t\t\t\t\t\ti = JSON.parse(cookieValue)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn i;\r\n\t\t\t} catch (error) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tvar cookieValue = OATGetCookie('\"' + OAT.getURL() + self.query + self.controlName + 'cookie' + '\"')\r\n\t\t\t\t\tvar i = JSON.parse(cookieValue)\r\n\t\t\t\t\treturn i\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tthis.cleanState = function () {\r\n\r\n\t\t\tfor (var il = 0; il < self.filterDiv.selects.length; il++) {\r\n\t\t\t\tself.filterDiv.selects[il].value = \"[all]\"\r\n\t\t\t}\r\n\t\t\tfor (var ci = 0; ci <= self.conditions.length - 1; ci++) {\r\n\t\t\t\tself.conditions[ci].blackList = [];\r\n\t\t\t\tself.conditions[ci].whiteList = [];\r\n\t\t\t\tself.conditions[ci].greyList = [];\r\n\t\t\t}\r\n\t\t\tlocalStorage.removeItem(OAT.getURL() + self.query + self.controlName);\r\n\t\t\tself.deleteState = false;\r\n\r\n\t\t\tvar viejcolCond = new Array()\r\n\t\t\tfor (var i = 0; i < self.initState.colConditions.length; i++) {\r\n\t\t\t\tviejcolCond[i] = self.initState.colConditions[i];\r\n\t\t\t}\r\n\t\t\tvar viejcolRow = new Array();\r\n\t\t\tfor (var i = 0; i < self.initState.rowConditions.length; i++) {\r\n\t\t\t\tviejcolRow[i] = self.initState.rowConditions[i];\r\n\t\t\t}\r\n\t\t\tvar viejcolFilt = new Array();\r\n\t\t\tfor (var i = 0; i < self.initState.filterIndexes.length; i++) {\r\n\t\t\t\tviejcolFilt[i] = self.initState.filterIndexes[i];\r\n\t\t\t}\r\n\t\t\tthis.conditions = jQuery.extend(true, [], self.initState.conditions);\r\n\t\t\tthis.rowConditions = viejcolRow;\r\n\t\t\tthis.colConditions = viejcolCond;\r\n\t\t\tthis.filterIndexes = viejcolFilt;\r\n\t\t\tthis.stateChanged = self.initState.stateChanged;\r\n\t\t\tthis.rowsPerPage = self.initState.rowsPerPage;\r\n\r\n\t\t\tvar state = {\r\n\t\t\t\tquery: self.query,\r\n\t\t\t\tconditions: self.conditions,\r\n\t\t\t\tcolConditions: self.colConditions,\r\n\t\t\t\trowConditions: self.rowConditions,\r\n\t\t\t\tfilterIndexes: self.filterIndexes,\r\n\t\t\t\tfilterDivSelects: [],\r\n\t\t\t\trowsPerPage: self.rowsPerPage,\r\n\t\t\t\tversion: self.rememberLayoutStateVersion\r\n\t\t\t};\r\n\r\n\r\n\t\t\tself.saveState(state);\r\n\r\n\r\n\t\t}\r\n\r\n\t\tthis.cleanStateWhenServerPagination = function () {\r\n\r\n\t\t\tfor (var il = 0; il < self.filterDiv.selects.length; il++) {\r\n\t\t\t\tself.filterDiv.selects[il].value = \"[all]\"\r\n\t\t\t}\r\n\t\t\tfor (var ci = 0; ci <= self.conditions.length - 1; ci++) {\r\n\t\t\t\tself.conditions[ci].blackList = [];\r\n\t\t\t}\r\n\t\t\t//localStorage.removeItem(OAT.getURL()+self.query+self.controlName);\r\n\t\t\t//self.deleteState = false;\r\n\r\n\t\t\tvar viejcolCond = new Array()\r\n\t\t\tfor (var i = 0; i < self.initState.colConditions.length; i++) {\r\n\t\t\t\tviejcolCond[i] = self.initState.colConditions[i];\r\n\t\t\t}\r\n\t\t\tvar viejcolRow = new Array();\r\n\t\t\tfor (var i = 0; i < self.initState.rowConditions.length; i++) {\r\n\t\t\t\tviejcolRow[i] = self.initState.rowConditions[i];\r\n\t\t\t}\r\n\t\t\tvar viejcolFilt = new Array();\r\n\t\t\tfor (var i = 0; i < self.initState.filterIndexes.length; i++) {\r\n\t\t\t\tviejcolFilt[i] = self.initState.filterIndexes[i];\r\n\t\t\t}\r\n\r\n\t\t\tfor (var i = 0; i < self.conditions.length; i++) {\r\n\t\t\t\tif ((self.conditions[i]) && (self.conditions[i].distinctValues) && (self.conditions[i].dataField)) {\r\n\t\t\t\t\tvar initValuePos = -1;\r\n\t\t\t\t\tfor (var t = 0; t < self.initState.conditions.length; t++) {\r\n\t\t\t\t\t\tif (self.initState.conditions[t]) {\r\n\t\t\t\t\t\t\tif (self.initState.conditions[t].dataField == self.conditions[i].dataField) {\r\n\t\t\t\t\t\t\t\tinitValuePos = t;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (initValuePos > -1) {\r\n\t\t\t\t\t\tself.initState.conditions[initValuePos].distinctValues = []\r\n\t\t\t\t\t\tfor (var j = 0; j < self.conditions[i].distinctValues.length; j++) {\r\n\t\t\t\t\t\t\tif ((self.initState.conditions[initValuePos]) && (self.initState.conditions[initValuePos].distinctValues.indexOf(self.conditions[i].distinctValues[j]) == -1)) {\r\n\t\t\t\t\t\t\t\tself.initState.conditions[initValuePos].distinctValues.push(self.conditions[i].distinctValues[j])\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tself.initState.conditions[initValuePos].previousPage = self.conditions[i].previousPage\r\n\t\t\t\t\t\tself.initState.conditions[initValuePos].totalPages = self.conditions[i].totalPages\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tself.conditions = jQuery.extend(true, [], self.initState.conditions);\r\n\r\n\t\t\tself.pageData.AxisInfo = jQuery.extend(true, [], self.initState.AxisInfo);\r\n\t\t\tself.pageData.DataInfo = jQuery.extend(true, [], self.initState.DataInfo);\r\n\t\t\tself.pageData.FilterInfo = jQuery.extend(true, [], self.initState.FilterInfo);\r\n\t\t\tself.pageData.CollapseInfo = jQuery.extend(true, [], self.initState.CollapseInfo);\r\n\r\n\t\t\tself.rowConditions = viejcolRow;\r\n\t\t\tself.colConditions = viejcolCond;\r\n\t\t\tself.filterIndexes = viejcolFilt;\r\n\t\t\tself.stateChanged = self.initState.stateChanged;\r\n\t\t\tself.rowsPerPage = self.initState.rowsPerPage;\r\n\t\t\tself.DefaultAction = self.initState.DefaultAction;\r\n\r\n\t\t\tself.initMetadata = jQuery.extend(true, {}, self.initState.InitMetadata);\r\n\r\n\t\t\t//self.initMetadata.Conditions = []\r\n\t\t\t\r\n\t\t\tfor (var iC = 0; iC < self.initMetadata.Conditions.length; iC++)\r\n\t\t\t{\r\n\t\t\t\tself.initMetadata.Conditions[iC] = \"\"\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t//self.initMetadata.Conditions = jQuery.extend(true, [] ,self.initState.conditions);\r\n\t\t\tfor (var ip = 0; ip < self.initState.conditions.length; ip++) {\r\n\t\t\t\tvar dF = self.initState.conditions[ip].dataField;\r\n\t\t\t\tif (dF){\r\n\t\t\t\t\tvar ix = self.initMetadata.DataFields.indexOf(dF);\r\n\t\t\t\t\tself.initMetadata.Conditions[ix] = self.conditions[ip];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (!OAT.isIE()){\r\n\t\t\t\tself.goWhenHide(true);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t/*this.requestDataSyncForPivotTable = function(){\r\n\t\t\tsetTimeout( function() {\r\n\t\t\t\tvar paramobj = { \"QueryviewerId\": self.IdForQueryViewerCollection} ;\r\n\t\t\t\tvar evt = document.createEvent(\"Events\")\r\n\t\t\t\tevt.initEvent(\"RequestDataSyncForPivotTable\", true, true);\r\n\t\t\t\tevt.parameter = paramobj;\r\n\t\t\t\tdocument.dispatchEvent(evt);\r\n\t\t\t}, 0)\r\n\t\t}*/\r\n\t\t\r\n\t\tthis.getDataXML = function(serverData) {\r\n\t\t\tvar dataStr = serverData.split(\"<Recordset\")[1];\r\n\t\t\t//var temp = self.QueryViewerCollection[self.IdForQueryViewerCollection].getPivottableDataSync();\r\n\t\t\tdataStr = \"<Recordset\" + dataStr;\r\n\t\t\treturn dataStr\r\n\t\t}\r\n\t\t\r\n\t\tthis.requestPageDataForPivotTable = function(PageNumber, PageSize, ReturnTotPages, AxesInfo, DataInfo, Filters, ExpandCollapse, LayoutChange){\r\n\t\t\tsetTimeout( function() {\r\n\t\t\t\tvar paramobj = {  \"PageNumber\": PageNumber, \"PageSize\": PageSize,\"ReturnTotPages\":ReturnTotPages, \"AxesInfo\":AxesInfo, \r\n\t\t\t\t\t\"DataInfo\":DataInfo, \"Filters\":Filters, \"ExpandCollapse\":ExpandCollapse, \"LayoutChange\":LayoutChange, \"QueryviewerId\": self.IdForQueryViewerCollection, \r\n\t\t\t\t\t\"callback\": self.setPageDataForPivotTable };\r\n\t\t\t\tvar evt = document.createEvent(\"Events\")\r\n\t\t\t\tevt.initEvent(\"RequestPageDataForPivotTable\", true, true);\r\n\t\t\t\tevt.parameter = paramobj;\r\n\t\t\t\tdocument.dispatchEvent(evt);\r\n\t\t\t}, 0)\r\n\t\t}\r\n\t\t\r\n\t\tthis.setPageDataForPivotTable = function(resXML) {\r\n\t\t\tswitch(self.lastCallToQueryViewer) {\r\n\t\t\t\tcase \"initWhenServerPagination\":\r\n\t\t\t\t\t//if (!qv.util.anyError(resXML) || self.QueryViewerCollection[self.IdForQueryViewerCollection].debugServices) {\r\n\r\n\t\t\t\t\t\tself.pageData = OATGetNewDataFromXMLForPivot(resXML, self.pageData, self.ShowMeasuresAsRows);\r\n\t\t\t\t\t\tself.preGoWhenServerPagination(true);\r\n\r\n\t\t\t\t\t\tif (self.filterIndexes.length > 0) {\r\n\t\t\t\t\t\t\tself.initValueRead(self, 0, self.stateLoad);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tjQuery(\"#\"+self.containerName).removeClass(\"gx-qv-loading\")\r\n\t\t\t\t\t\t//qv.util.hideActivityIndicator(self.QueryViewerCollection[self.IdForQueryViewerCollection]);\r\n\t\r\n\t\t\t\t\t/*} else {\r\n\t\t\t\t\t\tvar errMsg = qv.util.getErrorFromText(resXML);\r\n\t\t\t\t\t\tqv.util.renderError(self.QueryViewerCollection[self.IdForQueryViewerCollection], errMsg);\r\n\t\t\t\t\t};*/\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"callServiceWhenCustomeValues\":\r\n\t\t\t\t\t//if (!qv.util.anyError(resXML) || self.QueryViewerCollection[self.IdForQueryViewerCollection].debugServices) {\r\n\r\n\t\t\t\t\t\tself.pageData = OATGetNewDataFromXMLForPivot(resXML, self.pageData, self.ShowMeasuresAsRows);\r\n\t\t\t\t\t\tself.preGoWhenServerPagination(true);\r\n\t\t\t\t\t\tjQuery(\"#\"+self.containerName).removeClass(\"gx-qv-loading\")\r\n\r\n\t\t\t\t\t/*} else {\r\n\t\t\t\t\t\tvar errMsg = qv.util.getErrorFromText(resXML);\r\n\t\t\t\t\tqv.util.renderError(self.QueryViewerCollection[self.IdForQueryViewerCollection], errMsg);\r\n\t\t\t\t\t}*/\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"refreshPivot\":\r\n\t\t\t\t\t//if (!qv.util.anyError(resXML) || self.QueryViewerCollection[self.IdForQueryViewerCollection].debugServices) {\r\n\r\n\t\t\t\t\t\tself.pageData = OATGetNewDataFromXMLForPivot(resXML, self.pageData, self.ShowMeasuresAsRows);\r\n\t\t\t\t\t\tself.goWhenServerPagination(false, true);\r\n\t\t\t\t\t\tjQuery(\"#\"+self.containerName).removeClass(\"gx-qv-loading\")\r\n\r\n\t\t\t\t\t/*} else {\r\n\t\t\t\t\t\tvar errMsg = qv.util.getErrorFromText(resXML);\r\n\t\t\t\t\t\tqv.util.renderError(self.QueryViewerCollection[self.IdForQueryViewerCollection], errMsg);\r\n\t\t\t\t\t}*/\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"hiddenDimension\":\t\r\n\t\t\t\t\t//if (!qv.util.anyError(resXML) || self.QueryViewerCollection[self.IdForQueryViewerCollection].debugServices) {\r\n\t\t\t\t\t\tself.pageData = OATGetNewDataFromXMLForPivot(resXML, self.pageData, self.ShowMeasuresAsRows);\r\n\t\t\t\t\t\tself.goWhenServerPagination(false, false);\r\n\t\t\t\t\t\tjQuery(\"#\"+self.containerName).removeClass(\"gx-qv-loading\")\r\n\t\t\t\t\t/*} else {\r\n\t\t\t\t\t\tvar errMsg = qv.util.getErrorFromText(resXML);\r\n\t\t\t\t\t\tqv.util.renderError(self.QueryViewerCollection[self.IdForQueryViewerCollection], errMsg);\r\n\t\t\t\t\t}*/\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"DataForPivot\":\t\r\n\t\t\t\t\tself.pageData = OATGetNewDataFromXMLForPivot(resXML, self.pageData, self.ShowMeasuresAsRows, self.ExportTo);\r\n\t\t\t\t\tself.preGoWhenServerPagination(self.lastNotAutorefreshIndicator);\r\n\t\t\t\t\tif (self.ExportTo != \"\") {\r\n\t\t\t\t\t\tvar FileName = self.query\r\n\t\t\t\t\t\tif (FileName == \"\") {\r\n\t\t\t\t\t\t\tFileName = \"Query\"\r\n\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\tFileName = self.controlName.split(\"_\")[0]\r\n\t\t\t\t\t\t\t} catch (error) { }\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (self.ExportTo == \"HTML\") {\r\n\t\t\t\t\t\t\tself.ExportToHTMLWhenServerPagination()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (self.ExportTo == \"PDF\") {\r\n\t\t\t\t\t\t\tOAT.GeneratePDFOutput(self, FileName)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (self.ExportTo == \"XLS\") {\r\n\t\t\t\t\t\t\tself.ExportToExcel(FileName);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (self.ExportTo == \"XML\") {\r\n\t\t\t\t\t\t\tself.ExportToXMLWhenServerPagination();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (self.ExportTo == \"XLSX\") {\r\n\t\t\t\t\t\t\tself.ExportToXLSXWhenServerPagination();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tself.cleanGridCache();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tjQuery(\"#\"+self.containerName).removeClass(\"gx-qv-loading\")\r\n\t\t\t\t\t//qv.util.hideActivityIndicator(self.QueryViewerCollection[self.IdForQueryViewerCollection]);\r\n\t\t\t\t\tbreak;\r\n\t\t\t  }\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\tthis.requestAttributeValues = function(DataField, Page, PageSize, FilterText)\r\n\t\t{\r\n\t\t\tsetTimeout( function() {\r\n\t\t\t\t\r\n\t\t\t\tvar paramobj = {  \"DataField\": DataField, \"Page\": Page,\"PageSize\":PageSize, \"FilterText\":FilterText, \"QueryviewerId\": self.IdForQueryViewerCollection};\r\n\t\t\t\tvar evt = document.createEvent(\"Events\")\r\n\t\t\t\tevt.initEvent(\"RequestAttributeValuesForPivotTable\", true, true);\r\n\t\t\t\tevt.parameter = paramobj;\r\n\t\t\t\tdocument.dispatchEvent(evt);\r\n\t\t\t\t\r\n\t\t\t}, 0)\r\n\t\t}\r\n\t\t\r\n\t\tthis.setAttributeValuesForPivotTable = function(resJSON)\r\n\t\t{\r\n\t\t\t\r\n\t\t\tswitch(self.lastRequestAttributeValues) {\r\n\t\t\t\tcase \"initValueRead\":\r\n\t\t\t\t\tvar data = JSON.parse(resJSON);\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar columnNumber = self.lastRequestAttributeColumnNumber\r\n\t\t\t\t\tallData = self.lastRequestAttributeAllData \r\n\t\t\t\t\trequestDataField = self.lastRequestAttributeRequestDataField\r\n\t\t\t\t\t\r\n\t\t\t\t\tself.conditions[columnNumber].previousPage = data.PageNumber\r\n\t\t\t\t\tself.conditions[columnNumber].totalPages = data.PagesCount\r\n\t\t\t\t\tself.conditions[columnNumber].blocked = false\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (allData) {\r\n\t\t\t\t\t\tself.conditions[columnNumber].distinctValues = []\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//null value?\r\n\t\t\t\t\tif (data.Null) {\r\n\t\t\t\t\t\tself.conditions[columnNumber].hasNull = true;\r\n\t\t\t\t\t\tif (self.conditions[columnNumber].distinctValues.indexOf(\"#NuN#\") == -1) {\r\n\t\t\t\t\t\t\tself.conditions[columnNumber].distinctValues.push(\"#NuN#\")\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar nullIncluded = true;\r\n\r\n\t\t\t\t\t\tif (!self.conditions[columnNumber].NullIncluded) {\r\n\t\t\t\t\t\t\tnullIncluded = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif ((nullIncluded) && (self.conditions[columnNumber].visibles.indexOf(\"#NuN#\") == -1)) {\r\n\t\t\t\t\t\t\tself.conditions[columnNumber].visibles.push(\"#NuN#\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tself.conditions[columnNumber].hasNull = false;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar includeLists = [];\r\n\t\t\t\t\tfor (var i = 0; i < data.NotNullValues.length; i++) {\r\n\t\t\t\t\t\tvar value = data.NotNullValues[i]\r\n\t\t\t\t\t\tvar include = false;\r\n\t\t\t\t\t\tif ((self.conditions[columnNumber].state == \"none\") &&\r\n\t\t\t\t\t\t\t(self.UserFilterValues.length > 0) && (self.UserFilterValues[columnNumber] != undefined)\r\n\t\t\t\t\t\t\t&& (self.UserFilterValues[columnNumber].length > 0) && (self.UserFilterValues[columnNumber].indexOf(value.trimpivot()) != -1)) {\r\n\t\t\t\t\t\t\tinclude = true;\r\n\t\t\t\t\t\t\tincludeLists.push(value)\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (self.conditions[columnNumber].distinctValues.indexOf(value) == -1) {\r\n\t\t\t\t\t\t\tself.conditions[columnNumber].distinctValues.push(value)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif ((self.conditions[columnNumber].state == \"all\")\r\n\t\t\t\t\t\t\t&& (self.conditions[columnNumber].visibles.indexOf(value) == -1)) {\r\n\t\t\t\t\t\t\tself.conditions[columnNumber].visibles.push(value)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif ((self.conditions[columnNumber].state == \"none\")\r\n\t\t\t\t\t\t\t&& (self.conditions[columnNumber].blackList.indexOf(value) == -1)\r\n\t\t\t\t\t\t\t&& (!include)) {\r\n\t\t\t\t\t\t\tself.conditions[columnNumber].blackList.push(value)\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif ((allData) && (self.UserExpandValues.length > 0)) {//collapsed values\r\n\t\t\t\t\t\t\tif (self.UserExpandValues[columnNumber] != undefined) {\r\n\t\t\t\t\t\t\t\tif ((self.UserExpandValues[columnNumber][0] == \"#ALLCOLLAPSE#\") ||\r\n\t\t\t\t\t\t\t\t\t(self.UserExpandValues[columnNumber].indexOf(value.trimpivot()) == -1)) {\r\n\t\t\t\t\t\t\t\t\tself.conditions[columnNumber].collapsedValues.push(value);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfor (var i = 0; i < includeLists.length; i++) {\r\n\t\t\t\t\t\tself.createFilterInfo({ op: \"pop\", values: includeLists[i], dim: columnNumber }, true);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (requestDataField == undefined){\r\n\t\t\t\t\t\tcolumnNumber++;\r\n\t\t\t\t\t\tself.initValueRead(self, columnNumber, allData)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"DrawFilters\":\r\n\t\t\t\t\tvar data = JSON.parse(resJSON);\r\n\t\t\t\t\tvar columnNumber = self.lastRequestAttributeColumnNumber\r\n\t\t\t\t\t\r\n\t\t\t\t\tself.conditions[columnNumber].previousPage = data.PageNumber\r\n\t\t\t\t\tself.conditions[columnNumber].totalPages = data.PagesCount\r\n\t\t\t\t\tself.conditions[columnNumber].blocked = true\r\n\t\t\t\t\t//null value?\r\n\t\t\t\t\tif ((data.Null) && (!self.conditions[columnNumber].hasNull)) {\r\n\t\t\t\t\t\tself.conditions[columnNumber].hasNull = true;\r\n\t\t\t\t\t\tif (self.conditions[columnNumber].distinctValues.indexOf(\"#NuN#\") == -1) {\r\n\t\t\t\t\t\t\tself.conditions[columnNumber].distinctValues.push(\"#NuN#\")\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (self.conditions[columnNumber].defaultAction == \"Include\") {\r\n\t\t\t\t\t\t\tif (self.conditions[columnNumber].visibles.indexOf(\"#NuN#\") == -1) {\r\n\t\t\t\t\t\t\t\tself.conditions[columnNumber].visibles.push(\"#NuN#\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (self.conditions[columnNumber].blackList.indexOf(\"#NuN#\") == -1) {\r\n\t\t\t\t\t\t\t\tself.conditions[columnNumber].blackList.push(\"#NuN#\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfor (var i = 0; i < data.NotNullValues.length; i++) {\r\n\t\t\t\t\t\tvar value = data.NotNullValues[i]\r\n\t\t\t\t\t\tif (self.conditions[columnNumber].distinctValues.indexOf(value) == -1) {\r\n\t\t\t\t\t\t\tself.conditions[columnNumber].distinctValues.push(value)\r\n\r\n\t\t\t\t\t\t\tif ((self.conditions[columnNumber].defaultAction == \"Include\")\r\n\t\t\t\t\t\t\t\t&& (self.conditions[columnNumber].visibles.indexOf(value) == -1)) {\r\n\t\t\t\t\t\t\t\tself.conditions[columnNumber].visibles.push(value)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif ((self.conditions[columnNumber].state == \"Exclude\")\r\n\t\t\t\t\t\t\t\t&& (self.conditions[columnNumber].blackList.indexOf(value) == -1)) {\r\n\t\t\t\t\t\t\t\tself.conditions[columnNumber].blackList.push(value)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar actualValues = self.conditions[columnNumber].distinctValues;\r\n\t\t\t\t\tfor (var j = 0; j < actualValues.length; j++) {\r\n\t\t\t\t\t\tvar v = actualValues[j];\r\n\t\t\t\t\t\tif (self.conditions[columnNumber].filteredShowValues.indexOf(v) == -1) {\r\n\t\t\t\t\t\t\tself.conditions[columnNumber].filteredShowValues.push(v);\r\n\t\t\t\t\t\t\tif (v != \"#NuN#\") {\r\n\t\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\t\tOAT.Dom.option(self.dimensionPictureValue(v, columnNumber), v, s);\r\n\t\t\t\t\t\t\t\t} catch (Error) {\r\n\t\t\t\t\t\t\t\t\tOAT.Dom.option(v, v, s);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tOAT.Dom.option(\" \", v, s);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"hiddenDimension\":\r\n\t\t\t\t\t\tvar data = JSON.parse(resJSON);\r\n\t\t\t\t\t\tvar columnNumber = self.lastRequestAttributeColumnNumber\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tself.conditions[columnNumber].previousPage = data.PageNumber\r\n\t\t\t\t\t\tself.conditions[columnNumber].totalPages = data.PagesCount\r\n\t\t\t\t\t\tself.conditions[columnNumber].blocked = false\r\n\t\t\t\t\t\t//null value?\r\n\t\t\t\t\t\tif (data.Null) {\r\n\t\t\t\t\t\t\tself.conditions[columnNumber].hasNull = true;\r\n\t\t\t\t\t\t\tif (self.conditions[columnNumber].distinctValues.indexOf(\"#NuN#\") == -1) {\r\n\t\t\t\t\t\t\t\tself.conditions[columnNumber].distinctValues.push(\"#NuN#\")\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tvar nullIncluded = true;\r\n\r\n\t\t\t\t\t\t\tif (!self.conditions[columnNumber].NullIncluded) {\r\n\t\t\t\t\t\t\t\tnullIncluded = false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif ((nullIncluded) && (self.conditions[columnNumber].visibles.indexOf(\"#NuN#\") == -1)) {\r\n\t\t\t\t\t\t\t\tself.conditions[columnNumber].visibles.push(\"#NuN#\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tself.conditions[columnNumber].hasNull = false;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvar includeLists = [];\r\n\t\t\t\t\t\tfor (var i = 0; i < data.NotNullValues.length; i++) {\r\n\t\t\t\t\t\t\tvar value = data.NotNullValues[i]\r\n\t\t\t\t\t\t\tvar include = false;\r\n\t\t\t\t\t\t\tif ((self.conditions[columnNumber].state == \"none\") &&\r\n\t\t\t\t\t\t\t\t(self.UserFilterValues.length > 0) && (self.UserFilterValues[columnNumber] != undefined)\r\n\t\t\t\t\t\t\t\t&& (self.UserFilterValues[columnNumber].length > 0) && (self.UserFilterValues[columnNumber].indexOf(value.trimpivot()) != -1)) {\r\n\t\t\t\t\t\t\t\tinclude = true;\r\n\t\t\t\t\t\t\t\tincludeLists.push(value)\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif (self.conditions[columnNumber].distinctValues.indexOf(value) == -1) {\r\n\t\t\t\t\t\t\t\tself.conditions[columnNumber].distinctValues.push(value)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif ((self.conditions[columnNumber].state == \"all\")\r\n\t\t\t\t\t\t\t\t&& (self.conditions[columnNumber].visibles.indexOf(value) == -1)) {\r\n\t\t\t\t\t\t\t\tself.conditions[columnNumber].visibles.push(value)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif ((self.conditions[columnNumber].state == \"none\")\r\n\t\t\t\t\t\t\t\t&& (self.conditions[columnNumber].blackList.indexOf(value) == -1)\r\n\t\t\t\t\t\t\t\t&& (!include)) {\r\n\t\t\t\t\t\t\t\tself.conditions[columnNumber].blackList.push(value)\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif ((self.UserExpandValues.length > 0)) {//collapsed values\r\n\t\t\t\t\t\t\t\tif (self.UserExpandValues[columnNumber] != undefined) {\r\n\t\t\t\t\t\t\t\t\tif ((self.UserExpandValues[columnNumber][0] == \"#ALLCOLLAPSE#\") ||\r\n\t\t\t\t\t\t\t\t\t\t(self.UserExpandValues[columnNumber].indexOf(value.trimpivot()) == -1)) {\r\n\t\t\t\t\t\t\t\t\t\t\tself.conditions[columnNumber].collapsedValues.push(value);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tfor (var i = 0; i < includeLists.length; i++) {\r\n\t\t\t\t\t\t\tself.createFilterInfo({ op: \"pop\", values: includeLists[i], dim: columnNumber }, true);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"readScrollValueWithoutFilters\":\r\n\t\t\t\t\tvar res = JSON.parse(resJSON);\r\n\t\t\t\t\tself.appendNewValueData(self.lastRequestValue, res)\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"readScrollValueWithFilters\":\r\n\t\t\t\t\tvar res = JSON.parse(resJSON);\r\n\t\t\t\t\tvar columnNumber = self.lastRequestAttributeColumnNumber\r\n\t\t\t\t\tvar filterText = self.lastRequestAttributeFilterText\r\n\t\t\t\t\tself.appendNewFilteredValueData(res, columnNumber, filterText)\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"ValuesForColumn\":\r\n\t\t\t\t\tvar res = JSON.parse(resJSON);\r\n\t\t\t\t\tvar columnNumber = self.lastRequestAttributeColumnNumber \r\n\t\t\t\t\tvar filterValuePars = self.lastRequestAttributeFilterText\r\n\t\t\t\t\tvar dataField = self.lastRequestAttributeDataField\r\n\t\t\t\t\tvar UcId = self.lastRequestAttributeUcId = UcId\r\n\t\t\t\t\tself.changeValues(UcId, dataField, columnNumber, res, filterValuePars);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"ExpandCollapse\":\r\n\t\t\t\t\tvar data = JSON.parse(resJSON);\r\n\t\t\t\t\tvar columnNumber = self.lastColumnNumber\r\n\t\t\t\t\tvar elemvalue = self.lastRequestAttributeValuesElemValue\r\n\t\t\t\t\tvar action = self.lastRequestAttributeValuesAction \r\n\t\t\t\t\t\r\n\t\t\t\t\tself.conditions[columnNumber].previousPage = data.PageNumber\r\n\t\t\t\t\tself.conditions[columnNumber].totalPages = data.PagesCount\r\n\t\t\t\t\tself.conditions[columnNumber].blocked = true\r\n\r\n\t\t\t\t\t//null value?\r\n\t\t\t\t\tif ((data.Null) && (!self.conditions[columnNumber].hasNull)) {\r\n\t\t\t\t\t\tself.conditions[columnNumber].hasNull = true;\r\n\t\t\t\t\t\tif (self.conditions[columnNumber].distinctValues.indexOf(\"#NuN#\") == -1) {\r\n\t\t\t\t\t\t\tself.conditions[columnNumber].distinctValues.push(\"#NuN#\")\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (self.conditions[columnNumber].defaultAction == \"Include\") {\r\n\t\t\t\t\t\t\tif (self.conditions[columnNumber].visibles.indexOf(\"#NuN#\") == -1) {\r\n\t\t\t\t\t\t\t\tself.conditions[columnNumber].visibles.push(\"#NuN#\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (self.conditions[columnNumber].blackList.indexOf(\"#NuN#\") == -1) {\r\n\t\t\t\t\t\t\t\tself.conditions[columnNumber].blackList.push(\"#NuN#\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfor (var i = 0; i < data.NotNullValues.length; i++) {\r\n\t\t\t\t\t\tvar val = data.NotNullValues[i]\r\n\t\t\t\t\t\tif (self.conditions[columnNumber].distinctValues.indexOf(val) == -1) {\r\n\t\t\t\t\t\t\tself.conditions[columnNumber].distinctValues.push(val)\r\n\r\n\t\t\t\t\t\t\tif ((self.conditions[columnNumber].defaultAction == \"Include\")\r\n\t\t\t\t\t\t\t\t&& (self.conditions[columnNumber].visibles.indexOf(val) == -1)) {\r\n\t\t\t\t\t\t\t\tself.conditions[columnNumber].visibles.push(val)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif ((self.conditions[columnNumber].state == \"Exclude\")\r\n\t\t\t\t\t\t\t\t&& (self.conditions[columnNumber].blackList.indexOf(val) == -1)) {\r\n\t\t\t\t\t\t\t\tself.conditions[columnNumber].blackList.push(val)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar datastr = self.ExpandCollapseHandleWhenServerPaginationCreateXML(elemvalue, action)\r\n\t\t\t\t\tdatastr = datastr.replace(/\\&/g, '&amp;');\r\n\r\n\t\t\t\t\tself.getDataForPivot(self.UcId, self.pageData.ServerPageNumber, self.rowsPerPage, true, \"\", \"\", \"\", \"\", true);\r\n\t\t\t\t\tsetTimeout(function () {\r\n\t\t\t\t\t\tself.fireOnItemExpandCollapseEvent(self.QueryViewerCollection[IdForQueryViewerCollection], datastr, (action == \"collapse\"))\r\n\t\t\t\t\t\t//qv.pivot.onItemExpandCollapseEvent(self.QueryViewerCollection[IdForQueryViewerCollection], datastr, (action == \"collapse\"))\r\n\t\t\t\t\t}, 2000);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"FilteredChanged\":\r\n\t\t\t\t\tsetTimeout(function () {\r\n\t\t\t\t\t\tvar data = JSON.parse(resJSON);\r\n\t\t\t\t\t\tself.onFilteredChangedEventHandleWhenServerPaginationCreateXML(self.lastColumnNumber, data.NotNullValues, self.conditions[self.lastColumnNumber].blackList);\r\n\t\t\t\t\t}, 200)\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\tthis.fireOnItemExpandCollapseEvent = function(query, datastr, collapse){\r\n\t\t\tsetTimeout( function() {\r\n\t\t\t\tvar paramobj = {\"QueryViewer\": query, \"Data\": datastr, \"QueryviewerId\": self.IdForQueryViewerCollection, \"IsCollapse\": collapse};\r\n\t\t\t\tvar evt = document.createEvent(\"Events\")\r\n\t\t\t\tevt.initEvent(\"PivotTableOnItemExpandCollapseEvent\", true, true);\r\n\t\t\t\tevt.parameter = paramobj;\r\n\t\t\t\tdocument.dispatchEvent(evt);\r\n\t\t\t}, 0)\r\n\t\t}\r\n\t\t\r\n\t\tthis.requestCalculatePivottableData = function()\r\n\t\t{\r\n\t\t\tsetTimeout( function() {\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tvar evt = document.createEvent(\"Events\")\r\n\t\t\t\tvar paramobj = {\"QueryviewerId\": self.IdForQueryViewerCollection};\r\n\t\t\t\tevt.initEvent(\"RequestCalculatePivottableData\", true, true);\r\n\t\t\t\tevt.parameter = paramobj;\r\n\t\t\t\tdocument.dispatchEvent(evt);\r\n\t\t\t\t\r\n\t\t\t}, 0)\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\tthis.setPivottableDataCalculation = function(resText)\r\n\t\t{\r\n\t\t\t\r\n\t\t\tswitch(self.lastRequestCalculation) {\r\n\t\t\t\tcase \"ExportToXML\":\r\n\t\t\t\t\tself.allDataWithoutSort = OATgetDataFromXMLOldFormat(resText, self.pageData.dataFields)\r\n\t\t\t\t\tself.allData = self.allDataWithoutSort\r\n\r\n\t\t\t\t\tvar prevConditions = jQuery.extend(true, [], self.conditions);\r\n\t\t\t\t\tfor (var t = 0; t < self.conditions.length; t++) {\r\n\t\t\t\t\t\tif (self.conditions[t]) {\r\n\t\t\t\t\t\t\tfor (var i = 0; i < self.allData.length; i++) {\r\n\t\t\t\t\t\t\t\tvar value = self.allData[i][t];\r\n\t\t\t\t\t\t\t\tif (value == undefined) {\r\n\t\t\t\t\t\t\t\t\tvalue = \" \";\r\n\t\t\t\t\t\t\t\t\tself.allData[i][index] = \" \";\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (self.conditions[t].distinctValues.indexOf(value) == -1) {\r\n\t\t\t\t\t\t\t\t\tself.conditions[t].distinctValues.push(value);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\tself.sort(self.conditions[t], t);\r\n\t\t\t\t\t\t\t} catch (ERROR) { }\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tself.applyFilters();\r\n\t\t\t\t\tself.createAggStructure();\r\n\t\t\t\t\tself.fillAggStructure();\r\n\t\t\t\t\tself.checkAggStructure();\r\n\t\t\t\t\t//self.count();\r\n\r\n\t\t\t\t\tstr = self.ExportToXML();\r\n\t\t\t\t\tself.allDataWithoutSort = []; self.allData = []; self.filteredData = [];\r\n\t\t\t\t\tself.conditions = prevConditions;\r\n\r\n\t\t\t\t\tif ((OAT.isSafari()) || (self.isSD)) { //for safari\r\n\t\t\t\t\t\twindow.open('data:text/xml,' + encodeURIComponent('<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?>' + str));\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvar blob = new Blob([str], { type: \"text/xml\" });\r\n\t\t\t\t\t\tif (self.query != \"\") {\r\n\t\t\t\t\t\t\tsaveAs(blob, self.query + \".xml\");\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tvar name = 'Query'\r\n\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\tname = self.controlName.substr(4).split(\"_\")[0]\r\n\t\t\t\t\t\t\t} catch (error) { }\r\n\t\t\t\t\t\t\tsaveAs(blob, name + \".xml\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"ExportToXLSX\":\r\n\t\t\t\t\tvar dataFields = [];\r\n\t\t\t\t\r\n\t\t\t\t\tfor (var t = 0; t < self.initMetadata.Dimensions.length; t++){\r\n\t\t\t\t\t\tif (self.initMetadata.Dimensions[t].Visible)\r\n\t\t\t\t\t\t\tdataFields.push(self.initMetadata.Dimensions[t].dataField);\r\n\t\t\t\t\t}\t\t\t\t\r\n\t\t\t\t\tfor (var t = 0; t < self.pageData.AxisInfo.length; t++) {\r\n\t\t\t\t\t\tif ((self.pageData.AxisInfo[t].Axis != undefined) && (self.pageData.AxisInfo[t].Axis.Type == \"Hidden\")) {\r\n\t\t\t\t\t\t\tvar index = dataFields.indexOf(self.pageData.AxisInfo[t].DataField);\r\n\t\t\t\t\t\t\tif (index > -1) {\r\n\t\t\t\t\t\t\t\tdataFields.splice(index, 1)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\tfor (var t = 0; t < self.initMetadata.Measures.length; t++){\r\n\t\t\t\t\t\tif ((self.initMetadata.Measures[t].Visible) &&  (dataFields.indexOf(self.initMetadata.Measures[t].dataField) < 0))\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tdataFields.push(self.initMetadata.Measures[t].dataField)\r\n\t\t\t\t\t\t} \r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfor (var t = 0; t < measures.length; t++) {\r\n\t\t\t\t\t\tif (measures[t].getAttribute(\"aggregation\") == \"average\") {\r\n\t\t\t\t\t\t\tself.formulaInfo.measureFormula[t].hasFormula = true;\r\n\t\t\t\t\t\t\tself.formulaInfo.measureFormula[t].textFormula = measures[t].getAttribute(\"dataField\") + \"_N/\" + measures[t].getAttribute(\"dataField\") + \"_D\"\r\n\r\n\t\t\t\t\t\t\tself.formulaInfo.cantFormulaMeasures++;\r\n\r\n\t\t\t\t\t\t\tvar inlineFormula = self.formulaInfo.measureFormula[t].textFormula\r\n\r\n\t\t\t\t\t\t\tvar inline = inlineFormula\r\n\t\t\t\t\t\t\tvar opers = ['*', '-', '+', '/', '(', ')']\r\n\t\t\t\t\t\t\tfor (var j = 0; j < opers.length; j++) {\r\n\t\t\t\t\t\t\t\tvar inline2 = inline.split(opers[j])\r\n\t\t\t\t\t\t\t\tif (inline2.length > 1) {\r\n\t\t\t\t\t\t\t\t\tinline = \"\"\r\n\t\t\t\t\t\t\t\t\tfor (var i = 0; i < inline2.length - 1; i++) {\r\n\t\t\t\t\t\t\t\t\t\tinline = inline + inline2[i] + \" \" + opers[j] + \" \"\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tinline = inline + inline2[inline2.length - 1]\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\t\r\n\r\n\t\t\t\t\t\t\tvar polishNot = InfixToPostfix(inline)\r\n\t\t\t\t\t\t\tformulaInfo.measureFormula[t].polishNotationText = polishNot\r\n\t\t\t\t\t\t\tvar items = polishNot.split(\" \")\r\n\t\t\t\t\t\t\twhile (items.indexOf(\"\") != -1) {\r\n\t\t\t\t\t\t\t\titems.splice(items.indexOf(\"\"), 1)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tvar relatedMeasure = []\r\n\t\t\t\t\t\t\tfor (var k = 0; k < items.length; k++) {\r\n\t\t\t\t\t\t\t\tif ((opers.indexOf(items[k]) == -1) && (isNaN(parseInt(items[k])))) {\r\n\t\t\t\t\t\t\t\t//add item\r\n\t\t\t\t\t\t\t\t\tvar operPositionInDataRow = formulaInfo.itemPosition[items[k]]\r\n\t\t\t\t\t\t\t\t\tif (relatedMeasure.indexOf(operPositionInDataRow) == -1)\r\n\t\t\t\t\t\t\t\t\t\trelatedMeasure.push(operPositionInDataRow)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tself.formulaInfo.measureFormula[t].relatedMeasures = relatedMeasure\r\n\r\n\t\t\t\t\t\t\tvar arrayNot = polishNot.split(\" \")\r\n\t\t\t\t\t\t\twhile (arrayNot.indexOf(\"\") != -1) {\r\n\t\t\t\t\t\t\t\tarrayNot.splice(arrayNot.indexOf(\"\"), 1)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tself.formulaInfo.measureFormula[t].PolishNotation = arrayNot\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tresText = resText.replace(/\\&amp;/g, '&').replace(/\\&lt;/g, '<').replace(/\\&gt;/g, '>').replace(/\\&apos;/g, '\\'').replace(/\\&quot/g, '\\\"')\r\n\t\t\t\t\tvar res = OATgetDataFromXMLOldFormat(resText, dataFields, self.OrderFildsHidden)\r\n\t\t\t\t\tself.GeneralDataRows = res[0]\r\n\t\t\t\t\tself.recordForFormula = res[1]\r\n\t\t\t\t\tself.allData = self.GeneralDataRows\r\n\r\n\t\t\t\t\tvar prevConditions = jQuery.extend(true, [], self.conditions);\r\n\t\t\t\t\tself.GeneralDistinctValues = [];\r\n\t\t\t\t\tfor (var t = 0; t < self.conditions.length; t++) {\r\n\t\t\t\t\t\tif (self.conditions[t]) {\r\n\t\t\t\t\t\tself.GeneralDistinctValues[t] = []\r\n\t\t\t\t\t\tfor (var i = 0; i < self.allData.length; i++) {\r\n\t\t\t\t\t\t\tvar value = self.allData[i][t];\r\n\t\t\t\t\t\t\tif (value == undefined) {\r\n\t\t\t\t\t\t\t\tvalue = \" \";\r\n\t\t\t\t\t\t\t\tself.allData[i][index] = \" \";\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (self.conditions[t].distinctValues.indexOf(value) == -1) {\r\n\t\t\t\t\t\t\t\tself.conditions[t].distinctValues.push(value);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (self.GeneralDistinctValues[t].indexOf(value) == -1) {\r\n\t\t\t\t\t\t\t\tself.GeneralDistinctValues[t].push(value);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\tself.sort(self.conditions[t], t);\r\n\t\t\t\t\t\t} catch (ERROR) { }\r\n\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tself.applyFilters();\r\n\t\t\t\t\tself.createAggStructure();\r\n\t\t\t\t\tself.fillAggStructure();\r\n\t\t\t\t\tself.checkAggStructure();\r\n\t\t\t\t\t//self.count();\r\n\r\n\t\t\t\t\tvar FileName = self.query\r\n\t\t\t\t\tif (FileName == \"\") {\r\n\t\t\t\t\t\tFileName = \"Query\"\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\tFileName = self.controlName.split(\"_\")[0]\r\n\t\t\t\t\t\t} catch (error) { }\r\n\t\t\t\t\t}\r\n\t\t\t\t\tOAT.GenerateExcelOutput(FileName, self, measures);\r\n\r\n\t\t\t\t\tstr = self.ExportToXML();\r\n\t\t\t\t\tself.GeneralDataRows = []; self.allData = []; self.filteredData = []; self.GeneralDistinctValues = [];\r\n\t\t\t\t\tself.conditions = prevConditions;\r\n\r\n\t\t\t\t\t//quitar formulas averages\r\n\t\t\t\t\tfor (var t = 0; t < measures.length; t++) {\r\n\t\t\t\t\t\tif (measures[t].getAttribute(\"aggregation\") == \"average\") {\r\n\t\t\t\t\t\t\tself.formulaInfo.measureFormula[t] = { hasFormula: false };\r\n\t\t\t\t\t\t\tself.formulaInfo.cantFormulaMeasures--;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\tthis.getFilteredDataXML = function (serverData) {\r\n\t\t\t\r\n\t\t\t\t//var temp = self.QueryViewerCollection[self.IdForQueryViewerCollection].getPivottableDataSync();\r\n\t\t\t\ttemp = serverData.replace(/\\&amp;/g, '&').replace(/\\&lt;/g, '<').replace(/\\&gt;/g, '>').replace(/\\&apos;/g, '\\'').replace(/\\&quot/g, '\\\"');\r\n\t\t\t\tvar stringRecord = temp.split(\"<Record>\")\r\n\r\n\t\t\t\tvar tempData = [];\r\n\t\t\t\tfor (var i = 1; i < stringRecord.length; i++) {\r\n\t\t\t\t\tvar recordData = [];\r\n\t\t\t\t\tvar fullRecordData = [];\r\n\t\t\t\t\tvar visibleData = [];\r\n\t\t\t\t\tfor (var j = 0; j < self.pageData.dataFields.length; j++) {\r\n\t\t\t\t\t\trecordData[j] = \"#NuN#\"\r\n\t\t\t\t\t\tvar dt = stringRecord[i].split(\"<\" + self.pageData.dataFields[j] + \">\")\r\n\t\t\t\t\t\tif (dt.length > 1) {\r\n\t\t\t\t\t\t\tvar at = dt[1].split(\"</\" + self.pageData.dataFields[j] + \">\")\r\n\t\t\t\t\t\t\t/*var rp = at[0].replace(/^\\s+|\\s+$/g, '')\r\n\t\t\t\t\t\t\trecordData[j] = (rp != \"\") ? rp : undefined*/\r\n\t\t\t\t\t\t\trecordData[j] = at[0]\r\n\t\t\t\t\t\t\tfullRecordData[j] = recordData[j]\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tfor (var t=0; t< self.initMetadata.Dimensions.length; t++){\r\n\t\t\t\t\t\t\t\tif (self.initMetadata.Dimensions[t].dataField == self.pageData.dataFields[j]){\r\n\t\t\t\t\t\t\t\t\tvar displayName = self.initMetadata.Dimensions[t].displayName;\r\n\t\t\t\t\t\t\t\t\tif (self.headerRow.indexOf(displayName) != -1){\r\n\t\t\t\t\t\t\t\t\t\tvisibleData.push(at[0])\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (j >= self.initMetadata.Dimensions.length){\r\n\t\t\t\t\t\t\t\tvisibleData.push(at[0])\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (stringRecord[i].indexOf(\"<\" + self.pageData.dataFields[j] + \"/>\") >= 0) {\r\n\t\t\t\t\t\t\t\trecordData[j] = \"\"\r\n\t\t\t\t\t\t\t\tfullRecordData[j] = \"\"\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (self.filterDataXMLOK(visibleData)) {\r\n\t\t\t\t\t\ttempData.push(recordData);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//var dataStr = '<Table>\\n'\r\n\t\t\t\tvar dataStr = '<Recordset RecordCount=\\\"' + tempData.length + '\\\" PageCount=\\\"1\\\">\\n';\r\n\t\t\t\tdataStr = dataStr + '<Page PageNumber=\\\"1\\\">\\n';\r\n\r\n\t\t\t\tfor (var i = 0; i < tempData.length; i++) {\r\n\t\t\t\t\tdataStr = dataStr + '  <Record>\\n'\r\n\r\n\t\t\t\t\tfor (var iCV = 0; iCV < self.initMetadata.DataFields.length; iCV++) {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tvar dataField = self.initMetadata.DataFields[iCV]\r\n\t\t\t\t\t\tdataStr = dataStr + '    <' + dataField + '>'\r\n\t\t\t\t\t\tdataStr = dataStr + (tempData[i][iCV] || '').replace(/\\&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\"/g, '&quot;').replace(/'/g, '&#x27;');\r\n\t\t\t\t\t\tdataStr = dataStr + '</' + dataField + '>\\n'\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfor (var iCV = 0; iCV < measures.length; iCV++) {\r\n\t\t\t\t\t\tdataStr = dataStr + '    <' + measures[iCV].getAttribute(\"dataField\") + '>'\r\n\t\t\t\t\t\tdataStr = dataStr + (tempData[i][iCV + self.initMetadata.DataFields.length] || '').replace(/\\&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\"/g, '&quot;').replace(/'/g, '&#x27;');\r\n\t\t\t\t\t\tdataStr = dataStr + '</' + measures[iCV].getAttribute(\"dataField\") + '>\\n'\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tdataStr = dataStr + '  </Record>\\n'\r\n\t\t\t\t}\r\n\r\n\t\t\t\tdataStr = dataStr + '</Page>\\n</Recordset>';\r\n\t\t\t\treturn dataStr\r\n\t\t\t\r\n\t\t}\r\n\r\n\t\tthis.getMetadataXML = function () {\r\n\t\t\txml = '<OLAPCube format=\"' + this.defaultPicture.getAttribute(\"format\") + '\" thousandsSeparator=\"' + this.defaultPicture.getAttribute(\"thousandsSeparator\") + '\" decimalSeparator=\"' + this.defaultPicture.getAttribute(\"decimalSeparator\") + '\" dateFormat=\"' + this.defaultPicture.getAttribute(\"dateFormat\") + '\">'\r\n\r\n\t\t\tvar forMetadatacolumns = this.columns;\r\n\t\t\tif (self.initMetadata.Metadata) {\r\n\t\t\t\tvar xmlDoc = jQuery.parseXML(self.initMetadata.Metadata);\r\n\t\t\t\tforMetadatacolumns = []\r\n\t\t\t\tforMetadatacolumns = xmlDoc.getElementsByTagName(\"OLAPDimension\");\r\n\t\t\t}\r\n\r\n\t\t\tvar hiddenPos = 1\r\n\t\t\t\r\n\t\t\tvar rowPos = 0; var cantRowHidden = 0;\r\n\t\t\tvar colPos = 0; var cantColHidden = 0;\r\n\t\t\tvar pagePos = 0; var cantPageHidden = 0;\r\n\t\t\tfor (var iCV = 0; iCV < forMetadatacolumns.length; iCV++) {\r\n\t\t\t\tvar conPos = iCV;\r\n\t\t\t\tif (self.initMetadata.Metadata) {\r\n\t\t\t\t\tconPos = -1;\r\n\t\t\t\t\tfor (var c = 0; c < self.conditions.length; c++) {\r\n\t\t\t\t\t\tif (self.conditions[c].dataField == self.initMetadata.Dimensions[iCV].dataField) {\r\n\t\t\t\t\t\t\tconPos = c;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\txml = xml + '<OLAPDimension>'\r\n\r\n\t\t\t\txml = xml + '<name>' + forMetadatacolumns[iCV].getAttribute(\"name\") + '</name> '\r\n\t\t\t\txml = xml + '<displayName>' + forMetadatacolumns[iCV].getAttribute(\"displayName\") + '</displayName> ';\r\n\t\t\t\txml = xml + '<description>' + forMetadatacolumns[iCV].getAttribute(\"description\") + '</description> ';\r\n\t\t\t\txml = xml + '<dataField>' + forMetadatacolumns[iCV].getAttribute(\"dataField\") + '</dataField> ';\r\n\t\t\t\txml = xml + '<dataType>' + forMetadatacolumns[iCV].getAttribute(\"dataType\") + '</dataType> ';\r\n\t\t\t\t\r\n\t\t\t\tif ((self.initMetadata.Dimensions) && (!self.initMetadata.Dimensions[iCV].Visible)) {\r\n\t\t\t\t\txml = xml + '<hidden>true</hidden>'\r\n\t\t\t\t}\r\n\r\n\t\t\t\t\r\n\t\t\t\txml = xml + '<axis>'\r\n\t\t\t\tvar pos = 0;\r\n\t\t\t\tvar defaultPos = \"\";\r\n\t\t\t\t\tif (conPos == -1) {\r\n\t\t\t\t\t\tif (forMetadatacolumns[iCV].getAttribute(\"visible\").toLowerCase() != \"never\"){\r\n\t\t\t\t\t\t\txml = xml + forMetadatacolumns[iCV].getAttribute(\"axis\").toLowerCase()\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tvar type = self.initMetadata.Dimensions[iCV].defaultPosition \r\n\t\t\t\t\t\t\tif (type == \"Rows\") \r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tcantRowHidden=cantRowHidden + 1\r\n\t\t\t\t\t\t\t\tpos = rowPos + 1\r\n\t\t\t\t\t\t\t\trowPos = pos\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (type == \"Columns\")\r\n\t\t\t\t\t\t\t{ \r\n\t\t\t\t\t\t\t\tcantColHidden=cantColHidden + 1\r\n\t\t\t\t\t\t\t\tpos = colPos + 1\r\n\t\t\t\t\t\t\t\tcolPos = pos\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (type == \"Pages\") \r\n\t\t\t\t\t\t\t{ \r\n\t\t\t\t\t\t\t\tcantPageHidden=cantPageHidden + 1\r\n\t\t\t\t\t\t\t\tpos = pagePos + 1\r\n\t\t\t\t\t\t\t\tpagePos = pos\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\txml = xml + \"\"\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else if (self.rowConditions.indexOf(conPos) != -1) {\r\n\t\t\t\t\t\txml = xml + 'rows';\r\n\t\t\t\t\t\tpos = self.rowConditions.indexOf(conPos) + 1 + cantRowHidden\r\n\t\t\t\t\t\trowPos = pos\r\n\t\t\t\t\t\tdefaultPos = 'rows';\r\n\t\t\t\t\t} else if (self.colConditions.indexOf(conPos) != -1) {\r\n\t\t\t\t\t\txml = xml + 'columns';\r\n\t\t\t\t\t\tpos = self.colConditions.indexOf(conPos) + 1 + cantColHidden\r\n\t\t\t\t\t\tcolPos = pos;\r\n\t\t\t\t\t\tdefaultPos = 'columns'\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\txml = xml + 'pages';\r\n\t\t\t\t\t\tpos = self.filterIndexes.indexOf(conPos) + 1 + cantPageHidden\r\n\t\t\t\t\t\tpagePos = pos;\r\n\t\t\t\t\t\tdefaultPos = 'pages'\r\n\t\t\t\t\t}\r\n\t\t\t\r\n\t\t\t\t\r\n\t\t\t\txml = xml + '</axis> '\r\n\t\t\t\t\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\tif (forMetadatacolumns[iCV].getAttribute(\"visible\").toLowerCase() != \"never\"){\r\n\t\t\t\t\txml = xml + '<position>' + pos + '</position> ';\r\n\t\t\t\t} else {\r\n\t\t\t\t\txml = xml + '<position/>'\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\r\n\t\t\t\tvar summarize = forMetadatacolumns[iCV].getAttribute(\"summarize\");\r\n\t\t\t\tif (conPos >= 0) {\r\n\t\t\t\t\tsummarize = (self.conditions[conPos].subtotals) ? \"yes\" : \"no\";\r\n\t\t\t\t}\r\n\r\n\t\t\t\txml = xml + '<summarize>' + summarize + '</summarize> ';\r\n\t\t\t\txml = xml + '<align>' + forMetadatacolumns[iCV].getAttribute(\"align\") + '</align> ';\r\n\r\n\t\t\t\tif (forMetadatacolumns[iCV].getAttribute(\"picture\") === \"\") {\r\n\t\t\t\t\txml = xml + '<picture/> '\r\n\t\t\t\t} else {\r\n\t\t\t\t\txml = xml + '<picture>' + forMetadatacolumns[iCV].getAttribute(\"picture\") + '</picture> ';\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (forMetadatacolumns[iCV].getAttribute(\"picture\") === \"\") {\r\n\t\t\t\t\txml = xml + '<format/> ';\r\n\t\t\t\t} else {\r\n\t\t\t\t\txml = xml + '<format>' + forMetadatacolumns[iCV].getAttribute(\"format\") + '</format> ';\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar prevConPos = -1;\r\n\t\t\t\tif (self.initMetadata.Metadata) {\r\n\t\t\t\t\tprevConPos = -1;\r\n\t\t\t\t\tfor (var c = 0; c < self.initMetadata.Conditions.length; c++) {\r\n\t\t\t\t\t\tif (self.initMetadata.Conditions[c].dataField == self.initMetadata.Dimensions[iCV].dataField) {\r\n\t\t\t\t\t\t\tprevConPos = c;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tif (forMetadatacolumns[iCV].getAttribute(\"visible\").toLowerCase() != \"never\"){\r\n\t\t\t\t\tvar sortValue = (conPos > -1) ? self.conditions[conPos].sort : (prevConPos > - 1) ? self.initMetadata.Conditions[prevConPos].sort : \"metadata\";\r\n\t\t\t\t\tif (sortValue == \"metadata\") {\r\n\t\t\t\t\t\txml = xml + '<order>' + ((forMetadatacolumns[iCV].getAttribute(\"order\") != \"\") ? forMetadatacolumns[iCV].getAttribute(\"order\") : 'Ascending') + '</order> '\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (sortValue == 1)\r\n\t\t\t\t\t\t\txml = xml + '<order>Ascending</order> '\r\n\t\t\t\t\t\telse if (sortValue == -1)\r\n\t\t\t\t\t\t\txml = xml + '<order>Descending</order> '\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\txml = xml + '<order>Custom</order> '\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\txml = xml + '<order>' + forMetadatacolumns[iCV].getAttribute(\"order\") + '</order> '\r\n\t\t\t\t}\r\n\t\t\t\txml = xml + '<customOrder/> ';\r\n\r\n\t\t\t\txml = xml + '<filterType>'\r\n\r\n\t\t\t\tvar blackList = (conPos > -1) ? self.conditions[conPos].blackList : (prevConPos > - 1) ? self.initMetadata.Conditions[prevConPos].blackList : [];\r\n\t\t\t\t\r\n\t\t\t\tif (blackList.length == 0) {\r\n\t\t\t\t\tif ((conPos > -1) && (self.conditions[conPos].defaultAction == \"Exclude\")) {\r\n\t\t\t\t\t\tif (self.conditions[conPos].visibles.length == 0)   \r\n\t\t\t\t\t\t\txml = xml + 'HideAllValues';\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\txml = xml + 'ShowAllValues'\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\txml = xml + 'ShowAllValues';\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\txml = xml + 'ShowSomeValues';\r\n\t\t\t\t}\r\n\r\n\t\t\t\txml = xml + '</filterType>'\r\n\r\n\t\t\t\txml = xml + '<include> ';\r\n\r\n\t\t\t\tvar findex = (conPos > -1) ? self.filterIndexes.indexOf(conPos) : -1;\r\n\t\t\t\tif ((findex != -1) && (self.filterDiv.selects.length > findex) && (self.filterDiv.selects[findex].value != \"[all]\")) {\r\n\t\t\t\t\t\txml = xml + '<value>' + self.filterDiv.selects[findex].value + '</value> ';\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar distinctValues = (conPos > -1) ? self.conditions[conPos].distinctValues : (prevConPos > - 1) ? self.initMetadata.Conditions[prevConPos].distinctValues : [];\r\n\t\t\t\t\tif (!(((conPos > -1) && (self.conditions[conPos].defaultAction == \"Exclude\")) && (blackList.length == 0))) {\r\n\t\t\t\t\t\tfor (var val = 0; val < distinctValues.length; val++) {\r\n\t\t\t\t\t\t\tif (blackList.indexOf(distinctValues[val]) === -1) {\r\n\t\t\t\t\t\t\t\txml = xml + '<value>' + distinctValues[val] + '</value> ';\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\txml = xml + '<value>TOTAL</value> </include>'\r\n\r\n\t\t\t\txml = xml + '<collapseType>'\r\n\r\n\t\t\t\tvar collapsedValues = (conPos > -1) ? self.conditions[conPos].collapsedValues : (prevConPos > - 1) ? self.initMetadata.Conditions[prevConPos].collapsedValues : [];\r\n\t\t\t\tif ((collapsedValues == undefined) || (collapsedValues.length == 0)) {\r\n\t\t\t\t\txml = xml + 'ExpandAllValues'\r\n\t\t\t\t\txml = xml + '</collapseType>'\r\n\t\t\t\t} else {\r\n\t\t\t\t\txml = xml + 'ExpandSomeValues'\r\n\t\t\t\t\txml = xml + '</collapseType>'\r\n\t\t\t\t\tvar distinctValues = [];\r\n\t\t\t\t\t\r\n\t\t\t\t\tdistinctValues = (conPos > -1) ? self.conditions[conPos].distinctValues : (prevConPos > - 1) ? self.initMetadata.Conditions[prevConPos].distinctValues : [];\r\n\t\t\t\t\t\r\n\t\t\t\t\txml = xml + '<includeExpand> ';\r\n\r\n\t\t\t\t\tfor (var val = 0; val < distinctValues.length; val++) {\r\n\t\t\t\t\t\tif ((distinctValues[val] != undefined) && (collapsedValues.indexOf(distinctValues[val]) == -1)) {\r\n\t\t\t\t\t\t\txml = xml + '<value>' + distinctValues[val] + '</value>'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\txml = xml + '</includeExpand> ';\r\n\t\t\t\t}\r\n\r\n\t\t\t\txml = xml + '</OLAPDimension>'\r\n\t\t\t}\r\n\r\n\t\t\tvar forMetadatameasures = measures;\r\n\t\t\tif (self.initMetadata.Metadata) {\r\n\t\t\t\tvar xmlDoc = jQuery.parseXML(self.initMetadata.Metadata);\r\n\t\t\t\tforMetadatameasures = []\r\n\t\t\t\tforMetadatameasures = xmlDoc.getElementsByTagName(\"OLAPMeasure\");\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tvar measurePosition = rowPos;\r\n\t\t\tfor (var iCV = 0; iCV < forMetadatameasures.length; iCV++) {\r\n\t\t\t\txml = xml + '<OLAPMeasure> ';\r\n\r\n\t\t\t\txml = xml + '<name>' + forMetadatameasures[iCV].getAttribute(\"name\") + '</name> '\r\n\t\t\t\txml = xml + '<displayName>' + forMetadatameasures[iCV].getAttribute(\"displayName\") + '</displayName> ';\r\n\t\t\t\txml = xml + '<description>' + forMetadatameasures[iCV].getAttribute(\"description\") + '</description> ';\r\n\t\t\t\txml = xml + '<dataField>' + forMetadatameasures[iCV].getAttribute(\"dataField\") + '</dataField> ';\r\n\t\t\t\txml = xml + '<dataType>' + forMetadatameasures[iCV].getAttribute(\"dataType\") + '</dataType> ';\r\n\t\t\t\txml = xml + '<defaultAggregator>' + forMetadatameasures[iCV].getAttribute(\"defaultAggregator\") + '</defaultAggregator> ';\r\n\t\t\t\txml = xml + '<validAggregators>' + forMetadatameasures[iCV].getAttribute(\"validAggregators\") + '</validAggregators> ';\r\n\t\t\t\txml = xml + '<summarize>' + forMetadatameasures[iCV].getAttribute(\"summarize\") + '</summarize> ';\r\n\r\n\t\t\t\tif (forMetadatameasures[iCV].getAttribute(\"format\") === \"\") {\r\n\t\t\t\t\txml = xml + '<format/> ';\r\n\t\t\t\t} else {\r\n\t\t\t\t\txml = xml + '<format>' + forMetadatameasures[iCV].getAttribute(\"format\") + '</format> ';\r\n\t\t\t\t}\r\n\r\n\t\t\t\txml = xml + '<align>' + forMetadatameasures[iCV].getAttribute(\"align\") + '</align> ';\r\n\r\n\t\t\t\tif (forMetadatameasures[iCV].getAttribute(\"picture\") === \"\") {\r\n\t\t\t\t\txml = xml + '<picture/> '\r\n\t\t\t\t} else {\r\n\t\t\t\t\txml = xml + '<picture>' + forMetadatameasures[iCV].getAttribute(\"picture\") + '</picture> ';\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ((self.initMetadata.Measures) && (!self.initMetadata.Measures[iCV].Visible)) {\r\n\t\t\t\t\txml = xml + '<hidden>true</hidden>'\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (forMetadatameasures[iCV].getAttribute(\"visible\").toLowerCase() != \"never\"){\r\n\t\t\t\t\tmeasurePosition = measurePosition + 1;\r\n\t\t\t\t\txml = xml + '<position>' + measurePosition + '</position> ';\r\n\t\t\t\t} else {\r\n\t\t\t\t\txml = xml + '<position/>'\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\txml = xml + '</OLAPMeasure>';\r\n\t\t\t}\r\n\r\n\t\t\txml = xml + '</OLAPCube>'\r\n\t\t\txml = xml.replace(/\\&/g, \"&amp;\");\r\n\t\t\treturn xml\r\n\t\t}\r\n\r\n\t\tthis.createXMLMetadata = function () {\r\n\t\t\tvar xml = '<OLAPCube format=\"' + this.defaultPicture.getAttribute(\"format\") + '\" thousandsSeparator=\"' + this.defaultPicture.getAttribute(\"thousandsSeparator\") + '\" decimalSeparator=\"' + this.defaultPicture.getAttribute(\"decimalSeparator\") + '\" dateFormat=\"' + this.defaultPicture.getAttribute(\"dateFormat\") + '\">';\r\n\r\n\t\t\tfor (var iCV = 0; iCV < this.columns.length; iCV++) {\r\n\t\t\t\tif ((this.conditions[iCV] != false) && (this.conditions[iCV] != undefined)) {\r\n\t\t\t\t\txml = xml + '<OLAPDimension> ';\r\n\r\n\t\t\t\t\txml = xml + '<name>' + this.columns[iCV].getAttribute(\"name\") + '</name> '\r\n\t\t\t\t\txml = xml + '<displayName>' + this.columns[iCV].getAttribute(\"displayName\") + '</displayName> ';\r\n\t\t\t\t\txml = xml + '<description>' + this.columns[iCV].getAttribute(\"description\") + '</description> ';\r\n\t\t\t\t\txml = xml + '<dataField>' + this.columns[iCV].getAttribute(\"dataField\") + '</dataField> ';\r\n\t\t\t\t\txml = xml + '<dataType>' + this.columns[iCV].getAttribute(\"dataType\") + '</dataType> ';\r\n\t\t\t\t\txml = xml + '<summarize>' + this.columns[iCV].getAttribute(\"summarize\") + '</summarize> ';\r\n\t\t\t\t\txml = xml + '<align>' + this.columns[iCV].getAttribute(\"align\") + '</align> ';\r\n\r\n\t\t\t\t\tif (this.columns[iCV].getAttribute(\"picture\") === \"\") {\r\n\t\t\t\t\t\txml = xml + '<picture/> '\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\txml = xml + '<picture>' + this.columns[iCV].getAttribute(\"picture\") + '</picture> ';\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (this.columns[iCV].getAttribute(\"picture\") === \"\") {\r\n\t\t\t\t\t\txml = xml + '<format/> ';\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\txml = xml + '<format>' + this.columns[iCV].getAttribute(\"format\") + '</format> ';\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (this.conditions[iCV].sort === 1)\r\n\t\t\t\t\t\txml = xml + '<order>ascending</order> '\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\txml = xml + '<order>descending</order> '\r\n\t\t\t\t\txml = xml + '<customOrder/> ';\r\n\t\t\t\t\txml = xml + '<include> ';\r\n\r\n\t\t\t\t\tvar findex = self.filterIndexes.indexOf(iCV);\r\n\t\t\t\t\tif ((findex != -1) && (self.filterDiv.selects[findex].value != \"[all]\")) {\r\n\t\t\t\t\t\tif (this.conditions[iCV].blackList.indexOf(self.filterDiv.selects[findex].value) === -1) {\r\n\t\t\t\t\t\t\txml = xml + '<value>' + self.filterDiv.selects[findex].value.toString().trimpivot() + '</value> ';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (self.conditions[iCV].state != \"none\") {\r\n\t\t\t\t\t\t\t\tfor (var val = 0; val < this.conditions[iCV].distinctValues.length; val++) {\r\n\t\t\t\t\t\t\t\t\tif (this.conditions[iCV].blackList.indexOf(this.conditions[iCV].distinctValues[val]) === -1) {\r\n\t\t\t\t\t\t\t\t\t\txml = xml + '<value>' + this.conditions[iCV].distinctValues[val].toString().trimpivot() + '</value> ';\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\txml = xml + '<value>TOTAL</value> </include> <collapse/> ';\r\n\r\n\t\t\t\t\txml = xml + '<hide> '\r\n\t\t\t\t\t\r\n\t\t\t\t\t\tif (self.conditions[iCV].state == \"none\") {\r\n\t\t\t\t\t\t\tfor (var val = 0; val < this.conditions[iCV].distinctValues.length; val++) {\r\n\t\t\t\t\t\t\t\txml = xml + '<value>' + this.conditions[iCV].distinctValues[val].toString().trimpivot() + '</value> ';\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else if (self.conditions[iCV].state != \"all\") {\r\n\t\t\t\t\t\t\tfor (var yu = 0; yu < this.conditions[iCV].blackList.length; yu++) {\r\n\t\t\t\t\t\t\t\txml = xml + '<value>' + this.conditions[iCV].blackList[yu].toString().trimpivot() + '</value> ';\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\txml = xml + '</hide> '\r\n\r\n\t\t\t\t\tif (self.rowConditions.indexOf(iCV) != -1) {\r\n\t\t\t\t\t\txml = xml + '<condition>row</condition> ';\r\n\t\t\t\t\t\txml = xml + '<filterbar>no</filterbar> ';\r\n\t\t\t\t\t\txml = xml + '<position>' + self.rowConditions.indexOf(iCV) + '</position>'\r\n\t\t\t\t\t} else if (self.colConditions.indexOf(iCV) != -1) {\r\n\t\t\t\t\t\txml = xml + '<condition>col</condition> ';\r\n\t\t\t\t\t\txml = xml + '<filterbar>no</filterbar> ';\r\n\t\t\t\t\t\txml = xml + '<position>' + self.colConditions.indexOf(iCV) + '</position>'\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\txml = xml + '<condition>none</condition> ';\r\n\t\t\t\t\t\txml = xml + '<filterbar>yes</filterbar> ';\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\txml = xml + '<filterdivs> ';\r\n\t\t\t\t\tif (findex != -1) {\r\n\t\t\t\t\t\txml = xml + '<value>' + self.filterDiv.selects[findex].value.toString().trimpivot() + '</value> ';\r\n\t\t\t\t\t}\r\n\t\t\t\t\txml = xml + '</filterdivs> ';\r\n\r\n\t\t\t\t\txml = xml + '<restoreview>no</restoreview> ';\r\n\t\t\t\t\txml = xml + ' </OLAPDimension>';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfor (var iCV = 0; iCV < measures.length; iCV++) {\r\n\t\t\t\txml = xml + '<OLAPMeasure> ';\r\n\r\n\t\t\t\txml = xml + '<name>' + measures[iCV].getAttribute(\"name\") + '</name> '\r\n\t\t\t\txml = xml + '<displayName>' + measures[iCV].getAttribute(\"displayName\") + '</displayName> ';\r\n\t\t\t\txml = xml + '<description>' + measures[iCV].getAttribute(\"description\") + '</description> ';\r\n\t\t\t\txml = xml + '<dataField>' + measures[iCV].getAttribute(\"dataField\") + '</dataField> ';\r\n\t\t\t\txml = xml + '<dataType>' + measures[iCV].getAttribute(\"dataType\") + '</dataType> ';\r\n\t\t\t\txml = xml + '<defaultAggregator>' + measures[iCV].getAttribute(\"defaultAggregator\") + '</defaultAggregator> ';\r\n\t\t\t\txml = xml + '<validAggregators>' + measures[iCV].getAttribute(\"validAggregators\") + '</validAggregators> ';\r\n\t\t\t\txml = xml + '<summarize>' + measures[iCV].getAttribute(\"summarize\") + '</summarize> ';\r\n\r\n\t\t\t\tif (measures[iCV].getAttribute(\"format\") === \"\") {\r\n\t\t\t\t\txml = xml + '<format/> ';\r\n\t\t\t\t} else {\r\n\t\t\t\t\txml = xml + '<format>' + measures[iCV].getAttribute(\"format\") + '</format> ';\r\n\t\t\t\t}\r\n\r\n\t\t\t\txml = xml + '<align>' + measures[iCV].getAttribute(\"align\") + '</align> ';\r\n\r\n\t\t\t\tif (measures[iCV].getAttribute(\"picture\") === \"\") {\r\n\t\t\t\t\txml = xml + '<picture/> '\r\n\t\t\t\t} else {\r\n\t\t\t\t\txml = xml + '<picture>' + measures[iCV].getAttribute(\"picture\") + '</picture> ';\r\n\t\t\t\t}\r\n\r\n\t\t\t\txml = xml + ' </OLAPMeasure>';\r\n\r\n\t\t\t}\r\n\t\t\txml = xml + \"</OLAPCube>\";\r\n\r\n\t\t\treturn xml;\r\n\t\t}\r\n\r\n\t\tthis.ExportToXML = function () {\r\n\t\t\tvar xml = '<EXPORT format=\"XML\" type=\"pivot\">';\r\n\t\t\txml = xml + '<METADATA>';\r\n\t\t\tfor (var iCV = 0; iCV < this.columns.length; iCV++) {\r\n\r\n\t\t\t\tvar position = 'row';\r\n\t\t\t\tif (self.rowConditions.indexOf(iCV) != -1) {\r\n\t\t\t\t\tposition = 'row';\r\n\t\t\t\t} else if (self.colConditions.indexOf(iCV) != -1) {\r\n\t\t\t\t\tposition = 'column';\r\n\t\t\t\t} else {\r\n\t\t\t\t\tposition = 'filter';\r\n\t\t\t\t}\r\n\r\n\t\t\t\txml = xml + '<OLAPDimension ';\r\n\t\t\t\txml = xml + 'name=\"' + this.columns[iCV].getAttribute(\"dataField\") + '\" ';\r\n\t\t\t\txml = xml + 'label=\"' + this.columns[iCV].getAttribute(\"displayName\") + '\" ';\r\n\t\t\t\txml = xml + 'picture=\"' + this.columns[iCV].getAttribute(\"picture\") + '\" ';\r\n\t\t\t\txml = xml + 'datatype=\"' + this.columns[iCV].getAttribute(\"dataType\") + '\" ';\r\n\t\t\t\txml = xml + 'showAll=\"true\" ';\r\n\t\t\t\txml = xml + 'position=\"' + position + '\">';\r\n\r\n\t\t\t\tif ((this.conditions[iCV] != undefined) && (this.conditions[iCV].distinctValues != undefined)) {\r\n\t\t\t\t\tfor (var val = 0; val < this.conditions[iCV].distinctValues.length; val++) {\r\n\t\t\t\t\t\txml = xml + '<VALUE CHECKED=';\r\n\t\t\t\t\t\tif (this.conditions[iCV].blackList.indexOf(this.conditions[iCV].distinctValues[val]) === -1) {\r\n\t\t\t\t\t\t\txml = xml + '\"true\"';\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\txml = xml + '\"false\"';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (this.conditions[iCV].collapsedValues.indexOf(this.conditions[iCV].distinctValues[val]) == -1) {\r\n\t\t\t\t\t\t\txml = xml + ' COLLAPSED=\"false\">'\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\txml = xml + ' COLLAPSED=\"true\">'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\txml = xml + this.conditions[iCV].distinctValues[val] + '</VALUE>';\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\txml = xml + '</OLAPDimension>';\r\n\t\t\t}\r\n\r\n\t\t\tfor (var iCV = 0; iCV < measures.length; iCV++) {\r\n\t\t\t\txml = xml + '<OLAPMeasure ';\r\n\t\t\t\txml = xml + 'name=\"' + measures[iCV].getAttribute(\"dataField\") + '\" ';\r\n\t\t\t\txml = xml + 'label=\"' + measures[iCV].getAttribute(\"displayName\") + '\" ';\r\n\t\t\t\txml = xml + 'picture=\"' + measures[iCV].getAttribute(\"picture\") + '\" ';\r\n\t\t\t\txml = xml + 'datatype=\"' + measures[iCV].getAttribute(\"dataType\") + '\" ';\r\n\t\t\t\txml = xml + 'showAll=\"true\" ';\r\n\t\t\t\txml = xml + 'aggregator=\"sum\"/>';\r\n\t\t\t}\r\n\r\n\t\t\txml = xml + '</METADATA>';\r\n\r\n\t\t\txml = xml + '<FLATDATA>';\r\n\t\t\tfor (var i = 0; i < this.allDataWithoutSort.length; i++) {\r\n\t\t\t\txml = xml + '<ROW ';\r\n\t\t\t\tfor (var iCV = 0; iCV < this.columns.length; iCV++) {\r\n\t\t\t\t\txml = xml + this.columns[iCV].getAttribute(\"dataField\") + '=\"' + this.allDataWithoutSort[i][iCV] + '\" ';\r\n\t\t\t\t}\r\n\t\t\t\tfor (var iCV = 0; iCV < measures.length; iCV++) {\r\n\t\t\t\t\txml = xml + measures[iCV].getAttribute(\"dataField\") + '=\"' + this.allDataWithoutSort[i][iCV + this.columns.length] + '\" ';\r\n\t\t\t\t}\r\n\t\t\t\txml = xml + '/>'\r\n\t\t\t}\r\n\t\t\txml = xml + '</FLATDATA>';\r\n\r\n\t\t\txml = xml + '<COLITEMS>' //include measures & dimensions move to columns\r\n\t\t\tvar previuosXml = xml;\r\n\t\t\ttry {\r\n\t\t\t\tvar level = 0;\r\n\t\t\t\tvar maxlevel = this.colConditions.length;\r\n\t\t\t\tif (level === maxlevel) {\r\n\t\t\t\t\tfor (var iCV = 0; iCV < measures.length; iCV++) {\r\n\t\t\t\t\t\txml = xml + '<COLITEM measure=\"' + measures[iCV].getAttribute(\"displayName\") + '\" type=\"\"'\r\n\t\t\t\t\t\txml = xml + '/>';\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlevel++;\r\n\t\t\t\t\tfor (var iCV = 0; iCV < this.colStructure.items.length; iCV++) {\r\n\t\t\t\t\t\txml = xml + this.createXMLCOLITEMS(this.colStructure.items[iCV], level, maxlevel);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} catch (ERROR) {\r\n\t\t\t\txml = previuosXml;\r\n\t\t\t}\r\n\t\t\txml = xml + '</COLITEMS>'\r\n\r\n\t\t\txml = xml + '<ROWITEMS>'\r\n\t\t\tpreviuosXml = xml;\r\n\t\t\ttry {\r\n\t\t\t\tfor (var iCV = 0; iCV < this.rowStructure.items.length; iCV++) {\r\n\t\t\t\t\tvar level = 0;\r\n\t\t\t\t\tvar maxlevel = this.columns.length - this.colConditions.length - this.filterIndexes.length - 1;\r\n\t\t\t\t\tif (maxlevel >= level) {\r\n\t\t\t\t\t\txml = xml + this.createXMLROWITEMS(this.rowStructure.items[iCV], level, maxlevel);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} catch (ERROR) {\r\n\t\t\t\txml = previuosXml;\r\n\t\t\t}\r\n\t\t\txml = xml + '</ROWITEMS>'\r\n\r\n\r\n\t\t\t//add Html info\r\n\t\t\txml = xml + '<HTML>';\r\n\r\n\t\t\txml = xml + '<HEAD>';\r\n\t\t\txml = xml + '<META content=\"text/html; charset=utf-8\" http-equiv=\"Content-Type\"/>';\r\n\r\n\t\t\txml = xml + '<STYLE>';\r\n\r\n\t\t\txml = xml + '.h2title {background-color: #5C5D5F; border-color: #666666; font-family: Verdana; font-weight: normal; font-size: 10pt; height: 44px; color: #E0E0E0;}\\n';\r\n\t\t\txml = xml + '.h2titlewhite {background-color: #ffffff; font-family: Verdana; font-size: 10pt; font-weight: normal; height: 25px; color: black;}\\n';\r\n\t\t\txml = xml + '.even {background-color: #FEFEFE;\tfont-weight: normal; font-family: Verdana; font-size: 10pt;\tpadding: 5px; }\\n';\r\n\t\t\txml = xml + '.h2subtitle {background-color: #5C5D5F; border-color: #666666; font-family: Verdana; font-weight: normal; font-size: 10pt;\theight: 22px; color: #E0E0E0;}\\n';\r\n\t\t\txml = xml + '.gtotal {background-color: #EBEBEB; font-weight: normal; font-family: Verdana; font-size: 10pt;}\\n';\r\n\t\t\txml = xml + '.pivot_table td.total {background-color: #EBEBEB; font-weight: normal;\tfont-family: Verdana; font-size: 10pt;}\\n';\r\n\t\t\txml = xml + '.pivot_table td.subtotal {background-color: #EBEBEB; font-weight: normal;\tfont-family: Verdana; font-size: 10pt;}\\n';\r\n\r\n\t\t\txml = xml + '</STYLE>';\r\n\t\t\txml = xml + '</HEAD>';\r\n\r\n\t\t\txml = xml + '<BODY>';\r\n\t\t\txml = xml + '<TABLE border=\"2\">'\r\n\r\n\t\t\tfor (var i = 0; i < jQuery(\"#\" + self.controlName + \"_\" + self.query + \" tr\").length; i++) {//for every row\r\n\t\t\t\txml = xml + '<TR>';\r\n\r\n\t\t\t\tvar tRow = jQuery(\"#\" + self.controlName + \"_\" + self.query + \" tr\")[i];\r\n\t\t\t\tfor (var j = 0; j < tRow.children.length; j++) {\r\n\t\t\t\t\tvar childText = OAT.removeIconFont(tRow.children[j].textContent).trim();\r\n\t\t\t\t\tvar hidden = tRow.children[j].getAttribute('hidden');\r\n\r\n\t\t\t\t\tvar styleString = \"\";\r\n\t\t\t\t\tif ((tRow.children[j].getAttribute(\"style\") != undefined) && (tRow.children[j].getAttribute(\"style\") != null)) {\r\n\t\t\t\t\t\tstyleString = \" style=\\\"\" + tRow.children[j].getAttribute(\"style\") + \"\\\" \";\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar classString = \"\";\r\n\t\t\t\t\tif ((tRow.children[j].getAttribute(\"class\") != undefined) && (tRow.children[j].getAttribute(\"class\") != null)) {\r\n\t\t\t\t\t\tclassString = \" class=\\\"\" + tRow.children[j].getAttribute(\"class\") + \"\\\" \";\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (hidden === null) {\r\n\t\t\t\t\t\tvar rowSpan = tRow.children[j].getAttribute('rowspan');\r\n\t\t\t\t\t\tvar colSpan = tRow.children[j].getAttribute('colspan');\r\n\t\t\t\t\t\tif (((rowSpan === null) && (colSpan === null)) || (j === tRow.children.length - 1)) {\r\n\t\t\t\t\t\t\txml = xml + '<TD ' + classString + ' ' + styleString + '>' + childText + '</TD>';\r\n\t\t\t\t\t\t} else if (colSpan === null) {\r\n\t\t\t\t\t\t\txml = xml + '<TD ' + classString + \" \" + 'rowspan=\"' + rowSpan + '\" ' + styleString + ' >' + childText + '</TD>';\r\n\t\t\t\t\t\t} else if (rowSpan === null) {\r\n\t\t\t\t\t\t\txml = xml + '<TD ' + classString + \" \" + 'colspan=\"' + colSpan + '\" ' + styleString + ' >' + childText + '</TD>';\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\txml = xml + '<TD ' + classString + \" \" + 'colspan=\"' + colSpan + '\" rowspan=\"' + rowSpan + '\" ' + styleString + ' >' + childText + '</TD>';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\txml = xml + '</TR>';\r\n\t\t\t}\r\n\r\n\r\n\t\t\txml = xml + '</TABLE>';\r\n\r\n\t\t\txml = xml + '</BODY>';\r\n\r\n\t\t\txml = xml + '</HTML>';\r\n\t\t\t//\r\n\t\t\txml = xml + \"</EXPORT>\";\r\n\r\n\t\t\treturn xml.replace(/\\&/g, \"&amp;\");\r\n\r\n\t\t}\r\n\r\n\t\tthis.createXMLROWITEMS = function (item, level, maxlevel) {\r\n\t\t\tvar parentCollapse = ((item.parent == undefined) || (item.parent.collapsed == undefined)) ? false : item.parent.collapsed;\r\n\t\t\tvar str = '<ROWITEM dimension=\"' + columns[level].getAttribute('dataField') + '\" collapsed=\"' + item.collapsed + '\" parentCollapsed=\"' + parentCollapse + '\" value=\"' + item.value + '\" level=\"' + level + '\"'\r\n\t\t\tif (level === maxlevel) {\r\n\t\t\t\treturn str + \"/>\";\r\n\t\t\t} else {\r\n\t\t\t\tlevel++;\r\n\t\t\t\tstr = str + \">\";\r\n\t\t\t\tfor (var i = 0; i < item.items.length; i++) {\r\n\t\t\t\t\tstr = str + this.createXMLROWITEMS(item.items[i], level, maxlevel);\r\n\t\t\t\t}\r\n\t\t\t\tstr = str + '</ROWITEM>'\r\n\t\t\t\treturn str;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.createXMLCOLITEMS = function (item, level, maxlevel) {\r\n\t\t\tvar str = \"\"\r\n\t\t\tif (level === maxlevel) {\r\n\t\t\t\tfor (var iCV = 0; iCV < measures.length; iCV++) {\r\n\t\t\t\t\tstr = str + '<COLITEM measure=\"' + measures[iCV].getAttribute(\"displayName\") + '\" type=\"\">'\r\n\t\t\t\t\tvar inRow = self.rowConditions.length - measures.length + 1;\r\n\t\t\t\t\tstr = str + '<VALITEM dimension=\"' + columns[level - 1 + inRow].getAttribute('dataField') + '\" value=\"' + item.value + '\"/>' //level + cantidad de dimensiones que no estan movidas a las columnas\r\n\t\t\t\t\tvar superItem = item;\r\n\t\t\t\t\twhile (superItem.parent.depth != -1) {\r\n\t\t\t\t\t\tsuperItem = superItem.parent;\r\n\t\t\t\t\t\tstr = str + '<VALITEM dimension=\"' + columns[level - 1 + inRow].getAttribute('dataField') + '\" value=\"' + superItem.value + '\"/>'\r\n\t\t\t\t\t}\r\n\t\t\t\t\tstr = str + '</COLITEM>';\r\n\t\t\t\t}\r\n\t\t\t\treturn str;\r\n\t\t\t} else {\r\n\t\t\t\tlevel++;\r\n\t\t\t\tfor (var i = 0; i < item.items.length; i++) {\r\n\t\t\t\t\tstr = str + this.createXMLCOLITEMS(item.items[i], level, maxlevel);\r\n\t\t\t\t}\r\n\t\t\t\treturn str;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.ExportToExcel = function (fileName) {\r\n\t\t\tvar table = '<table border=\"2\">'\r\n\r\n\t\t\tfor (var i = 0; i < jQuery(\"#\" + self.controlName + \"_\" + self.query + \" tr\").length; i++) {//for every row\r\n\t\t\t\ttable = table + '<tr>';\r\n\r\n\t\t\t\tvar tRow = jQuery(\"#\" + self.controlName + \"_\" + self.query + \" tr\")[i];\r\n\t\t\t\tfor (var j = 0; j < tRow.children.length; j++) {\r\n\t\t\t\t\tvar childText = OAT.removeIconFont(tRow.children[j].textContent.replace(/^\\s+|\\s+$/g, '')).trim();\r\n\t\t\t\t\tvar hidden = tRow.children[j].getAttribute('hidden');\r\n\r\n\t\t\t\t\tvar styleString = \"\";\r\n\t\t\t\t\tif ((tRow.children[j].getAttribute(\"style\") != undefined) && (tRow.children[j].getAttribute(\"style\") != null)) {\r\n\t\t\t\t\t\tstyleString = \" style=\\\"\" + tRow.children[j].getAttribute(\"style\") + \"\\\" \";\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar parseText = \"\"\r\n\t\t\t\t\tvar previusJap = false;\r\n\t\t\t\t\t\r\n\t\t\t\t\tfor (var c = 0; c < childText.length; c++) {\r\n\t\t\t\t\t\tif (childText.charCodeAt(c) < 1000) {\r\n\t\t\t\t\t\t\tif (previusJap) {\r\n\t\t\t\t\t\t\t\tparseText = parseText + \" \" + childText[c];\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tparseText = parseText + childText[c];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tpreviusJap = false;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tvar Hex = childText.charCodeAt(c).toString(16);\r\n\t\t\t\t\t\t\tparseText = parseText + \"&#x\" + Hex;\r\n\t\t\t\t\t\t\tpreviusJap = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\t/*if (self.defaultPicture.getAttribute(\"dateFormat\") == \"YMD\") {\r\n\t\t\t\t\t\tvar count = parseText.match(/\\//igm)\r\n\t\t\t\t\t\tif (count != null && count.length == 2 && parseText.indexOf('o') < 0) {\r\n\t\t\t\t\t\t\tparseText = '=\"' + parseText + '\"'\r\n\t\t\t\t\t\t\tstyleString = ' style=\"width:80px;\" ';\r\n\t\t\t\t\t\t\tif (parseText.indexOf(':') > -1)\r\n\t\t\t\t\t\t\t\tstyleString = ' style=\"width:140px;\" ';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}*/\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (hidden === null) {\r\n\t\t\t\t\t\tvar rowSpan = tRow.children[j].getAttribute('rowspan');\r\n\t\t\t\t\t\tvar colSpan = tRow.children[j].getAttribute('colspan');\r\n\t\t\t\t\t\tif (((rowSpan === null) && (colSpan === null)) || (j === tRow.children.length - 1)) {\r\n\t\t\t\t\t\t\ttable = table + '<td ' + styleString + '>' + parseText + '</td>';\r\n\t\t\t\t\t\t} else if (colSpan === null) {\r\n\t\t\t\t\t\t\ttable = table + '<td rowspan=\"' + rowSpan + '\" ' + styleString + ' >' + parseText + '</td>';\r\n\t\t\t\t\t\t} else if (rowSpan === null) {\r\n\t\t\t\t\t\t\ttable = table + '<td colspan=\"' + colSpan + '\" ' + styleString + ' >' + parseText + '</td>';\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\ttable = table + '<td colspan=\"' + colSpan + '\" rowspan=\"' + rowSpan + '\" ' + styleString + ' >' + parseText + '</td>';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttable = table + '</tr>';\r\n\t\t\t}\r\n\r\n\t\t\ttable = table + '</table>'; //</tbody>\r\n\t\t\t\r\n\t\t\t//add header for special characters \r\n\t\t\tvar header = '<head><meta http-equiv=\"Content-Type\" content=\"text/html;charset=utf-8\"></head><body>'\r\n\t\t\ttable = header + table + '</body>'\r\n\t\t\t\r\n\t\t\tvar dtltbl = table;\r\n\r\n\t\t\tif ((OAT.isSafari()) || (self.isSD)) { //for safari\r\n\t\t\t\twindow.open('data:application/vnd.ms-excel,' + encodeURIComponent(dtltbl));\r\n\t\t\t} else {\r\n\t\t\t\tvar blob = new Blob([dtltbl], { type: \"application/vnd.ms-excel\" });\r\n\t\t\t\tsaveAs(blob, fileName + \".xls\");\r\n\t\t\t} \r\n\r\n\t\t}\r\n\r\n\r\n\t\tthis.lightOn = function () {\r\n\t\t\tfor (var i = 0; i < self.gd.targets.length; i++) {\r\n\t\t\t\tvar elm = self.gd.targets[i][0];\r\n\t\t\t\tif (OAT.isIE()) {\r\n\t\t\t\t\telm.className += \" drag-drop\";\r\n\t\t\t\t} else {\r\n\t\t\t\t\telm.classList.add(\"drag-drop\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.lightOff = function () {\r\n\t\t\tfor (var i = 0; i < self.gd.targets.length; i++) {\r\n\t\t\t\tvar elm = self.gd.targets[i][0];\r\n\t\t\t\ttry {\r\n\t\t\t\t\telm.classList.remove(\"drag-drop\");\r\n\t\t\t\t} catch (error) {\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tself.gd.onFail = self.lightOff;\r\n\r\n\t\tthis.process = function (elm) {\r\n\t\t\tself.lightOn();\r\n\r\n\t\t\tvar spanImageDragDrop = OAT.Dom.create(\"div\");\r\n\t\t\tvar spanImageArrow = OAT.Dom.create(\"div\");\r\n\t\t\tspanImageDragDrop.setAttribute(\"class\", \"drag_drop_indicator\");\r\n\t\t\tspanImageArrow.setAttribute(\"class\", \"drag_drop_arrow\");\r\n\t\t\tOAT.addImageNode(spanImageDragDrop, \"drag_indicator\", \"\");\r\n\t\t\tOAT.addImageNode(spanImageArrow, \"arrow_drop_up\", \"\");\r\n\t\t\telm.className = \"att_drag_drop\";\r\n\t\t\telm.appendChild(spanImageArrow);\r\n\t\t\telm.appendChild(spanImageDragDrop);\r\n\t\t}\r\n\r\n\t\tthis.filterOK = function (row) { \r\n\t\t\tfor (var i = 0; i < self.filterIndexes.length; i++) { \r\n\t\t\t\tvar fi = self.filterIndexes[i]; \r\n\t\t\t\tvar s = self.filterDiv.selects[i]; \r\n\t\t\t\tif (s.selectedIndex && OAT.$v(s) != row[fi]) { return false; }\r\n\t\t\t}\r\n\r\n\r\n\t\t\tfor (var i = 0; i < self.rowConditions.length; i++) { \r\n\t\t\t\tvar value = row[self.rowConditions[i]];\r\n\t\t\t\tvar cond = self.conditions[self.rowConditions[i]];\r\n\t\t\t\tif ((cond.blackList.length > 0) && (cond.blackList.indexOf(value) != -1)) { return false; }\r\n\t\t\t}\r\n\r\n\r\n\t\t\tfor (var i = 0; i < self.colConditions.length; i++) { \r\n\t\t\t\tvar value = row[self.colConditions[i]];\r\n\t\t\t\tvar cond = self.conditions[self.colConditions[i]];\r\n\t\t\t\tif ((cond.blackList.length > 0) && (cond.blackList.indexOf(value) != -1)) { return false; }\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\t\r\n\t\tthis.filterDataXMLOK = function (row) { \r\n\t\t\tfor (var i = 0; i < self.filterIndexes.length; i++) { \r\n\t\t\t\tvar fi = self.filterIndexes[i]; \r\n\t\t\t\tvar s = self.filterDiv.selects[i]; \r\n\t\t\t\tif (s.selectedIndex && OAT.$v(s) != row[fi]) { return false; }\r\n\t\t\t}\r\n\r\n\t\t\tfor (var i = 0; i < self.rowConditions.length; i++) { \r\n\t\t\t\tvar value = row[self.rowConditions[i]];\r\n\t\t\t\tvar cond = self.conditions[self.rowConditions[i]];\r\n\t\t\t\tif (cond.state == \"none\")  { return false; }\r\n\t\t\t\t\r\n\t\t\t\tif (cond.defaultAction == \"Exclude\") {\r\n\t\t\t\t\tif (cond.visibles.indexOf(value) == -1) { return false; }\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (cond.blackList.indexOf(value) != -1) { return false; }\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor (var i = 0; i < self.colConditions.length; i++) { \r\n\t\t\t\tvar value = row[self.colConditions[i]];\r\n\t\t\t\tvar cond = self.conditions[self.colConditions[i]];\r\n\t\t\t\tif (cond.state == \"none\")  { return false; }\r\n\t\t\t\tif (cond.defaultAction == \"Exclude\") {\r\n\t\t\t\t\tif (cond.visibles.indexOf(value) == -1) { return false; }\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (cond.blackList.indexOf(value) != -1) { return false; }\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tthis.sort = function (cond, index) { /* sort distinct values of a condition */\r\n\t\t\tvar sortFunc;\r\n\t\t\tvar coef = cond.sort; if (cond.sort == 0) { coef = 1 } if (cond.sort == 2) { coef = -1 }\r\n\t\t\tvar numSort = function (a, b) {\r\n\t\t\t\tif (a == b) { return 0; }\r\n\t\t\t\treturn coef * (parseInt(a) > parseInt(b) ? 1 : -1);\r\n\t\t\t}\r\n\t\t\tvar dictSort = function (a, b) {\r\n\t\t\t\tif (a == b) { return 0; }\r\n\t\t\t\treturn coef * (a > b ? 1 : -1);\r\n\t\t\t}\r\n\r\n\t\t\tif (cond.distinctValues == undefined) return;\r\n\r\n\t\t\t//new code\r\n\t\t\tvar sortInt = true;\r\n\t\t\tfor (var ival = 0; ival < cond.distinctValues.length; ival++) {\r\n\t\t\t\tif ((sortInt) && (cond.distinctValues[ival] != parseInt(cond.distinctValues[ival]))) {\r\n\t\t\t\t\tsortInt = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (sortInt) { sortFunc = numSort; } else { sortFunc = dictSort; } //decides the type of sorting\r\n\t\t\t//end new code\r\n\t\t\tvar testValue = cond.distinctValues[0];\r\n\r\n\t\t\tif ((cond.sort != 0) && (cond.sort != 2)) {\r\n\t\t\t\tcond.distinctValues.sort(sortFunc);\r\n\t\t\t} else {\r\n\t\t\t\tif ((index != undefined) && (self.columns[index] != undefined)) {\r\n\t\t\t\t\tcond.distinctValues.sort(sortFunc);\r\n\r\n\t\t\t\t\tvar prevValues = [];\r\n\t\t\t\t\tfor (var h = 0; h < cond.distinctValues.length; h++) {\r\n\t\t\t\t\t\tprevValues[h] = cond.distinctValues[h];\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tcond.distinctValues = [];\r\n\t\t\t\t\tif (cond.sort == 0) {\r\n\t\t\t\t\t\tfor (var h = 0; h < self.columns[index].childNodes.length; h++) {\r\n\t\t\t\t\t\t\tif ((self.columns[index].childNodes[h] != undefined) &&\r\n\t\t\t\t\t\t\t\t(self.columns[index].childNodes[h].localName != undefined) &&\r\n\t\t\t\t\t\t\t\t(self.columns[index].childNodes[h].localName === \"customOrder\")) {\r\n\t\t\t\t\t\t\t\tfor (var n = 0; n < self.columns[index].childNodes[h].childNodes.length; n++) {\r\n\t\t\t\t\t\t\t\t\tif (self.columns[index].childNodes[h].childNodes[n].localName == \"Value\") {\r\n\t\t\t\t\t\t\t\t\t\t//cond.distinctValues.push(self.columns[index].childNodes[h].childNodes[n].textContent);\r\n\t\t\t\t\t\t\t\t\t\tvar notTrimValue = self.columns[index].childNodes[h].childNodes[n].textContent\r\n\t\t\t\t\t\t\t\t\t\tfor (var m = 0; m < prevValues.length; m++) {\r\n\t\t\t\t\t\t\t\t\t\t\tif (prevValues[m].trimpivot() == notTrimValue.trimpivot()) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tcond.distinctValues.push(prevValues[m]);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tfor (var h = 0; h < self.columns[index].childNodes.length; h++) {\r\n\t\t\t\t\t\t\tif ((self.columns[index].childNodes[h] != undefined) &&\r\n\t\t\t\t\t\t\t\t(self.columns[index].childNodes[h].localName != undefined) &&\r\n\t\t\t\t\t\t\t\t(self.columns[index].childNodes[h].localName === \"customOrder\")) {\r\n\t\t\t\t\t\t\t\tfor (var n = self.columns[index].childNodes[h].childNodes.length - 1; n >= 0; n--) {\r\n\t\t\t\t\t\t\t\t\tif (self.columns[index].childNodes[h].childNodes[n].localName == \"Value\") {\r\n\t\t\t\t\t\t\t\t\t\t//cond.distinctValues.push(self.columns[index].childNodes[h].childNodes[n].textContent);\r\n\t\t\t\t\t\t\t\t\t\tvar notTrimValue = self.columns[index].childNodes[h].childNodes[n].textContent\r\n\t\t\t\t\t\t\t\t\t\tfor (var m = 0; m < prevValues.length; m++) {\r\n\t\t\t\t\t\t\t\t\t\t\tif (prevValues[m].trimpivot() == notTrimValue.trimpivot()) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tcond.distinctValues.push(prevValues[m]);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (cond.distinctValues.length < prevValues.length) {\r\n\t\t\t\t\t\tfor (var h = 0; h < prevValues.length; h++) {\r\n\t\t\t\t\t\t\tif (cond.distinctValues.indexOf(prevValues[h]) == -1) {\r\n\t\t\t\t\t\t\t\tcond.distinctValues.push(prevValues[h])\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif ((columns.length == 1) || (measures.length = 0)) {\r\n\t\t\t\tif (cond.sort == 1) {\r\n\t\t\t\t\tself.allData.sort((function (index) {\r\n\t\t\t\t\t\treturn function (a, b) {\r\n\t\t\t\t\t\t\treturn (a[index] === b[index] ? 0 : (a[index] < b[index] ? -1 : 1));\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t})(0));\r\n\t\t\t\t} else if (cond.sort == -1) {\r\n\t\t\t\t\tself.allData.sort((function (index) {\r\n\t\t\t\t\t\treturn function (a, b) {\r\n\t\t\t\t\t\t\treturn (a[index] === b[index] ? 0 : (a[index] > b[index] ? -1 : 1));\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t})(0));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} /* sort */\r\n\r\n\t\t/* init routines */\r\n\t\tthis.initCondition = function (index) {\r\n\t\t\tif ((index == self.dataColumnIndex) && (((columns.length > 1) || (measures.length > 0)))) { /* dummy condition */\r\n\t\t\t\tself.conditions.push(false);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar sortValue = 1;\r\n\r\n\t\t\tvar showSubtotals = 1;\r\n\t\t\tvar hideSubtotalsOption = false;\r\n\t\t\tvar validPosition = \"filters;rows;columns;hidden\";\r\n\t\t\tvar isDimension = false;\r\n\t\t\tif (self.columns[index] != undefined) {\r\n\t\t\t\tisDimension = true;\r\n\t\t\t\t\r\n\t\t\t\t\tif ((self.columns[index].getAttribute(\"order\") != undefined) && (self.columns[index].getAttribute(\"order\") === \"ascending\")) {\r\n\t\t\t\t\t\tsortValue = 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif ((self.columns[index].getAttribute(\"order\") != undefined) && (self.columns[index].getAttribute(\"order\") === \"descending\")) {\r\n\t\t\t\t\tsortValue = -1;\r\n\t\t\t\t}\r\n\t\t\t\tif ((self.columns[index].getAttribute(\"order\") != undefined) && (self.columns[index].getAttribute(\"order\") === \"custom\")) {\r\n\t\t\t\t\t//sortValue = 0;\r\n\t\t\t\t\t//if (self.serverPagination) {\r\n\t\t\t\t\t\tsortValue = 1;\r\n\t\t\t\t\t//}\r\n\t\t\t\t}\r\n\t\t\t\tif ((self.columns[index].getAttribute(\"summarize\") != undefined) && (self.columns[index].getAttribute(\"summarize\") === \"yes\")) {\r\n\t\t\t\t\tshowSubtotals = 1;\r\n\r\n\t\t\t\t\tfor (var h = 0; h < self.columns[index].childNodes.length; h++) {\r\n\t\t\t\t\t\tif ((self.columns[index].childNodes[h] != undefined) &&\r\n\t\t\t\t\t\t\t(self.columns[index].childNodes[h].localName != undefined) &&\r\n\t\t\t\t\t\t\t(self.columns[index].childNodes[h].localName === \"include\")) {\r\n\t\t\t\t\t\t\tshowSubtotals = false;\r\n\t\t\t\t\t\t\tfor (var n = 0; n < self.columns[index].childNodes[h].childNodes.length; n++) {\r\n\t\t\t\t\t\t\t\tif ((self.columns[index].childNodes[h].childNodes[n].localName != null) &&\r\n\t\t\t\t\t\t\t\t\t(self.columns[index].childNodes[h].childNodes[n].localName.toLowerCase() === \"value\")) {\r\n\t\t\t\t\t\t\t\t\tif (self.columns[index].childNodes[h].childNodes[n].textContent == \"TOTAL\") {\r\n\t\t\t\t\t\t\t\t\t\tshowSubtotals = true;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else if ((self.columns[index].childNodes[h] != undefined) &&\r\n\t\t\t\t\t\t\t(self.columns[index].childNodes[h].localName != undefined) &&\r\n\t\t\t\t\t\t\t(self.columns[index].childNodes[h].localName === \"exclude\")) {\r\n\t\t\t\t\t\t\tshowSubtotals = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t/*if ((self.columns[index].firstElementChild != undefined) && (self.columns[index].firstElementChild.localName == \"exclude\")){\r\n\t\t\t\t\t\tshowSubtotals = false;\r\n\t\t\t\t\t} else if ((self.columns[index].firstElementChild != undefined) && (self.columns[index].firstElementChild.localName == \"include\")) {\r\n\t\t\t\t\t\tshowSubtotals = false;\r\n\t\t\t\t\t\tfor (var n = 0; n < self.columns[index].firstElementChild.childNodes.length; n++) {\r\n\t\t\t\t\t\t\t\tif ((self.columns[index].firstElementChild.childNodes[n].localName != null) && \r\n\t\t\t\t\t\t\t\t(self.columns[index].firstElementChild.childNodes[n].localName.toLowerCase() === \"value\")) {\r\n\t\t\t\t\t\t\t\t\tif (self.columns[index].firstElementChild.childNodes[n].textContent == \"TOTAL\"){\r\n\t\t\t\t\t\t\t\t\t\tshowSubtotals = true;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}*/\r\n\t\t\t\t}\r\n\t\t\t\tif ((self.columns[index].getAttribute(\"summarize\") != undefined) && (self.columns[index].getAttribute(\"summarize\") === \"no\")) {\r\n\t\t\t\t\tshowSubtotals = false;\r\n\t\t\t\t\thideSubtotalsOption = true;\r\n\t\t\t\t}\r\n\t\t\t\tvar validPosition = \"\"\r\n\t\t\t\tvar metadatavisible = self.columns[index].getAttribute(\"visible\")\r\n\t\t\t\tif (metadatavisible != \"Never\"){\r\n\t\t\t\t\tvalidPosition = (self.columns[index].getAttribute(\"canDragToPages\") == \"true\") ? \"filters;\" : \"\"; \r\n\t\t\t\t\tvalidPosition = validPosition + \"rows;columns;hidden\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar cond = {\r\n\t\t\t\tdistinctValues: [], blackList: [], whiteList: [], greyList: [], collapsedValues: [],\r\n\t\t\t\tsort: sortValue, subtotals: showSubtotals, hideSubtotalOption: hideSubtotalsOption, validPosition: validPosition,\r\n\t\t\t\tdataRowPosition: index, isDimension: isDimension, topFilterValue: self.translations.GXPL_QViewerJSAllOption//gx.getMessage(\"GXPL_QViewerJSAllOption\")/*\"[all]\"*/\r\n\t\t\t}\r\n\t\t\r\n\t\t\t\tcond.topFilterValue = \"[all]\"\r\n\t\t\t\tcond.topFilterString = self.translations.GXPL_QViewerJSAllOption // gx.getMessage(\"GXPL_QViewerJSAllOption\")\r\n\t\t\t\r\n\r\n\t\t\tself.conditions.push(cond);\r\n\t\t\t\r\n\t\t\tif (self.columns[index] != undefined) {\r\n\t\t\t\tfor (var h = 0; h < self.columns[index].childNodes.length; h++) {\r\n\t\t\t\t\tif ((self.columns[index].childNodes[h] != undefined) &&\r\n\t\t\t\t\t\t(self.columns[index].childNodes[h].localName != undefined) &&\r\n\t\t\t\t\t\t(self.columns[index].childNodes[h].localName === \"include\")) {\r\n\t\t\t\t\t\tfor (var n = 0; n < self.columns[index].childNodes[h].childNodes.length; n++) {\r\n\t\t\t\t\t\t\tif ((self.columns[index].childNodes[h].childNodes[n].localName != null) &&\r\n\t\t\t\t\t\t\t\t(self.columns[index].childNodes[h].childNodes[n].localName.toLowerCase() === \"value\")) {\r\n\t\t\t\t\t\t\t\tif (self.columns[index].childNodes[h].childNodes[n].textContent != \"TOTAL\") {\r\n\t\t\t\t\t\t\t\t\tself.conditions[index].topFilterValue = self.columns[index].childNodes[h].childNodes[n].textContent;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tthis.restoreSubtotalsAndSortLayout = function (index) {\r\n\t\t\t//restore save conditions\r\n\t\t\ttry {\r\n\t\t\t\tif (rememberLayout) {\r\n\t\t\t\t\tmState = self.getState();\r\n\t\t\t\t\tif ((mState != undefined) && (mState.version != undefined) && (mState.version === self.rememberLayoutStateVersion)) { //check version\r\n\t\t\t\t\t\tif ((mState.query == self.query) && (self.conditions.length == mState.conditions.length)) {\r\n\t\t\t\t\t\t\tself.conditions[index].subtotals = mState.conditions[index].subtotals;\r\n\t\t\t\t\t\t\tself.conditions[index].sort = mState.conditions[index].sort;\r\n\t\t\t\t\t\t\tself.conditions[index].collapsedValues = mState.conditions[index].collapsedValues;\r\n\t\t\t\t\t\t\t\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} catch (Error) { }\r\n\t\t}\r\n\r\n\t\tthis.applyCustomFilters = function (index) {\r\n\t\t\ttry {\r\n\t\t\t\tif (index == self.dataColumnIndex) { /* dummy condition */\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (self.columns[index] != undefined) {\r\n\t\t\t\t\tfor (var h = 0; h < self.columns[index].childNodes.length; h++) {\r\n\t\t\t\t\t\tif ((self.columns[index].childNodes[h] != undefined) &&\r\n\t\t\t\t\t\t\t(self.columns[index].childNodes[h].localName != undefined) &&\r\n\t\t\t\t\t\t\t(self.columns[index].childNodes[h].localName === \"include\")) {\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tself.createFilterInfo({ op: \"none\", values: \"\", dim: index });\r\n\t\t\t\t\t\t\t\tfor (var n = 0; n < self.columns[index].childNodes[h].childNodes.length; n++) {\r\n\t\t\t\t\t\t\t\t\tif ((self.columns[index].childNodes[h].childNodes[n].localName != null) &&\r\n\t\t\t\t\t\t\t\t\t\t(self.columns[index].childNodes[h].childNodes[n].localName.toLowerCase() === \"value\")) {\r\n\t\t\t\t\t\t\t\t\t\tif (self.columns[index].childNodes[h].childNodes[n].textContent != \"TOTAL\") {\r\n\t\t\t\t\t\t\t\t\t\t\tif (self.UserFilterValues[index] == undefined) self.UserFilterValues[index] = [];\r\n\t\t\t\t\t\t\t\t\t\t\tself.UserFilterValues[index].push(self.columns[index].childNodes[h].childNodes[n].textContent.trimpivot());\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t//add expand collapse info\r\n\t\t\t\t\t\tvar rowPos = self.rowConditions.indexOf(index);\r\n\t\t\t\t\t\tvar colPos = self.colConditions.indexOf(index);\r\n\t\t\t\t\t\tif (((colPos < self.colConditions.length - 1) && (colPos != -1)) || ((rowPos < self.rowConditions.length - measures.length) && (rowPos != -1))) {\r\n\t\t\t\t\t\t\tif ((self.columns[index].childNodes[h] != undefined) &&\r\n\t\t\t\t\t\t\t\t(self.columns[index].childNodes[h].localName != undefined) &&\r\n\t\t\t\t\t\t\t\t(self.columns[index].childNodes[h].localName === \"expand\")) {\r\n\t\t\t\t\t\t\t\t\r\n\r\n\r\n\t\t\t\t\t\t\t\t\tfor (var n = 0; n < self.columns[index].childNodes[h].childNodes.length; n++) {\r\n\t\t\t\t\t\t\t\t\t\tif ((self.columns[index].childNodes[h].childNodes[n].localName != null) &&\r\n\t\t\t\t\t\t\t\t\t\t\t(self.columns[index].childNodes[h].childNodes[n].localName.toLowerCase() === \"value\")) {\r\n\t\t\t\t\t\t\t\t\t\t\tif (self.UserExpandValues[index] == undefined) self.UserExpandValues[index] = [];\r\n\t\t\t\t\t\t\t\t\t\t\tself.UserExpandValues[index].push(self.columns[index].childNodes[h].childNodes[n].textContent.trimpivot());\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tif (self.UserExpandValues[index] == undefined) {\r\n\t\t\t\t\t\t\t\t\t\tself.UserExpandValues[index] = [\"#ALLCOLLAPSE#\"];\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} catch (error) {\r\n\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\t\r\n\t\tthis.initWhenServerPagination = function () {\r\n\t\t\tself.propPage = OAT.Dom.create(\"div\", {});\r\n\t\t\tif ((self.QueryViewerCollection[self.IdForQueryViewerCollection].AutoRefreshGroup == \"\")) {\r\n\t\t\t\tjQuery(\".oat_winrect_container\").remove();\r\n\t\t\t}\r\n\t\t\tself.UserFilterValues = []; self.UserExpandValues = [];\r\n\t\t\tfor (var i = 0; i < self.headerRow.length; i++) {\r\n\t\t\t\tself.initCondition(i);\r\n\t\t\t\tif (self.conditions[i] && self.columns[i]) {\r\n\t\t\t\t\tself.conditions[i].dataField = self.columns[i].getAttribute(\"dataField\")\r\n\t\t\t\t\tself.conditions[i].state = \"all\"\r\n\t\t\t\t\tself.conditions[i].defaultAction = \"Include\"\r\n\t\t\t\t\tself.conditions[i].visibles = []\r\n\t\t\t\t\tself.conditions[i].searchInfo = { previousPage: 0, totalPages: 0, filteredText: \"\", values: [] }\r\n\t\t\t\t}\r\n\t\t\t\tself.applyCustomFilters(i);\r\n\t\t\t}\r\n\r\n\t\t\t//save default view values\r\n\t\t\tvar oldConditions = jQuery.extend(true, [], self.conditions);\r\n\r\n\t\t\tvar defcolCond = new Array()\r\n\t\t\tfor (var i = 0; i < self.initRowConditions.length; i++) {\r\n\t\t\t\tdefcolCond[i] = self.initRowConditions[i];\r\n\t\t\t}\r\n\t\t\tvar defcolRow = new Array();\r\n\t\t\tfor (var i = 0; i < self.initColConditions.length; i++) {\r\n\t\t\t\tdefcolRow[i] = self.initColConditions[i];\r\n\t\t\t}\r\n\t\t\tvar defStIndex = new Array();\r\n\t\t\tfor (var i = 0; i < self.initFilterIndexes.length; i++) {\r\n\t\t\t\tdefStIndex[i] = self.initFilterIndexes[i];\r\n\t\t\t}\r\n\r\n\t\t\tvar oldInitMetadata = jQuery.extend(true, {}, self.initMetadata)\r\n\r\n\t\t\tself.initState = {\r\n\t\t\t\tquery: self.query,\r\n\t\t\t\tconditions: oldConditions,\r\n\t\t\t\tcolConditions: defcolRow,\r\n\t\t\t\trowConditions: defcolCond,\r\n\t\t\t\tfilterDivSelects: [],\r\n\t\t\t\tfilterIndexes: defStIndex,\r\n\t\t\t\tstateChanged: false,\r\n\t\t\t\trowsPerPage: pageSize,\r\n\t\t\t\tAxisInfo: self.createAxisInfo(\"\"),\r\n\t\t\t\tNewAxisInfo: self.createNewAxisInfo(\"\"),\r\n\t\t\t\tDataInfo: self.createDataInfo(),\r\n\t\t\t\tNewDataInfo: self.createNewDataInfo(),\r\n\t\t\t\tCollapseInfo: [],\r\n\t\t\t\tFilterInfo: [],\r\n\t\t\t\tInitMetadata: oldInitMetadata\r\n\t\t\t};\r\n\t\t\t//end save default view values\r\n\r\n\t\t\tfor (var i = 0; i < self.headerRow.length; i++) {\r\n\t\t\t\tself.restoreSubtotalsAndSortLayout(i)\r\n\t\t\t}\r\n\r\n\t\t\t//get previuos state\r\n\t\t\tvar mState;\r\n\t\t\tif (rememberLayout) {\r\n\t\t\t\tmState = self.getState();\r\n\t\t\t} else {\r\n\t\t\t\tmState = null;\r\n\t\t\t}\r\n\r\n\t\t\tvar oldFilterDivValues = [];\r\n\t\t\tvar stateLoad = false; self.stateLoad = false;\r\n\t\t\tif (mState != null) {\r\n\t\t\t\tif ((mState.version != undefined) && (mState.version === self.rememberLayoutStateVersion)) {\r\n\t\t\t\t\tif ((mState.query == self.query) && (self.conditions.length == mState.conditions.length)) {\r\n\t\t\t\t\t\tstateLoad = true;\r\n\t\t\t\t\t\tself.stateLoad = true;\r\n\t\t\t\t\t\tself.UserFilterValues = []\r\n\t\t\t\t\t\tfor (var ci = 0; ci <= mState.conditions.length - 1; ci++) {\r\n\t\t\t\t\t\t\tif ((mState.conditions[ci] != false) && (self.conditions[ci] != false)) {\r\n\t\t\t\t\t\t\t\tfor (var p = 0; p < mState.conditions[ci].distinctValues.length; p++) {\r\n\t\t\t\t\t\t\t\t\tif ((self.conditions[ci].distinctValues.indexOf(mState.conditions[ci].distinctValues[p]) == -1)) {\r\n\t\t\t\t\t\t\t\t\t\tself.conditions[ci].distinctValues.push(mState.conditions[ci].distinctValues[p])\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tfor (var p = 0; p < mState.conditions[ci].blackList.length; p++) {\r\n\t\t\t\t\t\t\t\t\tif ((self.conditions[ci].blackList.indexOf(mState.conditions[ci].blackList[p]) == -1)) {\r\n\t\t\t\t\t\t\t\t\t\tself.conditions[ci].blackList.push(mState.conditions[ci].blackList[p])\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (mState.conditions[ci].visibles) {\r\n\t\t\t\t\t\t\t\t\tfor (var p = 0; p < mState.conditions[ci].visibles.length; p++) {\r\n\t\t\t\t\t\t\t\t\t\tif ((self.conditions[ci].visibles.indexOf(mState.conditions[ci].visibles[p]) == -1)) {\r\n\t\t\t\t\t\t\t\t\t\t\tself.conditions[ci].visibles.push(mState.conditions[ci].visibles[p])\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tfor (var p = 0; p < mState.conditions[ci].collapsedValues.length; p++) {\r\n\t\t\t\t\t\t\t\t\tif ((self.conditions[ci].collapsedValues.indexOf(mState.conditions[ci].collapsedValues[p]) == -1)) {\r\n\t\t\t\t\t\t\t\t\t\tself.conditions[ci].collapsedValues.push(mState.conditions[ci].collapsedValues[p])\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\t\tself.conditions[ci].sort = mState.conditions[ci].sort;\r\n\r\n\t\t\t\t\t\t\t\t\tself.oldSortValues[ci] = mState.conditions[ci].sort;\r\n\t\t\t\t\t\t\t\t\tself.conditions[ci].subtotals = mState.conditions[ci].subtotals;\r\n\t\t\t\t\t\t\t\t\tself.conditions[ci].defaultAction = mState.conditions[ci].defaultAction;\r\n\t\t\t\t\t\t\t\t\tself.conditions[ci].state = mState.conditions[ci].state;\r\n\t\t\t\t\t\t\t\t\tself.conditions[ci].topFilterValue = mState.conditions[ci].topFilterValue\r\n\r\n\t\t\t\t\t\t\t\t\tself.conditions[ci].totalPages = mState.conditions[ci].totalPages\r\n\t\t\t\t\t\t\t\t\tself.conditions[ci].previousPage = mState.conditions[ci].previousPage\r\n\t\t\t\t\t\t\t\t\tself.conditions[ci].blocked = mState.conditions[ci].blocked\r\n\r\n\t\t\t\t\t\t\t\t} catch (Error) { }\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tself.rowConditions = mState.rowConditions;\r\n\t\t\t\t\t\tself.colConditions = mState.colConditions;\r\n\t\t\t\t\t\tself.rowsPerPage = mState.rowsPerPage;\r\n\r\n\t\t\t\t\t\tself.filterIndexes = mState.filterIndexes;\r\n\t\t\t\t\t\tif (mState.filterDivSelects != undefined) {\r\n\t\t\t\t\t\t\tfor (var fiv = 0; fiv < mState.filterDivSelects.length; fiv++) {\r\n\t\t\t\t\t\t\t\toldFilterDivValues[fiv] = mState.filterDivSelects[fiv];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tself.stateChanged = true\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\ttry {\r\n\t\t\t\tif ((mState != null) && (mState.version === self.rememberLayoutStateVersion) && (mState.filterIndexes.length > 0)) {\r\n\t\t\t\t\tvar existElm = false;\r\n\t\t\t\t\tfor (var i = 0; i < self.conditions.length; i++) {//save the black list create from older state\r\n\t\t\t\t\t\tvar tmp = []\r\n\t\t\t\t\t\tif ((self.conditions[i]) && (self.conditions[i].blackList)) {\r\n\t\t\t\t\t\t\tfor (var j = 0; j < self.conditions[i].blackList.length; j++) {\r\n\t\t\t\t\t\t\t\ttmp.push(self.conditions[i].blackList[j])\r\n\t\t\t\t\t\t\t\texistElm = true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tself.tempBlackLists.push([tmp])\r\n\t\t\t\t\t\tvar tmp2 = []\r\n\t\t\t\t\t\tif ((self.conditions[i]) && (self.conditions[i].collapsedValues)) {\r\n\t\t\t\t\t\t\tfor (var j = 0; j < self.conditions[i].collapsedValues.length; j++) {\r\n\t\t\t\t\t\t\t\ttmp2.push(self.conditions[i].collapsedValues[j])\r\n\t\t\t\t\t\t\t\texistElm = true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tself.tempCollapsedValues.push([tmp2])\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!existElm) {\r\n\t\t\t\t\t\tself.tempBlackLists = false\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tself.tempBlackLists = false\r\n\t\t\t\t}\r\n\t\t\t} catch (error) {\r\n\t\t\t\tself.tempBlackLists = false\r\n\t\t\t}\r\n\r\n\r\n\t\t\tself.gd.clearSources();\r\n\t\t\tself.gd.clearTargets();\r\n\r\n\r\n\r\n\t\t\tif (GlobalPivotInterval[UcId] != undefined) {\r\n\t\t\t\tclearInterval(GlobalPivotInterval[UcId]);\r\n\t\t\t}\r\n\t\t\tvar previousValuePivotWidth = 0\r\n\t\t\tvar antepreviusValuePivotWidth = 0\r\n\t\t\tGlobalPivotInterval[UcId] = setInterval(function () {\r\n\t\t\t\tvar actual_rowsPerPage = 0;\r\n\t\t\t\t\r\n\t\t\t\t//find max width of inner_filter_div\r\n\t\t\t\tvar pageFilter = jQuery(\"#\" + UcId + \"_\" + self.query + \"_pivot_page\").find(\".inner_filter_div\")\r\n\t\t\t\tvar MaxWidthFilters = 0;\r\n\t\t\t\tfor (var pFIndx = 0; pFIndx < pageFilter.length; pFIndx++){\r\n\t\t\t\t\tif (MaxWidthFilters < pageFilter[pFIndx].offsetWidth){\r\n\t\t\t\t\t\tMaxWidthFilters = pageFilter[pFIndx].offsetWidth\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tMaxWidthFilters = (MaxWidthFilters > 0) ? MaxWidthFilters + 8 : MaxWidthFilters; \r\n\t\t\t\t\r\n\t\t\t\tif (jQuery(\"#\" + self.controlName + \"_\" + self.query + \"tablePagination_rowsPerPage\").length > 0) {\r\n\t\t\t\t\tactual_rowsPerPage = parseInt(jQuery(\"#\" + self.controlName + \"_\" + self.query + \"tablePagination_rowsPerPage\")[0].value);\r\n\t\t\t\t\tif (!isNaN(actual_rowsPerPage)) {\r\n\t\t\t\t\t\tif (jQuery(\"#\" + self.controlName + \"_\" + self.query)[0].getAttribute(\"class\") === \"pivot_table\") {\r\n\t\t\t\t\t\t\tif ((!autoResize)) {\r\n\t\t\t\t\t\t\t\tvar clientWdt = jQuery(\"#\" + self.containerName)[0].clientWidth\r\n\t\t\t\t\t\t\t\tif (clientWdt < MaxWidthFilters) {\r\n\t\t\t\t\t\t\t\t\tjQuery(\"#\" + self.controlName + \"_\" + self.query).css({ width: MaxWidthFilters + \"px\" });\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tjQuery(\"#\" + self.controlName + \"_\" + self.query).css({ width: (clientWdt) + \"px\" });\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tvar wd = jQuery(\"#\" + self.controlName + \"_\" + self.query)[0].offsetWidth;\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (wd >= MaxWidthFilters){\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tvar actualWidth = jQuery(\"#\" + self.controlName + \"_\" + self.query + \"_tablePagination\")[0].clientWidth\r\n\t\t\t\t\t\t\t\tif ((actualWidth > MaxWidthFilters + 1) || (actualWidth < MaxWidthFilters - 1)) {\r\n\t\t\t\t\t\t\t\t\tjQuery(\"#\" + UcId + \"_\" + self.query + \"_title_div\").css({ width: wd + \"px\" });\r\n\t\t\t\t\t\t\t\t\tjQuery(\"#\" + UcId + \"_\" + self.query + \"_pivot_page\").css({ width: wd + \"px\" });\r\n\t\r\n\t\t\t\t\t\t\t\t\tjQuery(\"#\" + self.controlName + \"_\" + self.query + \"_tablePagination\").css({ width: wd + \"px\" });\r\n\r\n\t\t\t\t\t\t\t\t\tantepreviusValuePivotWidth = previousValuePivotWidth\r\n\t\t\t\t\t\t\t\t\tpreviousValuePivotWidth = wd\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tjQuery(\"#\" + UcId + \"_\" + self.query + \"_title_div\").css({ width: MaxWidthFilters + \"px\" });\r\n\t\t\t\t\t\t\t\tjQuery(\"#\" + UcId + \"_\" + self.query + \"_pivot_page\").css({ width: MaxWidthFilters + \"px\" });\r\n\t\r\n\t\t\t\t\t\t\t\tjQuery(\"#\" + self.controlName + \"_\" + self.query + \"_tablePagination\").css({ width: MaxWidthFilters + \"px\" });\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tjQuery(\"#\" + self.controlName + \"_\" + self.query).css({ width: MaxWidthFilters + \"px\" });\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tantepreviusValuePivotWidth = previousValuePivotWidth\r\n\t\t\t\t\t\t\t\tpreviousValuePivotWidth = MaxWidthFilters\r\n\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (jQuery(\"#\" + self.controlName + \"_\" + self.query)[0] != undefined) {\r\n\t\t\t\t\t\tif (jQuery(\"#\" + self.controlName + \"_\" + self.query)[0].getAttribute(\"class\") === \"pivot_table\") {\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (!autoResize) {\r\n\t\t\t\t\t\t\t\tvar clientWdt = jQuery(\"#\" + self.containerName)[0].clientWidth\r\n\t\t\t\t\t\t\t\tif (clientWdt < MaxWidthFilters) {\r\n\t\t\t\t\t\t\t\t\tjQuery(\"#\" + self.controlName + \"_\" + self.query).css({ width: MaxWidthFilters + \"px\" });\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tjQuery(\"#\" + self.controlName + \"_\" + self.query).css({ width: (clientWdt) + \"px\" });\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tvar wd = jQuery(\"#\" + self.controlName + \"_\" + self.query)[0].offsetWidth\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (wd < MaxWidthFilters){\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tif ((antepreviusValuePivotWidth == 0) || (antepreviusValuePivotWidth == previousValuePivotWidth) ||\r\n\t\t\t\t\t\t\t\t\t((previousValuePivotWidth > MaxWidthFilters + 6) || (previousValuePivotWidth < MaxWidthFilters - 6)\r\n\t\t\t\t\t\t\t\t\t\t|| (antepreviusValuePivotWidth > previousValuePivotWidth + 6) || (antepreviusValuePivotWidth < previousValuePivotWidth - 6))) {\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tjQuery(\"#\" + UcId + \"_\" + self.query + \"_title_div\").css({ width: MaxWidthFilters + \"px\" });\r\n\t\t\t\t\t\t\t\t\tjQuery(\"#\" + UcId + \"_\" + self.query + \"_pivot_page\").css({ width: MaxWidthFilters + \"px\" });\r\n\t\t\t\t\t\t\t\t\tantepreviusValuePivotWidth = previousValuePivotWidth\r\n\t\t\t\t\t\t\t\t\tpreviousValuePivotWidth = MaxWidthFilters\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tjQuery(\"#\" + self.controlName + \"_\" + self.query).css({ width: MaxWidthFilters + \"px\" });\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tif ((antepreviusValuePivotWidth == 0) || (antepreviusValuePivotWidth == previousValuePivotWidth) ||\r\n\t\t\t\t\t\t\t\t\t((previousValuePivotWidth > wd + 6) || (previousValuePivotWidth < wd - 6)\r\n\t\t\t\t\t\t\t\t\t\t|| (antepreviusValuePivotWidth > previousValuePivotWidth + 6) || (antepreviusValuePivotWidth < previousValuePivotWidth - 6))) {\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tjQuery(\"#\" + UcId + \"_\" + self.query + \"_title_div\").css({ width: wd + \"px\" });\r\n\t\t\t\t\t\t\t\t\tjQuery(\"#\" + UcId + \"_\" + self.query + \"_pivot_page\").css({ width: wd + \"px\" });\r\n\t\t\t\t\t\t\t\t\tantepreviusValuePivotWidth = previousValuePivotWidth\r\n\t\t\t\t\t\t\t\t\tpreviousValuePivotWidth = wd\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}, 20);\r\n\r\n\r\n\r\n\t\t\tvar ParmAxisInfo;\r\n\t\t\tif ((mState != null) && (mState.AxisInfo != null)) {\r\n\t\t\t\tself.pageData.AxisInfo = mState.AxisInfo;\r\n\t\t\t\tParmAxisInfo =  jQuery.extend(true, {}, mState.NewAxisInfo)\r\n\t\t\t} else {\r\n\t\t\t\tself.pageData.AxisInfo = self.createAxisInfo(\"\");\r\n\t\t\t\tParmAxisInfo = self.createNewAxisInfo(\"\"); \r\n\t\t\t}\r\n\t\t\tvar ParmDataInfo;\r\n\t\t\tif ((mState != null) && (mState.DataInfo != null)) {\r\n\t\t\t\tself.pageData.DataInfo = mState.DataInfo;\r\n\t\t\t\tParmDataInfo = jQuery.extend(true, {}, mState.NewDataInfo)\r\n\t\t\t} else {\r\n\t\t\t\tself.pageData.DataInfo = self.createDataInfo();\r\n\t\t\t\tParmDataInfo = self.createNewDataInfo();\r\n\t\t\t}\r\n\r\n\t\t\tif ((mState != null) && (mState.FilterInfo != null)) {\r\n\t\t\t\tself.pageData.FilterInfo = mState.FilterInfo;\r\n\t\t\t}\r\n\r\n\t\t\tif ((self.UserFilterValues.length == 0) && (self.UserExpandValues.length == 0)) {\r\n\r\n\t\t\t\tself.pageData.CollapseInfo = self.CreateExpandCollapseInfo(\"\");\r\n\t\t\t\t\r\n\t\t\t\tself.lastCallToQueryViewer = \"initWhenServerPagination\"\r\n\t\t\t\t\r\n\t\t\t\tself.requestPageDataForPivotTable(1, self.rowsPerPage, true, ParmAxisInfo, ParmDataInfo, self.pageData.FilterInfo, self.pageData.CollapseInfo, true);\r\n\t\t\t\t\r\n\t\t\t\t\r\n\r\n\r\n\r\n\t\t\t} else {\r\n\t\t\t\t//when user customize filters or expand-collapsed\r\n\t\t\t\t\r\n\t\t\t\tself.initValueRead(self, 0, true);\r\n\r\n\t\t\t}\r\n\r\n\t\t\t//set interval for handler values infinite scroll\r\n\t\t\tsetInterval(function () {\r\n\t\t\t\tfor (var t = 0; t < jQuery(\".oat_winrect_container .pivot_popup_fix\").length; t++) {\r\n\t\t\t\t\tif ((!jQuery(\".oat_winrect_container .pivot_popup_fix\").closest(\".oat_winrect_container\")[t].style.display) ||\r\n\t\t\t\t\t\t(jQuery(\".oat_winrect_container .pivot_popup_fix\").closest(\".oat_winrect_container\")[t].style.display != \"none\")) {\r\n\r\n\t\t\t\t\t\tif (jQuery(\".oat_winrect_container .pivot_popup_fix\").length > 0) {\r\n\t\t\t\t\t\t\tvar element = jQuery(\".oat_winrect_container .pivot_popup_fix\")[t];\r\n\t\t\t\t\t\t\tvar scrollBottom = element.scrollHeight - element.clientHeight - element.scrollTop\r\n\t\t\t\t\t\t\tif (scrollBottom < 25) {\r\n\t\t\t\t\t\t\t\tvar UcId = element.getAttribute(\"ucid\")\r\n\t\t\t\t\t\t\t\tvar columnNumber = parseInt(element.getAttribute(\"columnNumber\"))\r\n\t\t\t\t\t\t\t\tif (UcId == self.UcId) {\r\n\t\t\t\t\t\t\t\t\tself.readScrollValue(columnNumber)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\t250)\r\n\r\n\r\n\t\t} /* initWhenServerPagination */\r\n\t\r\n\r\n\t\r\n\t\tthis.initValueRead = function (self, columnNumber, allData, requestDataField) {\r\n\t\t\tif (columnNumber >= self.columns.length) {\r\n\r\n\t\t\t\t//add items to page select if exists\r\n\t\t\t\ttry {\r\n\t\t\t\t\tfor (var iP = 0; iP < jQuery(\"#\" + self.UcId + \"_\" + self.query + \"_pivot_page\").find(\"select\").length; iP++) {\r\n\t\t\t\t\t\tvar s = jQuery(\"#\" + self.UcId + \"_\" + self.query + \"_pivot_page\").find(\"select\")[iP];\r\n\t\t\t\t\t\tvar filterDim = parseInt(s.getAttribute(\"id\").replace(\"page_select_\", \"\"))\r\n\t\t\t\t\t\tvar index = self.filterIndexes[filterDim]\r\n\r\n\t\t\t\t\t\tif (self.conditions[index].filteredShowValues == undefined) {\r\n\t\t\t\t\t\t\tself.conditions[index].filteredShowValues = []\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar actualValues = self.conditions[index].distinctValues;\r\n\t\t\t\t\t\tfor (var j = 0; j < actualValues.length; j++) {\r\n\t\t\t\t\t\t\tvar v = actualValues[j];\r\n\t\t\t\t\t\t\tif (self.conditions[index].filteredShowValues.indexOf(v) == -1) {\r\n\t\t\t\t\t\t\t\tself.conditions[index].filteredShowValues.push(v);\r\n\t\t\t\t\t\t\t\tif (v != \"#NuN#\") {\r\n\t\t\t\t\t\t\t\t\tOAT.Dom.option(v, v, s);\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tOAT.Dom.option(\" \", v, s);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif ((self.conditions[index].topFilterValue != \"[all]\") /*&& (self.conditions[index].topFilterValue!=\"\")*/) {\r\n\t\t\t\t\t\t\tvar v = self.conditions[index].topFilterValue\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tvar isInFilteredShowValues = -1;\r\n\t\t\t\t\t\t\tfor(var fV = 0; fV < self.conditions[index].filteredShowValues.length; fV++){\r\n\t\t\t\t\t\t\t\tif (String(self.conditions[index].filteredShowValues[fV]).trim() == String(v).trim()){\r\n\t\t\t\t\t\t\t\t\tisInFilteredShowValues = fV;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (isInFilteredShowValues > -1) {//(self.conditions[index].filteredShowValues.indexOf(v) != -1) { //value already load\r\n\t\t\t\t\t\t\t\ts.selectedIndex = isInFilteredShowValues + 1\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tself.conditions[index].filteredShowValues.push(v);\r\n\t\t\t\t\t\t\t\tif (v != \"#NuN#\") {\r\n\t\t\t\t\t\t\t\t\tOAT.Dom.option(v, v, s);\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tOAT.Dom.option(\" \", v, s);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\ts.selectedIndex = 1\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (ERROR) {\r\n\r\n\t\t\t\t}\r\n\r\n\r\n\r\n\t\t\t\tif (allData) {\r\n\t\t\t\t\tself.callServiceWhenCustomeValues();\r\n\t\t\t\t}\r\n\t\t\t\treturn;\r\n\t\t\t} else {\r\n\t\t\t\tvar cantItems = 10;\r\n\t\t\t\tif ((self.QueryViewerCollection[self.IdForQueryViewerCollection].AutoRefreshGroup != \"\") || (allData)) {\r\n\t\t\t\t\tcantItems = 0;\r\n\t\t\t\t}\r\n\t\t\t\tself.lastRequestValue = columnNumber;\r\n\t\t\t\t\r\n\t\t\t\tself.lastRequestAttributeValues = \"initValueRead\"\r\n\t\t\t\tself.lastRequestAttributeColumnNumber = columnNumber\r\n\t\t\t\tself.lastRequestAttributeAllData = allData\r\n\t\t\t\tself.lastRequestAttributeRequestDataField = requestDataField\r\n\t\t\t\t\r\n\t\t\t\tself.requestAttributeValues(self.columns[columnNumber].getAttribute(\"dataField\"), 1, cantItems, \"\")\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t\r\n\r\n\t\tthis.callServiceWhenCustomeValues = function () {\r\n\t\t\tself.pageData.CollapseInfo = self.CreateExpandCollapseInfo(\"\");\r\n\t\t\tvar ParmAxisInfo = self.createNewAxisInfo()\r\n\t\t\tvar ParmDataInfo = self.createNewDataInfo()\r\n\t\t\t\r\n\t\t\tself.lastCallToQueryViewer = \"callServiceWhenCustomeValues\"\r\n\t\t\t\t\r\n\t\t\tself.requestPageDataForPivotTable(1, self.rowsPerPage, true, ParmAxisInfo, ParmDataInfo, self.pageData.FilterInfo, self.pageData.CollapseInfo, true);\r\n\t\t\t\t\r\n\t\r\n\t\t}\r\n\r\n\r\n\r\n\t\t/* callback routines */\r\n\t\tthis.getOrderReference = function (conditionIndex, anchorRef, functionRef, divRef) { // ** move a row or column to filter bar ---\r\n\t\t\treturn function (target, x, y) {\r\n\t\t\t\t/* somehow reorder conditions */\r\n\r\n\t\t\t\tif ((self.conditions[conditionIndex].validPosition != undefined) && (self.conditions[conditionIndex].validPosition.indexOf(\"filters\") == -1)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tself.lightOff();\r\n\t\t\t\t\r\n\t\t\t\tvar sourceCI = conditionIndex; /* global index */\r\n\t\t\t\tvar targetCI = target.conditionIndex; /* global index */\r\n\t\t\t\tif ((sourceCI != targetCI) && (self.conditions[0].previousPage == undefined)) {\r\n\t\t\t\t\tself.initValueRead(self, 0, self.stateLoad);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t/* filters */\r\n\t\t\t\tif (target == self.filterDiv) {\r\n\t\t\t\t\tself.stateChanged = true\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar insert = false;\r\n\t\t\t\t\tfor (var fI = 0; (fI < self.filterIndexes.length) && !insert;  fI++){\r\n\t\t\t\t\t\tif (self.filterIndexes[fI] > conditionIndex){\r\n\t\t\t\t\t\t\tself.filterIndexes.splice(fI, 0, conditionIndex);\r\n\t\t\t\t\t\t\tinsert = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!insert){\r\n\t\t\t\t\t\tself.filterIndexes.push(conditionIndex);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\t//self.filterIndexes.push(conditionIndex);\r\n\t\t\t\t\tself.conditions[conditionIndex].blackList = [];\r\n\t\t\t\t\tfor (var i = 0; i < self.rowConditions.length; i++) {\r\n\t\t\t\t\t\tif (self.rowConditions[i] == conditionIndex) { self.rowConditions.splice(i, 1); }\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfor (var i = 0; i < self.colConditions.length; i++) {\r\n\t\t\t\t\t\tif (self.colConditions[i] == conditionIndex) { self.colConditions.splice(i, 1); }\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\r\n\t\t\t\t\tself.onDragundDropEventHandle(conditionIndex, \"pages\", self.filterIndexes.indexOf(conditionIndex)) //call event\r\n\r\n\t\t\t\t\tself.DiseablePivot();\r\n\t\t\t\t\tsetTimeout(function () {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tself.getDataForPivot(self.UcId, 1, self.rowsPerPage, true, self.conditions[conditionIndex].dataField, { op: \"all\", value: \"\", dim: conditionIndex }, \"\", \"\")\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tself.EneablePivot();\r\n\t\t\t\t\t}, 200)\r\n\t\t\t\t\treturn;\r\n\t\t\t\t} \r\n\t\t\t\t\r\n\t\t\t\tvar startInRows = self.rowConditions.indexOf(conditionIndex) > -1; \r\n\r\n\t\t\t\t\r\n\t\t\t\tif (sourceCI == targetCI) {\r\n\t\t\t\t\tif (OAT.isWebkit()) {\r\n\t\t\t\t\t\tif (anchorRef != undefined) {\r\n\t\t\t\t\t\t\tanchorRef.displayRef2([x, y])\r\n\t\t\t\t\t\t\tfunctionRef([x, y, divRef])\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn;\r\n\t\t\t\t} /* dragged onto the same */\r\n\t\t\t\tvar sourceType = false; var sourceI = -1; /* local */\r\n\t\t\t\tvar targetType = false; var targetI = -1; /* local */\r\n\t\t\t\tfor (var i = 0; i < self.rowConditions.length; i++) {\r\n\t\t\t\t\tif (self.rowConditions[i] == sourceCI) { sourceType = self.rowConditions; sourceI = i; }\r\n\t\t\t\t\tif (self.rowConditions[i] == targetCI) { targetType = self.rowConditions; targetI = i; }\r\n\t\t\t\t}\r\n\t\t\t\tfor (var i = 0; i < self.colConditions.length; i++) {\r\n\t\t\t\t\tif (self.colConditions[i] == sourceCI) { sourceType = self.colConditions; sourceI = i; }\r\n\t\t\t\t\tif (self.colConditions[i] == targetCI) { targetType = self.colConditions; targetI = i; }\r\n\t\t\t\t}\r\n\t\t\t\t/*if (targetCI == -1) {\r\n\t\t\t\t\t// no cols - lets create one \r\n\t\t\t\t\tself.colConditions.push(sourceCI);\r\n\t\t\t\t\tself.rowConditions.splice(sourceI, 1);\r\n\t\t\t\t\t\r\n\t\t\t\t\tself.preGoWhenMoveTopFilter(conditionIndex);\r\n\t\t\t\t\t\r\n\t\t\t\t\tself.go(self);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (targetCI == -2) {\r\n\t\t\t\t\t// no rows - lets create one \r\n\t\t\t\t\tself.rowConditions.push(sourceCI);\r\n\t\t\t\t\tself.colConditions.splice(sourceI, 1);\r\n\t\t\t\t\t\r\n\t\t\t\t\tself.preGoWhenMoveTopFilter(conditionIndex);\r\n\t\t\t\t\t\r\n\t\t\t\t\tself.go(self);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}*/\r\n\t\t\t\tif (sourceType == targetType) {\r\n\t\t\t\t\t/* same condition type */\r\n\t\t\t\t\tif (sourceI + 1 == targetI) {\r\n\t\t\t\t\t\t/* dragged on condition immediately after */\r\n\t\t\t\t\t\ttargetType.splice(targetI + 1, 0, sourceCI);\r\n\t\t\t\t\t\ttargetType.splice(sourceI, 1);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\ttargetType.splice(sourceI, 1);\r\n\t\t\t\t\t\ttargetType.splice(targetI, 0, sourceCI);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tself.changesrowposition = true\r\n\t\t\t\t\tself.onDragundDropEventHandle(conditionIndex, (startInRows) ? \"rows\" : \"columns\" , (startInRows) ? self.rowConditions.indexOf(conditionIndex) : self.colConditions.indexOf(conditionIndex))\r\n\t\t\t\t} else {\r\n\t\t\t\t\t/* different condition type */\r\n\t\t\t\t\tsourceType.splice(sourceI, 1);\r\n\t\t\t\t\ttargetType.splice(targetI, 0, sourceCI);\r\n\t\t\t\t\t\r\n\t\t\t\t\tself.onDragundDropEventHandle(conditionIndex, (startInRows) ? \"columns\" : \"rows\" , (startInRows) ? self.colConditions.indexOf(conditionIndex) : self.rowConditions.indexOf(conditionIndex))\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\r\n\t\t\t\t\tself.getDataForPivot(self.UcId, 1, self.rowsPerPage, true, self.conditions[conditionIndex].dataField, \"\", \"\", \"\")\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\tthis.getOrderReferenceProg = function (conditionIndex) { // ** move a row or column to filter bar programatically---\r\n\r\n\r\n\t\t\tif ((self.conditions[conditionIndex].validPosition != undefined) && (self.conditions[conditionIndex].validPosition.indexOf(\"filters\") == -1)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tself.stateChanged = true\r\n\t\t\tif (self.filterIndexes.indexOf(conditionIndex) < 0) {\r\n\t\t\t\tself.filterIndexes.push(conditionIndex);\r\n\t\t\t}\r\n\t\t\tself.conditions[conditionIndex].blackList = [];\r\n\t\t\tfor (var i = 0; i < self.rowConditions.length; i++) {\r\n\t\t\t\tif (self.rowConditions[i] == conditionIndex) { self.rowConditions.splice(i, 1); }\r\n\t\t\t}\r\n\t\t\tfor (var i = 0; i < self.colConditions.length; i++) {\r\n\t\t\t\tif (self.colConditions[i] == conditionIndex) { self.colConditions.splice(i, 1); }\r\n\t\t\t}\r\n\r\n\t\t\t\r\n\t\t\tself.onDragundDropEventHandle(conditionIndex, \"pages\", self.filterIndexes.indexOf(conditionIndex)) //call event\r\n\r\n\t\t\tself.DiseablePivot();\r\n\t\t\tsetTimeout(function () {\r\n\t\t\t\t\r\n\t\t\t\t\tself.getDataForPivot(self.UcId, 1, self.rowsPerPage, true, self.conditions[conditionIndex].dataField, { op: \"all\", value: \"\", dim: conditionIndex }, \"\", \"\")\r\n\t\t\t\t\r\n\t\t\t\tself.EneablePivot();\r\n\t\t\t}, 200)\r\n\t\t\treturn;\r\n\r\n\r\n\r\n\t\t}\r\n\r\n\t\tthis.getClickReference = function (cond, dimensionNumber, contentDiv) {\r\n\t\t\tvar anchorRef = OAT.Anchor.assign(contentDiv, {\r\n\t\t\t\ttitle: \" \",\r\n\t\t\t\tcontent: self.propPage,\r\n\t\t\t\tresult_control: false,\r\n\t\t\t\tactivation: \"click\",\r\n\t\t\t\ttype: OAT.WinData.TYPE_RECT,\r\n\t\t\t\twidth: \"auto\",\r\n\t\t\t\tcontainerQuery: self.IdForQueryViewerCollection + \"-pivottable\" /*+qv.util.GetContainerControlClass(self.QueryViewerCollection[self.IdForQueryViewerCollection]) */+ \" FilterPopup \"\r\n\t\t\t});\r\n\r\n\t\t\tjQuery(contentDiv).data('anchorRef', anchorRef);\r\n\r\n\t\t\t/*var refresh = function () {\r\n\t\t\t\tself.propPage._Instant_hide();\r\n\t\t\t\tself.go(false);\r\n\t\t\t}*/\r\n\t\t\treturn [function (event) {\r\n\t\t\t\t\r\n\t\t\t\t\tif (self.conditions[dimensionNumber].previousPage == undefined) {\r\n\t\t\t\t\t\tself.initValueRead(self, dimensionNumber, self.stateLoad, self.conditions[dimensionNumber].dataField);\r\n\t\t\t\t\t\tjQuery(\".oat_winrect_container\").css({ left:  \"-10000000px\", top: \"-10000000px\" })\r\n\t\t\t\t\t\tvar clickEvent = jQuery.extend(true, {}, event);\r\n\t\t\t\t\t\tvar wait = function(){\r\n\t\t\t\t\t\t\tif (self.conditions[dimensionNumber].previousPage == undefined) {\r\n\t\t\t\t\t\t\t\tsetTimeout( wait , 100)\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tself.ShowPopUp(cond, dimensionNumber, clickEvent);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\twait();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tself.ShowPopUp(cond, dimensionNumber, event);\r\n\t\t\t\t\t}\r\n\t\t\t\t\r\n\r\n\t\t\t}, anchorRef]\r\n\t\t}\r\n\r\n\t\tthis.ShowPopUp = function (cond, dimensionNumber, event) {\r\n\r\n\t\t\tvar refresh = function () {\r\n\t\t\t\tjQuery(\".oat_winrect_container\").css({ display: \"none\" });\r\n\t\t\t}\r\n\t\t\tvar eventDiv;\r\n\t\t\tvar coords;\r\n\t\t\tif (event.currentTarget != undefined) {\r\n\t\t\t\teventDiv = event.currentTarget;\r\n\t\t\t\tcoords = OAT.Dom.eventPos(event);\r\n\t\t\t} else {\r\n\t\t\t\teventDiv = event[2]\r\n\t\t\t\tcoords = [event[0], event[1]]\r\n\t\t\t}\r\n\t\t\tvar toAppend = [];\r\n\r\n\t\t\tself.propPage.style.left = coords[0] + \"px\";\r\n\t\t\tself.propPage.style.top = coords[1] + \"px\";\r\n\r\n\r\n\t\t\tif (self.isSD) { //android\r\n\t\t\t\tjQuery(\".oat_winrect_container\").css({ left: \"-1500px\", top: jQuery(eventDiv).offset().top + \"px\" })\r\n\t\t\t\tjQuery(\".oat_winrect_container\").addClass(\"oat_winrect_container_small\")\r\n\t\t\t} else {\r\n\t\t\t\tjQuery(\".oat_winrect_container\").css({ left: jQuery(eventDiv).offset().left + \"px\", top: jQuery(eventDiv).offset().top + \"px\" })\r\n\t\t\t}\r\n\r\n\t\t\tself.propPage.setAttribute('id', 'pop-up');\r\n\t\t\tself.propPage.setAttribute('class', 'oat_pop-up');\r\n\t\t\tOAT.Dom.clear(self.propPage);\r\n\t\t\ttoAppend.push(self.propPage);\r\n\t\t\t/* contents */\r\n\r\n\r\n\t\t\tjQuery(\".oat_winrect_title\").find(\".winrect_title_label\").remove()\r\n\r\n\t\t\tvar spantitle = OAT.Dom.create(\"label\");\r\n\t\t\tif (self.isSD) {\r\n\t\t\t\tspantitle.setAttribute(\"class\", \"winrect_title_label winrect_title_label_small\");\r\n\t\t\t} else {\r\n\t\t\t\tspantitle.setAttribute(\"class\", \"winrect_title_label\");\r\n\t\t\t}\r\n\t\t\tOAT.addTextNode(spantitle, self.columns[dimensionNumber].getAttribute(\"displayName\"));\r\n\t\t\tjQuery(\".oat_winrect_title\").append(spantitle)\r\n\r\n\r\n\t\t\tif (!disableColumnSort) {\r\n\t\t\t\tvar div_order = document.createElement(\"div\");\r\n\t\t\t\tdiv_order.setAttribute(\"class\", \"first_popup_subdiv\");\r\n\r\n\t\t\t\tvar asc = OAT.Dom.radio(\"order\");\r\n\t\t\t\tvar ascForId = \"pivot_order_asc\" + \"_\" + self.containerName + \"_\" + self.columns[dimensionNumber].getAttribute(\"dataField\");\r\n\t\t\t\tasc.id = ascForId;\r\n\t\t\t\tasc.className = \"input_radio_popup\"\r\n\t\t\t\tOAT.Dom.attach(asc, \"change\", function () {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tvar datastr = \"<DATA event=\\\"OrderChanged\\\" name=\\\"\" + self.columns[dimensionNumber].getAttribute(\"name\") + \"\\\" displayName=\\\"\" + self.columns[dimensionNumber].getAttribute(\"displayName\") + \"\\\"  order=\\\"ascending\\\">\"\r\n\t\t\t\t\t\tdatastr = datastr + \"</DATA>\"\r\n\t\t\t\t\t\t//if (qv.util.isGeneXusPreview())\r\n\t\t\t\t\t\t//\twindow.external.SendText(self.QueryViewerCollection[self.IdForQueryViewerCollection].ControlName, datastr);\r\n\t\t\t\t\t} catch (error) { }\r\n\r\n\t\t\t\t\t\r\n\t\t\t\t\t\tcond.sort = 1; self.stateChanged = true;\r\n\t\t\t\t\t\tself.getDataForPivot(self.UcId, 1, self.rowsPerPage, true, cond.dataField, \"\", \"\", \"\")\r\n\t\t\t\t\t\tvar idI = \"i_\" + this.getAttribute(\"id\");\r\n\t\t\t\t\t\tvar inputAsc = document.getElementById(idI);\r\n\t\t\t\t\t\tinputAsc.textContent = \"radio_button_checked\";\r\n\t\t\t\t\t\tvar inputDsc = document.getElementById(idI.replace(\"asc\", \"desc\"));\r\n\t\t\t\t\t\tinputDsc.textContent = \"radio_button_unchecked\";\r\n\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\r\n\t\t\t\t\t\r\n\t\t\t\t});\r\n\t\t\t\tdiv_order.appendChild(asc);\r\n\r\n\t\t\t\tvar IStyle = OAT.isIE() ? \"top:-10px;\" : \"\"; \r\n\r\n\t\t\t\tvar alabel = OAT.Dom.create(\"label\");\r\n\t\t\t\talabel.className = \"first_div_label\";\r\n\t\t\t\talabel.htmlFor = ascForId;\r\n\t\t\t\tdiv_order.appendChild(alabel);\r\n\t\t\t\tdiv_order.appendChild(OAT.Dom.create(\"br\"));\r\n\t\t\t\tOAT.addImageNode(alabel, (cond.sort == 1)?\"radio_button_checked\":\"radio_button_unchecked\", IStyle, \"i_\"+ascForId);\r\n\t\t\t\tOAT.addTextNode(alabel,self.translations.GXPL_QViewerJSAscending /*gx.getMessage(\"GXPL_QViewerJSAscending\")*/)\r\n\t\t\t\t\r\n\t\t\t\tvar desc = OAT.Dom.radio(\"order\");\r\n\t\t\t\tvar dscForId = \"pivot_order_desc\" + \"_\" + self.containerName + \"_\" + self.columns[dimensionNumber].getAttribute(\"dataField\");\r\n\t\t\t\tdesc.id = dscForId;\r\n\t\t\t\tdesc.className = \"input_radio_popup\"\r\n\t\t\t\tOAT.Dom.attach(desc, \"change\", function () {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tvar datastr = \"<DATA event=\\\"OrderChanged\\\" name=\\\"\" + self.columns[dimensionNumber].getAttribute(\"name\") + \"\\\" displayName=\\\"\" + self.columns[dimensionNumber].getAttribute(\"displayName\") + \"\\\"  order=\\\"descending\\\">\"\r\n\t\t\t\t\t\tdatastr = datastr + \"</DATA>\"\r\n\t\t\t\t\t\t//if (qv.util.isGeneXusPreview())\r\n\t\t\t\t\t\t//\twindow.external.SendText(self.QueryViewerCollection[self.IdForQueryViewerCollection].ControlName, datastr);\r\n\t\t\t\t\t} catch (error) { }\r\n\r\n\r\n\t\t\t\t\t\r\n\t\t\t\t\t\tcond.sort = -1; self.stateChanged = true;\r\n\t\t\t\t\t\tself.getDataForPivot(self.UcId, 1, self.rowsPerPage, true, cond.dataField, \"\", \"\", \"\")\r\n\t\t\t\t\t\tvar idI = \"i_\" + this.getAttribute(\"id\");\r\n\t\t\t\t\t\tvar inputDsc = document.getElementById(idI);\r\n\t\t\t\t\t\tinputDsc.textContent = \"radio_button_checked\";\r\n\t\t\t\t\t\tvar inputAsc = document.getElementById(idI.replace(\"desc\", \"asc\"));\r\n\t\t\t\t\t\tinputAsc.textContent = \"radio_button_unchecked\";\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t});\r\n\t\t\t\tdiv_order.appendChild(desc);\r\n\r\n\t\t\t\tvar dlabel = OAT.Dom.create(\"label\");\r\n\t\t\t\tdlabel.className = \"first_div_label\";\r\n\t\t\t\tdlabel.htmlFor = dscForId;\r\n\t\t\t\tdiv_order.appendChild(dlabel);\r\n\t\t\t\tOAT.addImageNode(dlabel, (cond.sort == 1)?\"radio_button_unchecked\":\"radio_button_checked\", IStyle, \"i_\"+dscForId);\r\n\t\t\t\tOAT.addTextNode(dlabel, self.translations.GXPL_QViewerJSDescending /*gx.getMessage(\"GXPL_QViewerJSDescending\")*/)\r\n\t\t\t\t\r\n\r\n\t\t\t\ttoAppend.push(div_order);\r\n\r\n\t\t\t\tvar hr1 = OAT.Dom.create(\"hr\", {});\r\n\t\t\t\ttoAppend.push(hr1);\r\n\t\t\t}\r\n\r\n\t\t\tvar hr2 = OAT.Dom.create(\"hr\", {});\r\n\t\t\tvar hr4 = OAT.Dom.create(\"hr\", {});\r\n\r\n\t\t\tif (((cond.hideSubtotalOption === undefined) || (!cond.hideSubtotalOption))\r\n\t\t\t\t&& ((!self.autoPaging) || (self.colConditions.length == 0))\r\n\t\t\t) {\r\n\t\t\t\tvar subtotals = OAT.Dom.create(\"div\");\r\n\t\t\t\tif (disableColumnSort) {\r\n\t\t\t\t\tsubtotals.setAttribute(\"class\", \"first_popup_subdiv\");\r\n\t\t\t\t}\r\n\t\t\t\tvar subtotal_sel_div = document.createElement(\"div\");\r\n\t\t\t\tvar class_check_div = (cond.subtotals) ? \"check_item_img\" : \"uncheck_item_img\";\r\n\t\t\t\tif (self.isSD) { //android\r\n\t\t\t\t\tvar class_check_div = (cond.subtotals) ? \"check_item_img_small\" : \"uncheck_item_img_small\";\r\n\t\t\t\t}\r\n\t\t\t\tsubtotal_sel_div.setAttribute(\"class\", class_check_div);\r\n\t\t\t\tOAT.Dom.attach(subtotal_sel_div, \"click\", function () {\r\n\t\t\t\t\tvar checkedClass = \"check_item_img\"\r\n\t\t\t\t\tvar unCheckedClass = \"uncheck_item_img\"\r\n\t\t\t\t\tif (self.isSD) { //android\r\n\t\t\t\t\t\tcheckedClass = \"check_item_img_small\"\r\n\t\t\t\t\t\tunCheckedClass = \"uncheck_item_img_small\"\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tcond.subtotals = !(this.getAttribute(\"class\") === checkedClass);\r\n\t\t\t\t\tvar newClass = (this.getAttribute(\"class\") === checkedClass) ? unCheckedClass : checkedClass;\r\n\t\t\t\t\tthis.setAttribute(\"class\", newClass);\r\n\t\t\t\t\tjQuery(this).find(\"i\")[0].textContent = cond.subtotals ? \"check_box\" : \"check_box_outline_blank\";\r\n\t\t\t\t\tself.stateChanged = true;\r\n\t\t\t\t\t\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tvar datastr = \"<DATA event=\\\"SubtotalsChanged\\\" name=\\\"\" + self.columns[dimensionNumber].getAttribute(\"name\") + \"\\\" displayName=\\\"\" + self.columns[dimensionNumber].getAttribute(\"displayName\") + \"\\\"  subtotals=\\\"\" + cond.subtotals + \"\\\">\"\r\n\t\t\t\t\t\tdatastr = datastr + \"</DATA>\"\r\n\t\t\t\t\t\t//if (qv.util.isGeneXusPreview())\r\n\t\t\t\t\t\t//\twindow.external.SendText(self.QueryViewerCollection[self.IdForQueryViewerCollection].ControlName, datastr);\r\n\t\t\t\t\t} catch (error) { }\r\n\r\n\t\t\t\t\t\r\n\t\t\t\t\tself.getDataForPivot(self.UcId, 1, self.rowsPerPage, true, cond.dataField, \"\", \"\", \"\")\r\n\t\t\t\t\t\r\n\t\t\t\t});\r\n\r\n\t\t\t\tvar sl = OAT.Dom.create(\"label\");\r\n\t\t\t\t\r\n\t\t\t\tOAT.addImageNode(sl, cond.subtotals ? \"check_box\" : \"check_box_outline_blank\", \"\");\r\n\t\t\t\t\r\n\t\t\t\tOAT.addTextNode(sl, self.translations.GXPL_QViewerJSSubtotals/*gx.getMessage(\"GXPL_QViewerJSSubtotals\")*/)\r\n\t\t\t\tsl.htmlFor = \"pivot_checkbox_subtotals\";\r\n\t\t\t\tsubtotal_sel_div.appendChild(sl);\r\n\t\t\t\tOAT.Dom.append([subtotals, subtotal_sel_div]);\r\n\t\t\t\ttoAppend.push(subtotals);\r\n\t\t\t\ttoAppend.push(hr2);\r\n\t\t\t}\r\n\r\n\t\t\tif ((self.stateChanged) || (self.pivotStateChanged())) {\r\n\t\t\t\tvar restoreview = OAT.Dom.create(\"div\");\r\n\t\t\t\tvar restoreview_sel_div = document.createElement(\"div\");\r\n\r\n\t\t\t\tOAT.Dom.attach(restoreview_sel_div, \"click\", function () {\r\n\t\t\t\t\t\tself.cleanStateWhenServerPagination();\r\n\t\t\t\t\t\tself.getDataForPivot(self.UcId, 1, self.rowsPerPage, true, cond.dataField, \"\", \"\", \"\")\r\n\t\t\t\t\t\trefresh(); self.stateChanged = false;\r\n\t\t\t\t\t\r\n\t\t\t\t});\r\n\r\n\r\n\t\t\t\tvar rl = OAT.Dom.create(\"label\");\r\n\t\t\t\tOAT.addTextNode(rl, self.translations.GXPL_QViewerJSRestoreDefaultView /*gx.getMessage(\"GXPL_QViewerJSRestoreDefaultView\")*/)\r\n\t\t\t\trl.setAttribute(\"id\", \"restore_default_view\");\r\n\t\t\t\trl.htmlFor = \"pivot_checkbox_restoreview\";\r\n\t\t\t\trl.setAttribute(\"class\", \"pivot_checkbox_restoreview\");\r\n\t\t\t\trestoreview_sel_div.appendChild(rl);\r\n\t\t\t\tOAT.Dom.append([restoreview, restoreview_sel_div]);\r\n\t\t\t\ttoAppend.push(restoreview);\r\n\t\t\t}\r\n\r\n\t\t\tvar appendActionsSeparator = false;\r\n\r\n\t\t\t/* for pivoting purpuses*/\r\n\t\t\tif (measures.length > 0) {\r\n\t\t\t\tvar pivotpurp = OAT.Dom.create(\"div\");\r\n\t\t\t\tvar pivotpurp_sel_div = document.createElement(\"div\");\r\n\r\n\t\t\t\tOAT.Dom.attach(pivotpurp_sel_div, \"click\", function () {\r\n\t\t\t\t\t\r\n\t\t\t\t\t\tself.stateChanged = true;\r\n\t\t\t\t\t\tself.changedFromColumnToRow(dimensionNumber);\r\n\t\t\t\t\t\tself.getDataForPivot(self.UcId, 1, self.rowsPerPage, true, cond.dataField, \"\", \"\", \"\")\r\n\t\t\t\t\t\trefresh();\r\n\t\t\t\t\t\r\n\t\t\t\t});\r\n\r\n\t\t\t\tvar pvpl = OAT.Dom.create(\"label\");\r\n\t\t\t\tif (self.rowConditions.indexOf(dimensionNumber) != -1)\r\n\t\t\t\t\tOAT.addTextNode(pvpl, self.translations.GXPL_QViewerJSPivotDimensionToColumn /*gx.getMessage(\"GXPL_QViewerJSPivotDimensionToColumn\")*/)\r\n\t\t\t\telse\r\n\t\t\t\t\tOAT.addTextNode(pvpl, self.translations.GXPL_QViewerJSPivotDimensionToRow /*gx.getMessage(\"GXPL_QViewerJSPivotDimensionToRow\")*/)\r\n\r\n\t\t\t\tpvpl.htmlFor = \"pivot_checkbox_restoreview\";\r\n\t\t\t\tpvpl.setAttribute(\"class\", \"pivot_checkbox_restoreview\");\r\n\t\t\t\tpvpl.setAttribute(\"id\", \"move_to_column\");\r\n\r\n\t\t\t\tpivotpurp_sel_div.appendChild(pvpl);\r\n\t\t\t\tOAT.Dom.append([pivotpurp, pivotpurp_sel_div]);\r\n\t\t\t\ttoAppend.push(pivotpurp);\r\n\t\t\t\tappendActionsSeparator = true;\r\n\t\t\t}\r\n\t\t\t/* end pivoting option*/\r\n\r\n\t\t\t/*for Ipad & Iphone move to top filter*/\r\n\t\t\tif (measures.length > 0) {\r\n\t\t\t\t\r\n\t\t\t\tif (OAT.isSD()) {\r\n\t\t\t\t\tif (self.filterIndexes.indexOf(dimensionNumber) === -1) {\r\n\t\t\t\t\t\tvar Ipadpurp = OAT.Dom.create(\"div\");\r\n\t\t\t\t\t\tvar Ipadpurp_sel_div = document.createElement(\"div\");\r\n\r\n\r\n\t\t\t\t\t\tOAT.Dom.attach(Ipadpurp_sel_div, \"click\", function () {\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tself.getOrderReferenceProg(dimensionNumber);\r\n\t\t\t\t\t\t\t\trefresh();\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tvar ippl = OAT.Dom.create(\"label\");\r\n\t\t\t\t\t\tOAT.addTextNode(ippl, self.translations.GXPL_QViewerJSMoveToFilterBar /*gx.getMessage(\"GXPL_QViewerJSMoveToFilterBar\")*/)\r\n\t\t\t\t\t\tippl.htmlFor = \"pivot_checkbox_movetocolumn\";\r\n\t\t\t\t\t\tIpadpurp_sel_div.appendChild(ippl);\r\n\r\n\t\t\t\t\t\tOAT.Dom.append([Ipadpurp, Ipadpurp_sel_div]);\r\n\t\t\t\t\t\ttoAppend.push(Ipadpurp);\r\n\t\t\t\t\t\tappendActionsSeparator = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t/*end move to top filter*/\r\n\r\n\t\t\tif (appendActionsSeparator)\r\n\t\t\t\ttoAppend.push(hr4);\r\n\r\n\t\t\tvar distinct = OAT.Dom.create(\"div\");\r\n\t\t\tdistinct.setAttribute(\"class\", \"last_div_popup\");\r\n\t\t\tvar br1, br2, br3;\r\n\t\t\tif (!OAT.isIE()) {\r\n\t\t\t\tbr1 = OAT.Dom.create(\"br\"); var br2 = OAT.Dom.create(\"br\"); var br3 = OAT.Dom.create(\"br\");\r\n\t\t\t} else {\r\n\t\t\t\tbr1 = OAT.Dom.create(\"span\"); var br2 = OAT.Dom.create(\"span\"); var br3 = OAT.Dom.create(\"span\");\r\n\t\t\t}\r\n\t\t\ttoAppend.push(distinct);\r\n\r\n\t\t\tOAT.Dom.append(toAppend);\r\n\r\n\t\t\tself.distinctDivs(cond, distinct, dimensionNumber);\r\n\r\n\t\t\tif (!disableColumnSort) {\r\n\t\t\t\t/* this needs to be here because of IE :/ */\r\n\t\t\t\tasc.checked = (cond.sort == 1) || (cond.sort == 0);\r\n\t\t\t\tasc.__checked = asc.checked;\r\n\t\t\t\tdesc.checked = (cond.sort == -1) || (cond.sort == 2);\r\n\t\t\t\tdesc.__checked = desc.checked;\r\n\t\t\t}\r\n\r\n\r\n\t\t\t//for smart device center pop-up\r\n\t\t\tif (self.isSD) {//android\r\n\t\t\t\tsetTimeout(function () {\r\n\r\n\t\t\t\t\tvar screenWidth = window.innerWidth;\r\n\t\t\t\t\tvar initialPopUpWidth = jQuery(\".oat_winrect_container\")[0].clientWidth\r\n\r\n\r\n\t\t\t\t\tif (initialPopUpWidth == 0) {\r\n\t\t\t\t\t\tvar last = jQuery(\".oat_winrect_container\").length;\r\n\t\t\t\t\t\tinitialPopUpWidth = jQuery(\".oat_winrect_container\")[last - 1].clientWidth\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\tif (initialPopUpWidth < 245) {\r\n\t\t\t\t\t\tinitialPopUpWidth = 245\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar padding = (screenWidth - initialPopUpWidth) / 2 + jQuery(window).scrollLeft()\r\n\r\n\t\t\t\t\tjQuery(\".oat_winrect_container\").css({ left: padding + \"px\", width: initialPopUpWidth + \"px\" })\r\n\r\n\r\n\t\t\t\t}, 50)\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tthis.updateRowConditions = function(dimensionNumber, measures, fromFilters){\r\n\t\t\tvar addCol = false\r\n\t\t\tvar unhiddenDim = self.initRowConditions.length + self.initColConditions.length <= self.rowConditions.length + self.colConditions.length\r\n\t\t\tif (unhiddenDim) addCol = true;\r\n\t\t\t\r\n\t\t\tvar tempRowConditions = [];\r\n\t\t\tfor (var nI = 0; nI < self.initRowConditions.length - (measures.length - 1); nI++) {\r\n\t\t\t\tif (self.initRowConditions[nI] == dimensionNumber) {\r\n\t\t\t\t\ttempRowConditions.push(dimensionNumber)\r\n\t\t\t\t}\r\n\t\t\t\tif (self.rowConditions.indexOf(self.initRowConditions[nI]) > -1) {\r\n\t\t\t\t\ttempRowConditions.push(self.initRowConditions[nI])\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfor (var nI = 0; nI < self.initColConditions.length; nI++) {\r\n\t\t\t\tif (self.initColConditions[nI] == dimensionNumber) {\r\n\t\t\t\t\ttempRowConditions.push(dimensionNumber)\r\n\t\t\t\t}\r\n\t\t\t\tif (self.rowConditions.indexOf(self.initColConditions[nI]) > -1) {\r\n\t\t\t\t\ttempRowConditions.push(self.initColConditions[nI])\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfor (var nI = 0; nI < self.initFilterIndexes.length; nI++) {\r\n\t\t\t\tif ((self.initFilterIndexes[nI] == dimensionNumber) && (tempRowConditions.indexOf(dimensionNumber) == -1)){ \r\n\t\t\t\t\ttempRowConditions.push(dimensionNumber)\r\n\t\t\t\t}\r\n\t\t\t\tif (self.rowConditions.indexOf(self.initFilterIndexes[nI]) > -1) {\r\n\t\t\t\t\tif (tempRowConditions.indexOf(self.initFilterIndexes[nI]) == -1)\r\n\t\t\t\t\t\ttempRowConditions.push(self.initFilterIndexes[nI])\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (tempRowConditions.indexOf(dimensionNumber) < 0) {\r\n\t\t\t\t\ttempRowConditions.push(dimensionNumber)\r\n\t\t\t}\r\n\t\t\tif (addCol) {\r\n\t\t\t\tfor (var nO = 0; nO < self.rowConditions.length; nO++){\r\n\t\t\t\t\tif (tempRowConditions.indexOf(self.rowConditions[nO]) < 0)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttempRowConditions.push(self.rowConditions[nO])\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\ttempRowConditions.sort((function () {\r\n\t\t\t\treturn function (a, b) {\r\n\t\t\t\t\treturn (a == b ? 0 : (a < b ? -1 : 1));\r\n\t\t\t\t};\r\n\t\t\t})(0));\r\n\t\t\tfor (var nI = self.initRowConditions.length - (measures.length - 1); nI < Math.min(self.initRowConditions.length , self.dataColumnIndex); nI++) {\r\n\t\t\t\tif (tempRowConditions.indexOf(self.initRowConditions[nI]) < 0)\r\n\t\t\t\t\ttempRowConditions.push(self.initRowConditions[nI])\r\n\t\t\t}\r\n\r\n\t\t\tself.rowConditions = [];\r\n\t\t\tfor (var nI = 0; nI < tempRowConditions.length; nI++) {\r\n\t\t\t\tself.rowConditions[nI] = tempRowConditions[nI];\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tthis.changedFromColumnToRow = function (dimensionNumber) {\r\n\r\n\t\t\tvar index = self.rowConditions.indexOf(dimensionNumber);\r\n\t\t\tvar axis = \"columns\";\r\n\t\t\tvar position = 0;\r\n\t\t\tif (index != -1) { //when move to row\r\n\t\t\t\tself.rowConditions.splice(index, 1);\r\n\t\t\t\tif (measures.length > 1)\r\n\t\t\t\t\tself.colConditions = [dimensionNumber].concat(self.colConditions);\r\n\t\t\t\telse\r\n\t\t\t\t\tself.colConditions.push(dimensionNumber);\r\n\t\t\t\tposition = self.colConditions.indexOf(dimensionNumber);\r\n\t\t\t} else {\r\n\t\t\t\t\r\n\t\t\t\t\taxis = \"rows\";\r\n\t\t\t\t\tindex = self.colConditions.indexOf(dimensionNumber);\r\n\t\t\t\t\tself.colConditions.splice(index, 1);\r\n\t\t\t\t\t\r\n\t\t\t\t\tself.updateRowConditions(dimensionNumber, measures, false);\r\n\t\t\t\t\tposition = self.rowConditions.indexOf(dimensionNumber);\r\n\t\t\t\t\r\n\t\t\t}\r\n\r\n\t\t\tself.onDragundDropEventHandle(dimensionNumber, axis, position);\r\n\t\t}\r\n\r\n\t\t\r\n\r\n\t\tthis.getDelFilterReference = function (index) {\r\n\t\t\treturn function () {\r\n\t\t\t\tvar idx = self.filterIndexes.indexOf(index);\r\n\t\t\t\tif (idx != -1) {\r\n\t\t\t\t\tself.filterIndexes.splice(idx, 1);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tself.updateRowConditions(index, measures, true);\r\n\t\t\t\t\r\n\t\t\t\tfor (var ifs = 0; ifs < self.filterDiv.selects.length; ifs++) {\r\n\t\t\t\t\tif (index == self.filterDiv.selects[ifs].filterIndex) {\r\n\t\t\t\t\t\tself.filterDiv.selects.splice(ifs, 1);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tself.stateChanged = true\r\n\t\t\t\t\r\n\t\t\t\tself.onDragundDropEventHandle(index, \"rows\", self.rowConditions.indexOf(index))\r\n\r\n\t\t\t\tself.DiseablePivot();\r\n\t\t\t\tsetTimeout(function () {\r\n\t\t\t\t\t\r\n\t\t\t\t\t\tself.conditions[index].topFilterValue = \"[all]\"\r\n\t\t\t\t\t\tself.getDataForPivot(self.UcId, 1, self.rowsPerPage, true, self.conditions[index].dataField, { op: \"all\", values: \"\", dim: index }, \"\", \"\")\r\n\t\t\t\t\t\r\n\t\t\t\t\tself.EneablePivot();\r\n\t\t\t\t}, 200)\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.valueIsShowed = function (value, dimensionNumber) {\r\n\t\t\t\r\n\t\t\t\tif (self.conditions[dimensionNumber].state == \"all\") {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t} else if (self.conditions[dimensionNumber].state == \"none\") {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t} else if (self.conditions[dimensionNumber].blackList.indexOf(value) != -1) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t} else if (self.conditions[dimensionNumber].distinctValues.indexOf(value) != -1) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t} else if (self.conditions[dimensionNumber].defaultAction == \"Exclude\") {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\r\n\t\tthis.distinctDivs = function (cond, div, dimensionNumber, allFilters) { /* set of distinct values checkboxes */\r\n\t\t\tvar getPair = function (text, id) {\r\n\t\t\t\tvar div = OAT.Dom.create(\"div\");\r\n\r\n\t\t\t\tvar checkedClass = \"check_item_img\"\r\n\t\t\t\tvar unCheckedClass = \"uncheck_item_img\"\r\n\t\t\t\tif (self.isSD) {//android\r\n\t\t\t\t\tcheckedClass = \"check_item_img_small\"\r\n\t\t\t\t\tunCheckedClass = \"uncheck_item_img_small\"\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tOAT.addImageNode(div, self.valueIsShowed(value, dimensionNumber) ? \"check_box\" : \"check_box_outline_blank\", \"\");\r\n\r\n\t\t\t\tvar class_check_div = (cond.blackList.indexOf(value) == -1) && self.valueIsShowed(value, dimensionNumber) ? checkedClass : unCheckedClass;\r\n\t\t\t\t\r\n\t\t\t\t\tvar class_check_div = self.valueIsShowed(value, dimensionNumber) ? checkedClass : unCheckedClass;\r\n\t\t\t\t\r\n\t\t\t\tdiv.setAttribute(\"class\", class_check_div);\r\n\t\t\t\tvar ch = OAT.Dom.create(\"input\");\r\n\t\t\t\tch.type = \"checkbox\";\r\n\t\t\t\tch.id = id;\r\n\t\t\t\tvar t = OAT.Dom.create(\"label\");\r\n\t\t\t\tOAT.addTextNode(t, text)\r\n\t\t\t\tt.htmlFor = id;\r\n\t\t\t\tdiv.appendChild(t);\r\n\t\t\t\treturn [div, ch];\r\n\t\t\t}\r\n\r\n\r\n\t\t\tvar getRefBool = function (checked, value) {\r\n\r\n\r\n\t\t\t\tsetTimeout(function () {\r\n\r\n\t\t\t\t\t\tvar oper = \"pop\";\r\n\t\t\t\t\t\tif (!checked) {\r\n\t\t\t\t\t\t\toper = \"push\";\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tself.getDataForPivot(self.UcId, 1, self.rowsPerPage, true, self.conditions[dimensionNumber].dataField, { op: oper, values: value, dim: dimensionNumber }, \"\", \"\")\r\n\r\n\t\t\t\t\t\tself.stateChanged = true;\r\n\t\t\t\t\t\tself.onFilteredChangedEventHandleWhenServerPagination(dimensionNumber);\r\n\t\t\t\t\t\tself.EneablePivot();\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t}, 200);\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar allRef = function () {\r\n\t\t\t\tself.DiseablePivot();\r\n\r\n\t\t\t\tsetTimeout(function () {\r\n\r\n\r\n\t\t\t\t\t\r\n\t\t\t\t\t\tvar oper = \"all\";\r\n\t\t\t\t\t\t\r\n\r\n\t\t\t\t\t\tself.getDataForPivot(self.UcId, 1, self.rowsPerPage, true, self.conditions[dimensionNumber].dataField, { op: oper, values: \"\", dim: dimensionNumber }, \"\", \"\")\r\n\r\n\t\t\t\t\t\tself.stateChanged = true;\r\n\t\t\t\t\t\tself.onFilteredChangedEventHandleWhenServerPagination(dimensionNumber);\r\n\t\t\t\t\t\tself.distinctDivs(cond, div, dimensionNumber);\r\n\t\t\t\t\t\tself.EneablePivot();\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\r\n\r\n\t\t\t\t\t\r\n\t\t\t\t}, 200)\r\n\t\t\t}\r\n\r\n\t\t\tvar noneRef = function () {\r\n\t\t\t\tself.DiseablePivot()\r\n\r\n\t\t\t\tsetTimeout(function () {\r\n\t\t\t\t\t\r\n\t\t\t\t\t\tvar oper = \"none\";\r\n\t\t\t\t\t\t\r\n\r\n\t\t\t\t\t\tself.getDataForPivot(self.UcId, 1, self.rowsPerPage, true, self.conditions[dimensionNumber].dataField, { op: oper, values: \"\", dim: dimensionNumber }, \"\", \"\")\r\n\r\n\t\t\t\t\t\tself.stateChanged = true;\r\n\t\t\t\t\t\tself.onFilteredChangedEventHandleWhenServerPagination(dimensionNumber);\r\n\t\t\t\t\t\tself.distinctDivs(cond, div, dimensionNumber);\r\n\t\t\t\t\t\tself.EneablePivot();\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t}, 200)\r\n\t\t\t}\r\n\r\n\t\t\tvar reverseRef = function () {\r\n\t\t\t\tself.DiseablePivot();\r\n\r\n\t\t\t\tsetTimeout(function () {\r\n\t\t\t\t\t\r\n\t\t\t\t\t\tvar oper = \"reverse\";\r\n\t\t\t\t\t\tself.getDataForPivot(self.UcId, 1, self.rowsPerPage, true, self.conditions[dimensionNumber].dataField, { op: oper, values: \"\", dim: dimensionNumber }, \"\", \"\")\r\n\r\n\t\t\t\t\t\tself.stateChanged = true;\r\n\t\t\t\t\t\tself.onFilteredChangedEventHandleWhenServerPagination(dimensionNumber);\r\n\t\t\t\t\t\tself.distinctDivs(cond, div, dimensionNumber);\r\n\t\t\t\t\t\tself.EneablePivot();\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\r\n\r\n\t\t\t\t\t\r\n\t\t\t\t}, 200)\r\n\t\t\t}\r\n\r\n\t\t\tvar searchFilterClick = function () {\r\n\t\t\t\tself.getValuesForColumn(self.UcId, dimensionNumber, this.value)\r\n\t\t\t}\r\n\r\n\t\t\tOAT.Dom.clear(div);\r\n\t\t\tvar d = OAT.Dom.create(\"div\");\r\n\t\t\td.setAttribute(\"class\", \"div_buttons_popup\");\r\n\t\t\tvar all = document.createElement(\"button\");\r\n\t\t\tall.textContent = self.translations.GXPL_QViewerJSAll; /*gx.getMessage(\"GXPL_QViewerJSAll\");*/\r\n\t\t\tall.setAttribute(\"class\", \"btn\");\r\n\t\t\tjQuery(all).click(allRef);\r\n\r\n\t\t\tvar none = document.createElement(\"button\");\r\n\t\t\tnone.textContent = self.translations.GXPL_QViewerJSNone //gx.getMessage(\"GXPL_QViewerJSNone\");\r\n\t\t\tnone.setAttribute(\"class\", \"btn\");\r\n\t\t\tjQuery(none).click(noneRef);\r\n\r\n\t\t\tvar reverse = document.createElement(\"button\");\r\n\t\t\treverse.textContent = self.translations.GXPL_QViewerJSReverse //gx.getMessage(\"GXPL_QViewerJSReverse\");\r\n\t\t\treverse.setAttribute(\"class\", \"btn\");\r\n\t\t\tjQuery(reverse).click(reverseRef);\r\n\r\n\r\n\t\t\tOAT.Dom.append([d, all, none, reverse], [div, d]);\r\n\r\n\t\t\t\r\n\t\t\t\tvar div_search = OAT.Dom.create(\"div\");\r\n\t\t\t\tdiv_search.setAttribute(\"class\", \"div_filter_input\");\r\n\r\n\t\t\t\t\r\n\t\t\t\t\tvar searchInput = document.createElement(\"input\");\r\n\t\t\t\t\tOAT.addImageNode(div_search, \"search\", \"\");\r\n\t\t\t\t\tsearchInput.textContent = \"none\";\r\n\t\t\t\t\tsearchInput.setAttribute(\"class\", \"search_input\");\r\n\t\t\t\t\tsearchInput.setAttribute(\"type\", \"text\");\r\n\t\t\t\t\tsearchInput.setAttribute(\"label\", self.translations.GXPL_QViewerSearch/*gx.getMessage(\"GXPL_QViewerSearch\")*/);\r\n\t\t\t\t\tsearchInput.setAttribute(\"title\", self.translations.GXPL_QViewerSearch/*gx.getMessage(\"GXPL_QViewerSearch\")*/);\r\n\t\t\t\t\tsearchInput.setAttribute(\"placeholder\", self.translations.GXPL_QViewerSearch /*gx.getMessage(\"GXPL_QViewerSearch\")*/);\r\n\t\t\t\t\tsearchInput.setAttribute(\"id\", self.UcId + dimensionNumber);\r\n\t\t\t\t\tjQuery(searchInput).keyup(searchFilterClick);\r\n\r\n\t\t\t\t\tOAT.Dom.append([div_search, searchInput], [div, div_search]);\r\n\t\t\t\t\r\n\t\t\t\r\n\r\n\t\t\t\r\n\r\n\t\t\t\tvar fixHeigthDiv = OAT.Dom.create(\"div\");\r\n\t\t\t\t\r\n\t\t\t\t\tcond = self.conditions[dimensionNumber]\r\n\t\t\t\t\r\n\t\t\t\tif (cond.distinctValues.length <= 9) {\r\n\t\t\t\t\tfixHeigthDiv.setAttribute(\"class\", \"pivot_popup_auto\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfixHeigthDiv.setAttribute(\"class\", \"pivot_popup_fix\");\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\tfor (var i = 0; i < cond.distinctValues.length; i++) {\r\n\r\n\t\t\t\t\tvar value = cond.distinctValues[i];\r\n\t\t\t\t\tif (!\r\n\t\t\t\t\t\t (\r\n\t\t\t\t\t\t \t (self.conditions[dimensionNumber].hasNull) && \r\n\t\t\t\t\t\t \t (value.trimpivot() == self.defaultPicture.getAttribute(\"textForNullValues\"))\r\n\t\t\t\t\t\t )\r\n\t\t\t\t\t\t) {\r\n\r\n\t\t\t\t\t\tvar pict_value = self.dimensionPictureValue(value, dimensionNumber);\r\n\t\t\t\t\t\tpict_value = pict_value.replace(/\\&amp;/g, \"&\").replace(/\\u00A0/g, \" \")\r\n\t\t\t\t\t\tif (pict_value.length > 33) {\r\n\t\t\t\t\t\t\tvar resto = (pict_value.substring(32, pict_value.length).trimpivot().length > 0) ? '...' : '';\r\n\t\t\t\t\t\t\tpict_value = pict_value.substring(0, 32) + resto\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tpict_value = pict_value.replace(/ /g, \"\\u00A0\") + '\\u00A0\\u00A0\\u00A0\\u00A0\\u00A0'\r\n\t\t\t\t\t\tvar pair = getPair(pict_value, \"pivot_distinct_\" + i);\r\n\t\t\t\t\t\tpair[0].setAttribute('value', value);\r\n\t\t\t\t\t\tfixHeigthDiv.appendChild(pair[0]);\r\n\r\n\r\n\r\n\t\t\t\t\t\tOAT.Dom.attach(pair[0], \"click\", function () {\r\n\t\t\t\t\t\t\tself.DiseablePivot();\r\n\r\n\t\t\t\t\t\t\tvar checkedClass = \"check_item_img\"\r\n\t\t\t\t\t\t\tvar unCheckedClass = \"uncheck_item_img\"\r\n\t\t\t\t\t\t\tif (self.isSD) {//android\r\n\t\t\t\t\t\t\t\tcheckedClass = \"check_item_img_small\"\r\n\t\t\t\t\t\t\t\tunCheckedClass = \"uncheck_item_img_small\"\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tvar checked = !(this.getAttribute(\"class\") === checkedClass);\r\n\t\t\t\t\t\t\tvar newClass = (this.getAttribute(\"class\") === checkedClass) ? unCheckedClass : checkedClass;\r\n\t\t\t\t\t\t\tthis.setAttribute(\"class\", newClass);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tjQuery(this).find(\"i\")[0].textContent = checked ? \"check_box\" : \"check_box_outline_blank\";\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tgetRefBool(checked, this.getAttribute(\"value\"));//this.textContent);            \t\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tfixHeigthDiv.setAttribute(\"ucid\", self.UcId);\r\n\t\t\t\tfixHeigthDiv.setAttribute(\"columnnumber\", dimensionNumber);\r\n\t\t\t\tfixHeigthDiv.setAttribute(\"id\", \"values_\" + self.UcId + \"_\" + dimensionNumber)\r\n\t\t\t\tdiv.appendChild(fixHeigthDiv);\r\n\t\t\t\r\n\t\t}\r\n\r\n\r\n\t\tthis.DiseablePivot = function () {\r\n\t\t\ttry {\r\n\t\t\t\tvar divDis = jQuery('<div class=\"disable_popup\" ></div>');\r\n\r\n\t\t\t\tif (jQuery(\"#\" + self.containerName).length > 0) {\r\n\t\t\t\t\tvar ht = Math.min(jQuery(\"#\" + UcId + \"_\" + self.query + \"_pivot_page\")[0].clientHeight\r\n\t\t\t\t\t\t+ jQuery(\"#\" + UcId + \"_\" + self.query + \"_pivot_content\")[0].clientHeight,\r\n\t\t\t\t\t\tjQuery(\"#\" + self.containerName)[0].clientHeight\r\n\t\t\t\t\t)\r\n\t\t\t\t\tvar wd = Math.min(jQuery(\"#\" + UcId + \"_\" + self.query)[0].clientWidth,\r\n\t\t\t\t\t\tjQuery(\"#\" + self.containerName)[0].clientWidth\r\n\t\t\t\t\t)\r\n\t\t\t\t\tif (jQuery(\"#\" + self.containerName).closest(\".gxwebcomponent\").length > 0) { //for gxQuery\r\n\t\t\t\t\t\tif (jQuery(\"#\" + UcId + \"_\" + self.query + \"_tablePagination\").length > 0) {\r\n\t\t\t\t\t\t\tht = ht + jQuery(\"#\" + UcId + \"_\" + self.query + \"_tablePagination\")[0].clientHeight\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tjQuery(divDis).css({\r\n\t\t\t\t\t\t\t'width': wd,\r\n\t\t\t\t\t\t\t'height': ht,\r\n\t\t\t\t\t\t\t'position': 'absolute',\r\n\t\t\t\t\t\t\t'top': jQuery(\"#\" + self.containerName)[0].offsetTop,//jQuery(\"#\" + self.containerName)[0].offsetTop,\r\n\t\t\t\t\t\t\t'left': jQuery(\"#\" + self.containerName)[0].offsetLeft,\r\n\t\t\t\t\t\t\t'background-color': 'rgba(0,0,0,0.1)',\r\n\t\t\t\t\t\t\t'cursor': 'wait',\r\n\t\t\t\t\t\t\t'z-index': 99\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tjQuery(divDis).css({\r\n\t\t\t\t\t\t\t'width': wd,\r\n\t\t\t\t\t\t\t'height': ht,\r\n\t\t\t\t\t\t\t'position': 'absolute',\r\n\t\t\t\t\t\t\t'top': jQuery(\"#\" + self.containerName)[0].offsetTop,//jQuery(\"#\" + self.containerName).offset().top,//0 \t\r\n\t\t\t\t\t\t\t'left': jQuery(\"#\" + UcId + \"_\" + self.query).offset().left,\r\n\t\t\t\t\t\t\t'background-color': 'rgba(0,0,0,0.1)',\r\n\t\t\t\t\t\t\t'cursor': 'wait',\r\n\t\t\t\t\t\t\t'z-index': 999\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tjQuery(\"#\" + self.containerName).append(divDis)\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar ht = Math.min(jQuery(\"#\" + UcId + \"_\" + self.query).closest(\".gx_usercontrol\").find(\".pivot_filter_div\")[0].clientHeight\r\n\t\t\t\t\t\t+ jQuery(\"#\" + UcId + \"_\" + self.query).closest(\".conteiner_table_div\")[0].clientHeight,\r\n\t\t\t\t\t\tjQuery(\"#\" + UcId + \"_\" + self.query).closest(\".gx_usercontrol\")[0].clientHeight\r\n\t\t\t\t\t)\r\n\r\n\t\t\t\t\tvar wd = Math.min(jQuery(\"#\" + UcId + \"_\" + self.query)[0].clientWidth,\r\n\t\t\t\t\t\tjQuery(\"#\" + UcId + \"_\" + self.query).closest(\".gx_usercontrol\")[0].clientWidth\r\n\t\t\t\t\t)\r\n\r\n\t\t\t\t\tif (jQuery(\"#\" + UcId + \"_\" + self.query).closest(\".gx_usercontrol\").find(\".pivot_pag_div\").length > 0) {\r\n\t\t\t\t\t\tht = ht + jQuery(\"#\" + UcId + \"_\" + self.query).closest(\".gx_usercontrol\").find(\".pivot_pag_div\")[0].clientHeight\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tjQuery(divDis).css({\r\n\t\t\t\t\t\t'width': wd,\r\n\t\t\t\t\t\t'height': ht,\r\n\t\t\t\t\t\t'position': 'absolute',\r\n\t\t\t\t\t\t'top': jQuery(\"#\" + UcId + \"_\" + self.query).closest(\".gx_usercontrol\")[0].offsetTop,\r\n\t\t\t\t\t\t'left': jQuery(\"#\" + UcId + \"_\" + self.query).closest(\".gx_usercontrol\")[0].offsetLeft,\r\n\t\t\t\t\t\t'background-color': 'rgba(0,0,0,0.1)',\r\n\t\t\t\t\t\t'cursor': 'wait',\r\n\t\t\t\t\t\t'z-index': 99\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tjQuery(\"#\" + UcId + \"_\" + self.query).closest(\".gx_usercontrol\").append(divDis)\r\n\t\t\t\t}\r\n\t\t\t\tjQuery(\".oat_winrect_container\").block({ message: null })\r\n\t\t\t} catch (ERROR) { }\r\n\t\t}\r\n\r\n\t\tthis.EneablePivot = function () {\r\n\t\t\tjQuery(\".disable_popup\").remove()\r\n\t\t\twhile (jQuery(\".disable_popup\").length > 0) {\r\n\t\t\t\tjQuery(\".disable_popup\").remove()\r\n\t\t\t}\r\n\t\t\tjQuery(\".oat_winrect_container\").unblock()\r\n\t\t}\r\n\r\n\t\tthis.addExpandCollapseFunctionality = function (th, item, rowConditionNumber, expanded, rowDimension) {\r\n\t\t\tif (true) {\r\n\t\t\t\tvar divImg = OAT.Dom.create(\"div\", {});\r\n\r\n\t\t\t\tif (expanded) {\r\n\t\t\t\t\tdivImg.className += \" expanded\";\r\n\t\t\t\t\tOAT.addImageNode(divImg, \"remove\", \"\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdivImg.className += \" collapsed\";\r\n\t\t\t\t\tOAT.addImageNode(divImg, \"add\", \"\");\r\n\t\t\t\t}\r\n\t\t\t\tth.insertBefore(divImg, th.firstChild);\r\n\t\t\t\tth.style.paddingLeft = \"0px\";\r\n\r\n\t\t\t\tvar spanTxt = jQuery(th).find(\"#span_txt_pivot\")[0]\r\n\r\n\r\n\t\t\t\tif (rowDimension) {\r\n\t\t\t\t\tself.setExpandCollapseEventHandlers(divImg, item.value, \"DIMENSION\", self.rowConditions[rowConditionNumber], item);\r\n\t\t\t\t\tif ((self.QueryViewerCollection[self.IdForQueryViewerCollection].ItemDoubleClick == undefined) &&\r\n\t\t\t\t\t\t(self.QueryViewerCollection[self.IdForQueryViewerCollection].ItemClick == undefined) &&\r\n\t\t\t\t\t\t(!self.selection.Allow)) {\r\n\t\t\t\t\t\tself.setExpandCollapseEventHandlers(spanTxt, item.value, \"DIMENSION\", self.rowConditions[rowConditionNumber], item);\r\n\t\t\t\t\t\tjQuery(spanTxt).css({ cursor: \"pointer\" });\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tself.setExpandCollapseEventHandlers(divImg, item.value, \"DIMENSION\", self.colConditions[rowConditionNumber], item);\r\n\t\t\t\t\tif ((self.QueryViewerCollection[self.IdForQueryViewerCollection].ItemDoubleClick == undefined) &&\r\n\t\t\t\t\t\t(self.QueryViewerCollection[self.IdForQueryViewerCollection].ItemClick == undefined) &&\r\n\t\t\t\t\t\t(!self.selection.Allow)) {\r\n\t\t\t\t\t\tself.setExpandCollapseEventHandlers(spanTxt, item.value, \"DIMENSION\", self.colConditions[rowConditionNumber], item);\r\n\t\t\t\t\t\tjQuery(spanTxt).css({ cursor: \"pointer\" });\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t\treturn th;\r\n\t\t}\r\n\r\n\t\tthis.setClickEventHandlers = function (td, itemValue, MeasureOrDimension, dimensionNumber, itemData) {\r\n\t\t\tif ((!self.ShowMeasuresAsRows) || (self.h < 500)) {\r\n\t\t\t\tvar span = jQuery(td).find(\"#span_txt_pivot\")[0];\r\n\t\t\t\tif (span) {\r\n\t\t\t\t\tjQuery(span).data('itemValue', itemValue);\r\n\t\t\t\t\tjQuery(span).data('typeMorD', MeasureOrDimension);\r\n\t\t\t\t\tjQuery(span).data('numberMorD', dimensionNumber);\r\n\t\t\t\t\tjQuery(span).data('itemInfo', itemData);\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\tjQuery(td).data('itemValue', itemValue);\r\n\t\t\t\t\tjQuery(td).data('typeMorD', MeasureOrDimension);\r\n\t\t\t\t\tjQuery(td).data('numberMorD', dimensionNumber);\r\n\t\t\t\t\tjQuery(td).data('itemInfo', itemData);\r\n\t\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\tvar qViewer = self.QueryViewerCollection[IdForQueryViewerCollection];\r\n\t\t\t\t\tvar raiseItemClick = MeasureOrDimension == \"DIMENSION\" ? qViewer.Metadata.Axes[dimensionNumber].RaiseItemClick : qViewer.Metadata.Data[dimensionNumber].RaiseItemClick;\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (qViewer.ItemClick && raiseItemClick) {\r\n\t\t\t\t\t\tspan.onclick = function () { \r\n\t\t\t\t\t\t\tself.onClickEventHandle(this); \r\n\t\t\t\t\t\t\tif (self.selection.Allow){ \r\n\t\t\t\t\t\t\t\tself.onClickSelectNode(this);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tspan.classList.add(\"gx-qv-clickable-element\")\r\n\t\t\t\t\t} else if (self.selection.Allow){ \r\n\t\t\t\t\t\tspan.onclick = function () { \r\n\t\t\t\t\t\t\tself.onClickSelectNode(this); \r\n\t\t\t\t\t\t} \r\n\t\t\t\t\t}\t\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.setExpandCollapseEventHandlers = function (td, itemValue, MeasureOrDimension, dimensionNumber, itemData) {\r\n\t\t\tif ((!self.ShowMeasuresAsRows) || (self.h < 500)) {\r\n\t\t\t\tjQuery(td).data('itemValue', itemValue);\r\n\t\t\t\t//jQuery(td).data('typeMorD', MeasureOrDimension);\r\n\t\t\t\tjQuery(td).data('numberMorD', dimensionNumber);\r\n\t\t\t\tjQuery(td).data('itemInfoEC', itemData);\r\n\t\t\t\ttd.onclick = function () { \r\n\t\t\t\t\tself.onClickExpandCollapse(this); \r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.getPerFilterValue = function (prevFilterSelectedValue, actualfilterIndex) {\r\n\t\t\tvar hayfiltro = false;\r\n\t\t\tfor (var i = 0; i < prevFilterSelectedValue.length; i++) {\r\n\t\t\t\tif (prevFilterSelectedValue[i] != null) {\r\n\t\t\t\t\thayfiltro = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (!hayfiltro) return false;\r\n\r\n\t\t\tvar distinctPerFilterValue = [];\r\n\t\t\tfor (var i = 0; i < self.GeneralDataRows.length; i++) { //for each row\r\n\t\t\t\tvar coincide = true;\r\n\t\t\t\tfor (var j = 0; j < prevFilterSelectedValue.length; j++) {\r\n\t\t\t\t\tif (prevFilterSelectedValue[j] != null) {\r\n\t\t\t\t\t\tif (self.GeneralDataRows[i][self.filterIndexes[j]] != prevFilterSelectedValue[j]) {\r\n\t\t\t\t\t\t\tcoincide = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (coincide) {\r\n\t\t\t\t\tdistinctPerFilterValue.push(self.GeneralDataRows[i][self.filterIndexes[actualfilterIndex]])\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn distinctPerFilterValue;\r\n\r\n\t\t}\r\n\t\t\r\n\t\tthis.drawTitleDiv = function(){\r\n\t\t\tif (self.PivotTitle) { \r\n\t\t\t\tOAT.Dom.clear(self.TitleDiv);\r\n\t\t\t\t\t\t\r\n\t\t\t\tvar ua = navigator.userAgent.toLowerCase();\r\n\t\t\t\tvar isAndroid = ua.indexOf(\"android\") > -1;\r\n\t\t\t\tif ((OAT.isIE()) || OAT.isAndroid()) {\r\n\t\t\t\t\tself.TitleDiv.className += \" pivot_title_div\";\r\n\t\t\t\t} else {\r\n\t\t\t\t\tself.TitleDiv.classList.add(\"pivot_title_div\");\r\n\t\t\t\t}\r\n\t\t\t\r\n\t\t\t\tOAT.addTextNode(self.TitleDiv, self.PivotTitle)\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tthis.drawFilters = function () {\r\n\t\t\tvar savedValues = [];\r\n\t\t\tvar div = self.filterDiv;\r\n\t\t\tvar filterInfoIcon = OAT.Dom.create(\"div\");\r\n\t\t\tvar spanHover = OAT.Dom.create(\"span\");\r\n\r\n\t\t\tvar ua = navigator.userAgent.toLowerCase();\r\n\t\t\tvar isAndroid = ua.indexOf(\"android\") > -1;\r\n\t\t\tif (OAT.isIE() || OAT.isAndroid()) {\r\n\t\t\t\tself.filterDiv.className += \" pivot_filter_div\";\r\n\t\t\t} else {\r\n\t\t\t\tself.filterDiv.classList.add(\"pivot_filter_div\");\r\n\t\t\t}\r\n\t\t\tif (!self.isSD && self.filterIndexes.length == 0) {\r\n\t\t\t\tfilterInfoIcon.href = \"#\";\r\n\t\t\t\tfilterInfoIcon.setAttribute(\"class\", \"filterInfoUser\");\r\n\t\t\t\tspanHover.setAttribute(\"class\", \"spanHoverLabel\");\r\n\t\t\t\tspanHover.setAttribute(\"id\", \"filterSpanInfo\");\r\n\t\t\t\tOAT.addImageNode(filterInfoIcon, \"info\", \"\");\r\n\t\t\t\tOAT.addTextNode(spanHover, self.translations.GXPL_QViewerInfoUser /*gx.getMessage(\"GXPL_QViewerInfoUser\")*/);\r\n\t\t\t}\r\n\r\n\t\t\tfor (var i = 0; i < div.selects.length; i++) {\r\n\t\t\t\tsavedValues.push([div.selects[i].filterIndex, div.selects[i].selectedIndex, div.selects[i].value]);\r\n\t\t\t}\r\n\t\t\tOAT.Dom.clear(div);\r\n\t\t\tself.gd.addTarget(div);\r\n\t\t\tdiv.selects = [];\r\n\t\t\tif (!self.filterIndexes.length) {\r\n\t\t\t\tvar strng = self.translations.GXPL_QViewerJSDropFiltersHere;// gx.getMessage(\"GXPL_QViewerJSDropFiltersHere\");\r\n\r\n\t\t\t\tif (self.isSD) {\r\n\t\t\t\t\tstrng = \"\";\r\n\t\t\t\t}\r\n\r\n\r\n\r\n\t\t\t\tif ((strng[strng.length - 1] === \"\\\"\") || (strng[strng.length - 1] === \"'\") || (strng[strng.length - 1] === \"]\") || (strng[strng.length - 1] === \"}\") || (strng[strng.length - 1] === \"`\")) {\r\n\t\t\t\t\tstrng = strng.substring(0, strng.length - 1);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (strng != \"\") {\r\n\t\t\t\t\tvar spanText = document.createElement('span')\r\n\t\t\t\t\tspanText.textContent = strng;\r\n\t\t\t\t\tdiv.appendChild(spanText);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar loadItems = function () {\r\n\t\t\t\tvar s = this;\r\n\t\t\t\tvar actualValues = self.conditions[this.filterIndex].distinctValues;\r\n\t\t\t\tfor (var j = 0; j < actualValues.length; j++) {\r\n\t\t\t\t\tvar v = actualValues[j];\r\n\t\t\t\t\tif (self.conditions[this.filterIndex].filteredShowValues.indexOf(v) == -1) {\r\n\t\t\t\t\t\tself.conditions[this.filterIndex].filteredShowValues.push(v);\r\n\t\t\t\t\t\tif (v != \"#NuN#\") {\r\n\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\tOAT.Dom.option(self.dimensionPictureValue(v, this.filterIndex), v, s);\r\n\t\t\t\t\t\t\t} catch (Error) {\r\n\t\t\t\t\t\t\t\tOAT.Dom.option(v, v, s);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tOAT.Dom.option(\" \", v, s);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t//load all other items\r\n\t\t\t\tself.lastRequestValue = this.filterIndex; var columnNumber = this.filterIndex;\r\n\t\t\t\tif (self.conditions[columnNumber].previousPage < self.conditions[columnNumber].totalPages) {\r\n\t\t\t\t\t\r\n\t\t\t\t\tself.lastRequestAttributeValues = \"DrawFilters\"\r\n\t\t\t\t\tself.lastRequestAttributeColumnNumber = columnNumber\r\n\t\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\tself.requestAttributeValues(self.columns[this.filterIndex].getAttribute(\"dataField\"), 1, 0, \"\")\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar callgo = function () {\r\n\t\t\t\tself.stateChanged = true\r\n\t\t\t\t\r\n\t\t\t\t\tself.DiseablePivot();\r\n\t\t\t\t\tself.conditions[this.filterIndex].topFilterValue = this.value\r\n\t\t\t\t\tself.getDataForPivot(self.UcId, 1, self.rowsPerPage, true, self.conditions[this.filterIndex].dataField, { op: \"pagefilter\", values: this.value, dim: this.filterIndex }, \"\", \"\")\r\n\t\t\t\t\tself.EneablePivot();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t\r\n\r\n\t\t\t}\r\n\t\t\tvar prevFilterSelectedValue = [];\r\n\t\t\tvar loaded = [];\r\n\t\t\tfor (var i = 0; i < self.filterIndexes.length; i++) {\r\n\t\t\t\tif (loaded.indexOf(self.filterIndexes[i]) < 0) {\r\n\t\t\t\t\tloaded.push(self.filterIndexes[i])\r\n\t\t\t\t\tvar index = self.filterIndexes[i];\r\n\t\t\t\t\tvar s = OAT.Dom.create(\"select\");\r\n\t\t\t\t\ts.setAttribute(\"id\", \"page_select_\" + i)\r\n\t\t\t\t\tOAT.Dom.option(self.translations.GXPL_QViewerJSAllOption /*gx.getMessage(\"GXPL_QViewerJSAllOption\")*/, \"[all]\", s);\r\n\r\n\t\t\t\t\tvar actualValues;\r\n\t\t\t\t\t\r\n\t\t\t\t\tactualValues = []\r\n\t\t\t\t\t\r\n\r\n\t\t\t\t\tif (self.GeneralDistinctValues.length > 0) {\r\n\t\t\t\t\t\tfor (var j = 0; j < self.GeneralDistinctValues[index].length; j++) {\r\n\t\t\t\t\t\t\tvar v = self.GeneralDistinctValues[index][j];\r\n\t\t\t\t\t\t\tif (!actualValues) {\r\n\t\t\t\t\t\t\t\tif (v != \"#NuN#\") {\r\n\t\t\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\t\t\tOAT.Dom.option(self.dimensionPictureValue(v, index), v, s);\r\n\t\t\t\t\t\t\t\t\t} catch (Error) {\r\n\t\t\t\t\t\t\t\t\t\tOAT.Dom.option(v, v, s);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tOAT.Dom.option(\" \", v, s);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tif (actualValues.indexOf(v) != -1) {\r\n\t\t\t\t\t\t\t\t\tif (v != \"#NuN#\") {\r\n\t\t\t\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\t\t\t\tOAT.Dom.option(self.dimensionPictureValue(v, index), v, s);\r\n\t\t\t\t\t\t\t\t\t\t} catch (Error) {\r\n\t\t\t\t\t\t\t\t\t\t\tOAT.Dom.option(v, v, s);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tOAT.Dom.option(\" \", v, s);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\tvar pos = 0;\r\n\t\t\t\t\t\t\tfor (var j = 0; j < self.GeneralDistinctValues[index].length; j++) {\r\n\t\t\t\t\t\t\t\tvar v = self.GeneralDistinctValues[index][j];\r\n\t\t\t\t\t\t\t\tif (self.conditions[index].topFilterValue === v) {\r\n\t\t\t\t\t\t\t\t\ts.selectedIndex = pos + 1;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (!actualValues) {\r\n\t\t\t\t\t\t\t\t\tpos++;\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tif (actualValues.indexOf(v) != -1) {\r\n\t\t\t\t\t\t\t\t\t\tpos++;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} catch (error) {\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\r\n\t\t\t\t\t\tself.conditions[index].filteredShowValues = []\r\n\t\t\t\t\t\tvar actualValues = self.conditions[index].distinctValues;\r\n\t\t\t\t\t\tfor (var j = 0; j < actualValues.length; j++) {\r\n\t\t\t\t\t\t\tvar v = actualValues[j];\r\n\t\t\t\t\t\t\tif (self.conditions[index].filteredShowValues.indexOf(v) == -1) {\r\n\t\t\t\t\t\t\t\tself.conditions[index].filteredShowValues.push(v);\r\n\t\t\t\t\t\t\t\tif (v != \"#NuN#\") {\r\n\t\t\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\t\t\tOAT.Dom.option(self.dimensionPictureValue(v, index), v, s);\r\n\t\t\t\t\t\t\t\t\t} catch (Error) {\r\n\t\t\t\t\t\t\t\t\t\tOAT.Dom.option(v, v, s);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tOAT.Dom.option(\" \", v, s);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif ((self.conditions[index].topFilterValue != \"[all]\") /*&& (self.conditions[index].topFilterValue!=\"\")*/) {\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tvar v = self.conditions[index].topFilterValue\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tvar isInFilteredShowValues = -1;\r\n\t\t\t\t\t\t\tfor(var fV = 0; fV < self.conditions[index].filteredShowValues.length; fV++){\r\n\t\t\t\t\t\t\t\tif (String(self.conditions[index].filteredShowValues[fV]).trim() == String(v).trim()){\r\n\t\t\t\t\t\t\t\t\tisInFilteredShowValues = fV;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (isInFilteredShowValues > -1) {//(self.conditions[index].filteredShowValues.indexOf(v) != -1) { //value already load\r\n\t\t\t\t\t\t\t\ts.selectedIndex = isInFilteredShowValues + 1\r\n\t\t\t\t\t\t\t//if (self.conditions[index].filteredShowValues.indexOf(v) != -1) { //value already load\r\n\t\t\t\t\t\t\t//\ts.selectedIndex = self.conditions[index].filteredShowValues.indexOf(v) + 1\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tself.conditions[index].filteredShowValues.push(v);\r\n\t\t\t\t\t\t\t\tif (v != \"#NuN#\") {\r\n\t\t\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\t\t\tOAT.Dom.option(self.dimensionPictureValue(v, index), v, s);\r\n\t\t\t\t\t\t\t\t\t} catch (Error) {\r\n\t\t\t\t\t\t\t\t\t\tOAT.Dom.option(v, v, s);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tOAT.Dom.option(\" \", v, s);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\ts.selectedIndex = 1\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\r\n\t\t\t\t\ts.filterIndex = index;\r\n\t\t\t\t\tfor (var j = 0; j < savedValues.length; j++) {\r\n\t\t\t\t\t\tif (savedValues[j][0] == index) {\r\n\t\t\t\t\t\t\tfor (var it = 0; it < s.length; it++) {\r\n\t\t\t\t\t\t\t\tif (s[it].value == savedValues[j][2]) {\r\n\t\t\t\t\t\t\t\t\ts.selectedIndex = it\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (s.selectedIndex > 0) {\r\n\t\t\t\t\t\tprevFilterSelectedValue[i] = s.value;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tprevFilterSelectedValue[i] = null\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\r\n\t\t\t\t\t\tOAT.Dom.attach(s, \"click\", loadItems);\r\n\t\t\t\t\t\r\n\t\t\t\t\tOAT.Dom.attach(s, \"change\", callgo);\r\n\t\t\t\t\tdiv.selects.push(s);\r\n\t\t\t\t\tvar d = OAT.Dom.create(\"div\");\r\n\t\t\t\t\td.setAttribute(\"class\", \"inner_filter_div\");\r\n\r\n\t\t\t\t\tOAT.addTextNode(d, self.headerRow[index])\r\n\r\n\r\n\t\t\t\t\tvar close = document.createElement(\"div\");\r\n\t\t\t\t\tclose.setAttribute(\"class\", \"close_span_filter\");\r\n\t\t\t\t\tOAT.addImageNode(close, \"close\", \"\");\r\n\t\t\t\t\t\r\n\t\t\t\t\tclose.style.cursor = \"pointer\";\r\n\t\t\t\t\tvar ref = self.getDelFilterReference(index);\r\n\t\t\t\t\tOAT.Dom.attach(close, \"click\", ref);\r\n\r\n\t\t\t\t\t\r\n\t\t\t\t\t\tOAT.Dom.append([self.filterDiv, d], [d, s, close]);\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\r\n\t\t\t//draw export image and pop up of export options\r\n\t\t\tvar exportImg = OAT.Dom.create(\"div\");\r\n\t\t\texportImg.href = \"#\";\r\n\t\t\tif (self.isSD) {//android\r\n\t\t\t\texportImg.setAttribute(\"class\", \"exportOptionsAnchor exportOptionsAnchor_small\");\r\n\t\t\t} else {\r\n\t\t\t\texportImg.setAttribute(\"class\", \"exportOptionsAnchor\");\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tOAT.addImageNode(exportImg, \"menu\", \"\")\r\n\r\n\t\t\tself.filterIcon = OAT.Dom.create(\"div\", {});\r\n\r\n\t\t\tself.exportPage = OAT.Dom.create(\"div\", {});\r\n\r\n\r\n\t\t\tvar checkToClose = function (b) {\r\n\t\t\t\tvar source = OAT.Event.source(b);\r\n\t\t\t\tvar clean = false;\r\n\t\t\t\tvar closing = false;\r\n\t\t\t\tfor (var i = 0; i < jQuery(\".oat_winrect_container\").length; i++) {\r\n\t\t\t\t\tvar obj = jQuery(\".oat_winrect_container\")[i];\r\n\t\t\t\t\tif (!(source == obj) && !OAT.Dom.isChild(source, obj)) {\r\n\t\t\t\t\t\tclean = true;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tclean = false; break;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tfor (var i = 0; i < jQuery(\".oat_winrect_container\").length; i++) {\r\n\t\t\t\t\tif (jQuery(\".oat_winrect_container\")[i].style.display != \"none\") {\r\n\t\t\t\t\t\tclosing = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (\r\n\t\t\t\t\t((source.getAttribute(\"class\") == \"oat_winrect_close_b\") || (!OAT.Dom.isChild(source, obj))) &&\r\n\t\t\t\t\t(closing)) {\r\n\t\t\t\t\tself.resetAllScrollValue(self.UcId);\r\n\t\t\t\t}\r\n\t\t\t\tif (clean) {\r\n\t\t\t\t\tjQuery(\".oat_winrect_container\").css({ display: \"none\" });\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tvar checkInfoFilters = function (b) {\r\n\t\t\t\tsource = OAT.Event.source(b);\r\n\t\t\t\tvar clean = false;\r\n\t\t\t\tvar closing = false;\r\n\t\t\t\tfor (var i = 0; i < jQuery(\".oat_winrect_container\").length; i++) {\r\n\t\t\t\t\tvar obj = jQuery(\".oat_winrect_container\")[i];\r\n\t\t\t\t\tif (!(source == obj) && !OAT.Dom.isChild(source, obj)) {\r\n\t\t\t\t\t\tclean = true;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tclean = false; break;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tfor (var i = 0; i < jQuery(\".oat_winrect_container\").length; i++) {\r\n\t\t\t\t\tif (jQuery(\".oat_winrect_container\")[i].style.display != \"none\") {\r\n\t\t\t\t\t\tclosing = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (\r\n\t\t\t\t\t((source.getAttribute(\"class\") == \"oat_winrect_close_b\") || (!OAT.Dom.isChild(source, obj))) &&\r\n\t\t\t\t\t(closing)) {\r\n\t\t\t\t\tself.resetAllScrollValue(self.UcId);\r\n\t\t\t\t}\r\n\t\t\t\tif (clean) {\r\n\t\t\t\t\tjQuery(\".oat_winrect_container\").css({ display: \"none\" });\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tOAT.Dom.attach(document, \"mousedown\", checkToClose)\r\n\t\t\tOAT.Dom.attach(document, \"onmouseout\", checkInfoFilters)\r\n\t\t\t\r\n\t\t\tOAT.Anchor.assign(exportImg, {\r\n\t\t\t\ttitle: \" \",\r\n\t\t\t\tcontent: self.exportPage,\r\n\t\t\t\tresult_control: false,\r\n\t\t\t\tactivation: \"click\",\r\n\t\t\t\ttype: OAT.WinData.TYPE_RECT,\r\n\t\t\t\twidth: \"auto\",\r\n\t\t\t\tcontainerQuery: self.IdForQueryViewerCollection + \"-pivottable\" +/*qv.util.GetContainerControlClass(self.QueryViewerCollection[self.IdForQueryViewerCollection]) +*/ \" ExportPopup \"\r\n\t\t\t});\r\n\r\n\t\t\tvar clickRef = function (event) {\r\n\t\t\t\tvar coords = OAT.Event.position(event);\r\n\t\t\t\tself.exportPage.style.left = coords[0] + \"px\";\r\n\t\t\t\tself.exportPage.style.top = coords[1] + \"px\";\r\n\t\t\t\tself.exportPage.id = \"exportOptionsContainer\";\r\n\r\n\r\n\t\t\t\tvar screenWidth = window.innerWidth;\r\n\t\t\t\tvar initialPopUpWidth = Math.max(jQuery(\".ExportPopup\")[0].clientWidth, 300)\r\n\t\t\t\tvar offsetLeft = jQuery(event.currentTarget).offset().left\r\n\r\n\t\t\t\tvar iconExport = event.currentTarget\r\n\r\n\t\t\t\t/* title */\r\n\t\t\t\tjQuery(\".oat_winrect_title\").find(\".winrect_title_label\").remove()\r\n\r\n\t\t\t\tvar spantitle = OAT.Dom.create(\"label\");\r\n\t\t\t\tif (self.isSD) {\r\n\t\t\t\t\tjQuery(\".oat_winrect_container\").addClass(\"oat_winrect_container_small\")\r\n\t\t\t\t\tspantitle.setAttribute(\"class\", \"winrect_title_label winrect_title_label_small\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tspantitle.setAttribute(\"class\", \"winrect_title_label\");\r\n\t\t\t\t}\r\n\t\t\t\tOAT.addTextNode(spantitle, self.translations.GXPL_QViewerPopupTitle/*gx.getMessage(\"GXPL_QViewerPopupTitle\")*/);\r\n\t\t\t\tjQuery(\".oat_winrect_title\").append(spantitle)\r\n\r\n\r\n\t\t\t\tjQuery(\".ExportPopup\").css({ left: -2500 + \"px\", top: 0 + \"px\" })\r\n\r\n\r\n\t\t\t\tOAT.Dom.clear(self.exportPage);\r\n\t\t\t\t//begin export options\r\n\t\t\t\tvar div_upper = document.createElement(\"div\");\r\n\t\t\t\tdiv_upper.setAttribute(\"class\", \"upper_container\");\r\n\r\n\t\t\t\t//botton to allow show all filters in pop up\r\n\t\t\t\tjQuery('#divtoxml').remove();\r\n\t\t\t\tjQuery('#divtoxls').remove();\r\n\t\t\t\tjQuery('#divtoxlsx').remove();\r\n\t\t\t\tjQuery('#divtoexport').remove();\r\n\t\t\t\tjQuery('#divtohtml').remove();\r\n\t\t\t\tvar someExport = false;\r\n\t\t\t\tself.appendExportToXmlOption(div_upper, someExport);\r\n\t\t\t\tself.appendExportToHtmlOption(div_upper, someExport);\r\n\t\t\t\tself.appendExportToPdfOption(div_upper, someExport);\r\n\t\t\t\tself.appendExportToExcelOption(div_upper, someExport);\r\n\t\t\t\tself.appendExportToExcel2010Option(div_upper, someExport);\r\n\r\n\t\t\t\tself.exportPage.appendChild(div_upper);\r\n\r\n\t\t\t\tif ((self.QueryViewerCollection[IdForQueryViewerCollection].ExportToXML) || (self.QueryViewerCollection[IdForQueryViewerCollection].ExportToHTML)\r\n\t\t\t\t|| (self.QueryViewerCollection[IdForQueryViewerCollection].ExportToPDF) || (self.QueryViewerCollection[IdForQueryViewerCollection].ExportToXLS)\r\n\t\t\t\t|| (self.QueryViewerCollection[IdForQueryViewerCollection].ExportToXLSX)) {\r\n\t\t\t\t\tvar hr = OAT.Dom.create(\"hr\", {});\r\n\t\t\t\t\tself.exportPage.appendChild(hr);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar div_down = document.createElement(\"div\");\r\n\t\t\t\tdiv_down.setAttribute(\"class\", \"down_container\");\r\n\t\t\t\tself.exportPage.appendChild(div_down);\r\n\r\n\t\t\t\tvar label = document.createElement(\"span\");\r\n\t\t\t\tlabel.textContent = self.translations.GXPL_QViewerJSVisibleColumns//gx.getMessage(\"GXPL_QViewerJSVisibleColumns\")\r\n\t\t\t\tvar div_label = document.createElement(\"div\");\r\n\t\t\t\tdiv_label.setAttribute(\"class\", \"div_label_win\");\r\n\t\t\t\tdiv_label.appendChild(label);\r\n\t\t\t\tdiv_down.appendChild(div_label);\r\n\r\n\r\n\t\t\t\tvar generatePair = function (index, isDimension) {\r\n\t\t\t\t\tif ((isDimension) && (self.initMetadata.Dimensions[index].validPosition == \"\"))\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ((!isDimension) && (self.initMetadata.Measures[index].validPosition == \"hidden\"))\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\treturn false\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar dataField; var displayName;\r\n\t\t\t\t\tif (isDimension) {\r\n\t\t\t\t\t\tdataField = self.initMetadata.Dimensions[index].dataField;\r\n\t\t\t\t\t\tdisplayName = self.initMetadata.Dimensions[index].displayName;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdataField = self.initMetadata.Measures[index].dataField;\r\n\t\t\t\t\t\tdisplayName = self.initMetadata.Measures[index].displayName;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar state = self.headerRow.indexOf(displayName) != -1;\r\n\t\t\t\t\tvar pair = OAT.Dom.create(\"div\");\r\n\t\t\t\t\tvar check_class = (state) ? \"check_item_img\" : \"uncheck_item_img\";\r\n\t\t\t\t\tif (self.isSD) {//android\r\n\t\t\t\t\t\tcheck_class = (state) ? \"check_item_img_small\" : \"uncheck_item_img_small\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\tOAT.addImageNode(pair, state ? \"check_box\" : \"check_box_outline_blank\", \"\");\r\n\r\n\t\t\t\t\tpair.setAttribute(\"class\", check_class);\r\n\t\t\t\t\tpair.setAttribute(\"dataField\", displayName);\r\n\t\t\t\t\tpair.setAttribute(\"isDimension\", isDimension);\r\n\t\t\t\t\tpair.setAttribute(\"index\", index);\r\n\t\t\t\t\tvar span = OAT.Dom.create(\"span\");\r\n\t\t\t\t\tif (isDimension) {\r\n\t\t\t\t\t\tOAT.addTextNode(span, \" \" + self.initMetadata.Dimensions[index].displayName)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tOAT.addTextNode(span, \" \" + self.initMetadata.Measures[index].displayName)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar show = ((self.formulaInfo.itemPosition[dataField] == undefined) || (self.formulaInfo.cantFormulaMeasures == 0))\r\n\t\t\t\t\tif (isDimension) {\r\n\t\t\t\t\t\tshow = show && (self.initMetadata.Dimensions[index].validPosition != \"hidden\")\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tshow = show && (self.initMetadata.Measures[index].validPosition != \"hidden\")\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (show) {\r\n\t\t\t\t\t\tpair.appendChild(span);\r\n\t\t\t\t\t\tOAT.Event.attach(pair, \"click\", function () { // this hide or show the columns\r\n\t\t\t\t\t\t\tvar isDimension = (pair.getAttribute(\"isDimension\") == \"true\");\r\n\t\t\t\t\t\t\tvar dataField = pair.getAttribute(\"dataField\");\r\n\t\t\t\t\t\t\tvar index = parseInt(pair.getAttribute(\"index\"));\r\n\r\n\t\t\t\t\t\t\tvar checkedClass = \"check_item_img\"\r\n\t\t\t\t\t\t\tvar unCheckedClass = \"uncheck_item_img\"\r\n\t\t\t\t\t\t\tif (self.isSD) {//android\r\n\t\t\t\t\t\t\t\tcheckedClass = \"check_item_img_small\"\r\n\t\t\t\t\t\t\t\tunCheckedClass = \"uncheck_item_img_small\"\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tvar newClass = (this.getAttribute(\"class\") === checkedClass) ? unCheckedClass : checkedClass;\r\n\t\t\t\t\t\t\tthis.setAttribute(\"class\", newClass);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tjQuery(this).find(\"i\")[0].textContent = (this.getAttribute(\"class\") === checkedClass) ? \"check_box\" : \"check_box_outline_blank\";\r\n\r\n\t\t\t\t\t\t\tif (isDimension) {\r\n\t\t\t\t\t\t\t\tself.initMetadata.Dimensions[index].Visible = !self.initMetadata.Dimensions[index].Visible\r\n\t\t\t\t\t\t\t\tself.preGoWhenShowHideDimension(index);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tself.initMetadata.Measures[index].Visible = !self.initMetadata.Measures[index].Visible\r\n\t\t\t\t\t\t\t\tself.preGoWhenShowHideMeasures(index);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\treturn pair;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar start = (self.autoNumber ? 1 : 0);\r\n\t\t\t\tfor (var i = start; i < self.initMetadata.Dimensions.length; i++) {\r\n\t\t\t\t\tvar pair = generatePair(i, true);\r\n\t\t\t\t\tif (pair)\r\n\t\t\t\t\t\tdiv_down.appendChild(pair);\r\n\t\t\t\t}\r\n\t\t\t\tfor (var i = start; i < self.initMetadata.Measures.length; i++) {\r\n\t\t\t\t\tvar pair = generatePair(i, false);\r\n\t\t\t\t\tif (pair)\r\n\t\t\t\t\t\tdiv_down.appendChild(pair);\r\n\t\t\t\t}\r\n\r\n\r\n\r\n\r\n\t\t\t\tsetTimeout(function () {\r\n\r\n\t\t\t\t\tvar screenWidth = window.innerWidth;\r\n\t\t\t\t\tvar initialPopUpWidth = jQuery(\".ExportPopup\")[0].clientWidth\r\n\r\n\r\n\t\t\t\t\tif (initialPopUpWidth == 0) {\r\n\t\t\t\t\t\tvar last = jQuery(\".ExportPopup\").length;\r\n\t\t\t\t\t\tinitialPopUpWidth = jQuery(\".ExportPopup\")[last - 1].clientWidth\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (self.isSD) {//android\t\t\r\n\t\t\t\t\t\tif (initialPopUpWidth < 240) {\r\n\t\t\t\t\t\t\tinitialPopUpWidth = 240\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvar padding = (screenWidth - initialPopUpWidth) / 2 + jQuery(window).scrollLeft()\r\n\r\n\t\t\t\t\t\tjQuery(\".ExportPopup\").css({ left: padding + \"px\", top: jQuery(iconExport).offset().top + \"px\", width: initialPopUpWidth + \"px\" })\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tvar offsetLeft = jQuery(iconExport).offset().left\r\n\r\n\t\t\t\t\t\tif (offsetLeft + initialPopUpWidth + 15 < screenWidth) {\r\n\t\t\t\t\t\t\tjQuery(\".ExportPopup\").css({ left: jQuery(iconExport).offset().left + \"px\", top: jQuery(iconExport).offset().top + \"px\" })\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tjQuery(\".ExportPopup\").css({ left: (offsetLeft - initialPopUpWidth + 16) + \"px\", top: jQuery(iconExport).offset().top + \"px\" })\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t}, 50)\r\n\r\n\r\n\r\n\t\t\t} /* clickref */\r\n\t\t\tOAT.Event.attach(exportImg, \"click\", clickRef);\r\n\r\n\t\t\t\r\n\t\t\tself.filterDiv.appendChild(exportImg);\r\n\r\n\t\t\tfilterInfoIcon.appendChild(spanHover);\r\n\r\n\t\t\tself.filterDiv.appendChild(filterInfoIcon);\r\n\r\n\r\n\t\t}\r\n\r\n\t\tthis.appendExportToXmlOption = function (content, someExport) {\r\n\t\t\tvar exportXMLButton;\r\n\t\t\tif (self.QueryViewerCollection[IdForQueryViewerCollection].ExportToXML) {\r\n\r\n\t\t\t\t\texportXMLButton = OAT.Dom.create(\"div\");\r\n\t\t\t\t\t\r\n\r\n\t\t\t\t\texportXMLButtonSub = self.createExportButton(exportXMLButton)\r\n\r\n\t\t\t\t\tvar pvpl = OAT.Dom.create(\"label\");\r\n\t\t\t\t\tOAT.addTextNode(pvpl, self.translations.GXPL_QViewerContextMenuExportXml/*gx.getMessage(\"GXPL_QViewerContextMenuExportXml\")*/)\r\n\t\t\t\t\tpvpl.htmlFor = \"pivot_checkbox_restoreview\";\r\n\t\t\t\t\tpvpl.setAttribute(\"class\", \"pivot_checkbox_restoreview\");\r\n\t\t\t\t\texportXMLButton.appendChild(pvpl);\r\n\t\t\t\t\tvar span = document.createElement(\"span\");\r\n\t\t\t\t\texportXMLButton.appendChild(span);\r\n\r\n\t\t\t\t\tOAT.Dom.attach(exportXMLButtonSub, \"click\", function () {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tself.getDataForPivot(self.UcId, 1, -1, true, \"\", \"\", \"XML\", \"\", \"\", true)\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tif (someExport) {\r\n\t\t\t\t\tif (!OAT.isIE()) {\r\n\t\t\t\t\t\tcontent.appendChild(OAT.Dom.create(\"br\"));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tcontent.appendChild(exportXMLButton);\r\n\t\t\t\tsomeExport = true;\r\n\t\t\t}\r\n\t\t}\r\n\t\r\n\t\t\r\n\t\t\r\n\t\tthis.ExportToXMLWhenServerPagination = function () {\r\n\t\t\t\r\n\t\t\tself.lastRequestPivotDataCalculation = \"\"\r\n\t\t\tself.lastRequestCalculation = \"ExportToXML\"\r\n\t\t\tself.requestCalculatePivottableData() \r\n\t\t\t\r\n\r\n\t\t}\r\n\r\n\t\tthis.ExportToHTMLWhenServerPagination = function () {\r\n\t\t\tvar dir = OAT.resourceURL(self.relativePath + 'QueryViewer/oatPivot/css/pivot.css')\r\n\r\n\t\t\tvar str = \"<!DOCTYPE><HTML><BODY>\";\r\n\t\t\tstr = str + \"<HEAD>\";\r\n\t\t\tstr = str + '<META content=\"text/html; charset=utf-8\" http-equiv=\"Content-Type\"/>'\r\n\r\n\t\t\tstr = str + '<link id=\"gxtheme_css_reference\" rel=\"stylesheet\" type=\"text/css\" href=\"' + dir + '\" />'\r\n\t\t\t\r\n\t\t\t//add other css file\r\n\t\t\tfor(var i = 0; i < jQuery('link').length; i++)\r\n\t\t\t{\r\n\t\t\t\tif (jQuery('link')[i].href.indexOf(\"QueryViewer.css\") < 0) {\r\n\t\t\t\t\tstr = str + '<link id=\"gxtheme_css_reference\" rel=\"stylesheet\" type=\"text/css\" href=\"' + jQuery('link')[i].href + '\" />'\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tstr = str + \"</HEAD><DIV style=\\\"margin-bottom: 5px;\\\">\"\r\n\t\t\t\r\n\t\t\tstr = str + '<div class=\"gx_usercontrol qv-pivottable QueryViewer-pivottable\">'\r\n\t\t\t\r\n\t\t\tstr = str + '<table class=\"pivot_table\" style=\"width: 100%;\">'\r\n\t\t\t\r\n\t\t\tstr = str + OAT.removeIconFont(jQuery(\"#\" + self.controlName + \"_\" + self.query)[0].innerHTML.replace(/display: none;/g, \"\").replace(/sort-asc/g, \"\").replace(/sort-desc/g, \"\"));\r\n\t\t\t\r\n\t\t\tstr = str + '</table>'\r\n\t\t\t\r\n\t\t\tstr = str + '</div>'\r\n\t\t\tstr = str + \"</DIV></BODY></HTML>\";\r\n\r\n\t\t\tif ((OAT.isSafari()) || (self.isSD)) { //for safari\r\n\t\t\t\twindow.open('data:text/html,' + str);\r\n\t\t\t} else {\r\n\t\t\t\tvar blob = new Blob([str], { type: \"text/html\" });\r\n\t\t\t\tif (self.query != \"\") {\r\n\t\t\t\t\tsaveAs(blob, self.query + \".html\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar name = 'Query'\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tname = self.controlName.substr(4).split(\"_\")[0]\r\n\t\t\t\t\t} catch (error) { }\r\n\t\t\t\t\tsaveAs(blob, name + \".html\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.appendExportToHtmlOption = function (content, someExport) {\r\n\t\t\tvar exportHTMLButton;\r\n\t\t\tif (self.QueryViewerCollection[IdForQueryViewerCollection].ExportToHTML) {\r\n\t\t\t\t\r\n\r\n\t\t\t\t\tvar exportHTMLButton = OAT.Dom.create(\"div\");\r\n\t\t\t\t\t// exportHTMLButton.style.marginBottom = \"10px\"\r\n\r\n\t\t\t\t\texportButtonSub = self.createExportButton(exportHTMLButton)\r\n\r\n\t\t\t\t\tvar pvpl = OAT.Dom.create(\"label\");\r\n\t\t\t\t\tOAT.addTextNode(pvpl, self.translations.GXPL_QViewerContextMenuExportHtml/*gx.getMessage(\"GXPL_QViewerContextMenuExportHtml\")*/)\r\n\t\t\t\t\tpvpl.htmlFor = \"pivot_checkbox_restoreview\";\r\n\t\t\t\t\tpvpl.setAttribute(\"class\", \"pivot_checkbox_restoreview\");\r\n\t\t\t\t\texportHTMLButton.appendChild(pvpl);\r\n\r\n\r\n\r\n\t\t\t\t\tOAT.Dom.attach(exportButtonSub, \"click\", function () {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tself.getDataForPivot(self.UcId, 1, -1, true, \"\", \"\", \"HTML\", \"\", \"\", true)\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tif (someExport) {\r\n\t\t\t\t\tif (!OAT.isIE()) {\r\n\t\t\t\t\t\tcontent.appendChild(OAT.Dom.create(\"br\"));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tcontent.appendChild(exportHTMLButton);\r\n\t\t\t\tsomeExport = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\tthis.appendExportToPdfOption = function (content, someExport) {\r\n\t\t\tvar exportPdfButton;\r\n\t\t\tif (self.QueryViewerCollection[IdForQueryViewerCollection].ExportToPDF) {\r\n\t\t\t\tsomeExport = true;\r\n\t\t\t\t\r\n\t\t\t\t\tvar exportPdfButton = OAT.Dom.create(\"div\");\r\n\r\n\t\t\t\t\texportButtonSub = self.createExportButton(exportPdfButton)\r\n\r\n\t\t\t\t\tvar pvpl = OAT.Dom.create(\"label\");\r\n\t\t\t\t\tOAT.addTextNode(pvpl, self.translations.GXPL_QViewerContextMenuExportPdf /*gx.getMessage(\"GXPL_QViewerContextMenuExportPdf\")*/)\r\n\t\t\t\t\tpvpl.htmlFor = \"pivot_checkbox_restoreview\";\r\n\t\t\t\t\tpvpl.setAttribute(\"class\", \"pivot_checkbox_restoreview\");\r\n\t\t\t\t\texportPdfButton.appendChild(pvpl);\r\n\r\n\t\t\t\t\tvar FileName = self.query\r\n\t\t\t\t\tif (FileName == \"\") {\r\n\t\t\t\t\t\tFileName = \"Query\"\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\tFileName = self.controlName.split(\"_\")[0]\r\n\t\t\t\t\t\t} catch (error) { }\r\n\t\t\t\t\t}\r\n\t\t\t\t\tOAT.Dom.attach(exportButtonSub, \"click\", function () {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tself.getDataForPivot(self.UcId, 1, -1, true, \"\", \"\", \"PDF\", \"\", \"\", true)\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t});\r\n\t\t\t\t\r\n\r\n\t\t\t\tcontent.appendChild(exportPdfButton);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\r\n\t\tthis.appendExportToExcelOption = function (content, someExport) {\r\n\t\t\tvar exportXLSButton;\r\n\t\t\tif (self.QueryViewerCollection[IdForQueryViewerCollection].ExportToXLS) {\r\n\r\n\t\t\t\t\r\n\t\t\t\t\tvar exportXLSButton = OAT.Dom.create(\"div\");\r\n\r\n\t\t\t\t\texportButtonSub = self.createExportButton(exportXLSButton)\r\n\r\n\t\t\t\t\tvar pvpl = OAT.Dom.create(\"label\");\r\n\t\t\t\t\tOAT.addTextNode(pvpl,self.translations.GXPL_QViewerContextMenuExportXls2003 /*gx.getMessage(\"GXPL_QViewerContextMenuExportXls2003\")*/)\r\n\t\t\t\t\t//gx.getMessage(\"GXPL_QViewerContextMenuExportPdf\")\r\n\t\t\t\t\tpvpl.htmlFor = \"pivot_checkbox_restoreview\";\r\n\t\t\t\t\tpvpl.setAttribute(\"class\", \"pivot_checkbox_restoreview\");\r\n\t\t\t\t\texportXLSButton.appendChild(pvpl);\r\n\r\n\t\t\t\t\tvar FileName = self.query\r\n\t\t\t\t\tif (FileName == \"\") {\r\n\t\t\t\t\t\tFileName = \"Query\"\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\tFileName = self.controlName.split(\"_\")[0]\r\n\t\t\t\t\t\t} catch (error) { }\r\n\t\t\t\t\t}\r\n\t\t\t\t\tOAT.Dom.attach(exportButtonSub, \"click\", function () {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tself.getDataForPivot(self.UcId, 1, -1, true, \"\", \"\", \"XLS\", \"\", \"\", true)\r\n\t\t\t\t\t\t\r\n\r\n\t\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tif (someExport) {\r\n\t\t\t\t\tif (!OAT.isIE()) {\r\n\t\t\t\t\t\tcontent.appendChild(OAT.Dom.create(\"br\"));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tcontent.appendChild(exportXLSButton);\r\n\t\t\t\tsomeExport = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.ExportToXLSXWhenServerPagination = function () {\r\n\t\t\t\r\n\t\t\tself.lastRequestCalculation = \"ExportToXLSX\"\r\n\t\t\tself.requestCalculatePivottableData()\r\n\r\n\t\t}\r\n\r\n\t\tthis.appendExportToExcel2010Option = function (content, someExport) {\r\n\t\t\tvar exportXLSButton;\r\n\t\t\tif ((self.QueryViewerCollection[IdForQueryViewerCollection].ExportToXLSX) && ((self.allData.length > 0) || (self.serverPagination))) {\r\n\r\n\t\t\t\t\r\n\t\t\t\t\tvar exportXLSButton = OAT.Dom.create(\"div\");\r\n\r\n\t\t\t\t\texportButtonSub = self.createExportButton(exportXLSButton)\r\n\r\n\t\t\t\t\tvar pvpl = OAT.Dom.create(\"label\");\r\n\t\t\t\t\tOAT.addTextNode(pvpl, self.translations.GXPL_QViewerContextMenuExportXlsx /*gx.getMessage(\"GXPL_QViewerContextMenuExportXlsx\")*/)\r\n\t\t\t\t\tpvpl.htmlFor = \"pivot_checkbox_restoreview\";\r\n\t\t\t\t\tpvpl.setAttribute(\"class\", \"pivot_checkbox_restoreview\");\r\n\t\t\t\t\texportXLSButton.appendChild(pvpl);\r\n\r\n\t\t\t\t\tvar FileName = self.query\r\n\t\t\t\t\tif (FileName == \"\") {\r\n\t\t\t\t\t\tFileName = \"Query\"\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t//FileName = self.controlName.substr(4).split(\"_\")[0]\r\n\t\t\t\t\t\t\tFileName = self.controlName.split(\"_\")[0]\r\n\t\t\t\t\t\t} catch (error) { }\r\n\t\t\t\t\t}\r\n\t\t\t\t\tOAT.Dom.attach(exportXLSButton, \"click\", function () {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tself.getDataForPivot(self.UcId, 1, -1, true, \"\", \"\", \"XLSX\", \"\", \"\", true);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\tif (someExport) {\r\n\t\t\t\t\tif (!OAT.isIE()) {\r\n\t\t\t\t\t\tcontent.appendChild(OAT.Dom.create(\"br\"));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tcontent.appendChild(exportXLSButton);\r\n\t\t\t\tsomeExport = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\tthis.createExportButton = function (divContainer) {\r\n\r\n\t\t\tvar exportButtonSub = OAT.Dom.create(\"div\", {});\r\n\t\t\texportButtonSub.setAttribute('id', 'divtoxml');\r\n\t\t\tdivContainer.appendChild(exportButtonSub);\r\n\r\n\t\t\tif (self.isSD) {//android\t\t\t\t\r\n\t\t\t\texportButtonSub.setAttribute(\"class\", \"download_file_img_small\");\r\n\t\t\t} else {\r\n\t\t\t\texportButtonSub.setAttribute(\"class\", \"download_file_img\");\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tOAT.addImageNode(exportButtonSub, \"download\", \"\");\r\n\r\n\t\t\tdivContainer.setAttribute(\"class\", \"export_item_div\");\r\n\t\t\tif (self.isSD) {//android\t\t\r\n\t\t\t\tdivContainer.setAttribute(\"class\", \"export_item_div export_item_div_small\");\r\n\t\t\t}\r\n\t\t\treturn divContainer;\r\n\t\t}\r\n\r\n\r\n\r\n\t\tthis._drawCorner = function (th, target) {\r\n\t\t\tif (measures.length > 0) {\r\n\t\t\t\tOAT.addTextNode(th, self.headerRow[self.dataColumnIndex])\r\n\t\t\t\tth.className = \"h2titlewhite\";\r\n\t\t\t\tthis.setTitleTexrtAlign(th, th.textContent);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\r\n\t\tthis._drawRowConditionsHeadingsCustom = function (tr) {\r\n\t\t\t/* rowConditions headings */\r\n\t\t\tfor (var j = 0; j < self.rowConditions.length; j++) {\r\n\t\t\t\tvar cond = self.conditions[self.rowConditions[j]];\r\n\t\t\t\tif (self.isMeasureByName(self.headerRow[self.rowConditions[j]], cond.dataField, cond.isDimension)) {\r\n\t\t\t\t\tif (!self.ShowMeasuresAsRows) {\r\n\t\t\t\t\t\tvar th = OAT.Dom.create(\"th\", {}, \"h2titlewhite\");\r\n\t\t\t\t\t\tvar div = OAT.Dom.create(\"div\");\r\n\t\t\t\t\t\tOAT.addTextNode(div, self.headerRow[self.rowConditions[j]])\r\n\t\t\t\t\t\tthis.setTitleTexrtAlign(div, self.headerRow[self.rowConditions[j]]);\r\n\t\t\t\t\t\tth.rowSpan = self.colConditions.length + 2;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar th = OAT.Dom.create(\"th\", {}, \"h2title\");\r\n\t\t\t\t\tvar divCont = OAT.Dom.create(\"div\", { position: \"relative\" });\r\n\r\n\t\t\t\t\tvar div = OAT.Dom.create(\"div\", { overflow: \"hidden\"});\r\n\t\t\t\t\t\r\n\t\t\t\t\t\tOAT.addTextNode(div, self.headerRow[self.rowConditions[j]].replace(/ /g, \"\\u00A0\") + \"\\u00A0\\u00A0\\u00A0\\u00A0\")\r\n\t\t\t\t\t\r\n\t\t\t\t\tif ((self.GeneralDataRows.length > 0) || (self.serverPagination)) {\r\n\t\t\t\t\t\tvar resp = self.getClickReference(cond, self.rowConditions[j], div);\r\n\t\t\t\t\t\tvar ref = resp[0]\r\n\t\t\t\t\t\tvar anchorRef = resp[1]\r\n\t\t\t\t\t\tOAT.Dom.attach(th, \"click\", ref);\r\n\t\t\t\t\t\tvar callback = self.getOrderReference(self.rowConditions[j], anchorRef, ref, div);\r\n\t\t\t\t\t\tself.gd.addSource(div, self.process, callback);\r\n\t\t\t\t\t\tself.gd.addTarget(th);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tth.conditionIndex = self.rowConditions[j];\r\n\t\t\t\t\tif (!self.ShowMeasuresAsRows) {\r\n\t\t\t\t\t\tth.rowSpan = self.colConditions.length + 2;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tth.rowSpan = self.colConditions.length + 1;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar divImg = OAT.Dom.create(\"div\", { position: \"absolute\", right: \"-6px\", bottom: \"0px\"});\r\n\t\t\t\t\tOAT.addImageNode(divImg, \"arrow_drop_down\", \"\");\r\n\t\t\t\t\tvar divIcon = OAT.Dom.create(\"div\");\r\n\t\t\t\t\tdivIcon.className = \"div_settings\";\r\n\t\t\t\t\tOAT.addImageNode(divIcon, \"settings\", \"\");\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tthis.updateSortImage(divImg, cond.sort);\r\n\t\t\t\t\t} catch (Error) { }\r\n\t\t\t\t\tOAT.Dom.append([th, divCont], [divCont, div], [divCont, divImg], [div, divIcon], [tr, th]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (self.ShowMeasuresAsRows) //add title of Measure\r\n\t\t\t{\r\n\t\t\t\tvar largo = 80;\r\n\t\t\t\tvar th = OAT.Dom.create(\"th\", {}, \"h2title\");\r\n\t\t\t\tvar divCont = OAT.Dom.create(\"div\", { position: \"relative\", minWidth: largo + \"px\" });\r\n\t\t\t\tvar div = OAT.Dom.create(\"div\", { overflow: \"hidden\" });\r\n\t\t\t\tOAT.addTextNode(div, self.translations.GXPL_QViewerJSMeasures /*gx.getMessage(\"GXPL_QViewerJSMeasures\")*/ + \"\\u00A0\\u00A0\\u00A0\")\r\n\t\t\t\tOAT.Dom.append([th, divCont], [divCont, div], [tr, th]);\r\n\t\t\t\tth.rowSpan = self.colConditions.length + 1;\r\n\t\t\t\tOAT.Dom.append([th, div], [tr, th]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.isMeasureByName = function (headerName, dataField, isDimension) {\r\n\t\t\tvar ismeasure = false;\r\n\t\t\tfor (var i = 0; i < measures.length - 1; i++) {\r\n\t\t\t\tif (measures[i].attributes.getNamedItem(\"displayName\").nodeValue == headerName) {\r\n\t\t\t\t\tismeasure = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t\tif (dataField){\r\n\t\t\t\tvar ismeasure = false;\r\n\t\t\t\tfor (var pd = 0; pd<self.pageData.DataInfo.length; pd++){\r\n\t\t\t\t\tif (dataField == self.pageData.DataInfo[pd].DataField)\r\n\t\t\t\t\t\tismeasure = true;\r\n\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\r\n\r\n\t\t\treturn ismeasure;\r\n\t\t}\r\n\r\n\t\tthis.setTitleTexrtAlign = function (div, header) {\r\n\t\t\tfor (var i = 0; i < measures.length; i++) {\r\n\t\t\t\tif (measures[i].getAttribute(\"displayName\") === header) {\r\n\t\t\t\t\tif ((measures[i].getAttribute(\"dataType\") === \"integer\") || (measures[i].getAttribute(\"dataType\") === \"real\")) {\r\n\t\t\t\t\t\tdiv.style.textAlign = \"left\"\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (measures[i].getAttribute(\"date\") === \"integer\") {\r\n\t\t\t\t\t\tdiv.style.textAlign = \"right\"\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.updateSortImage = function (div, order) {\r\n\t\t\tvar path = \"none\";\r\n\t\t\tswitch (order) {\r\n\t\t\t\tcase 0: path = \"asc\"; break;\r\n\t\t\t\tcase 1: path = \"asc\"; break;   \r\n\t\t\t\tcase -1: path = \"desc\"; break; \r\n\t\t\t\tcase 2: path = \"desc\"; break;\r\n\t\t\t}\r\n\r\n\t\r\n\t\t\tif (OAT.isIE() || (OAT.isAndroid())) {\r\n\t\t\t\tdiv.className.replace(\"sort-none\");\r\n\t\t\t\tdiv.className.replace(\"sort-asc\");\r\n\t\t\t\tdiv.className.replace(\"sort-desc\");\r\n\t\t\t} else {\r\n\t\t\t\tdiv.classList.remove(\"sort-none\");\r\n\t\t\t\tdiv.classList.remove(\"sort-asc\");\r\n\t\t\t\tdiv.classList.remove(\"sort-desc\");\r\n\t\t\t}\r\n\t\t\tif (OAT.isIE() || (OAT.isAndroid())) {\r\n\t\t\t\tdiv.className += \" sort-\" + path;\r\n\t\t\t} else {\r\n\t\t\t\tdiv.classList.add(\"sort-\" + path);\r\n\t\t\t}\r\n\t\t\tjQuery(div).find(\"i\")[0].textContent = (path == \"asc\") ? \"arrow_drop_up\" : \"arrow_drop_down\";\r\n\t\t}\r\n\r\n\t\tthis._drawRowConditionsHeadings = function (tbody) {\r\n\t\t\t/* rowConditions headings */\r\n\t\t\tvar tr = OAT.Dom.create(\"tr\");\r\n\t\t\tfor (var j = 0; j < self.rowConditions.length; j++) {\r\n\t\t\t\tvar cond = self.conditions[self.rowConditions[j]];\r\n\t\t\t\tif (self.isMeasureByName(self.headerRow[self.rowConditions[j]], cond.dataField, cond.isDimension)) {\r\n\t\t\t\t\tif (!self.ShowMeasuresAsRows) {\r\n\t\t\t\t\t\tvar th = OAT.Dom.create(\"th\", {}, \"h2titlewhite\");\r\n\t\t\t\t\t\tvar div = OAT.Dom.create(\"div\");\r\n\t\t\t\t\t\tOAT.addTextNode(div, self.headerRow[self.rowConditions[j]])\r\n\t\t\t\t\t\tself.setTitleTexrtAlign(div, self.headerRow[self.rowConditions[j]]);\r\n\t\t\t\t\t\tOAT.Dom.append([th, div], [tr, th]);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar largo = (self.headerRow[self.rowConditions[j]].length > 8) ? self.headerRow[self.rowConditions[j]].length * 10 : 80;\r\n\t\t\t\t\tvar th = OAT.Dom.create(\"th\", {}, \"h2title\");\r\n\t\t\t\t\tvar divCont = OAT.Dom.create(\"div\", { position: \"relative\", minWidth: largo + \"px\" });\r\n\t\t\t\t\tvar div = OAT.Dom.create(\"div\", { overflow: \"hidden\" });\r\n\t\t\t\t\tOAT.addTextNode(div, self.headerRow[self.rowConditions[j]] + \"\\u00A0\\u00A0\\u00A0\")\r\n\t\t\t\t\tvar resp = self.getClickReference(cond, self.rowConditions[j], div);\r\n\t\t\t\t\tvar ref = resp[0];\r\n\t\t\t\t\tvar anchorRef = resp[1];\r\n\t\t\t\t\tOAT.Dom.attach(th, \"click\", ref);\r\n\t\t\t\t\tvar callback = self.getOrderReference(self.rowConditions[j], anchorRef, ref, div);\r\n\t\t\t\t\tself.gd.addSource(div, self.process, callback);\r\n\t\t\t\t\tself.gd.addTarget(th);\r\n\t\t\t\t\tth.conditionIndex = self.rowConditions[j];\r\n\r\n\t\t\t\t\tvar divImg = OAT.Dom.create(\"div\", { position: \"absolute\", right: \"-6px\", bottom: \"0px\"});\r\n\t\t\t\t\tOAT.addImageNode(divImg, \"arrow_drop_down\", \"\");\r\n\t\t\t\t\tvar divIcon = OAT.Dom.create(\"div\");\r\n\t\t\t\t\tdivIcon.className = \"div_settings\";\r\n\t\t\t\t\tOAT.addImageNode(divIcon, \"settings\", \"\");\r\n\t\t\t\t\tif (cond != undefined) {\r\n\t\t\t\t\t\tthis.updateSortImage(divImg, cond.sort);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.updateSortImage(divImg, 0);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tOAT.Dom.append([th, divCont], [divCont, div], [divCont, divImg], [div, divIcon], [tr, th]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\r\n\t\t\tif (self.ShowMeasuresAsRows) {\r\n\t\t\t\t//\"Measure\" Title\r\n\t\t\t\tvar largo = 80;\r\n\t\t\t\tvar th = OAT.Dom.create(\"th\", {}, \"h2title\");\r\n\t\t\t\tvar divCont = OAT.Dom.create(\"div\", { position: \"relative\", minWidth: largo + \"px\" });\r\n\t\t\t\tvar div = OAT.Dom.create(\"div\", { overflow: \"hidden\" });\r\n\r\n\t\t\t\tOAT.addTextNode(div, self.translations.GXPL_QViewerJSMeasures /*gx.getMessage(\"GXPL_QViewerJSMeasures\")*/ + \"\\u00A0\\u00A0\\u00A0\")\r\n\t\t\t\tOAT.Dom.append([th, divCont], [divCont, div], [tr, th]);\r\n\t\t\t\t//\"Value\" Title\r\n\t\t\t\tvar th = OAT.Dom.create(\"th\", {}, \"h2titlewhite\");\r\n\t\t\t\tvar div = OAT.Dom.create(\"div\");\r\n\r\n\t\t\t\tOAT.addTextNode(div, self.translations.GXPL_QViewerJSValue /*gx.getMessage(\"GXPL_QViewerJSValue\")*/)\r\n\t\t\t\tth.style.textAlign = \"end\"\r\n\t\t\t\tOAT.Dom.append([th, div], [tr, th]);\r\n\t\t\t}\r\n\r\n\r\n\t\t\tvar th = OAT.Dom.create(\"th\"); /* blank space above */\r\n\t\t\tif (!self.colConditions.length) {\r\n\t\t\t\tself._drawCorner(th, true);\r\n\t\t\t\tth.conditionIndex = -1;\r\n\t\t\t} else { th.style.border = \"none\"; }\r\n\t\t\tif (self.colStructure.span != null) {\r\n\t\t\t\tth.colSpan = self.colStructure.span + (self.options.headingBefore ? 1 : 0) + (self.options.totals ? 1 : 0);\r\n\t\t\t} else {\r\n\t\t\t\tth.colSpan = (self.options.headingBefore ? 1 : 0) + (self.options.totals ? 1 : 0);\r\n\t\t\t}\r\n\t\t\tif ((measures.length > 0) && (!self.ShowMeasuresAsRows)) {\r\n\t\t\t\ttr.appendChild(th);\r\n\t\t\t}\r\n\t\t\tif (self.colConditions.length) { /* blank space after */\r\n\t\t\t\tvar th = OAT.Dom.create(\"th\", { border: \"none\", width: \"0px;\" });\r\n\t\t\t\ttr.appendChild(th);\r\n\t\t\t}\r\n\t\t\t//if ((measures.length > 0) && (tr.cells[1] != undefined) && (tr.cells[1].textContent == \"\")) { tr.hidden = true; } //hideemptycolrow\r\n\t\t\t//else {\r\n\t\t\tself.appendRowToTable(tbody, tr, true);\r\n\t\t\t//}\r\n\t\t\t// MOVE FILTERS TO TOOLBAR\r\n\t\t\tif ((measures.length > 0) && (tr.cells[1] != undefined) && (tr.cells[1].textContent == \"\")) {\r\n\t\t\t\tvar toolbarTable = document.getElementById(self.controlName + \"_\" + self.query + \"_toolbar\");\r\n\t\t\t\tif (toolbarTable.rows[0])\r\n\t\t\t\t\ttoolbarTable.rows[0].appendChild(tr.cells[0]);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\r\n\t\tthis._drawColConditionsHeadingsCustom = function (tr, i, last) {\r\n\t\t\tvar cond = self.conditions[self.colConditions[i]];\r\n\t\t\tvar th = OAT.Dom.create(\"th\", { cursor: \"pointer\" }, \"h2title\");\r\n\t\t\tvar largo = (self.headerRow[self.colConditions[i]].length > 8) ? ((self.headerRow[self.colConditions[i]].length + 3) * 10) : 80;\r\n\t\t\tvar divCont = OAT.Dom.create(\"div\", { position: \"relative\", minWidth: largo + \"px\" });\r\n\t\t\tif (last) {\r\n\t\t\t\tth.style.borderRightColor = \"transparent\";\r\n\t\t\t}\r\n\t\t\tvar div = OAT.Dom.create(\"div\", { overflow: \"hidden\" });\r\n\t\t\t\r\n\t\t\t\tOAT.addTextNode(div, self.headerRow[self.colConditions[i]].replace(/ /g, \"\\u00A0\") + \"\\u00A0\\u00A0\\u00A0\")\r\n\t\t\t\r\n\t\t\tif ((self.GeneralDataRows.length > 0) || (self.serverPagination)) {\r\n\t\t\t\tvar resp = self.getClickReference(cond, self.colConditions[i], div);\r\n\t\t\t\tvar ref = resp[0]\r\n\t\t\t\tvar anchorRef = resp[1]\r\n\r\n\t\t\t\tOAT.Dom.attach(th, \"click\", ref);\r\n\t\t\t\tvar callback = self.getOrderReference(self.colConditions[i], anchorRef, ref, div);\r\n\t\t\t\tself.gd.addSource(div, self.process, callback);\r\n\t\t\t\tself.gd.addTarget(th);\r\n\t\t\t}\r\n\t\t\tvar divImg = OAT.Dom.create(\"div\", { position: \"absolute\", right: \"0px\", bottom: \"2px\", width: \"12px\", height: \"12px\" });\r\n\t\t\tOAT.addImageNode(divImg, \"arrow_drop_down\", \"\");\r\n\t\t\tvar divIcon = OAT.Dom.create(\"div\");\r\n\t\t\tdivIcon.className = \"div_settings\";\r\n\t\t\tOAT.addImageNode(divIcon, \"settings\", \"\");\r\n\t\t\ttry {\r\n\t\t\t\tthis.updateSortImage(divImg, cond.sort);\r\n\t\t\t} catch (error) { }\r\n\t\t\tdivCont.appendChild(div);\r\n\t\t\tdiv.appendChild(divIcon);\r\n\t\t\tdivCont.appendChild(divImg);\r\n\t\t\t\r\n\r\n\t\t\tth.conditionIndex = self.colConditions[i];\r\n\t\t\tth.appendChild(divCont);\r\n\t\t\t//th.hidden = true;\r\n\t\t\ttr.appendChild(th);\r\n\r\n\t\t\treturn tr;\r\n\t\t}\r\n\r\n\t\tthis._drawColConditionsHeadings = function (tr, i) {\r\n\t\t\tvar cond = self.conditions[self.colConditions[i]];\r\n\t\t\tvar th = OAT.Dom.create(\"th\", { cursor: \"pointer\" }, \"even gx-pv-even-row\");\r\n\t\t\tvar div = OAT.Dom.create(\"div\");\r\n\t\t\tOAT.addTextNode(div, self.headerRow[self.colConditions[i]])\r\n\t\t\tvar resp = self.getClickReference(cond, self.colConditions[i], div);\r\n\t\t\tvar ref = resp[0]\r\n\t\t\tvar anchorRef = resp[1]\r\n\t\t\tOAT.Dom.attach(th, \"click\", ref);\r\n\t\t\tvar callback = self.getOrderReference(self.colConditions[i], anchorRef, ref, div);\r\n\t\t\tself.gd.addSource(div, self.process, callback);\r\n\t\t\tself.gd.addTarget(th);\r\n\t\t\tth.conditionIndex = self.colConditions[i];\r\n\t\t\tth.appendChild(div);\r\n\t\t\tth.hidden = true;\r\n\r\n\r\n\t\t\t/////////////////////////////////////////////////// MOVE FILTERS TO TOOLBAR\r\n\t\t\tif (th.textContent == self.headerRow[self.colConditions[i]]) {\r\n\t\t\t\tvar toolbarTable = document.getElementById(self.controlName + \"_\" + self.query + \"_toolbar\");\r\n\t\t\t\tth.hidden = false;\r\n\t\t\t\tif (toolbarTable.rows[0])\r\n\t\t\t\t\ttoolbarTable.rows[0].appendChild(th);\r\n\t\t\t}\r\n\t\t\t/////////////////////////////////////////////////// MOVE FILTERS TO TOOLBAR\r\n\t\t}\r\n\r\n\t\tthis.getClassName = function (i, j) { /* decide odd/even class */\r\n\t\t\treturn \"even gx-pv-even-row\";\r\n\t\t}\r\n\r\n\t\tthis.setStyleValues = function (elem, styleValues) {\r\n\t\t\tfunction hexToRgb(hex) {\r\n\t\t\t\t// Expand shorthand form (e.g. \"03F\") to full form (e.g. \"0033FF\")\r\n\t\t\t\tvar shorthandRegex = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\r\n\t\t\t\thex = hex.replace(shorthandRegex, function (m, r, g, b) {\r\n\t\t\t\t\treturn r + r + g + g + b + b;\r\n\t\t\t\t});\r\n\r\n\t\t\t\tvar result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\r\n\t\t\t\treturn result ? {\r\n\t\t\t\t\tr: parseInt(result[1], 16),\r\n\t\t\t\t\tg: parseInt(result[2], 16),\r\n\t\t\t\t\tb: parseInt(result[3], 16)\r\n\t\t\t\t} : null;\r\n\t\t\t}\r\n\r\n\t\t\tvar styleSplit = styleValues.split(\";\");\r\n\t\t\tfor (var j = 0; j < styleSplit.length; j++) {\r\n\t\t\t\tvar particularStyleSplit = styleSplit[j].split(\":\");\r\n\t\t\t\tvar property = particularStyleSplit[0].replace(/^[\\s]+/, '').replace(/[\\s]+$/, '').replace(/[\\s]{2,}/, ' '); //qv.util.trim(particularStyleSplit[0]);\r\n\t\t\t\tvar value = particularStyleSplit[1].replace(/^[\\s]+/, '').replace(/[\\s]+$/, '').replace(/[\\s]{2,}/, ' ');    //qv.util.trim(particularStyleSplit[1]);\r\n\r\n\t\t\t\tswitch (property) {\r\n\t\t\t\t\tcase \"color\": if ((value[0] != undefined) && (value[0] === '#')) {\r\n\t\t\t\t\t\telem.style.color = 'rgb(' + hexToRgb(value).r + ',' + hexToRgb(value).g + ',' + hexToRgb(value).b + ')'\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\telem.style.color = value;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"fontStyle\": elem.style.fontStyle = value;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"backgroundColor\": elem.style.backgroundColor = value;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"textDecoration\": elem.style.textDecoration = value;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"fontWeight\": elem.style.fontWeight = value;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"fontFamily\": elem.style.fontFamily = value;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"fontVariant\": elem.style.fontVariant = value;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"fontSize\": elem.style.fontSize = value.replace(\"px\", \"\") + \"px\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"textAlign\": elem.style.textAlign = value;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"lineHeight\": elem.style.lineHeight = value;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"textIndent\": elem.style.textIndent = value;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"verticalAlign\": elem.style.verticalAlign = value;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"wordSpacing\": elem.style.wordSpacing = value;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"display\": elem.style.display = value;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"borderThickness\": elem.style.borderThickness = value;\r\n\t\t\t\t\t\telem.style.borderWidth = value + \"px\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"borderColor\": elem.style.borderColor = value;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"borderWith\": elem.style.borderWith = value;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"borderStyle\": elem.style.borderStyle = value;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"padding\": elem.style.padding = value;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"paddingBottom\": elem.style.paddingBottom = value;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"paddingLeft\": elem.style.paddingLeft = value;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"paddingRight\": elem.style.paddingRight = value;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"paddingTop\": elem.style.paddingTop = value;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn elem;\r\n\t\t}\r\n\r\n\t\tthis.underRecursionStyle = [];\r\n\t\tthis.applyFormatValues = function (th, value, columnNumber) { /* Format for dimensions (\"header columns\") */\r\n\t\t\tvar columndatatype = self.columns[columnNumber].getAttribute(\"dataType\");\r\n\t\t\tif (columndatatype == \"date\") {\r\n\t\t\t\tvalue = self.dimensionPictureValue(value, columnNumber)\r\n\t\t\t}\r\n\t\t\t//apply default format\r\n\t\t\tvar defaultFormats = self.columns[columnNumber].getAttribute(\"format\");\r\n\t\t\tif ((defaultFormats != null) && (defaultFormats != \"\")) {\r\n\t\t\t\tth = self.setStyleValues(th, defaultFormats);\r\n\t\t\t}\r\n\t\t\t//apply format value\r\n\t\t\tself.underRecursionStyle = [];\r\n\t\t\tfor (var i = 0; i < self.formatValues.length; i++) {\r\n\t\t\t\tif (self.formatValues[i].columnNumber == columnNumber) { //a format for this column\r\n\t\t\t\t\tif (self.formatValues[i].value === value.trimpivot()) {\r\n\t\t\t\t\t\tth = self.setStyleValues(th, self.formatValues[i].format);\r\n\t\t\t\t\t\tif ((self.formatValues[i].recursive != undefined) && (self.formatValues[i].recursive == \"yes\")) {\r\n\t\t\t\t\t\t\tself.underRecursionStyle.push(self.formatValues[i]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar measureDataType = self.columns[columnNumber].getAttribute(\"dataType\");\r\n\t\t\t//apply conditional values\r\n\t\t\tvar equal = [];\r\n\t\t\tvar notequal = [];\r\n\t\t\tvar greaterThan = [];\r\n\t\t\tvar greaterOrEqual = [];\r\n\t\t\tvar lessThan = [];\r\n\t\t\tvar lessOrEqual = [];\r\n\t\t\tvar greaterOrEqual = [];\r\n\t\t\tvar between = [];\r\n\t\t\tfor (var i = 0; i < self.conditionalFormatsColumns.length; i++) {\r\n\t\t\t\tif (self.conditionalFormatsColumns[i].columnNumber == columnNumber) {\r\n\t\t\t\t\tif (self.conditionalFormatsColumns[i].operation1 == \"equal\") {\r\n\t\t\t\t\t\tif ((measureDataType === \"real\") || (measureDataType === \"integer\")) {\r\n\t\t\t\t\t\t\tequal[0] = parseFloat(self.conditionalFormatsColumns[i].value1);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tequal[0] = self.conditionalFormatsColumns[i].value1\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tequal[1] = self.conditionalFormatsColumns[i].format;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (self.conditionalFormatsColumns[i].operation1 == \"notequal\") {\r\n\t\t\t\t\t\tif ((measureDataType === \"real\") || (measureDataType === \"integer\")) {\r\n\t\t\t\t\t\t\tnotequal[0] = parseFloat(self.conditionalFormatsColumns[i].value1);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tnotequal[0] = self.conditionalFormatsColumns[i].value1\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tnotequal[1] = self.conditionalFormatsColumns[i].format;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (self.conditionalFormatsColumns[i].operation1 == \"less\") {\r\n\t\t\t\t\t\tif ((measureDataType === \"real\") || (measureDataType === \"integer\")) {\r\n\t\t\t\t\t\t\tlessThan[0] = parseFloat(self.conditionalFormatsColumns[i].value1);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tlessThan[0] = self.conditionalFormatsColumns[i].value1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tlessThan[1] = self.conditionalFormatsColumns[i].format;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (self.conditionalFormatsColumns[i].operation1 == \"greater\") {\r\n\t\t\t\t\t\tif ((measureDataType === \"real\") || (measureDataType === \"integer\")) {\r\n\t\t\t\t\t\t\tgreaterThan[0] = parseFloat(self.conditionalFormatsColumns[i].value1);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tgreaterThan[0] = self.conditionalFormatsColumns[i].value1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tgreaterThan[1] = self.conditionalFormatsColumns[i].format;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ((self.conditionalFormatsColumns[i].operation1 == \"greaterequal\") && (self.conditionalFormatsColumns[i].operation2 == undefined)) {\r\n\t\t\t\t\t\tif ((measureDataType === \"real\") || (measureDataType === \"integer\")) {\r\n\t\t\t\t\t\t\tgreaterOrEqual[0] = parseFloat(self.conditionalFormatsColumns[i].value1);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tgreaterOrEqual[0] = self.conditionalFormatsColumns[i].value1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tgreaterThan[1] = self.conditionalFormatsColumns[i].format;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (self.conditionalFormatsColumns[i].operation1 == \"lessequal\") {\r\n\t\t\t\t\t\tif ((measureDataType === \"real\") || (measureDataType === \"integer\")) {\r\n\t\t\t\t\t\t\tlessOrEqual[0] = parseFloat(self.conditionalFormatsColumns[i].value1);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tlessOrEqual[0] = self.conditionalFormatsColumns[i].value1\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tlessThan[1] = self.conditionalFormatsColumns[i].format;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (self.conditionalFormatsColumns[i].operation2 && self.conditionalFormatsColumns[i].operation1 == \"greaterequal\") {  //when interval\r\n\t\t\t\t\t\t//greaterOrEqual = []\r\n\t\t\t\t\t\tif ((measureDataType === \"real\") || (measureDataType === \"integer\")) {\r\n\t\t\t\t\t\t\tbetween[0] = parseFloat(self.conditionalFormatsColumns[i].value1);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tbetween[0] = self.conditionalFormatsColumns[i].value1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (self.conditionalFormatsColumns[i].operation2 && self.conditionalFormatsColumns[i].operation2 == \"lessequal\") {\r\n\t\t\t\t\t\t\tif ((measureDataType === \"real\") || (measureDataType === \"integer\")) {\r\n\t\t\t\t\t\t\t\tbetween[1] = parseFloat(self.conditionalFormatsColumns[i].value2);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tbetween[1] = self.conditionalFormatsColumns[i].value2;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tbetween[2] = self.conditionalFormatsColumns[i].format;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar comparisons = new Array(3);\r\n\r\n\t\t\tth.style.textAlign = \"start\";\r\n\t\t\tif (measureDataType === \"real\") {\r\n\t\t\t\tth.style.textAlign = \"start\";\r\n\t\t\t\tvalue = parseFloat(value);\r\n\t\t\t}\r\n\r\n\t\t\tif (measureDataType === \"integer\") {\r\n\r\n\t\t\t\tth.style.textAlign = \"right\";\r\n\t\t\t\tvalue = parseInt(value);\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif (measureDataType === \"real\") {\r\n\t\t\t\tth.style.textAlign = \"end\";\r\n\t\t\t}\r\n\r\n\t\t\tif (measureDataType != \"date\") {\r\n\t\t\t\tif ((equal[0] != undefined) && (value == equal[0])) {\r\n\t\t\t\t\tth = self.setStyleValues(th, equal[1]);\r\n\t\t\t\t}\r\n\t\t\t\tif ((notequal[0] != undefined) && (value != notequal[0])) {\r\n\t\t\t\t\tth = self.setStyleValues(th, notequal[1]);\r\n\t\t\t\t}\r\n\t\t\t\tif (((greaterThan[0] != undefined) && (value > greaterThan[0])) ||\r\n\t\t\t\t\t((greaterOrEqual[0] != undefined) && (value >= greaterOrEqual[0]))) {\r\n\t\t\t\t\tth = self.setStyleValues(th, greaterThan[1]);\r\n\t\t\t\t}\r\n\t\t\t\tif (((lessThan[0] != undefined) && (value < lessThan[0])) ||\r\n\t\t\t\t\t((lessOrEqual[0] != undefined) && (value <= lessOrEqual[0]))) {\r\n\t\t\t\t\tth = self.setStyleValues(th, lessThan[1]);\r\n\t\t\t\t}\r\n\t\t\t\tif ((between[0] != undefined && between[1] != undefined) && (value >= between[0] && value <= between[1])) {\r\n\t\t\t\t\tth = self.setStyleValues(th, between[2]);\r\n\t\t\t\t}\r\n\t\t\t\treturn th;\r\n\t\t\t}\r\n\r\n\r\n\t\t\tif (measureDataType === \"date\") {\r\n\t\t\t\tth.style.textAlign = \"right\";\r\n\t\t\t\tvar dates = value.split(\"-\");\r\n\t\t\t\tif ((self.defaultPicture.getAttribute(\"dateFormat\") != undefined) && (self.defaultPicture.getAttribute(\"dateFormat\") != null)) {\r\n\t\t\t\t\tpicture = self.defaultPicture.getAttribute(\"dateFormat\").split(\"\");\r\n\t\t\t\t}\r\n\t\t\t\tvar dateElements = new Array(3);\r\n\t\t\t\tdateElements[0] = parseInt(dates[0]);\r\n\t\t\t\tdateElements[1] = parseInt(dates[1]);\r\n\t\t\t\tdateElements[2] = parseInt(dates[2]);\r\n\r\n\r\n\t\t\t\tif ((greaterThan[0] != undefined)) {\r\n\t\t\t\t\tvar cmpar = greaterThan[0].split(\"-\");\r\n\t\t\t\t\tvar cmparElements = new Array(3);\r\n\t\t\t\t\tcmparElements[1] = parseInt(cmpar[1]);\r\n\t\t\t\t\tcmparElements[2] = parseInt(cmpar[2]);\r\n\t\t\t\t\tcmparElements[0] = parseInt(cmpar[0]);\r\n\r\n\t\t\t\t\tif ((cmparElements[0] < dateElements[0]) || ((cmparElements[0] <= dateElements[0]) && (cmparElements[1] < dateElements[1]))\r\n\t\t\t\t\t\t|| ((cmparElements[0] <= dateElements[0]) && (cmparElements[1] <= dateElements[1]) && (cmparElements[2] < dateElements[2]))) {\r\n\t\t\t\t\t\tth = self.setStyleValues(th, greaterThan[1]);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\tif ((lessThan[0] != undefined)) {\r\n\t\t\t\t\tvar cmpar = lessThan[0].split(\"-\");\r\n\t\t\t\t\tcmparElements = new Array(3);\r\n\t\t\t\t\tcmparElements[1] = parseInt(cmpar[1]);\r\n\t\t\t\t\tcmparElements[2] = parseInt(cmpar[2]);\r\n\t\t\t\t\tcmparElements[0] = parseInt(cmpar[0]);\r\n\r\n\t\t\t\t\tif ((cmparElements[0] > dateElements[0]) || ((cmparElements[0] >= dateElements[0]) && (cmparElements[1] > dateElements[1]))\r\n\t\t\t\t\t\t|| ((cmparElements[0] >= dateElements[0]) && (cmparElements[1] >= dateElements[1]) && (cmparElements[2] > dateElements[2]))) {\r\n\t\t\t\t\t\tth = self.setStyleValues(th, lessThan[1]);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ((between[0] != undefined) && (between[1] != undefined)) {\r\n\t\t\t\t\tvar cmpar = between[0].split(\"-\");\r\n\t\t\t\t\tvar cmpar2 = between[1].split(\"-\");\r\n\t\t\t\t\tcmparElements = new Array(3);\r\n\t\t\t\t\tcmparElements2 = new Array(3);\r\n\t\t\t\t\tcmparElements[1] = parseInt(cmpar[1]);\r\n\t\t\t\t\tcmparElements[2] = parseInt(cmpar[2]);\r\n\t\t\t\t\tcmparElements[0] = parseInt(cmpar[0]);\r\n\r\n\t\t\t\t\tcmparElements2[1] = parseInt(cmpar2[1]);\r\n\t\t\t\t\tcmparElements2[2] = parseInt(cmpar2[2]);\r\n\t\t\t\t\tcmparElements2[0] = parseInt(cmpar2[0]);\r\n\r\n\t\t\t\t\tif (((cmparElements[0] <= dateElements[0]) || ((cmparElements[0] <= dateElements[0]) && (cmparElements[1] < dateElements[1]))\r\n\t\t\t\t\t\t|| ((cmparElements[0] <= dateElements[0]) && (cmparElements[1] <= dateElements[1]) && (cmparElements[2] < dateElements[2])))\r\n\t\t\t\t\t\t&&\r\n\t\t\t\t\t\t((cmparElements2[0] > dateElements[0]) || ((cmparElements2[0] >= dateElements[0]) && (cmparElements2[1] > dateElements[1]))\r\n\t\t\t\t\t\t\t|| ((cmparElements2[0] >= dateElements[0]) && (cmparElements2[1] >= dateElements[1]) && (cmparElements2[2] > dateElements[2])))\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\tth = self.setStyleValues(th, between[2]);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\r\n\t\t\tif (value > greaterThan[0]) {\r\n\t\t\t\tth = self.setStyleValues(th, greaterThan[1]);\r\n\t\t\t} else {\r\n\t\t\t\tif (value < lessThan[0]) {\r\n\t\t\t\t\tth = self.setStyleValues(th, lessThan[1]);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (value >= between[0] && value <= between[1]) {\r\n\t\t\t\t\t\tth = self.setStyleValues(th, between[2]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn th;\r\n\t\t}\r\n\r\n\t\tthis.applyConditionalFormats = function (td, value, lastMEasure, measureNumber) { /* format for measures (row data) */\r\n\t\t\tif (measures.length > 0) {\r\n\t\t\t\tvar defaultFormats;\r\n\t\t\t\tvar measureDataType;\r\n\t\t\t\tif (lastMEasure) {\r\n\t\t\t\t\tmeasureNumber = measures.length - 1;\r\n\t\t\t\t\tmeasureDataType = measures[measures.length - 1].getAttribute(\"dataType\");\r\n\t\t\t\t\tdefaultFormats = measures[measures.length - 1].getAttribute(\"format\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tmeasureDataType = measures[measureNumber].getAttribute(\"dataType\");\r\n\t\t\t\t\tdefaultFormats = measures[measureNumber].getAttribute(\"format\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//apply default format\r\n\t\t\t\tif ((defaultFormats != null) && (defaultFormats != \"\")) {\r\n\t\t\t\t\ttd = self.setStyleValues(td, defaultFormats);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//apply format value\r\n\t\t\t\tfor (var i = 0; i < self.formatValuesMeasures.length; i++) {\r\n\t\t\t\t\tif (self.formatValuesMeasures[i].columnNumber == measureNumber) { //a format for this column\r\n\t\t\t\t\t\tif (self.formatValuesMeasures[i].value === value) {\r\n\t\t\t\t\t\t\ttd = self.setStyleValues(td, self.formatValuesMeasures[i].format);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (self.underRecursionStyle) {\r\n\t\t\t\t\tfor (var i = 0; i < self.underRecursionStyle.length; i++) {\r\n\t\t\t\t\t\ttd = self.setStyleValues(td, self.underRecursionStyle[i].format);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t//apply conditional values\r\n\t\t\t\tvar equal = [];\r\n\t\t\t\tvar notequal = [];\r\n\t\t\t\tvar greaterThan = [];\r\n\t\t\t\tvar greaterOrEqual = [];\r\n\t\t\t\tvar lessThan = [];\r\n\t\t\t\tvar lessOrEqual = [];\r\n\t\t\t\tvar greaterOrEqual = [];\r\n\t\t\t\tvar between = [];\r\n\t\t\t\tfor (var i = 0; i < self.conditionalFormats.length; i++) {\r\n\t\t\t\t\tif (self.conditionalFormats[i].columnNumber == measureNumber) {\r\n\t\t\t\t\t\tif (self.conditionalFormats[i].operation1 == \"equal\") {\r\n\t\t\t\t\t\t\tif ((measureDataType === \"real\") || (measureDataType === \"integer\")) {\r\n\t\t\t\t\t\t\t\tequal[0] = parseFloat(self.conditionalFormats[i].value1);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tequal[0] = self.conditionalFormats[i].value1\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tequal[1] = self.conditionalFormats[i].format;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (self.conditionalFormats[i].operation1 == \"notequal\") {\r\n\t\t\t\t\t\t\tif ((measureDataType === \"real\") || (measureDataType === \"integer\")) {\r\n\t\t\t\t\t\t\t\tnotequal[0] = parseFloat(self.conditionalFormats[i].value1);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tnotequal[0] = self.conditionalFormats[i].value1\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tnotequal[1] = self.conditionalFormats[i].format;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (self.conditionalFormats[i].operation1 == \"less\") {\r\n\t\t\t\t\t\t\tif ((measureDataType === \"real\") || (measureDataType === \"integer\")) {\r\n\t\t\t\t\t\t\t\tlessThan[0] = parseFloat(self.conditionalFormats[i].value1);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tlessThan[0] = self.conditionalFormats[i].value1\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tlessThan[1] = self.conditionalFormats[i].format;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif ((self.conditionalFormats[i].operation1 == \"lessequal\") && (!self.conditionalFormats[i].operation2)) {\r\n\t\t\t\t\t\t\tif ((measureDataType === \"real\") || (measureDataType === \"integer\")) {\r\n\t\t\t\t\t\t\t\tlessOrEqual[0] = parseFloat(self.conditionalFormats[i].value1);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tlessOrEqual[0] = self.conditionalFormats[i].value1\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tlessThan[1] = self.conditionalFormats[i].format;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (self.conditionalFormats[i].operation1 == \"greater\") {\r\n\t\t\t\t\t\t\tif ((measureDataType === \"real\") || (measureDataType === \"integer\")) {\r\n\t\t\t\t\t\t\t\tgreaterThan[0] = parseFloat(self.conditionalFormats[i].value1);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tgreaterThan[0] = self.conditionalFormats[i].value1;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tgreaterThan[1] = self.conditionalFormats[i].format;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif ((self.conditionalFormats[i].operation1 == \"greaterequal\") && (!self.conditionalFormats[i].operation2)) {\r\n\t\t\t\t\t\t\tif ((measureDataType === \"real\") || (measureDataType === \"integer\")) {\r\n\t\t\t\t\t\t\t\tgreaterOrEqual[0] = parseFloat(self.conditionalFormats[i].value1);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tgreaterOrEqual[0] = self.conditionalFormats[i].value1;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tgreaterThan[1] = self.conditionalFormats[i].format;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (self.conditionalFormats[i].operation2 && self.conditionalFormats[i].operation1 == \"greaterequal\") {  //when interval\r\n\t\t\t\t\t\t\t//greaterOrEqual = []\r\n\t\t\t\t\t\t\tif ((measureDataType === \"real\") || (measureDataType === \"integer\")) {\r\n\t\t\t\t\t\t\t\tbetween[0] = parseFloat(self.conditionalFormats[i].value1);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tbetween[0] = self.conditionalFormats[i].value1;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (self.conditionalFormats[i].operation2 && self.conditionalFormats[i].operation2 == \"lessequal\") {\r\n\t\t\t\t\t\t\t\tif ((measureDataType === \"real\") || (measureDataType === \"integer\")) {\r\n\t\t\t\t\t\t\t\t\tbetween[1] = parseFloat(self.conditionalFormats[i].value2);\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tbetween[1] = self.conditionalFormats[i].value2;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tbetween[2] = self.conditionalFormats[i].format;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (measureDataType != \"date\") {\r\n\t\t\t\t\tif ((equal[0] != undefined) && (value == equal[0])) {\r\n\t\t\t\t\t\ttd = self.setStyleValues(td, equal[1]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ((notequal[0] != undefined) && (value != notequal[0])) {\r\n\t\t\t\t\t\ttd = self.setStyleValues(td, notequal[1]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (((greaterThan[0] != undefined) && (value > greaterThan[0])) ||\r\n\t\t\t\t\t\t((greaterOrEqual[0] != undefined) && (value >= greaterOrEqual[0]))) {\r\n\t\t\t\t\t\ttd = self.setStyleValues(td, greaterThan[1]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (((lessThan[0] != undefined) && (value < lessThan[0])) ||\r\n\t\t\t\t\t\t((lessOrEqual[0] != undefined) && (value <= lessOrEqual[0]))) {\r\n\t\t\t\t\t\ttd = self.setStyleValues(td, lessThan[1]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ((between[0] != undefined && between[1] != undefined) && (value >= between[0] && value <= between[1])) {\r\n\t\t\t\t\t\ttd = self.setStyleValues(td, between[2]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (measureDataType === \"date\") {\r\n\t\t\t\t\tvar dates = value.split(\"-\");\r\n\t\t\t\t\tif ((self.defaultPicture.getAttribute(\"dateFormat\") != undefined) && (self.defaultPicture.getAttribute(\"dateFormat\") != null)) {\r\n\t\t\t\t\t\tpicture = self.defaultPicture.getAttribute(\"dateFormat\").split(\"\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar dateElements = new Array(3);\r\n\t\t\t\t\tdateElements[0] = parseInt(dates[0]);\r\n\t\t\t\t\tdateElements[1] = parseInt(dates[1]);\r\n\t\t\t\t\tdateElements[2] = parseInt(dates[2]);\r\n\t\t\t\t\t//for (var i=0; i<=2; i++ ){\r\n\t\t\t\t\t//if (picture[i] != undefined){\r\n\t\t\t\t\t//\tif (picture[i] === \"M\") dateElements[1] = parseInt(dates[1]);\r\n\t\t\t\t\t//\tif (picture[i] === \"D\") dateElements[2] = parseInt(dates[2]);\r\n\t\t\t\t\t//\tif (picture[i] === \"Y\") dateElements[0] = parseInt(dates[0]);\r\n\t\t\t\t\t//} //falta el caso en que no hay picture por defecto\r\n\t\t\t\t\t//}\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tif ((equal[0] != undefined) || (greaterOrEqual[0] != undefined) || (lessOrEqual[0] != undefined)) {\r\n\t\t\t\t\t\t\tvar cmpar;\r\n\t\t\t\t\t\t\tif (equal[0] != undefined) {\r\n\t\t\t\t\t\t\t\tcmpar = equal[0].split(\"-\");\r\n\t\t\t\t\t\t\t} else if (greaterOrEqual[0] != undefined) {\r\n\t\t\t\t\t\t\t\tcmpar = greaterOrEqual[0].split(\"-\");\r\n\t\t\t\t\t\t\t} else if (greaterOrEqual[0] != undefined) {\r\n\t\t\t\t\t\t\t\tcmpar = lessOrEqual[0].split(\"-\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tvar cmparElements = new Array(3);\r\n\t\t\t\t\t\t\tcmparElements[1] = parseInt(cmpar[1]);\r\n\t\t\t\t\t\t\tcmparElements[2] = parseInt(cmpar[2]);\r\n\t\t\t\t\t\t\tcmparElements[0] = parseInt(cmpar[0]);\r\n\r\n\t\t\t\t\t\t\tif ((cmparElements[0] == dateElements[0]) || ((cmparElements[0] == dateElements[0]) && (cmparElements[1] == dateElements[1]))) {\r\n\t\t\t\t\t\t\t\tif (equal[1] != undefined)\r\n\t\t\t\t\t\t\t\t\ttd = self.setStyleValues(td, equal[1]);\r\n\t\t\t\t\t\t\t\telse if (greaterThan[1] != undefined)\r\n\t\t\t\t\t\t\t\t\ttd = self.setStyleValues(td, greaterThan[1]);\r\n\t\t\t\t\t\t\t\telse if (lessThan[1] != undefined)\r\n\t\t\t\t\t\t\t\t\ttd = self.setStyleValues(td, lessThan[1]);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif ((notequal[0] != undefined)) {\r\n\t\t\t\t\t\t\tvar cmpar = notequal[0].split(\"-\");\r\n\t\t\t\t\t\t\tvar cmparElements = new Array(3);\r\n\t\t\t\t\t\t\tcmparElements[1] = parseInt(cmpar[1]);\r\n\t\t\t\t\t\t\tcmparElements[2] = parseInt(cmpar[2]);\r\n\t\t\t\t\t\t\tcmparElements[0] = parseInt(cmpar[0]);\r\n\r\n\t\t\t\t\t\t\tif ((cmparElements[0] != dateElements[0]) || ((cmparElements[0] != dateElements[0]) && (cmparElements[1] != dateElements[1]))) {\r\n\t\t\t\t\t\t\t\ttd = self.setStyleValues(td, notequal[1]);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif ((greaterThan[0] != undefined) || (greaterOrEqual[0] != undefined)) {\r\n\t\t\t\t\t\t\tvar cmpar;\r\n\t\t\t\t\t\t\tif (greaterThan[0].split(\"-\") != undefined) {\r\n\t\t\t\t\t\t\t\tcmpar = greaterThan[0].split(\"-\");\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tcmpar = greaterOrEqual[0].split(\"-\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tvar cmparElements = new Array(3);\r\n\t\t\t\t\t\t\tcmparElements[1] = parseInt(cmpar[1]);\r\n\t\t\t\t\t\t\tcmparElements[2] = parseInt(cmpar[2]);\r\n\t\t\t\t\t\t\tcmparElements[0] = parseInt(cmpar[0]);\r\n\r\n\t\t\t\t\t\t\tif ((cmparElements[0] < dateElements[0]) || ((cmparElements[0] <= dateElements[0]) && (cmparElements[1] < dateElements[1]))\r\n\t\t\t\t\t\t\t\t|| ((cmparElements[0] <= dateElements[0]) && (cmparElements[1] <= dateElements[1]) && (cmparElements[2] < dateElements[2]))) {\r\n\t\t\t\t\t\t\t\ttd = self.setStyleValues(td, greaterThan[1]);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\t\tif ((lessThan[0] != undefined) || (lessOrEqual[0] != undefined)) {\r\n\t\t\t\t\t\t\tvar cmpar;\r\n\t\t\t\t\t\t\tif (lessThan[0].split(\"-\") != undefined) {\r\n\t\t\t\t\t\t\t\tcmpar = lessThan[0].split(\"-\");\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tcmpar = lessOrEqual[0].split(\"-\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tcmparElements = new Array(3);\r\n\t\t\t\t\t\t\tcmparElements[1] = parseInt(cmpar[1]);\r\n\t\t\t\t\t\t\tcmparElements[2] = parseInt(cmpar[2]);\r\n\t\t\t\t\t\t\tcmparElements[0] = parseInt(cmpar[0]);\r\n\r\n\t\t\t\t\t\t\tif ((cmparElements[0] > dateElements[0]) || ((cmparElements[0] >= dateElements[0]) && (cmparElements[1] > dateElements[1]))\r\n\t\t\t\t\t\t\t\t|| ((cmparElements[0] >= dateElements[0]) && (cmparElements[1] >= dateElements[1]) && (cmparElements[2] > dateElements[2]))) {\r\n\t\t\t\t\t\t\t\ttd = self.setStyleValues(td, lessThan[1]);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif ((between[0] != undefined) && (between[1] != undefined)) {\r\n\t\t\t\t\t\t\tvar cmpar = between[0].split(\"-\");\r\n\t\t\t\t\t\t\tvar cmpar2 = between[1].split(\"-\");\r\n\t\t\t\t\t\t\tcmparElements = new Array(3);\r\n\t\t\t\t\t\t\tcmparElements2 = new Array(3);\r\n\t\t\t\t\t\t\tcmparElements[1] = parseInt(cmpar[1]);\r\n\t\t\t\t\t\t\tcmparElements[2] = parseInt(cmpar[2]);\r\n\t\t\t\t\t\t\tcmparElements[0] = parseInt(cmpar[0]);\r\n\r\n\t\t\t\t\t\t\tcmparElements2[1] = parseInt(cmpar2[1]);\r\n\t\t\t\t\t\t\tcmparElements2[2] = parseInt(cmpar2[2]);\r\n\t\t\t\t\t\t\tcmparElements2[0] = parseInt(cmpar2[0]);\r\n\r\n\t\t\t\t\t\t\tif (((cmparElements[0] <= dateElements[0]) || ((cmparElements[0] <= dateElements[0]) && (cmparElements[1] < dateElements[1]))\r\n\t\t\t\t\t\t\t\t|| ((cmparElements[0] <= dateElements[0]) && (cmparElements[1] <= dateElements[1]) && (cmparElements[2] < dateElements[2])))\r\n\t\t\t\t\t\t\t\t&&\r\n\t\t\t\t\t\t\t\t((cmparElements2[0] > dateElements[0]) || ((cmparElements2[0] >= dateElements[0]) && (cmparElements2[1] > dateElements[1]))\r\n\t\t\t\t\t\t\t\t\t|| ((cmparElements2[0] >= dateElements[0]) && (cmparElements2[1] >= dateElements[1]) && (cmparElements2[2] > dateElements[2])))\r\n\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\ttd = self.setStyleValues(td, between[2]);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} catch (ERROR) {\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\r\n\r\n\t\t\t}\r\n\t\t\treturn td;\r\n\r\n\t\t}\r\n\r\n\t\tthis.dimensionPictureValue = function (value, dimensionNumber) {  //Picture for dimensions values\r\n\t\t\tif (value == \"#NuN#\") {\r\n\t\t\t\tvar defaultNull = self.defaultPicture.getAttribute(\"textForNullValues\");\r\n\t\t\t\tif (defaultNull != undefined) {\r\n\t\t\t\t\treturn defaultNull;\r\n\t\t\t\t}\r\n\t\t\t\treturn \"\";\r\n\t\t\t}\r\n\t\t\tvar result = \"\";\r\n\t\t\tvar dat\r\n\t\t\tvar customPicture;\r\n\r\n\t\t\tdat = self.columns[dimensionNumber].getAttribute(\"dataType\");\r\n\t\t\tcustomPicture = self.columns[dimensionNumber].getAttribute(\"picture\");\r\n\t\t\tvar newValue = OAT.ApplyPictureValue(value, dat, self.defaultPicture, customPicture);\r\n\r\n\t\t\treturn newValue;\r\n\t\t}\r\n\r\n\t\tthis.getMeasureNumber = function (dataField, measures) {\r\n\t\t\tfor (var mI = 0; mI < measures.length; mI++) {\r\n\t\t\t\tif (measures[mI].getAttribute(\"dataField\") == dataField) {\r\n\t\t\t\t\treturn mI;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.getMeasureName = function (dataField, measures) {\r\n\t\t\tfor (var mI = 0; mI < measures.length; mI++) {\r\n\t\t\t\tif (measures[mI].getAttribute(\"dataField\") == dataField) {\r\n\t\t\t\t\treturn measures[mI].getAttribute(\"displayName\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.defaultPictureValue = function (value, lastMEasure, measureNumber) { //Picture for measures values\r\n\t\t\tif (value == \"#NuN#\") {\r\n\t\t\t\tvar defaultNull = self.defaultPicture.getAttribute(\"textForNullValues\");\r\n\t\t\t\tif (defaultNull != undefined) {\r\n\t\t\t\t\treturn defaultNull;\r\n\t\t\t\t}\r\n\t\t\t\treturn \"\";\r\n\t\t\t}\r\n\t\t\tif ((value == \"#NaV#\") || (isNaN(value))) {\r\n\t\t\t\treturn \"-\"\r\n\t\t\t}\r\n\t\t\tvar result = \"\";\r\n\t\t\tvar dat\r\n\t\t\tvar customPicture;\r\n\r\n\t\t\tif (measures.length > 0) {\r\n\t\t\t\tif (lastMEasure) {\r\n\t\t\t\t\tdat = measures[measures.length - 1].getAttribute(\"dataType\");\r\n\t\t\t\t\tcustomPicture = measures[measures.length - 1].getAttribute(\"picture\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdat = measures[measureNumber].getAttribute(\"dataType\");\r\n\t\t\t\t\tcustomPicture = measures[measureNumber].getAttribute(\"picture\");\r\n\t\t\t\t}\r\n\t\t\t\tvar newValue = OAT.ApplyPictureValue(value, dat, self.defaultPicture, customPicture);\r\n\t\t\t\treturn newValue;\r\n\t\t\t} else {\r\n\t\t\t\treturn value;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\tthis.countedRows = 0;\r\n\r\n\t\tthis.appendRowToTable = function (tbody, row, isTitleRow) {\r\n\t\t\tif ( (pageSize) && (!self.serverPagination)) {\r\n\t\t\t\tif (!isTitleRow) {\r\n\t\t\t\t\tself.countedRows++;\r\n\t\t\t\t}\r\n\t\t\t\tif (self.countedRows > pageSize) {\r\n\t\t\t\t\trow.style.display = \"none\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif ((self.serverPagination) && (self.ExportTo)) {\r\n\t\t\t\tif (!isTitleRow) {\r\n\t\t\t\t\tself.countedRows++;\r\n\t\t\t\t}\r\n\t\t\t\tif (self.countedRows > self.rowsPerPage) {\r\n\t\t\t\t\trow.style.display = \"none\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (isTitleRow) {\r\n\t\t\t\trow.setAttribute(\"title_row\", true);\r\n\t\t\t}\r\n\r\n\t\t\t\r\n\t\t\ttbody.appendChild(row);\r\n\t\t}\r\n\r\n\t\tthis.drawTableWhenServerPagination = function () {\r\n\t\t\tOAT.Dom.clear(self.div);\r\n\t\t\t// START create toolbar table\r\n\r\n\t\t\tself.div.setAttribute(\"class\", \"conteiner_table_div\");\r\n\t\t\tvar myTable = OAT.Dom.create(\"table\", {}, \"\");\r\n\t\t\tmyTable.id = self.controlName + \"_\" + self.query + \"_toolbar\";\r\n\t\t\tvar myTbody = OAT.Dom.create(\"tbody\");\r\n\t\t\tvar myRow = OAT.Dom.create(\"tr\");\r\n\t\t\tself.div.appendChild(myTable);\r\n\t\t\t// END\r\n\r\n\t\t\tvar table = OAT.Dom.create(\"table\", {}, \"pivot_table\");\r\n\t\t\ttable.id = this.controlName + \"_\" + this.query;\r\n\t\t\t//add control name and query name as the id of main table\r\n\t\t\tvar tbody = OAT.Dom.create(\"tbody\");\r\n\t\t\t\r\n\t\t\tself.drawTitleDiv();\r\n\t\t\tself.drawFilters();\r\n\t\t\tself.countedRows = 0;\r\n\t\t\tif (OAT.isIE()) {\r\n\t\t\t\tvar divIeContainer = document.createElement(\"div\");\r\n\t\t\t\tdivIeContainer.setAttribute(\"class\", \"divIeContainer\");\r\n\t\t\t\tself.div.appendChild(divIeContainer);\r\n\t\t\t\tOAT.Dom.append([table, tbody], [divIeContainer, table]);\r\n\t\t\t\ttable.style.marginBottom = \"0px\";\r\n\t\t\t} else {\r\n\t\t\t\tOAT.Dom.append([table, tbody], [self.div, table]);\r\n\t\t\t}\r\n\r\n\t\t\tself.countedRows = 0;\r\n\t\t\tvar firstRow;\r\n\t\t\tvar firstRowTotalSpan = self.colConditions.length;\r\n\t\t\tif (self.colConditions.length > 0) {\r\n\t\t\t\tvar i = 0;\r\n\t\t\t\tvar tr = OAT.Dom.create(\"tr\");\r\n\t\t\t\tself._drawRowConditionsHeadingsCustom(tr);\r\n\t\t\t\t// create a list of the dimension name, that are not pivot, with heigth span equal to   colConditions.length\r\n\t\t\t\tfor (var ni = 0; ni < self.colConditions.length; ni++) {// creat a list of the dimension name, that are pivot as columns\r\n\t\t\t\t\ttr = self._drawColConditionsHeadingsCustom(tr, ni, (ni === self.colConditions.length - 1));\r\n\t\t\t\t}\r\n\t\t\t\t//tr.setAttribute(\"title_row\", true);\r\n\t\t\t\tself.appendRowToTable(tbody, tr, true);//tbody.appendChild(tr);\r\n\t\t\t\tfirstRow = tr;\r\n\t\t\t}\r\n\t\t\ttry {\r\n\r\n\t\t\t\tfor (var i = 0; i < self.colConditions.length; i++) { //show columns particular values\r\n\t\t\t\t\tvar tr = OAT.Dom.create(\"tr\");\r\n\r\n\r\n\t\t\t\t\tvar j = 0\r\n\t\t\t\t\twhile (j < self.pageData.columnsHeaders.length) {\r\n\r\n\r\n\t\t\t\t\t\tvar h;\r\n\t\t\t\t\t\tif ((!self.pageData.columnsHeaders[j].subTotal)) {\r\n\t\t\t\t\t\t\th = j;\r\n\t\t\t\t\t\t\tvar colSpan = 1;\r\n\t\t\t\t\t\t\tvar columnValue = (self.pageData.columnsHeaders[j].subHeaders.length > i) ? self.pageData.columnsHeaders[j].subHeaders[i].value : \"\";\r\n\t\t\t\t\t\t\twhile ((j + 1 < self.pageData.columnsHeaders.length)\r\n\t\t\t\t\t\t\t\t&& ((!self.pageData.columnsHeaders[j + 1].subTotal) || (i < self.pageData.columnsHeaders[j + 1].subHeaders.length - 1))\r\n\t\t\t\t\t\t\t\t&& ((self.pageData.columnsHeaders[j + 1].subHeaders.length > i) && (self.pageData.columnsHeaders[j + 1].subHeaders[i].value == columnValue))) {\r\n\t\t\t\t\t\t\t\tcolSpan++;\r\n\t\t\t\t\t\t\t\tj++;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tj++;\r\n\r\n\r\n\t\t\t\t\t\t\tvar th = OAT.Dom.create(\"th\", {}, \"even gx-pv-even-row\");\r\n\t\t\t\t\t\t\tth.colSpan = colSpan;\r\n\t\t\t\t\t\t\tOAT.addTextNode(th, self.dimensionPictureValue(columnValue.trimpivot(), self.colConditions[i]))\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tself.setClickEventHandlers(th, columnValue, \"DIMENSION\", self.colConditions[i], { axis: \"columns\", columnnumber: h, columndimension: self.pageData.columnsHeaders[h], rownumber: i });\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tth = self.applyFormatValues(th, columnValue.trimpivot(), self.colConditions[i]);\r\n\t\t\t\t\t\t\ttr.appendChild(th);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tvar hiddenGrandTotal = (self.GrandTotalVisibility.TotalForColumns == \"No\" ) ? measures.length : 0;\r\n\t\t\t\t\t\t\tvar isGrandTotal = (j >= (self.pageData.columnsHeaders.length - measures.length + hiddenGrandTotal))\r\n\t\t\t\t\t\t\tif (self.ShowMeasuresAsRows) {\r\n\t\t\t\t\t\t\t\tisGrandTotal = ((j >= (self.pageData.columnsHeaders.length - 1)) && (self.GrandTotalVisibility.TotalForColumns == \"Yes\" ))\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (isGrandTotal) {\r\n\t\t\t\t\t\t\t\t//Grand Total\r\n\t\t\t\t\t\t\t\tif (self.GrandTotalVisibility.TotalForColumns == \"Yes\"){\r\n\t\t\t\t\t\t\t\t\tif (i == 0) {\r\n\t\t\t\t\t\t\t\t\t\tvar th = OAT.Dom.create(\"th\", {}, \"h2subtitle\");\r\n\t\t\t\t\t\t\t\t\t\tOAT.addTextNode(th, self.translations.GXPL_QViewerJSTotal/*gx.getMessage(\"GXPL_QViewerJSTotal\")*/)\r\n\t\t\t\t\t\t\t\t\t\tth.rowSpan = self.colConditions.length;\r\n\t\t\t\t\t\t\t\t\t\tif (!self.ShowMeasuresAsRows) {\r\n\t\t\t\t\t\t\t\t\t\t\tth.colSpan = measures.length;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\ttr.appendChild(th);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (!self.ShowMeasuresAsRows) {\r\n\t\t\t\t\t\t\t\t\tj = j + measures.length\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tj++;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t//subtotal columns\r\n\t\t\t\t\t\t\t\tif (i < self.pageData.columnsHeaders[j].subHeaders.length) {\r\n\t\t\t\t\t\t\t\t\tvar th = OAT.Dom.create(\"th\", {}, \"h2subtitle \");\r\n\r\n\t\t\t\t\t\t\t\t\tvar columnValue = (self.pageData.columnsHeaders[j].subHeaders.length > i) ? self.pageData.columnsHeaders[j].subHeaders[i].value : \"\";\r\n\t\t\t\t\t\t\t\t\tOAT.addTextNode(th, self.translations.GXPL_QViewerJSTotalFor/*gx.getMessage(\"GXPL_QViewerJSTotalFor\")*/ + \" \" + self.dimensionPictureValue(columnValue.trimpivot(), self.colConditions[i] ))\r\n\t\t\t\t\t\t\t\t\tself.setClickEventHandlers(th, self.translations.GXPL_QViewerJSTotalFor/*gx.getMessage(\"GXPL_QViewerJSTotalFor\")*/ + \" \" + self.dimensionPictureValue(columnValue.trimpivot(), self.colConditions[i] ),\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t \"DIMENSION\", self.colConditions[i], ['PtrTotals', columnValue, \"\", h, \"columns\", i]);\r\n\t\t\t\t\t\t\t\t\tth.rowSpan = self.colConditions.length - i;\r\n\t\t\t\t\t\t\t\t\tif (!self.ShowMeasuresAsRows) {\r\n\t\t\t\t\t\t\t\t\t\tth.colSpan = measures.length;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\ttr.appendChild(th);\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\tif (!self.ShowMeasuresAsRows) {\r\n\t\t\t\t\t\t\t\t\tj = j + measures.length\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tj++;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tself.appendRowToTable(tbody, tr, true);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (self.colConditions.length > 0) {\r\n\t\t\t\t\tif (self.pageData.columnsHeaders.length - self.colConditions.length > 0) { //fill first row\r\n\t\t\t\t\t\tvar th = OAT.Dom.create(\"th\", {}, \"h2subtitle \");\r\n\t\t\t\t\t\tOAT.addTextNode(th, \"\")\r\n\t\t\t\t\t\tth.colSpan = self.pageData.columnsHeaders.length - self.colConditions.length\r\n\t\t\t\t\t\tth.style.borderLeftColor = \"transparent\";\r\n\t\t\t\t\t\tfirstRow.appendChild(th);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t//add a column only with the name of  measures\r\n\t\t\t\t\tif (!self.ShowMeasuresAsRows) {\r\n\t\t\t\t\t\tvar tr = OAT.Dom.create(\"tr\");\r\n\t\t\t\t\t\tvar repeticiones = (self.pageData.columnsHeaders.length / measures.length)\r\n\t\t\t\t\t\tfor (var j = 0; j < repeticiones; j++) {\r\n\t\t\t\t\t\t\tfor (var m = 0; m < measures.length; m++) {\r\n\t\t\t\t\t\t\t\tvar th = OAT.Dom.create(\"th\", {}, \"h2titlewhite\");\r\n\t\t\t\t\t\t\t\tth.colSpan = 1;\r\n\t\t\t\t\t\t\t\tOAT.addTextNode(th, measures[m].attributes.getNamedItem(\"displayName\").nodeValue)\r\n\t\t\t\t\t\t\t\tself.setTitleTexrtAlign(th, th.textContent);\r\n\t\t\t\t\t\t\t\ttr.appendChild(th);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tself.appendRowToTable(tbody, tr, true);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//end of column only with the name of  measures\r\n\t\t\t\t}\r\n\r\n\r\n\r\n\t\t\t\t// first connector\r\n\t\t\t\tif ((self.rowConditions.length && self.options.headingBefore) && (self.colConditions.length === 0)) {\r\n\t\t\t\t\tself._drawRowConditionsHeadings(tbody);\r\n\t\t\t\t} else if ((self.rowConditions.length == 0) && (self.options.headingBefore) && (self.colConditions.length === 0)) {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tself._drawRowConditionsHeadings(tbody);\r\n\t\t\t\t\t} catch (Error) { }\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar several_totals = measures.length > 1;\r\n\t\t\t\tvar colSpan;\r\n\t\t\t\tif (several_totals) {\r\n\t\t\t\t\tcolSpan = self.rowConditions.length - (measures.length - 1);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcolSpan = self.rowConditions.length;\r\n\t\t\t\t}\r\n\t\t\t\tif (self.colConditions.length > 0) self.underRecursionStyle = [];\r\n\r\n\t\t\t\tvar lineaEnBlanco = false;\r\n\t\t\t\tvar skipRow = false;\r\n\t\t\t\t//for all rows\r\n\t\t\t\tfor (var i = 0; i < self.pageData.rows.length; i++) {\r\n\r\n\t\t\t\t\tvar tr = OAT.Dom.create(\"tr\");\r\n\t\t\t\t\tvar row = self.pageData.rows[i];\r\n\t\t\t\t\t// row header values\r\n\t\t\t\t\tfor (var j = 0; j < row.headers.length; j++) {\r\n\t\t\t\t\t\t//add collapse image option\r\n\t\t\t\t\t\tvar item = row.headers[j]\r\n\r\n\t\t\t\t\t\tif (item.rowSpan > 0) {\r\n\t\t\t\t\t\t\tvar th = OAT.Dom.create(\"th\", {}, \"even gx-pv-even-row\");\r\n\r\n\t\t\t\t\t\t\tth.rowSpan = item.rowSpan\r\n\r\n\t\t\t\t\t\t\tOAT.addTextNode(th, self.dimensionPictureValue(item.value.trimpivot(), self.rowConditions[j]))\r\n\t\t\t\t\t\t\t//picture for columns\r\n\t\t\t\t\t\t\tth = self.applyFormatValues(th, item.value, self.rowConditions[j]);\r\n\t\t\t\t\t\t\t//format for columns \r\n\t\t\t\t\t\t\t//event handlers\r\n\t\t\t\t\t\t\tself.setClickEventHandlers(th, item.value, \"DIMENSION\", self.rowConditions[j], { cell: j, row: row });\r\n\t\t\t\t\t\t\tif ((j < self.rowConditions.length - (measures.length - 1) - 1) && (!self.ShowMeasuresAsRows)) {\r\n\t\t\t\t\t\t\t\tvar itemCollapsed = (self.conditions[self.rowConditions[j]].collapsedValues.indexOf(item.value) != -1)\r\n\t\t\t\t\t\t\t\tth = self.addExpandCollapseFunctionality(th, item, j, !itemCollapsed, true);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tlineaEnBlanco = false;\r\n\t\t\t\t\t\t\ttr.appendChild(th);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t//add blank spaces when row is collapsed\r\n\t\t\t\t\tif (row.headers.length < self.rowConditions.length - (measures.length - 1)) {\r\n\t\t\t\t\t\tvar collapsedCells = self.rowConditions.length - (measures.length - 1) - row.headers.length;\r\n\t\t\t\t\t\tfor (var cc = 0; cc < collapsedCells; cc++) {\r\n\t\t\t\t\t\t\tvar th = OAT.Dom.create(\"th\", {}, \"even gx-pv-even-row\");\r\n\t\t\t\t\t\t\tOAT.addTextNode(th, \"\")\r\n\t\t\t\t\t\t\ttr.appendChild(th);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// blank space before\r\n\t\t\t\t\tif ((self.rowConditions.length - (measures.length - 1) == 0) && (i > 0) && (measures.length > 0)) {\r\n\t\t\t\t\t\tlineaEnBlanco = true;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (self.ShowMeasuresAsRows) {\r\n\t\t\t\t\t\t// add cell with measure name \r\n\t\t\t\t\t\tvar td = OAT.Dom.create(\"td\", {}, \"even gx-pv-even-row\");\r\n\r\n\t\t\t\t\t\tvar measureTitle = self.getMeasureName(row.dataField, measures);\r\n\t\t\t\t\t\tOAT.addTextNode(td, measureTitle)\r\n\t\t\t\t\t\ttd.style.textAlign = \"start\"\r\n\t\t\t\t\t\tself.setClickEventHandlers(td, measureTitle, \"MEASURE\", getMeasureNumberByName(measureTitle, measures), \"GrandTotal\");\r\n\r\n\t\t\t\t\t\ttr.appendChild(td);\r\n\t\t\t\t\t\t// end cell with measure name \r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// initial \"crude data\" part of a row, only the data of the measures shows in one column\r\n\t\t\t\t\tvar mesauresList = new Array();\r\n\r\n\t\t\t\t\tvar measureslength = measures.length;\r\n\t\t\t\t\tif (measureslength === 0) {\r\n\t\t\t\t\t\tmeasureslength = 1;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (!row.subTotal) { //value cells\r\n\t\t\t\t\t\tfor (var ji = 0; ji < row.cells.length; ji++) {\r\n\t\t\t\t\t\t\tvar value = row.cells[ji].value;\r\n\r\n\t\t\t\t\t\t\tif ((self.colConditions.length > 0) && (self.pageData.columnsHeaders[ji].subTotal)) { //subtotal or total column\r\n\t\t\t\t\t\t\t\tvar td = OAT.Dom.create(\"td\", {}, \"subtotal\");\r\n\r\n\t\t\t\t\t\t\t\tif (value != self.EmptyValue) {\r\n\t\t\t\t\t\t\t\t\tvar mN = self.getMeasureNumber(row.cells[ji].dataField, measures);\r\n\r\n\t\t\t\t\t\t\t\t\tOAT.addTextNode(td, self.defaultPictureValue(value, false, mN))\r\n\t\t\t\t\t\t\t\t\ttd = self.applyConditionalFormats(td, value, false, mN);\r\n\t\t\t\t\t\t\t\t\tself.setClickEventHandlers(td, value, \"MEASURE\", mN, ['PtrTotals', value, row, ji]);\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tOAT.addTextNode(td, \"\")\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\ttr.appendChild(td);\r\n\t\t\t\t\t\t\t} else { //normal crude data\r\n\t\t\t\t\t\t\t\tvar td = OAT.Dom.create(\"td\", {}, \"even gx-pv-even-row\");\r\n\r\n\t\t\t\t\t\t\t\tif (value != self.EmptyValue) {\r\n\t\t\t\t\t\t\t\t\tvar mN = self.getMeasureNumber(row.cells[ji].dataField, measures);\r\n\r\n\t\t\t\t\t\t\t\t\tOAT.addTextNode(td, self.defaultPictureValue(value, false, mN))\r\n\t\t\t\t\t\t\t\t\ttd = self.applyConditionalFormats(td, value, false, mN);\r\n\t\t\t\t\t\t\t\t\tself.setClickEventHandlers(td, value, \"MEASURE\", mN, { cell: ji, row: row });\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tOAT.addTextNode(td, \"\")\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\ttr.appendChild(td);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t//subtotal or total row\r\n\t\t\t\t\t\tvar tr = OAT.Dom.create(\"tr\");\r\n\r\n\t\t\t\t\t\tif (row.headers.length == 0) {\r\n\t\t\t\t\t\t\t//grand Total\r\n\t\t\t\t\t\t\tif (self.GrandTotalVisibility.TotalForRows != \"Yes\") { \r\n\t\t\t\t\t\t\t\tskipRow = true\r\n\t\t\t\t\t\t\t} else {\t\r\n\t\t\t\t\t\t\t\tvar th = OAT.Dom.create(\"th\", {}, \"h2subtitle grandtotaltitle\");\r\n\t\t\t\t\t\t\t\tOAT.addTextNode(th, self.translations.GXPL_QViewerJSTotal /*gx.getMessage(\"GXPL_QViewerJSTotal\")*/)\r\n\t\t\t\t\t\t\t\tth.colSpan = colSpan;\r\n\t\t\t\t\t\t\t\tif (self.ShowMeasuresAsRows) {\r\n\t\t\t\t\t\t\t\t\tif (row.rowSpan > 0) {\r\n\t\t\t\t\t\t\t\t\t\tth.rowSpan = row.rowSpan\r\n\t\t\t\t\t\t\t\t\t\ttr.appendChild(th);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\ttr.appendChild(th);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t//sub total\r\n\t\t\t\t\t\t\tif (i == 0) {//append header, not totalized, only for firsr row\r\n\t\t\t\t\t\t\t\tfor (var h = 0; h < row.headers.length - 1; h++) {\r\n\t\t\t\t\t\t\t\t\tvar item = row.headers[h]\r\n\t\t\t\t\t\t\t\t\tvar th = OAT.Dom.create(\"th\", {}, \"even gx-pv-even-row\");\r\n\t\t\t\t\t\t\t\t\tth.rowSpan = item.rowSpan\r\n\t\t\t\t\t\t\t\t\tOAT.addTextNode(th, self.dimensionPictureValue(item.value.trimpivot(), self.rowConditions[h]))\r\n\t\t\t\t\t\t\t\t\tth = self.applyFormatValues(th, item.value, self.rowConditions[h]);\r\n\t\t\t\t\t\t\t\t\tself.setClickEventHandlers(th, item.value, \"DIMENSION\", self.rowConditions[h], { cell: h, row: row, isTotal: false });\r\n\t\t\t\t\t\t\t\t\ttr.appendChild(th);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tvar subtitleClass = (row.headers.length == 1) ? \"subtitleFirstLevel\" : \"\";\r\n\r\n\r\n\t\t\t\t\t\t\tvar th = OAT.Dom.create(\"th\", {}, \"h2subtitle \" + subtitleClass);\r\n\t\t\t\t\t\t\tth.colSpan = colSpan - (row.headers.length - 1);\r\n\t\t\t\t\t\t\tvar value = row.headers[row.headers.length - 1].value.trimpivot()\r\n\t\t\t\t\t\t\tif (value == \"#NuN#\") {\r\n\t\t\t\t\t\t\t\tOAT.addTextNode(th, self.translations.GXPL_QViewerJSTotalFor/*gx.getMessage(\"GXPL_QViewerJSTotalFor\")*/ + \" \" + self.defaultPicture.getAttribute(\"textForNullValues\"))\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tOAT.addTextNode(th, self.translations.GXPL_QViewerJSTotalFor/*gx.getMessage(\"GXPL_QViewerJSTotalFor\")*/ + \" \" +  self.dimensionPictureValue( OAT.Dom.fromSafeXML(value), self.rowConditions[row.headers.length - 1] ) )\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tself.setClickEventHandlers(th, self.translations.GXPL_QViewerJSTotalFor + \" \" + item.value, \"DIMENSION\", getMeasureNumberByDataField(item.dataField, columns), ['PtrTotals', value, row, -1]);\r\n\t\t\t\t\t\t\tif (self.ShowMeasuresAsRows) {\r\n\t\t\t\t\t\t\t\tif (row.rowSpan > 0) {\r\n\t\t\t\t\t\t\t\t\tth.rowSpan = row.rowSpan\r\n\t\t\t\t\t\t\t\t\ttr.appendChild(th);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\ttr.appendChild(th);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (self.ShowMeasuresAsRows) {\r\n\t\t\t\t\t\t\t// add cell with measure name\r\n\t\t\t\t\t\t\tvar valueClass = (row.headers.length == 0) ? \"grandtotalvalue\" : (row.headers.length == 1) ? \"firstlevelvalue\" : \"\";\r\n\r\n\t\t\t\t\t\t\tvar td = OAT.Dom.create(\"td\", {}, \"gtotal \" + valueClass);\r\n\r\n\t\t\t\t\t\t\tvar measureTitle = self.getMeasureName(row.dataField, measures);\r\n\t\t\t\t\t\t\tOAT.addTextNode(td, measureTitle)\r\n\t\t\t\t\t\t\ttd.style.textAlign = \"start\"\r\n\r\n\t\t\t\t\t\t\ttr.appendChild(td);\r\n\t\t\t\t\t\t\t// end cell with measure names\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tfor (var ind = 0; ind < row.cells.length; ind++) {\r\n\t\t\t\t\t\t\tvar value = row.cells[ind].value;\r\n\r\n\t\t\t\t\t\t\tvar mN = self.getMeasureNumber(row.cells[ind].dataField, measures);\r\n\r\n\t\t\t\t\t\t\tvar valueClass = (row.headers.length == 0) ? \"grandtotalvalue\" : (row.headers.length == 1) ? \"firstlevelvalue\" : \"\";\r\n\r\n\t\t\t\t\t\t\tvar td = OAT.Dom.create(\"td\", {}, \"gtotal \" + valueClass);\r\n\t\t\t\t\t\t\tOAT.addTextNode(td, self.defaultPictureValue(value, false, mN))\r\n\t\t\t\t\t\t\tif ((row.headers.length == 0) && (self.colConditions.length == 0)) {\r\n\t\t\t\t\t\t\t\tself.underRecursionStyle = [];\r\n\t\t\t\t\t\t\t\ttd = self.applyConditionalFormats(td, value, false, mN);\r\n\t\t\t\t\t\t\t\tself.setClickEventHandlers(td, value, \"MEASURE\", mN, 'GrandTotal');\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\ttd = self.applyConditionalFormats(td, value, false, mN);\r\n\t\t\t\t\t\t\t\tself.setClickEventHandlers(td, value, \"MEASURE\", mN, ['PtrTotals', value, row, ind]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\ttr.appendChild(td);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (!skipRow)\r\n\t\t\t\t\t\tself.appendRowToTable(tbody, tr, false);\r\n\t\t\t\t\tif (self.colConditions.length > 0) self.underRecursionStyle = [];\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t} // for each row\r\n\r\n\t\t\t} catch (ERROR) {\r\n\t\t\t\t//alert(ERROR);\r\n\t\t\t}\r\n\r\n\r\n\r\n\t\t} /* drawTableWhenServerPagination */\r\n\r\n\r\n\r\n\t\tthis.drawTableWhenShowMeasuresAsRows = function () {\r\n\t\t\tOAT.Dom.clear(self.div);\r\n\t\t\t// START create toolbar table\r\n\r\n\t\t\tself.div.setAttribute(\"class\", \"conteiner_table_div\");\r\n\t\t\tvar myTable = OAT.Dom.create(\"table\", {}, \"\");\r\n\t\t\tmyTable.id = self.controlName + \"_\" + self.query + \"_toolbar\";\r\n\t\t\tvar myTbody = OAT.Dom.create(\"tbody\");\r\n\t\t\tvar myRow = OAT.Dom.create(\"tr\");\r\n\t\t\tself.div.appendChild(myTable);\r\n\t\t\t// END\r\n\r\n\t\t\tvar table = OAT.Dom.create(\"table\", {}, \"pivot_table\");\r\n\t\t\ttable.id = this.controlName + \"_\" + this.query;\r\n\t\t\t//add control name and query name as the id of main table\r\n\t\t\tvar tbody = OAT.Dom.create(\"tbody\");\r\n\t\t\t\r\n\t\t\tself.drawTitleDiv();\r\n\t\t\tself.drawFilters();\r\n\t\t\tself.countedRows = 0;\r\n\t\t\tif (OAT.isIE()) {\r\n\t\t\t\tvar divIeContainer = document.createElement(\"div\");\r\n\t\t\t\tdivIeContainer.setAttribute(\"class\", \"divIeContainer\");\r\n\t\t\t\tself.div.appendChild(divIeContainer);\r\n\t\t\t\tOAT.Dom.append([table, tbody], [divIeContainer, table]);\r\n\t\t\t\ttable.style.marginBottom = \"0px\";\r\n\t\t\t} else {\r\n\t\t\t\tOAT.Dom.append([table, tbody], [self.div, table]);\r\n\t\t\t}\r\n\r\n\t\t\tif ((self.autoPaging) && (self.allData.length < self.filteredData.length) && (self.colPointers.length > 1)) {\r\n\t\t\t\tself.allData = self.filteredData;\r\n\t\t\t} else if ((self.autoPaging) && (self.filteredData.length > self.allData.length) && (self.colPointers.length === 0)) {\r\n\t\t\t\tself.filteredData = self.allData;\r\n\t\t\t}\r\n\r\n\t\t\tvar firstRow;\r\n\t\t\tvar firstRowTotalSpan = self.colConditions.length;\r\n\t\t\tif (self.colConditions.length > 0) {\r\n\t\t\t\tvar i = 0;\r\n\t\t\t\tvar tr = OAT.Dom.create(\"tr\");\r\n\t\t\t\tself._drawRowConditionsHeadingsCustom(tr);\r\n\t\t\t\t// create a list of the dimension name, that are not pivot, with heigth span equal to   colConditions.length\r\n\t\t\t\tfor (var ni = 0; ni < self.colConditions.length; ni++) {// creat a list of the dimension name, that are pivot as columns\r\n\t\t\t\t\ttr = self._drawColConditionsHeadingsCustom(tr, ni, (ni === self.colConditions.length - 1));\r\n\t\t\t\t}\r\n\t\t\t\ttr.setAttribute(\"title_row\", true);\r\n\t\t\t\t//tbody.appendChild(tr);\r\n\t\t\t\tself.appendRowToTable(tbody, tr, true);\r\n\t\t\t\tfirstRow = tr;\r\n\t\t\t}\r\n\t\t\ttry {\r\n\t\t\t\tvar _mtotalSpan = 0 - firstRowTotalSpan;\r\n\t\t\t\tvar collapsedColInfo = [false, 0, 0] //firts son of a collapsed parent, the collapsed parent, total hidden \r\n\t\t\t\tvar columnsDataHide = []\r\n\t\t\t\tvar columnsDataHideFillWithBlanck = []\r\n\t\t\t\tvar td_temp_forCollapseInfo = false;\r\n\t\t\t\tvar td_collection_forCollapseInfo = [];\r\n\t\t\t\tfor (var i = 0; i < measures.length; i++) {\r\n\t\t\t\t\ttd_collection_forCollapseInfo[i] = false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor (var i = 0; i < self.colConditions.length; i++) {\r\n\t\t\t\t\tvar tr = OAT.Dom.create(\"tr\");\r\n\r\n\t\t\t\t\tvar stack = self.colPointers[i];\r\n\t\t\t\t\tvar drawColumn = 0; //number of actual column being draw \r\n\t\t\t\t\tfor (var j = 0; j < stack.length; j++) {//column values here the diferents values of the pivoted dimensions\r\n\t\t\t\t\t\tvar item = stack[j];\r\n\t\t\t\t\t\tvar th = OAT.Dom.create(\"th\", {}, \"even gx-pv-even-row\");\r\n\t\t\t\t\t\tif (item.span === 0)\r\n\t\t\t\t\t\t\titem.span = 1;\r\n\t\t\t\t\t\tth.colSpan = item.span/* * (measures.length-1); */\r\n\t\t\t\t\t\tif (i == 0) {\r\n\t\t\t\t\t\t\tif (item.span === 0) {//calc for the span of the top right blanck cell\r\n\t\t\t\t\t\t\t\t_mtotalSpan++;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t_mtotalSpan = _mtotalSpan + (item.span * measures.length);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tOAT.addTextNode(th, self.dimensionPictureValue(item.value, self.colConditions[i]))\r\n\r\n\t\t\t\t\t\tth = self.applyFormatValues(th, item.value, self.colConditions[i]);\r\n\r\n\r\n\t\t\t\t\t\t//find if some parent of the item is collapsed\r\n\t\t\t\t\t\tvar tempItem = item;\r\n\t\t\t\t\t\tvar hide = false;\r\n\t\t\t\t\t\tvar blankcell = false;\r\n\t\t\t\t\t\twhile (tempItem.parent) {\r\n\t\t\t\t\t\t\tif (tempItem.parent.collapsed == undefined) {\r\n\t\t\t\t\t\t\t\tcollapsedColInfo[0] = false;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (tempItem.parent.collapsed) {\r\n\t\t\t\t\t\t\t\tif ((!collapsedColInfo[0]) || (tempItem.parent != collapsedColInfo[1])) {\r\n\t\t\t\t\t\t\t\t\tblankcell = true;\r\n\t\t\t\t\t\t\t\t\tif (i == self.colConditions.length - 1) {\r\n\t\t\t\t\t\t\t\t\t\tcolumnsDataHideFillWithBlanck.push(j);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tcollapsedColInfo[2]++;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif ((i == self.colConditions.length - 1) && (!blankcell)) //the last col conditions\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tcolumnsDataHide.push(j);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tcollapsedColInfo[0] = true;\r\n\t\t\t\t\t\t\t\tcollapsedColInfo[1] = tempItem.parent;\r\n\t\t\t\t\t\t\t\tOAT.addTextNode(th, \"\")\r\n\t\t\t\t\t\t\t\thide = true;\r\n\t\t\t\t\t\t\t\tth.colSpan = 1;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\ttempItem = tempItem.parent;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif ((!hide) || (blankcell)) { //when no hide or when collapse add one column blank cells\r\n\t\t\t\t\t\t\ttr.appendChild(th);\r\n\t\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\t\t//advance the column counter\r\n\t\t\t\t\t\tdrawColumn = drawColumn + item.span * measures.length\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ((self.options.totals && i == 0) && (self.GrandTotalVisibility.TotalForColumns == \"Yes\"))  {\r\n\t\t\t\t\t\tvar th = OAT.Dom.create(\"th\", {}, \"h2subtitle\");\r\n\t\t\t\t\t\tOAT.addTextNode(th, self.translations.GXPL_QViewerJSTotal /*gx.getMessage(\"GXPL_QViewerJSTotal\")*/)\r\n\t\t\t\t\t\t//\"TOTAL\" gran total\r\n\t\t\t\t\t\tth.rowSpan = self.colConditions.length;\r\n\t\t\t\t\t\tif (self.colConditions.length > 0) {\r\n\t\t\t\t\t\t\tth.colSpan = measures.length;\r\n\t\t\t\t\t\t\t_mtotalSpan = _mtotalSpan + self.colConditions.length + (measures.length - 1)\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t_mtotalSpan = _mtotalSpan + self.colConditions.length\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ttotalSpan = self.colConditions.length\r\n\t\t\t\t\t\ttr.appendChild(th);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (self.options.headingAfter) {// column headings after\r\n\t\t\t\t\t\tself._drawColConditionsHeadings(tr, i);\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttr.setAttribute(\"title_row\", true);\r\n\t\t\t\t\t//tbody.appendChild(tr);\r\n\t\t\t\t\tself.appendRowToTable(tbody, tr, true);\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\tif (_mtotalSpan > 2) {\r\n\t\t\t\t\tvar th = OAT.Dom.create(\"th\", {}, \"h2subtitle \");\r\n\t\t\t\t\tOAT.addTextNode(th, \"\")\r\n\t\t\t\t\tif (_mtotalSpan < 1000) {\r\n\t\t\t\t\t\tth.colSpan = _mtotalSpan;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tth.style.borderLeftColor = \"transparent\";\r\n\t\t\t\t\tfirstRow.appendChild(th);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/* first connector */\r\n\t\t\t\tif ((self.rowConditions.length && self.options.headingBefore) && (self.colConditions.length === 0)) {\r\n\t\t\t\t\tself._drawRowConditionsHeadings(tbody);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar several_totals = measures.length > 1;\r\n\t\t\t\tvar colSpan;\r\n\t\t\t\tif (several_totals) {\r\n\t\t\t\t\tcolSpan = self.rowConditions.length - (measures.length - 1);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcolSpan = self.rowConditions.length;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar collapsedInfo = [false, 9999, true, 0]\r\n\t\t\t\t//[working under collapse item, row condition of the collapse item, first row of collapses rows, actual row condition]\r\n\t\t\t\tvar subtotalsmeasuresList = []; for (var l = 0; l < measures.length; l++) { subtotalsmeasuresList[l] = []; subtotalsmeasuresList[l][0] = []; }\r\n\t\t\t\t/* store values to show in the grandTotal row */\r\n\t\t\t\tvar grandtotalsmeasuresList = []; for (var l = 0; l < measures.length; l++) { grandtotalsmeasuresList[l] = []; grandtotalsmeasuresList[l][0] = []; }\r\n\r\n\t\t\t\tvar searchIn = []; for (var l = 0; l < self.recordForFormula.length; l++) { searchIn[l] = self.recordForFormula[l]; }\r\n\t\t\t\tvar searchVal = [];\r\n\t\t\t\tif (self.colConditions.length > 0) {\r\n\t\t\t\t\tsearchVal = []; for (var l = 0; l < self.allData.length; l++) { searchVal[l] = self.allData[l]; }\r\n\t\t\t\t}\r\n\t\t\t\tvar rowsPositions = [];\r\n\t\t\t\tfor (var i = 0; i < self.h; i++) {\r\n\t\t\t\t\t//actualColumnIndex = 0;\r\n\t\t\t\t\tvar tr = OAT.Dom.create(\"tr\");\r\n\t\t\t\t\tif (self.rowConditions.length) {\r\n\t\t\t\t\t\tvar dim = self.rowConditions.length - (measures.length - 1)\r\n\t\t\t\t\t\tvar item = self.rowPointers[dim][i];\r\n\t\t\t\t\t\t/* stack has number of values equal to height of table */\r\n\t\t\t\t\t\tvar ptrArray = [];\r\n\t\t\t\t\t\tvar ptr = item;\r\n\t\t\t\t\t\twhile (ptr.parent) {\r\n\t\t\t\t\t\t\tptrArray.unshift(ptr);\r\n\t\t\t\t\t\t\tptr = ptr.parent;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvar ptrArray = [self.rowPointers[0][0]];\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar firstCellPositionOfthisRow = -1//the column number where is draw the cell of this row\r\n\r\n\t\t\t\t\tfor (var j = 0; j < self.rowConditions.length - (measures.length - 1); j++) {/* row header values */\r\n\t\t\t\t\t\tvar item = ptrArray[j];\r\n\t\t\t\t\t\tif ((item != undefined) && (item.offset == i)) {\r\n\t\t\t\t\t\t\tif (firstCellPositionOfthisRow == -1) {\r\n\t\t\t\t\t\t\t\tfirstCellPositionOfthisRow = j\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t//add collapse image option\r\n\t\t\t\t\t\t\tvar itemCollapsed = (self.conditions[self.rowConditions[j]].collapsedValues.indexOf(item.value) != -1);\r\n\t\t\t\t\t\t\tif (j >= (self.rowConditions.length - (measures.length - 1) - 1)) {\r\n\t\t\t\t\t\t\t\titemCollapsed = false;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tvar th = OAT.Dom.create(\"th\", {}, \"even gx-pv-even-row\");\r\n\t\t\t\t\t\t\tif ((!collapsedInfo[0]) || (collapsedInfo[1] >= j)) {//if the line is not collapsed\r\n\t\t\t\t\t\t\t\tth.rowSpan = ptrArray[j].span;\r\n\t\t\t\t\t\t\t\tOAT.addTextNode(th, self.dimensionPictureValue(item.value, self.rowConditions[j]))\r\n\t\t\t\t\t\t\t\t/* picture for columns */\r\n\t\t\t\t\t\t\t\tth = self.applyFormatValues(th, item.value, self.rowConditions[j]);\r\n\t\t\t\t\t\t\t\t/* format  for columns */\r\n\t\t\t\t\t\t\t\tself.setClickEventHandlers(th, item.value, \"DIMENSION\", self.rowConditions[j], item);\r\n\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tth.rowSpan = 1;\r\n\t\t\t\t\t\t\t\tOAT.addTextNode(th, \"\")\r\n\t\t\t\t\t\t\t\t/* picture for columns */\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif (collapsedInfo[1] >= j) {\r\n\t\t\t\t\t\t\t\tcollapsedInfo[0] = itemCollapsed;\r\n\t\t\t\t\t\t\t\tcollapsedInfo[3] = item;\r\n\t\t\t\t\t\t\t\tif (itemCollapsed) {\r\n\t\t\t\t\t\t\t\t\tcollapsedInfo[1] = j;\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tcollapsedInfo[1] = 9999;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tcollapsedInfo[2] = true;\r\n\t\t\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\t\t\ttr.appendChild(th);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t/* blank space before */\r\n\t\t\t\t\tvar measureslength = measures.length;\r\n\t\t\t\t\tif (measureslength === 0) {\r\n\t\t\t\t\t\tmeasureslength = 1;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t/* add cell with measure name */\r\n\t\t\t\t\tvar td = OAT.Dom.create(\"td\", {}, \"even gx-pv-even-row\");\r\n\t\t\t\t\tvar item = ptrArray[self.rowConditions.length - (measureslength - 1)];\r\n\t\t\t\t\tif (item.value != self.EmptyValue) {\r\n\t\t\t\t\t\tif (!collapsedInfo[0]) {\r\n\t\t\t\t\t\t\tOAT.addTextNode(td, item.value)\r\n\t\t\t\t\t\t\ttd.style.textAlign = \"start\"\r\n\t\t\t\t\t\t\tself.setClickEventHandlers(td, item.value, \"MEASURE\", getMeasureNumberByName(measureTitle, measures), \"GrandTotal\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tOAT.addTextNode(td, \"\")\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttr.appendChild(td);\r\n\t\t\t\t\t/* end cell with measure name */\r\n\r\n\t\t\t\t\t/* initial \"crude data\" part of a row, only the data of the measures shows in one column*/\r\n\t\t\t\t\tvar mesauresList = new Array();\r\n\t\t\t\t\t/* store values to lateral total */\r\n\t\t\t\t\tvar lateralMeasureList = [];\r\n\t\t\t\t\t/* add cell with measure value */\r\n\t\t\t\t\tvar measureTitle = item.value;\r\n\t\t\t\t\tvar measureNumber = getMeasureNumberByName(measureTitle, measures);\r\n\t\t\t\t\tif (self.colConditions.length == 0) {\r\n\t\t\t\t\t\tvar itemMV = item.items[0];\r\n\t\t\t\t\t\tvar td = OAT.Dom.create(\"td\", {}, \"even gx-pv-even-row\");\r\n\t\t\t\t\t\tif (itemMV != self.EmptyValue) {\r\n\t\t\t\t\t\t\tif (!collapsedInfo[0]) {\r\n\t\t\t\t\t\t\t\tOAT.addTextNode(td, self.defaultPictureValue(itemMV.value, false, measureNumber))\r\n\t\t\t\t\t\t\t\ttd = self.applyConditionalFormats(td, itemMV.value, false, measureNumber);\r\n\r\n\t\t\t\t\t\t\t\t//for total calculation\r\n\t\t\t\t\t\t\t\tself.setClickEventHandlers(td, itemMV.value, \"MEASURE\", measureNumber, [Math.floor(item.row / measures.length)]);\r\n\t\t\t\t\t\t\t\tif (self.formulaInfo.measureFormula[measureNumber].hasFormula) {\r\n\t\t\t\t\t\t\t\t\tvar formulaRow = self.getFormulaRowByCoord(item, [], measureNumber, \"MeasureInRows\", searchIn);\r\n\t\t\t\t\t\t\t\t\tif (formulaRow != self.EmptyValue) {\r\n\t\t\t\t\t\t\t\t\t\tgrandtotalsmeasuresList[measureNumber][0].push(formulaRow)\r\n\t\t\t\t\t\t\t\t\t\tsubtotalsmeasuresList[measureNumber][0].push([formulaRow, -1])\r\n\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tvar saveValue = (itemMV.value != \"#NuN#\") ? parseFloat(itemMV.value) : \"#NuN#\";\r\n\t\t\t\t\t\t\t\t\tgrandtotalsmeasuresList[measureNumber][0].push(saveValue)\r\n\t\t\t\t\t\t\t\t\tsubtotalsmeasuresList[measureNumber][0].push([saveValue, -1])\r\n\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tOAT.addTextNode(td, \"\")\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (collapsedInfo[0] && (!td_collection_forCollapseInfo[ji])) {\r\n\t\t\t\t\t\t\ttd_collection_forCollapseInfo[ji] = td;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tmesauresList.push([[itemMV.value, [itemMV.row]]]);\r\n\t\t\t\t\t\tif (self.colConditions.length === 0) {\r\n\t\t\t\t\t\t\ttr.appendChild(td);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/* end add cell with measure value */\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t/* add cells with measures value */\r\n\t\t\t\t\t\tvar colPointerNumber = self.colPointers.length - 1\r\n\t\t\t\t\t\tif (self.colPointers[self.colPointers.length - 1].length == 0) colPointerNumber--;\r\n\t\t\t\t\t\tif (self.colPointers[colPointerNumber] != undefined) {\r\n\t\t\t\t\t\t\tif (measureNumber == 0) {\r\n\t\t\t\t\t\t\t\tif ((rowsPositions.length > 0) && (!isNaN(rowsPositions[0]))) {\r\n\t\t\t\t\t\t\t\t\tsearchVal.splice(rowsPositions[0], 1)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\trowsPositions = [];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tfor (var j = 0; j < self.colPointers[colPointerNumber].length; j++) {\r\n\t\t\t\t\t\t\t\tvar columnCoord = self.colPointers[colPointerNumber][j]\r\n\t\t\t\t\t\t\t\tvar rowCoord = item\r\n\r\n\r\n\t\t\t\t\t\t\t\tvar value\r\n\t\t\t\t\t\t\t\tif (measureNumber > 0) {\r\n\t\t\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\t\t\tif (rowsPositions[j] != self.EmptyValue) {\r\n\t\t\t\t\t\t\t\t\t\t\tvalue = [searchVal[rowsPositions[j]][self.headerRow.indexOf(measureTitle)], rowsPositions[j]]\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tvalue = self.EmptyValue;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t} catch (Error) {\r\n\t\t\t\t\t\t\t\t\t\tvar t;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tvalue = self.getMeasureValueCoord(rowCoord, columnCoord, self.headerRow.indexOf(measureTitle), searchVal);\r\n\t\t\t\t\t\t\t\t\tif ((value != self.EmptyValue) && (measureNumber == 0)) {\r\n\t\t\t\t\t\t\t\t\t\trowsPositions.push(value[1]);\r\n\t\t\t\t\t\t\t\t\t} else if (measureNumber == 0) { rowsPositions.push(self.EmptyValue); }\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tvar td = OAT.Dom.create(\"td\", {}, \"even gx-pv-even-row\");\r\n\t\t\t\t\t\t\t\tif (value != self.EmptyValue) {\r\n\t\t\t\t\t\t\t\t\tOAT.addTextNode(td, self.defaultPictureValue(value[0], false, measureNumber))\r\n\t\t\t\t\t\t\t\t\ttd = self.applyConditionalFormats(td, value[0], false, measureNumber);\r\n\r\n\t\t\t\t\t\t\t\t\tself.setClickEventHandlers(td, value[0], \"MEASURE\", measureNumber, [value[1]]);\r\n\r\n\t\t\t\t\t\t\t\t\t//for total calculation\r\n\t\t\t\t\t\t\t\t\tvar subValue = parseFloat(value[0])\r\n\t\t\t\t\t\t\t\t\tif (value[0] == \"#NuN#\") { subValue = \"#NuN#\" }\r\n\t\t\t\t\t\t\t\t\tif (self.formulaInfo.measureFormula[measureNumber].hasFormula) {\r\n\t\t\t\t\t\t\t\t\t\tsubValue = self.getFormulaRowByCoord(rowCoord, columnCoord, measureNumber, \"MeasureInRows\", searchIn);\r\n\t\t\t\t\t\t\t\t\t\tif (subValue == self.EmptyValue) { subValue = NaN }\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\tif (grandtotalsmeasuresList[measureNumber][j] == undefined) {\r\n\t\t\t\t\t\t\t\t\t\tgrandtotalsmeasuresList[measureNumber][j] = [subValue];\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tgrandtotalsmeasuresList[measureNumber][j].push(subValue);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tif (subtotalsmeasuresList[measureNumber][j] == undefined) {\r\n\t\t\t\t\t\t\t\t\t\tsubtotalsmeasuresList[measureNumber][j] = [[subValue, -1]];\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tsubtotalsmeasuresList[measureNumber][j].push([subValue, -1])\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tlateralMeasureList.push(subValue);\r\n\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tOAT.addTextNode(td, \"\")\r\n\t\t\t\t\t\t\t\t\tif (grandtotalsmeasuresList[measureNumber][j] == undefined) {\r\n\t\t\t\t\t\t\t\t\t\tgrandtotalsmeasuresList[measureNumber][j] = [0];\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tgrandtotalsmeasuresList[measureNumber][j].push(0);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tif (subtotalsmeasuresList[measureNumber][j] == undefined) {\r\n\t\t\t\t\t\t\t\t\t\tsubtotalsmeasuresList[measureNumber][j] = [[NaN, -1]];\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tsubtotalsmeasuresList[measureNumber][j].push([NaN, -1])\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\ttr.appendChild(td);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/* end cells with mwasures values*/\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\tif (self.colConditions.length && i == 0 && self.options.headingAfter) {/* blank space after */\r\n\t\t\t\t\t\tvar th = OAT.Dom.create(\"th\");\r\n\t\t\t\t\t\tif (!self.rowConditions.length) {\r\n\t\t\t\t\t\t\tself._drawCorner(th, true);\r\n\t\t\t\t\t\t\tth.conditionIndex = -2;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tth.style.border = \"none\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tth.rowSpan = self.rowStructure.span + (self.options.totals && self.rowConditions.length ? 1 : 0);\r\n\t\t\t\t\t\ttr.appendChild(th);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (collapsedInfo[0] && !collapsedInfo[2]) {\r\n\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tself.appendRowToTable(tbody, tr, false);\r\n\t\t\t\t\t\t//tbody.appendChild(tr);\r\n\t\t\t\t\t\tcollapsedInfo[2] = false;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar subTotalRowNumber = self.rowConditions.length - 2;\r\n\t\t\t\t\tif ((several_totals) && (self.rowConditions.length - 2 >= 0) && (ptrArray[self.rowConditions.length - 2] != undefined) && (ptrArray[self.rowConditions.length - 2].items != undefined) && (ptrArray[self.rowConditions.length - 2].items.length <= 1) && (self.colConditions.length <= 0)) {\r\n\t\t\t\t\t\tsubTotalRowNumber = self.rowConditions.length - 2 - (measureslength - 1);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t//add lateral total\r\n\t\t\t\t\tif ((self.options.totals && self.colConditions.length) && (self.GrandTotalVisibility.TotalForColumns == \"Yes\")) {\r\n\t\t\t\t\t\tvar td = OAT.Dom.create(\"td\", {}, \"total\");\r\n\t\t\t\t\t\ttotal_ = 0\r\n\t\t\t\t\t\tif (lateralMeasureList.length > 0) {\r\n\t\t\t\t\t\t\tif (self.formulaInfo.measureFormula[getMeasureNumberByName(measureTitle, measures)].hasFormula) {\r\n\t\t\t\t\t\t\t\ttotal_ = self.calculateFormulaTotal(lateralMeasureList, getMeasureNumberByName(measureTitle, measures), \"MeasureInRows\")\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\ttotal_ = lateralMeasureList.reduce(function (a, b) { if (!isNaN(a) && !isNaN(b)) { return a + b } if (isNaN(a) && isNaN(b)) { return 0 } else if (isNaN(a)) { return b } else { return a; }; })\r\n\t\t\t\t\t\t\t\tif (isNaN(total_) && (total_ != \"#NuN#\") && (total_ != \"#FoE#\")) total_ = 0;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (total_ != 0) {\r\n\t\t\t\t\t\t\tOAT.addTextNode(td, self.defaultPictureValue(total_.toString(), false, getMeasureNumberByName(measureTitle, measures)))\r\n\t\t\t\t\t\t\ttd = self.applyConditionalFormats(td, total_.toString(), false, getMeasureNumberByName(measureTitle, measures));\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tOAT.addTextNode(td, \"\")\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ttr.appendChild(td);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlateralMeasureList = [];\r\n\t\t\t\t\t//add subtotals row\r\n\t\t\t\t\tif (self.options.totals) {\r\n\t\t\t\t\t\tif (((self.rowConditions.length - (measures.length - 1)) > 1)) {\r\n\t\t\t\t\t\t\tvar MaxDept = self.rowConditions.length - (measures.length - 1) - 2\r\n\t\t\t\t\t\t\tfor (var relativeDim = MaxDept; relativeDim >= 0; relativeDim--) {\r\n\t\t\t\t\t\t\t\tvar addSubTotal = false;\r\n\t\t\t\t\t\t\t\t//var relativeDim = 0 \r\n\t\t\t\t\t\t\t\tif (i + 1 < self.rowPointers[dim].length) {\r\n\t\t\t\t\t\t\t\t\tvar itemTemp = self.rowPointers[dim][i + 1];\r\n\t\t\t\t\t\t\t\t\tvar ptrArrayTemp = [];\r\n\t\t\t\t\t\t\t\t\tvar ptrTemp = itemTemp;\r\n\t\t\t\t\t\t\t\t\twhile (ptrTemp.parent) {\r\n\t\t\t\t\t\t\t\t\t\tptrArrayTemp.unshift(ptrTemp);\r\n\t\t\t\t\t\t\t\t\t\tptrTemp = ptrTemp.parent;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t//var nexRowValue = ptrArrayTemp[relativeDim].value \r\n\t\t\t\t\t\t\t\t\t//var actualValue = ptrArray[relativeDim].value\r\n\t\t\t\t\t\t\t\t\t//addSubTotal = (nexRowValue != actualValue) //if next value is different add subtotal\r\n\t\t\t\t\t\t\t\t\tfor (var pDim = relativeDim; pDim >= 0; pDim--) {\r\n\t\t\t\t\t\t\t\t\t\tif (ptrArrayTemp[pDim].value != ptrArray[pDim].value) {\r\n\t\t\t\t\t\t\t\t\t\t\taddSubTotal = true;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\taddSubTotal = true\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\taddSubTotal = addSubTotal && (self.conditions[self.rowConditions[relativeDim]].subtotals == 1)\r\n\r\n\t\t\t\t\t\t\t\tif (addSubTotal) {\r\n\t\t\t\t\t\t\t\t\tfor (var sumM = 0; sumM < measures.length; sumM++) { //one row for each measures\r\n\t\t\t\t\t\t\t\t\t\tvar tr = OAT.Dom.create(\"tr\");\r\n\r\n\t\t\t\t\t\t\t\t\t\tif (sumM == 0) {\r\n\t\t\t\t\t\t\t\t\t\t\tvar th = OAT.Dom.create(\"th\", {}, \"h2subtitle\");\r\n\t\t\t\t\t\t\t\t\t\t\tth.colSpan = (self.rowConditions.length - (measures.length - 1)) - relativeDim;\r\n\t\t\t\t\t\t\t\t\t\t\tth.rowSpan = measures.length\r\n\t\t\t\t\t\t\t\t\t\t\tOAT.addTextNode(th, self.translations.GXPL_QViewerJSTotalFor + \" \" + ptrArray[relativeDim].value)\r\n\t\t\t\t\t\t\t\t\t\t\ttr.appendChild(th);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\t//add measure name\r\n\t\t\t\t\t\t\t\t\t\tvar td = OAT.Dom.create(\"td\", {}, \"total\");\r\n\t\t\t\t\t\t\t\t\t\tvar value = measures[sumM].getAttribute(\"displayName\");\r\n\t\t\t\t\t\t\t\t\t\tOAT.addTextNode(td, value)\r\n\t\t\t\t\t\t\t\t\t\ttd.style.textAlign = \"start\"\r\n\t\t\t\t\t\t\t\t\t\tself.setClickEventHandlers(td, value, \"MEASURE\", sumM, \"GrandTotal\");\r\n\t\t\t\t\t\t\t\t\t\ttr.appendChild(td);\r\n\r\n\t\t\t\t\t\t\t\t\t\t//add sub total value\r\n\t\t\t\t\t\t\t\t\t\tif (self.colConditions.length == 0) {\r\n\t\t\t\t\t\t\t\t\t\t\t//add sub-total value\r\n\t\t\t\t\t\t\t\t\t\t\tvar td = OAT.Dom.create(\"td\", {}, \"total\");\r\n\t\t\t\t\t\t\t\t\t\t\tvar valuesToOperate = []\r\n\t\t\t\t\t\t\t\t\t\t\tfor (var vt = 0; vt < subtotalsmeasuresList[sumM][0].length; vt++) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tif ((subtotalsmeasuresList[sumM][0][vt][1] == -1) || (subtotalsmeasuresList[sumM][0][vt][1] > relativeDim)) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tif ((!isNaN(subtotalsmeasuresList[sumM][0][vt][0]) || (subtotalsmeasuresList[sumM][0][vt][0] == \"#NuN#\")) || self.formulaInfo.measureFormula[sumM].hasFormula) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvaluesToOperate.push(subtotalsmeasuresList[sumM][0][vt][0])\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsubtotalsmeasuresList[sumM][0][vt][1] = relativeDim\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\tvar total_ = 0\r\n\t\t\t\t\t\t\t\t\t\t\tif (valuesToOperate.length != 0) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (self.formulaInfo.measureFormula[sumM].hasFormula) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttotal_ = self.calculateFormulaTotal(valuesToOperate, sumM, \"MeasureInRows\")\r\n\t\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (self.IsReduceNuN(valuesToOperate)) total_ = \"#NuN#\"; else\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttotal_ = valuesToOperate.reduce(function (a, b) { if (!isNaN(a) && !isNaN(b)) { return a + b } if (isNaN(a) && isNaN(b)) { return 0 } else if (isNaN(a)) { return b } else { return a; }; })\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (isNaN(total_) && (total_ != \"#NuN#\") && (total_ != \"#FoE#\")) total_ = 0;\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\tlateralMeasureList.push(parseFloat(total_))\r\n\t\t\t\t\t\t\t\t\t\t\tif (total_ != 0) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tOAT.addTextNode(td, self.defaultPictureValue(total_.toString(), false, sumM))\r\n\t\t\t\t\t\t\t\t\t\t\t\ttd = self.applyConditionalFormats(td, total_.toString(), false, sumM);\r\n\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\tOAT.addTextNode(td, \"\")\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\ttr.appendChild(td);\r\n\r\n\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t//add sub-total values\r\n\t\t\t\t\t\t\t\t\t\t\tvar colPointerNumber = self.colPointers.length - 1\r\n\t\t\t\t\t\t\t\t\t\t\tif (self.colPointers[self.colPointers.length - 1].length == 0) colPointerNumber--;\r\n\t\t\t\t\t\t\t\t\t\t\tif (self.colPointers[colPointerNumber] != undefined) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tfor (var cP = 0; cP < self.colPointers[colPointerNumber].length; cP++) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvar td = OAT.Dom.create(\"td\", {}, \"total\");\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvar valuesToOperate = []\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tfor (var vt = 0; vt < subtotalsmeasuresList[sumM][cP].length; vt++) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif ((subtotalsmeasuresList[sumM][cP][vt][1] == -1) || (subtotalsmeasuresList[sumM][cP][vt][1] > relativeDim)) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif ((!isNaN(subtotalsmeasuresList[sumM][cP][vt][0])) || (subtotalsmeasuresList[sumM][cP][vt][0] == \"#NuN#\") || self.formulaInfo.measureFormula[sumM].hasFormula) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvaluesToOperate.push(subtotalsmeasuresList[sumM][cP][vt][0])\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsubtotalsmeasuresList[sumM][cP][vt][1] = relativeDim\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvar total_ = 0\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (valuesToOperate.length != 0) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (self.formulaInfo.measureFormula[sumM].hasFormula) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttotal_ = self.calculateFormulaTotal(valuesToOperate, sumM, \"MeasureInRows\")\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (self.IsReduceNuN(valuesToOperate)) total_ = \"#NuN#\"; else\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttotal_ = valuesToOperate.reduce(function (a, b) { if (!isNaN(a) && !isNaN(b)) { return a + b } if (isNaN(a) && isNaN(b)) { return 0 } else if (isNaN(a)) { return b } else { return a; }; })\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (isNaN(total_) && (total_ != \"#NuN#\") && (total_ != \"#FoE#\")) total_ = 0;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tif ((total_ != 0) && ((!isNaN(total_)) || (total_ == \"#NuN#\") || (total_ == \"#FoE#\"))) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (self.formulaInfo.measureFormula[sumM].hasFormula) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlateralMeasureList.push(valuesToOperate)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlateralMeasureList.push(parseFloat(total_))\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tOAT.addTextNode(td, self.defaultPictureValue(total_.toString(), false, sumM))\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttd = self.applyConditionalFormats(td, total_.toString(), false, sumM);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tOAT.addTextNode(td, \"\")\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttr.appendChild(td);\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\tif ((self.colConditions.length) && (self.GrandTotalVisibility.TotalForColumns == \"Yes\")) { //add lateral total to this sub-total row\r\n\t\t\t\t\t\t\t\t\t\t\t\tvar td = OAT.Dom.create(\"td\", {}, \"gtotal\");\r\n\t\t\t\t\t\t\t\t\t\t\t\tvar total_ = 0\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (lateralMeasureList.length != 0) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (self.formulaInfo.measureFormula[sumM].hasFormula) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttotal_ = self.calculateFormulaTotal(lateralMeasureList, sumM, \"MeasureInRows\")\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (self.IsReduceNuN(lateralMeasureList)) total_ = \"#NuN#\"; else\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttotal_ = lateralMeasureList.reduce(function (a, b) { if (!isNaN(a) && !isNaN(b)) { return a + b } if (isNaN(a) && isNaN(b)) { return 0 } else if (isNaN(a)) { return b } else { return a; }; })\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\tOAT.addTextNode(td, self.defaultPictureValue(total_.toString(), false, sumM))\r\n\t\t\t\t\t\t\t\t\t\t\t\ttd = self.applyConditionalFormats(td, total_.toString(), false, sumM);\r\n\t\t\t\t\t\t\t\t\t\t\t\ttr.appendChild(td);\r\n\t\t\t\t\t\t\t\t\t\t\t\tlateralMeasureList = [];\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\tself.appendRowToTable(tbody, tr, false);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t} /* for each row */\r\n\r\n\r\n\r\n\t\t\t\t/* code for the last row, GRAND TOTAL ROW */\r\n\t\t\t\t/* GRAND TOTAL ROW\t*/\r\n\t\t\t\tif ((measures.length > 0) && ((self.rowConditions.length - measures.length + 1) > 0) && (self.GrandTotalVisibility.TotalForRows == \"Yes\") ) {\r\n\r\n\t\t\t\t\tif ((self.options.totals && self.rowConditions.length) && ((!self.autoPaging) || (self.TotalPagesPaging == self.actualPaginationPage) || (self.FilterByTopFilter))) {\r\n\r\n\t\t\t\t\t\tfor (var m = 0; m < measures.length; m++) { //for every measure\r\n\r\n\t\t\t\t\t\t\tvar tr = OAT.Dom.create(\"tr\");\r\n\r\n\t\t\t\t\t\t\tif ((colSpan != 0) && (m == 0)) { //add grandTotal title cell\r\n\t\t\t\t\t\t\t\tvar th = OAT.Dom.create(\"th\", {}, \"h2subtitle\");\r\n\t\t\t\t\t\t\t\tOAT.addTextNode(th, self.translations.GXPL_QViewerJSTotal /*gx.getMessage(\"GXPL_QViewerJSTotal\")*/)\r\n\t\t\t\t\t\t\t\tth.colSpan = colSpan;\r\n\t\t\t\t\t\t\t\tth.rowSpan = measures.length;\r\n\t\t\t\t\t\t\t\ttr.appendChild(th);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t//add measure title cell\r\n\t\t\t\t\t\t\tvar td = OAT.Dom.create(\"td\", {}, \"gtotal\");\r\n\t\t\t\t\t\t\tvar value = measures[m].getAttribute(\"displayName\");\r\n\t\t\t\t\t\t\tif (value != self.EmptyValue) {\r\n\t\t\t\t\t\t\t\tOAT.addTextNode(td, value)\r\n\t\t\t\t\t\t\t\ttd.style.textAlign = \"start\"\r\n\t\t\t\t\t\t\t\tself.setClickEventHandlers(td, value, \"MEASURE\", m, \"GrandTotal\");\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tOAT.addTextNode(td, \"\")\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\ttr.appendChild(td);\r\n\r\n\t\t\t\t\t\t\tvar lateralMeasureList = [];\r\n\t\t\t\t\t\t\tif (self.colConditions.length == 0) {\r\n\t\t\t\t\t\t\t\t//add grand total value\r\n\t\t\t\t\t\t\t\tvar td = OAT.Dom.create(\"td\", {}, \"gtotal\");\r\n\t\t\t\t\t\t\t\tvar total_ = 0\r\n\t\t\t\t\t\t\t\tif (grandtotalsmeasuresList[m][0].length > 0) {\r\n\t\t\t\t\t\t\t\t\tif (self.formulaInfo.measureFormula[m].hasFormula) {\r\n\t\t\t\t\t\t\t\t\t\ttotal_ = self.calculateFormulaTotal(grandtotalsmeasuresList[m][0], m, \"MeasureInRows\")\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tif (self.IsReduceNuN(grandtotalsmeasuresList[m][0])) total_ = \"#NuN#\"; else\r\n\t\t\t\t\t\t\t\t\t\t\ttotal_ = grandtotalsmeasuresList[m][0].reduce(function (a, b) { if (!isNaN(a) && !isNaN(b)) { return a + b } if (isNaN(a) && isNaN(b)) { return 0 } else if (isNaN(a)) { return b } else { return a; }; })\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (!isNaN(total_) || (total_ == \"#NuN#\") || (total_ == \"#FoE#\")) {\r\n\t\t\t\t\t\t\t\t\tOAT.addTextNode(td, self.defaultPictureValue(total_.toString(), false, m))\r\n\t\t\t\t\t\t\t\t\ttd = self.applyConditionalFormats(td, total_.toString(), false, m);\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tOAT.addTextNode(td, \"\")\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\ttr.appendChild(td);\r\n\r\n\t\t\t\t\t\t\t\t//lateralMeasureList.push(parseFloat(total_))\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t//add grand total values\r\n\t\t\t\t\t\t\t\tvar colPointerNumber = self.colPointers.length - 1\r\n\t\t\t\t\t\t\t\tif (self.colPointers[self.colPointers.length - 1].length == 0) colPointerNumber--;\r\n\t\t\t\t\t\t\t\tif (self.colPointers[colPointerNumber] != undefined) {\r\n\t\t\t\t\t\t\t\t\tfor (var j = 0; j < self.colPointers[colPointerNumber].length; j++) {\r\n\t\t\t\t\t\t\t\t\t\tvar td = OAT.Dom.create(\"td\", {}, \"gtotal\");\r\n\t\t\t\t\t\t\t\t\t\tvar total_ = 0\r\n\t\t\t\t\t\t\t\t\t\tif ((grandtotalsmeasuresList[m][j] != undefined) && (grandtotalsmeasuresList[m][j].length > 0)) {\r\n\t\t\t\t\t\t\t\t\t\t\tif (self.formulaInfo.measureFormula[m].hasFormula) {\r\n\t\t\t\t\t\t\t\t\t\t\t\ttotal_ = self.calculateFormulaTotal(grandtotalsmeasuresList[m][j], m, \"MeasureInRows\")\r\n\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (self.IsReduceNuN(grandtotalsmeasuresList[m][j])) total_ = \"#NuN#\"; else\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttotal_ = grandtotalsmeasuresList[m][j].reduce(function (a, b) { if (!isNaN(a) && !isNaN(b)) { return a + b } if (isNaN(a) && isNaN(b)) { return 0 } else if (isNaN(a)) { return b } else { return a; }; })\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tif (!isNaN(total_) || (total_ == \"#NuN#\") || (total_ == \"#FoE#\")) {\r\n\t\t\t\t\t\t\t\t\t\t\tOAT.addTextNode(td, self.defaultPictureValue(total_.toString(), false, m))\r\n\t\t\t\t\t\t\t\t\t\t\ttd = self.applyConditionalFormats(td, total_.toString(), false, m);\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tOAT.addTextNode(td, \"\")\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\ttr.appendChild(td);\r\n\r\n\t\t\t\t\t\t\t\t\t\tif (self.formulaInfo.measureFormula[m].hasFormula) {\r\n\t\t\t\t\t\t\t\t\t\t\tlateralMeasureList.push(grandtotalsmeasuresList[m][j])\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tif (!isNaN(total_)) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tlateralMeasureList.push(parseFloat(total_))\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t//add lateral total to grand total\r\n\t\t\t\t\t\t\tif ((self.options.totals && self.colConditions.length) && (self.GrandTotalVisibility.TotalForColumns == \"Yes\") ) {\r\n\t\t\t\t\t\t\t\tvar td = OAT.Dom.create(\"td\", {}, \"gtotal\");\r\n\t\t\t\t\t\t\t\tvar total_ = 0\r\n\t\t\t\t\t\t\t\tif (lateralMeasureList.length != 0) {\r\n\t\t\t\t\t\t\t\t\tif (self.formulaInfo.measureFormula[m].hasFormula) {\r\n\t\t\t\t\t\t\t\t\t\ttotal_ = self.calculateFormulaTotal(lateralMeasureList, m, \"MeasureInRows\")\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tif (self.IsReduceNuN(lateralMeasureList)) total_ = \"#NuN#\"; else\r\n\t\t\t\t\t\t\t\t\t\t\ttotal_ = lateralMeasureList.reduce(function (a, b) { if (!isNaN(a) && !isNaN(b)) { return a + b } if (isNaN(a) && isNaN(b)) { return 0 } else if (isNaN(a)) { return b } else { return a; }; })\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tOAT.addTextNode(td, self.defaultPictureValue(total_.toString(), false, m))\r\n\t\t\t\t\t\t\t\ttd = self.applyConditionalFormats(td, total_.toString(), false, m);\r\n\t\t\t\t\t\t\t\ttr.appendChild(td);\r\n\t\t\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\t\t\tself.appendRowToTable(tbody, tr, false);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t}\r\n\r\n\r\n\r\n\r\n\t\t\t} catch (ERROR) {\r\n\r\n\t\t\t}\r\n\r\n\t\t} /* drawTableWhenShowMeasuresAsRows */\r\n\r\n\r\n\t\tthis.IsReduceNuN = function (values) {\r\n\t\t\tisNuN = false;\r\n\t\t\tfor (var vft = 0; vft < values.length; vft++) {\r\n\t\t\t\tif ((values[vft] != \"#NuN#\") && (values[vft] != 0)) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tif (values[vft] == \"#NuN#\") isNuN = true;\r\n\t\t\t}\r\n\t\t\treturn isNuN;\r\n\t\t}\r\n\r\n\t\tthis.applyFilters = function () { /* create filteredData from allData */\r\n\t\t\tself.filteredData = [];\r\n\t\t\tfor (var i = 0; i < self.allData.length; i++) {\r\n\t\t\t\tif (self.filterOK(self.allData[i])) { self.filteredData.push(self.allData[i]); }\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\tthis.createTempDataStructForAggStepOptimization = function () {\r\n\t\t\ttry {\r\n\t\t\t\tfor (var row = 0; row < self.GeneralDataRows.length; row++) {\r\n\t\t\t\t\tfor (var i = 0; i < self.GeneralDataRows[0].length; i++) {\r\n\t\t\t\t\t\tfor (var j = 0; j < self.GeneralDataRows[0].length; j++) {\r\n\t\t\t\t\t\t\tif (self.TempDataStructForAggStepOptimization[self.GeneralDataRows[row][i]] == undefined) {\r\n\t\t\t\t\t\t\t\tself.TempDataStructForAggStepOptimization[self.GeneralDataRows[row][i]] = [];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tself.TempDataStructForAggStepOptimization[self.GeneralDataRows[row][i]][self.GeneralDataRows[row][j]] = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} catch (error) {\r\n\t\t\t\t//alert(error)\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.getMeasureValue = function (item, measureNumber, colDim) {\r\n\t\t\tvar rowFromItem = [];\r\n\t\t\tvar temp = item;\r\n\t\t\tvar dimValues = [];\r\n\r\n\t\t\tvar dimPosition = [];\r\n\t\t\tfor (var i = 0; i < colDim.length - measures.length + 1; i++) {\r\n\t\t\t\tdimPosition[i] = colDim[colDim.length - measures.length + 1 - (i + 1)];\r\n\t\t\t}\r\n\r\n\r\n\t\t\tfor (var i = 0; i < dimPosition.length; i++) {\r\n\t\t\t\tdimValues[dimPosition[i]] = temp.value;\r\n\t\t\t\ttemp = temp.parent//temp.items\r\n\t\t\t}\r\n\r\n\t\t\tvar value = \"\"\r\n\t\t\tvar hallado = false\r\n\t\t\tvar searchIn = self.allData\r\n\t\t\tif (self.filterIndexes.length > 0) { searchIn = self.filteredData }\r\n\t\t\tfor (var i = 0; i < searchIn.length; i++) { //allData\r\n\t\t\t\tvar coincide = false\r\n\t\t\t\tfor (var j = 0; j < dimPosition.length; j++) {\r\n\t\t\t\t\tif (searchIn[i][dimPosition[j]] == dimValues[dimPosition[j]]) {\r\n\t\t\t\t\t\tcoincide = true;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tcoincide = false;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (coincide) {\r\n\t\t\t\t\tvalue = searchIn[i][colDim.length + self.filterIndexes.length - measures.length + 1 + measureNumber];\r\n\t\t\t\t\thallado = true\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (hallado)\r\n\t\t\t\treturn value;\r\n\t\t\telse\r\n\t\t\t\treturn self.EmptyValue;\r\n\r\n\t\t}\r\n\r\n\t\tthis.getMeasureValueCoord = function (rowsCoord, colCoord, measurePosition, searchVal) {\r\n\t\t\tvar rowFromItem = [];\r\n\t\t\tvar dimValues = [];\r\n\r\n\t\t\tvar dimPosition = [];\r\n\t\t\tfor (var i = 0; i < self.rowConditions.length - measures.length + 1; i++) {\r\n\t\t\t\tdimPosition[i] = self.rowConditions[self.rowConditions.length - measures.length + 1 - (i + 1)];\r\n\t\t\t}\r\n\r\n\r\n\t\t\tfor (var i = self.colConditions.length - 1; i >= 0; i--) {\r\n\t\t\t\tdimValues[self.colConditions[i]] = colCoord.value;\r\n\t\t\t\tcolCoord = colCoord.parent\r\n\t\t\t}\r\n\t\t\tvar temp = rowsCoord.parent;\r\n\t\t\tfor (var i = 0; i < dimPosition.length; i++) {\r\n\t\t\t\tdimValues[dimPosition[i]] = temp.value;\r\n\t\t\t\ttemp = temp.parent//temp.items\r\n\t\t\t}\r\n\r\n\t\t\tvar value = \"\"\r\n\t\t\tvar hallado = false\r\n\t\t\tvar numRow = 0\r\n\t\t\tvar searchIn = searchVal\r\n\r\n\t\t\tfor (var i = 0; i < searchIn.length; i++) {\r\n\t\t\t\tvar coincide = false\r\n\t\t\t\tfor (var j = 0; j < dimValues.length; j++) {\r\n\t\t\t\t\tif (searchIn[i][j] == dimValues[j]) {\r\n\t\t\t\t\t\tcoincide = true;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif ((dimValues[j] == undefined) && (self.filterIndexes.length > 0)) {\r\n\t\t\t\t\t\t\tcoincide = true;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tcoincide = false;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (coincide) {\r\n\t\t\t\t\tvalue = searchIn[i][measurePosition];\r\n\t\t\t\t\tnumRow = i;\r\n\t\t\t\t\thallado = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (hallado) {\r\n\t\t\t\treturn [value, numRow];\r\n\t\t\t} else\r\n\t\t\t\treturn self.EmptyValue;\r\n\t\t}\r\n\r\n\t\tthis.getFormulaRowByCoord = function (rowsCoord, colCoord, measureNumber, caseId, tosearch) {\r\n\r\n\t\t\tvar rowFromItem = [];\r\n\t\t\tvar dimValues = [];\r\n\r\n\t\t\tvar dimPosition = [];\r\n\t\t\tfor (var i = 0; i < self.rowConditions.length - measures.length + 1; i++) {\r\n\t\t\t\tdimPosition[i] = self.rowConditions[self.rowConditions.length - measures.length + 1 - (i + 1)];\r\n\t\t\t}\r\n\r\n\t\t\tif (colCoord) {\r\n\t\t\t\tfor (var i = self.colConditions.length - 1; i >= 0; i--) {\r\n\t\t\t\t\tdimValues[self.colConditions[i]] = colCoord.value;\r\n\t\t\t\t\tcolCoord = colCoord.parent\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar temp = rowsCoord.parent;\r\n\t\t\tfor (var i = 0; i < dimPosition.length; i++) {\r\n\t\t\t\tdimValues[dimPosition[i]] = temp.value;\r\n\t\t\t\ttemp = temp.parent//temp.items\r\n\t\t\t}\r\n\r\n\t\t\tfor (var i = 0; i < self.filterIndexes.length; i++) {\r\n\t\t\t\tvar s = self.filterDiv.selects[i];\r\n\t\t\t\tvar val = OAT.$v(s)\r\n\t\t\t\tif (val == \"[all]\"/*\"\"*/) {\r\n\t\t\t\t\tdimValues[self.filterIndexes[i]] = undefined\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdimValues[self.filterIndexes[i]] = val\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar value = \"\"\r\n\t\t\tvar hallado = false\r\n\t\t\tvar numRow = 0\r\n\t\t\tif (tosearch != undefined) { searchIn = tosearch }\r\n\t\t\telse {\r\n\t\t\t\tvar searchIn = self.recordForFormula\r\n\t\t\t}\r\n\t\t\tvar coinciden = [];\r\n\t\t\t//if (self.filterIndexes.length > 0){ searchIn = self.filteredData }\r\n\t\t\tvar addedValues = []; for (var o = 0; o < self.formulaInfo.recordDataLength; o++) { addedValues[o] = 0 }\r\n\t\t\tfor (var i = 0; i < searchIn.length; i++) {\r\n\t\t\t\tvar coincide = false\r\n\t\t\t\tfor (var j = 0; j < dimValues.length; j++) {\r\n\t\t\t\t\tif (searchIn[i][j] == dimValues[j]) {\r\n\t\t\t\t\t\tcoincide = true;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif ((dimValues[j] == undefined) && (self.filterIndexes.indexOf(j) != -1)) {\r\n\t\t\t\t\t\t\tcoincide = true;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tcoincide = false;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (coincide) {\r\n\t\t\t\t\tfor (var t = 0; t < self.formulaInfo.measureFormula[measureNumber].relatedMeasures.length; t++) {\r\n\t\t\t\t\t\tvar pos = self.formulaInfo.measureFormula[measureNumber].relatedMeasures[t]\r\n\t\t\t\t\t\tif (searchIn[i][pos] == undefined) {\r\n\t\t\t\t\t\t\tif (addedValues[pos] == 0) addedValues[pos] = \"#NuN#\";\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (addedValues[pos] == \"#NuN#\") addedValues[pos] = 0;\r\n\t\t\t\t\t\t\taddedValues[pos] = addedValues[pos] + parseFloat(searchIn[i][pos]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\thallado = true\r\n\t\t\t\t\tcoinciden.push(i);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (hallado) {\r\n\t\t\t\tif (self.formulaInfo.cantFormulaMeasures == 1) {\r\n\t\t\t\t\tfor (var pC = 0; pC < coinciden.length; pC++) {\r\n\t\t\t\t\t\ttosearch.splice(coinciden[pC], 1)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn addedValues;\r\n\t\t\t} else\r\n\t\t\t\treturn self.EmptyValue;\r\n\r\n\r\n\t\t}\r\n\r\n\r\n\r\n\t\tthis.calculateFormulaTotal = function (inputData, measureNumber, caseId) {\r\n\t\t\ttry {\r\n\t\t\t\tvar addedValues = [];\r\n\r\n\t\t\t\tif (inputData.length == 0) return \"#NuN#\"\r\n\r\n\t\t\t\t//if ( caseId == \"MeasureInRows\"){\r\n\t\t\t\tfor (var j = 0; j < inputData.length; j++) {\r\n\t\t\t\t\t//if (inputData[j] == \"#NuN#\"){\r\n\t\t\t\t\t//\treturn \"#NuN#\";\r\n\t\t\t\t\t//}\r\n\t\t\t\t\tif ((inputData[j] != self.EmptyValue) && (inputData[j] != 0) && ((inputData[j] != \"#NuN#\") || (self.ShowMeasuresAsRows))) {\r\n\t\t\t\t\t\tfor (var i = 0; i < inputData[j].length; i++) {\r\n\t\t\t\t\t\t\tif (addedValues[i] == undefined) { addedValues[i] = 0 }\r\n\t\t\t\t\t\t\tif (!isNaN(inputData[j][i]) && (inputData[j][i] != \"#NuN#\")) {\r\n\t\t\t\t\t\t\t\tif (addedValues[i] == \"#NuN#\") addedValues[i] = 0;\r\n\t\t\t\t\t\t\t\taddedValues[i] = addedValues[i] + inputData[j][i];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (inputData[j][i] == \"#NuN#\" && addedValues[i] == 0) {\r\n\t\t\t\t\t\t\t\taddedValues[i] = \"#NuN#\"\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t//}\r\n\t\t\t\tif (!self.ShowMeasuresAsRows) {\r\n\t\t\t\t\tif (addedValues.length == 0) return \"#NuN#\"\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (addedValues.length == 0) return NaN\r\n\t\t\t\t}\r\n\t\t\t\tvar result = EvaluateExpressionPivotJs(self.formulaInfo.measureFormula[measureNumber].PolishNotation,\r\n\t\t\t\t\taddedValues, self.formulaInfo)\r\n\t\t\t\tif ((result == Infinity) || isNaN(result)) {\r\n\t\t\t\t\treturn \"#FoE#\";\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn result;\r\n\t\t\t} catch (Error) {\r\n\t\t\t\treturn self.EmptyValue;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\tthis.addToStack = function (iterator, item, value, conditionList) {\r\n\t\t\tif (self.GeneralDataRows.length > 3000)\r\n\t\t\t\treturn true\r\n\t\t\tif (iterator < 1)\r\n\t\t\t\treturn true;\r\n\t\t\tif (item.value == undefined)\r\n\t\t\t\treturn true;\r\n\r\n\t\t\tvar value_cond_row_pos = self.conditions[conditionList[iterator]].dataRowPosition;\r\n\t\t\tvar value_prev_cond_row_pos = self.conditions[conditionList[iterator - 1]].dataRowPosition;\r\n\t\t\t//search if the row exists\r\n\t\t\tif ((self.allData.length > 800) && (self.filterIndexes.length > 0)) {\r\n\t\t\t\treturn true\r\n\t\t\t}\r\n\r\n\t\t\tfor (var i = 0; i < self.allData.length; i++) {\r\n\t\t\t\tif (self.allData[i][value_cond_row_pos] == value) {\r\n\t\t\t\t\tif (item.value == self.allData[i][value_prev_cond_row_pos]) {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (self.rowConditions.length < 8) {\r\n\t\t\t\tfor (var i = 0; i < self.GeneralDataRows.length; i++) {\r\n\t\t\t\t\tif (self.GeneralDataRows[i][value_cond_row_pos] == value) {\r\n\t\t\t\t\t\tif (item.value == self.GeneralDataRows[i][value_prev_cond_row_pos]) {\r\n\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tthis.createAggStructure = function () { /* create a multidimensional aggregation structure */\r\n\t\t\tfunction createPart(struct, arr, rows, tempSearchData) {\r\n\t\t\t\tstruct.items = false;\r\n\t\t\t\tstruct.depth = -1;\r\n\t\t\t\tvar stack = [struct];\r\n\t\t\t\tvar dimensionLenght = arr.length;\r\n\t\t\t\tif ((self.ShowMeasuresAsRows) && rows) {\r\n\t\t\t\t\tdimensionLenght -= measures.length - 1;\r\n\t\t\t\t}\r\n\t\t\t\tfor (var i = 0; i < dimensionLenght; i++) { /* for all conditions */\r\n\t\t\t\t\t/*ordenar tempSearchData*/\r\n\t\t\t\t\tvar cond = self.conditions[arr[i]];\r\n\r\n\r\n\t\t\t\t\tvar filaAOrdenar = self.conditions[arr[i]].dataRowPosition\r\n\t\t\t\t\tvar index = filaAOrdenar;\r\n\r\n\t\t\t\t\tvar coef = cond.sort;\r\n\r\n\r\n\t\t\t\t\tif ((i >= 1) && (self.rowConditions.length > 16) && (self.GeneralDataRows.length > 1200)) {\r\n\t\t\t\t\t\tcond = self.conditions[arr[i - 1]];\r\n\t\t\t\t\t\tfilaAOrdenar = self.conditions[arr[i - 1]].dataRowPosition\r\n\t\t\t\t\t\tindex = filaAOrdenar;\r\n\r\n\t\t\t\t\t\tcoef = cond.sort;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ((coef != 0) && (coef != 2)) {\r\n\t\t\t\t\t\tvar sortNumeric = true;\r\n\t\t\t\t\t\tfor (var ival = 0; ival < cond.distinctValues.length; ival++) {\r\n\t\t\t\t\t\t\tif ((sortNumeric) && (cond.distinctValues[ival] != parseInt(cond.distinctValues[ival]))) {\r\n\t\t\t\t\t\t\t\tsortNumeric = false; break;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (sortNumeric) {\r\n\t\t\t\t\t\t\ttempSearchData.sort((function (index) {\r\n\t\t\t\t\t\t\t\treturn function (a, b) {\r\n\t\t\t\t\t\t\t\t\treturn coef * (parseInt(a[index]) === parseInt(b[index]) ? 0 : (parseInt(a[index]) < parseInt(b[index]) ? -1 : 1));\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t})(index));\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\ttempSearchData.sort((function (index) {\r\n\t\t\t\t\t\t\t\treturn function (a, b) {\r\n\t\t\t\t\t\t\t\t\treturn coef * (a[index] === b[index] ? 0 : (a[index] < b[index] ? -1 : 1));\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t})(index));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\r\n\r\n\r\n\t\t\t\t\tvar newstack = [];\r\n\r\n\t\t\t\t\tvar itemsInclude = cond.distinctValues.length;\r\n\t\t\t\t\t//if ((coef != 0) && (coef == 1)) cond.distinctValues.sort();\r\n\r\n\t\t\t\t\tif ((i >= 1) && (self.rowConditions.length > 16) && (self.GeneralDataRows.length > 1200)) {\r\n\t\t\t\t\t\tvar value_cond_row_pos = self.conditions[arr[i]].dataRowPosition;\r\n\t\t\t\t\t\tvar newStackValues = [];\r\n\t\t\t\t\t\tfor (var j = 0; j < stack.length; j++) {\r\n\t\t\t\t\t\t\tvar items = [];\r\n\r\n\t\t\t\t\t\t\tfor (var l = 0; l < tempSearchData.length; l++) {\r\n\t\t\t\t\t\t\t\tvar crudeRow = tempSearchData[l];\r\n\r\n\t\t\t\t\t\t\t\tvalue = tempSearchData[l][value_cond_row_pos];\r\n\r\n\t\t\t\t\t\t\t\tvar res = self.addToStack3(i, stack[j], tempSearchData[l], arr, coef, sortNumeric)\r\n\t\t\t\t\t\t\t\tif (res == 'break') break;\r\n\r\n\t\t\t\t\t\t\t\tif (newStackValues.indexOf(value) == -1) {\r\n\t\t\t\t\t\t\t\t\t//stack[j] y crudeRow \"coinciden\"\r\n\r\n\r\n\r\n\t\t\t\t\t\t\t\t\tif (res) {\r\n\t\t\t\t\t\t\t\t\t\tnewStackValues.push(value);\r\n\r\n\t\t\t\t\t\t\t\t\t\tvar collapsed = false;\r\n\t\t\t\t\t\t\t\t\t\tif (cond.collapsedValues.indexOf(value) != -1)\r\n\t\t\t\t\t\t\t\t\t\t\tcollapsed = true;\r\n\t\t\t\t\t\t\t\t\t\tvar o = { value: value, parent: stack[j], used: false, items: false, depth: i, collapsed: collapsed, conditionNumber: arr[i] };\r\n\t\t\t\t\t\t\t\t\t\titems.push(o);\r\n\t\t\t\t\t\t\t\t\t\tnewstack.push(o);\r\n\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tnewStackValues = [];\r\n\r\n\r\n\t\t\t\t\t\t\tstack[j].items = items;\r\n\t\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tfor (var j = 0; j < stack.length; j++) { // for all items to be filled \r\n\t\t\t\t\t\t\tvar items = [];\r\n\r\n\t\t\t\t\t\t\tvar valuePositionInSearchData = [0];\r\n\t\t\t\t\t\t\tfor (var k = 0; k < itemsInclude; k++) { // for all currently distinct values\r\n\r\n\t\t\t\t\t\t\t\tvar value = cond.distinctValues[k];\r\n\t\t\t\t\t\t\t\tif (cond.blackList.indexOf(value) == -1) { //if not in black list\r\n\r\n\t\t\t\t\t\t\t\t\tif (self.addToStack2(i, stack[j], value, arr, tempSearchData, valuePositionInSearchData, coef, sortNumeric)) {//search if this rows exists\r\n\r\n\t\t\t\t\t\t\t\t\t\tvar collapsed = false;\r\n\t\t\t\t\t\t\t\t\t\tif (cond.collapsedValues.indexOf(value) != -1)\r\n\t\t\t\t\t\t\t\t\t\t\tcollapsed = true;\r\n\t\t\t\t\t\t\t\t\t\tvar o = { value: value, parent: stack[j], used: false, items: false, depth: i, collapsed: collapsed, conditionNumber: arr[i] };\r\n\t\t\t\t\t\t\t\t\t\titems.push(o);\r\n\t\t\t\t\t\t\t\t\t\tnewstack.push(o);\r\n\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} // distinct values \r\n\t\t\t\t\t\t\tstack[j].items = items;\r\n\t\t\t\t\t\t} // items in stack\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\tstack = newstack;\r\n\t\t\t\t} /* conditions */\r\n\r\n\r\n\t\t\t\t//add measure & value row\r\n\t\t\t\tif ((self.ShowMeasuresAsRows) && (rows)) {\r\n\t\t\t\t\t//if (arr.length > 0){\r\n\t\t\t\t\tvar newstack = [];\r\n\t\t\t\t\tfor (var j = 0; j < stack.length; j++) { /* for all items to be filled */\r\n\t\t\t\t\t\tvar items = [];\r\n\t\t\t\t\t\tvar itemsInclude = measures.length;\r\n\r\n\t\t\t\t\t\tfor (var k = 0; k < itemsInclude; k++) { //for all measures\r\n\t\t\t\t\t\t\tvar measureName = measures[k].getAttribute(\"displayName\")\r\n\t\t\t\t\t\t\tvar collapsed = false;\r\n\t\t\t\t\t\t\tvar o = { value: measureName, parent: stack[j], used: false, items: false, depth: dimensionLenght, collapsed: collapsed };\r\n\t\t\t\t\t\t\t//items.push(o);\r\n\t\t\t\t\t\t\tvar podar = false\r\n\t\t\t\t\t\t\tif (self.colConditions.length == 0) {\r\n\t\t\t\t\t\t\t\tvar measureValue = self.getMeasureValue(stack[j], k, arr);\r\n\t\t\t\t\t\t\t\tif (measureValue == self.EmptyValue) {\r\n\t\t\t\t\t\t\t\t\tpodar = true;\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tvar v = { value: measureValue, parent: o, used: false, items: false, depth: dimensionLenght + 1, collapsed: collapsed };\r\n\t\t\t\t\t\t\t\t\to.items = []\r\n\t\t\t\t\t\t\t\t\to.items.push(v)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t//var collapseFalse\r\n\t\t\t\t\t\t\tif (!podar) {\r\n\t\t\t\t\t\t\t\titems.push(o)\r\n\t\t\t\t\t\t\t\tif (self.colConditions.length == 0) {\r\n\t\t\t\t\t\t\t\t\tnewstack.push(v);\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tnewstack.push(o);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tstack[j].items = items;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tstack = newstack;\r\n\t\t\t\t\t//}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t//create copy of self.allData\r\n\t\t\tvar tempSearchData = [];\r\n\t\t\tfor (var i = 0; i < self.allData.length; i++) {\r\n\t\t\t\ttempSearchData.push(self.allData[i])\r\n\t\t\t}\r\n\r\n\t\t\t//self.createTempDataStructForAggStepOptimization();\r\n\t\t\tcreatePart(self.rowStructure, self.rowConditions, true, tempSearchData);\r\n\t\t\tcreatePart(self.colStructure, self.colConditions, false, tempSearchData);\r\n\t\t\t//self.TempDataStructForAggStepOptimization = [];\r\n\t\t}\r\n\r\n\t\tthis.addToStack3 = function (iterator, item, row, conditionList, orden, sortNumeric) {\r\n\t\t\tif (item.value == undefined)\r\n\t\t\t\treturn true;\r\n\r\n\t\t\t//var value_cond_row_pos = self.conditions[conditionList[iterator]].dataRowPosition;\r\n\t\t\tvar value_prev_cond_row_pos = self.conditions[conditionList[iterator - 1]].dataRowPosition;\r\n\r\n\t\t\tif (item.value == row[value_prev_cond_row_pos]) {\r\n\r\n\t\t\t\tvar tempItem = item;\r\n\t\t\t\tvar flag = true;\r\n\t\t\t\tfor (var resto = 1; resto < iterator; resto++) {\r\n\t\t\t\t\tvar value_prev = self.conditions[conditionList[iterator - 1 - resto]].dataRowPosition;\r\n\t\t\t\t\ttempItem = tempItem.parent;\r\n\t\t\t\t\tif (tempItem.value != row[value_prev]) {\r\n\t\t\t\t\t\tflag = false;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (flag) return true;\r\n\r\n\t\t\t} else {\r\n\t\t\t\tif ((orden == 0) || (orden == 2) ||\r\n\t\t\t\t\t((orden == 1) && (!sortNumeric) && (row[value_prev_cond_row_pos] <= item.value)) ||\r\n\t\t\t\t\t((orden == -1) && (!sortNumeric) && (row[value_prev_cond_row_pos] >= item.value)) ||\r\n\t\t\t\t\t((orden == 1) && (sortNumeric) && (parseInt(row[value_prev_cond_row_pos]) <= parseInt(item.value))) ||\r\n\t\t\t\t\t((orden == -1) && (sortNumeric) && (parseInt(row[value_prev_cond_row_pos]) >= parseInt(item.value)))\r\n\t\t\t\t) {\r\n\t\t\t\t\treturn false\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn 'break'\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tthis.addToStack2 = function (iterator, item, value, conditionList, tempSearchData, valuePosition, orden, sortNumeric) {\r\n\t\t\tif ((self.GeneralDataRows.length > 3000))\r\n\t\t\t\treturn true\r\n\t\t\tif (iterator < 1)\r\n\t\t\t\treturn true;\r\n\t\t\tif (item.value == undefined)\r\n\t\t\t\treturn true;\r\n\r\n\t\t\tvar value_cond_row_pos = self.conditions[conditionList[iterator]].dataRowPosition;\r\n\t\t\tvar value_prev_cond_row_pos = self.conditions[conditionList[iterator - 1]].dataRowPosition;\r\n\t\t\t//search if the row exists\r\n\t\t\tif ((self.allData.length > 1000) && (self.filterIndexes.length > 0) && (self.rowConditions.length < 8)) {\r\n\t\t\t\treturn true\r\n\t\t\t}\r\n\r\n\t\t\tvar first = true;\r\n\t\t\tfor (var i = valuePosition[0]; i < tempSearchData.length/*self.allData.length*/; i++) {\r\n\t\t\t\tif ((orden == 0) || (orden == 2) ||\r\n\t\t\t\t\t((orden == 1) && (!sortNumeric) && (tempSearchData[i][value_cond_row_pos] <= value)) ||\r\n\t\t\t\t\t((orden == -1) && (!sortNumeric) && (tempSearchData[i][value_cond_row_pos] >= value)) ||\r\n\t\t\t\t\t((orden == 1) && (sortNumeric) && (parseInt(tempSearchData[i][value_cond_row_pos]) <= parseInt(value))) ||\r\n\t\t\t\t\t((orden == -1) && (sortNumeric) && (parseInt(tempSearchData[i][value_cond_row_pos]) >= parseInt(value)))\r\n\t\t\t\t) {\r\n\t\t\t\t\tif (tempSearchData[i][value_cond_row_pos] == value) {\r\n\t\t\t\t\t\tif ((first) && (orden != 0) && (orden != 2)) {\r\n\t\t\t\t\t\t\tvaluePosition[0] = i; first = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (item.value == tempSearchData[i][value_prev_cond_row_pos]) {\r\n\t\t\t\t\t\t\tvar tempItem = item;\r\n\t\t\t\t\t\t\tvar flag = true;\r\n\t\t\t\t\t\t\tfor (var resto = 1; resto < iterator; resto++) {\r\n\t\t\t\t\t\t\t\tvar value_prev = self.conditions[conditionList[iterator - 1 - resto]].dataRowPosition;\r\n\t\t\t\t\t\t\t\ttempItem = tempItem.parent;\r\n\t\t\t\t\t\t\t\tif (tempItem.value != tempSearchData[i][value_prev]) {\r\n\t\t\t\t\t\t\t\t\tflag = false;\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (flag) return true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {//se supero el valor\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif ((/*(!self.autoPaging) ||*/ (self.GeneralDataRows.length < 500)) //limitado evitar loop grande\r\n\t\t\t\t&& (self.GeneralDataRows.length > self.allData.length)) {\r\n\t\t\t\tfor (var i = 0; i < self.GeneralDataRows.length; i++) {\r\n\t\t\t\t\tif (self.GeneralDataRows[i][value_cond_row_pos] == value) {\r\n\t\t\t\t\t\tif (item.value == self.GeneralDataRows[i][value_prev_cond_row_pos]) {\r\n\t\t\t\t\t\t\tif (iterator > 1) {\r\n\r\n\t\t\t\t\t\t\t\tvar value_prev = self.conditions[conditionList[iterator - 2]].dataRowPosition;\r\n\t\t\t\t\t\t\t\tif (item.parent.value == self.GeneralDataRows[i][value_prev]) {\r\n\t\t\t\t\t\t\t\t\treturn true\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tthis.fillAggStructure = function () { /* mark used branches of aggregation structure */\r\n\t\t\tfunction fillPart(struct, arr, row, rowNumber) {\r\n\t\t\t\tif (!self.ShowMeasuresAsRows) {\r\n\t\t\t\t\tvar ptr = struct;\r\n\t\t\t\t\tfor (var i = 0; i < arr.length; i++) {\r\n\t\t\t\t\t\tvar rindex = arr[i];\r\n\t\t\t\t\t\tvar value = row[rindex];\r\n\t\t\t\t\t\tvar o = false;\r\n\t\t\t\t\t\tfor (var j = 0; j < ptr.items.length; j++) {\r\n\t\t\t\t\t\t\tif (ptr.items[j].value == value) {\r\n\t\t\t\t\t\t\t\to = ptr.items[j];\r\n\t\t\t\t\t\t\t\tptr.items[j].row = rowNumber;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (o) ptr = o;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t} /* for all conditions */\r\n\t\t\t\t\tptr.used = true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar posTitleMeasure = row.length - measures.length;\r\n\t\t\t\t\trow.splice(posTitleMeasure, 0, \"\");\r\n\t\t\t\t\tfor (var m = 0; m < measures.length; m++) {\r\n\t\t\t\t\t\t//agrego a la fila el valor de la medida\r\n\t\t\t\t\t\tvar measureName = measures[m].getAttribute(\"displayName\")\r\n\t\t\t\t\t\trow[posTitleMeasure] = measureName;\r\n\r\n\t\t\t\t\t\tvar ptr = struct;\r\n\t\t\t\t\t\tfor (var i = 0; i < arr.length; i++) {\r\n\t\t\t\t\t\t\tvar rindex = arr[i];//i; //arr[i]; \r\n\t\t\t\t\t\t\tvar value = row[rindex];\r\n\t\t\t\t\t\t\tvar o = false;\r\n\t\t\t\t\t\t\tfor (var j = 0; j < ptr.items.length; j++) {\r\n\t\t\t\t\t\t\t\tif (ptr.items[j].value == value) {\r\n\t\t\t\t\t\t\t\t\to = ptr.items[j];\r\n\t\t\t\t\t\t\t\t\t//ptr.items[j].row = rowNumber*measures.length + m;\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (!self.autoPaging) {\r\n\t\t\t\t\t\t\t\t//if (!o) { \r\n\t\t\t\t\t\t\t\t//\t/*alert(\"Value not found in distinct?!?!? PANIC!!!\"); */}\r\n\t\t\t\t\t\t\t\tif (o) ptr = o;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tif (o) ptr = o;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} /* for all conditions */\r\n\t\t\t\t\t\tptr.used = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\trow.splice(posTitleMeasure, 1)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfunction fillAllPart(struct) {\r\n\t\t\t\tvar ptr = struct;\r\n\t\t\t\tif (!ptr.items) {\r\n\t\t\t\t\tptr.used = true;\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tfor (var i = 0; i < ptr.items.length; i++) { fillAllPart(ptr.items[i]); }\r\n\t\t\t}\r\n\r\n\t\t\tif (self.options.showEmpty) {\r\n\t\t\t\tfillAllPart(self.rowStructure);\r\n\t\t\t\tfillAllPart(self.colStructure);\r\n\t\t\t} else {\r\n\t\t\t\tfor (var i = 0; i < self.filteredData.length; i++) {\r\n\t\t\t\t\tvar row = self.filteredData[i];\r\n\t\t\t\t\tfillPart(self.rowStructure, self.rowConditions, row, i);\r\n\t\t\t\t\tfillPart(self.colStructure, self.colConditions, row, i);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.checkAggStructure = function () { /* check structure for empty parts and delete them */\r\n\t\t\tfunction check(ptrT) { /* recursive function */\r\n\t\t\t\tif (!self.ShowMeasuresAsRows) {\r\n\t\t\t\t\tif (!ptrT.items) { return ptrT.used; } /* for leaves, return their usage state */\r\n\t\t\t\t\tfor (var i = ptrT.items.length - 1; i >= 0; i--) { /* if node, decide based on children count */\r\n\t\t\t\t\t\tif (!check(ptrT.items[i])) {\r\n\t\t\t\t\t\t\tptrT.items.splice(i, 1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn (ptrT.items.length > 0); /* return children state */\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (self.colConditions > 0) {\r\n\t\t\t\t\t\tvar tempPt = ptrT\r\n\t\t\t\t\t\tif (!tempPt.items) { return tempPt.used; }\r\n\t\t\t\t\t\tvar itemLg = tempPt.items.length\r\n\t\t\t\t\t\tvar to = 5;\r\n\t\t\t\t\t\tvar iterI;\r\n\t\t\t\t\t\tfor (iterI = itemLg - 1; iterI > -1; iterI--) {\r\n\t\t\t\t\t\t\tif (iterI > -1) {\r\n\t\t\t\t\t\t\t\tvar ol = 0;\r\n\t\t\t\t\t\t\t\tvar resultado = check(tempPt.items[iterI]);\r\n\t\t\t\t\t\t\t\tif ((resultado != undefined) && (!resultado)) {\r\n\t\t\t\t\t\t\t\t\ttempPt.items.splice(iterI, 1);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn (tempPt.items.length > 0);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tcheck(self.rowStructure);\r\n\t\t\tif (!self.ShowMeasuresAsRows) {\r\n\t\t\t\tcheck(self.colStructure);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.applyDefaultFormats = function (td, value) {\r\n\t\t\tvar type = typeof value;\r\n\t\t\tswitch (type) {\r\n\t\t\t\tcase \"number\":\r\n\t\t\t\t\tvalue = OAT.charReplace(value.toString(), \".\", gx.decimalPoint);\r\n\t\t\t\t\tOAT.addTextNode(td, value)\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"date\":\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\treturn td;\r\n\t\t}\r\n\r\n\t\tthis.refreshPivot = function (metadata, data, sameQuery) {\r\n\t\t\tif ((metadata != \"\") && (data != \"\")) {\r\n\t\t\t\tvar parser = new DOMParser();\r\n\t\t\t\tvar xmlData = parser.parseFromString(metadata, 'text/xml');\r\n\t\t\t\tvar dimensions = xmlData.getElementsByTagName(\"OLAPDimension\");\r\n\t\t\t\tvar index;\r\n\r\n\t\t\t\t//add hide elements to blacklist\r\n\t\t\t\tfor (var bli = 0; bli < self.conditions.length; bli++) {\r\n\t\t\t\t\tif ((self.conditions[bli])) {\r\n\t\t\t\t\t\tvar tempBlack = jQuery.extend(true, [], self.conditions[bli].blackList);\r\n\t\t\t\t\t\tfor (var ib = 0; ib < tempBlack.length; ib++) {\r\n\t\t\t\t\t\t\tself.createFilterInfo({ op: \"pop\", values: tempBlack[ib], dim: bli });\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tself.conditions[bli].blackList = []\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar rowPosition = []; var colPosition = [];\r\n\t\t\t\tfor (var dim = 0; dim < dimensions.length; dim++) { //for every dimensions of the other querie\r\n\r\n\t\t\t\t\tvar dimID = dimensions[dim].getElementsByTagName(\"name\")[0].childNodes[0].nodeValue; //get the name - \"Identifier\" of this dimension\r\n\r\n\t\t\t\t\t//now search for this name at this querie\r\n\t\t\t\t\tvar dimPos = -1;\r\n\t\t\t\t\tfor (var itC = 0; itC < self.columns.length; itC++) {\r\n\t\t\t\t\t\tif (self.columns[itC].attributes.getNamedItem(\"name\").nodeValue === dimID)\r\n\t\t\t\t\t\t\tdimPos = itC;\t\t//this is the number identifier of this dimension at this pivot\t\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\tif (dimPos != -1) {//the dimension exist in this pivot\r\n\t\t\t\t\t\t//columns and rows dimensions and filters\r\n\t\t\t\t\t\tvar position = dimensions[dim].getElementsByTagName(\"condition\")[0].childNodes[0].nodeValue; //where's the dimension? row, columns, filter\r\n\t\t\t\t\t\tif (position === \"row\") {\r\n\t\t\t\t\t\t\tindex = self.colConditions.indexOf(dimPos);\r\n\t\t\t\t\t\t\tif (index != -1) { //if it is as columns, change to rows\r\n\t\t\t\t\t\t\t\tself.colConditions.splice(index, 1);\r\n\t\t\t\t\t\t\t\tif (measures.length > 1)\r\n\t\t\t\t\t\t\t\t\tself.rowConditions = [dimPos].concat(self.rowConditions);\r\n\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t\tself.rowConditions.push(dimPos);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tindex = self.filterIndexes.indexOf(dimPos);\r\n\t\t\t\t\t\t\t\tif (index != -1) {\r\n\t\t\t\t\t\t\t\t\tself.filterIndexes.splice(index, 1);\r\n\t\t\t\t\t\t\t\t\tif (measures.length > 1)\r\n\t\t\t\t\t\t\t\t\t\tself.rowConditions = [dimPos].concat(self.rowConditions);\r\n\t\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t\t\tself.rowConditions.push(dimPos);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\trowPosition[parseInt(dimensions[dim].getElementsByTagName(\"position\")[0].childNodes[0].nodeValue)] = dimPos\r\n\t\t\t\t\t\t} else if (position === \"col\") {\r\n\t\t\t\t\t\t\tindex = self.rowConditions.indexOf(dimPos);\r\n\t\t\t\t\t\t\tif (index != -1) {\r\n\t\t\t\t\t\t\t\tself.rowConditions.splice(index, 1);\r\n\t\t\t\t\t\t\t\tif (measures.length > 1)\r\n\t\t\t\t\t\t\t\t\tself.colConditions = [dimPos].concat(self.colConditions);\r\n\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t\tself.colConditions.push(dimPos);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tindex = self.filterIndexes.indexOf(dimPos);\r\n\t\t\t\t\t\t\t\tif (index != -1) {\r\n\t\t\t\t\t\t\t\t\tself.filterIndexes.splice(index, 1);\r\n\t\t\t\t\t\t\t\t\tif (measures.length > 1)\r\n\t\t\t\t\t\t\t\t\t\tself.colConditions = [dimPos].concat(self.colConditions);\r\n\t\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t\t\tself.colConditions.push(dimPos);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tcolPosition[parseInt(dimensions[dim].getElementsByTagName(\"position\")[0].childNodes[0].nodeValue)] = dimPos\r\n\t\t\t\t\t\t} else if (position === \"none\") {//to filter\r\n\t\t\t\t\t\t\tindex = self.colConditions.indexOf(dimPos);\r\n\t\t\t\t\t\t\tif (index != -1) {\r\n\t\t\t\t\t\t\t\tself.colConditions.splice(index, 1);\r\n\t\t\t\t\t\t\t\tif (measures.length > 1)\r\n\t\t\t\t\t\t\t\t\tself.filterIndexes = [dimPos].concat(self.filterIndexes);\r\n\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t\tself.filterIndexes.push(dimPos);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tindex = self.rowConditions.indexOf(dimPos);\r\n\t\t\t\t\t\t\t\tif (index != -1) {\r\n\t\t\t\t\t\t\t\t\tself.rowConditions.splice(index, 1);\r\n\t\t\t\t\t\t\t\t\tif (measures.length > 1)\r\n\t\t\t\t\t\t\t\t\t\tself.filterIndexes = [dimPos].concat(self.filterIndexes);\r\n\t\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t\t\tself.filterIndexes.push(dimPos);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t//set order value\r\n\t\t\t\t\t\tvar order = dimensions[dim].getElementsByTagName(\"order\")[0].childNodes[0].nodeValue;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (order == \"descending\") {\r\n\t\t\t\t\t\t\t\tself.conditions[dimPos].sort = -1\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tself.conditions[dimPos].sort = 1\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\r\n\t\t\t\t\t\t//reset blacklists\r\n\t\t\t\t\t\tvar hides = dimensions[dim].getElementsByTagName(\"hide\")[0].childNodes;\r\n\t\t\t\t\t\tfor (var sofs = 0; sofs < hides.length; sofs++) {\r\n\t\t\t\t\t\t\tif (hides[sofs].tagName === \"value\") {\r\n\t\t\t\t\t\t\t\tvar index = self.conditions[dimPos].blackList.indexOf(hides[sofs].textContent);\r\n\t\t\t\t\t\t\t\t//if not already in the list\r\n\t\t\t\t\t\t\t\tif (index === -1) {\r\n\t\t\t\t\t\t\t\t\tfor (var t = 0; t < self.conditions[dimPos].distinctValues.length; t++) {\r\n\t\t\t\t\t\t\t\t\t\tvar trimValue = self.conditions[dimPos].distinctValues[t].toString().trimpivot();\r\n\t\t\t\t\t\t\t\t\t\tif (trimValue == hides[sofs].textContent) {\r\n\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t\tself.createFilterInfo({ op: \"push\", values: self.conditions[dimPos].distinctValues[t], dim: dimPos });\r\n\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t//set values of filter bars\r\n\t\t\t\t\t\tif (dimensions[dim].getElementsByTagName(\"filterdivs\").length > 0) {\r\n\t\t\t\t\t\t\tvar fils = dimensions[dim].getElementsByTagName(\"filterdivs\")[0].childNodes;\r\n\t\t\t\t\t\t\tfor (var sofs = 0; sofs < fils.length; sofs++) {\r\n\t\t\t\t\t\t\t\tif (fils[sofs].tagName === \"value\") {\r\n\t\t\t\t\t\t\t\t\tvar findex = self.filterIndexes.indexOf(dimPos);\r\n\t\t\t\t\t\t\t\t\tif (findex != -1) {\r\n\t\t\t\t\t\t\t\t\t\tif (self.filterDiv.selects[findex] != undefined) {\r\n\t\t\t\t\t\t\t\t\t\t\tself.filterDiv.selects[findex].value = fils[sofs].textContent;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} //else the dimension not exists in this pivot\r\n\r\n\r\n\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//set dimension position\r\n\t\t\t\tif ((self.rowConditions.length - (measures.length - 1)) == rowPosition.length) {\r\n\t\t\t\t\tfor (var i = 0; i < rowPosition.length; i++) {\r\n\t\t\t\t\t\tself.rowConditions[i] = rowPosition[i];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (self.colConditions.length == colPosition.length) {\r\n\t\t\t\t\tfor (var i = 0; i < colPosition.length; i++) {\r\n\t\t\t\t\t\tself.colConditions[i] = colPosition[i];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\r\n\t\t\t\t\tfor (var c = 0; c < self.columns.length; c++) {\r\n\t\t\t\t\t\tself.pageData.AxisInfo = self.createAxisInfo(self.columns[c].getAttribute(\"dataField\"));\r\n\t\t\t\t\t}\r\n\t\t\t\t\tself.pageData.CollapseInfo = self.CreateExpandCollapseInfo(\"\");\r\n\t\t\t\t\tself.pageData.DataInfo = self.createDataInfo()\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar ParmDataInfo = self.createNewDataInfo()\r\n\t\t\t\t\tvar ParmAxisInfo =  self.createNewAxisInfo();\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\tself.lastCallToQueryViewer = \"refreshPivot\"\r\n\t\t\t\t\r\n\t\t\t\t\tself.requestPageDataForPivotTable(1, self.rowsPerPage, true, ParmAxisInfo, ParmDataInfo, self.pageData.FilterInfo, self.pageData.CollapseInfo, true);\r\n\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\r\n\r\n\t\tthis.getRowFromDimensionRow = function (row, rowCollection) {\r\n\t\t\tfor (var rCL = 0; rCL < rowCollection.length; rCL++) {\r\n\t\t\t\tvar same = true;\r\n\t\t\t\tfor (var rwoI = 0; rwoI < row.length; rwoI++) {\r\n\t\t\t\t\tif (row[rwoI] != undefined) {\r\n\t\t\t\t\t\tif (row[rwoI] != rowCollection[rCL][rwoI]) {\r\n\t\t\t\t\t\t\tsame = false;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (same) {\r\n\t\t\t\t\treturn rowCollection[rCL]\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn null\r\n\t\t}\r\n\r\n\t\t\r\n\t\t\r\n\r\n\r\n\t\tthis.notInBlackList = function (row, conditions) {\r\n\t\t\tvar esta = false;\r\n\t\t\tfor (var i = 0; i < row.length; i++) {\r\n\t\t\t\tif ((conditions[i] != undefined) && (conditions[i].blackList != undefined) && (conditions[i].blackList.indexOf(row[i]) != -1)) {\r\n\t\t\t\t\testa = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn esta;\r\n\t\t}\r\n\r\n\r\n\t\tthis.preGoWhenShowHideMeasures = function (index) {\r\n\t\t\tvar displayName = self.initMetadata.Measures[index].displayName;\r\n\r\n\t\t\t//column hide\r\n\t\t\tvar columnIndex = self.headerRow.indexOf(displayName);\r\n\t\t\tif (!self.initMetadata.Measures[index].Visible) {\r\n\t\t\t\tif (measures.length > 1) {\r\n\t\t\t\t\tself.rowConditions.splice(self.rowConditions.length - 1, 1)\r\n\t\t\t\t\tself.dataColumnIndex = self.dataColumnIndex - 1\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t} else {\r\n\t\t\t\tvar presentMeasures = measures.length - 1;\r\n\t\t\t\tfor (var o = 0; o < presentMeasures; o++) {\r\n\t\t\t\t\tself.rowConditions.splice(self.rowConditions.length - 1, 1)\r\n\t\t\t\t}\r\n\t\t\t\tif ((presentMeasures >= 0) && (measures[0].getAttribute(\"dataField\") != \"F0\")) {\r\n\t\t\t\t\tvar cols = self.rowConditions.length + self.colConditions.length + self.filterIndexes.length;\r\n\t\t\t\t\tif (measures.length > 0) {\r\n\t\t\t\t\t\tvar prevCol = cols;\r\n\t\t\t\t\t\tcols = cols + measures.length;\r\n\t\t\t\t\t\tfor (var i = prevCol; i < cols; i++) {\r\n\t\t\t\t\t\t\tself.rowConditions.push(i);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfor (var i = 0; i < self.columns.length; i++) {\r\n\t\t\t\tvar dF = self.columns[i].getAttribute(\"dataField\")\r\n\t\t\t\tvar index = self.initMetadata.DataFields.indexOf(dF);\r\n\t\t\t\tself.initMetadata.Conditions[index] = self.conditions[i];\r\n\t\t\t}\r\n\r\n\t\t\tthis.goWhenHide();\r\n\t\t}\r\n\r\n\r\n\t\tthis.preGoWhenShowHideDimension = function (index) {\r\n\t\t\tfor (var ip = 0; ip < self.columns.length; ip++) {\r\n\t\t\t\tvar dF = self.columns[ip].getAttribute(\"dataField\")\r\n\t\t\t\tvar ix = self.initMetadata.DataFields.indexOf(dF);\r\n\t\t\t\tself.initMetadata.Conditions[ix] = self.conditions[ip];\r\n\t\t\t}\r\n\r\n\t\t\tvar conditionIndex;\r\n\t\t\tvar DataFile = self.initMetadata.DataFields[index]\r\n\t\t\tfor (var ip = 0; ip < self.columns.length; ip++) {\r\n\t\t\t\tvar dF = self.columns[ip].getAttribute(\"dataField\")\r\n\t\t\t\tif (DataFile == dF) {\r\n\t\t\t\t\tconditionIndex = ip\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\r\n\t\t\tif (!self.initMetadata.Dimensions[index].Visible) {\r\n\t\t\t\tself.initMetadata.DimensionPosition[index] = \"row\"\r\n\t\t\t\t//self.conditions[conditionIndex].position = \"row\"\r\n\t\t\t\tif (self.colConditions.indexOf(conditionIndex) > -1) {\r\n\t\t\t\t\tself.initMetadata.DimensionPosition[index] = \"col\"\r\n\t\t\t\t\t//self.conditions[conditionIndex].position = \"col\"\r\n\t\t\t\t}\r\n\t\t\t\tif (self.filterIndexes.indexOf(conditionIndex) > -1) {\r\n\t\t\t\t\tself.initMetadata.DimensionPosition[index] = \"fil\"\r\n\t\t\t\t\t//self.conditions[conditionIndex].position = \"fil\"\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar displayName = self.initMetadata.Dimensions[index].displayName;\r\n\r\n\t\t\t//column hide\r\n\t\t\tvar columnIndex = self.headerRow.indexOf(displayName);\r\n\t\t\tif (!self.initMetadata.Dimensions[index].Visible) {\r\n\t\t\t\tif (self.rowConditions.indexOf(columnIndex) > -1) {\r\n\t\t\t\t\tself.rowConditions.splice(self.rowConditions.indexOf(columnIndex), 1)\r\n\t\t\t\t} else if (self.colConditions.indexOf(columnIndex) > -1) {\r\n\t\t\t\t\tself.colConditions.splice(self.colConditions.indexOf(columnIndex), 1)\r\n\t\t\t\t} else if (self.filterIndexes.indexOf(columnIndex) > -1) {\r\n\t\t\t\t\tself.filterIndexes.splice(self.filterIndexes.indexOf(columnIndex), 1)\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//correct measure and dimension number\r\n\t\t\t\tself.dataColumnIndex = self.dataColumnIndex - 1\r\n\t\t\t\tfor (var i = 0; i < self.rowConditions.length; i++) {\r\n\t\t\t\t\tif (self.rowConditions[i] > columnIndex) {\r\n\t\t\t\t\t\tself.rowConditions[i] = self.rowConditions[i] - 1\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tfor (var i = 0; i < self.colConditions.length; i++) {\r\n\t\t\t\t\tif (self.colConditions[i] > columnIndex) {\r\n\t\t\t\t\t\tself.colConditions[i] = self.colConditions[i] - 1\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tfor (var i = 0; i < self.filterIndexes.length; i++) {\r\n\t\t\t\t\tif (self.filterIndexes[i] > columnIndex) {\r\n\t\t\t\t\t\tself.filterIndexes[i] = self.filterIndexes[i] - 1\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\t\t\t\tvar previousPosition = self.initMetadata.DimensionPosition[index]//self.initMetadata.Conditions[index].position;\r\n\r\n\t\t\t\tif (previousPosition == undefined) {\r\n\t\t\t\t\tvar defpos = self.initMetadata.Dimensions[index].defaultPosition.toLowerCase()\r\n\r\n\t\t\t\t\tif (defpos.indexOf(\"rows\") > -1) previousPosition = \"row\";\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tif (defpos.indexOf(\"columns\") > -1) previousPosition = \"col\";\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\tif ((defpos.indexOf(\"filters\") > -1) || (defpos.indexOf(\"pages\") > -1)) previousPosition = \"fil\";\r\n\t\t\t\t\t\t\telse previousPosition = \"row\";\r\n\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\tvar posIndex = 0\r\n\t\t\t\tfor (var i = 0; i < index; i++) {\r\n\t\t\t\t\tif (self.initMetadata.Dimensions[i].Visible) posIndex = posIndex + 1\r\n\t\t\t\t}\r\n\r\n\t\t\t\tindex = posIndex;\r\n\t\t\t\tif (previousPosition == \"row\") {\r\n\t\t\t\t\tvar tempRowConsition = [];\r\n\t\t\t\t\tvar existe = (self.rowConditions.indexOf(index) > -1)\r\n\t\t\t\t\tfor (var t = 0; t < self.rowConditions.length; t++) {\r\n\t\t\t\t\t\tif (self.rowConditions[t] < index) {\r\n\t\t\t\t\t\t\ttempRowConsition.push(self.rowConditions[t])\r\n\t\t\t\t\t\t} else if (self.rowConditions[t] == index) {\r\n\t\t\t\t\t\t\ttempRowConsition.push(index)\r\n\t\t\t\t\t\t\ttempRowConsition.push(index + 1)\r\n\t\t\t\t\t\t\texiste = true\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (!existe) {\r\n\t\t\t\t\t\t\t\ttempRowConsition.push(index)\r\n\t\t\t\t\t\t\t\texiste = true\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\ttempRowConsition.push(self.rowConditions[t] + 1)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!existe) {\r\n\t\t\t\t\t\ttempRowConsition.push(index)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tself.rowConditions = []\r\n\t\t\t\t\tself.rowConditions = tempRowConsition\r\n\r\n\t\t\t\t\tself.dataColumnIndex = self.dataColumnIndex + 1\r\n\r\n\r\n\t\t\t\t\tvar tempColConsition = [];\r\n\t\t\t\t\tfor (var t = 0; t < self.colConditions.length; t++) {\r\n\t\t\t\t\t\tif (self.colConditions[t] >= index) {\r\n\t\t\t\t\t\t\ttempColConsition.push(self.colConditions[t] + 1)\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\ttempColConsition.push(self.colConditions[t])\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tself.colConditions = []\r\n\t\t\t\t\tself.colConditions = tempColConsition\r\n\r\n\t\t\t\t\tvar tempFilConsition = [];\r\n\t\t\t\t\tfor (var t = 0; t < self.filterIndexes.length; t++) {\r\n\t\t\t\t\t\tif (self.filterIndexes[t] >= index) {\r\n\t\t\t\t\t\t\ttempFilConsition.push(self.filterIndexes[t] + 1)\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\ttempFilConsition.push(self.filterIndexes[t])\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tself.filterIndexes = []\r\n\t\t\t\t\tself.filterIndexes = tempFilConsition\r\n\r\n\r\n\t\t\t\t} else if (previousPosition == \"col\") {\r\n\r\n\t\t\t\t\tvar tempRowConsition = [];\r\n\t\t\t\t\tfor (var t = 0; t < self.rowConditions.length; t++) {\r\n\t\t\t\t\t\tif (self.rowConditions[t] >= index) {\r\n\t\t\t\t\t\t\ttempRowConsition.push(self.rowConditions[t] + 1)\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\ttempRowConsition.push(self.rowConditions[t])\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tself.rowConditions = []\r\n\t\t\t\t\tself.rowConditions = tempRowConsition\r\n\r\n\t\t\t\t\tself.dataColumnIndex = self.dataColumnIndex + 1\r\n\r\n\r\n\r\n\t\t\t\t\tvar tempColConsition = [];\r\n\t\t\t\t\tvar existe = (self.colConditions.indexOf(index) > -1)\r\n\t\t\t\t\tfor (var t = 0; t < self.colConditions.length; t++) {\r\n\t\t\t\t\t\tif (self.colConditions[t] < index) {\r\n\t\t\t\t\t\t\ttempColConsition.push(self.colConditions[t])\r\n\t\t\t\t\t\t} else if (self.colConditions[t] == index) {\r\n\t\t\t\t\t\t\ttempColConsition.push(index)\r\n\t\t\t\t\t\t\ttempColConsition.push(index + 1)\r\n\t\t\t\t\t\t\texiste = true\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (!existe) {\r\n\t\t\t\t\t\t\t\ttempColConsition.push(index)\r\n\t\t\t\t\t\t\t\texiste = true\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\ttempColConsition.push(self.colConditions[t] + 1)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!existe) {\r\n\t\t\t\t\t\ttempColConsition.push(index)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tself.colConditions = []\r\n\t\t\t\t\tself.colConditions = tempColConsition\r\n\r\n\r\n\r\n\r\n\t\t\t\t\tvar tempFilConsition = [];\r\n\t\t\t\t\tfor (var t = 0; t < self.filterIndexes.length; t++) {\r\n\t\t\t\t\t\tif (self.filterIndexes[t] >= index) {\r\n\t\t\t\t\t\t\ttempFilConsition.push(self.filterIndexes[t] + 1)\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\ttempFilConsition.push(self.filterIndexes[t])\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tself.filterIndexes = []\r\n\t\t\t\t\tself.filterIndexes = tempFilConsition\r\n\t\t\t\t} else if (previousPosition == \"fil\") {\r\n\r\n\t\t\t\t\tvar tempRowConsition = [];\r\n\t\t\t\t\tfor (var t = 0; t < self.rowConditions.length; t++) {\r\n\t\t\t\t\t\tif (self.rowConditions[t] >= index) {\r\n\t\t\t\t\t\t\ttempRowConsition.push(self.rowConditions[t] + 1)\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\ttempRowConsition.push(self.rowConditions[t])\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tself.rowConditions = []\r\n\t\t\t\t\tself.rowConditions = tempRowConsition\r\n\r\n\t\t\t\t\tself.dataColumnIndex = self.dataColumnIndex + 1\r\n\r\n\r\n\t\t\t\t\tvar tempColConsition = [];\r\n\t\t\t\t\tfor (var t = 0; t < self.colConditions.length; t++) {\r\n\t\t\t\t\t\tif (self.colConditions[t] >= index) {\r\n\t\t\t\t\t\t\ttempColConsition.push(self.colConditions[t] + 1)\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\ttempColConsition.push(self.colConditions[t])\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tself.colConditions = []\r\n\t\t\t\t\tself.colConditions = tempColConsition\r\n\r\n\r\n\t\t\t\t\tvar tempFilConsition = [];\r\n\t\t\t\t\tvar existe = (self.filterIndexes.indexOf(index) > -1)\r\n\t\t\t\t\tfor (var t = 0; t < self.filterIndexes.length; t++) {\r\n\t\t\t\t\t\tif (self.filterIndexes[t] < index) {\r\n\t\t\t\t\t\t\ttempFilConsition.push(self.filterIndexes[t])\r\n\t\t\t\t\t\t} else if (self.filterIndexes[t] == index) {\r\n\t\t\t\t\t\t\ttempFilConsition.push(index)\r\n\t\t\t\t\t\t\ttempFilConsition.push(index + 1)\r\n\t\t\t\t\t\t\texiste = true\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (!existe) {\r\n\t\t\t\t\t\t\t\ttempFilConsition.push(index)\r\n\t\t\t\t\t\t\t\texiste = true\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\ttempFilConsition.push(self.filterIndexes[t] + 1)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!existe) {\r\n\t\t\t\t\t\ttempFilConsition.push(index)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tself.filterIndexes = []\r\n\t\t\t\t\tself.filterIndexes = tempFilConsition\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tself.initRowConditions = []\r\n\t\t\tfor(var i = 0; i<self.rowConditions.length; i++){\r\n\t\t\t\tself.initRowConditions.push(self.rowConditions[i])\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis.goWhenHide();\r\n\t\t}\r\n\r\n\t\tthis.goWhenHide = function (clean) {\r\n\t\t\tvar hideDimension = [];\r\n\t\t\tfor (var i = 0; i < self.initMetadata.Dimensions.length; i++) {\r\n\t\t\t\tif (!self.initMetadata.Dimensions[i].Visible) {\r\n\t\t\t\t\thideDimension.push(self.initMetadata.Dimensions[i].dataField)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar hideMeasures = [];\r\n\t\t\tfor (var i = 0; i < self.initMetadata.Measures.length; i++) {\r\n\t\t\t\tif (!self.initMetadata.Measures[i].Visible) {\r\n\t\t\t\t\thideMeasures.push(self.initMetadata.Measures[i].dataField)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar stateHidden = {\r\n\t\t\t\tDataFields: self.initMetadata.DataFields,\r\n\t\t\t\tDimensions: self.initMetadata.Dimensions,\r\n\t\t\t\tMeasures: self.initMetadata.Measures,\r\n\t\t\t\tDimensionPosition: self.initMetadata.DimensionPosition,\r\n\t\t\t\tConditions: self.initMetadata.Conditions,\r\n\t\t\t\tversion: self.rememberLayoutStateVersion\r\n\t\t\t}\r\n\t\t\tself.saveHiddenState(stateHidden)\r\n\r\n\r\n\t\t\tvar result = OATParseMetadata(self.initMetadata.Metadata, hideDimension, hideMeasures, self.serverPagination)\r\n\t\t\tvar newMetadata = result[0]; self.HideDataFilds = result[2]; self.OrderFildsHidden = result[1];\r\n\r\n\t\t\tvar xmlDoc = jQuery.parseXML(newMetadata);\r\n\t\t\tmeasures = xmlDoc.getElementsByTagName(\"OLAPMeasure\");\r\n\t\t\tconsole.log(\"Imprimo el measures\");\r\n\t\t\tconsole.log(measures);\r\n\t\t\tself.columns = xmlDoc.getElementsByTagName(\"OLAPDimension\");\r\n\r\n\t\t\tvar result = OATGetColumnsAndMeasureMeatadata(self.columns, measures, self.formulaInfo, self.OrderFildsHidden)\r\n\t\t\tself.headerRow = result[0];\r\n\t\t\tself.formulaInfo.measureFormula = result[2];\r\n\t\t\tself.conditionalFormats = result[3];\r\n\t\t\tself.conditionalFormatsColumns = result[4];\r\n\r\n\t\t\tvar orderFilds = result[1];\r\n\r\n\t\t\r\n\r\n\t\t\tif (measures.length > 0) {\r\n\t\t\t\tself.dataColumnIndex = self.headerRow.length - 1;\r\n\t\t\t}\r\n\r\n\r\n\r\n\t\t\t\tself.conditions = [];\r\n\t\t\t\tfor (var i = 0; i < self.headerRow.length; i++) {\r\n\t\t\t\t\tself.initCondition(i);\r\n\t\t\t\t\t//add info for server paging porpouse\r\n\t\t\t\t\tif (self.conditions[i] && self.columns[i]) {\r\n\t\t\t\t\t\tself.conditions[i].dataField = self.columns[i].getAttribute(\"dataField\")\r\n\t\t\t\t\t\tself.conditions[i].state = \"all\"\r\n\t\t\t\t\t\tself.conditions[i].defaultAction = \"Include\"\r\n\t\t\t\t\t\tself.conditions[i].visibles = []\r\n\t\t\t\t\t\tself.conditions[i].searchInfo = { previousPage: 0, totalPages: 0, filteredText: \"\", values: [] }\r\n\t\t\t\t\t}\r\n\t\t\t\t\tself.applyCustomFilters(i);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor (var i = 0; i < self.columns.length; i++) {\r\n\t\t\t\t\tvar dF = self.columns[i].getAttribute(\"dataField\")\r\n\t\t\t\t\tvar index = self.initMetadata.DataFields.indexOf(dF);\r\n\t\t\t\t\tif (self.initMetadata.Conditions[index] != \"\") {\r\n\t\t\t\t\t\tself.initMetadata.Conditions[index].dataRowPosition = self.conditions[i].dataRowPosition\r\n\t\t\t\t\t\tself.conditions[i] = self.initMetadata.Conditions[index];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tself.cleanGridCache();\r\n\r\n\t\t\t\tself.pageData.AxisInfo = self.createAxisInfo();\r\n\r\n\t\t\t\tvar ParmAxisInfo = self.createNewAxisInfo();\r\n\t\t\t\t\r\n\t\t\t\tself.pageData.DataInfo = self.createDataInfo()\r\n\t\t\t\t\r\n\t\t\t\tvar ParmDataInfo = self.createNewDataInfo();\r\n\t\t\t\t\r\n\t\t\t\tself.lastCallToQueryViewer = \"hiddenDimension\"\r\n\t\t\t\t\r\n\t\t\t\tself.requestPageDataForPivotTable(1, self.rowsPerPage, true, ParmAxisInfo, ParmDataInfo, self.pageData.FilterInfo, self.pageData.CollapseInfo, true);\r\n\r\n\t\t\t\t\r\n\t\t\t\t\r\n\r\n\t\t\t\tif (clean) {\r\n\t\t\t\t\tself.initValueRead(self, 0);\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tfor (var i = 0; i < self.columns.length; i++) {\r\n\t\t\t\t\t\tif (self.conditions[i].totalPages == undefined) {\r\n\t\t\t\t\t\t\t//load values\r\n\t\t\t\t\t\t\tvar cantItems = 10;\r\n\t\t\t\t\t\t\tif ((self.QueryViewerCollection[self.IdForQueryViewerCollection].AutoRefreshGroup != \"\")) {\r\n\t\t\t\t\t\t\t\tcantItems = 0;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tvar columnNumber = i;\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tself.lastRequestAttributeValues = \"hiddenDimension\"\r\n\t\t\t\t\t\t\tself.lastRequestAttributeColumnNumber = columnNumber\r\n\t\t\t\t\r\n\t\t\t\t\t\t\tself.requestAttributeValues(self.columns[columnNumber].getAttribute(\"dataField\"), 1, cantItems, \"\")\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t/*self.QueryViewerCollection[self.IdForQueryViewerCollection].getAttributeValues((function (resJSON) {\r\n\t\t\t\t\t\t\t\tvar data = JSON.parse(resJSON);\r\n\r\n\t\t\t\t\t\t\t\tself.conditions[columnNumber].previousPage = data.PageNumber\r\n\t\t\t\t\t\t\t\tself.conditions[columnNumber].totalPages = data.PagesCount\r\n\t\t\t\t\t\t\t\tself.conditions[columnNumber].blocked = false\r\n\t\t\t\t\t\t\t\t//null value?\r\n\t\t\t\t\t\t\t\tif (data.Null) {\r\n\t\t\t\t\t\t\t\t\tself.conditions[columnNumber].hasNull = true;\r\n\t\t\t\t\t\t\t\t\tif (self.conditions[columnNumber].distinctValues.indexOf(\"#NuN#\") == -1) {\r\n\t\t\t\t\t\t\t\t\t\tself.conditions[columnNumber].distinctValues.push(\"#NuN#\")\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tvar nullIncluded = true;\r\n\r\n\t\t\t\t\t\t\t\t\tif (!self.conditions[columnNumber].NullIncluded) {\r\n\t\t\t\t\t\t\t\t\t\tnullIncluded = false;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tif ((nullIncluded) && (self.conditions[columnNumber].visibles.indexOf(\"#NuN#\") == -1)) {\r\n\t\t\t\t\t\t\t\t\t\tself.conditions[columnNumber].visibles.push(\"#NuN#\");\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tself.conditions[columnNumber].hasNull = false;\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\tvar includeLists = [];\r\n\t\t\t\t\t\t\t\tfor (var i = 0; i < data.NotNullValues.length; i++) {\r\n\t\t\t\t\t\t\t\t\tvar value = data.NotNullValues[i]\r\n\t\t\t\t\t\t\t\t\tvar include = false;\r\n\t\t\t\t\t\t\t\t\tif ((self.conditions[columnNumber].state == \"none\") &&\r\n\t\t\t\t\t\t\t\t\t\t(self.UserFilterValues.length > 0) && (self.UserFilterValues[columnNumber] != undefined)\r\n\t\t\t\t\t\t\t\t\t\t&& (self.UserFilterValues[columnNumber].length > 0) && (self.UserFilterValues[columnNumber].indexOf(value.trimpivot()) != -1)) {\r\n\t\t\t\t\t\t\t\t\t\tinclude = true;\r\n\t\t\t\t\t\t\t\t\t\tincludeLists.push(value)\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\tif (self.conditions[columnNumber].distinctValues.indexOf(value) == -1) {\r\n\t\t\t\t\t\t\t\t\t\tself.conditions[columnNumber].distinctValues.push(value)\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tif ((self.conditions[columnNumber].state == \"all\")\r\n\t\t\t\t\t\t\t\t\t\t&& (self.conditions[columnNumber].visibles.indexOf(value) == -1)) {\r\n\t\t\t\t\t\t\t\t\t\tself.conditions[columnNumber].visibles.push(value)\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tif ((self.conditions[columnNumber].state == \"none\")\r\n\t\t\t\t\t\t\t\t\t\t&& (self.conditions[columnNumber].blackList.indexOf(value) == -1)\r\n\t\t\t\t\t\t\t\t\t\t&& (!include)) {\r\n\t\t\t\t\t\t\t\t\t\tself.conditions[columnNumber].blackList.push(value)\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\tif ((self.UserExpandValues.length > 0)) {//collapsed values\r\n\t\t\t\t\t\t\t\t\t\tif (self.UserExpandValues[columnNumber] != undefined) {\r\n\t\t\t\t\t\t\t\t\t\t\tif ((self.UserExpandValues[columnNumber][0] == \"#ALLCOLLAPSE#\") ||\r\n\t\t\t\t\t\t\t\t\t\t\t\t(self.UserExpandValues[columnNumber].indexOf(value.trimpivot()) == -1)) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tself.conditions[columnNumber].collapsedValues.push(value);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\tfor (var i = 0; i < includeLists.length; i++) {\r\n\t\t\t\t\t\t\t\t\tself.createFilterInfo({ op: \"pop\", values: includeLists[i], dim: columnNumber }, true);\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\r\n\r\n\t\t\t\t\t\t\t}).closure(this), [self.columns[columnNumber].getAttribute(\"dataField\"), 1, cantItems, \"\"]);*/\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\r\n\t\t}\r\n\r\n\t\t\r\n\r\n\t\tthis.canBeConsiderNoNew = function (row, dataRows, helperList) {\r\n\t\t\tif (self.colConditions.length > 0) {\r\n\t\t\t\tvar notNew = false;\r\n\t\t\t\tfor (var i = 0; i < dataRows.length; i++) {\r\n\t\t\t\t\tvar same = true;\r\n\t\t\t\t\tfor (var j = 0; j < self.rowConditions.length; j++) {\r\n\t\t\t\t\t\tif (dataRows[i][self.rowConditions[j]] != row[self.rowConditions[j]]) {\r\n\t\t\t\t\t\t\tsame = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (same == true) {\r\n\t\t\t\t\t\tnotNew = true;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (self.filterIndexes.length > 0)//si hay dimensiones en los filtros superiores, hay filas que pueden colapsarse\r\n\t\t\t{\r\n\t\t\t\tvar notNew = false;\r\n\r\n\t\t\t\tfor (var i = 0; i < helperList.length; i++) {\r\n\t\t\t\t\tvar same = true;\r\n\t\t\t\t\tfor (var j = 0; j < self.rowConditions.length - measures.length + 1; j++) {\r\n\r\n\t\t\t\t\t\tif (helperList[i][self.rowConditions[j]] != row[self.rowConditions[j]]) {\r\n\t\t\t\t\t\t\tsame = false;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (same == true) {\r\n\t\t\t\t\t\tnotNew = true;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (!notNew) {\r\n\t\t\t\t\thelperList.push(row);\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t}\r\n\t\t\treturn notNew;\r\n\t\t}\r\n\r\n\t\tthis.preGoWhenMoveTopFilter = function (filterIndex, initLoad) {\r\n\t\t\tif (initLoad == undefined) {\r\n\t\t\t\tfor (var i = 0; i < self.filterDiv.selects.length; i++) {\r\n\t\t\t\t\tself.filterDiv.selects[i].value = \"[all]\"\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tvar out = false;\r\n\t\t\t\tfor (var i = 0; i < self.filterDiv.selects.length; i++) {\r\n\t\t\t\t\tif (self.filterDiv.selects[i].value != \"[all]\") {\r\n\t\t\t\t\t\tout = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (out) return;\r\n\t\t\t}\r\n\t\t\tself.FilterByTopFilter = false\r\n\t\t\t//get the index of the columns values in the data records of GeneralData, less filter index\r\n\t\t\tvar dataColumns = [];\r\n\t\t\tfor (var i = 0; i < columns.length; i++) {\r\n\t\t\t\tvar pos = i;//parseInt(columns[i].attributes.dataField.nodeValue.substr(1)) -1;\r\n\t\t\t\tif (((pos) != filterIndex) && (self.filterIndexes.indexOf(pos) == -1)) {\r\n\t\t\t\t\tdataColumns.push(pos)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar dataRows = self.GeneralDataRows;\r\n\r\n\t\t\t\r\n\t\t\t\t//remove extra data rows, that have the same columns values, except for the value of the columns index\r\n\t\t\t\tvar tempDataRows = [];\r\n\t\t\t\tfor (var i = 0; i < dataRows.length; i++) {\r\n\r\n\t\t\t\t\tvar existe = false;\r\n\t\t\t\t\tvar previousRecord = 0;\r\n\t\t\t\t\tfor (var j = 0; j < tempDataRows.length; j++) {\r\n\t\t\t\t\t\tvar same = true;\r\n\t\t\t\t\t\tfor (var h = 0; h < dataColumns.length; h++) {\r\n\t\t\t\t\t\t\tif (dataRows[i][dataColumns[h]] != tempDataRows[j][dataColumns[h]]) {\r\n\r\n\t\t\t\t\t\t\t\tsame = false;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (same) {\r\n\t\t\t\t\t\t\tpreviousRecord = j;\r\n\t\t\t\t\t\t\texiste = true;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!existe) {\r\n\t\t\t\t\t\tvar newRecord = [];\r\n\t\t\t\t\t\tfor (var p = 0; p < dataRows[i].length; p++) {\r\n\t\t\t\t\t\t\tnewRecord.push([dataRows[i][p]]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ttempDataRows.push([newRecord]);\r\n\r\n\t\t\t\t\t\tfor (var t = 0; t < measures.length; t++) {\r\n\t\t\t\t\t\t\tvar pos;\r\n\t\t\t\t\t\t\tif (t < measures.length - 1) {\r\n\t\t\t\t\t\t\t\tpos = self.rowConditions[self.rowConditions.length - measures.length + 1 + t]\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tpos = self.dataColumnIndex\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif ((self.formulaInfo.measureFormula[t].hasFormula) && (self.filterIndexes.length > 0)) {\r\n\t\t\t\t\t\t\t\tvar valuesToOperate = self.getFormulaRowByDataRow(dataRows[i], t, \"\")\r\n\t\t\t\t\t\t\t\tif ((valuesToOperate != self.EmptyValue) && (valuesToOperate != \"#NuN#\")) {\r\n\t\t\t\t\t\t\t\t\tvar result = self.calculateFormulaTotal([valuesToOperate], t, \"MeasureInRows\")\r\n\t\t\t\t\t\t\t\t\tif (!isNaN(result)) {\r\n\t\t\t\t\t\t\t\t\t\tnewRecord[pos] = result.toString()\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else { //increase prevoius record value\r\n\r\n\t\t\t\t\t\t//increase the entry of the column index (the last one)\r\n\t\t\t\t\t\tif (measures.length > 0) {\r\n\t\t\t\t\t\t\tif (!self.formulaInfo.measureFormula[measures.length - 1].hasFormula) {\r\n\t\t\t\t\t\t\t\tif ((tempDataRows[previousRecord][self.dataColumnIndex] != \"#NuN#\") && (dataRows[i][self.dataColumnIndex] != \"#NuN#\")) {\r\n\t\t\t\t\t\t\t\t\ttempDataRows[previousRecord][self.dataColumnIndex] = (parseFloat(tempDataRows[previousRecord][self.dataColumnIndex]) + parseFloat(dataRows[i][self.dataColumnIndex])).toString()\r\n\t\t\t\t\t\t\t\t} else if (tempDataRows[previousRecord][self.dataColumnIndex] == \"#NuN#\") {\r\n\t\t\t\t\t\t\t\t\ttempDataRows[previousRecord][self.dataColumnIndex] = dataRows[i][self.dataColumnIndex]\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t//increase the entries of other columns\r\n\t\t\t\t\t\tfor (var t = 0; t < measures.length - 1; t++) {\r\n\t\t\t\t\t\t\tvar pos = self.rowConditions[self.rowConditions.length - measures.length + 1 + t]\r\n\t\t\t\t\t\t\tif ((self.formulaInfo.measureFormula[t].hasFormula) && (self.filterIndexes.length > 0)) {\r\n\t\t\t\t\t\t\t\t//var addedValues = self.getFormulaRowByDataRow(dataRows[i], t, \"\")\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\ttempDataRows[previousRecord][pos] = (parseFloat(tempDataRows[previousRecord][pos]) + parseFloat(dataRows[i][pos])).toString()\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t//end remove extra data rows, that have the same columns values, except for the value of the columns index\r\n\r\n\t\t\t\tself.allData = tempDataRows;\r\n\t\t\t\tself.conditions = [];\r\n\t\t\t\tfor (var i = 0; i < self.headerRow.length; i++) {\r\n\t\t\t\t\tself.initCondition(i);\r\n\t\t\t\t}\r\n\t\t\t\tfor (var i = 0; i < self.headerRow.length; i++) {\r\n\t\t\t\t\tself.restoreSubtotalsAndSortLayout(i)\r\n\t\t\t\t}\r\n\t\t\t\r\n\r\n\t\t}\r\n\r\n\t\tthis.isNotFilterByTopFilter = function (row) {\r\n\t\t\tfor (var i = 0; i < self.filterIndexes.length; i++) { /* for all filters */\r\n\t\t\t\tvar fi = self.filterIndexes[i]; /* this column is important */\r\n\t\t\t\tvar s = self.filterDiv.selects[i]; /* select node */\r\n\t\t\t\tif ((s != undefined) && (s.selectedIndex && (OAT.$v(s) != \"[all]\") && (OAT.$v(s) != row[fi]))) { return false; }\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tthis.preGoWhenFilterByTopFilter = function (init) {\r\n\t\t\t\r\n\t\t\t\tself.FilterByTopFilter = true;\r\n\t\t\t\tself.allData = self.GeneralDataRows;\r\n\t\t\t\tself.conditions = [];\r\n\r\n\t\t\t\tfor (var i = 0; i < self.headerRow.length; i++) {\r\n\t\t\t\t\tself.initCondition(i);\r\n\t\t\t\t}\r\n\t\t\t\tfor (var i = 0; i < self.headerRow.length; i++) {\r\n\t\t\t\t\tself.restoreSubtotalsAndSortLayout(i)\r\n\t\t\t\t}\r\n\t\t\t \r\n\t\t}\r\n\r\n\t\t\r\n\t\r\n\t\tthis.gridCache = []\r\n\r\n\t\tthis.cleanGridCache = function () {\r\n\t\t\tself.gridCache = [];\r\n\t\t}\r\n\r\n\t\tthis.addPageToCache = function (pageNum, data) {\r\n\t\t\tself.gridCache.push({ page: pageNum, data: data });\r\n\t\t}\r\n\r\n\t\tthis.getPageDataFromCache = function (pageNum) {\r\n\t\t\tfor (var it = 0; it < self.gridCache.length; it++) {\r\n\t\t\t\tif (self.gridCache[it].page == pageNum) {\r\n\t\t\t\t\treturn self.gridCache[it].data;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\t\r\n\t\tthis.fireOnPageChange = function(move){\r\n\t\t\tsetTimeout( function() {\r\n\t\t\t\tvar paramobj = {\"QueryviewerId\": self.IdForQueryViewerCollection, \"Navigation\": move};\r\n\t\t\t\tvar evt = document.createEvent(\"Events\")\r\n\t\t\t\tevt.initEvent(\"PivotTableOnPageChangeEvent\", true, true);\r\n\t\t\t\tevt.parameter = paramobj;\r\n\t\t\t\tdocument.dispatchEvent(evt);\r\n\t\t\t}, 0)\r\n\t\t}\r\n\t\t\r\n\t\tthis.goWhenServerPagination = function (load, autorefreshflag) {\r\n\r\n\t\t\tif (!self.getPageDataFromCache(self.pageData.ServerPageNumber)) { //add page data to cache\r\n\t\t\t\tself.addPageToCache(self.pageData.ServerPageNumber, self.pageData.rows)\r\n\t\t\t}\r\n\t\t\t//call navigational events\r\n\t\t\tif (self.pageData.ServerPageNumber != self.pageData.PreviousPageNumber) {\r\n\t\t\t\tself.QueryViewerCollection[self.IdForQueryViewerCollection].CurrentPage = self.pageData.ServerPageNumber;\r\n\t\t\t\tif (self.pageData.ServerPageNumber == 1) {\r\n\t\t\t\t\tif (typeof (self.QueryViewerCollection[self.IdForQueryViewerCollection].OnFirstPage) == 'function') \r\n\t\t\t\t\t\t//self.QueryViewerCollection[self.IdForQueryViewerCollection].OnFirstPage()\r\n\t\t\t\t\t\tself.fireOnPageChange(\"OnFirstPage\")\r\n\t\t\t\t} else if (self.pageData.ServerPageNumber == self.pageData.ServerPageCount) {\r\n\t\t\t\t\tif (typeof (self.QueryViewerCollection[self.IdForQueryViewerCollection].OnLastPage) == 'function') \r\n\t\t\t\t\t\tself.fireOnPageChange(\"OnLastPage\")\r\n\t\t\t\t\t\t//self.QueryViewerCollection[self.IdForQueryViewerCollection].OnLastPage()\r\n\t\t\t\t} else if (self.pageData.ServerPageNumber < self.pageData.PreviousPageNumber) {\r\n\t\t\t\t\tif (typeof (self.QueryViewerCollection[self.IdForQueryViewerCollection].OnPreviousPage) == 'function') \r\n\t\t\t\t\t\t//self.QueryViewerCollection[self.IdForQueryViewerCollection].OnPreviousPage()\r\n\t\t\t\t\t\tself.fireOnPageChange(\"OnPreviousPage\")\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (typeof (self.QueryViewerCollection[self.IdForQueryViewerCollection].OnNextPage) == 'function') \r\n\t\t\t\t\t\t//self.QueryViewerCollection[self.IdForQueryViewerCollection].OnNextPage()\r\n\t\t\t\t\t\tself.fireOnPageChange(\"OnNextPage\")\r\n\t\t\t\t}\r\n\t\t\t\tself.pageData.PreviousPageNumber = self.pageData.ServerPageNumber\r\n\t\t\t}\r\n\r\n\r\n\t\t\tif (!load) {\r\n\t\t\t\tself.gd.clearSources();\r\n\t\t\t\tself.gd.clearTargets();\r\n\t\t\t\tself.drawFilters();\r\n\t\t\t\tif (self.QueryViewerCollection[self.IdForQueryViewerCollection].AutoRefreshGroup != \"\") {\r\n\t\t\t\t\tif (((autorefreshflag === undefined) || (autorefreshflag === null) || (!autorefreshflag))) {\r\n\t\t\t\t\t\tif ((!self.firstTime) || ((self.getState()) && (self.getState().version == self.rememberLayoutStateVersion))) {\r\n\t\t\t\t\t\t\t//something change, call QQ\r\n\t\t\t\t\t\t\tvar meta;\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tmeta = self.getMetadataXML();\r\n\t\t\t\t\t\t\t\tmeta = meta.replace(/\\&amp;/g, \"&\");\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tsetTimeout( function() {\r\n\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tvar paramobj = {  \"QueryviewerId\": self.IdForQueryViewerCollection, \"Metadata\": meta};\r\n\t\t\t\t\t\t\t\t\tvar evt = document.createEvent(\"Events\")\r\n\t\t\t\t\t\t\t\t\tevt.initEvent(\"RequestUpdateLayoutSameGroup\", true, true);\r\n\t\t\t\t\t\t\t\t\tevt.parameter = paramobj;\r\n\t\t\t\t\t\t\t\t\tdocument.dispatchEvent(evt);\r\n\t\t\t\t\r\n\t\t\t\t\t\t\t\t}, 50)\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/* get filtered selected values*/\r\n\t\t\tvar filterDivSelects = new Array();\r\n\t\t\tfor (var fiv = 0; fiv < self.filterDiv.selects.length; fiv++) {\r\n\t\t\t\tfilterDivSelects[fiv] = self.filterDiv.selects[fiv].value;\r\n\t\t\t}\r\n\r\n\t\t\tif (!self.firstTime) {\r\n\r\n\t\t\t\tvar state = {\r\n\t\t\t\t\tquery: self.query,\r\n\t\t\t\t\tconditions: self.conditions,\r\n\t\t\t\t\tcolConditions: self.colConditions,\r\n\t\t\t\t\trowConditions: self.rowConditions,\r\n\t\t\t\t\tfilterIndexes: self.filterIndexes,\r\n\t\t\t\t\tfilterDivSelects: filterDivSelects,\r\n\t\t\t\t\trowsPerPage: self.rowsPerPage,\r\n\t\t\t\t\tAxisInfo: self.pageData.AxisInfo,\r\n\t\t\t\t\tFilterInfo: self.pageData.FilterInfo,\r\n\t\t\t\t\tversion: self.rememberLayoutStateVersion,\r\n\t\t\t\t\tDataInfo: self.pageData.DataInfo,\r\n\t\t\t\t\tNewAxisInfo: self.createNewAxisInfo(),\r\n\t\t\t\t\tNewDataInfo: self.createNewDataInfo()\r\n\t\t\t\t};\r\n\r\n\r\n\t\t\t\tif ((!self.deleteState)) {\r\n\t\t\t\t\tself.saveState(state);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tself.cleanState();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tself.readState = true;\r\n\t\t\t} else {\r\n\t\t\t\tself.firstTime = false;\r\n\t\t\t}\r\n\r\n\t\t\tself.drawTableWhenServerPagination();\r\n\r\n\t\t\t//add paging functionality\r\n\t\t\tvar actual_rowsPerPage = 0;\r\n\r\n\t\t\tif ((self.pageData.ServerPageCount > 0) && ((self.pageData.ServerPageCount > 1) || (self.pageData.rows.length > 10))\r\n\t\t\t\t&& (self.rowsPerPage > 0)) {\r\n\t\t\t\t//if pivot has less than 10 rows => no need to paging\r\n\t\t\t\tvar options = {\r\n\t\t\t\t\tcurrPage: self.pageData.ServerPageNumber,\r\n\t\t\t\t\tignoreRows: jQuery('tbody tr[title_row=true]', jQuery(\"#\" + this.controlName + \"_\" + self.query)),\r\n\t\t\t\t\toptionsForRows: OAT.AddItemToList( [10, 15, 20], initMetadata.RowsPerPage ),\r\n\t\t\t\t\trowsPerPage: self.rowsPerPage,\r\n\t\t\t\t\ttopNav: false,\r\n\t\t\t\t\tcontrolName: this.controlName + \"_\" + self.query,\r\n\t\t\t\t\tcantPages: self.pageData.ServerPageCount,\r\n\t\t\t\t\tcontrolUcId: UcId,\r\n\t\t\t\t\ttranslations: self.translations,\r\n\t\t\t\t\tcontrol: self\r\n\t\t\t\t}\r\n\r\n\t\t\t\tOAT.partialTablePagination(jQuery(\"#\" + self.controlName + \"_\" + self.query), options);\r\n\r\n\t\t\t\tjQuery(\"#\" + this.controlName + \"_\" + self.query).css(\"margin-bottom\", \"0px\");\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ((jQuery(\"#\" + this.controlName + \"_\" + self.query).length > 0) && (!autoResize)) {\r\n\t\t\t\tvar clientWdt = jQuery(\"#\" + this.containerName)[0].clientWidth\r\n\t\t\t\tjQuery(\"#\" + this.controlName + \"_\" + self.query).css({ width: (clientWdt - 4) + \"px\" })\r\n\t\t\t}\r\n\r\n\t\t\ttry {\r\n\t\t\t\tvar wd = jQuery(\"#\" + this.controlName + \"_\" + self.query)[0].offsetWidth - 4;\r\n\t\t\t\tif (jQuery(\"#MAINFORM\")[0].className.indexOf(\"form-horizontal\") > -1) {\r\n\t\t\t\t\twd = wd + 4;\r\n\t\t\t\t}\r\n\t\t\t} catch (Error) {\r\n\t\t\t}\r\n\r\n\r\n\r\n\t\t\ttry {\r\n\t\t\t\tvar wd2 = jQuery(\"#\" + this.controlName + \"_\" + self.query)[0].offsetWidth - 1;\r\n\t\t\t\tjQuery(\"#\" + UcId + \"_\" + self.query + \"_title_div\").css({ width: wd + \"px\" }); \r\n\t\t\t\tjQuery(\"#\" + UcId + \"_\" + self.query + \"_pivot_page\").css({ width: wd + \"px\" }); \r\n\t\t\t\tjQuery(\"#\" + this.controlName + \"_\" + self.query + \"_tablePagination\").css({ width: wd2 + \"px\" });\r\n\r\n\t\t\t\tif ((jQuery(\"#\" + this.controlName + \"_\" + self.query + \"_tablePagination_paginater\").length > 0) && (jQuery(\"#\" + this.controlName + \"_\" + self.query + \"_tablePagination\")[0].getBoundingClientRect().bottom < jQuery(\"#\" + this.controlName + \"_\" + self.query + \"_tablePagination_paginater\")[0].getBoundingClientRect().bottom)) {\r\n\r\n\t\t\t\t\tjQuery(\"#\" + this.controlName + \"_\" + self.query + \"_tablePagination\")\r\n\r\n\t\t\t\t}\r\n\t\t\t} catch (Error) {\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t//draw selected node\r\n\t\t\tself.RedrawSelectedNode();\r\n\t\t\t\r\n\t\t\tsetInterval(function () {\r\n\t\t\t\t//verificar que sea pivot\r\n\t\t\t\tif ((jQuery(\"#\" + self.controlName + \"_\" + self.query).length > 0) && (jQuery(\"#\" + self.controlName + \"_\" + self.query)[0].getAttribute(\"class\") === \"pivot_table\")) {\r\n\t\t\t\t\tif ((jQuery(\"#\" + self.controlName + \"_\" + self.query + \"_tablePagination_paginater\").length > 0) && (jQuery(\"#\" + self.controlName + \"_\" + self.query + \"_tablePagination\")[0].getBoundingClientRect().bottom < jQuery(\"#\" + self.controlName + \"_\" + self.query + \"_tablePagination_paginater\")[0].getBoundingClientRect().bottom)) {\r\n\t\t\t\t\t\tjQuery(\"#\" + this.controlName + \"_\" + self.query + \"_tablePagination\")\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\t150)\r\n\r\n\t\t\t\r\n\r\n\r\n\t\t}\r\n\r\n\t\tthis.getDataForPivot = function (UcId, pageNumber, rowsPerPage, recalculateCantPages, AxisChangeDataField, DataFieldFilter,\r\n\t\t\tExportTo, restoreDefaultView, layoutForCollapseExpand, notAutorefresh) {\r\n\t\t\tif ((recalculateCantPages)) {\r\n\t\t\t\tself.cleanGridCache();\r\n\t\t\t}\r\n\r\n\t\t\tif ((recalculateCantPages) && (rowsPerPage > -1)) {\r\n\t\t\t\tself.rowsPerPage = rowsPerPage;\r\n\t\t\t}\r\n\t\t\tself.pageData.PreviousPageNumber = self.pageData.ServerPageNumber\r\n\t\t\tif ((!recalculateCantPages) && (self.getPageDataFromCache(pageNumber))) {\r\n\t\t\t\tself.pageData.ServerPageNumber = pageNumber\r\n\t\t\t\tself.pageData.rows = self.getPageDataFromCache(self.pageData.ServerPageNumber)\r\n\t\t\t\tself.preGoWhenServerPagination(true);\r\n\t\t\t} else {\r\n\t\t\t\t//re-create axis info\r\n\t\t\t\tif (AxisChangeDataField != \"\") {\r\n\t\t\t\t\tself.pageData.AxisInfo = self.createAxisInfo(AxisChangeDataField);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tif (DataFieldFilter != \"\") {\r\n\t\t\t\t\tself.createFilterInfo(DataFieldFilter);\r\n\t\t\t\t}\r\n\t\t\t\tself.pageData.CollapseInfo = self.CreateExpandCollapseInfo(\"\");\r\n\r\n\t\t\t\tself.ExportTo = \"\"\r\n\t\t\t\tif (rowsPerPage < 0) { //for export show all pivot\r\n\t\t\t\t\trowsPerPage = 0;\r\n\t\t\t\t\tself.ExportTo = ExportTo\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar layoutChange = true;\r\n\t\t\t\tif ((pageNumber > 1) || (!recalculateCantPages)) {\r\n\t\t\t\t\tlayoutChange = false;\r\n\t\t\t\t}\r\n\t\t\t\tif ((layoutForCollapseExpand != undefined) && (layoutForCollapseExpand != \"\")) {\r\n\t\t\t\t\tlayoutChange = true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tself.pageData.AxisInfo = self.createAxisInfo(AxisChangeDataField);\r\n\t\t\t\tvar ParmAxisInfo =  self.createNewAxisInfo(AxisChangeDataField);\r\n\t\t\t\t\r\n\t\t\t\tself.pageData.DataInfo = self.createDataInfo();\r\n\t\t\t\tvar ParmDataInfo = self.createNewDataInfo();\r\n\t\t\t\t\r\n\t\t\t\tself.lastCallToQueryViewer = \"DataForPivot\"\r\n\t\t\t\tself.lastNotAutorefreshIndicator = notAutorefresh\r\n\t\t\t\t\r\n\t\t\t\tself.requestPageDataForPivotTable(pageNumber, rowsPerPage, recalculateCantPages, ParmAxisInfo, ParmDataInfo, self.pageData.FilterInfo, self.pageData.CollapseInfo, layoutChange);\r\n\r\n\t\t\t\t\r\n\t\t\t\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tthis.CreateExpandCollapseInfo = function (dataField) {\r\n\t\t\tvar CollapseInfo = [];\r\n\t\t\tvar obj = {};\r\n\t\t\tfor (var i = 0; i < self.columns.length; i++) {\r\n\t\t\t\tvar pos = -1;\r\n\t\t\t\tfor (var j = 0; j < self.conditions.length; j++) {\r\n\t\t\t\t\tif (self.conditions[j].dataField == self.columns[i].getAttribute(\"dataField\")) {\r\n\t\t\t\t\t\tpos = j;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (self.conditions[pos].collapsedValues.length) {\r\n\t\t\t\t\tvar notNullVal = {\r\n\t\t\t\t\t\tExpanded: [],\r\n\t\t\t\t\t\tCollapsed: self.conditions[pos].collapsedValues,\r\n\t\t\t\t\t\tDefaultAction: \"Expand\"\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar obj = {\r\n\t\t\t\t\t\tDataField: self.conditions[pos].dataField,\r\n\t\t\t\t\t\tNullExpanded: true,\r\n\t\t\t\t\t\tNotNullValues: notNullVal\r\n\t\t\t\t\t}\r\n\t\t\t\t\tCollapseInfo.push(obj);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn CollapseInfo\r\n\t\t}\r\n\r\n\t\tthis.createAxisInfo = function (dataField) {\r\n\t\t\tvar AxisInfo = []; var hiddenPos = 1;\r\n\t\t\tfor (var i = 0; i < self.initMetadata.Dimensions.length; i++) {\r\n\t\t\t\tvar pos = -1;\r\n\t\t\t\t\r\n\t\t\t\tvar hidden = !self.initMetadata.Dimensions[i].Visible;\r\n\t\t\t\tvar type = \"Rows\"; var position = 1;\r\n\t\t\t\tvar Order = \"Ascending\";\r\n\t\t\t\tvar Subtotal = true;\r\n\t\t\t\tif (!hidden) {\r\n\r\n\r\n\t\t\t\t\tfor (var j = 0; j < self.conditions.length; j++) {\r\n\t\t\t\t\t\tif (self.conditions[j].dataField == self.initMetadata.Dimensions[i].dataField) {\r\n\t\t\t\t\t\t\tpos = j;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tOrder = (self.conditions[pos].sort == 1) ? \"Ascending\" : \"Descending\"\r\n\t\t\t\t\tSubtotal = ((self.conditions[pos].subtotals == 1) || (self.conditions[pos].subtotals)) ? true : false\r\n\r\n\t\t\t\t\tif (self.rowConditions.indexOf(pos) > -1) {\r\n\t\t\t\t\t\tposition = self.rowConditions.indexOf(pos) + 1\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (self.colConditions.indexOf(pos) > -1) {\r\n\t\t\t\t\t\ttype = \"Columns\";\r\n\t\t\t\t\t\tposition = self.colConditions.indexOf(pos) + 1\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (self.filterIndexes.indexOf(pos) > -1) {\r\n\t\t\t\t\t\ttype = \"Pages\";\r\n\t\t\t\t\t\tposition = self.filterIndexes.indexOf(pos) + 1\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttype = \"Hidden\"\r\n\t\t\t\t\tposition = hiddenPos\r\n\t\t\t\t\thiddenPos = hiddenPos + 1\r\n\t\t\t\t}\r\n\t\t\t\tvar obj = {\r\n\t\t\t\t\tDataField: self.initMetadata.Dimensions[i].dataField,\r\n\t\t\t\t\tOrder: Order,\r\n\t\t\t\t\tAxis: {\r\n\t\t\t\t\t\tType: type,\r\n\t\t\t\t\t\tPosition: position\r\n\t\t\t\t\t},\r\n\t\t\t\t\tSubtotals: Subtotal\r\n\t\t\t\t}\r\n\t\t\t\tAxisInfo.push(obj)\r\n\t\t\t}\r\n\t\t\treturn AxisInfo;\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\tthis.createNewAxisInfo = function (dataField) {\r\n\t\t\tvar AxisInfo = []; var hiddenPos = 1;\r\n\t\t\tvar rowPos = 0; var cantRowHidden = 0;\r\n\t\t\tvar colPos = 0; var cantColHidden = 0;\r\n\t\t\tvar pagePos = 0; var cantPageHidden = 0;\r\n\t\t\tfor (var i = 0; i < self.initMetadata.Dimensions.length; i++) {\r\n\t\t\t\tvar pos = -1;\r\n\t\t\t\t//if hidden?\r\n\t\t\t\tvar hidden = !self.initMetadata.Dimensions[i].Visible;\r\n\t\t\t\t/*for (var h=0; h < self.initMetadata.Dimensions.length; h++){\r\n\t\t\t\t\tif (self.columns[i].getAttribute(\"dataField\") == self.initMetadata.Dimensions[h].dataField){\r\n\t\t\t\t\t\thidden = !self.initMetadata.Dimensions[h].Visible\r\n\t\t\t\t\t}\r\n\t\t\t\t}*/\r\n\r\n\t\t\t\tvar type = \"Rows\"; var position = 1;\r\n\t\t\t\tvar Order = \"Ascending\";\r\n\t\t\t\tvar Subtotal = true;\r\n\t\t\t\tif (!hidden) {\r\n\r\n\r\n\t\t\t\t\tfor (var j = 0; j < self.conditions.length; j++) {\r\n\t\t\t\t\t\tif (self.conditions[j].dataField == self.initMetadata.Dimensions[i].dataField) {\r\n\t\t\t\t\t\t\tpos = j;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tOrder = (self.conditions[pos].sort == 1) ? \"Ascending\" : \"Descending\"\r\n\t\t\t\t\tSubtotal = ((self.conditions[pos].subtotals == 1) || (self.conditions[pos].subtotals)) ? true : false\r\n\r\n\t\t\t\t\tif (self.rowConditions.indexOf(pos) > -1) {\r\n\t\t\t\t\t\tif (self.changesrowposition) {\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tposition = self.rowConditions.indexOf(pos) + 1 + cantRowHidden\r\n\t\t\t\t\t\t\trowPos = position\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tvar posincol = self.rowConditions.indexOf(pos)\r\n\t\t\t\t\t\t\tvar cont = 0; var noterminar = true;\r\n\t\t\t\t\t\t\tfor (var iterRC = posincol+1; iterRC < self.rowConditions.length && noterminar; iterRC++) //buscar dimensiones desplazadas\r\n\t\t\t\t\t\t\t{\t\r\n\t\t\t\t\t\t\t\tcont++\r\n\t\t\t\t\t\t\t\tif (self.rowConditions[iterRC] < pos) {\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tdataFieldRC = self.conditions[self.rowConditions[iterRC]].dataField\r\n\t\t\t\t\t\t\t\t\tfor (var itAI = 0; itAI < AxisInfo.length; itAI++)\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\tif (dataFieldRC == AxisInfo[itAI].DataField) \r\n\t\t\t\t\t\t\t\t\t\t\tpositionDF = AxisInfo[itAI].Axis.Position\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tposition = positionDF - cont/*AxisInfo[self.rowConditions[iterRC]].Axis.Position - cont*/\r\n\t\t\t\t\t\t\t\t\trowPos = position\r\n\t\t\t\t\t\t\t\t\tnoterminar = false\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t/*if ((self.rowConditions.length > posincol+1) && (self.rowConditions[posincol+1] < pos)){\r\n\t\t\t\t\t\t\t\tposition = AxisInfo[self.rowConditions[posincol+1]].Axis.Position - 1\r\n\t\t\t\t\t\t\t\trowPos = position\t\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tposition = self.rowConditions.indexOf(pos) + 1 + cantRowHidden\r\n\t\t\t\t\t\t\t\trowPos = position\r\n\t\t\t\t\t\t\t}*/\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tposition = self.rowConditions.indexOf(pos) + 1 + cantRowHidden\r\n\t\t\t\t\t\t\trowPos = position\r\n\t\t\t\t\t\t} \r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (self.colConditions.indexOf(pos) > -1) {\r\n\t\t\t\t\t\ttype = \"Columns\";\r\n\t\t\t\t\t\tposition = self.colConditions.indexOf(pos) + 1 + cantColHidden\r\n\t\t\t\t\t\tcolPos = position \r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (self.filterIndexes.indexOf(pos) > -1) {\r\n\t\t\t\t\t\ttype = \"Pages\";\r\n\t\t\t\t\t\tposition = self.filterIndexes.indexOf(pos) + 1 + cantPageHidden\r\n\t\t\t\t\t\tpagePos = position\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (self.initMetadata.Dimensions[i].defaultPosition != \"hidden\"){\r\n\t\t\t\t\t\ttype = self.initMetadata.Dimensions[i].defaultPosition \r\n\t\t\t\t\t\tif (type == \"Rows\") \r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tcantRowHidden=cantRowHidden + 1\r\n\t\t\t\t\t\t\tposition = rowPos + 1\r\n\t\t\t\t\t\t\trowPos = position\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (type == \"Columns\")\r\n\t\t\t\t\t\t{ \r\n\t\t\t\t\t\t\tcantColHidden=cantColHidden + 1\r\n\t\t\t\t\t\t\tposition = colPos + 1\r\n\t\t\t\t\t\t\tcolPos = position\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (type == \"Pages\") \r\n\t\t\t\t\t\t{ \r\n\t\t\t\t\t\t\tcantPageHidden=cantPageHidden + 1\r\n\t\t\t\t\t\t\tposition = pagePos + 1\r\n\t\t\t\t\t\t\tpagePos = position\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\ttype = \"\"\r\n\t\t\t\t\t\tposition = \"\"\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\t//hiddenPos = hiddenPos + 1\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\tvar obj = {\r\n\t\t\t\t\tDataField: self.initMetadata.Dimensions[i].dataField,\r\n\t\t\t\t\tOrder: Order,\r\n\t\t\t\t\tAxis: {\r\n\t\t\t\t\t\tType: type,\r\n\t\t\t\t\t\tPosition: position\r\n\t\t\t\t\t},\r\n\t\t\t\t\tSubtotals: Subtotal,\r\n\t\t\t\t\tHidden:hidden\r\n\t\t\t\t}\r\n\t\t\t\tAxisInfo.push(obj)\r\n\t\t\t}\r\n\t\t\treturn AxisInfo;\r\n\t\t}\r\n\r\n\t\tthis.createDataInfo = function () {\r\n\t\t\tvar DataInfo = []; var hiddenPos = 1;\r\n\t\t\tvar visiblePos = 1\r\n\t\t\tfor (var h = 0; h < self.initMetadata.Measures.length; h++) {\r\n\r\n\t\t\t\t//if hidden?\r\n\t\t\t\tvar hidden = !self.initMetadata.Measures[h].Visible;\r\n\r\n\t\t\t\tvar type = self.initMetadata.Measures[h].Visible ? \"Data\" : \"Hidden\";\r\n\t\t\t\tvar position = self.initMetadata.Measures[h].Visible ? visiblePos : hiddenPos;\r\n\r\n\r\n\t\t\t\tvar obj = {\r\n\t\t\t\t\tDataField: self.initMetadata.Measures[h].dataField,\r\n\t\t\t\t\tAxis: {\r\n\t\t\t\t\t\tType: type,\r\n\t\t\t\t\t\tPosition: position\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tDataInfo.push(obj)\r\n\t\t\t\tif (self.initMetadata.Measures[h].Visible) {\r\n\t\t\t\t\tvisiblePos = visiblePos + 1\r\n\t\t\t\t} else {\r\n\t\t\t\t\thiddenPos = hiddenPos + 1\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t\treturn DataInfo;\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\tthis.createNewDataInfo = function () {\r\n\t\t\tvar DataInfo = [];\r\n\t\t\t\r\n\t\t\tfor (var h = 0; h < self.initMetadata.Measures.length; h++) {\r\n\t\t\t\tvar hidden = !self.initMetadata.Measures[h].Visible;\r\n\t\t\t\tvar obj = {\r\n\t\t\t\t\tDataField: self.initMetadata.Measures[h].dataField,\r\n\t\t\t\t\tHidden: hidden,\r\n\t\t\t\t\tPosition: h+1\r\n\t\t\t\t}\r\n\t\t\t\tDataInfo.push(obj)\r\n\t\t\t}\r\n\t\t\treturn DataInfo;\r\n\t\t}\r\n\r\n\t\tthis.createFilterInfo = function (NewFilter, isFromMetadata) {\r\n\t\t\tDataFieldFilter = self.conditions[NewFilter.dim].dataField\r\n\t\t\tif ((NewFilter.op == \"all\") || ((NewFilter.op == \"pagefilter\") && (NewFilter.values == \"[all]\"))) {\r\n\t\t\t\t//remove filter from filterInof\r\n\t\t\t\tvar pos = -1;\r\n\t\t\t\tfor (var p = 0; p < self.pageData.FilterInfo.length; p++) {\r\n\t\t\t\t\tif (DataFieldFilter == self.pageData.FilterInfo[p].DataField) { pos = p; break; }\r\n\t\t\t\t}\r\n\t\t\t\tif (pos > -1) self.pageData.FilterInfo.splice(pos, 1)\r\n\t\t\t\tself.conditions[NewFilter.dim].state = \"all\"\r\n\t\t\t\tself.conditions[NewFilter.dim].visibles = []\r\n\t\t\t\tself.conditions[NewFilter.dim].blackList = []\r\n\t\t\t\tself.conditions[NewFilter.dim].defaultAction = \"Include\"\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif (self.conditions[NewFilter.dim].state == \"none\") {\r\n\t\t\t\tself.conditions[NewFilter.dim].visibles = []\r\n\t\t\t\tfor (var u = 0; u < self.conditions[NewFilter.dim].distinctValues.length; u++) {\r\n\t\t\t\t\tif (self.conditions[NewFilter.dim].blackList.indexOf(self.conditions[NewFilter.dim].distinctValues[u]) == -1) {\r\n\t\t\t\t\t\tself.conditions[NewFilter.dim].blackList.push(self.conditions[NewFilter.dim].distinctValues[u])\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else if (self.conditions[NewFilter.dim].state == \"all\") {\r\n\t\t\t\tself.conditions[NewFilter.dim].blackList = []\r\n\t\t\t\tfor (var u = 0; u < self.conditions[NewFilter.dim].distinctValues.length; u++) {\r\n\t\t\t\t\tif (self.conditions[NewFilter.dim].visibles.indexOf(self.conditions[NewFilter.dim].distinctValues[u]) == -1) {\r\n\t\t\t\t\t\tself.conditions[NewFilter.dim].visibles.push(self.conditions[NewFilter.dim].distinctValues[u])\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar notNullValue = [];\r\n\t\t\tif (NewFilter.op == \"none\") {\r\n\t\t\t\tnotNullValue = [];\r\n\t\t\t\tself.conditions[NewFilter.dim].state = \"none\"\r\n\t\t\t\tself.conditions[NewFilter.dim].visibles = []\r\n\t\t\t\tself.conditions[NewFilter.dim].blackList = []\r\n\t\t\t\tself.conditions[NewFilter.dim].defaultAction = \"Exclude\"\r\n\t\t\t} else {\r\n\t\t\t\tif (NewFilter.op == \"push\") {\r\n\t\t\t\t\tself.conditions[NewFilter.dim].state = \"\"\r\n\t\t\t\t\tvar pos = self.conditions[NewFilter.dim].visibles.indexOf(NewFilter.values)\r\n\t\t\t\t\tif (pos > -1) self.conditions[NewFilter.dim].visibles.splice(pos, 1);\r\n\t\t\t\t\tif (self.conditions[NewFilter.dim].blackList.indexOf(NewFilter.values) == -1)\r\n\t\t\t\t\t\tself.conditions[NewFilter.dim].blackList.push(NewFilter.values)\r\n\t\t\t\t} else if (NewFilter.op == \"pop\") {\r\n\t\t\t\t\tself.conditions[NewFilter.dim].state = \"\"\r\n\t\t\t\t\tif (self.conditions[NewFilter.dim].visibles.indexOf(NewFilter.values) == -1)\r\n\t\t\t\t\t\tself.conditions[NewFilter.dim].visibles.push(NewFilter.values)\r\n\t\t\t\t\tvar pos = self.conditions[NewFilter.dim].blackList.indexOf(NewFilter.values)\r\n\t\t\t\t\tif (pos > -1) self.conditions[NewFilter.dim].blackList.splice(pos, 1);\r\n\t\t\t\t} else if (NewFilter.op == \"pagefilter\") {\r\n\t\t\t\t\tself.conditions[NewFilter.dim].state = \"\"\r\n\t\t\t\t\tself.conditions[NewFilter.dim].defaultAction = \"Exclude\"\r\n\t\t\t\t\tself.conditions[NewFilter.dim].visibles = [];\r\n\t\t\t\t\tself.conditions[NewFilter.dim].visibles.push(NewFilter.values);\r\n\t\t\t\t\tfor (var p = 0; p < self.conditions[NewFilter.dim].distinctValues.length; p++) {\r\n\t\t\t\t\t\tvar val = self.conditions[NewFilter.dim].distinctValues[p]\r\n\t\t\t\t\t\tif ((self.conditions[NewFilter.dim].blackList.indexOf(val) == -1) && (val != NewFilter.values)) {\r\n\t\t\t\t\t\t\tself.conditions[NewFilter.dim].blackList.push(val)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (NewFilter.op == \"reverse\") {\r\n\t\t\t\t\tif (self.conditions[NewFilter.dim].defaultAction == \"Include\") {\r\n\t\t\t\t\t\tself.conditions[NewFilter.dim].defaultAction = \"Exclude\"\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tself.conditions[NewFilter.dim].defaultAction = \"Include\"\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (self.conditions[NewFilter.dim].state == \"none\") {//si el estado anterior es none pasa a all\r\n\t\t\t\t\t\tvar pos = -1;\r\n\t\t\t\t\t\tfor (var p = 0; p < self.pageData.FilterInfo.length; p++) {\r\n\t\t\t\t\t\t\tif (DataFieldFilter == self.pageData.FilterInfo[p].DataField) { pos = p; break; }\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (pos > -1) self.pageData.FilterInfo.splice(pos, 1)\r\n\t\t\t\t\t\tself.conditions[NewFilter.dim].state = \"all\"\r\n\t\t\t\t\t\tself.conditions[NewFilter.dim].visibles = []\r\n\t\t\t\t\t\tself.conditions[NewFilter.dim].blackList = []\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t} else if (self.conditions[NewFilter.dim].state == \"all\") {//si el estado anterior es all pasa a none\r\n\t\t\t\t\t\tnotNullValue = [];\r\n\t\t\t\t\t\tself.conditions[NewFilter.dim].state = \"none\"\r\n\t\t\t\t\t\tself.conditions[NewFilter.dim].visibles = []\r\n\t\t\t\t\t\tself.conditions[NewFilter.dim].blackList = []\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tvar tempArrayVisibles = []; for (var tit = 0; tit < self.conditions[NewFilter.dim].visibles.length; tit++) { tempArrayVisibles.push(self.conditions[NewFilter.dim].visibles[tit]) }\r\n\t\t\t\t\t\tvar tempArrayHiddens = []; for (var tit = 0; tit < self.conditions[NewFilter.dim].blackList.length; tit++) { tempArrayHiddens.push(self.conditions[NewFilter.dim].blackList[tit]) }\r\n\r\n\t\t\t\t\t\tself.conditions[NewFilter.dim].visibles = []\r\n\t\t\t\t\t\tself.conditions[NewFilter.dim].blackList = []\r\n\r\n\t\t\t\t\t\tfor (var u = 0; u < self.conditions[NewFilter.dim].distinctValues.length; u++) {\r\n\t\t\t\t\t\t\tvar val = self.conditions[NewFilter.dim].distinctValues[u];\r\n\t\t\t\t\t\t\tif (tempArrayVisibles.indexOf(val) == -1) {\r\n\t\t\t\t\t\t\t\tself.conditions[NewFilter.dim].visibles.push(val)\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tself.conditions[NewFilter.dim].blackList.push(val)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tfor (var u = 0; u < tempArrayHiddens.length; u++) {\r\n\t\t\t\t\t\t\tif (self.conditions[NewFilter.dim].visibles.indexOf(tempArrayHiddens[u]) == -1) {\r\n\t\t\t\t\t\t\t\tself.conditions[NewFilter.dim].visibles.push(tempArrayHiddens[u])\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tfor (var u = 0; u < tempArrayVisibles.length; u++) {\r\n\t\t\t\t\t\t\tif (self.conditions[NewFilter.dim].blackList.indexOf(tempArrayVisibles[u]) == -1) {\r\n\t\t\t\t\t\t\t\tself.conditions[NewFilter.dim].blackList.push(tempArrayVisibles[u])\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar filterExist = false; var nullIncluded = true;\r\n\t\t\tvar included = [];\r\n\t\t\tfor (var t = 0; t < self.conditions[NewFilter.dim].visibles.length; t++) {\r\n\t\t\t\tif (self.conditions[NewFilter.dim].visibles[t] != \"#NuN#\") {\r\n\t\t\t\t\tincluded.push(self.conditions[NewFilter.dim].visibles[t])\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar excluded = [];\r\n\t\t\tif (self.conditions[NewFilter.dim].state != \"none\") {\r\n\t\t\t\tfor (var t = 0; t < self.conditions[NewFilter.dim].distinctValues.length; t++) {\r\n\t\t\t\t\tvar val = self.conditions[NewFilter.dim].distinctValues[t]\r\n\t\t\t\t\tif ((val != \"#NuN#\") && (included.indexOf(val) == -1)) {\r\n\t\t\t\t\t\texcluded.push(val)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tfor (var t = 0; t < self.conditions[NewFilter.dim].blackList.length; t++) {\r\n\t\t\t\t\tif ((self.conditions[NewFilter.dim].blackList[t] != \"#NuN#\")\r\n\t\t\t\t\t\t&& (excluded.indexOf(self.conditions[NewFilter.dim].blackList[t]) == -1)) {\r\n\t\t\t\t\t\texcluded.push(self.conditions[NewFilter.dim].blackList[t])\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif ((included.length == 0) && ((self.conditions[NewFilter.dim].defaultAction == \"Exclude\"))) {\r\n\t\t\t\t\texcluded = [];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (NewFilter.op == \"none\") {\r\n\t\t\t\tnullIncluded = false;\r\n\t\t\t\tincluded = []; excluded = [];\r\n\t\t\t} else {\r\n\t\t\t\tif ((self.conditions[NewFilter.dim].distinctValues.indexOf(\"#NuN#\") > -1) ||\r\n\t\t\t\t\t(excluded.indexOf(self.conditions[NewFilter.dim].blackList[t]) != -1)) {\r\n\t\t\t\t\tif (self.conditions[NewFilter.dim].visibles.indexOf(\"#NuN#\") == -1) {\r\n\t\t\t\t\t\tnullIncluded = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (self.conditions[NewFilter.dim].defaultAction == \"Exclude\") {\r\n\t\t\t\t\t\tnullIncluded = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif ((self.conditions[NewFilter.dim].hasNull) && (!(NewFilter.op == \"none\"))) {\r\n\t\t\t\t//asociated psuedo-Null\r\n\t\t\t\tvar reallyPseudoNull = self.defaultPicture.getAttribute(\"textForNullValues\")\r\n\t\t\t\tvar finded = false\r\n\t\t\t\tvar data_length = 0;\r\n\t\t\t\tfor (var u = 0; u < self.conditions[NewFilter.dim].distinctValues.length; u++) {\r\n\t\t\t\t\tdata_length = self.conditions[NewFilter.dim].distinctValues[u].length;\r\n\t\t\t\t}\r\n\t\t\t\tfor (var u = 0; u < self.conditions[NewFilter.dim].distinctValues.length; u++) {\r\n\t\t\t\t\tif (self.conditions[NewFilter.dim].distinctValues[u].trimpivot() == self.defaultPicture.getAttribute(\"textForNullValues\")) {\r\n\t\t\t\t\t\treallyPseudoNull = self.conditions[NewFilter.dim].distinctValues[u];\r\n\t\t\t\t\t\tfinded = true;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (!finded) {\r\n\t\t\t\t\tfor (var t = 0; t < data_length - self.defaultPicture.getAttribute(\"textForNullValues\").length; t++) {\r\n\t\t\t\t\t\treallyPseudoNull = reallyPseudoNull + \" \";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!nullIncluded) {\r\n\t\t\t\t\tif (excluded.indexOf(reallyPseudoNull) == -1) {\r\n\t\t\t\t\t\texcluded.push(reallyPseudoNull)\r\n\t\t\t\t\t\tif (self.conditions[NewFilter.dim].blackList.indexOf(reallyPseudoNull) == -1) {\r\n\t\t\t\t\t\t\tself.conditions[NewFilter.dim].blackList.push(reallyPseudoNull)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (included.indexOf(reallyPseudoNull) != -1) {\r\n\t\t\t\t\t\tincluded.splice(included.indexOf(reallyPseudoNull), 1)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (self.conditions[NewFilter.dim].visibles.indexOf(reallyPseudoNull) != -1) {\r\n\t\t\t\t\t\tself.conditions[NewFilter.dim].visibles.splice(self.conditions[NewFilter.dim].visibles.indexOf(reallyPseudoNull), 1)\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (included.indexOf(reallyPseudoNull) == -1) {\r\n\t\t\t\t\t\tif (excluded.indexOf(reallyPseudoNull) != -1) {\r\n\t\t\t\t\t\t\texcluded.splice(excluded.indexOf(reallyPseudoNull), 1)\r\n\t\t\t\t\t\t\tincluded.push(reallyPseudoNull)\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (self.conditions[NewFilter.dim].defaultAction == \"Exclude\") {\r\n\t\t\t\t\t\t\t\tincluded.push(reallyPseudoNull)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (self.conditions[NewFilter.dim].blackList.indexOf(reallyPseudoNull) != -1) {\r\n\t\t\t\t\t\t\tself.conditions[NewFilter.dim].blackList.splice(self.conditions[NewFilter.dim].blackList.indexOf(reallyPseudoNull), 1)\r\n\t\t\t\t\t\t\tif (self.conditions[NewFilter.dim].visibles.indexOf(reallyPseudoNull) == -1) {\r\n\t\t\t\t\t\t\t\tself.conditions[NewFilter.dim].visibles.push(reallyPseudoNull)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar allValuesLoaded = (self.conditions[NewFilter.dim].previousPage == self.conditions[NewFilter.dim].totalPages)\r\n\t\t\tvar noFilterNeeded = (((nullIncluded) || (!self.conditions[NewFilter.dim].hasNull))\r\n\t\t\t\t&& (excluded.length == 0) && (NewFilter.op != \"none\") && (NewFilter.op != \"push\")\r\n\t\t\t\t&& ((self.conditions[NewFilter.dim].defaultAction == \"Include\") || (allValuesLoaded))\r\n\t\t\t\t&& (!isFromMetadata)\r\n\t\t\t\t&& (!(NewFilter.op == \"reverse\"))\r\n\t\t\t);\r\n\r\n\t\t\tvar pos = 0; var toDelete = false;\r\n\t\t\tfor (var t = 0; t < self.pageData.FilterInfo.length; t++) {\r\n\t\t\t\tif (self.pageData.FilterInfo[t].DataField == DataFieldFilter) {\r\n\t\t\t\t\tfilterExist = true; toDelete = true;\r\n\t\t\t\t\tself.pageData.FilterInfo[t].NullIncluded = nullIncluded\r\n\t\t\t\t\tself.pageData.FilterInfo[t].NotNullValues.Included = included\r\n\t\t\t\t\tself.pageData.FilterInfo[t].NotNullValues.Excluded = excluded\r\n\t\t\t\t\tself.pageData.FilterInfo[t].NotNullValues.DefaultAction = self.conditions[NewFilter.dim].defaultAction\r\n\t\t\t\t\tpos = t;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif ((noFilterNeeded) && (toDelete)) {\r\n\t\t\t\tself.pageData.FilterInfo.splice(pos, 1)\r\n\t\t\t}\r\n\t\t\tif ((!filterExist) && (!noFilterNeeded)) {\r\n\t\t\t\tvar notNullValues = { Included: included, Excluded: excluded, DefaultAction: self.conditions[NewFilter.dim].defaultAction }\r\n\t\t\t\tfilter = { DataField: DataFieldFilter, NullIncluded: nullIncluded, NotNullValues: notNullValues }\r\n\t\t\t\tself.pageData.FilterInfo.push(filter);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tthis.moveToNextPage = function () {\r\n\t\t\tif (this.pageData.ServerPageNumber < this.pageData.ServerPageCount) {\r\n\t\t\t\tthis.getDataForPivot(this.UcId, this.pageData.ServerPageNumber + 1, this.rowsPerPage, false, \"\", \"\", \"\", \"\")\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.moveToFirstPage = function () {\r\n\t\t\tif (this.pageData.ServerPageNumber > 1) {\r\n\t\t\t\tthis.getDataForPivot(this.UcId, 1, this.rowsPerPage, false, \"\", \"\", \"\", \"\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.moveToLastPage = function () {\r\n\t\t\tif (this.pageData.ServerPageNumber < this.pageData.ServerPageCount) {\r\n\t\t\t\tthis.getDataForPivot(this.UcId, this.pageData.ServerPageCount, this.rowsPerPage, false, \"\", \"\", \"\", \"\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.moveToPreviousPage = function () {\r\n\t\t\tif (this.pageData.ServerPageNumber > 1) {\r\n\t\t\t\tself.getDataForPivot(UcId, this.pageData.ServerPageNumber - 1, this.rowsPerPage, false, \"\", \"\", \"\", \"\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.preGoWhenServerPagination = function (load) {\r\n\t\t\tself.goWhenServerPagination(load, false);\r\n\t\t}\r\n\r\n\r\n\t\tthis.readScrollValue = function (columnNumber) {\r\n\t\t\tvar dataField = self.conditions[columnNumber].dataField;\r\n\r\n\t\t\tif (!self.conditions[columnNumber].blocked) {\r\n\t\t\t\tself.conditions[columnNumber].blocked = true;\r\n\t\t\t\tif (!self.conditions[columnNumber].filtered) {\r\n\t\t\t\t\tvar page = self.conditions[columnNumber].previousPage + 1;\r\n\t\t\t\t\tself.lastRequestValue = columnNumber;\r\n\t\t\t\t\tself.lastRequestAttributeValues = \"readScrollValueWithoutFilters\"\r\n\t\t\t\t\tself.requestAttributeValues(dataField, page, 10, \"\")\r\n\t\t\t\t\t\r\n\t\t\t\t\t/*self.QueryViewerCollection[self.IdForQueryViewerCollection].getAttributeValues((function (resJSON) {\r\n\t\t\t\t\t\tvar res = JSON.parse(resJSON);\r\n\t\t\t\t\t\tself.appendNewValueData(self.lastRequestValue, res)\r\n\t\t\t\t\t}).closure(this), [dataField, page, 10, \"\"]);*/\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar ValuePageInfo = self.conditions[columnNumber].searchInfo\r\n\t\t\t\t\tvar page = ValuePageInfo.previousPage + 1;\r\n\t\t\t\t\tself.lastRequestValue = dataField;\r\n\t\t\t\t\tvar filterText = ValuePageInfo.filteredText\r\n\t\t\t\t\t\r\n\t\t\t\t\tself.lastRequestAttributeValues = \"readScrollValueWithFilters\"\r\n\t\t\t\t\tself.lastRequestAttributeColumnNumber = columnNumber\r\n\t\t\t\t\tself.lastRequestAttributeFilterText = filterText\r\n\t\t\t\t\tself.requestAttributeValues(dataField, page, 10, ValuePageInfo.filteredText)\r\n\t\t\t\t\t/*self.QueryViewerCollection[self.IdForQueryViewerCollection].getAttributeValues((function (resJSON) {\r\n\t\t\t\t\t\tvar res = JSON.parse(resJSON);\r\n\t\t\t\t\t\tself.appendNewFilteredValueData(res, columnNumber, filterText)\r\n\t\t\t\t\t}).closure(this), [dataField, page, 10, ValuePageInfo.filteredText]);*/\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.getValuesForColumn = function (UcId, columnNumber, filterValue) {\r\n\t\t\tvar dataField = self.conditions[columnNumber].dataField;\r\n\t\t\tif (filterValue != \"\") {\r\n\t\t\t\tvar page = 1\r\n\t\t\t\tvar filterValuePars = filterValue.replace(/\\\\/g, \"\\\\\\\\\")\r\n\t\t\t\t\r\n\t\t\t\tself.lastRequestAttributeValues = \"ValuesForColumn\"\r\n\t\t\t\tself.lastRequestAttributeColumnNumber = columnNumber\r\n\t\t\t\tself.lastRequestAttributeFilterText = filterValuePars\r\n\t\t\t\tself.lastRequestAttributeDataField = dataField\r\n\t\t\t\tself.lastRequestAttributeUcId = UcId\r\n\t\t\t\tself.requestAttributeValues(dataField, page, 10, filterValuePars)\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t/*self.QueryViewerCollection[self.IdForQueryViewerCollection].getAttributeValues((function (resJSON) {\r\n\t\t\t\t\tvar res = JSON.parse(resJSON);\r\n\t\t\t\t\tself.changeValues(UcId, dataField, columnNumber, res, filterValuePars);\r\n\t\t\t\t}).closure(this), [dataField, page, 10, filterValuePars]);*/\r\n\t\t\t} else {\r\n\t\t\t\tself.resetScrollValue(UcId, dataField, columnNumber)\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.appendNewValueData = function (columnNumber, data) {\r\n\t\t\tif (data.PageNumber > self.conditions[columnNumber].previousPage) {\r\n\t\t\t\tself.conditions[columnNumber].previousPage = data.PageNumber\r\n\t\t\t\tself.conditions[columnNumber].totalPages = data.PagesCount\r\n\t\t\t\tvar newValues = [];\r\n\r\n\t\t\t\tif (data.Null) {\r\n\t\t\t\t\tif (self.conditions[columnNumber].indexOf(\"#NuN#\") == -1) {\r\n\t\t\t\t\t\tself.conditions[columnNumber].distinctValues.push(\"#NuN#\")\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//add to differentValues\r\n\t\t\t\tfor (var i = 0; i < data.NotNullValues.length; i++) {\r\n\t\t\t\t\tvar val = data.NotNullValues[i]\r\n\t\t\t\t\tif (self.conditions[columnNumber].distinctValues.indexOf(val) == -1) {\r\n\t\t\t\t\t\tself.conditions[columnNumber].distinctValues.push(val)\r\n\t\t\t\t\t\tnewValues.push(val)\r\n\t\t\t\t\t}//lo mismo\r\n\t\t\t\t\tif (self.conditions[columnNumber].defaultAction == \"Include\") {\r\n\t\t\t\t\t\tif ((self.conditions[columnNumber].visibles.indexOf(val) == -1)\r\n\t\t\t\t\t\t\t&& (self.conditions[columnNumber].blackList.indexOf(val) == -1)) {\r\n\t\t\t\t\t\t\tself.conditions[columnNumber].visibles.push(val)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif ((self.conditions[columnNumber].visibles.indexOf(val) == -1)\r\n\t\t\t\t\t\t\t&& (self.conditions[columnNumber].blackList.indexOf(val) == -1)) {\r\n\t\t\t\t\t\t\tself.conditions[columnNumber].blackList.push(val)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor (var nI = 0; nI < newValues.length; nI++) {\r\n\t\t\t\t\tvar checked = true;\r\n\t\t\t\t\tif (self.conditions[columnNumber].state != \"all\") {\r\n\t\t\t\t\t\tif (self.conditions[columnNumber].blackList.indexOf(newValues[nI]) != -1) {\r\n\t\t\t\t\t\t\tchecked = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (!((self.conditions[columnNumber].hasNull) && (newValues[nI].trimpivot() == self.defaultPicture.getAttribute(\"textForNullValues\")))) {\r\n\t\t\t\t\t\tself.appendNewPairToPopUp(newValues[nI], columnNumber, checked)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (self.conditions[columnNumber].previousPage < data.PagesCount)\r\n\t\t\t\tself.conditions[columnNumber].blocked = false;\r\n\t\t}\r\n\r\n\t\tthis.changeValues = function (UcId, dataField, columnNumber, data, filterText) { //when filter by search filter, delete pairs and show new ones\r\n\t\t\tvar searchInput = jQuery(\"#\" + UcId + columnNumber)[0];\r\n\r\n\t\t\tvar sInput = searchInput.value;\r\n\t\t\tif (searchInput.value) {\r\n\t\t\t\tsInput = sInput.replace(/\\\\/g, \"\\\\\\\\\")\r\n\t\t\t}\r\n\t\t\tif (((searchInput.value) || (searchInput.value == \"\")) && (sInput != filterText)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tself.conditions[columnNumber].filtered = true;\r\n\t\t\tself.conditions[columnNumber].blocked = true;\r\n\t\t\tself.removeAllPairsFromPopUp(columnNumber, data.PagesCount > 1);\r\n\r\n\t\t\t//set filtered pagination info\r\n\t\t\tself.conditions[columnNumber].searchInfo.previousPage = 1\r\n\t\t\tself.conditions[columnNumber].searchInfo.totalPages = data.PagesCount\r\n\t\t\tself.conditions[columnNumber].searchInfo.filteredText = filterText;\r\n\r\n\t\t\tfor (var i = 0; i < data.NotNullValues.length; i++) {\r\n\t\t\t\tvar value = data.NotNullValues[i]\r\n\t\t\t\tvar alreadyInValues = (self.conditions[columnNumber].distinctValues.indexOf(value) != -1)\r\n\t\t\t\t//append to different values\r\n\t\t\t\tif (self.conditions[columnNumber].distinctValues.indexOf(value) == -1) {\r\n\t\t\t\t\tself.conditions[columnNumber].distinctValues.push(value)\r\n\t\t\t\t}\r\n\t\t\t\tif ((self.conditions[columnNumber].state == \"all\") ||\r\n\t\t\t\t\t((self.conditions[columnNumber].defaultAction == \"Include\") && (!alreadyInValues))) {\r\n\t\t\t\t\t//if Include new values and is a new value\r\n\t\t\t\t\tif ((self.conditions[columnNumber].visibles.indexOf(value) == -1)\r\n\t\t\t\t\t\t&& (self.conditions[columnNumber].blackList.indexOf(value) == -1)) {\r\n\t\t\t\t\t\tself.conditions[columnNumber].visibles.push(value)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t//\r\n\r\n\r\n\t\t\t\tvar checked = true;\r\n\t\t\t\tif (self.conditions[columnNumber].state != \"all\") {\r\n\t\t\t\t\tif (self.conditions[columnNumber].visibles.indexOf(value) < 0) {\r\n\t\t\t\t\t\tchecked = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tself.conditions[columnNumber].searchInfo.values.push(value);\r\n\t\t\t\tif (!((self.conditions[columnNumber].hasNull) && (value.trimpivot() == self.defaultPicture.getAttribute(\"textForNullValues\")))) {\r\n\t\t\t\t\tself.appendNewPairToPopUp(value, columnNumber, checked);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (data.PagesCount > 0)\r\n\t\t\t\tself.conditions[columnNumber].blocked = false;\r\n\t\t}\r\n\r\n\t\tthis.resetScrollValue = function (UcId, dataField, columnNumber) { //after filtered when input serach is clean, restor values without filter\r\n\t\t\tself.conditions[columnNumber].filtered = false;\r\n\t\t\tself.conditions[columnNumber].blocked = true;\r\n\r\n\t\t\tself.removeAllPairsFromPopUp(columnNumber, data.PagesCount > 1);\r\n\r\n\t\t\tfor (var u = 0; u < self.conditions[columnNumber].distinctValues.length; u++) {\r\n\t\t\t\tvar checked = true;\r\n\t\t\t\tvar value = self.conditions[columnNumber].distinctValues[u];\r\n\t\t\t\tif (self.conditions[columnNumber].state != \"all\") {\r\n\t\t\t\t\tif (self.conditions[columnNumber].visibles.indexOf(value) < 0) {\r\n\t\t\t\t\t\tchecked = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!((self.conditions[columnNumber].hasNull) && (value.trimpivot() == self.defaultPicture.getAttribute(\"textForNullValues\")))) {\r\n\t\t\t\t\tself.appendNewPairToPopUp(value, columnNumber, checked)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (self.conditions[columnNumber].previousPage < self.conditions[columnNumber].totalPages)\r\n\t\t\t\tself.conditions[columnNumber].blocked = false;\r\n\t\t}\r\n\r\n\t\tthis.resetAllScrollValue = function (UcId) { //when closing the filter popup\r\n\t\t\tfor (var id = 0; id < self.conditions.length; id++) {\r\n\t\t\t\tself.conditions[id].filtered = false;\r\n\t\t\t\tself.conditions[id].blocked = true;\r\n\t\t\t\tif (self.conditions[id].previousPage < self.conditions[id].totalPages)\r\n\t\t\t\t\tself.conditions[id].blocked = false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.appendNewFilteredValueData = function (data, columnNumber, filterValue) { //add pairs when filtering by filter input\r\n\t\t\tvar dataField = self.lastRequestValue\r\n\r\n\t\t\tvar ValuePageInfo = self.conditions[columnNumber].searchInfo\r\n\t\t\tif (((filterValue) || (filterValue == \"\")) && (ValuePageInfo.filteredText != filterValue)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (data.PageNumber > ValuePageInfo.previousPage) {\r\n\t\t\t\tself.conditions[columnNumber].searchInfo.previousPage = data.PageNumber\r\n\t\t\t\tself.conditions[columnNumber].searchInfo.totalPages = data.PagesCount\r\n\r\n\t\t\t\tif (data.Null) {\r\n\t\t\t\t\tif (self.conditions[columnNumber].distinctValues.indexOf(\"#NuN#\") == -1) {\r\n\t\t\t\t\t\tself.conditions[columnNumber].distinctValues.push(\"#NuN#\")\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor (var i = 0; i < data.NotNullValues.length; i++) {\r\n\t\t\t\t\tvar value = data.NotNullValues[i]\r\n\t\t\t\t\tvar alreadyInValues = (self.conditions[columnNumber].distinctValues.indexOf(value) != -1)\r\n\t\t\t\t\t//append to different values\r\n\t\t\t\t\tif (self.conditions[columnNumber].distinctValues.indexOf(value) == -1) {\r\n\t\t\t\t\t\tself.conditions[columnNumber].distinctValues.push(value)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ((self.conditions[columnNumber].defaultAction == \"Include\") && (!alreadyInValues)) {\r\n\t\t\t\t\t\tif ((self.conditions[columnNumber].visibles.indexOf(value) == -1)\r\n\t\t\t\t\t\t\t&& (self.conditions[columnNumber].blackList.indexOf(value) == -1)) {\r\n\t\t\t\t\t\t\tself.conditions[columnNumber].visibles.push(value)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif ((self.conditions[columnNumber].visibles.indexOf(value) == -1)\r\n\t\t\t\t\t\t\t&& (self.conditions[columnNumber].blackList.indexOf(value) == -1)) {\r\n\t\t\t\t\t\t\tself.conditions[columnNumber].blackList.push(value)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar checked = true;\r\n\t\t\t\t\tif (self.conditions[columnNumber].state != \"all\") {\r\n\t\t\t\t\t\tif (self.conditions[columnNumber].visibles.indexOf(value) < 0) {\r\n\t\t\t\t\t\t\tchecked = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!((self.conditions[columnNumber].hasNull) && (value.trimpivot() == self.defaultPicture.getAttribute(\"textForNullValues\")))) {\r\n\t\t\t\t\t\tself.appendNewPairToPopUp(value, columnNumber, checked)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (self.conditions[columnNumber].searchInfo.previousPage < self.conditions[columnNumber].searchInfo.totalPages)\r\n\t\t\t\t\tself.conditions[columnNumber].blocked = false;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t\tthis.appendNewPairToPopUp = function (value, colNumber, checked) {\r\n\t\t\t\tvar getPair = function (text, id, check) {\r\n\t\t\t\t\tvar div = OAT.Dom.create(\"div\");\r\n\t\t\t\t\tvar class_check_div = check ? \"check_item_img\" : \"uncheck_item_img\";\r\n\t\t\t\t\tif (self.isSD) {\r\n\t\t\t\t\t\tclass_check_div = check ? \"check_item_img_small\" : \"uncheck_item_img_small\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tOAT.addImageNode(div, check  ? \"check_box\" : \"check_box_outline_blank\", \"\");\r\n\r\n\t\t\t\t\tdiv.setAttribute(\"class\", class_check_div);\r\n\t\t\t\t\tvar ch = OAT.Dom.create(\"input\");\r\n\t\t\t\t\tch.type = \"checkbox\";\r\n\t\t\t\t\tch.id = id;\r\n\t\t\t\t\tvar t = OAT.Dom.create(\"label\");\r\n\t\t\t\t\tOAT.addTextNode(t, text)\r\n\t\t\t\t\tt.htmlFor = id;\r\n\t\t\t\t\tdiv.appendChild(t);\r\n\t\t\t\t\treturn [div, ch];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar getRefBool = function (checked, value) {\r\n\t\t\t\t\t\r\n\t\t\t\t\t\tvar oper = \"pop\";\r\n\t\t\t\t\t\tif (!checked) {\r\n\t\t\t\t\t\t\toper = \"push\";\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tself.getDataForPivot(self.UcId, 1, self.rowsPerPage, true, self.conditions[colNumber].dataField, { op: oper, values: value, dim: colNumber }, \"\", \"\")\r\n\r\n\t\t\t\t\t\tself.stateChanged = true;\r\n\t\t\t\t\t\tself.onFilteredChangedEventHandleWhenServerPagination(colNumber);\r\n\t\t\t\t\t\tself.EneablePivot();\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\tvar pict_value = self.dimensionPictureValue(value, colNumber);\r\n\t\t\t\tif (value == \"#NuN#\") {\r\n\t\t\t\t\tpict_value = \"\\u00A0\"\r\n\t\t\t\t}\r\n\t\t\t\tpict_value = pict_value.replace(/\\&amp;/g, \"&\").replace(/\\&nbsp;/g, \" \")\r\n\t\t\t\tif (pict_value.length > 33) {\r\n\t\t\t\t\tvar resto = (pict_value.substring(32, pict_value.length).trimpivot().length > 0) ? '...' : '';\r\n\t\t\t\t\tpict_value = pict_value.substring(0, 32) + resto\r\n\t\t\t\t}\r\n\r\n\t\t\t\tpict_value = pict_value.replace(/ /g, \"\\u00A0\") + '\\u00A0\\u00A0\\u00A0\\u00A0\\u00A0'\r\n\t\t\t\tvar pair = getPair(pict_value, \"pivot_distinct_\" + i, checked);\r\n\t\t\t\tpair[0].setAttribute('value', value);\r\n\t\t\t\tvar fixHeigthDiv = jQuery(\"#values_\" + self.UcId + \"_\" + colNumber)[0]\r\n\t\t\t\tfixHeigthDiv.appendChild(pair[0]);\r\n\r\n\t\t\t\tif (fixHeigthDiv.children.length > 9) {\r\n\t\t\t\t\tfixHeigthDiv.setAttribute(\"class\", \"pivot_popup_fix\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\tOAT.Dom.attach(pair[0], \"click\", function () {\r\n\t\t\t\t\tself.DiseablePivot();\r\n\r\n\t\t\t\t\tvar checkedClass = \"check_item_img\"\r\n\t\t\t\t\tvar unCheckedClass = \"uncheck_item_img\"\r\n\t\t\t\t\tif (self.isSD) {//android\r\n\t\t\t\t\t\tcheckedClass = \"check_item_img_small\"\r\n\t\t\t\t\t\tunCheckedClass = \"uncheck_item_img_small\"\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar checked = !(this.getAttribute(\"class\") === checkedClass);\r\n\t\t\t\t\tvar newClass = (this.getAttribute(\"class\") === checkedClass) ? unCheckedClass : checkedClass;\r\n\t\t\t\t\t\r\n\t\t\t\t\tjQuery(this).find(\"i\")[0].textContent = checked ? \"check_box\" : \"check_box_outline_blank\";\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.setAttribute(\"class\", newClass);\r\n\t\t\t\t\tgetRefBool(checked, this.getAttribute(\"value\"));//this.textContent);            \t\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\tthis.removeAllPairsFromPopUp = function (colNumber, withScroll) {\r\n\t\t\tvar checkedClass = \"check_item_img\"\r\n\t\t\tvar unCheckedClass = \"uncheck_item_img\"\r\n\t\t\tif (self.isSD) {//android\r\n\t\t\t\tcheckedClass = \"check_item_img_small\"\r\n\t\t\t\tunCheckedClass = \"uncheck_item_img_small\"\r\n\t\t\t}\r\n\r\n\t\t\tjQuery(\"#values_\" + self.UcId + \"_\" + colNumber).find(\".\" + checkedClass).remove()\r\n\t\t\tjQuery(\"#values_\" + self.UcId + \"_\" + colNumber).find(\".\" + unCheckedClass).remove()\r\n\r\n\t\t\tjQuery(\".last_div_popup .\" + checkedClass).remove()\r\n\t\t\tjQuery(\".last_div_popup .\" + unCheckedClass).remove()\r\n\r\n\t\t\t//set class of pairs container\r\n\t\t\tif (withScroll) {\r\n\t\t\t\tjQuery(\"#values_\" + self.UcId + \"_\" + colNumber).removeClass(\"pivot_popup_auto\");\r\n\t\t\t\tjQuery(\"#values_\" + self.UcId + \"_\" + colNumber).addClass(\"pivot_popup_fix\");\r\n\t\t\t} else {\r\n\t\t\t\tjQuery(\"#values_\" + self.UcId + \"_\" + colNumber).removeClass(\"pivot_popup_fix\");\r\n\t\t\t\tjQuery(\"#values_\" + self.UcId + \"_\" + colNumber).addClass(\"pivot_popup_auto\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar alreadyclicked = false;\r\n\t\tvar alreadyclickedTimeout;\r\n\t\tthis.onClickEventHandle = function (elemvalue, type, number, item) {\r\n\t\t\tself.ClickHandle(elemvalue);\r\n\r\n\t\t}\r\n\r\n\t\tthis.onClickExpandCollapse = function (elemvalue) {\r\n\r\n\t\t\tvar value = jQuery(elemvalue).data('itemValue');\r\n\t\t\t//var type = jQuery(elemvalue).data('typeMorD');\r\n\t\t\tvar number = jQuery(elemvalue).data('numberMorD');\r\n\t\t\tvar item = jQuery(elemvalue).data('itemInfoEC');\r\n\t\t\tif (self.conditions[number].collapsedValues.indexOf(value) == -1) {\r\n\t\t\t\t//collapse value\r\n\t\t\t\tself.conditions[number].collapsedValues.push(value);\r\n\t\t\t\tself.ExpandCollapseHandleWhenServerPagination(elemvalue, \"collapse\")\r\n\t\t\t\t\r\n\t\t\t} else {\r\n\t\t\t\t//expand value\r\n\t\t\t\tself.conditions[number].collapsedValues.splice(self.conditions[number].collapsedValues.indexOf(value), 1);\r\n\t\t\t\tself.ExpandCollapseHandleWhenServerPagination(elemvalue, \"expande\")\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t//self.go(false);\r\n\t\t\t\r\n\t\t}\r\n\r\n\r\n\r\n\t\tthis.cleanValueForNull = function (value) {\r\n\t\t\tif (value == \"#NuN#\") {\r\n\t\t\t\tvar defaultNull = self.defaultPicture.getAttribute(\"textForNullValues\");\r\n\t\t\t\tif (defaultNull != undefined) {\r\n\t\t\t\t\treturn defaultNull;\r\n\t\t\t\t}\r\n\t\t\t\treturn \"\";\r\n\t\t\t}\r\n\t\t\treturn value;\r\n\t\t}\r\n\r\n\t\tthis.isClickedRow = function (row, value, columnOfValue, otherrow, dimension, isColumnDimensionValue) {\r\n\t\t\tif (!isColumnDimensionValue){\r\n\t\t\t\tif (self.rowConditions.indexOf(dimension) == -1) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\tfor (var col = 0; col < columnOfValue; col++) {\r\n\t\t\t\t\tvar dimensionNumber = self.rowConditions[col];\r\n\t\t\t\t\tif (row[dimensionNumber] != otherrow[dimensionNumber]) {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\t\r\n\t\t\telse \r\n\t\t\t{\r\n\t\t\t\tif (self.colConditions.indexOf(dimension) == -1) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\tfor (var col = 0; col < columnOfValue; col++) {\r\n\t\t\t\t\tvar dimensionNumber = self.colConditions[col];\r\n\t\t\t\t\tif (row[dimensionNumber] != otherrow[dimensionNumber]) {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tthis.isClickedRowMeasure = function (row, value, otherrow) {\r\n\t\t\tfor (var col = 0; col < row.length; col++) {\r\n\t\t\t\tif ((row[col] != undefined) && (row[col] != otherrow[col])) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tthis.onClickSelectNode = function (elemvalue) { \r\n\t\t\tvar value = jQuery(elemvalue).data('itemValue');\r\n\t\t\tvar type = jQuery(elemvalue).data('typeMorD');\r\n\t\t\tvar number = jQuery(elemvalue).data('numberMorD');\r\n\t\t\tvar item = jQuery(elemvalue).data('itemInfo');\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tself.selection.SelectedNode = [];\r\n\t\t\t\r\n\t\t\tself.SelectNodes(value, type, number, item);\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\tthis.requestDataSynForPivotTable = function(){\r\n\t\t\tsetTimeout( function() {\r\n\t\t\t\tvar paramobj = {\"QueryviewerId\": self.IdForQueryViewerCollection};\r\n\t\t\t\tvar evt = document.createEvent(\"Events\")\r\n\t\t\t\tevt.initEvent(\"RequestDataSynForPivotTable\", true, true);\r\n\t\t\t\tevt.parameter = paramobj;\r\n\t\t\t\tdocument.dispatchEvent(evt);\r\n\t\t\t}, 0)\r\n\t\t}\r\n\t\t\r\n\t\tthis.ClickHandle = function (elemvalue) { \r\n\t\t\t\r\n\t\t\tself.LastElemValue = elemvalue\r\n\t\t\t\r\n\t\t\tself.requestDataSynForPivotTable()\r\n\t\t}\r\n\t\t\r\n\t\tthis.setDataSynForPivotTable = function(serverData){\r\n\t\t\tvar elemvalue = self.LastElemValue\r\n\t\t\tvar temp = serverData\r\n\t\t\t\r\n\t\t\tvar value = jQuery(elemvalue).data('itemValue');\r\n\t\t\tvar type = jQuery(elemvalue).data('typeMorD');\r\n\t\t\tvar number = jQuery(elemvalue).data('numberMorD');\r\n\t\t\tvar item = jQuery(elemvalue).data('itemInfo');\r\n\t\t\tvar selected = OAT.IsNodeSelected(elemvalue.parentElement);\r\n\t\t\tvar datastr = \"<DATA><ITEM type=\\\"\" + type + \"\\\" \";\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tif (type === \"MEASURE\") {\r\n\t\t\t\tdatastr = datastr + \"name=\\\"\" + measures[number].getAttribute(\"name\") + \"\\\" \";\r\n\t\t\t\tdatastr = datastr + \"displayName=\\\"\" + measures[number].getAttribute(\"displayName\") + \"\\\" \";\r\n\t\t\t\tdatastr = datastr + \"selected=\\\"\" + selected.toString() + \"\\\" \";\r\n\t\t\t\tdatastr = datastr + \"location=\\\"data\\\">\"\r\n\t\t\t\tdatastr = datastr + self.cleanValueForNull(value)\r\n\t\t\t} else {//DIMENSION\r\n\t\t\t\tdatastr = datastr + \"name=\\\"\" + self.columns[number].getAttribute(\"name\") + \"\\\" \";\r\n\t\t\t\tdatastr = datastr + \"displayName=\\\"\" + self.columns[number].getAttribute(\"displayName\") + \"\\\" \";\r\n\t\t\t\tdatastr = datastr + \"selected=\\\"\" + selected.toString() + \"\\\" \";\r\n\t\t\t\t\r\n\t\t\t\tif ((item != \"\") && (((item.axis != undefined) &&  (item.axis == \"columns\")) || (item[4] == \"columns\") ))\r\n\t\t\t\t\tdatastr = datastr + \"location=\\\"columns\\\">\"\r\n\t\t\t\telse\r\n\t\t\t\t\tdatastr = datastr + \"location=\\\"rows\\\">\"\r\n\t\t\t\tdatastr = datastr + self.cleanValueForNull(value)\r\n\t\t\t}\r\n\r\n\t\t\tdatastr = datastr + \"</ITEM>\";\r\n\t\t\t//datastr = datastr + \"</DATA>\";\r\n\r\n\t\t\tdatastr = datastr + \"<CONTEXT>\";\r\n\t\t\tdatastr = datastr + \"<RELATED>\";\r\n\t\t\tvar previuosDat = datastr;\r\n\t\t\ttry {\r\n\t\t\t\t\r\n\t\t\t\t\tvar dataFieldsList = []\r\n\t\t\t\t\tfor (var i = 0; i < self.conditions.length; i++){\r\n\t\t\t\t\t\tif (self.conditions[i].dataField != undefined) {\r\n\t\t\t\t\t\t\tdataFieldsList.push(self.conditions[i].dataField)\r\n\t\t\t\t\t\t} \r\n\t\t\t\t\t}\r\n\t\t\t\t\tfor (var i = 0; i < measures.length; i++){\r\n\t\t\t\t\t\tif (measures[i].getAttribute(\"dataField\") != undefined) {\r\n\t\t\t\t\t\t\tdataFieldsList.push(measures[i].getAttribute(\"dataField\"))\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t//if (self.allRowsPivot == \"vacio\") {\r\n\t\t\t\t\t\tself.allRowsPivot = []\r\n\t\t\t\t\t\tself.allFullRowsPivot = []\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t//var temp = self.QueryViewerCollection[self.IdForQueryViewerCollection].getPivottableDataSync();\r\n\t\t\t\t\t\tvar stringRecord = temp.split(\"<Record>\")\r\n\t\t\t\t\t\tfor (var i = 1; i < stringRecord.length; i++) {\r\n\t\t\t\t\t\t\tvar recordData = [];\r\n\t\t\t\t\t\t\tvar fullRecordData = [];\r\n\t\t\t\t\t\t\tfor (var j = 0; j < dataFieldsList.length; j++) {\r\n\t\t\t\t\t\t\t\trecordData[j] = \"#NuN#\"\r\n\t\t\t\t\t\t\t\tvar dt = stringRecord[i].split(\"<\" + dataFieldsList[j] + \">\")\r\n\t\t\t\t\t\t\t\tif (dt.length > 1) {\r\n\t\t\t\t\t\t\t\t\tvar at = dt[1].split(\"</\" + dataFieldsList[j] + \">\")\r\n\t\t\t\t\t\t\t\t\trecordData[j] = at[0]\r\n\t\t\t\t\t\t\t\t\tfullRecordData[j] = recordData[j]\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tif (stringRecord[i].indexOf(\"<\" + dataFieldsList[j] + \"/>\") >= 0) {\r\n\t\t\t\t\t\t\t\t\t\trecordData[j] = \"\"\r\n\t\t\t\t\t\t\t\t\t\tfullRecordData[j] = \"\"\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\trecordData[j] = \"#NuN#\"\r\n\t\t\t\t\t\t\t\t\t\tfullRecordData[j] = \"#NuN#\"\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif ((type == \"MEASURE\") && (self.formulaInfo.cantFormulaMeasures) && (self.formulaInfo.measureFormula[number].hasFormula)){\r\n\t\t\t\t\t\t\t\trecordData[number + this.columns.length] = parseFloat(recordData[number + this.columns.length]).toFixed(15).toString()\r\n\t\t\t\t\t\t\t\tfullRecordData[number + this.columns.length] = parseFloat(fullRecordData[number + this.columns.length]).toFixed(15).toString()\r\n\t\t\t\t\t\t\t} \r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tself.allRowsPivot.push(recordData);\r\n\r\n\t\t\t\t\t\t\t//add hide columns values\r\n\t\t\t\t\t\t\tfor (var j = 0; j < self.HideDataFilds.length; j++) {\r\n\t\t\t\t\t\t\t\tvar dt = stringRecord[i].split(\"<\" + self.HideDataFilds[j] + \">\")\r\n\t\t\t\t\t\t\t\tif (dt.length > 1) {\r\n\t\t\t\t\t\t\t\t\tvar at = dt[1].split(\"</\" + self.HideDataFilds[j] + \">\")\r\n\t\t\t\t\t\t\t\t\tfullRecordData[fullRecordData.length] = at[0]\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tif (stringRecord[i].indexOf(\"<\" + self.HideDataFilds[j] + \"/>\") >= 0) {\r\n\t\t\t\t\t\t\t\t\t\tfullRecordData[fullRecordData.length] = \"\"\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tfullRecordData[fullRecordData.length] = \"#NuN#\"\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tself.allFullRowsPivot.push(fullRecordData);\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t//}\r\n\r\n\t\t\t\t\tvar isNotSubtotal = false;\r\n\t\t\t\t\tif (item.row) {\r\n\t\t\t\t\t\tisNotSubtotal = !item.row.subTotal\r\n\t\t\t\t\t\tif ((!isNotSubtotal) && (item.isTotal != undefined) && (!item.isTotal)) {\r\n\t\t\t\t\t\t\tisNotSubtotal = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar isColumnDimensionValue = (item.axis != undefined) && (item.axis == \"columns\")\r\n\t\t\t\t\tif (isColumnDimensionValue){\r\n\t\t\t\t\t\tisNotSubtotal = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (((item.row != undefined) || isColumnDimensionValue) && (isNotSubtotal)) {\r\n\t\t\t\t\t\tvar row = item.row\r\n\t\t\t\t\t\tvar cellNumber = item.cell\r\n\t\t\t\t\t\tvar numRow = self.pageData.rows.indexOf(row)\r\n\t\t\t\t\t\tvar colPos = item.cell\r\n\t\t\t\t\t\tvar numCol = self.pageData.columnsHeaders[colPos]\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (isColumnDimensionValue){\r\n\t\t\t\t\t\t\tcellNumber = item.rownumber\r\n\t\t\t\t\t\t\tcolPos = item.columnnumber\r\n\t\t\t\t\t\t\tnumCol = self.pageData.columnsHeaders[colPos]\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tvar pseudoRow = [];\r\n\t\t\t\t\t\tfor (var i = 0; i < self.pageData.dataFields.length; i++) {\r\n\t\t\t\t\t\t\tpseudoRow[i] = undefined;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (item.row != undefined) {\r\n\t\t\t\t\t\t\tfor (var i = 0; i < row.headers.length; i++) {\r\n\t\t\t\t\t\t\t\tvar pos = dataFieldsList.indexOf(row.headers[i].dataField) //self.pageData.dataFields.indexOf(row.headers[i].dataField)\r\n\t\t\t\t\t\t\t\tif ((row.headers[i] != undefined) && (row.headers[i].value != undefined)) {\r\n\t\t\t\t\t\t\t\t\tpseudoRow[pos] = row.headers[i].value\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (numCol != undefined){\r\n\t\t\t\t\t\t\tfor (var i = 0; i < numCol.subHeaders.length; i++) {\r\n\t\t\t\t\t\t\t\tif ((isColumnDimensionValue) && (item.rownumber < i)) break;\r\n\t\t\t\t\t\t\t\tif (numCol.subHeaders[i] != undefined) {\r\n\t\t\t\t\t\t\t\t\tvar pos = self.pageData.dataFields.indexOf(numCol.subHeaders[i].dataField)\r\n\t\t\t\t\t\t\t\t\tif (numCol.subHeaders[i].value != undefined) {\r\n\t\t\t\t\t\t\t\t\t\tpseudoRow[pos] = numCol.subHeaders[i].value\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tfor (var i = 0; i < this.columns.length; i++) {\r\n\t\t\t\t\t\t\tdatastr = datastr + \"<ITEM name=\\\"\" + this.columns[i].getAttribute(\"name\") + \"\\\">\"\r\n\t\t\t\t\t\t\tdatastr = datastr + \"<VALUES\";\r\n\t\t\t\t\t\t\tvar existNullValue = false;\r\n\t\t\t\t\t\t\tvar stringValues = \"\";\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif ((type === \"MEASURE\")) {\r\n\t\t\t\t\t\t\t\tif (pseudoRow[i] != undefined) {\r\n\t\t\t\t\t\t\t\t\tif (pseudoRow[i] != \"#NuN#\"){\t\r\n\t\t\t\t\t\t\t\t\t\tstringValues = stringValues + \"<VALUE>\" + self.cleanValueForNull(pseudoRow[i]) + \"</VALUE>\";\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\texistNullValue = true\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tif (self.filterIndexes.indexOf(i) != -1) {\r\n\t\t\t\t\t\t\t\t\t\tvar prevValues = [];\r\n\t\t\t\t\t\t\t\t\t\tfor (var iCV = 0; iCV < self.allRowsPivot.length; iCV++) {\r\n\t\t\t\t\t\t\t\t\t\t\tif ((prevValues.indexOf(self.allRowsPivot[iCV][i]) === -1) && (self.filterOK(self.allRowsPivot[iCV])) &&\r\n\t\t\t\t\t\t\t\t\t\t\t\tself.isClickedRowMeasure(pseudoRow, value, self.allRowsPivot[iCV])) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tprevValues = prevValues.concat(self.allRowsPivot[iCV][i])\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (self.allRowsPivot[iCV][i] != \"#NuN#\"){\t\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tstringValues = stringValues + \"<VALUE>\" + self.cleanValueForNull(self.allRowsPivot[iCV][i]) + \"</VALUE>\";\r\n\t\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\texistNullValue = true\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tvar prevValues = [];\r\n\t\t\t\t\t\t\t\tfor (var iCV = 0; iCV < self.allRowsPivot.length; iCV++) {\r\n\t\t\t\t\t\t\t\t\tif ((self.allRowsPivot[iCV][number] === value) && (self.isClickedRow(pseudoRow, value, cellNumber, self.allRowsPivot[iCV], number, isColumnDimensionValue))\r\n\t\t\t\t\t\t\t\t\t\t&& (prevValues.indexOf(self.allRowsPivot[iCV][i]) === -1) && self.filterOK(self.allRowsPivot[iCV])) {\r\n\t\t\t\t\t\t\t\t\t\tprevValues = prevValues.concat(self.allRowsPivot[iCV][i])\r\n\t\t\t\t\t\t\t\t\t\tif (self.allRowsPivot[iCV][i] != \"#NuN#\"){\r\n\t\t\t\t\t\t\t\t\t\t\tstringValues = stringValues + \"<VALUE>\" + self.cleanValueForNull(self.allRowsPivot[iCV][i]) + \"</VALUE>\";\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\texistNullValue = true\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (existNullValue){\r\n\t\t\t\t\t\t\t\tdatastr = datastr + \" Null=\\\"true\\\"\"\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tdatastr = datastr + \">\" + stringValues \r\n\t\t\t\t\t\t\tdatastr = datastr + \"</VALUES>\";\r\n\t\t\t\t\t\t\tdatastr = datastr + \"</ITEM>\";\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tfor (var i = 0; i < measures.length; i++) {\r\n\t\t\t\t\t\t\tdatastr = datastr + \"<ITEM name=\\\"\" + measures[i].getAttribute(\"name\") + \"\\\">\"\r\n\t\t\t\t\t\t\tdatastr = datastr + \"<VALUES\";\r\n\t\t\t\t\t\t\tvar existNullValue = false;\r\n\t\t\t\t\t\t\tvar stringValues = \"\";\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (type === \"MEASURE\") {\r\n\t\t\t\t\t\t\t\tif (pseudoRow[i + this.columns.length] != undefined) {\r\n\t\t\t\t\t\t\t\t\tif (pseudoRow[i + this.columns.length] != \"#NuN#\"){\r\n\t\t\t\t\t\t\t\t\t\tstringValues = stringValues + \"<VALUE>\" + self.cleanValueForNull(pseudoRow[i + this.columns.length]) + \"</VALUE>\";\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\texistNullValue = true\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tif (number == i) {\r\n\t\t\t\t\t\t\t\t\t\tif (value != \"#NuN#\"){\r\n\t\t\t\t\t\t\t\t\t\t\tstringValues = stringValues + \"<VALUE>\" + self.cleanValueForNull(value) + \"</VALUE>\";\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\texistNullValue = true\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tvar prevValues = [];\r\n\t\t\t\t\t\t\t\t\t\tfor (var iCV = 0; iCV < self.allRowsPivot.length; iCV++) {\r\n\t\t\t\t\t\t\t\t\t\t\tif ((parseFloat(self.allRowsPivot[iCV][number + this.columns.length]) === parseFloat(value)) && (self.isClickedRowMeasure(pseudoRow, value, self.allRowsPivot[iCV]))\r\n\t\t\t\t\t\t\t\t\t\t\t\t&& self.filterOK(self.allRowsPivot[iCV]) && (prevValues.indexOf(self.allRowsPivot[iCV][i + this.columns.length]) === -1)) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (self.allRowsPivot[iCV][i + this.columns.length] != \"#NuN#\"){\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tstringValues = stringValues + \"<VALUE>\" + self.cleanValueForNull(self.allRowsPivot[iCV][i + this.columns.length]) + \"</VALUE>\";\r\n\t\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\texistNullValue = true\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tvar prevValues = [];\r\n\t\t\t\t\t\t\t\tfor (var iCV = 0; iCV < self.allRowsPivot.length; iCV++) {\r\n\t\t\t\t\t\t\t\t\tif ((self.allRowsPivot[iCV][number] === value) && (self.isClickedRow(pseudoRow, value, cellNumber , self.allRowsPivot[iCV], number, isColumnDimensionValue))\r\n\t\t\t\t\t\t\t\t\t\t&& self.filterOK(self.allRowsPivot[iCV]) && (prevValues.indexOf(self.allRowsPivot[iCV][i + this.columns.length]) === -1)) {\r\n\t\t\t\t\t\t\t\t\t\tprevValues = prevValues.concat(self.allRowsPivot[iCV][i + this.columns.length])\r\n\t\t\t\t\t\t\t\t\t\tif (self.allRowsPivot[iCV][i + this.columns.length] != \"#NuN#\"){\r\n\t\t\t\t\t\t\t\t\t\t\tstringValues = stringValues + \"<VALUE>\" + self.cleanValueForNull(self.allRowsPivot[iCV][i + this.columns.length]) + \"</VALUE>\";\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\texistNullValue = true\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (existNullValue){\r\n\t\t\t\t\t\t\t\tdatastr = datastr + \" Null=\\\"true\\\"\"\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tdatastr = datastr + \">\" + stringValues \r\n\t\t\t\t\t\t\tdatastr = datastr + \"</VALUES>\";\r\n\t\t\t\t\t\t\tdatastr = datastr + \"</ITEM>\";\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t//add hidden values\r\n\t\t\t\t\t\tfor (var i = 0; i < self.HideDataFilds.length; i++) {\r\n\t\t\t\t\t\t\tdatastr = datastr + \"<ITEM name=\\\"\" + self.OrderFildsHidden[i] + \"\\\">\"\r\n\t\t\t\t\t\t\tdatastr = datastr + \"<VALUES\";\r\n\t\t\t\t\t\t\tvar existNullValue = false;\r\n\t\t\t\t\t\t\tvar stringValues = \"\";\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tvar coinc = function (row1, row2) {\r\n\t\t\t\t\t\t\t\tfor (var o = 0; o < row1.length; o++) {\r\n\t\t\t\t\t\t\t\t\tif ((row1[o] != undefined) && (row1[o] != row2[o])) {\r\n\t\t\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tvar stringValues = \"\";\r\n\t\t\t\t\t\t\tif (type === \"MEASURE\") {\r\n\t\t\t\t\t\t\t\tvar prevValues = [];\r\n\t\t\t\t\t\t\t\tfor (var iCV = 0; iCV < self.allFullRowsPivot.length; iCV++) {\r\n\t\t\t\t\t\t\t\t\tif (coinc(pseudoRow, self.allFullRowsPivot[iCV]) && self.isClickedRowMeasure(pseudoRow, value, self.allFullRowsPivot[iCV])\r\n\t\t\t\t\t\t\t\t\t\t&& self.filterOK(self.allFullRowsPivot[iCV]) && (prevValues.indexOf(self.allFullRowsPivot[iCV][i + this.columns.length + measures.length]) === -1)) {\r\n\t\t\t\t\t\t\t\t\t\tprevValues = prevValues.concat(self.allFullRowsPivot[iCV][i + this.columns.length + measures.length])\r\n\t\t\t\t\t\t\t\t\t\tif (self.allFullRowsPivot[iCV][i + this.columns.length + measures.length] != \"#NuN#\"){\r\n\t\t\t\t\t\t\t\t\t\t\tstringValues = stringValues + \"<VALUE>\" + self.cleanValueForNull(self.allFullRowsPivot[iCV][i + this.columns.length + measures.length]) + \"</VALUE>\";\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\texistNullValue = true\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tvar prevValues = [];\r\n\t\t\t\t\t\t\t\tfor (var iCV = 0; iCV < self.allFullRowsPivot.length; iCV++) {\r\n\t\t\t\t\t\t\t\t\tif ((self.allFullRowsPivot[iCV][number] === value) && (self.isClickedRow(pseudoRow, value, cellNumber, self.allFullRowsPivot[iCV], number, isColumnDimensionValue))\r\n\t\t\t\t\t\t\t\t\t\t&& self.filterOK(self.allFullRowsPivot[iCV]) && (prevValues.indexOf(self.allFullRowsPivot[iCV][i + this.columns.length + measures.length]) === -1)) {\r\n\t\t\t\t\t\t\t\t\t\tprevValues = prevValues.concat(self.allFullRowsPivot[iCV][i + this.columns.length + measures.length])\r\n\t\t\t\t\t\t\t\t\t\tif (self.allFullRowsPivot[iCV][i + this.columns.length + measures.length] != \"#NuN#\"){\r\n\t\t\t\t\t\t\t\t\t\t\tstringValues = stringValues + \"<VALUE>\" + self.cleanValueForNull(self.allFullRowsPivot[iCV][i + this.columns.length + measures.length]) + \"</VALUE>\";\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\texistNullValue = true\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (existNullValue){\r\n\t\t\t\t\t\t\t\tdatastr = datastr + \" Null=\\\"true\\\"\"\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tdatastr = datastr + \">\" + stringValues \r\n\t\t\t\t\t\t\tdatastr = datastr + \"</VALUES>\";\r\n\t\t\t\t\t\t\tdatastr = datastr + \"</ITEM>\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (item === \"GrandTotal\") {\t//Grand Total, include all data\r\n\r\n\t\t\t\t\t\t\tfor (var i = 0; i < this.columns.length; i++) {\r\n\t\t\t\t\t\t\t\tdatastr = datastr + \"<ITEM name=\\\"\" + this.columns[i].getAttribute(\"name\") + \"\\\">\"\r\n\t\t\t\t\t\t\t\tdatastr = datastr + \"<VALUES\";\r\n\t\t\t\t\t\t\t\tvar existNullValue = false;\r\n\t\t\t\t\t\t\t\tvar stringValues = \"\";\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tvar prevValues = [];\r\n\t\t\t\t\t\t\t\tfor (var iCV = 0; iCV < self.allRowsPivot.length; iCV++) {\r\n\t\t\t\t\t\t\t\t\tif ((prevValues.indexOf(self.allRowsPivot[iCV][i]) === -1) && self.filterOK(self.allRowsPivot[iCV])) {\r\n\t\t\t\t\t\t\t\t\t\tprevValues = prevValues.concat(self.allRowsPivot[iCV][i])\r\n\t\t\t\t\t\t\t\t\t\tif (self.allRowsPivot[iCV][i] != \"#NuN#\"){\r\n\t\t\t\t\t\t\t\t\t\t\tstringValues = stringValues + \"<VALUE>\" + self.cleanValueForNull(self.allRowsPivot[iCV][i]) + \"</VALUE>\";\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\texistNullValue = true\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tif (existNullValue){\r\n\t\t\t\t\t\t\t\t\tdatastr = datastr + \" Null=\\\"true\\\"\"\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tdatastr = datastr + \">\" + stringValues \r\n\t\t\t\t\t\t\t\tdatastr = datastr + \"</VALUES>\";\r\n\t\t\t\t\t\t\t\tdatastr = datastr + \"</ITEM>\";\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t//add hide values\r\n\t\t\t\t\t\t\tfor (var i = 0; i < self.HideDataFilds.length; i++) {\r\n\t\t\t\t\t\t\t\tdatastr = datastr + \"<ITEM name=\\\"\" + self.OrderFildsHidden[i] + \"\\\">\"\r\n\t\t\t\t\t\t\t\tdatastr = datastr + \"<VALUES\";\r\n\t\t\t\t\t\t\t\tvar existNullValue = false;\r\n\t\t\t\t\t\t\t\tvar stringValues = \"\";\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tvar prevValues = [];\r\n\t\t\t\t\t\t\t\tfor (var iCV = 0; iCV < self.allFullRowsPivot.length; iCV++) {\r\n\t\t\t\t\t\t\t\t\tif ((prevValues.indexOf(self.allFullRowsPivot[iCV][i + this.columns.length + measures.length]) === -1) && self.filterOK(self.allFullRowsPivot[iCV])) {\r\n\t\t\t\t\t\t\t\t\t\tprevValues = prevValues.concat(self.allFullRowsPivot[iCV][i + this.columns.length + measures.length])\r\n\t\t\t\t\t\t\t\t\t\tif (self.allFullRowsPivot[iCV][i + this.columns.length + measures.length] != \"#NuN#\"){\r\n\t\t\t\t\t\t\t\t\t\t\tstringValues = stringValues + \"<VALUE>\" + self.cleanValueForNull(self.allFullRowsPivot[iCV][i + this.columns.length + measures.length]) + \"</VALUE>\";\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\texistNullValue = true\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (existNullValue){\r\n\t\t\t\t\t\t\t\t\tdatastr = datastr + \" Null=\\\"true\\\"\"\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tdatastr = datastr + \">\" + stringValues \r\n\t\t\t\t\t\t\t\tdatastr = datastr + \"</VALUES>\";\r\n\t\t\t\t\t\t\t\tdatastr = datastr + \"</ITEM>\";\r\n\t\t\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\t\t\tfor (var i = 0; i < measures.length; i++) {\r\n\t\t\t\t\t\t\t\tdatastr = datastr + \"<ITEM name=\\\"\" + measures[i].getAttribute(\"name\") + \"\\\">\"\r\n\t\t\t\t\t\t\t\tdatastr = datastr + \"<VALUES\";\r\n\t\t\t\t\t\t\t\tvar existNullValue = false;\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tvar stringValues = \"\";\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tvar prevValues = [];\r\n\t\t\t\t\t\t\t\tfor (var iCV = 0; iCV < self.allRowsPivot.length; iCV++) {\r\n\t\t\t\t\t\t\t\t\tif ((prevValues.indexOf(self.allRowsPivot[iCV][i + this.columns.length]) === -1) && self.filterOK(self.allRowsPivot[iCV])) {\r\n\t\t\t\t\t\t\t\t\t\tprevValues = prevValues.concat(self.allRowsPivot[iCV][i + this.columns.length])\r\n\t\t\t\t\t\t\t\t\t\tif (self.allRowsPivot[iCV][i + this.columns.length] != \"#NuN#\"){\r\n\t\t\t\t\t\t\t\t\t\t\tstringValues = stringValues + \"<VALUE>\" + self.cleanValueForNull(self.allRowsPivot[iCV][i + this.columns.length]) + \"</VALUE>\";\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\texistNullValue = true\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tif (existNullValue){\r\n\t\t\t\t\t\t\t\t\tdatastr = datastr + \" Null=\\\"true\\\"\"\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tdatastr = datastr + \">\" + stringValues \r\n\t\t\t\t\t\t\t\tdatastr = datastr + \"</VALUES>\";\r\n\t\t\t\t\t\t\t\tdatastr = datastr + \"</ITEM>\";\r\n\t\t\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\t\t} else if (item[0] === 'PtrTotals') {\r\n\t\t\t\t\t\t\tvar row = item[2]\r\n\t\t\t\t\t\t\tvar colPos = item[3]\r\n\t\t\t\t\t\t\tif (colPos > -1) {\r\n\t\t\t\t\t\t\t\tvar numCol = self.pageData.columnsHeaders[colPos]\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tisColumnDimensionValue = (item[4] == \"columns\")\r\n\t\t\t\t\t\t\tvar rownumber = item[5]\r\n\t\t\t\t\t\t\tvar pseudoRow = [];\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tfor (var i = 0; i < self.pageData.dataFields.length; i++) {\r\n\t\t\t\t\t\t\t\tpseudoRow[i] = undefined;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (!isColumnDimensionValue) {\r\n\t\t\t\t\t\t\t\tfor (var i = 0; i < row.headers.length; i++) {\r\n\t\t\t\t\t\t\t\t\tvar pos = self.pageData.dataFields.indexOf(row.headers[i].dataField)\r\n\t\t\t\t\t\t\t\t\tif ((row.headers[i] != undefined) && (row.headers[i].value != undefined)) {\r\n\t\t\t\t\t\t\t\t\t\tpseudoRow[pos] = row.headers[i].value\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} \r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (colPos > -1) {\r\n\t\t\t\t\t\t\t\tfor (var i = 0; i < numCol.subHeaders.length; i++) {\r\n\t\t\t\t\t\t\t\t\tif (numCol.subHeaders[i] != undefined) {\r\n\t\t\t\t\t\t\t\t\t\tif ((isColumnDimensionValue) && (rownumber < i)) break;\r\n\t\t\t\t\t\t\t\t\t\tvar pos = self.pageData.dataFields.indexOf(numCol.subHeaders[i].dataField)\r\n\t\t\t\t\t\t\t\t\t\tif (numCol.subHeaders[i].value != undefined) {\r\n\t\t\t\t\t\t\t\t\t\t\tpseudoRow[pos] = numCol.subHeaders[i].value\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tvar filtRows = []; var filtFullRows = [];\r\n\t\t\t\t\t\t\tfor (var i = 0; i < self.allRowsPivot.length; i++) {\t\t\t//get the list of filtered rows involve in this sum\r\n\t\t\t\t\t\t\t\tif (self.filterOK(self.allRowsPivot[i])) {\r\n\t\t\t\t\t\t\t\t\tif (self.isClickedRowMeasure(pseudoRow, value, self.allRowsPivot[i])) {\r\n\t\t\t\t\t\t\t\t\t\tfiltRows.push(self.allRowsPivot[i]);\r\n\t\t\t\t\t\t\t\t\t\tif (self.HideDataFilds.length > 0) {\r\n\t\t\t\t\t\t\t\t\t\t\tfiltFullRows.push(self.allFullRowsPivot[i])\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tfor (var i = 0; i < this.columns.length; i++) {\r\n\t\t\t\t\t\t\t\tdatastr = datastr + \"<ITEM name=\\\"\" + this.columns[i].getAttribute(\"name\") + \"\\\">\"\r\n\t\t\t\t\t\t\t\tdatastr = datastr + \"<VALUES\";\r\n\t\t\t\t\t\t\t\tvar existNullValue = false;\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tvar stringValues = \"\";\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tvar prevValues = [];\r\n\t\t\t\t\t\t\t\tfor (var j = 0; j < filtRows.length; j++) {\r\n\t\t\t\t\t\t\t\t\tif (prevValues.indexOf(filtRows[j][i]) === -1) {\r\n\t\t\t\t\t\t\t\t\t\tprevValues = prevValues.concat(filtRows[j][i])\r\n\t\t\t\t\t\t\t\t\t\tif (filtRows[j][i] != \"#NuN#\"){\r\n\t\t\t\t\t\t\t\t\t\t\tstringValues = stringValues + \"<VALUE>\" + self.cleanValueForNull(filtRows[j][i]) + \"</VALUE>\";\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\texistNullValue = true\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tif (existNullValue){\r\n\t\t\t\t\t\t\t\t\tdatastr = datastr + \" Null=\\\"true\\\"\"\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tdatastr = datastr + \">\" + stringValues \r\n\t\t\t\t\t\t\t\tdatastr = datastr + \"</VALUES>\";\r\n\t\t\t\t\t\t\t\tdatastr = datastr + \"</ITEM>\";\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t//add hide values\r\n\t\t\t\t\t\t\tfor (var i = 0; i < self.HideDataFilds.length; i++) {\r\n\t\t\t\t\t\t\t\tdatastr = datastr + \"<ITEM name=\\\"\" + self.OrderFildsHidden[i] + \"\\\">\"\r\n\t\t\t\t\t\t\t\tdatastr = datastr + \"<VALUES\";\r\n\t\t\t\t\t\t\t\tvar existNullValue = false;\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tvar stringValues = \"\";\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tvar prevValues = [];\r\n\t\t\t\t\t\t\t\tfor (var j = 0; j < filtRows.length; j++) {\r\n\t\t\t\t\t\t\t\t\tif (prevValues.indexOf(filtRows[j][i]) === -1) {\r\n\t\t\t\t\t\t\t\t\t\tprevValues = prevValues.concat(filtRows[j][i])\r\n\t\t\t\t\t\t\t\t\t\tif (filtFullRows[j][i + this.columns.length + measures.length] != \"#NuN#\"){\r\n\t\t\t\t\t\t\t\t\t\t\tstringValues = stringValues + \"<VALUE>\" + self.cleanValueForNull(filtFullRows[j][i + this.columns.length + measures.length]) + \"</VALUE>\";\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\texistNullValue = true\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tif (existNullValue){\r\n\t\t\t\t\t\t\t\t\tdatastr = datastr + \" Null=\\\"true\\\"\"\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tdatastr = datastr + \">\" + stringValues \r\n\t\t\t\t\t\t\t\tdatastr = datastr + \"</VALUES>\";\r\n\t\t\t\t\t\t\t\tdatastr = datastr + \"</ITEM>\";\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tfor (var i = 0; i < measures.length; i++) {\r\n\t\t\t\t\t\t\t\tdatastr = datastr + \"<ITEM name=\\\"\" + measures[i].getAttribute(\"name\") + \"\\\">\"\r\n\t\t\t\t\t\t\t\tdatastr = datastr + \"<VALUES\";\r\n\t\t\t\t\t\t\t\tvar existNullValue = false;\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tvar stringValues = \"\";\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tvar prevValues = [];\r\n\t\t\t\t\t\t\t\tfor (var iCV = 0; iCV < filtRows.length; iCV++) {\r\n\t\t\t\t\t\t\t\t\tif (prevValues.indexOf(filtRows[iCV][i + this.columns.length]) === -1) {\r\n\t\t\t\t\t\t\t\t\t\tprevValues = prevValues.concat(filtRows[iCV][i + this.columns.length])\r\n\t\t\t\t\t\t\t\t\t\tif (filtRows[iCV][i + this.columns.length] != \"#NuN#\"){\r\n\t\t\t\t\t\t\t\t\t\t\tstringValues = stringValues + \"<VALUE>\" + self.cleanValueForNull(filtRows[iCV][i + this.columns.length]) + \"</VALUE>\";\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\texistNullValue = true\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tif (existNullValue){\r\n\t\t\t\t\t\t\t\t\tdatastr = datastr + \" Null=\\\"true\\\"\"\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tdatastr = datastr + \">\" + stringValues \r\n\t\t\t\t\t\t\t\tdatastr = datastr + \"</VALUES>\";\r\n\t\t\t\t\t\t\t\tdatastr = datastr + \"</ITEM>\";\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\r\n\t\t\t} catch (Error) {\r\n\t\t\t\tdatastr = previuosDat;\r\n\t\t\t}\r\n\t\t\tdatastr = datastr + \"</RELATED>\";\r\n\t\t\tdatastr = datastr + \"<FILTERS>\";\r\n\t\t\tpreviuosDat = datastr;\r\n\t\t\ttry {\r\n\t\t\t\tfor (var i = 0; i < self.filterIndexes.length; i++) {\r\n\t\t\t\t\tdatastr = datastr + \"<ITEM name=\\\"\" + this.columns[self.filterIndexes[i]].getAttribute(\"name\") + \"\\\" displayName=\\\"\" + this.columns[self.filterIndexes[i]].getAttribute(\"displayName\") + \"\\\">\";\r\n\t\t\t\t\tdatastr = datastr + \"<VALUES>\"\r\n\t\t\t\t\tdatastr = datastr + \"<VALUE>\"\r\n\t\t\t\t\tif (self.filterDiv.selects[i].value === \"[all]\") {\r\n\t\t\t\t\t\tdatastr = datastr + self.translations.GXPL_QViewerJSAllOption;//gx.getMessage(\"GXPL_QViewerJSAllOption\");//\"\\\"ALL\\\"\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tdatastr = datastr + self.cleanValueForNull(self.filterDiv.selects[i].value);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdatastr = datastr + \"</VALUE>\"\r\n\t\t\t\t\tdatastr = datastr + \"</VALUES>\"\r\n\t\t\t\t\tdatastr = datastr + '</ITEM>';\r\n\t\t\t\t}\r\n\t\t\t} catch (Error) {\r\n\t\t\t\tdatastr = previuosDat;\r\n\t\t\t}\r\n\t\t\tdatastr = datastr + \"</FILTERS>\";\r\n\t\t\tdatastr = datastr + \"</CONTEXT>\";\r\n\t\t\tdatastr = datastr + \"</DATA>\"\r\n\r\n\t\t\t\r\n\t\t\tself.fireOnItemClickEvent(self.QueryViewerCollection[IdForQueryViewerCollection], datastr)\r\n\r\n\t\t}\r\n\r\n\t\tthis.fireOnItemClickEvent = function(query, datastr){\r\n\t\t\tsetTimeout( function() {\r\n\t\t\t\tvar paramobj = {\"QueryViewer\": query, \"Data\": datastr, \"QueryviewerId\": self.IdForQueryViewerCollection};\r\n\t\t\t\tvar evt = document.createEvent(\"Events\")\r\n\t\t\t\tevt.initEvent(\"PivotTableOnItemClickEvent\", true, true);\r\n\t\t\t\tevt.parameter = paramobj;\r\n\t\t\t\tdocument.dispatchEvent(evt);\r\n\t\t\t}, 0)\r\n\t\t}\r\n\r\n\t\tthis.SelectNodes = function(SelectedValue, SelectedType, SelectedMorDNumber, SelectedItem, refresh, selectedItemNumber, conditions) {\r\n\r\n\t\t\tvar found = false;\r\n\r\n\t\t\tvar dataField = (SelectedType == \"DIMENSION\") ? self.columns[SelectedMorDNumber].getAttribute(\"dataField\") : measures[SelectedMorDNumber].getAttribute(\"dataField\");\r\n\r\n\t\t\tfor (var i = 0; i < jQuery(\"#\" + self.controlName + \"_\" + self.query + \" tr\").length && (!found); i++) {//search selected cell in every row\r\n\t\t\t\tvar tRow = jQuery(\"#\" + self.controlName + \"_\" + self.query + \" tr\")[i];\r\n\t\t\t\tfor (var j = 0; j < tRow.children.length && (!found); j++) {\r\n\t\t\t\t\tvar value = jQuery(tRow.children[j]).data('itemValue');\r\n\t\t\t\t\tvar type = jQuery(tRow.children[j]).data('typeMorD');\r\n\t\t\t\t\tvar number = jQuery(tRow.children[j]).data('numberMorD');\r\n\t\t\t\t\tvar item = jQuery(tRow.children[j]).data('itemInfo');\r\n\r\n\t\t\t\t\tif (item && (SelectedMorDNumber == number) && (SelectedType == type)) {\r\n\r\n\t\t\t\t\t\tif ((SelectedItem == \"GrandTotal\") && (item == \"GrandTotal\")) {\r\n\r\n\t\t\t\t\t\t\tif (OAT.IsNodeSelected(tRow.children[j])) {\r\n\t\t\t\t\t\t\t\tif (!refresh) {\r\n\t\t\t\t\t\t\t\t\tOAT.ClearSelectedNodes(jQuery(\"#\" + self.controlName + \"_\" + self.query));\r\n\t\t\t\t\t\t\t\t\tself.selection.SelectedNode = [];\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\t\tif (!refresh) {\r\n\t\t\t\t\t\t\t\t\tOAT.SetSelectedNodeBackgroundColor(tRow.children[j], self.selection.Color, jQuery(\"#\" + self.controlName + \"_\" + self.query))\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tOAT.SetNodeBackgroundColor(tRow.children[j], self.selection.Color)\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\tif (!refresh)\r\n\t\t\t\t\t\t\t\t\tself.selection.SelectedNode.push( {\r\n\t\t\t\t\t\t\t\t\t\tvalue : SelectedValue,\r\n\t\t\t\t\t\t\t\t\t\tdataField : dataField,\r\n\t\t\t\t\t\t\t\t\t\ttype : SelectedType,\r\n\t\t\t\t\t\t\t\t\t\trowData : [\"GrandTotal\"],\r\n\t\t\t\t\t\t\t\t\t\tclicked : true\r\n\t\t\t\t\t\t\t\t\t} );\r\n\r\n\t\t\t\t\t\t\t\tif (self.selection.EntireLine) {\r\n\t\t\t\t\t\t\t\t\t//select only data column\r\n\r\n\t\t\t\t\t\t\t\t\tselectedCellOffset = tRow.children[j].offsetLeft\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tvar firstRow = (self.colConditions.length > 0) ? self.colConditions.length + 1 : 0;\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tfor (var prevRow = firstRow+1; prevRow < jQuery(\"#\" + self.controlName + \"_\" + self.query + \" tr\").length; prevRow++) {\r\n\t\t\t\t\t\t\t\t\t\tvar row = jQuery(\"#\" + self.controlName + \"_\" + self.query + \" tr\")[prevRow];\r\n\t\t\t\t\t\t\t\t\t\tOAT.SelectAllRow(row, self.selection.Color)\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t} else if ((SelectedItem[0] == \"PtrTotals\") && (item != \"GrandTotal\") && (item.length > 0) && (SelectedType == \"MEASURE\")) {\r\n\t\t\t\t\t\t\tvar sameRow = ((SelectedItem[2].headers.length == item[2].headers.length) && (SelectedItem[3] == item[3]));\r\n\t\t\t\t\t\t\tif (sameRow) {\r\n\t\t\t\t\t\t\t\tfor (var h = 0; h < SelectedItem[2].headers.length; h++) {\r\n\t\t\t\t\t\t\t\t\tif (SelectedItem[2].headers[h].value != item[2].headers[h].value) {\r\n\t\t\t\t\t\t\t\t\t\tsameRow = false;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif (sameRow) {\r\n\t\t\t\t\t\t\t\tfound = true;\r\n\t\t\t\t\t\t\t\tif (OAT.IsNodeSelected(tRow.children[j])) {\r\n\t\t\t\t\t\t\t\t\tif (!refresh) {\r\n\t\t\t\t\t\t\t\t\t\tOAT.ClearSelectedNodes(jQuery(\"#\" + self.controlName + \"_\" + self.query));\r\n\t\t\t\t\t\t\t\t\t\tself.selection.SelectedNode = [];\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\t\t\tif (!refresh) {\r\n\t\t\t\t\t\t\t\t\t\tOAT.SetSelectedNodeBackgroundColor(tRow.children[j], self.selection.Color, jQuery(\"#\" + self.controlName + \"_\" + self.query))\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tOAT.SetNodeBackgroundColor(tRow.children[j], self.selection.Color)\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\tif (!refresh)\r\n\t\t\t\t\t\t\t\t\t\tself.selection.SelectedNode.push( {\r\n\t\t\t\t\t\t\t\t\t\t\tvalue : SelectedValue,\r\n\t\t\t\t\t\t\t\t\t\t\tdataField : dataField,\r\n\t\t\t\t\t\t\t\t\t\t\ttype : SelectedType,\r\n\t\t\t\t\t\t\t\t\t\t\trowData : [SelectedItem],\r\n\t\t\t\t\t\t\t\t\t\t\tclicked : true\r\n\t\t\t\t\t\t\t\t\t\t} );\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tif (self.selection.EntireLine) {\r\n\t\t\t\t\t\t\t\t\t\t//search first dimension subtotal/total\r\n\t\t\t\t\t\t\t\t\t\tvar foundTotal = false;\r\n\t\t\t\t\t\t\t\t\t\tfor (var posTotal = 0; posTotal < tRow.children.length && (!foundTotal); posTotal++) {\r\n\t\t\t\t\t\t\t\t\t\t\tvar typeTotal = jQuery(tRow.children[posTotal]).data('typeMorD');\r\n\t\t\t\t\t\t\t\t\t\t\tvar itemTotal = jQuery(tRow.children[posTotal]).data('itemInfo');\r\n\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\tif ((typeTotal == \"DIMENSION\") && (itemTotal[0]!=undefined) && (itemTotal[0] == \"PtrTotals\"))\r\n\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t\tOAT.SetNodeBackgroundColor(tRow.children[posTotal], self.selection.Color)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t\t//select items from the same row\r\n\t\t\t\t\t\t\t\t\t\t\t\tOAT.SelectAllRow(tRow, self.selection.Color, posTotal)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t\tselectedCellOffset = tRow.children[posTotal].offsetLeft\r\n\t\t\t\t\t\t\t\t\t\t\t\tselectedRowOffset = tRow.children[0].offsetLeft\r\n\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t\tvar exit = false;\r\n\t\t\t\t\t\t\t\t\t\t\t\tvar lastRow = -1;\r\n\t\t\t\t\t\t\t\t\t\t\t\tvar firstRow = (self.colConditions.length > 0) ? self.colConditions.length + 1 : 0;\r\n\t\t\t\t\t\t\t\t\t\t\t\tfor (var prevRow = i - 1; (prevRow > firstRow) && !exit; prevRow--) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvar row = jQuery(\"#\" + self.controlName + \"_\" + self.query + \" tr\")[prevRow];\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvar iterRowOffset = row.children[0].offsetLeft\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (jQuery(row.children[0]).hasClass(\"h2subtitle\")) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (iterRowOffset <= selectedRowOffset) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\texit = true;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlastRow = prevRow;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (!exit) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tOAT.SelectAllRow(row, self.selection.Color)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t\tfor (var prevRow = lastRow; prevRow >= 0; prevRow--) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvar topRow = jQuery(\"#\" + self.controlName + \"_\" + self.query + \" tr\")[prevRow];\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (!jQuery(topRow.children[0]).hasClass(\"h2subtitle\")) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfor (var iterTopRow = 0; iterTopRow < topRow.children.length; iterTopRow++) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar rowSpan = parseInt(jQuery(topRow.children[iterTopRow]).attr(\"rowspan\"));\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (prevRow + rowSpan > i) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tOAT.SetNodeBackgroundColor(topRow.children[iterTopRow], self.selection.Color)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t}\t\r\n\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else if (self.sameValue(SelectedValue, value, SelectedType, SelectedMorDNumber, SelectedItem)) {\r\n\r\n\t\t\t\t\t\t\tif ((SelectedItem.cell != undefined) && (SelectedItem.cell == item.cell)) {\r\n\t\t\t\t\t\t\t\tif (SelectedItem.row != undefined && item.row != undefined) {\r\n\t\t\t\t\t\t\t\t\tvar sameRow = (SelectedItem.row.headers.length == item.row.headers.length);\r\n\t\t\t\t\t\t\t\t\tfor (var h = 0; h < SelectedItem.row.headers.length; h++) {\r\n\t\t\t\t\t\t\t\t\t\tif (SelectedItem.row.headers[h].value != item.row.headers[h].value) {\r\n\t\t\t\t\t\t\t\t\t\t\tsameRow = false;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tif (sameRow) {\r\n\t\t\t\t\t\t\t\t\t\tfound = true;\r\n\t\t\t\t\t\t\t\t\t\tif (OAT.IsNodeSelected(tRow.children[j])) {\r\n\t\t\t\t\t\t\t\t\t\t\tif (!refresh) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tOAT.ClearSelectedNodes(jQuery(\"#\" + self.controlName + \"_\" + self.query));\r\n\t\t\t\t\t\t\t\t\t\t\t\tself.selection.SelectedNode = [];\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\t\t\t\t\tif (!refresh) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tOAT.SetSelectedNodeBackgroundColor(tRow.children[j], self.selection.Color, jQuery(\"#\" + self.controlName + \"_\" + self.query))\r\n\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\tOAT.SetNodeBackgroundColor(tRow.children[j], self.selection.Color)\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\tif (!refresh)\r\n\t\t\t\t\t\t\t\t\t\t\t\tself.selection.SelectedNode.push ({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue : SelectedValue,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tdataField : dataField,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype : SelectedType,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\trowData : [self.createDataRowFromItem(item, SelectedType)],\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclicked : true\r\n\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\t\t\t\t\tif (self.selection.EntireLine) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t//select items from the same row\r\n\t\t\t\t\t\t\t\t\t\t\t\tOAT.SelectAllRow(tRow, self.selection.Color, j);\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t//search previous rows\r\n\t\t\t\t\t\t\t\t\t\t\t\tfor (var prevRow = i - 1; prevRow >= 0; prevRow--) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvar topRow = jQuery(\"#\" + self.controlName + \"_\" + self.query + \" tr\")[prevRow];\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tfor (var iterTopRow = 0; iterTopRow < topRow.children.length; iterTopRow++) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar rowSpan = parseInt(jQuery(topRow.children[iterTopRow]).attr(\"rowspan\"));\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (prevRow + rowSpan > i) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tOAT.SetNodeBackgroundColor(topRow.children[iterTopRow], self.selection.Color)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t//search bellow rows\r\n\t\t\t\t\t\t\t\t\t\t\t\tvar selectedItemRowSpam = parseInt(jQuery(tRow.children[j]).attr(\"rowspan\"));\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (selectedItemRowSpam >= 1) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tfor (var postRow = i + 1; postRow < i + selectedItemRowSpam; postRow++) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar bellowRow = jQuery(\"#\" + self.controlName + \"_\" + self.query + \" tr\")[postRow];\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tOAT.SelectAllRow(bellowRow, self.selection.Color)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t//search for subtotals of selected item\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvar postRow = i + selectedItemRowSpam;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvar bellowRow = jQuery(\"#\" + self.controlName + \"_\" + self.query + \" tr\")[postRow];\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tif ((bellowRow != undefined) && jQuery(bellowRow.children[0]).hasClass(\"h2subtitle\") && !jQuery(bellowRow.children[0]).hasClass(\"grandtotaltitle\")) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tselectedCellOffset = tRow.children[j].offsetLeft\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\trowOffset = bellowRow.children[0].offsetLeft\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (rowOffset == selectedCellOffset) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tOAT.SelectAllRow(bellowRow, self.selection.Color)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\tif ((self.colConditions.length > 0) && (SelectedType == \"MEASURE\")) {\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tselectedCellOffset = tRow.children[j].offsetLeft\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tfor (var prevRow = 1; prevRow < jQuery(\"#\" + self.controlName + \"_\" + self.query + \" tr\").length; prevRow++) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (prevRow != i) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar exit = false\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar row = jQuery(\"#\" + self.controlName + \"_\" + self.query + \" tr\")[prevRow];\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfor (var iterRow = 0; iterRow < row.children.length && !exit; iterRow++) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar offsetIter = row.children[iterRow].offsetLeft + row.children[iterRow].offsetWidth\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (offsetIter > selectedCellOffset + 1){\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\texit = true;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tOAT.SetNodeBackgroundColor(row.children[iterRow], self.selection.Color)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else if ((SelectedItem[0] == \"PtrTotals\") && (SelectedItem[1] == item[1]) && (SelectedType == \"DIMENSION\")) {\r\n\t\t\t\t\t\t\t\tvar sameRow = ((SelectedItem[2].headers.length == item[2].headers.length) && (SelectedItem[3] == item[3]));\r\n\t\t\t\t\t\t\t\tif (sameRow) {\r\n\t\t\t\t\t\t\t\t\tfor (var h = 0; h < SelectedItem[2].headers.length; h++) {\r\n\t\t\t\t\t\t\t\t\t\tif (SelectedItem[2].headers[h].value != item[2].headers[h].value) {\r\n\t\t\t\t\t\t\t\t\t\t\tsameRow = false;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\tif (sameRow) {\r\n\t\t\t\t\t\t\t\t\tfound = true;\r\n\t\t\t\t\t\t\t\t\tif (OAT.IsNodeSelected(tRow.children[j])) {\r\n\t\t\t\t\t\t\t\t\t\tif (!refresh) {\r\n\t\t\t\t\t\t\t\t\t\t\tOAT.ClearSelectedNodes(jQuery(\"#\" + self.controlName + \"_\" + self.query));\r\n\t\t\t\t\t\t\t\t\t\t\tself.selection.SelectedNode = [];\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\t\t\t\tOAT.ClearSelectedNodes(jQuery(\"#\" + self.controlName + \"_\" + self.query));\r\n\r\n\t\t\t\t\t\t\t\t\t\tif (!refresh) {\r\n\t\t\t\t\t\t\t\t\t\t\tOAT.SetSelectedNodeBackgroundColor(tRow.children[j], self.selection.Color, jQuery(\"#\" + self.controlName + \"_\" + self.query))\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tOAT.SetNodeBackgroundColor(tRow.children[j], self.selection.Color)\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\tif (!refresh)\r\n\t\t\t\t\t\t\t\t\t\t\tself.selection.SelectedNode.push({\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalue : SelectedValue,\r\n\t\t\t\t\t\t\t\t\t\t\t\tdataField : dataField,\r\n\t\t\t\t\t\t\t\t\t\t\t\ttype : SelectedType,\r\n\t\t\t\t\t\t\t\t\t\t\t\trowData : [SelectedItem],\r\n\t\t\t\t\t\t\t\t\t\t\t\tclicked : true\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\t\t\t\tif (self.selection.EntireLine) {\r\n\t\t\t\t\t\t\t\t\t\t\t//select items from the same row\r\n\t\t\t\t\t\t\t\t\t\t\tOAT.SelectAllRow(tRow, self.selection.Color, j)\r\n\r\n\t\t\t\t\t\t\t\t\t\t\tselectedCellOffset = tRow.children[j].offsetLeft\r\n\t\t\t\t\t\t\t\t\t\t\tselectedRowOffset = tRow.children[0].offsetLeft\r\n\r\n\t\t\t\t\t\t\t\t\t\t\tvar exit = false;\r\n\t\t\t\t\t\t\t\t\t\t\tvar lastRow = -1;\r\n\t\t\t\t\t\t\t\t\t\t\tvar firstRow = (self.colConditions.length > 0) ? self.colConditions.length + 1 : 0;\r\n\t\t\t\t\t\t\t\t\t\t\tfor (var prevRow = i - 1; (prevRow > firstRow) && !exit; prevRow--) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tvar row = jQuery(\"#\" + self.controlName + \"_\" + self.query + \" tr\")[prevRow];\r\n\t\t\t\t\t\t\t\t\t\t\t\tvar iterRowOffset = row.children[0].offsetLeft\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (jQuery(row.children[0]).hasClass(\"h2subtitle\")) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (iterRowOffset <= selectedRowOffset) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\texit = true;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlastRow = prevRow;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (!exit) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tOAT.SelectAllRow(row, self.selection.Color)\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\tfor (var prevRow = lastRow; prevRow >= 0; prevRow--) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tvar topRow = jQuery(\"#\" + self.controlName + \"_\" + self.query + \" tr\")[prevRow];\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (!jQuery(topRow.children[0]).hasClass(\"h2subtitle\")) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tfor (var iterTopRow = 0; iterTopRow < topRow.children.length; iterTopRow++) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar rowSpan = parseInt(jQuery(topRow.children[iterTopRow]).attr(\"rowspan\"));\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (prevRow + rowSpan > i) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tOAT.SetNodeBackgroundColor(topRow.children[iterTopRow], self.selection.Color)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else if ((SelectedItem == \"EventSelection\")) {\r\n\r\n\t\t\t\t\t\t\t\tif (self.sameValue(SelectedValue, value, SelectedType, SelectedMorDNumber, SelectedItem)) {\r\n\r\n\t\t\t\t\t\t\t\t\tif (!jQuery(tRow.children[0]).hasClass(\"h2subtitle\") && !jQuery(tRow.children[j]).hasClass(\"gtotal\") && !jQuery(tRow.children[j]).hasClass(\"subtotal\")) {\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\tif (self.checkConditions(conditions, item)) {\r\n\r\n\t\t\t\t\t\t\t\t\t\t\tOAT.SetNodeBackgroundColor(tRow.children[j], self.selection.Color, jQuery(\"#\" + self.controlName + \"_\" + self.query))\r\n\r\n\t\t\t\t\t\t\t\t\t\t\tif (self.selection.SelectedNode.length <= selectedItemNumber) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tself.selection.SelectedNode.push({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue : SelectedValue,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tdataField : dataField,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype : SelectedType,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\trowData : [self.createDataRowFromItem(item, SelectedType)],\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclicked : false\r\n\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\tself.selection.SelectedNode[selectedItemNumber].rowData.push(self.createDataRowFromItem(item, SelectedType));\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\tif (self.selection.EntireLine) {\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\tOAT.SelectAllRow(tRow, self.selection.Color, j)\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\tfor (var pos = i - 1; pos > 0; pos--) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvar iterRow = jQuery(\"#\" + self.controlName + \"_\" + self.query + \" tr\")[pos];\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tfor (var cell = 0; cell < iterRow.children.length; cell++) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar rowSpan = parseInt(jQuery(iterRow.children[cell]).attr(\"rowspan\"));\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (pos + rowSpan > i) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tOAT.SetNodeBackgroundColor(iterRow.children[cell], self.selection.Color)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\tvar itemRowSpan = parseInt(jQuery(tRow.children[j]).attr(\"rowspan\"));\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (itemRowSpan >= 1) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tfor (var pos = i + 1; pos < i + itemRowSpan; pos++) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tOAT.SelectAllRow(jQuery(\"#\" + self.controlName + \"_\" + self.query + \" tr\")[pos], self.selection.Color)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvar pos = i + itemRowSpan;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvar iterRow = jQuery(\"#\" + self.controlName + \"_\" + self.query + \" tr\")[pos];\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tif ((iterRow != undefined) && jQuery(iterRow.children[0]).hasClass(\"h2subtitle\") && !jQuery(iterRow.children[0]).hasClass(\"grandtotaltitle\")) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tselectedCellOffset = tRow.children[j].offsetLeft\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\trowOffset = iterRow.children[0].offsetLeft\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (rowOffset == selectedCellOffset) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tOAT.SelectAllRow(iterRow, self.selection.Color)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\tif ((self.colConditions.length > 0) && (SelectedType == \"MEASURE\")) {\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tselectedCellOffset = tRow.children[j].offsetLeft\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tfor (var prevRow = 1; prevRow < jQuery(\"#\" + self.controlName + \"_\" + self.query + \" tr\").length; prevRow++) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (prevRow != i) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar exit = false\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar row = jQuery(\"#\" + self.controlName + \"_\" + self.query + \" tr\")[prevRow];\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfor (var iterRow = 0; iterRow < row.children.length && !exit; iterRow++) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar offsetIter = row.children[iterRow].offsetLeft + row.children[iterRow].offsetWidth\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (offsetIter > selectedCellOffset) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\texit = true;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tOAT.SetNodeBackgroundColor(row.children[iterRow], self.selection.Color)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t\r\n\t\t\r\n\t\tthis.getRowInitialShift = function(table, rowNumber){\r\n\t\t\tvar initialShift = 0;\r\n\t\t\t\r\n\t\t\tfor(var prevRow = rowNumber-1; prevRow >=0; prevRow--)\r\n\t\t\t{\r\n\t\t\t\t\tvar topRow = table[prevRow];\r\n\t\t\t\t\tfor (var iterTopRow = 0; iterTopRow < topRow.children.length; iterTopRow++){\r\n\t\t\t\t\t\tvar rowSpan = parseInt(jQuery(topRow.children[iterTopRow]).attr(\"rowspan\"));\r\n\t\t\t\t\t\tif (prevRow + rowSpan > rowNumber) {\r\n\t\t\t\t\t\t\tinitialShift=initialShift+1\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\treturn  initialShift;\r\n\t\t}\r\n\t\t\r\n\t\tthis.getCellPositionSpanWithSpans = function(table, rowNumber, posWithoutSpan)\r\n\t\t{\r\n\t\t\t\r\n\t\t\tvar row = table[rowNumber];\r\n\t\t\tvar position = 0;\r\n\t\t\tvar posWithSpan = posWithoutSpan;\r\n\t\t\t\r\n\t\t\tvar cellPos = 0;\r\n\t\t\tfor (var iterTopRow = 0; iterTopRow < row.children.length && position < posWithoutSpan; iterTopRow++)\r\n\t\t\t{\r\n\t\t\t\tvar colspan\t= parseInt(jQuery(row.children[iterTopRow]).attr(\"colspan\"));\r\n\t\t\t\tif (colspan > 1) {\r\n\t\t\t\t\t(posWithSpan < colspan) ? (posWithSpan = posWithSpan - (colspan)) : (posWithSpan = posWithSpan - (colspan),cellPos = cellPos + 1);\r\n\t\t\t\t\tposition = position + colspan; \r\n\t\t\t\t} else {\r\n\t\t\t\t\tposition = position + 1\r\n\t\t\t\t\tcellPos = cellPos + 1; \r\n\t\t\t\t}\r\n\t\t\t\t\t  \r\n\t\t\t}\r\n\t\t\treturn cellPos;\r\n\t\t}\r\n\t\t\r\n\t\tthis.RedrawSelectedNode = function() {\r\n\t\t\tif (self.selection.SelectedNode) {\r\n\r\n\t\t\t\tfor (var s = 0; s < self.selection.SelectedNode.length; s++) {\r\n\t\t\t\t\tvar SelectedMorDNumber;\r\n\t\t\t\t\tif (self.selection.SelectedNode[s].type == \"DIMENSION\") {\r\n\t\t\t\t\t\tfor (var i = 0; i < self.columns.length; i++) {\r\n\t\t\t\t\t\t\tif (self.selection.SelectedNode[s].dataField == self.columns[i].getAttribute(\"dataField\")) {\r\n\t\t\t\t\t\t\t\tSelectedMorDNumber = i;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tfor (var i = 0; i < measures.length; i++) {\r\n\t\t\t\t\t\t\tif (self.selection.SelectedNode[s].dataField == measures[i].getAttribute(\"dataField\")) {\r\n\t\t\t\t\t\t\t\tSelectedMorDNumber = i;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (self.selection.SelectedNode[s].rowData[0] == \"GrandTotal\") {\r\n\t\t\t\t\t\tself.SelectNodes(self.selection.SelectedNode[s].value, self.selection.SelectedNode[s].type, SelectedMorDNumber, \"GrandTotal\", true);\r\n\t\t\t\t\t} else if ((self.selection.SelectedNode[s].rowData[0].length > 0) && (self.selection.SelectedNode[s].rowData[0][0] == \"PtrTotals\")) {//sub total\r\n\t\t\t\t\t\tself.SelectNodes(self.selection.SelectedNode[s].value, self.selection.SelectedNode[s].type, SelectedMorDNumber, self.selection.SelectedNode[s].rowData[0], true);\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tfor (var i = 0; i < jQuery(\"#\" + self.controlName + \"_\" + self.query + \" tr\").length; i++) {//search selected cell in every row\r\n\t\t\t\t\t\t\tvar tRow = jQuery(\"#\" + self.controlName + \"_\" + self.query + \" tr\")[i];\r\n\t\t\t\t\t\t\tfor (var j = 0; j < tRow.children.length; j++) {\r\n\t\t\t\t\t\t\t\tvar value = jQuery(tRow.children[j]).data('itemValue');\r\n\t\t\t\t\t\t\t\tvar type = jQuery(tRow.children[j]).data('typeMorD');\r\n\t\t\t\t\t\t\t\tvar number = jQuery(tRow.children[j]).data('numberMorD');\r\n\t\t\t\t\t\t\t\tvar item = jQuery(tRow.children[j]).data('itemInfo');\r\n\r\n\t\t\t\t\t\t\t\tif ((self.sameValue(self.selection.SelectedNode[s].value, value, self.selection.SelectedNode[s].type, SelectedMorDNumber, item)) && (SelectedMorDNumber == number) && (self.selection.SelectedNode[s].type == type)) {\r\n\t\t\t\t\t\t\t\t\tif (item.row != undefined) {\r\n\t\t\t\t\t\t\t\t\t\tvar itemDataRow = self.createDataRowFromItem(item, type);\r\n\r\n\t\t\t\t\t\t\t\t\t\tfor (var v = 0; v < self.selection.SelectedNode[s].rowData.length; v++) {\r\n\r\n\t\t\t\t\t\t\t\t\t\t\tvar sameRow = true;\r\n\r\n\t\t\t\t\t\t\t\t\t\t\tfor (var t = 0; t < self.selection.SelectedNode[s].rowData[v].length; t++) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tif ((self.selection.SelectedNode[s].rowData[v][t] != undefined) && (itemDataRow[t] != undefined) && (!(self.filterIndexes.indexOf(t) > -1)) && (!(self.colConditions.indexOf(t) > -1))) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tif ((self.selection.SelectedNode[s].rowData[v][t] != \"[all]\") && (itemDataRow[t] != \"[all]\") && (self.selection.SelectedNode[s].rowData[v][t].trim() != itemDataRow[t].trim())) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsameRow = false;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\tif (sameRow)\r\n\t\t\t\t\t\t\t\t\t\t\t\tself.SelectNodes(self.selection.SelectedNode[s].value, self.selection.SelectedNode[s].type, SelectedMorDNumber, item, true, s);\r\n\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t\r\n\t\tthis.sameValue = function(val1, val2, type, NumberMorD, item){\r\n\t\t\ttry {\r\n\t\t\t\tvar sameValue = false;\r\n\t\t\t\tif (val2 != undefined){ \t \r\n\t\t\t\t\tvar dataType = (type == \"DIMENSION\") ? self.columns[NumberMorD].getAttribute(\"dataType\") : measures[NumberMorD].getAttribute(\"dataType\");\r\n\t\t\t\t\t\t \r\n\t\t\t\t\tif ((dataType == \"real\") || (dataType == \"integer\")){\r\n\t\t\t\t\t\tsameValue = (parseFloat(val1) == parseFloat(val2));\t\r\n\t\t\t\t\t\tif ((!sameValue) && (type == \"DIMENSION\") && (item[0] != undefined) && (item[0] == \"PtrTotals\") && (val1.trim() == val2.trim())) \r\n\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t \tsameValue = (val1.trim() == val2.trim());\t\r\n\t\t\t\t\t} \r\n\t\t\t\t}\r\n\t\t\t\treturn sameValue;\r\n\t\t\t} catch (error) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\tthis.checkConditions = function(conditions, item){\r\n\t\t\tvar sameRow = true;\r\n\t\t\tfor(var s = 0; s < conditions.length; s++){\r\n\t\t\t\tif (!item.row || !item.row.headers) return false;\r\n\t\t\t\tfor(var h = 0; h < item.row.headers.length; h++){\r\n\t\t\t\t\tif (item.row.headers[h].dataField == conditions[s].DataField){\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tvar numberMorD;\r\n\t\t\t\t\t\tfor (var i = 0; i < self.columns.length; i++) {\r\n\t\t\t\t\t\t\tif (item.row.headers[h].dataField  == self.columns[i].getAttribute(\"dataField\")) {\r\n\t\t\t\t\t\t\t\tnumberMorD = i;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (!self.sameValue(conditions[s].Value, item.row.headers[h].value, \"DIMENSION\", numberMorD, item))\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\treturn false\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tfor(var c = 0; c < item.row.cells.length; c++){\r\n\t\t\t\t\t//get dataField of cell\r\n\t\t\t\t\tvar numberMorD;\r\n\t\t\t\t\tvar nameMeasure;\r\n\t\t\t\t\tfor (var i = 0; i < measures.length; i++) {\r\n\t\t\t\t\t\tif (item.row.cells[c].dataField == measures[i].getAttribute(\"dataField\")) {\r\n\t\t\t\t\t\t\tnumberMorD = i;\r\n\t\t\t\t\t\t\tnameMeasure = measures[i].getAttribute(\"name\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (nameMeasure == conditions[s].Name){\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (!self.sameValue(conditions[s].Value, item.row.cells[c].value, \"MEASURE\", numberMorD, item))\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\treturn false\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\treturn sameRow;\r\n\t\t}\t\t\r\n\t\t\r\n\t\tthis.selectValue = function (selection) {\r\n\r\n\t\t\tOAT.ClearSelectedNodes(jQuery(\"#\" + self.controlName + \"_\" + self.query));\r\n\t\t\tself.selection.SelectedNode = [];\r\n\t\t\t\r\n\t\t\tvar s = -2;\t\t\t\r\n\t\t\tvar maxNumberMorD = -2\r\n\t\t\tvar MorD;\r\n\t\t\tvar numberMorD;\r\n\t\t\t\r\n\t\t\tfor (var t = 0; t < selection.length; t++)\r\n\t\t\t{\r\n\t\t\t\tvar tempMorD;\r\n\t\t\t\tvar tempnumberMorD;\r\n\t\t\t\tfor (var i = 0; i < measures.length; i++) {\r\n\t\t\t\t\tif (selection[t].Name == measures[i].getAttribute(\"name\")) {\r\n\t\t\t\t\t\ttempMorD = \"MEASURE\"\r\n\t\t\t\t\t\ttempnumberMorD = i;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor (var i = 0; i < self.columns.length; i++) {\r\n\t\t\t\t\tif (selection[t].Name == self.columns[i].getAttribute(\"name\")) {\r\n\t\t\t\t\t\ttempMorD = \"DIMENSION\"\r\n\t\t\t\t\t\ttempnumberMorD = i;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\t\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tif (self.rowConditions.indexOf(tempnumberMorD) >=  maxNumberMorD)\r\n\t\t\t\t{\r\n\t\t\t\t\ts = t;\r\n\t\t\t\t\tmaxNumberMorD = self.rowConditions.indexOf(tempnumberMorD);\r\n\t\t\t\t\tMorD = tempMorD;\r\n\t\t\t\t\tnumberMorD = tempnumberMorD;\r\n\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tself.SelectNodes(selection[s].Value, MorD, numberMorD, \"EventSelection\", false, 0, selection);\r\n\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\tthis.deselectValue = function(){\r\n\t\t\tOAT.ClearSelectedNodes(jQuery(\"#\" + self.controlName + \"_\" + self.query));\r\n\t\t\tself.selection.SelectedNode = [];\r\n\t\t}\r\n\t\t\r\n\t\tthis.createDataRowFromItem = function(item, type){\r\n\t\t\tvar row = item.row\r\n\t\t\tvar cellNumber = item.cell\r\n\t\t\tvar numRow = self.pageData.rows.indexOf(row)\r\n\t\t\tvar colPos = item.cell\r\n\t\t\tvar numCol = self.pageData.columnsHeaders[colPos]\r\n\r\n\t\t\tvar pseudoRow = [];\r\n\t\t\tfor (var i = 0; i < self.pageData.dataFields.length; i++) {\r\n\t\t\t\tpseudoRow[i] = undefined;\r\n\t\t\t}\r\n\t\t\tif ((row != undefined) && (row.headers != undefined)){\r\n\t\t\t\tfor (var i = 0; i < row.headers.length; i++) {\r\n\t\t\t\t\tvar pos = self.pageData.dataFields.indexOf(row.headers[i].dataField)\r\n\t\t\t\t\tif ((row.headers[i] != undefined) && (row.headers[i].value != undefined)) {\r\n\t\t\t\t\t\tpseudoRow[pos] = row.headers[i].value\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (type != \"DIMENSION\") {\r\n\t\t\t\t\r\n\t\t\t\tif (numCol != undefined){\r\n\t\t\t\t\tfor (var i = 0; i < numCol.subHeaders.length; i++) {\r\n\t\t\t\t\t\tif (numCol.subHeaders[i] != undefined) {\r\n\t\t\t\t\t\t\tvar pos = self.pageData.dataFields.indexOf(numCol.subHeaders[i].dataField)\r\n\t\t\t\t\t\t\tif (numCol.subHeaders[i].value != undefined) {\r\n\t\t\t\t\t\t\t\tpseudoRow[pos] = numCol.subHeaders[i].value\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tfor (var i = 0; i < self.filterIndexes.length; i++){\r\n\t\t\t\tpseudoRow[self.filterIndexes[i]] = self.filterDiv.selects[i].value;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn pseudoRow;\r\n\t\t}\r\n\t\t\r\n\t\tthis.ExpandCollapseHandle = function (elemvalue, eventName) {\r\n\t\t\tvar value = jQuery(elemvalue).data('itemValue');\r\n\t\t\tvar type = jQuery(elemvalue).data('typeMorD');\r\n\t\t\tvar number = jQuery(elemvalue).data('numberMorD');\r\n\t\t\tvar item = jQuery(elemvalue).data('itemInfo');\r\n\t\t\tvar datastr = \"<DATA event=\\\"\" + eventName + \"\\\"><ITEM \";\r\n\r\n\t\t\tdatastr = datastr + \"name=\\\"\" + columns[number].getAttribute(\"name\") + \"\\\" \";\r\n\t\t\tdatastr = datastr + \"displayName=\\\"\" + columns[number].getAttribute(\"displayName\") + \"\\\" \";\r\n\t\t\tdatastr = datastr + \">\";\r\n\t\t\tdatastr = datastr + self.cleanValueForNull(value)\r\n\t\t\tdatastr = datastr + \"</ITEM>\";\r\n\r\n\r\n\t\t\tdatastr = datastr + \"<CONTEXT>\";\r\n\t\t\tdatastr = datastr + \"<EXPANDEDVALUES>\";\r\n\t\t\tvar previuosDat = datastr;\r\n\t\t\ttry {\r\n\t\t\t\tif (item != \"\") {\r\n\t\t\t\t\tvar numRow\r\n\t\t\t\t\tif (item.row != undefined)\r\n\t\t\t\t\t\tnumRow = item.row;\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tnumRow = item[0];\r\n\r\n\t\t\t\t\tvar prevValues = [];\r\n\t\t\t\t\tfor (var iCV = 0; iCV < this.GeneralDataRows.length; iCV++) {\r\n\t\t\t\t\t\tif (prevValues.indexOf(this.GeneralDataRows[iCV][number]) == -1) {\r\n\t\t\t\t\t\t\tprevValues = prevValues.concat(this.GeneralDataRows[iCV][number])\r\n\t\t\t\t\t\t\tif (self.conditions[number].collapsedValues.indexOf(this.GeneralDataRows[iCV][number]) === -1) {\r\n\t\t\t\t\t\t\t\tdatastr = datastr + \"<VALUE>\" + self.cleanValueForNull(this.GeneralDataRows[iCV][number]) + \"</VALUE>\";\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} catch (Error) {\r\n\t\t\t\tdatastr = previuosDat;\r\n\t\t\t}\r\n\r\n\t\t\tdatastr = datastr + \"</EXPANDEDVALUES>\";\r\n\t\t\tdatastr = datastr + \"</CONTEXT>\";\r\n\t\t\tdatastr = datastr + \"</DATA>\"\r\n\r\n\t\t\treturn datastr;\r\n\t\t}\r\n\r\n\t\tthis.ExpandCollapseHandleWhenServerPagination = function (elemvalue, action) {\r\n\t\t\tif ((typeof (self.QueryViewerCollection[IdForQueryViewerCollection].ItemExpand) == 'function') /*|| (qv.util.isGeneXusPreview())*/) {\r\n\t\t\t\tvar number = jQuery(elemvalue).data('numberMorD');\r\n\t\t\t\tif (self.conditions[number].previousPage >= self.conditions[number].totalPages) {\r\n\t\t\t\t\tvar datastr = self.ExpandCollapseHandleWhenServerPaginationCreateXML(elemvalue, action)\r\n\t\t\t\t\tdatastr = datastr.replace(/\\&/g, '&amp;');\r\n\t\t\t\t\t\r\n\t\t\t\t\tself.fireOnItemExpandCollapseEvent(self.QueryViewerCollection[IdForQueryViewerCollection], datastr, (action == \"collapse\"))\r\n\t\t\t\t\tself.getDataForPivot(self.UcId, self.pageData.ServerPageNumber, self.rowsPerPage, true, \"\", \"\", \"\", \"\", true)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tself.lastColumnNumber = number;\r\n\t\t\t\t\tself.lastRequestAttributeValues = \"ExpandCollapse\"\r\n\t\t\t\t\tself.lastRequestAttributeValuesElemValue = elemvalue\r\n\t\t\t\t\tself.lastRequestAttributeValuesAction = action\r\n\t\t\t\t\tself.requestAttributeValues(self.columns[number].getAttribute(\"dataField\"), 1, 0, \"\")\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tself.getDataForPivot(self.UcId, self.pageData.ServerPageNumber, self.rowsPerPage, true, \"\", \"\", \"\", \"\", true);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.ExpandCollapseHandleWhenServerPaginationCreateXML = function (elemvalue, action) {\r\n\t\t\tvar value = jQuery(elemvalue).data('itemValue');\r\n\t\t\tvar type = jQuery(elemvalue).data('typeMorD');\r\n\t\t\tvar number = jQuery(elemvalue).data('numberMorD');\r\n\t\t\tvar item = jQuery(elemvalue).data('itemInfo');\r\n\r\n\t\t\tactionName = 'event=\"ItemExpand\"'\r\n\t\t\tif (action == \"collapse\") {\r\n\t\t\t\tactionName = 'event=\"ItemCollapse\"'\r\n\t\t\t}\r\n\r\n\t\t\tvar datastr = \"<DATA \" + actionName + \"><ITEM \";\r\n\r\n\t\t\tdatastr = datastr + \"name=\\\"\" + columns[number].getAttribute(\"name\") + \"\\\" \";\r\n\t\t\tdatastr = datastr + \"displayName=\\\"\" + columns[number].getAttribute(\"displayName\") + \"\\\" \";\r\n\t\t\tdatastr = datastr + \">\";\r\n\t\t\tdatastr = datastr + value\r\n\t\t\tdatastr = datastr + \"</ITEM>\";\r\n\r\n\r\n\t\t\tdatastr = datastr + \"<CONTEXT>\";\r\n\t\t\tdatastr = datastr + \"<EXPANDEDVALUES>\";\r\n\r\n\t\t\tfor (var ex = 0; ex < self.conditions[number].distinctValues.length; ex++) {\r\n\t\t\t\tif (self.conditions[number].collapsedValues.indexOf(self.conditions[number].distinctValues[ex]) == -1) {\r\n\t\t\t\t\tdatastr = datastr + \"<VALUE>\" + self.conditions[number].distinctValues[ex] + \"</VALUE>\"\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tdatastr = datastr + \"</EXPANDEDVALUES>\";\r\n\t\t\tdatastr = datastr + \"</CONTEXT>\";\r\n\t\t\tdatastr = datastr + \"</DATA>\"\r\n\r\n\t\t\treturn datastr;\r\n\t\t}\r\n\t\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\tthis.onFilteredChangedEventHandleWhenServerPagination = function (dimensionNumber) {\r\n\t\t\tif ((self.QueryViewerCollection[IdForQueryViewerCollection].FilterChanged) /*|| (qv.util.isGeneXusPreview())*/) {\r\n\t\t\t\tif (self.conditions[dimensionNumber].previousPage >= self.conditions[dimensionNumber].totalPages) {\r\n\t\t\t\t\tself.onFilteredChangedEventHandleWhenServerPaginationCreateXML(dimensionNumber, self.conditions[dimensionNumber].distinctValues, self.conditions[dimensionNumber].blackList);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tself.lastColumnNumber = dimensionNumber;\r\n\t\t\t\t\tself.lastRequestAttributeValues = \"FilteredChanged\"\r\n\t\t\t\t\tself.requestAttributeValues(self.columns[dimensionNumber].getAttribute(\"dataField\"), 1, 0, \"\")\r\n\t\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tthis.fireOnFilterChangedEvent = function(QueryviewerId, FilterChangedData){\r\n\t\t\tsetTimeout( function() {\r\n\t\t\t\tvar paramobj = {\"QueryviewerId\": QueryviewerId, \"FilterChangedData\": FilterChangedData};\r\n\t\t\t\tvar evt = document.createEvent(\"Events\")\r\n\t\t\t\tevt.initEvent(\"PivotTableOnFilterChangedEvent\", true, true);\r\n\t\t\t\tevt.parameter = paramobj;\r\n\t\t\t\tdocument.dispatchEvent(evt);\r\n\t\t\t}, 0)\r\n\t\t}\r\n\t\t\r\n\t\tthis.onFilteredChangedEventHandleWhenServerPaginationCreateXML = function (dimensionNumber, distinctValues, blackList) {\r\n\t\t\tvar datastr = \"<DATA event=\\\"FilterChanged\\\" name=\\\"\" + self.columns[dimensionNumber].getAttribute(\"name\") + \"\\\" displayName=\\\"\" + self.columns[dimensionNumber].getAttribute(\"displayName\") + \"\\\">\"\r\n\t\t\tfor (var i = 0; i < distinctValues.length; i++) {\r\n\t\t\t\tvar value = distinctValues[i]\r\n\t\t\t\tvar checked = true;\r\n\t\t\t\tif (self.conditions[dimensionNumber].state == \"all\") {\r\n\t\t\t\t\tchecked = true;\r\n\t\t\t\t} else if (self.conditions[dimensionNumber].state == \"none\") {\r\n\t\t\t\t\tchecked = false;\r\n\t\t\t\t} else if (self.conditions[dimensionNumber].blackList.indexOf(value) != -1) {\r\n\t\t\t\t\tchecked = false;\r\n\t\t\t\t} else if (distinctValues.indexOf(value) != -1) {\r\n\t\t\t\t\tchecked = true;\r\n\t\t\t\t} else if (self.conditions[dimensionNumber].defaultAction == \"Exclude\") {\r\n\t\t\t\t\tchecked = false;\r\n\t\t\t\t}\r\n\t\t\t\tif (checked) {\r\n\t\t\t\t\tdatastr = datastr + '<VALUE>' + value + '</VALUE>';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tdatastr = datastr + \"</DATA>\"\r\n\r\n\t\t\t//if (qv.util.isGeneXusPreview())\r\n\t\t\t//\twindow.external.SendText(self.QueryViewerCollection[self.IdForQueryViewerCollection].ControlName, datastr);\r\n\t\t\tif ((self.QueryViewerCollection[IdForQueryViewerCollection].FilterChanged)) {\r\n\t\t\t\tdatastr = datastr.replace(/\\&/g, '&amp;');\r\n\t\t\t\t\r\n\t\t\t\tvar iparser = new DOMParser();\r\n\t\t\t\tvar xml_doc = iparser.parseFromString(datastr, \"text/xml\");\r\n\t\t\t\t\r\n\t\t\t\t//var xml_doc = qv.util.dom.xmlDocument(datastr); ///***TODO\r\n\t\t\t\t\r\n\t\t\t\tvar selectXPathNode = function (xmlDoc, xpath) {\r\n\t\t\t\t\tvar nodes;\r\n\t\t\t\t\tvar node;\r\n\t\t\t\t\tif (xmlDoc.evaluate) { // Firefox, Chrome, Opera and Safari\r\n\t\t\t\t\t\tnodes = xmlDoc.evaluate(xpath, xmlDoc, null, XPathResult.ANY_TYPE, null);\r\n\t\t\t\t\t\tnode = nodes.iterateNext();\r\n\t\t\t\t\t} else {\t\t\t// Internet Explorer\r\n\t\t\t\t\t\tnodes = xmlDoc.selectNodes(xpath);\r\n\t\t\t\t\t\tnode = (nodes.length > 0 ? nodes[0] : null);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn node;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tvar Node = selectXPathNode(xml_doc, \"/DATA\"); // qv.util.dom.selectXPathNode(xml_doc, \"/DATA\");\r\n\t\t\t\t\r\n\t\t\t\tvar FilterChangedData = {}\r\n\t\t\t\tFilterChangedData.Name = Node.getAttribute(\"name\");\r\n\t\t\t\tFilterChangedData.SelectedValues = [];\r\n\t\t\t\tvar valueIndex = -1;\r\n\t\t\t\tfor (var i = 0; i < Node.childNodes.length; i++) {\r\n\t\t\t\t\tif (Node.childNodes[i].nodeName == \"VALUE\") {\r\n\t\t\t\t\t\tvalueIndex++;\r\n\t\t\t\t\t\tFilterChangedData.SelectedValues[valueIndex] = Node.childNodes[i].firstChild.nodeValue;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tself.fireOnFilterChangedEvent(IdForQueryViewerCollection, FilterChangedData)\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\tthis.onDragundDropEventHandle = function (conditionIndex, axis, position) {\r\n\t\t\tvar datastr = \"<DATA event=\\\"DragAndDrop\\\" name=\\\"\" + this.columns[conditionIndex].getAttribute(\"name\") + \"\\\" displayName=\\\"\" + this.columns[conditionIndex].getAttribute(\"displayName\") \r\n\t\t\t\t\t+ \"\\\" axis=\\\"\" + axis + \"\\\"  position=\\\"\" + (position+1) + \"\\\" />\"\r\n\t\t\t\tdatastr = datastr.replace(/\\&/g, '&amp;');\r\n\t\t\t\tself.fireOnDragundDropEvent(this.QueryViewerCollection[IdForQueryViewerCollection], datastr);\r\n\r\n\t\t}\r\n\t\t\r\n\t\tthis.fireOnDragundDropEvent = function(query, datastr){\r\n\t\t\tsetTimeout( function() {\r\n\t\t\t\tvar paramobj = {\"QueryViewer\": query, \"Data\": datastr, \"QueryviewerId\": self.IdForQueryViewerCollection};\r\n\t\t\t\tvar evt = document.createEvent(\"Events\")\r\n\t\t\t\tevt.initEvent(\"PivotTableOnDragundDropEvent\", true, true);\r\n\t\t\t\tevt.parameter = paramobj;\r\n\t\t\t\tdocument.dispatchEvent(evt);\r\n\t\t\t}, 0)\r\n\t\t}\r\n\t\t\r\n\t\tthis.pivotStateChanged = function()\r\n\t\t{\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tfor (var iAI = 0; iAI < self.pageData.AxisInfo.length; iAI++)\r\n\t\t\t{\r\n\t\t\t\tif (self.pageData.AxisInfo[iAI].Axis.Type != self.initState.AxisInfo[iAI].Axis.Type) return true\r\n\t\t\t}\r\n\t\t\tfor (var iDI = 0; iDI < self.pageData.DataInfo.length; iDI++)\r\n\t\t\t{\r\n\t\t\t\tif (self.pageData.DataInfo[iDI].Axis.Type != self.initState.DataInfo[iDI].Axis.Type) return true\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (self.initState.CollapseInfo.length != self.pageData.CollapseInfo.length) return true\r\n\t\t\t\r\n\t\t\tvar initCollapseInfo = JSON.stringify(self.initState.CollapseInfo);\r\n\t\t\tvar actualCollapseInfo = JSON.stringify(self.pageData.CollapseInfo);\r\n\t\t\tif (initCollapseInfo!=actualCollapseInfo) return true;\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t\r\n\t\t\treturn false\r\n\t\t}\r\n\t\t\r\n\r\n\t\r\n\r\n\t\t\r\n\t\tself.initWhenServerPagination();\r\n\t\t\r\n\t\t\r\n\t}\r\n\ttry {\r\n\t\tOAT.Loader.featureLoaded(\"pivot\");\r\n\t} catch (ERROR) {\r\n\r\n\t}\r\n\r\n\r\n\tfunction sortUnidimensionalArray(arr, index, self) { /* sort distinct values of a condition */\r\n\t\t//var months = [\"january\", \"february\", \"march\", \"april\", \"may\", \"june\", \"july\", \"august\", \"september\", \"october\", \"november\", \"december\"];\r\n\t\tvar sortFunc;\r\n\t\tvar coef = 1;\r\n\t\tvar numSort = function (a, b) {\r\n\t\t\tif (a == b) { return 0; }\r\n\t\t\treturn coef * (parseInt(a) > parseInt(b) ? 1 : -1);\r\n\t\t}\r\n\t\tvar dictSort = function (a, b) {\r\n\t\t\tif (a == b) { return 0; }\r\n\t\t\treturn coef * (a > b ? 1 : -1);\r\n\t\t}\r\n\r\n\r\n\t\t//new code\r\n\t\tvar sortInt = true;\r\n\t\tfor (var ival = 0; ival < arr.length; ival++) {\r\n\t\t\tif ((sortInt) && (arr[ival] != parseInt(arr[ival]))) {\r\n\t\t\t\tsortInt = false;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (sortInt) { sortFunc = numSort; } else { sortFunc = dictSort; } //decides the type of sorting\r\n\t\t//end new code\r\n\t\tvar testValue = arr[0];\r\n\r\n\t\t//if (months.find(testValue.toString().toLowerCase()) != -1) { sortFunc = dateSort; }\r\n\r\n\t\tarr.sort(sortFunc);\r\n\r\n\t\t//when custom order \r\n\t\tfor (var h = 0; h < self.columns[index].childNodes.length; h++) {\r\n\t\t\tif ((self.columns[index].childNodes[h] != undefined) &&\r\n\t\t\t\t(self.columns[index].childNodes[h].localName != undefined) &&\r\n\t\t\t\t(self.columns[index].childNodes[h].localName === \"customOrder\")) {\r\n\t\t\t\tarr = []\r\n\t\t\t\tfor (var n = 0; n < self.columns[index].childNodes[h].childNodes.length; n++) {\r\n\t\t\t\t\tif (self.columns[index].childNodes[h].childNodes[n].localName == \"Value\") {\r\n\t\t\t\t\t\tarr.push(self.columns[index].childNodes[h].childNodes[n].textContent);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\r\n\t\treturn arr;\r\n\t} /* sort */\r\n\r\n\tfunction fillGeneralDistinctValues(numConds, self, rows) {\r\n\t\tself.GeneralDistinctValues = [];\r\n\t\tfor (var i = 0; i < numConds; i++) {\r\n\t\t\tvar elems = [];\r\n\t\t\tfor (var j = 0; j < rows.length; j++) {\r\n\t\t\t\tif (rows[j][i] == undefined) {\r\n\t\t\t\t\tif (elems.indexOf(\" \") == -1) {\r\n\t\t\t\t\t\telems.push(\" \");\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (elems.indexOf(rows[j][i]) == -1) {\r\n\t\t\t\t\t\telems.push(rows[j][i]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tself.GeneralDistinctValues[i] = sortUnidimensionalArray(elems, i, self);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction fromUndefinedToBlanck(dataRows) {\r\n\t\tfor (var i = 0; i < dataRows.length; i++) {\r\n\t\t\tfor (var j = 0; j < dataRows[i].length; j++) {\r\n\t\t\t\tif (dataRows[i][j] == undefined) {\r\n\t\t\t\t\tdataRows[i][j] = \" \";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t\r\n\tfunction notInBlackListB(row, conditions) {\r\n\t\tvar esta = false;\r\n\t\tfor (var i = 0; i < row.length; i++) {\r\n\t\t\tif ((conditions[i] != undefined) && (conditions[i].blackList != undefined) && (conditions[i].blackList.indexOf(row[i]) != -1)) {\r\n\t\t\t\testa = true;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn esta;\r\n\t}\r\n\r\n\r\n\tfunction belongToCollection(row, rowCollection) {\r\n\t\tfor (var j = 0; j < rowCollection.length; j++) {\r\n\t\t\tvar coincide = true;\r\n\t\t\tfor (var i = 0; i < row.length - measures.length; i++) {\r\n\t\t\t\tif (rowCollection[j][i] != row[i]) {\r\n\t\t\t\t\tcoincide = false;\r\n\t\t\t\t}\r\n\t\t\t\tif (!coincide) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (coincide) return true;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\t\r\n\r\n\tfunction getMeasureNumberByName(name, measures) {\r\n\t\tvar number = 0;\r\n\t\tfor (var i = 0; i < measures.length; i++) {\r\n\t\t\tif (measures[i].getAttribute(\"displayName\") == name) {\r\n\t\t\t\treturn i\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn 0\r\n\t}\r\n\r\n\tfunction getMeasureNumberByDataField(dataField, measures) {\r\n\t\tvar number = 0;\r\n\t\tfor (var i = 0; i < measures.length; i++) {\r\n\t\t\tif (measures[i].getAttribute(\"dataField\") == dataField) {\r\n\t\t\t\treturn i\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn 0\r\n\t}\r\n\r\n\r\n\r\n\tfunction getValueMeasureFromMeasureList(measureList, rowNumber, fg, filterData, cantMeasures) {\r\n\t\tfor (var itMl = 0; itMl < measureList.length; itMl++) {\r\n\t\t\tif ((measureList[itMl][fg] != undefined) && (measureList[itMl][fg][1] != undefined) && (measureList[itMl][fg][1][0] == rowNumber)) {\r\n\t\t\t\treturn measureList[itMl][fg][0]\r\n\t\t\t}\r\n\t\t}\r\n\t\t//when is not in the measure list search in filterData\r\n\t\treturn filterData[rowNumber][filterData[0].length - cantMeasures + fg]\r\n\t}\r\n\r\n\r\n\r\n\r\n\r\n\tOAT.Statistics = {\r\n\t\tlist: [{\r\n\t\t\tlongDesc: \"Count\",\r\n\t\t\tshortDesc: \"COUNT\",\r\n\t\t\tfunc: \"count\"\r\n\t\t}, {\r\n\t\t\tlongDesc: \"Sum\",\r\n\t\t\tshortDesc: \"SUM\",\r\n\t\t\tfunc: \"sum\"\r\n\t\t}, {\r\n\t\t\tlongDesc: \"Product\",\r\n\t\t\tshortDesc: \"PRODUCT\",\r\n\t\t\tfunc: \"product\"\r\n\t\t}, {\r\n\t\t\tlongDesc: \"Arithmetic mean\",\r\n\t\t\tshortDesc: \"MEAN\",\r\n\t\t\tfunc: \"amean\"\r\n\t\t}, {\r\n\t\t\tlongDesc: \"Maximum\",\r\n\t\t\tshortDesc: \"MAX\",\r\n\t\t\tfunc: \"max\"\r\n\t\t}, {\r\n\t\t\tlongDesc: \"Minimum\",\r\n\t\t\tshortDesc: \"MIN\",\r\n\t\t\tfunc: \"min\"\r\n\t\t}, {\r\n\t\t\tlongDesc: \"Distinct values\",\r\n\t\t\tshortDesc: \"DISTINCT\",\r\n\t\t\tfunc: \"distinct\"\r\n\t\t}, {\r\n\t\t\tlongDesc: \"Variance\",\r\n\t\t\tshortDesc: \"VAR\",\r\n\t\t\tfunc: \"variance\"\r\n\t\t}, {\r\n\t\t\tlongDesc: \"Standard deviation\",\r\n\t\t\tshortDesc: \"STDDEV\",\r\n\t\t\tfunc: \"deviation\"\r\n\t\t}, {\r\n\t\t\tlongDesc: \"Median\",\r\n\t\t\tshortDesc: \"MEDIAN\",\r\n\t\t\tfunc: \"median\"\r\n\t\t}, {\r\n\t\t\tlongDesc: \"Mode\",\r\n\t\t\tshortDesc: \"MODE\",\r\n\t\t\tfunc: \"mode\"\r\n\t\t}],\r\n\t\tcount: function (a) {\r\n\t\t\treturn a.length\r\n\t\t},\r\n\t\tsum: function (a) {\r\n\t\t\tif (a == \"#FoE#\") return \"#NaV#\"\r\n\t\t\tvar allNuN = (a.length > 0);\r\n\t\t\tfor (var c = 0, b = 0; b < a.length; b++) {\r\n\t\t\t\tif (a[b] != \"#NuN#\") allNuN = false;\r\n\t\t\t\tif (!isNaN(a[b]))\r\n\t\t\t\t\tc += a[b];\r\n\t\t\t}\r\n\t\t\tif (allNuN) return \"#NuN#\"\r\n\t\t\treturn c\r\n\t\t},\r\n\t\tproduct: function (a) {\r\n\t\t\tfor (var c = 1, b = 0; b < a.length; b++)\r\n\t\t\t\tc *= a[b];\r\n\t\t\treturn c\r\n\t\t},\r\n\t\tamean: function (a) {\r\n\t\t\tfor (var c = 0, b = 0; b < a.length; b++)\r\n\t\t\t\tc += a[b];\r\n\t\t\treturn c = a.length ? c / a.length : 0\r\n\t\t},\r\n\t\tmax: function (a) {\r\n\t\t\tfor (var c = Number.MIN_VALUE, b = 0; b < a.length; b++)a[b] > c && (c = a[b]);\r\n\t\t\treturn c\r\n\t\t},\r\n\t\tmin: function (a) {\r\n\t\t\tfor (var c = Number.MAX_VALUE, b = 0; b < a.length; b++)a[b] < c && (c = a[b]);\r\n\t\t\treturn c\r\n\t\t},\r\n\t\tdistinct: function (a) {\r\n\t\t\tfor (var c = 0, b = {}, d = 0; d < a.length; d++)\r\n\t\t\t\tb[a[d]] = 1;\r\n\t\t\tfor (p in b)\r\n\t\t\t\tc++;\r\n\t\t\treturn c\r\n\t\t},\r\n\t\tdeviation: function (a) {\r\n\t\t\ta = OAT.Statistics.variance(a);\r\n\t\t\treturn Math.sqrt(a)\r\n\t\t},\r\n\t\tvariance: function (a) {\r\n\t\t\tif (2 > a.length)\r\n\t\t\t\treturn 0;\r\n\t\t\tfor (var c = 0, b = OAT.Statistics.amean(a), d = 0; d < a.length; d++)\r\n\t\t\t\tc += (a[d] - b) * (a[d] - b);\r\n\t\t\treturn c / (a.length - 1)\r\n\t\t},\r\n\t\tmedian: function (a) {\r\n\t\t\treturn a.sort(function (a, b) { return a - b })[Math.floor(a.length / 2)]\r\n\t\t},\r\n\t\tmode: function (a) {\r\n\t\t\tfor (var c = {}, b = 0; b < a.length; b++) {\r\n\t\t\t\tvar d = a[b] + \"\";\r\n\t\t\t\td in c ? c[d]++ : c[d] = 1\r\n\t\t\t}\r\n\t\t\tvar a = 0, b = \"\", e;\r\n\t\t\tfor (e in c) d = c[e], d > a && (a = d, b = e);\r\n\t\t\treturn parseFloat(b)\r\n\t\t}\r\n\t};\r\n\ttry {\r\n\t\tOAT.Loader.featureLoaded(\"statistics\");\r\n\t} catch (ERROR) {\r\n\r\n\t}\r\n\r\n\tOAT.WinData = {\r\n\t\tTYPE_TEMPLATE: -1,\r\n\t\tTYPE_AUTO: 0,\r\n\t\tTYPE_MS: 1,\r\n\t\tTYPE_MAC: 2,\r\n\t\tTYPE_ROUND: 3,\r\n\t\tTYPE_RECT: 4,\r\n\t\tTYPE_ODS: 5\r\n\t};\r\n\tOAT.Win = function (a) {\r\n\t\tvar b = this;\r\n\t\tthis.options = {\r\n\t\t\ttitle: \"\",\r\n\t\t\tx: 0,\r\n\t\t\ty: 0,\r\n\t\t\tvisibleButtons: \"cmMfr\",\r\n\t\t\tenabledButtons: \"cmMfr\",\r\n\t\t\tinnerWidth: 0,\r\n\t\t\tinnerHeight: 0,\r\n\t\t\touterWidth: 350,\r\n\t\t\touterHeight: !1,\r\n\t\t\tstackGroupBase: 100,\r\n\t\t\ttype: OAT.WinData.TYPE_AUTO,\r\n\t\t\ttemplate: !1,\r\n\t\t\tclassName: !1\r\n\t\t};\r\n\t\tfor (var c in a)\r\n\t\t\tthis.options[c] = a[c];\r\n\t\tb.dom = {\r\n\t\t\tbuttons: {\r\n\t\t\t\tc: !1,\r\n\t\t\t\tm: !1,\r\n\t\t\t\tM: !1,\r\n\t\t\t\tf: !1,\r\n\t\t\t\tr: !1\r\n\t\t\t},\r\n\t\t\tcontainer: !1,\r\n\t\t\tcontent: !1,\r\n\t\t\ttitle: !1,\r\n\t\t\tcaption: !1,\r\n\t\t\tstatus: !1,\r\n\t\t\tresizeContainer: !1\r\n\t\t};\r\n\t\tb.moveTo = function (a, c) {\r\n\t\t\tb.dom.container.style.left = a + \"px\";\r\n\t\t\tb.dom.container.style.top = c + \"px\"\r\n\t\t};\r\n\t\tb.innerResizeTo = function () {\r\n\t\t};\r\n\t\tb.outerResizeTo = function () {\r\n\t\t};\r\n\t\tb.show = function () {\r\n\t\t\tdocument.body.appendChild(b.dom.container);\r\n\t\t\tOAT.Dom.show(b.dom.container)\r\n\t\t};\r\n\t\tb.hide = function () {\r\n\t\t\tOAT.Dom.hide(b.dom.container)\r\n\t\t};\r\n\t\tb.close = b.hide();\r\n\t\tb.minimize = function () {\r\n\t\t};\r\n\t\tb.maximize = function () {\r\n\t\t};\r\n\t\tb.flip = function () {\r\n\t\t};\r\n\t\tb.accomodate = function (a) {\r\n\t\t\ta = OAT.Dom.getWH(a);\r\n\t\t\tb.innerResizeTo(a[0], a[1])\r\n\t\t};\r\n\t\tb.options.type == OAT.WinData.TYPE_TEMPLATE && OAT.WinTemplate(b);\r\n\t\tb.options.type == OAT.WinData.TYPE_MS && OAT.WinMS(b);\r\n\t\tb.options.type == OAT.WinData.TYPE_MAC && OAT.WinMAC(b);\r\n\t\tb.options.type == OAT.WinData.TYPE_RECT && OAT.WinRECT(b, a.containerQuery);\r\n\t\tb.options.type == OAT.WinData.TYPE_ROUND && OAT.WinROUND(b);\r\n\t\tb.options.type == OAT.WinData.TYPE_ODS && OAT.WinODS(b);\r\n\t\t-1 != b.options.enabledButtons.indexOf(\"m\") && b.dom.buttons.m && OAT.Dom.attach(b.dom.buttons.m, \"click\", b.minimize);\r\n\t\t-1 != b.options.enabledButtons.indexOf(\"M\") && b.dom.buttons.M && OAT.Dom.attach(b.dom.buttons.M, \"click\", b.maximize);\r\n\t\t-1 != b.options.enabledButtons.indexOf(\"c\") && b.dom.buttons.c && OAT.Dom.attach(b.dom.buttons.c, \"click\", b.hide);\r\n\t\t-1 != b.options.enabledButtons.indexOf(\"f\") && b.dom.buttons.f && OAT.Dom.attach(b.dom.buttons.f, \"click\", b.flip);\r\n\t\t-1 != b.options.enabledButtons.indexOf(\"r\") && b.dom.buttons.r && OAT.Resize.create(b.dom.buttons.r, b.dom.resizeContainer, OAT.Resize.TYPE_XY);\r\n\t\tb.dom.title && OAT.Drag.create(b.dom.title, b.dom.container);\r\n\t\tb.moveTo(b.options.x, b.options.y);\r\n\t\t(b.options.outerWidth || b.options.outerHeight) && b.outerResizeTo(b.options.outerWidth, b.options.outerHeight);\r\n\t\t(b.options.innerWidth || b.options.innerHeight) && b.innerResizeTo(b.options.innerWidth, b.options.innerHeight);\r\n\t\tb.dom.caption && (OAT.addTextNode(b.dom.caption, b.options));\r\n\t\tb.options.stackGroupBase && OAT.WinManager.addWindow(b.options.stackGroupBase, b.dom.container);\r\n\t\tb.hide()\r\n\t};\r\n\tOAT.WinTemplate = function (a) {\r\n\t\tvar b = a.options.template;\r\n\t\tif (b) {\r\n\t\t\tfor (var c = \"function\" == typeof b ? b() : OAT.$(b).cloneNode(!0), g = {\r\n\t\t\t\toat_w_ctr: \"container\",\r\n\t\t\t\toat_w_title_ctr: \"title\",\r\n\t\t\t\toat_w_title_t_ctr: \"caption\",\r\n\t\t\t\toat_w_content: \"content\",\r\n\t\t\t\toat_w_max_b: [\"buttons\", \"M\"],\r\n\t\t\t\toat_w_min_b: [\"buttons\", \"m\"],\r\n\t\t\t\toat_w_close_b: [\"buttons\", \"c\"],\r\n\t\t\t\toat_w_flip_b: [\"buttons\", \"f\"],\r\n\t\t\t\toat_w_resize_handle: [\"buttons\", \"r\"]\r\n\t\t\t}, e = [c], b = c.getElementsByTagName(\"*\"), c = 0; c < b.length; c++)\r\n\t\t\t\te.push(b[c]);\r\n\t\t\tfor (c = 0; c < e.length; c++) {\r\n\t\t\t\tvar b = e[c], f;\r\n\t\t\t\tfor (f in g)\r\n\t\t\t\t\tif (OAT.Dom.isClass(b, f)) {\r\n\t\t\t\t\t\tvar d = g[f];\r\n\t\t\t\t\t\td instanceof Array ? a.dom[d[0]][d[1]] = b : a.dom[d] = b\r\n\t\t\t\t\t}\r\n\t\t\t}\r\n\t\t\ta.moveTo = function (b, c) {\r\n\t\t\t\ta.dom.container.style.left = b + \"px\";\r\n\t\t\t\ta.dom.container.style.top = c + \"px\"\r\n\t\t\t};\r\n\t\t\ta.outerResizeTo = function (b, c) {\r\n\t\t\t\ta.dom.container.style.width = b ? b + \"px\" : \"auto\";\r\n\t\t\t\ta.dom.container.style.height = c ? c + \"px\" : \"auto\"\r\n\t\t\t};\r\n\t\t\ta.innerResizeTo = function (b, c) {\r\n\t\t\t\ta.dom.content.style.width = b ? b + \"px\" : \"auto\";\r\n\t\t\t\ta.dom.content.style.height = c ? c + \"px\" : \"auto\"\r\n\t\t\t}\r\n\t\t} else\r\n\t\t\talert(\"OAT Window cannot be created, as a template is required but not specified!\")\r\n\t};\r\n\tOAT.WinMS = function (a) {\r\n\t\tOAT.Style.include(\"winms.css\");\r\n\t\ta.dom.container = OAT.Dom.create(\"div\", {\r\n\t\t\tposition: \"absolute\"\r\n\t\t}, \"oat_winms_container\");\r\n\t\ta.dom.resizeContainer = a.dom.container;\r\n\t\ta.dom.content = OAT.Dom.create(\"div\", {}, \"oat_winms_content\");\r\n\t\ta.dom.title = OAT.Dom.create(\"div\", {}, \"oat_winms_title\");\r\n\t\ta.dom.caption = OAT.Dom.create(\"span\", {}, \"oat_winms_caption\");\r\n\t\ta.dom.status = OAT.Dom.create(\"div\", {}, \"oat_winms_status\");\r\n\t\tOAT.Dom.append([a.dom.container, a.dom.title, a.dom.content, a.dom.status]);\r\n\t\t-1 != a.options.visibleButtons.indexOf(\"c\") && (a.dom.buttons.c = OAT.Dom.create(\"div\", {}, \"oat_winms_close_b\"), OAT.Dom.append([a.dom.title, a.dom.buttons.c]));\r\n\t\t-1 != a.options.visibleButtons.indexOf(\"M\") && (a.dom.buttons.M = OAT.Dom.create(\"div\", {}, \"oat_winms_max_b\"), OAT.Dom.append([a.dom.title, a.dom.buttons.M]));\r\n\t\t-1 != a.options.visibleButtons.indexOf(\"m\") && (a.dom.buttons.m = OAT.Dom.create(\"div\", {}, \"oat_winms_min_b\"), OAT.Dom.append([a.dom.title, a.dom.buttons.m]));\r\n\t\t-1 != a.options.visibleButtons.indexOf(\"r\") && (a.dom.buttons.r = OAT.Dom.create(\"div\", {}, \"oat_winms_resize_b\"), OAT.Dom.append([a.dom.container, a.dom.buttons.r]));\r\n\t\tOAT.Dom.append([a.dom.title, a.dom.caption]);\r\n\t\ta.outerResizeTo = function (b, c) {\r\n\t\t\ta.dom.container.style.width = b ? b + \"px\" : \"auto\";\r\n\t\t\ta.dom.container.style.height = c ? c + \"px\" : \"auto\"\r\n\t\t}\r\n\t};\r\n\tOAT.WinMAC = function (a) {\r\n\t\tOAT.Style.include(\"winmac.css\");\r\n\t\ta.dom.container = OAT.Dom.create(\"div\", {\r\n\t\t\tposition: \"absolute\"\r\n\t\t}, \"oat_winmac_container\");\r\n\t\ta.dom.resizeContainer = a.dom.container;\r\n\t\ta.dom.content = OAT.Dom.create(\"div\", {}, \"oat_winmac_content\");\r\n\t\ta.dom.title = OAT.Dom.create(\"div\", {}, \"oat_winmac_title\");\r\n\t\ta.dom.caption = OAT.Dom.create(\"span\", {}, \"oat_winmac_caption\");\r\n\t\ta.dom.status = OAT.Dom.create(\"div\", {}, \"oat_winmac_status\");\r\n\t\tOAT.Dom.append([a.dom.container, a.dom.title, a.dom.content, a.dom.status]);\r\n\t\ta.dom.buttons.lc = OAT.Dom.create(\"div\", {}, \"oat_winmac_leftCorner\");\r\n\t\tOAT.Dom.append([a.dom.title, a.dom.buttons.lc]);\r\n\t\ta.dom.buttons.rc = OAT.Dom.create(\"div\", {}, \"oat_winmac_rightCorner\");\r\n\t\tOAT.Dom.append([a.dom.title, a.dom.buttons.rc]);\r\n\t\t-1 != a.options.visibleButtons.indexOf(\"c\") && (a.dom.buttons.c = OAT.Dom.create(\"div\", {}, \"oat_winmac_close_b\"), OAT.Dom.append([a.dom.title, a.dom.buttons.c]));\r\n\t\t-1 != a.options.visibleButtons.indexOf(\"M\") && (a.dom.buttons.M = OAT.Dom.create(\"div\", {}, \"oat_winmac_max_b\"), OAT.Dom.append([a.dom.title, a.dom.buttons.M])); -1 != a.options.visibleButtons.indexOf(\"m\") && (a.dom.buttons.m = OAT.Dom.create(\"div\", {}, \"oat_winmac_min_b\"), OAT.Dom.append([a.dom.title, a.dom.buttons.m]));\r\n\t\t-1 != a.options.visibleButtons.indexOf(\"r\") && (a.dom.buttons.r = OAT.Dom.create(\"div\", {}, \"oat_winmac_resize_b\"), OAT.Dom.append([a.dom.container, a.dom.buttons.r]));\r\n\t\tOAT.Dom.append([a.dom.title, a.dom.caption]);\r\n\t\ta.outerResizeTo = function (b, c) {\r\n\t\t\ta.dom.container.style.width = b ? b + \"px\" : \"auto\";\r\n\t\t\ta.dom.container.style.height = c ? c - 8 + \"px\" : \"auto\"\r\n\t\t}\r\n\t};\r\n\tOAT.WinRECT = function (a, className) {\r\n\t\t//OAT.Style.include(\"winrect.css\");\r\n\t\tif (className != undefined)\r\n\t\t\ta.dom.container = OAT.Dom.create(\"div\", {\r\n\t\t\t\tposition: \"absolute\"\r\n\t\t\t}, className + \" oat_winrect_container\");\r\n\t\telse\r\n\t\t\ta.dom.container = OAT.Dom.create(\"div\", {\r\n\t\t\t\tposition: \"absolute\"\r\n\t\t\t}, \"oat_winrect_container\");\r\n\r\n\t\ta.dom.resizeContainer = a.dom.container;\r\n\t\t//a.dom.content = OAT.Dom.create(\"div\", {}, \"oat_winrect_content\");\r\n\r\n\t\t\r\n\t\tif ( OAT.isSD() ) {\r\n\t\t\ta.dom.content = OAT.Dom.create(\"div\", {}, \"oat_winrect_content oat_winrect_content_small\");\r\n\t\t\ta.dom.title = OAT.Dom.create(\"div\", {}, \"oat_winrect_title oat_winrect_title_small\");\r\n\t\t} else {\r\n\t\t\ta.dom.content = OAT.Dom.create(\"div\", {}, \"oat_winrect_content\");\r\n\t\t\ta.dom.title = OAT.Dom.create(\"div\", {}, \"oat_winrect_title\");\r\n\t\t}\r\n\r\n\r\n\t\ta.dom.caption = OAT.Dom.create(\"span\", {}, \"oat_winrect_caption\");\r\n\t\ta.dom.status = OAT.Dom.create(\"div\", {}, \"oat_winrect_status\");\r\n\r\n\t\tOAT.Dom.append([a.dom.container, a.dom.title, a.dom.content, a.dom.status]);\r\n\r\n\t\tif ( OAT.isSD() ) {\r\n\t\t\ta.dom.buttons.c = OAT.Dom.create(\"div\", {}, \"oat_winrect_close_b oat_winrect_close_small\");\r\n\t\t} else {\r\n\t\t\ta.dom.buttons.c = OAT.Dom.create(\"div\", {}, \"oat_winrect_close_b\");\r\n\t\t}\r\n\t\tOAT.addImageNode(a.dom.buttons.c, \"close\", \"\");\r\n\r\n\t\tOAT.Dom.append([a.dom.title, a.dom.buttons.c]);\r\n\r\n\t\ta.outerResizeTo = function (b, c) {\r\n\t\t\ta.dom.container.style.width = b ? b + \"px\" : \"auto\";\r\n\t\t\ta.dom.container.style.height = c ? c + \"px\" : \"auto\"\r\n\t\t}\r\n\t};\r\n\tOAT.WinROUND = function (a) {\r\n\t\tOAT.Style.include(\"winround.css\");\r\n\t\ta.dom.container = OAT.Dom.create(\"div\", {\r\n\t\t\tposition: \"absolute\"\r\n\t\t}, \"oat_winround_container\");\r\n\t\ta.dom.resizeContainer = a.dom.container;\r\n\t\ta.dom.table = OAT.Dom.create(\"table\", {}, \"oat_winround_wrapper\");\r\n\t\ta.dom.tr_t = OAT.Dom.create(\"tr\", {});\r\n\t\ta.dom.td_lt = OAT.Dom.create(\"td\", {}, \"oat_winround_lt\");\r\n\t\ta.dom.td_t = OAT.Dom.create(\"td\", {}, \"oat_winround_t\");\r\n\t\ta.dom.td_rt = OAT.Dom.create(\"td\", {}, \"oat_winround_rt\");\r\n\t\ta.dom.tr_m = OAT.Dom.create(\"tr\", {});\r\n\t\ta.dom.td_l = OAT.Dom.create(\"td\", {}, \"oat_winround_l\");\r\n\t\ta.dom.td_m = OAT.Dom.create(\"td\", {}, \"oat_winround_m\");\r\n\t\ta.dom.td_r = OAT.Dom.create(\"td\", {}, \"oat_winround_r\");\r\n\t\ta.dom.tr_b = OAT.Dom.create(\"tr\", {});\r\n\t\ta.dom.td_lb = OAT.Dom.create(\"td\", {}, \"oat_winround_lb\");\r\n\t\ta.dom.td_b = OAT.Dom.create(\"td\", {}, \"oat_winround_b\");\r\n\t\ta.dom.td_rb = OAT.Dom.create(\"td\", {}, \"oat_winround_rb\");\r\n\t\ta.dom.content = OAT.Dom.create(\"div\", {}, \"oat_winround_content\");\r\n\t\ta.dom.title = OAT.Dom.create(\"div\", {}, \"oat_winround_title\");\r\n\t\ta.dom.caption = OAT.Dom.create(\"span\", {}, \"oat_winround_caption\");\r\n\t\ta.dom.status = OAT.Dom.create(\"div\", {}, \"oat_winround_status\");\r\n\t\t-1 != a.options.visibleButtons.indexOf(\"c\") && (a.dom.buttons.c = OAT.Dom.create(\"div\", {}, \"oat_winround_close_b\"), OAT.Dom.append([a.dom.title, a.dom.buttons.c]));\r\n\t\t-1 != a.options.visibleButtons.indexOf(\"r\") && (a.dom.buttons.r = OAT.Dom.create(\"div\", {}, \"oat_winround_resize_b\"), OAT.Dom.append([a.dom.td_rb, a.dom.buttons.r]));\r\n\t\tOAT.Dom.append([a.dom.title, a.dom.caption]);\r\n\t\tOAT.Browser.isIE ? (\r\n\t\t\tOAT.addTextNode(a.dom.container, '<table class=\"oat_winround_wrapper\"><tr><td class=\"oat_winround_lt\"></td><td class=\"oat_winround_t\"></td><td class=\"oat_winround_rt\"></td></tr><tr><td class=\"oat_winround_l\"></td><td class=\"oat_winround_m\"></td><td class=\"oat_winround_r\"></td></tr><tr><td class=\"oat_winround_lb\"></td><td class=\"oat_winround_b\"></td><td class=\"oat_winround_rb\"></td></tr></table>'),\r\n\t\t\ta.dom.container.childNodes[0].childNodes[0].childNodes[0].childNodes[1].appendChild(a.dom.title), a.dom.container.childNodes[0].childNodes[0].childNodes[1].childNodes[1].appendChild(a.dom.content), a.dom.container.childNodes[0].childNodes[0].childNodes[2].childNodes[1].appendChild(a.dom.status), a.dom.container.childNodes[0].childNodes[0].childNodes[2].childNodes[2].appendChild(a.dom.buttons.r)) : (OAT.Dom.append([a.dom.tr_t, a.dom.td_lt, a.dom.td_t, a.dom.td_rt]), OAT.Dom.append([a.dom.tr_m, a.dom.td_l, a.dom.td_m, a.dom.td_r]), OAT.Dom.append([a.dom.tr_b, a.dom.td_lb, a.dom.td_b, a.dom.td_rb]), OAT.Dom.append([a.dom.table, a.dom.tr_t, a.dom.tr_m, a.dom.tr_b]), OAT.Dom.append([a.dom.td_t, a.dom.title]), OAT.Dom.append([a.dom.td_m, a.dom.content]), OAT.Dom.append([a.dom.td_b, a.dom.status]), OAT.Dom.append([a.dom.container, a.dom.table]));\r\n\t\ta.outerResizeTo = function (b, c) {\r\n\t\t\ta.dom.container.style.width = b ? b + \"px\" : \"auto\";\r\n\t\t\ta.dom.container.style.height = c ? c + \"px\" : \"auto\"\r\n\t\t}\r\n\t};\r\n\tOAT.WinODS = function (a) {\r\n\t\tOAT.Style.include(\"winods.css\");\r\n\t\ta.dom.container = OAT.Dom.create(\"div\", {\r\n\t\t\tposition: \"absolute\"\r\n\t\t}, \"oat_winods_container\");\r\n\t\ta.dom.resizeContainer = a.dom.container;\r\n\t\ta.dom.content = OAT.Dom.create(\"div\", {}, \"oat_winods_content\");\r\n\t\ta.dom.title = OAT.Dom.create(\"div\", {}, \"oat_winods_title\");\r\n\t\ta.dom.caption = OAT.Dom.create(\"span\", {}, \"oat_winods_caption\");\r\n\t\ta.dom.status = OAT.Dom.create(\"div\", {}, \"oat_winods_status\");\r\n\t\tOAT.Dom.append([a.dom.container, a.dom.title, a.dom.content, a.dom.status]);\r\n\t\t-1 != a.options.visibleButtons.indexOf(\"c\") && (a.dom.buttons.c = OAT.Dom.create(\"div\", {}, \"oat_winods_close_b\"), OAT.Dom.append([a.dom.title, a.dom.buttons.c]));\r\n\t\t-1 != a.options.visibleButtons.indexOf(\"r\") && (a.dom.buttons.r = OAT.Dom.create(\"div\", {}, \"oat_winods_resize_b\"), OAT.Dom.append([a.dom.container, a.dom.buttons.r]));\r\n\t\tOAT.Dom.append([a.dom.title, a.dom.caption]);\r\n\t\ta.outerResizeTo = function (b, c) {\r\n\t\t\ta.dom.container.style.width = b ? b + \"px\" : \"auto\";\r\n\t\t\ta.dom.container.style.height = c ? c + \"px\" : \"auto\"\r\n\t\t}\r\n\t};\r\n\tOAT.WinManager = {\r\n\t\tstackingGroups: {},\r\n\t\taddWindow: function (a, b) {\r\n\t\t\tif (a in OAT.WinManager.stackingGroups)\r\n\t\t\t\tvar c = OAT.WinManager.stackingGroups[a];\r\n\t\t\telse\r\n\t\t\t\tc = new OAT.Layers(a), OAT.WinManager.stackingGroups[a] = c\r\n\t\t\tc.addLayer(b, \"click\")\r\n\t\t},\r\n\t\tremoveWindow: function () {\r\n\t\t\tif (zI in OAT.WinManager.stackingGroups)\r\n\t\t\t\tvar a = OAT.WinManager.stackingGroups[zI];\r\n\t\t\telse\r\n\t\t\t\ta = new OAT.Layers(zI), OAT.WinManager.stackingGroups[zI] = a\r\n\t\t\ta.removeLayer(container)\r\n\t\t}\r\n\t};\r\n\ttry {\r\n\t\tOAT.Loader.featureLoaded(\"win\");\r\n\t} catch (ERROR) {\r\n\r\n\t}\r\n\r\n\tOAT.Resize = {\r\n\t\tTYPE_X: 1, TYPE_Y: 2, TYPE_XY: 3, element: [], mouse_x: 0, mouse_y: 0, move: function (a) {\r\n\t\t\tif (OAT.Resize.element.length) {\r\n\t\t\t\tfor (var e = a.clientX - OAT.Resize.mouse_x, f = a.clientY - OAT.Resize.mouse_y, b = 1, c = 0; c < OAT.Resize.element.length; c++) {\r\n\t\t\t\t\tvar d = OAT.Resize.element[c][0], d = OAT.Dom.getWH(d), i = OAT.Resize.element[c][2], g = e, h = f; switch (OAT.Resize.element[c][1]) {\r\n\t\t\t\t\t\tcase OAT.Resize.TYPE_X: h = 0; break; case -OAT.Resize.TYPE_X: g = -e; h = 0; break; case OAT.Resize.TYPE_Y: g = 0; break; case -OAT.Resize.TYPE_Y: g = 0; h = -f; break; case -OAT.Resize.TYPE_XY: g =\r\n\t\t\t\t\t\t\t-e, h = -f\r\n\t\t\t\t\t}i(d[0] + g, d[1] + h) && (b = 0)\r\n\t\t\t\t} if (b) {\r\n\t\t\t\t\tfor (c = 0; c < OAT.Resize.element.length; c++)switch (d = OAT.Resize.element[c][0], OAT.Resize.element[c][1]) { case OAT.Resize.TYPE_X: OAT.Dom.resizeBy(d, e, 0); break; case -OAT.Resize.TYPE_X: OAT.Dom.resizeBy(d, -e, 0); break; case OAT.Resize.TYPE_Y: OAT.Dom.resizeBy(d, 0, f); break; case -OAT.Resize.TYPE_Y: OAT.Dom.resizeBy(d, 0, -f); break; case OAT.Resize.TYPE_XY: OAT.Dom.resizeBy(d, e, f); break; case -OAT.Resize.TYPE_XY: OAT.Dom.resizeBy(d, -e, -f) }OAT.Resize.mouse_x = a.clientX; OAT.Resize.mouse_y =\r\n\t\t\t\t\t\ta.clientY\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}, up: function () { for (var a = 0; a < OAT.Resize.element.length; a++)OAT.Resize.element[a][3](); OAT.Resize.element = [] }, create: function (a, e, f, b, c) {\r\n\t\t\tvar d = OAT.$(a), a = OAT.$(e), e = function () { return !1 }, i = function () { return !1 }; b && (e = b); c && (i = c); switch (f) { case OAT.Resize.TYPE_XY: d.style.cursor = \"nw-resize\"; break; case OAT.Resize.TYPE_X: d.style.cursor = \"w-resize\"; break; case OAT.Resize.TYPE_Y: d.style.cursor = \"n-resize\" }b = function (a) {\r\n\t\t\t\tOAT.Resize.element = d._Resize_movers; OAT.Resize.mouse_x = a.clientX; OAT.Resize.mouse_y = a.clientY;\r\n\t\t\t\ta.cancelBubble = !0\r\n\t\t\t}; d._Resize_movers || (OAT.Dom.attach(d, \"mousedown\", b), d._Resize_movers = []); d._Resize_movers.push([a, f, e, i])\r\n\t\t}, remove: function (a, e) { var f = OAT.$(a); OAT.$(e); if (f._Resize_movers) { for (var b = -1, c = 0; c < f._Resize_movers.length; c++)f._Resize_movers[c][0] == e && (b = c); -1 != b && f._Resize_movers.splice(b, 1) } }, removeAll: function (a) { a = OAT.$(a); a._Resize_movers && (a._Resize_movers = []) }, createDefault: function (a, e, f) {\r\n\t\t\tif (OAT.Preferences.allowDefaultResize) {\r\n\t\t\t\tvar b = OAT.Dom.create(\"div\", {\r\n\t\t\t\t\tposition: \"absolute\", width: \"10px\",\r\n\t\t\t\t\theight: \"10px\", right: \"0px\", fontSize: \"1px\", bottom: \"0px\"\r\n\t\t\t\t}); a.appendChild(b); OAT.Resize.create(b, a, OAT.Resize.TYPE_XY, e, f); OAT.Dom.hide(b); var c = function () { b._Resize_pending && OAT.Dom.hide(b) }; OAT.Dom.attach(a, \"mouseover\", function () { OAT.Dom.show(b); b._Resize_pending = 0 }); OAT.Dom.attach(a, \"mouseout\", function () { b._Resize_pending = 1; setTimeout(c, 2E3) })\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tif(typeof document != \"undefined\") { \r\n\t\tOAT.Dom.attach(document, \"mousemove\", OAT.Resize.move);\r\n\t\tOAT.Dom.attach(document, \"mouseup\", OAT.Resize.up);\r\n\t}\r\n\ttry {\r\n\t\tOAT.Loader.featureLoaded(\"resize\");\r\n\t} catch (ERROR) {\r\n\r\n\t}\r\n\r\n\tOAT.XMLHTTP = function () {\r\n\t\tthis.obj = this.iframe = !1;\r\n\t\tthis.open = function (a, c, d) {\r\n\t\t\tthis.iframe ? this.temp_src = c : this.obj.open(a, c, d)\r\n\t\t};\r\n\t\tthis.send = function (a) {\r\n\t\t\tthis.iframe ? this.ifr.src = this.temp_src : this.obj.send(a)\r\n\t\t};\r\n\t\tthis.setResponse = function (a) {\r\n\t\t\tthis.iframe ? OAT.Dom.attach(this.ifr, \"load\", a) : this.obj.onreadystatechange = a\r\n\t\t};\r\n\t\tthis.getResponseText = function () {\r\n\r\n\t\t};\r\n\t\tthis.getResponseXML = function () {\r\n\t\t\treturn this.iframe ? (alert(\"IFRAME mode active -> XML data not supported\"), \"\") : this.obj.responseXML\r\n\t\t};\r\n\t\tthis.getReadyState = function () {\r\n\t\t\treturn this.iframe ? 4 : this.obj.readyState\r\n\t\t};\r\n\t\tthis.getStatus = function () {\r\n\t\t\treturn this.iframe ? 200 : this.obj.status\r\n\t\t};\r\n\t\tthis.setRequestHeader = function (a, c) {\r\n\t\t\tthis.iframe || this.obj.setRequestHeader(a, c)\r\n\t\t};\r\n\t\tthis.getAllResponseHeaders = function () {\r\n\t\t\treturn !this.iframe ? this.obj.getAllResponseHeaders() : {}\r\n\t\t};\r\n\t\tthis.isIframe = function () {\r\n\t\t\treturn this.iframe\r\n\t\t};\r\n\t\twindow.XMLHttpRequest ? this.obj = new XMLHttpRequest : window.ActiveXObject && (this.obj = new ActiveXObject(\"Microsoft.XMLHTTP\"));\r\n\t\tthis.obj || (this.iframe = !0, this.ifr = OAT.Dom.create(\"iframe\"), this.ifr.style.display = \"none\", this.ifr.src = \"javascript:;\", document.body.appendChild(this.ifr))\r\n\t};\r\n\tOAT.XMLHTTP_supported = function () {\r\n\t\treturn !(new OAT.XMLHTTP).isIframe()\r\n\t};\r\n\ttry {\r\n\t\tOAT.Loader.featureLoaded(\"ajax\");\r\n\t} catch (ERROR) {\r\n\r\n\t}\r\n\r\n\r\n\tOAT.AnchorData = { active: !1, window: !1 };\r\n\tOAT.Anchor = {\r\n\t\tappendContent: function (b) {\r\n\t\t\tif (b.content && b.window) {\r\n\t\t\t\t\"function\" == typeof b.content && (b.content = b.content());\r\n\t\t\t\tvar d = b.window;\r\n\t\t\t\tOAT.Dom.clear(d.dom.content);\r\n\t\t\t\td.dom.content.appendChild(b.content); OAT.Anchor.fixSize(d)\r\n\t\t\t}\r\n\t\t},\r\n\t\tcallForData: function (b, d) {\r\n\t\t\tvar e = b.window;\r\n\t\t\tb.stat = 1;\r\n\r\n\t\t\tb.status && (OAT.addTextNode(e.dom.status, b.status));\r\n\t\t\tvar a = b.datasource;\r\n\t\t\tif (a) {\r\n\t\t\ta.connection = b.connection; var f = b.elm.innerHTML, c = function () {\r\n\t\t\t\te.dom.caption.innerHTML = b.elm.innerHTML;\r\n\t\t\t\tif (b.title) e.dom.caption.innerHTML = b.title\r\n\t\t\t}; a.bindRecord(c); a.bindEmpty(c)\r\n\t\t\t}\r\n\t\t\tswitch (b.result_control) {\r\n\t\t\t\tcase \"grid\": c = new OAT.FormObject.grid(0, 0, 0, 1); c.showAll = !0; b.content = c.elm; c.elm.style.position = \"relative\"; c.init(); a.bindRecord(c.bindRecordCallback); a.bindPage(c.bindPageCallback); a.bindHeader(c.bindHeaderCallback); break; case \"form\": var h = !1; b.content = OAT.Dom.create(\"div\");\r\n\t\t\t\t\th = new OAT.Form(b.content, { onDone: function () { e.resizeTo(h.totalWidth + 5, h.totalHeight + 5); b.anchorTo(d[0], d[1]) } }); a.bindFile(function (a) {\r\n\t\t\t\t\t\ta = OAT.Xml.createXmlDoc(a);\r\n\t\t\t\t\t\th.createFromXML(a)\r\n\t\t\t\t\t}); break; case \"timeline\": c = new OAT.FormObject.timeline(0, 20, 0); b.content = c.elm; c.elm.style.position = \"relative\"; c.elm.style.width = b.width - 5 + \"px\"; c.elm.style.height = b.height - 65 + \"px\"; c.init(); for (var i = 0; i < c.datasources[0].fieldSets.length; i++)c.datasources[0].fieldSets[i].realIndexes = [i]; a.bindPage(c.bindPageCallback)\r\n\t\t\t}OAT.Anchor.appendContent(b); if (a) {\r\n\t\t\t\ta.options.query = a.options.query.replace(/\\$link_name/g, f); b.connection.options.endpoint = b.href; b.connection.options.url = b.href; switch (a.type) {\r\n\t\t\t\t\tcase OAT.DataSourceData.TYPE_SPARQL: f =\r\n\t\t\t\t\t\tnew OAT.SparqlQuery; f.fromString(a.options.query); f = f.variables.length ? \"format=xml\" : \"format=rdf\"; a.options.query = \"query=\" + encodeURIComponent(a.options.query) + \"&\" + f; break; case OAT.DataSourceData.TYPE_GDATA: a.options.query = a.options.query ? \"q=\" + encodeURIComponent(a.options.query) : \"\"\r\n\t\t\t\t}a.advanceRecord(0)\r\n\t\t\t}\r\n\t\t}, fixSize: function (b) {\r\n\t\t\tsetTimeout(\r\n\t\t\t\tfunction () {\r\n\t\t\t\t\t/*if(OAT.AJAX.requests.length)\r\n\t\t\t\t\t\tOAT.Anchor.fixSize(b);\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tfor(var d = OAT.Dom.getWH(b.dom.content)[1]; OAT.Dom.getWH(b.dom.content)[1] + 50 > OAT.Dom.getWH(b.dom.container)[1]; ) {650 > OAT.Dom.getWH(b.dom.container)[0] && (b.dom.container.style.width = OAT.Dom.getWH(b.dom.container)[0] + 100 + \"px\");\r\n\t\t\t\t\t\t\tif(d == OAT.Dom.getWH(b.dom.content)[1]) {\r\n\t\t\t\t\t\t\t\tb.dom.container.style.width = OAT.Dom.getWH(b.dom.container)[0] - 100 + \"px\";\r\n\t\t\t\t\t\t\t\t300 < OAT.Dom.getWH(b.dom.content)[1] && (b.dom.content.style.height = \"300px\", b.dom.content.style.overflow = \"auto\");\r\n\t\t\t\t\t\t\t\tb.dom.container.style.height = OAT.Dom.getWH(b.dom.content)[1] + 40 + \"px\";\r\n\t\t\t\t\t\t\t\tbreak\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\td = OAT.Dom.getWH(b.dom.content)[1]\r\n\t\t\t\t\t\t}*/\r\n\t\t\t\t}\r\n\t\t\t\t, 50)\r\n\t\t}\r\n\t\t, assign: function (b, d) {\r\n\t\t\tvar e = OAT.$(b),\r\n\t\t\t\ta = {\r\n\t\t\t\t\thref: !1,\r\n\t\t\t\t\tnewHref: \"javascript:void(0)\",\r\n\t\t\t\t\tconnection: !1,\r\n\t\t\t\t\tdatasource: !1,\r\n\t\t\t\t\tcontent: !1,\r\n\t\t\t\t\tstatus: !1,\r\n\t\t\t\t\ttitle: !1,\r\n\t\t\t\t\tresult_control: \"grid\",\r\n\t\t\t\t\tactivation: \"hover\",\r\n\t\t\t\t\twidth: 340,\r\n\t\t\t\t\theight: !1,\r\n\t\t\t\t\telm: e,\r\n\t\t\t\t\twindow: !1,\r\n\t\t\t\t\tarrow: !1,\r\n\t\t\t\t\ttype: OAT.WinData.TYPE_RECT,\r\n\t\t\t\t\tvisibleButtons: \"cr\",\r\n\t\t\t\t\tenabledButtons: \"cr\",\r\n\t\t\t\t\ttemplate: !1\r\n\t\t\t\t},\r\n\t\t\t\tf;\r\n\t\t\tfor (f in d)\r\n\t\t\t\ta[f] = d[f];\r\n\t\t\tvar c = new OAT.Win({\r\n\t\t\t\touterWidth: a.width,\r\n\t\t\t\touterHeight: a.height,\r\n\t\t\t\ttitle: \"\",\r\n\t\t\t\ttype: a.type,\r\n\t\t\t\tstatus: a.status,\r\n\t\t\t\tvisibleButtons: a.visibleButtons,\r\n\t\t\t\tenabledButtons: a.enabledButtons,\r\n\t\t\t\ttemplate: a.template,\r\n\t\t\t\tcontainerQuery: a.containerQuery\r\n\t\t\t});\r\n\t\t\tOAT.Dom.attach(c.dom.container, \"mouseover\", function () {\r\n\t\t\t\tvar a = OAT.AnchorData.active; a && \"hover\" == a.activation && a.endClose()\r\n\t\t\t});\r\n\t\t\tOAT.Dom.attach(c.dom.container, \"mouseout\", function () {\r\n\t\t\t\tvar a = OAT.AnchorData.active;\r\n\t\t\t\ta && \"hover\" == a.activation && a.startClose()\r\n\t\t\t});\r\n\t\t\tf = OAT.Dom.create(\"div\", {});\r\n\t\t\t//OAT.Dom.append([c.dom.container, f]);\r\n\r\n\t\t\t//a.arrow = f;\r\n\t\t\ta.window = c;\r\n\t\t\tc.close = function () {\r\n\t\t\t\tOAT.Dom.hide(c.dom.container)\r\n\t\t\t};\r\n\t\t\tc.onclose = c.close;\r\n\t\t\tc.close();\r\n\t\t\ta.stat = 0;\r\n\t\t\t!a.href && \"href\" in e && (a.href = e.href);\r\n\t\t\t\"a\" == e.tagName.toString().toLowerCase() && OAT.Dom.changeHref(e, a.newHref);\r\n\t\t\ta.displayRef = function (b) {\r\n\t\t\t\tvar c = a.window;\r\n\t\t\t\tc.hide();\r\n\t\t\t\tOAT.AnchorData.active = a;\r\n\t\t\t\tb = OAT.Dom.eventPos(b);\r\n\t\t\t\tOAT.AnchorData.window = c;\r\n\t\t\t\ta.stat ? OAT.Anchor.appendContent(a) : OAT.Anchor.callForData(a, b);\r\n\t\t\t\ta.activation == \"focus\" && (b = OAT.Dom.position(e));\r\n\t\t\t\ta.anchorTo(b[0], b[1]);\r\n\t\t\t\tc.show();\r\n\t\t\t\ta.anchorTo(b[0], b[1])\r\n\t\t\t};\r\n\t\t\ta.displayRef2 = function (b) {\r\n\t\t\t\tvar c = a.window;\r\n\t\t\t\tc.hide();\r\n\t\t\t\tOAT.AnchorData.active = a;\r\n\t\t\t\t//b = OAT.Dom.eventPos(b);\r\n\t\t\t\tOAT.AnchorData.window = c;\r\n\t\t\t\ta.stat ? OAT.Anchor.appendContent(a) : OAT.Anchor.callForData(a, b);\r\n\t\t\t\ta.activation == \"focus\" && (b = OAT.Dom.position(e));\r\n\t\t\t\ta.anchorTo(b[0], b[1]);\r\n\t\t\t\tc.show();\r\n\t\t\t\ta.anchorTo(b[0], b[1])\r\n\t\t\t};\r\n\t\t\ta.anchorTo = function (b, c) {\r\n\t\t\t\tvar e = a.window, d = OAT.Dom.getFreeSpace(b, c), f = OAT.Dom.getWH(e.dom.container);\r\n\t\t\t\tif (d[1])\r\n\t\t\t\t\tvar j = c - 30 - f[1], g = \"bottom\";\r\n\t\t\t\telse {\r\n\t\t\t\t\tj = c + 30;\r\n\t\t\t\t\tg = \"top\"\r\n\t\t\t\t}\r\n\t\t\t\tif (d[0]) {\r\n\t\t\t\t\td = b + 20 - f[0];\r\n\t\t\t\t\tg = g + \"right\"\r\n\t\t\t\t} else {\r\n\t\t\t\t\td = b - 30;\r\n\t\t\t\t\tg = g + \"left\"\r\n\t\t\t\t} d < 0 && (d = 10);\r\n\t\t\t\tj < 0 && (j = 10);\r\n\t\t\t\t//OAT.Dom.addClass(a.arrow, \"oat_anchor_arrow_\" + g);\r\n\t\t\t\te.moveTo(d, j - 20)\r\n\t\t\t};\r\n\t\t\ta.closeRef = function () {\r\n\r\n\t\t\t\tif (a.closeFlag) {\r\n\t\t\t\t\ta.window.hide();\r\n\t\t\t\t\tOAT.AnchorData.active = false\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\ta.close = function () { a.window.hide() };\r\n\t\t\ta.startClose = function () { a.closeFlag = 1; setTimeout(a.closeRef, 1E3) };\r\n\t\t\ta.endClose = function () { a.closeFlag = 0 };\r\n\t\t\tswitch (a.activation) {\r\n\t\t\t\tcase \"hover\": OAT.Dom.attach(e, \"mouseover\", a.displayRef);\r\n\t\t\t\t\tOAT.Dom.attach(e, \"mouseout\", a.startClose);\r\n\t\t\t\t\tbreak; case \"click\": OAT.Dom.attach(e, \"click\", a.displayRef);\r\n\t\t\t\t\tbreak; case \"dblclick\": OAT.Dom.attach(e, \"dblclick\", a.displayRef);\r\n\t\t\t\t\tbreak; case \"focus\": OAT.Dom.attach(e, \"focus\", a.displayRef), OAT.Dom.attach(e, \"blur\", a.close)\r\n\t\t\t}\r\n\r\n\t\t\treturn a\r\n\r\n\t\t},\r\n\r\n\r\n\t\tclose: function (b, d) {\r\n\t\t\tb = OAT.$(b);\r\n\t\t\t\"BODY\" != b.tagName && (b.className.match(/^oat_win.+_container$/) ? (OAT.Dom.hide(b), d && this.close(b.parentNode)) : this.close(b.parentNode))\r\n\t\t},\r\n\t\topenAnchor: function () {\r\n\t\t\tvar c = this.window;\r\n\t\t\tc.hide();\r\n\t\t\tOAT.AnchorData.active = this;\r\n\t\t\tb = OAT.Dom.eventPos(b);\r\n\t\t\tOAT.AnchorData.window = c;\r\n\t\t\ta.stat ? OAT.Anchor.appendContent(a) : OAT.Anchor.callForData(a, b);\r\n\t\t\ta.activation == \"focus\" && (b = OAT.Dom.position(e));\r\n\t\t\ta.anchorTo(b[0], b[1]);\r\n\t\t\tc.show();\r\n\t\t\ta.anchorTo(b[0], b[1])\r\n\t\t}\r\n\t};\r\n\ttry {\r\n\t\tOAT.Loader.featureLoaded(\"anchor\");\r\n\t} catch (ERROR) {\r\n\r\n\t}\r\n\r\n\r\n\tOAT.Animation = function (f, d) {\r\n\t\tvar b = this;\r\n\t\tthis.elm = OAT.$(f);\r\n\t\tthis.options = {\r\n\t\t\tdelay: 50,\r\n\t\t\tstartFunction: function () {\r\n\t\t\t},\r\n\t\t\tconditionFunction: function () {\r\n\t\t\t},\r\n\t\t\tstepFunction: function () {\r\n\t\t\t},\r\n\t\t\tstopFunction: function () {\r\n\t\t\t}\r\n\t\t};\r\n\t\tfor (var e in d)\r\n\t\t\tb.options[e] = d[e];\r\n\t\tthis.step = function () {\r\n\t\t\tsetTimeout(function () {\r\n\t\t\t\tb.running && (b.options.conditionFunction(b) ? (b.running = 0, b.options.stopFunction(b), OAT.MSG.send(b, OAT.MSG.ANIMATION_STOP, b)) : (b.options.stepFunction(b), b.step(b)))\r\n\t\t\t}, b.options.delay)\r\n\t\t};\r\n\t\tthis.start = function () {\r\n\t\t\tb.running = 1;\r\n\t\t\tb.options.startFunction(b);\r\n\t\t\tb.step()\r\n\t\t};\r\n\t\tthis.stop = function () {\r\n\t\t\tb.running = 0\r\n\t\t}\r\n\t};\r\n\tOAT.AnimationSize = function (f, d) {\r\n\t\tvar b = this;\r\n\t\tthis.options = {\r\n\t\t\twidth: -1,\r\n\t\t\theight: -1,\r\n\t\t\tdelay: 50,\r\n\t\t\tspeed: 1\r\n\t\t};\r\n\t\tfor (var e in d)\r\n\t\t\tb.options[e] = d[e];\r\n\t\tthis.animation = new OAT.Animation(f, {\r\n\t\t\tdelay: b.options.delay,\r\n\t\t\tstartFunction: function (a) {\r\n\t\t\t\ta.stepX = 0;\r\n\t\t\t\ta.stepY = 0;\r\n\t\t\t\tvar c = OAT.Dom.getWH(a.elm);\r\n\t\t\t\ta.width = c[0];\r\n\t\t\t\ta.height = c[1];\r\n\t\t\t\ta.diffX = -1 == b.options.width ? 0 : b.options.width - c[0];\r\n\t\t\t\ta.diffY = -1 == b.options.height ? 0 : b.options.height - c[1];\r\n\t\t\t\ta.signX = 0 <= a.diffX ? 1 : -1;\r\n\t\t\t\ta.signY = 0 <= a.diffY ? 1 : -1;\r\n\t\t\t\tvar c = a.diffX * a.diffX, d = a.diffY * a.diffY;\r\n\t\t\t\ta.stepX = a.signX * Math.sqrt(b.options.speed * b.options.speed * c / (c + d));\r\n\t\t\t\ta.stepY = a.signY * Math.sqrt(b.options.speed * b.options.speed * d / (c + d))\r\n\t\t\t},\r\n\t\t\tstopFunction: function (a) {\r\n\t\t\t-1 != b.options.width && (a.elm.style.width = b.options.width + \"px\");\r\n\t\t\t\t-1 != b.options.height && (a.elm.style.height = b.options.height + \"px\")\r\n\t\t\t},\r\n\t\t\tconditionFunction: function (a) {\r\n\t\t\t\tvar c = 0 < a.signX ? a.width >= b.options.width : a.width <= b.options.width, a = 0 < a.signY ? a.height >= b.options.height : a.height <= b.options.height;\r\n\t\t\t\t-1 == b.options.width && (c = 1);\r\n\t\t\t\t-1 == b.options.height && (a = 1);\r\n\t\t\t\treturn c && a\r\n\t\t\t},\r\n\t\t\tstepFunction: function (a) {\r\n\t\t\t\ta.width += a.stepX;\r\n\t\t\t\ta.height += a.stepY;\r\n\t\t\t\tvar c = parseInt(a.width), d = parseInt(a.height);\r\n\t\t\t\t-1 != b.options.width && (a.elm.style.width = (0 <= c ? c : 0) + \"px\");\r\n\t\t\t\t-1 != b.options.height && (a.elm.style.height = (0 <= d ? d : 0) + \"px\")\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.start = b.animation.start;\r\n\t\tthis.stop = b.animation.stop\r\n\t};\r\n\tOAT.AnimationPosition = function (f, d) {\r\n\t\tvar b = this;\r\n\t\tthis.options = {\r\n\t\t\tleft: -1,\r\n\t\t\ttop: -1,\r\n\t\t\tdelay: 50,\r\n\t\t\tspeed: 1\r\n\t\t};\r\n\t\tfor (var e in d)\r\n\t\t\tb.options[e] = d[e];\r\n\t\tthis.animation = new OAT.Animation(f, {\r\n\t\t\tdelay: b.options.delay,\r\n\t\t\tstartFunction: function (a) {\r\n\t\t\t\ta.stepX = 0;\r\n\t\t\t\ta.stepY = 0;\r\n\t\t\t\tvar c = OAT.Dom.getLT(a.elm);\r\n\t\t\t\ta.left = c[0];\r\n\t\t\t\ta.top = c[1];\r\n\t\t\t\ta.diffX = -1 == b.options.left ? 0 : b.options.left - c[0];\r\n\t\t\t\ta.diffY = -1 == b.options.top ? 0 : b.options.top - c[1];\r\n\t\t\t\ta.signX = 0 <= a.diffX ? 1 : -1;\r\n\t\t\t\ta.signY = 0 <= a.diffY ? 1 : -1;\r\n\t\t\t\tvar c = a.diffX * a.diffX, d = a.diffY * a.diffY;\r\n\t\t\t\ta.stepX = a.signX * Math.sqrt(b.options.speed * b.options.speed * c / (c + d));\r\n\t\t\t\ta.stepY = a.signY * Math.sqrt(b.options.speed * b.options.speed * d / (c + d))\r\n\t\t\t},\r\n\t\t\tstopFunction: function (a) {\r\n\t\t\t-1 != b.options.left && (a.elm.style.left = b.options.left + \"px\");\r\n\t\t\t\t-1 != b.options.top && (a.elm.style.top = b.options.top + \"px\")\r\n\t\t\t},\r\n\t\t\tconditionFunction: function (a) {\r\n\t\t\t\tvar c = 0 < a.signX ? a.left >= b.options.left : a.left <= b.options.left, a = 0 < a.signY ? a.top >= b.options.top : a.top <= b.options.top;\r\n\t\t\t\t-1 == b.options.left && (c = 1);\r\n\t\t\t\t-1 == b.options.top && (a = 1);\r\n\t\t\t\treturn c && a\r\n\t\t\t},\r\n\t\t\tstepFunction: function (a) {\r\n\t\t\t\ta.left += a.stepX;\r\n\t\t\t\ta.top += a.stepY;\r\n\t\t\t\tvar c = parseInt(a.left), d = parseInt(a.top);\r\n\t\t\t\t-1 != b.options.left && (a.elm.style.left = c + \"px\");\r\n\t\t\t\t-1 != b.options.top && (a.elm.style.top = d + \"px\")\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.start = b.animation.start;\r\n\t\tthis.stop = b.animation.stop\r\n\t};\r\n\tOAT.AnimationOpacity = function (f, d) {\r\n\t\tvar b = this;\r\n\t\tthis.options = {\r\n\t\t\topacity: 1,\r\n\t\t\tdelay: 50,\r\n\t\t\tspeed: 0.1\r\n\t\t};\r\n\t\tfor (var e in d)\r\n\t\t\tb.options[e] = d[e];\r\n\t\tthis.animation = new OAT.Animation(f, {\r\n\t\t\tdelay: b.options.delay,\r\n\t\t\tstartFunction: function (a) {\r\n\t\t\t\ta.opacity = 1;\r\n\t\t\t\t(!OAT.Dom.isKHTML() && navigator.userAgent.match(/Gecko/i)) && (a.opacity = parseFloat(OAT.Dom.style(a.elm, \"opacity\")));\r\n\t\t\t\tif (OAT.isIE()) {\r\n\t\t\t\t\tvar c = OAT.Dom.style(a.elm, \"filter\").match(/alpha\\(opacity=([^\\)]+)\\)/);\r\n\t\t\t\t\tc && (a.opacity = parseFloat(c[1]) / 100)\r\n\t\t\t\t}\r\n\t\t\t\ta.step_ = 1;\r\n\t\t\t\ta.diff = b.options.opacity - a.opacity;\r\n\t\t\t\ta.sign = 0 <= a.diff ? 1 : -1;\r\n\t\t\t\ta.step_ = a.sign * b.options.speed\r\n\t\t\t},\r\n\t\t\tstopFunction: function (a) {\r\n\t\t\t\tOAT.Style.opacity(a.elm, b.options.opacity)\r\n\t\t\t},\r\n\t\t\tconditionFunction: function (a) {\r\n\t\t\t\treturn 0 < a.sign ? a.opacity + 1.0E-4 >= b.options.opacity : a.opacity - 1.0E-4 <= b.options.opacity\r\n\t\t\t},\r\n\t\t\tstepFunction: function (a) {\r\n\t\t\t\ta.opacity += a.step_;\r\n\t\t\t\tOAT.Style.opacity(a.elm, a.opacity)\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.start = b.animation.start;\r\n\t\tthis.stop = b.animation.stop\r\n\t};\r\n\tOAT.AnimationCSS = function (f, d) {\r\n\t\tvar b = this;\r\n\t\tthis.options = {\r\n\t\t\tdelay: 50,\r\n\t\t\tproperty: !1,\r\n\t\t\tstart: 0,\r\n\t\t\tstep: 1,\r\n\t\t\tstop: 10\r\n\t\t};\r\n\t\tfor (var e in d)\r\n\t\t\tb.options[e] = d[e];\r\n\t\tthis.animation = new OAT.Animation(f, {\r\n\t\t\tdelay: b.options.delay,\r\n\t\t\tstartFunction: function (a) {\r\n\t\t\t\ta[b.options.property] = b.options.start;\r\n\t\t\t\ta.elm.style[b.options.property] = b.options.start\r\n\t\t\t},\r\n\t\t\tstopFunction: function (a) {\r\n\t\t\t\ta.elm.style[b.options.property] = b.options.stop\r\n\t\t\t},\r\n\t\t\tconditionFunction: function (a) {\r\n\t\t\t\treturn a[b.options.property] == b.options.stop\r\n\t\t\t},\r\n\t\t\tstepFunction: function (a) {\r\n\t\t\t\ta[b.options.property] += b.options.step;\r\n\t\t\t\ta.elm.style[b.options.property] = a[b.options.property]\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.start = b.animation.start;\r\n\t\tthis.stop = b.animation.stop\r\n\t};\r\n\ttry {\r\n\t\tOAT.Loader.featureLoaded(\"animation\");\r\n\t} catch (ERROR) {\r\n\r\n\t}\r\n\r\n\tOAT.getURL = function () {\r\n\t\ttry {\r\n\t\t\tvar dir = location.href.substring(0, location.href.lastIndexOf('\\/'));\r\n\t\t\tvar dom = dir;\r\n\t\t\tif (dom.substr(0, 7) == 'http:\\/\\/')\r\n\t\t\t\tdom = dom.substr(7);\r\n\t\t\tvar path = '';\r\n\t\t\tvar pos = dom.indexOf('\\/');\r\n\t\t\tif (pos > -1) {\r\n\t\t\t\tpath = dom.substr(pos + 1);\r\n\t\t\t\tdom = dom.substr(0, pos);\r\n\t\t\t}\r\n\t\t\tvar page = location.href.substring(dir.length + 1, location.href.length + 1);\r\n\t\t\tvar pos = page.indexOf('?');\r\n\t\t\tif (pos > -1) {\r\n\t\t\t\tpage = page.substring(0, pos);\r\n\t\t\t}\r\n\t\t\tpos = page.indexOf('#');\r\n\t\t\tif (pos > -1) {\r\n\t\t\t\tpage = page.substring(0, pos);\r\n\t\t\t}\r\n\t\t\tvar ext = '';\r\n\t\t\tpos = page.indexOf('.');\r\n\t\t\tif (pos > -1) {\r\n\t\t\t\text = page.substring(pos + 1);\r\n\t\t\t\tpage = page.substr(0, pos);\r\n\t\t\t}\r\n\t\t\tvar file = page;\r\n\t\t\tif (ext != '')\r\n\t\t\t\tfile += '.' + ext;\r\n\t\t\tif (file == '')\r\n\t\t\t\tpage = 'index';\r\n\t\t\targs = location.search.substr(1).split(\"?\");\r\n\r\n\t\t\treturn path + page;\r\n\t\t} catch (ERROR) {\r\n\t\t\treturn \"\";\r\n\t\t}\r\n\t}\r\n\r\n\tOAT.PartialSort = function (data, a, z, index, arrayLength, sortIntMemory) {\r\n\t\tvar partialArray = []\r\n\t\tfor (var p = 0; p <= z - a; p++) {\r\n\t\t\tpartialArray[p] = data[a + p]\r\n\t\t}\r\n\r\n\t\tif (sortIntMemory[index]) {\r\n\t\t\tpartialArray.sort((function (index) {\r\n\t\t\t\treturn function (a, b) {\r\n\t\t\t\t\treturn (parseInt(a[index]) === parseInt(b[index]) ? 0 : (parseInt(a[index]) < parseInt(b[index]) ? -1 : 1));\r\n\t\t\t\t};\r\n\t\t\t})(index));\r\n\t\t} else {\r\n\t\t\tpartialArray.sort((function (index) {\r\n\t\t\t\treturn function (a, b) {\r\n\t\t\t\t\treturn (a[index] === b[index] ? 0 : (a[index] < b[index] ? -1 : 1));\r\n\t\t\t\t};\r\n\t\t\t})(index));\r\n\t\t}\r\n\r\n\t\t//recursive call\r\n\t\tif (index < arrayLength - 1) {\r\n\t\t\tvar actualVal = partialArray[0][index];\r\n\t\t\tvar initPos = 0;\r\n\t\t\tfor (var i = 0; i < partialArray.length; i++) {\r\n\t\t\t\tif ((actualVal != partialArray[i][index])) {\r\n\t\t\t\t\tactualVal = partialArray[i][index]\r\n\t\t\t\t\tpartialArray = OAT.PartialSort(partialArray, initPos, i - 1, index + 1, arrayLength, sortIntMemory)\r\n\t\t\t\t\tinitPos = i;\r\n\t\t\t\t} else if ((i == partialArray.length - 1)) {\r\n\t\t\t\t\tpartialArray = OAT.PartialSort(partialArray, initPos, i, index + 1, arrayLength, sortIntMemory)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor (var p = a; p <= z; p++) {\r\n\t\t\tdata[p] = partialArray[p - a]\r\n\t\t}\r\n\t\treturn data\r\n\t}\r\n\r\n\r\n\r\n\tvar currPageNumber = [];\r\n\r\n\tOAT.partialTablePagination = function (container, settings) {\r\n\t\tvar defaults = {\r\n\t\t\t\trowsPerPage: 5,\r\n\t\t\t\tcurrPage: 1,\r\n\t\t\t\tjstype: \"pivot\",\r\n\t\t\t\toptionsForRows: [5, 10, 25, 50, 100],\r\n\t\t\t\tignoreRows: [],\r\n\t\t\t\ttopNav: false,\r\n\t\t\t\tcantPages: 10\r\n\t\t};\r\n\t\tsettings = jQuery.extend(defaults, settings);\r\n\t\t\r\n\t\treturn container.each(function () {\r\n\t\t\t\tvar table = jQuery(this)[0];\r\n\t\t\t\tvar totalPagesId, currPageId, rowsPerPageId, firstPageId, prevPageId, nextPageId, lastPageId;\r\n\t\t\t\ttotalPagesId = '#tablePagination_totalPages';\r\n\t\t\t\tcurrPageId = '#tablePagination_currPage';\r\n\t\t\t\trowsPerPageId = '#' + settings.controlName + 'tablePagination_rowsPerPage';\r\n\t\t\t\tfirstPageId = '#tablePagination_firstPage';\r\n\t\t\t\tprevPageId = '#tablePagination_prevPage';\r\n\t\t\t\tnextPageId = '#tablePagination_nextPage';\r\n\t\t\t\tlastPageId = '#tablePagination_lastPage';\r\n\t\t\t\tvar tblLocation = (defaults.topNav) ? \"prev\" : \"next\";\r\n\r\n\t\t\t\ttry {\r\n\t\t\t\t\tdefaults.rowsPerPage = parseInt(defaults.rowsPerPage);\r\n\t\t\t\t} catch (ERROR) {\r\n\t\t\t\t\tdefaults.rowsPerPage = 10;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar possibleTableRows = jQuery.makeArray(jQuery('tbody tr', table));\r\n\t\t\t\tvar tableRows = jQuery.grep(possibleTableRows, function (value, index) {\r\n\t\t\t\t\treturn (jQuery.inArray(value, defaults.ignoreRows) == -1);\r\n\t\t\t\t}, false)\r\n\r\n\t\t\t\tvar numRows = tableRows.length\r\n\t\t\t\tvar totalPages = resetTotalPages();\r\n\t\t\t\tcurrPageNumber[settings.controlName] = (defaults.currPage > totalPages) ? 1 : defaults.currPage;\r\n\t\t\t\tif (jQuery.inArray(defaults.rowsPerPage, defaults.optionsForRows) == -1)\r\n\t\t\t\t\tdefaults.optionsForRows.push(defaults.rowsPerPage);\r\n\r\n\t\t\t\tfunction resetTotalPages() {\r\n\t\t\t\t\treturn defaults.cantPages;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction resetCurrentPage(currPageNum, recalculateCantPages) {\t//sets current page value\r\n\t\t\t\t\tif (currPageNum < 1 || (currPageNum > jQuery(\"#\" + settings.controlName + \"_tablePagination_paginater #tablePagination_totalPages\")[0].innerHTML.replace(\"&nbsp;\", \"\")))\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\tcurrPageNumber[settings.controlName] = currPageNum;\r\n\t\t\t\t\tjQuery(table)[tblLocation]().find(currPageId).val(currPageNumber[settings.controlName]);\r\n\r\n\t\t\t\t\t(currPageNumber[settings.controlName] > 1) ? jQuery(\"#tablePagination_firstPage,#tablePagination_prevPage\").removeClass(\"disabled_pivot_button\") :\r\n\t\t\t\t\t\tjQuery(\"#tablePagination_firstPage,#tablePagination_prevPage\").addClass(\"disabled_pivot_button\");\r\n\r\n\t\t\t\t\t(currPageNumber[settings.controlName] != totalPages) ? jQuery(\"#tablePagination_nextPage,#tablePagination_lastPage\").removeClass(\"disabled_pivot_button\") :\r\n\t\t\t\t\t\tjQuery(\"#tablePagination_nextPage,#tablePagination_lastPage\").addClass(\"disabled_pivot_button\");\r\n\r\n\r\n\t\t\t\t\tif ((settings.control) && (settings.jstype == \"table\")) {\r\n\t\t\t\t\t\tvar cantRows = (recalculateCantPages) ? defaults.rowsPerPage : OAT_JS.grid.gridData[settings.controlUcId].rowsPerPage\r\n\t\t\t\t\t\tsettings.control.getDataForTable(settings.controlUcId, currPageNum, cantRows, recalculateCantPages, \"\", \"\", \"\", \"\", \"\", true)\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tsetTimeout ( function(){\r\n\t\t\t\t\t\t\ttotalPages = settings.control.getActualCantPages(settings.controlUcId);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t(currPageNumber[settings.controlName] != totalPages) ? jQuery(\"#tablePagination_nextPage,#tablePagination_lastPage\").removeClass(\"disabled_pivot_button\") :\r\n\t\t\t\t\t\t\t\tjQuery(\"#tablePagination_nextPage,#tablePagination_lastPage\").addClass(\"disabled_pivot_button\");\r\n\t\t\t\t\t\t} , 500)\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t} else if (settings.control) {\r\n\t\t\t\t\t\tvar cantRows = (recalculateCantPages) ? defaults.rowsPerPage : settings.control.rowsPerPage\r\n\t\t\t\t\t\tsettings.control.getDataForPivot(settings.controlUcId, currPageNum, cantRows, recalculateCantPages, \"\", \"\", \"\", \"\", \"\", true)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction resetPerPageValues() {\r\n\t\t\t\t\tvar isRowsPerPageMatched = false;\r\n\t\t\t\t\tvar optsPerPage = defaults.optionsForRows;\r\n\t\t\t\t\toptsPerPage.sort(function (a, b) { return a - b; });\r\n\t\t\t\t\tvar perPageDropdown = jQuery(table)[tblLocation]().find(rowsPerPageId)[0];\r\n\t\t\t\t\tperPageDropdown.length = 0;\r\n\t\t\t\t\tfor (var i = 0; i < optsPerPage.length; i++) {\r\n\t\t\t\t\t\tif (optsPerPage[i] == defaults.rowsPerPage) {\r\n\t\t\t\t\t\t\tperPageDropdown.options[i] = new Option(optsPerPage[i], optsPerPage[i], true, true);\r\n\t\t\t\t\t\t\tisRowsPerPageMatched = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\tperPageDropdown.options[i] = new Option(optsPerPage[i], optsPerPage[i]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\r\n\r\n\t\t\t\t\tif ((totalPages == 1) || (totalPages == 0)) {\r\n\t\t\t\t\t\tjQuery('#' + settings.controlName + '_tablePagination_paginater').css('display', 'none');\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tjQuery('#' + settings.controlName + '_tablePagination_paginater').css('display', '');\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction createPaginationElements() {\r\n\t\t\t\t\tvar size = 1;\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tvar mul = 100;\r\n\t\t\t\t\t\tif ( (OAT.isWebkit()) &&\r\n\t\t\t\t\t\t\t(!(jQuery(\"#\" + settings.controlName).closest(\".gxwebcomponent\").length > 0))) {\r\n\t\t\t\t\t\t\tmul = mul * 100;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (currPageNumber[settings.controlName] > mul * 10) {\r\n\t\t\t\t\t\t\tif (jQuery(\"#\" + settings.controlName).closest(\".gxwebcomponent\").length > 0) {\r\n\t\t\t\t\t\t\t\tsize = size + 2;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tvar d = currPageNumber[settings.controlName] / mul\r\n\t\t\t\t\t\t\twhile (d > 10) {\r\n\t\t\t\t\t\t\t\td = d / 10;\r\n\t\t\t\t\t\t\t\tsize++;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} catch (ERROR) { }\r\n\r\n\r\n\t\t\t\t\tvar prevButtonsClass = (currPageNumber[settings.controlName] == 1) ? \" disabled_pivot_button\" : \"\"\r\n\t\t\t\t\tvar postButtonsClass = (currPageNumber[settings.controlName] == totalPages) ? \" disabled_pivot_button\" : \"\"\r\n\r\n\r\n\t\t\t\t\tvar ua = navigator.userAgent.toLowerCase();\r\n\t\t\t\t\tvar isAndroid = ua.indexOf(\"android\") > -1;\r\n\t\t\t\t\tif (!(OAT.isSD())) {\r\n\t\t\t\t\t\tvar htmlBuffer = [];\r\n\t\t\t\t\t\thtmlBuffer.push(\"<div id='\" + settings.controlName + \"_tablePagination' class='pivot_pag_div'>\");\r\n\t\t\t\t\t\thtmlBuffer.push(\"<span id='tablePagination_perPage'>\");\r\n\r\n\t\t\t\t\t\thtmlBuffer.push(\"<select id='\" + settings.controlName + \"tablePagination_rowsPerPage'></select>\");\r\n\r\n\t\t\t\t\t\thtmlBuffer.push(\" \" + settings.translations.GXPL_QViewerJSPerPage + \" \");\r\n\t\t\t\t\t\thtmlBuffer.push(\"</span>\");\r\n\t\t\t\t\t\thtmlBuffer.push(\"<span id='\" + settings.controlName + \"_tablePagination_paginater'>\");\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\thtmlBuffer.push(\"<div class='pagefirst \" + prevButtonsClass + \"' id='tablePagination_firstPage' >\");\r\n\t\t\t\t\t\thtmlBuffer.push('<i class=\"material-icons\">first_page</i>')\r\n\t\t\t\t\t\thtmlBuffer.push(\"</div>\")\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\thtmlBuffer.push(\"<div class='pageprev \" + prevButtonsClass + \"' id='tablePagination_prevPage' >\");\r\n\t\t\t\t\t\thtmlBuffer.push('<i class=\"material-icons\">navigate_before</i>')\r\n\t\t\t\t\t\thtmlBuffer.push(\"</div>\")\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\thtmlBuffer.push(\"<span style=''>&nbsp;\" + settings.translations.GXPL_QViewerJSPage + \"&nbsp;</span>\");\r\n\t\t\t\t\t\thtmlBuffer.push(\"<input id='tablePagination_currPage' type='input' value='\" + currPageNumber[settings.controlName] + \"' size='\" + size + \"'>\");\r\n\t\t\t\t\t\thtmlBuffer.push(\"<span>&nbsp;\" + settings.translations.GXPL_QViewerJSOf + \"</span><span id='tablePagination_totalPages'>&nbsp;\" + totalPages + \"</span>\");\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\thtmlBuffer.push(\"<div class='pagenext \" + postButtonsClass + \"' id='tablePagination_nextPage' >\");\r\n\t\t\t\t\t\thtmlBuffer.push('<i class=\"material-icons\">navigate_next</i>')\r\n\t\t\t\t\t\thtmlBuffer.push(\"</div>\")\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\thtmlBuffer.push(\"<div class='pagelast \" + postButtonsClass + \"' id='tablePagination_lastPage'>\");\r\n\t\t\t\t\t\thtmlBuffer.push('<i class=\"material-icons\">last_page</i>')\r\n\t\t\t\t\t\thtmlBuffer.push(\"</div>\")\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\thtmlBuffer.push(\"</span>\");\r\n\t\t\t\t\t\thtmlBuffer.push(\"</div>\");\r\n\t\t\t\t\t\treturn htmlBuffer.join(\"\").toString();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvar htmlBuffer = [];\r\n\t\t\t\t\t\thtmlBuffer.push(\"<div id='\" + settings.controlName + \"_tablePagination' class='pivot_pag_div pivot_pag_div_sd'>\");\r\n\t\t\t\t\t\thtmlBuffer.push(\"<span id='tablePagination_perPage'>\");\r\n\r\n\t\t\t\t\t\thtmlBuffer.push(\"<select id='\" + settings.controlName + \"tablePagination_rowsPerPage'><option value='5'>5</option></select>\");\r\n\r\n\t\t\t\t\t\thtmlBuffer.push(\" \" + settings.translations.GXPL_QViewerJSPerPage  + \" \");\r\n\t\t\t\t\t\thtmlBuffer.push(\"</span>\");\r\n\t\t\t\t\t\thtmlBuffer.push(\"<span id='\" + settings.controlName + \"_tablePagination_paginater'>\");\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\thtmlBuffer.push(\"<div class='pagefirst \" + prevButtonsClass + \"' id='tablePagination_firstPage' >\");\r\n\t\t\t\t\t\thtmlBuffer.push('<i class=\"material-icons\">first_page</i>')\r\n\t\t\t\t\t\thtmlBuffer.push(\"</div>\")\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\thtmlBuffer.push(\"<div class='pageprev \" + prevButtonsClass + \"' id='tablePagination_prevPage' >\");\r\n\t\t\t\t\t\thtmlBuffer.push('<i class=\"material-icons\">navigate_before</i>')\r\n\t\t\t\t\t\thtmlBuffer.push(\"</div>\")\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\thtmlBuffer.push(\"<span style=''>&nbsp;\" + settings.translations.GXPL_QViewerJSPage + \"&nbsp;</span>\");\r\n\t\t\t\t\t\thtmlBuffer.push(\"<input id='tablePagination_currPage' type='input' value='\" + currPageNumber[settings.controlName] + \"' size='\" + size + \"'>\");\r\n\t\t\t\t\t\thtmlBuffer.push(\"<span>&nbsp;\" + settings.translations.GXPL_QViewerJSOf + \"</span><span id='tablePagination_totalPages'>&nbsp;\" + totalPages + \"</span>\");\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\thtmlBuffer.push(\"<div class='pagenext \" + postButtonsClass + \"' id='tablePagination_nextPage' >\");\r\n\t\t\t\t\t\thtmlBuffer.push('<i class=\"material-icons\">navigate_next</i>')\r\n\t\t\t\t\t\thtmlBuffer.push(\"</div>\")\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\thtmlBuffer.push(\"<div class='pagelast \" + postButtonsClass + \"' id='tablePagination_lastPage'>\");\r\n\t\t\t\t\t\thtmlBuffer.push('<i class=\"material-icons\">last_page</i>')\r\n\t\t\t\t\t\thtmlBuffer.push(\"</div>\")\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\thtmlBuffer.push(\"</span>\");\r\n\t\t\t\t\t\thtmlBuffer.push(\"</div>\");\r\n\t\t\t\t\t\treturn htmlBuffer.join(\"\").toString();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (jQuery(table)[tblLocation]().find(totalPagesId).length == 0) {\r\n\t\t\t\t\tif (defaults.topNav) {\r\n\t\t\t\t\t\tjQuery(this).before(createPaginationElements());\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tjQuery(this).after(createPaginationElements());\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tjQuery(table)[tblLocation]().find(currPageId).val(currPageNumber[settings.controlName]);\r\n\t\t\t\t}\r\n\t\t\t\tresetPerPageValues();\r\n\r\n\t\t\t\tjQuery(table)[tblLocation]().find(firstPageId).bind('click', function (e) {\r\n\t\t\t\t\tresetCurrentPage(1, false)\r\n\t\t\t\t});\r\n\r\n\t\t\t\tjQuery(table)[tblLocation]().find(prevPageId).bind('click', function (e) {\r\n\t\t\t\t\tresetCurrentPage(currPageNumber[settings.controlName] - 1, false)\r\n\t\t\t\t});\r\n\r\n\t\t\t\tjQuery(table)[tblLocation]().find(nextPageId).bind('click', function (e) {\r\n\t\t\t\t\tresetCurrentPage(parseInt(currPageNumber[settings.controlName]) + 1, false)  //bind event \r\n\t\t\t\t});\r\n\r\n\t\t\t\tjQuery(table)[tblLocation]().find(lastPageId).bind('click', function (e) {\r\n\t\t\t\t\tresetCurrentPage(parseInt(jQuery(\"#\" + settings.controlName + \"_tablePagination_paginater #tablePagination_totalPages\")[0].textContent.replace(\"&nbsp;\", \"\")), false);\r\n\t\t\t\t});\r\n\r\n\t\t\t\tjQuery(table)[tblLocation]().find(currPageId).bind('change', function (e) {\r\n\t\t\t\t\tresetCurrentPage(parseInt(this.value, 10), false)\r\n\t\t\t\t});\r\n\r\n\t\t\t\tjQuery(table)[tblLocation]().find(rowsPerPageId).bind('change', function (e) {\r\n\t\t\t\t\tdefaults.rowsPerPage = parseInt(this.value, 10);\r\n\t\t\t\t\ttotalPages = resetTotalPages();\r\n\t\t\t\t\tresetCurrentPage(1, true);\r\n\t\t\t\t});\r\n\r\n\t\t\t})\r\n\t\t\r\n\t\t\t\r\n\t}\r\n\r\n\texports.OAT = OAT;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","#QUERYVIEWER1Container {\r\n    width: 100%; \r\n    height: 100%; \r\n    overflow: auto;\r\n}","import { Component, Listen, Prop, h } from '@stencil/core';\nimport { renderJSPivot, OAT } from 'jspivottable';\n\n@Component({\n  tag: 'my-pivot',\n  styleUrl: 'my-pivot.scss',\n  shadow: false,\n})\nexport class Pivot {\n  /**\n   * metadata\n   */\n  @Prop() metadata: string =\n    '<?xml version = \"1.0\" encoding = \"UTF-8\"?>\\n\\r\\n<OLAPCube Version=\"2\" format=\"compact\" decimalSeparator=\".\" thousandsSeparator=\",\" dateFormat=\"MDY\" textForNullValues=\"\" ShowDataLabelsIn=\"Columns\">\\n\\t<OLAPDimension name=\"Element1\" displayName=\"Datos Dsc\" description=\"Datos Dsc\" dataField=\"F1\" visible=\"Yes\" axis=\"Rows\" canDragToPages=\"true\" summarize=\"yes\" align=\"left\" picture=\"\" dataType=\"character\" format=\"\">\\n\\t</OLAPDimension>\\n\\t<OLAPDimension name=\"Element2\" displayName=\"Datos Codigo\" description=\"Datos Codigo\" dataField=\"F2\" visible=\"Yes\" axis=\"Rows\" canDragToPages=\"true\" summarize=\"yes\" align=\"left\" picture=\"\" dataType=\"character\" format=\"\">\\n\\t</OLAPDimension>\\n\\t<OLAPMeasure name=\"Element3\" displayName=\"Datos Valor\" description=\"Datos Valor\" dataField=\"F3\" visible=\"Yes\" aggregation=\"\" align=\"right\" picture=\"ZZZ9\" targetValue=\"0\" maximumValue=\"0\" dataType=\"integer\" format=\"\">\\n\\t</OLAPMeasure>\\n</OLAPCube>\\n';\n\n  /**\n   * data\n   */\n  @Prop() data: string;\n\n  /**\n   * qv\n   */\n  @Prop() qv = {\n    collection: {\n      QUERYVIEWER1_Queryviewer1: {\n        AutoRefreshGroup: '',\n        debugServices: false,\n        ControlName: 'Queryviewer1',\n        Metadata: {\n          Axes: [{ RaiseItemClick: true }, { RaiseItemClick: true }],\n          Data: [{ RaiseItemClick: true }, { RaiseItemClick: true }],\n        },\n      },\n    },\n    fadeTimeouts: {},\n  };\n\n  /**\n   * qViewer\n   */\n  @Prop() qViewer = {\n    xml: { metadata: this.metadata },\n    pivotParams: {\n      page: 'QUERYVIEWER1_Queryviewer1_GeneralQuery1_pivot_page',\n      content: 'QUERYVIEWER1_Queryviewer1_GeneralQuery1_pivot_content',\n      container: document.getElementById('QUERYVIEWER1Container'),\n      RealType: 'PivotTable',\n      ObjectName: 'General.Query1',\n      ControlName: 'Queryviewer1',\n      PageSize: 20,\n      metadata: this.metadata,\n      UcId: 'QUERYVIEWER1_Queryviewer1',\n      AutoResize: false,\n      DisableColumnSort: false,\n      RememberLayout: true,\n      ShowDataLabelsIn: 'Columns',\n      ServerPaging: true,\n      ServerPagingPivot: true,\n      ServerPagingCacheSize: 0,\n      UseRecordsetCache: true,\n      AllowSelection: false,\n      SelectLine: true,\n      TotalForColumns: 'Yes',\n      Title: '',\n    },\n  };\n\n  /**\n   * QueryViewerTranslations\n   */\n  @Prop() QueryViewerTranslations = {\n    GXPL_QViewerSinceTheBeginningTrend: 'Trend Since The Beginning',\n    GXPL_QViewerLastDayTrend: 'Trend Last Day',\n    GXPL_QViewerLastHourTrend: 'Trend Last hour',\n    GXPL_QViewerJSAllOption: 'Todos',\n    GXPL_QViewerJSAscending: 'Ascending',\n    GXPL_QViewerJSDescending: 'Descendiente',\n    GXPL_QViewerJSSubtotals: 'Subtotal',\n    GXPL_QViewerJSRestoreDefaultView: 'Restore',\n    GXPL_QViewerJSPivotDimensionToColumn: 'To COlumns',\n    GXPL_QViewerJSPivotDimensionToRow: 'To Dimensions',\n    GXPL_QViewerJSMoveToFilterBar: 'To Filters',\n    GXPL_QViewerJSAll: 'ALL',\n    GXPL_QViewerJSNone: 'NONE',\n    GXPL_QViewerJSReverse: 'Revert',\n    GXPL_QViewerSearch: 'Search',\n    GXPL_QViewerInfoUser: 'User Info',\n    GXPL_QViewerJSDropFiltersHere: 'Drop her filters',\n    GXPL_QViewerPopupTitle: 'Title p',\n    GXPL_QViewerJSVisibleColumns: 'Visible columns',\n    GXPL_QViewerContextMenuExportXml: 'Export to XML',\n    GXPL_QViewerContextMenuExportHtml: 'To Html',\n    GXPL_QViewerContextMenuExportPdf: 'To PDF',\n    GXPL_QViewerContextMenuExportXls2003: 'To xls',\n    GXPL_QViewerContextMenuExportXlsx: 'To Xlsx',\n    GXPL_QViewerJSMeasures: 'Measures',\n    GXPL_QViewerJSValue: 'Value',\n    GXPL_QViewerJSTotal: 'Grand Total',\n    GXPL_QViewerJSTotalFor: 'Total for',\n    GXPL_QViewerJSPerPage: 'Roes:',\n    GXPL_QViewerJSPage: 'Pags:',\n    GXPL_QViewerJSOf: 'of',\n    GXPL_QViewerJSMoveColumnToLeft: 'to left',\n    GXPL_QViewerJSMoveColumnToRight: 'to right',\n  };\n\n  @Listen('RequestPageDataForPivotTable')\n  handledataforpivottable(e) {\n    let data =\n      '<?xml version = \"1.0\" encoding = \"UTF-8\"?>\\n\\r\\n<Recordset RecordCount=\"50\" PageCount=\"3\">\\n\\t<Page PageNumber=\"1\">\\n\\t\\t<Columns>\\n\\t\\t\\t<Header DataField=\"F3\">\\n\\t\\t\\t</Header>\\n\\t\\t</Columns>\\n\\t\\t<Rows>\\n\\t\\t\\t<Row>\\n\\t\\t\\t\\t<Header>\\n\\t\\t\\t\\t\\t<F1>151                 </F1>\\n\\t\\t\\t\\t\\t<F2>1129                </F2>\\n\\t\\t\\t\\t</Header>\\n\\t\\t\\t\\t<Cells>\\n\\t\\t\\t\\t\\t<Cell>29</Cell>\\n\\t\\t\\t\\t</Cells>\\n\\t\\t\\t</Row>\\n\\t\\t\\t<Row>\\n\\t\\t\\t\\t<Header Subtotal=\"true\">\\n\\t\\t\\t\\t\\t<F1>151                 </F1>\\n\\t\\t\\t\\t</Header>\\n\\t\\t\\t\\t<Cells>\\n\\t\\t\\t\\t\\t<Cell>29</Cell>\\n\\t\\t\\t\\t</Cells>\\n\\t\\t\\t</Row>\\n\\t\\t\\t<Row>\\n\\t\\t\\t\\t<Header>\\n\\t\\t\\t\\t\\t<F1>51                  </F1>\\n\\t\\t\\t\\t\\t<F2>15                  </F2>\\n\\t\\t\\t\\t</Header>\\n\\t\\t\\t\\t<Cells>\\n\\t\\t\\t\\t\\t<Cell>15</Cell>\\n\\t\\t\\t\\t</Cells>\\n\\t\\t\\t</Row>\\n\\t\\t\\t<Row>\\n\\t\\t\\t\\t<Header Subtotal=\"true\">\\n\\t\\t\\t\\t\\t<F1>51                  </F1>\\n\\t\\t\\t\\t</Header>\\n\\t\\t\\t\\t<Cells>\\n\\t\\t\\t\\t\\t<Cell>15</Cell>\\n\\t\\t\\t\\t</Cells>\\n\\t\\t\\t</Row>\\n\\t\\t\\t<Row>\\n\\t\\t\\t\\t<Header>\\n\\t\\t\\t\\t\\t<F1>51P                 </F1>\\n\\t\\t\\t\\t\\t<F2>156                 </F2>\\n\\t\\t\\t\\t</Header>\\n\\t\\t\\t\\t<Cells>\\n\\t\\t\\t\\t\\t<Cell>1</Cell>\\n\\t\\t\\t\\t</Cells>\\n\\t\\t\\t</Row>\\n\\t\\t\\t<Row>\\n\\t\\t\\t\\t<Header Subtotal=\"true\">\\n\\t\\t\\t\\t\\t<F1>51P                 </F1>\\n\\t\\t\\t\\t</Header>\\n\\t\\t\\t\\t<Cells>\\n\\t\\t\\t\\t\\t<Cell>1</Cell>\\n\\t\\t\\t\\t</Cells>\\n\\t\\t\\t</Row>\\n\\t\\t\\t<Row>\\n\\t\\t\\t\\t<Header>\\n\\t\\t\\t\\t\\t<F1>5P                  </F1>\\n\\t\\t\\t\\t\\t<F2>352                 </F2>\\n\\t\\t\\t\\t</Header>\\n\\t\\t\\t\\t<Cells>\\n\\t\\t\\t\\t\\t<Cell>2</Cell>\\n\\t\\t\\t\\t</Cells>\\n\\t\\t\\t</Row>\\n\\t\\t\\t<Row>\\n\\t\\t\\t\\t<Header Subtotal=\"true\">\\n\\t\\t\\t\\t\\t<F1>5P                  </F1>\\n\\t\\t\\t\\t</Header>\\n\\t\\t\\t\\t<Cells>\\n\\t\\t\\t\\t\\t<Cell>2</Cell>\\n\\t\\t\\t\\t</Cells>\\n\\t\\t\\t</Row>\\n\\t\\t\\t<Row>\\n\\t\\t\\t\\t<Header>\\n\\t\\t\\t\\t\\t<F1>89                  </F1>\\n\\t\\t\\t\\t\\t<F2>1895                </F2>\\n\\t\\t\\t\\t</Header>\\n\\t\\t\\t\\t<Cells>\\n\\t\\t\\t\\t\\t<Cell>15</Cell>\\n\\t\\t\\t\\t</Cells>\\n\\t\\t\\t</Row>\\n\\t\\t\\t<Row>\\n\\t\\t\\t\\t<Header Subtotal=\"true\">\\n\\t\\t\\t\\t\\t<F1>89                  </F1>\\n\\t\\t\\t\\t</Header>\\n\\t\\t\\t\\t<Cells>\\n\\t\\t\\t\\t\\t<Cell>15</Cell>\\n\\t\\t\\t\\t</Cells>\\n\\t\\t\\t</Row>\\n\\t\\t\\t<Row>\\n\\t\\t\\t\\t<Header>\\n\\t\\t\\t\\t\\t<F1>AAB                 </F1>\\n\\t\\t\\t\\t\\t<F2>A32                 </F2>\\n\\t\\t\\t\\t</Header>\\n\\t\\t\\t\\t<Cells>\\n\\t\\t\\t\\t\\t<Cell>32</Cell>\\n\\t\\t\\t\\t</Cells>\\n\\t\\t\\t</Row>\\n\\t\\t\\t<Row>\\n\\t\\t\\t\\t<Header Subtotal=\"true\">\\n\\t\\t\\t\\t\\t<F1>AAB                 </F1>\\n\\t\\t\\t\\t</Header>\\n\\t\\t\\t\\t<Cells>\\n\\t\\t\\t\\t\\t<Cell>32</Cell>\\n\\t\\t\\t\\t</Cells>\\n\\t\\t\\t</Row>\\n\\t\\t\\t<Row>\\n\\t\\t\\t\\t<Header>\\n\\t\\t\\t\\t\\t<F1>AAM                 </F1>\\n\\t\\t\\t\\t\\t<F2>31                  </F2>\\n\\t\\t\\t\\t</Header>\\n\\t\\t\\t\\t<Cells>\\n\\t\\t\\t\\t\\t<Cell>31</Cell>\\n\\t\\t\\t\\t</Cells>\\n\\t\\t\\t</Row>\\n\\t\\t\\t<Row>\\n\\t\\t\\t\\t<Header Subtotal=\"true\">\\n\\t\\t\\t\\t\\t<F1>AAM                 </F1>\\n\\t\\t\\t\\t</Header>\\n\\t\\t\\t\\t<Cells>\\n\\t\\t\\t\\t\\t<Cell>31</Cell>\\n\\t\\t\\t\\t</Cells>\\n\\t\\t\\t</Row>\\n\\t\\t\\t<Row>\\n\\t\\t\\t\\t<Header>\\n\\t\\t\\t\\t\\t<F1>AB36                </F1>\\n\\t\\t\\t\\t\\t<F2>36                  </F2>\\n\\t\\t\\t\\t</Header>\\n\\t\\t\\t\\t<Cells>\\n\\t\\t\\t\\t\\t<Cell>36</Cell>\\n\\t\\t\\t\\t</Cells>\\n\\t\\t\\t</Row>\\n\\t\\t\\t<Row>\\n\\t\\t\\t\\t<Header Subtotal=\"true\">\\n\\t\\t\\t\\t\\t<F1>AB36                </F1>\\n\\t\\t\\t\\t</Header>\\n\\t\\t\\t\\t<Cells>\\n\\t\\t\\t\\t\\t<Cell>36</Cell>\\n\\t\\t\\t\\t</Cells>\\n\\t\\t\\t</Row>\\n\\t\\t\\t<Row>\\n\\t\\t\\t\\t<Header>\\n\\t\\t\\t\\t\\t<F1>AC32                </F1>\\n\\t\\t\\t\\t\\t<F2>32                  </F2>\\n\\t\\t\\t\\t</Header>\\n\\t\\t\\t\\t<Cells>\\n\\t\\t\\t\\t\\t<Cell>32</Cell>\\n\\t\\t\\t\\t</Cells>\\n\\t\\t\\t</Row>\\n\\t\\t\\t<Row>\\n\\t\\t\\t\\t<Header Subtotal=\"true\">\\n\\t\\t\\t\\t\\t<F1>AC32                </F1>\\n\\t\\t\\t\\t</Header>\\n\\t\\t\\t\\t<Cells>\\n\\t\\t\\t\\t\\t<Cell>32</Cell>\\n\\t\\t\\t\\t</Cells>\\n\\t\\t\\t</Row>\\n\\t\\t\\t<Row>\\n\\t\\t\\t\\t<Header>\\n\\t\\t\\t\\t\\t<F1>AC34                </F1>\\n\\t\\t\\t\\t\\t<F2>34                  </F2>\\n\\t\\t\\t\\t</Header>\\n\\t\\t\\t\\t<Cells>\\n\\t\\t\\t\\t\\t<Cell>34</Cell>\\n\\t\\t\\t\\t</Cells>\\n\\t\\t\\t</Row>\\n\\t\\t\\t<Row>\\n\\t\\t\\t\\t<Header Subtotal=\"true\">\\n\\t\\t\\t\\t\\t<F1>AC34                </F1>\\n\\t\\t\\t\\t</Header>\\n\\t\\t\\t\\t<Cells>\\n\\t\\t\\t\\t\\t<Cell>34</Cell>\\n\\t\\t\\t\\t</Cells>\\n\\t\\t\\t</Row>\\n\\t\\t</Rows>\\n\\t</Page>\\n</Recordset>\\n';\n\n    let resXML = data;\n\n    if (typeof e.parameter.callback == 'function') e.parameter.callback(resXML);\n  }\n\n  componentDidLoad() {\n    if (OAT.Loader != undefined) {\n      renderJSPivot(this.qViewer.pivotParams, this.qv.collection, this.QueryViewerTranslations, this.qViewer);\n    } else {\n      OAT.Loader.addListener(function () {\n        renderJSPivot(this.qViewer.pivotParams, this.qv.collection, this.QueryViewerTranslations, this.qViewer);\n      });\n    }\n  }\n\n  render() {\n    return (\n      <div class=\"gx_usercontrol qv-pivottable QueryViewer-pivottable\" id=\"QUERYVIEWER1Container\">\n        <div id=\"QUERYVIEWER1_Queryviewer1_GeneralQuery1_pivot_page\" class=\"pivot_filter_div\"></div>\n        <div id=\"QUERYVIEWER1_Queryviewer1_GeneralQuery1_pivot_content\" class=\"conteiner_table_div\"></div>\n      </div>\n    );\n  }\n}\n"],"mappings":"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AAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GACrJ,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAChJ,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAChJ,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAChJ,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAChJ,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAChJ,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAC9I,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAChJ,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAChJ,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAChJ,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAChJ,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAChJ,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAChJ,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IAE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I,GAAI,GAAI,GAAI,GAAI,GACpJ,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAChJ,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAChJ,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAChJ,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAChJ,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAChJ,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IAEzIzB,KAAK0B,YAAc,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,GAEhI1B,KAAK2B,UAAY,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,MAAO,MACjJ,OAKD3B,KAAK4B,OAAS,SAAUC,GACvB,OAAQ,EAAS,IAAM9B,WAAW8B,GAAQ9B,WAAW,KAAO,IAAW,GACzE,EAGCC,KAAK8B,YAAc,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAGxG9B,KAAK+B,YAAc,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IAGlH/B,KAAKgC,aAAe,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAE3EhC,KAAKiC,SAAW,CAAC,GAAI,GAAI,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,GAAI,EAAG,GAAI,EAAG,GAAI,EAAG,GAAI,EAAG,IAI/E,SAASC,WAAW5B,EAAaC,EAAYC,EAAYpwD,EAAOqwD,GAC/D,IAAIr2C,EAAO9d,KACX8d,EAAKk2C,YAAcA,EACnBl2C,EAAKm2C,WAAaA,EAClBn2C,EAAKo2C,WAAaA,EAClBp2C,EAAKha,MAAQA,EACbga,EAAKq2C,WAAaA,CACpB,CAECyB,WAAWC,aAAe,CAAC,GAAI,EAAG,IAAK,EAAG,GAAI,EAAG,IAAK,EAAG,GAAI,EAAG,IAAK,EAAG,IAAK,EAAG,IAAK,EAAG,GAAI,EAAG,IAAK,EAAG,GAAI,EAAG,IAAK,EAAG,GAAI,EAAG,IAAK,EAAG,IAAK,EAAG,IAAK,EAAG,EAAG,EACvJ,IAAK,EAAG,GAAI,EAAG,IAAK,EAAG,GAAI,EAAG,IAAK,EAAG,GAAI,EAAG,IAAK,EAAG,GAAI,EAAG,IAAK,EAAG,GAAI,EAAG,IAAK,EAAG,GAAI,EAAG,IAAK,EAAG,IAAK,EAAG,IAAK,EAAG,GAAI,EAAG,IAAK,EAAG,GAAI,EAAG,IAAK,EAAG,GAChJ,EAAG,IAAK,EAAG,IAAK,EAAG,IAAK,EAAG,GAAI,EAAG,IAAK,EAAG,GAAI,EAAG,IAAK,EAAG,GAAI,EAAG,IAAK,EAAG,IAAK,EAAG,IAAK,EAAG,EAAG,EAAG,IAAK,EAAG,GAAI,EAAG,IAAK,EAAG,GAAI,EAAG,IAAK,EAAG,IAAK,EAAG,IAAK,EACjJ,GAAI,EAAG,IAAK,EAAG,GAAI,EAAG,IAAK,EAAG,GAAI,EAAG,IAAK,EAAG,IAAK,EAAG,IAAK,EAAG,GAAI,EAAG,IAAK,EAAG,GAAI,EAAG,IAAK,EAAG,GAAI,EAAG,IAAK,EAAG,IAAK,EAAG,IAAK,EAAG,GAAI,EAAG,IAAK,EAAG,GAAI,EAC7I,IAAK,EAAG,GAAI,EAAG,IAAK,EAAG,IAAK,EAAG,IAAK,EAAG,EAAG,EAAG,IAAK,EAAG,GAAI,EAAG,IAAK,EAAG,GAAI,EAAG,IAAK,EAAG,GAAI,EAAG,IAAK,EAAG,GAAI,EAAG,IAAK,EAAG,GAAI,EAAG,IAAK,EAAG,GAAI,EAAG,IAAK,EAAG,IAC/I,EAAG,IAAK,EAAG,EAAG,EAAG,IAAK,EAAG,GAAI,EAAG,IAAK,EAAG,GAAI,EAAG,IAAK,EAAG,IAAK,EAAG,IAAK,EAAG,GAAI,EAAG,IAAK,EAAG,GAAI,EAAG,IAAK,EAAG,GAAI,EAAG,IAAK,EAAG,IAAK,EAAG,IAAK,EAAG,EAAG,EAAG,IAAK,EAC/I,GAAI,EAAG,IAAK,EAAG,GAAI,EAAG,IAAK,EAAG,IAAK,EAAG,IAAK,EAAG,GAAI,EAAG,IAAK,EAAG,GAAI,EAAG,IAAK,EAAG,GAAI,EAAG,IAAK,EAAG,IAAK,EAAG,IAAK,EAAG,GAAI,EAAG,IAAK,EAAG,GAAI,EAAG,IAAK,EAAG,GAAI,EAC7I,IAAK,EAAG,IAAK,EAAG,IAAK,EAAG,GAAI,EAAG,IAAK,EAAG,GAAI,EAAG,IAAK,EAAG,GAAI,EAAG,IAAK,EAAG,IAAK,EAAG,IAAK,EAAG,GAAI,EAAG,IAAK,EAAG,IAAK,EAAG,IAAK,EAAG,GAAI,EAAG,IAAK,EAAG,IAAK,EAAG,IAAK,EAChJ,GAAI,EAAG,IAAK,EAAG,IAAK,EAAG,IAAK,EAAG,IAAK,EAAG,IAAK,EAAG,IAAK,EAAG,IAAK,EAAG,GAAI,EAAG,IAAK,EAAG,IAAK,EAAG,IAAK,EAAG,GAAI,EAAG,IAAK,EAAG,IAAK,EAAG,IAAK,EAAG,GAAI,EAAG,IAAK,EAAG,IAAK,EACjJ,IAAK,EAAG,IAAK,EAAG,IAAK,EAAG,IAAK,EAAG,IAAK,EAAG,GAAI,EAAG,IAAK,EAAG,IAAK,EAAG,IAAK,EAAG,GAAI,EAAG,IAAK,EAAG,IAAK,EAAG,IAAK,EAAG,GAAI,EAAG,IAAK,EAAG,IAAK,EAAG,IAAK,EAAG,IAAK,EAAG,IAC7I,EAAG,IAAK,EAAG,IAAK,EAAG,EAAG,EAAG,IAAK,EAAG,IAAK,EAAG,IAAK,EAAG,GAAI,EAAG,IAAK,EAAG,IAAK,EAAG,IAAK,EAAG,GAAI,EAAG,IAAK,EAAG,IAAK,EAAG,IAAK,EAAG,IAAK,EAAG,IAAK,EAAG,IAAK,EAAG,IAAK,EAAG,GAC/I,EAAG,IAAK,EAAG,IAAK,EAAG,IAAK,EAAG,GAAI,EAAG,IAAK,EAAG,IAAK,EAAG,IAAK,EAAG,GAAI,EAAG,IAAK,EAAG,IAAK,EAAG,IAAK,EAAG,IAAK,EAAG,IAAK,EAAG,IAAK,EAAG,IAAK,EAAG,GAAI,EAAG,IAAK,EAAG,IAAK,EAC7I,IAAK,EAAG,GAAI,EAAG,IAAK,EAAG,IAAK,EAAG,IAAK,EAAG,GAAI,EAAG,IAAK,EAAG,IAAK,EAAG,IAAK,EAAG,IAAK,EAAG,IAAK,EAAG,IAAK,EAAG,IAAK,EAAG,GAAI,EAAG,IAAK,EAAG,IAAK,EAAG,IAAK,EAAG,GAAI,EAAG,IAAK,EACjJ,IAAK,EAAG,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"}