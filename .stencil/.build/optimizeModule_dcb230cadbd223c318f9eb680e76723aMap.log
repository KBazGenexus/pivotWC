{"version":3,"names":["OAT","Preferences","showAjax","useCursors","windowTypeOverride","version","httpError","allowDefaultResize","allowDefaultDrag","$","something","elm","document","getElementById","Array","i","length","push","$$","className","root","e","elms","getElementsByTagName","matches","Dom","isClass","$v","value","prototype","findIndex","str","this","String","trimpivot","result","match","addTextNode","node","text","txtNode","createTextNode","nodeJ","jQuery","appendChild","addImageNode","parent","icon_name","style","id","icon","createElement","undefined","setAttribute","textContent","replaceTextNode","firstChild","removeChild","AddItemToList","list","item","indexOf","sort","a","b","removeIconFont","replace","ApplyPictureValue","type","defaultPicture","picture","defaultNull","getAttribute","decimalSeparator","decimalPlaces","defaultdate","newValue","hasprefix","prefix","index","substring","hassufix","sufix","qv","util","formatNumber","parseFloat","valueSplit","split","useSeparator","toFixed","z_pos","picteSplit","numoblig","newArray","charAt","numberoblig","dates","pict","substr","dividevalue","dividepicture","hourandms","digits","fromSafeXML","toUpperCase","SetSelectedNodeBackgroundColor","color","$container","ClearSelectedNodes","SetNodeBackgroundColor","find","removeClass","hasClass","addClass","IsNodeSelected","SelectAllRow","row","avoid","cell","children","isSD","ua","navigator","userAgent","toLowerCase","isAndroid","isIOs","isSafari","isIE","window","documentMode","isWebkit","search","resourceURL","path","charReplace","Value","Chars","Repls","Ret","len","bFixed","len1","c","create","tagName","styleObj","prop","createNS","ns","createElementNS","button","label","radio","name","image","src","srcBlank","w","h","width","height","imageSrc","element","option","opt","append","arguments","arr","j","k","child","hide","inputs_","inputs","inp","__checked","checked","display","show","clear","unlink","parentNode","center","x","y","reference","p","offsetParent","par_dims","body","getViewport","getWH","dims","new_x","Math","round","new_y","s","getScroll","left","top","isChild","c_elm","p_elm","isKonqueror","isKHTML","attachEvent","addEventListener","isIE7","isIE6","isGecko","isOpera","isWebKit","isMac","platform","toString","isLinux","isWindows","hex2dec","hex","parseInt","tmpstr","tmp","splice","join","setIdPropertyValue","innerWidth","innerHeight","compatMode","clientWidth","clientHeight","documentElement","position","getLT","parent_coords","scrollTop","offsetTop","scrollLeft","offsetLeft","curr_x","curr_y","curr_w","curr_h","Style","get","offsetWidth","offsetHeight","moveBy","dx","dy","right","bottom","resizeBy","decodeImage","data","decoded","Crypto","base64d","mime","removeSelection","selObj","getSelection","selection","empty","removeAllRanges","l","max","t","getFreeSpace","scroll","port","spaceLeft","spaceRight","spaceTop","spaceBottom","toSafeXML","uriParams","location","parts","part","decodeURIComponent","key","val","r","changeHref","newHref","ok","href","oldParent","next","nextSibling","insertBefore","makePosition","include","file","relativePath","force","styles","host","protocol","rel","prepend","property","defaultView","getComputedStyle","cs","out","currentStyle","getExpression","background","png","filter","backgroundImage","apply","obj","opacity","o","applyStyle","Event","attach","event","callback","detach","removeEventListener","detachEvent","source","target","srcElement","cancel","cancelBubble","stopPropagation","clientX","clientY","prevent","preventDefault","returnValue","eventPos","Loader","toolkitPath","loadOccurred","openAjax","MSG","DEBUG","OAT_DEBUG","OAT_LOAD","ANIMATION_STOP","TREE_EXPAND","TREE_COLLAPSE","DS_RECORD_PREADVANCE","DS_RECORD_ADVANCE","DS_PAGE_PREADVANCE","DS_PAGE_ADVANCE","AJAX_START","AJAX_ERROR","GD_START","GD_ABORT","GD_END","DOCK_DRAG","DOCK_REMOVE","SLB_OPENED","SLB_CLOSED","registry","sender","msg","rec","send","record","senderOK","msgOK","re","RegExp","v","callListeners","listeners","addListener","LoadJapanesseCharacters","uR","js_url","rP","gx","languageCode","resourceUrl","d","prevLoad","onerror","lastChild","onreadystatechange","readyState","jsPDF","btoa","b64","b64a","o1","o2","o3","h1","h2","h3","h4","bits","ac","enc","tmp_arr","charCodeAt","slice","atob","dec","fromCharCode","getObjectLength","Object","keys","object","hasOwnProperty","PubSub","context","topics","publish","topic","args","currentTopic","toremove","fn","pair","emptyFunc","call","subscribe","once","unsubscribe","token","orientation","unit","format","compressPdf","wdt","hgt","zpipe","format_as_string","content","content_length","compress","pdfVersion","pageFormats","a3","a4","a5","letter","legal","textColor","drawColor","page","pages","objectNumber","outToPages","offsets","fonts","fontmap","activeFontSize","activeFontKey","lineWidth","pageHeight","pageWidth","documentProperties","title","subject","author","keywords","creator","lineCapID","lineJoinID","API","events","plugin","f2","number","f3","padd2","n","padd10","string","newObject","putStream","wPt","hPt","kids","putPages","deflater","adler32","adler32cs","from","Deflater","Uint8Array","flush","putFont","font","PostScriptName","encoding","putFonts","fontKey","putXobjectDict","putResourceDictionary","putResources","addToFontDictionary","fontName","fontStyle","undef","addFont","metadata","addFonts","HELVETICA","TIMES","COURIER","NORMAL","BOLD","ITALIC","BOLD_ITALIC","standardFonts","dictionary","to8bitStream","flags","sourceEncoding","encodingBlock","outputEncoding","newtext","isUnicode","ch","bch","autoencode","codePages","noBOM","Error","pdfEscape","putInfo","created","Date","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","putCatalog","putTrailer","beginPage","_addPage","pageNumber","getFont","buildDocument","getStyle","op","output","options","array","blob","getUserMedia","URL","createObjectURL","ArrayBuffer","Blob","saveAs","open","err","internal","getFontSize","write","string1","string2","string3","etc","getCoordinateString","getVerticalCoordinateString","collections","scaleFactor","pageSize","addPage","_first","_second","_third","concat","line","x1","y1","x2","y2","lines","scale","scalex","scaley","leg","x3","y3","x4","y4","rect","setProperties","properties","setFontSize","size","setFont","setFontStyle","setFontType","getFontList","setLineWidth","setDrawColor","ch1","ch2","ch3","ch4","setFillColor","setTextColor","g","CapJoinStyles","butt","but","bevel","rounded","circle","projecting","project","square","milter","setLineCap","setLineJoin","save","filename","newEvents","eventname","handler_and_args","jsPDFAPI","namespace","getJpegSize","imgData","blockLength","putImage","img","constructor","trns","putResourcesCallback","images","putXObjectsDictCallback","addImage","imageData","nodeType","canvas","ctx","getContext","drawImage","toDataURL","imageIndex","coord","vcoord","info","bpc","f","uncompress","encoded","mapping","sign","stringparts","activeobject","parentchain","parent_key_pair","keyparts","valueparts","datalen","pop","WinAnsiEncoding","encodings","Unicode","Courier","Helvetica","fontMetrics","fontManagementObjects","fontID","metrics","unicode_section","widths","kerning","getCharWidthsArray","widthsFractionOf","fof","kerningFractionOf","char_code","prior_char_code","default_char_width","getArraySum","getStringUnitWidth","splitLongWord","word","widths_array","firstLineMaxLen","maxLen","answer","workingLen","startOfLine","splitParagraphIntoLines","maxlen","spaceCharWidth","words","line_length","textIndent","separator_length","current_word_length","shift","splitTextToSize","fsize","fontSize","newOptions","paragraphs","fontUnit_maxLen","addSVG","svgtext","InjectCSS","cssbody","styletag","styleSheet","cssText","createWorkerNode","frameID","frame","attachSVGToWorkerNode","framedoc","contentWindow","contentDocument","close","convertPathToPDFLinesArgs","vectors","workernode","svgnode","svgw","svgh","linesargs","items","childNodes","view","doc","get_URL","webkitURL","save_link","can_use_save_link","click","createEvent","initMouseEvent","dispatchEvent","webkit_req_fs","webkitRequestFileSystem","req_fs","requestFileSystem","mozRequestFileSystem","throw_outside","ex","setImmediate","setTimeout","force_saveable_type","fs_min_size","deletion_queue","process_deletion_queue","revokeObjectURL","remove","dispatch","filesaver","event_types","listener","FileSaver","blob_changed","object_url","target_view","get_object_url","dispatch_all","fs_error","DONE","abortable","func","create_if_not_found","exclusive","INIT","download","chrome","webkitSlice","TEMPORARY","fs","getDirectory","dir","getFile","createWriter","writer","onwriteend","toURL","error","code","ABORT_ERR","forEach","abort","WRITING","NOT_FOUND_ERR","FS_proto","onwritestart","onprogress","onwrite","onabort","MAX_BITS","D_CODES","BL_CODES","LENGTH_CODES","LITERALS","L_CODES","HEAP_SIZE","END_BLOCK","MAX_BL_BITS","REP_3_6","REPZ_3_10","REPZ_11_138","Buf_size","Z_DEFAULT_COMPRESSION","Z_FILTERED","Z_HUFFMAN_ONLY","Z_DEFAULT_STRATEGY","Z_NO_FLUSH","Z_PARTIAL_FLUSH","Z_FULL_FLUSH","Z_FINISH","Z_OK","Z_STREAM_END","Z_NEED_DICT","Z_STREAM_ERROR","Z_DATA_ERROR","Z_BUF_ERROR","_dist_code","Tree","that","gen_bitlen","tree","dyn_tree","stree","stat_desc","static_tree","extra","extra_bits","base","extra_base","max_length","m","xbits","overflow","bl_count","heap","heap_max","max_code","opt_len","static_len","bi_reverse","res","gen_codes","next_code","build_tree","elems","heap_len","depth","floor","pqdownheap","_length_code","base_length","base_dist","d_code","dist","extra_lbits","extra_dbits","extra_blbits","bl_order","StaticTree","static_ltree","static_dtree","static_l_desc","static_d_desc","static_bl_desc","MAX_MEM_LEVEL","DEF_MEM_LEVEL","Config","good_length","max_lazy","nice_length","max_chain","STORED","FAST","SLOW","config_table","z_errmsg","NeedMore","BlockDone","FinishStarted","FinishDone","PRESET_DICT","INIT_STATE","BUSY_STATE","FINISH_STATE","Z_DEFLATED","STORED_BLOCK","STATIC_TREES","DYN_TREES","MIN_MATCH","MAX_MATCH","MIN_LOOKAHEAD","smaller","tn2","tm2","Deflate","strm","status","pending_buf_size","last_flush","w_size","w_bits","w_mask","window_size","prev","head","ins_h","hash_size","hash_bits","hash_mask","hash_shift","block_start","match_length","prev_match","match_available","strstart","match_start","lookahead","prev_length","max_chain_length","max_lazy_match","level","strategy","good_match","nice_match","dyn_ltree","dyn_dtree","bl_tree","l_desc","d_desc","bl_desc","l_buf","lit_bufsize","last_lit","d_buf","last_eob_len","bi_buf","bi_valid","lm_init","init_block","tr_init","scan_tree","prevlen","curlen","nextlen","count","max_count","min_count","build_bl_tree","max_blindex","put_byte","pending_buf","pending","put_short","putShortMSB","send_bits","send_code","c2","send_tree","send_all_trees","lcodes","dcodes","blcodes","rank","bi_flush","_tr_align","_tr_tally","lc","out_length","in_length","dcode","compress_block","ltree","dtree","lx","bi_windup","copy_block","buf","header","set","subarray","_tr_stored_block","stored_len","eof","_tr_flush_block","opt_lenb","static_lenb","flush_block_only","flush_pending","fill_window","more","avail_in","read_buf","deflate_stored","max_block_size","max_start","avail_out","longest_match","cur_match","chain_length","scan","best_len","limit","_nice_match","wmask","strend","scan_end1","scan_end","deflate_fast","hash_head","bflush","deflate_slow","max_insert","deflateReset","total_in","total_out","pending_out","deflateInit","_level","_method","memLevel","_strategy","dstate","deflateEnd","deflateParams","deflate","deflateSetDictionary","dictLength","_strm","level_flags","old_flush","bstate","next_out","next_in","ZStream","next_in_index","next_out_index","ret","start","z","bufsize","buffers","lastIndex","bufferIndex","bufferSize","chunk","JSZip","files","load","signature","LOCAL_FILE_HEADER","CENTRAL_FILE_HEADER","CENTRAL_DIRECTORY_END","ZIP64_CENTRAL_DIRECTORY_LOCATOR","ZIP64_CENTRAL_DIRECTORY_END","DATA_DESCRIPTOR","defaults","base64","binary","date","ZipObject","asText","utf8decode","asBinary","utf8encode","decToHex","bytes","extend","attr","prepareFileAttrs","fileAdd","parentFolder","folderAdd","lastSlash","lastIndexOf","prepareLocalHeaderData","utfEncodedFileName","compressionType","useUTF8","dosTime","dosDate","JSZipBase64","decode","compression","compressions","compressedData","magic","crc32","stream","fileClone","regexp","test","folder","arg","newFolder","clone","generate","directory","fileOffset","fileRecord","dirRecord","fileData","dirData","dirEnd","zip","encode","crc","table","iTop","newObj","utftext","c3","STORE","_keyStr","input","utf8","chr1","chr2","chr3","enc1","enc2","enc3","enc4","isNaN","zip_WSIZE","zip_STORED_BLOCK","zip_STATIC_TREES","zip_DYN_TREES","zip_DEFAULT_LEVEL","zip_INBUFSIZ","zip_INBUF_EXTRA","zip_OUTBUFSIZ","zip_window_size","zip_MIN_MATCH","zip_MAX_MATCH","zip_BITS","zip_LIT_BUFSIZE","zip_HASH_BITS","zip_DIST_BUFSIZE","zip_HASH_SIZE","zip_HASH_MASK","zip_WMASK","zip_NIL","zip_TOO_FAR","zip_MIN_LOOKAHEAD","zip_MAX_DIST","zip_SMALLEST","zip_MAX_BITS","zip_MAX_BL_BITS","zip_LENGTH_CODES","zip_LITERALS","zip_END_BLOCK","zip_L_CODES","zip_D_CODES","zip_BL_CODES","zip_REP_3_6","zip_REPZ_3_10","zip_REPZ_11_138","zip_HEAP_SIZE","zip_H_SHIFT","zip_free_queue","zip_qhead","zip_qtail","zip_initflag","zip_outbuf","zip_outcnt","zip_outoff","zip_complete","zip_window","zip_d_buf","zip_l_buf","zip_prev","zip_bi_buf","zip_bi_valid","zip_block_start","zip_ins_h","zip_hash_head","zip_prev_match","zip_match_available","zip_match_length","zip_prev_length","zip_strstart","zip_match_start","zip_eofile","zip_lookahead","zip_max_chain_length","zip_max_lazy_match","zip_compr_level","zip_good_match","zip_dyn_ltree","zip_dyn_dtree","zip_static_ltree","zip_static_dtree","zip_bl_tree","zip_l_desc","zip_d_desc","zip_bl_desc","zip_bl_count","zip_heap","zip_heap_len","zip_heap_max","zip_depth","zip_length_code","zip_dist_code","zip_base_length","zip_base_dist","zip_flag_buf","zip_last_lit","zip_last_dist","zip_last_flags","zip_flags","zip_flag_bit","zip_opt_len","zip_static_len","zip_deflate_data","zip_deflate_pos","zip_DeflateCT","fc","dl","zip_DeflateTreeDesc","zip_DeflateConfiguration","zip_DeflateBuffer","ptr","off","zip_extra_lbits","zip_extra_dbits","zip_extra_blbits","zip_bl_order","zip_configuration_table","zip_deflate_start","zip_reuse_queue","zip_new_queue","zip_head1","zip_head2","zip_put_byte","zip_qoutbuf","zip_put_short","zip_INSERT_STRING","zip_SEND_CODE","zip_send_bits","zip_D_CODE","zip_SMALLER","zip_read_buff","buff","offset","zip_lm_init","zip_fill_window","zip_longest_match","scanp","matchp","strendp","zip_deflate_fast","zip_ct_tally","zip_flush_block","zip_deflate_better","zip_init_deflate","zip_ct_init","zip_deflate_internal","buff_size","zip_qcopy","zip_gen_codes","zip_bi_reverse","zip_init_block","zip_pqdownheap","zip_gen_bitlen","desc","zip_build_tree","xnew","zip_scan_tree","zip_send_tree","zip_build_bl_tree","zip_send_all_trees","zip_bi_windup","zip_compress_block","fx","flag","zip_Buf_size","q","zip_deflate","aout","cbuf","zip_fixed_bd","zip_lbits","zip_dbits","zip_slide","zip_wp","zip_fixed_tl","zip_fixed_td","zip_fixed_bl","zip_bit_buf","zip_bit_len","zip_method","zip_eof","zip_copy_leng","zip_copy_dist","zip_tl","zip_td","zip_bl","zip_bd","zip_inflate_data","zip_inflate_pos","zip_MASK_BITS","zip_cplens","zip_cplext","zip_cpdist","zip_cpdext","zip_border","zip_HuftList","zip_HuftNode","zip_HuftBuild","mm","BMAX","N_MAX","el","pidx","u","xp","tail","zip_GET_BYTE","zip_NEEDBITS","zip_GETBITS","zip_DUMPBITS","zip_inflate_codes","zip_inflate_stored","zip_inflate_fixed","alert","zip_inflate_dynamic","nb","nl","nd","ll","zip_inflate_start","zip_inflate_internal","zip_inflate","pretty","findCompression","compressionMethod","method","StreamReader","checkOffset","checkIndex","newIndex","setIndex","byteAt","readByte","readInt","readString","readDate","dostime","ZipEntry","loadOptions","isEncrypted","bitFlag","hasDataDescriptor","isZIP64","zip64","readLocalPartHeader","reader","versionNeeded","compressedSize","uncompressedSize","fileNameLength","extraFieldsLength","readLocalPart","fileName","readExtraFields","compressedFileData","findDataUntilDataDescriptor","uncompressedFileData","checkCRC32","buffer","aByte","readCentralPart","versionMadeBy","fileCommentLength","diskNumberStart","internalFileAttributes","externalFileAttributes","localHeaderOffset","fileComment","parseZIP64ExtraField","extraReader","extraFields","extraFieldId","extraFieldLength","extraFieldValue","ZipEntries","checkSignature","expectedSignature","readBlockEndOfCentral","diskNumber","diskWithCentralDirStart","centralDirRecordsOnThisDisk","centralDirRecords","centralDirSize","centralDirOffset","zipCommentLength","zipComment","readBlockZip64EndOfCentral","zip64EndOfCentralSize","zip64ExtensibleData","extraDataSize","readBlockZip64EndOfCentralLocator","diskWithZip64CentralDirStart","relativeOffsetEndOfZip64CentralDir","disksCount","readLocalFiles","readCentralDir","readEndOfCentral","zipEntries","xlsx","defaultFontName","defaultFontSize","defaultFontColor","zipTime","processTime","sharedStrings","borders","border","borderIndex","fontIndex","docProps","xl","xlWorksheets","worksheet","contentTypes","props","xlRels","worksheets","columns","cols","colWidth","merges","merged","numFmts","alphabet","numAlpha","convertDate","typeOf","escapeXML","parseDate","ispivot","trim","genexusType","genexusPicture","pars","formatCode","datetimepars","datePars","picturePars","pivot","now","folderPivotCache","pivotCacheDefinition","folderPivotTable","pivotTable1","fills","fillNumber","isString","hAlign","vAlign","bold","italic","fontColor","fill","isFinite","JSON","stringify","autoWidth","colSpan","rowSpan","formula","activeWorksheet","actualFill","parse","edge","diagonal","multStyle","dfx","lastModifiedBy","toISOString","modified","dt","unshift","GeneratePDFOutput","self","totalColSpan","tablemarginleft","tablemargintop","cellwidth","controlName","query","title_row","row_num","tRow","columnsWidth","columnsSpan","colspan","desp","colConditions","prevSpan","prevR","tRowprev","prevC","prevRowSpan","prevColSpan","span","childText","hidden","col","oldCol","jChar","carInicialesNoJap","posC","nw","cWP","getXOffset","spanSobrantes","jR","ignore","hasBackground","IsTextAlignRight","textWidht","attributes","at","detail","rgb","imgTxtData","lastTxt","posInitLastTxt","previousCharCode","cNo","getCharacterImg","posI","tempchildText","posE","indexTDel","exceso","preColsPan","preImage","prevColsSpan","removeComas","actPos","poVal","tempValue","cleanDistinctValue","ind","replaceAmp","headers","getMeasureTitle","pos","createExcelROWITEMS","pfvi","lastRowLevel","originalLevel","rs","createExcelCOLITEMS","iCV","measures","GenerateExcelOutput","componentToHex","rgbToHex","getStyles","styleObject","alg","getMeasureIdentifier","formulaInfo","itemPosition","previous","dataTable","dataRow","cellObject","measureFormula","hasFormula","formMeasures","cantFormulaMeasures","fI","mI","relatedMeasures","numMeasure","dataToShow","GeneralDataRows","autoPaging","RowsWhenMoveToFilter","recordForFormula","cellObjectStyle","rN","conditions","dataRowPosition","th","applyFormatValues","defaultPictureValue","td","applyConditionalFormats","formItem","stylesList","columnWithStyle","styleId","measuresWidthStyle","ms","cacheDefinition","letras","withStyles","lastPos","firstDataRow","firstDataCol","totalsExportPivotPdfOptions","sheet","xlpivotTable1","pfi","pfviExclude","rowLevel","colLevel","lastColLevel","rowConditions","formulaOptionString","formulaItemString","pfvl","pfvlExclude","distinctValues","hiddenString","blackList","filterIndexes","it","rowStructure","colStructure","xlstyle","dfxStr","sheet2","rowNumber","colNumber","Sheet2","varRef","pageInfo","rowLabel","firstRow","firstCol","measuresXML","numFmt","distValues","colFormYaAgregada","numColFormula","addWhenFormula","space","aggregation","cantMeasureForm","cantNoMeasures","lastPosition","fld","mixed","GeneralDistinctValues","onlyNumber","textFormula","addNumberFormat","mPos","pivotFormat","excelFormat","charFP","byteCharacters","charCodeFromCharacter","byteNumbers","map","uint8Data","Dialog","modal","onshow","onhide","zIndex","buttons","resize","autoEnter","imagePath","Window","min","div","margin","marginTop","textAlign","marginLeft","Dimmer","accomodate","onclose","okBtn","cancelBtn","keyCode","featureLoaded","ERROR","Drag","TYPE_X","TYPE_Y","TYPE_XY","mouse_x","mouse_y","move","abs","_Drag_movers","restrictionFunction","magnetsH","magnetsV","moveFunction","up","endFunction","cursor","initiate","_Drag_cursor","removeAll","createDefault","_Drag_pending","GhostDragData","lock","targets","onFail","originalElement","AnimationPosition","speed","delay","animation","process","GhostDrag","sources","processes","callbacks","addSource","startDrag","delSource","clearSources","addTarget","delTarget","clearTargets","cloneNode","Instant","showCallback","hideCallback","state","handles","check","createHandle","removeHandle","_Instant_show","_Instant_hide","assign","GridData","LIMIT","ALIGN_CENTER","ALIGN_START","ALIGN_END","ALIGN_RIGHT","SORT_NONE","SORT_ASC","SORT_DESC","TYPE_STRING","TYPE_NUMERIC","TYPE_AUTO","Grid","columnsDataType","colms","QueryViewerCollection","disableColumnSort","UcId","IdForQueryViewerCollection","rememberLayout","serverPaging","HideDataFilds","OrderFildsHidden","TableDataFilds","GridTitle","translations","rowsPerPage","InitPageSize","iC","init","topDiv","_ControlRenderedTo","divContainer","ContainerName","divIeContainer","html","GridHeader","rows","rowBlock","previousThead","exportImg","exportPage","padding","checkToClose","clean","closing","oat_component","resetAllScrollValue","css","Anchor","result_control","activation","WinData","TYPE_RECT","containerQuery","GetContainerControlClass","generatePair","OAT_JS","grid","gridData","rowsMetadata","cells","check_class","checkedClass","unCheckedClass","newClass","newdisp","numCol","setColumnVisibleValue","clickRef","coords","currentTarget","iconExport","spantitle","GXPL_QViewerPopupTitle","someExport","div_upper","appendExportToXmlOption","appendExportToHtmlOption","appendExportToPdfOption","appendExportToExcelOption","appendExportToExcel2010Option","hr","div_down","GXPL_QViewerJSVisibleColumns","div_label","dataField","screenWidth","initialPopUpWidth","last","setPageDataForTable","resXML","lastCallToQueryViewer","lastCallData","PageNumber","RecalculateCantPages","redraw","DataFieldOrder","fromExternalRefresh","dataString","stringRecord","_selfgrid","recordData","CreateGridRow","ExportToPdf","ExportToXML","ExportToHtml","ExportToExcel","ExportToExcel2010","removeAllCollapseRows","setAttributeForTable","resJSON","changeValues","columnNumber","filterValue","appendNewValueData","appendNewFilteredValueData","posColumnNumber","filterText","initValueLoad","setFilterChangedWhenServerPagination","oatDimension","setDataSynForTable","dataSync","_self","ClickHandle","elemvalue","exportXMLButton","exportButtonSub","createExportButton","pvpl","GXPL_QViewerContextMenuExportXml","htmlFor","getAllDataRowsForExport","exportHTMLButton","ExportToHTML","GXPL_QViewerContextMenuExportHtml","innerHTML","exportPDFButton","ExportToPDF","GXPL_QViewerContextMenuExportPdf","exportXLSButton","ExportToXLS","GXPL_QViewerContextMenuExportXls2003","ExportToXLSX","GXPL_QViewerContextMenuExportXlsx","clearData","appendHeader","paramsObj","addCell","ieFix","createHeader","paramsList","fieldList","getHeaders","actualHeaders","createRow","customPicture","conditionalFormatsColumns","formatValues","customFormat","column","columnVisibility","GridRow","underRecursionStyle","loadDifferentValues","values","differentValue","removeAllRows","totalRows","removeRow","removeAllHiddenRows","visibility","removeColumn","hideColumnHeader","headerPos","showColumnHeader","changeSort","applySaveState","actualPagesize","exists","getState","filterRows","jC","applySortOrderType","sortOrder","applyCustomSort","sortData","dataRows","localName","temp","applyCustomFilter","filterData","includeValues","applyFilter","dataFieldId","columnDataField","blackLists","defaultAction","hiddens","visibles","HideGridRow","actualizeBlackList","moveToNextPage","moveToFirstPage","moveToLastPage","moveToPreviousPage","selectValue","SelectedNode","DataField","SelectNodes","deselectValue","refreshPivot","sameQuery","parser","DOMParser","xmlData","parseFromString","dimensions","dataFieldOrderChanged","OrderChanged","colPosition","dim","dimID","nodeValue","dimPos","dimHeader","itC","getNamedItem","pD","updateFilterInfo","order","hides","sofs","differentValues","refreshPivotWhenServerPagination","getDataXML","serverData","dataStr","getFilteredDataXML","getTableWhenServerPagination","getMetadataXML","xml","isMeasure","createXMLDimensionInfo","columnaentabla","celdaHeader","cantVisibles","located","colGrid","dataFieldColumn","isHidden","columnI","dataFieldOrder","orderType","previusValue","setInterval","actual_rowsPerPage","autoResize","containerWidth","wd2","widthTable","closest","wid_topBar","marginBottom","nP","previousTHead","container","params","GridHeaderCell","tds","params_","sortable","align","updateSortImage","sorter","signal","divIcon","divCont","differentValuesPaginationInfo","previousPage","initValueRead","clickEvent","wait","showPopup","mouseover","mouseout","isDecimal","expression","decimal","cellVisible","GridRowCell","setClickEventHandlers","select","selected","deselect","shiftKey","ctrlKey","firstAbove","lastBelow","done","visible","cellvalue","datatype","measureDataType","defaultFormats","setStyleValues","recursive","equal","notequal","greaterThan","greaterOrEqual","lessThan","lessOrEqual","between","operation1","value1","operation2","value2","comparisons","dateElements","cmpar","cmparElements","cmpar2","cmparElements2","elem","styleValues","hexToRgb","shorthandRegex","exec","styleSplit","particularStyleSplit","backgroundColor","textDecoration","fontWeight","fontFamily","fontVariant","lineHeight","verticalAlign","wordSpacing","borderThickness","borderWidth","borderColor","borderWith","borderStyle","paddingBottom","paddingLeft","paddingRight","paddingTop","GenerateFormatDateForGrid","ShowGridRow","RestoreGridRow","colNum","RestoreGridOrder","RestoreGridColumns","tC","RowData","collapse","dataByField","tempcolumnsDataType","tempforPivotCustomPicture","tempforPivotCustomFormat","tempcolumnVisible","originalColumnDataField","forPivotCustomPicture","forPivotCustomFormat","columnVisible","conteiner","oper","_type","toAppend","refresh","redrawHeader","columnCount","dimension_Title","cached","random","div_order","asc","ascForId","previousSortValue","currentSortValue","isGeneXusPreview","datastr","external","SendText","collection","ControlName","origen","cellIndex","getDataForTable","idI","inputAsc","inputDsc","alabel","IStyle","GXPL_QViewerJSAscending","dscForId","dlabel","GXPL_QViewerJSDescending","hr4","hr3","dragDiv","dragDiv_L_sel_div","destino","i1","i2","strDestino","dataFieldsPos","idF","setDataFieldPosition","draglabel","GXPL_QViewerJSMoveColumnToLeft","dragDiv_R_sel_div","tHead","draglabelR","GXPL_QViewerJSMoveColumnToRight","gridStateChanged","restoreview","restoreview_sel_div","rl","GXPL_QViewerJSRestoreDefaultView","distinct","distinctDivs","realColNumber","getPairWithIcon","checked_value","getRefBool","onFilteredChangedEventHandle","allRef","noneRef","reverseRef","searchFilterClick","getValuesForColumn","all","GXPL_QViewerJSAll","none","GXPL_QViewerJSNone","reverse","GXPL_QViewerJSReverse","div_search","searchInput","GXPL_QViewerSearch","keyup","fixHeigthDiv","cantPairs","getCantDifferentValues","pairData","getDifferentValues","pict_value","resto","class_check_div","appendNewPairToPopUp","removeAllPairsFromPopUp","withScroll","dimensionNumber","dimensionDataField","itemValue","MeasureOrDimension","itemData","qViewer","RaiseItemClick","iT","Metadata","Axes","Data","ItemClick","onclick","onClickEventHandle","Allow","onClickSelectNode","classList","add","PreClickHandle","requestDataSynForTable","spl","allRowsPivot","allFullRowsPivot","fullRecordData","pseudoRow","existNullValue","stringValues","coinc","row1","row2","fireOnItemClickEvent","isRefresh","selectedItemNumber","Color","rowData","rowsData","clicked","EntireLine","dataType","cellValue","sameValue","checkConditions","sameRow","RedrawSelectedNode","selectedRow","getStateChange","createXMLMetadata","serverPagination","posHeader","pH","dF","hiddenColumns","columnInPdf","colNro","nroPag","verticalHeight","styleString","dtltbl","encodeURIComponent","rowsToAdd","datePicture","dateDefaultFormat","dateTimeDefaultFormat","valuetoString","di","dj","classString","SaveStateWhenServerPaging","localStorage","setItem","getURL","filters","filterInfo","getStateWhenServingPaging","queryName","getItem","actualPageSize","retrocycle","px","rez","$ref","eval","retrievedObject","oldState","columnDisplay","SaveMetadata","metaDataString","removeItem","GetSavedMetadata","mdata","contains","defineProperty","exports","renderJSPivot","setPageDataForPivotTable","setAttributeValuesForPivotTable","setPivottableDataCalculation","setDataSynForPivotTable","pivotParams","RealType","ServerPaging","ServerPagingPivot","AutoRefreshGroup","ObjectName","renderJSPivotInter","previousDataFieldOrder","customFilterInfo","xmlDoc","parseXML","withOrderCustom","getAttributeValuesSync","realValues","NotNullValues","realIncludeValues","DefaultAction","Excluded","Included","NullIncluded","oat_element","resText","queryself","PageSize","AutoResize","DisableColumnSort","RememberLayout","previousOrderType","previousFilters","previousColumnVisible","initialColumnVisible","previousState","gridCacheSize","ServerPagingCacheSize","hasShowValuesAs","splitMetadata","changeMetadata","ShowMeasuresAsRows","ShowDataLabelsIn","savedMd","t1","t2","t3","t4","name1","name2","fullXmlData","InitMetadata","DataString","Dimensions","Conditions","DataFields","RowsPerPage","initColumns","objectColumn","displayName","description","validPositions","metadatavisible","defaultPosition","Visible","validPosition","Measures","initMeasures","measureObject","DimensionPosition","OATgetState","hideDimension","hideMeasures","OATParseMetadata","GrandTotalVisibility","TotalForRows","TotalForColumns","orderFildsHidden","nameFildsHidden","pivotDiv","control","columnNumbers","rowNumbers","filterNumbers","conditionalFormats","formatValuesMeasures","forPivotFormatValues","forPivotFormats","columnNames","rowNames","filterNames","measureNames","preHeader","orderFilds","datePictures","intPictures","dateFields","intFields","crude","getDataFromXML","tableOrderField","ServerRecordCount","parseToIntRegisterValue","ServerPageCount","ServerPageNumber","filds","pos_init","fullRecord","maxLengthRecord","TableOrderFilds","pagingData","dataFields","furmulaIndex","recordDataLength","inlineFormula","inline","opers","inline2","polishNot","InfixToPostfix","polishNotationText","relatedMeasure","operPositionInDataRow","arrayNot","PolishNotation","urlRelative","fireOnPageChangeTable","paramobj","QueryviewerId","Navigation","evt","initEvent","parameter","cb","rowNum","currPage","ignoreRows","optionsForRows","jstype","topNav","cantPages","controlUcId","partialTablePagination","getBoundingClientRect","wd","scrollBottom","scrollHeight","readScrollValue","minWidth","recalculateCantPages","OrderType","DataFieldFilter","DataFieldBlackList","restoreDefaultView","layoutChanged","cleanCache","pageInCache","requestPageDataForTable","Filters","LayoutChange","getActualCantPages","actualCantPages","requestAttributeForTable","resetScrollValue","Page","fireOnFilterChanged","FilterChangedData","QueryViewerd","panel","tab","needs","forPivotCustomFormar","_mthis","actualPageNumber","AllowSelection","SelectLine","Title","dtF","defaultValues","TableOrderFields","cacheSize","gridCache","pageData","nextCachePos","filteredValuesPaginationInfo","hasNull","blocked","totalPages","filtered","filteredText","defaultNullText","customOrderValues","columnOrderNumber","endValueRead","CurrentPage","__mthis","indCache","cP","actualheader","meta","currPageNumber","iter","NewFilter","tempArrayVisibles","tit","tempArrayHiddens","filterExist","nullIncluded","included","excluded","reallyPseudoNull","finded","data_length","allValuesLoaded","noFilterNeeded","notNullValues","ValuePageInfo","lastRequestValue","whenFilter","PagesCount","newValues","Null","originalColumn","nI","field","alreadyInValues","requestDataField","cantItems","origColumnNumber","records","finalRes","df","difValues","dvi","xml_doc","dom","xmlDocument","Node","selectXPathNode","Name","SelectedValues","valueIndex","nodeName","tempInfo","indexHeader","defaultVisible","dataFieldPositions","QueryViewer","addValueToDifferentValues","sortInt","tempData","added","pivotdiv","formatValue","formatValueMeasures","initMetadata","prevCol","Pivot","registerValue","parseToStringRegisterValue","EvaluateExpressionPivotJs","tokens","evalStack","currentToken","isOperator","operand1","operand2","PerformOperation","operator","outputQueue","operatorStack","getAssociativity","getPrecedence","OATSetCookie","expires","domain","secure","cookie","escape","toGMTString","OATGetCookie","cname","dc","begin","end","unescape","OATGetRowsFromXML","rowsString","subTotal","headerString","headerrep","headersItems","datafield","totalizedItems","sumarized","ant","cellsString","ci","dField","columnsHeaders","ec","OATGetColumnsHeadersFromXML","columnsString","subHeaders","subHeadersString","sh","OATGetNewDataFromXMLForPivot","exportTo","OATgetDataFromXMLOldFormat","fullData","hideDataFilds","headMetadata","restMetadata","dimensionString","infoDisplayName","measuresString","allHide","GXPL_QViewerQuantity","taileMetadata","OATGetColumnsAndMeasureMeatadata","cookieValue","Layers","baseOffset","layers","currentIndex","raise","addLayer","removeLayer","setup","_fadeIn","fadeIn","noOp","noop","msie","ie6","setExpr","isFunction","setExpression","blockUI","opts","install","unblockUI","growlUI","message","timeout","onClose","$m","callBlock","fadeOut","centerY","showOverlay","onUnblock","growlCSS","displayBlock","stop","fadeTo","block","fullOpts","each","$el","ignoreIfBlocked","unblock","zoom","draggable","theme","themedCSS","overlayCSS","cursorReset","iframeSrc","forceIframe","baseZ","centerX","allowBodyStretch","bindEvents","constrainTabKey","focusInput","focusableElements","onBlock","onOverlayClick","quirksmodeOffsetHack","blockMsgClass","pageBlock","pageBlockEls","full","jquery","lyr1","lyr2","lyr3","$par","appendTo","handle","expr","support","boxModel","sz","fixT","fixL","cb1","cb2","bind","focus","to","clearTimeout","removeData","els","reset","cssW","handler","unbind","fwd","back","parents","GlobalPivotInterval","filterDiv","headerRow","headerRowIndexes","headerColIndexes","dataColumnIndex","condFormats","containerName","pivotTitle","nextRowWhenAutopaging","prevRowWhenAutopaging","paginationInfo","TempDataStructForAggStepOptimization","actualPaginationPage","allDataWithoutSort","rememberLayoutStateVersion","fromUndefinedToBlanck","sortIntMemory","ival","actualVal","initPos","PartialSort","tempDataRows","act_pos","repeated","tot","filaSumar","filaRepetida","formulasI","formulasJ","posB","PreviousPageNumber","AxisInfo","FilterInfo","initFilterIndexes","getFormulaRowByDataRow","measureNumber","caseId","hallado","searchIn","addedValues","coincide","selects","mforF","rforF","Infinity","autoPagingRowsPerPage","TotalPagesPaging","GrandTotalsPaging","fillGeneralDistinctValues","FilterByTopFilter","headingBefore","headingAfter","agg","aggTotals","customType","showEmpty","subtotals","totals","firstTime","readState","deleteState","gd","TitleDivId","PivotTitle","TitleDiv","defCArray","tempBlackLists","tempCollapsedValues","oldSortValues","stateChanged","allData","filteredData","tabularData","initRowConditions","initColConditions","colPointers","rowPointers","rowTotals","colTotals","gTotal","GreyList","EmptyValue","NullValue","initState","decycle","objects","paths","derez","nu","saveState","saveHiddenState","cleanState","il","whiteList","greyList","viejcolCond","viejcolRow","viejcolFilt","filterDivSelects","cleanStateWhenServerPagination","initValuePos","DataInfo","CollapseInfo","ip","ix","goWhenHide","requestPageDataForPivotTable","ReturnTotPages","AxesInfo","ExpandCollapse","anyError","debugServices","preGoWhenServerPagination","stateLoad","hideActivityIndicator","errMsg","getErrorFromText","renderError","goWhenServerPagination","ExportTo","lastNotAutorefreshIndicator","FileName","ExportToHTMLWhenServerPagination","ExportToXMLWhenServerPagination","ExportToXLSXWhenServerPagination","cleanGridCache","requestAttributeValues","FilterText","lastRequestAttributeValues","lastRequestAttributeColumnNumber","lastRequestAttributeAllData","lastRequestAttributeRequestDataField","includeLists","UserFilterValues","UserExpandValues","collapsedValues","createFilterInfo","actualValues","filteredShowValues","dimensionPictureValue","lastRequestAttributeFilterText","filterValuePars","lastRequestAttributeDataField","lastRequestAttributeUcId","lastColumnNumber","lastRequestAttributeValuesElemValue","action","lastRequestAttributeValuesAction","ExpandCollapseHandleWhenServerPaginationCreateXML","getDataForPivot","fireOnItemExpandCollapseEvent","onFilteredChangedEventHandleWhenServerPaginationCreateXML","IsCollapse","requestCalculatePivottableData","lastRequestCalculation","prevConditions","applyFilters","createAggStructure","fillAggStructure","checkAggStructure","Axis","Type","visibleData","filterDataXMLOK","forMetadatacolumns","rowPos","cantRowHidden","colPos","cantColHidden","pagePos","cantPageHidden","conPos","summarize","prevConPos","sortValue","findex","forMetadatameasures","measurePosition","yu","previuosXml","maxlevel","createXMLCOLITEMS","createXMLROWITEMS","parentCollapse","collapsed","inRow","superItem","parseText","previusJap","Hex","lightOn","lightOff","spanImageDragDrop","spanImageArrow","filterOK","fi","selectedIndex","cond","sortFunc","coef","numSort","dictSort","prevValues","notTrimValue","initCondition","showSubtotals","hideSubtotalsOption","isDimension","hideSubtotalOption","topFilterValue","GXPL_QViewerJSAllOption","topFilterString","restoreSubtotalsAndSortLayout","mState","applyCustomFilters","initWhenServerPagination","propPage","searchInfo","oldConditions","defcolCond","defcolRow","defStIndex","oldInitMetadata","createAxisInfo","NewAxisInfo","createNewAxisInfo","createDataInfo","NewDataInfo","createNewDataInfo","oldFilterDivValues","fiv","existElm","tmp2","clearInterval","previousValuePivotWidth","antepreviusValuePivotWidth","pageFilter","MaxWidthFilters","pFIndx","clientWdt","actualWidth","ParmAxisInfo","ParmDataInfo","CreateExpandCollapseInfo","iP","filterDim","isInFilteredShowValues","fV","callServiceWhenCustomeValues","getOrderReference","conditionIndex","anchorRef","functionRef","divRef","sourceCI","targetCI","insert","onDragundDropEventHandle","DiseablePivot","EneablePivot","startInRows","displayRef2","sourceType","sourceI","targetType","targetI","changesrowposition","getOrderReferenceProg","getClickReference","contentDiv","ShowPopUp","eventDiv","hr1","hr2","subtotal_sel_div","sl","GXPL_QViewerJSSubtotals","pivotStateChanged","appendActionsSeparator","pivotpurp","pivotpurp_sel_div","changedFromColumnToRow","GXPL_QViewerJSPivotDimensionToColumn","GXPL_QViewerJSPivotDimensionToRow","Ipadpurp","Ipadpurp_sel_div","ippl","GXPL_QViewerJSMoveToFilterBar","updateRowConditions","fromFilters","addCol","unhiddenDim","tempRowConditions","nO","axis","getDelFilterReference","idx","ifs","filterIndex","valueIsShowed","allFilters","getPair","onFilteredChangedEventHandleWhenServerPagination","divDis","ht","addExpandCollapseFunctionality","rowConditionNumber","expanded","rowDimension","divImg","spanTxt","setExpandCollapseEventHandlers","ItemDoubleClick","raiseItemClick","onClickExpandCollapse","getPerFilterValue","prevFilterSelectedValue","actualfilterIndex","hayfiltro","distinctPerFilterValue","drawTitleDiv","drawFilters","savedValues","filterInfoIcon","spanHover","GXPL_QViewerInfoUser","strng","GXPL_QViewerJSDropFiltersHere","spanText","loadItems","callgo","loaded","ref","filterIcon","checkInfoFilters","preGoWhenShowHideDimension","preGoWhenShowHideMeasures","autoNumber","exportXMLButtonSub","lastRequestPivotDataCalculation","exportPdfButton","_drawCorner","setTitleTexrtAlign","_drawRowConditionsHeadingsCustom","tr","isMeasureByName","resp","largo","GXPL_QViewerJSMeasures","headerName","ismeasure","pd","_drawRowConditionsHeadings","tbody","GXPL_QViewerJSValue","appendRowToTable","toolbarTable","_drawColConditionsHeadingsCustom","borderRightColor","_drawColConditionsHeadings","getClassName","columndatatype","lastMEasure","dat","getMeasureNumber","getMeasureName","countedRows","isTitleRow","drawTableWhenServerPagination","myTable","ni","columnValue","columnnumber","columndimension","rownumber","hiddenGrandTotal","isGrandTotal","GXPL_QViewerJSTotal","GXPL_QViewerJSTotalFor","borderLeftColor","repeticiones","several_totals","skipRow","itemCollapsed","collapsedCells","cc","measureTitle","getMeasureNumberByName","ji","mN","isTotal","subtitleClass","getMeasureNumberByDataField","valueClass","drawTableWhenShowMeasuresAsRows","firstRowTotalSpan","_mtotalSpan","collapsedColInfo","columnsDataHide","columnsDataHideFillWithBlanck","td_collection_forCollapseInfo","stack","tempItem","blankcell","totalSpan","collapsedInfo","subtotalsmeasuresList","grandtotalsmeasuresList","searchVal","rowsPositions","ptrArray","measureslength","mesauresList","lateralMeasureList","itemMV","formulaRow","getFormulaRowByCoord","saveValue","colPointerNumber","columnCoord","rowCoord","getMeasureValueCoord","subValue","NaN","total_","calculateFormulaTotal","reduce","MaxDept","relativeDim","addSubTotal","itemTemp","ptrArrayTemp","ptrTemp","pDim","sumM","valuesToOperate","vt","IsReduceNuN","isNuN","vft","createTempDataStructForAggStepOptimization","getMeasureValue","colDim","dimValues","dimPosition","rowsCoord","colCoord","numRow","tosearch","coinciden","pC","inputData","addToStack","iterator","conditionList","value_cond_row_pos","value_prev_cond_row_pos","createPart","struct","tempSearchData","dimensionLenght","filaAOrdenar","sortNumeric","newstack","itemsInclude","newStackValues","addToStack3","used","conditionNumber","valuePositionInSearchData","addToStack2","measureName","podar","measureValue","orden","value_prev","valuePosition","first","fillPart","rindex","posTitleMeasure","fillAllPart","ptrT","tempPt","itemLg","iterI","resultado","applyDefaultFormats","decimalPoint","bli","tempBlack","ib","rowPosition","trimValue","fils","getRowFromDimensionRow","rowCollection","rCL","same","rwoI","notInBlackList","esta","presentMeasures","DataFile","columnIndex","previousPosition","defpos","posIndex","tempRowConsition","existe","tempColConsition","tempFilConsition","stateHidden","newMetadata","canBeConsiderNoNew","helperList","notNew","preGoWhenMoveTopFilter","initLoad","dataColumns","previousRecord","newRecord","isNotFilterByTopFilter","preGoWhenFilterByTopFilter","addPageToCache","pageNum","getPageDataFromCache","fireOnPageChange","autorefreshflag","AxisChangeDataField","layoutForCollapseExpand","notAutorefresh","layoutChange","notNullVal","Expanded","Collapsed","NullExpanded","hiddenPos","Order","Subtotal","Position","Subtotals","posincol","cont","noterminar","iterRC","dataFieldRC","itAI","positionDF","Hidden","visiblePos","isFromMetadata","toDelete","sInput","ExpandCollapseHandleWhenServerPagination","cleanValueForNull","isClickedRow","columnOfValue","otherrow","dimension","isColumnDimensionValue","isClickedRowMeasure","requestDataSynForPivotTable","LastElemValue","parentElement","previuosDat","dataFieldsList","isNotSubtotal","cellNumber","filtRows","filtFullRows","SelectedValue","SelectedType","SelectedMorDNumber","SelectedItem","found","selectedCellOffset","prevRow","foundTotal","posTotal","typeTotal","itemTotal","selectedRowOffset","exit","lastRow","iterRowOffset","topRow","iterTopRow","createDataRowFromItem","selectedItemRowSpam","postRow","bellowRow","rowOffset","iterRow","offsetIter","itemRowSpan","getRowInitialShift","initialShift","getCellPositionSpanWithSpans","posWithoutSpan","posWithSpan","cellPos","itemDataRow","val1","val2","NumberMorD","numberMorD","nameMeasure","maxNumberMorD","MorD","tempMorD","tempnumberMorD","ExpandCollapseHandle","eventName","actionName","fireOnFilterChangedEvent","fireOnDragundDropEvent","iAI","iDI","initCollapseInfo","actualCollapseInfo","sortUnidimensionalArray","numConds","Statistics","longDesc","shortDesc","sum","allNuN","product","amean","Number","MIN_VALUE","MAX_VALUE","deviation","variance","sqrt","median","mode","TYPE_TEMPLATE","TYPE_MS","TYPE_MAC","TYPE_ROUND","TYPE_ODS","Win","visibleButtons","enabledButtons","outerWidth","outerHeight","stackGroupBase","template","M","caption","resizeContainer","moveTo","innerResizeTo","outerResizeTo","minimize","maximize","flip","WinTemplate","WinMS","WinMAC","WinRECT","WinROUND","WinODS","Resize","WinManager","addWindow","oat_w_ctr","oat_w_title_ctr","oat_w_title_t_ctr","oat_w_content","oat_w_max_b","oat_w_min_b","oat_w_close_b","oat_w_flip_b","oat_w_resize_handle","rc","tr_t","td_lt","td_t","td_rt","tr_m","td_l","td_m","td_r","tr_b","td_lb","td_b","td_rb","Browser","stackingGroups","removeWindow","zI","_Resize_movers","_Resize_pending","XMLHTTP","iframe","temp_src","ifr","setResponse","getResponseText","getResponseXML","responseXML","getReadyState","getStatus","setRequestHeader","getAllResponseHeaders","isIframe","XMLHttpRequest","ActiveXObject","XMLHTTP_supported","AnchorData","active","appendContent","fixSize","callForData","stat","datasource","connection","bindRecord","bindEmpty","FormObject","showAll","bindRecordCallback","bindPage","bindPageCallback","bindHeader","bindHeaderCallback","Form","onDone","resizeTo","totalWidth","totalHeight","anchorTo","bindFile","Xml","createXmlDoc","createFromXML","timeline","datasources","fieldSets","realIndexes","endpoint","url","DataSourceData","TYPE_SPARQL","SparqlQuery","fromString","variables","TYPE_GDATA","advanceRecord","arrow","endClose","startClose","displayRef","closeRef","closeFlag","openAnchor","Animation","startFunction","conditionFunction","stepFunction","stopFunction","step","running","AnimationSize","stepX","stepY","diffX","diffY","signX","signY","AnimationOpacity","step_","diff","AnimationCSS","ext","arrayLength","partialArray","settings","totalPagesId","currPageId","rowsPerPageId","firstPageId","prevPageId","nextPageId","lastPageId","tblLocation","possibleTableRows","makeArray","grep","inArray","resetTotalPages","resetCurrentPage","currPageNum","cantRows","resetPerPageValues","optsPerPage","perPageDropdown","Option","createPaginationElements","mul","prevButtonsClass","postButtonsClass","htmlBuffer","GXPL_QViewerJSPerPage","GXPL_QViewerJSPage","GXPL_QViewerJSOf","before","after","myPivotScss","QUERYVIEWER1_Queryviewer1","fadeTimeouts","UseRecordsetCache","GXPL_QViewerSinceTheBeginningTrend","GXPL_QViewerLastDayTrend","GXPL_QViewerLastHourTrend","handledataforpivottable","render","QueryViewerTranslations","class"],"sources":["node_modules/jspivottable/oat_pivotTable.js","src/components/pivot/my-pivot.scss?tag=my-pivot&encapsulation=shadow","src/components/pivot/my-pivot.tsx"],"sourcesContent":["\r\n\r\n\r\n\r\n\tvar OAT = {};\r\n\r\n\r\n\t/* global namespace */\r\n\tOAT.Preferences = {\r\n\t\tshowAjax: 1, \r\n\t\tuseCursors: 1, \r\n\t\twindowTypeOverride: 0, \r\n\t\tversion: \"10.08.2023\",\r\n\t\thttpError: 1, \r\n\t\tallowDefaultResize: 1,\r\n\t\tallowDefaultDrag: 1\r\n\t}\r\n\r\n\tOAT.$ = function (something) {\r\n\t\tif (typeof (something) == \"string\") {\r\n\t\t\tvar elm = document.getElementById(something);\r\n\t\t} else {\r\n\t\t\tvar elm = something;\r\n\t\t}\r\n\t\tif (something instanceof Array) {\r\n\t\t\tvar elm = [];\r\n\t\t\tfor (var i = 0; i < something.length; i++) { elm.push(OAT.$(something[i])); }\r\n\t\t}\r\n\t\tif (!elm) return false;\r\n\t\treturn elm;\r\n\t}\r\n\r\n\tOAT.$$ = function (className, root) {\r\n\t\tvar e = root || document;\r\n\t\tvar elms = e.getElementsByTagName(\"*\");\r\n\t\tvar matches = [];\r\n\r\n\t\tif (OAT.Dom.isClass(e, className)) { matches.push(e); }\r\n\t\tfor (var i = 0; i < elms.length; i++) {\r\n\t\t\tif (OAT.Dom.isClass(elms[i], className)) { matches.push(elms[i]); }\r\n\t\t}\r\n\t\treturn matches;\r\n\t}\r\n\r\n\tOAT.$v = function (something) {\r\n\t\tvar e = OAT.$(something);\r\n\t\tif (!e) return false;\r\n\t\tif (!(\"value\" in e)) return false;\r\n\t\treturn e.value;\r\n\t}\r\n\r\n\r\n\t/* several helpful prototypes */\r\n\tArray.prototype.findIndex = function (str) {\r\n\t\tfor (var i = 0; i < this.length; i++) if (this[i] == str) { return i; }\r\n\t\treturn -1;\r\n\t}\r\n\r\n\tString.prototype.trimpivot = function () {\r\n\t\tvar result = this.match(/^ *(.*?) *$/);\r\n\t\treturn (result ? result[1] : this);\r\n\t}\r\n\r\n\r\n\tOAT.addTextNode = function (node, text) {\r\n\t\tvar txtNode = document.createTextNode(text)\r\n\t\tvar nodeJ = jQuery('<span id=\"span_txt_pivot\"></span>')[0]\r\n\t\tnodeJ.appendChild(txtNode)\r\n\t\tnode.appendChild(nodeJ)\r\n\t}\r\n\t\r\n\t\r\n\tOAT.addImageNode = function(parent, icon_name, style, id)\r\n\t{\r\n\t\tvar icon = document.createElement(\"i\");\r\n\t\tif (id!=undefined){\r\n\t\t\ticon.setAttribute(\"id\", id);\r\n\t\t}\r\n\t\ticon.setAttribute(\"class\", \"material-icons\");\r\n\t\ticon.setAttribute(\"style\", style)\r\n\t\ticon.textContent = icon_name;  \r\n\t\tparent.appendChild(icon);\t\r\n\t}\r\n\r\n\tOAT.replaceTextNode = function (node, text) {\r\n\t\twhile (node.firstChild) {\r\n\t\t\tnode.removeChild(node.firstChild);\r\n\t\t}\r\n\t\tvar txtNode = document.createTextNode(text)\r\n\t\tnode.appendChild(txtNode)\r\n\t}\r\n\t\r\n\tOAT.AddItemToList = function (list, item) {\r\n\t\tif (list.indexOf(item) == -1) {\r\n\t\t\tlist.push(item);\r\n\t\t}\r\n\t\treturn list.sort(function(a, b) {\r\n  \t\t\t\treturn a - b;\r\n\t\t\t\t});\r\n\t} \r\n\t\r\n\tOAT.removeIconFont = function (text) {\r\n\t\treturn text.replace(/arrow_drop_up/g, '').replace(/arrow_drop_down/g, '').replace(/remove/g, '').replace(/add/g, '').replace(/settings/g, '');\r\n\t}\r\n\r\n\tOAT.ApplyPictureValue = function (value, type, defaultPicture, picture) { /* function responsible for set pictures */\r\n\t\tif (value == \"#NuN#\") {\r\n\t\t\tvar defaultNull = defaultPicture.getAttribute(\"textForNullValues\");\r\n\t\t\tif (defaultNull == \"\") {\r\n\t\t\t\treturn \"\\u00A0\";\r\n\t\t\t}\r\n\t\t\tif (defaultNull != undefined) {\r\n\t\t\t\treturn defaultNull;\r\n\t\t\t}\r\n\t\t\treturn \"\\u00A0\";\r\n\r\n\t\t}\r\n\t\t\r\n\t\t\tvar decimalSeparator = (defaultPicture.getAttribute(\"decimalSeparator\") != undefined && defaultPicture.getAttribute(\"decimalSeparator\") != null) ? defaultPicture.getAttribute(\"decimalSeparator\") : \".\";\r\n\t\t\tvar decimalPlaces = (defaultPicture.getAttribute(\"decimalPlaces\") != undefined && defaultPicture.getAttribute(\"decimalPlaces\") != null) ? defaultPicture.getAttribute(\"decimalPlaces\") : 2;\r\n\t\t\tvar thseparator = defaultPicture.getAttribute(\"thousandsSeparator\")\r\n\t\t\tvar defaultdate = defaultPicture.getAttribute(\"dateFormat\")\r\n\t\t\tvar newValue = value;\r\n\t\t\tvar lastCharacter = false;\r\n\r\n\t\t\tvar hasprefix = false;\r\n\t\t\tvar prefix = \"\";\r\n\t\t\tif ((type == \"integer\") || (type == \"real\")) {\r\n\t\t\t\tif ((picture != undefined) || (picture != null)) {\r\n\t\t\t\t\tif ((picture[0] != \"Z\") || (picture[0] != \"9\") || (picture[0] != \",\") || (picture[0] != \".\")) {\r\n\t\t\t\t\t\thasprefix = true;\r\n\t\t\t\t\t\tvar index = 0;\r\n\t\t\t\t\t\twhile ((picture.length > index) && (picture[index] != \"Z\") && (picture[index] != \"9\") && (picture[index] != \",\") && (picture[index] != \".\")) {\r\n\t\t\t\t\t\t\tindex++;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tprefix = picture.substring(0, index);\r\n\t\t\t\t\t\tpicture = picture.substring(index);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar hassufix = false;\r\n\t\t\tvar sufix = \"\";\r\n\t\t\tif ((type == \"integer\") || (type == \"real\")) {\r\n\t\t\t\tif ((picture != undefined) || (picture != null)) {\r\n\t\t\t\t\tif ((picture[picture.length - 1] != \"Z\") || (picture[picture.length - 1] != \"9\") || (picture[picture.length - 1] != \",\") || (picture[picture.length - 1] != \".\")) {\r\n\t\t\t\t\t\thassufix = true;\r\n\t\t\t\t\t\tvar index = picture.length - 1;\r\n\t\t\t\t\t\twhile ((index > -1) && (picture[index] != \"Z\") && (picture[index] != \"9\") && (picture[index] != \",\") && (picture[index] != \".\")) {\r\n\t\t\t\t\t\t\tindex--;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tsufix = picture.substring(index + 1);\r\n\t\t\t\t\t\tpicture = picture.substring(0, index + 1);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tswitch (type) {\r\n\t\t\t\tcase \"integer\":\r\n\t\t\t\t\tdecimalPlaces = 0;\r\n\t\t\t\tcase \"real\":\r\n\t\t\t\t\t\r\n\t\t\t\t\tif ((picture != undefined) && (picture != \"\")) {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tvar newValue = qv.util.formatNumber(parseFloat(value), decimalPlaces, picture, false);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvar valueSplit = value.split(\".\");\r\n\t\t\t\t\t\tvar useSeparator = true;\r\n\t\t\t\t\t\tif ((picture == \"\") && (type == \"integer\")) {\r\n\t\t\t\t\t\t\tuseSeparator = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (type == \"real\") {\r\n\t\t\t\t\t\t\tnewValue = parseFloat(value).toFixed(2);\r\n\t\t\t\t\t\t\tvalueSplit = newValue.split(\".\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\t\tnewValue = valueSplit[0];\r\n\t\t\t\t\t\r\n\r\n\r\n\t\t\t\t\t\tvar z_pos = -1;\r\n\t\t\t\t\t\tif ((picture != undefined) && (picture != \"\")) {\r\n\t\t\t\t\t\t\tvar picteSplit = picture.split(\".\");\r\n\t\t\t\t\t\t\tif (picteSplit.length > 1)\r\n\t\t\t\t\t\t\t\tz_pos = picteSplit[1].indexOf(\"Z\");\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (valueSplit[1] == null) {\r\n\t\t\t\t\t\t\tif (useSeparator) {\r\n\t\t\t\t\t\t\t\tvar numoblig = decimalPlaces;\r\n\t\t\t\t\t\t\t\tif (z_pos != -1) {\r\n\t\t\t\t\t\t\t\t\tnumoblig = z_pos;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (numoblig > 0) {\r\n\t\t\t\t\t\t\t\t\tnewValue = newValue + decimalSeparator;\r\n\t\t\t\t\t\t\t\t\tfor (var i = 0; i < numoblig; i++) {\r\n\t\t\t\t\t\t\t\t\t\tnewValue = newValue + \"0\";\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (useSeparator) {\r\n\r\n\t\t\t\t\t\t\t\tif (z_pos === -1) { //only 9s in decimal picture\r\n\t\t\t\t\t\t\t\t\tif (valueSplit[1].length < decimalPlaces) {\r\n\t\t\t\t\t\t\t\t\t\tnewValue = newValue + decimalSeparator + valueSplit[1];\r\n\t\t\t\t\t\t\t\t\t\tfor (var i = 0; i < decimalPlaces - valueSplit[1].length; i++) {\r\n\t\t\t\t\t\t\t\t\t\t\tnewValue = newValue + \"0\";\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tif (valueSplit[1].length > decimalPlaces) {\r\n\t\t\t\t\t\t\t\t\t\t\tvar newArray = \"\";\r\n\t\t\t\t\t\t\t\t\t\t\tfor (var i = 0; i < decimalPlaces; i++) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tnewArray = newArray + valueSplit[1].charAt(i);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\tnewValue = newValue + decimalSeparator + newArray;\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tnewValue = newValue + decimalSeparator + valueSplit[1];\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tvar numberoblig = z_pos;\r\n\t\t\t\t\t\t\t\t\tif (valueSplit[1].length < decimalPlaces) {\r\n\t\t\t\t\t\t\t\t\t\tif ((valueSplit[1].length > 0) || (numberoblig > 0)) {\r\n\t\t\t\t\t\t\t\t\t\t\tnewValue = newValue + decimalSeparator + valueSplit[1];\r\n\t\t\t\t\t\t\t\t\t\t\tfor (var i = 0; i < numberoblig - valueSplit[1].length; i++) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tnewValue = newValue + \"0\";\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t} else { //idem sin Z\r\n\t\t\t\t\t\t\t\t\t\tif (valueSplit[1].length > decimalPlaces) {\r\n\t\t\t\t\t\t\t\t\t\t\tvar newArray = \"\";\r\n\t\t\t\t\t\t\t\t\t\t\tfor (var i = 0; i < decimalPlaces; i++) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tnewArray = newArray + valueSplit[1].charAt(i);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\tnewValue = newValue + decimalSeparator + newArray;\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tnewValue = newValue + decimalSeparator + valueSplit[1];\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"date\":\r\n\t\t\t\t\tif (value == \"\") return \"\";\r\n\t\t\t\t\tif (picture === \"\") {\r\n\t\t\t\t\t\tvar dates = value.split(\"-\");\r\n\t\t\t\t\t\tvar newValue = value;\r\n\t\t\t\t\t\tif ((defaultdate != undefined) && (defaultdate != null)) {//if default picture\r\n\t\t\t\t\t\t\tpict = defaultdate.split(\"\");\r\n\t\t\t\t\t\t\tnewValue = \"\";\r\n\t\t\t\t\t\t\tfor (var i = 0; i <= 2; i++) {\r\n\t\t\t\t\t\t\t\tif (pict[i] === \"M\")\r\n\t\t\t\t\t\t\t\t\tnewValue = newValue + dates[1];\r\n\t\t\t\t\t\t\t\tif (pict[i] === \"D\")\r\n\t\t\t\t\t\t\t\t\tnewValue = newValue + dates[2];\r\n\t\t\t\t\t\t\t\tif (pict[i] === \"Y\")\r\n\t\t\t\t\t\t\t\t\tnewValue = newValue + dates[0];\r\n\t\t\t\t\t\t\t\tif (i != 2)\r\n\t\t\t\t\t\t\t\t\tnewValue = newValue + \"/\";\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tnewValue = dates[1] + \"/\" + dates[2] + \"/\" + dates[0];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tvar valueSplit = value.split(\"-\");\r\n\t\t\t\t\t\tnewValue = \"\";\r\n\t\t\t\t\t\tif (picture == \"99/99/9999\") {\r\n\t\t\t\t\t\t\tif (valueSplit[0].length == 4) {\r\n\t\t\t\t\t\t\t\tif ((defaultdate == undefined) || (defaultdate == null) || (defaultdate == \"MDY\")) {\r\n\t\t\t\t\t\t\t\t\tnewValue = valueSplit[1] + \"/\" + valueSplit[2] + \"/\" + valueSplit[0];\r\n\t\t\t\t\t\t\t\t} else if ((defaultdate != undefined) && (defaultdate == \"YMD\")) { //for japanese\r\n\t\t\t\t\t\t\t\t\tnewValue = valueSplit[0] + \"/\" + valueSplit[1] + \"/\" + valueSplit[2];\r\n\t\t\t\t\t\t\t\t} else { //DMY\r\n\t\t\t\t\t\t\t\t\tnewValue = valueSplit[2] + \"/\" + valueSplit[1] + \"/\" + valueSplit[0];\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tnewValue = value;\r\n\t\t\t\t\t\t\t\twhile (newValue.indexOf(\"-\") != -1) {\r\n\t\t\t\t\t\t\t\t\tnewValue.replace(\"-\", \"/\");\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else\r\n\r\n\t\t\t\t\t\t\tif (picture == \"99/99/99\") {\r\n\t\t\t\t\t\t\t\tif (valueSplit[0].length == 4) {\r\n\t\t\t\t\t\t\t\t\tvalueSplit[0] = valueSplit[0].substr(valueSplit[0].length - 2, 2);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif ((defaultdate == undefined) || (defaultdate == null) || (defaultdate == \"MDY\")) {\r\n\t\t\t\t\t\t\t\t\tnewValue = valueSplit[1] + \"/\" + valueSplit[2] + \"/\" + valueSplit[0];\r\n\t\t\t\t\t\t\t\t} else if ((defaultdate != undefined) && (defaultdate == \"YMD\")) { //for japanese\r\n\t\t\t\t\t\t\t\t\tnewValue = valueSplit[0] + \"/\" + valueSplit[1] + \"/\" + valueSplit[2];\r\n\t\t\t\t\t\t\t\t} else { //DMY\r\n\t\t\t\t\t\t\t\t\tnewValue = valueSplit[2] + \"/\" + valueSplit[1] + \"/\" + valueSplit[0];\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else if (picture == \"9999/99/99\") {\r\n\t\t\t\t\t\t\t\tif ((defaultdate == undefined) || (defaultdate == null) || (defaultdate == \"MDY\")) {\r\n\t\t\t\t\t\t\t\t\tnewValue = valueSplit[1] + \"/\" + valueSplit[2] + \"/\" + valueSplit[0];\r\n\t\t\t\t\t\t\t\t} else if ((defaultdate != undefined) && (defaultdate == \"YMD\")) { //for japanese\r\n\t\t\t\t\t\t\t\t\tnewValue = valueSplit[0] + \"/\" + valueSplit[1] + \"/\" + valueSplit[2];\r\n\t\t\t\t\t\t\t\t} else { //DMY\r\n\t\t\t\t\t\t\t\t\tnewValue = valueSplit[2] + \"/\" + valueSplit[1] + \"/\" + valueSplit[0];\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\tif (valueSplit[0].length == 4) {\r\n\t\t\t\t\t\t\t\t\tvalueSplit[0] = valueSplit[0].substr(valueSplit[0].length - 2, 2);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif ((defaultdate == undefined) || (defaultdate == null) || (defaultdate == \"MDY\")) {\r\n\t\t\t\t\t\t\t\t\tnewValue = valueSplit[1] + \"/\" + valueSplit[2] + \"/\" + valueSplit[0];\r\n\t\t\t\t\t\t\t\t} else if ((defaultdate != undefined) && (defaultdate == \"YMD\")) { //for japanese\r\n\t\t\t\t\t\t\t\t\tnewValue = valueSplit[0] + \"/\" + valueSplit[1] + \"/\" + valueSplit[2];\r\n\t\t\t\t\t\t\t\t} else { //DMY\r\n\t\t\t\t\t\t\t\t\tnewValue = valueSplit[2] + \"/\" + valueSplit[1] + \"/\" + valueSplit[0];\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak; // End execution\r\n\t\t\t\tcase \"datetime\":\r\n\t\t\t\t\tif (value == \"\") return \"\";\r\n\t\t\t\t\tvar dividevalue = value.split(\"T\");//separate date from hour\r\n\t\t\t\t\tif (value.indexOf(\"T\") === -1) {\r\n\t\t\t\t\t\tdividevalue = value.split(\" \");\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//formatting date\r\n\t\t\t\t\tif (picture === \"\") {\r\n\t\t\t\t\t\tvar dates = dividevalue[0].split(\"-\");\r\n\t\t\t\t\t\tvar newValue = value;\r\n\t\t\t\t\t\tif ((defaultdate != undefined) && (defaultdate != null)) {//if default picture\r\n\t\t\t\t\t\t\tpict = defaultdate.split(\"\");\r\n\t\t\t\t\t\t\tnewValue = \"\";\r\n\t\t\t\t\t\t\tfor (var i = 0; i <= 2; i++) {\r\n\t\t\t\t\t\t\t\tif (pict[i] === \"M\")\r\n\t\t\t\t\t\t\t\t\tnewValue = newValue + dates[1];\r\n\t\t\t\t\t\t\t\tif (pict[i] === \"D\")\r\n\t\t\t\t\t\t\t\t\tnewValue = newValue + dates[2];\r\n\t\t\t\t\t\t\t\tif (pict[i] === \"Y\")\r\n\t\t\t\t\t\t\t\t\tnewValue = newValue + dates[0];\r\n\t\t\t\t\t\t\t\tif (i != 2)\r\n\t\t\t\t\t\t\t\t\tnewValue = newValue + \"/\";\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tnewValue = dates[1] + \"/\" + dates[2] + \"/\" + dates[0];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvar dividepicture = picture.split(\" \");\r\n\t\t\t\t\t\tvar valueSplit = dividevalue[0].split(\"-\");\r\n\t\t\t\t\t\tnewValue = \"\";\r\n\t\t\t\t\t\tif (dividepicture[0] == \"99/99/9999\") {\r\n\t\t\t\t\t\t\tif (valueSplit[0].length == 4) {\r\n\t\t\t\t\t\t\t\tif ((defaultdate == undefined) || (defaultdate == null) || (defaultdate == \"MDY\")) {\r\n\t\t\t\t\t\t\t\t\tnewValue = valueSplit[1] + \"/\" + valueSplit[2] + \"/\" + valueSplit[0];\r\n\t\t\t\t\t\t\t\t} else if ((defaultdate != undefined) && (defaultdate == \"YMD\")) { //for japanese\r\n\t\t\t\t\t\t\t\t\tnewValue = valueSplit[0] + \"/\" + valueSplit[1] + \"/\" + valueSplit[2];\r\n\t\t\t\t\t\t\t\t} else { //DMY\r\n\t\t\t\t\t\t\t\t\tnewValue = valueSplit[2] + \"/\" + valueSplit[1] + \"/\" + valueSplit[0];\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tnewValue = value;\r\n\t\t\t\t\t\t\t\twhile (newValue.indexOf(\"-\") != -1) {\r\n\t\t\t\t\t\t\t\t\tnewValue.replace(\"-\", \"/\");\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else\r\n\r\n\t\t\t\t\t\t\tif (dividepicture[0] == \"99/99/99\") {\r\n\t\t\t\t\t\t\t\tif (valueSplit[0].length == 4) {\r\n\t\t\t\t\t\t\t\t\tvalueSplit[0] = valueSplit[0].substr(valueSplit[0].length - 2, 2);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif ((defaultdate == undefined) || (defaultdate == null) || (defaultdate == \"MDY\")) {\r\n\t\t\t\t\t\t\t\t\tnewValue = valueSplit[1] + \"/\" + valueSplit[2] + \"/\" + valueSplit[0];\r\n\t\t\t\t\t\t\t\t} else if ((defaultdate != undefined) && (defaultdate == \"YMD\")) { //for japanese\r\n\t\t\t\t\t\t\t\t\tnewValue = valueSplit[0] + \"/\" + valueSplit[1] + \"/\" + valueSplit[2];\r\n\t\t\t\t\t\t\t\t} else { //DMY\r\n\t\t\t\t\t\t\t\t\tnewValue = valueSplit[2] + \"/\" + valueSplit[1] + \"/\" + valueSplit[0];\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else\r\n\t\t\t\t\t\t\t\tif (dividepicture[0] == \"9999/99/99\")\r\n\t\t\t\t\t\t\t\t\tif ((defaultdate == undefined) || (defaultdate == null) || (defaultdate == \"MDY\")) {\r\n\t\t\t\t\t\t\t\t\t\tnewValue = valueSplit[1] + \"/\" + valueSplit[2] + \"/\" + valueSplit[0];\r\n\t\t\t\t\t\t\t\t\t} else if ((defaultdate != undefined) && (defaultdate == \"YMD\")) { //for japanese\r\n\t\t\t\t\t\t\t\t\t\tnewValue = valueSplit[0] + \"/\" + valueSplit[1] + \"/\" + valueSplit[2];\r\n\t\t\t\t\t\t\t\t\t} else { //DMY\r\n\t\t\t\t\t\t\t\t\t\tnewValue = valueSplit[2] + \"/\" + valueSplit[1] + \"/\" + valueSplit[0];\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse {\r\n\r\n\t\t\t\t\t\t\t\t\tnewValue = \"\";\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t//formating hour\r\n\r\n\t\t\t\t\tif (picture === \"\") {\r\n\t\t\t\t\t\tif (dividevalue.length > 1) {\r\n\t\t\t\t\t\t\tvar hourandms = dividevalue[1].split(\".\");\r\n\r\n\t\t\t\t\t\t\tnewValue = newValue + \" \" + hourandms[0]\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvar dividepicture = picture.split(\" \");\r\n\t\t\t\t\t\tif ((picture.split(\" \").length < 2) && (dividepicture[0] != \"99/99/9999\") && (dividepicture[0] != \"9999/99/99\") && (dividepicture[0] != \"99/99/99\")) {\r\n\t\t\t\t\t\t\tdividepicture.push(picture)\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (dividepicture.length > 1) {\r\n\t\t\t\t\t\t\tvar digits;\r\n\t\t\t\t\t\t\tif (dividevalue.length > 1) {\r\n\t\t\t\t\t\t\t\tvar hourandms = dividevalue[1].split(\".\");\r\n\r\n\t\t\t\t\t\t\t\tdigits = hourandms[0].split(\":\");\r\n\r\n\t\t\t\t\t\t\t\tif (digits.length < 2) {\r\n\t\t\t\t\t\t\t\t\tdigits[1] = \"00\";\r\n\t\t\t\t\t\t\t\t\tdigits[2] = \"00\";\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (digits.length < 3) {\r\n\t\t\t\t\t\t\t\t\tdigits[2] = \"00\";\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (hourandms.length < 2) {\r\n\t\t\t\t\t\t\t\t\tdigits[3] = \"000\"\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tdigits[3] = hourandms[1]\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tdigits = new Array(3)\r\n\t\t\t\t\t\t\t\tdigits[0] = \"00\";\r\n\t\t\t\t\t\t\t\tdigits[1] = \"00\";\r\n\t\t\t\t\t\t\t\tdigits[2] = \"00\";\r\n\t\t\t\t\t\t\t\tdigits[3] = \"000\";\r\n\t\t\t\t\t\t\t}\r\n\r\n\r\n\r\n\t\t\t\t\t\t\tswitch (dividepicture[1]) {\r\n\t\t\t\t\t\t\t\tcase \"99\":\r\n\t\t\t\t\t\t\t\t\tnewValue = newValue + \" \" + digits[0];\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\tcase \"99:99\":\r\n\t\t\t\t\t\t\t\t\tnewValue = newValue + \" \" + digits[0] + \":\" + digits[1];\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\tcase \"99:99:99\":\r\n\t\t\t\t\t\t\t\t\tnewValue = newValue + \" \" + digits[0] + \":\" + digits[1] + \":\" + digits[2];\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\tcase \"99:99:99.999\":\r\n\t\t\t\t\t\t\t\t\tnewValue = newValue + \" \" + digits[0] + \":\" + digits[1] + \":\" + digits[2] + \".\" + digits[3];\r\n\t\t\t\t\t\t\t\t\tbreak\r\n\t\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t\t\tnewValue = newValue + \" \" + digits[0] + \":\" + digits[1] + \":\" + digits[2];\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"character\":\r\n\t\t\t\t\tnewValue = OAT.Dom.fromSafeXML(value);\r\n\t\t\t\t\tif (picture == \"@!\") {\r\n\t\t\t\t\t\tnewValue = value.toUpperCase();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif (hasprefix) {\r\n\t\t\t\tnewValue = prefix + newValue;\r\n\t\t\t}\r\n\t\t\tif (hassufix) {\r\n\t\t\t\tnewValue = newValue + sufix;\r\n\t\t\t}\r\n\r\n\t\t\treturn newValue;\r\n\t\t}\r\n\t\r\n\t\r\n\t//Allow Selection methods \r\n\tOAT.SetSelectedNodeBackgroundColor = function(node, color, $container){\r\n\t\tOAT.ClearSelectedNodes($container)\r\n\t\tOAT.SetNodeBackgroundColor(node, color);\r\n\t}\r\n\t\r\n\tOAT.ClearSelectedNodes = function($container) {\r\n\t\t/*$container.find(\".gx-qv-selected-element\").each(function (index, value) {\r\n\t\t\tvar previousColor = jQuery(value).attr(\"previousBackgroundColor\");\r\n\t\t\tjQuery(value).css({backgroundColor: previousColor});\r\n\t\t});*/\r\n\t\t\r\n\t\t$container.find(\".gx-qv-selected-element\").removeClass(\"gx-qv-selected-element\");\r\n\t}\r\n\t\r\n\tOAT.SetNodeBackgroundColor = function(node, color){\r\n\t\tif (!jQuery(node).hasClass(\"gx-qv-selected-element\")){\r\n\t\t\t//var backgroundColor = jQuery(node).css(\"background-color\");\r\n\t\t\t//jQuery(node).attr(\"previousBackgroundColor\", backgroundColor);\r\n\t\t\r\n\t\t\t//jQuery(node).css({backgroundColor: color});\r\n\t\t\tjQuery(node).addClass(\"gx-qv-selected-element\");\r\n\t\t}\r\n\t}\r\n\t\r\n\tOAT.IsNodeSelected = function(node){\r\n\t\treturn jQuery(node).hasClass(\"gx-qv-selected-element\")\r\n\t}\r\n\t\r\n\tOAT.SelectAllRow = function(row, color, avoid){\r\n\t\tfor (var cell = 0; cell < row.children.length; cell++){\r\n\t\t\tif ((avoid == undefined) || (avoid != cell))\r\n\t\t\t\tOAT.SetNodeBackgroundColor(row.children[cell], color)\r\n\t\t}\r\n\t}\r\n\t//picture methods\r\n\r\n\tOAT.isSD = function(){\r\n\t\tvar ua = navigator.userAgent.toLowerCase();\r\n\t\tvar isAndroid = ua.indexOf(\"android\") > -1;\r\n\t\tvar isIOs = (ua.indexOf(\"iPhone\") != -1) || (ua.indexOf(\"iPad\") != -1) || (ua.indexOf(\"iPod\") != -1)\r\n\r\n\t\tif (isAndroid || isIOs) {\r\n\t\t\treturn true\r\n\t\t} else {\r\n\t\t\treturn false\r\n\t\t}\r\n\t}\r\n\t\r\n\tOAT.isAndroid = function(){\r\n\t\tvar ua = navigator.userAgent.toLowerCase();\r\n\t\treturn ua.indexOf(\"android\") > -1;\r\n\t}\r\n\t\r\n\tOAT.isSafari = function(){\r\n\t\tvar ua = navigator.userAgent.toLowerCase();\r\n\t\treturn ((ua.indexOf(\"Safari\") != -1) && (ua.indexOf(\"Chrome\") === -1))\r\n\t}\t\r\n\r\n\tOAT.isIE = function(){\r\n\t\tif (window.document.documentMode)\r\n\t\t\treturn true\r\n\t\telse\r\n\t\t\treturn false\r\n\t}\r\n\t\r\n\tOAT.isWebkit = function(){\r\n\t\tvar ua = navigator.userAgent.toLowerCase();\r\n\t\treturn (ua.search(/webkit/ig) != -1)\r\n\t}\r\n\t\r\n\tOAT.resourceURL = function(path){\r\n\t\treturn path;\r\n\t}\r\n\t\r\n\tOAT.charReplace = function (Value, Chars, Repls) {\r\n\t\tvar Ret = '';\r\n\t\tvar len = Value.length;\r\n\t\tfor (var i = 0; i < len; i++) {\r\n\t\t\tvar bFixed = false;\r\n\t\t\tvar len1 = Chars.length;\r\n\t\t\tfor (var c = 0; c < len1; c++) {\r\n\t\t\t\tif (Value.charAt(i) == Chars[c]) {\r\n\t\t\t\t\tif (c < Repls.length) {\r\n\t\t\t\t\t\tRet += Repls[c];\r\n\t\t\t\t\t\tbFixed = true;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (bFixed === false)\r\n\t\t\t\tRet += Value.charAt(i);\r\n\t\t}\r\n\t\treturn Ret;\r\n\t}\r\n\t\r\n\tOAT.Dom = { /* DOM common object */\r\n\t\tcreate: function (tagName, styleObj, className) {\r\n\t\t\tvar elm = document.createElement(tagName);\r\n\t\t\tif (styleObj) {\r\n\t\t\t\tfor (prop in styleObj) { elm.style[prop] = styleObj[prop]; }\r\n\t\t\t}\r\n\t\t\tif (className) { elm.className = className; }\r\n\t\t\treturn elm;\r\n\t\t},\r\n\r\n\t\tcreateNS: function (ns, tagName) {\r\n\t\t\tif (document.createElementNS) {\r\n\t\t\t\tvar elm = document.createElementNS(ns, tagName);\r\n\t\t\t} else {\r\n\t\t\t\tvar elm = document.createElement(tagName);\r\n\t\t\t\telm.setAttribute(\"xmlns\", ns);\r\n\t\t\t}\r\n\t\t\treturn elm;\r\n\t\t},\r\n\r\n\t\ttext: function (text) {\r\n\t\t\tvar elm = document.createTextNode(text);\r\n\t\t\treturn elm;\r\n\t\t},\r\n\r\n\t\tbutton: function (label) {\r\n\t\t\tvar b = OAT.Dom.create(\"input\");\r\n\t\t\tb.type = \"button\";\r\n\t\t\tb.value = label;\r\n\t\t\treturn b;\r\n\t\t},\r\n\r\n\t\tradio: function (name) {\r\n\t\t\tif (OAT.isIE()) {\r\n\t\t\t\tvar elm = document.createElement('<input type=\"radio\" name=\"' + name + '\" />');\r\n\t\t\t\treturn elm;\r\n\t\t\t} else {\r\n\t\t\t\tvar elm = OAT.Dom.create(\"input\");\r\n\t\t\t\telm.name = name;\r\n\t\t\t\telm.type = \"radio\";\r\n\t\t\t\treturn elm;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\timage: function (src, srcBlank, w, h) {\r\n\t\t\tw = (w ? w + 'px' : 'auto');\r\n\t\t\th = (h ? h + 'px' : 'auto');\r\n\t\t\tvar elm = OAT.Dom.create(\"img\", { width: w, height: h });\r\n\t\t\tOAT.Dom.imageSrc(elm, src, srcBlank);\r\n\t\t\treturn elm;\r\n\t\t},\r\n\r\n\t\timageSrc: function (element, src, srcBlank) {\r\n\t\t\tvar elm = OAT.$(element);\r\n\t\t\tvar png = !!src.toLowerCase().match(/png$/);\r\n\t\t\telm.src = src;\r\n\t\t},\r\n\t\toption: function (name, value, parent) {\r\n\t\t\tvar opt = OAT.Dom.create(\"option\");\r\n\t\t\tOAT.addTextNode(opt, name)\r\n\t\t\topt.value = value;\r\n\t\t\tif (parent) { OAT.$(parent).appendChild(opt); }\r\n\t\t\treturn opt;\r\n\t\t},\r\n\t\tappend: function () {\r\n\t\t\tfor (var i = 0; i < arguments.length; i++) {\r\n\t\t\t\tvar arr = arguments[i];\r\n\t\t\t\tif (!(arr instanceof Array)) { continue; }\r\n\t\t\t\tif (arr.length < 2) { continue; }\r\n\t\t\t\tvar parent = OAT.$(arr[0]);\r\n\t\t\t\tfor (var j = 1; j < arr.length; j++) {\r\n\t\t\t\t\tvar children = arr[j];\r\n\t\t\t\t\tif (!(children instanceof Array)) { children = [children]; }\r\n\t\t\t\t\tfor (var k = 0; k < children.length; k++) {\r\n\t\t\t\t\t\tvar child = children[k];\r\n\t\t\t\t\t\tparent.appendChild(OAT.$(child));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\thide: function (element) {\r\n\t\t\tif (arguments.length > 1) {\r\n\t\t\t\tfor (var i = 0; i < arguments.length; i++) { OAT.Dom.hide(arguments[i]); }\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (element instanceof Array) {\r\n\t\t\t\tfor (var i = 0; i < element.length; i++) { OAT.Dom.hide(element[i]); }\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar elm = OAT.$(element);\r\n\t\t\tif (!elm) { return; }\r\n\t\t\t/* ie input hack */\r\n\t\t\tvar inputs_ = elm.getElementsByTagName(\"input\");\r\n\t\t\tvar inputs = [];\r\n\t\t\tfor (var i = 0; i < inputs_.length; i++) { inputs.push(inputs_[i]); }\r\n\t\t\tif (elm.tagName.toLowerCase() == \"input\") { inputs.push(elm); }\r\n\t\t\tfor (var i = 0; i < inputs.length; i++) {\r\n\t\t\t\tvar inp = inputs[i];\r\n\t\t\t\tif (inp.type == \"radio\" || inp.type == \"checkbox\") {\r\n\t\t\t\t\tif (!inp.__checked) { inp.__checked = (inp.checked ? \"1\" : \"0\"); }\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telm.style.display = \"none\";\r\n\t\t},\r\n\r\n\t\tshow: function (element) {\r\n\t\t\tif (arguments.length > 1) {\r\n\t\t\t\tfor (var i = 0; i < arguments.length; i++) { OAT.Dom.show(arguments[i]); }\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (element instanceof Array) {\r\n\t\t\t\tfor (var i = 0; i < element.length; i++) { OAT.Dom.show(element[i]); }\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar elm = OAT.$(element);\r\n\t\t\tif (!elm) { return; }\r\n\t\t\telm.style.display = \"\";\r\n\t\t\t/* ie input hack */\r\n\t\t\tvar inputs_ = elm.getElementsByTagName(\"input\");\r\n\t\t\tvar inputs = [];\r\n\t\t\tfor (var i = 0; i < inputs_.length; i++) { inputs.push(inputs_[i]); }\r\n\t\t\tif (elm.tagName.toLowerCase() == \"input\") { inputs.push(elm); }\r\n\t\t\tfor (var i = 0; i < inputs.length; i++) {\r\n\t\t\t\tvar inp = inputs[i];\r\n\t\t\t\tif (inp.type == \"radio\" || inp.type == \"checkbox\") {\r\n\t\t\t\t\tif (inp[\"__checked\"] && inp.__checked === \"1\") { inp.checked = true; }\r\n\t\t\t\t\tif (inp[\"__checked\"] && inp.__checked === \"0\") { inp.checked = false; }\r\n\t\t\t\t\tinp.__checked = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tclear: function (element) {\r\n\t\t\tvar elm = OAT.$(element);\r\n\t\t\twhile (elm.firstChild) { elm.removeChild(elm.firstChild); }\r\n\t\t},\r\n\r\n\t\tunlink: function (element) {\r\n\t\t\tvar elm = OAT.$(element);\r\n\t\t\tif (!elm) { return; }\r\n\t\t\tif (!elm.parentNode) { return; }\r\n\t\t\telm.parentNode.removeChild(elm);\r\n\t\t},\r\n\r\n\t\tcenter: function (element, x, y, reference) {\r\n\t\t\tvar elm = OAT.$(element);\r\n\t\t\tvar p = elm.offsetParent;\r\n\t\t\tif (reference) { p = reference; }\r\n\t\t\tif (!p) { return; }\r\n\t\t\tvar par_dims = (p == document.body || p.tagName.toLowerCase() == \"html\" ? OAT.Dom.getViewport() : OAT.Dom.getWH(p));\r\n\t\t\tvar dims = OAT.Dom.getWH(elm);\r\n\t\t\tvar new_x = Math.round(par_dims[0] / 2 - dims[0] / 2);\r\n\t\t\tvar new_y = Math.round(par_dims[1] / 2 - dims[1] / 2);\r\n\t\t\tif (new_y < 0) { new_y = 30; }\r\n\t\t\tvar s = OAT.Dom.getScroll();\r\n\t\t\tif (p == document.body || p.tagName.toLowerCase() == \"html\") {\r\n\t\t\t\tnew_x += s[0];\r\n\t\t\t\tnew_y += s[1];\r\n\t\t\t}\r\n\t\t\tif (x) { elm.style.left = new_x + \"px\"; }\r\n\t\t\tif (y) { elm.style.top = new_y + \"px\"; }\r\n\t\t},\r\n\r\n\t\tisChild: function (child, parent) {\r\n\t\t\tvar c_elm = OAT.$(child);\r\n\t\t\tvar p_elm = OAT.$(parent);\r\n\t\t\t/* walk up from the child. if we find parent element, return true */\r\n\t\t\tvar node = c_elm.parentNode;\r\n\t\t\tdo {\r\n\t\t\t\tif (!node) { return false; }\r\n\t\t\t\tif (node == p_elm) { return true; }\r\n\t\t\t\tnode = node.parentNode;\r\n\t\t\t} while (node != document.body && node != document);\r\n\t\t\treturn false;\r\n\t\t},\r\n\r\n\t\tisKonqueror: function () { return (navigator.userAgent.match(/konqueror/i) ? true : false); },\r\n\t\tisKHTML: function () { return (navigator.userAgent.match(/khtml/i) ? true : false); },\r\n\t\tisIE: function () { return (document.attachEvent && !document.addEventListener ? true : false); },\r\n\t\tisIE7: function () { return (navigator.userAgent.match(/msie 7/i) ? true : false); },\r\n\t\tisIE6: function () { return (OAT.Dom.isIE() && !OAT.Dom.isIE7()); },\r\n\t\tisGecko: function () { return ((!OAT.Dom.isKHTML() && navigator.userAgent.match(/Gecko/i)) ? true : false); },\r\n\t\tisOpera: function () { return (navigator.userAgent.match(/Opera/) ? true : false); },\r\n\t\tisWebKit: function () { return (navigator.userAgent.match(/AppleWebKit/) ? true : false); },\r\n\t\tisMac: function () { return (navigator.platform.toString().match(/mac/i) ? true : false); },\r\n\t\tisLinux: function () { return (navigator.platform.toString().match(/linux/i) ? true : false); },\r\n\t\tisWindows: function () { return (navigator.userAgent.toString().match(/windows/i) ? true : false); },\r\n\r\n\t\tcolor: function (str) {\r\n\t\t\tvar hex2dec = function (hex) { return parseInt(hex, 16); }\r\n\t\t\t/* returns [col1,col2,col3] in decimal */\r\n\t\t\tif (str.match(/#/)) {\r\n\t\t\t\t/* hex */\r\n\t\t\t\tif (str.length == 4) {\r\n\t\t\t\t\tvar tmpstr = \"#\" + str.charAt(1) + str.charAt(1) + str.charAt(2) + str.charAt(2) + str.charAt(3) + str.charAt(3);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar tmpstr = str;\r\n\t\t\t\t}\r\n\t\t\t\tvar tmp = tmpstr.match(/#(..)(..)(..)/);\r\n\t\t\t\treturn [hex2dec(tmp[1]), hex2dec(tmp[2]), hex2dec(tmp[3])];\r\n\t\t\t} else {\r\n\t\t\t\t/* decimal */\r\n\t\t\t\tvar tmp = str.match(/\\(([^,]*),([^,]*),([^\\)]*)/);\r\n\t\t\t\treturn [parseInt(tmp[1]), parseInt(tmp[2]), parseInt(tmp[3])];\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tisClass: function (something, className) {\r\n\t\t\tvar elm = OAT.$(something);\r\n\t\t\tif (!elm) { return false; }\r\n\t\t\tif (className == \"*\") { return true; }\r\n\t\t\tif (className == \"\") { return false; }\r\n\t\t\tif (!elm.className) { return false; }\r\n\t\t\tvar arr = elm.className.split(\" \");\r\n\t\t\tvar index = arr.indexOf(className);\r\n\t\t\treturn (index != -1);\r\n\t\t},\r\n\r\n\t\taddClass: function (something, className) {\r\n\t\t\tvar elm = OAT.$(something);\r\n\t\t\tif (!elm) { return; }\r\n\t\t\tif (OAT.Dom.isClass(elm, className)) { return; }\r\n\t\t\tvar arr = elm.className.split(\" \");\r\n\t\t\tarr.push(className);\r\n\t\t\tif (arr[0] == \"\") { arr.splice(0, 1); }\r\n\t\t\telm.className = arr.join(\" \");\r\n\t\t},\r\n\r\n\t\tsetIdPropertyValue: function (something, value) {\r\n\t\t\tvar elm = OAT.$(something);\r\n\t\t\tif (!elm) { return; }\r\n\t\t\telm.id = value;\r\n\t\t},\r\n\r\n\t\tremoveClass: function (something, className) {\r\n\t\t\tvar elm = OAT.$(something);\r\n\t\t\tif (!elm) { return; }\r\n\t\t\tif (!OAT.Dom.isClass(elm, className)) { return; } /* cannot remove non-existing class */\r\n\t\t\tif (className == \"*\") { elm.className = \"\"; } /* should not occur */\r\n\t\t\tvar arr = elm.className.split(\" \");\r\n\t\t\tvar index = arr.indexOf(className);\r\n\t\t\tif (index == -1) { return; } /* should NOT occur! */\r\n\t\t\tarr.splice(index, 1);\r\n\t\t\telm.className = arr.join(\" \");\r\n\t\t},\r\n\r\n\t\tgetViewport: function () {\r\n\t\t\tif (OAT.isWebkit()) {\r\n\t\t\t\treturn [window.innerWidth, window.innerHeight];\r\n\t\t\t}\r\n\t\t\tif ( (navigator.userAgent.match(/Opera/)) || document.compatMode == \"BackCompat\") {\r\n\t\t\t\treturn [document.body.clientWidth, document.body.clientHeight];\r\n\t\t\t} else {\r\n\t\t\t\treturn [document.documentElement.clientWidth, document.documentElement.clientHeight];\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tposition: function (something) {\r\n\t\t\tvar elm = OAT.$(something);\r\n\t\t\tvar parent = elm.offsetParent;\r\n\t\t\tif (elm == document.body || elm == document || !parent) { return OAT.Dom.getLT(elm); }\r\n\t\t\tvar parent_coords = OAT.Dom.position(parent);\r\n\t\t\tvar c = OAT.Dom.getLT(elm);\r\n\t\t\t/*\r\n\t\t\tvar x = elm.offsetLeft - elm.scrollLeft + parent_coords[0];\r\n\t\t\tvar y = elm.offsetTop - elm.scrollTop + parent_coords[1];\r\n\t\t\t*/\r\n\r\n\t\t\t/*\r\n\t\t\tthis is interesting: Opera with no scrolling reports scrollLeft/Top equal to offsetLeft/Top for <input> elements\r\n\t\t\t*/\r\n\t\t\tvar x = c[0];\r\n\t\t\tvar y = c[1];\r\n\t\t\tif (!(navigator.userAgent.match(/Opera/)) || elm.scrollTop != elm.offsetTop || elm.scrollLeft != elm.offsetLeft) {\r\n\t\t\t\tx -= elm.scrollLeft;\r\n\t\t\t\ty -= elm.scrollTop;\r\n\t\t\t}\r\n\r\n\t\t\tif (OAT.isWebkit() && parent == document.body && OAT.Dom.style(elm, \"position\") == \"absolute\") { return [x, y]; }\r\n\r\n\t\t\tx += parent_coords[0];\r\n\t\t\ty += parent_coords[1];\r\n\t\t\treturn [x, y];\r\n\t\t},\r\n\r\n\t\tgetLT: function (something) {\r\n\t\t\tvar elm = OAT.$(something);\r\n\t\t\tvar curr_x, curr_y;\r\n\t\t\tif (elm.style.left && elm.style.position != \"relative\") {\r\n\t\t\t\tcurr_x = parseInt(elm.style.left);\r\n\t\t\t} else {\r\n\t\t\t\tcurr_x = elm.offsetLeft;\r\n\t\t\t}\r\n\t\t\tif (elm.style.top && elm.style.position != \"relative\") {\r\n\t\t\t\tcurr_y = parseInt(elm.style.top);\r\n\t\t\t} else {\r\n\t\t\t\tcurr_y = elm.offsetTop;\r\n\t\t\t}\r\n\t\t\treturn [curr_x, curr_y];\r\n\t\t},\r\n\r\n\t\tgetWH: function (something) {\r\n\t\t\t/*\r\n\t\t\tThis is tricky: we need to measure current element's width & height.\r\n\t\t\tIf this property was already set (thus available directly through elm.style),\r\n\t\t\teverything is ok.\r\n\t\t\tIf nothing was set yet:\r\n\t\t\t* IE stores this information in offsetWidth and offsetHeight\r\n\t\t\t* Gecko doesn't count borders into offsetWidth and offsetHeight\r\n\t\t\tThus, we need another means for counting real dimensions.\r\n\t\t\t*/\r\n\t\t\tvar curr_w, curr_h;\r\n\t\t\tvar elm = OAT.$(something);\r\n\t\t\tif (elm.style.width && !elm.style.width.match(/%/) && elm.style.width != \"auto\") {\r\n\t\t\t\tcurr_w = parseInt(elm.style.width);\r\n\t\t\t} else if (OAT.Style.get(elm, \"width\") && !OAT.isIE()) {\r\n\t\t\t\tcurr_w = Math.round(parseFloat(OAT.Style.get(elm, \"width\")));\r\n\t\t\t} else {\r\n\t\t\t\tcurr_w = elm.offsetWidth;\r\n\t\t\t\tif (elm.tagName.toLowerCase() == \"input\") { curr_w += 5; }\r\n\t\t\t}\r\n\r\n\t\t\tif (elm.style.height && !elm.style.height.match(/%/) && elm.style.height != \"auto\") {\r\n\t\t\t\tcurr_h = parseInt(elm.style.height);\r\n\t\t\t} else if (OAT.Style.get(elm, \"height\") && !OAT.isIE()) {\r\n\t\t\t\tcurr_h = Math.round(parseFloat(OAT.Style.get(elm, \"height\")));\r\n\t\t\t} else {\r\n\t\t\t\tcurr_h = elm.offsetHeight;\r\n\t\t\t\tif (elm.tagName.toLowerCase() == \"input\") { curr_h += 5; }\r\n\t\t\t}\r\n\r\n\t\t\t/* one more bonus - if we are getting height of document.body, take window size */\r\n\t\t\tif (elm == document.body) {\r\n\t\t\t\tcurr_h = (OAT.isIE() ? document.body.clientHeight : window.innerHeight);\r\n\t\t\t}\r\n\t\t\treturn [curr_w, curr_h];\r\n\t\t},\r\n\r\n\t\tmoveBy: function (element, dx, dy) {\r\n\t\t\tvar curr_x, curr_y;\r\n\t\t\tvar elm = OAT.$(element);\r\n\t\t\t/*\r\n\t\t\tIf the element is not anchored to left top corner, strange things will happen during resizing;\r\n\t\t\ttherefore, we need to make sure it is anchored properly.\r\n\t\t\t*/\r\n\t\t\tif (OAT.Dom.style(elm, \"position\") == \"absolute\") {\r\n\t\t\t\tif (!elm.style.left) {\r\n\t\t\t\t\telm.style.left = elm.offsetLeft + \"px\";\r\n\t\t\t\t\telm.style.right = \"\";\r\n\t\t\t\t}\r\n\t\t\t\tif (!elm.style.top) {\r\n\t\t\t\t\telm.style.top = elm.offsetTop + \"px\";\r\n\t\t\t\t\telm.style.bottom = \"\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar tmp = OAT.Dom.getLT(elm);\r\n\t\t\tcurr_x = tmp[0];\r\n\t\t\tcurr_y = tmp[1];\r\n\t\t\tvar x = curr_x + dx;\r\n\t\t\tvar y = curr_y + dy;\r\n\t\t\telm.style.left = x + \"px\";\r\n\t\t\telm.style.top = y + \"px\";\r\n\t\t},\r\n\r\n\t\tresizeBy: function (element, dx, dy) {\r\n\t\t\tvar curr_w, curr_h;\r\n\t\t\tvar elm = OAT.$(element);\r\n\t\t\t/*\r\n\t\t\tIf the element is not anchored to left top corner, strange things will happen during resizing;\r\n\t\t\ttherefore, we need to make sure it is anchored properly.\r\n\t\t\t*/\r\n\t\t\tif (OAT.Dom.style(elm, \"position\") == \"absolute\" && dx) {\r\n\t\t\t\tif (!elm.style.left) {\r\n\t\t\t\t\telm.style.left = elm.offsetLeft + \"px\";\r\n\t\t\t\t\telm.style.right = \"\";\r\n\t\t\t\t}\r\n\t\t\t\tif (!elm.style.top && dy) {\r\n\t\t\t\t\telm.style.top = elm.offsetTop + \"px\";\r\n\t\t\t\t\telm.style.bottom = \"\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar tmp = OAT.Dom.getWH(elm);\r\n\t\t\tcurr_w = tmp[0];\r\n\t\t\tcurr_h = tmp[1];\r\n\t\t\tvar w = curr_w + dx;\r\n\t\t\tvar h = curr_h + dy;\r\n\t\t\tif (dx) { elm.style.width = w + \"px\"; }\r\n\t\t\tif (dy) { elm.style.height = h + \"px\"; }\r\n\t\t},\r\n\r\n\t\tdecodeImage: function (data) {\r\n\t\t\tvar decoded = OAT.Crypto.base64d(data);\r\n\t\t\tvar mime = \"image/\";\r\n\t\t\tswitch (decoded.charAt(1)) {\r\n\t\t\t\tcase \"I\": mime += \"gif\"; break;\r\n\t\t\t\tcase \"P\": mime += \"png\"; break;\r\n\t\t\t\tcase \"M\": mime += \"bmp\"; break;\r\n\t\t\t\tdefault: mime += \"jpeg\"; break;\r\n\r\n\t\t\t}\r\n\t\t\tvar src = \"data:\" + mime + \";base64,\" + data;\r\n\t\t\treturn src;\r\n\t\t},\r\n\r\n\t\tremoveSelection: function () {\r\n\t\t\tvar selObj = false;\r\n\t\t\tif (document.getSelection && !(!OAT.Dom.isKHTML() && navigator.userAgent.match(/Gecko/i)) ) { selObj = document.getSelection(); }\r\n\t\t\tif (window.getSelection) { selObj = window.getSelection(); }\r\n\t\t\tif (document.selection) { selObj = document.selection; }\r\n\t\t\tif (selObj) {\r\n\t\t\t\tif (selObj.empty) { selObj.empty(); }\r\n\t\t\t\tif (selObj.removeAllRanges) { selObj.removeAllRanges(); }\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tgetScroll: function () {\r\n\t\t\tvar l = Math.max(document.documentElement.scrollLeft, document.body.scrollLeft);\r\n\t\t\tvar t = Math.max(document.documentElement.scrollTop, document.body.scrollTop);\r\n\t\t\treturn [l, t];\r\n\t\t},\r\n\r\n\t\tgetFreeSpace: function (x, y) {\r\n\t\t\tvar scroll = OAT.Dom.getScroll();\r\n\t\t\tvar port = OAT.Dom.getViewport();\r\n\t\t\tvar spaceLeft = x - scroll[0];\r\n\t\t\tvar spaceRight = port[0] - x + scroll[0];\r\n\t\t\tvar spaceTop = y - scroll[1];\r\n\t\t\tvar spaceBottom = port[1] - y + scroll[1];\r\n\t\t\tvar left = (spaceLeft > spaceRight);\r\n\t\t\tvar top = (spaceTop > spaceBottom);\r\n\t\t\treturn [left, top];\r\n\r\n\t\t},\r\n\r\n\t\ttoSafeXML: function (str) {\r\n\t\t\tif (typeof (str) != \"string\") { return str; }\r\n\t\t\treturn str.replace(/&/g, \"&amp;\").replace(/>/g, \"&gt;\").replace(/</g, \"&lt;\");\r\n\t\t},\r\n\r\n\t\tfromSafeXML: function (str) {\r\n\t\t\treturn str.replace(/&amp;/g, \"&\").replace(/&gt;/g, \">\").replace(/&lt;/g, \"<\");\r\n\t\t},\r\n\r\n\t\turiParams: function () {\r\n\t\t\tvar result = {};\r\n\t\t\tvar s = location.search;\r\n\t\t\tif (s.length > 1) { s = s.substring(1); }\r\n\t\t\tif (!s) { return result; }\r\n\t\t\tvar parts = s.split(\"&\");\r\n\t\t\tfor (var i = 0; i < parts.length; i++) {\r\n\t\t\t\tvar part = parts[i];\r\n\t\t\t\tif (!part) { continue; }\r\n\t\t\t\tvar index = part.indexOf(\"=\");\r\n\t\t\t\tif (index == -1) { result[decodeURIComponent(part)] = \"\"; continue; } /* not a pair */\r\n\r\n\t\t\t\tvar key = part.substring(0, index);\r\n\t\t\t\tvar val = part.substring(index + 1);\r\n\t\t\t\tkey = decodeURIComponent(key);\r\n\t\t\t\tval = decodeURIComponent(val);\r\n\r\n\t\t\t\tvar r = false;\r\n\t\t\t\tif ((r = key.match(/(.*)\\[\\]$/))) {\r\n\t\t\t\t\tkey = r[1];\r\n\t\t\t\t\tif (key in result) {\r\n\t\t\t\t\t\tresult[key].push(val);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tresult[key] = [val];\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult[key] = val;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t},\r\n\r\n\t\tchangeHref: function (elm, newHref) {\r\n\t\t\t/* opera cannot do this with elements not being part of the page :/ */\r\n\t\t\tvar ok = false;\r\n\t\t\tvar e = OAT.$(elm);\r\n\t\t\tvar node = e;\r\n\t\t\twhile (node.parentNode) {\r\n\t\t\t\tnode = node.parentNode;\r\n\t\t\t\tif (node == document.body) { ok = true; }\r\n\t\t\t}\r\n\t\t\tif (ok) {\r\n\t\t\t\te.href = newHref;\r\n\t\t\t} else if (e.parentNode) {\r\n\t\t\t\tvar oldParent = e.parentNode;\r\n\t\t\t\tvar next = e.nextSibling;\r\n\t\t\t\tdocument.body.appendChild(e);\r\n\t\t\t\te.href = newHref;\r\n\t\t\t\tOAT.Dom.unlink(e);\r\n\t\t\t\toldParent.insertBefore(e, next);\r\n\t\t\t} else {\r\n\t\t\t\tdocument.body.appendChild(e);\r\n\t\t\t\te.href = newHref;\r\n\t\t\t\tOAT.Dom.unlink(e);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tmakePosition: function (elm) {\r\n\t\t\tvar e = OAT.$(elm);\r\n\t\t\tif (OAT.Dom.style(e, \"position\") != \"absolute\") {\r\n\t\t\t\te.style.position = \"relative\";\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tOAT.Style = { /* Style helper */\r\n\t\tinclude: function (file, relativePath, force) {\r\n\t\t\tif (!file) return;\r\n\t\t\tfile = relativePath + 'QueryViewer/oatPivot/css/' + file; /*OAT.Preferences.stylePath*/\r\n\t\t\tif (!force) { /* prevent loading when already loaded */\r\n\t\t\t\tvar styles = document.getElementsByTagName('link');\r\n\t\t\t\tvar host = location.protocol + '//' + location.host;\r\n\t\t\t\tfor (var i = 0; i < styles.length; i++)\r\n\t\t\t\t\tif (file == styles[i].getAttribute('href') || host + file == styles[i].getAttribute('href'))\r\n\t\t\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar elm = OAT.Dom.create(\"link\");\r\n\t\t\telm.rel = \"stylesheet\";\r\n\t\t\telm.type = \"text/css\";\r\n\t\t\telm.href = file;\r\n\t\t\t//document.getElementsByTagName(\"head\")[0].appendChild(elm);\r\n\t\t\tjQuery(\"head\").prepend(elm);\r\n\t\t\t\r\n\t\t},\r\n\r\n\t\tget: function (elm, property) {\r\n\t\t\tvar element = OAT.$(elm);\r\n\t\t\tif (document.defaultView && document.defaultView.getComputedStyle) {\r\n\t\t\t\tvar cs = document.defaultView.getComputedStyle(element, '');\r\n\t\t\t\tif (!cs) { return true; }\r\n\t\t\t\treturn cs[property];\r\n\t\t\t} else {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tvar out = element.currentStyle[property];\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tvar out = element.getExpression(property);\r\n\t\t\t\t}\r\n\t\t\t\treturn out;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tbackground: function (element, src) {\r\n\t\t\tvar elm = OAT.$(element);\r\n\t\t\tvar png = !!src.toLowerCase().match(/png$/);\r\n\t\t\tif (png && OAT.isIE()) {\r\n\t\t\t\telm.style.filter = \"progid:DXImageTransform.Microsoft.AlphaImageLoader(src='\" + src + \"', sizingMethod='crop')\";\r\n\t\t\t} else {\r\n\t\t\t\telm.style.backgroundImage = \"url(\" + src + \")\";\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tapply: function (something, obj) {\r\n\t\t\tvar elm = OAT.$(something);\r\n\t\t\tif (!elm) { return; }\r\n\t\t\tfor (var p in obj) { elm.style[p] = obj[p]; }\r\n\t\t},\r\n\r\n\t\topacity: function (element, opacity) {\r\n\t\t\tvar o = Math.max(opacity, 0);\r\n\t\t\tvar elm = OAT.$(element);\r\n\t\t\tif (OAT.isIE()) {\r\n\t\t\t\telm.style.filter = \"alpha(opacity=\" + Math.round(o * 100) + \")\";\r\n\t\t\t} else {\r\n\t\t\t\telm.style.opacity = o;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tOAT.Dom.style = OAT.Style.get; /* backward compatibility */\r\n\tOAT.Dom.applyStyle = OAT.Style.apply; /* backward compatibility */\r\n\r\n\t//OAT.Browser = { /* Browser helper */\r\n\t\t/*isIE: OAT.Dom.isIE(),\r\n\t\tisIE6: OAT.Dom.isIE6(),\r\n\t\tisIE7: OAT.Dom.isIE7(),*/\r\n\t\t//isGecko: OAT.Dom.isGecko(),\r\n\t\t//isOpera: OAT.Dom.isOpera(),\r\n\t\t//isKonqueror: OAT.Dom.isKonqueror(),\r\n\t\t//isKHTML: OAT.Dom.isKHTML(),\r\n\t\t//isWebKit: OAT.Dom.isWebKit(),\r\n\t\t//isMac: OAT.Dom.isMac(),\r\n\t\t//isLinux: OAT.Dom.isLinux(),\r\n\t\t//isWindows: OAT.Dom.isWindows()\r\n\t//}\r\n\r\n\tOAT.Event = { /* Event helper */\r\n\t\tattach: function (elm, event, callback) {\r\n\t\t\tvar element = OAT.$(elm);\r\n\t\t\tif (element.addEventListener) {\t/* gecko */\r\n\t\t\t\telement.addEventListener(event, callback, false);\r\n\t\t\t} else if (element.attachEvent) { /* ie */\r\n\t\t\t\telement.attachEvent(\"on\" + event, callback);\r\n\t\t\t} else { /* ??? */\r\n\t\t\t\telement[\"on\" + event] = callback;\r\n\t\t\t}\r\n\t\t},\r\n\t\tdetach: function (elm, event, callback) {\r\n\t\t\tvar element = OAT.$(elm);\r\n\t\t\tif (element.removeEventListener) { /* gecko */\r\n\t\t\t\telement.removeEventListener(event, callback, false);\r\n\t\t\t} else if (element.detachEvent) { /* ie */\r\n\t\t\t\telement.detachEvent(\"on\" + event, callback);\r\n\t\t\t} else { /* ??? */\r\n\t\t\t\telement[\"on\" + event] = false;\r\n\t\t\t}\r\n\t\t},\r\n\t\tsource: function (event) {\r\n\t\t\treturn (event.target ? event.target : event.srcElement);\r\n\t\t},\r\n\t\tcancel: function (event) {\r\n\t\t\tevent.cancelBubble = true;\r\n\t\t\tif (event.stopPropagation) { event.stopPropagation(); }\r\n\t\t},\r\n\t\tposition: function (event) {\r\n\t\t\tvar scroll = OAT.Dom.getScroll();\r\n\t\t\treturn [event.clientX + scroll[0], event.clientY + scroll[1]];\r\n\t\t},\r\n\t\tprevent: function (event) {\r\n\t\t\tif (event.preventDefault) { event.preventDefault(); }\r\n\t\t\t//if (gx.util.browser.isIE()) {\r\n\t\t\tif (window.document.documentMode) {\r\n\t\t\t\tevent.returnValue = false;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tOAT.Dom.attach = OAT.Event.attach;\r\n\tOAT.Dom.detach = OAT.Event.detach;\r\n\tOAT.Dom.source = OAT.Event.source;\r\n\tOAT.Dom.eventPos = OAT.Event.position;\r\n\tOAT.Dom.prevent = OAT.Event.prevent;\r\n\r\n\tOAT.Loader = { /* first part of loader object */\r\n\t\ttoolkitPath: false,\r\n\t\tloadOccurred: 0, /* was window.onload fired? */\r\n\t\topenAjax: false, /* OpenAjax.js included? */\r\n\r\n\t\t\r\n\t}\r\n\r\n\tOAT.MSG = { /* messages */\r\n\t\tDEBUG: 0,\r\n\t\tOAT_DEBUG: 0,\r\n\t\tOAT_LOAD: 1,\r\n\t\tANIMATION_STOP: 2,\r\n\t\tTREE_EXPAND: 3,\r\n\t\tTREE_COLLAPSE: 4,\r\n\t\tDS_RECORD_PREADVANCE: 5,\r\n\t\tDS_RECORD_ADVANCE: 6,\r\n\t\tDS_PAGE_PREADVANCE: 7,\r\n\t\tDS_PAGE_ADVANCE: 8,\r\n\t\tAJAX_START: 9,\r\n\t\tAJAX_ERROR: 10,\r\n\t\tGD_START: 11,\r\n\t\tGD_ABORT: 12,\r\n\t\tGD_END: 13,\r\n\t\tDOCK_DRAG: 14,\r\n\t\tDOCK_REMOVE: 15,\r\n\t\tSLB_OPENED: 16,\r\n\t\tSLB_CLOSED: 17,\r\n\t\tregistry: [],\r\n\t\tattach: function (sender, msg, callback) {\r\n\t\t\tif (!sender) { return; }\r\n\t\t\tOAT.MSG.registry.push([sender, msg, callback]);\r\n\t\t},\r\n\t\tdetach: function (sender, msg, callback) {\r\n\t\t\tif (!sender) { return; }\r\n\t\t\tvar index = -1;\r\n\t\t\tfor (var i = 0; i < OAT.MSG.registry.length; i++) {\r\n\t\t\t\tvar rec = OAT.MSG.registry[i];\r\n\t\t\t\tif (rec[0] == sender && rec[1] == msg && rec[2] == callback) { index = i; }\r\n\t\t\t}\r\n\t\t\tif (index != -1) { OAT.MSG.registry.splice(index, 1); }\r\n\t\t},\r\n\t\tsend: function (sender, msg, event) {\r\n\t\t\tfor (var i = 0; i < OAT.MSG.registry.length; i++) {\r\n\t\t\t\tvar record = OAT.MSG.registry[i];\r\n\t\t\t\tvar senderOK = (sender == record[0] || record[0] == \"*\");\r\n\t\t\t\tif (!senderOK) { continue; }\r\n\t\t\t\tvar msgOK = (msg == record[1] || record[1] == \"*\");\r\n\t\t\t\tif (!msgOK && record[1].toString().match(/\\*/)) { /* try regexp match */\r\n\t\t\t\t\tvar re = new RegExp(record[1]);\r\n\t\t\t\t\tvar str = \"\";\r\n\t\t\t\t\tfor (var p in OAT.MSG) {\r\n\t\t\t\t\t\tvar v = OAT.MSG[p];\r\n\t\t\t\t\t\tif (v == msg) { str = p; }\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (str.match(re)) { msgOK = true; }\r\n\t\t\t\t} /* regexp */\r\n\t\t\t\tif (msgOK) { record[2](sender, msg, event); }\r\n\t\t\t} /* for all listeners */\r\n\t\t} /* send message */\r\n\t}\r\n\r\n\t\r\n\t\r\n\tif (typeof window != \"undefined\"){\r\n\t\tOAT.Event.attach(window, \"load\", function () {\r\n\t\t\tOAT.Loader.loadOccurred = 1;\r\n\t\t\tOAT.Loader.callListeners();\r\n\t\t});\r\n\t}\r\n\t\r\n\r\n\t\r\n\tOAT.Loader.listeners = new Array();\r\n\tOAT.Loader.addListener = function (callback) {\r\n\t\tif (OAT.Loader.loadOccurred == 1)\r\n\t\t\tcallback(); // Habr�a que ser un poco m�s defensivo ac�, chequer que el typeof sea function\r\n\t\telse {\r\n\t\t\tOAT.Loader.listeners.push(callback);\r\n\t\t}\r\n\t};\r\n\r\n\tOAT.Loader.callListeners = function () {\r\n\t\tfor (var i = 0, len = this.listeners.length; i < len; i++)\r\n\t\t\tOAT.Loader.listeners[i](); // Habr�a que ser un poco m�s defensivo ac�, chequear que el typeof sea function\r\n\t};\r\n\r\n\tOAT.LoadJapanesseCharacters = function () {\r\n\t\t\r\n\t\tvar uR = \"\";\r\n\t\tfor (var i = 0; i < jQuery('script').length; i++) {\r\n\t\t\tvar js_url = jQuery('script')[i].src\r\n\t\t\tif (js_url.indexOf(\"gxpivotjs\") > 0) {\r\n\t\t\t\tuR = js_url\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tOAT.rP = uR.substring(0, uR.indexOf(\"QueryViewer/oatPivot\"));\r\n\r\n\r\n\t\t//load japanese lenguage character images files\r\n\t\tif ((gx.languageCode == \"jap\") || (gx.languageCode == \"jpn\") || (gx.languageCode == \"jp\") || (gx.languageCode == \"ja\") || (gx.languageCode == \"jpx\")\r\n\t\t\t|| (gx.languageCode == \"ain\") || (gx.languageCode == \"jpns\") || (gx.languageCode == \"ams\") || (gx.languageCode == 'japanese')\r\n\t\t\t|| (gx.languageCode == \"JAP\") || (gx.languageCode == \"JP\") || (gx.languageCode == \"JA\") || (gx.languageCode == \"JPN\")\r\n\t\t\t|| (gx.languageCode == \"ja-JP\") || (gx.languageCode == \"ja_JP\") || (gx.languageCode == \"jp\")) {\r\n\r\n\r\n\r\n\r\n\t\t\tvar b = gx.util.resourceUrl(OAT.rP + 'QueryViewer/oatPivot/downloadify/' + 'jsPDF_japanese.js', true);\r\n\r\n\r\n\t\t\tvar d = document.getElementsByTagName(\"head\")[0] || document.documentElement;\r\n\t\t\tvar s = d.getElementsByTagName(\"script\");\r\n\t\t\tvar prevLoad = false;\r\n\t\t\tfor (var i = 0; s.length > i; i++) {\r\n\t\t\t\tif (s[i].src == b) {\r\n\t\t\t\t\tprevLoad = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (!prevLoad) {\r\n\t\t\t\tvar e = document.createElement(\"script\");\r\n\t\t\t\te.type = \"text/javascript\";\r\n\t\t\t\te.src = b;\r\n\t\t\t\te.onerror = function () {\r\n\t\t\t\t\tvar e = document.createElement(\"script\");\r\n\t\t\t\t\te.type = \"text/javascript\";\r\n\t\t\t\t\te.src = gx.util.resourceUrl(OAT.rP + 'QueryViewer/oatPivot/downloadify/' + 'jsPDF_japanese.src.js', true);\r\n\t\t\t\t\tvar d = document.getElementsByTagName(\"head\")[0] || document.documentElement;\r\n\t\t\t\t\td.insertBefore(e, d.lastChild);\r\n\t\t\t\t};\r\n\t\t\t\te.onreadystatechange = function () {\r\n\t\t\t\t\tvar document = this.readyState;\r\n\t\t\t\t\tif (document === \"loaded\" || document === \"complete\") {\r\n\t\t\t\t\t\te.onreadystatechange = null;\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t\td.insertBefore(e, d.lastChild);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t}\r\n\r\n\r\n\r\n\tfunction loadJS(FILE_URL, async = true) {\r\n\t\tlet scriptEle = document.createElement(\"script\");\r\n\r\n\t\tscriptEle.setAttribute(\"src\", FILE_URL);\r\n\t\tscriptEle.setAttribute(\"type\", \"text/javascript\");\r\n\t\tscriptEle.setAttribute(\"async\", async);\r\n\r\n\t\tdocument.body.appendChild(scriptEle);\r\n\r\n  \t\t// success event \r\n  \t\tscriptEle.addEventListener(\"load\", () => {\r\n    \t\tconsole.log(\"File loaded\")\r\n  \t\t});\r\n   \t\t// error event\r\n  \t\tscriptEle.addEventListener(\"error\", (ev) => {\r\n    \t\tconsole.log(\"Error on loading file\", ev);\r\n  \t\t});\r\n\t}\r\n\r\n\r\n\r\n\r\n\r\n\t\r\n\r\n\t//loadJS(\"QueryViewer/oatPivotTable/jsPDF_output.src.js\", false);\r\n\t//loadJS(\"QueryViewer/oatPivotTable/oat_dialog.src.js\", false);\r\n\t//loadJS(\"QueryViewer/oatPivotTable/oat_grid.src.js\", false);\r\n\t//loadJS(\"QueryViewer/oatPivotTable/oat_impl.src.js\", false);\r\n\t//loadJS(\"QueryViewer/oatPivotTable/oat_layers.src.js\", false);\r\n\t//loadJS(\"QueryViewer/oatPivotTable/oat_pivot.src.js\", false);\r\n\t//loadJS(\"QueryViewer/oatPivotTable/oat_statistic.src.js\", false);\r\n\t//loadJS(\"QueryViewer/oatPivotTable/oat_tablePagination.src.js\", false);\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\tvar jsPDF = (function () {\r\n\t\t'use strict';\r\n\t\t/*jslint browser:true, plusplus: true, bitwise: true, nomen: true */\r\n\t\t/*global document: false, btoa, atob, zpipe, Uint8Array, ArrayBuffer, Blob, saveAs, adler32cs, Deflater */\r\n\r\n\t\t// this will run on <=IE9, possibly some niche browsers\r\n\t\t// new webkit-based, FireFox, IE10 already have native version of this.\r\n\t\tif (typeof btoa === 'undefined') {\r\n\t\t\twindow.btoa = function (data) {\r\n\t\t\t\t// DO NOT ADD UTF8 ENCODING CODE HERE!!!!\r\n\r\n\t\t\t\t// UTF8 encoding encodes bytes over char code 128\r\n\t\t\t\t// and, essentially, turns an 8-bit binary streams\r\n\t\t\t\t// (that base64 can deal with) into 7-bit binary streams.\r\n\t\t\t\t// (by default server does not know that and does not recode the data back to 8bit)\r\n\t\t\t\t// You destroy your data.\r\n\r\n\t\t\t\t// binary streams like jpeg image data etc, while stored in JavaScript strings,\r\n\t\t\t\t// (which are 16bit arrays) are in 8bit format already.\r\n\t\t\t\t// You do NOT need to char-encode that before base64 encoding.\r\n\r\n\t\t\t\t// if you, by act of fate\r\n\t\t\t\t// have string which has individual characters with code\r\n\t\t\t\t// above 255 (pure unicode chars), encode that BEFORE you base64 here.\r\n\t\t\t\t// you can use absolutely any approch there, as long as in the end,\r\n\t\t\t\t// base64 gets an 8bit (char codes 0 - 255) stream.\r\n\t\t\t\t// when you get it on the server after un-base64, you must\r\n\t\t\t\t// UNencode it too, to get back to 16, 32bit or whatever original bin stream.\r\n\r\n\t\t\t\t// Note, Yes, JavaScript strings are, in most cases UCS-2 -\r\n\t\t\t\t// 16-bit character arrays. This does not mean, however,\r\n\t\t\t\t// that you always have to UTF8 it before base64.\r\n\t\t\t\t// it means that if you have actual characters anywhere in\r\n\t\t\t\t// that string that have char code above 255, you need to\r\n\t\t\t\t// recode *entire* string from 16-bit (or 32bit) to 8-bit array.\r\n\t\t\t\t// You can do binary split to UTF16 (BE or LE)\r\n\t\t\t\t// you can do utf8, you can split the thing by hand and prepend BOM to it,\r\n\t\t\t\t// but whatever you do, make sure you mirror the opposite on\r\n\t\t\t\t// the server. If server does not expect to post-process un-base64\r\n\t\t\t\t// 8-bit binary stream, think very very hard about messing around with encoding.\r\n\r\n\t\t\t\t// so, long story short:\r\n\t\t\t\t// DO NOT ADD UTF8 ENCODING CODE HERE!!!!\r\n\r\n\r\n\r\n\t\t\t\tvar b64 = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\",\r\n\t\t\t\t\tb64a = b64.split(''),\r\n\t\t\t\t\to1,\r\n\t\t\t\t\to2,\r\n\t\t\t\t\to3,\r\n\t\t\t\t\th1,\r\n\t\t\t\t\th2,\r\n\t\t\t\t\th3,\r\n\t\t\t\t\th4,\r\n\t\t\t\t\tbits,\r\n\t\t\t\t\ti = 0,\r\n\t\t\t\t\tac = 0,\r\n\t\t\t\t\tenc = \"\",\r\n\t\t\t\t\ttmp_arr = [],\r\n\t\t\t\t\tr;\r\n\r\n\t\t\t\tdo { // pack three octets into four hexets\r\n\t\t\t\t\to1 = data.charCodeAt(i++);\r\n\t\t\t\t\to2 = data.charCodeAt(i++);\r\n\t\t\t\t\to3 = data.charCodeAt(i++);\r\n\r\n\t\t\t\t\tbits = o1 << 16 | o2 << 8 | o3;\r\n\r\n\t\t\t\t\th1 = bits >> 18 & 0x3f;\r\n\t\t\t\t\th2 = bits >> 12 & 0x3f;\r\n\t\t\t\t\th3 = bits >> 6 & 0x3f;\r\n\t\t\t\t\th4 = bits & 0x3f;\r\n\r\n\t\t\t\t\t// use hexets to index into b64, and append result to encoded string\r\n\t\t\t\t\ttmp_arr[ac++] = b64a[h1] + b64a[h2] + b64a[h3] + b64a[h4];\r\n\t\t\t\t} while (i < data.length);\r\n\r\n\t\t\t\tenc = tmp_arr.join('');\r\n\t\t\t\tr = data.length % 3;\r\n\t\t\t\treturn (r ? enc.slice(0, r - 3) : enc) + '==='.slice(r || 3);\r\n\t\t\t\t// end of base64 encoder MIT, GPL\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tif (typeof atob === 'undefined') {\r\n\t\t\twindow.atob = function (data) {\r\n\t\t\t\t// http://kevin.vanzonneveld.net\r\n\t\t\t\t// +   original by: Tyler Akins (http://rumkin.com)\r\n\t\t\t\t// +   improved by: Thunder.m\r\n\t\t\t\t// +      input by: Aman Gupta\r\n\t\t\t\t// +   improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)\r\n\t\t\t\t// +   bugfixed by: Onno Marsman\r\n\t\t\t\t// +   bugfixed by: Pellentesque Malesuada\r\n\t\t\t\t// +   improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)\r\n\t\t\t\t// +      input by: Brett Zamir (http://brett-zamir.me)\r\n\t\t\t\t// +   bugfixed by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)\r\n\t\t\t\t// *     example 1: base64_decode('S2V2aW4gdmFuIFpvbm5ldmVsZA==');\r\n\t\t\t\t// *     returns 1: 'Kevin van Zonneveld'\r\n\t\t\t\t// mozilla has this native\r\n\t\t\t\t// - but breaks in 2.0.0.12!\r\n\t\t\t\t//if (typeof this.window['atob'] == 'function') {\r\n\t\t\t\t//    return atob(data);\r\n\t\t\t\t//}\r\n\t\t\t\tvar b64 = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\",\r\n\t\t\t\t\to1,\r\n\t\t\t\t\to2,\r\n\t\t\t\t\to3,\r\n\t\t\t\t\th1,\r\n\t\t\t\t\th2,\r\n\t\t\t\t\th3,\r\n\t\t\t\t\th4,\r\n\t\t\t\t\tbits,\r\n\t\t\t\t\ti = 0,\r\n\t\t\t\t\tac = 0,\r\n\t\t\t\t\tdec = \"\",\r\n\t\t\t\t\ttmp_arr = [];\r\n\r\n\t\t\t\tif (!data) {\r\n\t\t\t\t\treturn data;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tdata += '';\r\n\r\n\t\t\t\tdo { // unpack four hexets into three octets using index points in b64\r\n\t\t\t\t\th1 = b64.indexOf(data.charAt(i++));\r\n\t\t\t\t\th2 = b64.indexOf(data.charAt(i++));\r\n\t\t\t\t\th3 = b64.indexOf(data.charAt(i++));\r\n\t\t\t\t\th4 = b64.indexOf(data.charAt(i++));\r\n\r\n\t\t\t\t\tbits = h1 << 18 | h2 << 12 | h3 << 6 | h4;\r\n\r\n\t\t\t\t\to1 = bits >> 16 & 0xff;\r\n\t\t\t\t\to2 = bits >> 8 & 0xff;\r\n\t\t\t\t\to3 = bits & 0xff;\r\n\r\n\t\t\t\t\tif (h3 === 64) {\r\n\t\t\t\t\t\ttmp_arr[ac++] = String.fromCharCode(o1);\r\n\t\t\t\t\t} else if (h4 === 64) {\r\n\t\t\t\t\t\ttmp_arr[ac++] = String.fromCharCode(o1, o2);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\ttmp_arr[ac++] = String.fromCharCode(o1, o2, o3);\r\n\t\t\t\t\t}\r\n\t\t\t\t} while (i < data.length);\r\n\t\t\t\tdec = tmp_arr.join('');\r\n\t\t\t\treturn dec;\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tvar getObjectLength = typeof Object.keys === 'function' ?\r\n\t\t\tfunction (object) {\r\n\t\t\t\treturn Object.keys(object).length;\r\n\t\t\t} :\r\n\t\t\tfunction (object) {\r\n\t\t\t\tvar i = 0, e;\r\n\t\t\t\tfor (e in object) {\r\n\t\t\t\t\tif (object.hasOwnProperty(e)) {\r\n\t\t\t\t\t\ti++;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn i;\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\tPubSub implementation\r\n\t\t\t\r\n\t\t\t@class\r\n\t\t\t@name PubSub\r\n\t\t\t*/\r\n\t\t\tPubSub = function (context) {\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t@private\r\n\t\t\t\t@fieldOf PubSub\r\n\t\t\t\t*/\r\n\t\t\t\tthis.topics = {};\r\n\t\t\t\t/**\r\n\t\t\t\tStores what will be `this` within the callback functions.\r\n\t\r\n\t\t\t\t@private\r\n\t\t\t\t@fieldOf PubSub#\r\n\t\t\t\t*/\r\n\t\t\t\tthis.context = context;\r\n\t\t\t\t/**\r\n\t\t\t\tAllows caller to emit an event and pass arguments to event listeners.\r\n\t\t\t\t@public\r\n\t\t\t\t@function\r\n\t\t\t\t@param topic {String} Name of the channel on which to voice this event\r\n\t\t\t\t@param args Any number of arguments you want to pass to the listeners of this event.\r\n\t\t\t\t@methodOf PubSub#\r\n\t\t\t\t@name publish\r\n\t\t\t\t*/\r\n\t\t\t\tthis.publish = function (topic, args) {\r\n\t\t\t\t\tif (this.topics[topic]) {\r\n\t\t\t\t\t\tvar currentTopic = this.topics[topic],\r\n\t\t\t\t\t\t\ttoremove = [],\r\n\t\t\t\t\t\t\tfn,\r\n\t\t\t\t\t\t\ti,\r\n\t\t\t\t\t\t\tl,\r\n\t\t\t\t\t\t\tpair,\r\n\t\t\t\t\t\t\temptyFunc = function () { };\r\n\t\t\t\t\t\targs = Array.prototype.slice.call(arguments, 1);\r\n\t\t\t\t\t\tfor (i = 0, l = currentTopic.length; i < l; i++) {\r\n\t\t\t\t\t\t\tpair = currentTopic[i]; // this is a [function, once_flag] array\r\n\t\t\t\t\t\t\tfn = pair[0];\r\n\t\t\t\t\t\t\tif (pair[1]) { /* 'run once' flag set */\r\n\t\t\t\t\t\t\t\tpair[0] = emptyFunc;\r\n\t\t\t\t\t\t\t\ttoremove.push(i);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tfn.apply(this.context, args);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tfor (i = 0, l = toremove.length; i < l; i++) {\r\n\t\t\t\t\t\t\tcurrentTopic.splice(toremove[i], 1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t\t/**\r\n\t\t\t\tAllows listener code to subscribe to channel and be called when data is available\r\n\t\t\t\t@public\r\n\t\t\t\t@function\r\n\t\t\t\t@param topic {String} Name of the channel on which to voice this event\r\n\t\t\t\t@param callback {Function} Executable (function pointer) that will be ran when event is voiced on this channel.\r\n\t\t\t\t@param once {Boolean} (optional. False by default) Flag indicating if the function is to be triggered only once.\r\n\t\t\t\t@returns {Object} A token object that cen be used for unsubscribing.\r\n\t\t\t\t@methodOf PubSub#\r\n\t\t\t\t@name subscribe\r\n\t\t\t\t*/\r\n\t\t\t\tthis.subscribe = function (topic, callback, once) {\r\n\t\t\t\t\tif (!this.topics[topic]) {\r\n\t\t\t\t\t\tthis.topics[topic] = [[callback, once]];\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.topics[topic].push([callback, once]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\"topic\": topic,\r\n\t\t\t\t\t\t\"callback\": callback\r\n\t\t\t\t\t};\r\n\t\t\t\t};\r\n\t\t\t\t/**\r\n\t\t\t\tAllows listener code to unsubscribe from a channel\r\n\t\t\t\t@public\r\n\t\t\t\t@function\r\n\t\t\t\t@param token {Object} A token object that was returned by `subscribe` method\r\n\t\t\t\t@methodOf PubSub#\r\n\t\t\t\t@name unsubscribe\r\n\t\t\t\t*/\r\n\t\t\t\tthis.unsubscribe = function (token) {\r\n\t\t\t\t\tif (this.topics[token.topic]) {\r\n\t\t\t\t\t\tvar currentTopic = this.topics[token.topic], i, l;\r\n\r\n\t\t\t\t\t\tfor (i = 0, l = currentTopic.length; i < l; i++) {\r\n\t\t\t\t\t\t\tif (currentTopic[i][0] === token.callback) {\r\n\t\t\t\t\t\t\t\tcurrentTopic.splice(i, 1);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t};\r\n\r\n\r\n\t\t/**\r\n\t\t@constructor\r\n\t\t@private\r\n\t\t*/\r\n\t\tfunction jsPDF(orientation, unit, format, compressPdf, wdt, hgt) { /** String orientation, String unit, String format, Boolean compressed */\r\n\r\n\t\t\t// Default parameter values\r\n\t\t\tif (typeof orientation === 'undefined') {\r\n\t\t\t\torientation = 'p';\r\n\t\t\t} else {\r\n\t\t\t\torientation = orientation.toString().toLowerCase();\r\n\t\t\t}\r\n\t\t\tif (typeof unit === 'undefined') { unit = 'mm'; }\r\n\t\t\tif (typeof format === 'undefined') { format = 'a4'; }\r\n\t\t\tif (typeof compressPdf === 'undefined' && typeof zpipe === 'undefined') { compressPdf = false; }\r\n\r\n\t\t\tvar format_as_string = format.toString().toLowerCase(),\r\n\t\t\t\tversion = '0.9.0rc2',\r\n\t\t\t\tcontent = [],\r\n\t\t\t\tcontent_length = 0,\r\n\t\t\t\tcompress = compressPdf,\r\n\t\t\t\tpdfVersion = '1.3', // PDF Version\r\n\t\t\t\tpageFormats = { // Size in pt of various paper formats\r\n\t\t\t\t\t'a3': [841.89, 1190.55],\r\n\t\t\t\t\t'a4': [wdt, hgt],//[595.28, 841.89],\r\n\t\t\t\t\t'a5': [420.94, 595.28],\r\n\t\t\t\t\t'letter': [612, 792],\r\n\t\t\t\t\t'legal': [612, 1008]\r\n\t\t\t\t},\r\n\t\t\t\ttextColor = '0 g',\r\n\t\t\t\tdrawColor = '0 G',\r\n\t\t\t\tpage = 0,\r\n\t\t\t\tpages = [],\r\n\t\t\t\tobjectNumber = 2, // 'n' Current object number\r\n\t\t\t\toutToPages = false, // switches where out() prints. outToPages true = push to pages obj. outToPages false = doc builder content\r\n\t\t\t\toffsets = [], // List of offsets. Activated and reset by buildDocument(). Pupulated by various calls buildDocument makes.\r\n\t\t\t\tfonts = {}, // collection of font objects, where key is fontKey - a dynamically created label for a given font.\r\n\t\t\t\tfontmap = {}, // mapping structure fontName > fontStyle > font key - performance layer. See addFont()\r\n\t\t\t\tactiveFontSize = 16,\r\n\t\t\t\tactiveFontKey, // will be string representing the KEY of the font as combination of fontName + fontStyle\r\n\t\t\t\tlineWidth = 0.200025, // 2mm\r\n\t\t\t\tpageHeight,\r\n\t\t\t\tpageWidth,\r\n\t\t\t\tk, // Scale factor\r\n\t\t\t\tdocumentProperties = { 'title': '', 'subject': '', 'author': '', 'keywords': '', 'creator': '' },\r\n\t\t\t\tlineCapID = 0,\r\n\t\t\t\tlineJoinID = 0,\r\n\t\t\t\tAPI = {},\r\n\t\t\t\tevents = new PubSub(API),\r\n\t\t\t\ttmp,\r\n\t\t\t\tplugin,\r\n\t\t\t\t/////////////////////\r\n\t\t\t\t// Private functions\r\n\t\t\t\t/////////////////////\r\n\t\t\t\t// simplified (speedier) replacement for sprintf's %.2f conversion\r\n\t\t\t\tf2 = function (number) {\r\n\t\t\t\t\treturn number.toFixed(2);\r\n\t\t\t\t},\r\n\t\t\t\t// simplified (speedier) replacement for sprintf's %.3f conversion\r\n\t\t\t\tf3 = function (number) {\r\n\t\t\t\t\treturn number.toFixed(3);\r\n\t\t\t\t},\r\n\t\t\t\t// simplified (speedier) replacement for sprintf's %02d\r\n\t\t\t\tpadd2 = function (number) {\r\n\t\t\t\t\tvar n = (number).toFixed(0);\r\n\t\t\t\t\tif (number < 10) {\r\n\t\t\t\t\t\treturn '0' + n;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn n;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t// simplified (speedier) replacement for sprintf's %02d\r\n\t\t\t\tpadd10 = function (number) {\r\n\t\t\t\t\tvar n = (number).toFixed(0);\r\n\t\t\t\t\tif (n.length < 10) {\r\n\t\t\t\t\t\treturn new Array(11 - n.length).join('0') + n;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn n;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tout = function (string) {\r\n\t\t\t\t\tif (outToPages) { /* set by beginPage */\r\n\t\t\t\t\t\tpages[page].push(string);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tcontent.push(string);\r\n\t\t\t\t\t\tcontent_length += string.length + 1; // +1 is for '\\n' that will be used to join contents of content\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tnewObject = function () {\r\n\t\t\t\t\t// Begin a new object\r\n\t\t\t\t\tobjectNumber++;\r\n\t\t\t\t\toffsets[objectNumber] = content_length;\r\n\t\t\t\t\tout(objectNumber + ' 0 obj');\r\n\t\t\t\t\treturn objectNumber;\r\n\t\t\t\t},\r\n\t\t\t\tputStream = function (str) {\r\n\t\t\t\t\tout('stream');\r\n\t\t\t\t\tout(str);\r\n\t\t\t\t\tout('endstream');\r\n\t\t\t\t},\r\n\t\t\t\twPt,\r\n\t\t\t\thPt,\r\n\t\t\t\tkids,\r\n\t\t\t\ti,\r\n\t\t\t\tputPages = function () {\r\n\t\t\t\t\twPt = pageWidth * k;\r\n\t\t\t\t\thPt = pageHeight * k;\r\n\r\n\t\t\t\t\t// outToPages = false as set in endDocument(). out() writes to content.\r\n\r\n\t\t\t\t\tvar n, p, arr, uint, i, deflater, adler32;\r\n\t\t\t\t\tfor (n = 1; n <= page; n++) {\r\n\t\t\t\t\t\tnewObject();\r\n\t\t\t\t\t\tout('<</Type /Page');\r\n\t\t\t\t\t\tout('/Parent 1 0 R');\r\n\t\t\t\t\t\tout('/Resources 2 0 R');\r\n\t\t\t\t\t\tout('/Contents ' + (objectNumber + 1) + ' 0 R>>');\r\n\t\t\t\t\t\tout('endobj');\r\n\r\n\t\t\t\t\t\t// Page content\r\n\t\t\t\t\t\tp = pages[n].join('\\n');\r\n\t\t\t\t\t\tnewObject();\r\n\t\t\t\t\t\tif (compress) {\r\n\t\t\t\t\t\t\tarr = [];\r\n\t\t\t\t\t\t\tfor (i = 0; i < p.length; ++i) {\r\n\t\t\t\t\t\t\t\tarr[i] = p.charCodeAt(i);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tadler32 = adler32cs.from(p);\r\n\t\t\t\t\t\t\tdeflater = new Deflater(6);\r\n\t\t\t\t\t\t\tdeflater.append(new Uint8Array(arr));\r\n\t\t\t\t\t\t\tp = deflater.flush();\r\n\t\t\t\t\t\t\tarr = [new Uint8Array([120, 156]), new Uint8Array(p),\r\n\t\t\t\t\t\t\tnew Uint8Array([adler32 & 0xFF, (adler32 >> 8) & 0xFF, (adler32 >> 16) & 0xFF, (adler32 >> 24) & 0xFF])];\r\n\t\t\t\t\t\t\tp = '';\r\n\t\t\t\t\t\t\tfor (i in arr) {\r\n\t\t\t\t\t\t\t\tif (arr.hasOwnProperty(i)) {\r\n\t\t\t\t\t\t\t\t\tp += String.fromCharCode.apply(null, arr[i]);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tout('<</Length ' + p.length + ' /Filter [/FlateDecode]>>');\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tout('<</Length ' + p.length + '>>');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tputStream(p);\r\n\t\t\t\t\t\tout('endobj');\r\n\t\t\t\t\t}\r\n\t\t\t\t\toffsets[1] = content_length;\r\n\t\t\t\t\tout('1 0 obj');\r\n\t\t\t\t\tout('<</Type /Pages');\r\n\t\t\t\t\tkids = '/Kids [';\r\n\t\t\t\t\tfor (i = 0; i < page; i++) {\r\n\t\t\t\t\t\tkids += (3 + 2 * i) + ' 0 R ';\r\n\t\t\t\t\t}\r\n\t\t\t\t\tout(kids + ']');\r\n\t\t\t\t\tout('/Count ' + page);\r\n\t\t\t\t\tout('/MediaBox [0 0 ' + f2(wPt) + ' ' + f2(hPt) + ']');\r\n\t\t\t\t\tout('>>');\r\n\t\t\t\t\tout('endobj');\r\n\t\t\t\t},\r\n\t\t\t\tputFont = function (font) {\r\n\t\t\t\t\tfont.objectNumber = newObject();\r\n\t\t\t\t\tout('<</BaseFont/' + font.PostScriptName + '/Type/Font');\r\n\t\t\t\t\tif (typeof font.encoding === 'string') {\r\n\t\t\t\t\t\tout('/Encoding/' + font.encoding);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tout('/Subtype/Type1>>');\r\n\t\t\t\t\tout('endobj');\r\n\t\t\t\t},\r\n\t\t\t\tputFonts = function () {\r\n\t\t\t\t\tvar fontKey;\r\n\t\t\t\t\tfor (fontKey in fonts) {\r\n\t\t\t\t\t\tif (fonts.hasOwnProperty(fontKey)) {\r\n\t\t\t\t\t\t\tputFont(fonts[fontKey]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tputXobjectDict = function () {\r\n\t\t\t\t\t// Loop through images, or other data objects\r\n\t\t\t\t\tevents.publish('putXobjectDict');\r\n\t\t\t\t},\r\n\t\t\t\tputResourceDictionary = function () {\r\n\t\t\t\t\tout('/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]');\r\n\t\t\t\t\tout('/Font <<');\r\n\t\t\t\t\t// Do this for each font, the '1' bit is the index of the font\r\n\t\t\t\t\tvar fontKey;\r\n\t\t\t\t\tfor (fontKey in fonts) {\r\n\t\t\t\t\t\tif (fonts.hasOwnProperty(fontKey)) {\r\n\t\t\t\t\t\t\tout('/' + fontKey + ' ' + fonts[fontKey].objectNumber + ' 0 R');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tout('>>');\r\n\t\t\t\t\tout('/XObject <<');\r\n\t\t\t\t\tputXobjectDict();\r\n\t\t\t\t\tout('>>');\r\n\t\t\t\t},\r\n\t\t\t\tputResources = function () {\r\n\t\t\t\t\tputFonts();\r\n\t\t\t\t\tevents.publish('putResources');\r\n\t\t\t\t\t// Resource dictionary\r\n\t\t\t\t\toffsets[2] = content_length;\r\n\t\t\t\t\tout('2 0 obj');\r\n\t\t\t\t\tout('<<');\r\n\t\t\t\t\tputResourceDictionary();\r\n\t\t\t\t\tout('>>');\r\n\t\t\t\t\tout('endobj');\r\n\t\t\t\t\tevents.publish('postPutResources');\r\n\t\t\t\t},\r\n\t\t\t\taddToFontDictionary = function (fontKey, fontName, fontStyle) {\r\n\t\t\t\t\t// this is mapping structure for quick font key lookup.\r\n\t\t\t\t\t// returns the KEY of the font (ex: \"F1\") for a given pair of font name and type (ex: \"Arial\". \"Italic\")\r\n\t\t\t\t\tvar undef;\r\n\t\t\t\t\tif (fontmap[fontName] === undef) {\r\n\t\t\t\t\t\tfontmap[fontName] = {}; // fontStyle is a var interpreted and converted to appropriate string. don't wrap in quotes.\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfontmap[fontName][fontStyle] = fontKey;\r\n\t\t\t\t},\r\n\t\t\t\t/**\r\n\t\t\t\tFontObject describes a particular font as member of an instnace of jsPDF\r\n\t\r\n\t\t\t\tIt's a collection of properties like 'id' (to be used in PDF stream),\r\n\t\t\t\t'fontName' (font's family name), 'fontStyle' (font's style variant label)\r\n\t\r\n\t\t\t\t@class\r\n\t\t\t\t@public\r\n\t\t\t\t@property id {String} PDF-document-instance-specific label assinged to the font.\r\n\t\t\t\t@property PostScriptName {String} PDF specification full name for the font\r\n\t\t\t\t@property encoding {Object} Encoding_name-to-Font_metrics_object mapping.\r\n\t\t\t\t@name FontObject\r\n\t\t\t\t*/\r\n\t\t\t\tFontObject = {},\r\n\t\t\t\taddFont = function (PostScriptName, fontName, fontStyle, encoding) {\r\n\t\t\t\t\tvar fontKey = 'F' + (getObjectLength(fonts) + 1).toString(10),\r\n\t\t\t\t\t\t// This is FontObject\r\n\t\t\t\t\t\tfont = fonts[fontKey] = {\r\n\t\t\t\t\t\t\t'id': fontKey,\r\n\t\t\t\t\t\t\t// , 'objectNumber':   will be set by putFont()\r\n\t\t\t\t\t\t\t'PostScriptName': PostScriptName,\r\n\t\t\t\t\t\t\t'fontName': fontName,\r\n\t\t\t\t\t\t\t'fontStyle': fontStyle,\r\n\t\t\t\t\t\t\t'encoding': encoding,\r\n\t\t\t\t\t\t\t'metadata': {}\r\n\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\taddToFontDictionary(fontKey, fontName, fontStyle);\r\n\r\n\t\t\t\t\tevents.publish('addFont', font);\r\n\r\n\t\t\t\t\treturn fontKey;\r\n\t\t\t\t},\r\n\t\t\t\taddFonts = function () {\r\n\r\n\t\t\t\t\tvar HELVETICA = \"helvetica\",\r\n\t\t\t\t\t\tTIMES = \"times\",\r\n\t\t\t\t\t\tCOURIER = \"courier\",\r\n\t\t\t\t\t\tNORMAL = \"normal\",\r\n\t\t\t\t\t\tBOLD = \"bold\",\r\n\t\t\t\t\t\tITALIC = \"italic\",\r\n\t\t\t\t\t\tBOLD_ITALIC = \"bolditalic\",\r\n\t\t\t\t\t\tencoding = 'StandardEncoding',\r\n\t\t\t\t\t\tstandardFonts = [\r\n\t\t\t\t\t\t\t['Helvetica', HELVETICA, NORMAL],\r\n\t\t\t\t\t\t\t['Helvetica-Bold', HELVETICA, BOLD],\r\n\t\t\t\t\t\t\t['Helvetica-Oblique', HELVETICA, ITALIC],\r\n\t\t\t\t\t\t\t['Helvetica-BoldOblique', HELVETICA, BOLD_ITALIC],\r\n\t\t\t\t\t\t\t['Courier', COURIER, NORMAL],\r\n\t\t\t\t\t\t\t['Courier-Bold', COURIER, BOLD],\r\n\t\t\t\t\t\t\t['Courier-Oblique', COURIER, ITALIC],\r\n\t\t\t\t\t\t\t['Courier-BoldOblique', COURIER, BOLD_ITALIC],\r\n\t\t\t\t\t\t\t['Times-Roman', TIMES, NORMAL],\r\n\t\t\t\t\t\t\t['Times-Bold', TIMES, BOLD],\r\n\t\t\t\t\t\t\t['Times-Italic', TIMES, ITALIC],\r\n\t\t\t\t\t\t\t['Times-BoldItalic', TIMES, BOLD_ITALIC]\r\n\t\t\t\t\t\t],\r\n\t\t\t\t\t\ti,\r\n\t\t\t\t\t\tl,\r\n\t\t\t\t\t\tfontKey,\r\n\t\t\t\t\t\tparts;\r\n\t\t\t\t\tfor (i = 0, l = standardFonts.length; i < l; i++) {\r\n\t\t\t\t\t\tfontKey = addFont(\r\n\t\t\t\t\t\t\tstandardFonts[i][0],\r\n\t\t\t\t\t\t\tstandardFonts[i][1],\r\n\t\t\t\t\t\t\tstandardFonts[i][2],\r\n\t\t\t\t\t\t\tencoding\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t// adding aliases for standard fonts, this time matching the capitalization\r\n\t\t\t\t\t\tparts = standardFonts[i][0].split('-');\r\n\t\t\t\t\t\taddToFontDictionary(fontKey, parts[0], parts[1] || '');\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tevents.publish('addFonts', { 'fonts': fonts, 'dictionary': fontmap });\r\n\t\t\t\t},\r\n\t\t\t\t/**\r\n\t\r\n\t\t\t\t@public\r\n\t\t\t\t@function\r\n\t\t\t\t@param text {String}\r\n\t\t\t\t@param flags {Object} Encoding flags.\r\n\t\t\t\t@returns {String} Encoded string\r\n\t\t\t\t*/\r\n\t\t\t\tto8bitStream = function (text, flags) {\r\n\t\t\t\t\t/* PDF 1.3 spec:\r\n\t\t\t\t\t\"For text strings encoded in Unicode, the first two bytes must be 254 followed by\r\n\t\t\t\t\t255, representing the Unicode byte order marker, U+FEFF. (This sequence conflicts\r\n\t\t\t\t\twith the PDFDocEncoding character sequence thorn ydieresis, which is unlikely\r\n\t\t\t\t\tto be a meaningful beginning of a word or phrase.) The remainder of the\r\n\t\t\t\t\tstring consists of Unicode character codes, according to the UTF-16 encoding\r\n\t\t\t\t\tspecified in the Unicode standard, version 2.0. Commonly used Unicode values\r\n\t\t\t\t\tare represented as 2 bytes per character, with the high-order byte appearing first\r\n\t\t\t\t\tin the string.\"\r\n\t\r\n\t\t\t\t\tIn other words, if there are chars in a string with char code above 255, we\r\n\t\t\t\t\trecode the string to UCS2 BE - string doubles in length and BOM is prepended.\r\n\t\r\n\t\t\t\t\tHOWEVER!\r\n\t\t\t\t\tActual *content* (body) text (as opposed to strings used in document properties etc)\r\n\t\t\t\t\tdoes NOT expect BOM. There, it is treated as a literal GID (Glyph ID)\r\n\t\r\n\t\t\t\t\tBecause of Adobe's focus on \"you subset your fonts!\" you are not supposed to have\r\n\t\t\t\t\ta font that maps directly Unicode (UCS2 / UTF16BE) code to font GID, but you could\r\n\t\t\t\t\tfudge it with \"Identity-H\" encoding and custom CIDtoGID map that mimics Unicode\r\n\t\t\t\t\tcode page. There, however, all characters in the stream are treated as GIDs,\r\n\t\t\t\t\tincluding BOM, which is the reason we need to skip BOM in content text (i.e. that\r\n\t\t\t\t\tthat is tied to a font).\r\n\t\r\n\t\t\t\t\tTo signal this \"special\" PDFEscape / to8bitStream handling mode,\r\n\t\t\t\t\tAPI.text() function sets (unless you overwrite it with manual values\r\n\t\t\t\t\tgiven to API.text(.., flags) )\r\n\t\t\t\t\t\tflags.autoencode = true\r\n\t\t\t\t\t\tflags.noBOM = true\r\n\t\r\n\t\t\t\t\t*/\r\n\r\n\t\t\t\t\t/*\r\n\t\t\t\t\t`flags` properties relied upon:\r\n\t\t\t\t\t.sourceEncoding = string with encoding label.\r\n\t\t\t\t\t\t\"Unicode\" by default. = encoding of the incoming text.\r\n\t\t\t\t\t\tpass some non-existing encoding name\r\n\t\t\t\t\t\t(ex: 'Do not touch my strings! I know what I am doing.')\r\n\t\t\t\t\t\tto make encoding code skip the encoding step.\r\n\t\t\t\t\t.outputEncoding = Either valid PDF encoding name\r\n\t\t\t\t\t\t(must be supported by jsPDF font metrics, otherwise no encoding)\r\n\t\t\t\t\t\tor a JS object, where key = sourceCharCode, value = outputCharCode\r\n\t\t\t\t\t\tmissing keys will be treated as: sourceCharCode === outputCharCode\r\n\t\t\t\t\t.noBOM\r\n\t\t\t\t\t\tSee comment higher above for explanation for why this is important\r\n\t\t\t\t\t.autoencode\r\n\t\t\t\t\t\tSee comment higher above for explanation for why this is important\r\n\t\t\t\t\t*/\r\n\r\n\t\t\t\t\tvar i, l, undef, sourceEncoding, encodingBlock, outputEncoding, newtext, isUnicode, ch, bch;\r\n\r\n\t\t\t\t\tif (flags === undef) {\r\n\t\t\t\t\t\tflags = {};\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tsourceEncoding = flags.sourceEncoding ? sourceEncoding : 'Unicode';\r\n\r\n\t\t\t\t\toutputEncoding = flags.outputEncoding;\r\n\r\n\t\t\t\t\t// This 'encoding' section relies on font metrics format\r\n\t\t\t\t\t// attached to font objects by, among others,\r\n\t\t\t\t\t// \"Willow Systems' standard_font_metrics plugin\"\r\n\t\t\t\t\t// see jspdf.plugin.standard_font_metrics.js for format\r\n\t\t\t\t\t// of the font.metadata.encoding Object.\r\n\t\t\t\t\t// It should be something like\r\n\t\t\t\t\t//   .encoding = {'codePages':['WinANSI....'], 'WinANSI...':{code:code, ...}}\r\n\t\t\t\t\t//   .widths = {0:width, code:width, ..., 'fof':divisor}\r\n\t\t\t\t\t//   .kerning = {code:{previous_char_code:shift, ..., 'fof':-divisor},...}\r\n\t\t\t\t\tif ((flags.autoencode || outputEncoding) &&\r\n\t\t\t\t\t\tfonts[activeFontKey].metadata &&\r\n\t\t\t\t\t\tfonts[activeFontKey].metadata[sourceEncoding] &&\r\n\t\t\t\t\t\tfonts[activeFontKey].metadata[sourceEncoding].encoding\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\tencodingBlock = fonts[activeFontKey].metadata[sourceEncoding].encoding;\r\n\r\n\t\t\t\t\t\t// each font has default encoding. Some have it clearly defined.\r\n\t\t\t\t\t\tif (!outputEncoding && fonts[activeFontKey].encoding) {\r\n\t\t\t\t\t\t\toutputEncoding = fonts[activeFontKey].encoding;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// Hmmm, the above did not work? Let's try again, in different place.\r\n\t\t\t\t\t\tif (!outputEncoding && encodingBlock.codePages) {\r\n\t\t\t\t\t\t\toutputEncoding = encodingBlock.codePages[0]; // let's say, first one is the default\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (typeof outputEncoding === 'string') {\r\n\t\t\t\t\t\t\toutputEncoding = encodingBlock[outputEncoding];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// we want output encoding to be a JS Object, where\r\n\t\t\t\t\t\t// key = sourceEncoding's character code and\r\n\t\t\t\t\t\t// value = outputEncoding's character code.\r\n\t\t\t\t\t\tif (outputEncoding) {\r\n\t\t\t\t\t\t\tisUnicode = false;\r\n\t\t\t\t\t\t\tnewtext = [];\r\n\t\t\t\t\t\t\tfor (i = 0, l = text.length; i < l; i++) {\r\n\t\t\t\t\t\t\t\tch = outputEncoding[text.charCodeAt(i)];\r\n\t\t\t\t\t\t\t\tif (ch) {\r\n\t\t\t\t\t\t\t\t\tnewtext.push(\r\n\t\t\t\t\t\t\t\t\t\tString.fromCharCode(ch)\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tnewtext.push(\r\n\t\t\t\t\t\t\t\t\t\ttext[i]\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t// since we are looping over chars anyway, might as well\r\n\t\t\t\t\t\t\t\t// check for residual unicodeness\r\n\t\t\t\t\t\t\t\tif (newtext[i].charCodeAt(0) >> 8) { /* more than 255 */\r\n\t\t\t\t\t\t\t\t\tisUnicode = true;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\ttext = newtext.join('');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\ti = text.length;\r\n\t\t\t\t\t// isUnicode may be set to false above. Hence the triple-equal to undefined\r\n\t\t\t\t\twhile (isUnicode === undef && i !== 0) {\r\n\t\t\t\t\t\tif (text.charCodeAt(i - 1) >> 8) { /* more than 255 */\r\n\t\t\t\t\t\t\tisUnicode = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ti--;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!isUnicode) {\r\n\t\t\t\t\t\treturn text;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tnewtext = flags.noBOM ? [] : [254, 255];\r\n\t\t\t\t\t\tfor (i = 0, l = text.length; i < l; i++) {\r\n\t\t\t\t\t\t\tch = text.charCodeAt(i);\r\n\t\t\t\t\t\t\tbch = ch >> 8; // divide by 256\r\n\t\t\t\t\t\t\tif (bch >> 8) { /* something left after dividing by 256 second time */\r\n\t\t\t\t\t\t\t\tthrow new Error(\"Character at position \" + i.toString(10) + \" of string '\" + text + \"' exceeds 16bits. Cannot be encoded into UCS-2 BE\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tnewtext.push(bch);\r\n\t\t\t\t\t\t\tnewtext.push(ch - (bch << 8));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn String.fromCharCode.apply(undef, newtext);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t// Replace '/', '(', and ')' with pdf-safe versions\r\n\t\t\t\tpdfEscape = function (text, flags) {\r\n\t\t\t\t\t// doing to8bitStream does NOT make this PDF display unicode text. For that\r\n\t\t\t\t\t// we also need to reference a unicode font and embed it - royal pain in the rear.\r\n\r\n\t\t\t\t\t// There is still a benefit to to8bitStream - PDF simply cannot handle 16bit chars,\r\n\t\t\t\t\t// which JavaScript Strings are happy to provide. So, while we still cannot display\r\n\t\t\t\t\t// 2-byte characters property, at least CONDITIONALLY converting (entire string containing)\r\n\t\t\t\t\t// 16bit chars to (USC-2-BE) 2-bytes per char + BOM streams we ensure that entire PDF\r\n\t\t\t\t\t// is still parseable.\r\n\t\t\t\t\t// This will allow immediate support for unicode in document properties strings.\r\n\t\t\t\t\treturn to8bitStream(text, flags).replace(/\\\\/g, '\\\\\\\\').replace(/\\(/g, '\\\\(').replace(/\\)/g, '\\\\)');\r\n\t\t\t\t},\r\n\t\t\t\tputInfo = function () {\r\n\t\t\t\t\tout('/Producer (jsPDF ' + version + ')');\r\n\t\t\t\t\tif (documentProperties.title) {\r\n\t\t\t\t\t\tout('/Title (' + pdfEscape(documentProperties.title) + ')');\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (documentProperties.subject) {\r\n\t\t\t\t\t\tout('/Subject (' + pdfEscape(documentProperties.subject) + ')');\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (documentProperties.author) {\r\n\t\t\t\t\t\tout('/Author (' + pdfEscape(documentProperties.author) + ')');\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (documentProperties.keywords) {\r\n\t\t\t\t\t\tout('/Keywords (' + pdfEscape(documentProperties.keywords) + ')');\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (documentProperties.creator) {\r\n\t\t\t\t\t\tout('/Creator (' + pdfEscape(documentProperties.creator) + ')');\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar created = new Date();\r\n\t\t\t\t\tout('/CreationDate (D:' +\r\n\t\t\t\t\t\t[\r\n\t\t\t\t\t\t\tcreated.getFullYear(),\r\n\t\t\t\t\t\t\tpadd2(created.getMonth() + 1),\r\n\t\t\t\t\t\t\tpadd2(created.getDate()),\r\n\t\t\t\t\t\t\tpadd2(created.getHours()),\r\n\t\t\t\t\t\t\tpadd2(created.getMinutes()),\r\n\t\t\t\t\t\t\tpadd2(created.getSeconds())\r\n\t\t\t\t\t\t].join('') +\r\n\t\t\t\t\t\t')'\r\n\t\t\t\t\t);\r\n\t\t\t\t},\r\n\t\t\t\tputCatalog = function () {\r\n\t\t\t\t\tout('/Type /Catalog');\r\n\t\t\t\t\tout('/Pages 1 0 R');\r\n\t\t\t\t\t// @TODO: Add zoom and layout modes\r\n\t\t\t\t\tout('/OpenAction [3 0 R /FitH null]');\r\n\t\t\t\t\tout('/PageLayout /OneColumn');\r\n\t\t\t\t\tevents.publish('putCatalog');\r\n\t\t\t\t},\r\n\t\t\t\tputTrailer = function () {\r\n\t\t\t\t\tout('/Size ' + (objectNumber + 1));\r\n\t\t\t\t\tout('/Root ' + objectNumber + ' 0 R');\r\n\t\t\t\t\tout('/Info ' + (objectNumber - 1) + ' 0 R');\r\n\t\t\t\t},\r\n\t\t\t\tbeginPage = function () {\r\n\t\t\t\t\tpage++;\r\n\t\t\t\t\t// Do dimension stuff\r\n\t\t\t\t\toutToPages = true;\r\n\t\t\t\t\tpages[page] = [];\r\n\t\t\t\t},\r\n\t\t\t\t_addPage = function () {\r\n\t\t\t\t\tbeginPage();\r\n\t\t\t\t\t// Set line width\r\n\t\t\t\t\tout(f2(lineWidth * k) + ' w');\r\n\t\t\t\t\t// Set draw color\r\n\t\t\t\t\tout(drawColor);\r\n\t\t\t\t\t// resurrecting non-default line caps, joins\r\n\t\t\t\t\tif (lineCapID !== 0) {\r\n\t\t\t\t\t\tout(lineCapID.toString(10) + ' J');\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (lineJoinID !== 0) {\r\n\t\t\t\t\t\tout(lineJoinID.toString(10) + ' j');\r\n\t\t\t\t\t}\r\n\t\t\t\t\tevents.publish('addPage', { 'pageNumber': page });\r\n\t\t\t\t},\r\n\t\t\t\t/**\r\n\t\t\t\tReturns a document-specific font key - a label assigned to a\r\n\t\t\t\tfont name + font type combination at the time the font was added\r\n\t\t\t\tto the font inventory.\r\n\t\r\n\t\t\t\tFont key is used as label for the desired font for a block of text\r\n\t\t\t\tto be added to the PDF document stream.\r\n\t\t\t\t@private\r\n\t\t\t\t@function\r\n\t\t\t\t@param fontName {String} can be undefined on \"falthy\" to indicate \"use current\"\r\n\t\t\t\t@param fontStyle {String} can be undefined on \"falthy\" to indicate \"use current\"\r\n\t\t\t\t@returns {String} Font key.\r\n\t\t\t\t*/\r\n\t\t\t\tgetFont = function (fontName, fontStyle) {\r\n\t\t\t\t\tvar key, undef;\r\n\r\n\t\t\t\t\tif (fontName === undef) {\r\n\t\t\t\t\t\tfontName = fonts[activeFontKey].fontName;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (fontStyle === undef) {\r\n\t\t\t\t\t\tfontStyle = fonts[activeFontKey].fontStyle;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tkey = fontmap[fontName][fontStyle]; // returns a string like 'F3' - the KEY corresponding tot he font + type combination.\r\n\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\tkey = undef;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!key) {\r\n\t\t\t\t\t\tthrow new Error(\"Unable to look up font label for font '\" + fontName + \"', '\" + fontStyle + \"'. Refer to getFontList() for available fonts.\");\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn key;\r\n\t\t\t\t},\r\n\t\t\t\tbuildDocument = function () {\r\n\r\n\t\t\t\t\toutToPages = false; // switches out() to content\r\n\t\t\t\t\tcontent = [];\r\n\t\t\t\t\toffsets = [];\r\n\r\n\t\t\t\t\t// putHeader()\r\n\t\t\t\t\tout('%PDF-' + pdfVersion);\r\n\r\n\t\t\t\t\tputPages();\r\n\r\n\t\t\t\t\tputResources();\r\n\r\n\t\t\t\t\t// Info\r\n\t\t\t\t\tnewObject();\r\n\t\t\t\t\tout('<<');\r\n\t\t\t\t\tputInfo();\r\n\t\t\t\t\tout('>>');\r\n\t\t\t\t\tout('endobj');\r\n\r\n\t\t\t\t\t// Catalog\r\n\t\t\t\t\tnewObject();\r\n\t\t\t\t\tout('<<');\r\n\t\t\t\t\tputCatalog();\r\n\t\t\t\t\tout('>>');\r\n\t\t\t\t\tout('endobj');\r\n\r\n\t\t\t\t\t// Cross-ref\r\n\t\t\t\t\tvar o = content_length, i;\r\n\t\t\t\t\tout('xref');\r\n\t\t\t\t\tout('0 ' + (objectNumber + 1));\r\n\t\t\t\t\tout('0000000000 65535 f ');\r\n\t\t\t\t\tfor (i = 1; i <= objectNumber; i++) {\r\n\t\t\t\t\t\tout(padd10(offsets[i]) + ' 00000 n ');\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// Trailer\r\n\t\t\t\t\tout('trailer');\r\n\t\t\t\t\tout('<<');\r\n\t\t\t\t\tputTrailer();\r\n\t\t\t\t\tout('>>');\r\n\t\t\t\t\tout('startxref');\r\n\t\t\t\t\tout(o);\r\n\t\t\t\t\tout('%%EOF');\r\n\r\n\t\t\t\t\toutToPages = true;\r\n\r\n\t\t\t\t\treturn content.join('\\n');\r\n\t\t\t\t},\r\n\t\t\t\tgetStyle = function (style) {\r\n\t\t\t\t\t// see Path-Painting Operators of PDF spec\r\n\t\t\t\t\tvar op = 'S'; // stroke\r\n\t\t\t\t\tif (style === 'F') {\r\n\t\t\t\t\t\top = 'f'; // fill\r\n\t\t\t\t\t} else if (style === 'FD' || style === 'DF') {\r\n\t\t\t\t\t\top = 'B'; // both\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn op;\r\n\t\t\t\t},\r\n\r\n\t\t\t\t/**\r\n\t\t\t\tGenerates the PDF document.\r\n\t\t\t\tPossible values:\r\n\t\t\t\t\tdatauristring (alias dataurlstring) - Data-Url-formatted data returned as string.\r\n\t\t\t\t\tdatauri (alias datauri) - Data-Url-formatted data pushed into current window's location (effectively reloading the window with contents of the PDF).\r\n\t\r\n\t\t\t\tIf `type` argument is undefined, output is raw body of resulting PDF returned as a string.\r\n\t\r\n\t\t\t\t@param {String} type A string identifying one of the possible output types.\r\n\t\t\t\t@param {Object} options An object providing some additional signalling to PDF generator.\r\n\t\t\t\t@function\r\n\t\t\t\t@returns {jsPDF}\r\n\t\t\t\t@methodOf jsPDF#\r\n\t\t\t\t@name output\r\n\t\t\t\t*/\r\n\t\t\t\toutput = function (type, options) {\r\n\r\n\t\t\t\t\t//for safari type -dataurlnewwindow-\r\n\r\n\t\t\t\t\tvar undef, data, length, array, i, blob;\r\n\t\t\t\t\tswitch (type) {\r\n\t\t\t\t\t\tcase undef:\r\n\t\t\t\t\t\t\treturn buildDocument();\r\n\t\t\t\t\t\tcase 'save':\r\n\t\t\t\t\t\t\tif (navigator.getUserMedia) {\r\n\t\t\t\t\t\t\t\tif (window.URL === undefined) {\r\n\t\t\t\t\t\t\t\t\treturn API.output('dataurlnewwindow');\r\n\t\t\t\t\t\t\t\t} else if (window.URL.createObjectURL === undefined) {\r\n\t\t\t\t\t\t\t\t\treturn API.output('dataurlnewwindow');\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tdata = buildDocument();\r\n\r\n\t\t\t\t\t\t\t// Need to add the file to BlobBuilder as a Uint8Array\r\n\t\t\t\t\t\t\tlength = data.length;\r\n\t\t\t\t\t\t\tarray = new Uint8Array(new ArrayBuffer(length));\r\n\r\n\t\t\t\t\t\t\tfor (i = 0; i < length; i++) {\r\n\t\t\t\t\t\t\t\tarray[i] = data.charCodeAt(i);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tblob = new Blob([array], { type: \"application/pdf\" });\r\n\r\n\t\t\t\t\t\t\tsaveAs(blob, options);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'datauristring':\r\n\t\t\t\t\t\tcase 'dataurlstring':\r\n\t\t\t\t\t\t\treturn 'data:application/pdf;base64,' + btoa(buildDocument());\r\n\t\t\t\t\t\tcase 'datauri':\r\n\t\t\t\t\t\tcase 'dataurl':\r\n\t\t\t\t\t\t\tdocument.location.href = 'data:application/pdf;base64,' + btoa(buildDocument());\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'dataurlnewwindow':\r\n\t\t\t\t\t\t\twindow.open('data:application/pdf;base64,' + btoa(buildDocument()));\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\tthrow new Error('Output type \"' + type + '\" is not supported.');\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// @TODO: Add different output options\r\n\r\n\t\t\t\t};\r\n\r\n\t\t\tif (unit === 'pt') {\r\n\t\t\t\tk = 1;\r\n\t\t\t} else if (unit === 'mm') {\r\n\t\t\t\tk = 72 / 25.4;\r\n\t\t\t} else if (unit === 'cm') {\r\n\t\t\t\tk = 72 / 2.54;\r\n\t\t\t} else if (unit === 'in') {\r\n\t\t\t\tk = 72;\r\n\t\t\t} else {\r\n\t\t\t\tthrow ('Invalid unit: ' + unit);\r\n\t\t\t}\r\n\r\n\t\t\t// Dimensions are stored as user units and converted to points on output\r\n\t\t\tif (pageFormats.hasOwnProperty(format_as_string)) {\r\n\t\t\t\tpageHeight = pageFormats[format_as_string][1] / k;\r\n\t\t\t\tpageWidth = pageFormats[format_as_string][0] / k;\r\n\t\t\t} else {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tpageHeight = format[1];\r\n\t\t\t\t\tpageWidth = format[0];\r\n\t\t\t\t} catch (err) {\r\n\t\t\t\t\tthrow ('Invalid format: ' + format);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (orientation === 'p' || orientation === 'portrait') {\r\n\t\t\t\torientation = 'p';\r\n\t\t\t\tif (pageWidth > pageHeight) {\r\n\t\t\t\t\ttmp = pageWidth;\r\n\t\t\t\t\tpageWidth = pageHeight;\r\n\t\t\t\t\tpageHeight = tmp;\r\n\t\t\t\t}\r\n\t\t\t} else if (orientation === 'l' || orientation === 'landscape') {\r\n\t\t\t\torientation = 'l';\r\n\t\t\t\tif (pageHeight > pageWidth) {\r\n\t\t\t\t\ttmp = pageWidth;\r\n\t\t\t\t\tpageWidth = pageHeight;\r\n\t\t\t\t\tpageHeight = tmp;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tthrow ('Invalid orientation: ' + orientation);\r\n\t\t\t}\r\n\r\n\r\n\r\n\t\t\t//---------------------------------------\r\n\t\t\t// Public API\r\n\r\n\t\t\t/*\r\n\t\t\tObject exposing internal API to plugins\r\n\t\t\t@public\r\n\t\t\t*/\r\n\t\t\tAPI.internal = {\r\n\t\t\t\t'pdfEscape': pdfEscape,\r\n\t\t\t\t'getStyle': getStyle,\r\n\t\t\t\t/**\r\n\t\t\t\tReturns {FontObject} describing a particular font.\r\n\t\t\t\t@public\r\n\t\t\t\t@function\r\n\t\t\t\t@param fontName {String} (Optional) Font's family name\r\n\t\t\t\t@param fontStyle {String} (Optional) Font's style variation name (Example:\"Italic\")\r\n\t\t\t\t@returns {FontObject}\r\n\t\t\t\t*/\r\n\t\t\t\t'getFont': function () { return fonts[getFont.apply(API, arguments)]; },\r\n\t\t\t\t'getFontSize': function () { return activeFontSize; },\r\n\t\t\t\t'btoa': btoa,\r\n\t\t\t\t'write': function (string1, string2, string3, etc) {\r\n\t\t\t\t\tout(\r\n\t\t\t\t\t\targuments.length === 1 ? string1 : Array.prototype.join.call(arguments, ' ')\r\n\t\t\t\t\t);\r\n\t\t\t\t},\r\n\t\t\t\t'getCoordinateString': function (value) {\r\n\t\t\t\t\treturn f2(value * k);\r\n\t\t\t\t},\r\n\t\t\t\t'getVerticalCoordinateString': function (value) {\r\n\t\t\t\t\treturn f2((pageHeight - value) * k);\r\n\t\t\t\t},\r\n\t\t\t\t'collections': {},\r\n\t\t\t\t'newObject': newObject,\r\n\t\t\t\t'putStream': putStream,\r\n\t\t\t\t'events': events,\r\n\t\t\t\t// ratio that you use in multiplication of a given \"size\" number to arrive to 'point'\r\n\t\t\t\t// units of measurement.\r\n\t\t\t\t// scaleFactor is set at initialization of the document and calculated against the stated\r\n\t\t\t\t// default measurement units for the document.\r\n\t\t\t\t// If default is \"mm\", k is the number that will turn number in 'mm' into 'points' number.\r\n\t\t\t\t// through multiplication.\r\n\t\t\t\t'scaleFactor': k,\r\n\t\t\t\t'pageSize': { 'width': pageWidth, 'height': pageHeight },\r\n\t\t\t\t'output': function (type, options) {\r\n\t\t\t\t\treturn output(type, options);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\t/**\r\n\t\t\tAdds (and transfers the focus to) new page to the PDF document.\r\n\t\t\t@function\r\n\t\t\t@returns {jsPDF}\r\n\t\r\n\t\t\t@methodOf jsPDF#\r\n\t\t\t@name addPage\r\n\t\t\t */\r\n\t\t\tAPI.addPage = function () {\r\n\t\t\t\t_addPage();\r\n\t\t\t\treturn this;\r\n\t\t\t};\r\n\r\n\t\t\t/**\r\n\t\t\tAdds text to page. Supports adding multiline text when 'text' argument is an Array of Strings.\r\n\t\t\t@function\r\n\t\t\t@param {String|Array} text String or array of strings to be added to the page. Each line is shifted one line down per font, spacing settings declared before this call.\r\n\t\t\t@param {Number} x Coordinate (in units declared at inception of PDF document) against left edge of the page\r\n\t\t\t@param {Number} y Coordinate (in units declared at inception of PDF document) against upper edge of the page\r\n\t\t\t@param {Object} flags Collection of settings signalling how the text must be encoded. Defaults are sane. If you think you want to pass some flags, you likely can read the source.\r\n\t\t\t@returns {jsPDF}\r\n\t\t\t@methodOf jsPDF#\r\n\t\t\t@name text\r\n\t\t\t */\r\n\t\t\tAPI.text = function (text, x, y, flags) {\r\n\t\t\t\t/**\r\n\t\t\t\t * Inserts something like this into PDF\r\n\t\t\t\t\tBT\r\n\t\t\t\t\t/F1 16 Tf  % Font name + size\r\n\t\t\t\t\t16 TL % How many units down for next line in multiline text\r\n\t\t\t\t\t0 g % color\r\n\t\t\t\t\t28.35 813.54 Td % position\r\n\t\t\t\t\t(line one) Tj\r\n\t\t\t\t\tT* (line two) Tj\r\n\t\t\t\t\tT* (line three) Tj\r\n\t\t\t\t\tET\r\n\t\t\t\t*/\r\n\r\n\t\t\t\tvar undef, _first, _second, _third, newtext, str, i;\r\n\t\t\t\t// Pre-August-2012 the order of arguments was function(x, y, text, flags)\r\n\t\t\t\t// in effort to make all calls have similar signature like\r\n\t\t\t\t//   function(data, coordinates... , miscellaneous)\r\n\t\t\t\t// this method had its args flipped.\r\n\t\t\t\t// code below allows backward compatibility with old arg order.\r\n\t\t\t\tif (typeof text === 'number') {\r\n\t\t\t\t\t_first = y;\r\n\t\t\t\t\t_second = text;\r\n\t\t\t\t\t_third = x;\r\n\r\n\t\t\t\t\ttext = _first;\r\n\t\t\t\t\tx = _second;\r\n\t\t\t\t\ty = _third;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// If there are any newlines in text, we assume\r\n\t\t\t\t// the user wanted to print multiple lines, so break the\r\n\t\t\t\t// text up into an array.  If the text is already an array,\r\n\t\t\t\t// we assume the user knows what they are doing.\r\n\t\t\t\tif (typeof text === 'string' && text.match(/[\\n\\r]/)) {\r\n\t\t\t\t\ttext = text.split(/\\r\\n|\\r|\\n/g);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (typeof flags === 'undefined') {\r\n\t\t\t\t\tflags = { 'noBOM': true, 'autoencode': true };\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tif (flags.noBOM === undef) {\r\n\t\t\t\t\t\tflags.noBOM = true;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (flags.autoencode === undef) {\r\n\t\t\t\t\t\tflags.autoencode = true;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (typeof text === 'string') {\r\n\t\t\t\t\tstr = pdfEscape(text, flags);\r\n\t\t\t\t} else if (text instanceof Array) {  /* Array */\r\n\t\t\t\t\t// we don't want to destroy  original text array, so cloning it\r\n\t\t\t\t\tnewtext = text.concat();\r\n\t\t\t\t\t// we do array.join('text that must not be PDFescaped\")\r\n\t\t\t\t\t// thus, pdfEscape each component separately\r\n\t\t\t\t\tfor (i = newtext.length - 1; i !== -1; i--) {\r\n\t\t\t\t\t\tnewtext[i] = pdfEscape(newtext[i], flags);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tstr = newtext.join(\") Tj\\nT* (\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthrow new Error('Type of text must be string or Array. \"' + text + '\" is not recognized.');\r\n\t\t\t\t}\r\n\t\t\t\t// Using \"'\" (\"go next line and render text\" mark) would save space but would complicate our rendering code, templates\r\n\r\n\t\t\t\t// BT .. ET does NOT have default settings for Tf. You must state that explicitely every time for BT .. ET\r\n\t\t\t\t// if you want text transformation matrix (+ multiline) to work reliably (which reads sizes of things from font declarations)\r\n\t\t\t\t// Thus, there is NO useful, *reliable* concept of \"default\" font for a page.\r\n\t\t\t\t// The fact that \"default\" (reuse font used before) font worked before in basic cases is an accident\r\n\t\t\t\t// - readers dealing smartly with brokenness of jsPDF's markup.\r\n\t\t\t\tout(\r\n\t\t\t\t\t'BT\\n/' +\r\n\t\t\t\t\tactiveFontKey + ' ' + activeFontSize + ' Tf\\n' + // font face, style, size\r\n\t\t\t\t\tactiveFontSize + ' TL\\n' + // line spacing\r\n\t\t\t\t\ttextColor +\r\n\t\t\t\t\t'\\n' + f2(x * k) + ' ' + f2((pageHeight - y) * k) + ' Td\\n(' +\r\n\t\t\t\t\tstr +\r\n\t\t\t\t\t') Tj\\nET'\r\n\t\t\t\t);\r\n\t\t\t\treturn this;\r\n\t\t\t};\r\n\r\n\t\t\tAPI.line = function (x1, y1, x2, y2) {\r\n\t\t\t\tout(\r\n\t\t\t\t\tf2(x1 * k) + ' ' + f2((pageHeight - y1) * k) + ' m ' +\r\n\t\t\t\t\tf2(x2 * k) + ' ' + f2((pageHeight - y2) * k) + ' l S'\r\n\t\t\t\t);\r\n\t\t\t\treturn this;\r\n\t\t\t};\r\n\r\n\t\t\t/**\r\n\t\t\tAdds series of curves (straight lines or cubic bezier curves) to canvas, starting at `x`, `y` coordinates.\r\n\t\t\tAll data points in `lines` are relative to last line origin.\r\n\t\t\t`x`, `y` become x1,y1 for first line / curve in the set.\r\n\t\t\tFor lines you only need to specify [x2, y2] - (ending point) vector against x1, y1 starting point.\r\n\t\t\tFor bezier curves you need to specify [x2,y2,x3,y3,x4,y4] - vectors to control points 1, 2, ending point. All vectors are against the start of the curve - x1,y1.\r\n\t\r\n\t\t\t@example .lines([[2,2],[-2,2],[1,1,2,2,3,3],[2,1]], 212,110, 10) // line, line, bezier curve, line\r\n\t\t\t@param {Array} lines Array of *vector* shifts as pairs (lines) or sextets (cubic bezier curves).\r\n\t\t\t@param {Number} x Coordinate (in units declared at inception of PDF document) against left edge of the page\r\n\t\t\t@param {Number} y Coordinate (in units declared at inception of PDF document) against upper edge of the page\r\n\t\t\t@param {Number} scale (Defaults to [1.0,1.0]) x,y Scaling factor for all vectors. Elements can be any floating number Sub-one makes drawing smaller. Over-one grows the drawing. Negative flips the direction.\r\n\t\t\t@function\r\n\t\t\t@returns {jsPDF}\r\n\t\t\t@methodOf jsPDF#\r\n\t\t\t@name lines\r\n\t\t\t */\r\n\t\t\tAPI.lines = function (lines, x, y, scale, style) {\r\n\t\t\t\tvar undef, _first, _second, _third, scalex, scaley, i, l, leg, x2, y2, x3, y3, x4, y4;\r\n\r\n\t\t\t\t// Pre-August-2012 the order of arguments was function(x, y, lines, scale, style)\r\n\t\t\t\t// in effort to make all calls have similar signature like\r\n\t\t\t\t//   function(content, coordinateX, coordinateY , miscellaneous)\r\n\t\t\t\t// this method had its args flipped.\r\n\t\t\t\t// code below allows backward compatibility with old arg order.\r\n\t\t\t\tif (typeof lines === 'number') {\r\n\t\t\t\t\t_first = y;\r\n\t\t\t\t\t_second = lines;\r\n\t\t\t\t\t_third = x;\r\n\r\n\t\t\t\t\tlines = _first;\r\n\t\t\t\t\tx = _second;\r\n\t\t\t\t\ty = _third;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tstyle = getStyle(style);\r\n\t\t\t\tscale = scale === undef ? [1, 1] : scale;\r\n\r\n\t\t\t\t// starting point\r\n\t\t\t\tout(f3(x * k) + ' ' + f3((pageHeight - y) * k) + ' m ');\r\n\r\n\t\t\t\tscalex = scale[0];\r\n\t\t\t\tscaley = scale[1];\r\n\t\t\t\tl = lines.length;\r\n\t\t\t\t//, x2, y2 // bezier only. In page default measurement \"units\", *after* scaling\r\n\t\t\t\t//, x3, y3 // bezier only. In page default measurement \"units\", *after* scaling\r\n\t\t\t\t// ending point for all, lines and bezier. . In page default measurement \"units\", *after* scaling\r\n\t\t\t\tx4 = x; // last / ending point = starting point for first item.\r\n\t\t\t\ty4 = y; // last / ending point = starting point for first item.\r\n\r\n\t\t\t\tfor (i = 0; i < l; i++) {\r\n\t\t\t\t\tleg = lines[i];\r\n\t\t\t\t\tif (leg.length === 2) {\r\n\t\t\t\t\t\t// simple line\r\n\t\t\t\t\t\tx4 = leg[0] * scalex + x4; // here last x4 was prior ending point\r\n\t\t\t\t\t\ty4 = leg[1] * scaley + y4; // here last y4 was prior ending point\r\n\t\t\t\t\t\tout(f3(x4 * k) + ' ' + f3((pageHeight - y4) * k) + ' l');\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// bezier curve\r\n\t\t\t\t\t\tx2 = leg[0] * scalex + x4; // here last x4 is prior ending point\r\n\t\t\t\t\t\ty2 = leg[1] * scaley + y4; // here last y4 is prior ending point\r\n\t\t\t\t\t\tx3 = leg[2] * scalex + x4; // here last x4 is prior ending point\r\n\t\t\t\t\t\ty3 = leg[3] * scaley + y4; // here last y4 is prior ending point\r\n\t\t\t\t\t\tx4 = leg[4] * scalex + x4; // here last x4 was prior ending point\r\n\t\t\t\t\t\ty4 = leg[5] * scaley + y4; // here last y4 was prior ending point\r\n\t\t\t\t\t\tout(\r\n\t\t\t\t\t\t\tf3(x2 * k) + ' ' +\r\n\t\t\t\t\t\t\tf3((pageHeight - y2) * k) + ' ' +\r\n\t\t\t\t\t\t\tf3(x3 * k) + ' ' +\r\n\t\t\t\t\t\t\tf3((pageHeight - y3) * k) + ' ' +\r\n\t\t\t\t\t\t\tf3(x4 * k) + ' ' +\r\n\t\t\t\t\t\t\tf3((pageHeight - y4) * k) + ' c'\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t// stroking / filling / both the path\r\n\t\t\t\tout(style);\r\n\t\t\t\treturn this;\r\n\t\t\t};\r\n\r\n\t\t\t/**\r\n\t\t\tAdds a rectangle to PDF\r\n\t\r\n\t\t\t@param {Number} x Coordinate (in units declared at inception of PDF document) against left edge of the page\r\n\t\t\t@param {Number} y Coordinate (in units declared at inception of PDF document) against upper edge of the page\r\n\t\t\t@param {Number} w Width (in units declared at inception of PDF document)\r\n\t\t\t@param {Number} h Height (in units declared at inception of PDF document)\r\n\t\t\t@param {String} style (Defaults to active fill/stroke style) A string signalling if stroke, fill or both are to be applied.\r\n\t\t\t@function\r\n\t\t\t@returns {jsPDF}\r\n\t\t\t@methodOf jsPDF#\r\n\t\t\t@name rect\r\n\t\t\t */\r\n\t\t\tAPI.rect = function (x, y, w, h, style) {\r\n\t\t\t\tvar op = getStyle(style);\r\n\t\t\t\tout([\r\n\t\t\t\t\tf2(x * k),\r\n\t\t\t\t\tf2((pageHeight - y) * k),\r\n\t\t\t\t\tf2(w * k),\r\n\t\t\t\t\tf2(-h * k),\r\n\t\t\t\t\t're',\r\n\t\t\t\t\top\r\n\t\t\t\t].join(' '));\r\n\t\t\t\treturn this;\r\n\t\t\t};\r\n\r\n\t\t\t/**\r\n\t\t\tAdds a properties to the PDF document\r\n\t\r\n\t\t\t@param {Object} A property_name-to-property_value object structure.\r\n\t\t\t@function\r\n\t\t\t@returns {jsPDF}\r\n\t\t\t@methodOf jsPDF#\r\n\t\t\t@name setProperties\r\n\t\t\t */\r\n\t\t\tAPI.setProperties = function (properties) {\r\n\t\t\t\t// copying only those properties we can render.\r\n\t\t\t\tvar property;\r\n\t\t\t\tfor (property in documentProperties) {\r\n\t\t\t\t\tif (documentProperties.hasOwnProperty(property) && properties[property]) {\r\n\t\t\t\t\t\tdocumentProperties[property] = properties[property];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn this;\r\n\t\t\t};\r\n\r\n\t\t\t/**\r\n\t\t\tSets font size for upcoming text elements.\r\n\t\r\n\t\t\t@param {Number} size Font size in points.\r\n\t\t\t@function\r\n\t\t\t@returns {jsPDF}\r\n\t\t\t@methodOf jsPDF#\r\n\t\t\t@name setFontSize\r\n\t\t\t */\r\n\t\t\tAPI.setFontSize = function (size) {\r\n\t\t\t\tactiveFontSize = size;\r\n\t\t\t\treturn this;\r\n\t\t\t};\r\n\r\n\t\t\t/**\r\n\t\t\tSets text font face, variant for upcoming text elements.\r\n\t\t\tSee output of jsPDF.getFontList() for possible font names, styles.\r\n\t\r\n\t\t\t@param {String} fontName Font name or family. Example: \"times\"\r\n\t\t\t@param {String} fontStyle Font style or variant. Example: \"italic\"\r\n\t\t\t@function\r\n\t\t\t@returns {jsPDF}\r\n\t\t\t@methodOf jsPDF#\r\n\t\t\t@name setFont\r\n\t\t\t */\r\n\t\t\tAPI.setFont = function (fontName, fontStyle) {\r\n\t\t\t\tactiveFontKey = getFont(fontName, fontStyle);\r\n\t\t\t\t// if font is not found, the above line blows up and we never go further\r\n\t\t\t\treturn this;\r\n\t\t\t};\r\n\r\n\t\t\t/**\r\n\t\t\tSwitches font style or variant for upcoming text elements,\r\n\t\t\twhile keeping the font face or family same.\r\n\t\t\tSee output of jsPDF.getFontList() for possible font names, styles.\r\n\t\r\n\t\t\t@param {String} style Font style or variant. Example: \"italic\"\r\n\t\t\t@function\r\n\t\t\t@returns {jsPDF}\r\n\t\t\t@methodOf jsPDF#\r\n\t\t\t@name setFontStyle\r\n\t\t\t */\r\n\t\t\tAPI.setFontStyle = API.setFontType = function (style) {\r\n\t\t\t\tvar undef;\r\n\t\t\t\tactiveFontKey = getFont(undef, style);\r\n\t\t\t\t// if font is not found, the above line blows up and we never go further\r\n\t\t\t\treturn this;\r\n\t\t\t};\r\n\r\n\t\t\t/**\r\n\t\t\tReturns an object - a tree of fontName to fontStyle relationships available to\r\n\t\t\tactive PDF document.\r\n\t\r\n\t\t\t@public\r\n\t\t\t@function\r\n\t\t\t@returns {Object} Like {'times':['normal', 'italic', ... ], 'arial':['normal', 'bold', ... ], ... }\r\n\t\t\t@methodOf jsPDF#\r\n\t\t\t@name getFontList\r\n\t\t\t*/\r\n\t\t\tAPI.getFontList = function () {\r\n\t\t\t\t// TODO: iterate over fonts array or return copy of fontmap instead in case more are ever added.\r\n\t\t\t\tvar list = {},\r\n\t\t\t\t\tfontName,\r\n\t\t\t\t\tfontStyle,\r\n\t\t\t\t\ttmp;\r\n\r\n\t\t\t\tfor (fontName in fontmap) {\r\n\t\t\t\t\tif (fontmap.hasOwnProperty(fontName)) {\r\n\t\t\t\t\t\tlist[fontName] = tmp = [];\r\n\t\t\t\t\t\tfor (fontStyle in fontmap[fontName]) {\r\n\t\t\t\t\t\t\tif (fontmap[fontName].hasOwnProperty(fontStyle)) {\r\n\t\t\t\t\t\t\t\ttmp.push(fontStyle);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn list;\r\n\t\t\t};\r\n\r\n\t\t\t/**\r\n\t\t\tSets line width for upcoming lines.\r\n\t\r\n\t\t\t@param {Number} width Line width (in units declared at inception of PDF document)\r\n\t\t\t@function\r\n\t\t\t@returns {jsPDF}\r\n\t\t\t@methodOf jsPDF#\r\n\t\t\t@name setLineWidth\r\n\t\t\t */\r\n\t\t\tAPI.setLineWidth = function (width) {\r\n\t\t\t\tout((width * k).toFixed(2) + ' w');\r\n\t\t\t\treturn this;\r\n\t\t\t};\r\n\r\n\t\t\t/**\r\n\t\t\tSets the stroke color for upcoming elements.\r\n\t\r\n\t\t\tDepending on the number of arguments given, Gray, RGB, or CMYK\r\n\t\t\tcolor space is implied.\r\n\t\r\n\t\t\tWhen only ch1 is given, \"Gray\" color space is implied and it\r\n\t\t\tmust be a value in the range from 0.00 (solid black) to to 1.00 (white)\r\n\t\t\tif values are communicated as String types, or in range from 0 (black)\r\n\t\t\tto 255 (white) if communicated as Number type.\r\n\t\t\tThe RGB-like 0-255 range is provided for backward compatibility.\r\n\t\r\n\t\t\tWhen only ch1,ch2,ch3 are given, \"RGB\" color space is implied and each\r\n\t\t\tvalue must be in the range from 0.00 (minimum intensity) to to 1.00\r\n\t\t\t(max intensity) if values are communicated as String types, or\r\n\t\t\tfrom 0 (min intensity) to to 255 (max intensity) if values are communicated\r\n\t\t\tas Number types.\r\n\t\t\tThe RGB-like 0-255 range is provided for backward compatibility.\r\n\t\r\n\t\t\tWhen ch1,ch2,ch3,ch4 are given, \"CMYK\" color space is implied and each\r\n\t\t\tvalue must be a in the range from 0.00 (0% concentration) to to\r\n\t\t\t1.00 (100% concentration)\r\n\t\r\n\t\t\tBecause JavaScript treats fixed point numbers badly (rounds to\r\n\t\t\tfloating point nearest to binary representation) it is highly advised to\r\n\t\t\tcommunicate the fractional numbers as String types, not JavaScript Number type.\r\n\t\r\n\t\t\t@param {Number|String} ch1 Color channel value\r\n\t\t\t@param {Number|String} ch2 Color channel value\r\n\t\t\t@param {Number|String} ch3 Color channel value\r\n\t\t\t@param {Number|String} ch4 Color channel value\r\n\t\r\n\t\t\t@function\r\n\t\t\t@returns {jsPDF}\r\n\t\t\t@methodOf jsPDF#\r\n\t\t\t@name setDrawColor\r\n\t\t\t */\r\n\t\t\tAPI.setDrawColor = function (ch1, ch2, ch3, ch4) {\r\n\t\t\t\tvar color;\r\n\t\t\t\tif (ch2 === undefined || (ch4 === undefined && ch1 === ch2 === ch3)) {\r\n\t\t\t\t\t// Gray color space.\r\n\t\t\t\t\tif (typeof ch1 === 'string') {\r\n\t\t\t\t\t\tcolor = ch1 + ' G';\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tcolor = f2(ch1 / 255) + ' G';\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (ch4 === undefined) {\r\n\t\t\t\t\t// RGB\r\n\t\t\t\t\tif (typeof ch1 === 'string') {\r\n\t\t\t\t\t\tcolor = [ch1, ch2, ch3, 'RG'].join(' ');\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tcolor = [f2(ch1 / 255), f2(ch2 / 255), f2(ch3 / 255), 'RG'].join(' ');\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// CMYK\r\n\t\t\t\t\tif (typeof ch1 === 'string') {\r\n\t\t\t\t\t\tcolor = [ch1, ch2, ch3, ch4, 'K'].join(' ');\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tcolor = [f2(ch1), f2(ch2), f2(ch3), f2(ch4), 'K'].join(' ');\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tout(color);\r\n\t\t\t\treturn this;\r\n\t\t\t};\r\n\r\n\t\t\t/**\r\n\t\t\tSets the fill color for upcoming elements.\r\n\t\r\n\t\t\tDepending on the number of arguments given, Gray, RGB, or CMYK\r\n\t\t\tcolor space is implied.\r\n\t\r\n\t\t\tWhen only ch1 is given, \"Gray\" color space is implied and it\r\n\t\t\tmust be a value in the range from 0.00 (solid black) to to 1.00 (white)\r\n\t\t\tif values are communicated as String types, or in range from 0 (black)\r\n\t\t\tto 255 (white) if communicated as Number type.\r\n\t\t\tThe RGB-like 0-255 range is provided for backward compatibility.\r\n\t\r\n\t\t\tWhen only ch1,ch2,ch3 are given, \"RGB\" color space is implied and each\r\n\t\t\tvalue must be in the range from 0.00 (minimum intensity) to to 1.00\r\n\t\t\t(max intensity) if values are communicated as String types, or\r\n\t\t\tfrom 0 (min intensity) to to 255 (max intensity) if values are communicated\r\n\t\t\tas Number types.\r\n\t\t\tThe RGB-like 0-255 range is provided for backward compatibility.\r\n\t\r\n\t\t\tWhen ch1,ch2,ch3,ch4 are given, \"CMYK\" color space is implied and each\r\n\t\t\tvalue must be a in the range from 0.00 (0% concentration) to to\r\n\t\t\t1.00 (100% concentration)\r\n\t\r\n\t\t\tBecause JavaScript treats fixed point numbers badly (rounds to\r\n\t\t\tfloating point nearest to binary representation) it is highly advised to\r\n\t\t\tcommunicate the fractional numbers as String types, not JavaScript Number type.\r\n\t\r\n\t\t\t@param {Number|String} ch1 Color channel value\r\n\t\t\t@param {Number|String} ch2 Color channel value\r\n\t\t\t@param {Number|String} ch3 Color channel value\r\n\t\t\t@param {Number|String} ch4 Color channel value\r\n\t\r\n\t\t\t@function\r\n\t\t\t@returns {jsPDF}\r\n\t\t\t@methodOf jsPDF#\r\n\t\t\t@name setFillColor\r\n\t\t\t */\r\n\t\t\tAPI.setFillColor = function (ch1, ch2, ch3, ch4) {\r\n\t\t\t\tvar color;\r\n\r\n\t\t\t\tif (ch2 === undefined || (ch4 === undefined && ch1 === ch2 === ch3)) {\r\n\t\t\t\t\t// Gray color space.\r\n\t\t\t\t\tif (typeof ch1 === 'string') {\r\n\t\t\t\t\t\tcolor = ch1 + ' g';\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tcolor = f2(ch1 / 255) + ' g';\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (ch4 === undefined) {\r\n\t\t\t\t\t// RGB\r\n\t\t\t\t\tif (typeof ch1 === 'string') {\r\n\t\t\t\t\t\tcolor = [ch1, ch2, ch3, 'rg'].join(' ');\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tcolor = [f2(ch1 / 255), f2(ch2 / 255), f2(ch3 / 255), 'rg'].join(' ');\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// CMYK\r\n\t\t\t\t\tif (typeof ch1 === 'string') {\r\n\t\t\t\t\t\tcolor = [ch1, ch2, ch3, ch4, 'k'].join(' ');\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tcolor = [f2(ch1), f2(ch2), f2(ch3), f2(ch4), 'k'].join(' ');\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tout(color);\r\n\t\t\t\treturn this;\r\n\t\t\t};\r\n\r\n\t\t\t/**\r\n\t\t\tSets the text color for upcoming elements.\r\n\t\t\tIf only one, first argument is given,\r\n\t\t\ttreats the value as gray-scale color value.\r\n\t\r\n\t\t\t@param {Number} r Red channel color value in range 0-255\r\n\t\t\t@param {Number} g Green channel color value in range 0-255\r\n\t\t\t@param {Number} b Blue channel color value in range 0-255\r\n\t\t\t@function\r\n\t\t\t@returns {jsPDF}\r\n\t\t\t@methodOf jsPDF#\r\n\t\t\t@name setTextColor\r\n\t\t\t*/\r\n\t\t\tAPI.setTextColor = function (r, g, b) {\r\n\t\t\t\tif ((r === 0 && g === 0 && b === 0) || (typeof g === 'undefined')) {\r\n\t\t\t\t\ttextColor = f3(r / 255) + ' g';\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttextColor = [f3(r / 255), f3(g / 255), f3(b / 255), 'rg'].join(' ');\r\n\t\t\t\t}\r\n\t\t\t\treturn this;\r\n\t\t\t};\r\n\r\n\t\t\t/**\r\n\t\t\tIs an Object providing a mapping from human-readable to\r\n\t\t\tinteger flag values designating the varieties of line cap\r\n\t\t\tand join styles.\r\n\t\r\n\t\t\t@returns {Object}\r\n\t\t\t@fieldOf jsPDF#\r\n\t\t\t@name CapJoinStyles\r\n\t\t\t*/\r\n\t\t\tAPI.CapJoinStyles = {\r\n\t\t\t\t0: 0,\r\n\t\t\t\t'butt': 0,\r\n\t\t\t\t'but': 0,\r\n\t\t\t\t'bevel': 0,\r\n\t\t\t\t1: 1,\r\n\t\t\t\t'round': 1,\r\n\t\t\t\t'rounded': 1,\r\n\t\t\t\t'circle': 1,\r\n\t\t\t\t2: 2,\r\n\t\t\t\t'projecting': 2,\r\n\t\t\t\t'project': 2,\r\n\t\t\t\t'square': 2,\r\n\t\t\t\t'milter': 2\r\n\t\t\t};\r\n\r\n\t\t\t/**\r\n\t\t\tSets the line cap styles\r\n\t\t\tSee {jsPDF.CapJoinStyles} for variants\r\n\t\r\n\t\t\t@param {String|Number} style A string or number identifying the type of line cap\r\n\t\t\t@function\r\n\t\t\t@returns {jsPDF}\r\n\t\t\t@methodOf jsPDF#\r\n\t\t\t@name setLineCap\r\n\t\t\t*/\r\n\t\t\tAPI.setLineCap = function (style) {\r\n\t\t\t\tvar id = this.CapJoinStyles[style];\r\n\t\t\t\tif (id === undefined) {\r\n\t\t\t\t\tthrow new Error(\"Line cap style of '\" + style + \"' is not recognized. See or extend .CapJoinStyles property for valid styles\");\r\n\t\t\t\t}\r\n\t\t\t\tlineCapID = id;\r\n\t\t\t\tout(id.toString(10) + ' J');\r\n\r\n\t\t\t\treturn this;\r\n\t\t\t};\r\n\r\n\t\t\t/**\r\n\t\t\tSets the line join styles\r\n\t\t\tSee {jsPDF.CapJoinStyles} for variants\r\n\t\r\n\t\t\t@param {String|Number} style A string or number identifying the type of line join\r\n\t\t\t@function\r\n\t\t\t@returns {jsPDF}\r\n\t\t\t@methodOf jsPDF#\r\n\t\t\t@name setLineJoin\r\n\t\t\t*/\r\n\t\t\tAPI.setLineJoin = function (style) {\r\n\t\t\t\tvar id = this.CapJoinStyles[style];\r\n\t\t\t\tif (id === undefined) {\r\n\t\t\t\t\tthrow new Error(\"Line join style of '\" + style + \"' is not recognized. See or extend .CapJoinStyles property for valid styles\");\r\n\t\t\t\t}\r\n\t\t\t\tlineJoinID = id;\r\n\t\t\t\tout(id.toString(10) + ' j');\r\n\r\n\t\t\t\treturn this;\r\n\t\t\t};\r\n\r\n\t\t\t// Output is both an internal (for plugins) and external function\r\n\t\t\tAPI.output = output;\r\n\r\n\t\t\t/**\r\n\t\t\t * Saves as PDF document. An alias of jsPDF.output('save', 'filename.pdf')\r\n\t\t\t * @param  {String} filename The filename including extension.\r\n\t\t\t *\r\n\t\t\t * @function\r\n\t\t\t * @returns {jsPDF}\r\n\t\t\t * @methodOf jsPDF#\r\n\t\t\t * @name save\r\n\t\t\t */\r\n\t\t\tAPI.save = function (filename) {\r\n\t\t\t\tAPI.output('save', filename);\r\n\t\t\t};\r\n\r\n\t\t\t// applying plugins (more methods) ON TOP of built-in API.\r\n\t\t\t// this is intentional as we allow plugins to override\r\n\t\t\t// built-ins\r\n\t\t\tfor (plugin in jsPDF.API) {\r\n\t\t\t\tif (jsPDF.API.hasOwnProperty(plugin)) {\r\n\t\t\t\t\tif (plugin === 'events' && jsPDF.API.events.length) {\r\n\t\t\t\t\t\t(function (events, newEvents) {\r\n\r\n\t\t\t\t\t\t\t// jsPDF.API.events is a JS Array of Arrays\r\n\t\t\t\t\t\t\t// where each Array is a pair of event name, handler\r\n\t\t\t\t\t\t\t// Events were added by plugins to the jsPDF instantiator.\r\n\t\t\t\t\t\t\t// These are always added to the new instance and some ran\r\n\t\t\t\t\t\t\t// during instantiation.\r\n\r\n\t\t\t\t\t\t\tvar eventname, handler_and_args, i;\r\n\r\n\t\t\t\t\t\t\tfor (i = newEvents.length - 1; i !== -1; i--) {\r\n\t\t\t\t\t\t\t\t// subscribe takes 3 args: 'topic', function, runonce_flag\r\n\t\t\t\t\t\t\t\t// if undefined, runonce is false.\r\n\t\t\t\t\t\t\t\t// users can attach callback directly,\r\n\t\t\t\t\t\t\t\t// or they can attach an array with [callback, runonce_flag]\r\n\t\t\t\t\t\t\t\t// that's what the \"apply\" magic is for below.\r\n\t\t\t\t\t\t\t\teventname = newEvents[i][0];\r\n\t\t\t\t\t\t\t\thandler_and_args = newEvents[i][1];\r\n\t\t\t\t\t\t\t\tevents.subscribe.apply(\r\n\t\t\t\t\t\t\t\t\tevents,\r\n\t\t\t\t\t\t\t\t\t[eventname].concat(\r\n\t\t\t\t\t\t\t\t\t\ttypeof handler_and_args === 'function' ?\r\n\t\t\t\t\t\t\t\t\t\t\t[handler_and_args] :\r\n\t\t\t\t\t\t\t\t\t\t\thandler_and_args\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}(events, jsPDF.API.events));\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tAPI[plugin] = jsPDF.API[plugin];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/////////////////////////////////////////\r\n\t\t\t// continuing initilisation of jsPDF Document object\r\n\t\t\t/////////////////////////////////////////\r\n\r\n\r\n\t\t\t// Add the first page automatically\r\n\t\t\taddFonts();\r\n\t\t\tactiveFontKey = 'F1';\r\n\t\t\t_addPage();\r\n\r\n\t\t\tevents.publish('initialized');\r\n\r\n\t\t\treturn API;\r\n\t\t}\r\n\r\n\r\n\t\t/**\r\n\t\tjsPDF.API is a STATIC property of jsPDF class.\r\n\t\tjsPDF.API is an object you can add methods and properties to.\r\n\t\tThe methods / properties you add will show up in new jsPDF objects.\r\n\t\t\r\n\t\tOne property is prepopulated. It is the 'events' Object. Plugin authors can add topics, callbacks to this object. These will be reassigned to all new instances of jsPDF.\r\n\t\tExamples:\r\n\t\t\tjsPDF.API.events['initialized'] = function(){ 'this' is API object }\r\n\t\t\tjsPDF.API.events['addFont'] = function(added_font_object){ 'this' is API object }\r\n\t\t\r\n\t\t@static\r\n\t\t@public\r\n\t\t@memberOf jsPDF\r\n\t\t@name API\r\n\t\t\r\n\t\t@example\r\n\t\t\tjsPDF.API.mymethod = function(){\r\n\t\t\t\t// 'this' will be ref to internal API object. see jsPDF source\r\n\t\t\t\t// , so you can refer to built-in methods like so:\r\n\t\t\t\t//     this.line(....)\r\n\t\t\t\t//     this.text(....)\r\n\t\t\t}\r\n\t\t\tvar pdfdoc = new jsPDF()\r\n\t\t\tpdfdoc.mymethod() // <- !!!!!!\r\n\t\t*/\r\n\t\tjsPDF.API = { 'events': [] };\r\n\r\n\t\treturn jsPDF;\r\n\t}());\r\n\r\n\r\n\r\n\tvar Base64 = {\r\n\r\n\t\t// private property\r\n\t\t_keyStr: \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\",\r\n\r\n\t\t// public method for encoding\r\n\t\tencode: function (input) {\r\n\t\t\tvar output = \"\";\r\n\t\t\tvar chr1, chr2, chr3, enc1, enc2, enc3, enc4;\r\n\t\t\tvar i = 0;\r\n\r\n\t\t\tinput = Base64._utf8_encode(input);\r\n\r\n\t\t\twhile (i < input.length) {\r\n\r\n\t\t\t\tchr1 = input.charCodeAt(i++);\r\n\t\t\t\tchr2 = input.charCodeAt(i++);\r\n\t\t\t\tchr3 = input.charCodeAt(i++);\r\n\r\n\t\t\t\tenc1 = chr1 >> 2;\r\n\t\t\t\tenc2 = ((chr1 & 3) << 4) | (chr2 >> 4);\r\n\t\t\t\tenc3 = ((chr2 & 15) << 2) | (chr3 >> 6);\r\n\t\t\t\tenc4 = chr3 & 63;\r\n\r\n\t\t\t\tif (isNaN(chr2)) {\r\n\t\t\t\t\tenc3 = enc4 = 64;\r\n\t\t\t\t} else if (isNaN(chr3)) {\r\n\t\t\t\t\tenc4 = 64;\r\n\t\t\t\t}\r\n\r\n\t\t\t\toutput = output +\r\n\t\t\t\t\tthis._keyStr.charAt(enc1) + this._keyStr.charAt(enc2) +\r\n\t\t\t\t\tthis._keyStr.charAt(enc3) + this._keyStr.charAt(enc4);\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn output;\r\n\t\t},\r\n\r\n\t\t// public method for decoding\r\n\t\tdecode: function (input) {\r\n\t\t\tvar output = \"\";\r\n\t\t\tvar chr1, chr2, chr3;\r\n\t\t\tvar enc1, enc2, enc3, enc4;\r\n\t\t\tvar i = 0;\r\n\r\n\t\t\tinput = input.replace(/[^A-Za-z0-9\\+\\/\\=]/g, \"\");\r\n\r\n\t\t\twhile (i < input.length) {\r\n\r\n\t\t\t\tenc1 = this._keyStr.indexOf(input.charAt(i++));\r\n\t\t\t\tenc2 = this._keyStr.indexOf(input.charAt(i++));\r\n\t\t\t\tenc3 = this._keyStr.indexOf(input.charAt(i++));\r\n\t\t\t\tenc4 = this._keyStr.indexOf(input.charAt(i++));\r\n\r\n\t\t\t\tchr1 = (enc1 << 2) | (enc2 >> 4);\r\n\t\t\t\tchr2 = ((enc2 & 15) << 4) | (enc3 >> 2);\r\n\t\t\t\tchr3 = ((enc3 & 3) << 6) | enc4;\r\n\r\n\t\t\t\toutput = output + String.fromCharCode(chr1);\r\n\r\n\t\t\t\tif (enc3 != 64) {\r\n\t\t\t\t\toutput = output + String.fromCharCode(chr2);\r\n\t\t\t\t}\r\n\t\t\t\tif (enc4 != 64) {\r\n\t\t\t\t\toutput = output + String.fromCharCode(chr3);\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\toutput = Base64._utf8_decode(output);\r\n\r\n\t\t\treturn output;\r\n\r\n\t\t},\r\n\r\n\t\t// private method for UTF-8 encoding\r\n\t\t_utf8_encode: function (string) {\r\n\t\t\tstring = string.replace(/\\r\\n/g, \"\\n\");\r\n\t\t\tvar utftext = \"\";\r\n\r\n\t\t\tfor (var n = 0; n < string.length; n++) {\r\n\r\n\t\t\t\tvar c = string.charCodeAt(n);\r\n\r\n\t\t\t\tif (c < 128) {\r\n\t\t\t\t\tutftext += String.fromCharCode(c);\r\n\t\t\t\t}\r\n\t\t\t\telse if ((c > 127) && (c < 2048)) {\r\n\t\t\t\t\tutftext += String.fromCharCode((c >> 6) | 192);\r\n\t\t\t\t\tutftext += String.fromCharCode((c & 63) | 128);\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tutftext += String.fromCharCode((c >> 12) | 224);\r\n\t\t\t\t\tutftext += String.fromCharCode(((c >> 6) & 63) | 128);\r\n\t\t\t\t\tutftext += String.fromCharCode((c & 63) | 128);\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn utftext;\r\n\t\t},\r\n\r\n\t\t// private method for UTF-8 decoding\r\n\t\t_utf8_decode: function (utftext) {\r\n\t\t\tvar string = \"\";\r\n\t\t\tvar i = 0;\r\n\t\t\tvar c = c1 = c2 = 0;\r\n\r\n\t\t\twhile (i < utftext.length) {\r\n\r\n\t\t\t\tc = utftext.charCodeAt(i);\r\n\r\n\t\t\t\tif (c < 128) {\r\n\t\t\t\t\tstring += String.fromCharCode(c);\r\n\t\t\t\t\ti++;\r\n\t\t\t\t}\r\n\t\t\t\telse if ((c > 191) && (c < 224)) {\r\n\t\t\t\t\tc2 = utftext.charCodeAt(i + 1);\r\n\t\t\t\t\tstring += String.fromCharCode(((c & 31) << 6) | (c2 & 63));\r\n\t\t\t\t\ti += 2;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tc2 = utftext.charCodeAt(i + 1);\r\n\t\t\t\t\tc3 = utftext.charCodeAt(i + 2);\r\n\t\t\t\t\tstring += String.fromCharCode(((c & 15) << 12) | ((c2 & 63) << 6) | (c3 & 63));\r\n\t\t\t\t\ti += 3;\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn string;\r\n\t\t}\r\n\r\n\t};\r\n\r\n\r\n\r\n\tfunction sprintf() {\r\n\t\t// Return a formatted string  \r\n\t\t// \r\n\t\t// version: 903.3016\r\n\t\t// discuss at: http://phpjs.org/functions/sprintf\r\n\t\t// +   original by: Ash Searle (http://hexmen.com/blog/)\r\n\t\t// + namespaced by: Michael White (http://getsprink.com)\r\n\t\t// +    tweaked by: Jack\r\n\t\t// +   improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)\r\n\t\t// +      input by: Paulo Ricardo F. Santos\r\n\t\t// +   improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)\r\n\t\t// +      input by: Brett Zamir (http://brettz9.blogspot.com)\r\n\t\t// +   improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)\r\n\t\t// *     example 1: sprintf(\"%01.2f\", 123.1);\r\n\t\t// *     returns 1: 123.10\r\n\t\t// *     example 2: sprintf(\"[%10s]\", 'monkey');\r\n\t\t// *     returns 2: '[    monkey]'\r\n\t\t// *     example 3: sprintf(\"[%'#10s]\", 'monkey');\r\n\t\t// *     returns 3: '[####monkey]'\r\n\t\tvar regex = /%%|%(\\d+\\$)?([-+\\'#0 ]*)(\\*\\d+\\$|\\*|\\d+)?(\\.(\\*\\d+\\$|\\*|\\d+))?([scboxXuidfegEG])/g;\r\n\t\tvar a = arguments, i = 0, format = a[i++];\r\n\r\n\t\t// pad()\r\n\t\tvar pad = function (str, len, chr, leftJustify) {\r\n\t\t\tif (!chr) chr = ' ';\r\n\t\t\tvar padding = (str.length >= len) ? '' : Array(1 + len - str.length >>> 0).join(chr);\r\n\t\t\treturn leftJustify ? str + padding : padding + str;\r\n\t\t};\r\n\r\n\t\t// justify()\r\n\t\tvar justify = function (value, prefix, leftJustify, minWidth, zeroPad, customPadChar) {\r\n\t\t\tvar diff = minWidth - value.length;\r\n\t\t\tif (diff > 0) {\r\n\t\t\t\tif (leftJustify || !zeroPad) {\r\n\t\t\t\t\tvalue = pad(value, minWidth, customPadChar, leftJustify);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvalue = value.slice(0, prefix.length) + pad('', diff, '0', true) + value.slice(prefix.length);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn value;\r\n\t\t};\r\n\r\n\t\t// formatBaseX()\r\n\t\tvar formatBaseX = function (value, base, prefix, leftJustify, minWidth, precision, zeroPad) {\r\n\t\t\t// Note: casts negative numbers to positive ones\r\n\t\t\tvar number = value >>> 0;\r\n\t\t\tprefix = prefix && number && { '2': '0b', '8': '0', '16': '0x' }[base] || '';\r\n\t\t\tvalue = prefix + pad(number.toString(base), precision || 0, '0', false);\r\n\t\t\treturn justify(value, prefix, leftJustify, minWidth, zeroPad);\r\n\t\t};\r\n\r\n\t\t// formatString()\r\n\t\tvar formatString = function (value, leftJustify, minWidth, precision, zeroPad, customPadChar) {\r\n\t\t\tif (precision != null) {\r\n\t\t\t\tvalue = value.slice(0, precision);\r\n\t\t\t}\r\n\t\t\treturn justify(value, '', leftJustify, minWidth, zeroPad, customPadChar);\r\n\t\t};\r\n\r\n\t\t// doFormat()\r\n\t\tvar doFormat = function (substring, valueIndex, flags, minWidth, _, precision, type) {\r\n\t\t\tvar number;\r\n\t\t\tvar prefix;\r\n\t\t\tvar method;\r\n\t\t\tvar textTransform;\r\n\t\t\tvar value;\r\n\r\n\t\t\tif (substring == '%%') return '%';\r\n\r\n\t\t\t// parse flags\r\n\t\t\tvar leftJustify = false, positivePrefix = '', zeroPad = false, prefixBaseX = false, customPadChar = ' ';\r\n\t\t\tvar flagsl = flags.length;\r\n\t\t\tfor (var j = 0; flags && j < flagsl; j++) switch (flags.charAt(j)) {\r\n\t\t\t\tcase ' ': positivePrefix = ' '; break;\r\n\t\t\t\tcase '+': positivePrefix = '+'; break;\r\n\t\t\t\tcase '-': leftJustify = true; break;\r\n\t\t\t\tcase \"'\": customPadChar = flags.charAt(j + 1); break;\r\n\t\t\t\tcase '0': zeroPad = true; break;\r\n\t\t\t\tcase '#': prefixBaseX = true; break;\r\n\t\t\t}\r\n\r\n\t\t\t// parameters may be null, undefined, empty-string or real valued\r\n\t\t\t// we want to ignore null, undefined and empty-string values\r\n\t\t\tif (!minWidth) {\r\n\t\t\t\tminWidth = 0;\r\n\t\t\t} else if (minWidth == '*') {\r\n\t\t\t\tminWidth = +a[i++];\r\n\t\t\t} else if (minWidth.charAt(0) == '*') {\r\n\t\t\t\tminWidth = +a[minWidth.slice(1, -1)];\r\n\t\t\t} else {\r\n\t\t\t\tminWidth = +minWidth;\r\n\t\t\t}\r\n\r\n\t\t\t// Note: undocumented perl feature:\r\n\t\t\tif (minWidth < 0) {\r\n\t\t\t\tminWidth = -minWidth;\r\n\t\t\t\tleftJustify = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (!isFinite(minWidth)) {\r\n\t\t\t\tthrow new Error('sprintf: (minimum-)width must be finite');\r\n\t\t\t}\r\n\r\n\t\t\tif (!precision) {\r\n\t\t\t\tprecision = 'fFeE'.indexOf(type) > -1 ? 6 : (type == 'd') ? 0 : void (0);\r\n\t\t\t} else if (precision == '*') {\r\n\t\t\t\tprecision = +a[i++];\r\n\t\t\t} else if (precision.charAt(0) == '*') {\r\n\t\t\t\tprecision = +a[precision.slice(1, -1)];\r\n\t\t\t} else {\r\n\t\t\t\tprecision = +precision;\r\n\t\t\t}\r\n\r\n\t\t\t// grab value using valueIndex if required?\r\n\t\t\tvalue = valueIndex ? a[valueIndex.slice(0, -1)] : a[i++];\r\n\r\n\t\t\tswitch (type) {\r\n\t\t\t\tcase 's': return formatString(String(value), leftJustify, minWidth, precision, zeroPad, customPadChar);\r\n\t\t\t\tcase 'c': return formatString(String.fromCharCode(+value), leftJustify, minWidth, precision, zeroPad);\r\n\t\t\t\tcase 'b': return formatBaseX(value, 2, prefixBaseX, leftJustify, minWidth, precision, zeroPad);\r\n\t\t\t\tcase 'o': return formatBaseX(value, 8, prefixBaseX, leftJustify, minWidth, precision, zeroPad);\r\n\t\t\t\tcase 'x': return formatBaseX(value, 16, prefixBaseX, leftJustify, minWidth, precision, zeroPad);\r\n\t\t\t\tcase 'X': return formatBaseX(value, 16, prefixBaseX, leftJustify, minWidth, precision, zeroPad).toUpperCase();\r\n\t\t\t\tcase 'u': return formatBaseX(value, 10, prefixBaseX, leftJustify, minWidth, precision, zeroPad);\r\n\t\t\t\tcase 'i':\r\n\t\t\t\tcase 'd': {\r\n\t\t\t\t\tnumber = parseInt(+value);\r\n\t\t\t\t\tprefix = number < 0 ? '-' : positivePrefix;\r\n\t\t\t\t\tvalue = prefix + pad(String(Math.abs(number)), precision, '0', false);\r\n\t\t\t\t\treturn justify(value, prefix, leftJustify, minWidth, zeroPad);\r\n\t\t\t\t}\r\n\t\t\t\tcase 'e':\r\n\t\t\t\tcase 'E':\r\n\t\t\t\tcase 'f':\r\n\t\t\t\tcase 'F':\r\n\t\t\t\tcase 'g':\r\n\t\t\t\tcase 'G': {\r\n\t\t\t\t\tnumber = +value;\r\n\t\t\t\t\tprefix = number < 0 ? '-' : positivePrefix;\r\n\t\t\t\t\tmethod = ['toExponential', 'toFixed', 'toPrecision']['efg'.indexOf(type.toLowerCase())];\r\n\t\t\t\t\ttextTransform = ['toString', 'toUpperCase']['eEfFgG'.indexOf(type) % 2];\r\n\t\t\t\t\tvalue = prefix + Math.abs(number)[method](precision);\r\n\t\t\t\t\treturn justify(value, prefix, leftJustify, minWidth, zeroPad)[textTransform]();\r\n\t\t\t\t}\r\n\t\t\t\tdefault: return substring;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\treturn format.replace(regex, doFormat);\r\n\t}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\t; (function (jsPDFAPI) {\r\n\t\t'use strict'\r\n\r\n\t\tvar namespace = 'addImage_'\r\n\r\n\t\t// takes a string imgData containing the raw bytes of\r\n\t\t// a jpeg image and returns [width, height]\r\n\t\t// Algorithm from: http://www.64lines.com/jpeg-width-height\r\n\t\tvar getJpegSize = function (imgData) {\r\n\t\t\t'use strict'\r\n\t\t\tvar width, height;\r\n\t\t\t// Verify we have a valid jpeg header 0xff,0xd8,0xff,0xe0,?,?,'J','F','I','F',0x00\r\n\t\t\tif (!imgData.charCodeAt(0) === 0xff ||\r\n\t\t\t\t!imgData.charCodeAt(1) === 0xd8 ||\r\n\t\t\t\t!imgData.charCodeAt(2) === 0xff ||\r\n\t\t\t\t!imgData.charCodeAt(3) === 0xe0 ||\r\n\t\t\t\t!imgData.charCodeAt(6) === 'J'.charCodeAt(0) ||\r\n\t\t\t\t!imgData.charCodeAt(7) === 'F'.charCodeAt(0) ||\r\n\t\t\t\t!imgData.charCodeAt(8) === 'I'.charCodeAt(0) ||\r\n\t\t\t\t!imgData.charCodeAt(9) === 'F'.charCodeAt(0) ||\r\n\t\t\t\t!imgData.charCodeAt(10) === 0x00) {\r\n\t\t\t\tthrow new Error('getJpegSize requires a binary jpeg file')\r\n\t\t\t}\r\n\t\t\tvar blockLength = imgData.charCodeAt(4) * 256 + imgData.charCodeAt(5);\r\n\t\t\tvar i = 4, len = imgData.length;\r\n\t\t\twhile (i < len) {\r\n\t\t\t\ti += blockLength;\r\n\t\t\t\tif (imgData.charCodeAt(i) !== 0xff) {\r\n\t\t\t\t\tthrow new Error('getJpegSize could not find the size of the image');\r\n\t\t\t\t}\r\n\t\t\t\tif (imgData.charCodeAt(i + 1) === 0xc0) {\r\n\t\t\t\t\theight = imgData.charCodeAt(i + 5) * 256 + imgData.charCodeAt(i + 6);\r\n\t\t\t\t\twidth = imgData.charCodeAt(i + 7) * 256 + imgData.charCodeAt(i + 8);\r\n\t\t\t\t\treturn [width, height];\r\n\t\t\t\t} else {\r\n\t\t\t\t\ti += 2;\r\n\t\t\t\t\tblockLength = imgData.charCodeAt(i) * 256 + imgData.charCodeAt(i + 1)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\t// Image functionality ported from pdf.js\r\n\t\t\t, putImage = function (img) {\r\n\t\t\t\tvar objectNumber = this.internal.newObject()\r\n\t\t\t\t\t, out = this.internal.write\r\n\t\t\t\t\t, putStream = this.internal.putStream\r\n\r\n\t\t\t\timg['n'] = objectNumber\r\n\r\n\t\t\t\tout('<</Type /XObject')\r\n\t\t\t\tout('/Subtype /Image')\r\n\t\t\t\tout('/Width ' + img['w'])\r\n\t\t\t\tout('/Height ' + img['h'])\r\n\t\t\t\tif (img['cs'] === 'Indexed') {\r\n\t\t\t\t\tout('/ColorSpace [/Indexed /DeviceRGB '\r\n\t\t\t\t\t\t+ (img['pal'].length / 3 - 1) + ' ' + (objectNumber + 1)\r\n\t\t\t\t\t\t+ ' 0 R]');\r\n\t\t\t\t} else {\r\n\t\t\t\t\tout('/ColorSpace /' + img['cs']);\r\n\t\t\t\t\tif (img['cs'] === 'DeviceCMYK') {\r\n\t\t\t\t\t\tout('/Decode [1 0 1 0 1 0 1 0]');\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tout('/BitsPerComponent ' + img['bpc']);\r\n\t\t\t\tif ('f' in img) {\r\n\t\t\t\t\tout('/Filter /' + img['f']);\r\n\t\t\t\t}\r\n\t\t\t\tif ('dp' in img) {\r\n\t\t\t\t\tout('/DecodeParms <<' + img['dp'] + '>>');\r\n\t\t\t\t}\r\n\t\t\t\tif ('trns' in img && img['trns'].constructor == Array) {\r\n\t\t\t\t\tvar trns = '';\r\n\t\t\t\t\tfor (var i = 0; i < img['trns'].length; i++) {\r\n\t\t\t\t\t\ttrns += (img[trns][i] + ' ' + img['trns'][i] + ' ');\r\n\t\t\t\t\t\tout('/Mask [' + trns + ']');\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif ('smask' in img) {\r\n\t\t\t\t\tout('/SMask ' + (objectNumber + 1) + ' 0 R');\r\n\t\t\t\t}\r\n\t\t\t\tout('/Length ' + img['data'].length + '>>');\r\n\r\n\t\t\t\tputStream(img['data']);\r\n\r\n\t\t\t\tout('endobj');\r\n\t\t\t}\r\n\t\t\t, putResourcesCallback = function () {\r\n\t\t\t\tvar images = this.internal.collections[namespace + 'images']\r\n\t\t\t\tfor (var i in images) {\r\n\t\t\t\t\tputImage.call(this, images[i])\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t, putXObjectsDictCallback = function () {\r\n\t\t\t\tvar images = this.internal.collections[namespace + 'images']\r\n\t\t\t\t\t, out = this.internal.write\r\n\t\t\t\t\t, image\r\n\t\t\t\tfor (var i in images) {\r\n\t\t\t\t\timage = images[i]\r\n\t\t\t\t\tout(\r\n\t\t\t\t\t\t'/I' + image['i']\r\n\t\t\t\t\t\t, image['n']\r\n\t\t\t\t\t\t, '0'\r\n\t\t\t\t\t\t, 'R'\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\tjsPDFAPI.addImage = function (imageData, format, x, y, w, h) {\r\n\t\t\t'use strict'\r\n\t\t\tif (typeof imageData === 'object' && imageData.nodeType === 1) {\r\n\t\t\t\tvar canvas = document.createElement('canvas');\r\n\t\t\t\tcanvas.width = imageData.clientWidth;\r\n\t\t\t\tcanvas.height = imageData.clientHeight;\r\n\r\n\t\t\t\tvar ctx = canvas.getContext('2d');\r\n\t\t\t\tif (!ctx) {\r\n\t\t\t\t\tthrow ('addImage requires canvas to be supported by browser.');\r\n\t\t\t\t}\r\n\t\t\t\tctx.drawImage(imageData, 0, 0, canvas.width, canvas.height);\r\n\t\t\t\timageData = canvas.toDataURL('image/jpeg');\r\n\t\t\t\tformat = \"JPEG\";\r\n\t\t\t}\r\n\t\t\tif (format.toUpperCase() !== 'JPEG') {\r\n\t\t\t\tthrow new Error('addImage currently only supports format \\'JPEG\\', not \\'' + format + '\\'');\r\n\t\t\t}\r\n\r\n\t\t\tvar imageIndex\r\n\t\t\t\t, images = this.internal.collections[namespace + 'images']\r\n\t\t\t\t, coord = this.internal.getCoordinateString\r\n\t\t\t\t, vcoord = this.internal.getVerticalCoordinateString;\r\n\r\n\t\t\t// Detect if the imageData is raw binary or Data URL\r\n\t\t\tif (imageData.substring(0, 23) === 'data:image/jpeg;base64,') {\r\n\t\t\t\timageData = atob(imageData.replace('data:image/jpeg;base64,', ''));\r\n\t\t\t}\r\n\r\n\t\t\tif (images) {\r\n\t\t\t\t// this is NOT the first time this method is ran on this instance of jsPDF object.\r\n\t\t\t\timageIndex = Object.keys ?\r\n\t\t\t\t\tObject.keys(images).length :\r\n\t\t\t\t\t(function (o) {\r\n\t\t\t\t\t\tvar i = 0\r\n\t\t\t\t\t\tfor (var e in o) { if (o.hasOwnProperty(e)) { i++ } }\r\n\t\t\t\t\t\treturn i\r\n\t\t\t\t\t})(images)\r\n\t\t\t} else {\r\n\t\t\t\t// this is the first time this method is ran on this instance of jsPDF object.\r\n\t\t\t\timageIndex = 0\r\n\t\t\t\tthis.internal.collections[namespace + 'images'] = images = {}\r\n\t\t\t\tthis.internal.events.subscribe('putResources', putResourcesCallback)\r\n\t\t\t\tthis.internal.events.subscribe('putXobjectDict', putXObjectsDictCallback)\r\n\t\t\t}\r\n\r\n\t\t\tvar dims = getJpegSize(imageData);\r\n\t\t\tvar info = {\r\n\t\t\t\tw: dims[0],\r\n\t\t\t\th: dims[1],\r\n\t\t\t\tcs: 'DeviceRGB',\r\n\t\t\t\tbpc: 8,\r\n\t\t\t\tf: 'DCTDecode',\r\n\t\t\t\ti: imageIndex,\r\n\t\t\t\tdata: imageData\r\n\t\t\t\t// n: objectNumber will be added by putImage code\r\n\r\n\t\t\t};\r\n\t\t\timages[imageIndex] = info\r\n\t\t\tif (!w && !h) {\r\n\t\t\t\tw = -96;\r\n\t\t\t\th = -96;\r\n\t\t\t}\r\n\t\t\tif (w < 0) {\r\n\t\t\t\tw = (-1) * info['w'] * 72 / w / this.internal.scaleFactor;\r\n\t\t\t}\r\n\t\t\tif (h < 0) {\r\n\t\t\t\th = (-1) * info['h'] * 72 / h / this.internal.scaleFactor;\r\n\t\t\t}\r\n\t\t\tif (w === 0) {\r\n\t\t\t\tw = h * info['w'] / info['h'];\r\n\t\t\t}\r\n\t\t\tif (h === 0) {\r\n\t\t\t\th = w * info['h'] / info['w'];\r\n\t\t\t}\r\n\r\n\t\t\tthis.internal.write(\r\n\t\t\t\t'q'\r\n\t\t\t\t, coord(w)\r\n\t\t\t\t, '0 0'\r\n\t\t\t\t, coord(h) // TODO: check if this should be shifted by vcoord\r\n\t\t\t\t, coord(x)\r\n\t\t\t\t, vcoord(y + h)\r\n\t\t\t\t, 'cm /I' + info['i']\r\n\t\t\t\t, 'Do Q'\r\n\t\t\t)\r\n\r\n\t\t\treturn this\r\n\t\t}\r\n\r\n\r\n\t})(jsPDF.API)\r\n\r\n\r\n\r\n\t//FILE jspdf_encoding\r\n\r\n\r\n\r\n\t; (function (API) {\r\n\t\t'use strict'\r\n\r\n\r\n\r\n\t\t/**\r\n\t\tUncompresses data compressed into custom, base16-like format. \r\n\t\t@public\r\n\t\t@function\r\n\t\t@param\r\n\t\t@returns {Type}\r\n\t\t*/\r\n\t\tvar uncompress = function (data) {\r\n\r\n\t\t\tvar decoded = '0123456789abcdef'\r\n\t\t\t\t, encoded = 'klmnopqrstuvwxyz'\r\n\t\t\t\t, mapping = {}\r\n\r\n\t\t\tfor (var i = 0; i < encoded.length; i++) {\r\n\t\t\t\tmapping[encoded[i]] = decoded[i]\r\n\t\t\t}\r\n\r\n\t\t\tvar undef\r\n\t\t\t\t, output = {}\r\n\t\t\t\t, sign = 1\r\n\t\t\t\t, stringparts // undef. will be [] in string mode\r\n\r\n\t\t\t\t, activeobject = output\r\n\t\t\t\t, parentchain = []\r\n\t\t\t\t, parent_key_pair\r\n\t\t\t\t, keyparts = ''\r\n\t\t\t\t, valueparts = ''\r\n\t\t\t\t, key // undef. will be Truthy when Key is resolved.\r\n\t\t\t\t, datalen = data.length - 1 // stripping ending }\r\n\t\t\t\t, ch\r\n\r\n\t\t\ti = 1 // stripping starting {\r\n\r\n\t\t\twhile (i != datalen) {\r\n\t\t\t\t// - { } ' are special.\r\n\r\n\t\t\t\tch = data[i]\r\n\t\t\t\ti += 1\r\n\r\n\t\t\t\tif (ch == \"'\") {\r\n\t\t\t\t\tif (stringparts) {\r\n\t\t\t\t\t\t// end of string mode\r\n\t\t\t\t\t\tkey = stringparts.join('')\r\n\t\t\t\t\t\tstringparts = undef\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// start of string mode\r\n\t\t\t\t\t\tstringparts = []\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (stringparts) {\r\n\t\t\t\t\tstringparts.push(ch)\r\n\t\t\t\t} else if (ch == '{') {\r\n\t\t\t\t\t// start of object\r\n\t\t\t\t\tparentchain.push([activeobject, key])\r\n\t\t\t\t\tactiveobject = {}\r\n\t\t\t\t\tkey = undef\r\n\t\t\t\t} else if (ch == '}') {\r\n\t\t\t\t\t// end of object\r\n\t\t\t\t\tparent_key_pair = parentchain.pop()\r\n\t\t\t\t\tparent_key_pair[0][parent_key_pair[1]] = activeobject\r\n\t\t\t\t\tkey = undef\r\n\t\t\t\t\tactiveobject = parent_key_pair[0]\r\n\t\t\t\t} else if (ch == '-') {\r\n\t\t\t\t\tsign = -1\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// must be number\r\n\t\t\t\t\tif (key === undef) {\r\n\t\t\t\t\t\tif (mapping.hasOwnProperty(ch)) {\r\n\t\t\t\t\t\t\tkeyparts += mapping[ch]\r\n\t\t\t\t\t\t\tkey = parseInt(keyparts, 16) * sign\r\n\t\t\t\t\t\t\tsign = +1\r\n\t\t\t\t\t\t\tkeyparts = ''\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tkeyparts += ch\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (mapping.hasOwnProperty(ch)) {\r\n\t\t\t\t\t\t\tvalueparts += mapping[ch]\r\n\t\t\t\t\t\t\tactiveobject[key] = parseInt(valueparts, 16) * sign\r\n\t\t\t\t\t\t\tsign = +1\r\n\t\t\t\t\t\t\tkey = undef\r\n\t\t\t\t\t\t\tvalueparts = ''\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tvalueparts += ch\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} // end while\r\n\r\n\t\t\treturn output\r\n\t\t}\r\n\r\n\t\t// encoding = 'Unicode' \r\n\t\t// NOT UTF8, NOT UTF16BE/LE, NOT UCS2BE/LE. NO clever BOM behavior\r\n\t\t// Actual 16bit char codes used.\r\n\t\t// no multi-byte logic here\r\n\r\n\t\t// Unicode characters to WinAnsiEncoding:\r\n\t\t// {402: 131, 8211: 150, 8212: 151, 8216: 145, 8217: 146, 8218: 130, 8220: 147, 8221: 148, 8222: 132, 8224: 134, 8225: 135, 8226: 149, 8230: 133, 8364: 128, 8240:137, 8249: 139, 8250: 155, 710: 136, 8482: 153, 338: 140, 339: 156, 732: 152, 352: 138, 353: 154, 376: 159, 381: 142, 382: 158}\r\n\t\t// as you can see, all Unicode chars are outside of 0-255 range. No char code conflicts.\r\n\t\t// this means that you can give Win cp1252 encoded strings to jsPDF for rendering directly\r\n\t\t// as well as give strings with some (supported by these fonts) Unicode characters and \r\n\t\t// these will be mapped to win cp1252 \r\n\t\t// for example, you can send char code (cp1252) 0x80 or (unicode) 0x20AC, getting \"Euro\" glyph displayed in both cases.\r\n\r\n\t\tvar encodingBlock = {\r\n\t\t\t'codePages': ['WinAnsiEncoding']\r\n\t\t\t, 'WinAnsiEncoding': uncompress(\"{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}\")\r\n\t\t}\r\n\t\t\t, encodings = {\r\n\t\t\t\t'Unicode': {\r\n\t\t\t\t\t'Courier': encodingBlock\r\n\t\t\t\t\t, 'Courier-Bold': encodingBlock\r\n\t\t\t\t\t, 'Courier-BoldOblique': encodingBlock\r\n\t\t\t\t\t, 'Courier-Oblique': encodingBlock\r\n\t\t\t\t\t, 'Helvetica': encodingBlock\r\n\t\t\t\t\t, 'Helvetica-Bold': encodingBlock\r\n\t\t\t\t\t, 'Helvetica-BoldOblique': encodingBlock\r\n\t\t\t\t\t, 'Helvetica-Oblique': encodingBlock\r\n\t\t\t\t\t, 'Times-Roman': encodingBlock\r\n\t\t\t\t\t, 'Times-Bold': encodingBlock\r\n\t\t\t\t\t, 'Times-BoldItalic': encodingBlock\r\n\t\t\t\t\t, 'Times-Italic': encodingBlock\r\n\t\t\t\t\t//\t, 'Symbol'\r\n\t\t\t\t\t//\t, 'ZapfDingbats'\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t/** \r\n\t\t\tResources:\r\n\t\t\tFont metrics data is reprocessed derivative of contents of\r\n\t\t\t\"Font Metrics for PDF Core 14 Fonts\" package, which exhibits the following copyright and license:\r\n\t\t\t\r\n\t\t\tCopyright (c) 1989, 1990, 1991, 1992, 1993, 1997 Adobe Systems Incorporated. All Rights Reserved.\r\n\t\t\t\r\n\t\t\tThis file and the 14 PostScript(R) AFM files it accompanies may be used,\r\n\t\t\tcopied, and distributed for any purpose and without charge, with or without\r\n\t\t\tmodification, provided that all copyright notices are retained; that the AFM\r\n\t\t\tfiles are not distributed without this file; that all modifications to this\r\n\t\t\tfile or any of the AFM files are prominently noted in the modified file(s);\r\n\t\t\tand that this paragraph is not modified. Adobe Systems has no responsibility\r\n\t\t\tor obligation to support the use of the AFM files.\r\n\t\t\t\r\n\t\t\t*/\r\n\t\t\t, fontMetrics = {\r\n\t\t\t\t'Unicode': {\r\n\t\t\t\t\t// all sizing numbers are n/fontMetricsFractionOf = one font size unit\r\n\t\t\t\t\t// this means that if fontMetricsFractionOf = 1000, and letter A's width is 476, it's\r\n\t\t\t\t\t// width is 476/1000 or 47.6% of its height (regardless of font size)\r\n\t\t\t\t\t// At this time this value applies to \"widths\" and \"kerning\" numbers.\r\n\r\n\t\t\t\t\t// char code 0 represents \"default\" (average) width - use it for chars missing in this table.\r\n\t\t\t\t\t// key 'fof' represents the \"fontMetricsFractionOf\" value\r\n\r\n\t\t\t\t\t'Courier-Oblique': uncompress(\"{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}\")\r\n\t\t\t\t\t, 'Times-BoldItalic': uncompress(\"{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}\")\r\n\t\t\t\t\t, 'Helvetica-Bold': uncompress(\"{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}\")\r\n\t\t\t\t\t, 'Courier': uncompress(\"{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}\")\r\n\t\t\t\t\t, 'Courier-BoldOblique': uncompress(\"{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}\")\r\n\t\t\t\t\t, 'Times-Bold': uncompress(\"{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}\")\r\n\t\t\t\t\t//, 'Symbol': uncompress(\"{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}\")\r\n\t\t\t\t\t, 'Helvetica': uncompress(\"{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}\")\r\n\t\t\t\t\t, 'Helvetica-BoldOblique': uncompress(\"{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}\")\r\n\t\t\t\t\t//, 'ZapfDingbats': uncompress(\"{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}\")\r\n\t\t\t\t\t, 'Courier-Bold': uncompress(\"{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}\")\r\n\t\t\t\t\t, 'Times-Italic': uncompress(\"{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}\")\r\n\t\t\t\t\t, 'Times-Roman': uncompress(\"{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}\")\r\n\t\t\t\t\t, 'Helvetica-Oblique': uncompress(\"{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}\")\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t/*\r\n\t\tThis event handler is fired when a new jsPDF object is initialized\r\n\t\tThis event handler appends metrics data to standard fonts within\r\n\t\tthat jsPDF instance. The metrics are mapped over Unicode character\r\n\t\tcodes, NOT CIDs or other codes matching the StandardEncoding table of the\r\n\t\tstandard PDF fonts.\r\n\t\tFuture:\r\n\t\tAlso included is the encoding maping table, converting Unicode (UCS-2, UTF-16)\r\n\t\tchar codes to StandardEncoding character codes. The encoding table is to be used\r\n\t\tsomewhere around \"pdfEscape\" call.\r\n\t\t*/\r\n\r\n\t\tAPI.events.push([\r\n\t\t\t'addFonts'\r\n\t\t\t, function (fontManagementObjects) {\r\n\t\t\t\t// fontManagementObjects is {\r\n\t\t\t\t//\t'fonts':font_ID-keyed hash of font objects\r\n\t\t\t\t//\t, 'dictionary': lookup object, linking [\"FontFamily\"]['Style'] to font ID\r\n\t\t\t\t//}\r\n\t\t\t\tvar font\r\n\t\t\t\t\t, fontID\r\n\t\t\t\t\t, metrics\r\n\t\t\t\t\t, unicode_section\r\n\t\t\t\t\t, encoding = 'Unicode'\r\n\t\t\t\t\t, encodingBlock\r\n\r\n\t\t\t\tfor (fontID in fontManagementObjects.fonts) {\r\n\t\t\t\t\tif (fontManagementObjects.fonts.hasOwnProperty(fontID)) {\r\n\t\t\t\t\t\tfont = fontManagementObjects.fonts[fontID]\r\n\r\n\t\t\t\t\t\t// // we only ship 'Unicode' mappings and metrics. No need for loop.\r\n\t\t\t\t\t\t// // still, leaving this for the future.\r\n\r\n\t\t\t\t\t\t// for (encoding in fontMetrics){\r\n\t\t\t\t\t\t// \tif (fontMetrics.hasOwnProperty(encoding)) {\r\n\r\n\t\t\t\t\t\tmetrics = fontMetrics[encoding][font.PostScriptName]\r\n\t\t\t\t\t\tif (metrics) {\r\n\t\t\t\t\t\t\tif (font.metadata[encoding]) {\r\n\t\t\t\t\t\t\t\tunicode_section = font.metadata[encoding]\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tunicode_section = font.metadata[encoding] = {}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tunicode_section.widths = metrics.widths\r\n\t\t\t\t\t\t\tunicode_section.kerning = metrics.kerning\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// \t}\r\n\t\t\t\t\t\t// }\r\n\t\t\t\t\t\t// for (encoding in encodings){\r\n\t\t\t\t\t\t// \tif (encodings.hasOwnProperty(encoding)) {\r\n\t\t\t\t\t\tencodingBlock = encodings[encoding][font.PostScriptName]\r\n\t\t\t\t\t\tif (encodingBlock) {\r\n\t\t\t\t\t\t\tif (font.metadata[encoding]) {\r\n\t\t\t\t\t\t\t\tunicode_section = font.metadata[encoding]\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tunicode_section = font.metadata[encoding] = {}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tunicode_section.encoding = encodingBlock\r\n\t\t\t\t\t\t\tif (encodingBlock.codePages && encodingBlock.codePages.length) {\r\n\t\t\t\t\t\t\t\tfont.encoding = encodingBlock.codePages[0]\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// \t}\r\n\t\t\t\t\t\t// }\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t]) // end of adding event handler\r\n\r\n\t})(jsPDF.API);\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\t/** @preserve \r\n\tjsPDF split_text_to_size plugin\r\n\tCopyright (c) 2012 Willow Systems Corporation, willow-systems.com\r\n\tMIT license.\r\n\t*/\r\n\t/**\r\n\t * Permission is hereby granted, free of charge, to any person obtaining\r\n\t * a copy of this software and associated documentation files (the\r\n\t * \"Software\"), to deal in the Software without restriction, including\r\n\t * without limitation the rights to use, copy, modify, merge, publish,\r\n\t * distribute, sublicense, and/or sell copies of the Software, and to\r\n\t * permit persons to whom the Software is furnished to do so, subject to\r\n\t * the following conditions:\r\n\t * \r\n\t * The above copyright notice and this permission notice shall be\r\n\t * included in all copies or substantial portions of the Software.\r\n\t * \r\n\t * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\r\n\t * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\r\n\t * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\r\n\t * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE\r\n\t * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\r\n\t * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\r\n\t * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n\t * ====================================================================\r\n\t */\r\n\r\n\t; (function (API) {\r\n\t\t'use strict'\r\n\r\n\t\t/**\r\n\t\tReturns an array of length matching length of the 'word' string, with each\r\n\t\tcell ocupied by the width of the char in that position.\r\n\t\t\r\n\t\t@function\r\n\t\t@param word {String}\r\n\t\t@param widths {Object}\r\n\t\t@param kerning {Object}\r\n\t\t@returns {Array}\r\n\t\t*/\r\n\t\tvar getCharWidthsArray = API.getCharWidthsArray = function (text, options) {\r\n\r\n\t\t\tif (!options) {\r\n\t\t\t\toptions = {}\r\n\t\t\t}\r\n\r\n\t\t\tvar widths = options.widths ? options.widths : this.internal.getFont().metadata.Unicode.widths\r\n\t\t\t\t, widthsFractionOf = widths.fof ? widths.fof : 1\r\n\t\t\t\t, kerning = options.kerning ? options.kerning : this.internal.getFont().metadata.Unicode.kerning\r\n\t\t\t\t, kerningFractionOf = kerning.fof ? kerning.fof : 1\r\n\r\n\t\t\t// console.log(\"widths, kergnings\", widths, kerning)\r\n\r\n\t\t\tvar i, l\r\n\t\t\t\t, char_code\r\n\t\t\t\t, char_width\r\n\t\t\t\t, prior_char_code = 0 // for kerning\r\n\t\t\t\t, default_char_width = widths[0] || widthsFractionOf\r\n\t\t\t\t, output = []\r\n\r\n\t\t\tfor (i = 0, l = text.length; i < l; i++) {\r\n\t\t\t\tchar_code = text.charCodeAt(i)\r\n\t\t\t\toutput.push(\r\n\t\t\t\t\t(widths[char_code] || default_char_width) / widthsFractionOf +\r\n\t\t\t\t\t(kerning[char_code] && kerning[char_code][prior_char_code] || 0) / kerningFractionOf\r\n\t\t\t\t)\r\n\t\t\t\tprior_char_code = char_code\r\n\t\t\t}\r\n\r\n\t\t\treturn output\r\n\t\t}\r\n\t\tvar getArraySum = function (array) {\r\n\t\t\tvar i = array.length\r\n\t\t\t\t, output = 0\r\n\t\t\twhile (i) {\r\n\t\t\t\t; i--;\r\n\t\t\t\toutput += array[i]\r\n\t\t\t}\r\n\t\t\treturn output\r\n\t\t}\r\n\t\t/**\r\n\t\tReturns a widths of string in a given font, if the font size is set as 1 point.\r\n\t\t\r\n\t\tIn other words, this is \"proportional\" value. For 1 unit of font size, the length\r\n\t\tof the string will be that much.\r\n\t\t\r\n\t\tMultiply by font size to get actual width in *points*\r\n\t\tThen divide by 72 to get inches or divide by (72/25.6) to get 'mm' etc.\r\n\t\t\r\n\t\t@public\r\n\t\t@function\r\n\t\t@param\r\n\t\t@returns {Type}\r\n\t\t*/\r\n\t\tvar getStringUnitWidth = API.getStringUnitWidth = function (text, options) {\r\n\t\t\treturn getArraySum(getCharWidthsArray.call(this, text, options))\r\n\t\t}\r\n\r\n\t\t/** \r\n\t\treturns array of lines\r\n\t\t*/\r\n\t\tvar splitLongWord = function (word, widths_array, firstLineMaxLen, maxLen) {\r\n\t\t\tvar answer = []\r\n\r\n\t\t\t// 1st, chop off the piece that can fit on the hanging line.\r\n\t\t\tvar i = 0\r\n\t\t\t\t, l = word.length\r\n\t\t\t\t, workingLen = 0\r\n\t\t\twhile (i !== l && workingLen + widths_array[i] < firstLineMaxLen) {\r\n\t\t\t\tworkingLen += widths_array[i]\r\n\t\t\t\t\t; i++;\r\n\t\t\t}\r\n\t\t\t// this is first line.\r\n\t\t\tanswer.push(word.slice(0, i))\r\n\r\n\t\t\t// 2nd. Split the rest into maxLen pieces.\r\n\t\t\tvar startOfLine = i\r\n\t\t\tworkingLen = 0\r\n\t\t\twhile (i !== l) {\r\n\t\t\t\tif (workingLen + widths_array[i] > maxLen) {\r\n\t\t\t\t\tanswer.push(word.slice(startOfLine, i))\r\n\t\t\t\t\tworkingLen = 0\r\n\t\t\t\t\tstartOfLine = i\r\n\t\t\t\t}\r\n\t\t\t\tworkingLen += widths_array[i]\r\n\t\t\t\t\t; i++;\r\n\t\t\t}\r\n\t\t\tif (startOfLine !== i) {\r\n\t\t\t\tanswer.push(word.slice(startOfLine, i))\r\n\t\t\t}\r\n\r\n\t\t\treturn answer\r\n\t\t}\r\n\r\n\t\t// Note, all sizing inputs for this function must be in \"font measurement units\"\r\n\t\t// By default, for PDF, it's \"point\".\r\n\t\tvar splitParagraphIntoLines = function (text, maxlen, options) {\r\n\t\t\t// at this time works only on Western scripts, ones with space char\r\n\t\t\t// separating the words. Feel free to expand.\r\n\r\n\t\t\tif (!options) {\r\n\t\t\t\toptions = {}\r\n\t\t\t}\r\n\r\n\t\t\tvar spaceCharWidth = getCharWidthsArray(' ', options)[0]\r\n\r\n\t\t\tvar words = text.split(' ')\r\n\r\n\t\t\tvar line = []\r\n\t\t\t\t, lines = [line]\r\n\t\t\t\t, line_length = options.textIndent || 0\r\n\t\t\t\t, separator_length = 0\r\n\t\t\t\t, current_word_length = 0\r\n\t\t\t\t, word\r\n\t\t\t\t, widths_array\r\n\r\n\t\t\tvar i, l, tmp\r\n\t\t\tfor (i = 0, l = words.length; i < l; i++) {\r\n\t\t\t\tword = words[i]\r\n\t\t\t\twidths_array = getCharWidthsArray(word, options)\r\n\t\t\t\tcurrent_word_length = getArraySum(widths_array)\r\n\r\n\t\t\t\tif (line_length + separator_length + current_word_length > maxlen) {\r\n\t\t\t\t\tif (current_word_length > maxlen) {\r\n\t\t\t\t\t\t// this happens when you have space-less long URLs for example.\r\n\t\t\t\t\t\t// we just chop these to size. We do NOT insert hiphens\r\n\t\t\t\t\t\ttmp = splitLongWord(word, widths_array, maxlen - (line_length + separator_length), maxlen)\r\n\t\t\t\t\t\t// first line we add to existing line object\r\n\t\t\t\t\t\tline.push(tmp.shift()) // it's ok to have extra space indicator there\r\n\t\t\t\t\t\t// last line we make into new line object\r\n\t\t\t\t\t\tline = [tmp.pop()]\r\n\t\t\t\t\t\t// lines in the middle we apped to lines object as whole lines\r\n\t\t\t\t\t\twhile (tmp.length) {\r\n\t\t\t\t\t\t\tlines.push([tmp.shift()]) // single fragment occupies whole line\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcurrent_word_length = getArraySum(widths_array.slice(word.length - line[0].length))\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// just put it on a new line\r\n\t\t\t\t\t\tline = [word]\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// now we attach new line to lines\r\n\t\t\t\t\tlines.push(line)\r\n\r\n\t\t\t\t\tline_length = current_word_length\r\n\t\t\t\t\tseparator_length = spaceCharWidth\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\tline.push(word)\r\n\r\n\t\t\t\t\tline_length += separator_length + current_word_length\r\n\t\t\t\t\tseparator_length = spaceCharWidth\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar output = []\r\n\t\t\tfor (i = 0, l = lines.length; i < l; i++) {\r\n\t\t\t\toutput.push(lines[i].join(' '))\r\n\t\t\t}\r\n\t\t\treturn output\r\n\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\tSplits a given string into an array of strings. Uses 'size' value\r\n\t\t(in measurement units declared as default for the jsPDF instance)\r\n\t\tand the font's \"widths\" and \"Kerning\" tables, where availabe, to\r\n\t\tdetermine display length of a given string for a given font.\r\n\t\t\r\n\t\tWe use character's 100% of unit size (height) as width when Width\r\n\t\ttable or other default width is not available.\r\n\t\t\r\n\t\t@public\r\n\t\t@function\r\n\t\t@param text {String} Unencoded, regular JavaScript (Unicode, UTF-16 / UCS-2) string.\r\n\t\t@param size {Number} Nominal number, measured in units default to this instance of jsPDF.\r\n\t\t@param options {Object} Optional flags needed for chopper to do the right thing.\r\n\t\t@returns {Array} with strings chopped to size.\r\n\t\t*/\r\n\t\tAPI.splitTextToSize = function (text, maxlen, options) {\r\n\t\t\t'use strict'\r\n\r\n\t\t\tif (!options) {\r\n\t\t\t\toptions = {}\r\n\t\t\t}\r\n\r\n\t\t\tvar fsize = options.fontSize || this.internal.getFontSize()\r\n\t\t\t\t, newOptions = (function (options) {\r\n\t\t\t\t\tvar widths = { 0: 1 }\r\n\t\t\t\t\t\t, kerning = {}\r\n\r\n\t\t\t\t\tif (!options.widths || !options.kerning) {\r\n\t\t\t\t\t\tvar f = this.internal.getFont(options.fontName, options.fontStyle)\r\n\t\t\t\t\t\t\t, encoding = 'Unicode'\r\n\t\t\t\t\t\t// NOT UTF8, NOT UTF16BE/LE, NOT UCS2BE/LE\r\n\t\t\t\t\t\t// Actual JavaScript-native String's 16bit char codes used.\r\n\t\t\t\t\t\t// no multi-byte logic here\r\n\r\n\t\t\t\t\t\tif (f.metadata[encoding]) {\r\n\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\twidths: f.metadata[encoding].widths || widths\r\n\t\t\t\t\t\t\t\t, kerning: f.metadata[encoding].kerning || kerning\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\twidths: options.widths\r\n\t\t\t\t\t\t\t, kerning: options.kerning\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// then use default values\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\twidths: widths\r\n\t\t\t\t\t\t, kerning: kerning\r\n\t\t\t\t\t}\r\n\t\t\t\t}).call(this, options)\r\n\r\n\t\t\t// first we split on end-of-line chars\r\n\t\t\tvar paragraphs\r\n\t\t\tif (text.match(/[\\n\\r]/)) {\r\n\t\t\t\tparagraphs = text.split(/\\r\\n|\\r|\\n/g)\r\n\t\t\t} else {\r\n\t\t\t\tparagraphs = [text]\r\n\t\t\t}\r\n\r\n\t\t\t// now we convert size (max length of line) into \"font size units\"\r\n\t\t\t// at present time, the \"font size unit\" is always 'point'\r\n\t\t\t// 'proportional' means, \"in proportion to font size\"\r\n\t\t\tvar fontUnit_maxLen = 1.0 * this.internal.scaleFactor * maxlen / fsize\r\n\t\t\t// at this time, fsize is always in \"points\" regardless of the default measurement unit of the doc.\r\n\t\t\t// this may change in the future?\r\n\t\t\t// until then, proportional_maxlen is likely to be in 'points'\r\n\r\n\t\t\t// If first line is to be indented (shorter or longer) than maxLen \r\n\t\t\t// we indicate that by using CSS-style \"text-indent\" option.\r\n\t\t\t// here it's in font units too (which is likely 'points')\r\n\t\t\t// it can be negative (which makes the first line longer than maxLen)\r\n\t\t\tnewOptions.textIndent = options.textIndent ?\r\n\t\t\t\toptions.textIndent * 1.0 * this.internal.scaleFactor / fsize :\r\n\t\t\t\t0\r\n\r\n\t\t\tvar i, l\r\n\t\t\t\t, output = []\r\n\t\t\tfor (i = 0, l = paragraphs.length; i < l; i++) {\r\n\t\t\t\toutput = output.concat(\r\n\t\t\t\t\tsplitParagraphIntoLines(\r\n\t\t\t\t\t\tparagraphs[i]\r\n\t\t\t\t\t\t, fontUnit_maxLen\r\n\t\t\t\t\t\t, newOptions\r\n\t\t\t\t\t)\r\n\t\t\t\t)\r\n\t\t\t}\r\n\r\n\t\t\treturn output\r\n\t\t}\r\n\r\n\t})(jsPDF.API);\r\n\r\n\r\n\r\n\t/** @preserve\r\n\tjsPDF Silly SVG plugin\r\n\tCopyright (c) 2012 Willow Systems Corporation, willow-systems.com\r\n\t*/\r\n\t/**\r\n\t * Permission is hereby granted, free of charge, to any person obtaining\r\n\t * a copy of this software and associated documentation files (the\r\n\t * \"Software\"), to deal in the Software without restriction, including\r\n\t * without limitation the rights to use, copy, modify, merge, publish,\r\n\t * distribute, sublicense, and/or sell copies of the Software, and to\r\n\t * permit persons to whom the Software is furnished to do so, subject to\r\n\t * the following conditions:\r\n\t * \r\n\t * The above copyright notice and this permission notice shall be\r\n\t * included in all copies or substantial portions of the Software.\r\n\t * \r\n\t * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\r\n\t * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\r\n\t * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\r\n\t * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE\r\n\t * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\r\n\t * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\r\n\t * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n\t * ====================================================================\r\n\t */\r\n\r\n\t; (function (jsPDFAPI) {\r\n\t\t'use strict'\r\n\r\n\t\t/**\r\n\t\tParses SVG XML and converts only some of the SVG elements into\r\n\t\tPDF elements.\r\n\t\t\r\n\t\tSupports:\r\n\t\t paths\r\n\t\t\r\n\t\t@public\r\n\t\t@function\r\n\t\t@param\r\n\t\t@returns {Type}\r\n\t\t*/\r\n\t\tjsPDFAPI.addSVG = function (svgtext, x, y, w, h) {\r\n\t\t\t// 'this' is _jsPDF object returned when jsPDF is inited (new jsPDF())\r\n\r\n\t\t\tvar undef\r\n\r\n\t\t\tif (x === undef || x === undef) {\r\n\t\t\t\tthrow new Error(\"addSVG needs values for 'x' and 'y'\")\r\n\t\t\t}\r\n\r\n\t\t\tfunction InjectCSS(cssbody, document) {\r\n\t\t\t\tvar styletag = document.createElement('style')\r\n\t\t\t\tstyletag.type = 'text/css'\r\n\t\t\t\tif (styletag.styleSheet) {\r\n\t\t\t\t\t// ie\r\n\t\t\t\t\tstyletag.styleSheet.cssText = cssbody\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// others\r\n\t\t\t\t\tstyletag.appendChild(document.createTextNode(cssbody))\r\n\t\t\t\t}\r\n\t\t\t\tdocument.getElementsByTagName(\"head\")[0].appendChild(styletag)\r\n\t\t\t}\r\n\r\n\t\t\tfunction createWorkerNode(document) {\r\n\r\n\t\t\t\tvar frameID = 'childframe' // Date.now().toString() + '_' + (Math.random() * 100).toString()\r\n\t\t\t\t\t, frame = document.createElement('iframe')\r\n\r\n\t\t\t\tInjectCSS(\r\n\t\t\t\t\t'.jsPDF_sillysvg_iframe {display:none;position:absolute;}'\r\n\t\t\t\t\t, document\r\n\t\t\t\t)\r\n\r\n\t\t\t\tframe.name = frameID\r\n\t\t\t\tframe.setAttribute(\"width\", 0)\r\n\t\t\t\tframe.setAttribute(\"height\", 0)\r\n\t\t\t\tframe.setAttribute(\"frameborder\", \"0\")\r\n\t\t\t\tframe.setAttribute(\"scrolling\", \"no\")\r\n\t\t\t\tframe.setAttribute(\"seamless\", \"seamless\")\r\n\t\t\t\tframe.setAttribute(\"class\", \"jsPDF_sillysvg_iframe\")\r\n\r\n\t\t\t\tdocument.body.appendChild(frame)\r\n\r\n\t\t\t\treturn frame\r\n\t\t\t}\r\n\r\n\t\t\tfunction attachSVGToWorkerNode(svgtext, frame) {\r\n\t\t\t\tvar framedoc = (frame.contentWindow || frame.contentDocument).document\r\n\t\t\t\tframedoc.write(svgtext)\r\n\t\t\t\tframedoc.close()\r\n\t\t\t\treturn framedoc.getElementsByTagName('svg')[0]\r\n\t\t\t}\r\n\r\n\t\t\tfunction convertPathToPDFLinesArgs(path) {\r\n\t\t\t\t'use strict'\r\n\t\t\t\t// we will use 'lines' method call. it needs:\r\n\t\t\t\t// - starting coordinate pair\r\n\t\t\t\t// - array of arrays of vector shifts (2-len for line, 6 len for bezier)\r\n\t\t\t\t// - scale array [horizontal, vertical] ratios\r\n\t\t\t\t// - style (stroke, fill, both)\r\n\r\n\t\t\t\tvar x = parseFloat(path[1])\r\n\t\t\t\t\t, y = parseFloat(path[2])\r\n\t\t\t\t\t, vectors = []\r\n\t\t\t\t\t, position = 3\r\n\t\t\t\t\t, len = path.length\r\n\r\n\t\t\t\twhile (position < len) {\r\n\t\t\t\t\tif (path[position] === 'c') {\r\n\t\t\t\t\t\tvectors.push([\r\n\t\t\t\t\t\t\tparseFloat(path[position + 1])\r\n\t\t\t\t\t\t\t, parseFloat(path[position + 2])\r\n\t\t\t\t\t\t\t, parseFloat(path[position + 3])\r\n\t\t\t\t\t\t\t, parseFloat(path[position + 4])\r\n\t\t\t\t\t\t\t, parseFloat(path[position + 5])\r\n\t\t\t\t\t\t\t, parseFloat(path[position + 6])\r\n\t\t\t\t\t\t])\r\n\t\t\t\t\t\tposition += 7\r\n\t\t\t\t\t} else if (path[position] === 'l') {\r\n\t\t\t\t\t\tvectors.push([\r\n\t\t\t\t\t\t\tparseFloat(path[position + 1])\r\n\t\t\t\t\t\t\t, parseFloat(path[position + 2])\r\n\t\t\t\t\t\t])\r\n\t\t\t\t\t\tposition += 3\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tposition += 1\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn [x, y, vectors]\r\n\t\t\t}\r\n\r\n\t\t\tvar workernode = createWorkerNode(document)\r\n\t\t\t\t, svgnode = attachSVGToWorkerNode(svgtext, workernode)\r\n\t\t\t\t, scale = [1, 1]\r\n\t\t\t\t, svgw = parseFloat(svgnode.getAttribute('width'))\r\n\t\t\t\t, svgh = parseFloat(svgnode.getAttribute('height'))\r\n\r\n\t\t\tif (svgw && svgh) {\r\n\t\t\t\t// setting both w and h makes image stretch to size.\r\n\t\t\t\t// this may distort the image, but fits your demanded size\r\n\t\t\t\tif (w && h) {\r\n\t\t\t\t\tscale = [w / svgw, h / svgh]\r\n\t\t\t\t}\r\n\t\t\t\t// if only one is set, that value is set as max and SVG \r\n\t\t\t\t// is scaled proportionately.\r\n\t\t\t\telse if (w) {\r\n\t\t\t\t\tscale = [w / svgw, w / svgw]\r\n\t\t\t\t} else if (h) {\r\n\t\t\t\t\tscale = [h / svgh, h / svgh]\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar i, l, tmp\r\n\t\t\t\t, linesargs\r\n\t\t\t\t, items = svgnode.childNodes\r\n\t\t\tfor (i = 0, l = items.length; i < l; i++) {\r\n\t\t\t\ttmp = items[i]\r\n\t\t\t\tif (tmp.tagName && tmp.tagName.toUpperCase() === 'PATH') {\r\n\t\t\t\t\tlinesargs = convertPathToPDFLinesArgs(tmp.getAttribute(\"d\").split(' '))\r\n\t\t\t\t\t// path start x coordinate\r\n\t\t\t\t\tlinesargs[0] = linesargs[0] * scale[0] + x // where x is upper left X of image\r\n\t\t\t\t\t// path start y coordinate\r\n\t\t\t\t\tlinesargs[1] = linesargs[1] * scale[1] + y // where y is upper left Y of image\r\n\t\t\t\t\t// the rest of lines are vectors. these will adjust with scale value auto.\r\n\t\t\t\t\tthis.lines.call(\r\n\t\t\t\t\t\tthis\r\n\t\t\t\t\t\t, linesargs[2] // lines\r\n\t\t\t\t\t\t, linesargs[0] // starting x\r\n\t\t\t\t\t\t, linesargs[1] // starting y\r\n\t\t\t\t\t\t, scale\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// clean up\r\n\t\t\t// workernode.parentNode.removeChild(workernode)\r\n\r\n\t\t\treturn this\r\n\t\t}\r\n\r\n\t})(jsPDF.API)\r\n\r\n\r\n\r\n\r\n\r\n/*global jsPDF */\r\n\r\n//FILE jspdf_output\r\n\r\n\r\n/** ====================================================================\r\n * jsPDF IE Below 9 Shim plugin 0.1.0\r\n * Known to be compatible with jsPDF 0.9.0\r\n *\r\n * Copyright (c) 2013 James Hall, james@snapshotmedia.co.uk\r\n *\r\n * Permission is hereby granted, free of charge, to any person obtaining\r\n * a copy of this software and associated documentation files (the\r\n * \"Software\"), to deal in the Software without restriction, including\r\n * without limitation the rights to use, copy, modify, merge, publish,\r\n * distribute, sublicense, and/or sell copies of the Software, and to\r\n * permit persons to whom the Software is furnished to do so, subject to\r\n * the following conditions:\r\n *\r\n * The above copyright notice and this permission notice shall be\r\n * included in all copies or substantial portions of the Software.\r\n *\r\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\r\n * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\r\n * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\r\n * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE\r\n * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\r\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\r\n * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n * ====================================================================\r\n */\r\n\r\n\r\n\t; (function (API) {\r\n\t\t'use strict'\r\n\r\n\t\tvar name = 'jsPDF IE Below 9 Shim plugin';\r\n\t\t// Shim in IE6-9 support\r\n\t\tAPI.output = function (type, options) {\r\n\r\n\t\t\t// If not IE then return early\r\n\t\t\treturn this.internal.output(type, options);\r\n\r\n\t\t\t/*var filename = 'Output.pdf';\r\n\t\t\tswitch (type) {\r\n\t\t\t\tcase 'datauristring':\r\n\t\t\t\tcase 'dataurlstring':\r\n\t\t\t\tcase 'datauri':\r\n\t\t\t\tcase 'dataurl':\r\n\t\t\t\tcase 'dataurlnewwindow':\r\n\t\t\t\t\tconsole.log(name + ': Data URIs are not supported on IE6-9.');\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'save':\r\n\t\t\t\t\tfilename = options;\r\n\t\t\t\t\tbreak;\r\n\t\t\t}*/\r\n\r\n\t\t\t// @TODO: IE shim \r\n\r\n\r\n\t\t};\r\n\r\n\r\n\r\n\t})(jsPDF.API)\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\t/* FileSaver.js\r\n\t * A saveAs() FileSaver implementation.\r\n\t * 2013-01-23\r\n\t * \r\n\t * By Eli Grey, http://eligrey.com\r\n\t * License: X11/MIT\r\n\t *   See LICENSE.md\r\n\t */\r\n\r\n\t/*global self */\r\n\t/*jslint bitwise: true, regexp: true, confusion: true, es5: true, vars: true, white: true,\r\n\t  plusplus: true */\r\n\r\n\t/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */\r\n\t\r\n\tif (typeof window != \"undefined\"){\r\n\t\t\r\n\tvar saveAs = saveAs\r\n\t\t//|| (navigator.msSaveBlob && navigator.msSaveBlob.bind(navigator))\r\n\t\t|| (function (view) {\r\n\t\t\t\r\n\t\t\tvar\r\n\t\t\t\tdoc = view.document\r\n\t\t\t\t// only get URL when necessary in case BlobBuilder.js hasn't overridden it yet\r\n\t\t\t\t, get_URL = function () {\r\n\t\t\t\t\treturn view.URL || view.webkitURL || view;\r\n\t\t\t\t}\r\n\t\t\t\t, URL = view.URL || view.webkitURL || view\r\n\t\t\t\t, save_link = doc.createElementNS(\"http://www.w3.org/1999/xhtml\", \"a\")\r\n\t\t\t\t, can_use_save_link = \"download\" in save_link\r\n\t\t\t\t, click = function (node) {\r\n\t\t\t\t\tvar event = doc.createEvent(\"MouseEvents\");\r\n\t\t\t\t\tevent.initMouseEvent(\r\n\t\t\t\t\t\t\"click\", true, false, view, 0, 0, 0, 0, 0\r\n\t\t\t\t\t\t, false, false, false, false, 0, null\r\n\t\t\t\t\t);\r\n\t\t\t\t\treturn node.dispatchEvent(event); // false if event was cancelled\r\n\t\t\t\t}\r\n\t\t\t\t, webkit_req_fs = view.webkitRequestFileSystem\r\n\t\t\t\t, req_fs = view.requestFileSystem || webkit_req_fs || view.mozRequestFileSystem\r\n\t\t\t\t, throw_outside = function (ex) {\r\n\t\t\t\t\t(view.setImmediate || view.setTimeout)(function () {\r\n\t\t\t\t\t\tthrow ex;\r\n\t\t\t\t\t}, 0);\r\n\t\t\t\t}\r\n\t\t\t\t, force_saveable_type = \"application/octet-stream\"\r\n\t\t\t\t, fs_min_size = 0\r\n\t\t\t\t, deletion_queue = []\r\n\t\t\t\t, process_deletion_queue = function () {\r\n\t\t\t\t\tvar i = deletion_queue.length;\r\n\t\t\t\t\twhile (i--) {\r\n\t\t\t\t\t\tvar file = deletion_queue[i];\r\n\t\t\t\t\t\tif (typeof file === \"string\") { // file is an object URL\r\n\t\t\t\t\t\t\tURL.revokeObjectURL(file);\r\n\t\t\t\t\t\t} else { // file is a File\r\n\t\t\t\t\t\t\tfile.remove();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdeletion_queue.length = 0; // clear queue\r\n\t\t\t\t}\r\n\t\t\t\t, dispatch = function (filesaver, event_types, event) {\r\n\t\t\t\t\tevent_types = [].concat(event_types);\r\n\t\t\t\t\tvar i = event_types.length;\r\n\t\t\t\t\twhile (i--) {\r\n\t\t\t\t\t\tvar listener = filesaver[\"on\" + event_types[i]];\r\n\t\t\t\t\t\tif (typeof listener === \"function\") {\r\n\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\tlistener.call(filesaver, event || filesaver);\r\n\t\t\t\t\t\t\t} catch (ex) {\r\n\t\t\t\t\t\t\t\tthrow_outside(ex);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t, FileSaver = function (blob, name) {\r\n\t\t\t\t\t// First try a.download, then web filesystem, then object URLs\r\n\t\t\t\t\tvar\r\n\t\t\t\t\t\tfilesaver = this\r\n\t\t\t\t\t\t, type = blob.type\r\n\t\t\t\t\t\t, blob_changed = false\r\n\t\t\t\t\t\t, object_url\r\n\t\t\t\t\t\t, target_view\r\n\t\t\t\t\t\t, get_object_url = function () {\r\n\t\t\t\t\t\t\tvar object_url = get_URL().createObjectURL(blob);\r\n\t\t\t\t\t\t\tdeletion_queue.push(object_url);\r\n\t\t\t\t\t\t\treturn object_url;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t, dispatch_all = function () {\r\n\t\t\t\t\t\t\tdispatch(filesaver, \"writestart progress write writeend\".split(\" \"));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// on any filesys errors revert to saving with object URLs\r\n\t\t\t\t\t\t, fs_error = function () {\r\n\t\t\t\t\t\t\t// don't create more object URLs than needed\r\n\t\t\t\t\t\t\tif (blob_changed || !object_url) {\r\n\t\t\t\t\t\t\t\tobject_url = get_object_url(blob);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (target_view) {\r\n\t\t\t\t\t\t\t\ttarget_view.location.href = object_url;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tfilesaver.readyState = filesaver.DONE;\r\n\t\t\t\t\t\t\tdispatch_all();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t, abortable = function (func) {\r\n\t\t\t\t\t\t\treturn function () {\r\n\t\t\t\t\t\t\t\tif (filesaver.readyState !== filesaver.DONE) {\r\n\t\t\t\t\t\t\t\t\treturn func.apply(this, arguments);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t, create_if_not_found = { create: true, exclusive: false }\r\n\t\t\t\t\t\t, slice\r\n\t\t\t\t\t\t;\r\n\t\t\t\t\tfilesaver.readyState = filesaver.INIT;\r\n\t\t\t\t\tif (!name) {\r\n\t\t\t\t\t\tname = \"download\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (can_use_save_link) {\r\n\t\t\t\t\t\tobject_url = get_object_url(blob);\r\n\t\t\t\t\t\tsave_link.href = object_url;\r\n\t\t\t\t\t\tsave_link.download = name;\r\n\t\t\t\t\t\tif (click(save_link)) {\r\n\t\t\t\t\t\t\tfilesaver.readyState = filesaver.DONE;\r\n\t\t\t\t\t\t\tdispatch_all();\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// Object and web filesystem URLs have a problem saving in Google Chrome when\r\n\t\t\t\t\t// viewed in a tab, so I force save with application/octet-stream\r\n\t\t\t\t\t// http://code.google.com/p/chromium/issues/detail?id=91158\r\n\t\t\t\t\tif (view.chrome && type && type !== force_saveable_type) {\r\n\t\t\t\t\t\tslice = blob.slice || blob.webkitSlice;\r\n\t\t\t\t\t\tblob = slice.call(blob, 0, blob.size, force_saveable_type);\r\n\t\t\t\t\t\tblob_changed = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// Since I can't be sure that the guessed media type will trigger a download\r\n\t\t\t\t\t// in WebKit, I append .download to the filename.\r\n\t\t\t\t\t// https://bugs.webkit.org/show_bug.cgi?id=65440\r\n\t\t\t\t\tif (webkit_req_fs && name !== \"download\") {\r\n\t\t\t\t\t\tname += \".download\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (type === force_saveable_type || webkit_req_fs) {\r\n\t\t\t\t\t\ttarget_view = view;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t//\ttarget_view = view.open();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!req_fs) {\r\n\t\t\t\t\t\tfs_error();\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfs_min_size += blob.size;\r\n\t\t\t\t\treq_fs(view.TEMPORARY, fs_min_size, abortable(function (fs) {\r\n\t\t\t\t\t\tfs.root.getDirectory(\"saved\", create_if_not_found, abortable(function (dir) {\r\n\t\t\t\t\t\t\tvar save = function () {\r\n\t\t\t\t\t\t\t\tdir.getFile(name, create_if_not_found, abortable(function (file) {\r\n\t\t\t\t\t\t\t\t\tfile.createWriter(abortable(function (writer) {\r\n\t\t\t\t\t\t\t\t\t\twriter.onwriteend = function (event) {\r\n\t\t\t\t\t\t\t\t\t\t\ttarget_view.location.href = file.toURL();\r\n\t\t\t\t\t\t\t\t\t\t\tdeletion_queue.push(file);\r\n\t\t\t\t\t\t\t\t\t\t\tfilesaver.readyState = filesaver.DONE;\r\n\t\t\t\t\t\t\t\t\t\t\tdispatch(filesaver, \"writeend\", event);\r\n\t\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t\t\twriter.onerror = function () {\r\n\t\t\t\t\t\t\t\t\t\t\tvar error = writer.error;\r\n\t\t\t\t\t\t\t\t\t\t\tif (error.code !== error.ABORT_ERR) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tfs_error();\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t\t\t\"writestart progress write abort\".split(\" \").forEach(function (event) {\r\n\t\t\t\t\t\t\t\t\t\t\twriter[\"on\" + event] = filesaver[\"on\" + event];\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\twriter.write(blob);\r\n\t\t\t\t\t\t\t\t\t\tfilesaver.abort = function () {\r\n\t\t\t\t\t\t\t\t\t\t\twriter.abort();\r\n\t\t\t\t\t\t\t\t\t\t\tfilesaver.readyState = filesaver.DONE;\r\n\t\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t\t\tfilesaver.readyState = filesaver.WRITING;\r\n\t\t\t\t\t\t\t\t\t}), fs_error);\r\n\t\t\t\t\t\t\t\t}), fs_error);\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\tdir.getFile(name, { create: false }, abortable(function (file) {\r\n\t\t\t\t\t\t\t\t// delete file if it already exists\r\n\t\t\t\t\t\t\t\tfile.remove();\r\n\t\t\t\t\t\t\t\tsave();\r\n\t\t\t\t\t\t\t}), abortable(function (ex) {\r\n\t\t\t\t\t\t\t\tif (ex.code === ex.NOT_FOUND_ERR) {\r\n\t\t\t\t\t\t\t\t\tsave();\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tfs_error();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}));\r\n\t\t\t\t\t\t}), fs_error);\r\n\t\t\t\t\t}), fs_error);\r\n\t\t\t\t}\r\n\t\t\t\t, FS_proto = FileSaver.prototype\r\n\t\t\t\t, saveAs = function (blob, name) {\r\n\t\t\t\t\treturn new FileSaver(blob, name);\r\n\t\t\t\t}\r\n\t\t\t\t;\r\n\t\t\tFS_proto.abort = function () {\r\n\t\t\t\tvar filesaver = this;\r\n\t\t\t\tfilesaver.readyState = filesaver.DONE;\r\n\t\t\t\tdispatch(filesaver, \"abort\");\r\n\t\t\t};\r\n\t\t\tFS_proto.readyState = FS_proto.INIT = 0;\r\n\t\t\tFS_proto.WRITING = 1;\r\n\t\t\tFS_proto.DONE = 2;\r\n\r\n\t\t\tFS_proto.error =\r\n\t\t\t\tFS_proto.onwritestart =\r\n\t\t\t\tFS_proto.onprogress =\r\n\t\t\t\tFS_proto.onwrite =\r\n\t\t\t\tFS_proto.onabort =\r\n\t\t\t\tFS_proto.onerror =\r\n\t\t\t\tFS_proto.onwriteend =\r\n\t\t\t\tnull;\r\n\r\n\t\t\tview.addEventListener(\"unload\", process_deletion_queue, false);\r\n\t\t\treturn saveAs;\r\n\t\t}(this));\r\n\r\n\t}\r\n\r\n\t/*\r\n\t Copyright (c) 2013 Gildas Lormeau. All rights reserved.\r\n\t\r\n\t Redistribution and use in source and binary forms, with or without\r\n\t modification, are permitted provided that the following conditions are met:\r\n\t\r\n\t 1. Redistributions of source code must retain the above copyright notice,\r\n\t this list of conditions and the following disclaimer.\r\n\t\r\n\t 2. Redistributions in binary form must reproduce the above copyright \r\n\t notice, this list of conditions and the following disclaimer in \r\n\t the documentation and/or other materials provided with the distribution.\r\n\t\r\n\t 3. The names of the authors may not be used to endorse or promote products\r\n\t derived from this software without specific prior written permission.\r\n\t\r\n\t THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED WARRANTIES,\r\n\t INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\r\n\t FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL JCRAFT,\r\n\t INC. OR ANY CONTRIBUTORS TO THIS SOFTWARE BE LIABLE FOR ANY DIRECT, INDIRECT,\r\n\t INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\r\n\t LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA,\r\n\t OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF\r\n\t LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\r\n\t NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,\r\n\t EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n\t */\r\n\r\n\t/*\r\n\t * This program is based on JZlib 1.0.2 ymnk, JCraft,Inc.\r\n\t * JZlib is based on zlib-1.1.3, so all credit should go authors\r\n\t * Jean-loup Gailly(jloup@gzip.org) and Mark Adler(madler@alumni.caltech.edu)\r\n\t * and contributors of zlib.\r\n\t */\r\n\r\n\t// Global\r\n\r\n\tvar MAX_BITS = 15;\r\n\tvar D_CODES = 30;\r\n\tvar BL_CODES = 19;\r\n\r\n\tvar LENGTH_CODES = 29;\r\n\tvar LITERALS = 256;\r\n\tvar L_CODES = (LITERALS + 1 + LENGTH_CODES);\r\n\tvar HEAP_SIZE = (2 * L_CODES + 1);\r\n\r\n\tvar END_BLOCK = 256;\r\n\r\n\t// Bit length codes must not exceed MAX_BL_BITS bits\r\n\tvar MAX_BL_BITS = 7;\r\n\r\n\t// repeat previous bit length 3-6 times (2 bits of repeat count)\r\n\tvar REP_3_6 = 16;\r\n\r\n\t// repeat a zero length 3-10 times (3 bits of repeat count)\r\n\tvar REPZ_3_10 = 17;\r\n\r\n\t// repeat a zero length 11-138 times (7 bits of repeat count)\r\n\tvar REPZ_11_138 = 18;\r\n\r\n\t// The lengths of the bit length codes are sent in order of decreasing\r\n\t// probability, to avoid transmitting the lengths for unused bit\r\n\t// length codes.\r\n\r\n\tvar Buf_size = 8 * 2;\r\n\r\n\t// JZlib version : \"1.0.2\"\r\n\tvar Z_DEFAULT_COMPRESSION = -1;\r\n\r\n\t// compression strategy\r\n\tvar Z_FILTERED = 1;\r\n\tvar Z_HUFFMAN_ONLY = 2;\r\n\tvar Z_DEFAULT_STRATEGY = 0;\r\n\r\n\tvar Z_NO_FLUSH = 0;\r\n\tvar Z_PARTIAL_FLUSH = 1;\r\n\tvar Z_FULL_FLUSH = 3;\r\n\tvar Z_FINISH = 4;\r\n\r\n\tvar Z_OK = 0;\r\n\tvar Z_STREAM_END = 1;\r\n\tvar Z_NEED_DICT = 2;\r\n\tvar Z_STREAM_ERROR = -2;\r\n\tvar Z_DATA_ERROR = -3;\r\n\tvar Z_BUF_ERROR = -5;\r\n\r\n\t// Tree\r\n\r\n\t// see definition of array dist_code below\r\n\tvar _dist_code = [0, 1, 2, 3, 4, 4, 5, 5, 6, 6, 6, 6, 7, 7, 7, 7, 8, 8, 8, 8, 8, 8, 8, 8, 9, 9, 9, 9, 9, 9, 9, 9, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10,\r\n\t\t10, 10, 10, 10, 10, 10, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12,\r\n\t\t12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13,\r\n\t\t13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14,\r\n\t\t14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14,\r\n\t\t14, 14, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15,\r\n\t\t15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 0, 0, 16, 17, 18, 18, 19, 19,\r\n\t\t20, 20, 20, 20, 21, 21, 21, 21, 22, 22, 22, 22, 22, 22, 22, 22, 23, 23, 23, 23, 23, 23, 23, 23, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,\r\n\t\t24, 24, 24, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26,\r\n\t\t26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27,\r\n\t\t27, 27, 27, 27, 27, 27, 27, 27, 27, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28,\r\n\t\t28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 29,\r\n\t\t29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29,\r\n\t\t29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29];\r\n\r\n\tfunction Tree() {\r\n\t\t'use strict';\r\n\t\tvar that = this;\r\n\r\n\t\t// dyn_tree; // the dynamic tree\r\n\t\t// max_code; // largest code with non zero frequency\r\n\t\t// stat_desc; // the corresponding static tree\r\n\r\n\t\t// Compute the optimal bit lengths for a tree and update the total bit\r\n\t\t// length\r\n\t\t// for the current block.\r\n\t\t// IN assertion: the fields freq and dad are set, heap[heap_max] and\r\n\t\t// above are the tree nodes sorted by increasing frequency.\r\n\t\t// OUT assertions: the field len is set to the optimal bit length, the\r\n\t\t// array bl_count contains the frequencies for each bit length.\r\n\t\t// The length opt_len is updated; static_len is also updated if stree is\r\n\t\t// not null.\r\n\t\tfunction gen_bitlen(s) {\r\n\t\t\tvar tree = that.dyn_tree;\r\n\t\t\tvar stree = that.stat_desc.static_tree;\r\n\t\t\tvar extra = that.stat_desc.extra_bits;\r\n\t\t\tvar base = that.stat_desc.extra_base;\r\n\t\t\tvar max_length = that.stat_desc.max_length;\r\n\t\t\tvar h; // heap index\r\n\t\t\tvar n, m; // iterate over the tree elements\r\n\t\t\tvar bits; // bit length\r\n\t\t\tvar xbits; // extra bits\r\n\t\t\tvar f; // frequency\r\n\t\t\tvar overflow = 0; // number of elements with bit length too large\r\n\r\n\t\t\tfor (bits = 0; bits <= MAX_BITS; bits++)\r\n\t\t\t\ts.bl_count[bits] = 0;\r\n\r\n\t\t\t// In a first pass, compute the optimal bit lengths (which may\r\n\t\t\t// overflow in the case of the bit length tree).\r\n\t\t\ttree[s.heap[s.heap_max] * 2 + 1] = 0; // root of the heap\r\n\r\n\t\t\tfor (h = s.heap_max + 1; h < HEAP_SIZE; h++) {\r\n\t\t\t\tn = s.heap[h];\r\n\t\t\t\tbits = tree[tree[n * 2 + 1] * 2 + 1] + 1;\r\n\t\t\t\tif (bits > max_length) {\r\n\t\t\t\t\tbits = max_length;\r\n\t\t\t\t\toverflow++;\r\n\t\t\t\t}\r\n\t\t\t\ttree[n * 2 + 1] = bits;\r\n\t\t\t\t// We overwrite tree[n*2+1] which is no longer needed\r\n\r\n\t\t\t\tif (n > that.max_code)\r\n\t\t\t\t\tcontinue; // not a leaf node\r\n\r\n\t\t\t\ts.bl_count[bits]++;\r\n\t\t\t\txbits = 0;\r\n\t\t\t\tif (n >= base)\r\n\t\t\t\t\txbits = extra[n - base];\r\n\t\t\t\tf = tree[n * 2];\r\n\t\t\t\ts.opt_len += f * (bits + xbits);\r\n\t\t\t\tif (stree)\r\n\t\t\t\t\ts.static_len += f * (stree[n * 2 + 1] + xbits);\r\n\t\t\t}\r\n\t\t\tif (overflow === 0)\r\n\t\t\t\treturn;\r\n\r\n\t\t\t// This happens for example on obj2 and pic of the Calgary corpus\r\n\t\t\t// Find the first bit length which could increase:\r\n\t\t\tdo {\r\n\t\t\t\tbits = max_length - 1;\r\n\t\t\t\twhile (s.bl_count[bits] === 0)\r\n\t\t\t\t\tbits--;\r\n\t\t\t\ts.bl_count[bits]--; // move one leaf down the tree\r\n\t\t\t\ts.bl_count[bits + 1] += 2; // move one overflow item as its brother\r\n\t\t\t\ts.bl_count[max_length]--;\r\n\t\t\t\t// The brother of the overflow item also moves one step up,\r\n\t\t\t\t// but this does not affect bl_count[max_length]\r\n\t\t\t\toverflow -= 2;\r\n\t\t\t} while (overflow > 0);\r\n\r\n\t\t\tfor (bits = max_length; bits !== 0; bits--) {\r\n\t\t\t\tn = s.bl_count[bits];\r\n\t\t\t\twhile (n !== 0) {\r\n\t\t\t\t\tm = s.heap[--h];\r\n\t\t\t\t\tif (m > that.max_code)\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\tif (tree[m * 2 + 1] != bits) {\r\n\t\t\t\t\t\ts.opt_len += (bits - tree[m * 2 + 1]) * tree[m * 2];\r\n\t\t\t\t\t\ttree[m * 2 + 1] = bits;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tn--;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Reverse the first len bits of a code, using straightforward code (a\r\n\t\t// faster\r\n\t\t// method would use a table)\r\n\t\t// IN assertion: 1 <= len <= 15\r\n\t\tfunction bi_reverse(code, // the value to invert\r\n\t\t\tlen // its bit length\r\n\t\t) {\r\n\t\t\tvar res = 0;\r\n\t\t\tdo {\r\n\t\t\t\tres |= code & 1;\r\n\t\t\t\tcode >>>= 1;\r\n\t\t\t\tres <<= 1;\r\n\t\t\t} while (--len > 0);\r\n\t\t\treturn res >>> 1;\r\n\t\t}\r\n\r\n\t\t// Generate the codes for a given tree and bit counts (which need not be\r\n\t\t// optimal).\r\n\t\t// IN assertion: the array bl_count contains the bit length statistics for\r\n\t\t// the given tree and the field len is set for all tree elements.\r\n\t\t// OUT assertion: the field code is set for all tree elements of non\r\n\t\t// zero code length.\r\n\t\tfunction gen_codes(tree, // the tree to decorate\r\n\t\t\tmax_code, // largest code with non zero frequency\r\n\t\t\tbl_count // number of codes at each bit length\r\n\t\t) {\r\n\t\t\tvar next_code = []; // next code value for each\r\n\t\t\t// bit length\r\n\t\t\tvar code = 0; // running code value\r\n\t\t\tvar bits; // bit index\r\n\t\t\tvar n; // code index\r\n\t\t\tvar len;\r\n\r\n\t\t\t// The distribution counts are first used to generate the code values\r\n\t\t\t// without bit reversal.\r\n\t\t\tfor (bits = 1; bits <= MAX_BITS; bits++) {\r\n\t\t\t\tnext_code[bits] = code = ((code + bl_count[bits - 1]) << 1);\r\n\t\t\t}\r\n\r\n\t\t\t// Check that the bit counts in bl_count are consistent. The last code\r\n\t\t\t// must be all ones.\r\n\t\t\t// Assert (code + bl_count[MAX_BITS]-1 == (1<<MAX_BITS)-1,\r\n\t\t\t// \"inconsistent bit counts\");\r\n\t\t\t// Tracev((stderr,\"\\ngen_codes: max_code %d \", max_code));\r\n\r\n\t\t\tfor (n = 0; n <= max_code; n++) {\r\n\t\t\t\tlen = tree[n * 2 + 1];\r\n\t\t\t\tif (len === 0)\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t// Now reverse the bits\r\n\t\t\t\ttree[n * 2] = bi_reverse(next_code[len]++, len);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Construct one Huffman tree and assigns the code bit strings and lengths.\r\n\t\t// Update the total bit length for the current block.\r\n\t\t// IN assertion: the field freq is set for all tree elements.\r\n\t\t// OUT assertions: the fields len and code are set to the optimal bit length\r\n\t\t// and corresponding code. The length opt_len is updated; static_len is\r\n\t\t// also updated if stree is not null. The field max_code is set.\r\n\t\tthat.build_tree = function (s) {\r\n\t\t\tvar tree = that.dyn_tree;\r\n\t\t\tvar stree = that.stat_desc.static_tree;\r\n\t\t\tvar elems = that.stat_desc.elems;\r\n\t\t\tvar n, m; // iterate over heap elements\r\n\t\t\tvar max_code = -1; // largest code with non zero frequency\r\n\t\t\tvar node; // new node being created\r\n\r\n\t\t\t// Construct the initial heap, with least frequent element in\r\n\t\t\t// heap[1]. The sons of heap[n] are heap[2*n] and heap[2*n+1].\r\n\t\t\t// heap[0] is not used.\r\n\t\t\ts.heap_len = 0;\r\n\t\t\ts.heap_max = HEAP_SIZE;\r\n\r\n\t\t\tfor (n = 0; n < elems; n++) {\r\n\t\t\t\tif (tree[n * 2] !== 0) {\r\n\t\t\t\t\ts.heap[++s.heap_len] = max_code = n;\r\n\t\t\t\t\ts.depth[n] = 0;\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttree[n * 2 + 1] = 0;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// The pkzip format requires that at least one distance code exists,\r\n\t\t\t// and that at least one bit should be sent even if there is only one\r\n\t\t\t// possible code. So to avoid special checks later on we force at least\r\n\t\t\t// two codes of non zero frequency.\r\n\t\t\twhile (s.heap_len < 2) {\r\n\t\t\t\tnode = s.heap[++s.heap_len] = max_code < 2 ? ++max_code : 0;\r\n\t\t\t\ttree[node * 2] = 1;\r\n\t\t\t\ts.depth[node] = 0;\r\n\t\t\t\ts.opt_len--;\r\n\t\t\t\tif (stree)\r\n\t\t\t\t\ts.static_len -= stree[node * 2 + 1];\r\n\t\t\t\t// node is 0 or 1 so it does not have extra bits\r\n\t\t\t}\r\n\t\t\tthat.max_code = max_code;\r\n\r\n\t\t\t// The elements heap[heap_len/2+1 .. heap_len] are leaves of the tree,\r\n\t\t\t// establish sub-heaps of increasing lengths:\r\n\r\n\t\t\tfor (n = Math.floor(s.heap_len / 2); n >= 1; n--)\r\n\t\t\t\ts.pqdownheap(tree, n);\r\n\r\n\t\t\t// Construct the Huffman tree by repeatedly combining the least two\r\n\t\t\t// frequent nodes.\r\n\r\n\t\t\tnode = elems; // next internal node of the tree\r\n\t\t\tdo {\r\n\t\t\t\t// n = node of least frequency\r\n\t\t\t\tn = s.heap[1];\r\n\t\t\t\ts.heap[1] = s.heap[s.heap_len--];\r\n\t\t\t\ts.pqdownheap(tree, 1);\r\n\t\t\t\tm = s.heap[1]; // m = node of next least frequency\r\n\r\n\t\t\t\ts.heap[--s.heap_max] = n; // keep the nodes sorted by frequency\r\n\t\t\t\ts.heap[--s.heap_max] = m;\r\n\r\n\t\t\t\t// Create a new node father of n and m\r\n\t\t\t\ttree[node * 2] = (tree[n * 2] + tree[m * 2]);\r\n\t\t\t\ts.depth[node] = Math.max(s.depth[n], s.depth[m]) + 1;\r\n\t\t\t\ttree[n * 2 + 1] = tree[m * 2 + 1] = node;\r\n\r\n\t\t\t\t// and insert the new node in the heap\r\n\t\t\t\ts.heap[1] = node++;\r\n\t\t\t\ts.pqdownheap(tree, 1);\r\n\t\t\t} while (s.heap_len >= 2);\r\n\r\n\t\t\ts.heap[--s.heap_max] = s.heap[1];\r\n\r\n\t\t\t// At this point, the fields freq and dad are set. We can now\r\n\t\t\t// generate the bit lengths.\r\n\r\n\t\t\tgen_bitlen(s);\r\n\r\n\t\t\t// The field len is now set, we can generate the bit codes\r\n\t\t\tgen_codes(tree, that.max_code, s.bl_count);\r\n\t\t};\r\n\r\n\t}\r\n\r\n\tTree._length_code = [0, 1, 2, 3, 4, 5, 6, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 12, 12, 13, 13, 13, 13, 14, 14, 14, 14, 15, 15, 15, 15, 16, 16, 16, 16,\r\n\t\t16, 16, 16, 16, 17, 17, 17, 17, 17, 17, 17, 17, 18, 18, 18, 18, 18, 18, 18, 18, 19, 19, 19, 19, 19, 19, 19, 19, 20, 20, 20, 20, 20, 20, 20, 20, 20,\r\n\t\t20, 20, 20, 20, 20, 20, 20, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22,\r\n\t\t22, 22, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,\r\n\t\t24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25,\r\n\t\t25, 25, 25, 25, 25, 25, 25, 25, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26,\r\n\t\t26, 26, 26, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 28];\r\n\r\n\tTree.base_length = [0, 1, 2, 3, 4, 5, 6, 7, 8, 10, 12, 14, 16, 20, 24, 28, 32, 40, 48, 56, 64, 80, 96, 112, 128, 160, 192, 224, 0];\r\n\r\n\tTree.base_dist = [0, 1, 2, 3, 4, 6, 8, 12, 16, 24, 32, 48, 64, 96, 128, 192, 256, 384, 512, 768, 1024, 1536, 2048, 3072, 4096, 6144, 8192, 12288, 16384,\r\n\t\t24576];\r\n\r\n\t// Mapping from a distance to a distance code. dist is the distance - 1 and\r\n\t// must not have side effects. _dist_code[256] and _dist_code[257] are never\r\n\t// used.\r\n\tTree.d_code = function (dist) {\r\n\t\treturn ((dist) < 256 ? _dist_code[dist] : _dist_code[256 + ((dist) >>> 7)]);\r\n\t};\r\n\r\n\t// extra bits for each length code\r\n\tTree.extra_lbits = [0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0];\r\n\r\n\t// extra bits for each distance code\r\n\tTree.extra_dbits = [0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13];\r\n\r\n\t// extra bits for each bit length code\r\n\tTree.extra_blbits = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 3, 7];\r\n\r\n\tTree.bl_order = [16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15];\r\n\r\n\t// StaticTree\r\n\r\n\tfunction StaticTree(static_tree, extra_bits, extra_base, elems, max_length) {\r\n\t\tvar that = this;\r\n\t\tthat.static_tree = static_tree;\r\n\t\tthat.extra_bits = extra_bits;\r\n\t\tthat.extra_base = extra_base;\r\n\t\tthat.elems = elems;\r\n\t\tthat.max_length = max_length;\r\n\t}\r\n\r\n\tStaticTree.static_ltree = [12, 8, 140, 8, 76, 8, 204, 8, 44, 8, 172, 8, 108, 8, 236, 8, 28, 8, 156, 8, 92, 8, 220, 8, 60, 8, 188, 8, 124, 8, 252, 8, 2, 8,\r\n\t\t130, 8, 66, 8, 194, 8, 34, 8, 162, 8, 98, 8, 226, 8, 18, 8, 146, 8, 82, 8, 210, 8, 50, 8, 178, 8, 114, 8, 242, 8, 10, 8, 138, 8, 74, 8, 202, 8, 42,\r\n\t\t8, 170, 8, 106, 8, 234, 8, 26, 8, 154, 8, 90, 8, 218, 8, 58, 8, 186, 8, 122, 8, 250, 8, 6, 8, 134, 8, 70, 8, 198, 8, 38, 8, 166, 8, 102, 8, 230, 8,\r\n\t\t22, 8, 150, 8, 86, 8, 214, 8, 54, 8, 182, 8, 118, 8, 246, 8, 14, 8, 142, 8, 78, 8, 206, 8, 46, 8, 174, 8, 110, 8, 238, 8, 30, 8, 158, 8, 94, 8,\r\n\t\t222, 8, 62, 8, 190, 8, 126, 8, 254, 8, 1, 8, 129, 8, 65, 8, 193, 8, 33, 8, 161, 8, 97, 8, 225, 8, 17, 8, 145, 8, 81, 8, 209, 8, 49, 8, 177, 8, 113,\r\n\t\t8, 241, 8, 9, 8, 137, 8, 73, 8, 201, 8, 41, 8, 169, 8, 105, 8, 233, 8, 25, 8, 153, 8, 89, 8, 217, 8, 57, 8, 185, 8, 121, 8, 249, 8, 5, 8, 133, 8,\r\n\t\t69, 8, 197, 8, 37, 8, 165, 8, 101, 8, 229, 8, 21, 8, 149, 8, 85, 8, 213, 8, 53, 8, 181, 8, 117, 8, 245, 8, 13, 8, 141, 8, 77, 8, 205, 8, 45, 8,\r\n\t\t173, 8, 109, 8, 237, 8, 29, 8, 157, 8, 93, 8, 221, 8, 61, 8, 189, 8, 125, 8, 253, 8, 19, 9, 275, 9, 147, 9, 403, 9, 83, 9, 339, 9, 211, 9, 467, 9,\r\n\t\t51, 9, 307, 9, 179, 9, 435, 9, 115, 9, 371, 9, 243, 9, 499, 9, 11, 9, 267, 9, 139, 9, 395, 9, 75, 9, 331, 9, 203, 9, 459, 9, 43, 9, 299, 9, 171, 9,\r\n\t\t427, 9, 107, 9, 363, 9, 235, 9, 491, 9, 27, 9, 283, 9, 155, 9, 411, 9, 91, 9, 347, 9, 219, 9, 475, 9, 59, 9, 315, 9, 187, 9, 443, 9, 123, 9, 379,\r\n\t\t9, 251, 9, 507, 9, 7, 9, 263, 9, 135, 9, 391, 9, 71, 9, 327, 9, 199, 9, 455, 9, 39, 9, 295, 9, 167, 9, 423, 9, 103, 9, 359, 9, 231, 9, 487, 9, 23,\r\n\t\t9, 279, 9, 151, 9, 407, 9, 87, 9, 343, 9, 215, 9, 471, 9, 55, 9, 311, 9, 183, 9, 439, 9, 119, 9, 375, 9, 247, 9, 503, 9, 15, 9, 271, 9, 143, 9,\r\n\t\t399, 9, 79, 9, 335, 9, 207, 9, 463, 9, 47, 9, 303, 9, 175, 9, 431, 9, 111, 9, 367, 9, 239, 9, 495, 9, 31, 9, 287, 9, 159, 9, 415, 9, 95, 9, 351, 9,\r\n\t\t223, 9, 479, 9, 63, 9, 319, 9, 191, 9, 447, 9, 127, 9, 383, 9, 255, 9, 511, 9, 0, 7, 64, 7, 32, 7, 96, 7, 16, 7, 80, 7, 48, 7, 112, 7, 8, 7, 72, 7,\r\n\t\t40, 7, 104, 7, 24, 7, 88, 7, 56, 7, 120, 7, 4, 7, 68, 7, 36, 7, 100, 7, 20, 7, 84, 7, 52, 7, 116, 7, 3, 8, 131, 8, 67, 8, 195, 8, 35, 8, 163, 8,\r\n\t\t99, 8, 227, 8];\r\n\r\n\tStaticTree.static_dtree = [0, 5, 16, 5, 8, 5, 24, 5, 4, 5, 20, 5, 12, 5, 28, 5, 2, 5, 18, 5, 10, 5, 26, 5, 6, 5, 22, 5, 14, 5, 30, 5, 1, 5, 17, 5, 9, 5,\r\n\t\t25, 5, 5, 5, 21, 5, 13, 5, 29, 5, 3, 5, 19, 5, 11, 5, 27, 5, 7, 5, 23, 5];\r\n\r\n\tStaticTree.static_l_desc = new StaticTree(StaticTree.static_ltree, Tree.extra_lbits, LITERALS + 1, L_CODES, MAX_BITS);\r\n\r\n\tStaticTree.static_d_desc = new StaticTree(StaticTree.static_dtree, Tree.extra_dbits, 0, D_CODES, MAX_BITS);\r\n\r\n\tStaticTree.static_bl_desc = new StaticTree(null, Tree.extra_blbits, 0, BL_CODES, MAX_BL_BITS);\r\n\r\n\t// Deflate\r\n\r\n\tvar MAX_MEM_LEVEL = 9;\r\n\tvar DEF_MEM_LEVEL = 8;\r\n\r\n\tfunction Config(good_length, max_lazy, nice_length, max_chain, func) {\r\n\t\tvar that = this;\r\n\t\tthat.good_length = good_length;\r\n\t\tthat.max_lazy = max_lazy;\r\n\t\tthat.nice_length = nice_length;\r\n\t\tthat.max_chain = max_chain;\r\n\t\tthat.func = func;\r\n\t}\r\n\r\n\tvar STORED = 0;\r\n\tvar FAST = 1;\r\n\tvar SLOW = 2;\r\n\tvar config_table = [new Config(0, 0, 0, 0, STORED), new Config(4, 4, 8, 4, FAST), new Config(4, 5, 16, 8, FAST), new Config(4, 6, 32, 32, FAST),\r\n\tnew Config(4, 4, 16, 16, SLOW), new Config(8, 16, 32, 32, SLOW), new Config(8, 16, 128, 128, SLOW), new Config(8, 32, 128, 256, SLOW),\r\n\tnew Config(32, 128, 258, 1024, SLOW), new Config(32, 258, 258, 4096, SLOW)];\r\n\r\n\tvar z_errmsg = [\"need dictionary\", // Z_NEED_DICT\r\n\t\t// 2\r\n\t\t\"stream end\", // Z_STREAM_END 1\r\n\t\t\"\", // Z_OK 0\r\n\t\t\"\", // Z_ERRNO (-1)\r\n\t\t\"stream error\", // Z_STREAM_ERROR (-2)\r\n\t\t\"data error\", // Z_DATA_ERROR (-3)\r\n\t\t\"\", // Z_MEM_ERROR (-4)\r\n\t\t\"buffer error\", // Z_BUF_ERROR (-5)\r\n\t\t\"\",// Z_VERSION_ERROR (-6)\r\n\t\t\"\"];\r\n\r\n\t// block not completed, need more input or more output\r\n\tvar NeedMore = 0;\r\n\r\n\t// block flush performed\r\n\tvar BlockDone = 1;\r\n\r\n\t// finish started, need only more output at next deflate\r\n\tvar FinishStarted = 2;\r\n\r\n\t// finish done, accept no more input or output\r\n\tvar FinishDone = 3;\r\n\r\n\t// preset dictionary flag in zlib header\r\n\tvar PRESET_DICT = 0x20;\r\n\r\n\tvar INIT_STATE = 42;\r\n\tvar BUSY_STATE = 113;\r\n\tvar FINISH_STATE = 666;\r\n\r\n\t// The deflate compression method\r\n\tvar Z_DEFLATED = 8;\r\n\r\n\tvar STORED_BLOCK = 0;\r\n\tvar STATIC_TREES = 1;\r\n\tvar DYN_TREES = 2;\r\n\r\n\tvar MIN_MATCH = 3;\r\n\tvar MAX_MATCH = 258;\r\n\tvar MIN_LOOKAHEAD = (MAX_MATCH + MIN_MATCH + 1);\r\n\r\n\tfunction smaller(tree, n, m, depth) {\r\n\t\tvar tn2 = tree[n * 2];\r\n\t\tvar tm2 = tree[m * 2];\r\n\t\treturn (tn2 < tm2 || (tn2 == tm2 && depth[n] <= depth[m]));\r\n\t}\r\n\r\n\tfunction Deflate() {\r\n\r\n\t\tvar that = this;\r\n\t\tvar strm; // pointer back to this zlib stream\r\n\t\tvar status; // as the name implies\r\n\t\t// pending_buf; // output still pending\r\n\t\tvar pending_buf_size; // size of pending_buf\r\n\t\t// pending_out; // next pending byte to output to the stream\r\n\t\t// pending; // nb of bytes in the pending buffer\r\n\t\tvar method; // STORED (for zip only) or DEFLATED\r\n\t\tvar last_flush; // value of flush param for previous deflate call\r\n\r\n\t\tvar w_size; // LZ77 window size (32K by default)\r\n\t\tvar w_bits; // log2(w_size) (8..16)\r\n\t\tvar w_mask; // w_size - 1\r\n\r\n\t\tvar window;\r\n\t\t// Sliding window. Input bytes are read into the second half of the window,\r\n\t\t// and move to the first half later to keep a dictionary of at least wSize\r\n\t\t// bytes. With this organization, matches are limited to a distance of\r\n\t\t// wSize-MAX_MATCH bytes, but this ensures that IO is always\r\n\t\t// performed with a length multiple of the block size. Also, it limits\r\n\t\t// the window size to 64K, which is quite useful on MSDOS.\r\n\t\t// To do: use the user input buffer as sliding window.\r\n\r\n\t\tvar window_size;\r\n\t\t// Actual size of window: 2*wSize, except when the user input buffer\r\n\t\t// is directly used as sliding window.\r\n\r\n\t\tvar prev;\r\n\t\t// Link to older string with same hash index. To limit the size of this\r\n\t\t// array to 64K, this link is maintained only for the last 32K strings.\r\n\t\t// An index in this array is thus a window index modulo 32K.\r\n\r\n\t\tvar head; // Heads of the hash chains or NIL.\r\n\r\n\t\tvar ins_h; // hash index of string to be inserted\r\n\t\tvar hash_size; // number of elements in hash table\r\n\t\tvar hash_bits; // log2(hash_size)\r\n\t\tvar hash_mask; // hash_size-1\r\n\r\n\t\t// Number of bits by which ins_h must be shifted at each input\r\n\t\t// step. It must be such that after MIN_MATCH steps, the oldest\r\n\t\t// byte no longer takes part in the hash key, that is:\r\n\t\t// hash_shift * MIN_MATCH >= hash_bits\r\n\t\tvar hash_shift;\r\n\r\n\t\t// Window position at the beginning of the current output block. Gets\r\n\t\t// negative when the window is moved backwards.\r\n\r\n\t\tvar block_start;\r\n\r\n\t\tvar match_length; // length of best match\r\n\t\tvar prev_match; // previous match\r\n\t\tvar match_available; // set if previous match exists\r\n\t\tvar strstart; // start of string to insert\r\n\t\tvar match_start; // start of matching string\r\n\t\tvar lookahead; // number of valid bytes ahead in window\r\n\r\n\t\t// Length of the best match at previous step. Matches not greater than this\r\n\t\t// are discarded. This is used in the lazy match evaluation.\r\n\t\tvar prev_length;\r\n\r\n\t\t// To speed up deflation, hash chains are never searched beyond this\r\n\t\t// length. A higher limit improves compression ratio but degrades the speed.\r\n\t\tvar max_chain_length;\r\n\r\n\t\t// Attempt to find a better match only when the current match is strictly\r\n\t\t// smaller than this value. This mechanism is used only for compression\r\n\t\t// levels >= 4.\r\n\t\tvar max_lazy_match;\r\n\r\n\t\t// Insert new strings in the hash table only if the match length is not\r\n\t\t// greater than this length. This saves time but degrades compression.\r\n\t\t// max_insert_length is used only for compression levels <= 3.\r\n\r\n\t\tvar level; // compression level (1..9)\r\n\t\tvar strategy; // favor or force Huffman coding\r\n\r\n\t\t// Use a faster search when the previous match is longer than this\r\n\t\tvar good_match;\r\n\r\n\t\t// Stop searching when current match exceeds this\r\n\t\tvar nice_match;\r\n\r\n\t\tvar dyn_ltree; // literal and length tree\r\n\t\tvar dyn_dtree; // distance tree\r\n\t\tvar bl_tree; // Huffman tree for bit lengths\r\n\r\n\t\tvar l_desc = new Tree(); // desc for literal tree\r\n\t\tvar d_desc = new Tree(); // desc for distance tree\r\n\t\tvar bl_desc = new Tree(); // desc for bit length tree\r\n\r\n\t\t// that.heap_len; // number of elements in the heap\r\n\t\t// that.heap_max; // element of largest frequency\r\n\t\t// The sons of heap[n] are heap[2*n] and heap[2*n+1]. heap[0] is not used.\r\n\t\t// The same heap array is used to build all trees.\r\n\r\n\t\t// Depth of each subtree used as tie breaker for trees of equal frequency\r\n\t\tthat.depth = [];\r\n\r\n\t\tvar l_buf; // index for literals or lengths */\r\n\r\n\t\t// Size of match buffer for literals/lengths. There are 4 reasons for\r\n\t\t// limiting lit_bufsize to 64K:\r\n\t\t// - frequencies can be kept in 16 bit counters\r\n\t\t// - if compression is not successful for the first block, all input\r\n\t\t// data is still in the window so we can still emit a stored block even\r\n\t\t// when input comes from standard input. (This can also be done for\r\n\t\t// all blocks if lit_bufsize is not greater than 32K.)\r\n\t\t// - if compression is not successful for a file smaller than 64K, we can\r\n\t\t// even emit a stored file instead of a stored block (saving 5 bytes).\r\n\t\t// This is applicable only for zip (not gzip or zlib).\r\n\t\t// - creating new Huffman trees less frequently may not provide fast\r\n\t\t// adaptation to changes in the input data statistics. (Take for\r\n\t\t// example a binary file with poorly compressible code followed by\r\n\t\t// a highly compressible string table.) Smaller buffer sizes give\r\n\t\t// fast adaptation but have of course the overhead of transmitting\r\n\t\t// trees more frequently.\r\n\t\t// - I can't count above 4\r\n\t\tvar lit_bufsize;\r\n\r\n\t\tvar last_lit; // running index in l_buf\r\n\r\n\t\t// Buffer for distances. To simplify the code, d_buf and l_buf have\r\n\t\t// the same number of elements. To use different lengths, an extra flag\r\n\t\t// array would be necessary.\r\n\r\n\t\tvar d_buf; // index of pendig_buf\r\n\r\n\t\t// that.opt_len; // bit length of current block with optimal trees\r\n\t\t// that.static_len; // bit length of current block with static trees\r\n\t\tvar matches; // number of string matches in current block\r\n\t\tvar last_eob_len; // bit length of EOB code for last block\r\n\r\n\t\t// Output buffer. bits are inserted starting at the bottom (least\r\n\t\t// significant bits).\r\n\t\tvar bi_buf;\r\n\r\n\t\t// Number of valid bits in bi_buf. All bits above the last valid bit\r\n\t\t// are always zero.\r\n\t\tvar bi_valid;\r\n\r\n\t\t// number of codes at each bit length for an optimal tree\r\n\t\tthat.bl_count = [];\r\n\r\n\t\t// heap used to build the Huffman trees\r\n\t\tthat.heap = [];\r\n\r\n\t\tdyn_ltree = [];\r\n\t\tdyn_dtree = [];\r\n\t\tbl_tree = [];\r\n\r\n\t\tfunction lm_init() {\r\n\t\t\tvar i;\r\n\t\t\twindow_size = 2 * w_size;\r\n\r\n\t\t\thead[hash_size - 1] = 0;\r\n\t\t\tfor (i = 0; i < hash_size - 1; i++) {\r\n\t\t\t\thead[i] = 0;\r\n\t\t\t}\r\n\r\n\t\t\t// Set the default configuration parameters:\r\n\t\t\tmax_lazy_match = config_table[level].max_lazy;\r\n\t\t\tgood_match = config_table[level].good_length;\r\n\t\t\tnice_match = config_table[level].nice_length;\r\n\t\t\tmax_chain_length = config_table[level].max_chain;\r\n\r\n\t\t\tstrstart = 0;\r\n\t\t\tblock_start = 0;\r\n\t\t\tlookahead = 0;\r\n\t\t\tmatch_length = prev_length = MIN_MATCH - 1;\r\n\t\t\tmatch_available = 0;\r\n\t\t\tins_h = 0;\r\n\t\t}\r\n\r\n\t\tfunction init_block() {\r\n\t\t\tvar i;\r\n\t\t\t// Initialize the trees.\r\n\t\t\tfor (i = 0; i < L_CODES; i++)\r\n\t\t\t\tdyn_ltree[i * 2] = 0;\r\n\t\t\tfor (i = 0; i < D_CODES; i++)\r\n\t\t\t\tdyn_dtree[i * 2] = 0;\r\n\t\t\tfor (i = 0; i < BL_CODES; i++)\r\n\t\t\t\tbl_tree[i * 2] = 0;\r\n\r\n\t\t\tdyn_ltree[END_BLOCK * 2] = 1;\r\n\t\t\tthat.opt_len = that.static_len = 0;\r\n\t\t\tlast_lit = matches = 0;\r\n\t\t}\r\n\r\n\t\t// Initialize the tree data structures for a new zlib stream.\r\n\t\tfunction tr_init() {\r\n\r\n\t\t\tl_desc.dyn_tree = dyn_ltree;\r\n\t\t\tl_desc.stat_desc = StaticTree.static_l_desc;\r\n\r\n\t\t\td_desc.dyn_tree = dyn_dtree;\r\n\t\t\td_desc.stat_desc = StaticTree.static_d_desc;\r\n\r\n\t\t\tbl_desc.dyn_tree = bl_tree;\r\n\t\t\tbl_desc.stat_desc = StaticTree.static_bl_desc;\r\n\r\n\t\t\tbi_buf = 0;\r\n\t\t\tbi_valid = 0;\r\n\t\t\tlast_eob_len = 8; // enough lookahead for inflate\r\n\r\n\t\t\t// Initialize the first block of the first file:\r\n\t\t\tinit_block();\r\n\t\t}\r\n\r\n\t\t// Restore the heap property by moving down the tree starting at node k,\r\n\t\t// exchanging a node with the smallest of its two sons if necessary,\r\n\t\t// stopping\r\n\t\t// when the heap property is re-established (each father smaller than its\r\n\t\t// two sons).\r\n\t\tthat.pqdownheap = function (tree, // the tree to restore\r\n\t\t\tk // node to move down\r\n\t\t) {\r\n\t\t\tvar heap = that.heap;\r\n\t\t\tvar v = heap[k];\r\n\t\t\tvar j = k << 1; // left son of k\r\n\t\t\twhile (j <= that.heap_len) {\r\n\t\t\t\t// Set j to the smallest of the two sons:\r\n\t\t\t\tif (j < that.heap_len && smaller(tree, heap[j + 1], heap[j], that.depth)) {\r\n\t\t\t\t\tj++;\r\n\t\t\t\t}\r\n\t\t\t\t// Exit if v is smaller than both sons\r\n\t\t\t\tif (smaller(tree, v, heap[j], that.depth))\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t// Exchange v with the smallest son\r\n\t\t\t\theap[k] = heap[j];\r\n\t\t\t\tk = j;\r\n\t\t\t\t// And continue down the tree, setting j to the left son of k\r\n\t\t\t\tj <<= 1;\r\n\t\t\t}\r\n\t\t\theap[k] = v;\r\n\t\t};\r\n\r\n\t\t// Scan a literal or distance tree to determine the frequencies of the codes\r\n\t\t// in the bit length tree.\r\n\t\tfunction scan_tree(tree,// the tree to be scanned\r\n\t\t\tmax_code // and its largest code of non zero frequency\r\n\t\t) {\r\n\t\t\tvar n; // iterates over all tree elements\r\n\t\t\tvar prevlen = -1; // last emitted length\r\n\t\t\tvar curlen; // length of current code\r\n\t\t\tvar nextlen = tree[0 * 2 + 1]; // length of next code\r\n\t\t\tvar count = 0; // repeat count of the current code\r\n\t\t\tvar max_count = 7; // max repeat count\r\n\t\t\tvar min_count = 4; // min repeat count\r\n\r\n\t\t\tif (nextlen === 0) {\r\n\t\t\t\tmax_count = 138;\r\n\t\t\t\tmin_count = 3;\r\n\t\t\t}\r\n\t\t\ttree[(max_code + 1) * 2 + 1] = 0xffff; // guard\r\n\r\n\t\t\tfor (n = 0; n <= max_code; n++) {\r\n\t\t\t\tcurlen = nextlen;\r\n\t\t\t\tnextlen = tree[(n + 1) * 2 + 1];\r\n\t\t\t\tif (++count < max_count && curlen == nextlen) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t} else if (count < min_count) {\r\n\t\t\t\t\tbl_tree[curlen * 2] += count;\r\n\t\t\t\t} else if (curlen !== 0) {\r\n\t\t\t\t\tif (curlen != prevlen)\r\n\t\t\t\t\t\tbl_tree[curlen * 2]++;\r\n\t\t\t\t\tbl_tree[REP_3_6 * 2]++;\r\n\t\t\t\t} else if (count <= 10) {\r\n\t\t\t\t\tbl_tree[REPZ_3_10 * 2]++;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tbl_tree[REPZ_11_138 * 2]++;\r\n\t\t\t\t}\r\n\t\t\t\tcount = 0;\r\n\t\t\t\tprevlen = curlen;\r\n\t\t\t\tif (nextlen === 0) {\r\n\t\t\t\t\tmax_count = 138;\r\n\t\t\t\t\tmin_count = 3;\r\n\t\t\t\t} else if (curlen == nextlen) {\r\n\t\t\t\t\tmax_count = 6;\r\n\t\t\t\t\tmin_count = 3;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tmax_count = 7;\r\n\t\t\t\t\tmin_count = 4;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Construct the Huffman tree for the bit lengths and return the index in\r\n\t\t// bl_order of the last bit length code to send.\r\n\t\tfunction build_bl_tree() {\r\n\t\t\tvar max_blindex; // index of last bit length code of non zero freq\r\n\r\n\t\t\t// Determine the bit length frequencies for literal and distance trees\r\n\t\t\tscan_tree(dyn_ltree, l_desc.max_code);\r\n\t\t\tscan_tree(dyn_dtree, d_desc.max_code);\r\n\r\n\t\t\t// Build the bit length tree:\r\n\t\t\tbl_desc.build_tree(that);\r\n\t\t\t// opt_len now includes the length of the tree representations, except\r\n\t\t\t// the lengths of the bit lengths codes and the 5+5+4 bits for the\r\n\t\t\t// counts.\r\n\r\n\t\t\t// Determine the number of bit length codes to send. The pkzip format\r\n\t\t\t// requires that at least 4 bit length codes be sent. (appnote.txt says\r\n\t\t\t// 3 but the actual value used is 4.)\r\n\t\t\tfor (max_blindex = BL_CODES - 1; max_blindex >= 3; max_blindex--) {\r\n\t\t\t\tif (bl_tree[Tree.bl_order[max_blindex] * 2 + 1] !== 0)\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\t// Update opt_len to include the bit length tree and counts\r\n\t\t\tthat.opt_len += 3 * (max_blindex + 1) + 5 + 5 + 4;\r\n\r\n\t\t\treturn max_blindex;\r\n\t\t}\r\n\r\n\t\t// Output a byte on the stream.\r\n\t\t// IN assertion: there is enough room in pending_buf.\r\n\t\tfunction put_byte(p) {\r\n\t\t\tthat.pending_buf[that.pending++] = p;\r\n\t\t}\r\n\r\n\t\tfunction put_short(w) {\r\n\t\t\tput_byte(w & 0xff);\r\n\t\t\tput_byte((w >>> 8) & 0xff);\r\n\t\t}\r\n\r\n\t\tfunction putShortMSB(b) {\r\n\t\t\tput_byte((b >> 8) & 0xff);\r\n\t\t\tput_byte((b & 0xff) & 0xff);\r\n\t\t}\r\n\r\n\t\tfunction send_bits(value, length) {\r\n\t\t\tvar val, len = length;\r\n\t\t\tif (bi_valid > Buf_size - len) {\r\n\t\t\t\tval = value;\r\n\t\t\t\t// bi_buf |= (val << bi_valid);\r\n\t\t\t\tbi_buf |= ((val << bi_valid) & 0xffff);\r\n\t\t\t\tput_short(bi_buf);\r\n\t\t\t\tbi_buf = val >>> (Buf_size - bi_valid);\r\n\t\t\t\tbi_valid += len - Buf_size;\r\n\t\t\t} else {\r\n\t\t\t\t// bi_buf |= (value) << bi_valid;\r\n\t\t\t\tbi_buf |= (((value) << bi_valid) & 0xffff);\r\n\t\t\t\tbi_valid += len;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction send_code(c, tree) {\r\n\t\t\tvar c2 = c * 2;\r\n\t\t\tsend_bits(tree[c2] & 0xffff, tree[c2 + 1] & 0xffff);\r\n\t\t}\r\n\r\n\t\t// Send a literal or distance tree in compressed form, using the codes in\r\n\t\t// bl_tree.\r\n\t\tfunction send_tree(tree,// the tree to be sent\r\n\t\t\tmax_code // and its largest code of non zero frequency\r\n\t\t) {\r\n\t\t\tvar n; // iterates over all tree elements\r\n\t\t\tvar prevlen = -1; // last emitted length\r\n\t\t\tvar curlen; // length of current code\r\n\t\t\tvar nextlen = tree[0 * 2 + 1]; // length of next code\r\n\t\t\tvar count = 0; // repeat count of the current code\r\n\t\t\tvar max_count = 7; // max repeat count\r\n\t\t\tvar min_count = 4; // min repeat count\r\n\r\n\t\t\tif (nextlen === 0) {\r\n\t\t\t\tmax_count = 138;\r\n\t\t\t\tmin_count = 3;\r\n\t\t\t}\r\n\r\n\t\t\tfor (n = 0; n <= max_code; n++) {\r\n\t\t\t\tcurlen = nextlen;\r\n\t\t\t\tnextlen = tree[(n + 1) * 2 + 1];\r\n\t\t\t\tif (++count < max_count && curlen == nextlen) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t} else if (count < min_count) {\r\n\t\t\t\t\tdo {\r\n\t\t\t\t\t\tsend_code(curlen, bl_tree);\r\n\t\t\t\t\t} while (--count !== 0);\r\n\t\t\t\t} else if (curlen !== 0) {\r\n\t\t\t\t\tif (curlen != prevlen) {\r\n\t\t\t\t\t\tsend_code(curlen, bl_tree);\r\n\t\t\t\t\t\tcount--;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tsend_code(REP_3_6, bl_tree);\r\n\t\t\t\t\tsend_bits(count - 3, 2);\r\n\t\t\t\t} else if (count <= 10) {\r\n\t\t\t\t\tsend_code(REPZ_3_10, bl_tree);\r\n\t\t\t\t\tsend_bits(count - 3, 3);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsend_code(REPZ_11_138, bl_tree);\r\n\t\t\t\t\tsend_bits(count - 11, 7);\r\n\t\t\t\t}\r\n\t\t\t\tcount = 0;\r\n\t\t\t\tprevlen = curlen;\r\n\t\t\t\tif (nextlen === 0) {\r\n\t\t\t\t\tmax_count = 138;\r\n\t\t\t\t\tmin_count = 3;\r\n\t\t\t\t} else if (curlen == nextlen) {\r\n\t\t\t\t\tmax_count = 6;\r\n\t\t\t\t\tmin_count = 3;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tmax_count = 7;\r\n\t\t\t\t\tmin_count = 4;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Send the header for a block using dynamic Huffman trees: the counts, the\r\n\t\t// lengths of the bit length codes, the literal tree and the distance tree.\r\n\t\t// IN assertion: lcodes >= 257, dcodes >= 1, blcodes >= 4.\r\n\t\tfunction send_all_trees(lcodes, dcodes, blcodes) {\r\n\t\t\tvar rank; // index in bl_order\r\n\r\n\t\t\tsend_bits(lcodes - 257, 5); // not +255 as stated in appnote.txt\r\n\t\t\tsend_bits(dcodes - 1, 5);\r\n\t\t\tsend_bits(blcodes - 4, 4); // not -3 as stated in appnote.txt\r\n\t\t\tfor (rank = 0; rank < blcodes; rank++) {\r\n\t\t\t\tsend_bits(bl_tree[Tree.bl_order[rank] * 2 + 1], 3);\r\n\t\t\t}\r\n\t\t\tsend_tree(dyn_ltree, lcodes - 1); // literal tree\r\n\t\t\tsend_tree(dyn_dtree, dcodes - 1); // distance tree\r\n\t\t}\r\n\r\n\t\t// Flush the bit buffer, keeping at most 7 bits in it.\r\n\t\tfunction bi_flush() {\r\n\t\t\tif (bi_valid == 16) {\r\n\t\t\t\tput_short(bi_buf);\r\n\t\t\t\tbi_buf = 0;\r\n\t\t\t\tbi_valid = 0;\r\n\t\t\t} else if (bi_valid >= 8) {\r\n\t\t\t\tput_byte(bi_buf & 0xff);\r\n\t\t\t\tbi_buf >>>= 8;\r\n\t\t\t\tbi_valid -= 8;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Send one empty static block to give enough lookahead for inflate.\r\n\t\t// This takes 10 bits, of which 7 may remain in the bit buffer.\r\n\t\t// The current inflate code requires 9 bits of lookahead. If the\r\n\t\t// last two codes for the previous block (real code plus EOB) were coded\r\n\t\t// on 5 bits or less, inflate may have only 5+3 bits of lookahead to decode\r\n\t\t// the last real code. In this case we send two empty static blocks instead\r\n\t\t// of one. (There are no problems if the previous block is stored or fixed.)\r\n\t\t// To simplify the code, we assume the worst case of last real code encoded\r\n\t\t// on one bit only.\r\n\t\tfunction _tr_align() {\r\n\t\t\tsend_bits(STATIC_TREES << 1, 3);\r\n\t\t\tsend_code(END_BLOCK, StaticTree.static_ltree);\r\n\r\n\t\t\tbi_flush();\r\n\r\n\t\t\t// Of the 10 bits for the empty block, we have already sent\r\n\t\t\t// (10 - bi_valid) bits. The lookahead for the last real code (before\r\n\t\t\t// the EOB of the previous block) was thus at least one plus the length\r\n\t\t\t// of the EOB plus what we have just sent of the empty static block.\r\n\t\t\tif (1 + last_eob_len + 10 - bi_valid < 9) {\r\n\t\t\t\tsend_bits(STATIC_TREES << 1, 3);\r\n\t\t\t\tsend_code(END_BLOCK, StaticTree.static_ltree);\r\n\t\t\t\tbi_flush();\r\n\t\t\t}\r\n\t\t\tlast_eob_len = 7;\r\n\t\t}\r\n\r\n\t\t// Save the match info and tally the frequency counts. Return true if\r\n\t\t// the current block must be flushed.\r\n\t\tfunction _tr_tally(dist, // distance of matched string\r\n\t\t\tlc // match length-MIN_MATCH or unmatched char (if dist==0)\r\n\t\t) {\r\n\t\t\tvar out_length, in_length, dcode;\r\n\t\t\tthat.pending_buf[d_buf + last_lit * 2] = (dist >>> 8) & 0xff;\r\n\t\t\tthat.pending_buf[d_buf + last_lit * 2 + 1] = dist & 0xff;\r\n\r\n\t\t\tthat.pending_buf[l_buf + last_lit] = lc & 0xff;\r\n\t\t\tlast_lit++;\r\n\r\n\t\t\tif (dist === 0) {\r\n\t\t\t\t// lc is the unmatched char\r\n\t\t\t\tdyn_ltree[lc * 2]++;\r\n\t\t\t} else {\r\n\t\t\t\tmatches++;\r\n\t\t\t\t// Here, lc is the match length - MIN_MATCH\r\n\t\t\t\tdist--; // dist = match distance - 1\r\n\t\t\t\tdyn_ltree[(Tree._length_code[lc] + LITERALS + 1) * 2]++;\r\n\t\t\t\tdyn_dtree[Tree.d_code(dist) * 2]++;\r\n\t\t\t}\r\n\r\n\t\t\tif ((last_lit & 0x1fff) === 0 && level > 2) {\r\n\t\t\t\t// Compute an upper bound for the compressed length\r\n\t\t\t\tout_length = last_lit * 8;\r\n\t\t\t\tin_length = strstart - block_start;\r\n\t\t\t\tfor (dcode = 0; dcode < D_CODES; dcode++) {\r\n\t\t\t\t\tout_length += dyn_dtree[dcode * 2] * (5 + Tree.extra_dbits[dcode]);\r\n\t\t\t\t}\r\n\t\t\t\tout_length >>>= 3;\r\n\t\t\t\tif ((matches < Math.floor(last_lit / 2)) && out_length < Math.floor(in_length / 2))\r\n\t\t\t\t\treturn true;\r\n\t\t\t}\r\n\r\n\t\t\treturn (last_lit == lit_bufsize - 1);\r\n\t\t\t// We avoid equality with lit_bufsize because of wraparound at 64K\r\n\t\t\t// on 16 bit machines and because stored blocks are restricted to\r\n\t\t\t// 64K-1 bytes.\r\n\t\t}\r\n\r\n\t\t// Send the block data compressed using the given Huffman trees\r\n\t\tfunction compress_block(ltree, dtree) {\r\n\t\t\tvar dist; // distance of matched string\r\n\t\t\tvar lc; // match length or unmatched char (if dist === 0)\r\n\t\t\tvar lx = 0; // running index in l_buf\r\n\t\t\tvar code; // the code to send\r\n\t\t\tvar extra; // number of extra bits to send\r\n\r\n\t\t\tif (last_lit !== 0) {\r\n\t\t\t\tdo {\r\n\t\t\t\t\tdist = ((that.pending_buf[d_buf + lx * 2] << 8) & 0xff00) | (that.pending_buf[d_buf + lx * 2 + 1] & 0xff);\r\n\t\t\t\t\tlc = (that.pending_buf[l_buf + lx]) & 0xff;\r\n\t\t\t\t\tlx++;\r\n\r\n\t\t\t\t\tif (dist === 0) {\r\n\t\t\t\t\t\tsend_code(lc, ltree); // send a literal byte\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// Here, lc is the match length - MIN_MATCH\r\n\t\t\t\t\t\tcode = Tree._length_code[lc];\r\n\r\n\t\t\t\t\t\tsend_code(code + LITERALS + 1, ltree); // send the length\r\n\t\t\t\t\t\t// code\r\n\t\t\t\t\t\textra = Tree.extra_lbits[code];\r\n\t\t\t\t\t\tif (extra !== 0) {\r\n\t\t\t\t\t\t\tlc -= Tree.base_length[code];\r\n\t\t\t\t\t\t\tsend_bits(lc, extra); // send the extra length bits\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tdist--; // dist is now the match distance - 1\r\n\t\t\t\t\t\tcode = Tree.d_code(dist);\r\n\r\n\t\t\t\t\t\tsend_code(code, dtree); // send the distance code\r\n\t\t\t\t\t\textra = Tree.extra_dbits[code];\r\n\t\t\t\t\t\tif (extra !== 0) {\r\n\t\t\t\t\t\t\tdist -= Tree.base_dist[code];\r\n\t\t\t\t\t\t\tsend_bits(dist, extra); // send the extra distance bits\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} // literal or match pair ?\r\n\r\n\t\t\t\t\t// Check that the overlay between pending_buf and d_buf+l_buf is\r\n\t\t\t\t\t// ok:\r\n\t\t\t\t} while (lx < last_lit);\r\n\t\t\t}\r\n\r\n\t\t\tsend_code(END_BLOCK, ltree);\r\n\t\t\tlast_eob_len = ltree[END_BLOCK * 2 + 1];\r\n\t\t}\r\n\r\n\t\t// Flush the bit buffer and align the output on a byte boundary\r\n\t\tfunction bi_windup() {\r\n\t\t\tif (bi_valid > 8) {\r\n\t\t\t\tput_short(bi_buf);\r\n\t\t\t} else if (bi_valid > 0) {\r\n\t\t\t\tput_byte(bi_buf & 0xff);\r\n\t\t\t}\r\n\t\t\tbi_buf = 0;\r\n\t\t\tbi_valid = 0;\r\n\t\t}\r\n\r\n\t\t// Copy a stored block, storing first the length and its\r\n\t\t// one's complement if requested.\r\n\t\tfunction copy_block(buf, // the input data\r\n\t\t\tlen, // its length\r\n\t\t\theader // true if block header must be written\r\n\t\t) {\r\n\t\t\tbi_windup(); // align on byte boundary\r\n\t\t\tlast_eob_len = 8; // enough lookahead for inflate\r\n\r\n\t\t\tif (header) {\r\n\t\t\t\tput_short(len);\r\n\t\t\t\tput_short(~len);\r\n\t\t\t}\r\n\r\n\t\t\tthat.pending_buf.set(window.subarray(buf, buf + len), that.pending);\r\n\t\t\tthat.pending += len;\r\n\t\t}\r\n\r\n\t\t// Send a stored block\r\n\t\tfunction _tr_stored_block(buf, // input block\r\n\t\t\tstored_len, // length of input block\r\n\t\t\teof // true if this is the last block for a file\r\n\t\t) {\r\n\t\t\tsend_bits((STORED_BLOCK << 1) + (eof ? 1 : 0), 3); // send block type\r\n\t\t\tcopy_block(buf, stored_len, true); // with header\r\n\t\t}\r\n\r\n\t\t// Determine the best encoding for the current block: dynamic trees, static\r\n\t\t// trees or store, and output the encoded block to the zip file.\r\n\t\tfunction _tr_flush_block(buf, // input block, or NULL if too old\r\n\t\t\tstored_len, // length of input block\r\n\t\t\teof // true if this is the last block for a file\r\n\t\t) {\r\n\t\t\tvar opt_lenb, static_lenb;// opt_len and static_len in bytes\r\n\t\t\tvar max_blindex = 0; // index of last bit length code of non zero freq\r\n\r\n\t\t\t// Build the Huffman trees unless a stored block is forced\r\n\t\t\tif (level > 0) {\r\n\t\t\t\t// Construct the literal and distance trees\r\n\t\t\t\tl_desc.build_tree(that);\r\n\r\n\t\t\t\td_desc.build_tree(that);\r\n\r\n\t\t\t\t// At this point, opt_len and static_len are the total bit lengths\r\n\t\t\t\t// of\r\n\t\t\t\t// the compressed block data, excluding the tree representations.\r\n\r\n\t\t\t\t// Build the bit length tree for the above two trees, and get the\r\n\t\t\t\t// index\r\n\t\t\t\t// in bl_order of the last bit length code to send.\r\n\t\t\t\tmax_blindex = build_bl_tree();\r\n\r\n\t\t\t\t// Determine the best encoding. Compute first the block length in\r\n\t\t\t\t// bytes\r\n\t\t\t\topt_lenb = (that.opt_len + 3 + 7) >>> 3;\r\n\t\t\t\tstatic_lenb = (that.static_len + 3 + 7) >>> 3;\r\n\r\n\t\t\t\tif (static_lenb <= opt_lenb)\r\n\t\t\t\t\topt_lenb = static_lenb;\r\n\t\t\t} else {\r\n\t\t\t\topt_lenb = static_lenb = stored_len + 5; // force a stored block\r\n\t\t\t}\r\n\r\n\t\t\tif ((stored_len + 4 <= opt_lenb) && buf != -1) {\r\n\t\t\t\t// 4: two words for the lengths\r\n\t\t\t\t// The test buf != NULL is only necessary if LIT_BUFSIZE > WSIZE.\r\n\t\t\t\t// Otherwise we can't have processed more than WSIZE input bytes\r\n\t\t\t\t// since\r\n\t\t\t\t// the last block flush, because compression would have been\r\n\t\t\t\t// successful. If LIT_BUFSIZE <= WSIZE, it is never too late to\r\n\t\t\t\t// transform a block into a stored block.\r\n\t\t\t\t_tr_stored_block(buf, stored_len, eof);\r\n\t\t\t} else if (static_lenb == opt_lenb) {\r\n\t\t\t\tsend_bits((STATIC_TREES << 1) + (eof ? 1 : 0), 3);\r\n\t\t\t\tcompress_block(StaticTree.static_ltree, StaticTree.static_dtree);\r\n\t\t\t} else {\r\n\t\t\t\tsend_bits((DYN_TREES << 1) + (eof ? 1 : 0), 3);\r\n\t\t\t\tsend_all_trees(l_desc.max_code + 1, d_desc.max_code + 1, max_blindex + 1);\r\n\t\t\t\tcompress_block(dyn_ltree, dyn_dtree);\r\n\t\t\t}\r\n\r\n\t\t\t// The above check is made mod 2^32, for files larger than 512 MB\r\n\t\t\t// and uLong implemented on 32 bits.\r\n\r\n\t\t\tinit_block();\r\n\r\n\t\t\tif (eof) {\r\n\t\t\t\tbi_windup();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction flush_block_only(eof) {\r\n\t\t\t_tr_flush_block(block_start >= 0 ? block_start : -1, strstart - block_start, eof);\r\n\t\t\tblock_start = strstart;\r\n\t\t\tstrm.flush_pending();\r\n\t\t}\r\n\r\n\t\t// Fill the window when the lookahead becomes insufficient.\r\n\t\t// Updates strstart and lookahead.\r\n\t\t//\r\n\t\t// IN assertion: lookahead < MIN_LOOKAHEAD\r\n\t\t// OUT assertions: strstart <= window_size-MIN_LOOKAHEAD\r\n\t\t// At least one byte has been read, or avail_in === 0; reads are\r\n\t\t// performed for at least two bytes (required for the zip translate_eol\r\n\t\t// option -- not supported here).\r\n\t\tfunction fill_window() {\r\n\t\t\tvar n, m;\r\n\t\t\tvar p;\r\n\t\t\tvar more; // Amount of free space at the end of the window.\r\n\r\n\t\t\tdo {\r\n\t\t\t\tmore = (window_size - lookahead - strstart);\r\n\r\n\t\t\t\t// Deal with !@#$% 64K limit:\r\n\t\t\t\tif (more === 0 && strstart === 0 && lookahead === 0) {\r\n\t\t\t\t\tmore = w_size;\r\n\t\t\t\t} else if (more == -1) {\r\n\t\t\t\t\t// Very unlikely, but possible on 16 bit machine if strstart ==\r\n\t\t\t\t\t// 0\r\n\t\t\t\t\t// and lookahead == 1 (input done one byte at time)\r\n\t\t\t\t\tmore--;\r\n\r\n\t\t\t\t\t// If the window is almost full and there is insufficient\r\n\t\t\t\t\t// lookahead,\r\n\t\t\t\t\t// move the upper half to the lower one to make room in the\r\n\t\t\t\t\t// upper half.\r\n\t\t\t\t} else if (strstart >= w_size + w_size - MIN_LOOKAHEAD) {\r\n\t\t\t\t\twindow.set(window.subarray(w_size, w_size + w_size), 0);\r\n\r\n\t\t\t\t\tmatch_start -= w_size;\r\n\t\t\t\t\tstrstart -= w_size; // we now have strstart >= MAX_DIST\r\n\t\t\t\t\tblock_start -= w_size;\r\n\r\n\t\t\t\t\t// Slide the hash table (could be avoided with 32 bit values\r\n\t\t\t\t\t// at the expense of memory usage). We slide even when level ==\r\n\t\t\t\t\t// 0\r\n\t\t\t\t\t// to keep the hash table consistent if we switch back to level\r\n\t\t\t\t\t// > 0\r\n\t\t\t\t\t// later. (Using level 0 permanently is not an optimal usage of\r\n\t\t\t\t\t// zlib, so we don't care about this pathological case.)\r\n\r\n\t\t\t\t\tn = hash_size;\r\n\t\t\t\t\tp = n;\r\n\t\t\t\t\tdo {\r\n\t\t\t\t\t\tm = (head[--p] & 0xffff);\r\n\t\t\t\t\t\thead[p] = (m >= w_size ? m - w_size : 0);\r\n\t\t\t\t\t} while (--n !== 0);\r\n\r\n\t\t\t\t\tn = w_size;\r\n\t\t\t\t\tp = n;\r\n\t\t\t\t\tdo {\r\n\t\t\t\t\t\tm = (prev[--p] & 0xffff);\r\n\t\t\t\t\t\tprev[p] = (m >= w_size ? m - w_size : 0);\r\n\t\t\t\t\t\t// If n is not on any hash chain, prev[n] is garbage but\r\n\t\t\t\t\t\t// its value will never be used.\r\n\t\t\t\t\t} while (--n !== 0);\r\n\t\t\t\t\tmore += w_size;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (strm.avail_in === 0)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t// If there was no sliding:\r\n\t\t\t\t// strstart <= WSIZE+MAX_DIST-1 && lookahead <= MIN_LOOKAHEAD - 1 &&\r\n\t\t\t\t// more == window_size - lookahead - strstart\r\n\t\t\t\t// => more >= window_size - (MIN_LOOKAHEAD-1 + WSIZE + MAX_DIST-1)\r\n\t\t\t\t// => more >= window_size - 2*WSIZE + 2\r\n\t\t\t\t// In the BIG_MEM or MMAP case (not yet supported),\r\n\t\t\t\t// window_size == input_size + MIN_LOOKAHEAD &&\r\n\t\t\t\t// strstart + s->lookahead <= input_size => more >= MIN_LOOKAHEAD.\r\n\t\t\t\t// Otherwise, window_size == 2*WSIZE so more >= 2.\r\n\t\t\t\t// If there was sliding, more >= WSIZE. So in all cases, more >= 2.\r\n\r\n\t\t\t\tn = strm.read_buf(window, strstart + lookahead, more);\r\n\t\t\t\tlookahead += n;\r\n\r\n\t\t\t\t// Initialize the hash value now that we have some input:\r\n\t\t\t\tif (lookahead >= MIN_MATCH) {\r\n\t\t\t\t\tins_h = window[strstart] & 0xff;\r\n\t\t\t\t\tins_h = (((ins_h) << hash_shift) ^ (window[strstart + 1] & 0xff)) & hash_mask;\r\n\t\t\t\t}\r\n\t\t\t\t// If the whole input has less than MIN_MATCH bytes, ins_h is\r\n\t\t\t\t// garbage,\r\n\t\t\t\t// but this is not important since only literal bytes will be\r\n\t\t\t\t// emitted.\r\n\t\t\t} while (lookahead < MIN_LOOKAHEAD && strm.avail_in !== 0);\r\n\t\t}\r\n\r\n\t\t// Copy without compression as much as possible from the input stream,\r\n\t\t// return\r\n\t\t// the current block state.\r\n\t\t// This function does not insert new strings in the dictionary since\r\n\t\t// uncompressible data is probably not useful. This function is used\r\n\t\t// only for the level=0 compression option.\r\n\t\t// NOTE: this function should be optimized to avoid extra copying from\r\n\t\t// window to pending_buf.\r\n\t\tfunction deflate_stored(flush) {\r\n\t\t\t// Stored blocks are limited to 0xffff bytes, pending_buf is limited\r\n\t\t\t// to pending_buf_size, and each stored block has a 5 byte header:\r\n\r\n\t\t\tvar max_block_size = 0xffff;\r\n\t\t\tvar max_start;\r\n\r\n\t\t\tif (max_block_size > pending_buf_size - 5) {\r\n\t\t\t\tmax_block_size = pending_buf_size - 5;\r\n\t\t\t}\r\n\r\n\t\t\t// Copy as much as possible from input to output:\r\n\t\t\twhile (true) {\r\n\t\t\t\t// Fill the window as much as possible:\r\n\t\t\t\tif (lookahead <= 1) {\r\n\t\t\t\t\tfill_window();\r\n\t\t\t\t\tif (lookahead === 0 && flush == Z_NO_FLUSH)\r\n\t\t\t\t\t\treturn NeedMore;\r\n\t\t\t\t\tif (lookahead === 0)\r\n\t\t\t\t\t\tbreak; // flush the current block\r\n\t\t\t\t}\r\n\r\n\t\t\t\tstrstart += lookahead;\r\n\t\t\t\tlookahead = 0;\r\n\r\n\t\t\t\t// Emit a stored block if pending_buf will be full:\r\n\t\t\t\tmax_start = block_start + max_block_size;\r\n\t\t\t\tif (strstart === 0 || strstart >= max_start) {\r\n\t\t\t\t\t// strstart === 0 is possible when wraparound on 16-bit machine\r\n\t\t\t\t\tlookahead = (strstart - max_start);\r\n\t\t\t\t\tstrstart = max_start;\r\n\r\n\t\t\t\t\tflush_block_only(false);\r\n\t\t\t\t\tif (strm.avail_out === 0)\r\n\t\t\t\t\t\treturn NeedMore;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Flush if we may have to slide, otherwise block_start may become\r\n\t\t\t\t// negative and the data will be gone:\r\n\t\t\t\tif (strstart - block_start >= w_size - MIN_LOOKAHEAD) {\r\n\t\t\t\t\tflush_block_only(false);\r\n\t\t\t\t\tif (strm.avail_out === 0)\r\n\t\t\t\t\t\treturn NeedMore;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tflush_block_only(flush == Z_FINISH);\r\n\t\t\tif (strm.avail_out === 0)\r\n\t\t\t\treturn (flush == Z_FINISH) ? FinishStarted : NeedMore;\r\n\r\n\t\t\treturn flush == Z_FINISH ? FinishDone : BlockDone;\r\n\t\t}\r\n\r\n\t\tfunction longest_match(cur_match) {\r\n\t\t\tvar chain_length = max_chain_length; // max hash chain length\r\n\t\t\tvar scan = strstart; // current string\r\n\t\t\tvar match; // matched string\r\n\t\t\tvar len; // length of current match\r\n\t\t\tvar best_len = prev_length; // best match length so far\r\n\t\t\tvar limit = strstart > (w_size - MIN_LOOKAHEAD) ? strstart - (w_size - MIN_LOOKAHEAD) : 0;\r\n\t\t\tvar _nice_match = nice_match;\r\n\r\n\t\t\t// Stop when cur_match becomes <= limit. To simplify the code,\r\n\t\t\t// we prevent matches with the string of window index 0.\r\n\r\n\t\t\tvar wmask = w_mask;\r\n\r\n\t\t\tvar strend = strstart + MAX_MATCH;\r\n\t\t\tvar scan_end1 = window[scan + best_len - 1];\r\n\t\t\tvar scan_end = window[scan + best_len];\r\n\r\n\t\t\t// The code is optimized for HASH_BITS >= 8 and MAX_MATCH-2 multiple of\r\n\t\t\t// 16.\r\n\t\t\t// It is easy to get rid of this optimization if necessary.\r\n\r\n\t\t\t// Do not waste too much time if we already have a good match:\r\n\t\t\tif (prev_length >= good_match) {\r\n\t\t\t\tchain_length >>= 2;\r\n\t\t\t}\r\n\r\n\t\t\t// Do not look for matches beyond the end of the input. This is\r\n\t\t\t// necessary\r\n\t\t\t// to make deflate deterministic.\r\n\t\t\tif (_nice_match > lookahead)\r\n\t\t\t\t_nice_match = lookahead;\r\n\r\n\t\t\tdo {\r\n\t\t\t\tmatch = cur_match;\r\n\r\n\t\t\t\t// Skip to next match if the match length cannot increase\r\n\t\t\t\t// or if the match length is less than 2:\r\n\t\t\t\tif (window[match + best_len] != scan_end || window[match + best_len - 1] != scan_end1 || window[match] != window[scan]\r\n\t\t\t\t\t|| window[++match] != window[scan + 1])\r\n\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\t// The check at best_len-1 can be removed because it will be made\r\n\t\t\t\t// again later. (This heuristic is not always a win.)\r\n\t\t\t\t// It is not necessary to compare scan[2] and match[2] since they\r\n\t\t\t\t// are always equal when the other bytes match, given that\r\n\t\t\t\t// the hash keys are equal and that HASH_BITS >= 8.\r\n\t\t\t\tscan += 2;\r\n\t\t\t\tmatch++;\r\n\r\n\t\t\t\t// We check for insufficient lookahead only every 8th comparison;\r\n\t\t\t\t// the 256th check will be made at strstart+258.\r\n\t\t\t\tdo {\r\n\t\t\t\t} while (window[++scan] == window[++match] && window[++scan] == window[++match] && window[++scan] == window[++match]\r\n\t\t\t\t&& window[++scan] == window[++match] && window[++scan] == window[++match] && window[++scan] == window[++match]\r\n\t\t\t\t&& window[++scan] == window[++match] && window[++scan] == window[++match] && scan < strend);\r\n\r\n\t\t\t\tlen = MAX_MATCH - (strend - scan);\r\n\t\t\t\tscan = strend - MAX_MATCH;\r\n\r\n\t\t\t\tif (len > best_len) {\r\n\t\t\t\t\tmatch_start = cur_match;\r\n\t\t\t\t\tbest_len = len;\r\n\t\t\t\t\tif (len >= _nice_match)\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tscan_end1 = window[scan + best_len - 1];\r\n\t\t\t\t\tscan_end = window[scan + best_len];\r\n\t\t\t\t}\r\n\r\n\t\t\t} while ((cur_match = (prev[cur_match & wmask] & 0xffff)) > limit && --chain_length !== 0);\r\n\r\n\t\t\tif (best_len <= lookahead)\r\n\t\t\t\treturn best_len;\r\n\t\t\treturn lookahead;\r\n\t\t}\r\n\r\n\t\t// Compress as much as possible from the input stream, return the current\r\n\t\t// block state.\r\n\t\t// This function does not perform lazy evaluation of matches and inserts\r\n\t\t// new strings in the dictionary only for unmatched strings or for short\r\n\t\t// matches. It is used only for the fast compression options.\r\n\t\tfunction deflate_fast(flush) {\r\n\t\t\t// short hash_head = 0; // head of the hash chain\r\n\t\t\tvar hash_head = 0; // head of the hash chain\r\n\t\t\tvar bflush; // set if current block must be flushed\r\n\r\n\t\t\twhile (true) {\r\n\t\t\t\t// Make sure that we always have enough lookahead, except\r\n\t\t\t\t// at the end of the input file. We need MAX_MATCH bytes\r\n\t\t\t\t// for the next match, plus MIN_MATCH bytes to insert the\r\n\t\t\t\t// string following the next match.\r\n\t\t\t\tif (lookahead < MIN_LOOKAHEAD) {\r\n\t\t\t\t\tfill_window();\r\n\t\t\t\t\tif (lookahead < MIN_LOOKAHEAD && flush == Z_NO_FLUSH) {\r\n\t\t\t\t\t\treturn NeedMore;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (lookahead === 0)\r\n\t\t\t\t\t\tbreak; // flush the current block\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Insert the string window[strstart .. strstart+2] in the\r\n\t\t\t\t// dictionary, and set hash_head to the head of the hash chain:\r\n\t\t\t\tif (lookahead >= MIN_MATCH) {\r\n\t\t\t\t\tins_h = (((ins_h) << hash_shift) ^ (window[(strstart) + (MIN_MATCH - 1)] & 0xff)) & hash_mask;\r\n\r\n\t\t\t\t\t// prev[strstart&w_mask]=hash_head=head[ins_h];\r\n\t\t\t\t\thash_head = (head[ins_h] & 0xffff);\r\n\t\t\t\t\tprev[strstart & w_mask] = head[ins_h];\r\n\t\t\t\t\thead[ins_h] = strstart;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Find the longest match, discarding those <= prev_length.\r\n\t\t\t\t// At this point we have always match_length < MIN_MATCH\r\n\r\n\t\t\t\tif (hash_head !== 0 && ((strstart - hash_head) & 0xffff) <= w_size - MIN_LOOKAHEAD) {\r\n\t\t\t\t\t// To simplify the code, we prevent matches with the string\r\n\t\t\t\t\t// of window index 0 (in particular we have to avoid a match\r\n\t\t\t\t\t// of the string with itself at the start of the input file).\r\n\t\t\t\t\tif (strategy != Z_HUFFMAN_ONLY) {\r\n\t\t\t\t\t\tmatch_length = longest_match(hash_head);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// longest_match() sets match_start\r\n\t\t\t\t}\r\n\t\t\t\tif (match_length >= MIN_MATCH) {\r\n\t\t\t\t\t// check_match(strstart, match_start, match_length);\r\n\r\n\t\t\t\t\tbflush = _tr_tally(strstart - match_start, match_length - MIN_MATCH);\r\n\r\n\t\t\t\t\tlookahead -= match_length;\r\n\r\n\t\t\t\t\t// Insert new strings in the hash table only if the match length\r\n\t\t\t\t\t// is not too large. This saves time but degrades compression.\r\n\t\t\t\t\tif (match_length <= max_lazy_match && lookahead >= MIN_MATCH) {\r\n\t\t\t\t\t\tmatch_length--; // string at strstart already in hash table\r\n\t\t\t\t\t\tdo {\r\n\t\t\t\t\t\t\tstrstart++;\r\n\r\n\t\t\t\t\t\t\tins_h = ((ins_h << hash_shift) ^ (window[(strstart) + (MIN_MATCH - 1)] & 0xff)) & hash_mask;\r\n\t\t\t\t\t\t\t// prev[strstart&w_mask]=hash_head=head[ins_h];\r\n\t\t\t\t\t\t\thash_head = (head[ins_h] & 0xffff);\r\n\t\t\t\t\t\t\tprev[strstart & w_mask] = head[ins_h];\r\n\t\t\t\t\t\t\thead[ins_h] = strstart;\r\n\r\n\t\t\t\t\t\t\t// strstart never exceeds WSIZE-MAX_MATCH, so there are\r\n\t\t\t\t\t\t\t// always MIN_MATCH bytes ahead.\r\n\t\t\t\t\t\t} while (--match_length !== 0);\r\n\t\t\t\t\t\tstrstart++;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tstrstart += match_length;\r\n\t\t\t\t\t\tmatch_length = 0;\r\n\t\t\t\t\t\tins_h = window[strstart] & 0xff;\r\n\r\n\t\t\t\t\t\tins_h = (((ins_h) << hash_shift) ^ (window[strstart + 1] & 0xff)) & hash_mask;\r\n\t\t\t\t\t\t// If lookahead < MIN_MATCH, ins_h is garbage, but it does\r\n\t\t\t\t\t\t// not\r\n\t\t\t\t\t\t// matter since it will be recomputed at next deflate call.\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// No match, output a literal byte\r\n\r\n\t\t\t\t\tbflush = _tr_tally(0, window[strstart] & 0xff);\r\n\t\t\t\t\tlookahead--;\r\n\t\t\t\t\tstrstart++;\r\n\t\t\t\t}\r\n\t\t\t\tif (bflush) {\r\n\r\n\t\t\t\t\tflush_block_only(false);\r\n\t\t\t\t\tif (strm.avail_out === 0)\r\n\t\t\t\t\t\treturn NeedMore;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tflush_block_only(flush == Z_FINISH);\r\n\t\t\tif (strm.avail_out === 0) {\r\n\t\t\t\tif (flush == Z_FINISH)\r\n\t\t\t\t\treturn FinishStarted;\r\n\t\t\t\telse\r\n\t\t\t\t\treturn NeedMore;\r\n\t\t\t}\r\n\t\t\treturn flush == Z_FINISH ? FinishDone : BlockDone;\r\n\t\t}\r\n\r\n\t\t// Same as above, but achieves better compression. We use a lazy\r\n\t\t// evaluation for matches: a match is finally adopted only if there is\r\n\t\t// no better match at the next window position.\r\n\t\tfunction deflate_slow(flush) {\r\n\t\t\t// short hash_head = 0; // head of hash chain\r\n\t\t\tvar hash_head = 0; // head of hash chain\r\n\t\t\tvar bflush; // set if current block must be flushed\r\n\t\t\tvar max_insert;\r\n\r\n\t\t\t// Process the input block.\r\n\t\t\twhile (true) {\r\n\t\t\t\t// Make sure that we always have enough lookahead, except\r\n\t\t\t\t// at the end of the input file. We need MAX_MATCH bytes\r\n\t\t\t\t// for the next match, plus MIN_MATCH bytes to insert the\r\n\t\t\t\t// string following the next match.\r\n\r\n\t\t\t\tif (lookahead < MIN_LOOKAHEAD) {\r\n\t\t\t\t\tfill_window();\r\n\t\t\t\t\tif (lookahead < MIN_LOOKAHEAD && flush == Z_NO_FLUSH) {\r\n\t\t\t\t\t\treturn NeedMore;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (lookahead === 0)\r\n\t\t\t\t\t\tbreak; // flush the current block\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Insert the string window[strstart .. strstart+2] in the\r\n\t\t\t\t// dictionary, and set hash_head to the head of the hash chain:\r\n\r\n\t\t\t\tif (lookahead >= MIN_MATCH) {\r\n\t\t\t\t\tins_h = (((ins_h) << hash_shift) ^ (window[(strstart) + (MIN_MATCH - 1)] & 0xff)) & hash_mask;\r\n\t\t\t\t\t// prev[strstart&w_mask]=hash_head=head[ins_h];\r\n\t\t\t\t\thash_head = (head[ins_h] & 0xffff);\r\n\t\t\t\t\tprev[strstart & w_mask] = head[ins_h];\r\n\t\t\t\t\thead[ins_h] = strstart;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Find the longest match, discarding those <= prev_length.\r\n\t\t\t\tprev_length = match_length;\r\n\t\t\t\tprev_match = match_start;\r\n\t\t\t\tmatch_length = MIN_MATCH - 1;\r\n\r\n\t\t\t\tif (hash_head !== 0 && prev_length < max_lazy_match && ((strstart - hash_head) & 0xffff) <= w_size - MIN_LOOKAHEAD) {\r\n\t\t\t\t\t// To simplify the code, we prevent matches with the string\r\n\t\t\t\t\t// of window index 0 (in particular we have to avoid a match\r\n\t\t\t\t\t// of the string with itself at the start of the input file).\r\n\r\n\t\t\t\t\tif (strategy != Z_HUFFMAN_ONLY) {\r\n\t\t\t\t\t\tmatch_length = longest_match(hash_head);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// longest_match() sets match_start\r\n\r\n\t\t\t\t\tif (match_length <= 5 && (strategy == Z_FILTERED || (match_length == MIN_MATCH && strstart - match_start > 4096))) {\r\n\r\n\t\t\t\t\t\t// If prev_match is also MIN_MATCH, match_start is garbage\r\n\t\t\t\t\t\t// but we will ignore the current match anyway.\r\n\t\t\t\t\t\tmatch_length = MIN_MATCH - 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// If there was a match at the previous step and the current\r\n\t\t\t\t// match is not better, output the previous match:\r\n\t\t\t\tif (prev_length >= MIN_MATCH && match_length <= prev_length) {\r\n\t\t\t\t\tmax_insert = strstart + lookahead - MIN_MATCH;\r\n\t\t\t\t\t// Do not insert strings in hash table beyond this.\r\n\r\n\t\t\t\t\t// check_match(strstart-1, prev_match, prev_length);\r\n\r\n\t\t\t\t\tbflush = _tr_tally(strstart - 1 - prev_match, prev_length - MIN_MATCH);\r\n\r\n\t\t\t\t\t// Insert in hash table all strings up to the end of the match.\r\n\t\t\t\t\t// strstart-1 and strstart are already inserted. If there is not\r\n\t\t\t\t\t// enough lookahead, the last two strings are not inserted in\r\n\t\t\t\t\t// the hash table.\r\n\t\t\t\t\tlookahead -= prev_length - 1;\r\n\t\t\t\t\tprev_length -= 2;\r\n\t\t\t\t\tdo {\r\n\t\t\t\t\t\tif (++strstart <= max_insert) {\r\n\t\t\t\t\t\t\tins_h = (((ins_h) << hash_shift) ^ (window[(strstart) + (MIN_MATCH - 1)] & 0xff)) & hash_mask;\r\n\t\t\t\t\t\t\t// prev[strstart&w_mask]=hash_head=head[ins_h];\r\n\t\t\t\t\t\t\thash_head = (head[ins_h] & 0xffff);\r\n\t\t\t\t\t\t\tprev[strstart & w_mask] = head[ins_h];\r\n\t\t\t\t\t\t\thead[ins_h] = strstart;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} while (--prev_length !== 0);\r\n\t\t\t\t\tmatch_available = 0;\r\n\t\t\t\t\tmatch_length = MIN_MATCH - 1;\r\n\t\t\t\t\tstrstart++;\r\n\r\n\t\t\t\t\tif (bflush) {\r\n\t\t\t\t\t\tflush_block_only(false);\r\n\t\t\t\t\t\tif (strm.avail_out === 0)\r\n\t\t\t\t\t\t\treturn NeedMore;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (match_available !== 0) {\r\n\r\n\t\t\t\t\t// If there was no match at the previous position, output a\r\n\t\t\t\t\t// single literal. If there was a match but the current match\r\n\t\t\t\t\t// is longer, truncate the previous match to a single literal.\r\n\r\n\t\t\t\t\tbflush = _tr_tally(0, window[strstart - 1] & 0xff);\r\n\r\n\t\t\t\t\tif (bflush) {\r\n\t\t\t\t\t\tflush_block_only(false);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tstrstart++;\r\n\t\t\t\t\tlookahead--;\r\n\t\t\t\t\tif (strm.avail_out === 0)\r\n\t\t\t\t\t\treturn NeedMore;\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// There is no previous match to compare with, wait for\r\n\t\t\t\t\t// the next step to decide.\r\n\r\n\t\t\t\t\tmatch_available = 1;\r\n\t\t\t\t\tstrstart++;\r\n\t\t\t\t\tlookahead--;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (match_available !== 0) {\r\n\t\t\t\tbflush = _tr_tally(0, window[strstart - 1] & 0xff);\r\n\t\t\t\tmatch_available = 0;\r\n\t\t\t}\r\n\t\t\tflush_block_only(flush == Z_FINISH);\r\n\r\n\t\t\tif (strm.avail_out === 0) {\r\n\t\t\t\tif (flush == Z_FINISH)\r\n\t\t\t\t\treturn FinishStarted;\r\n\t\t\t\telse\r\n\t\t\t\t\treturn NeedMore;\r\n\t\t\t}\r\n\r\n\t\t\treturn flush == Z_FINISH ? FinishDone : BlockDone;\r\n\t\t}\r\n\r\n\t\tfunction deflateReset(strm) {\r\n\t\t\tstrm.total_in = strm.total_out = 0;\r\n\t\t\tstrm.msg = null; //\r\n\r\n\t\t\tthat.pending = 0;\r\n\t\t\tthat.pending_out = 0;\r\n\r\n\t\t\tstatus = BUSY_STATE;\r\n\r\n\t\t\tlast_flush = Z_NO_FLUSH;\r\n\r\n\t\t\ttr_init();\r\n\t\t\tlm_init();\r\n\t\t\treturn Z_OK;\r\n\t\t}\r\n\r\n\t\tthat.deflateInit = function (strm, _level, bits, _method, memLevel, _strategy) {\r\n\t\t\tif (!_method)\r\n\t\t\t\t_method = Z_DEFLATED;\r\n\t\t\tif (!memLevel)\r\n\t\t\t\tmemLevel = DEF_MEM_LEVEL;\r\n\t\t\tif (!_strategy)\r\n\t\t\t\t_strategy = Z_DEFAULT_STRATEGY;\r\n\r\n\t\t\t// byte[] my_version=ZLIB_VERSION;\r\n\r\n\t\t\t//\r\n\t\t\t// if (!version || version[0] != my_version[0]\r\n\t\t\t// || stream_size != sizeof(z_stream)) {\r\n\t\t\t// return Z_VERSION_ERROR;\r\n\t\t\t// }\r\n\r\n\t\t\tstrm.msg = null;\r\n\r\n\t\t\tif (_level == Z_DEFAULT_COMPRESSION)\r\n\t\t\t\t_level = 6;\r\n\r\n\t\t\tif (memLevel < 1 || memLevel > MAX_MEM_LEVEL || _method != Z_DEFLATED || bits < 9 || bits > 15 || _level < 0 || _level > 9 || _strategy < 0\r\n\t\t\t\t|| _strategy > Z_HUFFMAN_ONLY) {\r\n\t\t\t\treturn Z_STREAM_ERROR;\r\n\t\t\t}\r\n\r\n\t\t\tstrm.dstate = that;\r\n\r\n\t\t\tw_bits = bits;\r\n\t\t\tw_size = 1 << w_bits;\r\n\t\t\tw_mask = w_size - 1;\r\n\r\n\t\t\thash_bits = memLevel + 7;\r\n\t\t\thash_size = 1 << hash_bits;\r\n\t\t\thash_mask = hash_size - 1;\r\n\t\t\thash_shift = Math.floor((hash_bits + MIN_MATCH - 1) / MIN_MATCH);\r\n\r\n\t\t\twindow = new Uint8Array(w_size * 2);\r\n\t\t\tprev = [];\r\n\t\t\thead = [];\r\n\r\n\t\t\tlit_bufsize = 1 << (memLevel + 6); // 16K elements by default\r\n\r\n\t\t\t// We overlay pending_buf and d_buf+l_buf. This works since the average\r\n\t\t\t// output size for (length,distance) codes is <= 24 bits.\r\n\t\t\tthat.pending_buf = new Uint8Array(lit_bufsize * 4);\r\n\t\t\tpending_buf_size = lit_bufsize * 4;\r\n\r\n\t\t\td_buf = Math.floor(lit_bufsize / 2);\r\n\t\t\tl_buf = (1 + 2) * lit_bufsize;\r\n\r\n\t\t\tlevel = _level;\r\n\r\n\t\t\tstrategy = _strategy;\r\n\t\t\tmethod = _method & 0xff;\r\n\r\n\t\t\treturn deflateReset(strm);\r\n\t\t};\r\n\r\n\t\tthat.deflateEnd = function () {\r\n\t\t\tif (status != INIT_STATE && status != BUSY_STATE && status != FINISH_STATE) {\r\n\t\t\t\treturn Z_STREAM_ERROR;\r\n\t\t\t}\r\n\t\t\t// Deallocate in reverse order of allocations:\r\n\t\t\tthat.pending_buf = null;\r\n\t\t\thead = null;\r\n\t\t\tprev = null;\r\n\t\t\twindow = null;\r\n\t\t\t// free\r\n\t\t\tthat.dstate = null;\r\n\t\t\treturn status == BUSY_STATE ? Z_DATA_ERROR : Z_OK;\r\n\t\t};\r\n\r\n\t\tthat.deflateParams = function (strm, _level, _strategy) {\r\n\t\t\tvar err = Z_OK;\r\n\r\n\t\t\tif (_level == Z_DEFAULT_COMPRESSION) {\r\n\t\t\t\t_level = 6;\r\n\t\t\t}\r\n\t\t\tif (_level < 0 || _level > 9 || _strategy < 0 || _strategy > Z_HUFFMAN_ONLY) {\r\n\t\t\t\treturn Z_STREAM_ERROR;\r\n\t\t\t}\r\n\r\n\t\t\tif (config_table[level].func != config_table[_level].func && strm.total_in !== 0) {\r\n\t\t\t\t// Flush the last buffer:\r\n\t\t\t\terr = strm.deflate(Z_PARTIAL_FLUSH);\r\n\t\t\t}\r\n\r\n\t\t\tif (level != _level) {\r\n\t\t\t\tlevel = _level;\r\n\t\t\t\tmax_lazy_match = config_table[level].max_lazy;\r\n\t\t\t\tgood_match = config_table[level].good_length;\r\n\t\t\t\tnice_match = config_table[level].nice_length;\r\n\t\t\t\tmax_chain_length = config_table[level].max_chain;\r\n\t\t\t}\r\n\t\t\tstrategy = _strategy;\r\n\t\t\treturn err;\r\n\t\t};\r\n\r\n\t\tthat.deflateSetDictionary = function (strm, dictionary, dictLength) {\r\n\t\t\tvar length = dictLength;\r\n\t\t\tvar n, index = 0;\r\n\r\n\t\t\tif (!dictionary || status != INIT_STATE)\r\n\t\t\t\treturn Z_STREAM_ERROR;\r\n\r\n\t\t\tif (length < MIN_MATCH)\r\n\t\t\t\treturn Z_OK;\r\n\t\t\tif (length > w_size - MIN_LOOKAHEAD) {\r\n\t\t\t\tlength = w_size - MIN_LOOKAHEAD;\r\n\t\t\t\tindex = dictLength - length; // use the tail of the dictionary\r\n\t\t\t}\r\n\t\t\twindow.set(dictionary.subarray(index, index + length), 0);\r\n\r\n\t\t\tstrstart = length;\r\n\t\t\tblock_start = length;\r\n\r\n\t\t\t// Insert all strings in the hash table (except for the last two bytes).\r\n\t\t\t// s->lookahead stays null, so s->ins_h will be recomputed at the next\r\n\t\t\t// call of fill_window.\r\n\r\n\t\t\tins_h = window[0] & 0xff;\r\n\t\t\tins_h = (((ins_h) << hash_shift) ^ (window[1] & 0xff)) & hash_mask;\r\n\r\n\t\t\tfor (n = 0; n <= length - MIN_MATCH; n++) {\r\n\t\t\t\tins_h = (((ins_h) << hash_shift) ^ (window[(n) + (MIN_MATCH - 1)] & 0xff)) & hash_mask;\r\n\t\t\t\tprev[n & w_mask] = head[ins_h];\r\n\t\t\t\thead[ins_h] = n;\r\n\t\t\t}\r\n\t\t\treturn Z_OK;\r\n\t\t};\r\n\r\n\t\tthat.deflate = function (_strm, flush) {\r\n\t\t\tvar i, header, level_flags, old_flush, bstate;\r\n\r\n\t\t\tif (flush > Z_FINISH || flush < 0) {\r\n\t\t\t\treturn Z_STREAM_ERROR;\r\n\t\t\t}\r\n\r\n\t\t\tif (!_strm.next_out || (!_strm.next_in && _strm.avail_in !== 0) || (status == FINISH_STATE && flush != Z_FINISH)) {\r\n\t\t\t\t_strm.msg = z_errmsg[Z_NEED_DICT - (Z_STREAM_ERROR)];\r\n\t\t\t\treturn Z_STREAM_ERROR;\r\n\t\t\t}\r\n\t\t\tif (_strm.avail_out === 0) {\r\n\t\t\t\t_strm.msg = z_errmsg[Z_NEED_DICT - (Z_BUF_ERROR)];\r\n\t\t\t\treturn Z_BUF_ERROR;\r\n\t\t\t}\r\n\r\n\t\t\tstrm = _strm; // just in case\r\n\t\t\told_flush = last_flush;\r\n\t\t\tlast_flush = flush;\r\n\r\n\t\t\t// Write the zlib header\r\n\t\t\tif (status == INIT_STATE) {\r\n\t\t\t\theader = (Z_DEFLATED + ((w_bits - 8) << 4)) << 8;\r\n\t\t\t\tlevel_flags = ((level - 1) & 0xff) >> 1;\r\n\r\n\t\t\t\tif (level_flags > 3)\r\n\t\t\t\t\tlevel_flags = 3;\r\n\t\t\t\theader |= (level_flags << 6);\r\n\t\t\t\tif (strstart !== 0)\r\n\t\t\t\t\theader |= PRESET_DICT;\r\n\t\t\t\theader += 31 - (header % 31);\r\n\r\n\t\t\t\tstatus = BUSY_STATE;\r\n\t\t\t\tputShortMSB(header);\r\n\t\t\t}\r\n\r\n\t\t\t// Flush as much pending output as possible\r\n\t\t\tif (that.pending !== 0) {\r\n\t\t\t\tstrm.flush_pending();\r\n\t\t\t\tif (strm.avail_out === 0) {\r\n\t\t\t\t\t// console.log(\" avail_out==0\");\r\n\t\t\t\t\t// Since avail_out is 0, deflate will be called again with\r\n\t\t\t\t\t// more output space, but possibly with both pending and\r\n\t\t\t\t\t// avail_in equal to zero. There won't be anything to do,\r\n\t\t\t\t\t// but this is not an error situation so make sure we\r\n\t\t\t\t\t// return OK instead of BUF_ERROR at next call of deflate:\r\n\t\t\t\t\tlast_flush = -1;\r\n\t\t\t\t\treturn Z_OK;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Make sure there is something to do and avoid duplicate\r\n\t\t\t\t// consecutive\r\n\t\t\t\t// flushes. For repeated and useless calls with Z_FINISH, we keep\r\n\t\t\t\t// returning Z_STREAM_END instead of Z_BUFF_ERROR.\r\n\t\t\t} else if (strm.avail_in === 0 && flush <= old_flush && flush != Z_FINISH) {\r\n\t\t\t\tstrm.msg = z_errmsg[Z_NEED_DICT - (Z_BUF_ERROR)];\r\n\t\t\t\treturn Z_BUF_ERROR;\r\n\t\t\t}\r\n\r\n\t\t\t// User must not provide more input after the first FINISH:\r\n\t\t\tif (status == FINISH_STATE && strm.avail_in !== 0) {\r\n\t\t\t\t_strm.msg = z_errmsg[Z_NEED_DICT - (Z_BUF_ERROR)];\r\n\t\t\t\treturn Z_BUF_ERROR;\r\n\t\t\t}\r\n\r\n\t\t\t// Start a new block or continue the current one.\r\n\t\t\tif (strm.avail_in !== 0 || lookahead !== 0 || (flush != Z_NO_FLUSH && status != FINISH_STATE)) {\r\n\t\t\t\tbstate = -1;\r\n\t\t\t\tswitch (config_table[level].func) {\r\n\t\t\t\t\tcase STORED:\r\n\t\t\t\t\t\tbstate = deflate_stored(flush);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase FAST:\r\n\t\t\t\t\t\tbstate = deflate_fast(flush);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase SLOW:\r\n\t\t\t\t\t\tbstate = deflate_slow(flush);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (bstate == FinishStarted || bstate == FinishDone) {\r\n\t\t\t\t\tstatus = FINISH_STATE;\r\n\t\t\t\t}\r\n\t\t\t\tif (bstate == NeedMore || bstate == FinishStarted) {\r\n\t\t\t\t\tif (strm.avail_out === 0) {\r\n\t\t\t\t\t\tlast_flush = -1; // avoid BUF_ERROR next call, see above\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn Z_OK;\r\n\t\t\t\t\t// If flush != Z_NO_FLUSH && avail_out === 0, the next call\r\n\t\t\t\t\t// of deflate should use the same flush parameter to make sure\r\n\t\t\t\t\t// that the flush is complete. So we don't have to output an\r\n\t\t\t\t\t// empty block here, this will be done at next call. This also\r\n\t\t\t\t\t// ensures that for a very small output buffer, we emit at most\r\n\t\t\t\t\t// one empty block.\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (bstate == BlockDone) {\r\n\t\t\t\t\tif (flush == Z_PARTIAL_FLUSH) {\r\n\t\t\t\t\t\t_tr_align();\r\n\t\t\t\t\t} else { // FULL_FLUSH or SYNC_FLUSH\r\n\t\t\t\t\t\t_tr_stored_block(0, 0, false);\r\n\t\t\t\t\t\t// For a full flush, this empty block will be recognized\r\n\t\t\t\t\t\t// as a special marker by inflate_sync().\r\n\t\t\t\t\t\tif (flush == Z_FULL_FLUSH) {\r\n\t\t\t\t\t\t\t// state.head[s.hash_size-1]=0;\r\n\t\t\t\t\t\t\tfor (i = 0; i < hash_size/*-1*/; i++)\r\n\t\t\t\t\t\t\t\t// forget history\r\n\t\t\t\t\t\t\t\thead[i] = 0;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tstrm.flush_pending();\r\n\t\t\t\t\tif (strm.avail_out === 0) {\r\n\t\t\t\t\t\tlast_flush = -1; // avoid BUF_ERROR at next call, see above\r\n\t\t\t\t\t\treturn Z_OK;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (flush != Z_FINISH)\r\n\t\t\t\treturn Z_OK;\r\n\t\t\treturn Z_STREAM_END;\r\n\t\t};\r\n\t}\r\n\r\n\t// ZStream\r\n\r\n\tfunction ZStream() {\r\n\t\tvar that = this;\r\n\t\tthat.next_in_index = 0;\r\n\t\tthat.next_out_index = 0;\r\n\t\t// that.next_in; // next input byte\r\n\t\tthat.avail_in = 0; // number of bytes available at next_in\r\n\t\tthat.total_in = 0; // total nb of input bytes read so far\r\n\t\t// that.next_out; // next output byte should be put there\r\n\t\tthat.avail_out = 0; // remaining free space at next_out\r\n\t\tthat.total_out = 0; // total nb of bytes output so far\r\n\t\t// that.msg;\r\n\t\t// that.dstate;\r\n\t}\r\n\r\n\tZStream.prototype = {\r\n\t\tdeflateInit: function (level, bits) {\r\n\t\t\tvar that = this;\r\n\t\t\tthat.dstate = new Deflate();\r\n\t\t\tif (!bits)\r\n\t\t\t\tbits = MAX_BITS;\r\n\t\t\treturn that.dstate.deflateInit(that, level, bits);\r\n\t\t},\r\n\r\n\t\tdeflate: function (flush) {\r\n\t\t\tvar that = this;\r\n\t\t\tif (!that.dstate) {\r\n\t\t\t\treturn Z_STREAM_ERROR;\r\n\t\t\t}\r\n\t\t\treturn that.dstate.deflate(that, flush);\r\n\t\t},\r\n\r\n\t\tdeflateEnd: function () {\r\n\t\t\tvar that = this;\r\n\t\t\tif (!that.dstate)\r\n\t\t\t\treturn Z_STREAM_ERROR;\r\n\t\t\tvar ret = that.dstate.deflateEnd();\r\n\t\t\tthat.dstate = null;\r\n\t\t\treturn ret;\r\n\t\t},\r\n\r\n\t\tdeflateParams: function (level, strategy) {\r\n\t\t\tvar that = this;\r\n\t\t\tif (!that.dstate)\r\n\t\t\t\treturn Z_STREAM_ERROR;\r\n\t\t\treturn that.dstate.deflateParams(that, level, strategy);\r\n\t\t},\r\n\r\n\t\tdeflateSetDictionary: function (dictionary, dictLength) {\r\n\t\t\tvar that = this;\r\n\t\t\tif (!that.dstate)\r\n\t\t\t\treturn Z_STREAM_ERROR;\r\n\t\t\treturn that.dstate.deflateSetDictionary(that, dictionary, dictLength);\r\n\t\t},\r\n\r\n\t\t// Read a new buffer from the current input stream, update the\r\n\t\t// total number of bytes read. All deflate() input goes through\r\n\t\t// this function so some applications may wish to modify it to avoid\r\n\t\t// allocating a large strm->next_in buffer and copying from it.\r\n\t\t// (See also flush_pending()).\r\n\t\tread_buf: function (buf, start, size) {\r\n\t\t\tvar that = this;\r\n\t\t\tvar len = that.avail_in;\r\n\t\t\tif (len > size)\r\n\t\t\t\tlen = size;\r\n\t\t\tif (len === 0)\r\n\t\t\t\treturn 0;\r\n\t\t\tthat.avail_in -= len;\r\n\t\t\tbuf.set(that.next_in.subarray(that.next_in_index, that.next_in_index + len), start);\r\n\t\t\tthat.next_in_index += len;\r\n\t\t\tthat.total_in += len;\r\n\t\t\treturn len;\r\n\t\t},\r\n\r\n\t\t// Flush as much pending output as possible. All deflate() output goes\r\n\t\t// through this function so some applications may wish to modify it\r\n\t\t// to avoid allocating a large strm->next_out buffer and copying into it.\r\n\t\t// (See also read_buf()).\r\n\t\tflush_pending: function () {\r\n\t\t\tvar that = this;\r\n\t\t\tvar len = that.dstate.pending;\r\n\r\n\t\t\tif (len > that.avail_out)\r\n\t\t\t\tlen = that.avail_out;\r\n\t\t\tif (len === 0)\r\n\t\t\t\treturn;\r\n\r\n\t\t\t// if (that.dstate.pending_buf.length <= that.dstate.pending_out || that.next_out.length <= that.next_out_index\r\n\t\t\t// || that.dstate.pending_buf.length < (that.dstate.pending_out + len) || that.next_out.length < (that.next_out_index +\r\n\t\t\t// len)) {\r\n\t\t\t// console.log(that.dstate.pending_buf.length + \", \" + that.dstate.pending_out + \", \" + that.next_out.length + \", \" +\r\n\t\t\t// that.next_out_index + \", \" + len);\r\n\t\t\t// console.log(\"avail_out=\" + that.avail_out);\r\n\t\t\t// }\r\n\r\n\t\t\tthat.next_out.set(that.dstate.pending_buf.subarray(that.dstate.pending_out, that.dstate.pending_out + len), that.next_out_index);\r\n\r\n\t\t\tthat.next_out_index += len;\r\n\t\t\tthat.dstate.pending_out += len;\r\n\t\t\tthat.total_out += len;\r\n\t\t\tthat.avail_out -= len;\r\n\t\t\tthat.dstate.pending -= len;\r\n\t\t\tif (that.dstate.pending === 0) {\r\n\t\t\t\tthat.dstate.pending_out = 0;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\t// Deflater\r\n\r\n\tfunction Deflater(level) {\r\n\t\tvar that = this;\r\n\t\tvar z = new ZStream();\r\n\t\tvar bufsize = 512;\r\n\t\tvar flush = Z_NO_FLUSH;\r\n\t\tvar buf = new Uint8Array(bufsize);\r\n\r\n\t\tif (typeof level == \"undefined\")\r\n\t\t\tlevel = Z_DEFAULT_COMPRESSION;\r\n\t\tz.deflateInit(level);\r\n\t\tz.next_out = buf;\r\n\r\n\t\tthat.append = function (data, onprogress) {\r\n\t\t\tvar err, buffers = [], lastIndex = 0, bufferIndex = 0, bufferSize = 0, array;\r\n\t\t\tif (!data.length)\r\n\t\t\t\treturn;\r\n\t\t\tz.next_in_index = 0;\r\n\t\t\tz.next_in = data;\r\n\t\t\tz.avail_in = data.length;\r\n\t\t\tdo {\r\n\t\t\t\tz.next_out_index = 0;\r\n\t\t\t\tz.avail_out = bufsize;\r\n\t\t\t\terr = z.deflate(flush);\r\n\t\t\t\tif (err != Z_OK)\r\n\t\t\t\t\tthrow \"deflating: \" + z.msg;\r\n\t\t\t\tif (z.next_out_index)\r\n\t\t\t\t\tif (z.next_out_index == bufsize)\r\n\t\t\t\t\t\tbuffers.push(new Uint8Array(buf));\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tbuffers.push(new Uint8Array(buf.subarray(0, z.next_out_index)));\r\n\t\t\t\tbufferSize += z.next_out_index;\r\n\t\t\t\tif (onprogress && z.next_in_index > 0 && z.next_in_index != lastIndex) {\r\n\t\t\t\t\tonprogress(z.next_in_index);\r\n\t\t\t\t\tlastIndex = z.next_in_index;\r\n\t\t\t\t}\r\n\t\t\t} while (z.avail_in > 0 || z.avail_out === 0);\r\n\t\t\tarray = new Uint8Array(bufferSize);\r\n\t\t\tbuffers.forEach(function (chunk) {\r\n\t\t\t\tarray.set(chunk, bufferIndex);\r\n\t\t\t\tbufferIndex += chunk.length;\r\n\t\t\t});\r\n\t\t\treturn array;\r\n\t\t};\r\n\t\tthat.flush = function () {\r\n\t\t\tvar err, buffers = [], bufferIndex = 0, bufferSize = 0, array;\r\n\t\t\tdo {\r\n\t\t\t\tz.next_out_index = 0;\r\n\t\t\t\tz.avail_out = bufsize;\r\n\t\t\t\terr = z.deflate(Z_FINISH);\r\n\t\t\t\tif (err != Z_STREAM_END && err != Z_OK)\r\n\t\t\t\t\tthrow \"deflating: \" + z.msg;\r\n\t\t\t\tif (bufsize - z.avail_out > 0)\r\n\t\t\t\t\tbuffers.push(new Uint8Array(buf.subarray(0, z.next_out_index)));\r\n\t\t\t\tbufferSize += z.next_out_index;\r\n\t\t\t} while (z.avail_in > 0 || z.avail_out === 0);\r\n\t\t\tz.deflateEnd();\r\n\t\t\tarray = new Uint8Array(bufferSize);\r\n\t\t\tbuffers.forEach(function (chunk) {\r\n\t\t\t\tarray.set(chunk, bufferIndex);\r\n\t\t\t\tbufferIndex += chunk.length;\r\n\t\t\t});\r\n\t\t\treturn array;\r\n\t\t};\r\n\t}\r\n\r\n\r\n\t/*\r\n\t * Copyright (c) 2012 chick307 <chick307@gmail.com>\r\n\t *\r\n\t * Licensed under the MIT License.\r\n\t * http://opensource.org/licenses/mit-license\r\n\t */\r\n\r\n\t/*var fVoid = function (global, callback) {\r\n\t\tif (typeof module === 'object') {\r\n\t\t\tmodule.exports = callback();\r\n\t\t} else if (typeof define === 'function') {\r\n\t\t\tdefine(callback);\r\n\t\t} else {\r\n\t\t\tglobal.adler32cs = callback();\r\n\t\t}\r\n\t}(this, function () {\r\n\t\tvar _hasArrayBuffer = typeof ArrayBuffer === 'function' &&\r\n\t\t\ttypeof Uint8Array === 'function';\r\n\r\n\t\tvar _Buffer = null, _isBuffer = (function () {\r\n\t\t\tif (!_hasArrayBuffer)\r\n\t\t\t\treturn function _isBuffer() { return false };\r\n\r\n\t\t\ttry {\r\n\t\t\t\tvar buffer = require('buffer');\r\n\t\t\t\tif (typeof buffer.Buffer === 'function')\r\n\t\t\t\t\t_Buffer = buffer.Buffer;\r\n\t\t\t} catch (error) { }\r\n\r\n\t\t\treturn function _isBuffer(value) {\r\n\t\t\t\treturn value instanceof ArrayBuffer ||\r\n\t\t\t\t\t_Buffer !== null && value instanceof _Buffer;\r\n\t\t\t};\r\n\t\t}());\r\n\r\n\t\tvar _utf8ToBinary = (function () {\r\n\t\t\tif (_Buffer !== null) {\r\n\t\t\t\treturn function _utf8ToBinary(utf8String) {\r\n\t\t\t\t\treturn new _Buffer(utf8String, 'utf8').toString('binary');\r\n\t\t\t\t};\r\n\t\t\t} else {\r\n\t\t\t\treturn function _utf8ToBinary(utf8String) {\r\n\t\t\t\t\treturn unescape(encodeURIComponent(utf8String));\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t}());\r\n\r\n\t\tvar MOD = 65521;\r\n\r\n\t\tvar _update = function _update(checksum, binaryString) {\r\n\t\t\tvar a = checksum & 0xFFFF, b = checksum >>> 16;\r\n\t\t\tfor (var i = 0, length = binaryString.length; i < length; i++) {\r\n\t\t\t\ta = (a + (binaryString.charCodeAt(i) & 0xFF)) % MOD;\r\n\t\t\t\tb = (b + a) % MOD;\r\n\t\t\t}\r\n\t\t\treturn (b << 16 | a) >>> 0;\r\n\t\t};\r\n\r\n\t\tvar _updateUint8Array = function _updateUint8Array(checksum, uint8Array) {\r\n\t\t\tvar a = checksum & 0xFFFF, b = checksum >>> 16;\r\n\t\t\tfor (var i = 0, length = uint8Array.length, x; i < length; i++) {\r\n\t\t\t\ta = (a + uint8Array[i]) % MOD;\r\n\t\t\t\tb = (b + a) % MOD;\r\n\t\t\t}\r\n\t\t\treturn (b << 16 | a) >>> 0\r\n\t\t};\r\n\r\n\t\tvar exports = {};\r\n\r\n\t\tvar Adler32 = exports.Adler32 = (function () {\r\n\t\t\tvar ctor = function Adler32(checksum) {\r\n\t\t\t\tif (!(this instanceof ctor)) {\r\n\t\t\t\t\tthrow new TypeError(\r\n\t\t\t\t\t\t'Constructor cannot called be as a function.');\r\n\t\t\t\t}\r\n\t\t\t\tif (!isFinite(checksum = checksum == null ? 1 : +checksum)) {\r\n\t\t\t\t\tthrow new Error(\r\n\t\t\t\t\t\t'First arguments needs to be a finite number.');\r\n\t\t\t\t}\r\n\t\t\t\tthis.checksum = checksum >>> 0;\r\n\t\t\t};\r\n\r\n\t\t\tvar proto = ctor.prototype = {};\r\n\t\t\tproto.constructor = ctor;\r\n\r\n\t\t\tctor.from = function (from) {\r\n\t\t\t\tfrom.prototype = proto;\r\n\t\t\t\treturn from;\r\n\t\t\t}(function from(binaryString) {\r\n\t\t\t\tif (!(this instanceof ctor)) {\r\n\t\t\t\t\tthrow new TypeError(\r\n\t\t\t\t\t\t'Constructor cannot called be as a function.');\r\n\t\t\t\t}\r\n\t\t\t\tif (binaryString == null)\r\n\t\t\t\t\tthrow new Error('First argument needs to be a string.');\r\n\t\t\t\tthis.checksum = _update(1, binaryString.toString());\r\n\t\t\t});\r\n\r\n\t\t\tctor.fromUtf8 = function (fromUtf8) {\r\n\t\t\t\tfromUtf8.prototype = proto;\r\n\t\t\t\treturn fromUtf8;\r\n\t\t\t}(function fromUtf8(utf8String) {\r\n\t\t\t\tif (!(this instanceof ctor)) {\r\n\t\t\t\t\tthrow new TypeError(\r\n\t\t\t\t\t\t'Constructor cannot called be as a function.');\r\n\t\t\t\t}\r\n\t\t\t\tif (utf8String == null)\r\n\t\t\t\t\tthrow new Error('First argument needs to be a string.');\r\n\t\t\t\tvar binaryString = _utf8ToBinary(utf8String.toString());\r\n\t\t\t\tthis.checksum = _update(1, binaryString);\r\n\t\t\t});\r\n\r\n\t\t\tif (_hasArrayBuffer) {\r\n\t\t\t\tctor.fromBuffer = function (fromBuffer) {\r\n\t\t\t\t\tfromBuffer.prototype = proto;\r\n\t\t\t\t\treturn fromBuffer;\r\n\t\t\t\t}(function fromBuffer(buffer) {\r\n\t\t\t\t\tif (!(this instanceof ctor)) {\r\n\t\t\t\t\t\tthrow new TypeError(\r\n\t\t\t\t\t\t\t'Constructor cannot called be as a function.');\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!_isBuffer(buffer))\r\n\t\t\t\t\t\tthrow new Error('First argument needs to be ArrayBuffer.');\r\n\t\t\t\t\tvar array = new Uint8Array(buffer);\r\n\t\t\t\t\treturn this.checksum = _updateUint8Array(1, array);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tproto.update = function update(binaryString) {\r\n\t\t\t\tif (binaryString == null)\r\n\t\t\t\t\tthrow new Error('First argument needs to be a string.');\r\n\t\t\t\tbinaryString = binaryString.toString();\r\n\t\t\t\treturn this.checksum = _update(this.checksum, binaryString);\r\n\t\t\t};\r\n\r\n\t\t\tproto.updateUtf8 = function updateUtf8(utf8String) {\r\n\t\t\t\tif (utf8String == null)\r\n\t\t\t\t\tthrow new Error('First argument needs to be a string.');\r\n\t\t\t\tvar binaryString = _utf8ToBinary(utf8String.toString());\r\n\t\t\t\treturn this.checksum = _update(this.checksum, binaryString);\r\n\t\t\t};\r\n\r\n\t\t\tif (_hasArrayBuffer) {\r\n\t\t\t\tproto.updateBuffer = function updateBuffer(buffer) {\r\n\t\t\t\t\tif (!_isBuffer(buffer))\r\n\t\t\t\t\t\tthrow new Error('First argument needs to be ArrayBuffer.');\r\n\t\t\t\t\tvar array = new Uint8Array(buffer);\r\n\t\t\t\t\treturn this.checksum = _updateUint8Array(this.checksum, array);\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\tproto.clone = function clone() {\r\n\t\t\t\treturn new Adler32(this.checksum);\r\n\t\t\t};\r\n\r\n\t\t\treturn ctor;\r\n\t\t}());\r\n\r\n\t\texports.from = function from(binaryString) {\r\n\t\t\tif (binaryString == null)\r\n\t\t\t\tthrow new Error('First argument needs to be a string.');\r\n\t\t\treturn _update(1, binaryString.toString());\r\n\t\t};\r\n\r\n\t\texports.fromUtf8 = function fromUtf8(utf8String) {\r\n\t\t\tif (utf8String == null)\r\n\t\t\t\tthrow new Error('First argument needs to be a string.');\r\n\t\t\tvar binaryString = _utf8ToBinary(utf8String.toString());\r\n\t\t\treturn _update(1, binaryString);\r\n\t\t};\r\n\r\n\t\tif (_hasArrayBuffer) {\r\n\t\t\texports.fromBuffer = function fromBuffer(buffer) {\r\n\t\t\t\tif (!_isBuffer(buffer))\r\n\t\t\t\t\tthrow new Error('First argument need to be ArrayBuffer.');\r\n\t\t\t\tvar array = new Uint8Array(buffer);\r\n\t\t\t\treturn _updateUint8Array(1, array);\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\treturn exports;\r\n\t});\r\n\r\n\r\n*/\r\n\r\n\tvar JSZip = function (data, options) { this.files = {}; this.root = \"\"; if (data) this.load(data, options); }\r\n\tJSZip.signature = { LOCAL_FILE_HEADER: \"\\x50\\x4b\\x03\\x04\", CENTRAL_FILE_HEADER: \"\\x50\\x4b\\x01\\x02\", CENTRAL_DIRECTORY_END: \"\\x50\\x4b\\x05\\x06\", ZIP64_CENTRAL_DIRECTORY_LOCATOR: \"\\x50\\x4b\\x06\\x07\", ZIP64_CENTRAL_DIRECTORY_END: \"\\x50\\x4b\\x06\\x06\", DATA_DESCRIPTOR: \"\\x50\\x4b\\x07\\x08\" }; JSZip.defaults = { base64: false, binary: false, dir: false, date: null }; JSZip.prototype = (function () {\r\n\t\tvar ZipObject = function (name, data, options) { this.name = name; this.data = data; this.options = options; }; ZipObject.prototype = {\r\n\t\t\tasText: function () { return this.options.binary ? JSZip.prototype.utf8decode(this.data) : this.data; }, asBinary: function () { return this.options.binary ? this.data : JSZip.prototype.utf8encode(this.data); }\r\n\t\t}; var decToHex = function (dec, bytes) {\r\n\t\t\tvar hex = \"\", i; for (i = 0; i < bytes; i++) { hex += String.fromCharCode(dec & 0xff); dec = dec >>> 8; }\r\n\t\t\treturn hex;\r\n\t\t}; var extend = function () {\r\n\t\t\tvar result = {}, i, attr; for (i = 0; i < arguments.length; i++) {\r\n\t\t\t\tfor (attr in arguments[i]) {\r\n\t\t\t\t\tif (typeof result[attr] === \"undefined\") { result[attr] = arguments[i][attr]; }\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t}; var prepareFileAttrs = function (o) { o = o || {}; if (o.base64 === true && o.binary == null) o.binary = true; o = extend(o, JSZip.defaults); o.date = o.date || new Date(); return o; }\r\n\t\tvar fileAdd = function (name, data, o) { var parent = parentFolder(name); if (parent) folderAdd.call(this, parent); o = prepareFileAttrs(o); return this.files[name] = { name: name, data: data, options: o }; }; var parentFolder = function (path) {\r\n\t\t\tif (path.slice(-1) == '/') { path = path.substring(0, path.length - 1); }\r\n\t\t\tvar lastSlash = path.lastIndexOf('/'); return (lastSlash > 0) ? path.substring(0, lastSlash) : \"\";\r\n\t\t}; var folderAdd = function (name) {\r\n\t\t\tif (name.slice(-1) != \"/\") name += \"/\"; if (!this.files[name]) { var parent = parentFolder(name); if (parent) folderAdd.call(this, parent); fileAdd.call(this, name, '', { dir: true }); }\r\n\t\t\treturn this.files[name];\r\n\t\t}; var prepareLocalHeaderData = function (file, utfEncodedFileName, compressionType) { var useUTF8 = utfEncodedFileName !== file.name, data = file.data, o = file.options, dosTime, dosDate; dosTime = o.date.getHours(); dosTime = dosTime << 6; dosTime = dosTime | o.date.getMinutes(); dosTime = dosTime << 5; dosTime = dosTime | o.date.getSeconds() / 2; dosDate = o.date.getFullYear() - 1980; dosDate = dosDate << 4; dosDate = dosDate | (o.date.getMonth() + 1); dosDate = dosDate << 5; dosDate = dosDate | o.date.getDate(); if (o.base64 === true) data = JSZipBase64.decode(data); if (o.binary === false) data = this.utf8encode(data); var compression = JSZip.compressions[compressionType]; var compressedData = compression.compress(data); var header = \"\"; header += \"\\x0A\\x00\"; header += useUTF8 ? \"\\x00\\x08\" : \"\\x00\\x00\"; header += compression.magic; header += decToHex(dosTime, 2); header += decToHex(dosDate, 2); header += decToHex(this.crc32(data), 4); header += decToHex(compressedData.length, 4); header += decToHex(data.length, 4); header += decToHex(utfEncodedFileName.length, 2); header += \"\\x00\\x00\"; return { header: header, compressedData: compressedData }; }; return {\r\n\t\t\tload: function (stream, options) { throw new Error(\"Load method is not defined. Is the file jszip-load.js included ?\"); }, filter: function (search) {\r\n\t\t\t\tvar result = [], filename, relativePath, file, fileClone; for (filename in this.files) {\r\n\t\t\t\t\tfile = this.files[filename]; fileClone = new ZipObject(file.name, file.data, extend(file.options)); relativePath = filename.slice(this.root.length, filename.length); if (filename.slice(0, this.root.length) === this.root && search(relativePath, fileClone)) { result.push(fileClone); }\r\n\t\t\t\t}\r\n\t\t\t\treturn result;\r\n\t\t\t}, file: function (name, data, o) {\r\n\t\t\t\tif (arguments.length === 1) {\r\n\t\t\t\t\tif (name instanceof RegExp) { var regexp = name; return this.filter(function (relativePath, file) { return !file.options.dir && regexp.test(relativePath); }); }\r\n\t\t\t\t\telse { return this.filter(function (relativePath, file) { return !file.options.dir && relativePath === name; })[0] || null; }\r\n\t\t\t\t}\r\n\t\t\t\telse { name = this.root + name; fileAdd.call(this, name, data, o); }\r\n\t\t\t\treturn this;\r\n\t\t\t}, folder: function (arg) {\r\n\t\t\t\tif (!arg) { throw new Error(\"folder : wrong argument\"); }\r\n\t\t\t\tif (arg instanceof RegExp) { return this.filter(function (relativePath, file) { return file.options.dir && arg.test(relativePath); }); }\r\n\t\t\t\tvar name = this.root + arg; var newFolder = folderAdd.call(this, name); var ret = this.clone(); ret.root = newFolder.name; return ret;\r\n\t\t\t}, remove: function (name) {\r\n\t\t\t\tname = this.root + name; var file = this.files[name]; if (!file) { if (name.slice(-1) != \"/\") name += \"/\"; file = this.files[name]; }\r\n\t\t\t\tif (file) {\r\n\t\t\t\t\tif (!file.options.dir) { delete this.files[name]; }\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tvar kids = this.filter(function (relativePath, file) { return file.name.slice(0, name.length) === name; }); for (var i = 0; i < kids.length; i++) { delete this.files[kids[i].name]; }\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn this;\r\n\t\t\t}, generate: function (options) {\r\n\t\t\t\toptions = extend(options || {}, { base64: true, compression: \"STORE\" }); var compression = options.compression.toUpperCase(); var directory = [], files = [], fileOffset = 0; if (!JSZip.compressions[compression]) { throw compression + \" is not a valid compression method !\"; }\r\n\t\t\t\tfor (var name in this.files) {\r\n\t\t\t\t\tif (!this.files.hasOwnProperty(name)) { continue; }\r\n\t\t\t\t\tvar file = this.files[name]; var utfEncodedFileName = this.utf8encode(file.name); var fileRecord = \"\", dirRecord = \"\", data = prepareLocalHeaderData.call(this, file, utfEncodedFileName, compression); fileRecord = JSZip.signature.LOCAL_FILE_HEADER + data.header + utfEncodedFileName + data.compressedData; dirRecord = JSZip.signature.CENTRAL_FILE_HEADER + \"\\x14\\x00\" +\r\n\t\t\t\t\t\tdata.header + \"\\x00\\x00\" + \"\\x00\\x00\" + \"\\x00\\x00\" +\r\n\t\t\t\t\t\t(this.files[name].dir === true ? \"\\x10\\x00\\x00\\x00\" : \"\\x00\\x00\\x00\\x00\") +\r\n\t\t\t\t\t\tdecToHex(fileOffset, 4) +\r\n\t\t\t\t\t\tutfEncodedFileName; fileOffset += fileRecord.length; files.push(fileRecord); directory.push(dirRecord);\r\n\t\t\t\t}\r\n\t\t\t\tvar fileData = files.join(\"\"); var dirData = directory.join(\"\"); var dirEnd = \"\"; dirEnd = JSZip.signature.CENTRAL_DIRECTORY_END + \"\\x00\\x00\" + \"\\x00\\x00\" +\r\n\t\t\t\t\tdecToHex(files.length, 2) +\r\n\t\t\t\t\tdecToHex(files.length, 2) +\r\n\t\t\t\t\tdecToHex(dirData.length, 4) +\r\n\t\t\t\t\tdecToHex(fileData.length, 4) + \"\\x00\\x00\"; var zip = fileData + dirData + dirEnd; return (options.base64) ? JSZipBase64.encode(zip) : zip;\r\n\t\t\t}, crc32: function (str, crc) {\r\n\t\t\t\tif (str === \"\" || typeof str === \"undefined\") return 0; var table = \"00000000 77073096 EE0E612C 990951BA 076DC419 706AF48F E963A535 9E6495A3 0EDB8832 79DCB8A4 E0D5E91E 97D2D988 09B64C2B 7EB17CBD E7B82D07 90BF1D91 1DB71064 6AB020F2 F3B97148 84BE41DE 1ADAD47D 6DDDE4EB F4D4B551 83D385C7 136C9856 646BA8C0 FD62F97A 8A65C9EC 14015C4F 63066CD9 FA0F3D63 8D080DF5 3B6E20C8 4C69105E D56041E4 A2677172 3C03E4D1 4B04D447 D20D85FD A50AB56B 35B5A8FA 42B2986C DBBBC9D6 ACBCF940 32D86CE3 45DF5C75 DCD60DCF ABD13D59 26D930AC 51DE003A C8D75180 BFD06116 21B4F4B5 56B3C423 CFBA9599 B8BDA50F 2802B89E 5F058808 C60CD9B2 B10BE924 2F6F7C87 58684C11 C1611DAB B6662D3D 76DC4190 01DB7106 98D220BC EFD5102A 71B18589 06B6B51F 9FBFE4A5 E8B8D433 7807C9A2 0F00F934 9609A88E E10E9818 7F6A0DBB 086D3D2D 91646C97 E6635C01 6B6B51F4 1C6C6162 856530D8 F262004E 6C0695ED 1B01A57B 8208F4C1 F50FC457 65B0D9C6 12B7E950 8BBEB8EA FCB9887C 62DD1DDF 15DA2D49 8CD37CF3 FBD44C65 4DB26158 3AB551CE A3BC0074 D4BB30E2 4ADFA541 3DD895D7 A4D1C46D D3D6F4FB 4369E96A 346ED9FC AD678846 DA60B8D0 44042D73 33031DE5 AA0A4C5F DD0D7CC9 5005713C 270241AA BE0B1010 C90C2086 5768B525 206F85B3 B966D409 CE61E49F 5EDEF90E 29D9C998 B0D09822 C7D7A8B4 59B33D17 2EB40D81 B7BD5C3B C0BA6CAD EDB88320 9ABFB3B6 03B6E20C 74B1D29A EAD54739 9DD277AF 04DB2615 73DC1683 E3630B12 94643B84 0D6D6A3E 7A6A5AA8 E40ECF0B 9309FF9D 0A00AE27 7D079EB1 F00F9344 8708A3D2 1E01F268 6906C2FE F762575D 806567CB 196C3671 6E6B06E7 FED41B76 89D32BE0 10DA7A5A 67DD4ACC F9B9DF6F 8EBEEFF9 17B7BE43 60B08ED5 D6D6A3E8 A1D1937E 38D8C2C4 4FDFF252 D1BB67F1 A6BC5767 3FB506DD 48B2364B D80D2BDA AF0A1B4C 36034AF6 41047A60 DF60EFC3 A867DF55 316E8EEF 4669BE79 CB61B38C BC66831A 256FD2A0 5268E236 CC0C7795 BB0B4703 220216B9 5505262F C5BA3BBE B2BD0B28 2BB45A92 5CB36A04 C2D7FFA7 B5D0CF31 2CD99E8B 5BDEAE1D 9B64C2B0 EC63F226 756AA39C 026D930A 9C0906A9 EB0E363F 72076785 05005713 95BF4A82 E2B87A14 7BB12BAE 0CB61B38 92D28E9B E5D5BE0D 7CDCEFB7 0BDBDF21 86D3D2D4 F1D4E242 68DDB3F8 1FDA836E 81BE16CD F6B9265B 6FB077E1 18B74777 88085AE6 FF0F6A70 66063BCA 11010B5C 8F659EFF F862AE69 616BFFD3 166CCF45 A00AE278 D70DD2EE 4E048354 3903B3C2 A7672661 D06016F7 4969474D 3E6E77DB AED16A4A D9D65ADC 40DF0B66 37D83BF0 A9BCAE53 DEBB9EC5 47B2CF7F 30B5FFE9 BDBDF21C CABAC28A 53B39330 24B4A3A6 BAD03605 CDD70693 54DE5729 23D967BF B3667A2E C4614AB8 5D681B02 2A6F2B94 B40BBE37 C30C8EA1 5A05DF1B 2D02EF8D\"; if (typeof (crc) == \"undefined\") { crc = 0; }\r\n\t\t\t\tvar x = 0; var y = 0; crc = crc ^ (-1); for (var i = 0, iTop = str.length; i < iTop; i++) { y = (crc ^ str.charCodeAt(i)) & 0xFF; x = \"0x\" + table.substr(y * 9, 8); crc = (crc >>> 8) ^ x; }\r\n\t\t\t\treturn crc ^ (-1);\r\n\t\t\t}, clone: function () {\r\n\t\t\t\tvar newObj = new JSZip(); for (var i in this) {\r\n\t\t\t\t\tif (typeof this[i] !== \"function\") { newObj[i] = this[i]; }\r\n\t\t\t\t}\r\n\t\t\t\treturn newObj;\r\n\t\t\t}, utf8encode: function (string) {\r\n\t\t\t\tstring = string.replace(/\\r\\n/g, \"\\n\"); var utftext = \"\"; for (var n = 0; n < string.length; n++) {\r\n\t\t\t\t\tvar c = string.charCodeAt(n); if (c < 128) { utftext += String.fromCharCode(c); }\r\n\t\t\t\t\telse if ((c > 127) && (c < 2048)) { utftext += String.fromCharCode((c >> 6) | 192); utftext += String.fromCharCode((c & 63) | 128); }\r\n\t\t\t\t\telse { utftext += String.fromCharCode((c >> 12) | 224); utftext += String.fromCharCode(((c >> 6) & 63) | 128); utftext += String.fromCharCode((c & 63) | 128); }\r\n\t\t\t\t}\r\n\t\t\t\treturn utftext;\r\n\t\t\t}, utf8decode: function (utftext) {\r\n\t\t\t\tvar string = \"\"; var i = 0; var c = 0, c1 = 0, c2 = 0, c3 = 0; while (i < utftext.length) {\r\n\t\t\t\t\tc = utftext.charCodeAt(i); if (c < 128) { string += String.fromCharCode(c); i++; }\r\n\t\t\t\t\telse if ((c > 191) && (c < 224)) { c2 = utftext.charCodeAt(i + 1); string += String.fromCharCode(((c & 31) << 6) | (c2 & 63)); i += 2; }\r\n\t\t\t\t\telse { c2 = utftext.charCodeAt(i + 1); c3 = utftext.charCodeAt(i + 2); string += String.fromCharCode(((c & 15) << 12) | ((c2 & 63) << 6) | (c3 & 63)); i += 3; }\r\n\t\t\t\t}\r\n\t\t\t\treturn string;\r\n\t\t\t}\r\n\t\t};\r\n\t})(); JSZip.compressions = {\r\n\t\t\"STORE\": {\r\n\t\t\tmagic: \"\\x00\\x00\", compress: function (content) { return content; }, uncompress: function (content) { return content; }\r\n\t\t}\r\n\t}; var JSZipBase64 = function () {\r\n\t\tvar _keyStr = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\"; return {\r\n\t\t\tencode: function (input, utf8) {\r\n\t\t\t\tvar output = \"\"; var chr1, chr2, chr3, enc1, enc2, enc3, enc4; var i = 0; while (i < input.length) {\r\n\t\t\t\t\tchr1 = input.charCodeAt(i++); chr2 = input.charCodeAt(i++); chr3 = input.charCodeAt(i++); enc1 = chr1 >> 2; enc2 = ((chr1 & 3) << 4) | (chr2 >> 4); enc3 = ((chr2 & 15) << 2) | (chr3 >> 6); enc4 = chr3 & 63; if (isNaN(chr2)) { enc3 = enc4 = 64; } else if (isNaN(chr3)) { enc4 = 64; }\r\n\t\t\t\t\toutput = output +\r\n\t\t\t\t\t\t_keyStr.charAt(enc1) + _keyStr.charAt(enc2) +\r\n\t\t\t\t\t\t_keyStr.charAt(enc3) + _keyStr.charAt(enc4);\r\n\t\t\t\t}\r\n\t\t\t\treturn output;\r\n\t\t\t}, decode: function (input, utf8) {\r\n\t\t\t\tvar output = \"\"; var chr1, chr2, chr3; var enc1, enc2, enc3, enc4; var i = 0; input = input.replace(/[^A-Za-z0-9\\+\\/\\=]/g, \"\"); while (i < input.length) {\r\n\t\t\t\t\tenc1 = _keyStr.indexOf(input.charAt(i++)); enc2 = _keyStr.indexOf(input.charAt(i++)); enc3 = _keyStr.indexOf(input.charAt(i++)); enc4 = _keyStr.indexOf(input.charAt(i++)); chr1 = (enc1 << 2) | (enc2 >> 4); chr2 = ((enc2 & 15) << 4) | (enc3 >> 2); chr3 = ((enc3 & 3) << 6) | enc4; output = output + String.fromCharCode(chr1); if (enc3 != 64) { output = output + String.fromCharCode(chr2); }\r\n\t\t\t\t\tif (enc4 != 64) { output = output + String.fromCharCode(chr3); }\r\n\t\t\t\t}\r\n\t\t\t\treturn output;\r\n\t\t\t}\r\n\t\t};\r\n\t}();\r\n\r\n\r\n\tif (!JSZip) { throw \"JSZip not defined\"; }\r\n\t(function () {\r\n\t\tvar zip_WSIZE = 32768; var zip_STORED_BLOCK = 0; var zip_STATIC_TREES = 1; var zip_DYN_TREES = 2; var zip_DEFAULT_LEVEL = 6; var zip_FULL_SEARCH = true; var zip_INBUFSIZ = 32768; var zip_INBUF_EXTRA = 64; var zip_OUTBUFSIZ = 1024 * 8; var zip_window_size = 2 * zip_WSIZE; var zip_MIN_MATCH = 3; var zip_MAX_MATCH = 258; var zip_BITS = 16; var zip_LIT_BUFSIZE = 0x2000; var zip_HASH_BITS = 13; if (zip_LIT_BUFSIZE > zip_INBUFSIZ)\r\n\t\t\talert(\"error: zip_INBUFSIZ is too small\"); if ((zip_WSIZE << 1) > (1 << zip_BITS))\r\n\t\t\talert(\"error: zip_WSIZE is too large\"); if (zip_HASH_BITS > zip_BITS - 1)\r\n\t\t\talert(\"error: zip_HASH_BITS is too large\"); if (zip_HASH_BITS < 8 || zip_MAX_MATCH != 258)\r\n\t\t\talert(\"error: Code too clever\"); var zip_DIST_BUFSIZE = zip_LIT_BUFSIZE; var zip_HASH_SIZE = 1 << zip_HASH_BITS; var zip_HASH_MASK = zip_HASH_SIZE - 1; var zip_WMASK = zip_WSIZE - 1; var zip_NIL = 0; var zip_TOO_FAR = 4096; var zip_MIN_LOOKAHEAD = zip_MAX_MATCH + zip_MIN_MATCH + 1; var zip_MAX_DIST = zip_WSIZE - zip_MIN_LOOKAHEAD; var zip_SMALLEST = 1; var zip_MAX_BITS = 15; var zip_MAX_BL_BITS = 7; var zip_LENGTH_CODES = 29; var zip_LITERALS = 256; var zip_END_BLOCK = 256; var zip_L_CODES = zip_LITERALS + 1 + zip_LENGTH_CODES; var zip_D_CODES = 30; var zip_BL_CODES = 19; var zip_REP_3_6 = 16; var zip_REPZ_3_10 = 17; var zip_REPZ_11_138 = 18; var zip_HEAP_SIZE = 2 * zip_L_CODES + 1; var zip_H_SHIFT = parseInt((zip_HASH_BITS + zip_MIN_MATCH - 1) / zip_MIN_MATCH); var zip_free_queue; var zip_qhead, zip_qtail; var zip_initflag; var zip_outbuf = null; var zip_outcnt, zip_outoff; var zip_complete; var zip_window; var zip_d_buf; var zip_l_buf; var zip_prev; var zip_bi_buf; var zip_bi_valid; var zip_block_start; var zip_ins_h; var zip_hash_head; var zip_prev_match; var zip_match_available; var zip_match_length; var zip_prev_length; var zip_strstart; var zip_match_start; var zip_eofile; var zip_lookahead; var zip_max_chain_length; var zip_max_lazy_match; var zip_compr_level; var zip_good_match; var zip_nice_match; var zip_dyn_ltree; var zip_dyn_dtree; var zip_static_ltree; var zip_static_dtree; var zip_bl_tree; var zip_l_desc; var zip_d_desc; var zip_bl_desc; var zip_bl_count; var zip_heap; var zip_heap_len; var zip_heap_max; var zip_depth; var zip_length_code; var zip_dist_code; var zip_base_length; var zip_base_dist; var zip_flag_buf; var zip_last_lit; var zip_last_dist; var zip_last_flags; var zip_flags; var zip_flag_bit; var zip_opt_len; var zip_static_len; var zip_deflate_data; var zip_deflate_pos; var zip_DeflateCT = function () { this.fc = 0; this.dl = 0; }\r\n\t\tvar zip_DeflateTreeDesc = function () { this.dyn_tree = null; this.static_tree = null; this.extra_bits = null; this.extra_base = 0; this.elems = 0; this.max_length = 0; this.max_code = 0; }\r\n\t\tvar zip_DeflateConfiguration = function (a, b, c, d) { this.good_length = a; this.max_lazy = b; this.nice_length = c; this.max_chain = d; }\r\n\t\tvar zip_DeflateBuffer = function () { this.next = null; this.len = 0; this.ptr = new Array(zip_OUTBUFSIZ); this.off = 0; }\r\n\t\tvar zip_extra_lbits = new Array(0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0); var zip_extra_dbits = new Array(0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13); var zip_extra_blbits = new Array(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 3, 7); var zip_bl_order = new Array(16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15); var zip_configuration_table = new Array(new zip_DeflateConfiguration(0, 0, 0, 0), new zip_DeflateConfiguration(4, 4, 8, 4), new zip_DeflateConfiguration(4, 5, 16, 8), new zip_DeflateConfiguration(4, 6, 32, 32), new zip_DeflateConfiguration(4, 4, 16, 16), new zip_DeflateConfiguration(8, 16, 32, 32), new zip_DeflateConfiguration(8, 16, 128, 128), new zip_DeflateConfiguration(8, 32, 128, 256), new zip_DeflateConfiguration(32, 128, 258, 1024), new zip_DeflateConfiguration(32, 258, 258, 4096)); var zip_deflate_start = function (level) {\r\n\t\t\tvar i; if (!level)\r\n\t\t\t\tlevel = zip_DEFAULT_LEVEL; else if (level < 1)\r\n\t\t\t\tlevel = 1; else if (level > 9)\r\n\t\t\t\tlevel = 9; zip_compr_level = level; zip_initflag = false; zip_eofile = false; if (zip_outbuf != null)\r\n\t\t\t\treturn; zip_free_queue = zip_qhead = zip_qtail = null; zip_outbuf = new Array(zip_OUTBUFSIZ); zip_window = new Array(zip_window_size); zip_d_buf = new Array(zip_DIST_BUFSIZE); zip_l_buf = new Array(zip_INBUFSIZ + zip_INBUF_EXTRA); zip_prev = new Array(1 << zip_BITS); zip_dyn_ltree = new Array(zip_HEAP_SIZE); for (i = 0; i < zip_HEAP_SIZE; i++)\r\n\t\t\t\tzip_dyn_ltree[i] = new zip_DeflateCT(); zip_dyn_dtree = new Array(2 * zip_D_CODES + 1); for (i = 0; i < 2 * zip_D_CODES + 1; i++)\r\n\t\t\t\tzip_dyn_dtree[i] = new zip_DeflateCT(); zip_static_ltree = new Array(zip_L_CODES + 2); for (i = 0; i < zip_L_CODES + 2; i++)\r\n\t\t\t\tzip_static_ltree[i] = new zip_DeflateCT(); zip_static_dtree = new Array(zip_D_CODES); for (i = 0; i < zip_D_CODES; i++)\r\n\t\t\t\tzip_static_dtree[i] = new zip_DeflateCT(); zip_bl_tree = new Array(2 * zip_BL_CODES + 1); for (i = 0; i < 2 * zip_BL_CODES + 1; i++)\r\n\t\t\t\tzip_bl_tree[i] = new zip_DeflateCT(); zip_l_desc = new zip_DeflateTreeDesc(); zip_d_desc = new zip_DeflateTreeDesc(); zip_bl_desc = new zip_DeflateTreeDesc(); zip_bl_count = new Array(zip_MAX_BITS + 1); zip_heap = new Array(2 * zip_L_CODES + 1); zip_depth = new Array(2 * zip_L_CODES + 1); zip_length_code = new Array(zip_MAX_MATCH - zip_MIN_MATCH + 1); zip_dist_code = new Array(512); zip_base_length = new Array(zip_LENGTH_CODES); zip_base_dist = new Array(zip_D_CODES); zip_flag_buf = new Array(parseInt(zip_LIT_BUFSIZE / 8));\r\n\t\t}\r\n\t\tvar zip_deflate_end = function () { zip_free_queue = zip_qhead = zip_qtail = null; zip_outbuf = null; zip_window = null; zip_d_buf = null; zip_l_buf = null; zip_prev = null; zip_dyn_ltree = null; zip_dyn_dtree = null; zip_static_ltree = null; zip_static_dtree = null; zip_bl_tree = null; zip_l_desc = null; zip_d_desc = null; zip_bl_desc = null; zip_bl_count = null; zip_heap = null; zip_depth = null; zip_length_code = null; zip_dist_code = null; zip_base_length = null; zip_base_dist = null; zip_flag_buf = null; }\r\n\t\tvar zip_reuse_queue = function (p) { p.next = zip_free_queue; zip_free_queue = p; }\r\n\t\tvar zip_new_queue = function () {\r\n\t\t\tvar p; if (zip_free_queue != null) { p = zip_free_queue; zip_free_queue = zip_free_queue.next; }\r\n\t\t\telse\r\n\t\t\t\tp = new zip_DeflateBuffer(); p.next = null; p.len = p.off = 0; return p;\r\n\t\t}\r\n\t\tvar zip_head1 = function (i) { return zip_prev[zip_WSIZE + i]; }\r\n\t\tvar zip_head2 = function (i, val) { return zip_prev[zip_WSIZE + i] = val; }\r\n\t\tvar zip_put_byte = function (c) {\r\n\t\tzip_outbuf[zip_outoff + zip_outcnt++] = c; if (zip_outoff + zip_outcnt == zip_OUTBUFSIZ)\r\n\t\t\tzip_qoutbuf();\r\n\t\t}\r\n\t\tvar zip_put_short = function (w) { w &= 0xffff; if (zip_outoff + zip_outcnt < zip_OUTBUFSIZ - 2) { zip_outbuf[zip_outoff + zip_outcnt++] = (w & 0xff); zip_outbuf[zip_outoff + zip_outcnt++] = (w >>> 8); } else { zip_put_byte(w & 0xff); zip_put_byte(w >>> 8); } }\r\n\t\tvar zip_INSERT_STRING = function () { zip_ins_h = ((zip_ins_h << zip_H_SHIFT) ^ (zip_window[zip_strstart + zip_MIN_MATCH - 1] & 0xff)) & zip_HASH_MASK; zip_hash_head = zip_head1(zip_ins_h); zip_prev[zip_strstart & zip_WMASK] = zip_hash_head; zip_head2(zip_ins_h, zip_strstart); }\r\n\t\tvar zip_SEND_CODE = function (c, tree) { zip_send_bits(tree[c].fc, tree[c].dl); }\r\n\t\tvar zip_D_CODE = function (dist) { return (dist < 256 ? zip_dist_code[dist] : zip_dist_code[256 + (dist >> 7)]) & 0xff; }\r\n\t\tvar zip_SMALLER = function (tree, n, m) { return tree[n].fc < tree[m].fc || (tree[n].fc == tree[m].fc && zip_depth[n] <= zip_depth[m]); }\r\n\t\tvar zip_read_buff = function (buff, offset, n) {\r\n\t\t\tvar i; for (i = 0; i < n && zip_deflate_pos < zip_deflate_data.length; i++)\r\n\t\t\t\tbuff[offset + i] = zip_deflate_data.charCodeAt(zip_deflate_pos++) & 0xff; return i;\r\n\t\t}\r\n\t\tvar zip_lm_init = function () {\r\n\t\t\tvar j; for (j = 0; j < zip_HASH_SIZE; j++)\r\n\t\t\t\tzip_prev[zip_WSIZE + j] = 0; zip_max_lazy_match = zip_configuration_table[zip_compr_level].max_lazy; zip_good_match = zip_configuration_table[zip_compr_level].good_length; if (!zip_FULL_SEARCH)\r\n\t\t\t\tzip_nice_match = zip_configuration_table[zip_compr_level].nice_length; zip_max_chain_length = zip_configuration_table[zip_compr_level].max_chain; zip_strstart = 0; zip_block_start = 0; zip_lookahead = zip_read_buff(zip_window, 0, 2 * zip_WSIZE); if (zip_lookahead <= 0) { zip_eofile = true; zip_lookahead = 0; return; }\r\n\t\t\tzip_eofile = false; while (zip_lookahead < zip_MIN_LOOKAHEAD && !zip_eofile)\r\n\t\t\t\tzip_fill_window(); zip_ins_h = 0; for (j = 0; j < zip_MIN_MATCH - 1; j++) { zip_ins_h = ((zip_ins_h << zip_H_SHIFT) ^ (zip_window[j] & 0xff)) & zip_HASH_MASK; }\r\n\t\t}\r\n\t\tvar zip_longest_match = function (cur_match) {\r\n\t\t\tvar chain_length = zip_max_chain_length; var scanp = zip_strstart; var matchp; var len; var best_len = zip_prev_length; var limit = (zip_strstart > zip_MAX_DIST ? zip_strstart - zip_MAX_DIST : zip_NIL); var strendp = zip_strstart + zip_MAX_MATCH; var scan_end1 = zip_window[scanp + best_len - 1]; var scan_end = zip_window[scanp + best_len]; if (zip_prev_length >= zip_good_match)\r\n\t\t\t\tchain_length >>= 2; do {\r\n\t\t\t\t\tmatchp = cur_match; if (zip_window[matchp + best_len] != scan_end || zip_window[matchp + best_len - 1] != scan_end1 || zip_window[matchp] != zip_window[scanp] || zip_window[++matchp] != zip_window[scanp + 1]) { continue; }\r\n\t\t\t\t\tscanp += 2; matchp++; do { } while (zip_window[++scanp] == zip_window[++matchp] && zip_window[++scanp] == zip_window[++matchp] && zip_window[++scanp] == zip_window[++matchp] && zip_window[++scanp] == zip_window[++matchp] && zip_window[++scanp] == zip_window[++matchp] && zip_window[++scanp] == zip_window[++matchp] && zip_window[++scanp] == zip_window[++matchp] && zip_window[++scanp] == zip_window[++matchp] && scanp < strendp); len = zip_MAX_MATCH - (strendp - scanp); scanp = strendp - zip_MAX_MATCH; if (len > best_len) {\r\n\t\t\t\t\t\tzip_match_start = cur_match; best_len = len; if (zip_FULL_SEARCH) { if (len >= zip_MAX_MATCH) break; } else { if (len >= zip_nice_match) break; }\r\n\t\t\t\t\t\tscan_end1 = zip_window[scanp + best_len - 1]; scan_end = zip_window[scanp + best_len];\r\n\t\t\t\t\t}\r\n\t\t\t\t} while ((cur_match = zip_prev[cur_match & zip_WMASK]) > limit && --chain_length != 0); return best_len;\r\n\t\t}\r\n\t\tvar zip_fill_window = function () {\r\n\t\t\tvar n, m; var more = zip_window_size - zip_lookahead - zip_strstart; if (more == -1) { more--; } else if (zip_strstart >= zip_WSIZE + zip_MAX_DIST) {\r\n\t\t\t\tfor (n = 0; n < zip_WSIZE; n++)\r\n\t\t\t\t\tzip_window[n] = zip_window[n + zip_WSIZE]; zip_match_start -= zip_WSIZE; zip_strstart -= zip_WSIZE; zip_block_start -= zip_WSIZE; for (n = 0; n < zip_HASH_SIZE; n++) { m = zip_head1(n); zip_head2(n, m >= zip_WSIZE ? m - zip_WSIZE : zip_NIL); }\r\n\t\t\t\tfor (n = 0; n < zip_WSIZE; n++) { m = zip_prev[n]; zip_prev[n] = (m >= zip_WSIZE ? m - zip_WSIZE : zip_NIL); }\r\n\t\t\t\tmore += zip_WSIZE;\r\n\t\t\t}\r\n\t\t\tif (!zip_eofile) {\r\n\t\t\t\tn = zip_read_buff(zip_window, zip_strstart + zip_lookahead, more); if (n <= 0)\r\n\t\t\t\t\tzip_eofile = true; else\r\n\t\t\t\t\tzip_lookahead += n;\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar zip_deflate_fast = function () {\r\n\t\t\twhile (zip_lookahead != 0 && zip_qhead == null) {\r\n\t\t\t\tvar flush; zip_INSERT_STRING(); if (zip_hash_head != zip_NIL && zip_strstart - zip_hash_head <= zip_MAX_DIST) {\r\n\t\t\t\t\tzip_match_length = zip_longest_match(zip_hash_head); if (zip_match_length > zip_lookahead)\r\n\t\t\t\t\t\tzip_match_length = zip_lookahead;\r\n\t\t\t\t}\r\n\t\t\t\tif (zip_match_length >= zip_MIN_MATCH) { flush = zip_ct_tally(zip_strstart - zip_match_start, zip_match_length - zip_MIN_MATCH); zip_lookahead -= zip_match_length; if (zip_match_length <= zip_max_lazy_match) { zip_match_length--; do { zip_strstart++; zip_INSERT_STRING(); } while (--zip_match_length != 0); zip_strstart++; } else { zip_strstart += zip_match_length; zip_match_length = 0; zip_ins_h = zip_window[zip_strstart] & 0xff; zip_ins_h = ((zip_ins_h << zip_H_SHIFT) ^ (zip_window[zip_strstart + 1] & 0xff)) & zip_HASH_MASK; } } else { flush = zip_ct_tally(0, zip_window[zip_strstart] & 0xff); zip_lookahead--; zip_strstart++; }\r\n\t\t\t\tif (flush) { zip_flush_block(0); zip_block_start = zip_strstart; }\r\n\t\t\t\twhile (zip_lookahead < zip_MIN_LOOKAHEAD && !zip_eofile)\r\n\t\t\t\t\tzip_fill_window();\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar zip_deflate_better = function () {\r\n\t\t\twhile (zip_lookahead != 0 && zip_qhead == null) {\r\n\t\t\t\tzip_INSERT_STRING(); zip_prev_length = zip_match_length; zip_prev_match = zip_match_start; zip_match_length = zip_MIN_MATCH - 1; if (zip_hash_head != zip_NIL && zip_prev_length < zip_max_lazy_match && zip_strstart - zip_hash_head <= zip_MAX_DIST) {\r\n\t\t\t\t\tzip_match_length = zip_longest_match(zip_hash_head); if (zip_match_length > zip_lookahead)\r\n\t\t\t\t\t\tzip_match_length = zip_lookahead; if (zip_match_length == zip_MIN_MATCH && zip_strstart - zip_match_start > zip_TOO_FAR) { zip_match_length--; }\r\n\t\t\t\t}\r\n\t\t\t\tif (zip_prev_length >= zip_MIN_MATCH && zip_match_length <= zip_prev_length) { var flush; flush = zip_ct_tally(zip_strstart - 1 - zip_prev_match, zip_prev_length - zip_MIN_MATCH); zip_lookahead -= zip_prev_length - 1; zip_prev_length -= 2; do { zip_strstart++; zip_INSERT_STRING(); } while (--zip_prev_length != 0); zip_match_available = 0; zip_match_length = zip_MIN_MATCH - 1; zip_strstart++; if (flush) { zip_flush_block(0); zip_block_start = zip_strstart; } } else if (zip_match_available != 0) {\r\n\t\t\t\t\tif (zip_ct_tally(0, zip_window[zip_strstart - 1] & 0xff)) { zip_flush_block(0); zip_block_start = zip_strstart; }\r\n\t\t\t\t\tzip_strstart++; zip_lookahead--;\r\n\t\t\t\t} else { zip_match_available = 1; zip_strstart++; zip_lookahead--; }\r\n\t\t\t\twhile (zip_lookahead < zip_MIN_LOOKAHEAD && !zip_eofile)\r\n\t\t\t\t\tzip_fill_window();\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar zip_init_deflate = function () {\r\n\t\t\tif (zip_eofile)\r\n\t\t\t\treturn; zip_bi_buf = 0; zip_bi_valid = 0; zip_ct_init(); zip_lm_init(); zip_qhead = null; zip_outcnt = 0; zip_outoff = 0; if (zip_compr_level <= 3) { zip_prev_length = zip_MIN_MATCH - 1; zip_match_length = 0; }\r\n\t\t\telse { zip_match_length = zip_MIN_MATCH - 1; zip_match_available = 0; }\r\n\t\t\tzip_complete = false;\r\n\t\t}\r\n\t\tvar zip_deflate_internal = function (buff, off, buff_size) {\r\n\t\t\tvar n; if (!zip_initflag) { zip_init_deflate(); zip_initflag = true; if (zip_lookahead == 0) { zip_complete = true; return 0; } }\r\n\t\t\tif ((n = zip_qcopy(buff, off, buff_size)) == buff_size)\r\n\t\t\t\treturn buff_size; if (zip_complete)\r\n\t\t\t\treturn n; if (zip_compr_level <= 3)\r\n\t\t\t\tzip_deflate_fast(); else\r\n\t\t\t\tzip_deflate_better(); if (zip_lookahead == 0) {\r\n\t\t\t\t\tif (zip_match_available != 0)\r\n\t\t\t\t\t\tzip_ct_tally(0, zip_window[zip_strstart - 1] & 0xff); zip_flush_block(1); zip_complete = true;\r\n\t\t\t\t}\r\n\t\t\treturn n + zip_qcopy(buff, n + off, buff_size - n);\r\n\t\t}\r\n\t\tvar zip_qcopy = function (buff, off, buff_size) {\r\n\t\t\tvar n, i, j; n = 0; while (zip_qhead != null && n < buff_size) {\r\n\t\t\t\ti = buff_size - n; if (i > zip_qhead.len)\r\n\t\t\t\t\ti = zip_qhead.len; for (j = 0; j < i; j++)\r\n\t\t\t\t\tbuff[off + n + j] = zip_qhead.ptr[zip_qhead.off + j]; zip_qhead.off += i; zip_qhead.len -= i; n += i; if (zip_qhead.len == 0) { var p; p = zip_qhead; zip_qhead = zip_qhead.next; zip_reuse_queue(p); }\r\n\t\t\t}\r\n\t\t\tif (n == buff_size)\r\n\t\t\t\treturn n; if (zip_outoff < zip_outcnt) {\r\n\t\t\t\t\ti = buff_size - n; if (i > zip_outcnt - zip_outoff)\r\n\t\t\t\t\t\ti = zip_outcnt - zip_outoff; for (j = 0; j < i; j++)\r\n\t\t\t\t\t\tbuff[off + n + j] = zip_outbuf[zip_outoff + j]; zip_outoff += i; n += i; if (zip_outcnt == zip_outoff)\r\n\t\t\t\t\t\tzip_outcnt = zip_outoff = 0;\r\n\t\t\t\t}\r\n\t\t\treturn n;\r\n\t\t}\r\n\t\tvar zip_ct_init = function () {\r\n\t\t\tvar n; var bits; var length; var code; var dist; if (zip_static_dtree[0].dl != 0) return; zip_l_desc.dyn_tree = zip_dyn_ltree; zip_l_desc.static_tree = zip_static_ltree; zip_l_desc.extra_bits = zip_extra_lbits; zip_l_desc.extra_base = zip_LITERALS + 1; zip_l_desc.elems = zip_L_CODES; zip_l_desc.max_length = zip_MAX_BITS; zip_l_desc.max_code = 0; zip_d_desc.dyn_tree = zip_dyn_dtree; zip_d_desc.static_tree = zip_static_dtree; zip_d_desc.extra_bits = zip_extra_dbits; zip_d_desc.extra_base = 0; zip_d_desc.elems = zip_D_CODES; zip_d_desc.max_length = zip_MAX_BITS; zip_d_desc.max_code = 0; zip_bl_desc.dyn_tree = zip_bl_tree; zip_bl_desc.static_tree = null; zip_bl_desc.extra_bits = zip_extra_blbits; zip_bl_desc.extra_base = 0; zip_bl_desc.elems = zip_BL_CODES; zip_bl_desc.max_length = zip_MAX_BL_BITS; zip_bl_desc.max_code = 0; length = 0; for (code = 0; code < zip_LENGTH_CODES - 1; code++) {\r\n\t\t\tzip_base_length[code] = length; for (n = 0; n < (1 << zip_extra_lbits[code]); n++)\r\n\t\t\t\tzip_length_code[length++] = code;\r\n\t\t\t}\r\n\t\t\tzip_length_code[length - 1] = code; dist = 0; for (code = 0; code < 16; code++) { zip_base_dist[code] = dist; for (n = 0; n < (1 << zip_extra_dbits[code]); n++) { zip_dist_code[dist++] = code; } }\r\n\t\t\tdist >>= 7; for (; code < zip_D_CODES; code++) {\r\n\t\t\tzip_base_dist[code] = dist << 7; for (n = 0; n < (1 << (zip_extra_dbits[code] - 7)); n++)\r\n\t\t\t\tzip_dist_code[256 + dist++] = code;\r\n\t\t\t}\r\n\t\t\tfor (bits = 0; bits <= zip_MAX_BITS; bits++)\r\n\t\t\t\tzip_bl_count[bits] = 0; n = 0; while (n <= 143) { zip_static_ltree[n++].dl = 8; zip_bl_count[8]++; }\r\n\t\t\twhile (n <= 255) { zip_static_ltree[n++].dl = 9; zip_bl_count[9]++; }\r\n\t\t\twhile (n <= 279) { zip_static_ltree[n++].dl = 7; zip_bl_count[7]++; }\r\n\t\t\twhile (n <= 287) { zip_static_ltree[n++].dl = 8; zip_bl_count[8]++; }\r\n\t\t\tzip_gen_codes(zip_static_ltree, zip_L_CODES + 1); for (n = 0; n < zip_D_CODES; n++) { zip_static_dtree[n].dl = 5; zip_static_dtree[n].fc = zip_bi_reverse(n, 5); }\r\n\t\t\tzip_init_block();\r\n\t\t}\r\n\t\tvar zip_init_block = function () { var n; for (n = 0; n < zip_L_CODES; n++)zip_dyn_ltree[n].fc = 0; for (n = 0; n < zip_D_CODES; n++)zip_dyn_dtree[n].fc = 0; for (n = 0; n < zip_BL_CODES; n++)zip_bl_tree[n].fc = 0; zip_dyn_ltree[zip_END_BLOCK].fc = 1; zip_opt_len = zip_static_len = 0; zip_last_lit = zip_last_dist = zip_last_flags = 0; zip_flags = 0; zip_flag_bit = 1; }\r\n\t\tvar zip_pqdownheap = function (tree, k) {\r\n\t\t\tvar v = zip_heap[k]; var j = k << 1; while (j <= zip_heap_len) {\r\n\t\t\t\tif (j < zip_heap_len && zip_SMALLER(tree, zip_heap[j + 1], zip_heap[j]))\r\n\t\t\t\t\tj++; if (zip_SMALLER(tree, v, zip_heap[j]))\r\n\t\t\t\t\tbreak; zip_heap[k] = zip_heap[j]; k = j; j <<= 1;\r\n\t\t\t}\r\n\t\t\tzip_heap[k] = v;\r\n\t\t}\r\n\t\tvar zip_gen_bitlen = function (desc) {\r\n\t\t\tvar tree = desc.dyn_tree; var extra = desc.extra_bits; var base = desc.extra_base; var max_code = desc.max_code; var max_length = desc.max_length; var stree = desc.static_tree; var h; var n, m; var bits; var xbits; var f; var overflow = 0; for (bits = 0; bits <= zip_MAX_BITS; bits++)\r\n\t\t\t\tzip_bl_count[bits] = 0; tree[zip_heap[zip_heap_max]].dl = 0; for (h = zip_heap_max + 1; h < zip_HEAP_SIZE; h++) {\r\n\t\t\t\t\tn = zip_heap[h]; bits = tree[tree[n].dl].dl + 1; if (bits > max_length) { bits = max_length; overflow++; }\r\n\t\t\t\t\ttree[n].dl = bits; if (n > max_code)\r\n\t\t\t\t\t\tcontinue; zip_bl_count[bits]++; xbits = 0; if (n >= base)\r\n\t\t\t\t\t\txbits = extra[n - base]; f = tree[n].fc; zip_opt_len += f * (bits + xbits); if (stree != null)\r\n\t\t\t\t\t\tzip_static_len += f * (stree[n].dl + xbits);\r\n\t\t\t\t}\r\n\t\t\tif (overflow == 0)\r\n\t\t\t\treturn; do {\r\n\t\t\t\t\tbits = max_length - 1; while (zip_bl_count[bits] == 0)\r\n\t\t\t\t\t\tbits--; zip_bl_count[bits]--; zip_bl_count[bits + 1] += 2; zip_bl_count[max_length]--; overflow -= 2;\r\n\t\t\t\t} while (overflow > 0); for (bits = max_length; bits != 0; bits--) {\r\n\t\t\t\t\tn = zip_bl_count[bits]; while (n != 0) {\r\n\t\t\t\t\t\tm = zip_heap[--h]; if (m > max_code)\r\n\t\t\t\t\t\t\tcontinue; if (tree[m].dl != bits) { zip_opt_len += (bits - tree[m].dl) * tree[m].fc; tree[m].fc = bits; }\r\n\t\t\t\t\t\tn--;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t}\r\n\t\tvar zip_gen_codes = function (tree, max_code) {\r\n\t\t\tvar next_code = new Array(zip_MAX_BITS + 1); var code = 0; var bits; var n; for (bits = 1; bits <= zip_MAX_BITS; bits++) { code = ((code + zip_bl_count[bits - 1]) << 1); next_code[bits] = code; }\r\n\t\t\tfor (n = 0; n <= max_code; n++) {\r\n\t\t\t\tvar len = tree[n].dl; if (len == 0)\r\n\t\t\t\t\tcontinue; tree[n].fc = zip_bi_reverse(next_code[len]++, len);\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar zip_build_tree = function (desc) {\r\n\t\t\tvar tree = desc.dyn_tree; var stree = desc.static_tree; var elems = desc.elems; var n, m; var max_code = -1; var node = elems; zip_heap_len = 0; zip_heap_max = zip_HEAP_SIZE; for (n = 0; n < elems; n++) {\r\n\t\t\t\tif (tree[n].fc != 0) { zip_heap[++zip_heap_len] = max_code = n; zip_depth[n] = 0; } else\r\n\t\t\t\t\ttree[n].dl = 0;\r\n\t\t\t}\r\n\t\t\twhile (zip_heap_len < 2) {\r\n\t\t\t\tvar xnew = zip_heap[++zip_heap_len] = (max_code < 2 ? ++max_code : 0); tree[xnew].fc = 1; zip_depth[xnew] = 0; zip_opt_len--; if (stree != null)\r\n\t\t\t\t\tzip_static_len -= stree[xnew].dl;\r\n\t\t\t}\r\n\t\t\tdesc.max_code = max_code; for (n = zip_heap_len >> 1; n >= 1; n--)\r\n\t\t\t\tzip_pqdownheap(tree, n); do {\r\n\t\t\t\t\tn = zip_heap[zip_SMALLEST]; zip_heap[zip_SMALLEST] = zip_heap[zip_heap_len--]; zip_pqdownheap(tree, zip_SMALLEST); m = zip_heap[zip_SMALLEST]; zip_heap[--zip_heap_max] = n; zip_heap[--zip_heap_max] = m; tree[node].fc = tree[n].fc + tree[m].fc; if (zip_depth[n] > zip_depth[m] + 1)\r\n\t\t\t\t\t\tzip_depth[node] = zip_depth[n]; else\r\n\t\t\t\t\t\tzip_depth[node] = zip_depth[m] + 1; tree[n].dl = tree[m].dl = node; zip_heap[zip_SMALLEST] = node++; zip_pqdownheap(tree, zip_SMALLEST);\r\n\t\t\t\t} while (zip_heap_len >= 2); zip_heap[--zip_heap_max] = zip_heap[zip_SMALLEST]; zip_gen_bitlen(desc); zip_gen_codes(tree, max_code);\r\n\t\t}\r\n\t\tvar zip_scan_tree = function (tree, max_code) {\r\n\t\t\tvar n; var prevlen = -1; var curlen; var nextlen = tree[0].dl; var count = 0; var max_count = 7; var min_count = 4; if (nextlen == 0) { max_count = 138; min_count = 3; }\r\n\t\t\ttree[max_code + 1].dl = 0xffff; for (n = 0; n <= max_code; n++) {\r\n\t\t\t\tcurlen = nextlen; nextlen = tree[n + 1].dl; if (++count < max_count && curlen == nextlen)\r\n\t\t\t\t\tcontinue; else if (count < min_count)\r\n\t\t\t\t\tzip_bl_tree[curlen].fc += count; else if (curlen != 0) {\r\n\t\t\t\t\t\tif (curlen != prevlen)\r\n\t\t\t\t\t\t\tzip_bl_tree[curlen].fc++; zip_bl_tree[zip_REP_3_6].fc++;\r\n\t\t\t\t\t} else if (count <= 10)\r\n\t\t\t\t\tzip_bl_tree[zip_REPZ_3_10].fc++; else\r\n\t\t\t\t\tzip_bl_tree[zip_REPZ_11_138].fc++; count = 0; prevlen = curlen; if (nextlen == 0) { max_count = 138; min_count = 3; } else if (curlen == nextlen) { max_count = 6; min_count = 3; } else { max_count = 7; min_count = 4; }\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar zip_send_tree = function (tree, max_code) {\r\n\t\t\tvar n; var prevlen = -1; var curlen; var nextlen = tree[0].dl; var count = 0; var max_count = 7; var min_count = 4; if (nextlen == 0) { max_count = 138; min_count = 3; }\r\n\t\t\tfor (n = 0; n <= max_code; n++) {\r\n\t\t\t\tcurlen = nextlen; nextlen = tree[n + 1].dl; if (++count < max_count && curlen == nextlen) { continue; } else if (count < min_count) { do { zip_SEND_CODE(curlen, zip_bl_tree); } while (--count != 0); } else if (curlen != 0) {\r\n\t\t\t\t\tif (curlen != prevlen) { zip_SEND_CODE(curlen, zip_bl_tree); count--; }\r\n\t\t\t\t\tzip_SEND_CODE(zip_REP_3_6, zip_bl_tree); zip_send_bits(count - 3, 2);\r\n\t\t\t\t} else if (count <= 10) { zip_SEND_CODE(zip_REPZ_3_10, zip_bl_tree); zip_send_bits(count - 3, 3); } else { zip_SEND_CODE(zip_REPZ_11_138, zip_bl_tree); zip_send_bits(count - 11, 7); }\r\n\t\t\t\tcount = 0; prevlen = curlen; if (nextlen == 0) { max_count = 138; min_count = 3; } else if (curlen == nextlen) { max_count = 6; min_count = 3; } else { max_count = 7; min_count = 4; }\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar zip_build_bl_tree = function () {\r\n\t\t\tvar max_blindex; zip_scan_tree(zip_dyn_ltree, zip_l_desc.max_code); zip_scan_tree(zip_dyn_dtree, zip_d_desc.max_code); zip_build_tree(zip_bl_desc); for (max_blindex = zip_BL_CODES - 1; max_blindex >= 3; max_blindex--) { if (zip_bl_tree[zip_bl_order[max_blindex]].dl != 0) break; }\r\n\t\t\tzip_opt_len += 3 * (max_blindex + 1) + 5 + 5 + 4; return max_blindex;\r\n\t\t}\r\n\t\tvar zip_send_all_trees = function (lcodes, dcodes, blcodes) {\r\n\t\t\tvar rank; zip_send_bits(lcodes - 257, 5); zip_send_bits(dcodes - 1, 5); zip_send_bits(blcodes - 4, 4); for (rank = 0; rank < blcodes; rank++) { zip_send_bits(zip_bl_tree[zip_bl_order[rank]].dl, 3); }\r\n\t\t\tzip_send_tree(zip_dyn_ltree, lcodes - 1); zip_send_tree(zip_dyn_dtree, dcodes - 1);\r\n\t\t}\r\n\t\tvar zip_flush_block = function (eof) {\r\n\t\t\tvar opt_lenb, static_lenb; var max_blindex; var stored_len; stored_len = zip_strstart - zip_block_start; zip_flag_buf[zip_last_flags] = zip_flags; zip_build_tree(zip_l_desc); zip_build_tree(zip_d_desc); max_blindex = zip_build_bl_tree(); opt_lenb = (zip_opt_len + 3 + 7) >> 3; static_lenb = (zip_static_len + 3 + 7) >> 3; if (static_lenb <= opt_lenb)\r\n\t\t\t\topt_lenb = static_lenb; if (stored_len + 4 <= opt_lenb && zip_block_start >= 0) {\r\n\t\t\t\t\tvar i; zip_send_bits((zip_STORED_BLOCK << 1) + eof, 3); zip_bi_windup(); zip_put_short(stored_len); zip_put_short(~stored_len); for (i = 0; i < stored_len; i++)\r\n\t\t\t\t\t\tzip_put_byte(zip_window[zip_block_start + i]);\r\n\t\t\t\t} else if (static_lenb == opt_lenb) { zip_send_bits((zip_STATIC_TREES << 1) + eof, 3); zip_compress_block(zip_static_ltree, zip_static_dtree); } else { zip_send_bits((zip_DYN_TREES << 1) + eof, 3); zip_send_all_trees(zip_l_desc.max_code + 1, zip_d_desc.max_code + 1, max_blindex + 1); zip_compress_block(zip_dyn_ltree, zip_dyn_dtree); }\r\n\t\t\tzip_init_block(); if (eof != 0)\r\n\t\t\t\tzip_bi_windup();\r\n\t\t}\r\n\t\tvar zip_ct_tally = function (dist, lc) {\r\n\t\tzip_l_buf[zip_last_lit++] = lc; if (dist == 0) { zip_dyn_ltree[lc].fc++; } else { dist--; zip_dyn_ltree[zip_length_code[lc] + zip_LITERALS + 1].fc++; zip_dyn_dtree[zip_D_CODE(dist)].fc++; zip_d_buf[zip_last_dist++] = dist; zip_flags |= zip_flag_bit; }\r\n\t\t\tzip_flag_bit <<= 1; if ((zip_last_lit & 7) == 0) { zip_flag_buf[zip_last_flags++] = zip_flags; zip_flags = 0; zip_flag_bit = 1; }\r\n\t\t\tif (zip_compr_level > 2 && (zip_last_lit & 0xfff) == 0) {\r\n\t\t\t\tvar out_length = zip_last_lit * 8; var in_length = zip_strstart - zip_block_start; var dcode; for (dcode = 0; dcode < zip_D_CODES; dcode++) { out_length += zip_dyn_dtree[dcode].fc * (5 + zip_extra_dbits[dcode]); }\r\n\t\t\t\tout_length >>= 3; if (zip_last_dist < parseInt(zip_last_lit / 2) && out_length < parseInt(in_length / 2))\r\n\t\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn (zip_last_lit == zip_LIT_BUFSIZE - 1 || zip_last_dist == zip_DIST_BUFSIZE);\r\n\t\t}\r\n\t\tvar zip_compress_block = function (ltree, dtree) {\r\n\t\t\tvar dist; var lc; var lx = 0; var dx = 0; var fx = 0; var flag = 0; var code; var extra; if (zip_last_lit != 0) do {\r\n\t\t\t\tif ((lx & 7) == 0)\r\n\t\t\t\t\tflag = zip_flag_buf[fx++]; lc = zip_l_buf[lx++] & 0xff; if ((flag & 1) == 0) { zip_SEND_CODE(lc, ltree); } else {\r\n\t\t\t\t\t\tcode = zip_length_code[lc]; zip_SEND_CODE(code + zip_LITERALS + 1, ltree); extra = zip_extra_lbits[code]; if (extra != 0) { lc -= zip_base_length[code]; zip_send_bits(lc, extra); }\r\n\t\t\t\t\t\tdist = zip_d_buf[dx++]; code = zip_D_CODE(dist); zip_SEND_CODE(code, dtree); extra = zip_extra_dbits[code]; if (extra != 0) { dist -= zip_base_dist[code]; zip_send_bits(dist, extra); }\r\n\t\t\t\t\t}\r\n\t\t\t\tflag >>= 1;\r\n\t\t\t} while (lx < zip_last_lit); zip_SEND_CODE(zip_END_BLOCK, ltree);\r\n\t\t}\r\n\t\tvar zip_Buf_size = 16; var zip_send_bits = function (value, length) { if (zip_bi_valid > zip_Buf_size - length) { zip_bi_buf |= (value << zip_bi_valid); zip_put_short(zip_bi_buf); zip_bi_buf = (value >> (zip_Buf_size - zip_bi_valid)); zip_bi_valid += length - zip_Buf_size; } else { zip_bi_buf |= value << zip_bi_valid; zip_bi_valid += length; } }\r\n\t\tvar zip_bi_reverse = function (code, len) { var res = 0; do { res |= code & 1; code >>= 1; res <<= 1; } while (--len > 0); return res >> 1; }\r\n\t\tvar zip_bi_windup = function () {\r\n\t\t\tif (zip_bi_valid > 8) { zip_put_short(zip_bi_buf); } else if (zip_bi_valid > 0) { zip_put_byte(zip_bi_buf); }\r\n\t\t\tzip_bi_buf = 0; zip_bi_valid = 0;\r\n\t\t}\r\n\t\tvar zip_qoutbuf = function () {\r\n\t\t\tif (zip_outcnt != 0) {\r\n\t\t\t\tvar q, i; q = zip_new_queue(); if (zip_qhead == null)\r\n\t\t\t\t\tzip_qhead = zip_qtail = q; else\r\n\t\t\t\t\tzip_qtail = zip_qtail.next = q; q.len = zip_outcnt - zip_outoff; for (i = 0; i < q.len; i++)\r\n\t\t\t\t\tq.ptr[i] = zip_outbuf[zip_outoff + i]; zip_outcnt = zip_outoff = 0;\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar zip_deflate = function (str, level) {\r\n\t\t\tvar i, j; zip_deflate_data = str; zip_deflate_pos = 0; if (typeof level == \"undefined\")\r\n\t\t\t\tlevel = zip_DEFAULT_LEVEL; zip_deflate_start(level); var buff = new Array(1024); var aout = []; while ((i = zip_deflate_internal(buff, 0, buff.length)) > 0) {\r\n\t\t\t\t\tvar cbuf = new Array(i); for (j = 0; j < i; j++) { cbuf[j] = String.fromCharCode(buff[j]); }\r\n\t\t\t\t\taout[aout.length] = cbuf.join(\"\");\r\n\t\t\t\t}\r\n\t\t\tzip_deflate_data = null; return aout.join(\"\");\r\n\t\t}\r\n\t\tif (!JSZip.compressions[\"DEFLATE\"]) { JSZip.compressions[\"DEFLATE\"] = { magic: \"\\x08\\x00\", compress: zip_deflate } } else { JSZip.compressions[\"DEFLATE\"].compress = zip_deflate; }\r\n\t})();\r\n\r\n\r\n\tif (!JSZip) { throw \"JSZip not defined\"; }\r\n\t(function () {\r\n\t\tvar zip_fixed_bd; var zip_WSIZE = 32768; var zip_STORED_BLOCK = 0; var zip_STATIC_TREES = 1; var zip_DYN_TREES = 2; var zip_lbits = 9; var zip_dbits = 6; var zip_INBUFSIZ = 32768; var zip_INBUF_EXTRA = 64; var zip_slide; var zip_wp; var zip_fixed_tl = null; var zip_fixed_td; var zip_fixed_bl, fixed_bd; var zip_bit_buf; var zip_bit_len; var zip_method; var zip_eof; var zip_copy_leng; var zip_copy_dist; var zip_tl, zip_td; var zip_bl, zip_bd; var zip_inflate_data; var zip_inflate_pos; var zip_MASK_BITS = new Array(0x0000, 0x0001, 0x0003, 0x0007, 0x000f, 0x001f, 0x003f, 0x007f, 0x00ff, 0x01ff, 0x03ff, 0x07ff, 0x0fff, 0x1fff, 0x3fff, 0x7fff, 0xffff); var zip_cplens = new Array(3, 4, 5, 6, 7, 8, 9, 10, 11, 13, 15, 17, 19, 23, 27, 31, 35, 43, 51, 59, 67, 83, 99, 115, 131, 163, 195, 227, 258, 0, 0); var zip_cplext = new Array(0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0, 99, 99); var zip_cpdist = new Array(1, 2, 3, 4, 5, 7, 9, 13, 17, 25, 33, 49, 65, 97, 129, 193, 257, 385, 513, 769, 1025, 1537, 2049, 3073, 4097, 6145, 8193, 12289, 16385, 24577); var zip_cpdext = new Array(0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13); var zip_border = new Array(16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15); function zip_HuftList() { this.next = null; this.list = null; }\r\n\t\tfunction zip_HuftNode() { this.e = 0; this.b = 0; this.n = 0; this.t = null; }\r\n\t\tfunction zip_HuftBuild(b, n, s, d, e, mm) {\r\n\t\tthis.BMAX = 16; this.N_MAX = 288; this.status = 0; this.root = null; this.m = 0; {\r\n\t\t\tvar a; var c = new Array(this.BMAX + 1); var el; var f; var g; var h; var i; var j; var k; var lx = new Array(this.BMAX + 1); var p; var pidx; var q; var r = new zip_HuftNode(); var u = new Array(this.BMAX); var v = new Array(this.N_MAX); var w; var x = new Array(this.BMAX + 1); var xp; var y; var z; var o; var tail; tail = this.root = null; for (i = 0; i < c.length; i++)\r\n\t\t\t\tc[i] = 0; for (i = 0; i < lx.length; i++)\r\n\t\t\t\tlx[i] = 0; for (i = 0; i < u.length; i++)\r\n\t\t\t\tu[i] = null; for (i = 0; i < v.length; i++)\r\n\t\t\t\tv[i] = 0; for (i = 0; i < x.length; i++)\r\n\t\t\t\tx[i] = 0; el = n > 256 ? b[256] : this.BMAX; p = b; pidx = 0; i = n; do { c[p[pidx]]++; pidx++; } while (--i > 0); if (c[0] == n) { this.root = null; this.m = 0; this.status = 0; return; }\r\n\t\t\tfor (j = 1; j <= this.BMAX; j++)\r\n\t\t\t\tif (c[j] != 0)\r\n\t\t\t\t\tbreak; k = j; if (mm < j)\r\n\t\t\t\tmm = j; for (i = this.BMAX; i != 0; i--)\r\n\t\t\t\tif (c[i] != 0)\r\n\t\t\t\t\tbreak; g = i; if (mm > i)\r\n\t\t\t\tmm = i; for (y = 1 << j; j < i; j++ , y <<= 1)\r\n\t\t\t\tif ((y -= c[j]) < 0) { this.status = 2; this.m = mm; return; }\r\n\t\t\tif ((y -= c[i]) < 0) { this.status = 2; this.m = mm; return; }\r\n\t\t\tc[i] += y; x[1] = j = 0; p = c; pidx = 1; xp = 2; while (--i > 0)\r\n\t\t\t\tx[xp++] = (j += p[pidx++]); p = b; pidx = 0; i = 0; do {\r\n\t\t\t\t\tif ((j = p[pidx++]) != 0)\r\n\t\t\t\t\t\tv[x[j]++] = i;\r\n\t\t\t\t} while (++i < n); n = x[g]; x[0] = i = 0; p = v; pidx = 0; h = -1; w = lx[0] = 0; q = null; z = 0; for (; k <= g; k++) {\r\n\t\t\t\t\ta = c[k]; while (a-- > 0) {\r\n\t\t\t\t\t\twhile (k > w + lx[1 + h]) {\r\n\t\t\t\t\t\t\tw += lx[1 + h]; h++; z = (z = g - w) > mm ? mm : z; if ((f = 1 << (j = k - w)) > a + 1) {\r\n\t\t\t\t\t\t\t\tf -= a + 1; xp = k; while (++j < z) {\r\n\t\t\t\t\t\t\t\t\tif ((f <<= 1) <= c[++xp])\r\n\t\t\t\t\t\t\t\t\t\tbreak; f -= c[xp];\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (w + j > el && w < el)\r\n\t\t\t\t\t\t\t\tj = el - w; z = 1 << j; lx[1 + h] = j; q = new Array(z); for (o = 0; o < z; o++) { q[o] = new zip_HuftNode(); }\r\n\t\t\t\t\t\t\tif (tail == null)\r\n\t\t\t\t\t\t\t\ttail = this.root = new zip_HuftList(); else\r\n\t\t\t\t\t\t\t\ttail = tail.next = new zip_HuftList(); tail.next = null; tail.list = q; u[h] = q; if (h > 0) { x[h] = i; r.b = lx[h]; r.e = 16 + j; r.t = q; j = (i & ((1 << w) - 1)) >> (w - lx[h]); u[h - 1][j].e = r.e; u[h - 1][j].b = r.b; u[h - 1][j].n = r.n; u[h - 1][j].t = r.t; }\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tr.b = k - w; if (pidx >= n)\r\n\t\t\t\t\t\t\tr.e = 99; else if (p[pidx] < s) { r.e = (p[pidx] < 256 ? 16 : 15); r.n = p[pidx++]; } else { r.e = e[p[pidx] - s]; r.n = d[p[pidx++] - s]; }\r\n\t\t\t\t\t\tf = 1 << (k - w); for (j = i >> w; j < z; j += f) { q[j].e = r.e; q[j].b = r.b; q[j].n = r.n; q[j].t = r.t; }\r\n\t\t\t\t\t\tfor (j = 1 << (k - 1); (i & j) != 0; j >>= 1)\r\n\t\t\t\t\t\t\ti ^= j; i ^= j; while ((i & ((1 << w) - 1)) != x[h]) { w -= lx[h]; h--; }\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\tthis.m = lx[1]; this.status = ((y != 0 && g != 1) ? 1 : 0);\r\n\t\t}\r\n\t\t}\r\n\t\tfunction zip_GET_BYTE() {\r\n\t\t\tif (zip_inflate_data.length == zip_inflate_pos)\r\n\t\t\t\treturn -1; return zip_inflate_data.charCodeAt(zip_inflate_pos++) & 0xff;\r\n\t\t}\r\n\t\tfunction zip_NEEDBITS(n) { while (zip_bit_len < n) { zip_bit_buf |= zip_GET_BYTE() << zip_bit_len; zip_bit_len += 8; } }\r\n\t\tfunction zip_GETBITS(n) { return zip_bit_buf & zip_MASK_BITS[n]; }\r\n\t\tfunction zip_DUMPBITS(n) { zip_bit_buf >>= n; zip_bit_len -= n; }\r\n\t\tfunction zip_inflate_codes(buff, off, size) {\r\n\t\t\tvar e; var t; var n; if (size == 0)\r\n\t\t\t\treturn 0; n = 0; for (; ;) {\r\n\t\t\t\t\tzip_NEEDBITS(zip_bl); t = zip_tl.list[zip_GETBITS(zip_bl)]; e = t.e; while (e > 16) {\r\n\t\t\t\t\t\tif (e == 99)\r\n\t\t\t\t\t\t\treturn -1; zip_DUMPBITS(t.b); e -= 16; zip_NEEDBITS(e); t = t.t[zip_GETBITS(e)]; e = t.e;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tzip_DUMPBITS(t.b); if (e == 16) {\r\n\t\t\t\t\t\tzip_wp &= zip_WSIZE - 1; buff[off + n++] = zip_slide[zip_wp++] = t.n; if (n == size)\r\n\t\t\t\t\t\t\treturn size; continue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (e == 15)\r\n\t\t\t\t\t\tbreak; zip_NEEDBITS(e); zip_copy_leng = t.n + zip_GETBITS(e); zip_DUMPBITS(e); zip_NEEDBITS(zip_bd); t = zip_td.list[zip_GETBITS(zip_bd)]; e = t.e; while (e > 16) {\r\n\t\t\t\t\t\t\tif (e == 99)\r\n\t\t\t\t\t\t\t\treturn -1; zip_DUMPBITS(t.b); e -= 16; zip_NEEDBITS(e); t = t.t[zip_GETBITS(e)]; e = t.e;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\tzip_DUMPBITS(t.b); zip_NEEDBITS(e); zip_copy_dist = zip_wp - t.n - zip_GETBITS(e); zip_DUMPBITS(e); while (zip_copy_leng > 0 && n < size) { zip_copy_leng--; zip_copy_dist &= zip_WSIZE - 1; zip_wp &= zip_WSIZE - 1; buff[off + n++] = zip_slide[zip_wp++] = zip_slide[zip_copy_dist++]; }\r\n\t\t\t\t\tif (n == size)\r\n\t\t\t\t\t\treturn size;\r\n\t\t\t\t}\r\n\t\t\tzip_method = -1; return n;\r\n\t\t}\r\n\t\tfunction zip_inflate_stored(buff, off, size) {\r\n\t\t\tvar n; n = zip_bit_len & 7; zip_DUMPBITS(n); zip_NEEDBITS(16); n = zip_GETBITS(16); zip_DUMPBITS(16); zip_NEEDBITS(16); if (n != ((~zip_bit_buf) & 0xffff))\r\n\t\t\t\treturn -1; zip_DUMPBITS(16); zip_copy_leng = n; n = 0; while (zip_copy_leng > 0 && n < size) { zip_copy_leng--; zip_wp &= zip_WSIZE - 1; zip_NEEDBITS(8); buff[off + n++] = zip_slide[zip_wp++] = zip_GETBITS(8); zip_DUMPBITS(8); }\r\n\t\t\tif (zip_copy_leng == 0)\r\n\t\t\t\tzip_method = -1; return n;\r\n\t\t}\r\n\t\tfunction zip_inflate_fixed(buff, off, size) {\r\n\t\t\tif (zip_fixed_tl == null) {\r\n\t\t\t\tvar i; var l = new Array(288); var h; for (i = 0; i < 144; i++)\r\n\t\t\t\t\tl[i] = 8; for (; i < 256; i++)\r\n\t\t\t\t\tl[i] = 9; for (; i < 280; i++)\r\n\t\t\t\t\tl[i] = 7; for (; i < 288; i++)\r\n\t\t\t\t\tl[i] = 8; zip_fixed_bl = 7; h = new zip_HuftBuild(l, 288, 257, zip_cplens, zip_cplext, zip_fixed_bl); if (h.status != 0) { alert(\"HufBuild error: \" + h.status); return -1; }\r\n\t\t\t\tzip_fixed_tl = h.root; zip_fixed_bl = h.m; for (i = 0; i < 30; i++)\r\n\t\t\t\t\tl[i] = 5; zip_fixed_bd = 5; h = new zip_HuftBuild(l, 30, 0, zip_cpdist, zip_cpdext, zip_fixed_bd); if (h.status > 1) { zip_fixed_tl = null; alert(\"HufBuild error: \" + h.status); return -1; }\r\n\t\t\t\tzip_fixed_td = h.root; zip_fixed_bd = h.m;\r\n\t\t\t}\r\n\t\t\tzip_tl = zip_fixed_tl; zip_td = zip_fixed_td; zip_bl = zip_fixed_bl; zip_bd = zip_fixed_bd; return zip_inflate_codes(buff, off, size);\r\n\t\t}\r\n\t\tfunction zip_inflate_dynamic(buff, off, size) {\r\n\t\t\tvar i; var j; var l; var n; var t; var nb; var nl; var nd; var ll = new Array(286 + 30); var h; for (i = 0; i < ll.length; i++)\r\n\t\t\t\tll[i] = 0; zip_NEEDBITS(5); nl = 257 + zip_GETBITS(5); zip_DUMPBITS(5); zip_NEEDBITS(5); nd = 1 + zip_GETBITS(5); zip_DUMPBITS(5); zip_NEEDBITS(4); nb = 4 + zip_GETBITS(4); zip_DUMPBITS(4); if (nl > 286 || nd > 30)\r\n\t\t\t\treturn -1; for (j = 0; j < nb; j++) { zip_NEEDBITS(3); ll[zip_border[j]] = zip_GETBITS(3); zip_DUMPBITS(3); }\r\n\t\t\tfor (; j < 19; j++)\r\n\t\t\t\tll[zip_border[j]] = 0; zip_bl = 7; h = new zip_HuftBuild(ll, 19, 19, null, null, zip_bl); if (h.status != 0)\r\n\t\t\t\treturn -1; zip_tl = h.root; zip_bl = h.m; n = nl + nd; i = l = 0; while (i < n) {\r\n\t\t\t\t\tzip_NEEDBITS(zip_bl); t = zip_tl.list[zip_GETBITS(zip_bl)]; j = t.b; zip_DUMPBITS(j); j = t.n; if (j < 16)\r\n\t\t\t\t\t\tll[i++] = l = j; else if (j == 16) {\r\n\t\t\t\t\t\t\tzip_NEEDBITS(2); j = 3 + zip_GETBITS(2); zip_DUMPBITS(2); if (i + j > n)\r\n\t\t\t\t\t\t\t\treturn -1; while (j-- > 0)\r\n\t\t\t\t\t\t\t\tll[i++] = l;\r\n\t\t\t\t\t\t} else if (j == 17) {\r\n\t\t\t\t\t\t\tzip_NEEDBITS(3); j = 3 + zip_GETBITS(3); zip_DUMPBITS(3); if (i + j > n)\r\n\t\t\t\t\t\t\t\treturn -1; while (j-- > 0)\r\n\t\t\t\t\t\t\t\tll[i++] = 0; l = 0;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tzip_NEEDBITS(7); j = 11 + zip_GETBITS(7); zip_DUMPBITS(7); if (i + j > n)\r\n\t\t\t\t\t\t\t\treturn -1; while (j-- > 0)\r\n\t\t\t\t\t\t\tll[i++] = 0; l = 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\tzip_bl = zip_lbits; h = new zip_HuftBuild(ll, nl, 257, zip_cplens, zip_cplext, zip_bl); if (zip_bl == 0)\r\n\t\t\t\th.status = 1; if (h.status != 0) {/*if(h.status==1);*/return -1; }\r\n\t\t\tzip_tl = h.root; zip_bl = h.m; for (i = 0; i < nd; i++)\r\n\t\t\t\tll[i] = ll[i + nl]; zip_bd = zip_dbits; h = new zip_HuftBuild(ll, nd, 0, zip_cpdist, zip_cpdext, zip_bd); zip_td = h.root; zip_bd = h.m; if (zip_bd == 0 && nl > 257) { return -1; }\r\n\t\t\t//if(h.status==1){;}\r\n\t\t\tif (h.status != 0)\r\n\t\t\t\treturn -1; return zip_inflate_codes(buff, off, size);\r\n\t\t}\r\n\t\tfunction zip_inflate_start() {\r\n\t\t\tvar i; if (zip_slide == null)\r\n\t\t\t\tzip_slide = new Array(2 * zip_WSIZE); zip_wp = 0; zip_bit_buf = 0; zip_bit_len = 0; zip_method = -1; zip_eof = false; zip_copy_leng = zip_copy_dist = 0; zip_tl = null;\r\n\t\t}\r\n\t\tfunction zip_inflate_internal(buff, off, size) {\r\n\t\t\tvar n, i; n = 0; while (n < size) {\r\n\t\t\t\tif (zip_eof && zip_method == -1)\r\n\t\t\t\t\treturn n; if (zip_copy_leng > 0) {\r\n\t\t\t\t\t\tif (zip_method != zip_STORED_BLOCK) { while (zip_copy_leng > 0 && n < size) { zip_copy_leng--; zip_copy_dist &= zip_WSIZE - 1; zip_wp &= zip_WSIZE - 1; buff[off + n++] = zip_slide[zip_wp++] = zip_slide[zip_copy_dist++]; } } else {\r\n\t\t\t\t\t\t\twhile (zip_copy_leng > 0 && n < size) { zip_copy_leng--; zip_wp &= zip_WSIZE - 1; zip_NEEDBITS(8); buff[off + n++] = zip_slide[zip_wp++] = zip_GETBITS(8); zip_DUMPBITS(8); }\r\n\t\t\t\t\t\t\tif (zip_copy_leng == 0)\r\n\t\t\t\t\t\t\t\tzip_method = -1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (n == size)\r\n\t\t\t\t\t\t\treturn n;\r\n\t\t\t\t\t}\r\n\t\t\t\tif (zip_method == -1) {\r\n\t\t\t\t\tif (zip_eof)\r\n\t\t\t\t\t\tbreak; zip_NEEDBITS(1); if (zip_GETBITS(1) != 0)\r\n\t\t\t\t\t\tzip_eof = true; zip_DUMPBITS(1); zip_NEEDBITS(2); zip_method = zip_GETBITS(2); zip_DUMPBITS(2); zip_tl = null; zip_copy_leng = 0;\r\n\t\t\t\t}\r\n\t\t\t\tswitch (zip_method) {\r\n\t\t\t\t\tcase 0: i = zip_inflate_stored(buff, off + n, size - n); break; case 1: if (zip_tl != null)\r\n\t\t\t\t\t\ti = zip_inflate_codes(buff, off + n, size - n); else\r\n\t\t\t\t\t\ti = zip_inflate_fixed(buff, off + n, size - n); break; case 2: if (zip_tl != null)\r\n\t\t\t\t\t\t\ti = zip_inflate_codes(buff, off + n, size - n); else\r\n\t\t\t\t\t\t\ti = zip_inflate_dynamic(buff, off + n, size - n); break; default: i = -1; break;\r\n\t\t\t\t}\r\n\t\t\t\tif (i == -1) {\r\n\t\t\t\t\tif (zip_eof)\r\n\t\t\t\t\t\treturn 0; return -1;\r\n\t\t\t\t}\r\n\t\t\t\tn += i;\r\n\t\t\t}\r\n\t\t\treturn n;\r\n\t\t}\r\n\t\tfunction zip_inflate(str) {\r\n\t\t\tvar out, buff; var i, j; zip_inflate_start(); zip_inflate_data = str; zip_inflate_pos = 0; buff = new Array(1024); out = \"\"; while ((i = zip_inflate_internal(buff, 0, buff.length)) > 0) {\r\n\t\t\t\tfor (j = 0; j < i; j++)\r\n\t\t\t\t\tout += String.fromCharCode(buff[j]);\r\n\t\t\t}\r\n\t\t\tzip_inflate_data = null; return out;\r\n\t\t}\r\n\t\tif (!JSZip.compressions[\"DEFLATE\"]) { JSZip.compressions[\"DEFLATE\"] = { magic: \"\\x08\\x00\", uncompress: zip_inflate } } else { JSZip.compressions[\"DEFLATE\"].uncompress = zip_inflate; }\r\n\t})();\r\n\r\n\r\n\r\n\t(function () {\r\n\t\tvar pretty = function (str) {\r\n\t\t\tvar res = '', code, i; for (i = 0; i < str.length; i++) { code = str.charCodeAt(i); res += '\\\\x' + (code < 10 ? \"0\" : \"\") + code.toString(16); }\r\n\t\t\treturn res;\r\n\t\t}; var findCompression = function (compressionMethod) {\r\n\t\t\tfor (var method in JSZip.compressions) {\r\n\t\t\t\tif (JSZip.compressions[method].magic === compressionMethod) { return JSZip.compressions[method]; }\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t}; function StreamReader(stream) { this.stream = stream; this.index = 0; }\r\n\t\tStreamReader.prototype = {\r\n\t\t\tcheckOffset: function (offset) { this.checkIndex(this.index + offset); }, checkIndex: function (newIndex) {\r\n\t\t\t\tif (this.stream.length < newIndex || newIndex < 0) {\r\n\t\t\t\t\tthrow new Error(\"End of stream reached (stream length = \" +\r\n\t\t\t\t\t\tthis.stream.length + \", asked index = \" +\r\n\t\t\t\t\t\t(newIndex) + \"). Corrupted zip ?\");\r\n\t\t\t\t}\r\n\t\t\t}, setIndex: function (newIndex) { this.checkIndex(newIndex); this.index = newIndex; }, eof: function () { return this.index >= this.stream.length; }, byteAt: function (i) { return this.stream.charCodeAt(i) & 0xff; }, readByte: function () { this.checkOffset(1); return this.byteAt(1 + this.index++); }, readInt: function (size) {\r\n\t\t\t\tvar result = 0, i; this.checkOffset(size); for (i = size - 1; i >= 0; i--) { result = (result << 8) + this.byteAt(this.index + i); }\r\n\t\t\t\tthis.index += size; return result;\r\n\t\t\t}, readString: function (size) {\r\n\t\t\t\tvar result = \"\", i, code; this.checkOffset(size); for (i = 0; i < size; i++) { code = this.byteAt(this.index + i); result += String.fromCharCode(code); }\r\n\t\t\t\tthis.index += size; return result;\r\n\t\t\t}, readDate: function () { var dostime = this.readInt(4); return new Date(((dostime >> 25) & 0x7f) + 1980, ((dostime >> 21) & 0x0f) - 1, (dostime >> 16) & 0x1f, (dostime >> 11) & 0x1f, (dostime >> 5) & 0x3f, (dostime & 0x1f) << 1); }\r\n\t\t}; function ZipEntry(options, loadOptions) { this.options = options; this.loadOptions = loadOptions; }\r\n\t\tZipEntry.prototype = {\r\n\t\t\tisEncrypted: function () { return (this.bitFlag & 0x0001) === 0x0001; }, hasDataDescriptor: function () { return (this.bitFlag & 0x0008) === 0x0008; }, useUTF8: function () { return (this.bitFlag & 0x0800) === 0x0800; }, isZIP64: function () { return this.options.zip64; }, readLocalPartHeader: function (reader) {\r\n\t\t\tthis.versionNeeded = reader.readInt(2); this.bitFlag = reader.readInt(2); this.compressionMethod = reader.readString(2); this.date = reader.readDate(); this.crc32 = reader.readInt(4); this.compressedSize = reader.readInt(4); this.uncompressedSize = reader.readInt(4); this.fileNameLength = reader.readInt(2); this.extraFieldsLength = reader.readInt(2); if (this.isEncrypted()) { throw new Error(\"Encrypted zip are not supported\"); }\r\n\t\t\t}, readLocalPart: function (reader) {\r\n\t\t\t\tvar compression; this.readLocalPartHeader(reader); this.fileName = reader.readString(this.fileNameLength); this.readExtraFields(reader); if (!this.hasDataDescriptor()) { this.compressedFileData = reader.readString(this.compressedSize); }\r\n\t\t\t\telse {\r\n\t\t\t\tthis.compressedFileData = this.findDataUntilDataDescriptor(reader); this.crc32 = reader.readInt(4); this.compressedSize = reader.readInt(this.isZIP64() ? 8 : 4); this.uncompressedSize = reader.readInt(this.isZIP64() ? 8 : 4); if (this.compressedFileData.length !== this.compressedSize) { throw new Error(\"Bug : data descriptor incorrectly read (size mismatch)\"); }\r\n\t\t\t\t}\r\n\t\t\t\tthis.uncompressedFileData = null; compression = findCompression(this.compressionMethod); if (compression === null) { throw new Error(\"Corrupted zip : compression \" + pretty(this.compressionMethod) + \" unknown (inner file : \" + this.fileName + \")\"); }\r\n\t\t\t\tthis.uncompressedFileData = compression.uncompress(this.compressedFileData); if (this.loadOptions.checkCRC32 && JSZip.prototype.crc32(this.uncompressedFileData) !== this.crc32) { throw new Error(\"Corrupted zip : CRC32 mismatch\"); }\r\n\t\t\t\tif (this.useUTF8()) { this.fileName = JSZip.prototype.utf8decode(this.fileName); }\r\n\t\t\t}, findDataUntilDataDescriptor: function (reader) {\r\n\t\t\t\tvar data = \"\", buffer = reader.readString(4), aByte; while (buffer !== JSZip.signature.DATA_DESCRIPTOR) { aByte = reader.readString(1); data += buffer.slice(0, 1); buffer = (buffer + aByte).slice(-4); }\r\n\t\t\t\treturn data;\r\n\t\t\t}, readCentralPart: function (reader) {\r\n\t\t\tthis.versionMadeBy = reader.readString(2); this.readLocalPartHeader(reader); this.fileCommentLength = reader.readInt(2); this.diskNumberStart = reader.readInt(2); this.internalFileAttributes = reader.readInt(2); this.externalFileAttributes = reader.readInt(4); this.localHeaderOffset = reader.readInt(4); this.fileName = reader.readString(this.fileNameLength); this.readExtraFields(reader); this.fileComment = reader.readString(this.fileCommentLength); if (this.useUTF8()) { this.fileName = JSZip.prototype.utf8decode(this.fileName); this.fileComment = JSZip.prototype.utf8decode(this.fileComment); }\r\n\t\t\t\tthis.dir = this.externalFileAttributes & 0x00000010 ? true : false;\r\n\t\t\t}, parseZIP64ExtraField: function (reader) {\r\n\t\t\t\tvar extraReader = new StreamReader(this.extraFields[0x0001].value); if (this.uncompressedSize === -1) { this.uncompressedSize = extraReader.readInt(8); }\r\n\t\t\t\tif (this.compressedSize === -1) { this.compressedSize = extraReader.readInt(8); }\r\n\t\t\t\tif (this.localHeaderOffset === -1) { this.localHeaderOffset = extraReader.readInt(8); }\r\n\t\t\t\tif (this.diskNumberStart === -1) { this.diskNumberStart = extraReader.readInt(4); }\r\n\t\t\t}, readExtraFields: function (reader) {\r\n\t\t\t\tvar start = reader.index, extraFieldId, extraFieldLength, extraFieldValue; this.extraFields = this.extraFields || {}; while (reader.index < start + this.extraFieldsLength) { extraFieldId = reader.readInt(2); extraFieldLength = reader.readInt(2); extraFieldValue = reader.readString(extraFieldLength); this.extraFields[extraFieldId] = { id: extraFieldId, length: extraFieldLength, value: extraFieldValue }; }\r\n\t\t\t\tif (this.isZIP64() && this.extraFields[0x0001]) { this.parseZIP64ExtraField(reader); }\r\n\t\t\t}\r\n\t\t}; function ZipEntries(data, loadOptions) { this.files = []; this.loadOptions = loadOptions; if (data) this.load(data); }\r\n\t\tZipEntries.prototype = {\r\n\t\t\tcheckSignature: function (expectedSignature) {\r\n\t\t\t\tvar signature = this.reader.readString(4); if (signature !== expectedSignature) { throw new Error(\"Corrupted zip or bug : unexpected signature \" + \"(\" + pretty(signature) + \", expected \" + pretty(expectedSignature) + \")\"); }\r\n\t\t\t}, readBlockEndOfCentral: function () { this.diskNumber = this.reader.readInt(2); this.diskWithCentralDirStart = this.reader.readInt(2); this.centralDirRecordsOnThisDisk = this.reader.readInt(2); this.centralDirRecords = this.reader.readInt(2); this.centralDirSize = this.reader.readInt(4); this.centralDirOffset = this.reader.readInt(4); this.zipCommentLength = this.reader.readInt(2); this.zipComment = this.reader.readString(this.zipCommentLength); }, readBlockZip64EndOfCentral: function () {\r\n\t\t\tthis.zip64EndOfCentralSize = this.reader.readInt(8); this.versionMadeBy = this.reader.readString(2); this.versionNeeded = this.reader.readInt(2); this.diskNumber = this.reader.readInt(4); this.diskWithCentralDirStart = this.reader.readInt(4); this.centralDirRecordsOnThisDisk = this.reader.readInt(8); this.centralDirRecords = this.reader.readInt(8); this.centralDirSize = this.reader.readInt(8); this.centralDirOffset = this.reader.readInt(8); this.zip64ExtensibleData = {}; var extraDataSize = this.zip64EndOfCentralSize - 44, index = 0, extraFieldId, extraFieldLength, extraFieldValue; while (index < extraDataSize) { extraFieldId = this.reader.readInt(2); extraFieldLength = this.reader.readInt(4); extraFieldValue = this.reader.readString(extraFieldLength); this.zip64ExtensibleData[extraFieldId] = { id: extraFieldId, length: extraFieldLength, value: extraFieldValue }; }\r\n\t\t\t}, readBlockZip64EndOfCentralLocator: function () {\r\n\t\t\tthis.diskWithZip64CentralDirStart = this.reader.readInt(4); this.relativeOffsetEndOfZip64CentralDir = this.reader.readInt(8); this.disksCount = this.reader.readInt(4); if (this.disksCount > 1) { throw new Error(\"Multi-volumes zip are not supported\"); }\r\n\t\t\t}, readLocalFiles: function () {\r\n\t\t\t\tvar i, file; for (i = 0; i < this.files.length; i++) { file = this.files[i]; this.reader.setIndex(file.localHeaderOffset); this.checkSignature(JSZip.signature.LOCAL_FILE_HEADER); file.readLocalPart(this.reader); }\r\n\t\t\t}, readCentralDir: function () {\r\n\t\t\t\tvar file; this.reader.setIndex(this.centralDirOffset); while (this.reader.readString(4) === JSZip.signature.CENTRAL_FILE_HEADER) { file = new ZipEntry({ zip64: this.zip64 }, this.loadOptions); file.readCentralPart(this.reader); this.files.push(file); }\r\n\t\t\t}, readEndOfCentral: function () {\r\n\t\t\t\tvar offset = this.reader.stream.lastIndexOf(JSZip.signature.ZIP64_CENTRAL_DIRECTORY_LOCATOR); if (offset === -1) {\r\n\t\t\t\tthis.zip64 = false; offset = this.reader.stream.lastIndexOf(JSZip.signature.CENTRAL_DIRECTORY_END); if (offset === -1) { throw new Error(\"Corrupted zip : can't find end of central directory\"); }\r\n\t\t\t\t\tthis.reader.setIndex(offset); this.checkSignature(JSZip.signature.CENTRAL_DIRECTORY_END); this.readBlockEndOfCentral();\r\n\t\t\t\t}\r\n\t\t\t\telse { this.zip64 = true; this.reader.setIndex(offset); this.checkSignature(JSZip.signature.ZIP64_CENTRAL_DIRECTORY_LOCATOR); this.readBlockZip64EndOfCentralLocator(); this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir); this.checkSignature(JSZip.signature.ZIP64_CENTRAL_DIRECTORY_END); this.readBlockZip64EndOfCentral(); }\r\n\t\t\t}, load: function (data) { this.reader = new StreamReader(data); this.readEndOfCentral(); this.readCentralDir(); this.readLocalFiles(); }\r\n\t\t}; JSZip.prototype.load = function (data, options) {\r\n\t\t\tvar files, zipEntries, i, input; options = options || {}; if (options.base64) { data = JSZipBase64.decode(data); }\r\n\t\t\tzipEntries = new ZipEntries(data, options); files = zipEntries.files; for (i in files) { input = files[i]; this.file(input.fileName, input.uncompressedFileData, { binary: true, date: input.date, dir: input.dir }); }\r\n\t\t\treturn this;\r\n\t\t};\r\n\t})();\r\n\r\n\r\n\t/*\r\n\tvar JSZip = null\r\n\tif (typeof require === 'function') {\r\n\t\tJSZip = require('node-zip');\r\n\t}*/\r\n\r\n\t//----------------------------------------------------------\r\n\t// Copyright (C) Microsoft Corporation. All rights reserved.\r\n\t// Released under the Microsoft Office Extensible File License\r\n\t// https://raw.github.com/stephen-hardy/xlsx.js/master/LICENSE.txt\r\n\t//----------------------------------------------------------\r\n\tfunction xlsx(file) {\r\n\t\t'use strict'; // v2.3.0\r\n\r\n\t\tvar defaultFontName = 'Calibri';\r\n\t\tvar defaultFontSize = 11;\r\n\t\tvar defaultFontColor = \"000000\";\r\n\r\n\t\tvar result, zip = new JSZip(), zipTime, processTime, s, f, i, j, k, l, t, w, sharedStrings, styles, index, data, val, style, borders, border, borderIndex, fonts, font, fontIndex,\r\n\t\t\tdocProps, xl, xlWorksheets, worksheet, contentTypes = [[], []], props = [], xlRels = [], worksheets = [], id, columns, cols, colWidth, cell, row, merges, merged,\r\n\t\t\tnumFmts = ['General', '0', '0.00', '#,##0', '#,##0.00', , , , , '0%', '0.00%', '0.00E+00', '# ?/?', '# ??/??', 'mm-dd-yy', 'd-mmm-yy', 'd-mmm', 'mmm-yy', 'h:mm AM/PM', 'h:mm:ss AM/PM',\r\n\t\t\t\t'h:mm', 'h:mm:ss', 'm/d/yy h:mm', , , , , , , , , , , , , , , '#,##0 ;(#,##0)', '#,##0 ;[Red](#,##0)', '#,##0.00;(#,##0.00)', '#,##0.00;[Red](#,##0.00)', , , , , 'mm:ss', '[h]:mm:ss', 'mmss.0', '##0.0E+0', '@'],\r\n\t\t\talphabet = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';\r\n\r\n\t\tfunction numAlpha(i) {\r\n\t\t\tvar t = Math.floor(i / 26) - 1; return (t > -1 ? numAlpha(t) : '') + alphabet.charAt(i % 26);\r\n\t\t}\r\n\r\n\t\tfunction alphaNum(s) {\r\n\t\t\tvar t = 0; if (s.length === 2) { t = alphaNum(s.charAt(0)) + 1; } return t * 26 + alphabet.indexOf(s.substr(-1));\r\n\t\t}\r\n\r\n\t\tfunction convertDate(input) {\r\n\t\t\treturn typeof input === 'object' ? ((input - new Date(1900, 0, 0)) / 86400000) + 1 : new Date(+new Date(1900, 0, 0) + (input - 1) * 86400000);\r\n\t\t}\r\n\r\n\t\tfunction typeOf(obj) {\r\n\t\t\treturn ({}).toString.call(obj).match(/\\s([a-zA-Z]+)/)[1].toLowerCase();\r\n\t\t}\r\n\r\n\t\tfunction getAttr(s, n) {\r\n\t\t\ts = s.substr(s.indexOf(n + '=\"') + n.length + 2); return s.substring(0, s.indexOf('\"'));\r\n\t\t}\r\n\r\n\t\tfunction escapeXML(s) {\r\n\t\t\treturn (s || '').replace(/&amp;/g, '&').replace(/&(?!(lt|gt))/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\"/g, '&quot;').replace(/'/g, '&#x27;').replace(\"settings\", \"\");\r\n\t\t} // see http://www.w3.org/TR/xml/#syntax\r\n\r\n\t\tfunction unescapeXML(s) {\r\n\t\t\treturn (s || '').replace(/&amp;/g, '&').replace(/&lt;/g, '<').replace(/&gt;/g, '>').replace(/&quot;/g, '\"').replace(/&#x27;/g, '\\'').replace(\"settings\", \"\");\r\n\t\t}\r\n\t\t\r\n\t\tfunction parseDate(val, cell, ispivot){\r\n\t\t\t\r\n\t\t\tif ((val == undefined) || (val.trim() == \"\")){\r\n\t\t\t\tval = \"\"\r\n\t\t\t} else { \r\n\t\t\t\tif (cell.genexusType == 'date'){\r\n\t\t\t\t\tvar format = (ispivot) ? [\"DMY\", \"YMD\", \"YDM\"] : (cell.genexusPicture == \"99/99/99\") ? [\"dd/mm/yy\",\"yy/mm/dd\",\"yyyy/dd/mm\"] : [\"dd/mm/yyyy\",\"yyyy/mm/dd\",\"yyyy/dd/mm\"];\r\n\t\t\t\t\tvar pars  = val.split(\"-\")\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\tif (!(cell.genexusPicture) || (cell.genexusPicture == \"99/99/99\")){\r\n\t\t\t\t\t\tval = pars[1] + \"/\" + pars[2] + \"/\" + pars[0].substring(2)\r\n\t\t\t\t\t\tif (cell.formatCode == format[0]/*\"DMY\"*/) val = pars[2] + \"/\" + pars[1] + \"/\" + pars[0].substring(2)\r\n\t\t\t\t\t\tif (cell.formatCode == format[1]/*\"YMD\"*/) val = pars[0].substring(2) + \"/\" + pars[1] + \"/\" + pars[2] \r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (cell.genexusPicture == \"99/99/9999\"){\r\n\t\t\t\t\t\tval = pars[1] + \"/\" + pars[2] + \"/\" + pars[0]\r\n\t\t\t\t\t\tif (cell.formatCode == format[0]/*\"DMY\"*/) val = pars[2] + \"/\" + pars[1] + \"/\" + pars[0]\r\n\t\t\t\t\t\tif (cell.formatCode == format[1]/*\"YMD\"*/) val = pars[0] + \"/\" + pars[1] + \"/\" + pars[2] \r\n\t\t\t\t\t}\r\n\t\t\t\t\t\tif (cell.genexusPicture == \"9999/99/99\"){\r\n\t\t\t\t\t\t\tval = pars[0] + \"/\" + pars[1] + \"/\" + pars[2]\r\n\t\t\t\t\t\t\tif (cell.formatCode == format[2]/*\"YDM\"*/)  val = pars[0] + \"/\" + pars[2] + \"/\" + pars[1]\r\n\t\t\t\t\t\t\tif (cell.formatCode == format[1]/*\"YMD\"*/)  val = pars[0] + \"/\" + pars[1] + \"/\" + pars[2] \r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvar datetimepars  = val.split(\" \")\r\n\t\t\t\t\t\tvar pars = datetimepars[0].split(\"-\")\r\n\t\t\t\t\t\tdatePars = datetimepars[1].split(\":\")\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (!cell.genexusPicture){\r\n\t\t\t\t\t\t\tval = pars[1] + \"/\" + pars[2] + \"/\" + pars[0].substring(2) + \" \" + datePars[0] + \":\" + datePars[1] \r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tvar picturePars = cell.genexusPicture.split(\" \")\r\n\t\t\t\t\t\t\tvar format = (ispivot) ? [\"DMY\", \"YMD\", \"YDM\"] : (picturePars[0] == \"99/99/99\") ? [\"dd/mm/yy\",\"yy/mm/dd\",\"yyyy/dd/mm\"] : [\"dd/mm/yyyy\",\"yyyy/mm/dd\",\"yyyy/dd/mm\"];\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (picturePars[0] == \"99/99/99\"){\r\n\t\t\t\t\t\t\t\tval = pars[1] + \"/\" + pars[2] + \"/\" + pars[0].substring(2)\r\n\t\t\t\t\t\t\t\tif (cell.formatCode == format[0]) val = pars[2] + \"/\" + pars[1] + \"/\" + pars[0].substring(2)\r\n\t\t\t\t\t\t\t\tif (cell.formatCode == format[1]) val = pars[0].substring(2) + \"/\" + pars[1] + \"/\" + pars[2]\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (picturePars[0] == \"99/99/9999\"){\r\n\t\t\t\t\t\t\t\tval = pars[1] + \"/\" + pars[2] + \"/\" + pars[0]\r\n\t\t\t\t\t\t\t\tif (cell.formatCode == format[0]) val = pars[2] + \"/\" + pars[1] + \"/\" + pars[0]\r\n\t\t\t\t\t\t\t\tif (cell.formatCode == format[1]) val = pars[0] + \"/\" + pars[1] + \"/\" + pars[2] \r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (picturePars[0] == \"9999/99/99\"){\r\n\t\t\t\t\t\t\t\tval = pars[0] + \"/\" + pars[1] + \"/\" + pars[2]\r\n\t\t\t\t\t\t\t\tif (cell.formatCode == format[2])  val = pars[0] + \"/\" + pars[2] + \"/\" + pars[1]\r\n\t\t\t\t\t\t\t\tif (cell.formatCode == format[1])  val = pars[0] + \"/\" + pars[1] + \"/\" + pars[2] \r\n\t\t\t\t\t\t\t}\t\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (picturePars[1] == \"99\")\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tval = val + \" \" + datePars[0]\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (picturePars[1] == \"99:99\")\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tval = val + \" \" + datePars[0] + \":\" + datePars[1] \t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (picturePars[1] == \"99:99:99\")\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tval = val + \" \" + datePars[0] + \":\" + datePars[1] + \":\" + datePars[2].split(\".\")[0]\r\n\t\t\t\t\t\t\t}\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (picturePars[1] == \"99:99:99.999\")\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tval = val + \" \" + datePars[0] + \":\" + datePars[1] + \":\" + datePars[2]\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\treturn val;\r\n\t\t\t\r\n\t\t}\r\n\t\tif (file.pivot) {\r\n\t\t\tprocessTime = Date.now();\r\n\r\n\t\t\t//file _rels/.rels\r\n\t\t\tzip.folder('_rels').file('.rels', '<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?>'\r\n\t\t\t\t+ '<Relationships xmlns=\"http://schemas.openxmlformats.org/package/2006/relationships\">'\r\n\t\t\t\t+ '<Relationship Id=\"rId1\" Type=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument\" Target=\"xl/workbook.xml\"/>'\r\n\t\t\t\t+ '<Relationship Id=\"rId2\" Type=\"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties\" Target=\"docProps/core.xml\"/>'\r\n\t\t\t\t+ '<Relationship Id=\"rId3\" Type=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties\" Target=\"docProps/app.xml\"/>'\r\n\t\t\t\t+ '</Relationships>');\r\n\r\n\t\t\t//files folder docProps\r\n\t\t\tdocProps = zip.folder('docProps');\r\n\t\t\tdocProps.file('core.xml', '<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?>'\r\n\t\t\t\t+ '<cp:coreProperties xmlns:cp=\"http://schemas.openxmlformats.org/package/2006/metadata/core-properties\" xmlns:dc=\"http://purl.org/dc/elements/1.1/\" xmlns:dcterms=\"http://purl.org/dc/terms/\" xmlns:dcmitype=\"http://purl.org/dc/dcmitype/\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">'\r\n\t\t\t\t+ '<dc:creator>gonzalo</dc:creator>'\r\n\t\t\t\t+ '<dcterms:created xsi:type=\"dcterms:W3CDTF\">2010-12-23T01:32:21Z</dcterms:created>'\r\n\t\t\t\t+ '<cp:lastModifiedBy>xperTools</cp:lastModifiedBy>'\r\n\t\t\t\t+ '<dcterms:modified xsi:type=\"dcterms:W3CDTF\">2010-02-23T01:32:21Z</dcterms:modified>'\r\n\t\t\t\t+ '</cp:coreProperties>')\r\n\t\t\tdocProps.file('app.xml', '<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?>'\r\n\t\t\t\t+ '<Properties xmlns=\"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties\" xmlns:vt=\"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes\">'\r\n\t\t\t\t+ '<DocSecurity>0</DocSecurity>'\r\n\t\t\t\t+ '<ScaleCrop>false</ScaleCrop>'\r\n\t\t\t\t+ '<HeadingPairs>'\r\n\t\t\t\t+ '<vt:vector size=\"2\" baseType=\"variant\">'\r\n\t\t\t\t+ '<vt:variant>'\r\n\t\t\t\t+ '<vt:lpstr>Hojas de cálculo</vt:lpstr>'\r\n\t\t\t\t+ '</vt:variant>'\r\n\t\t\t\t+ '<vt:variant>'\r\n\t\t\t\t+ '<vt:i4>2</vt:i4>'\r\n\t\t\t\t+ '</vt:variant>'\r\n\t\t\t\t+ '</vt:vector>'\r\n\t\t\t\t+ '</HeadingPairs>'\r\n\t\t\t\t+ '<TitlesOfParts>'\r\n\t\t\t\t+ '<vt:vector size=\"2\" baseType=\"lpstr\">'\r\n\t\t\t\t+ '<vt:lpstr>PivotTable</vt:lpstr>'\r\n\t\t\t\t+ '<vt:lpstr>SourceData</vt:lpstr>'\r\n\t\t\t\t+ '</vt:vector>'\r\n\t\t\t\t+ '</TitlesOfParts>'\r\n\t\t\t\t+ '<LinksUpToDate>false</LinksUpToDate>'\r\n\t\t\t\t+ '<SharedDoc>false</SharedDoc>'\r\n\t\t\t\t+ '<HyperlinksChanged>false</HyperlinksChanged>'\r\n\t\t\t\t+ '<AppVersion>12.0000</AppVersion>'\r\n\t\t\t\t+ '</Properties>');\r\n\r\n\r\n\t\t\t// [Content_Types].xml\r\n\t\t\tzip.file('[Content_Types].xml', '<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?>'\r\n\t\t\t\t+ '<Types xmlns=\"http://schemas.openxmlformats.org/package/2006/content-types\">'\r\n\t\t\t\t+ '<Default Extension=\"xml\" ContentType=\"application/xml\"/>'\r\n\t\t\t\t+ '<Default Extension=\"rels\" ContentType=\"application/vnd.openxmlformats-package.relationships+xml\"/>'\r\n\t\t\t\t+ '<Override PartName=\"/docProps/app.xml\" ContentType=\"application/vnd.openxmlformats-officedocument.extended-properties+xml\"/>'\r\n\t\t\t\t+ '<Override PartName=\"/docProps/core.xml\" ContentType=\"application/vnd.openxmlformats-package.core-properties+xml\"/>'\r\n\t\t\t\t+ '<Override PartName=\"/xl/workbook.xml\" ContentType=\"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml\"/>'\r\n\t\t\t\t+ '<Override PartName=\"/xl/worksheets/sheet2.xml\" ContentType=\"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml\"/>'\r\n\t\t\t\t+ '<Override PartName=\"/xl/sharedStrings.xml\" ContentType=\"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml\"/>'\r\n\t\t\t\t+ '<Override PartName=\"/xl/styles.xml\" ContentType=\"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml\"/>'\r\n\t\t\t\t+ '<Override PartName=\"/xl/theme/theme1.xml\" ContentType=\"application/vnd.openxmlformats-officedocument.theme+xml\"/>'\r\n\t\t\t\t+ '<Override PartName=\"/xl/worksheets/sheet1.xml\" ContentType=\"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml\"/>'\r\n\t\t\t\t+ '<Override PartName=\"/xl/pivotTables/pivotTable1.xml\" ContentType=\"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml\"/>'\r\n\t\t\t\t+ '<Override PartName=\"/xl/pivotCache/pivotCacheDefinition1.xml\" ContentType=\"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml\"/>'\r\n\t\t\t\t+ '<Override PartName=\"/xl/pivotCache/pivotCacheRecords1.xml\" ContentType=\"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml\"/>'\r\n\t\t\t\t+ '</Types>');\r\n\r\n\r\n\t\t\t//xl folder\t\r\n\t\t\txl = zip.folder('xl');\r\n\r\n\t\t\t// xl/_rels/workbook.xml.rels\r\n\t\t\txl.folder('_rels').file('workbook.xml.rels', '<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?>'\r\n\t\t\t\t+ '<Relationships xmlns=\"http://schemas.openxmlformats.org/package/2006/relationships\">'\r\n\t\t\t\t+ '<Relationship Id=\"rId1\" Type=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet\" Target=\"worksheets/sheet1.xml\"/>'\r\n\t\t\t\t+ '<Relationship Id=\"rId2\" Type=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet\" Target=\"worksheets/sheet2.xml\"/>'\r\n\t\t\t\t+ '<Relationship Id=\"rId3\" Type=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships/pivotCacheDefinition\" Target=\"pivotCache/pivotCacheDefinition1.xml\"/>'\r\n\t\t\t\t+ '<Relationship Id=\"rId4\" Type=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme\" Target=\"theme/theme1.xml\"/>'\r\n\t\t\t\t+ '<Relationship Id=\"rId5\" Type=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles\" Target=\"styles.xml\"/>'\r\n\t\t\t\t+ '<Relationship Id=\"rId6\" Type=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings\" Target=\"sharedStrings.xml\"/>'\r\n\t\t\t\t+ '</Relationships>');\r\n\r\n\t\t\t//pivot cache folder\r\n\t\t\tvar folderPivotCache = xl.folder('pivotCache').file('pivotCacheRecords1.xml', '<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?>'\r\n\t\t\t\t+ '<pivotCacheRecords xmlns=\"http://schemas.openxmlformats.org/spreadsheetml/2006/main\" xmlns:r=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships\">'\r\n\t\t\t\t+ '</pivotCacheRecords>');\r\n\r\n\r\n\t\t\tfolderPivotCache.file('pivotCacheDefinition1.xml', file.pivotCacheDefinition)\r\n\r\n\r\n\t\t\tfolderPivotCache.folder('_rels').file('pivotCacheDefinition1.xml.rels', '<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?>'\r\n\t\t\t\t+ '<Relationships xmlns=\"http://schemas.openxmlformats.org/package/2006/relationships\">'\r\n\t\t\t\t+ '<Relationship Id=\"rId1\" Type=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships/pivotCacheRecords\" Target=\"pivotCacheRecords1.xml\"/>'\r\n\t\t\t\t+ '</Relationships>')\r\n\r\n\r\n\r\n\t\t\t//folder pivot table\t\r\n\t\t\tvar folderPivotTable = xl.folder('pivotTables').file('pivotTable1.xml', file.pivotTable1);\r\n\r\n\t\t\tfolderPivotTable.folder('_rels').file('pivotTable1.xml.rels', '<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?>'\r\n\t\t\t\t+ '<Relationships xmlns=\"http://schemas.openxmlformats.org/package/2006/relationships\">'\r\n\t\t\t\t+ '<Relationship Id=\"rId1\" Type=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships/pivotCacheDefinition\" Target=\"../pivotCache/pivotCacheDefinition1.xml\"/>'\r\n\t\t\t\t+ '</Relationships>');\r\n\r\n\t\t\t//folder theme file theme1.xml\r\n\t\t\txl.folder('theme').file('theme1.xml', '<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?>'\r\n\t\t\t\t+ '<a:theme name=\"Tema de Office\" xmlns:a=\"http://schemas.openxmlformats.org/drawingml/2006/main\"/>');\r\n\r\n\t\t\t//xl/worksheets\r\n\t\t\txlWorksheets = xl.folder('worksheets');\r\n\t\t\txlWorksheets.file('sheet1.xml', '<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?>'\r\n\t\t\t\t+ '<worksheet xmlns=\"http://schemas.openxmlformats.org/spreadsheetml/2006/main\" xmlns:r=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships\">'\r\n\t\t\t\t+ '<sheetData/>'\r\n\t\t\t\t+ '</worksheet>');\r\n\r\n\r\n\r\n\t\t\t// Content dependent\r\n\t\t\tstyles = new Array(1);\r\n\t\t\tborders = new Array(1);\r\n\t\t\tfonts = new Array(1);\r\n\t\t\tvar fills = \"\";\r\n\t\t\tvar fillNumber = 1;\r\n\t\t\tw = file.worksheets.length;\r\n\t\t\twhile (w--) {\r\n\t\t\t\t// Generate worksheet (gather sharedStrings), and possibly table files, then generate entries for constant files below\r\n\t\t\t\tid = w + 1;\r\n\t\t\t\t// Generate sheetX.xml in var s\r\n\t\t\t\tworksheet = file.worksheets[w]; data = worksheet.data;\r\n\t\t\t\ts = '';\r\n\t\t\t\tcolumns = [];\r\n\t\t\t\tmerges = [];\r\n\t\t\t\ti = -1; l = data.length;\r\n\t\t\t\twhile (++i < l) {\r\n\t\t\t\t\tj = -1; k = data[i].length;\r\n\t\t\t\t\ts += '<row r=\"' + (i + 1) + '\" x14ac:dyDescent=\"0.25\">';\r\n\t\t\t\t\twhile (++j < k) {\r\n\t\t\t\t\t\tvar isString = false;\r\n\t\t\t\t\t\tcell = data[i][j]; val = cell.hasOwnProperty('value') ? cell.value : cell; t = '';\r\n\t\t\t\t\t\t// supported styles: borders, hAlign, formatCode and font style\r\n\t\t\t\t\t\tstyle = {\r\n\t\t\t\t\t\t\tborders: cell.borders,\r\n\t\t\t\t\t\t\thAlign: cell.hAlign,\r\n\t\t\t\t\t\t\tvAlign: cell.vAlign,\r\n\t\t\t\t\t\t\tbold: cell.bold,\r\n\t\t\t\t\t\t\titalic: cell.italic,\r\n\t\t\t\t\t\t\tfontColor: cell.fontColor,\r\n\t\t\t\t\t\t\tfontName: cell.fontName,\r\n\t\t\t\t\t\t\tfontSize: cell.fontSize,\r\n\t\t\t\t\t\t\tfill: cell.fill,\r\n\t\t\t\t\t\t\tformatCode: cell.formatCode || 'General'\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tcolWidth = 0;\r\n\t\t\t\t\t\tif (( ((cell.isString) || (val && typeof val === 'string' && !isFinite(val))) && !(cell.genexusType == 'date') && !(cell.genexusType == 'datetime')) || (cell.genexusType == 'character')) {\r\n\t\t\t\t\t\t\t// If value is string, and not string of just a number\r\n\t\t\t\t\t\t\tval = escapeXML(val);\r\n\t\t\t\t\t\t\tt = 'inlineStr';\r\n\t\t\t\t\t\t\tisString = true;\r\n\t\t\t\t\t\t} else if (typeof val === 'boolean') {\r\n\t\t\t\t\t\t\tval = (val ? 1 : 0); t = 'b';\r\n\t\t\t\t\t\t\tcolWidth = 1;\r\n\t\t\t\t\t\t} else if ((typeOf(val) === 'date') || (cell.genexusType == 'date') || (cell.genexusType == 'datetime')) {\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tval = parseDate(val , cell, true);\r\n\t\t\t\t\t\t\tt = 'inlineStr';\r\n\t\t\t\t\t\t\tisString = true;\r\n\t\t\t\t\t\t\tstyle.hAlign = \"right\"\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t} else if (typeof val === 'object') {\r\n\t\t\t\t\t\t\t// unsupported value\r\n\t\t\t\t\t\t\tval = null\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t// number, or string which is a number \r\n\t\t\t\t\t\t\tcolWidth = ('' + val).length;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// use stringified version as unic and reproductible style signature\r\n\t\t\t\t\t\tstyle = JSON.stringify(style);\r\n\t\t\t\t\t\tindex = styles.indexOf(style);\r\n\t\t\t\t\t\tif (index < 0) {\r\n\t\t\t\t\t\t\tstyle = styles.push(style) - 1;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tstyle = index;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// keeps largest cell in column, and autoWidth flag that may be set on any cell\r\n\t\t\t\t\t\tif (columns[j] == null) {\r\n\t\t\t\t\t\t\tcolumns[j] = { autoWidth: false, max: 0 };\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (cell.autoWidth) {\r\n\t\t\t\t\t\t\tcolumns[j].autoWidth = true\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (colWidth > columns[j].max) {\r\n\t\t\t\t\t\t\tcolumns[j].max = colWidth;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// store merges if needed and add missing cells. Cannot have rowSpan AND colSpan\r\n\t\t\t\t\t\tif (cell.colSpan > 1) {\r\n\t\t\t\t\t\t\t// horizontal merge. ex: B12:E12. Add missing cells (with same attribute but value) to current row\r\n\t\t\t\t\t\t\tmerges.push([numAlpha(j) + (i + 1), numAlpha(j + cell.colSpan - 1) + (i + 1)]);\r\n\t\t\t\t\t\t\tmerged = [j, 0]\r\n\t\t\t\t\t\t\tfor (var m = 0; m < cell.colSpan - 1; m++) {\r\n\t\t\t\t\t\t\t\tmerged.push(cell);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tdata[i].splice.apply(data[i], merged);\r\n\t\t\t\t\t\t\tk += cell.colSpan - 1;\r\n\t\t\t\t\t\t} else if (cell.rowSpan > 1) {\r\n\t\t\t\t\t\t\t// vertical merge. ex: B12:B15. Add missing cells (with same attribute but value) to next columns\r\n\t\t\t\t\t\t\tfor (var m = 1; m < cell.rowSpan; m++) {\r\n\t\t\t\t\t\t\t\tif (data[i + m]) {\r\n\t\t\t\t\t\t\t\t\tdata[i + m].splice(j, 0, cell)\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t// read the end of data\r\n\t\t\t\t\t\t\t\t\tcell.rowSpan = m;\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tmerges.push([numAlpha(j) + (i + 1), numAlpha(j) + (i + cell.rowSpan)]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (cell.rowSpan > 1 || cell.colSpan > 1) {\r\n\t\t\t\t\t\t\t// deletes value, rowSpan and colSpan from cell to avoid refering it from copied cells\r\n\t\t\t\t\t\t\tdelete cell.value;\r\n\t\t\t\t\t\t\tdelete cell.rowSpan;\r\n\t\t\t\t\t\t\tdelete cell.colSpan;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ts += '<c r=\"' + numAlpha(j) + (i + 1) + '\"' + (style ? ' s=\"' + style + '\"' : '') + (t ? ' t=\"' + t + '\"' : '');\r\n\t\t\t\t\t\tif (val != null) {\r\n\t\t\t\t\t\t\tif (isString) {\r\n\t\t\t\t\t\t\t\ts += '>' + (cell.formula ? '<f>' + cell.formula + '</f>' : '') + '<is><t>' + val + '</t></is></c>';\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\ts += '>' + (cell.formula ? '<f>' + cell.formula + '</f>' : '') + '<v>' + val + '</v></c>';\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\ts += '/>';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\ts += '</row>';\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcols = []\r\n\t\t\t\tfor (i = 0; i < columns.length; i++) {\r\n\t\t\t\t\tif (columns[i].autoWidth) {\r\n\t\t\t\t\t\tcols.push('<col min=\"', i + 1, '\" max=\"', i + 1, '\" width=\"', columns[i].max, '\" bestFit=\"1\"/>');\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t// only add cols definition if not empty\r\n\t\t\t\tif (cols.length > 0) {\r\n\t\t\t\t\tcols = ['<cols>'].concat(cols, ['</cols>']).join('');\r\n\t\t\t\t}\r\n\r\n\t\t\t\ts = '<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?><worksheet xmlns=\"http://schemas.openxmlformats.org/spreadsheetml/2006/main\" xmlns:r=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships\" xmlns:mc=\"http://schemas.openxmlformats.org/markup-compatibility/2006\" mc:Ignorable=\"x14ac\" xmlns:x14ac=\"http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac\">'\r\n\t\t\t\t\t+ '<dimension ref=\"A1:' + numAlpha(data[0].length - 1) + data.length + '\"/><sheetViews><sheetView ' + (w === file.activeWorksheet ? 'tabSelected=\"1\" ' : '')\r\n\t\t\t\t\t+ ' workbookViewId=\"0\"/></sheetViews><sheetFormatPr defaultRowHeight=\"15\" x14ac:dyDescent=\"0.25\"/>'\r\n\t\t\t\t\t+ cols\r\n\t\t\t\t\t+ '<sheetData>'\r\n\t\t\t\t\t+ s\r\n\t\t\t\t\t+ '</sheetData>';\r\n\t\t\t\tif (merges.length > 0) {\r\n\t\t\t\t\ts += '<mergeCells count=\"' + merges.length + '\">';\r\n\t\t\t\t\tfor (i = 0; i < merges.length; i++) {\r\n\t\t\t\t\t\ts += '<mergeCell ref=\"' + merges[i].join(':') + '\"/>';\r\n\t\t\t\t\t}\r\n\t\t\t\t\ts += '</mergeCells>';\r\n\t\t\t\t}\r\n\t\t\t\ts += '<pageMargins left=\"0.7\" right=\"0.7\" top=\"0.75\" bottom=\"0.75\" header=\"0.3\" footer=\"0.3\"/>';\r\n\t\t\t\tif (worksheet.table) {\r\n\t\t\t\t\ts += '<tableParts count=\"1\"><tablePart r:id=\"rId1\"/></tableParts>';\r\n\t\t\t\t}\r\n\t\t\t\txlWorksheets.file('sheet2.xml', s + '</worksheet>');\r\n\t\t\t}\r\n\t\t\t//xlWorksheets.file('sheet2.xml', file.Sheet2);\r\n\r\n\t\t\t// xl/styles.xml\r\n\t\t\ti = styles.length; t = [];\r\n\t\t\tvar fillIndex = 2;\r\n\t\t\tvar actualFill = 0;\r\n\t\t\twhile (--i) {\r\n\t\t\t\t// Don't process index 0, already added\r\n\t\t\t\tstyle = JSON.parse(styles[i]);\r\n\r\n\t\t\t\t// cell formating, refer to it if necessary\r\n\t\t\t\tif (style.formatCode !== 'General') {\r\n\t\t\t\t\tindex = numFmts.indexOf(style.formatCode);\r\n\t\t\t\t\tif (index < 0) {\r\n\t\t\t\t\t\tindex = 164 + t.length;\r\n\t\t\t\t\t\tt.push('<numFmt formatCode=\"' + style.formatCode + '\" numFmtId=\"' + index + '\"/>');\r\n\t\t\t\t\t}\r\n\t\t\t\t\tstyle.formatCode = index\r\n\t\t\t\t} else {\r\n\t\t\t\t\tstyle.formatCode = 0\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// border declaration: add a new declaration and refer to it in style\r\n\t\t\t\tborderIndex = 0\r\n\t\t\t\tif (style.borders) {\r\n\t\t\t\t\tborder = ['<border>']\r\n\t\t\t\t\t// order is significative\r\n\t\t\t\t\tfor (var edge in { left: 0, right: 0, top: 0, bottom: 0, diagonal: 0 }) {\r\n\t\t\t\t\t\tif (style.borders[edge]) {\r\n\t\t\t\t\t\t\tvar color = style.borders[edge];\r\n\t\t\t\t\t\t\t// add transparency if missing\r\n\t\t\t\t\t\t\tif (color.length === 6) {\r\n\t\t\t\t\t\t\t\tcolor = 'FF' + color;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tborder.push('<', edge, ' style=\"thin\">', '<color rgb=\"', style.borders[edge], '\"/></', edge, '>');\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tborder.push('<', edge, '/>');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tborder.push('</border>');\r\n\t\t\t\t\tborder = border.join('');\r\n\t\t\t\t\t// try to reuse existing border\r\n\t\t\t\t\tborderIndex = borders.indexOf(border);\r\n\t\t\t\t\tif (borderIndex < 0) {\r\n\t\t\t\t\t\tborderIndex = borders.push(border) - 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// font declaration: add a new declaration and refer to it in style\r\n\t\t\t\tfontIndex = 0\r\n\t\t\t\tif (style.bold || style.italic || style.fontSize || style.fontName || style.fontColor) {\r\n\t\t\t\t\tfont = ['<font>']\r\n\t\t\t\t\tif (style.bold) {\r\n\t\t\t\t\t\tfont.push('<b/>');\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (style.italic) {\r\n\t\t\t\t\t\tfont.push('<i/>');\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfont.push('<sz val=\"', style.fontSize || defaultFontSize, '\"/>');\r\n\t\t\t\t\tvar colString =\r\n\t\t\t\t\t\tfont.push('<color rgb=\"FF', style.fontColor || defaultFontColor, '\"/>');\r\n\t\t\t\t\tfont.push('<name val=\"', style.fontName || defaultFontName, '\"/>');\r\n\t\t\t\t\tfont.push('<family val=\"2\"/>', '</font>');\r\n\t\t\t\t\tfont = font.join('');\r\n\t\t\t\t\t// try to reuse existing font\r\n\t\t\t\t\tfontIndex = fonts.indexOf(font);\r\n\t\t\t\t\tif (fontIndex < 0) {\r\n\t\t\t\t\t\tfontIndex = fonts.push(font) - 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//fill declaration: add a new declaration and refer to it in style\r\n\t\t\t\tactualFill = 0;\r\n\t\t\t\tif (style.fill) {\r\n\t\t\t\t\tfills = fills + '<fill><patternFill patternType=\"solid\"><fgColor rgb=\"FF' + style.fill + '\"/>'\r\n\t\t\t\t\t\t+ '<bgColor indexed=\"64\"/></patternFill></fill>'\r\n\t\t\t\t\tfillNumber++;\r\n\t\t\t\t\tactualFill = fillNumber;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// declares style, and refer to optionnal formatCode, font and borders\r\n\t\t\t\tstyles[i] = ['<xf xfId=\"0\" borderId=\"', //fillId=\"0\"  \r\n\t\t\t\t\tborderIndex,\r\n\t\t\t\t\t'\" fontId=\"',\r\n\t\t\t\t\tfontIndex,\r\n\t\t\t\t\t'\" numFmtId=\"',\r\n\t\t\t\t\tstyle.formatCode,\r\n\t\t\t\t\t'\" fillId=\"',\r\n\t\t\t\t\tactualFill,\r\n\t\t\t\t\t'\" ',\r\n\t\t\t\t\t(style.hAlign || style.vAlign ? 'applyAlignment=\"1\" ' : ' '),\r\n\t\t\t\t\t(style.formatCode > 0 ? 'applyNumberFormat=\"1\" ' : ' '),\r\n\t\t\t\t\t(borderIndex > 0 ? 'applyBorder=\"1\" ' : ' '),\r\n\t\t\t\t\t(fontIndex > 0 ? 'applyFont=\"1\" ' : ' '),\r\n\t\t\t\t\t(actualFill > 0 ? 'applyFill=\"1\" ' : ' '),\r\n\t\t\t\t\t'>'\r\n\t\t\t\t];\r\n\t\t\t\tif (style.hAlign || style.vAlign) {\r\n\t\t\t\t\tstyles[i].push('<alignment');\r\n\t\t\t\t\tif (style.hAlign) {\r\n\t\t\t\t\t\tstyles[i].push(' horizontal=\"', style.hAlign, '\"');\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (style.vAlign) {\r\n\t\t\t\t\t\tstyles[i].push(' vertical=\"', style.vAlign, '\"');\r\n\t\t\t\t\t}\r\n\t\t\t\t\tstyles[i].push('/>');\r\n\t\t\t\t}\r\n\t\t\t\tstyles[i].push('</xf>');\r\n\t\t\t\tstyles[i] = styles[i].join('');\r\n\t\t\t}\r\n\t\t\tt = t.length ? '<numFmts count=\"' + t.length + '\">' + t.join('') + '</numFmts>' : '';\r\n\r\n\t\t\tif (file.style != \"\") {\r\n\t\t\t\tt = file.style //TODO: concat with the previous number format\r\n\t\t\t}\r\n\t\t\tvar multStyle = '<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?><styleSheet xmlns=\"http://schemas.openxmlformats.org/spreadsheetml/2006/main\" xmlns:mc=\"http://schemas.openxmlformats.org/markup-compatibility/2006\" mc:Ignorable=\"x14ac\" xmlns:x14ac=\"http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac\">'\r\n\t\t\t\t+ t + '<fonts count=\"' + fonts.length + '\" x14ac:knownFonts=\"1\"><font><sz val=\"' + defaultFontSize + '\"/><color theme=\"1\"/><name val=\"' + defaultFontName + '\"/><family val=\"2\"/>'\r\n\t\t\t\t+ '<scheme val=\"minor\"/></font>' + fonts.join('') + '</fonts>'\r\n\t\t\t\t+ '<fills><fill><patternFill patternType=\"none\"/></fill><fill><patternFill patternType=\"gray125\"/></fill>' + fills + '</fills>'\r\n\t\t\t\t+ '<borders count=\"' + borders.length + '\"><border><left/><right/><top/><bottom/><diagonal/></border>'\r\n\t\t\t\t+ borders.join('') + '</borders><cellStyleXfs count=\"1\">'\r\n\t\t\t\t+ '<xf numFmtId=\"0\" fontId=\"0\" fillId=\"0\" borderId=\"0\"/></cellStyleXfs><cellXfs count=\"' + styles.length + '\"><xf numFmtId=\"0\" fontId=\"0\" fillId=\"0\" borderId=\"0\" xfId=\"0\"/>'\r\n\t\t\t\t+ styles.join('') + '</cellXfs><cellStyles count=\"1\"><cellStyle name=\"Normal\" xfId=\"0\" builtinId=\"0\"/></cellStyles>' //<dxfs count=\"0\"/>'\r\n\t\t\tif (file.dfx != undefined) {\r\n\t\t\t\tmultStyle = multStyle + '<dxfs>' + file.dfx + '</dxfs>';\r\n\t\t\t} else {\r\n\t\t\t\tmultStyle = multStyle + '<dxfs count=\"0\"/>'\r\n\t\t\t}\r\n\t\t\tmultStyle = multStyle + '<tableStyles count=\"0\" defaultTableStyle=\"TableStyleMedium2\" defaultPivotStyle=\"PivotStyleLight16\"/>'\r\n\t\t\t\t+ '<extLst><ext uri=\"{EB79DEF2-80B8-43e5-95BD-54CBDDF9020C}\" xmlns:x14=\"http://schemas.microsoft.com/office/spreadsheetml/2009/9/main\">'\r\n\t\t\t\t+ '<x14:slicerStyles defaultSlicerStyle=\"SlicerStyleLight1\"/></ext></extLst></styleSheet>'\r\n\r\n\t\t\txl.file('styles.xml', multStyle)\r\n\t\t\t//xl.file('styles.xml', file.style);\r\n\r\n\t\t\txlWorksheets.folder('_rels').file('sheet1.xml.rels', '<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?>'\r\n\t\t\t\t+ '<Relationships xmlns=\"http://schemas.openxmlformats.org/package/2006/relationships\"><Relationship Id=\"rId1\" Type=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships/pivotTable\" Target=\"../pivotTables/pivotTable1.xml\"/></Relationships>')\r\n\r\n\t\t\t//shared strings\r\n\t\t\txl.file('sharedStrings.xml', '<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?>'\r\n\t\t\t\t+ '<sst xmlns=\"http://schemas.openxmlformats.org/spreadsheetml/2006/main\">'\r\n\t\t\t\t+ '</sst>')\r\n\r\n\r\n\t\t\t//workwood\r\n\t\t\txl.file('workbook.xml', '<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?>'\r\n\t\t\t\t+ '<workbook xmlns=\"http://schemas.openxmlformats.org/spreadsheetml/2006/main\" xmlns:r=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships\">'\r\n\t\t\t\t+ '<fileVersion appName=\"xl\" lastEdited=\"4\" lowestEdited=\"4\" rupBuild=\"4506\"/>'\r\n\t\t\t\t+ '<workbookPr defaultThemeVersion=\"124226\"/>'\r\n\t\t\t\t+ '<bookViews>'\r\n\t\t\t\t+ '<workbookView xWindow=\"360\" yWindow=\"555\" windowWidth=\"21015\" windowHeight=\"9405\"/>'\r\n\t\t\t\t+ '</bookViews>'\r\n\t\t\t\t+ '<sheets>'\r\n\t\t\t\t+ '<sheet name=\"PivotTable\" sheetId=\"1\" r:id=\"rId1\"/>'\r\n\t\t\t\t+ '<sheet name=\"SourceData\" sheetId=\"2\" r:id=\"rId2\"/>'\r\n\t\t\t\t+ '</sheets>'\r\n\t\t\t\t+ '<calcPr calcId=\"125725\"/>'\r\n\t\t\t\t+ '<pivotCaches>'\r\n\t\t\t\t+ '<pivotCache cacheId=\"5\" r:id=\"rId3\"/>'\r\n\t\t\t\t+ '</pivotCaches>'\r\n\t\t\t\t+ '<fileRecoveryPr repairLoad=\"1\"/>'\r\n\t\t\t\t+ '</workbook>');\r\n\r\n\r\n\t\t\t//xl styles\r\n\r\n\r\n\r\n\t\t\tprocessTime = Date.now() - processTime;\r\n\t\t\tzipTime = Date.now();\r\n\t\t\tresult = {\r\n\t\t\t\tbase64: zip.generate({ compression: 'STORE' }), zipTime: Date.now() - zipTime, processTime: processTime,\r\n\t\t\t\thref: function () { return 'data:application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;base64,' + this.base64; }\r\n\t\t\t};\r\n\t\t} else {\r\n\t\t\t// Save\r\n\t\t\tprocessTime = Date.now();\r\n\t\t\tsharedStrings = [[], 0];\r\n\t\t\t// Fully static\r\n\t\t\tzip.folder('_rels').file('.rels', '<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?><Relationships xmlns=\"http://schemas.openxmlformats.org/package/2006/relationships\"><Relationship Id=\"rId3\" Type=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties\" Target=\"docProps/app.xml\"/><Relationship Id=\"rId2\" Type=\"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties\" Target=\"docProps/core.xml\"/><Relationship Id=\"rId1\" Type=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument\" Target=\"xl/workbook.xml\"/></Relationships>');\r\n\t\t\tdocProps = zip.folder('docProps');\r\n\r\n\t\t\txl = zip.folder('xl');\r\n\t\t\txl.folder('theme').file('theme1.xml', '<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?><a:theme xmlns:a=\"http://schemas.openxmlformats.org/drawingml/2006/main\" name=\"Office Theme\"><a:themeElements><a:clrScheme name=\"Office\"><a:dk1><a:sysClr val=\"windowText\" lastClr=\"000000\"/></a:dk1><a:lt1><a:sysClr val=\"window\" lastClr=\"FFFFFF\"/></a:lt1><a:dk2><a:srgbClr val=\"1F497D\"/></a:dk2><a:lt2><a:srgbClr val=\"EEECE1\"/></a:lt2><a:accent1><a:srgbClr val=\"4F81BD\"/></a:accent1><a:accent2><a:srgbClr val=\"C0504D\"/></a:accent2><a:accent3><a:srgbClr val=\"9BBB59\"/></a:accent3><a:accent4><a:srgbClr val=\"8064A2\"/></a:accent4><a:accent5><a:srgbClr val=\"4BACC6\"/></a:accent5><a:accent6><a:srgbClr val=\"F79646\"/></a:accent6><a:hlink><a:srgbClr val=\"0000FF\"/></a:hlink><a:folHlink><a:srgbClr val=\"800080\"/></a:folHlink></a:clrScheme><a:fontScheme name=\"Office\"><a:majorFont><a:latin typeface=\"Cambria\"/><a:ea typeface=\"\"/><a:cs typeface=\"\"/><a:font script=\"Jpan\" typeface=\"MS P????\"/><a:font script=\"Hang\" typeface=\"?? ??\"/><a:font script=\"Hans\" typeface=\"??\"/><a:font script=\"Hant\" typeface=\"????\"/><a:font script=\"Arab\" typeface=\"Times New Roman\"/><a:font script=\"Hebr\" typeface=\"Times New Roman\"/><a:font script=\"Thai\" typeface=\"Tahoma\"/><a:font script=\"Ethi\" typeface=\"Nyala\"/><a:font script=\"Beng\" typeface=\"Vrinda\"/><a:font script=\"Gujr\" typeface=\"Shruti\"/><a:font script=\"Khmr\" typeface=\"MoolBoran\"/><a:font script=\"Knda\" typeface=\"Tunga\"/><a:font script=\"Guru\" typeface=\"Raavi\"/><a:font script=\"Cans\" typeface=\"Euphemia\"/><a:font script=\"Cher\" typeface=\"Plantagenet Cherokee\"/><a:font script=\"Yiii\" typeface=\"Microsoft Yi Baiti\"/><a:font script=\"Tibt\" typeface=\"Microsoft Himalaya\"/><a:font script=\"Thaa\" typeface=\"MV Boli\"/><a:font script=\"Deva\" typeface=\"Mangal\"/><a:font script=\"Telu\" typeface=\"Gautami\"/><a:font script=\"Taml\" typeface=\"Latha\"/><a:font script=\"Syrc\" typeface=\"Estrangelo Edessa\"/><a:font script=\"Orya\" typeface=\"Kalinga\"/><a:font script=\"Mlym\" typeface=\"Kartika\"/><a:font script=\"Laoo\" typeface=\"DokChampa\"/><a:font script=\"Sinh\" typeface=\"Iskoola Pota\"/><a:font script=\"Mong\" typeface=\"Mongolian Baiti\"/><a:font script=\"Viet\" typeface=\"Times New Roman\"/><a:font script=\"Uigh\" typeface=\"Microsoft Uighur\"/><a:font script=\"Geor\" typeface=\"Sylfaen\"/></a:majorFont><a:minorFont><a:latin typeface=\"Calibri\"/><a:ea typeface=\"\"/><a:cs typeface=\"\"/><a:font script=\"Jpan\" typeface=\"MS P????\"/><a:font script=\"Hang\" typeface=\"?? ??\"/><a:font script=\"Hans\" typeface=\"??\"/><a:font script=\"Hant\" typeface=\"????\"/><a:font script=\"Arab\" typeface=\"Arial\"/><a:font script=\"Hebr\" typeface=\"Arial\"/><a:font script=\"Thai\" typeface=\"Tahoma\"/><a:font script=\"Ethi\" typeface=\"Nyala\"/><a:font script=\"Beng\" typeface=\"Vrinda\"/><a:font script=\"Gujr\" typeface=\"Shruti\"/><a:font script=\"Khmr\" typeface=\"DaunPenh\"/><a:font script=\"Knda\" typeface=\"Tunga\"/><a:font script=\"Guru\" typeface=\"Raavi\"/><a:font script=\"Cans\" typeface=\"Euphemia\"/><a:font script=\"Cher\" typeface=\"Plantagenet Cherokee\"/><a:font script=\"Yiii\" typeface=\"Microsoft Yi Baiti\"/><a:font script=\"Tibt\" typeface=\"Microsoft Himalaya\"/><a:font script=\"Thaa\" typeface=\"MV Boli\"/><a:font script=\"Deva\" typeface=\"Mangal\"/><a:font script=\"Telu\" typeface=\"Gautami\"/><a:font script=\"Taml\" typeface=\"Latha\"/><a:font script=\"Syrc\" typeface=\"Estrangelo Edessa\"/><a:font script=\"Orya\" typeface=\"Kalinga\"/><a:font script=\"Mlym\" typeface=\"Kartika\"/><a:font script=\"Laoo\" typeface=\"DokChampa\"/><a:font script=\"Sinh\" typeface=\"Iskoola Pota\"/><a:font script=\"Mong\" typeface=\"Mongolian Baiti\"/><a:font script=\"Viet\" typeface=\"Arial\"/><a:font script=\"Uigh\" typeface=\"Microsoft Uighur\"/><a:font script=\"Geor\" typeface=\"Sylfaen\"/></a:minorFont></a:fontScheme><a:fmtScheme name=\"Office\"><a:fillStyleLst><a:solidFill><a:schemeClr val=\"phClr\"/></a:solidFill><a:gradFill rotWithShape=\"1\"><a:gsLst><a:gs pos=\"0\"><a:schemeClr val=\"phClr\"><a:tint val=\"50000\"/><a:satMod val=\"300000\"/></a:schemeClr></a:gs><a:gs pos=\"35000\"><a:schemeClr val=\"phClr\"><a:tint val=\"37000\"/><a:satMod val=\"300000\"/></a:schemeClr></a:gs><a:gs pos=\"100000\"><a:schemeClr val=\"phClr\"><a:tint val=\"15000\"/><a:satMod val=\"350000\"/></a:schemeClr></a:gs></a:gsLst><a:lin ang=\"16200000\" scaled=\"1\"/></a:gradFill><a:gradFill rotWithShape=\"1\"><a:gsLst><a:gs pos=\"0\"><a:schemeClr val=\"phClr\"><a:shade val=\"51000\"/><a:satMod val=\"130000\"/></a:schemeClr></a:gs><a:gs pos=\"80000\"><a:schemeClr val=\"phClr\"><a:shade val=\"93000\"/><a:satMod val=\"130000\"/></a:schemeClr></a:gs><a:gs pos=\"100000\"><a:schemeClr val=\"phClr\"><a:shade val=\"94000\"/><a:satMod val=\"135000\"/></a:schemeClr></a:gs></a:gsLst><a:lin ang=\"16200000\" scaled=\"0\"/></a:gradFill></a:fillStyleLst><a:lnStyleLst><a:ln w=\"9525\" cap=\"flat\" cmpd=\"sng\" algn=\"ctr\"><a:solidFill><a:schemeClr val=\"phClr\"><a:shade val=\"95000\"/><a:satMod val=\"105000\"/></a:schemeClr></a:solidFill><a:prstDash val=\"solid\"/></a:ln><a:ln w=\"25400\" cap=\"flat\" cmpd=\"sng\" algn=\"ctr\"><a:solidFill><a:schemeClr val=\"phClr\"/></a:solidFill><a:prstDash val=\"solid\"/></a:ln><a:ln w=\"38100\" cap=\"flat\" cmpd=\"sng\" algn=\"ctr\"><a:solidFill><a:schemeClr val=\"phClr\"/></a:solidFill><a:prstDash val=\"solid\"/></a:ln></a:lnStyleLst><a:effectStyleLst><a:effectStyle><a:effectLst><a:outerShdw blurRad=\"40000\" dist=\"20000\" dir=\"5400000\" rotWithShape=\"0\"><a:srgbClr val=\"000000\"><a:alpha val=\"38000\"/></a:srgbClr></a:outerShdw></a:effectLst></a:effectStyle><a:effectStyle><a:effectLst><a:outerShdw blurRad=\"40000\" dist=\"23000\" dir=\"5400000\" rotWithShape=\"0\"><a:srgbClr val=\"000000\"><a:alpha val=\"35000\"/></a:srgbClr></a:outerShdw></a:effectLst></a:effectStyle><a:effectStyle><a:effectLst><a:outerShdw blurRad=\"40000\" dist=\"23000\" dir=\"5400000\" rotWithShape=\"0\"><a:srgbClr val=\"000000\"><a:alpha val=\"35000\"/></a:srgbClr></a:outerShdw></a:effectLst><a:scene3d><a:camera prst=\"orthographicFront\"><a:rot lat=\"0\" lon=\"0\" rev=\"0\"/></a:camera><a:lightRig rig=\"threePt\" dir=\"t\"><a:rot lat=\"0\" lon=\"0\" rev=\"1200000\"/></a:lightRig></a:scene3d><a:sp3d><a:bevelT w=\"63500\" h=\"25400\"/></a:sp3d></a:effectStyle></a:effectStyleLst><a:bgFillStyleLst><a:solidFill><a:schemeClr val=\"phClr\"/></a:solidFill><a:gradFill rotWithShape=\"1\"><a:gsLst><a:gs pos=\"0\"><a:schemeClr val=\"phClr\"><a:tint val=\"40000\"/><a:satMod val=\"350000\"/></a:schemeClr></a:gs><a:gs pos=\"40000\"><a:schemeClr val=\"phClr\"><a:tint val=\"45000\"/><a:shade val=\"99000\"/><a:satMod val=\"350000\"/></a:schemeClr></a:gs><a:gs pos=\"100000\"><a:schemeClr val=\"phClr\"><a:shade val=\"20000\"/><a:satMod val=\"255000\"/></a:schemeClr></a:gs></a:gsLst><a:path path=\"circle\"><a:fillToRect l=\"50000\" t=\"-80000\" r=\"50000\" b=\"180000\"/></a:path></a:gradFill><a:gradFill rotWithShape=\"1\"><a:gsLst><a:gs pos=\"0\"><a:schemeClr val=\"phClr\"><a:tint val=\"80000\"/><a:satMod val=\"300000\"/></a:schemeClr></a:gs><a:gs pos=\"100000\"><a:schemeClr val=\"phClr\"><a:shade val=\"30000\"/><a:satMod val=\"200000\"/></a:schemeClr></a:gs></a:gsLst><a:path path=\"circle\"><a:fillToRect l=\"50000\" t=\"50000\" r=\"50000\" b=\"50000\"/></a:path></a:gradFill></a:bgFillStyleLst></a:fmtScheme></a:themeElements><a:objectDefaults/><a:extraClrSchemeLst/></a:theme>');\r\n\t\t\txlWorksheets = xl.folder('worksheets');\r\n\r\n\t\t\t// Not content dependent\r\n\t\t\tdocProps.file('core.xml', '<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?><cp:coreProperties xmlns:cp=\"http://schemas.openxmlformats.org/package/2006/metadata/core-properties\" xmlns:dc=\"http://purl.org/dc/elements/1.1/\" xmlns:dcterms=\"http://purl.org/dc/terms/\" xmlns:dcmitype=\"http://purl.org/dc/dcmitype/\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"><dc:creator>'\r\n\t\t\t\t+ (file.creator || 'XLSX.js') + '</dc:creator><cp:lastModifiedBy>' + (file.lastModifiedBy || 'XLSX.js') + '</cp:lastModifiedBy><dcterms:created xsi:type=\"dcterms:W3CDTF\">'\r\n\t\t\t\t+ (file.created || new Date()).toISOString() + '</dcterms:created><dcterms:modified xsi:type=\"dcterms:W3CDTF\">' + (file.modified || new Date()).toISOString() + '</dcterms:modified></cp:coreProperties>');\r\n\r\n\t\t\t// Content dependent\r\n\t\t\tstyles = new Array(1);\r\n\t\t\tborders = new Array(1);\r\n\t\t\tfonts = new Array(1);\r\n\t\t\tvar fills = \"\";\r\n\t\t\tvar fillNumber = 1;\r\n\t\t\tw = file.worksheets.length;\r\n\t\t\twhile (w--) {\r\n\t\t\t\t// Generate worksheet (gather sharedStrings), and possibly table files, then generate entries for constant files below\r\n\t\t\t\tid = w + 1;\r\n\t\t\t\t// Generate sheetX.xml in var s\r\n\t\t\t\tworksheet = file.worksheets[w]; data = worksheet.data;\r\n\t\t\t\ts = '';\r\n\t\t\t\tcolumns = [];\r\n\t\t\t\tmerges = [];\r\n\t\t\t\ti = -1; l = data.length;\r\n\t\t\t\twhile (++i < l) {\r\n\t\t\t\t\tj = -1; k = data[i].length;\r\n\t\t\t\t\ts += '<row r=\"' + (i + 1) + '\" x14ac:dyDescent=\"0.25\">';\r\n\t\t\t\t\twhile (++j < k) {\r\n\t\t\t\t\t\tcell = data[i][j]; val = cell.hasOwnProperty('value') ? cell.value : cell; t = '';\r\n\t\t\t\t\t\t// supported styles: borders, hAlign, formatCode and font style\r\n\t\t\t\t\t\tstyle = {\r\n\t\t\t\t\t\t\tborders: cell.borders,\r\n\t\t\t\t\t\t\thAlign: cell.hAlign,\r\n\t\t\t\t\t\t\tvAlign: cell.vAlign,\r\n\t\t\t\t\t\t\tbold: cell.bold,\r\n\t\t\t\t\t\t\titalic: cell.italic,\r\n\t\t\t\t\t\t\tfontColor: cell.fontColor,\r\n\t\t\t\t\t\t\tfontName: cell.fontName,\r\n\t\t\t\t\t\t\tfontSize: cell.fontSize,\r\n\t\t\t\t\t\t\tfill: cell.fill,\r\n\t\t\t\t\t\t\tformatCode: cell.formatCode || 'General'\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tcolWidth = 0;\r\n\t\t\t\t\t\tif ((val && typeof val === 'string' && !isFinite(val) && !(cell.genexusType == 'date') && !(cell.genexusType == 'datetime')) || (cell.genexusType == 'character'))  {\r\n\t\t\t\t\t\t\t// If value is string, and not string of just a number, place a sharedString reference instead of the value\r\n\t\t\t\t\t\t\tval = escapeXML(val);\r\n\t\t\t\t\t\t\tsharedStrings[1]++; // Increment total count, unique count derived from sharedStrings[0].length\r\n\t\t\t\t\t\t\tindex = sharedStrings[0].indexOf(val);\r\n\t\t\t\t\t\t\tcolWidth = val.length;\r\n\t\t\t\t\t\t\tif (index < 0) {\r\n\t\t\t\t\t\t\t\tindex = sharedStrings[0].push(val) - 1;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tval = index;\r\n\t\t\t\t\t\t\tt = 's';\r\n\t\t\t\t\t\t} else if (typeof val === 'boolean') {\r\n\t\t\t\t\t\t\tval = (val ? 1 : 0); t = 'b';\r\n\t\t\t\t\t\t\tcolWidth = 1;\r\n\t\t\t\t\t\t} else if ((typeOf(val) === 'date') /*|| (cell.genexusType == 'date') */){\r\n\t\t\t\t\t\t\tvar pars  = val.split(\"-\")\r\n\t\t\t\t\t\t\tvar datePars;\r\n\t\t\t\t\t\t\tif (cell.genexusType == \"datetime\") {\r\n\t\t\t\t\t\t\t\tvar datetimepars  = val.split(\" \")\r\n\t\t\t\t\t\t\t\tpars = datetimepars[0].split(\"-\")\r\n\t\t\t\t\t\t\t\tdatePars = datetimepars[1].split(\":\")\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tvar dt = null;\r\n\t\t\t\t\t\t\t//var dt = new Date(pars[0], parseInt(pars[1])-1, parseInt(pars[2])+1) //, 5+1, 30-15, 0-9);\r\n\t\t\t\t\t\t\tif (cell.genexusType == 'datetime'){\r\n\t\t\t\t\t\t\t\tdt = new Date(pars[0], parseInt(pars[1])-1, parseInt(pars[2]), parseInt(datePars[0])+1, parseInt(datePars[1])-15, parseInt(datePars[2])-9);\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tdt = new Date(pars[0], parseInt(pars[1])-1, parseInt(pars[2])+1)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tval = convertDate(dt);//convertDate(val);\r\n\t\t\t\t\t\t\tif (cell.genexusType == 'date') {\r\n\t\t\t\t\t\t\t\tval = parseInt(val)\r\n\t\t\t\t\t\t\t\tstyle.formatCode = cell.formatCode || 'mm/dd/yy';\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tstyle.formatCode = cell.formatCode || 'mm/dd/yy hh:mm';\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tcolWidth = cell.formatCode.length + 1;\r\n\t\t\t\t\t\t} else if ((cell.genexusType == 'date') || (cell.genexusType == \"datetime\")) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tval = parseDate(val , cell, false);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tval = escapeXML(val);\r\n\t\t\t\t\t\t\tsharedStrings[1]++; // Increment total count, unique count derived from sharedStrings[0].length\r\n\t\t\t\t\t\t\tindex = sharedStrings[0].indexOf(val);\r\n\t\t\t\t\t\t\tcolWidth = val.length;\r\n\t\t\t\t\t\t\tif (index < 0) {\r\n\t\t\t\t\t\t\t\tindex = sharedStrings[0].push(val) - 1;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tval = index;\r\n\t\t\t\t\t\t\tt = 's';\r\n\t\t\t\t\t\t\tstyle.formatCode = 'General'\r\n\t\t\t\t\t\t\tstyle.hAlign = 'right'\r\n\t\t\t\t\t\t} else if (typeof val === 'object') {\r\n\t\t\t\t\t\t\t// unsupported value\r\n\t\t\t\t\t\t\tval = null\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t// number, or string which is a number \r\n\t\t\t\t\t\t\tcolWidth = ('' + val).length;\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t//if (cell.genexusType == \"boolean\"){\r\n\t\t\t\t\t\t\tif ((val == undefined) || (val.trim() == \"\")){ \r\n\t\t\t\t\t\t\t\tval = escapeXML(val);\r\n\t\t\t\t\t\t\t\tsharedStrings[1]++; // Increment total count, unique count derived from sharedStrings[0].length\r\n\t\t\t\t\t\t\t\tindex = sharedStrings[0].indexOf(val);\r\n\t\t\t\t\t\t\t\tcolWidth = val.length;\r\n\t\t\t\t\t\t\t\tif (index < 0) {\r\n\t\t\t\t\t\t\t\t\tindex = sharedStrings[0].push(val) - 1;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tval = index;\r\n\t\t\t\t\t\t\t\tt = 's';\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// use stringified version as unic and reproductible style signature\r\n\t\t\t\t\t\tstyle = JSON.stringify(style);\r\n\t\t\t\t\t\tindex = styles.indexOf(style);\r\n\t\t\t\t\t\tif (index < 0) {\r\n\t\t\t\t\t\t\tstyle = styles.push(style) - 1;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tstyle = index;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// keeps largest cell in column, and autoWidth flag that may be set on any cell\r\n\t\t\t\t\t\tif (columns[j] == null) {\r\n\t\t\t\t\t\t\tcolumns[j] = { autoWidth: false, max: 0 };\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif ((cell.autoWidth) || (cell.genexusType == 'date') || (cell.genexusType == 'datetime')) {\r\n\t\t\t\t\t\t\t//auto width for date and datetime columns\r\n\t\t\t\t\t\t\tcolumns[j].autoWidth = true\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (colWidth > columns[j].max) {\r\n\t\t\t\t\t\t\tcolumns[j].max = colWidth;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// store merges if needed and add missing cells. Cannot have rowSpan AND colSpan\r\n\t\t\t\t\t\tif (cell.colSpan > 1) {\r\n\t\t\t\t\t\t\t// horizontal merge. ex: B12:E12. Add missing cells (with same attribute but value) to current row\r\n\t\t\t\t\t\t\tmerges.push([numAlpha(j) + (i + 1), numAlpha(j + cell.colSpan - 1) + (i + 1)]);\r\n\t\t\t\t\t\t\tmerged = [j, 0]\r\n\t\t\t\t\t\t\tfor (var m = 0; m < cell.colSpan - 1; m++) {\r\n\t\t\t\t\t\t\t\tmerged.push(cell);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tdata[i].splice.apply(data[i], merged);\r\n\t\t\t\t\t\t\tk += cell.colSpan - 1;\r\n\t\t\t\t\t\t} else if (cell.rowSpan > 1) {\r\n\t\t\t\t\t\t\t// vertical merge. ex: B12:B15. Add missing cells (with same attribute but value) to next columns\r\n\t\t\t\t\t\t\tfor (var m = 1; m < cell.rowSpan; m++) {\r\n\t\t\t\t\t\t\t\tif (data[i + m]) {\r\n\t\t\t\t\t\t\t\t\tdata[i + m].splice(j, 0, cell)\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t// readh the end of data\r\n\t\t\t\t\t\t\t\t\tcell.rowSpan = m;\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tmerges.push([numAlpha(j) + (i + 1), numAlpha(j) + (i + cell.rowSpan)]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (cell.rowSpan > 1 || cell.colSpan > 1) {\r\n\t\t\t\t\t\t\t// deletes value, rowSpan and colSpan from cell to avoid refering it from copied cells\r\n\t\t\t\t\t\t\tdelete cell.value;\r\n\t\t\t\t\t\t\tdelete cell.rowSpan;\r\n\t\t\t\t\t\t\tdelete cell.colSpan;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ts += '<c r=\"' + numAlpha(j) + (i + 1) + '\"' + (style ? ' s=\"' + style + '\"' : '') + (t ? ' t=\"' + t + '\"' : '');\r\n\t\t\t\t\t\tif (val != null) {\r\n\t\t\t\t\t\t\ts += '>' + (cell.formula ? '<f>' + cell.formula + '</f>' : '') + '<v>' + val + '</v></c>';\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\ts += '/>';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\ts += '</row>';\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcols = []\r\n\t\t\t\tfor (i = 0; i < columns.length; i++) {\r\n\t\t\t\t\tif (columns[i].autoWidth) {\r\n\t\t\t\t\t\tcols.push('<col min=\"', i + 1, '\" max=\"', i + 1, '\" width=\"', columns[i].max, '\" bestFit=\"1\"/>');\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t// only add cols definition if not empty\r\n\t\t\t\tif (cols.length > 0) {\r\n\t\t\t\t\tcols = ['<cols>'].concat(cols, ['</cols>']).join('');\r\n\t\t\t\t}\r\n\r\n\t\t\t\ts = '<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?><worksheet xmlns=\"http://schemas.openxmlformats.org/spreadsheetml/2006/main\" xmlns:r=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships\" xmlns:mc=\"http://schemas.openxmlformats.org/markup-compatibility/2006\" mc:Ignorable=\"x14ac\" xmlns:x14ac=\"http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac\">'\r\n\t\t\t\t\t+ '<dimension ref=\"A1:' + numAlpha(data[0].length - 1) + data.length + '\"/><sheetViews><sheetView ' + (w === file.activeWorksheet ? 'tabSelected=\"1\" ' : '')\r\n\t\t\t\t\t+ ' workbookViewId=\"0\"/></sheetViews><sheetFormatPr defaultRowHeight=\"15\" x14ac:dyDescent=\"0.25\"/>'\r\n\t\t\t\t\t+ cols\r\n\t\t\t\t\t+ '<sheetData>'\r\n\t\t\t\t\t+ s\r\n\t\t\t\t\t+ '</sheetData>';\r\n\t\t\t\tif (merges.length > 0) {\r\n\t\t\t\t\ts += '<mergeCells count=\"' + merges.length + '\">';\r\n\t\t\t\t\tfor (i = 0; i < merges.length; i++) {\r\n\t\t\t\t\t\ts += '<mergeCell ref=\"' + merges[i].join(':') + '\"/>';\r\n\t\t\t\t\t}\r\n\t\t\t\t\ts += '</mergeCells>';\r\n\t\t\t\t}\r\n\t\t\t\ts += '<pageMargins left=\"0.7\" right=\"0.7\" top=\"0.75\" bottom=\"0.75\" header=\"0.3\" footer=\"0.3\"/>';\r\n\t\t\t\tif (worksheet.table) {\r\n\t\t\t\t\ts += '<tableParts count=\"1\"><tablePart r:id=\"rId1\"/></tableParts>';\r\n\t\t\t\t}\r\n\t\t\t\txlWorksheets.file('sheet' + id + '.xml', s + '</worksheet>');\r\n\r\n\t\t\t\tif (worksheet.table) {\r\n\t\t\t\t\ti = -1; l = data[0].length; t = numAlpha(data[0].length - 1) + data.length;\r\n\t\t\t\t\ts = '<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?><table xmlns=\"http://schemas.openxmlformats.org/spreadsheetml/2006/main\" id=\"' + id\r\n\t\t\t\t\t\t+ '\" name=\"Table' + id + '\" displayName=\"Table' + id + '\" ref=\"A1:' + t + '\" totalsRowShown=\"0\"><autoFilter ref=\"A1:' + t + '\"/><tableColumns count=\"' + data[0].length + '\">';\r\n\t\t\t\t\twhile (++i < l) {\r\n\t\t\t\t\t\ts += '<tableColumn id=\"' + (i + 1) + '\" name=\"' + (data[0][i].hasOwnProperty('value') ? data[0][i].value : data[0][i]) + '\"/>';\r\n\t\t\t\t\t}\r\n\t\t\t\t\ts += '</tableColumns><tableStyleInfo name=\"TableStyleMedium2\" showFirstColumn=\"0\" showLastColumn=\"0\" showRowStripes=\"1\" showColumnStripes=\"0\"/></table>';\r\n\r\n\t\t\t\t\txl.folder('tables').file('table' + id + '.xml', s);\r\n\t\t\t\t\txlWorksheets.folder('_rels').file('sheet' + id + '.xml.rels', '<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?><Relationships xmlns=\"http://schemas.openxmlformats.org/package/2006/relationships\"><Relationship Id=\"rId1\" Type=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships/table\" Target=\"../tables/table' + id + '.xml\"/></Relationships>');\r\n\t\t\t\t\tcontentTypes[1].unshift('<Override PartName=\"/xl/tables/table' + id + '.xml\" ContentType=\"application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml\"/>');\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcontentTypes[0].unshift('<Override PartName=\"/xl/worksheets/sheet' + id + '.xml\" ContentType=\"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml\"/>');\r\n\t\t\t\tprops.unshift(escapeXML(worksheet.name) || 'Sheet' + id);\r\n\t\t\t\txlRels.unshift('<Relationship Id=\"rId' + id + '\" Type=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet\" Target=\"worksheets/sheet' + id + '.xml\"/>');\r\n\t\t\t\tworksheets.unshift('<sheet name=\"' + (escapeXML(worksheet.name) || 'Sheet' + id) + '\" sheetId=\"' + id + '\" r:id=\"rId' + id + '\"/>');\r\n\t\t\t}\r\n\r\n\t\t\t// xl/styles.xml\r\n\t\t\ti = styles.length; t = [];\r\n\t\t\tvar fillIndex = 2;\r\n\t\t\tvar actualFill = 0;\r\n\t\t\twhile (--i) {\r\n\t\t\t\t// Don't process index 0, already added\r\n\t\t\t\tstyle = JSON.parse(styles[i]);\r\n\r\n\t\t\t\t// cell formating, refer to it if necessary\r\n\t\t\t\tif (style.formatCode !== 'General') {\r\n\t\t\t\t\tindex = numFmts.indexOf(style.formatCode);\r\n\t\t\t\t\tif (index < 0) {\r\n\t\t\t\t\t\tindex = 164 + t.length;\r\n\t\t\t\t\t\tt.push('<numFmt formatCode=\"' + style.formatCode + '\" numFmtId=\"' + index + '\"/>');\r\n\t\t\t\t\t}\r\n\t\t\t\t\tstyle.formatCode = index\r\n\t\t\t\t} else {\r\n\t\t\t\t\tstyle.formatCode = 0\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// border declaration: add a new declaration and refer to it in style\r\n\t\t\t\tborderIndex = 0\r\n\t\t\t\tif (style.borders) {\r\n\t\t\t\t\tborder = ['<border>']\r\n\t\t\t\t\t// order is significative\r\n\t\t\t\t\tfor (var edge in { left: 0, right: 0, top: 0, bottom: 0, diagonal: 0 }) {\r\n\t\t\t\t\t\tif (style.borders[edge]) {\r\n\t\t\t\t\t\t\tvar color = style.borders[edge];\r\n\t\t\t\t\t\t\t// add transparency if missing\r\n\t\t\t\t\t\t\tif (color.length === 6) {\r\n\t\t\t\t\t\t\t\tcolor = 'FF' + color;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tborder.push('<', edge, ' style=\"thin\">', '<color rgb=\"', style.borders[edge], '\"/></', edge, '>');\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tborder.push('<', edge, '/>');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tborder.push('</border>');\r\n\t\t\t\t\tborder = border.join('');\r\n\t\t\t\t\t// try to reuse existing border\r\n\t\t\t\t\tborderIndex = borders.indexOf(border);\r\n\t\t\t\t\tif (borderIndex < 0) {\r\n\t\t\t\t\t\tborderIndex = borders.push(border) - 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// font declaration: add a new declaration and refer to it in style\r\n\t\t\t\tfontIndex = 0\r\n\t\t\t\tif (style.bold || style.italic || style.fontSize || style.fontName || style.fontColor) {\r\n\t\t\t\t\tfont = ['<font>']\r\n\t\t\t\t\tif (style.bold) {\r\n\t\t\t\t\t\tfont.push('<b/>');\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (style.italic) {\r\n\t\t\t\t\t\tfont.push('<i/>');\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfont.push('<sz val=\"', style.fontSize || defaultFontSize, '\"/>');\r\n\t\t\t\t\tvar colString =\r\n\t\t\t\t\t\tfont.push('<color rgb=\"FF', style.fontColor || defaultFontColor, '\"/>');\r\n\t\t\t\t\tfont.push('<name val=\"', style.fontName || defaultFontName, '\"/>');\r\n\t\t\t\t\tfont.push('<family val=\"2\"/>', '</font>');\r\n\t\t\t\t\tfont = font.join('');\r\n\t\t\t\t\t// try to reuse existing font\r\n\t\t\t\t\tfontIndex = fonts.indexOf(font);\r\n\t\t\t\t\tif (fontIndex < 0) {\r\n\t\t\t\t\t\tfontIndex = fonts.push(font) - 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//fill declaration: add a new declaration and refer to it in style\r\n\t\t\t\tactualFill = 0;\r\n\t\t\t\tif (style.fill) {\r\n\t\t\t\t\tfills = fills + '<fill><patternFill patternType=\"solid\"><fgColor rgb=\"FF' + style.fill + '\"/>'\r\n\t\t\t\t\t\t+ '<bgColor indexed=\"64\"/></patternFill></fill>'\r\n\t\t\t\t\tfillNumber++;\r\n\t\t\t\t\tactualFill = fillNumber;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// declares style, and refer to optionnal formatCode, font and borders\r\n\t\t\t\tstyles[i] = ['<xf xfId=\"0\" borderId=\"', //fillId=\"0\"  \r\n\t\t\t\t\tborderIndex,\r\n\t\t\t\t\t'\" fontId=\"',\r\n\t\t\t\t\tfontIndex,\r\n\t\t\t\t\t'\" numFmtId=\"',\r\n\t\t\t\t\tstyle.formatCode,\r\n\t\t\t\t\t'\" fillId=\"',\r\n\t\t\t\t\tactualFill,\r\n\t\t\t\t\t'\" ',\r\n\t\t\t\t\t(style.hAlign || style.vAlign ? 'applyAlignment=\"1\" ' : ' '),\r\n\t\t\t\t\t(style.formatCode > 0 ? 'applyNumberFormat=\"1\" ' : ' '),\r\n\t\t\t\t\t(borderIndex > 0 ? 'applyBorder=\"1\" ' : ' '),\r\n\t\t\t\t\t(fontIndex > 0 ? 'applyFont=\"1\" ' : ' '),\r\n\t\t\t\t\t(actualFill > 0 ? 'applyFill=\"1\" ' : ' '),\r\n\t\t\t\t\t'>'\r\n\t\t\t\t];\r\n\t\t\t\tif (style.hAlign || style.vAlign) {\r\n\t\t\t\t\tstyles[i].push('<alignment');\r\n\t\t\t\t\tif (style.hAlign) {\r\n\t\t\t\t\t\tstyles[i].push(' horizontal=\"', style.hAlign, '\"');\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (style.vAlign) {\r\n\t\t\t\t\t\tstyles[i].push(' vertical=\"', style.vAlign, '\"');\r\n\t\t\t\t\t}\r\n\t\t\t\t\tstyles[i].push('/>');\r\n\t\t\t\t}\r\n\t\t\t\tstyles[i].push('</xf>');\r\n\t\t\t\tstyles[i] = styles[i].join('');\r\n\t\t\t}\r\n\t\t\tt = t.length ? '<numFmts count=\"' + t.length + '\">' + t.join('') + '</numFmts>' : '';\r\n\r\n\t\t\txl.file('styles.xml', '<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?><styleSheet xmlns=\"http://schemas.openxmlformats.org/spreadsheetml/2006/main\" xmlns:mc=\"http://schemas.openxmlformats.org/markup-compatibility/2006\" mc:Ignorable=\"x14ac\" xmlns:x14ac=\"http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac\">'\r\n\t\t\t\t+ t + '<fonts count=\"' + fonts.length + '\" x14ac:knownFonts=\"1\"><font><sz val=\"' + defaultFontSize + '\"/><color theme=\"1\"/><name val=\"' + defaultFontName + '\"/><family val=\"2\"/>'\r\n\t\t\t\t+ '<scheme val=\"minor\"/></font>' + fonts.join('') + '</fonts>'\r\n\t/*count=\"2\"*/ + '<fills><fill><patternFill patternType=\"none\"/></fill><fill><patternFill patternType=\"gray125\"/></fill>' + fills + '</fills>'\r\n\t\t\t\t+ '<borders count=\"' + borders.length + '\"><border><left/><right/><top/><bottom/><diagonal/></border>'\r\n\t\t\t\t+ borders.join('') + '</borders><cellStyleXfs count=\"1\">'\r\n\t\t\t\t+ '<xf numFmtId=\"0\" fontId=\"0\" fillId=\"0\" borderId=\"0\"/></cellStyleXfs><cellXfs count=\"' + styles.length + '\"><xf numFmtId=\"0\" fontId=\"0\" fillId=\"0\" borderId=\"0\" xfId=\"0\"/>'\r\n\t\t\t\t+ styles.join('') + '</cellXfs><cellStyles count=\"1\"><cellStyle name=\"Normal\" xfId=\"0\" builtinId=\"0\"/></cellStyles><dxfs count=\"0\"/>'\r\n\t\t\t\t+ '<tableStyles count=\"0\" defaultTableStyle=\"TableStyleMedium2\" defaultPivotStyle=\"PivotStyleLight16\"/>'\r\n\t\t\t\t+ '<extLst><ext uri=\"{EB79DEF2-80B8-43e5-95BD-54CBDDF9020C}\" xmlns:x14=\"http://schemas.microsoft.com/office/spreadsheetml/2009/9/main\">'\r\n\t\t\t\t+ '<x14:slicerStyles defaultSlicerStyle=\"SlicerStyleLight1\"/></ext></extLst></styleSheet>');\r\n\r\n\t\t\t// [Content_Types].xml\r\n\t\t\tzip.file('[Content_Types].xml', '<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?><Types xmlns=\"http://schemas.openxmlformats.org/package/2006/content-types\"><Default Extension=\"rels\" ContentType=\"application/vnd.openxmlformats-package.relationships+xml\"/><Default Extension=\"xml\" ContentType=\"application/xml\"/><Override PartName=\"/xl/workbook.xml\" ContentType=\"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml\"/>'\r\n\t\t\t\t+ contentTypes[0].join('') + '<Override PartName=\"/xl/theme/theme1.xml\" ContentType=\"application/vnd.openxmlformats-officedocument.theme+xml\"/><Override PartName=\"/xl/styles.xml\" ContentType=\"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml\"/><Override PartName=\"/xl/sharedStrings.xml\" ContentType=\"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml\"/>'\r\n\t\t\t\t+ contentTypes[1].join('') + '<Override PartName=\"/docProps/core.xml\" ContentType=\"application/vnd.openxmlformats-package.core-properties+xml\"/><Override PartName=\"/docProps/app.xml\" ContentType=\"application/vnd.openxmlformats-officedocument.extended-properties+xml\"/></Types>');\r\n\r\n\t\t\t// docProps/app.xml\r\n\t\t\tdocProps.file('app.xml', '<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?><Properties xmlns=\"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties\" xmlns:vt=\"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes\"><Application>XLSX.js</Application><DocSecurity>0</DocSecurity><ScaleCrop>false</ScaleCrop><HeadingPairs><vt:vector size=\"2\" baseType=\"variant\"><vt:variant><vt:lpstr>Worksheets</vt:lpstr></vt:variant><vt:variant><vt:i4>'\r\n\t\t\t\t+ file.worksheets.length + '</vt:i4></vt:variant></vt:vector></HeadingPairs><TitlesOfParts><vt:vector size=\"' + props.length + '\" baseType=\"lpstr\"><vt:lpstr>' + props.join('</vt:lpstr><vt:lpstr>')\r\n\t\t\t\t+ '</vt:lpstr></vt:vector></TitlesOfParts><Manager></Manager><Company>Microsoft Corporation</Company><LinksUpToDate>false</LinksUpToDate><SharedDoc>false</SharedDoc><HyperlinksChanged>false</HyperlinksChanged><AppVersion>1.0</AppVersion></Properties>');\r\n\r\n\t\t\t// xl/_rels/workbook.xml.rels\r\n\t\t\txl.folder('_rels').file('workbook.xml.rels', '<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?><Relationships xmlns=\"http://schemas.openxmlformats.org/package/2006/relationships\">'\r\n\t\t\t\t+ xlRels.join('') + '<Relationship Id=\"rId' + (xlRels.length + 1) + '\" Type=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings\" Target=\"sharedStrings.xml\"/>'\r\n\t\t\t\t+ '<Relationship Id=\"rId' + (xlRels.length + 2) + '\" Type=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles\" Target=\"styles.xml\"/>'\r\n\t\t\t\t+ '<Relationship Id=\"rId' + (xlRels.length + 3) + '\" Type=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme\" Target=\"theme/theme1.xml\"/></Relationships>');\r\n\r\n\t\t\t// xl/sharedStrings.xml\r\n\t\t\txl.file('sharedStrings.xml', '<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?><sst xmlns=\"http://schemas.openxmlformats.org/spreadsheetml/2006/main\" count=\"'\r\n\t\t\t\t+ sharedStrings[1] + '\" uniqueCount=\"' + sharedStrings[0].length + '\"><si><t>' + sharedStrings[0].join('</t></si><si><t>') + '</t></si></sst>');\r\n\r\n\t\t\t// xl/workbook.xml\r\n\t\t\txl.file('workbook.xml', '<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?><workbook xmlns=\"http://schemas.openxmlformats.org/spreadsheetml/2006/main\" xmlns:r=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships\">'\r\n\t\t\t\t+ '<fileVersion appName=\"xl\" lastEdited=\"5\" lowestEdited=\"5\" rupBuild=\"9303\"/><workbookPr defaultThemeVersion=\"124226\"/><bookViews><workbookView '\r\n\t\t\t\t+ (file.activeWorksheet ? 'activeTab=\"' + file.activeWorksheet + '\" ' : '') + 'xWindow=\"480\" yWindow=\"60\" windowWidth=\"18195\" windowHeight=\"8505\"/></bookViews><sheets>'\r\n\t\t\t\t+ worksheets.join('') + '</sheets><calcPr calcId=\"145621\"/></workbook>');\r\n\r\n\t\t\tprocessTime = Date.now() - processTime;\r\n\t\t\tzipTime = Date.now();\r\n\t\t\tresult = {\r\n\t\t\t\tbase64: zip.generate({ compression: 'DEFLATE' }), zipTime: Date.now() - zipTime, processTime: processTime,\r\n\t\t\t\thref: function () { return 'data:application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;base64,' + this.base64; }\r\n\t\t\t};\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\r\n\t// NodeJs export\r\n\t/*if (typeof exports === 'object' && typeof module === 'object') {\r\n\t\tmodule.exports = xlsx;\r\n\t}*/\r\n\r\n\tOAT.GeneratePDFOutput = function (self, fileName) {\r\n\t\tvar totalColSpan = -1;\r\n\t\tvar tablemarginleft = 10;\r\n\t\tvar tablemargintop = 13;\r\n\t\tvar cellwidth = 25;\r\n\t\tvar y = -1;\r\n\r\n\t\t//calc max length of paper\r\n\t\tvar hgt = tablemargintop + jQuery(\"#\" + self.controlName + \"_\" + self.query + \" tr\").length * 30 + 5;\r\n\t\tif (hgt < 841) {\r\n\t\t\thgt = 841;\r\n\t\t}\r\n\r\n\t\t//calc max width of paper\r\n\t\tvar wdt = 0;\r\n\r\n\t\tvar title_row = true;\r\n\t\tvar row_num = 0\r\n\t\twhile ((title_row) && (row_num < jQuery(\"#\" + self.controlName + \"_\" + self.query + \" tr\").length)) {\r\n\t\t\tif (jQuery(\"#\" + self.controlName + \"_\" + self.query + \" tr\")[row_num].getAttribute(\"title_row\") != \"true\")\r\n\t\t\t\ttitle_row = false\r\n\t\t\telse\r\n\t\t\t\trow_num++\r\n\t\t}\r\n\r\n\t\tvar tRow = jQuery(\"#\" + self.controlName + \"_\" + self.query + \" tr\")[row_num];\r\n\r\n\t\tif (tRow == undefined) {\r\n\t\t\ttRow = jQuery(\"#\" + self.controlName + \"_\" + self.query + \" tr\")[0];\r\n\t\t}\r\n\t\t//var tRow = jQuery(\"#\" + self.controlName + \"_\" + self.query + \" tr\")[jQuery(\"#\" + self.controlName + \"_\" + self.query + \" tr\").length-1];\r\n\t\tfor (var j = 0; j < tRow.children.length; j++) {\r\n\t\t\tif (tRow.children[j].getAttribute('colspan') != null) {\r\n\t\t\t\twdt = wdt + parseInt(tRow.children[j].getAttribute('colspan'));\r\n\t\t\t} else {\r\n\t\t\t\twdt = wdt + 1;\r\n\t\t\t}\r\n\t\t}\r\n\t\twdt = tablemarginleft + wdt * (cellwidth + 48) + 5;\r\n\t\tif (wdt < 595) {\r\n\t\t\twdt = 595;\r\n\t\t}\r\n\r\n\r\n\r\n\t\t//calculate columns width\r\n\t\tvar columnsWidth = [];\r\n\t\tvar columnsSpan = [];\r\n\t\tfor (var p = 0; p < tRow.childNodes.length; p++){\r\n\t\t\tcolumnsSpan[p] = 0;\r\n\t\t}\r\n\t\tfor (var i = 0; i < jQuery(\"#\" + self.controlName + \"_\" + self.query + \" tr\").length; i++) {//for every row\r\n\r\n\t\t\tvar colspan = -1;\r\n\t\t\ttotalColSpan = -1;\r\n\r\n\t\t\t//calcular el desplazamiento hacia la derecha de la fila, cuando en las filas superiores hay celdas con rowspan mayor a 1\r\n\t\t\tvar desp = 0;\r\n\t\t\t\r\n\t\t\tif (self.colConditions.length == 0){\r\n\t\t\t\tfor (var prevSpan = 0; prevSpan < columnsSpan.length; prevSpan++)\r\n\t\t\t\t{\r\n\t\t\t\t\tif (columnsSpan[prevSpan] > 0) {\r\n\t\t\t\t\t\tdesp = 1 + desp;\r\n\t\t\t\t\t\tcolumnsSpan[prevSpan] = columnsSpan[prevSpan] - 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tfor (var prevR = 0; prevR < i; prevR++) {\t //empiezo desde la de mas arriba\r\n\t\t\t\t\tvar tRowprev = jQuery(\"#\" + self.controlName + \"_\" + self.query + \" tr\")[prevR]; //obtengo la fila\r\n\r\n\t\t\t\t\tfor (var prevC = 0; prevC < tRowprev.children.length; prevC++) {\r\n\t\t\t\t\t\tvar prevRowSpan = tRowprev.children[prevC].getAttribute('rowspan'); //obtengo el rowspan\r\n\t\t\t\t\t\tif ((prevRowSpan != null) && (parseInt(prevRowSpan) > (i - prevR))) { //si el rowspan alcanza a esta fila\r\n\t\t\t\t\t\t\t// el desplazamiento es 1 o el colspan de la celda de arriba\r\n\t\t\t\t\t\t\tvar prevColSpan = tRowprev.children[prevC].getAttribute('colspan'); //obtengo el rowspan\r\n\t\t\t\t\t\t\tif (prevColSpan === null) {\r\n\t\t\t\t\t\t\t\tdesp = 1 + desp;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tdesp = parseInt(prevColSpan) + desp;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tcolspan = desp - 1;\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tvar tRow = jQuery(\"#\" + self.controlName + \"_\" + self.query + \" tr\")[i];\r\n\t\t\t\r\n\t\t\tif (self.colConditions.length == 0){\r\n\t\t\t\t//actualizar rowSpan\r\n\t\t\t\tfor (var j = 0; j < tRow.children.length; j++) {\r\n\t\t\t\t\tvar span = tRow.children[j].getAttribute('rowspan');\r\n\t\t\t\t\tif (span == null) span = 0;\r\n\t\t\t\t\tcolumnsSpan[desp + j] = parseInt(span) - 1\t\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tfor (var j = 0; j < tRow.children.length; j++) { //for every column\r\n\t\t\t\tcolspan++;\r\n\t\t\t\tvar childText = OAT.removeIconFont(tRow.children[j].textContent.replace(/^\\s+|\\s+$/g, ''));\r\n\t\t\t\tvar hidden = tRow.children[j].getAttribute('hidden');\r\n\r\n\t\t\t\tif (hidden === null) {\r\n\r\n\t\t\t\t\tvar row = tRow.children[j].getAttribute('rowspan');\r\n\t\t\t\t\tvar col = tRow.children[j].getAttribute('colspan');\r\n\r\n\t\t\t\t\tvar oldCol = colspan;\r\n\t\t\t\t\tif (columnsWidth[oldCol] == undefined) {\r\n\t\t\t\t\t\tcolumnsWidth[oldCol] = cellwidth;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (((row === null) && (col === null)) || ((j === tRow.children.length - 1) && (col === '3'))) {\r\n\t\t\t\t\t\tif ((col != null) && (childText === \"\")) {\r\n\t\t\t\t\t\t\tcolspan = parseInt(col) + colspan - 1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else if (col === null) {\r\n\t\t\t\t\t} else if (row === null) {\r\n\t\t\t\t\t\tcolspan = parseInt(col) + colspan - 1;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tcolspan = parseInt(col) + colspan - 1;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t//japanese characters\r\n\t\t\t\t\tvar jChar = 0;\r\n\t\t\t\t\tvar carInicialesNoJap = 0\r\n\t\t\t\t\tvar posC = 0;\r\n\t\t\t\t\twhile ((posC < childText.length) && (childText.charCodeAt(posC) < 1000)) {\r\n\t\t\t\t\t\tcarInicialesNoJap++;\r\n\t\t\t\t\t\tposC++;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tjChar = childText.length - carInicialesNoJap;\r\n\t\t\t\t\t//for (var p = 0; p < childText.length; p++){\r\n\t\t\t\t\t//\tif (childText.charCodeAt(p) > 1000){\r\n\t\t\t\t\t//\t\tjChar++;\r\n\t\t\t\t\t//\t}\r\n\t\t\t\t\t//} \r\n\r\n\t\t\t\t\tif (jChar == 0) {\r\n\t\t\t\t\t\tif ((childText.length > 14) && ((col == null) || (i == 0) || (parseInt(col) < 2))) {\r\n\t\t\t\t\t\t\tif ((childText.length * 1.98) > columnsWidth[oldCol]) {\r\n\t\t\t\t\t\t\t\tcolumnsWidth[oldCol] = childText.length * 1.98;//la proporcion aurea?\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t//calculate for japanese space\r\n\t\t\t\t\t\tvar w = jChar * 3.10 + (childText.length - jChar) * 2.00;\r\n\t\t\t\t\t\tif ((w > columnsWidth[oldCol]) && ((col == null) || (i == 0) || (parseInt(col) < 2))) {\r\n\t\t\t\t\t\t\tcolumnsWidth[oldCol] = w;//la proporcion aurea?\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\ttotalColSpan = colspan;\r\n\t\t\t}\r\n\t\t}\r\n\t\t//recalculate widht\r\n\t\tvar nw = 0\r\n\t\tfor (var cWP = 0; cWP < columnsWidth.length; cWP++) {\r\n\t\t\tnw = nw + columnsWidth[cWP] * 2.5 + 48;\r\n\t\t}\r\n\t\tnw = tablemarginleft + nw + 5;\r\n\t\tif (nw > wdt) {\r\n\t\t\twdt = nw;\r\n\t\t}\r\n\r\n\t\tvar getXOffset = function (colspan, columnsWidth) {\r\n\t\t\tif (colspan > columnsWidth.length) {\r\n\t\t\t\tcolspan = columnsWidth.length\r\n\t\t\t}\r\n\t\t\tvar offset = 0;\r\n\t\t\tfor (var cWP = 0; cWP < colspan; cWP++) {\r\n\t\t\t\toffset = offset + columnsWidth[cWP];\r\n\t\t\t}\r\n\t\t\treturn offset;\r\n\t\t}\r\n\r\n\t\tvar getYOffset = function (rowspan, rowsHeight) {\r\n\t\t\t/*if (rowspan > rowsHeight.length){\r\n\t\t\t\trowspan = rowspan.length;\r\n\t\t\t}*/\r\n\t\t\tvar offsety = 0;\r\n\t\t\tfor (var j = 0; j < rowspan; j++) {\r\n\t\t\t\toffsety = offsety + columnsWith[i];\r\n\t\t\t}\r\n\t\t\treturn offsety;\r\n\t\t}\r\n\r\n\r\n\t\t//draw pivot on PDF\r\n\t\tvar doc;\r\n\t\tif (wdt <= 595) {\r\n\t\t\tdoc = new jsPDF('portrait', 'mm', 'a4', false, wdt, 792)//hgt); //landscape or portrait  //con 792 son 26 filas por hoja\r\n\t\t} else if ((wdt > 595) && (wdt < 792)) {\r\n\t\t\tdoc = new jsPDF('landscape', 'mm', 'a4', false, 793, 792)//hgt); //landscape or portrait\t\r\n\t\t} else {\r\n\t\t\tdoc = new jsPDF('landscape', 'mm', 'a4', false, wdt, 792)//hgt); //landscape or portrait\r\n\t\t}\r\n\r\n\r\n\t\tdoc.setFontSize(8);\r\n\t\tvar spanSobrantes = [];\r\n\t\tif (jQuery(\"#\" + self.controlName + \"_\" + self.query + \" tr\")[1 + self.colConditions.length] != undefined) {\r\n\t\t\tfor (var n = 0; n < jQuery(\"#\" + self.controlName + \"_\" + self.query + \" tr\")[1 + self.colConditions.length].children.length; n++) { spanSobrantes[n] = 0 }\r\n\t\t} else {\r\n\t\t\tfor (var n = 0; n < jQuery(\"#\" + self.controlName + \"_\" + self.query + \" tr\")[self.colConditions.length].children.length; n++) { spanSobrantes[n] = 0 }\r\n\t\t}\r\n\t\tcolumnsSpan = [];\r\n\t\tfor (var p = 0; p < columnsWidth.length; p++){\r\n\t\t\tcolumnsSpan[p] = 0;\r\n\t\t}\r\n\t\tfor (var i = 0; i < jQuery(\"#\" + self.controlName + \"_\" + self.query + \" tr\").length; i++) {//for every row\r\n\t\t\t//nroFilaHoja++; \r\n\r\n\t\t\tvar colspan = -1;\r\n\t\t\ttotalColSpan = -1;\r\n\t\t\ty++;\r\n\t\t\t//calcular el desplazamiento hacia la derecha de la fila, cuando en las filas superiores hay celdas con rowspan mayor a 1\r\n\t\t\tvar desp = 0;\r\n\t\t\t\r\n\t\t\tif (self.colConditions.length == 0){\r\n\t\t\t\tfor (var prevSpan = 0; prevSpan < columnsSpan.length; prevSpan++)\r\n\t\t\t\t{\r\n\t\t\t\t\tif (columnsSpan[prevSpan] > 0) {\r\n\t\t\t\t\t\tdesp = 1 + desp;\r\n\t\t\t\t\t\tcolumnsSpan[prevSpan] = columnsSpan[prevSpan] - 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tfor (var prevR = 0; prevR < i; prevR++) {\t //empiezo desde la de mas arriba\r\n\t\t\t\t\tvar tRowprev = jQuery(\"#\" + self.controlName + \"_\" + self.query + \" tr\")[prevR]; //obtengo la fila\r\n\r\n\t\t\t\t\tfor (var prevC = 0; prevC < tRowprev.children.length; prevC++) {\r\n\t\t\t\t\t\tvar prevRowSpan = tRowprev.children[prevC].getAttribute('rowspan'); //obtengo el rowspan\r\n\t\t\t\t\t\tif ((prevRowSpan != null) && (parseInt(prevRowSpan) > (i - prevR))) { //si el rowspan alcanza a esta fila\r\n\t\t\t\t\t\t\t// el desplazamiento es 1 o el colspan de la celda de arriba\r\n\t\t\t\t\t\t\tvar prevColSpan = tRowprev.children[prevC].getAttribute('colspan'); //obtengo el rowspan\r\n\t\t\t\t\t\t\tif (prevColSpan === null) {\r\n\t\t\t\t\t\t\t\tdesp = 1 + desp;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tdesp = parseInt(prevColSpan) + desp;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tcolspan = desp - 1;\r\n\t\t\tvar tRow = jQuery(\"#\" + self.controlName + \"_\" + self.query + \" tr\")[i];\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tif (self.colConditions.length == 0){\r\n\t\t\t\t//actualizar rowSpan\r\n\t\t\t\tfor (var j = 0; j < tRow.children.length; j++) {\r\n\t\t\t\t\tvar span = tRow.children[j].getAttribute('rowspan');\r\n\t\t\t\t\tif (span == null) span = 0;\r\n\t\t\t\t\tcolumnsSpan[desp + j] = parseInt(span) - 1\t\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tvar jR = -1;\r\n\t\t\tfor (var j = 0; j < tRow.children.length; j++) {\r\n\r\n\t\t\t\tvar childText = OAT.removeIconFont(tRow.children[j].textContent.replace(/^\\s+|\\s+$/g, '')); \r\n\t\t\t\tvar hidden = tRow.children[j].getAttribute('hidden');\r\n\t\t\t\tvar ignore = tRow.children[j].getAttribute('pivotcorrect')\r\n\r\n\r\n\t\t\t\t//set styles\r\n\t\t\t\tvar hasBackground = false;\r\n\t\t\t\tdoc.setDrawColor(0, 0, 0);\r\n\t\t\t\tdoc.setTextColor(0, 0, 0);\r\n\t\t\t\tdoc.setFontStyle('normal')\r\n\t\t\t\tvar IsTextAlignRight = (!isNaN(parseFloat(childText)) ||\r\n\t\t\t\t\t((childText == \"-\") && ((tRow.children[j].getAttribute(\"style\") == undefined) || (tRow.children[j].getAttribute(\"style\").indexOf(\"text-align: left\") == -1))));\r\n\t\t\t\tvar textWidht = 0;\r\n\t\t\t\ttextWidht = doc.getStringUnitWidth(childText)\r\n\t\t\t\tif ((tRow.children[j].getAttribute(\"style\") != undefined) && (tRow.children[j].getAttribute(\"style\") != null)) {\r\n\t\t\t\t\tvar attributes = tRow.children[j].getAttribute(\"style\").split(\";\");\r\n\t\t\t\t\tfor (var at = 0; at < attributes.length; at++) {\r\n\t\t\t\t\t\tvar detail = attributes[at].split(\":\");\r\n\t\t\t\t\t\tif (detail[0].replace(/^\\s+|\\s+$/g, '') === \"color\") {\r\n\t\t\t\t\t\t\tvar rgb = detail[1].replace(/^\\s+|\\s+$/g, '');\r\n\t\t\t\t\t\t\trgb = rgb.substring(4, rgb.length);\r\n\t\t\t\t\t\t\trgb = rgb.substring(0, rgb.length - 1);\r\n\t\t\t\t\t\t\tdoc.setTextColor(parseInt(rgb.split(\",\")[0]), parseInt(rgb.split(\",\")[1]), parseInt(rgb.split(\",\")[2]));\r\n\r\n\t\t\t\t\t\t} else if (detail[0].replace(/^\\s+|\\s+$/g, '') === \"text-align\") {\r\n\t\t\t\t\t\t\t//var alg = detail[1].replace(/^\\s+|\\s+$/g, '');\r\n\t\t\t\t\t\t\t//cellObject.vAlign = alg;\r\n\t\t\t\t\t\t\tIsTextAlignRight = (detail[1].replace(/^\\s+|\\s+$/g, '') == \"right\")\r\n\t\t\t\t\t\t} else if (detail[0].replace(/^\\s+|\\s+$/g, '') === \"font-style\") {\r\n\t\t\t\t\t\t\tdoc.setFontStyle('italic')\r\n\t\t\t\t\t\t} else if (detail[0].replace(/^\\s+|\\s+$/g, '') === \"font-weight\") {\r\n\t\t\t\t\t\t\tif (detail[1].replace(/^\\s+|\\s+$/g, '') === \"bold\") {\r\n\t\t\t\t\t\t\t\tdoc.setFontStyle('bold')\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else if (detail[0].replace(/^\\s+|\\s+$/g, '') === \"background-color\") {\r\n\t\t\t\t\t\t\tvar rgb = detail[1].replace(/^\\s+|\\s+$/g, '');\r\n\t\t\t\t\t\t\trgb = rgb.substring(4, rgb.length);\r\n\t\t\t\t\t\t\trgb = rgb.substring(0, rgb.length - 1);\r\n\t\t\t\t\t\t\tdoc.setFillColor(parseInt(rgb.split(\",\")[0]), parseInt(rgb.split(\",\")[1]), parseInt(rgb.split(\",\")[2]));\r\n\t\t\t\t\t\t\t//doc.setDrawColor( parseInt(rgb.split(\",\")[0]) , parseInt(rgb.split(\",\")[1]) , parseInt(rgb.split(\",\")[2]) );\r\n\t\t\t\t\t\t\thasBackground = true;\r\n\t\t\t\t\t\t} else if (detail[0].replace(/^\\s+|\\s+$/g, '') === \"border-color\") {\r\n\t\t\t\t\t\t\tvar rgb = detail[1].replace(/^\\s+|\\s+$/g, '');\r\n\t\t\t\t\t\t\trgb = rgb.substring(4, rgb.length);\r\n\t\t\t\t\t\t\trgb = rgb.substring(0, rgb.length - 1);\r\n\r\n\t\t\t\t\t\t\tdoc.setDrawColor(parseInt(rgb.split(\",\")[0]), parseInt(rgb.split(\",\")[1]), parseInt(rgb.split(\",\")[2]));\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\tvar imgTxtData = []\r\n\t\t\t\tvar lastTxt = \"\", posInitLastTxt = -1\r\n\t\t\t\tvar previousCharCode = 0\r\n\t\t\t\tif (childText.charCodeAt(0) > 1000) {\r\n\t\t\t\t\tfor (var cNo = 0; cNo < childText.length; cNo++) {\r\n\t\t\t\t\t\tif (((previousCharCode == 58) || (previousCharCode == 65306)) && (childText.charCodeAt(cNo) == 32)) {\r\n\t\t\t\t\t\t\timgTxtData[cNo] = \"ToDelete\"\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\timgTxtData[cNo] = OAT.getCharacterImg(childText.charCodeAt(cNo))\r\n\t\t\t\t\t\t\tpreviousCharCode = childText.charCodeAt(cNo)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (childText.charCodeAt(cNo) < 1000) {\r\n\t\t\t\t\t\t\tlastTxt = lastTxt + childText[cNo]\r\n\t\t\t\t\t\t\tif (posInitLastTxt == -1) posInitLastTxt = cNo;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tlastTxt = \"\"\r\n\t\t\t\t\t\t\tposInitLastTxt = -1\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar posI = -1;\r\n\t\t\t\t\t//cNo = 0;\r\n\t\t\t\t\tfor (var p = 1; p < childText.length; p++) {\r\n\t\t\t\t\t\tif (childText.charCodeAt(p) > 1000) {\r\n\t\t\t\t\t\t\tposI = p;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (posI > 0) {\r\n\t\t\t\t\t\tvar tempchildText = childText.substring(0, posI);\r\n\t\t\t\t\t\tvar posE = 0\r\n\t\t\t\t\t\tfor (var cNo = posI; cNo < childText.length; cNo++) {\r\n\t\t\t\t\t\t\tif (childText.charCodeAt(cNo) < 1000) {\r\n\t\t\t\t\t\t\t\tlastTxt = lastTxt + childText[cNo]\r\n\t\t\t\t\t\t\t\tif (posInitLastTxt == -1) posInitLastTxt = cNo - posI;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tlastTxt = \"\"\r\n\t\t\t\t\t\t\t\tposInitLastTxt = -1\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (((previousCharCode == 58) || (previousCharCode == 65306)) && (childText.charCodeAt(cNo) == 32)) {\r\n\t\t\t\t\t\t\t\timgTxtData[posE] = \"ToDelete\"\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\timgTxtData[posE] = OAT.getCharacterImg(childText.charCodeAt(cNo))\r\n\t\t\t\t\t\t\t\tpreviousCharCode = childText.charCodeAt(cNo)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tposE++;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tchildText = tempchildText;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\ttry {\r\n\t\t\t\t\tif ((posInitLastTxt != -1) && (!IsTextAlignRight)) {\r\n\t\t\t\t\t\timgTxtData = imgTxtData.slice(0, posInitLastTxt);\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (Error) { }\r\n\r\n\t\t\t\twhile ((imgTxtData.length > 0) && (imgTxtData.indexOf(\"ToDelete\") != -1)) {\r\n\t\t\t\t\tvar indexTDel = imgTxtData.indexOf(\"ToDelete\")\r\n\t\t\t\t\timgTxtData.splice(indexTDel, 1);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ((hidden === null) && (!ignore)) {\r\n\r\n\t\t\t\t\tcolspan++;\r\n\t\t\t\t\tvar row = tRow.children[j].getAttribute('rowspan');\r\n\t\t\t\t\tvar col = tRow.children[j].getAttribute('colspan');\r\n\t\t\t\t\tjR = jR + 1;\r\n\t\t\t\t\tif (row && ((y + parseInt(row)) > 26)) { //si excedo a la hoja\r\n\t\t\t\t\t\tvar exceso = y + parseInt(row) - 26\r\n\t\t\t\t\t\trow = parseInt(row) - exceso\r\n\t\t\t\t\t\tspanSobrantes[jR + desp] = exceso\r\n\t\t\t\t\t}\r\n\t\t\t\t\t/*for very long text*/\r\n\t\t\t\t\tvar colN = 1;\r\n\t\t\t\t\tif (col != null) colN = parseInt(col);\r\n\t\t\t\t\tif ((j === tRow.children.length - 1) && (colN === 3) && (self.colConditions.length == 0)) colN = 1;\r\n\t\t\t\t\tvar textinic = null; var textend = null;\r\n\t\t\t\t\t/*if (childText.length > 22*colN){\r\n\t\t\t\t\t\tdoc.setFontSize(6);\r\n\t\t\t\t\t\ttextinic = childText.substring(0,21);\r\n\t\t\t\t\t\ttextend  = childText.substring(21,childText.length);\r\n\t\t\t\t\t}*/\r\n\r\n\t\t\t\t\tvar oldCol = colspan;\r\n\t\t\t\t\tif (((row === null) && (col === null)) || ((j === tRow.children.length - 1) && (col === '3') && (self.colConditions.length == 0))) {\r\n\r\n\t\t\t\t\t\tif (hasBackground) {\r\n\t\t\t\t\t\t\tvar preColsPan = colspan;\r\n\t\t\t\t\t\t\tif ((col != null) && (childText === \"\")) {\r\n\t\t\t\t\t\t\t\tpreColsPan = parseInt(col) + colspan - 1;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tdoc.rect(tablemarginleft - 2 + getXOffset(oldCol, columnsWidth), tablemargintop + y * 10 - 7, getXOffset(preColsPan + 1, columnsWidth) - getXOffset(oldCol, columnsWidth), 10, 'F');\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvar preImage = 0;\r\n\t\t\t\t\t\tif (childText.charCodeAt(0) < 1000) {\r\n\t\t\t\t\t\t\tpreImage = childText.length * 1.4 + 2\r\n\t\t\t\t\t\t\tif (IsTextAlignRight) {\r\n\t\t\t\t\t\t\t\tdoc.text(tablemarginleft + getXOffset(colspan + 1, columnsWidth) - textWidht * 3 - 4, tablemargintop + y * 10, childText);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tdoc.text(tablemarginleft + getXOffset(colspan, columnsWidth), tablemargintop + y * 10, childText);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (imgTxtData.length > 0) {\r\n\t\t\t\t\t\t\tfor (var cNo = 0; cNo < imgTxtData.length; cNo++) {\r\n\t\t\t\t\t\t\t\tdoc.addImage(imgTxtData[cNo], 'JPEG', tablemarginleft + getXOffset(colspan, columnsWidth) + preImage + cNo * 2.5, tablemargintop + y * 10 - 2.3, 2.5, 2.5);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif ((posInitLastTxt != -1) && (!IsTextAlignRight)) { //add last text\r\n\t\t\t\t\t\t\tdoc.text(tablemarginleft + getXOffset(colspan, columnsWidth) + preImage + imgTxtData.length * 2.5, tablemargintop + y * 10, lastTxt);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif ((col != null) && (childText === \"\")) {\r\n\t\t\t\t\t\t\tcolspan = parseInt(col) + colspan - 1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t//draw rectangle border\r\n\t\t\t\t\t\tdoc.line(tablemarginleft - 2 + getXOffset(oldCol, columnsWidth), tablemargintop + y * 10 - 7, tablemarginleft - 2 + getXOffset((colspan + 1), columnsWidth), tablemargintop + y * 10 - 7); //top border\r\n\t\t\t\t\t\tdoc.line(tablemarginleft - 2 + getXOffset(oldCol, columnsWidth), tablemargintop + y * 10 - 7, tablemarginleft - 2 + getXOffset(oldCol, columnsWidth), tablemargintop + y * 10 + 3); //left border\r\n\r\n\t\t\t\t\t} else if (col === null) {\r\n\r\n\t\t\t\t\t\tif (hasBackground) {\r\n\t\t\t\t\t\t\tif (row === null) {\r\n\t\t\t\t\t\t\t\tdoc.rect(tablemarginleft - 2 + getXOffset(colspan, columnsWidth), tablemargintop + y * 10 - 7, cellwidth, 10, 'F');\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tdoc.rect(tablemarginleft - 2 + getXOffset(colspan, columnsWidth), tablemargintop + y * 10 - 7, cellwidth, 10 + (parseInt(row) - 1) * 10, 'F');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar preImage = 0;\r\n\t\t\t\t\t\tif (childText.charCodeAt(0) < 1000) {\r\n\t\t\t\t\t\t\tpreImage = childText.length * 1.4 + 2\r\n\t\t\t\t\t\t\tdoc.text(tablemarginleft + getXOffset(colspan, columnsWidth), tablemargintop + y * 10, childText);\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (imgTxtData.length > 0) {\r\n\t\t\t\t\t\t\tfor (var cNo = 0; cNo < imgTxtData.length; cNo++) {\r\n\t\t\t\t\t\t\t\tdoc.addImage(imgTxtData[cNo], 'JPEG', tablemarginleft + getXOffset(colspan, columnsWidth) + preImage + cNo * 2.5, tablemargintop + y * 10 - 2.3, 2.5, 2.5);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif ((posInitLastTxt != -1) && (!IsTextAlignRight)) { //add last text\r\n\t\t\t\t\t\t\tdoc.text(tablemarginleft + getXOffset(colspan, columnsWidth) + preImage + imgTxtData.length * 2.5, tablemargintop + y * 10, lastTxt);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tdoc.line(tablemarginleft - 2 + getXOffset(colspan, columnsWidth), tablemargintop + y * 10 - 7, tablemarginleft - 2 + getXOffset((colspan + 1), columnsWidth), tablemargintop + y * 10 - 7); //top border\r\n\t\t\t\t\t\tif (row === null) {\r\n\t\t\t\t\t\t\tdoc.line(tablemarginleft - 2 + getXOffset(colspan, columnsWidth), tablemargintop + y * 10 - 7, tablemarginleft - 2 + getXOffset(colspan, columnsWidth), tablemargintop + y * 10 + 3); //left border\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tdoc.line(tablemarginleft - 2 + getXOffset(oldCol, columnsWidth), tablemargintop + y * 10 - 7, tablemarginleft - 2 + getXOffset(oldCol, columnsWidth), tablemargintop + (y + parseInt(row) - 1) * 10 + 3); //left border\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else if (row === null) {\r\n\r\n\t\t\t\t\t\tif (hasBackground) {\r\n\t\t\t\t\t\t\tvar prevColsSpan = parseInt(col) + colspan - 1;\r\n\t\t\t\t\t\t\tdoc.rect(tablemarginleft - 2 + getXOffset(oldCol, columnsWidth), tablemargintop + y * 10 - 7, getXOffset((prevColsSpan + 1), columnsWidth) - getXOffset(oldCol, columnsWidth), 10, 'F');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar preImage = 0;\r\n\t\t\t\t\t\tif (childText.charCodeAt(0) < 1000) {\r\n\t\t\t\t\t\t\tpreImage = childText.length * 1.4 + 2\r\n\t\t\t\t\t\t\tdoc.text(tablemarginleft + getXOffset(colspan, columnsWidth), tablemargintop + y * 10, childText);\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (imgTxtData.length > 0) {\r\n\t\t\t\t\t\t\tfor (var cNo = 0; cNo < imgTxtData.length; cNo++) {\r\n\t\t\t\t\t\t\t\tdoc.addImage(imgTxtData[cNo], 'JPEG', tablemarginleft + getXOffset(colspan, columnsWidth) + preImage + cNo * 2.5, tablemargintop + y * 10 - 2.3, 2.5, 2.5);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif ((posInitLastTxt != -1) && (!IsTextAlignRight)) { //add last text\r\n\t\t\t\t\t\t\tdoc.text(tablemarginleft + getXOffset(colspan, columnsWidth) + preImage + imgTxtData.length * 2.5, tablemargintop + y * 10, lastTxt);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tcolspan = parseInt(col) + colspan - 1;\r\n\r\n\t\t\t\t\t\tdoc.line(tablemarginleft - 2 + getXOffset(oldCol, columnsWidth), tablemargintop + y * 10 - 7, tablemarginleft - 2 + getXOffset((colspan + 1), columnsWidth), tablemargintop + y * 10 - 7); //top border\r\n\t\t\t\t\t\tdoc.line(tablemarginleft - 2 + getXOffset(oldCol, columnsWidth), tablemargintop + y * 10 - 7, tablemarginleft - 2 + getXOffset(oldCol, columnsWidth), tablemargintop + y * 10 + 3); //left border\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (hasBackground) {\r\n\t\t\t\t\t\t\tvar prevColsSpan = parseInt(col) + colspan - 1;\r\n\t\t\t\t\t\t\tif (row === null) {\r\n\t\t\t\t\t\t\t\tdoc.rect(tablemarginleft - 2 + getXOffset(oldCol, columnsWidth), tablemargintop + y * 10 - 7, getXOffset((prevColsSpan + 1), columnsWidth) - getXOffset(oldCol, columnsWidth), 10, 'F');\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tdoc.rect(tablemarginleft - 2 + getXOffset(oldCol, columnsWidth), tablemargintop + y * 10 - 7, getXOffset((prevColsSpan + 1), columnsWidth) - getXOffset(oldCol, columnsWidth), (parseInt(row) - 1) * 10, 'F');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar preImage = 0;\r\n\t\t\t\t\t\tif (childText.charCodeAt(0) < 1000) {\r\n\t\t\t\t\t\t\tpreImage = childText.length * 1.4 + 2\r\n\t\t\t\t\t\t\tdoc.text(tablemarginleft /*- 2*/ + getXOffset(colspan, columnsWidth), tablemargintop + y * 10, childText);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (imgTxtData.length > 0) {\r\n\t\t\t\t\t\t\tfor (var cNo = 0; cNo < imgTxtData.length; cNo++) {\r\n\t\t\t\t\t\t\t\tdoc.addImage(imgTxtData[cNo], 'JPEG', tablemarginleft /*- 2*/ + getXOffset(colspan, columnsWidth) + preImage + cNo * 2.5, tablemargintop + y * 10 - 2.3, 2.5, 2.5);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif ((posInitLastTxt != -1) && (!IsTextAlignRight)) { //add last text\r\n\t\t\t\t\t\t\tdoc.text(tablemarginleft /*- 2*/ + getXOffset(colspan, columnsWidth) + preImage + imgTxtData.length * 2.5, tablemargintop + y * 10, lastTxt);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tcolspan = parseInt(col) + colspan - 1;\r\n\r\n\t\t\t\t\t\tdoc.line(tablemarginleft - 2 + getXOffset(oldCol, columnsWidth), tablemargintop + y * 10 - 7, tablemarginleft - 2 + getXOffset((colspan + 1), columnsWidth), tablemargintop + y * 10 - 7); //top border\r\n\t\t\t\t\t\tif (row === null) {\r\n\t\t\t\t\t\t\tdoc.line(tablemarginleft - 2 + getXOffset(oldCol, columnsWidth), tablemargintop + y * 10 - 7, tablemarginleft - 2 + getXOffset(oldCol, columnsWidth), tablemargintop + y * 10 + 3); //left border\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tdoc.line(tablemarginleft - 2 + getXOffset(oldCol, columnsWidth), tablemargintop + y * 10 - 7, tablemarginleft - 2 + getXOffset(oldCol, columnsWidth), tablemargintop + (y + parseInt(row) - 1) * 10 + 3); //left border\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tdoc.setFontSize(8);\r\n\r\n\t\t\t\ttotalColSpan = colspan;\r\n\t\t\t\t//last right border\r\n\t\t\t\tif (j === tRow.children.length - 1) {\r\n\t\t\t\t\tdoc.line(tablemarginleft - 2 + getXOffset((colspan + 1), columnsWidth), tablemargintop + y * 10 - 7, tablemarginleft - 2 + getXOffset((colspan + 1), columnsWidth), tablemargintop + y * 10 + 3);\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t\tif (y >= 25) {\r\n\t\t\t\tdoc.setDrawColor(0, 0, 0)\r\n\t\t\t\t//bottom last line\r\n\t\t\t\tdoc.line(tablemarginleft - 2, tablemargintop + (y + 1) * 10 - 7, tablemarginleft - 2 + getXOffset((totalColSpan + 1), columnsWidth), tablemargintop + (y + 1) * 10 - 7);\r\n\t\t\t\ty = 0\r\n\t\t\t\tdoc.addPage()\r\n\t\t\t\t//add sobrantes\r\n\t\t\t\tfor (var t = 0; t < spanSobrantes.length; t++) {\r\n\t\t\t\t\tif (!isNaN(spanSobrantes[t])) {\r\n\t\t\t\t\t\tif (spanSobrantes[t] >= 25) {\r\n\t\t\t\t\t\t\tspanSobrantes[t] = spanSobrantes[t] - 25\r\n\t\t\t\t\t\t\tdoc.line(tablemarginleft - 2 + getXOffset(t, columnsWidth), tablemargintop + (1) * 10 - 7, tablemarginleft - 2 + getXOffset((t + 1), columnsWidth), tablemargintop + (1) * 10 - 7); //top border\r\n\t\t\t\t\t\t\tdoc.line(tablemarginleft - 2 + getXOffset(t, columnsWidth), tablemargintop + (1) * 10 - 7, tablemarginleft - 2 + getXOffset(t, columnsWidth), tablemargintop + ((1) + 25 - 1) * 10 + 3); //left border\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tdoc.line(tablemarginleft - 2 + getXOffset(t, columnsWidth), tablemargintop + (1) * 10 - 7, tablemarginleft - 2 + getXOffset((t + 1), columnsWidth), tablemargintop + (1) * 10 - 7); //top border\r\n\t\t\t\t\t\t\tdoc.line(tablemarginleft - 2 + getXOffset(t, columnsWidth), tablemargintop + (1) * 10 - 7, tablemarginleft - 2 + getXOffset(t, columnsWidth), tablemargintop + ((1) + spanSobrantes[t] - 1) * 10 + 3); //left border\r\n\t\t\t\t\t\t\tspanSobrantes[t] = 0\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t//spanSobrantes = [] \r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\tdoc.setDrawColor(0, 0, 0)\r\n\t\t//bottom last line\r\n\t\tdoc.line(tablemarginleft - 2, tablemargintop + (y + 1) * 10 - 7, tablemarginleft - 2 + getXOffset((totalColSpan + 1), columnsWidth), tablemargintop + (y + 1) * 10 - 7);\r\n\r\n\t\tif (OAT.isSafari() || (self.isSD)){ //for safari\r\n\t\t\tdoc.output('dataurlnewwindow');\r\n\t\t} else  {\r\n\t\t\tdoc.save(fileName + '.pdf');\r\n\t\t}\r\n\r\n\r\n\t}\r\n\r\n\tvar removeComas = function (value, self) { //TODO: also remove $ and none digital or . characters\r\n\t\tvar newValue = \"\"; actPos = 0;\r\n\r\n\t\tvar decimalSeparator = self.defaultPicture.getAttribute(\"decimalSeparator\");\r\n\r\n\t\tfor (var poVal = 0; poVal < value.length; poVal++) {\r\n\t\t\tif ((value[poVal] == \"0\") || (value[poVal] == \"1\") || (value[poVal] == \"2\")\r\n\t\t\t\t|| (value[poVal] == \"3\") || (value[poVal] == \"4\") || (value[poVal] == \"5\")\r\n\t\t\t\t|| (value[poVal] == \"6\") || (value[poVal] == \"7\") || (value[poVal] == \"8\")\r\n\t\t\t\t|| (value[poVal] == \"9\") || (value[poVal] == decimalSeparator/*\".\"*/) || (value[poVal] == \"-\")) {\r\n\t\t\t\tnewValue = newValue + value[poVal];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (decimalSeparator != \".\") {\r\n\t\t\tvar tempValue = \"\";\r\n\t\t\tfor (var poVal = 0; poVal < newValue.length; poVal++) {\r\n\t\t\t\tif (newValue[poVal] == decimalSeparator) {\r\n\t\t\t\t\ttempValue = tempValue + '.';\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttempValue = tempValue + newValue[poVal];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tnewValue = tempValue;\r\n\t\t}\r\n\t\t//while (value.indexOf(\",\") != -1){\r\n\t\t//\tvalue = value.slice(0, value.indexOf(\",\")) + value.slice(value.indexOf(\",\")+1); \r\n\t\t//}\r\n\t\treturn newValue;\r\n\t}\r\n\t\r\n\t\r\n\tvar cleanDistinctValue = function (value, self, ind) {\r\n\t\tif (value == \"#NuN#\") {\r\n\t\t\treturn \" \";\r\n\t\t} else {\r\n\t\t\tvar replaceAmp = true;\r\n\t\t\tif (value.indexOf(\">\") > -1) {\r\n\t\t\t\tvalue = value.replace(/\\>/g,\"&lt;\")\r\n\t\t\t\treplaceAmp = false\r\n\t\t\t} \r\n\t\t\tif (value.indexOf(\"<\") > -1) {\r\n\t\t\t\tvalue = value.replace(/\\</g,\"&gt;\")\r\n\t\t\t\treplaceAmp = false\r\n\t\t\t}\r\n\t\t\tif (value.indexOf(\"settings\") > -1) {\r\n\t\t\t\tvalue = value.replace(\"settings\", \"\")\r\n\t\t\t\treplaceAmp = false\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif ((value.indexOf(\"%\") > -1) && (ind != undefined)) {\r\n\t\t\t\treturn value.replace(/\\&/g, \"&amp;\").replace(/\"/g, \"&quot;\").replace(/\\%/g, \"%\" + ind).trimpivot() \r\n\t\t\t} else {\r\n\t\t\t\tvalue = value.replace(/\"/g, \"&quot;\")\r\n\t\t\t\tif (replaceAmp){\r\n\t\t\t\t\tvalue = value.replace(/\\&/g, \"&amp;\")\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (value.indexOf(\"&amp;lt;\") > -1){\r\n\t\t\t\t\tvalue = value.replace(/\\&amp\\;lt\\;/g, \"&lt;\")\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\treturn value.trimpivot()\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tvar headers = [];\r\n\tvar getMeasureTitle = function(value, pos){\r\n\t\tif (headers[pos] != undefined)\r\n\t\t{\r\n\t\t\treturn headers[pos]\r\n\t\t} \r\n\t\telse\r\n\t\t{\r\n\t\t\treturn value\r\n\t\t}\r\n\t}\r\n\t\r\n\tvar createExcelROWITEMS = function (item, level, pfvi, lastRowLevel, originalLevel) {\r\n\t\tif (level === 0) {\r\n\t\t\tvar index = pfvi[lastRowLevel].indexOf(item.value);\r\n\t\t\tvar rs = \"\"\r\n\t\t\tif (originalLevel === 0) {\r\n\t\t\t\trs = \"<i>\"\r\n\t\t\t} else {\r\n\t\t\t\trs = \"<i r=\\\"\" + originalLevel + \"\\\">\";\r\n\t\t\t}\r\n\t\t\tif (index > 0) {\r\n\t\t\t\treturn rs + \"<x v=\\\"\" + index + \"\\\"/></i>\";\r\n\t\t\t} else {\r\n\t\t\t\treturn rs + \"<x/></i>\";\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tlevel--;\r\n\t\t\tvar str = \"\"\r\n\t\t\tfor (var i = 0; i < item.items.length; i++) {\r\n\t\t\t\tstr = str + createExcelROWITEMS(item.items[i], level, pfvi, lastRowLevel, originalLevel);\r\n\t\t\t}\r\n\t\t\treturn str;\r\n\t\t}\r\n\t}\r\n\r\n\tvar createExcelCOLITEMS = function (item, level, pfvi, lastRowLevel, originalLevel) {\r\n\t\tif (level === 0) {\r\n\t\t\tvar index = pfvi[lastRowLevel].indexOf(item.value.trimpivot());\r\n\t\t\tvar rs = \"\"\r\n\t\t\tfor (var iCV = 0; iCV < measures.length; iCV++) {\r\n\t\t\t\tif (originalLevel === 0) {\r\n\t\t\t\t\trs = \"<i>\"\r\n\t\t\t\t} else {\r\n\t\t\t\t\trs = \"<i r=\\\"\" + originalLevel + \"\\\">\";\r\n\t\t\t\t}\r\n\t\t\t\t//if (index > 0){\r\n\t\t\t\trs = rs + \"<x v=\\\"\" + index + \"\\\"/>\";\r\n\t\t\t\t//} else {\r\n\t\t\t\t//\trs =  rs +\"<x/></i>\";\r\n\t\t\t\t//}\r\n\t\t\t\tif (measures.length > 1) {\r\n\t\t\t\t\trs = rs + \"<x/>\";\r\n\t\t\t\t}\r\n\t\t\t\trs = rs + \"</i>\";\r\n\t\t\t}\r\n\t\t\treturn rs;\r\n\t\t} else {\r\n\t\t\tlevel--;\r\n\t\t\tvar str = \"\"\r\n\t\t\tfor (var i = 0; i < item.items.length; i++) {\r\n\t\t\t\tstr = str + createExcelROWITEMS(item.items[i], level, pfvi, lastRowLevel, originalLevel);\r\n\t\t\t}\r\n\t\t\treturn str;\r\n\t\t}\r\n\t}\r\n\r\n\tOAT.GenerateExcelOutput = function (fileName, self, measures) {\r\n\t\tfunction componentToHex(c) {\r\n\t\t\tvar hex = c.toString(16);\r\n\t\t\treturn hex.length == 1 ? \"0\" + hex : hex;\r\n\t\t}\r\n\r\n\t\tfunction rgbToHex(r, g, b) {\r\n\t\t\treturn componentToHex(r) + componentToHex(g) + componentToHex(b);\r\n\t\t}\r\n\r\n\t\tfunction getStyles(attributes) {\r\n\t\t\tvar styleObject = {};\r\n\t\t\tfor (var at = 0; at < attributes.length; at++) {\r\n\t\t\t\tvar detail = attributes[at].split(\":\");\r\n\t\t\t\tif (detail[0].replace(/^\\s+|\\s+$/g, '') === \"color\") {\r\n\t\t\t\t\tvar rgb = detail[1].replace(/^\\s+|\\s+$/g, '');\r\n\t\t\t\t\trgb = rgb.substring(4, rgb.length);\r\n\t\t\t\t\trgb = rgb.substring(0, rgb.length - 1);\r\n\t\t\t\t\tvar hex = rgbToHex(parseInt(rgb.split(\",\")[0]), parseInt(rgb.split(\",\")[1]), parseInt(rgb.split(\",\")[2]))\r\n\t\t\t\t\tstyleObject.fontColor = hex;\r\n\t\t\t\t} else if (detail[0].replace(/^\\s+|\\s+$/g, '') === \"text-align\") {\r\n\t\t\t\t\tvar alg = detail[1].replace(/^\\s+|\\s+$/g, '');\r\n\t\t\t\t\tstyleObject.vAlign = alg;\r\n\t\t\t\t} else if (detail[0].replace(/^\\s+|\\s+$/g, '') === \"font-style\") {\r\n\t\t\t\t\tif (detail[1].replace(/^\\s+|\\s+$/g, '') === \"italic\") {\r\n\t\t\t\t\t\tstyleObject.italic = 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (detail[0].replace(/^\\s+|\\s+$/g, '') === \"font-weight\") {\r\n\t\t\t\t\tif (detail[1].replace(/^\\s+|\\s+$/g, '') === \"bold\") {\r\n\t\t\t\t\t\tstyleObject.bold = 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (detail[0].replace(/^\\s+|\\s+$/g, '') === \"background-color\") {\r\n\t\t\t\t\tvar rgb = detail[1].replace(/^\\s+|\\s+$/g, '');\r\n\t\t\t\t\trgb = rgb.substring(4, rgb.length);\r\n\t\t\t\t\trgb = rgb.substring(0, rgb.length - 1);\r\n\t\t\t\t\tvar hex = rgbToHex(parseInt(rgb.split(\",\")[0]), parseInt(rgb.split(\",\")[1]), parseInt(rgb.split(\",\")[2]))\r\n\t\t\t\t\tstyleObject.fill = hex;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn styleObject;\r\n\t\t}\r\n\r\n\t\tvar getMeasureIdentifier = function (self, value) {\r\n\t\t\tfor (var name in self.formulaInfo.itemPosition) {\r\n\t\t\t\tif (self.formulaInfo.itemPosition[name] == value) {\r\n\t\t\t\t\treturn name;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//search repeat column header\r\n\t\theaders = []\r\n\t\tvar previous = []\r\n\t\tfor (var iCV = 0; iCV < measures.length; iCV++) {\r\n\t\t\tfor(var pos = 0; pos < previous.length; pos++){\r\n\t\t\t\tif (previous[pos] == cleanDistinctValue(measures[iCV].getAttribute(\"displayName\"), self, measures[iCV].getAttribute(\"name\")))\r\n\t\t\t\t{\r\n\t\t\t\t\theaders[iCV] = \tcleanDistinctValue(measures[iCV].getAttribute(\"displayName\"), self, measures[iCV].getAttribute(\"name\")) + \" (\" + measures[iCV].getAttribute(\"dataField\") + \")\"\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tprevious.push(cleanDistinctValue(measures[iCV].getAttribute(\"displayName\"), self, measures[iCV].getAttribute(\"name\"))) \r\n\t\t}\r\n\t\t//\t\r\n\r\n\t\tdataTable = [];\r\n\t\t//headers\r\n\t\tdataRow = [];\r\n\t\tfor (var col = 0; col < self.columns.length; col++) {\r\n\t\t\tvar cellObject = { value: cleanDistinctValue(self.columns[col].getAttribute(\"displayName\"), self, self.columns[col].getAttribute(\"name\")) };\r\n\t\t\tcellObject.isString = 1;\r\n\t\t\tdataRow.push(cellObject)\r\n\t\t}\r\n\t\tfor (var iCV = 0; iCV < measures.length; iCV++) {\r\n\t\t\tif (!self.formulaInfo.measureFormula[iCV].hasFormula) {\r\n\t\t\t\tvar cellObject = { value: cleanDistinctValue( getMeasureTitle(measures[iCV].getAttribute(\"displayName\"), iCV), self, measures[iCV].getAttribute(\"name\")) };\r\n\t\t\t\tdataRow.push(cellObject)\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar formMeasures = [];\r\n\t\tif (self.formulaInfo.cantFormulaMeasures > 0) {\r\n\t\t\tfor (var fI = 0; fI < self.formulaInfo.measureFormula.length; fI++) {\r\n\t\t\t\tif (self.formulaInfo.measureFormula[fI].hasFormula) {\r\n\t\t\t\t\tfor (var mI = 0; mI < self.formulaInfo.measureFormula[fI].relatedMeasures.length; mI++) {\r\n\t\t\t\t\t\tvar numMeasure = self.formulaInfo.measureFormula[fI].relatedMeasures[mI]\r\n\t\t\t\t\t\tif (formMeasures.indexOf(numMeasure) == -1) {\r\n\t\t\t\t\t\t\tformMeasures.push(numMeasure)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tformMeasures.sort();\r\n\t\t\tfor (var iCV = 0; iCV < formMeasures.length; iCV++) {\r\n\t\t\t\tvar cellObject = { value: getMeasureIdentifier(self, formMeasures[iCV]) };\r\n\t\t\t\tdataRow.push(cellObject)\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tdataTable.push(dataRow);\r\n\r\n\t\tvar dataToShow = self.GeneralDataRows\r\n\t\tif (self.autoPaging) {\r\n\t\t\tdataToShow = self.RowsWhenMoveToFilter\r\n\t\t}\r\n\t\tif (self.formulaInfo.cantFormulaMeasures > 0) {\r\n\t\t\tdataToShow = self.recordForFormula\r\n\t\t}\r\n\r\n\t\tvar cellObjectStyle = function(element, cellObject){\r\n\t\t\tif (element.getAttribute(\"style\") != undefined) {\r\n\t\t\t\tvar attributes = element.getAttribute(\"style\").split(\";\");\r\n\t\t\t\tfor (var at = 0; at < attributes.length; at++) {\r\n\t\t\t\t\tvar detail = attributes[at].split(\":\");\r\n\t\t\t\t\tif (detail[0].replace(/^\\s+|\\s+$/g, '') === \"color\") {\r\n\t\t\t\t\t\tvar rgb = detail[1].replace(/^\\s+|\\s+$/g, '');\r\n\t\t\t\t\t\trgb = rgb.substring(4, rgb.length);\r\n\t\t\t\t\t\trgb = rgb.substring(0, rgb.length - 1);\r\n\t\t\t\t\t\tvar hex = rgbToHex(parseInt(rgb.split(\",\")[0]), parseInt(rgb.split(\",\")[1]), parseInt(rgb.split(\",\")[2]))\r\n\t\t\t\t\t\tcellObject.fontColor = hex;\r\n\t\t\t\t\t} else if (detail[0].replace(/^\\s+|\\s+$/g, '') === \"text-align\") {\r\n\t\t\t\t\t\tvar alg = detail[1].replace(/^\\s+|\\s+$/g, '');\r\n\t\t\t\t\t\tcellObject.vAlign = alg;\r\n\t\t\t\t\t} else if (detail[0].replace(/^\\s+|\\s+$/g, '') === \"font-style\") {\r\n\t\t\t\t\t\tif (detail[1].replace(/^\\s+|\\s+$/g, '') === \"italic\") {\r\n\t\t\t\t\t\t\tcellObject.italic = 1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else if (detail[0].replace(/^\\s+|\\s+$/g, '') === \"font-weight\") {\r\n\t\t\t\t\t\tif (detail[1].replace(/^\\s+|\\s+$/g, '') === \"bold\") {\r\n\t\t\t\t\t\t\tcellObject.bold = 1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else if (detail[0].replace(/^\\s+|\\s+$/g, '') === \"background-color\") {\r\n\t\t\t\t\t\tvar rgb = detail[1].replace(/^\\s+|\\s+$/g, '');\r\n\t\t\t\t\t\trgb = rgb.substring(4, rgb.length);\r\n\t\t\t\t\t\trgb = rgb.substring(0, rgb.length - 1);\r\n\t\t\t\t\t\tvar hex = rgbToHex(parseInt(rgb.split(\",\")[0]), parseInt(rgb.split(\",\")[1]), parseInt(rgb.split(\",\")[2]))\r\n\t\t\t\t\t\tcellObject.fill = hex;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn cellObject\r\n\t\t}\r\n\r\n\r\n\t\tfor (var rN = 0; rN < dataToShow.length; rN++) {\r\n\t\t\tdataRow = [];\r\n\t\t\tfor (var col = 0; col < self.columns.length; col++) {\r\n\t\t\t\tvar pos = self.conditions[col].dataRowPosition\r\n\t\t\t\tvar value = dataToShow[rN][pos];  \r\n\t\t\t\tif (value == \"#NuN#\") { value = \" \" }\r\n\t\t\t\tvar cellObject = { value: value };\r\n\t\t\t\tcellObject.isString = 1;\r\n\t\t\t\tvar th = OAT.Dom.create(\"th\", {}, \"\");\r\n\t\t\t\tth = self.applyFormatValues(th, dataToShow[rN][pos], pos)\r\n\t\t\t\tcellObject = cellObjectStyle(th, cellObject)\r\n\t\t\t\tcellObject.formatCode = self.defaultPicture.getAttribute(\"dateFormat\")\r\n\t\t\t\tcellObject.genexusType = self.columns[col].getAttribute(\"dataType\");\r\n\t\t\t\tcellObject.genexusPicture = self.columns[col].getAttribute(\"picture\");\r\n\t\t\t\tdataRow.push(cellObject)\r\n\t\t\t}\r\n\t\t\tfor (var iCV = 0; iCV < measures.length; iCV++) {\r\n\t\t\t\tif (!self.formulaInfo.measureFormula[iCV].hasFormula) {\r\n\t\t\t\t\tvar pos = self.columns.length + iCV;\r\n\t\t\t\t\tvar value = dataToShow[rN][pos];\r\n\t\t\t\t\tvalue = self.defaultPictureValue(value, (iCV == measures.length - 1), iCV)\r\n\t\t\t\t\tvalue = removeComas(value, self);\r\n\t\t\t\t\tvar cellObject = { value: value };\r\n\t\t\t\t\tvar td = OAT.Dom.create(\"td\", {}, \"\");\r\n\t\t\t\t\ttd = self.applyConditionalFormats(td, dataToShow[rN][pos], (iCV === (measures.length - 1)) ? true : false, iCV)\r\n\t\t\t\t\tcellObject = cellObjectStyle(td, cellObject)\r\n\t\t\t\t\tcellObject.formatCode = self.defaultPicture.getAttribute(\"dateFormat\")\r\n\t\t\t\t\tcellObject.genexusType = measures[iCV].getAttribute(\"dataType\");\r\n\t\t\t\t\tcellObject.genexusPicture = measures[iCV].getAttribute(\"picture\");\r\n\t\t\t\t\tdataRow.push(cellObject)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfor (var formItem = 0; formItem < formMeasures.length; formItem++) {\r\n\t\t\t\tdataRow.push({ value: dataToShow[rN][formMeasures[formItem]] })\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tdataTable.push(dataRow);\r\n\t\t}\r\n\r\n\r\n\t\tvar stylesList = [];\r\n\t\tvar columnWithStyle = [];\r\n\t\tvar styleId = 1\r\n\t\tfor (var col = 0; col < self.columns.length; col++) {\r\n\t\t\tcolumnWithStyle[col] = 0;\r\n\t\t\tvar th = OAT.Dom.create(\"th\", {}, \"\");\r\n\t\t\tvar pos = self.conditions[col].dataRowPosition\r\n\t\t\tth = self.applyFormatValues(th, dataToShow[0][pos], pos)\r\n\r\n\t\t\tif (th.getAttribute(\"style\") != undefined) {\r\n\t\t\t\tvar attributes = th.getAttribute(\"style\").split(\";\");\r\n\t\t\t\tvar styleObject = getStyles(attributes);\r\n\t\t\t\tif ((styleObject.fontColor != undefined) || (styleObject.italic != undefined) || (styleObject.bold != undefined)) {\r\n\t\t\t\t\tcolumnWithStyle[col] = styleId;\r\n\t\t\t\t\tstyleId++;\r\n\t\t\t\t\tstylesList.push(styleObject);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar measuresWidthStyle = [];\r\n\t\tfor (var ms = 0; ms < measures.length; ms++) {\r\n\t\t\tmeasuresWidthStyle[ms] = 0;\r\n\t\t\tvar td = OAT.Dom.create(\"td\", {}, \"\");\r\n\t\t\tvar pos = self.columns.length + ms;\r\n\t\t\ttd = self.applyConditionalFormats(td, dataToShow[0][pos], (ms === (measures.length - 1)) ? true : false, ms)\r\n\r\n\t\t\tif (td.getAttribute(\"style\") != undefined) {\r\n\t\t\t\tvar attributes = td.getAttribute(\"style\").split(\";\");\r\n\t\t\t\tvar styleObject = getStyles(attributes);\r\n\t\t\t\tif ((styleObject.fontColor != undefined) || (styleObject.italic != undefined) || (styleObject.bold != undefined)) {\r\n\t\t\t\t\tmeasuresWidthStyle[ms] = styleId;\r\n\t\t\t\t\tstyleId++;\r\n\t\t\t\t\tstylesList.push(styleObject);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\r\n\t\t\r\n\t\t\r\n\t\tvar cacheRecords = '<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?>\\n'\r\n\t\t\t\t+ '<pivotCacheRecords xmlns=\"http://schemas.openxmlformats.org/spreadsheetml/2006/main\" xmlns:r=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships\">'\r\n\t\tvar cacheDefinition = '<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?>\\n'\r\n\t\t\t\t+ '<pivotCacheDefinition r:id=\"rId1\" refreshOnLoad=\"1\" xmlns=\"http://schemas.openxmlformats.org/spreadsheetml/2006/main\" xmlns:r=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships\">\\n'\r\n\t\t\t\t+ '<cacheSource type=\"worksheet\">\\n'\r\n\t\tvar letras = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z', 'AA', 'AB', 'AC', 'AD'];\r\n\t\t\r\n\t\tvar withStyles = (stylesList.length > 0);\r\n\t\tvar lastPos = letras[(measures.length + self.columns.length) - 1] + (dataToShow.length + 1 + 2);\r\n\t\t//xl/pivotTables/pivotTable1.xml string definition\r\n\t\tvar firstDataRow = self.colConditions.length + 2;\r\n\t\tvar firstDataCol = (((self.colConditions.length > 0)) ? self.colConditions.length : 1);\r\n\r\n\t\tvar hasFormula = false;\r\n\t\tvar totalsExportPivotPdfOptions = \" \";\r\n\t\tfor (var fIdx = 0; fIdx < self.formulaInfo.measureFormula.length; fIdx++) {\r\n\t\t\tif (self.formulaInfo.measureFormula[fIdx].hasFormula) {\r\n\t\t\t\thasFormula = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar dataToShow = self.GeneralDataRows\r\n\t\tif (self.autoPaging) {\r\n\t\t\tdataToShow = self.RowsWhenMoveToFilter\r\n\t\t}\r\n\r\n\t\tvar sheet;\r\n\t\t//--------------\r\n\t\tif (self.columns.length < 0) {\r\n\r\n\t\t\tvar xlpivotTable1 = '<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?>'\r\n\t\t\t\t+ '<pivotTableDefinition name=\"Tabla dinamica1\" cacheId=\"5\" dataCaption=\"' + \"Value\"/*gx.getMessage(\"GXPL_QViewerJSValue\")*/ + '\" createdVersion=\"3\" updatedVersion=\"3\" minRefreshableVersion=\"3\" applyNumberFormats=\"0\" applyBorderFormats=\"0\" applyFontFormats=\"0\" applyPatternFormats=\"0\" applyAlignmentFormats=\"0\" applyWidthHeightFormats=\"1\" showCalcMbrs=\"0\" useAutoFormatting=\"1\" itemPrintTitles=\"1\" indent=\"0\" outline=\"1\" outlineData=\"1\" multipleFieldFilters=\"0\" rowHeaderCaption=\"Make\" ' + totalsExportPivotPdfOptions + 'xmlns=\"http://schemas.openxmlformats.org/spreadsheetml/2006/main\">'\r\n\t\t\t\t+ \"<location ref=\\\"A1:\" + lastPos + \"\\\" firstHeaderRow=\\\"1\\\" firstDataRow=\\\"\" + firstDataRow + \"\\\" firstDataCol=\\\"\" + firstDataCol + \"\\\"/>\"\r\n\t\t\t\t+ \"<pivotFields>\"\r\n\t\t\tvar pfi = [];\r\n\t\t\tvar pfvi = [];\r\n\t\t\tvar pfviExclude = [];\r\n\r\n\t\t\tvar rowLevel = -1;\r\n\t\t\tvar lastRowLevel = 0;\r\n\t\t\tvar colLevel = -1;\r\n\t\t\tvar lastColLevel = 0;\r\n\t\t\tfor (var iCV = 0; iCV < self.columns.length; iCV++) {\r\n\r\n\t\t\t\tvar position = 'axisRow';\r\n\t\t\t\tif (self.rowConditions.findIndex(iCV) != -1) {\r\n\t\t\t\t\tposition = 'axisRow';\r\n\t\t\t\t\trowLevel++;\r\n\t\t\t\t\tlastRowLevel = iCV;\r\n\t\t\t\t} else if (self.colConditions.findIndex(iCV) != -1) {\r\n\t\t\t\t\tposition = 'axisCol';\r\n\t\t\t\t\tcolLevel++;\r\n\t\t\t\t\tlastColLevel = iCV;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tposition = 'axisRow';\r\n\t\t\t\t\trowLevel++;\r\n\t\t\t\t\tlastRowLevel = iCV;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar formulaOptionString = '';\r\n\t\t\t\tvar formulaItemString = \"<item t=\\\"default\\\"/>\"\r\n  \r\n\t\t\t\txlpivotTable1 = xlpivotTable1 + \"<pivotField axis=\\\"\" + position + \"\\\" showAll=\\\"0\\\" \" + formulaOptionString + \">\" + //numFmtId=\\\"\" + 163 + \"\\\"\r\n\t\t\t\t\t\"<items>\"\r\n\t\t\t\tvar pfvl; var pfvlExclude;\r\n\t\t\t\tif (self.conditions[iCV].distinctValues != undefined) {\r\n\t\t\t\t\tpfvl = []; pfvlExclude = [];\r\n\t\t\t\t\tfor (var val = 0; val < self.conditions[iCV].distinctValues.length; val++) {\r\n\t\t\t\t\t\tpfvl.push(cleanDistinctValue(self.conditions[iCV].distinctValues[val], self));\r\n\t\t\t\t\t\tvar hiddenString = \"\";\r\n\t\t\t\t\t\tif (self.conditions[iCV].blackList.findIndex(self.conditions[iCV].distinctValues[val]) != -1) {\r\n\t\t\t\t\t\t\thiddenString = \" h=\\\"1\\\"\";\r\n\t\t\t\t\t\t\tpfvlExclude.push(cleanDistinctValue(self.conditions[iCV].distinctValues[val], self));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\txlpivotTable1 = xlpivotTable1 + \"<item x=\\\"\" + val + \"\\\" \" + hiddenString + \" />\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\txlpivotTable1 = xlpivotTable1 + formulaItemString\r\n\t\t\t\t\t\t+ \"</items>\"\r\n\t\t\t\t\t\t+ \"</pivotField>\";\r\n\t\t\t\t}\r\n\t\t\t\tpfvi[iCV] = pfvl;\r\n\t\t\t\tpfviExclude[iCV] = pfvlExclude[iCV]\r\n\t\t\t\tpfi.push(iCV);\r\n\t\t\t}\r\n\r\n\t\t\tfor (var iCV = 0; iCV < measures.length; iCV++) {\r\n\t\t\t\txlpivotTable1 = xlpivotTable1 + \"<pivotField dataField=\\\"1\\\" showAll=\\\"0\\\"/>\"; //numFmtId=\\\"\" + 163 + \"\\\"\r\n\t\t\t\tpfi.push(cleanDistinctValue(getMeasureTitle(measures[iCV].getAttribute(\"displayName\"), iCV), self, measures[iCV].getAttribute(\"name\")));\r\n\t\t\t}\r\n\r\n\t\t\txlpivotTable1 = xlpivotTable1 + \"</pivotFields>\"\r\n\t\t\txlpivotTable1 = xlpivotTable1 + \"<rowFields>\"\r\n\t\t\tfor (var iCV = 0; iCV < self.columns.length; iCV++) {\r\n\t\t\t\tif ((self.rowConditions.findIndex(iCV) != -1) || (self.filterIndexes.findIndex(iCV) != -1)) {\r\n\t\t\t\t\txlpivotTable1 = xlpivotTable1 + \"<field x=\\\"\" + 0 + \"\\\"/>\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\txlpivotTable1 = xlpivotTable1 + \"</rowFields>\"\r\n\r\n\t\t\txlpivotTable1 = xlpivotTable1 + \"<rowItems>\"\r\n\t\t\tfor (var it = 0; it < self.rowStructure.items.length; it++) {\r\n\t\t\t\txlpivotTable1 = xlpivotTable1 + createExcelROWITEMS(self.rowStructure.items[it], rowLevel, pfvi, lastRowLevel, rowLevel)\r\n\t\t\t}\r\n\t\t\txlpivotTable1 = xlpivotTable1 + \"<i t=\\\"grand\\\"><x/></i>\"\r\n\t\t\t\t+ \"</rowItems>\"\r\n\r\n\t\t\tif ((((colLevel > -1)) || ((measures.length > 1)))) {\r\n\t\t\t\txlpivotTable1 = xlpivotTable1 + \"<colFields>\"\r\n\r\n\t\t\t\tfor (var iCV = 0; iCV < self.columns.length; iCV++) {\r\n\t\t\t\t\tif (self.colConditions.findIndex(iCV) != -1) {\r\n\t\t\t\t\t\tvar pos = pfi.indexOf(iCV);\r\n\t\t\t\t\t\txlpivotTable1 = xlpivotTable1 + \"<field x=\\\"\" + pos + \"\\\"/>\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (measures.length > 1) {\r\n\t\t\t\t\txlpivotTable1 = xlpivotTable1 + \"<field x=\\\"-2\\\"/>\";\r\n\t\t\t\t};\r\n\r\n\t\t\t\txlpivotTable1 = xlpivotTable1 + \"</colFields>\"\r\n\t\t\t}\r\n\r\n\t\t\t//col items\r\n\t\t\txlpivotTable1 = xlpivotTable1 + \"<colItems>\"\r\n\t\t\tif (self.colStructure.items) {\r\n\t\t\t\tfor (var it = 0; it < self.colStructure.items.length; it++) {\r\n\t\t\t\t\txlpivotTable1 = xlpivotTable1 + createExcelCOLITEMS(self.colStructure.items[it], colLevel, pfvi, lastColLevel, colLevel)\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tfor (var iCV = 0; iCV < measures.length; iCV++) {\r\n\t\t\t\t\txlpivotTable1 = xlpivotTable1 + '<i/>';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\txlpivotTable1 = xlpivotTable1 + \"</colItems>\"\r\n\r\n\t\t\txlpivotTable1 = xlpivotTable1 + \"<dataFields>\"\r\n\t\t\tfor (var iCV = 0; iCV < measures.length; iCV++) {\r\n\t\t\t\txlpivotTable1 = xlpivotTable1 + \"<dataField name=\\\"\" + cleanDistinctValue(getMeasureTitle(measures[iCV].getAttribute(\"displayName\"), iCV), self, measures[iCV].getAttribute(\"name\")) + \"\\\" fld=\\\"\" + (iCV + self.columns.length) + \"\\\"/>\" //\\\" subtotal=\\\"sum\\\" numFmtId=\\\"163\\\"\t\t\r\n\t\t\t}\r\n\r\n\t\t\txlpivotTable1 = xlpivotTable1 + \"</dataFields>\"\r\n\r\n\r\n\t\t\tif (withStyles) {\r\n\t\t\t\txlpivotTable1 = xlpivotTable1 + '<formats>'\r\n\t\t\t\t//format for columns\r\n\t\t\t\tfor (var iCV = 0; iCV < self.columns.length; iCV++) {\r\n\t\t\t\t\tif (columnWithStyle[iCV] > 0) {\r\n\t\t\t\t\t\txlpivotTable1 = xlpivotTable1 + '<format dxfId=\"' + columnWithStyle[iCV] + '\">' + '<pivotArea dataOnly=\"0\" labelOnly=\"1\" fieldPosition=\"0\">' + '<references ><reference field=\"0\">'\r\n\r\n\t\t\t\t\t\tif (self.conditions[iCV].distinctValues != undefined) {\r\n\t\t\t\t\t\t\tfor (var val = 0; val < self.conditions[iCV].distinctValues.length; val++) {\r\n\t\t\t\t\t\t\t\txlpivotTable1 = xlpivotTable1 + '<x v=\"' + val + '\"/>';\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\txlpivotTable1 = xlpivotTable1 + '</reference></references>' + '</pivotArea>' + '</format>'\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor (var it = 0; it < measures.length; it++) {\r\n\t\t\t\t\tif (measuresWidthStyle[it] > 0) {\r\n\t\t\t\t\t\txlpivotTable1 = xlpivotTable1 + '<format dxfId=\"' + measuresWidthStyle[it] + '\">'\r\n\t\t\t\t\t\txlpivotTable1 = xlpivotTable1 + '<pivotArea  fieldPosition=\"0\">'\r\n\t\t\t\t\t\txlpivotTable1 = xlpivotTable1 + '<references>'\r\n\t\t\t\t\t\txlpivotTable1 = xlpivotTable1 + '<reference field=\"4294967294\" selected=\"0\">'\r\n\t\t\t\t\t\txlpivotTable1 = xlpivotTable1 + '<x v=\"' + it + '\"/></reference>'\r\n\t\t\t\t\t\txlpivotTable1 = xlpivotTable1 + '<reference field=\"0\">'\r\n\t\t\t\t\t\tfor (var p = 0; p < self.rowStructure.items.length; p++) {\r\n\t\t\t\t\t\t\txlpivotTable1 = xlpivotTable1 + '<x v=\"' + p + '\"/>'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\txlpivotTable1 = xlpivotTable1 + '</reference>'\r\n\t\t\t\t\t\txlpivotTable1 = xlpivotTable1 + '</references></pivotArea>'\r\n\t\t\t\t\t\txlpivotTable1 = xlpivotTable1 + '</format>'\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\txlpivotTable1 = xlpivotTable1 + '</formats>'\r\n\t\t\t}\r\n\r\n\t\t\txlpivotTable1 = xlpivotTable1 + \"<pivotTableStyleInfo name=\\\"PivotStyleLight16\\\" showRowHeaders=\\\"1\\\" showColHeaders=\\\"1\\\" showRowStripes=\\\"0\\\" showColStripes=\\\"0\\\" showLastColumn=\\\"1\\\"/>\"\r\n\t\t\t\t+ \"</pivotTableDefinition>\"\r\n\r\n\t\t\tvar xlstyle = '<dxf><font><color rgb=\"FFCCCCCC\" /></font></dxf>';\r\n\t\t\tif (withStyles) {\r\n\t\t\t\tfor (var s = 0; s < stylesList.length; s++) {\r\n\t\t\t\t\txlstyle = xlstyle + '<dxf><font>'\r\n\t\t\t\t\tif (stylesList[s].bold != undefined) {\r\n\t\t\t\t\t\txlstyle = xlstyle + '<b/>'\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (stylesList[s].italic != undefined) {\r\n\t\t\t\t\t\txlstyle = xlstyle + '<i/>'\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (stylesList[s].fontColor != undefined) {\r\n\t\t\t\t\t\txlstyle = xlstyle + '<color rgb=\"FF' + stylesList[s].fontColor + '\"/>'\r\n\t\t\t\t\t}\r\n\t\t\t\t\txlstyle = xlstyle + '</font></dxf>';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar dfxStr = xlstyle;\r\n\t\t\t//xl/pivotCache/cacheRecords\r\n\t\t\tfor (var rN = 0; rN < dataToShow.length; rN++) {\r\n\t\t\t\tcacheRecords = cacheRecords + \"<r>\"\r\n\r\n\t\t\t\tfor (var col = 0; col < self.columns.length; col++) {\r\n\t\t\t\t\tvar vvalue = pfvi[col].indexOf(dataToShow[rN][col])\r\n\t\t\t\t\tcacheRecords = cacheRecords + '<x v=\"' + vvalue + '\"/>'\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor (var iCV = 0; iCV < measures.length; iCV++) {\r\n\t\t\t\t\tvar pos = self.columns.length + iCV;\r\n\t\t\t\t\tvar value = self.defaultPictureValue(dataToShow[rN][pos], (iCV == measures.length - 1), iCV)\r\n\t\t\t\t\tvalue = removeComas(value, self);\r\n\t\t\t\t\tvalue = cleanDistinctValue(value, self)\r\n\t\t\t\t\tcacheRecords = cacheRecords + '<n v=\\\"' + value + '\"/>';\r\n\t\t\t\t}\r\n\t\t\t\tcacheRecords = cacheRecords + \"</r>\"\r\n\t\t\t}\r\n\t\t\tcacheRecords = cacheRecords + '</pivotCacheRecords>';\r\n\r\n\r\n\t\t\t//xl/pivotCache/cacheDefinition\r\n\t\t\t\r\n\t\t\tcacheDefinition = cacheDefinition + '<worksheetSource ref=\"A1:' + letras[self.columns.length + measures.length - 1] + (dataToShow.length + 1) + '\" sheet=\"SourceData\"/>'\r\n\t\t\tcacheDefinition = cacheDefinition + '</cacheSource>'\r\n\t\t\tcacheDefinition = cacheDefinition + '<cacheFields count=\"' + (self.columns.length + measures.length) + '\">'\r\n\t\t\tfor (var col = 0; col < self.columns.length; col++) {\r\n\t\t\t\tcacheDefinition = cacheDefinition + '<cacheField name=\"' + cleanDistinctValue(self.columns[col].getAttribute(\"displayName\"), self, self.columns[col].getAttribute(\"name\")).replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(\"settings\", \"\") + '\" numFmtId=\"0\">'\r\n\t\t\t\tcacheDefinition = cacheDefinition + '<sharedItems count=\"' + self.conditions[col].distinctValues.length + '\">'\r\n\t\t\t\tfor (var val = 0; val < self.conditions[col].distinctValues.length; val++) {\r\n\t\t\t\t\tcacheDefinition = cacheDefinition + '<s v=\"' + cleanDistinctValue(self.conditions[col].distinctValues[val], self)/*self.conditions[col].distinctValues[val].replace(/\\&/g, \"&amp;\").replace(/\"/g, \"&quot;\")*/ + '\"/>';\r\n\t\t\t\t}\r\n\t\t\t\tcacheDefinition = cacheDefinition + '</sharedItems>'\r\n\t\t\t\tcacheDefinition = cacheDefinition + '</cacheField>'\r\n\t\t\t}\r\n\t\t\tfor (var iCV = 0; iCV < measures.length; iCV++) {\r\n\t\t\t\tcacheDefinition = cacheDefinition + '<cacheField name=\"' + cleanDistinctValue(getMeasureTitle(measures[iCV].getAttribute(\"displayName\"),iCV), self, measures[iCV].getAttribute(\"name\")) + '\" numFmtId=\"0\">'\r\n\t\t\t\tcacheDefinition = cacheDefinition + '<sharedItems/>'\r\n\t\t\t\tcacheDefinition = cacheDefinition + '</cacheField>'\r\n\t\t\t}\r\n\t\t\tcacheDefinition = cacheDefinition + '</cacheFields>'\r\n\t\t\tcacheDefinition = cacheDefinition + '</pivotCacheDefinition>'\r\n\r\n\t\t\t//xl - woorksheet - sheet2\r\n\t\t\tvar sheet2 = '<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?>'\r\n\t\t\t\t+ '<worksheet xmlns=\"http://schemas.openxmlformats.org/spreadsheetml/2006/main\" xmlns:r=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships\">'\r\n\t\t\t\t+ '<dimension ref=\"A1:' + letras[self.columns.length + measures.length - 1] + (dataToShow.length + 1) + '\"/>'\r\n\t\t\t\t+ '<sheetViews>'\r\n\t\t\t\t+ '<sheetView workbookViewId=\"0\"/>'\r\n\t\t\t\t+ '</sheetViews>'\r\n\t\t\t\t+ '<sheetData>'\r\n\t\t\tvar rowNumber = 1;\r\n\t\t\tvar colNumber = 0;\r\n\t\t\t//headers\r\n\t\t\tsheet2 = sheet2 + '<row r=\"' + rowNumber + '\" span=\"1:3\">'\r\n\t\t\tfor (var col = 0; col < self.columns.length; col++) {\r\n\t\t\t\tsheet2 = sheet2 + '<c t=\"inlineStr\" r=\"' + letras[colNumber] + rowNumber + '\">'\r\n\t\t\t\tsheet2 = sheet2 + '<is><t>' + cleanDistinctValue(self.columns[col].getAttribute(\"displayName\"), self, self.columns[col].getAttribute(\"name\")) + '</t></is>'\r\n\t\t\t\tsheet2 = sheet2 + '</c>'\r\n\t\t\t\tcolNumber++;\r\n\t\t\t}\r\n\t\t\tfor (var iCV = 0; iCV < measures.length; iCV++) {\r\n\t\t\t\tsheet2 = sheet2 + '<c t=\"inlineStr\" r=\"' + letras[colNumber] + rowNumber + '\">'\r\n\t\t\t\tsheet2 = sheet2 + '<is><t>' + cleanDistinctValue(getMeasureTitle(measures[iCV].getAttribute(\"displayName\"),iCV), self, measures[iCV].getAttribute(\"name\")) + '</t></is>'\r\n\t\t\t\tsheet2 = sheet2 + '</c>'\r\n\t\t\t\tcolNumber++;\r\n\t\t\t}\r\n\t\t\tsheet2 = sheet2 + '</row>'\r\n\r\n\t\t\tfor (var rN = 0; rN < dataToShow.length; rN++) {\r\n\t\t\t\tcolNumber = 0;\r\n\t\t\t\trowNumber++;\r\n\t\t\t\tsheet2 = sheet2 + '<row r=\"' + rowNumber + '\" span=\"1:3\">'\r\n\t\t\t\tfor (var col = 0; col < self.columns.length; col++) {\r\n\t\t\t\t\tvar pos = self.conditions[col].dataRowPosition\r\n\t\t\t\t\tvar value = cleanDistinctValue(dataToShow[rN][pos], self)\r\n\r\n\t\t\t\t\tsheet2 = sheet2 + '<c t=\"inlineStr\" r=\"' + letras[colNumber] + rowNumber + '\">'\r\n\t\t\t\t\tsheet2 = sheet2 + '<is><t>' + value + '</t></is>'\r\n\t\t\t\t\tsheet2 = sheet2 + '</c>'\r\n\t\t\t\t\tcolNumber++;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor (var iCV = 0; iCV < measures.length; iCV++) {\r\n\t\t\t\t\tpos = self.columns.length + iCV;\r\n\t\t\t\t\tvar value = self.defaultPictureValue(dataToShow[rN][pos], (iCV == measures.length - 1), iCV)\r\n\t\t\t\t\tvalue = removeComas(value, self);\r\n\t\t\t\t\tvalue = cleanDistinctValue(value);\r\n\t\t\t\t\tif ((measures[iCV].getAttribute('dataType') === \"real\") || (measures[iCV].getAttribute('dataType') === \"integer\")) {\r\n\t\t\t\t\t\tsheet2 = sheet2 + '<c r=\"' + letras[colNumber] + rowNumber + '\">'\r\n\t\t\t\t\t\tsheet2 = sheet2 + '<v>' + value + '</v>'\r\n\t\t\t\t\t\tsheet2 = sheet2 + '</c>'\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tsheet2 = sheet2 + '<c t=\"inlineStr\" r=\"' + letras[colNumber] + rowNumber + '\">'\r\n\t\t\t\t\t\tsheet2 = sheet2 + '<is><t>' + value + '</t></is>'\r\n\t\t\t\t\t\tsheet2 = sheet2 + '</c>'\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcolNumber++;\r\n\t\t\t\t}\r\n\t\t\t\tsheet2 = sheet2 + '</row>'\r\n\t\t\t}\r\n\r\n\t\t\tsheet2 = sheet2 + '</sheetData>'\r\n\t\t\tsheet2 = sheet2 + '</worksheet>'\r\n\r\n\t\t\tsheet = xlsx({\r\n\t\t\t\tcreator: 'Genexus',\r\n\t\t\t\tlastModifiedBy: 'Genexus',\r\n\t\t\t\tpivot: true,\r\n\t\t\t\tpivotCacheDefinition: cacheDefinition,\r\n\t\t\t\tpivotTable1: xlpivotTable1,\r\n\t\t\t\tSheet2: sheet2,\r\n\t\t\t\tstyle: xlstyle,\r\n\t\t\t\tdfx: dfxStr,\r\n\t\t\t\tworksheets: [{\r\n\t\t\t\t\tdata: dataTable,\r\n\t\t\t\t\tname: 'Sheet 1'\r\n\t\t\t\t}]\r\n\t\t\t});\r\n\r\n\r\n\t\t} else {\r\n\r\n\t\t\t//xl/pivotTables/pivotTable1.xml string definition\r\n\t\t\tvar firstDataRow = self.colConditions.length + 1;\r\n\t\t\tvar firstDataCol = (((self.colConditions.length > 0)) ? self.colConditions.length : 1);\r\n\t\t\tif ((self.filterIndexes.length > 0) && (self.rowConditions.length + 1 == measures.length)) {\r\n\t\t\t\tfirstDataCol = 0;\r\n\t\t\t}\r\n\r\n\t\t\tif ((self.rowConditions.length + self.filterIndexes.length) == 0) {\r\n\t\t\t\tfirstDataRow = 1;\r\n\t\t\t\tfirstDataCol = 1;\r\n\t\t\t}\r\n\r\n\t\t\tvar varRef = \"1\"\r\n\t\t\tvar pageInfo = \"\"\r\n\t\t\tif (self.filterIndexes.length > 0) {\r\n\t\t\t\tfirstDataRow = firstDataRow + self.filterIndexes.length;\r\n\t\t\t\tpageInfo = \" rowPageCount=\\\"\" + self.filterIndexes.length + \"'\\\" colPageCount=\\\"1\\\" \"\r\n\t\t\t\tvarRef = firstDataRow + 1\r\n\t\t\t}\r\n\r\n\t\t\tvar rowLabel = \"\";\r\n\t\t\tif (self.rowConditions.length > 0) {\r\n\t\t\t\tvar firstRow = self.rowConditions[0]\r\n\t\t\t\tif (self.columns.length > firstRow) {\r\n\t\t\t\t\trowLabel = ' rowHeaderCaption=\"' + cleanDistinctValue(self.columns[firstRow].getAttribute(\"displayName\"), self, self.columns[firstRow].getAttribute(\"name\")) + '\" ';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (self.colConditions.length > 0) {\r\n\t\t\t\tvar firstCol = self.colConditions[0]\r\n\t\t\t\tif (self.columns.length > firstCol) {\r\n\t\t\t\t\trowLabel = rowLabel + ' colHeaderCaption=\"' + cleanDistinctValue(self.columns[firstCol].getAttribute(\"displayName\"), self, self.columns[firstCol].getAttribute(\"name\")) + '\" ';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar xlpivotTable1 = '<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?>\\n'\r\n\t\t\t\t+ '<pivotTableDefinition name=\"Tabla dinamica1\" cacheId=\"5\" dataCaption=\"' + \"Value\"/*gx.getMessage(\"GXPL_QViewerJSValue\")*/ + '\" createdVersion=\"3\" updatedVersion=\"3\" minRefreshableVersion=\"3\" applyNumberFormats=\"0\" applyBorderFormats=\"0\" applyFontFormats=\"0\" applyPatternFormats=\"0\" applyAlignmentFormats=\"0\" applyWidthHeightFormats=\"1\" showCalcMbrs=\"0\" useAutoFormatting=\"1\" itemPrintTitles=\"1\" indent=\"0\" outline=\"1\" outlineData=\"1\" multipleFieldFilters=\"0\" '\r\n\t\t\t\t+ rowLabel + ' ' + totalsExportPivotPdfOptions + ' xmlns=\"http://schemas.openxmlformats.org/spreadsheetml/2006/main\">\\n'\r\n\t\t\t\t+ \"<location \"\r\n\t\t\t\t+ \"ref=\\\"A\" + varRef + \"\\\"\"//ref=\\\"A1\\\"' \r\n\t\t\t\t+ \" firstHeaderRow=\\\"1\\\" firstDataRow=\\\"\" + firstDataRow + \"\\\" firstDataCol=\\\"\" + firstDataCol + \"\\\" \"\r\n\t\t\t\t+ pageInfo\r\n\t\t\t\t+ \"/>\\n\"\r\n\t\t\t\t+ \"<pivotFields>\\n\"\r\n\t\t\tvar pfi = [];\r\n\t\t\tvar pfvi = [];\r\n\t\t\tvar pfviExclude = [];\r\n\t\t\t\r\n\t\t\tvar measuresXML = \"\"\r\n\t\t\tif (self.formulaInfo.cantFormulaMeasures == 0) {\r\n\t\t\t\tfor (var iCV = 0; iCV < measures.length; iCV++) {\r\n\t\t\t\t\tvar numFmt = 163\r\n\t\t\t\t\tif (measures[iCV].getAttribute('picture') != \"\") {\r\n\t\t\t\t\t\tnumFmt = 164 + iCV\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ( (self.rowConditions.length > 0) || (self.colConditions.length == 0)){\r\n\t\t\t\t\t\txlpivotTable1 = xlpivotTable1 + \"<pivotField dataField=\\\"1\\\" showAll=\\\"0\\\"  numFmtId=\\\"\" + numFmt + \"\\\"/>\\n\";\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tmeasuresXML = measuresXML + \"<pivotField dataField=\\\"1\\\" showAll=\\\"0\\\"  numFmtId=\\\"\" + numFmt + \"\\\"/>\\n\";\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tpfi.push(cleanDistinctValue(getMeasureTitle(measures[iCV].getAttribute(\"displayName\"), iCV), self, measures[iCV].getAttribute(\"name\")));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar rowLevel = -1;\r\n\t\t\tvar lastRowLevel = 0;\r\n\t\t\tvar colLevel = -1;\r\n\t\t\tvar lastColLevel = 0;\r\n\r\n\t\t\t\r\n\t\t\tfor (var filter = 0; filter < self.filterIndexes.length; filter++) {\r\n\t\t\t\tvar iCV = self.filterIndexes[filter];\r\n\r\n\t\t\t\tposition = 'axisPage';\r\n\r\n\t\t\t\tvar formulaOptionString = 'numFmtId=\"163\"';\r\n\t\t\t\tvar formulaItemString = \"<item t=\\\"default\\\"/>\\n\"\r\n\t\t\t\t\r\n\r\n\t\t\t\txlpivotTable1 = xlpivotTable1 + \"<pivotField axis=\\\"\" + position + \"\\\" showAll=\\\"0\\\" \" + formulaOptionString + \" >\\n\"\r\n\t\t\t\t\t+ \"<items>\\n\"\r\n\t\t\t\tvar pfvl; var pfvlExclude;\r\n\t\t\t\tif (self.conditions[iCV].distinctValues != undefined) {\r\n\t\t\t\t\tpfvl = []; pfvlExclude = [];\r\n\t\t\t\t\tvar distValues = self.conditions[iCV].distinctValues\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar pos = 0;\r\n\t\t\t\t\tfor (var val = 0; val < distValues.length; val++) {\r\n\t\t\t\t\t\tif (!((distValues[val] == '') && (distValues.findIndex(\"#NuN#\") != -1))) {//and  ( distValues.findIndex(\"#NuN#\") != -1) )  )  {  //se omite un valor porque con el #NUN# el '' queda de mas \r\n\r\n\t\t\t\t\t\t\tpfvl.push(cleanDistinctValue(distValues[val], self));\r\n\t\t\t\t\t\t\tvar hiddenString = \"\";\r\n\t\t\t\t\t\t\tif (self.conditions[iCV].blackList.findIndex(distValues[val]) != -1) {\r\n\t\t\t\t\t\t\t\thiddenString = \" h=\\\"1\\\"\";\r\n\t\t\t\t\t\t\t\tpfvlExclude.push(cleanDistinctValue(distValues[val], self));\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\txlpivotTable1 = xlpivotTable1 + \"<item x=\\\"\" + pos + \"\\\" \" + hiddenString + \" />\\n\";\r\n\r\n\t\t\t\t\t\t\tpos = pos + 1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\txlpivotTable1 = xlpivotTable1 + formulaItemString /*+ \"<item t=\\\"default\\\"/>\"*/\r\n\t\t\t\t\t\t+ \"</items>\\n\"\r\n\t\t\t\t\t\t+ \"</pivotField>\\n\";\r\n\t\t\t\t}\r\n\t\t\t\tpfvi[iCV] = pfvl;\r\n\t\t\t\tpfviExclude[iCV] = pfvlExclude[iCV]\r\n\t\t\t\tpfi.push(iCV);\r\n\t\t\t}\r\n\t\t\t\r\n\r\n\t\t\tfor (var iCV = 0; iCV < self.columns.length; iCV++) {\r\n\t\t\t\tif (self.filterIndexes.indexOf(iCV) == -1) { //C-L\r\n\t\t\t\t\tvar position = 'axisRow';\r\n\t\t\t\t\tif (  ((self.rowConditions.length > 0) && (self.rowConditions.indexOf(iCV) != -1)) || (((self.rowConditions.length + self.filterIndexes.length + self.colConditions.length) == 0))) {\r\n\t\t\t\t\t\tposition = 'axisRow';\r\n\t\t\t\t\t\trowLevel++;\r\n\t\t\t\t\t\tlastRowLevel = iCV;\r\n\t\t\t\t\t} else if (self.colConditions.indexOf(iCV) != -1) {\r\n\t\t\t\t\t\tposition = 'axisCol';\r\n\t\t\t\t\t\tcolLevel++;\r\n\t\t\t\t\t\tlastColLevel = iCV;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tposition = 'axisPage';\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar formulaOptionString = 'numFmtId=\"163\"';\r\n\t\t\t\t\tvar formulaItemString = \"<item t=\\\"default\\\"/>\\n\"\r\n\t\t\t\t\t\r\n\r\n\t\t\t\t\txlpivotTable1 = xlpivotTable1 + \"<pivotField axis=\\\"\" + position + \"\\\" showAll=\\\"0\\\" \" + formulaOptionString + \" >\\n\"\r\n\t\t\t\t\t\t+ \"<items>\\n\"\r\n\t\t\t\t\tvar pfvl; var pfvlExclude;\r\n\t\t\t\t\tif (self.conditions[iCV].distinctValues != undefined) {\r\n\t\t\t\t\t\tpfvl = []; pfvlExclude = [];\r\n\t\t\t\t\t\tvar distValues = self.conditions[iCV].distinctValues\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tvar pos = 0;\r\n\t\t\t\t\t\tfor (var val = 0; val < distValues.length; val++) {\r\n\t\t\t\t\t\t\tif (!((distValues[val] == '') && (distValues.findIndex(\"#NuN#\") != -1))) {\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tpfvl.push(cleanDistinctValue(distValues[val], self));\r\n\t\t\t\t\t\t\t\tvar hiddenString = \"\";\r\n\t\t\t\t\t\t\t\tif (self.conditions[iCV].blackList.findIndex(distValues[val]) != -1) {\r\n\t\t\t\t\t\t\t\t\thiddenString = \" h=\\\"1\\\"\";\r\n\t\t\t\t\t\t\t\t\tpfvlExclude.push(cleanDistinctValue(distValues[val], self));\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\txlpivotTable1 = xlpivotTable1 + \"<item x=\\\"\" + pos + \"\\\" \" + hiddenString + \" />\";\r\n\t\t\t\t\t\t\t\tpos = pos + 1\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\txlpivotTable1 = xlpivotTable1 + formulaItemString /*+ \"<item t=\\\"default\\\"/>\"*/\r\n\t\t\t\t\t\t\t+ \"</items>\\n\"\r\n\t\t\t\t\t\t\t+ \"</pivotField>\\n\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\tpfvi[iCV] = pfvl;\r\n\t\t\t\t\tpfviExclude[iCV] = pfvlExclude[iCV]\r\n\t\t\t\t\tpfi.push(iCV);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\r\n\t\t\tif (self.formulaInfo.cantFormulaMeasures > 0) {\r\n\t\t\t\tfor (var iCV = 0; iCV < measures.length; iCV++) { //first visible measures\r\n\t\t\t\t\tvar numFmt = 163\r\n\t\t\t\t\tif (measures[iCV].getAttribute('picture') != \"\") {\r\n\t\t\t\t\t\tnumFmt = 164 + iCV\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!self.formulaInfo.measureFormula[iCV].hasFormula) {\r\n\r\n\t\t\t\t\t\txlpivotTable1 = xlpivotTable1 + \"<pivotField dataField=\\\"1\\\" showAll=\\\"0\\\"  numFmtId=\\\"\" + numFmt + \"\\\"/>\\n\";\r\n\r\n\t\t\t\t\t\tpfi.push(cleanDistinctValue(getMeasureTitle(measures[iCV].getAttribute(\"displayName\"),iCV), self, measures[iCV].getAttribute(\"name\")));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor (var iCV = 0; iCV < formMeasures.length; iCV++) {//add hidden measures for formula\r\n\t\t\t\t\txlpivotTable1 = xlpivotTable1 + '<pivotField showAll=\"0\" defaultSubtotal=\"0\"/>\\n'\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor (var iCV = 0; iCV < measures.length; iCV++) { //second formula measures\r\n\t\t\t\t\tif (self.formulaInfo.measureFormula[iCV].hasFormula) {\r\n\t\t\t\t\t\txlpivotTable1 = xlpivotTable1 + '<pivotField dataField=\"1\" dragToRow=\"0\" dragToCol=\"0\" dragToPage=\"0\" showAll=\"0\" defaultSubtotal=\"0\" numFmtId=\"' + numFmt + '\"/>\\n'\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif ( (self.rowConditions.length == 0) && (self.colConditions.length > 0)){\r\n\t\t\t\txlpivotTable1 = xlpivotTable1 + measuresXML\t\t\t\t\t\r\n\t\t\t}\r\n\r\n\t\t\txlpivotTable1 = xlpivotTable1 + \"</pivotFields>\\n\"\r\n\r\n\t\t\tif ((self.rowConditions.length + 1 != measures.length)) {\r\n\t\t\t\txlpivotTable1 = xlpivotTable1 + \"<rowFields>\\n\"\r\n\t\t\t\tfor (var iCV = 0; iCV < self.columns.length; iCV++) {\r\n\t\t\t\t\tif ((self.rowConditions.findIndex(iCV) != -1) /*|| (self.filterIndexes.find(iCV)!=-1)*/ //<-- cambio\r\n\t\t\t\t\t\t|| (((self.rowConditions.length + self.filterIndexes.length) == 0))\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\tvar pos = pfi.indexOf(iCV);\r\n\t\t\t\t\t\txlpivotTable1 = xlpivotTable1 + \"<field x=\\\"\" + pos + \"\\\"/>\\n\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\txlpivotTable1 = xlpivotTable1 + \"</rowFields>\\n\"\r\n\t\t\t}\r\n\r\n\r\n\t\t\txlpivotTable1 = xlpivotTable1 + \"<rowItems>\\n\"\r\n\t\t\tfor (var it = 0; it < self.rowStructure.items.length; it++) {\r\n\t\t\t\txlpivotTable1 = xlpivotTable1 + createExcelROWITEMS(self.rowStructure.items[it], rowLevel, pfvi, lastRowLevel, rowLevel)\r\n\t\t\t}\r\n\t\t\tif ( (self.rowConditions.length == 0) && (self.colConditions.length > 0)){\r\n\t\t\t\txlpivotTable1 = xlpivotTable1 + \"<i/>\\n\" + \"</rowItems>\\n\"\r\n\t\t\t} else {\r\n\t\t\t\txlpivotTable1 = xlpivotTable1 + \"<i t=\\\"grand\\\"><x/></i>\\n\" + \"</rowItems>\\n\"\r\n\t\t\t}\r\n\r\n\t\t\tif ((((colLevel > -1)) || ((measures.length > 1)))) {\r\n\t\t\t\txlpivotTable1 = xlpivotTable1 + \"<colFields>\\n\"\r\n\r\n\t\t\t\tfor (var iCV = 0; iCV < self.columns.length; iCV++) {\r\n\t\t\t\t\tif ((self.colConditions.findIndex(iCV) != -1) && ((((self.rowConditions.length + self.filterIndexes.length) != 0)))) {\r\n\t\t\t\t\t\tvar pos = pfi.indexOf(iCV)\r\n\t\t\t\t\t\txlpivotTable1 = xlpivotTable1 + \"<field x=\\\"\" + pos + \"\\\"/>\\n\";\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif ((self.colConditions.findIndex(iCV) != -1) && ((((self.rowConditions.length + self.filterIndexes.length) == 0)))){\r\n\t\t\t\t\t\t\tvar pos = pfi.indexOf(iCV)\r\n\t\t\t\t\t\t\tif (self.rowConditions.length == 0)\r\n\t\t\t\t\t\t\t\tpos = pfi.indexOf(iCV) - measures.length;\r\n\t\t\t\t\t\t\txlpivotTable1 = xlpivotTable1 + \"<field x=\\\"\" + pos + \"\\\"/>\\n\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\tif (measures.length > 1) {\r\n\t\t\t\t\txlpivotTable1 = xlpivotTable1 + \"<field x=\\\"-2\\\"/>\\n\";\r\n\t\t\t\t};\r\n\t\t\t\t//<field x=\"-2\"/>\r\n\t\t\t\txlpivotTable1 = xlpivotTable1 + \"</colFields>\\n\"\r\n\t\t\t}\r\n\r\n\t\t\t//col items\r\n\t\t\txlpivotTable1 = xlpivotTable1 + \"<colItems>\\n\"\r\n\t\t\tif ((self.colStructure.items)){// && ((self.rowConditions.length + self.filterIndexes.length) != 0)) {\r\n\t\t\t\tfor (var it = 0; it < self.colStructure.items.length; it++) {\r\n\t\t\t\t\txlpivotTable1 = xlpivotTable1 + createExcelCOLITEMS(self.colStructure.items[it], colLevel, pfvi, lastColLevel, colLevel)\r\n\t\t\t\t}\r\n\t\t\t\tif (self.rowConditions.length==0){\r\n\t\t\t\t\txlpivotTable1 = xlpivotTable1  + \"<i t=\\\"grand\\\"><x/></i>\"\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tfor (var iCV = 0; iCV < measures.length; iCV++) {\r\n\t\t\t\t\txlpivotTable1 = xlpivotTable1 + '<i/>\\n';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\txlpivotTable1 = xlpivotTable1 + \"</colItems>\\n\"\r\n\r\n\t\t\tif (self.filterIndexes.length > 0) {\r\n\t\t\t\txlpivotTable1 = xlpivotTable1 + \"<pageFields>\\n\"\r\n\t\t\t\tfor (var find = 0; find < self.filterIndexes.length; find++) {\r\n\t\t\t\t\txlpivotTable1 = xlpivotTable1 + \"<pageField fld=\\\"\" + (measures.length + find) + \"\\\" hier=\\\"-1\\\"/>\\n\" //C-L +find\r\n\t\t\t\t}\r\n\t\t\t\txlpivotTable1 = xlpivotTable1 + \"</pageFields>\\n\"\r\n\t\t\t}\r\n\r\n\t\t\txlpivotTable1 = xlpivotTable1 + \"<dataFields>\\n\"\r\n\t\t\tvar colFormYaAgregada = 0; var numColFormula = 0;\r\n\t\t\tfor (var iCV = 0; iCV < measures.length; iCV++) {\r\n\t\t\t\tvar numFmt = 163\r\n\t\t\t\tif (measures[iCV].getAttribute('picture') != \"\") {\r\n\t\t\t\t\tnumFmt = 164 + iCV\r\n\t\t\t\t}\r\n\t\t\t\tif (!self.formulaInfo.measureFormula[iCV].hasFormula) {\r\n\t\t\t\t\tvar addWhenFormula = 0;\r\n\t\t\t\t\tif (self.formulaInfo.cantFormulaMeasures > 0) addWhenFormula = self.columns.length - colFormYaAgregada//self.columns.length\r\n\t\t\t\t\tvar space = \"\";\r\n\t\t\t\t\tvar aggregation = (measures[iCV].getAttribute(\"aggregation\") == \"count\") ? \"sum\" : measures[iCV].getAttribute(\"aggregation\") \r\n\t\t\t\t\tif (measures[iCV].getAttribute(\"displayName\").indexOf(\"%\") > -1) {\r\n\t\t\t\t\t\tfor (var t = 0; t < iCV; t++) {\r\n\t\t\t\t\t\t\tspace = space + \" \";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\txlpivotTable1 = xlpivotTable1 + \"<dataField name=\\\"\" + measures[iCV].getAttribute(\"displayName\") + space + \"\\\" fld=\\\"\" + (iCV + addWhenFormula) + \"\\\" subtotal=\\\"\" + aggregation + \"\\\" numFmtId=\\\"\" + numFmt + \"\\\"/>\\n\"\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (self.rowConditions.length > 0) {\r\n\t\t\t\t\t\t\txlpivotTable1 = xlpivotTable1 + \"<dataField name=\\\"\" + cleanDistinctValue(getMeasureTitle(measures[iCV].getAttribute(\"displayName\"), iCV), self, measures[iCV].getAttribute(\"name\")).replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(\"settings\", \"\") + \"\\\" fld=\\\"\" + (iCV + addWhenFormula) + \"\\\" subtotal=\\\"\" + aggregation + \"\\\" numFmtId=\\\"\" + numFmt + \"\\\"/>\\n\"\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\txlpivotTable1 = xlpivotTable1 + \"<dataField name=\\\"\" + cleanDistinctValue(getMeasureTitle(measures[iCV].getAttribute(\"displayName\"), iCV), self, measures[iCV].getAttribute(\"name\")).replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(\"settings\", \"\") + \"\\\" fld=\\\"\" + (iCV + addWhenFormula + self.colConditions.length) + \"\\\" numFmtId=\\\"\" + numFmt + \"\\\"/>\\n\"\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcolFormYaAgregada++;\r\n\t\t\t\t\tvar numFmt = 163\r\n\t\t\t\t\tif (measures[iCV].getAttribute('picture') != \"\") {\r\n\t\t\t\t\t\tnumFmt = 164 + iCV\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (self.formulaInfo.measureFormula[iCV].hasFormula) {\r\n\t\t\t\t\t\tif (measures[iCV].getAttribute(\"displayName\").indexOf(\"%\") > -1) {\r\n\t\t\t\t\t\t\tfor (var t = 0; t < iCV; t++) {\r\n\t\t\t\t\t\t\t\tspace = space + \" \";\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\txlpivotTable1 = xlpivotTable1 + \"<dataField name=\\\"\" + measures[iCV].getAttribute(\"displayName\").replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(\"settings\", \"\") + space + \" \\\" fld=\\\"\" + (iCV + self.columns.length + formMeasures.length) + \"\\\" numFmtId=\\\"\" + numFmt + \"\\\" baseField=\\\"0\\\" baseItem=\\\"0\\\"/>\\n\"\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t//get cantidad de mesaures de formulas\r\n\t\t\t\t\t\t\tvar cantMeasureForm = 0;\r\n\t\t\t\t\t\t\tvar cantNoMeasures = 0\r\n\t\t\t\t\t\t\tfor (var t = 0; t < self.formulaInfo.measureFormula.length; t++) {\r\n\t\t\t\t\t\t\t\tif (self.formulaInfo.measureFormula[t].hasFormula) {\r\n\t\t\t\t\t\t\t\t\tcantMeasureForm = cantMeasureForm + self.formulaInfo.measureFormula[t].relatedMeasures.length\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tcantNoMeasures++\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tvar lastPosition = cantMeasureForm + cantNoMeasures + self.columns.length + numColFormula//self.formulaInfo.measureFormula[iCV].relatedMeasures.length\r\n\t\t\t\t\t\t\tvar fld = lastPosition //self.formulaInfo.measureFormula[iCV].relatedMeasures[lastPosition-1]\r\n\t\t\t\t\t\t\txlpivotTable1 = xlpivotTable1 + \"<dataField name=\\\"\" + cleanDistinctValue(getMeasureTitle(measures[iCV].getAttribute(\"displayName\"), iCV), self, measures[iCV].getAttribute(\"name\")) + \" \\\" fld=\\\"\" + fld + \"\\\" numFmtId=\\\"\" + numFmt + \"\\\" baseField=\\\"0\\\" baseItem=\\\"0\\\"/>\\n\"\r\n\r\n\t\t\t\t\t\t\tnumColFormula++;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\txlpivotTable1 = xlpivotTable1 + \"</dataFields>\\n\"\r\n\t\t\t\t+ \"<pivotTableStyleInfo name=\\\"PivotStyleLight16\\\" showRowHeaders=\\\"1\\\" showColHeaders=\\\"1\\\" showRowStripes=\\\"0\\\" showColStripes=\\\"0\\\" showLastColumn=\\\"1\\\"/>\\n\"\r\n\t\t\t\t+ \"</pivotTableDefinition>\\n\"\r\n\r\n\r\n\t\t\t//xl/pivotCache/cacheRecords\r\n\t\t\tfor (var rN = 0; rN < dataToShow.length; rN++) {\r\n\t\t\t\tcacheRecords = cacheRecords + \"<r>\"\r\n\r\n\t\t\t\tfor (var col = 0; col < self.columns.length; col++) {\r\n\t\t\t\t\tvar vvalue = pfvi[col].indexOf(cleanDistinctValue(dataToShow[rN][col], self))\r\n\t\t\t\t\tcacheRecords = cacheRecords + '<x v=\"' + vvalue + '\"/>'\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor (var iCV = 0; iCV < measures.length; iCV++) {\r\n\t\t\t\t\tvar pos = self.columns.length + iCV;\r\n\r\n\t\t\t\t\tvar value = self.defaultPictureValue(dataToShow[rN][pos], (iCV == measures.length - 1), iCV)\r\n\t\t\t\t\tvalue = removeComas(value, self);\r\n\t\t\t\t\tvalue = cleanDistinctValue(value, self)\r\n\t\t\t\t\tcacheRecords = cacheRecords + '<n v=\\\"' + value + '\"/>';\r\n\r\n\t\t\t\t}\r\n\t\t\t\tcacheRecords = cacheRecords + \"</r>\"\r\n\t\t\t}\r\n\t\t\tcacheRecords = cacheRecords + '</pivotCacheRecords>';\r\n\r\n\r\n\t\t\t//xl/pivotCache/cacheDefinition\r\n\t\t\tcacheDefinition = cacheDefinition + '<worksheetSource ref=\"A1:' + letras[self.columns.length + measures.length - 1 - self.formulaInfo.cantFormulaMeasures + formMeasures.length] + (dataToShow.length + 1) + '\" sheet=\"SourceData\"/>\\n'\r\n\t\t\tcacheDefinition = cacheDefinition + '</cacheSource>\\n'\r\n\t\t\tcacheDefinition = cacheDefinition + '<cacheFields count=\"' + (self.columns.length + measures.length + formMeasures.length) + '\">\\n'\r\n\t\t\tif ((self.formulaInfo.cantFormulaMeasures == 0) && ( (self.rowConditions.length > 0) || (self.colConditions.length == 0))) {\r\n\t\t\t\tfor (var iCV = 0; iCV < measures.length; iCV++) {\r\n\t\t\t\t\tcacheDefinition = cacheDefinition + '<cacheField name=\"' + cleanDistinctValue(getMeasureTitle(measures[iCV].getAttribute(\"displayName\"), iCV), self, measures[iCV].getAttribute(\"name\")).replace(/\\</g, '&lt;').replace(/\\>/g, '&gt;').replace(\"settings\", \"\") + '\" numFmtId=\"0\">\\n'\r\n\t\t\t\t\tcacheDefinition = cacheDefinition + '<sharedItems/>\\n'\r\n\t\t\t\t\tcacheDefinition = cacheDefinition + '</cacheField>\\n'\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfor (var filter = 0; filter < self.filterIndexes.length; filter++) {\r\n\t\t\t\tvar col = self.filterIndexes[filter];\r\n\r\n\t\t\t\t//containmixed\r\n\t\t\t\tvar mixed = \"\";\r\n\t\t\t\tfor (var val = 0; val < self.GeneralDistinctValues[col].length; val++) {\r\n\t\t\t\t\tif (!isNaN(self.GeneralDistinctValues[col][val])) {\r\n\t\t\t\t\t\tmixed = ' containsMixedTypes=\"1\" containsString=\"1\" containsNumber=\"1\" containsInteger=\"1\" ';\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (mixed != \"\") {\r\n\t\t\t\t\tvar onlyNumber = true;\r\n\t\t\t\t\tfor (var val = 0; val < self.GeneralDistinctValues[col].length; val++) {\r\n\t\t\t\t\t\tif (isNaN(self.GeneralDistinctValues[col][val])) {\r\n\t\t\t\t\t\t\tonlyNumber = false;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (onlyNumber) {\r\n\t\t\t\t\t\tmixed = ' containsSemiMixedTypes=\"0\" containsString=\"0\" containsNumber=\"1\" containsInteger=\"1\" ';\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcacheDefinition = cacheDefinition + '<cacheField name=\"' + cleanDistinctValue(self.columns[col].getAttribute(\"displayName\"), self, self.columns[col].getAttribute(\"name\")) + '\" numFmtId=\"0\">\\n'\r\n\t\t\t\tcacheDefinition = cacheDefinition + '<sharedItems ' + mixed + ' count=\"' + self.GeneralDistinctValues[col].length + '\">\\n'\r\n\t\t\t\tfor (var val = 0; val < self.GeneralDistinctValues[col].length; val++) {\r\n\t\t\t\t\tif (!isNaN(self.GeneralDistinctValues[col][val])) {\r\n\t\t\t\t\t\tcacheDefinition = cacheDefinition + '<n v=\"' + cleanDistinctValue(self.GeneralDistinctValues[col][val], self) + '\"/>\\n';\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tcacheDefinition = cacheDefinition + '<s v=\"' + cleanDistinctValue(self.GeneralDistinctValues[col][val], self) + '\"/>\\n';\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tcacheDefinition = cacheDefinition + '</sharedItems>\\n'\r\n\t\t\t\tcacheDefinition = cacheDefinition + '</cacheField>\\n'\r\n\t\t\t}\r\n\r\n\t\t\tfor (var col = 0; col < self.columns.length; col++) {\r\n\t\t\t\tif (self.filterIndexes.indexOf(col) == -1) { //C-L\r\n\t\t\t\t\tcacheDefinition = cacheDefinition + '<cacheField name=\"' + cleanDistinctValue(self.columns[col].getAttribute(\"displayName\"), self, self.columns[col].getAttribute(\"name\")) + '\" numFmtId=\"0\">\\n'\r\n\t\t\t\t\tcacheDefinition = cacheDefinition + '<sharedItems count=\"' + self.conditions[col].distinctValues.length + '\">\\n'\r\n\t\t\t\t\tfor (var val = 0; val < self.conditions[col].distinctValues.length; val++) {\r\n\t\t\t\t\t\tcacheDefinition = cacheDefinition + '<s v=\"' + cleanDistinctValue(self.conditions[col].distinctValues[val], self)/*.replace(/\\</g,\"&lt;\").replace(/\\>/g,\"&gt;\")*//*self.conditions[col].distinctValues[val].replace(/\\&/g, \"&amp;\").replace(/\"/g, \"&quot;\")*/ + '\"/>\\n';\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcacheDefinition = cacheDefinition + '</sharedItems>\\n'\r\n\t\t\t\t\tcacheDefinition = cacheDefinition + '</cacheField>\\n'\r\n\t\t\t\t} \r\n\t\t\t}\r\n\r\n\t\t\tif (self.formulaInfo.cantFormulaMeasures > 0) {\r\n\t\t\t\tfor (var iCV = 0; iCV < measures.length; iCV++) {\r\n\t\t\t\t\tif (!self.formulaInfo.measureFormula[iCV].hasFormula) {  //normal measures\r\n\t\t\t\t\t\tcacheDefinition = cacheDefinition + '<cacheField name=\"' + cleanDistinctValue(getMeasureTitle(measures[iCV].getAttribute(\"displayName\"),iCV), self, measures[iCV].getAttribute(\"name\")) + '\" numFmtId=\"165\">\\n'\r\n\t\t\t\t\t\tcacheDefinition = cacheDefinition + '<sharedItems/>\\n'\r\n\t\t\t\t\t\tcacheDefinition = cacheDefinition + '</cacheField>\\n'\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor (var iCV = 0; iCV < formMeasures.length; iCV++) {//add hidden measures for formula\r\n\t\t\t\t\tcacheDefinition = cacheDefinition + '<cacheField name=\"' + getMeasureIdentifier(self, formMeasures[iCV]) + '\" numFmtId=\"0\">\\n' +\r\n\t\t\t\t\t\t'</cacheField>\\n'\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor (var iCV = 0; iCV < measures.length; iCV++) { //formula measures\r\n\t\t\t\t\tif (self.formulaInfo.measureFormula[iCV].hasFormula) {\r\n\t\t\t\t\t\tcacheDefinition = cacheDefinition + '<cacheField name=\"' + cleanDistinctValue(getMeasureTitle(measures[iCV].getAttribute(\"displayName\"),iCV), self, measures[iCV].getAttribute(\"name\")) + '\" numFmtId=\"165\" formula=\"' + self.formulaInfo.measureFormula[iCV].textFormula + '\" databaseField=\"0\"/>\\n'\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif ((self.formulaInfo.cantFormulaMeasures == 0) && ( (self.rowConditions.length == 0) && (self.colConditions.length > 0))) {\r\n\t\t\t\tfor (var iCV = 0; iCV < measures.length; iCV++) {\r\n\t\t\t\t\tcacheDefinition = cacheDefinition + '<cacheField name=\"' + cleanDistinctValue(getMeasureTitle(measures[iCV].getAttribute(\"displayName\"), iCV), self, measures[iCV].getAttribute(\"name\")).replace(/\\</g, '&lt;').replace(/\\>/g, '&gt;').replace(\"settings\", \"\") + '\" numFmtId=\"164\">\\n'\r\n\t\t\t\t\tcacheDefinition = cacheDefinition + '<sharedItems/>\\n'\r\n\t\t\t\t\tcacheDefinition = cacheDefinition + '</cacheField>\\n'\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tcacheDefinition = cacheDefinition + '</cacheFields>\\n'\r\n\t\t\tcacheDefinition = cacheDefinition + '</pivotCacheDefinition>\\n'\r\n\r\n\r\n\t\t\t//unicamente la seccion de las numberFormat\r\n\t\t\t//conversion a hacer letras P prefijas se cambian por \\P la primera por \\\\P las demas\r\n\t\t\t//Z se cambia por #\r\n\t\t\t//, y . quedan por , y .\r\n\t\t\t//9 se cambia por 0\r\n\r\n\t\t\tvar xlstyle = '<numFmts>'\r\n\t\t\tvar addNumberFormat = false\r\n\t\t\tfor (var mPos = 0; mPos < measures.length; mPos++) {\r\n\t\t\t\tif (measures[mPos].getAttribute('picture') != \"\") {\r\n\t\t\t\t\tvar pivotFormat = measures[mPos].getAttribute('picture')\r\n\t\t\t\t\tvar numFmt = 164 + mPos\r\n\r\n\t\t\t\t\tvar excelFormat = \"\"\r\n\t\t\t\t\tfor (var charFP = 0; charFP < pivotFormat.length; charFP++) {\r\n\t\t\t\t\t\tif (pivotFormat[charFP] == 'Z') {\r\n\t\t\t\t\t\t\texcelFormat = excelFormat + \"#\"\r\n\t\t\t\t\t\t} else if (pivotFormat[charFP] == '9') {\r\n\t\t\t\t\t\t\texcelFormat = excelFormat + \"0\"\r\n\t\t\t\t\t\t} else if ((pivotFormat[charFP] == '.') || (pivotFormat[charFP] == ',')) {\r\n\t\t\t\t\t\t\texcelFormat = excelFormat + pivotFormat[charFP]\r\n\t\t\t\t\t\t} else /*if ((charFP == 0))*/ {\r\n\t\t\t\t\t\t\texcelFormat = excelFormat + \"\\\\\" + pivotFormat[charFP]\r\n\t\t\t\t\t\t} \r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t//var excelFormat = \"###,###.00\"\r\n\t\t\t\t\t//xlstyle = xlstyle + '<numFmt formatCode=\"' + excelFormat + '\" numFmtId=\"' + numFmt + '\"/>'\r\n\t\t\t\t\txlstyle = xlstyle + '<numFmt formatCode=\"' + excelFormat + '\" numFmtId=\"' + numFmt + '\"/>'\r\n\t\t\t\t\taddNumberFormat = true\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (addNumberFormat) {\r\n\t\t\t\txlstyle = xlstyle + '</numFmts>'\r\n\t\t\t} else {\r\n\t\t\t\txlstyle = ''\r\n\t\t\t}\r\n\r\n\t\t\tsheet = xlsx({\r\n\t\t\t\tcreator: 'Genexus',\r\n\t\t\t\tlastModifiedBy: 'Genexus',\r\n\t\t\t\tpivot: true,\r\n\t\t\t\tpivotCacheDefinition: cacheDefinition,\r\n\t\t\t\tpivotTable1: xlpivotTable1,\r\n\t\t\t\tSheet2: \"\",//sheet2,\r\n\t\t\t\tstyle: xlstyle,\r\n\t\t\t\tworksheets: [{\r\n\t\t\t\t\tdata: dataTable,\r\n\t\t\t\t\tname: 'Sheet 1'\r\n\t\t\t\t}]\r\n\t\t\t});\r\n\r\n\r\n\t\t}\r\n\r\n\t\tif (OAT.isSafari() || (self.isSD)) { //for safari\r\n\t\t\twindow.location = sheet.href();\r\n\t\t} else {\r\n\r\n\t\t\tvar byteCharacters = atob(sheet.base64);\r\n\t\t\tfunction charCodeFromCharacter(c) {\r\n\t\t\t\treturn c.charCodeAt(0);\r\n\t\t\t}\r\n\r\n\t\t\tvar byteNumbers = Array.prototype.map.call(byteCharacters, charCodeFromCharacter);\r\n\t\t\tvar uint8Data = new Uint8Array(byteNumbers);\r\n\r\n\t\t\tvar blob = new Blob([uint8Data], { type: \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\" });\r\n\t\t\tsaveAs(blob, fileName + \".xlsx\");\r\n\t\t} \r\n\r\n\r\n\r\n\t}\r\n\r\n\r\n\r\n//FILE OAT.Dialof\r\n\r\n\r\n\r\n\tOAT.Dialog = function (i, d, c) {\r\n\t\tvar e = this, a = {\r\n\t\t\twidth: 0,\r\n\t\t\theight: 0,\r\n\t\t\tmodal: 0,\r\n\t\t\tonshow: function () {\r\n\t\t\t},\r\n\t\t\tonhide: function () {\r\n\t\t\t},\r\n\t\t\tzIndex: 1E3,\r\n\t\t\tbuttons: 1,\r\n\t\t\tresize: 1,\r\n\t\t\tclose: 1,\r\n\t\t\tautoEnter: 1,\r\n\t\t\timagePath: OAT.Preferences.imagePath\r\n\t\t};\r\n\t\tif (c)\r\n\t\t\tfor (var f in c)\r\n\t\t\t\ta[f] = c[f];\r\n\t\tvar b = new OAT.Window({\r\n\t\t\tclose: a.close,\r\n\t\t\tmax: 0,\r\n\t\t\tmin: 0,\r\n\t\t\twidth: a.width,\r\n\t\t\theight: a.height,\r\n\t\t\tx: 0,\r\n\t\t\ty: 0,\r\n\t\t\ttitle: i,\r\n\t\t\tresize: a.resize,\r\n\t\t\timagePath: a.imagePath\r\n\t\t});\r\n\t\tOAT.Dom.hide(b.div);\r\n\t\ttry {\r\n\t\t\tOAT.$(d).style.margin = \"10px\"\r\n\t\t} catch (k) {\r\n\t\t}\r\n\t\ti = OAT.Dom.create(\"table\", {\r\n\t\t\tmarginTop: \"1em\",\r\n\t\t\twidth: \"90%\",\r\n\t\t\ttextAlign: \"center\"\r\n\t\t});\r\n\t\tc = OAT.Dom.create(\"tbody\");\r\n\t\tf = OAT.Dom.create(\"tr\");\r\n\t\tvar j = OAT.Dom.create(\"td\", {\r\n\t\t\tborder: \"none\"\r\n\t\t}), g = OAT.Dom.create(\"input\");\r\n\t\tg.setAttribute(\"type\", \"button\");\r\n\t\tg.value = \" OK \";\r\n\t\tj.appendChild(g);\r\n\t\tvar h = OAT.Dom.create(\"input\", {\r\n\t\t\tmarginLeft: \"2em\"\r\n\t\t});\r\n\t\th.setAttribute(\"type\", \"button\");\r\n\t\th.value = \"Cancel\";\r\n\t\tj.appendChild(h);\r\n\t\tf.appendChild(j);\r\n\t\tc.appendChild(f);\r\n\t\ti.appendChild(c);\r\n\t\ta.buttons && OAT.$(d).appendChild(i);\r\n\t\tdocument.body.appendChild(b.div);\r\n\t\tb.content.appendChild(OAT.$(d));\r\n\t\tb.div.style.zIndex = a.zIndex;\r\n\t\ta.modal ? (this.show = function () {\r\n\t\t\tOAT.Dimmer.show(b.div, {});\r\n\t\t\tb.accomodate();\r\n\t\t\tOAT.Dom.center(b.div, 1, 1);\r\n\t\t\ta.onshow()\r\n\t\t}, this.hide = function () {\r\n\t\t\tOAT.Dimmer.hide();\r\n\t\t\ta.onhide()\r\n\t\t}) : (this.show = function () {\r\n\t\t\tOAT.Dom.show(b.div);\r\n\t\t\tb.accomodate();\r\n\t\t\tOAT.Dom.center(b.div, 1, 1);\r\n\t\t\ta.onshow()\r\n\t\t}, this.hide = function () {\r\n\t\t\tOAT.Dom.hide(b.div);\r\n\t\t\ta.onhide()\r\n\t\t});\r\n\t\tb.onclose = this.hide;\r\n\t\tthis.accomodate = b.accomodate;\r\n\t\tthis.ok = function () {\r\n\t\t};\r\n\t\tthis.cancel = function () {\r\n\t\t};\r\n\t\tthis.okBtn = g;\r\n\t\tthis.cancelBtn = h;\r\n\t\tOAT.Dom.attach(g, \"click\", function () {\r\n\t\t\te.ok()\r\n\t\t});\r\n\t\tOAT.Dom.attach(h, \"click\", function () {\r\n\t\t\te.cancel()\r\n\t\t});\r\n\t\td = function (a) {\r\n\t\t\tif (e.okBtn.getAttribute(\"disabled\") != \"disabled\") {\r\n\t\t\ta.keyCode == 13 && e.ok();\r\n\t\t\t\ta.keyCode == 27 && e.cancel()\r\n\t\t\t}\r\n\t\t};\r\n\t\ta.autoEnter && OAT.Dom.attach(b.div, \"keypress\", d)\r\n\t};\r\n\ttry {\r\n\t\tOAT.Loader.featureLoaded(\"dialog\");\r\n\t} catch (ERROR) {\r\n\r\n\t}\r\n\r\n\tOAT.Drag = {\r\n\t\tTYPE_X: 1, TYPE_Y: 2, TYPE_XY: 3, elm: !1, mouse_x: 0, mouse_y: 0,\r\n\t\tmove: function (b) {\r\n\t\t\tfunction d(a, b) { return Math.abs(a - b) <= o }\r\n\t\t\tif (OAT.Drag.elm) {\r\n\t\t\t\tOAT.Dom.removeSelection();\r\n\t\t\t\tvar e = OAT.Dom.getViewport(), a = OAT.Dom.position(OAT.Drag.elm);\r\n\t\t\t\tOAT.Dom.eventPos(b); OAT.Dom.getWH(OAT.Drag.elm);\r\n\t\t\t\tif (!(b.clientX > e[0] || 0 > b.clientX || b.clientY > e[1] || 0 > b.clientY)) {\r\n\t\t\t\t\tfor (var e = b.clientX - OAT.Drag.mouse_x, c = b.clientY - OAT.Drag.mouse_y, q = !0, j = OAT.Drag.elm._Drag_movers, h = 0; h < j.length; h++) { var a = j[h][0], i = j[h][1], a = OAT.Dom.getLT(a); i.restrictionFunction(a[0] + e, a[1] + c) && (q = !1) }\r\n\t\t\t\t\tfor (var k = !0, o = 10, h = 0; h < j.length; h++) {\r\n\t\t\t\t\t\tfor (var a = j[h][0], i = j[h][1], l = OAT.Dom.getWH(a), m = OAT.Dom.position(a), r = m[0] + e, m = m[1] + c, n = 0; n < i.magnetsH.length; n++) {\r\n\t\t\t\t\t\t\tvar g = OAT.$(i.magnetsH[n]), f = OAT.Dom.position(g), g = OAT.Dom.getWH(g);\r\n\t\t\t\t\t\t\tif (d(r, f[0])) { a.style.left = f[0] + \"px\"; k = !1; break }\r\n\t\t\t\t\t\t\tif (d(r + l[0], f[0])) { a.style.left = f[0] - l[0] + \"px\"; k = !1; break }\r\n\t\t\t\t\t\t\tif (d(r, f[0] + g[0])) { a.style.left = f[0] + g[0] + \"px\"; k = !1; break }\r\n\t\t\t\t\t\t\tif (d(r + l[0], f[0] + g[0])) { a.style.left = f[0] + g[0] - l[0] + \"px\"; k = !1; break }\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tfor (n = 0; n < i.magnetsV.length; n++) {\r\n\t\t\t\t\t\t\tg = OAT.$(i.magnetsV[n]); f = OAT.Dom.position(g);\r\n\t\t\t\t\t\t\tg = OAT.Dom.getWH(g);\r\n\t\t\t\t\t\t\tif (d(m, f[1])) { a.style.top = f[1] + \"px\"; k = !1; break }\r\n\t\t\t\t\t\t\tif (d(m + l[1], f[1])) { a.style.top = f[1] - l[1] + \"px\"; k = !1; break } if (d(m, f[1] + g[1])) { a.style.top = f[1] + g[1] + \"px\"; k = !1; break }\r\n\t\t\t\t\t\t\tif (d(m + l[1], f[1] + g[1])) { a.style.top = f[1] + g[1] - l[1] + \"px\"; k = !1; break }\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} if (q && k) {\r\n\t\t\t\t\t\tfor (h = 0; h < j.length; h++)if (a = j[h][0], i = j[h][1], i.moveFunction) i.moveFunction(e, c); else switch (i.type) {\r\n\t\t\t\t\t\t\tcase OAT.Drag.TYPE_X: OAT.Dom.moveBy(a, e, 0); break; case OAT.Drag.TYPE_Y: OAT.Dom.moveBy(a, 0, c); break; case OAT.Drag.TYPE_XY: OAT.Dom.moveBy(a,\r\n\t\t\t\t\t\t\t\te, c)\r\n\t\t\t\t\t\t}OAT.Drag.mouse_x = b.clientX; OAT.Drag.mouse_y = b.clientY\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}, up: function () { if (OAT.Drag.elm) { for (var b = OAT.Drag.elm._Drag_movers, d = 0; d < b.length; d++)b[d][1].endFunction(b[d][0]); OAT.Drag.elm = !1 } }, create: function (b, d, e) {\r\n\t\t\tvar a = { type: OAT.Drag.TYPE_XY, restrictionFunction: function () { return !1 }, endFunction: function () { }, moveFunction: !1, magnetsH: [], magnetsV: [], cursor: !0 }; if (e) for (p in e) a[p] = e[p]; var c = OAT.$(b), b = OAT.$(d), d = function (a) { OAT.Drag.initiate(a, c) }; c._Drag_movers || (OAT.Dom.attach(c, \"mousedown\", d), c._Drag_movers =\r\n\t\t\t\t[], c._Drag_cursor = c.style.cursor); a.cursor && (c.style.cursor = \"move\"); c._Drag_movers.push([b, a])\r\n\t\t}, initiate: function (b, d) { OAT.Drag.elm = d; OAT.Drag.mouse_x = b.clientX; OAT.Drag.mouse_y = b.clientY }, remove: function (b, d) { var e = OAT.$(b); OAT.$(d); if (e._Drag_movers) { for (var a = -1, c = 0; c < e._Drag_movers.length; c++)e._Drag_movers[c][0] == d && (a = c); -1 != a && e._Drag_movers.splice(a, 1) } }, removeAll: function (b) { b = OAT.$(b); b._Drag_movers && (b._Drag_movers = [], b.style.cursor = b._Drag_cursor) }, createDefault: function (b, d) {\r\n\t\t\tif (OAT.Preferences.allowDefaultDrag) {\r\n\t\t\t\tvar e =\r\n\t\t\t\t\tOAT.$(b), a = OAT.Dom.create(\"div\", { position: \"absolute\", width: \"21px\", height: \"21px\"}), c = OAT.Dom.getLT(e); a.style.left = c[0] - 21 + \"px\"; a.style.top = c[1] - 21 + \"px\"; if (d) {\r\n\t\t\t\t\t\te.parentNode.appendChild(a); c = function (a, b) { var c = OAT.Dom.getWH(e), d = OAT.Dom.getWH(e.parentNode), o = a + c[0], c = b + c[1]; return 20 > a || 20 > b || o > d[0] || c > d[1] }; OAT.Drag.create(a, a); OAT.Drag.create(a, e, { restrictionFunction: c }); OAT.Dom.hide(a); var q = function () { a._Drag_pending && OAT.Dom.hide(a) }; OAT.Dom.attach(e,\r\n\t\t\t\t\t\t\t\"mouseover\", function () { OAT.Dom.show(a); a._Drag_pending = 0 }); OAT.Dom.attach(e, \"mouseout\", function () { a._Drag_pending = 1; setTimeout(q, 3E3) })\r\n\t\t\t\t\t} else c = function (a, b) { var c = OAT.Dom.getWH(e), d = OAT.Dom.getWH(e.parentNode), o = a + c[0], c = b + c[1]; return 0 > a || 0 > b || o > d[0] || c > d[1] }, OAT.Drag.create(e, e, { restrictionFunction: c })\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tif(typeof document != \"undefined\"){\r\n\t OAT.Dom.attach(document, \"mousemove\", OAT.Drag.move); \r\n\t OAT.Dom.attach(document, \"mouseup\", OAT.Drag.up); \r\n\t}\r\n\ttry {\r\n\t\tOAT.Loader.featureLoaded(\"drag\");\r\n\t} catch (ERROR) {\r\n\r\n\t}\r\n\r\n\r\n\tOAT.GhostDragData = {\r\n\t\tlock: !1,\r\n\t\tup: function (a) {\r\n\t\t\tif (OAT.GhostDragData.lock) {\r\n\t\t\t\tvar b = OAT.GhostDragData.lock, c = b.object;\r\n\t\t\t\tif (c.pending)\r\n\t\t\t\t\tc.pending = 0, OAT.GhostDragData.lock = !1;\r\n\t\t\t\telse {\r\n\t\t\t\t\tOAT.GhostDragData.lock = !1;\r\n\t\t\t\t\tfor (var d = OAT.Dom.eventPos(a), a = d[0], d = d[1], e = 0, f = 0; f < c.targets.length; f++) {\r\n\t\t\t\t\t\tvar g = c.targets[f], h = g[1] ? g[1](a, d) : OAT.GhostDragData.pos(g[0], a, d);\r\n\t\t\t\t\t\t!e && h && (e = 1, c.callback(g[0], a, d))\r\n\t\t\t\t\t}\r\n\t\t\t\t\te ? (OAT.Dom.unlink(b), OAT.MSG.send(c, OAT.MSG.GD_END, b)) : (OAT.MSG.send(c, OAT.MSG.GD_ABORT, b), c.onFail(), c = OAT.Dom.position(c.originalElement),\r\n\t\t\t\t\t\ta = c[0], d = c[1], c = new OAT.AnimationPosition(b, { speed: 10, delay: 10, left: a, top: d }), OAT.MSG.attach(c.animation, OAT.MSG.ANIMATION_STOP, function () { OAT.Dom.unlink(b) }), c.start())\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tmove: function (a) {\r\n\t\t\tif (OAT.GhostDragData.lock) {/*OAT.Dom.prevent(a);*/var b = OAT.GhostDragData.lock, c = b.object; c.pending && (document.body.appendChild(b), b.style.zIndex = 2E3,\r\n\t\t\t\tc.process && c.process(b),\r\n\t\t\t\tc.pending = 0, OAT.MSG.send(c, OAT.MSG.GD_START, b)); OAT.Dom.removeSelection(); var d = a.clientX - b.mouse_x, c = a.clientY - b.mouse_y, d = parseInt(OAT.Dom.style(b,\r\n\t\t\t\t\t\"left\")) + d, c = parseInt(OAT.Dom.style(b, \"top\")) + c; b.style.left = d + \"px\"; b.style.top = c + \"px\"; b.mouse_x = a.clientX; b.mouse_y = a.clientY\r\n\t\t\t}\r\n\t\t}, pos: function (a, b, c) { if (!a || \"none\" == a.style.display.toLowerCase()) return 0; var d = OAT.Dom.position(a), e = d[0] - 2, d = d[1] - 2, f = parseInt(a.offsetWidth) + 2, a = parseInt(a.offsetHeight) + 2; return b >= e && b <= e + f && c >= d && c <= d + a }\r\n\t};\r\n\tOAT.GhostDrag = function () {\r\n\t\tvar a = this;\r\n\t\tthis.onFail = function () { };\r\n\t\tthis.sources = [];\r\n\t\tthis.processes = [];\r\n\t\tthis.callbacks = [];\r\n\t\tthis.targets = [];\r\n\t\tthis.pending = 0;\r\n\t\tthis.addSource = function (b, c, d) {\r\n\t\t\tvar e = OAT.$(b);\r\n\t\t\ta.sources.push(e);\r\n\t\t\ta.processes.push(c);\r\n\t\t\ta.callbacks.push(d);\r\n\t\t\tOAT.Dom.attach(e, \"mousedown\",\r\n\t\t\t\tfunction (b) {\r\n\t\t\t\t\tOAT.Dom.prevent(b);\r\n\t\t\t\t\tvar c = a.sources.indexOf(e);\r\n\t\t\t\t\t-1 != c && a.startDrag(a.sources[c], a.processes[c], a.callbacks[c], b.clientX, b.clientY);\r\n\r\n\t\t\t\t}\r\n\t\t\t)\r\n\t\t};\r\n\t\tthis.delSource = function (b) { b = $(b); b = a.sources.indexOf(b); -1 != b && (a.sources.splice(b, 1), a.processes.splice(b, 1), a.callbacks.splice(b, 1)) };\r\n\t\tthis.clearSources = function () { a.sources = []; a.processes = []; a.callbacks = [] };\r\n\t\tthis.addTarget = function (b, c, d) { b = [OAT.$(b), c, d]; a.targets.length && a.targets[a.targets.length - 1][2] ? a.targets.splice(a.targets.length - 1, 0, b) : a.targets.push(b) };\r\n\t\tthis.delTarget = function (b) { for (var b = OAT.$(b), c = -1, d = 0; d < a.targets.length; d++)a.targets[d][0] == b && (c = d); -1 != c && a.targets.splice(c, 1) };\r\n\t\tthis.clearTargets = function () { a.targets = [] };\r\n\t\tthis.startDrag = function (b, c, d, e, f) { OAT.GhostDragData.lock || (a.pending = 1, a.originalElement = b, a.callback = d, d = OAT.Dom.create(\"div\", { position: \"absolute\" }), a.process = c, c = OAT.Dom.position(b), d.style.left = c[0] + \"px\", d.style.top = c[1] + \"px\", OAT.Style.opacity(d, 0.5), d.appendChild(b.cloneNode(!0)), d.mouse_x = e, d.mouse_y = f, d.object = a, OAT.GhostDragData.lock = d) }\r\n\t};\r\n\tif(typeof document != \"undefined\"){\r\n\tOAT.Dom.attach(document, \"mousemove\", OAT.GhostDragData.move);\r\n\tOAT.Dom.attach(document, \"mouseup\", OAT.GhostDragData.up);\r\n\t};\r\n\ttry {\r\n\t\tOAT.Loader.featureLoaded(\"ghostdrag\");\r\n\t} catch (ERROR) {\r\n\r\n\t}\r\n\r\n\tOAT.Instant = function (d, c) {\r\n\t\tvar a = this;\r\n\t\tthis.options = {\r\n\t\t\tshowCallback: !1,\r\n\t\t\thideCallback: !1\r\n\t\t};\r\n\t\tfor (var e in c)\r\n\t\t\ta.options[e] = c[e];\r\n\t\tthis.state = 1;\r\n\t\tthis.elm = OAT.$(d);\r\n\t\tthis.handles = [];\r\n\t\tthis.hide = function () {\r\n\t\t\ta.state = 0;\r\n\t\t\tOAT.Dom.hide(a.elm)\r\n\t\t};\r\n\t\tthis.show = function () {\r\n\t\t\ta.options.showCallback && a.options.showCallback();\r\n\t\t\tOAT.Dom.show(a.elm);\r\n\t\t\ta.state = 1\r\n\t\t};\r\n\t\tthis.check = function (b) {\r\n\t\t\ta.state && (b = OAT.Event.source(b), b == a.elm || OAT.Dom.isChild(b, a.elm) || (a.options.hideCallback && a.options.hideCallback(), a.hide()))\r\n\t\t};\r\n\t\tthis.createHandle = function (b) {\r\n\t\t\tvar c = OAT.$(b);\r\n\t\t\ta.handles.push(c);\r\n\t\t\tOAT.Event.attach(c, \"mousedown\", function (b) {\r\n\t\t\t-1 != a.handles.indexOf(c) && !a.state && (OAT.Event.cancel(b), a.show())\r\n\t\t\t})\r\n\t\t};\r\n\t\tthis.removeHandle = function (b) {\r\n\t\t\tb = OAT.$(b);\r\n\t\t\tb = a.handles.indexOf(b);\r\n\t\t\t-1 != b && a.handles.splice(b, 1)\r\n\t\t};\r\n\t\ta.elm._Instant_show = a.show;\r\n\t\ta.elm._Instant_hide = a.hide;\r\n\t\ta.hide();\r\n\t\tOAT.Dom.attach(document, \"mousedown\", a.check)\r\n\t};\r\n\tOAT.Instant.assign = function (d, c) {\r\n\t\tnew OAT.Instant(d, {\r\n\t\t\thideCallback: c\r\n\t\t})\r\n\t};\r\n\ttry {\r\n\t\tOAT.Loader.featureLoaded(\"instant\");\r\n\t} catch (ERROR) {\r\n\r\n\t}\r\n\r\n\r\n\r\n\r\n\r\n//FILE oat_grid -----------------------------------------------------------------------------------------------------------------------------------------------\r\n\r\n\r\n\r\n\r\n\tOAT.GridData = {\r\n\t\tindex: 0,        /* column in action */\r\n\t\tLIMIT: 15,       /* minimum width */\r\n\t\tALIGN_CENTER: 1,\r\n\t\tALIGN_START: 2,\r\n\t\tALIGN_END: 3,\r\n\t\tALIGN_RIGHT: 4,\r\n\t\tSORT_NONE: 1,\r\n\t\tSORT_ASC: 2,\r\n\t\tSORT_DESC: 3,\r\n\t\tTYPE_STRING: 1,\r\n\t\tTYPE_NUMERIC: 2,\r\n\t\tTYPE_AUTO: 3\r\n\t} /* GridData */\r\n\r\n\tOAT.Grid = function (element, controlName, query, columnsDataType, colms, QueryViewerCollection,\r\n\t\tpageSize, disableColumnSort, UcId, IdForQueryViewerCollection, rememberLayout, serverPaging, HideDataFilds, OrderFildsHidden, TableDataFilds, relativePath, selection, GridTitle, translations) {\r\n\t\tvar self = this;\r\n\t\tself.controlName = controlName;\r\n\t\tself.columnsDataType = columnsDataType;\r\n\t\tself.query = query;\r\n\t\tself.rowsPerPage = \"\";\r\n\t\tself.columns = colms;\r\n\t\tself.QueryViewerCollection = QueryViewerCollection;\r\n\t\tself.InitPageSize = pageSize;\r\n\t\tself.disableColumnSort = disableColumnSort\r\n\t\tself.UcId = UcId;\r\n\t\tself.IdForQueryViewerCollection = IdForQueryViewerCollection;\r\n\t\tself.rememberLayout = rememberLayout;\r\n\t\tself.serverPaging = serverPaging;\r\n\t\tself.HideDataFilds = HideDataFilds;\r\n\t\tself.OrderFildsHidden = OrderFildsHidden;\r\n\t\tself.TableDataFilds = TableDataFilds;\r\n\t\tself.relativePath = relativePath;\r\n\t\tself.selection = selection;\r\n\t\tself.translations = translations\r\n\t\tself.isSD = OAT.isSD() \r\n\r\n\t\tself.conditions = new Array(columnsDataType.length);\r\n\t\tfor (iC = 0; iC < columnsDataType.length; iC++) {\r\n\t\t\tself.conditions[iC] = {\r\n\t\t\t\tblackList: [],\r\n\t\t\t\tsort: 1\r\n\t\t\t};\r\n\t\t};\r\n\r\n\t\tthis.init = function () {\r\n\r\n\t\t\tvar topDiv;\r\n\r\n\t\t\tif ((jQuery(\"#\" + self.controlName + \"_grid_top_div\").length == 0)\r\n\t\t\t\t|| (self.QueryViewerCollection[self.IdForQueryViewerCollection]._ControlRenderedTo == undefined)) {\r\n\t\t\t\tvar divContainer = OAT.$(element);\r\n\t\t\t\tself.ContainerName = divContainer.getAttribute(\"id\")\r\n\t\t\t\tOAT.Dom.clear(divContainer);\r\n\r\n\t\t\t\tvar divIeContainer = document.createElement(\"div\");\r\n\t\t\t\tdivIeContainer.setAttribute(\"class\", \"divIeContainer\");\r\n\t\t\t\tdivIeContainer.setAttribute(\"style\", \"position: relative;opacity: 0\");\r\n\t\t\t\tdivContainer.appendChild(divIeContainer);\r\n\t\t\t\tself.div = divIeContainer;\r\n\r\n\r\n\t\t\t\ttopDiv = OAT.Dom.create(\"div\");\r\n\r\n\t\t\t\tif (self.isSD) { //android\r\n\t\t\t\t\ttopDiv.setAttribute(\"class\", \"oatgrid_top_div oatgrid_top_div_small\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttopDiv.setAttribute(\"class\", \"oatgrid_top_div\");\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (GridTitle) {\r\n\t\t\t\t\tOAT.addTextNode(topDiv, \" \" + GridTitle)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tOAT.addTextNode(topDiv, \"\")\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\ttopDiv.setAttribute(\"id\", self.controlName + \"_grid_top_div\");\r\n\t\t\t\tvar hide = OAT.Dom.create(\"a\");\r\n\t\t\t\thide.href = \"#\";\r\n\r\n\t\t\t\tOAT.addTextNode(hide, document.createTextNode(\"GXPL_QViewerJSVisibleColumns\"))\r\n\r\n\t\t\t\tself.div.appendChild(topDiv);\r\n\r\n\t\t\t\tOAT.Dom.makePosition(self.div);\r\n\t\t\t\tself.html = OAT.Dom.create(\"table\");\r\n\t\t\t\tOAT.Dom.addClass(self.html, \"oatgrid\");\r\n\t\t\t\tOAT.Dom.setIdPropertyValue(self.html, self.controlName);\r\n\t\t\t\tself.header = new OAT.GridHeader(self);\r\n\r\n\t\t\t\tself.rows = [];\r\n\t\t\t\tself.rowBlock = OAT.Dom.create(\"tbody\");\r\n\t\t\t\tOAT.Dom.append([self.div, self.html], [self.html, self.header.html, self.rowBlock]);\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tvar divContainer = OAT.$(element);\r\n\t\t\t\tself.ContainerName = divContainer.getAttribute(\"id\")\r\n\r\n\t\t\t\tself.div = jQuery(\"#\" + self.ContainerName).find(\".divIeContainer\")[0]\r\n\r\n\t\t\t\ttopDiv = jQuery(\"#\" + self.ContainerName).find(\".oatgrid_top_div\")[0]\r\n\t\t\t\tOAT.Dom.clear(topDiv);\r\n\t\t\t\tif (GridTitle) {\r\n\t\t\t\t\tOAT.addTextNode(topDiv, \" \" + GridTitle)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tOAT.addTextNode(topDiv, \"\")\r\n\t\t\t\t}\r\n\r\n\t\t\t\tself.html = jQuery(\"#\" + self.ContainerName).find(\"table\")[0]\r\n\r\n\t\t\t\tvar previousThead = jQuery(\"#\" + self.ContainerName).find(\"thead\")[0]\r\n\t\t\t\tOAT.Dom.clear(previousThead);\r\n\t\t\t\tself.header = new OAT.GridHeader(self, previousThead);\r\n\r\n\t\t\t\tself.rows = [];\r\n\t\t\t\tself.rowBlock = jQuery(\"#\" + self.ContainerName).find(\"tbody\")[0]\r\n\t\t\t\tOAT.Dom.clear(self.rowBlock);\r\n\t\t\t}\r\n\r\n\r\n\r\n\t\t\t//draw export image and pop up of export options\r\n\t\t\tvar exportImg = OAT.Dom.create(\"div\");\r\n\t\t\texportImg.href = \"#\";\r\n\t\t\tif (self.isSD) { //android\r\n\t\t\t\texportImg.setAttribute(\"class\", \"exportOptionsAnchor exportOptionsAnchor_small\");\r\n\t\t\t} else {\r\n\t\t\t\texportImg.setAttribute(\"class\", \"exportOptionsAnchor\");\r\n\t\t\t}\r\n\t\t\tself.exportPage = OAT.Dom.create(\"div\", { padding: \"0px\" });\r\n\t\t\t\r\n\t\t\tOAT.addImageNode(exportImg, \"menu\", \"\")\r\n\r\n\t\t\tvar checkToClose = function (b) {\r\n\t\t\t\tsource = OAT.Event.source(b);\r\n\t\t\t\tvar clean = false;\r\n\t\t\t\tvar closing = false;\r\n\t\t\t\tvar isInside = false\r\n\t\t\t\tfor (var i = 0; i < jQuery(\".oat_winrect_container\").length; i++) {\r\n\t\t\t\t\tvar obj = jQuery(\".oat_winrect_container\")[i];\r\n\t\t\t\t\tif (!(source == obj) && !OAT.Dom.isChild(source, obj)) {\r\n\t\t\t\t\t\tclean = true;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tclean = false; isInside = true; break;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tfor (var i = 0; i < jQuery(\".oat_winrect_container\").length; i++) {\r\n\t\t\t\t\tif (jQuery(\".oat_winrect_container\")[i].style.display != \"none\") {\r\n\t\t\t\t\t\tclosing = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (((source.getAttribute(\"class\") == \"oat_winrect_close_b\") || (!OAT.Dom.isChild(source, obj))) &&\r\n\t\t\t\t\t(closing)) {\r\n\t\t\t\t\tself.oat_component.resetAllScrollValue(self.UcId);\r\n\t\t\t\t}\r\n\t\t\t\tif (clean) {\r\n\t\t\t\t\tjQuery(\".oat_winrect_container\").css({ display: \"none\" });\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tOAT.Dom.attach(document, \"mousedown\", checkToClose)\r\n\r\n\t\t\tOAT.Anchor.assign(exportImg, {\r\n\t\t\t\ttitle: \" \",\r\n\t\t\t\tcontent: self.exportPage,\r\n\t\t\t\tresult_control: false,\r\n\t\t\t\tactivation: \"click\",\r\n\t\t\t\ttype: OAT.WinData.TYPE_RECT,\r\n\t\t\t\twidth: \"auto\",\r\n\t\t\t\tcontainerQuery: qv.util.GetContainerControlClass(self.QueryViewerCollection[IdForQueryViewerCollection]) + \" ExportPopup \"\r\n\t\t\t});\r\n\r\n\t\t\tvar generatePair = function (index) {\r\n\t\t\t\t\r\n\t\t\t\tif (OAT_JS.grid.gridData[self.UcId].rowsMetadata.columns[index].getAttribute(\"visible\") != \"Never\"){\t\r\n\t\t\t\t\r\n\t\t\t\t\tvar state = (self.header.cells[index].html.style.display != \"none\");\r\n\t\t\t\t\tvar pair = OAT.Dom.create(\"div\");\r\n\t\t\t\t\tvar check_class = (state) ? \"check_item_img\" : \"uncheck_item_img\";\r\n\t\t\t\t\tif (self.isSD) {//android\r\n\t\t\t\t\t\tcheck_class = (state) ? \"check_item_img_small\" : \"uncheck_item_img_small\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\tOAT.addImageNode(pair, state ? \"check_box\" : \"check_box_outline_blank\", \"\");\r\n\t\t\t\t\tpair.setAttribute(\"class\", check_class);\r\n\t\t\t\t\tvar span = OAT.Dom.create(\"span\");\r\n\r\n\t\t\t\t\tOAT.addTextNode(span, \" \" + self.header.cells[index].value.textContent.replace(\"settings\",\"\"))\r\n\t\t\t\t\tpair.appendChild(span);\r\n\t\t\t\t\tOAT.Event.attach(pair, \"click\", function () { // this hide or show the columns\r\n\t\t\t\t\t\tvar checkedClass = \"check_item_img\"\r\n\t\t\t\t\t\tvar unCheckedClass = \"uncheck_item_img\"\r\n\t\t\t\t\t\tif (self.isSD) {//android\r\n\t\t\t\t\t\t\tcheckedClass = \"check_item_img_small\"\r\n\t\t\t\t\t\t\tunCheckedClass = \"uncheck_item_img_small\"\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvar newClass = (this.getAttribute(\"class\") === checkedClass) ? unCheckedClass : checkedClass;\r\n\t\t\t\t\t\tthis.setAttribute(\"class\", newClass);\r\n\t\t\t\t\t\r\n\t\t\t\t\t\tjQuery(this).find(\"i\")[0].textContent = (this.getAttribute(\"class\") === checkedClass) ? \"check_box\" : \"check_box_outline_blank\";\r\n\r\n\t\t\t\t\t\tvar newdisp = (self.header.cells[index].html.style.display == \"none\" ? \"\" : \"none\");\r\n\t\t\t\t\t\tself.header.cells[index].html.style.display = newdisp;\r\n\t\t\t\t\t\tvar numCol = index;//self.columnsDataType.length - 1 - index;\r\n\r\n\t\t\t\t\t\tfor (var i = 0; i < self.rows.length; i++) {\r\n\t\t\t\t\t\t\tself.rows[i].cells[numCol].html.style.display = newdisp;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t\tOAT_JS.grid.setColumnVisibleValue(self.UcId, numCol, (newdisp == \"\"))\r\n\t\t\t\t\r\n\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn pair;\r\n\t\t\t\t\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar clickRef = function (event) {\r\n\t\t\t\tvar coords = OAT.Event.position(event);\r\n\t\t\t\tself.exportPage.style.left = coords[0] + \"px\";\r\n\t\t\t\tself.exportPage.style.top = coords[1] + \"px\";\r\n\t\t\t\tself.exportPage.id = \"exportOptionsContainer\";\r\n\t\t\t\tif (OAT.isIE()) {\r\n\t\t\t\t\tself.exportPage.id = \"exportOptionsContainerGrid\";\r\n\t\t\t\t\tself.exportPage.className = \"export_option_container\"\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\tvar screenWidth = window.innerWidth;\r\n\t\t\t\tvar initialPopUpWidth = Math.max(jQuery(\".ExportPopup\")[0].clientWidth, 300)\r\n\t\t\t\tvar offsetLeft = jQuery(event.currentTarget).offset().left\r\n\r\n\t\t\t\tvar iconExport = event.currentTarget\r\n\r\n\t\t\t\tjQuery(\".ExportPopup\").css({ left: -2500 + \"px\", top: 0 + \"px\" })\r\n\r\n\t\t\t\t//title\r\n\t\t\t\tjQuery(\".oat_winrect_title\").find(\".winrect_title_label\").remove()\r\n\r\n\t\t\t\tvar spantitle = OAT.Dom.create(\"label\");\r\n\t\t\t\tif (self.isSD) {\r\n\t\t\t\t\tjQuery(\".oat_winrect_container\").addClass(\"oat_winrect_container_small\")\r\n\t\t\t\t\tspantitle.setAttribute(\"class\", \"winrect_title_label winrect_title_label_small\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tspantitle.setAttribute(\"class\", \"winrect_title_label\");\r\n\t\t\t\t}\r\n\t\t\t\tOAT.addTextNode(spantitle,  self.translations.GXPL_QViewerPopupTitle); //gx.getMessage(\"GXPL_QViewerPopupTitle\"));\r\n\t\t\t\tjQuery(\".oat_winrect_title\").append(spantitle)\r\n\r\n\t\t\t\tOAT.Dom.clear(self.exportPage);\r\n\t\t\t\t//botton to allow show all filters in pop up\r\n\t\t\t\tvar someExport = false;\r\n\t\t\t\tvar div_upper = document.createElement(\"div\");\r\n\t\t\t\tdiv_upper.setAttribute(\"class\", \"upper_container\");\r\n\r\n\t\t\t\tjQuery('#divtoxml').remove();\r\n\t\t\t\tjQuery('#divtoxls').remove();\r\n\t\t\t\tjQuery('#divtoxlsx').remove();\r\n\t\t\t\tjQuery('#divtoexport').remove();\r\n\t\t\t\tjQuery('#divtohtml').remove();\r\n\t\t\t\tsomeExport = self.appendExportToXmlOption(div_upper, someExport);\r\n\t\t\t\tsomeExport = self.appendExportToHtmlOption(div_upper, someExport);\r\n\t\t\t\tsomeExport = self.appendExportToPdfOption(div_upper, someExport);\r\n\t\t\t\tsomeExport = self.appendExportToExcelOption(div_upper, someExport);\r\n\t\t\t\tsomeExport = self.appendExportToExcel2010Option(div_upper, someExport);\r\n\r\n\t\t\t\tself.exportPage.appendChild(div_upper);\r\n\r\n\r\n\t\t\t\tif (someExport) {\r\n\t\t\t\t\tvar hr = OAT.Dom.create(\"hr\", {});\r\n\t\t\t\t\tself.exportPage.appendChild(hr);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar div_down = document.createElement(\"div\");\r\n\t\t\t\tdiv_down.setAttribute(\"class\", \"down_container\");\r\n\t\t\t\tself.exportPage.appendChild(div_down);\r\n\r\n\t\t\t\tvar label = document.createElement(\"span\");\r\n\t\t\t\tlabel.textContent = self.translations.GXPL_QViewerJSVisibleColumns;//gx.getMessage(\"GXPL_QViewerJSVisibleColumns\");\r\n\t\t\t\tvar div_label = document.createElement(\"div\");\r\n\t\t\t\tdiv_label.setAttribute(\"class\", \"div_label_win\");\r\n\t\t\t\tdiv_label.appendChild(label);\r\n\t\t\t\tdiv_down.appendChild(div_label);\r\n\r\n\r\n\t\t\t\tfor (var c = 0; c < self.columns.length; c++) {\r\n\t\t\t\t\tfor (var i = 0; i < self.header.cells.length; i++) {\r\n\t\t\t\t\t\tif (self.header.cells[i].dataField == self.columns[c].getAttribute(\"dataField\")){ \r\n\t\t\t\t\t\t\tvar pair = generatePair(i);\r\n\t\t\t\t\t\t\tif (pair)\r\n\t\t\t\t\t\t\t\tdiv_down.appendChild(pair);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\r\n\r\n\t\t\t\tsetTimeout(function () {\r\n\r\n\t\t\t\t\tvar screenWidth = window.innerWidth;\r\n\t\t\t\t\tvar initialPopUpWidth = jQuery(\".ExportPopup\")[0].clientWidth\r\n\r\n\r\n\t\t\t\t\tif (initialPopUpWidth == 0) {\r\n\t\t\t\t\t\tvar last = jQuery(\".ExportPopup\").length;\r\n\t\t\t\t\t\tinitialPopUpWidth = jQuery(\".ExportPopup\")[last - 1].clientWidth\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (self.isSD) {//android\r\n\t\t\t\t\t\tif (initialPopUpWidth < 235) {\r\n\t\t\t\t\t\t\tinitialPopUpWidth = 235\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvar padding = (screenWidth - initialPopUpWidth) / 2 + jQuery(window).scrollLeft()\r\n\r\n\t\t\t\t\t\tjQuery(\".ExportPopup\").css({ left: padding + \"px\", top: jQuery(iconExport).offset().top + \"px\", width: initialPopUpWidth + \"px\" })\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tvar offsetLeft = jQuery(iconExport).offset().left\r\n\r\n\t\t\t\t\t\tif (offsetLeft + initialPopUpWidth + 15 < screenWidth) {\r\n\t\t\t\t\t\t\tjQuery(\".ExportPopup\").css({ left: jQuery(iconExport).offset().left + \"px\", top: jQuery(iconExport).offset().top + \"px\" })\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tjQuery(\".ExportPopup\").css({ left: (offsetLeft - initialPopUpWidth + 16) + \"px\", top: jQuery(iconExport).offset().top + \"px\" })\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}, 50)\r\n\t\t\t}\r\n\r\n\t\t\tOAT.Event.attach(exportImg, \"click\", clickRef);\r\n\t\t\ttopDiv.appendChild(exportImg);\r\n\r\n\t\t}\r\n\t\t\r\n\t\tthis.setPageDataForTable = function(resXML) {\r\n\t\t\tswitch(self.oat_component.lastCallToQueryViewer) {\r\n\t\t\t\tcase \"getDataForTable\":\r\n\t\t\t\t\tif (self.oat_component.lastCallData.PageNumber == 0) { self.oat_component.lastCallData.PageNumber = 1, self.oat_component.lastCallData.RecalculateCantPages = false; }\r\n\t\t\t\t\tOAT_JS.grid.redraw(self.oat_component.lastCallData.self, self.oat_component.lastCallData.UcId, resXML, self.oat_component.lastCallData.RecalculateCantPages, self.oat_component.lastCallData.DataFieldOrder != \"\", self.oat_component.lastCallData.PageNumber, self.oat_component.lastCallData.fromExternalRefresh)\r\n\t\t\t\tbreak;\r\n\t\t\t\tcase \"getAllDataRowsForExport\":\r\n\t\t\t\t\tvar dataString = resXML;\r\n\t\t\t\t\tvar stringRecord = dataString.split(\"<Record>\");\r\n\t\t\t\t\tvar data = [];\r\n\t\t\t\t\tvar UcId = self.oat_component.lastCallData.UcId\r\n\t\t\t\t\tvar fileName = self.oat_component.lastCallData.fileName\r\n\t\t\t\t\tvar _selfgrid = self.oat_component.lastCallData._selfgrid\r\n\t\t\t\t\tvar format = self.oat_component.lastCallData.format\r\n\t\t\t\t\tfor (var i = 1; i < stringRecord.length; i++) {\r\n\t\t\t\t\t\tvar recordData = [];\r\n\t\t\t\t\t\tfor (var j = 0; j < OAT_JS.grid.gridData[UcId].grid.columns.length; j++) {\r\n\t\t\t\t\t\t\trecordData[j] = \"#NuN#\"\r\n\t\t\t\t\t\t\tvar dt = stringRecord[i].split(\"<\" + OAT_JS.grid.gridData[UcId].grid.columns[j].getAttribute(\"dataField\") + \">\")\r\n\t\t\t\t\t\t\tif (dt.length > 1) {\r\n\t\t\t\t\t\t\t\tvar at = dt[1].split(\"</\" + OAT_JS.grid.gridData[UcId].grid.columns[j].getAttribute(\"dataField\") + \">\")\r\n\t\t\t\t\t\t\t\trecordData[j] = at[0]\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tdata.push(recordData)\r\n\r\n\t\t\t\t\t\tif (format != \"xlsx\") {\r\n\t\t\t\t\t\t\tif ((i > OAT_JS.grid.gridData[UcId].rowsPerPage) && !(OAT_JS.grid.gridData[UcId].rowsPerPage == \"\")) {\r\n\t\t\t\t\t\t\t\tOAT.CreateGridRow(recordData, OAT_JS.grid.gridData[UcId], true)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tswitch (format) {\r\n\t\t\t\t\t\tcase \"pdf\": OAT.ExportToPdf(_selfgrid, fileName); break;\r\n\t\t\t\t\t\tcase \"xml\": OAT.ExportToXML(_selfgrid, fileName); break;\r\n\t\t\t\t\t\tcase \"html\": OAT_JS.grid.gridData[UcId].grid.ExportToHtml(_selfgrid, fileName); break;\r\n\t\t\t\t\t\tcase \"xls\": OAT.ExportToExcel(_selfgrid, fileName); break;\r\n\t\t\t\t\t\tcase \"xlsx\": OAT.ExportToExcel2010(_selfgrid, fileName, true, data, UcId); break;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tOAT_JS.grid.gridData[UcId].grid.removeAllCollapseRows()\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tthis.setAttributeForTable = function(resJSON){\r\n\t\t\tvar res = JSON.parse(resJSON);\r\n\t\t\tswitch(self.oat_component.lastCallToQueryViewer) {\r\n\t\t\t\tcase \"getValuesForColumn\":\r\n\t\t\t\t\tOAT_JS.grid.changeValues(self.oat_component.lastCallData.UcId, self.oat_component.lastCallData.dataField, self.oat_component.lastCallData.columnNumber, res, self.oat_component.lastCallData.filterValue);\r\n\t\t\t\tbreak;\r\n\t\t\t\tcase \"readScrollValue\":\r\n\t\t\t\t\tOAT_JS.grid.appendNewValueData(self.oat_component.lastCallData.UcId, res);\r\n\t\t\t\t\r\n\t\t\t\tbreak;\r\n\t\t\t\tcase \"readScrollValueFilter\":\r\n\t\t\t\t\tOAT_JS.grid.appendNewFilteredValueData(self.oat_component.lastCallData.UcId, res, self.oat_component.lastCallData.posColumnNumber, self.oat_component.lastCallData.filterText)\r\n\t\t\t\tcase \"initValueRead\":\r\n\t\t\t\t\tOAT_JS.grid.initValueLoad(res, self.oat_component.lastCallData.UcId, self.oat_component.lastCallData.dataField)\r\n\t\t\t\tbreak;\r\n\t\t\t\tcase \"filterChange\":\r\n\t\t\t\t\tOAT_JS.grid.appendNewValueData(self.oat_component.lastCallData.UcId, res, true)\r\n\t\t\t\t\tOAT_JS.grid.setFilterChangedWhenServerPagination(self.oat_component.lastCallData.UcId, self.oat_component.lastCallData.oatDimension)\r\n\t\t\t\tbreak;\r\n\t\t\t}\t\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\tthis.setDataSynForTable = function(dataSync){\r\n\t\t\t_self = self.oat_component.lastCallData.self\r\n\t\t\t\r\n\t\t\tOAT.ClickHandle(_self, self.oat_component.lastCallData.elemvalue, dataSync)\r\n\t\t}\r\n\t\t\r\n\t\tthis.appendExportToXmlOption = function (content, someExport) {\r\n\t\t\tvar exportXMLButton;\r\n\t\t\tvar fileName = this.query;\r\n\t\t\tif (fileName == \"\") {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tfileName = self.controlName.substr(4).split(\"_\")[0]\r\n\t\t\t\t} catch (error) { }\r\n\t\t\t}\r\n\t\t\tif (self.QueryViewerCollection[self.IdForQueryViewerCollection].ExportToXML) {\r\n\t\t\t\t\r\n\t\t\t\t\texportXMLButton = OAT.Dom.create(\"div\");\r\n\t\t\t\t\tvar exportButtonSub = self.createExportButton(exportXMLButton)\r\n\r\n\t\t\t\t\tvar pvpl = OAT.Dom.create(\"label\");\r\n\t\t\t\t\tOAT.addTextNode(pvpl, self.translations.GXPL_QViewerContextMenuExportXml)//gx.getMessage(\"GXPL_QViewerContextMenuExportXml\"))\r\n\t\t\t\t\tpvpl.htmlFor = \"pivot_checkbox_restoreview\";\r\n\t\t\t\t\texportXMLButton.appendChild(pvpl);\r\n\r\n\t\t\t\t\tOAT.Dom.attach(exportButtonSub, \"click\", function () {\r\n\t\t\t\t\t\tOAT_JS.grid.getAllDataRowsForExport(self.UcId, { grid: self }, fileName, \"xml\")\r\n\t\t\t\t\t}\r\n\t\t\t\t\t);\r\n\t\t\t\t\r\n\r\n\t\t\t\tcontent.appendChild(exportXMLButton);\r\n\t\t\t\tif (!someExport) someExport = true;\r\n\t\t\t}\r\n\t\t\treturn someExport;\r\n\t\t}\r\n\r\n\t\tthis.appendExportToHtmlOption = function (content, someExport) {\r\n\t\t\tvar exportHTMLButton;\r\n\t\t\tvar fileName = this.query;\r\n\t\t\tif (fileName == \"\") {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tfileName = self.controlName.substr(4).split(\"_\")[0]\r\n\t\t\t\t} catch (error) { }\r\n\t\t\t}\r\n\t\t\tif (self.QueryViewerCollection[self.IdForQueryViewerCollection].ExportToHTML) {\r\n\t\t\t\t\r\n\t\t\t\t\texportHTMLButton = OAT.Dom.create(\"div\");\r\n\t\t\t\t\tvar exportButtonSub = self.createExportButton(exportHTMLButton)\r\n\r\n\t\t\t\t\tvar pvpl = OAT.Dom.create(\"label\");\r\n\t\t\t\t\tOAT.addTextNode(pvpl, self.translations.GXPL_QViewerContextMenuExportHtml)//gx.getMessage(\"GXPL_QViewerContextMenuExportHtml\"))\r\n\t\t\t\t\tpvpl.htmlFor = \"pivot_checkbox_restoreview\";\r\n\t\t\t\t\texportHTMLButton.appendChild(pvpl);\r\n\r\n\t\t\t\t\tOAT.Dom.attach(exportButtonSub, \"click\", function () { \r\n\t\t\t\t\t\tOAT_JS.grid.getAllDataRowsForExport(self.UcId, self, fileName, \"html\")\r\n\t\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tcontent.appendChild(exportHTMLButton);\r\n\t\t\t\tif (!someExport) someExport = true;\r\n\t\t\t}\r\n\t\t\treturn someExport;\r\n\t\t}\r\n\r\n\t\tthis.ExportToHtml = function (self, fileName) {\r\n\t\t\tvar dir = OAT.resourceURL(self.relativePath + 'QueryViewer/oatPivot/css/grid.css')\r\n\t\t\tvar str = \"<!DOCTYPE><HTML><BODY>\";\r\n\r\n\t\t\tstr = str + \"<HEAD>\";\r\n\t\t\tstr = str + '<META content=\"text/html; charset=utf-8\" http-equiv=\"Content-Type\"/>'\r\n\r\n\t\t\tstr = str + '<link id=\"gxtheme_css_reference\" rel=\"stylesheet\" type=\"text/css\" href=\"' + dir + '\" />'\r\n\t\t\t\r\n\t\t\t//add other css file\r\n\t\t\tfor(var i = 0; i < jQuery('link').length; i++)\r\n\t\t\t{\r\n\t\t\t\tif (jQuery('link')[i].href.indexOf(\"QueryViewer.css\") < 0) {\r\n\t\t\t\t\tstr = str + '<link id=\"gxtheme_css_reference\" rel=\"stylesheet\" type=\"text/css\" href=\"' + jQuery('link')[i].href + '\" />'\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tstr = str + \"</STYLE>\"\r\n\t\t\tstr = str + \"</HEAD>\"\r\n\t\t\t\r\n\t\t\tstr = str + '<div class=\"gx_usercontrol qv-table QueryViewer-table\">'\r\n\t\t\t\r\n\t\t\tstr = str + '<table class=\"oatgrid\"  style=\"width: 100%;\">'\r\n\t\t\t\r\n\t\t\tstr = str + OAT.removeIconFont(jQuery(\"#\" + self.controlName)[0].innerHTML.replace(/visibility: collapse;/g, \"\").replace(/visibility:collapse;/g, \"\"))\r\n\t\t\t\r\n\t\t\tstr = str + '</table>'\r\n\t\t\t\r\n\t\t\tstr = str + '</div>'\r\n\t\t\tstr = str + \"</BODY></HTML>\";\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tisSD = OAT.isSD(); \r\n\t\t\t\r\n\r\n\t\t\tif (OAT.isSafari() || (isSD)) { \r\n\t\t\t\twindow.open('data:text/html,' + str);\r\n\t\t\t} else {\r\n\t\t\t\tvar blob = new Blob([str], { type: \"text/html\" });\r\n\t\t\t\tsaveAs(blob, fileName + \".html\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.appendExportToPdfOption = function (content, someExport) {\r\n\t\t\tvar fileName = this.query;\r\n\t\t\tif (fileName == \"\") {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tfileName = self.controlName.substr(4).split(\"_\")[0]\r\n\t\t\t\t} catch (error) { }\r\n\t\t\t}\r\n\t\t\tvar exportPDFButton;\r\n\t\t\tif (self.QueryViewerCollection[self.IdForQueryViewerCollection].ExportToPDF) {\r\n\t\t\t\t\r\n\t\t\t\t\texportPDFButton = OAT.Dom.create(\"div\");\r\n\t\t\t\t\tvar exportButtonSub = self.createExportButton(exportPDFButton)\r\n\r\n\t\t\t\t\tvar pvpl = OAT.Dom.create(\"label\");\r\n\t\t\t\t\tOAT.addTextNode(pvpl, self.translations.GXPL_QViewerContextMenuExportPdf); //gx.getMessage(\"GXPL_QViewerContextMenuExportPdf\"))\r\n\t\t\t\t\tpvpl.htmlFor = \"pivot_checkbox_restoreview\";\r\n\t\t\t\t\texportPDFButton.appendChild(pvpl);\r\n\r\n\t\t\t\t\t\r\n\t\t\t\t\tOAT.Dom.attach(exportButtonSub, \"click\", function () {\r\n\t\t\t\t\t\tOAT_JS.grid.getAllDataRowsForExport(self.UcId, { grid: self }, fileName, \"pdf\")\r\n\t\t\t\t\t});\r\n\t\t\t\t\t\r\n\t\t\t\t\r\n\r\n\t\t\t\tcontent.appendChild(exportPDFButton);\r\n\t\t\t\tif (!someExport) someExport = true;\r\n\t\t\t}\r\n\r\n\t\t\treturn someExport;\r\n\t\t}\r\n\r\n\t\tthis.appendExportToExcelOption = function (content, someExport) {\r\n\t\t\tvar fileName = this.query;\r\n\t\t\tif (fileName == \"\") {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tfileName = self.controlName.substr(4).split(\"_\")[0]\r\n\t\t\t\t} catch (error) { }\r\n\t\t\t}\r\n\t\t\tvar exportXLSButton\r\n\t\t\tif (self.QueryViewerCollection[self.IdForQueryViewerCollection].ExportToXLS) {\r\n\t\t\t\t\r\n\t\t\t\t\texportXLSButton = OAT.Dom.create(\"div\");\r\n\r\n\t\t\t\t\tvar exportButtonSub = self.createExportButton(exportXLSButton)\r\n\r\n\t\t\t\t\tvar pvpl = OAT.Dom.create(\"label\");\r\n\t\t\t\t\tOAT.addTextNode(pvpl, self.translations.GXPL_QViewerContextMenuExportXls2003); //gx.getMessage(\"GXPL_QViewerContextMenuExportXls2003\"))\r\n\t\t\t\t\tpvpl.htmlFor = \"pivot_checkbox_restoreview\";\r\n\t\t\t\t\texportXLSButton.appendChild(pvpl);\r\n\r\n\t\t\t\t\tOAT.Dom.attach(exportButtonSub, \"click\", function () {\r\n\t\t\t\t\t\tOAT_JS.grid.getAllDataRowsForExport(self.UcId, { grid: self }, fileName, \"xls\")\r\n\t\t\t\t\t});\r\n\t\t\t\t\r\n\r\n\t\t\t\tcontent.appendChild(exportXLSButton);\r\n\t\t\t\tif (!someExport) someExport = true;\r\n\t\t\t}\r\n\r\n\t\t\treturn someExport;\r\n\t\t}\r\n\r\n\t\tthis.appendExportToExcel2010Option = function (content, someExport) {\r\n\t\t\tvar fileName = this.query;\r\n\t\t\tif (fileName == \"\") {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tfileName = self.controlName.substr(4).split(\"_\")[0]\r\n\t\t\t\t} catch (error) { }\r\n\t\t\t}\r\n\t\t\tvar exportXLSButton\r\n\t\t\tif (self.QueryViewerCollection[self.IdForQueryViewerCollection].ExportToXLSX) {\r\n\t\t\t\t\r\n\t\t\t\t\texportXLSButton = OAT.Dom.create(\"div\");\r\n\r\n\t\t\t\t\tvar exportButtonSub = self.createExportButton(exportXLSButton)\r\n\r\n\r\n\t\t\t\t\tvar pvpl = OAT.Dom.create(\"label\");\r\n\t\t\t\t\tOAT.addTextNode(pvpl, self.translations.GXPL_QViewerContextMenuExportXlsx);// gx.getMessage(\"GXPL_QViewerContextMenuExportXlsx\"))\r\n\t\t\t\t\tpvpl.htmlFor = \"pivot_checkbox_restoreview\";\r\n\t\t\t\t\texportXLSButton.appendChild(pvpl);\r\n\r\n\t\t\t\t\tOAT.Dom.attach(exportButtonSub, \"click\", function () {\r\n\t\t\t\t\t\tOAT_JS.grid.getAllDataRowsForExport(self.UcId, { grid: self }, fileName, \"xlsx\")\r\n\t\t\t\t\t});\r\n\t\t\t\t\r\n\r\n\t\t\t\tcontent.appendChild(exportXLSButton);\r\n\t\t\t\tif (!someExport) someExport = true;\r\n\t\t\t}\r\n\r\n\t\t\treturn someExport;\r\n\t\t}\r\n\r\n\t\tthis.createExportButton = function (divContainer) {\r\n\r\n\t\t\tvar exportButtonSub = OAT.Dom.create(\"div\", {});\r\n\t\t\texportButtonSub.setAttribute('id', 'divtoxml');\r\n\t\t\tdivContainer.appendChild(exportButtonSub);\r\n\r\n\t\t\tif (self.isSD) {//android\t\t\t\t\r\n\t\t\t\texportButtonSub.setAttribute(\"class\", \"download_file_img_small\");\r\n\t\t\t} else {\r\n\t\t\t\texportButtonSub.setAttribute(\"class\", \"download_file_img\");\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tOAT.addImageNode(exportButtonSub, \"download\", \"\");\r\n\r\n\t\t\tdivContainer.setAttribute(\"class\", \"export_item_div\");\r\n\t\t\tif (self.isSD) { //android\t\t\r\n\t\t\t\tdivContainer.setAttribute(\"class\", \"export_item_div export_item_div_small\");\r\n\t\t\t}\r\n\t\t\treturn divContainer;\r\n\t\t}\r\n\r\n\r\n\t\tthis.clearData = function () {\r\n\t\t\tself.rows = [];\r\n\t\t\tOAT.Dom.clear(self.rowBlock);\r\n\t\t}\r\n\r\n\t\tthis.appendHeader = function (paramsObj, dataField, index) { /* append one header */\r\n\t\t\tvar i = (!index ? self.header.cells.length : index);\r\n\t\t\tvar cell = self.header.addCell(paramsObj, \"character\", i, dataField);\r\n\t\t\tfor (var i = 0; i < self.header.cells.length; i++) {\r\n\t\t\t\tself.header.cells[i].number = i;\r\n\t\t\t}\r\n\t\t\treturn cell;\r\n\t\t}\r\n\r\n\t\tthis.ieFix = function () {\r\n\t\t\tfor (var i = 0; i < self.header.cells.length; i++) {\r\n\t\t\t\tvar html = self.header.cells[i].html;\r\n\t\t\t\tOAT.Dom.addClass(html, \"hover\");\r\n\t\t\t\tOAT.Dom.removeClass(html, \"hover\");\r\n\t\t\t\tvar value = self.header.cells[i].value;\r\n\t\t\t\tvar dims = OAT.Dom.getWH(value);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.createHeader = function (paramsList, fieldList) { /* add new header */\r\n\t\t\tself.header.clear();\r\n\r\n\t\t\tfor (var i = 0; i < paramsList.length; i++) {\r\n\t\t\t\tself.appendHeader(paramsList[i], fieldList[i]);\r\n\t\t\t}\r\n\t\t\tif (OAT.isIE()) { self.ieFix(); }\r\n\t\t} /* Grid::createHeader */\r\n\r\n\t\tthis.getHeaders = function (){\r\n\t\t\tvar actualHeaders = []\r\n\t\t\t\r\n\t\t\tfor (var i = 0; i < self.header.cells.length; i++) {\r\n\t\t\t\tactualHeaders.push(self.header.cells[i].value.textContent);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn actualHeaders\r\n\t\t}\r\n\r\n\t\tthis.createRow = function (paramsList, columnsDataType, defaultPicture, customPicture, conditionalFormatsColumns, formatValues, customFormat, column, index, columnVisibility) { /* add new row */\r\n\t\t\tvar number = (!index ? self.rows.length : index);\r\n\t\t\tvar row = new OAT.GridRow(self, number);\r\n\t\t\tif (index == number || number == self.rows.length) {\r\n\t\t\t\tself.rowBlock.appendChild(row.html);\r\n\t\t\t} else {\r\n\t\t\t\tself.rowBlock.insertBefore(row.html, self.rowBlock.childNodes[number]);\r\n\t\t\t}\r\n\t\t\tOAT.underRecursionStyle = [];\r\n\t\t\tfor (var i = 0; i < paramsList.length; i++) {\r\n\t\t\t\trow.addCell(paramsList[i], columnsDataType[i], defaultPicture, customPicture[i], conditionalFormatsColumns, formatValues, customFormat, i, index, columnVisibility[i]);\r\n\t\t\t}\r\n\t\t\tself.rows.splice(number, 0, row);\r\n\t\t\treturn row.html;\r\n\t\t} /* Grid::createRow() */\r\n\r\n\t\tthis.loadDifferentValues = function (columnNumber, values) {\r\n\t\t\tself.conditions[columnNumber].differentValue = [];\r\n\t\t\tfor (var i = 0; i < values.length; i++) {\r\n\t\t\t\tself.conditions[columnNumber].differentValue.push(values[i]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.removeAllRows = function () {\r\n\t\t\tvar totalRows = self.rows.length\r\n\t\t\tfor (var l = 0; l < totalRows; l++) {\r\n\t\t\t\tself.removeRow(0)\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.removeAllHiddenRows = function () {\r\n\t\t\tvar totalRows = self.rows.length\r\n\t\t\tvar rowNumber = self.rows.length - 1;\r\n\t\t\twhile ((rowNumber > 0) && (self.rows[rowNumber].html.style.display == \"none\")) {\r\n\t\t\t\tself.removeRow(rowNumber);\r\n\t\t\t\trowNumber--;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.removeAllCollapseRows = function () {\r\n\t\t\tvar totalRows = self.rows.length\r\n\t\t\tvar rowNumber = self.rows.length - 1;\r\n\t\t\twhile ((rowNumber > 0) && (self.rows[rowNumber].html.style.visibility == \"collapse\")) {\r\n\t\t\t\tself.removeRow(rowNumber);\r\n\t\t\t\trowNumber--;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.removeRow = function (rowNumber) {\r\n\t\t\tjQuery(self.rows[rowNumber].html).remove()\r\n\r\n\t\t\tself.rows.splice(rowNumber, 1);\r\n\t\t}\r\n\r\n\t\tthis.removeColumn = function (index) {\r\n\t\t\tself.header.removeColumn(index);\r\n\t\t\tfor (var i = 0; i < self.rows.length; i++) { self.rows[i].removeColumn(index); }\r\n\t\t}\r\n\r\n\t\tthis.hideColumnHeader = function (index) {\r\n\t\t\tvar headerPos = /*self.columnsDataType.length - 1 -*/ index;\r\n\t\t\tself.header.cells[headerPos].html.style.display = \"none\";\r\n\t\t}\r\n\r\n\t\tthis.showColumnHeader = function (index) {\r\n\t\t\t//var headerPos = self.columnsDataType.length - 1 - index;\r\n\t\t\t//self.header.cells[headerPos].html.style.display = \"\";\r\n\t\t\tself.header.cells[index].html.style.display = \"\";\r\n\t\t}\r\n\r\n\t\tthis.sort = function (index, type, numCol) {\r\n\t\t\tfor (var i = 0; i < self.header.cells.length; i++) {\r\n\t\t\t\t/* aca cambio la info de estado sobre las oredenaciones de las columnas */\r\n\t\t\t\tself.conditions[i].sort = 1;\r\n\t\t\t\tself.header.cells[i].changeSort(OAT.GridData.SORT_NONE);\r\n\t\t\t}\r\n\t\t\tself.conditions[index].sort = type;\r\n\t\t\tself.header.cells[numCol].changeSort(type);\r\n\t\t\t/* sort elements here */\r\n\t\t\tvar coltype = self.header.cells[numCol].options.type;\r\n\t\t\tvar c1, c2;\r\n\t\t\tswitch (type) {\r\n\t\t\t\tcase OAT.GridData.SORT_ASC: c1 = 1; c2 = -1; break;\r\n\t\t\t\tcase OAT.GridData.SORT_DESC: c1 = -1; c2 = 1; break;\r\n\t\t\t}\r\n\r\n\t\t\tvar useCustomOrder = (OAT_JS.grid.gridData[self.UcId].customOrderValues)\r\n\t\t\t\t&& (OAT_JS.grid.gridData[self.UcId].customOrderValues[index] != false)\r\n\t\t\t\t&& (OAT_JS.grid.gridData[self.UcId].customOrderValues[index].length > 0)\r\n\r\n\r\n\t\t\tvar numCmp = function (row_a, row_b) {\r\n\t\t\t\tvar a = row_a.cells[index].options.value;\r\n\t\t\t\tvar b = row_b.cells[index].options.value;\r\n\t\t\t\tif (a == b) { return 0; }\r\n\t\t\t\treturn (parseFloat(a) > parseFloat(b) ? c1 : c2);\r\n\t\t\t}\r\n\t\t\tvar strCmp = function (row_a, row_b) {\r\n\t\t\t\tvar a = row_a.cells[index].options.value;\r\n\t\t\t\tvar b = row_b.cells[index].options.value;\r\n\t\t\t\tif (a == b) { return 0; }\r\n\t\t\t\treturn (a > b ? c1 : c2);\r\n\t\t\t}\r\n\t\t\tvar cusCmp = function (row_a, row_b) {\r\n\t\t\t\tvar a = row_a.cells[index].options.value;\r\n\t\t\t\tvar b = row_b.cells[index].options.value;\r\n\t\t\t\tvar indexA = OAT_JS.grid.gridData[self.UcId].customOrderValues[index].indexOf(a)\r\n\t\t\t\tvar indexB = OAT_JS.grid.gridData[self.UcId].customOrderValues[index].indexOf(b)\r\n\t\t\t\tif (indexA == indexB) { return 0; }\r\n\t\t\t\treturn (indexA > indexB ? c1 : c2);\r\n\t\t\t}\r\n\t\t\tvar cmp;\r\n\r\n\r\n\t\t\t\r\n\t\t} /* Grid::sort() */\r\n\r\n\t\tthis.applySaveState = function (actualPagesize) {\r\n\t\t\tif ((self.rememberLayout) && (self.rememberLayout != \"false\")) {\r\n\t\t\t\tself = this;\r\n\t\t\t\tvar exists = OAT.getState(self, actualPagesize);\r\n\t\t\t\tif (exists) {\r\n\t\t\t\t\tOAT.filterRows(self);\r\n\r\n\r\n\t\t\t\t\tfor (var jC = 0; jC < self.columnsDataType.length; jC++) {\r\n\t\t\t\t\t\tif (self.conditions[jC].sort != 1) {\r\n\t\t\t\t\t\t\tself.sort(jC, self.conditions[jC].sort, /*self.columnsDataType.length -1 -*/ jC);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.applySortOrderType = function (columnNumber, sortOrder) {\r\n\t\t\tself.sort(columnNumber, sortOrder, /*self.columnsDataType.length -1 -*/ columnNumber)\r\n\t\t}\r\n\r\n\t\tthis.applyCustomSort = function (columnNumber, sortData, dataRows) {\r\n\t\t\tvar distinctValues = [];\r\n\t\t\tfor (var h = 0; h < sortData.childNodes.length; h++) {\r\n\t\t\t\tif ((sortData.childNodes[h] != undefined) &&\r\n\t\t\t\t\t(sortData.childNodes[h].localName != undefined) &&\r\n\t\t\t\t\t(sortData.childNodes[h].localName === \"customOrder\")) {\r\n\t\t\t\t\tfor (var n = 0; n < sortData.childNodes[h].childNodes.length; n++) {\r\n\t\t\t\t\t\tif (sortData.childNodes[h].childNodes[n].localName == \"Value\") {\r\n\t\t\t\t\t\t\tdistinctValues.push(sortData.childNodes[h].childNodes[n].textContent.trimpivot());\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfor (var d = 0; d < dataRows.length; d++) {\r\n\t\t\t\tif (distinctValues.indexOf(dataRows[d][columnNumber].trimpivot()) == -1) {\r\n\t\t\t\t\tdistinctValues.push(dataRows[d][columnNumber])\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar temp = dataRows;\r\n\t\t\tdataRows = [];\r\n\t\t\tfor (var i = 0; i < distinctValues.length; i++) {\r\n\t\t\t\tfor (var j = 0; j < temp.length; j++) {\r\n\t\t\t\t\tif (temp[j][columnNumber].trimpivot() === distinctValues[i].trimpivot()) {\r\n\t\t\t\t\t\tdataRows.push(temp[j]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn [dataRows, distinctValues];\r\n\t\t}\r\n\r\n\t\tthis.applyCustomFilter = function (columnNumber, filterData) {\r\n\t\t\ttry {\r\n\t\t\t\tvar includeValues = []; //the only values to show\r\n\t\t\t\tvar applyFilter = false;\r\n\t\t\t\tfor (var h = 0; h < filterData.childNodes.length; h++) {\r\n\t\t\t\t\tif ((filterData.childNodes[h] != undefined) &&\r\n\t\t\t\t\t\t(filterData.childNodes[h].localName != undefined) &&\r\n\t\t\t\t\t\t(filterData.childNodes[h].localName === \"include\")) {\r\n\t\t\t\t\t\tapplyFilter = true;\r\n\t\t\t\t\t\tfor (var n = 0; n < filterData.childNodes[h].childNodes.length; n++) {\r\n\t\t\t\t\t\t\tif ((filterData.childNodes[h].childNodes[n].localName != null) &&\r\n\t\t\t\t\t\t\t\t(filterData.childNodes[h].childNodes[n].localName.toLowerCase() === \"value\")) {\r\n\t\t\t\t\t\t\t\tincludeValues.push(filterData.childNodes[h].childNodes[n].textContent);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (applyFilter) {\r\n\t\t\t\t\tself.conditions[columnNumber].blackList = [];\r\n\r\n\t\t\t\t\tvar dataFieldId = OAT_JS.grid.gridData[self.UcId].columnDataField[columnNumber];\r\n\t\t\t\t\tOAT_JS.grid.gridData[self.UcId].blackLists[dataFieldId].state = \"\"\r\n\t\t\t\t\tOAT_JS.grid.gridData[self.UcId].blackLists[dataFieldId].defaultAction = \"Exclude\"\r\n\t\t\t\t\tOAT_JS.grid.gridData[self.UcId].blackLists[dataFieldId].hiddens = []\r\n\t\t\t\t\tfor (var i = 0; i < includeValues.length; i++) {\r\n\t\t\t\t\t\tif (includeValues[i] != \"TOTAL\")\r\n\t\t\t\t\t\t\tOAT_JS.grid.gridData[self.UcId].blackLists[dataFieldId].visibles.push(includeValues[i]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfor (var i = 0; i < self.rows.length; i++) {\r\n\t\t\t\t\t\tvar col = columnNumber;\r\n\t\t\t\t\t\tif ((includeValues.findIndex(self.rows[i].cells[col].options.value) === -1)\r\n\t\t\t\t\t\t\t&& (includeValues.findIndex(self.rows[i].cells[col].options.value.trimpivot()) === -1)\r\n\t\t\t\t\t\t\t&& (self.conditions[col].blackList.findIndex(self.rows[i].cells[col].options.value) === -1)) {\r\n\t\t\t\t\t\t\tself.conditions[col].blackList.push(self.rows[i].cells[col].options.value);\r\n\t\t\t\t\t\t\tOAT.HideGridRow({ grid: self }, columnNumber, self.rows[i].cells[columnNumber].options.value);\r\n\t\t\t\t\t\t\tOAT.actualizeBlackList(\"push\", self, columnNumber, self.rows[i].cells[columnNumber].options.value, false);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} catch (error) {\r\n\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.moveToNextPage = function () {\r\n\t\t\tself.oat_component.moveToNextPage(self.UcId);\r\n\t\t}\r\n\r\n\t\tthis.moveToFirstPage = function () {\r\n\t\t\tself.oat_component.moveToFirstPage(self.UcId);\r\n\t\t}\r\n\r\n\t\tthis.moveToLastPage = function () {\r\n\t\t\tself.oat_component.moveToLastPage(self.UcId);\r\n\t\t}\r\n\r\n\t\tthis.moveToPreviousPage = function () {\r\n\t\t\tself.oat_component.moveToPreviousPage(self.UcId);\r\n\t\t}\r\n\t\t\r\n\t\tthis.selectValue = function (selection) {\r\n\t\t\t//clear previous selection\r\n\t\t\tOAT_JS.grid.gridData[self.UcId].selection.SelectedNode = [];\r\n\t\t\tOAT.ClearSelectedNodes(jQuery(self.html));\r\n\t\t\t\t\r\n\t\t\t//find column number first condition\r\n\t\t\tvar s = 0;\r\n\t\t\tvar colNumber = OAT_JS.grid.gridData[self.UcId].columnDataField.indexOf(selection[s].DataField);\r\n\t\t\t\t\r\n\t\t\tOAT.SelectNodes({grid: self}, selection[s].Value, false, colNumber, -1, s, selection);\r\n\t\t}\r\n\t\t\r\n\t\tthis.deselectValue = function(){\r\n\t\t\tOAT_JS.grid.gridData[self.UcId].selection.SelectedNode = [];\r\n\t\t\tOAT.ClearSelectedNodes(jQuery(self.html));\r\n\t\t}\r\n\t\t\r\n\t\tthis.refreshPivot = function (metadata, data, sameQuery) {\r\n\r\n\t\t\tif ((metadata != \"\") && (data != \"\")) {\r\n\t\t\t\tvar parser = new DOMParser();\r\n\t\t\t\tvar xmlData = parser.parseFromString(metadata, 'text/xml');\r\n\t\t\t\tvar dimensions = xmlData.getElementsByTagName(\"OLAPDimension\");\r\n\r\n\t\t\t\tvar dataFieldOrderChanged = \"\";\r\n\t\t\t\tvar OrderChanged = \"\";\r\n\t\t\t\tvar colPosition = [];\r\n\t\t\t\tfor (var dim = 0; dim < dimensions.length; dim++) { //for every dimensions of the other querie\r\n\t\t\t\t\tvar dimID = dimensions[dim].getElementsByTagName(\"name\")[0].childNodes[0].nodeValue; //get the name - \"Identifier\" of this dimension\r\n\r\n\t\t\t\t\t//now search for this name at this querie\r\n\t\t\t\t\tvar dimPos = -1; //the columns number of the dimension in this table\r\n\t\t\t\t\tvar dimHeader = -1; //the number of the title (bug!)\r\n\t\t\t\t\tfor (var itC = 0; itC < self.columns.length; itC++) {\r\n\t\t\t\t\t\tif (self.columns[itC].attributes.getNamedItem(\"name\").nodeValue === dimID) {\r\n\t\t\t\t\t\t\tvar display = self.columns[itC].attributes.getNamedItem(\"displayName\").nodeValue\r\n\t\t\t\t\t\t\t//search in the header for \"display\" name to know the position\r\n\t\t\t\t\t\t\tfor (var pD = 0; pD < self.header.cells.length; pD++) {\r\n\t\t\t\t\t\t\t\tif (self.header.cells[pD].options.value === display) {\r\n\t\t\t\t\t\t\t\t\tdimPos = self.header.cells.length - 1 - pD;\t\t//this is the number of the columns of the dimesnion at this table\r\n\t\t\t\t\t\t\t\t\tdimHeader = pD;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (dimPos != -1) { //the dimension exists in this table\r\n\t\t\t\t\t\t//make the changes\r\n\t\t\t\t\t\tvar position = dimensions[dim].getElementsByTagName(\"condition\")[0].childNodes[0].nodeValue;\r\n\t\t\t\t\t\tif (position === \"none\") {\r\n\t\t\t\t\t\t\tvar newdisp = \"none\";\r\n\t\t\t\t\t\t\tself.header.cells[dimHeader].html.style.display = newdisp;\r\n\t\t\t\t\t\t\tfor (var i = 0; i < self.rows.length; i++) {\r\n\t\t\t\t\t\t\t\tself.rows[i].cells[dimPos].html.style.display = newdisp;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tOAT_JS.grid.setColumnVisibleValue(self.UcId, dimHeader, (newdisp == \"\"))\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tvar newdisp = \"\";\r\n\t\t\t\t\t\t\tself.header.cells[dimHeader].html.style.display = newdisp;\r\n\t\t\t\t\t\t\tfor (var i = 0; i < self.rows.length; i++) {\r\n\t\t\t\t\t\t\t\tself.rows[i].cells[dimPos].html.style.display = newdisp;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tOAT_JS.grid.setColumnVisibleValue(self.UcId, dimHeader, (newdisp == \"\"))\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t//set column position\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tvar dataFieldId = OAT_JS.grid.gridData[self.UcId].columnDataField[dimHeader];\r\n\t\t\t\t\t\t\tcolPosition[parseInt(dimensions[dim].getElementsByTagName(\"position\")[0].childNodes[0].nodeValue)] = dataFieldId\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t} catch (error) { }\r\n\t\t\t\t\t\t//reset blacklists\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tvar dataFieldId = OAT_JS.grid.gridData[self.UcId].columnDataField[dimHeader];\r\n\t\t\t\t\t\tOAT_JS.grid.updateFilterInfo(self.UcId, dataFieldId, { op: \"all\", values: [] });\r\n\t\t\t\t\t\t\r\n\r\n\t\t\t\t\t\t//set order value if changed\r\n\t\t\t\t\t\tvar order = dimensions[dim].getElementsByTagName(\"order\")[0].childNodes[0].nodeValue;\r\n\t\t\t\t\t\tif ((order == \"ascending\") && (self.conditions[dimPos].sort == 3)) {\r\n\t\t\t\t\t\t\tself.sort(dimPos, OAT.GridData.SORT_ASC, dimHeader);\r\n\t\t\t\t\t\t\tOrderChanged = \"Ascending\"\r\n\t\t\t\t\t\t\tdataFieldOrderChanged = dimensions[dim].getElementsByTagName(\"dataField\")[0].childNodes[0].nodeValue\r\n\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t} else if ((order == \"descending\") && (self.conditions[dimPos].sort != 3)) {\r\n\t\t\t\t\t\t\tself.sort(dimPos, OAT.GridData.SORT_DESC, dimHeader);\r\n\r\n\t\t\t\t\t\t\tOrderChanged = \"Descending\"\r\n\t\t\t\t\t\t\tdataFieldOrderChanged = dimensions[dim].getElementsByTagName(\"dataField\")[0].childNodes[0].nodeValue\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvar hides = dimensions[dim].getElementsByTagName(\"hide\")[0].childNodes;\r\n\t\t\t\t\t\tfor (var sofs = 0; sofs < hides.length; sofs++) {\r\n\t\t\t\t\t\t\tif (hides[sofs].tagName === \"value\") {\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tvar dataFieldId = OAT_JS.grid.gridData[self.UcId].columnDataField[dimHeader];\r\n\t\t\t\t\t\t\t\t\tvar distinctValues = OAT_JS.grid.gridData[self.UcId].differentValues[dataFieldId];\r\n\t\t\t\t\t\t\t\t\tfor (var i = 0; i < distinctValues.length; i++) {\r\n\t\t\t\t\t\t\t\t\t\tif (distinctValues[i].trimpivot() == hides[sofs].textContent) {\r\n\t\t\t\t\t\t\t\t\t\t\tOAT_JS.grid.updateFilterInfo(self.UcId, dataFieldId, { op: \"push\", values: distinctValues[i] });\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} //else the dimension doesnt exist in this table\r\n\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\r\n\t\t\t\tif (colPosition.length != OAT_JS.grid.gridData[self.UcId].columnDataField.length) {\r\n\t\t\t\t\tcolPosition = [];\r\n\t\t\t\t}\r\n\t\t\t\tvar dimensions = xmlData.getElementsByTagName(\"OLAPDimension\");\r\n\t\t\t\tOAT_JS.grid.refreshPivotWhenServerPagination(self.UcId, dataFieldOrderChanged, OrderChanged, colPosition);\r\n\t\t\t\t\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tthis.getDataXML = function (serverData) {\r\n\r\n\t\t\t\t//spl = self.IdForQueryViewerCollection;\r\n\t\t\t\t//var temp = self.QueryViewerCollection[spl].getPivottableDataSync();\r\n\r\n\t\t\t\tvar dataStr = serverData.split(\"<Recordset\")[1];\r\n\r\n\t\t\t\tdataStr = \"<Recordset\" + dataStr;\r\n\r\n\t\r\n\t\t\t\treturn dataStr;\r\n\t\t}\r\n\r\n\t\tthis.getFilteredDataXML = function (serverData) {\r\n\t\t\treturn OAT_JS.grid.getTableWhenServerPagination(self.UcId, serverData);\r\n\t\t}\r\n\r\n\r\n\t\tthis.getMetadataXML = function () {\r\n\r\n\r\n\t\t\tvar xml = '<OLAPCube format=\"' + \"compact\" + '\" thousandsSeparator=\"' + \",\" + '\" decimalSeparator=\"' + \".\" + '\" dateFormat=\"' + \"MDY\" + '\">';\r\n\r\n\t\t\tfor (var iCV = 0; iCV < self.columns.length; iCV++) {\r\n\t\t\t\t\r\n\t\t\t\tvar isMeasure = (self.columns[iCV].getAttribute(\"isMeasure\") != undefined)\r\n\t\t\t\t\r\n\t\t\t\tif (isMeasure)\r\n\t\t\t\t\txml = xml + '<OLAPMeasure> ';\r\n\t\t\t\telse\r\n\t\t\t\t\txml = xml + '<OLAPDimension> ';\r\n\r\n\t\t\t\txml = xml + OAT.createXMLDimensionInfo(self, iCV);\r\n\r\n\t\t\t\tvar columnaentabla = 0\r\n\t\t\t\tfor (var celdaHeader = 0; celdaHeader < self.header.cells.length; celdaHeader++){\r\n\t\t\t\t\tif (self.header.cells[celdaHeader].dataField == self.columns[iCV].getAttribute(\"dataField\")){ \r\n\t\t\t\t\t\tcolumnaentabla = celdaHeader\r\n\t\t\t\t\t\tif (self.header.cells[celdaHeader].html.style.display == \"none\") {\r\n\t\t\t\t\t\t\txml = xml + '<hidden>true</hidden>'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (self.columns[iCV].getAttribute(\"picture\") === \"\") {\r\n\t\t\t\t\txml = xml + '<picture/> '\r\n\t\t\t\t} else {\r\n\t\t\t\t\txml = xml + '<picture>' + self.columns[iCV].getAttribute(\"picture\") + '</picture> ';\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (self.columns[iCV].getAttribute(\"format\") === \"\") {\r\n\t\t\t\t\txml = xml + '<format/> ';\r\n\t\t\t\t} else {\r\n\t\t\t\t\txml = xml + '<format>' + self.columns[iCV].getAttribute(\"format\") + '</format> ';\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tvar cantVisibles = 0\r\n\t\t\t\tvar located = false\r\n\t\t\t\tvar pos = -1;\r\n\t\t\t\tfor (var colGrid = 0; (colGrid < OAT_JS.grid.gridData[self.UcId].columnDataField.length) && (!located); colGrid++)\r\n\t\t\t\t{\r\n\t\t\t\t\tvar dataFieldColumn = OAT_JS.grid.gridData[self.UcId].columnDataField[colGrid];\r\n\t\t\t\t\tvar isHidden = false;\r\n\t\t\t\t\tfor (var columnI = 0; columnI < self.columns.length; columnI++){\r\n\t\t\t\t\t\tif (dataFieldColumn == self.columns[columnI].getAttribute(\"dataField\"))\r\n\t\t\t\t\t\t\tisHidden = (self.columns[columnI].getAttribute(\"visible\").toLowerCase() == \"never\")\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!isHidden)\r\n\t\t\t\t\t\tcantVisibles=cantVisibles+1\r\n\t\t\t\t\tif (dataFieldColumn==self.columns[iCV].getAttribute(\"dataField\")){\r\n\t\t\t\t\t\tlocated=true;\r\n\t\t\t\t\t\tif (!isHidden) pos = cantVisibles\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (pos>0)\r\n\t\t\t\t\txml = xml + '<position>' + pos + '</position> ';\r\n\t\t\t\telse\r\n\t\t\t\t\txml = xml + '<position/>'\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tif (OAT_JS.grid.gridData[self.UcId].dataFieldOrder == self.columns[iCV].getAttribute(\"dataField\")){\r\n\t\t\t\t\tif (OAT_JS.grid.gridData[self.UcId].orderType == \"Descending\")\r\n\t\t\t\t\t\txml = xml + '<order>descending</order> '\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\txml = xml + '<order>ascending</order> '\r\n\t\t\t\t\t\r\n\t\t\t\t} else {\r\n\t\t\t\t\txml = xml + '<order>none</order> '\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\t\t\t\t\r\n\r\n\t\t\t\txml = xml + '<customOrder/> ';\r\n\t\t\t\txml = xml + '<include> ';\r\n\r\n\t\t\t\tvar previusValue = [];\r\n\t\t\t\tfor (var i = 0; i < self.rows.length; i++) {\r\n\t\t\t\t\tif (self.rows[i].cells[columnaentabla] != undefined) {\r\n\t\t\t\t\t\tif (previusValue.findIndex(self.rows[i].cells[columnaentabla].options.value) === -1) {\r\n\t\t\t\t\t\t\tif (self.conditions[iCV].blackList.findIndex(self.rows[i].cells[columnaentabla].options.value) === -1) {\r\n\t\t\t\t\t\t\t\txml = xml + '<value>' + self.rows[i].cells[columnaentabla].options.value + '</value> ';\r\n\t\t\t\t\t\t\t\tpreviusValue.push(self.rows[i].cells[columnaentabla].options.value);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\txml = xml + '<value>TOTAL</value> </include> <collapse/> ';\r\n\r\n\t\t\t\tif (isMeasure)\r\n\t\t\t\t\txml = xml + '</OLAPMeasure>';\r\n\t\t\t\telse\r\n\t\t\t\t\txml = xml + ' </OLAPDimension>';\r\n\t\t\t}\r\n\r\n\t\t\txml = xml + \"</OLAPCube>\";\r\n\r\n\t\t\treturn xml;\r\n\t\t}\r\n\r\n\t\tself.init();\r\n\r\n\r\n\r\n\r\n\t\tvar itvl = setInterval(function () {\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tif ((jQuery(\"#\" + self.controlName).length > 0) && (jQuery(\"#\" + self.controlName)[0].getAttribute(\"class\") === \"oatgrid\")) {\r\n\t\t\t\tvar actual_rowsPerPage = 0;\r\n\t\t\t\tif (jQuery(\"#\" + self.controlName + \"tablePagination_rowsPerPage\").length > 0) {\r\n\r\n\t\t\t\t\tif (!OAT_JS.grid.gridData[self.UcId].autoResize){\r\n\t\t\t\t\t\tvar containerWidth = jQuery(\"#\" + self.ContainerName)[0].clientWidth\r\n\r\n\t\t\t\t\t\tjQuery(\"#\" + self.controlName).css({\r\n\t\t\t\t\t\t\twidth: containerWidth + \"px\"\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tcontainerWidth = jQuery(\"#\" + self.controlName)[0].clientWidth\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\r\n\t\t\t\t\tactual_rowsPerPage = parseInt(jQuery(\"#\" + self.controlName + \"tablePagination_rowsPerPage\")[0].value);\r\n\t\t\t\t\tif (!isNaN(actual_rowsPerPage)) {\r\n\t\t\t\t\t\tif (self.rowsPerPage != actual_rowsPerPage) {\r\n\t\t\t\t\t\t\tvar stateChange = (self.rowsPerPage != \"\")\r\n\t\t\t\t\t\t\tself.rowsPerPage = actual_rowsPerPage;\r\n\t\t\t\t\t\t\tvar conteiner = {\r\n\t\t\t\t\t\t\t\tgrid: self\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tself.rowsPerPage = actual_rowsPerPage;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar wd2 = containerWidth;\r\n\r\n\t\t\t\t\tjQuery(\"#\" + self.controlName + \"_tablePagination\").css({\r\n\t\t\t\t\t\twidth: wd2 + \"px\"\r\n\t\t\t\t\t});\r\n\t\t\t\t\tjQuery(\"#\" + self.controlName + \"_grid_top_div\").css({\r\n\t\t\t\t\t\twidth: wd2 + \"px\"\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\t//ajustar ancho de footer y top div si el contenido sobrepasa al contenedor\r\n\t\t\t\t\tvar widthTable = jQuery(\"#\" + self.controlName)[0].clientWidth\r\n\t\t\t\t\t\r\n\t\t\t\t\tif ((widthTable > (containerWidth + 10)) || (jQuery(\"#\" + self.controlName).closest(\".gxwebcomponent\").length > 0)) {\r\n\t\t\t\t\t\tjQuery(\"#\" + self.controlName + \"_tablePagination\").css({\r\n\t\t\t\t\t\t\twidth: (widthTable+1) + \"px\"\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tjQuery(\"#\" + self.controlName + \"_grid_top_div\").css({\r\n\t\t\t\t\t\t\twidth: (widthTable+1) + \"px\"\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tif (!OAT_JS.grid.gridData[self.UcId].autoResize){\r\n\t\t\t\t\t\tvar containerWidth = jQuery(\"#\" + self.ContainerName)[0].clientWidth\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tjQuery(\"#\" + self.controlName).css({\r\n\t\t\t\t\t\t\twidth: containerWidth + \"px\"\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tcontainerWidth = jQuery(\"#\" + self.controlName)[0].clientWidth\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar wid_topBar = containerWidth;\r\n\r\n\t\t\t\t\tjQuery(\"#\" + self.controlName + \"_grid_top_div\").css({\r\n\t\t\t\t\t\twidth: wid_topBar + \"px\"\r\n\t\t\t\t\t})\r\n\t\t\t\t\tjQuery(\".oatgrid\").css({ marginBottom: \"0px\" })\r\n\r\n\t\t\t\t\t//ajustar ancho de footer y top div si el contenido sobrepasa al contenedor\r\n\t\t\t\t\tvar widthTable = jQuery(\"#\" + self.controlName)[0].clientWidth\r\n\t\t\t\t\t\r\n\t\t\t\t\tif ((widthTable > (containerWidth + 10)) || (jQuery(\"#\" + self.controlName).closest(\".gxwebcomponent\").length > 0)) { \r\n\t\t\t\t\t\tjQuery(\"#\" + self.controlName + \"_grid_top_div\").css({\r\n\t\t\t\t\t\t\twidth: (widthTable+1) + \"px\"\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tjQuery(\".divIeContainer\").css({ opacity: \"1\" });\r\n\r\n\t\t\t\t//actualizar colores\r\n\r\n\t\t\t\tif (jQuery(\"#\" + self.controlName + \" tr\").length < 500) {\r\n\t\t\t\t\tvar nP = 1;\r\n\t\t\t\t\tfor (var i = 1; i < jQuery(\"#\" + self.controlName + \" tr\").length; i++) {\r\n\t\t\t\t\t\tif (jQuery(\"#\" + self.controlName + \" tr\")[i].style.display != \"none\") {\r\n\t\t\t\t\t\t\tif (nP % 2 === 1) {\r\n\t\t\t\t\t\t\t\tjQuery(\"#\" + self.controlName + \" tr\")[i].className = 'odd';\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tjQuery(\"#\" + self.controlName + \" tr\")[i].className = 'even';\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tnP++;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ((jQuery(\"#\" + self.controlName + \"tablePagination_rowsPerPage\").length > 0) && (self.QueryViewerCollection.length === 0)) {\r\n\t\t\t\t\tjQuery(\".pivot_pag_div\").css({\r\n\t\t\t\t\t\tmarginBottom: \"0px\"\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}, 150);\r\n\r\n\r\n\r\n\r\n\t}  /* Grid */\r\n\r\n\tOAT.GridHeader = function (grid, previousTHead) {\r\n\t\tvar self = this;\r\n\t\tthis.cells = [];\r\n\t\tthis.grid = grid;\r\n\t\tif (previousTHead) {\r\n\t\t\tthis.html = previousTHead;\r\n\t\t} else {\r\n\t\t\tthis.html = OAT.Dom.create(\"thead\");\r\n\t\t}\r\n\t\tthis.container = OAT.Dom.create(\"tr\");\r\n\t\tthis.html.appendChild(self.container);\r\n\r\n\t\tthis.clear = function () {\r\n\t\t\tOAT.Dom.clear(self.container);\r\n\t\t\tself.cells = [];\r\n\t\t}\r\n\r\n\t\tthis.addCell = function (params, columnsDataType, index, dataField) {\r\n\t\t\tvar cell = new OAT.GridHeaderCell(self.grid, params, index, dataField);\r\n\t\t\tvar tds = self.container.childNodes;\r\n\r\n\t\t\tif (tds.length && index < tds.length) {\r\n\t\t\t\tself.container.insertBefore(cell.html, tds[index]);\r\n\t\t\t} else { self.container.appendChild(cell.html); }\r\n\r\n\t\t\tself.cells.splice(index, 0, cell);\r\n\t\t\treturn cell;\r\n\t\t}\r\n\r\n\t\tself.removeColumn = function (index) {\r\n\t\t\tOAT.Dom.unlink(self.cells[index].html);\r\n\t\t\tself.cells.splice(index, 1);\r\n\t\t\tfor (var i = 0; i < self.cells.length; i++) { self.cells[i].number = i; }\r\n\t\t}\r\n\t} /* GridHeader */\r\n\r\n\tOAT.GridHeaderCell = function (grid, params_, number, dataField) {\r\n\t\tvar self = this;\r\n\t\tthis.options = {\r\n\t\t\tvalue: \"\",\r\n\t\t\tsortable: 1,\r\n\t\t\t//draggable:1,\r\n\t\t\t//resizable:0,\r\n\t\t\talign: OAT.GridData.ALIGN_START,\r\n\t\t\tsort: OAT.GridData.SORT_NONE,\r\n\t\t\ttype: OAT.GridData.TYPE_AUTO\r\n\t\t}\r\n\r\n\t\tvar params = (typeof (params_) == \"object\" ? params_ : { value: params_ });\r\n\t\tfor (var p in params) { self.options[p] = params[p]; }\r\n\r\n\t\tthis.changeSort = function (type) {\r\n\t\t\tself.options.sort = type;\r\n\t\t\tself.updateSortImage();\r\n\t\t}\r\n\r\n\t\tthis.updateSortImage = function () {\r\n\t\t\tif (!self.sorter) { return; }\r\n\t\t\tvar path = \"none\";\r\n\t\t\tswitch (self.options.sort) {\r\n\t\t\t\tcase OAT.GridData.SORT_NONE: path = \"none\"; break;\r\n\t\t\t\tcase OAT.GridData.SORT_ASC: path = \"asc\"; break;\r\n\t\t\t\tcase OAT.GridData.SORT_DESC: path = \"desc\"; break;\r\n\t\t\t}\r\n\t\t\tself.sorter.className = \"table-sort-image table-sort-\" + path;\r\n\t\t\tjQuery(self.sorter).find(\"i\")[0].textContent = (path == \"none\") ? \"\" : (path == \"asc\") ? \"arrow_drop_up\" : \"arrow_drop_down\";\r\n\t\t}\r\n\r\n\t\tthis.signal = 0;\r\n\t\tthis.number = number;\r\n\t\tthis.grid = grid;\r\n\t\tthis.dataField = dataField;\r\n\r\n\t\tthis.html = OAT.Dom.create(\"td\"); /* cell */\r\n\t\tthis.container = OAT.Dom.create(\"div\", { position: \"relative\" }); /* cell interior */\r\n\t\tthis.value = OAT.Dom.create(\"div\", { overflow: \"hidden\" });\r\n\t\tOAT.Dom.addClass(self.value, \"header_value\");\r\n\r\n\t\tOAT.addTextNode(this.value, params.value.replace(/ /g, \"\\u00A0\"))\r\n\t\tthis.value.setAttribute(\"title_v\", params.value);\r\n\t\tthis.value.setAttribute(\"dataField\", dataField);\r\n\t\tthis.html.setAttribute(\"title_v\", params.value);\r\n\t\tthis.html.setAttribute(\"dataField\", dataField);\r\n\r\n\t\tvar divIcon = OAT.Dom.create(\"div\");\r\n\t\tdivIcon.className = \"div_settings\";\r\n\t\tOAT.addImageNode(divIcon, \"settings\", \"\");\r\n\t\tOAT.Dom.append([self.html, self.container], [self.container, self.value], [self.value, divIcon]);\r\n\t\t\r\n\t\tif (self.options.sortable) {\r\n\t\t\tself.html.style.cursor = \"pointer\";\r\n\t\t\tself.sorter = OAT.Dom.create(\"div\", { position: \"absolute\", right: \"6px\", bottom: \"4px\" });\r\n\t\t\tOAT.addImageNode(self.sorter, \"arrow_drop_up\", \"\");\r\n\t\t\t\r\n\t\t\tself.container.appendChild(self.sorter);\r\n\t\t\tself.updateSortImage();\r\n\t\t\tvar divCont;\r\n\t\t\tif (OAT.isIE()) {\r\n\t\t\t\tvar className = \"oatfilterwindowGrid\"\r\n\t\t\t\tif (grid.isSD) { //android\r\n\t\t\t\t\tdivCont = OAT.Dom.create(\"div\", \"\", \"oatfilterwindowGrid oatfilterwindow_small\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdivCont = OAT.Dom.create(\"div\", \"\", \"oatfilterwindowGrid\");\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tvar className = \"oatfilterwindow\"\r\n\t\t\t\tif (grid.isSD) {//android\r\n\t\t\t\t\tdivCont = OAT.Dom.create(\"div\", \"\", \"oatfilterwindow oatfilterwindow_small\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdivCont = OAT.Dom.create(\"div\", \"\", \"oatfilterwindow\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tOAT.Anchor.assign(self.container, {\r\n\t\t\t\ttitle: \" \",\r\n\t\t\t\tcontent: divCont,\r\n\t\t\t\tresult_control: false,\r\n\t\t\t\tactivation: \"click\",\r\n\t\t\t\ttype: OAT.WinData.TYPE_RECT,\r\n\t\t\t\twidth: \"auto\",\r\n\t\t\t\tcontainerQuery: qv.util.GetContainerControlClass(self.grid.QueryViewerCollection[IdForQueryViewerCollection]) + \" FilterPopup \"\r\n\t\t\t});\r\n\t\t\tvar callback = function (event) {\r\n\t\t\t\tvar type = OAT.GridData.SORT_NONE;\r\n\t\t\t\tswitch (self.options.sort) {\r\n\t\t\t\t\tcase OAT.GridData.SORT_NONE: type = OAT.GridData.SORT_ASC; break;\r\n\t\t\t\t\tcase OAT.GridData.SORT_ASC: type = OAT.GridData.SORT_DESC; break;\r\n\t\t\t\t\tcase OAT.GridData.SORT_DESC: type = OAT.GridData.SORT_ASC; break;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (OAT_JS.grid.gridData[self.grid.UcId].differentValuesPaginationInfo[dataField].previousPage == 0)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tOAT_JS.grid.initValueRead(self.grid.UcId, 0, dataField)\r\n\t\t\t\t\t\tjQuery(\".oat_winrect_container\").css({ left:  \"-10000000px\", top: \"-10000000px\" })\r\n\t\t\t\t\t\tvar clickEvent = jQuery.extend(true, {}, event);\r\n\t\t\t\t\t\tvar wait = function(){\r\n\t\t\t\t\t\t\tif (OAT_JS.grid.gridData[self.grid.UcId].differentValuesPaginationInfo[dataField].previousPage == 0) {\r\n\t\t\t\t\t\t\t\tsetTimeout( wait , 100)\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tOAT.showPopup(clickEvent, self, type, divCont);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\twait();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tOAT.showPopup(event, self, type, divCont);\r\n\t\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\tOAT.Event.attach(self.container, \"click\", callback);\r\n\r\n\t\t}\r\n\r\n\r\n\r\n\t\tswitch (self.options.align) {\r\n\t\t\tcase OAT.GridData.ALIGN_START: self.html.style.textAlign = \"start\"; break;\r\n\t\t\tcase OAT.GridData.ALIGN_CENTER: self.html.style.textAlign = \"center\"; break;\r\n\t\t\tcase OAT.GridData.ALIGN_END: self.html.style.textAlign = \"end\"; break;\r\n\t\t}\r\n\r\n\t\tvar mouseover = function (event) { OAT.Dom.addClass(self.html, \"hover\"); }\r\n\t\tvar mouseout = function (event) { OAT.Dom.removeClass(self.html, \"hover\"); }\r\n\t\tOAT.Event.attach(self.html, \"mouseover\", mouseover);\r\n\t\tOAT.Event.attach(self.html, \"mouseout\", mouseout);\r\n\t} /* GridHeaderCell */\r\n\r\n\tOAT.GridRow = function (grid, number) {\r\n\t\tvar self = this;\r\n\r\n\t\tthis.clear = function () {\r\n\t\t\tOAT.Dom.clear(self.html);\r\n\t\t\tself.cells = [];\r\n\t\t}\r\n\r\n\t\tthis.removeColumn = function (index) {\r\n\t\t\tOAT.Dom.unlink(self.cells[index].html);\r\n\t\t\tself.cells.splice(index, 1);\r\n\t\t}\r\n\t\tthis.isDecimal = function (expression, max) {\r\n\t\t\tvar decimal = /^[0-9]+(\\.[0-9]+)+$/;\r\n\t\t\tif (expression.match(decimal)) {\r\n\t\t\t\treturn true;\r\n\t\t\t} else {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.addCell = function (params, columnsDataType, defaultPicture, customPicture, conditionalFormatsColumns, formatValues, customFormat, numCol, index, cellVisible) {\r\n\t\t\tvar i = (!index ? self.cells.length : index);\r\n\t\t\tif (params == undefined) {\r\n\t\t\t\tparams = \"\"\r\n\t\t\t}\r\n\r\n\t\t\tvar cell = new OAT.GridRowCell(params, i, columnsDataType, defaultPicture, customPicture, conditionalFormatsColumns, formatValues, customFormat, numCol, cellVisible);\r\n\t\t\tvar tds = self.html.childNodes;\r\n\t\t\tif (tds.length && i != tds.length) {\r\n\t\t\t\tself.html.insertBefore(cell.html, tds[i]);\r\n\t\t\t\tif (!cellVisible) tds[i].style.display = \"none\"\r\n\t\t\t} else {\r\n\t\t\t\tself.html.appendChild(cell.html);\r\n\t\t\t\tif (!cellVisible) cell.html.style.display = \"none\"\r\n\t\t\t}\r\n\r\n\t\t\tOAT.setClickEventHandlers(self, tds[tds.length - 1], params, \"DIMENSION\", numCol, self.grid.rows.length);\r\n\r\n\t\t\tself.cells.splice(i, 0, cell);\r\n\t\t\treturn cell.value;\r\n\t\t}\r\n\r\n\t\tthis.select = function () {\r\n\t\t\tself.selected = 1;\r\n\t\t\t//OAT.Dom.addClass(self.html, \"selected\");\r\n\t\t}\r\n\r\n\t\tthis.deselect = function () {\r\n\t\t\tself.selected = 0;\r\n\t\t\tOAT.Dom.removeClass(self.html, \"selected\");\r\n\t\t}\r\n\r\n\t\tthis.grid = grid; /* parent */\r\n\t\tthis.cells = [];\r\n\t\tthis.html = OAT.Dom.create(\"tr\");\r\n\t\tthis.selected = 0;\r\n\r\n\t\tOAT.Dom.addClass(self.html, (number % 2 ? \"even\" : \"odd\"));\r\n\r\n\t\tvar mouseover = function (event) { OAT.Dom.addClass(self.html, \"hover\"); }\r\n\t\tvar mouseout = function (event) { OAT.Dom.removeClass(self.html, \"hover\"); }\r\n\t\tvar click = function (event) {\r\n\t\t\tif (!event.shiftKey && !event.ctrlKey) {\r\n\t\t\t\t/* deselect all */\r\n\t\t\t\tfor (var i = 0; i < self.grid.rows.length; i++) {\r\n\t\t\t\t\tvar r = self.grid.rows[i];\r\n\t\t\t\t\tif (r != self) { r.deselect(); }\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (event.shiftKey) {\r\n\t\t\t\t/* select all above */\r\n\t\t\t\tvar firstAbove = -1;\r\n\t\t\t\tvar lastBelow = -1;\r\n\t\t\t\tvar done = 0;\r\n\t\t\t\tfor (var i = 0; i < self.grid.rows.length; i++) {\r\n\t\t\t\t\tvar r = self.grid.rows[i];\r\n\t\t\t\t\tif (r != self) {\r\n\t\t\t\t\t\tif (!done && r.selected) { firstAbove = i; } /* first selected above */\r\n\t\t\t\t\t\tif (!done && firstAbove != -1) { r.select(); }\r\n\t\t\t\t\t\tif (done && r.selected) { lastBelow = i; } /* last selected below */\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdone = 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t} /* all rows */\r\n\t\t\t\t/* if none are above, then try below */\r\n\t\t\t\tif (firstAbove == -1 && lastBelow != -1) {\r\n\t\t\t\t\tvar done = 0;\r\n\t\t\t\t\tfor (var i = 0; i < self.grid.rows.length; i++) {\r\n\t\t\t\t\t\tvar r = self.grid.rows[i];\r\n\t\t\t\t\t\tif (r == self) { done = 1; }\r\n\t\t\t\t\t\tif (done && r != self && i < lastBelow) { r.select(); }\r\n\t\t\t\t\t} /* all rows */\r\n\t\t\t\t} /* below */\r\n\t\t\t} /* if shift */\r\n\r\n\t\t\tself.selected ? self.deselect() : self.select();\r\n\t\t}\r\n\r\n\t\tOAT.Event.attach(self.html, \"mouseover\", mouseover);\r\n\t\tOAT.Event.attach(self.html, \"mouseout\", mouseout);\r\n\t\tOAT.Event.attach(self.html, \"click\", click);\r\n\r\n\t}      /* GridRow */\r\n\r\n\tOAT.GridRowCell = function (params_, number, columnsDataType, defaultPicture, customPicture, conditionalFormatsColumns, formatValues, customFormat, numCol, visible) {\r\n\t\tvar self = this;\r\n\r\n\t\tthis.options = {\r\n\t\t\tvalue: \"\",\r\n\t\t\talign: OAT.GridData.ALIGN_START\r\n\t\t}\r\n\r\n\t\tvar params = (typeof (params_) == \"object\" ? params_ : { value: params_ });\r\n\t\tfor (p in params) { self.options[p] = params[p]; }\r\n\r\n\t\tthis.html = OAT.Dom.create(\"td\");\r\n\t\tthis.container = OAT.Dom.create(\"div\");\r\n\t\tthis.value = OAT.Dom.create(\"div\", { overflow: \"hidden\" });\r\n\t\tOAT.Dom.addClass(self.value, \"row_value\");\r\n\r\n\t\tOAT.addTextNode(this.value, OAT.ApplyPictureValue(self.options.value, columnsDataType, defaultPicture, customPicture).trim().replace(/ /g, \"\\u00A0\"))\r\n\t\t\r\n\t\tvar cellvalue =  self.options.value\r\n\t\tif (columnsDataType == \"date\") {\r\n\t\t\tcellvalue = OAT.ApplyPictureValue(self.options.value, columnsDataType, defaultPicture, customPicture)\r\n\t\t}\r\n\t\tthis.html = OAT.applyFormatValues(this.html, cellvalue, columnsDataType, numCol, formatValues, conditionalFormatsColumns, customFormat, defaultPicture); /* Apply Format */\r\n\r\n\t\tthis.html.setAttribute(\"title\", OAT.ApplyPictureValue(self.options.value, columnsDataType, defaultPicture, customPicture));//self.options.value);\r\n\t\tOAT.Dom.append([self.html, self.container], [self.container, self.value]);\r\n\t\tthis.html.setAttribute(\"sin_pictureValue\", params_);\r\n\t\t//align numbers right\r\n\t\tif ((columnsDataType != \"character\") && (columnsDataType != \"guid\")){\r\n\t\t\tif (!isNaN(self.options.value)) {\r\n\t\t\t\tself.options.align = 4; //right\r\n\t\t\t}\r\n\t\t\tif (self.options.value) {\r\n\t\t\t\tself.options.align = 4; //right\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (columnsDataType === 'date') {\r\n\t\t\tself.options.align = 4;\r\n\t\t}\r\n\t\tswitch (self.options.align) {\r\n\t\t\tcase OAT.GridData.ALIGN_START: self.html.style.textAlign = \"start\"; break;\r\n\t\t\tcase OAT.GridData.ALIGN_CENTER: self.html.style.textAlign = \"center\"; break;\r\n\t\t\tcase OAT.GridData.ALIGN_END: self.html.style.textAlign = \"end\"; break;\r\n\t\t\tcase OAT.GridData.ALIGN_RIGHT: self.html.style.textAlign = \"right\"; break;\r\n\t\t}\r\n\r\n\t}         /* GridRowCell */\r\n\r\n\tOAT.underRecursionStyle = [];\r\n\tOAT.applyFormatValues = function (td, value, datatype, columnNumber, formatValues, conditionalFormatsColumns, customFormat) { /* Format for dimensions (\"header columns\") */\r\n\t\tvar measureDataType = datatype;\r\n\r\n\t\t//apply default format\r\n\t\tvar defaultFormats = customFormat[columnNumber];\r\n\t\tif ((defaultFormats != null) && (defaultFormats != \"\")) {\r\n\t\t\ttd = OAT.setStyleValues(td, defaultFormats);\r\n\t\t}\r\n\t\t//apply format value\r\n\t\tif (OAT.underRecursionStyle.length > 0) {\r\n\t\t\tfor (var i = 0; i < OAT.underRecursionStyle.length; i++) {\r\n\t\t\t\ttd = OAT.setStyleValues(td, OAT.underRecursionStyle[i].format);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor (var i = 0; i < formatValues.length; i++) {\r\n\t\t\tif (formatValues[i].columnNumber == columnNumber) { //a format for this column\r\n\t\t\t\tif (formatValues[i].value === value.trimpivot()) {\r\n\t\t\t\t\ttd = OAT.setStyleValues(td, formatValues[i].format);\r\n\t\t\t\t\tif ((self.formatValues[i].recursive != undefined) && (self.formatValues[i].recursive == \"yes\")) {\r\n\t\t\t\t\t\tOAT.underRecursionStyle.push(formatValues[i])\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t//apply conditional values\r\n\t\tvar equal = [];\r\n\t\tvar notequal = [];\r\n\t\tvar greaterThan = [];\r\n\t\tvar greaterOrEqual = [];\r\n\t\tvar lessThan = [];\r\n\t\tvar lessOrEqual = [];\r\n\t\tvar greaterOrEqual = [];\r\n\t\tvar between = [];\r\n\t\tfor (var i = 0; i < conditionalFormatsColumns.length; i++) {\r\n\t\t\tif (conditionalFormatsColumns[i].columnNumber == columnNumber) {\r\n\t\t\t\tif (conditionalFormatsColumns[i].operation1 == \"equal\") {\r\n\t\t\t\t\tif ((measureDataType === \"real\") || (measureDataType === \"integer\")) {\r\n\t\t\t\t\t\tequal[0] = parseFloat(conditionalFormatsColumns[i].value1);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tequal[0] = conditionalFormatsColumns[i].value1\r\n\t\t\t\t\t}\r\n\t\t\t\t\tequal[1] = conditionalFormatsColumns[i].format;\r\n\t\t\t\t}\r\n\t\t\t\tif (conditionalFormatsColumns[i].operation1 == \"notequal\") {\r\n\t\t\t\t\tif ((measureDataType === \"real\") || (measureDataType === \"integer\")) {\r\n\t\t\t\t\t\tnotequal[0] = parseFloat(conditionalFormatsColumns[i].value1);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tnotequal[0] = conditionalFormatsColumns[i].value1\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnotequal[1] = conditionalFormatsColumns[i].format;\r\n\t\t\t\t}\r\n\t\t\t\tif (conditionalFormatsColumns[i].operation1 == \"less\") {\r\n\t\t\t\t\tif ((measureDataType === \"real\") || (measureDataType === \"integer\")) {\r\n\t\t\t\t\t\tlessThan[0] = parseFloat(conditionalFormatsColumns[i].value1);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tlessThan[0] = conditionalFormatsColumns[i].value1;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlessThan[1] = conditionalFormatsColumns[i].format;\r\n\t\t\t\t}\r\n\t\t\t\tif (conditionalFormatsColumns[i].operation1 == \"lessequal\") {\r\n\t\t\t\t\tif ((measureDataType === \"real\") || (measureDataType === \"integer\")) {\r\n\t\t\t\t\t\tlessOrEqual[0] = parseFloat(conditionalFormatsColumns[i].value1);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tlessOrEqual[0] = conditionalFormatsColumns[i].value1\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlessThan[1] = conditionalFormatsColumns[i].format;\r\n\t\t\t\t}\r\n\t\t\t\tif (conditionalFormatsColumns[i].operation1 == \"greater\") {\r\n\t\t\t\t\tif ((measureDataType === \"real\") || (measureDataType === \"integer\")) {\r\n\t\t\t\t\t\tgreaterThan[0] = parseFloat(conditionalFormatsColumns[i].value1);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tgreaterThan[0] = conditionalFormatsColumns[i].value1;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tgreaterThan[1] = conditionalFormatsColumns[i].format;\r\n\t\t\t\t}\r\n\t\t\t\tif ((conditionalFormatsColumns[i].operation1 == \"greaterequal\") && (conditionalFormatsColumns[i].operation2 == undefined)) { \r\n\t\t\t\t\tif ((measureDataType === \"real\") || (measureDataType === \"integer\")) {\r\n\t\t\t\t\t\tgreaterOrEqual[0] = parseFloat(conditionalFormatsColumns[i].value1);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tgreaterOrEqual[0] = conditionalFormatsColumns[i].value1;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tgreaterThan[1] = conditionalFormatsColumns[i].format;\r\n\t\t\t\t}\r\n\t\t\t\tif (conditionalFormatsColumns[i].operation2 && conditionalFormatsColumns[i].operation1 == \"greaterequal\") {\r\n\t\t\t\t\t//greaterOrEqual = []\r\n\t\t\t\t\tif ((measureDataType === \"real\") || (measureDataType === \"integer\")) {\r\n\t\t\t\t\t\tbetween[0] = parseFloat(conditionalFormatsColumns[i].value1);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tbetween[0] = conditionalFormatsColumns[i].value1;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (conditionalFormatsColumns[i].operation2 && conditionalFormatsColumns[i].operation2 == \"lessequal\") {\r\n\t\t\t\t\t\tif ((measureDataType === \"real\") || (measureDataType === \"integer\")) {\r\n\t\t\t\t\t\t\tbetween[1] = parseFloat(conditionalFormatsColumns[i].value2);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tbetween[1] = conditionalFormatsColumns[i].value2;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbetween[2] = conditionalFormatsColumns[i].format;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar comparisons = new Array(3);\r\n\r\n\t\tif (measureDataType === \"real\") {\r\n\t\t\tvalue = parseFloat(value);\r\n\t\t\tif ((greaterThan[0] != undefined) && (greaterThan[0] != \"\")) {\r\n\t\t\t\tcomparisons[0] = parseFloat(greaterThan[0]);\r\n\t\t\t}\r\n\t\t\tif ((lessThan[0] != undefined) && (lessThan[0] != \"\")) {\r\n\t\t\t\tcomparisons[1] = parseFloat(lessThan[0]);\r\n\t\t\t}\r\n\t\t\tif ((between[0] != undefined) && (between[0] != \"\")) {\r\n\t\t\t\tcomparisons[2] = parseFloat(between[0]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (measureDataType === \"integer\") {\r\n\t\t\tvalue = parseInt(value);\r\n\t\t\tif ((greaterThan[0] != undefined) && (greaterThan[0] != \"\")) {\r\n\t\t\t\tcomparisons[0] = parseInt(greaterThan[0]);\r\n\t\t\t}\r\n\t\t\tif ((lessThan[0] != undefined) && (lessThan[0] != \"\")) {\r\n\t\t\t\tcomparisons[1] = parseInt(lessThan[0]);\r\n\t\t\t}\r\n\t\t\tif ((between[0] != undefined) && (between[0] != \"\")) {\r\n\t\t\t\tcomparisons[2] = parseInt(between[0]);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\r\n\t\tif (measureDataType === \"date\") {\r\n\t\t\tvar dates = value.split(\"-\");\r\n\r\n\t\t\tvar dateElements = new Array(3);\r\n\t\t\tdateElements[0] = parseInt(dates[0]);\r\n\t\t\tdateElements[1] = parseInt(dates[1]);\r\n\t\t\tdateElements[2] = parseInt(dates[2]);\r\n\r\n\t\t\ttry {\r\n\t\t\t\tif ((equal[0] != undefined) || (greaterOrEqual[0] != undefined) || (lessOrEqual[0] != undefined)) {\r\n\t\t\t\t\tvar cmpar;\r\n\t\t\t\t\tif (equal[0] != undefined) {\r\n\t\t\t\t\t\tcmpar = equal[0].split(\"-\");\r\n\t\t\t\t\t} else if (greaterOrEqual[0] != undefined) {\r\n\t\t\t\t\t\tcmpar = greaterOrEqual[0].split(\"-\");\r\n\t\t\t\t\t} else if (greaterOrEqual[0] != undefined) {\r\n\t\t\t\t\t\tcmpar = lessOrEqual[0].split(\"-\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar cmparElements = new Array(3);\r\n\t\t\t\t\tcmparElements[1] = parseInt(cmpar[1]);\r\n\t\t\t\t\tcmparElements[2] = parseInt(cmpar[2]);\r\n\t\t\t\t\tcmparElements[0] = parseInt(cmpar[0]);\r\n\r\n\t\t\t\t\tif ((cmparElements[0] == dateElements[0]) || ((cmparElements[0] == dateElements[0]) && (cmparElements[1] == dateElements[1]))) {\r\n\t\t\t\t\t\tif (equal[1] != undefined)\r\n\t\t\t\t\t\t\ttd = OAT.setStyleValues(td, equal[1]);\r\n\t\t\t\t\t\telse if (greaterThan[1] != undefined)\r\n\t\t\t\t\t\t\ttd = OAT.setStyleValues(td, greaterThan[1]);\r\n\t\t\t\t\t\telse if (lessThan[1] != undefined)\r\n\t\t\t\t\t\t\ttd = OAT.setStyleValues(td, lessThan[1]);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ((notequal[0] != undefined)) {\r\n\t\t\t\t\tvar cmpar = notequal[0].split(\"-\");\r\n\t\t\t\t\tvar cmparElements = new Array(3);\r\n\t\t\t\t\tcmparElements[1] = parseInt(cmpar[1]);\r\n\t\t\t\t\tcmparElements[2] = parseInt(cmpar[2]);\r\n\t\t\t\t\tcmparElements[0] = parseInt(cmpar[0]);\r\n\r\n\t\t\t\t\tif ((cmparElements[0] != dateElements[0]) || ((cmparElements[0] != dateElements[0]) && (cmparElements[1] != dateElements[1]))) {\r\n\t\t\t\t\t\ttd = OAT.setStyleValues(td, notequal[1]);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\tif ((greaterThan[0] != undefined) || (greaterOrEqual[0] != undefined)) {\r\n\t\t\t\t\tvar cmpar;\r\n\t\t\t\t\tif (greaterThan[0].split(\"-\") != undefined) {\r\n\t\t\t\t\t\tcmpar = greaterThan[0].split(\"-\");\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tcmpar = greaterOrEqual[0].split(\"-\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcmparElements[1] = parseInt(cmpar[1]);\r\n\t\t\t\t\tcmparElements[2] = parseInt(cmpar[2]);\r\n\t\t\t\t\tcmparElements[0] = parseInt(cmpar[0]);\r\n\r\n\t\t\t\t\tif ((cmparElements[0] < dateElements[0]) || ((cmparElements[0] <= dateElements[0]) && (cmparElements[1] < dateElements[1]))\r\n\t\t\t\t\t\t|| ((cmparElements[0] <= dateElements[0]) && (cmparElements[1] <= dateElements[1]) && (cmparElements[2] < dateElements[2]))) {\r\n\t\t\t\t\t\ttd = OAT.setStyleValues(td, greaterThan[1]);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\tif ((lessThan[0] != undefined) || (lessOrEqual[0] != undefined)) {\r\n\t\t\t\t\tvar cmpar;\r\n\t\t\t\t\tif (lessThan[0].split(\"-\") != undefined) {\r\n\t\t\t\t\t\tcmpar = lessThan[0].split(\"-\");\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tcmpar = lessOrEqual[0].split(\"-\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcmparElements = new Array(3);\r\n\t\t\t\t\tcmparElements[1] = parseInt(cmpar[1]);\r\n\t\t\t\t\tcmparElements[2] = parseInt(cmpar[2]);\r\n\t\t\t\t\tcmparElements[0] = parseInt(cmpar[0]);\r\n\r\n\t\t\t\t\tif ((cmparElements[0] > dateElements[0]) || ((cmparElements[0] >= dateElements[0]) && (cmparElements[1] > dateElements[1]))\r\n\t\t\t\t\t\t|| ((cmparElements[0] >= dateElements[0]) && (cmparElements[1] >= dateElements[1]) && (cmparElements[2] > dateElements[2]))) {\r\n\t\t\t\t\t\ttd = OAT.setStyleValues(td, lessThan[1]);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ((between[0] != undefined) && (between[1] != undefined)) {\r\n\t\t\t\t\tvar cmpar = between[0].split(\"-\");\r\n\t\t\t\t\tvar cmpar2 = between[1].split(\"-\");\r\n\t\t\t\t\tcmparElements = new Array(3);\r\n\t\t\t\t\tcmparElements2 = new Array(3);\r\n\t\t\t\t\tcmparElements[1] = parseInt(cmpar[1]);\r\n\t\t\t\t\tcmparElements[2] = parseInt(cmpar[2]);\r\n\t\t\t\t\tcmparElements[0] = parseInt(cmpar[0]);\r\n\r\n\t\t\t\t\tcmparElements2[1] = parseInt(cmpar2[1]);\r\n\t\t\t\t\tcmparElements2[2] = parseInt(cmpar2[2]);\r\n\t\t\t\t\tcmparElements2[0] = parseInt(cmpar2[0]);\r\n\r\n\t\t\t\t\tif (((cmparElements[0] <= dateElements[0]) || ((cmparElements[0] <= dateElements[0]) && (cmparElements[1] < dateElements[1]))\r\n\t\t\t\t\t\t|| ((cmparElements[0] <= dateElements[0]) && (cmparElements[1] <= dateElements[1]) && (cmparElements[2] < dateElements[2])))\r\n\t\t\t\t\t\t&&\r\n\t\t\t\t\t\t((cmparElements2[0] > dateElements[0]) || ((cmparElements2[0] >= dateElements[0]) && (cmparElements2[1] > dateElements[1]))\r\n\t\t\t\t\t\t\t|| ((cmparElements2[0] >= dateElements[0]) && (cmparElements2[1] >= dateElements[1]) && (cmparElements2[2] > dateElements[2])))\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\ttd = OAT.setStyleValues(td, between[2]);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} catch (ERROR) {\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif (measureDataType != \"date\") {\r\n\t\t\tif ((equal[0] != undefined) && (value == equal[0])) {\r\n\t\t\t\ttd = OAT.setStyleValues(td, equal[1]);\r\n\t\t\t}\r\n\t\t\tif ((notequal[0] != undefined) && (value != notequal[0])) {\r\n\t\t\t\ttd = OAT.setStyleValues(td, notequal[1]);\r\n\t\t\t}\r\n\t\t\tif (((greaterThan[0] != undefined) && (value > greaterThan[0])) ||\r\n\t\t\t\t((greaterOrEqual[0] != undefined) && (value >= greaterOrEqual[0]))) {\r\n\t\t\t\ttd = OAT.setStyleValues(td, greaterThan[1]);\r\n\t\t\t}\r\n\t\t\tif (((lessThan[0] != undefined) && (value < lessThan[0])) ||\r\n\t\t\t\t((lessOrEqual[0] != undefined) && (value <= lessOrEqual[0]))) {\r\n\t\t\t\ttd = OAT.setStyleValues(td, lessThan[1]);\r\n\t\t\t}\r\n\t\t\tif ((between[0] != undefined && between[1] != undefined) && (value >= between[0] && value <= between[1])) {\r\n\t\t\t\ttd = OAT.setStyleValues(td, between[2]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn td;\r\n\t}\r\n\r\n\tOAT.setStyleValues = function (elem, styleValues) {\r\n\t\tif (styleValues == undefined)\r\n\t\t\treturn elem;\r\n\t\tfunction hexToRgb(hex) {\r\n\t\t\t// Expand shorthand form (e.g. \"03F\") to full form (e.g. \"0033FF\")\r\n\t\t\tvar shorthandRegex = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\r\n\t\t\thex = hex.replace(shorthandRegex, function (m, r, g, b) {\r\n\t\t\t\treturn r + r + g + g + b + b;\r\n\t\t\t});\r\n\r\n\t\t\tvar result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\r\n\t\t\treturn result ? {\r\n\t\t\t\tr: parseInt(result[1], 16),\r\n\t\t\t\tg: parseInt(result[2], 16),\r\n\t\t\t\tb: parseInt(result[3], 16)\r\n\t\t\t} : null;\r\n\t\t}\r\n\r\n\t\tvar styleSplit = styleValues.split(\";\");\r\n\t\tfor (var j = 0; j < styleSplit.length; j++) {\r\n\t\t\tvar particularStyleSplit = styleSplit[j].split(\":\");\r\n\t\t\tvar property = qv.util.trim(particularStyleSplit[0]);\r\n\t\t\tvar value = qv.util.trim(particularStyleSplit[1]);\r\n\r\n\t\t\tswitch (property) {\r\n\t\t\t\tcase \"color\": if ((value[0] != undefined) && (value[0] === '#')) {\r\n\t\t\t\t\telem.style.color = 'rgb(' + hexToRgb(value).r + ',' + hexToRgb(value).g + ',' + hexToRgb(value).b + ')'\r\n\t\t\t\t} else {\r\n\t\t\t\t\telem.style.color = value;\r\n\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"fontStyle\": elem.style.fontStyle = value;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"backgroundColor\": elem.style.backgroundColor = value;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"textDecoration\": elem.style.textDecoration = value;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"fontWeight\": elem.style.fontWeight = value;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"fontFamily\": elem.style.fontFamily = value;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"fontVariant\": elem.style.fontVariant = value;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"fontSize\": elem.style.fontSize = value.replace(\"px\", \"\") + \"px\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"textAlign\": elem.style.textAlign = value;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"lineHeight\": elem.style.lineHeight = value;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"textIndent\": elem.style.textIndent = value;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"verticalAlign\": elem.style.verticalAlign = value;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"wordSpacing\": elem.style.wordSpacing = value;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"display\": elem.style.display = value;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"borderThickness\": elem.style.borderThickness = value;\r\n\t\t\t\t\telem.style.borderWidth = value + \"px\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"borderColor\": elem.style.borderColor = value;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"borderWith\": elem.style.borderWith = value;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"borderStyle\": elem.style.borderStyle = value;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"padding\": elem.style.padding = value;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"paddingBottom\": elem.style.paddingBottom = value;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"paddingLeft\": elem.style.paddingLeft = value;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"paddingRight\": elem.style.paddingRight = value;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"paddingTop\": elem.style.paddingTop = value;\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn elem;\r\n\t}\r\n\r\n\tOAT.GenerateFormatDateForGrid = function (value, picture) {\r\n\t\tvar dividepicture = picture.split(\" \");\r\n\t\tvar valueSplit = value[0].split(\"-\");\r\n\t\tvar newValue = \"\"\r\n\t\tswitch (picture) {\r\n\t\t\tcase \"99/99/9999\":\r\n\t\t\t\tnewValue = valueSplit[1] + \"/\" + valueSplit[2] + \"/\" + valueSplit[0];\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"99/99/99\":\r\n\t\t\t\tif (valueSplit[0].length == 4) {\r\n\t\t\t\t\tvalueSplit[0] = valueSplit[0].substr(valueSplit[0].length - 2, 2);\r\n\t\t\t\t}\r\n\t\t\t\tnewValue = valueSplit[1] + \"/\" + valueSplit[2] + \"/\" + valueSplit[0];\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tnewValue = valueSplit[2] + \"/\" + valueSplit[1] + \"/\" + valueSplit[0];\r\n\t\t}\r\n\t\treturn newValue;\r\n\t}\r\n\r\n\tOAT.HideGridRow = function (_self, colNumber, value) {\r\n\r\n\t\tfor (var i = 0; i < _self.grid.rows.length; i++) {\r\n\t\t\tif (_self.grid.rows[i].cells[colNumber].options.value.toString().trimpivot() === value.toString().trimpivot()) {\r\n\t\t\t\t_self.grid.rows[i].html.style.display = \"none\";\r\n\t\t\t\t_self.grid.rows[i].html.setAttribute('visibQ', 'tf');\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tOAT.ShowGridRow = function (_self, colNumber, value) {\r\n\r\n\t\tfor (var i = 0; i < _self.grid.rows.length; i++) {\r\n\t\t\tif (_self.grid.rows[i].cells[colNumber].options.value.toString().trimpivot() === value.toString().trimpivot()) {\r\n\t\t\t\t_self.grid.rows[i].html.style.display = \"\";\r\n\t\t\t\t_self.grid.rows[i].html.setAttribute('visibQ', 'tt');\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tOAT.RestoreGridRow = function (_self) { /* restore GRID  */\r\n\r\n\t\tfor (var i = 0; i < _self.grid.rows.length; i++) {\r\n\t\t\t//if (_self.grid.rows[i].html.getAttribute('visib')!='fp'){\r\n\t\t\t_self.grid.rows[i].html.style.display = \"\";\r\n\t\t\t//}\r\n\t\t\t_self.grid.rows[i].html.setAttribute('visibQ', 'tt');\r\n\t\t}\r\n\r\n\t\tfor (var colNum = 0; colNum < _self.grid.columnsDataType.length; colNum++) {\r\n\t\t\t_self.grid.conditions[colNum].blackList = [];\r\n\t\t}\r\n\t}\r\n\r\n\tOAT.RestoreGridOrder = function (_self) {\r\n\t\t//for (var colNum = 0; colNum < _self.grid.columnsDataType.length; colNum++){\r\n\t\t//\t\tif (_self.grid.conditions[colNum].sort != 1){\r\n\t\t//\t\t\t_self.grid.sort( colNum, 1, _self.grid.columnsDataType.length -1 - colNum);\t\t\t\t\t\r\n\t\t// \t}\t\t\r\n\t\t//}\r\n\t\t_self.grid.sort(0, 2, _self.grid.columnsDataType.length - 1 - 0);\r\n\t\t_self.grid.sort(0, 1, _self.grid.columnsDataType.length - 1 - 0);\r\n\t}\r\n\r\n\tOAT.RestoreGridColumns = function (_self) {\r\n\t\tfor (var tC = 0; tC < _self.grid.columnsDataType.length; tC++) {\r\n\t\t\t_self.grid.header.cells[tC].html.style.display = \"\";\r\n\t\t\tvar j = 0;\r\n\t\t\tvar numCol = _self.grid.columnsDataType.length - 1 - tC;\r\n\t\t\tfor (j = 0; j < _self.grid.rows.length; j++) {\r\n\t\t\t\t_self.grid.rows[j].cells[numCol].html.style.display = \"\";\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\t\r\n\tOAT.CreateGridRow = function (RowData, GridData, collapse){\r\n\t\tvar dataByField = []; var tempcolumnsDataType = []; var tempforPivotCustomPicture = []; var tempforPivotCustomFormat = []; var tempcolumnVisible = [];\r\n\t\tfor (var p = 0; p < GridData.columnDataField.length; p++) {\r\n\t\t\tvar pos = GridData.originalColumnDataField.indexOf(GridData.columnDataField[p])\r\n\t\t\tdataByField[p] = RowData[pos];\r\n\t\t\ttempcolumnsDataType[p] = GridData.rowsMetadata.columnsDataType[pos];\r\n\t\t\ttempforPivotCustomPicture[p] = GridData.rowsMetadata.forPivotCustomPicture[pos]\r\n\t\t\ttempforPivotCustomFormat[p] = GridData.rowsMetadata.forPivotCustomFormat[pos]\r\n\t\t\ttempcolumnVisible[p] = GridData.columnVisible[pos]\r\n\t\t}\r\n\t\tvar row = GridData.grid.createRow(dataByField, tempcolumnsDataType, GridData.rowsMetadata.defaultPicture,\r\n\t\t\ttempforPivotCustomPicture, GridData.rowsMetadata.conditionalFormatsColumns,\r\n\t\t\tGridData.rowsMetadata.formatValues, tempforPivotCustomFormat, GridData.rowsMetadata.columns,\r\n\t\t\tnull, tempcolumnVisible);\r\n\t\tif (collapse)\r\n\t\t\trow.style.visibility = \"collapse\";\r\n\t}\r\n\t\r\n\tOAT.filterRows = function (grid) {\r\n\r\n\t\tvar conteiner = {\r\n\t\t\tgrid: grid\r\n\t\t}\r\n\r\n\t\tfor (var colNum = 0; colNum < grid.columnsDataType.length; colNum++) {\r\n\r\n\t\t\tfor (var item = 0; item < grid.conditions[colNum].blackList.length; item++) {\r\n\t\t\t\tOAT.HideGridRow(conteiner, colNum, grid.conditions[colNum].blackList[item]);\r\n\t\t\t\tOAT.actualizeBlackList(\"push\", grid, colNum, grid.conditions[colNum].blackList[item], false);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tOAT.actualizeBlackList = function (oper, grid, colNumber, value, serverPaging) { //oper = push add value to blackList\r\n\t\tif (oper === \"push\") {\r\n\t\t\tif (grid.conditions[colNumber].blackList.indexOf(value) === -1)\r\n\t\t\t\tgrid.conditions[colNumber].blackList.push(value);\r\n\t\t} else { //pop\r\n\t\t\tvar index = grid.conditions[colNumber].blackList.indexOf(value);\r\n\t\t\tif (index != -1)\r\n\t\t\t\tgrid.conditions[colNumber].blackList.splice(index, 1);\r\n\t\t}\r\n\r\n\t}\r\n\r\n\r\n\tOAT.showPopup = function (pos, _self, _type, div) {\r\n\r\n\t\tvar toAppend = [];\r\n\r\n\r\n\t\tvar refresh = function () {\r\n\t\t\tjQuery(\".oat_winrect_container\").css({ display: \"none\" });\r\n\t\t}\r\n\r\n\t\tvar colNumber = _self.number;\r\n\t\tif (OAT_JS.grid.gridData[_self.grid.UcId].redrawHeader){\r\n\t\t\tvar columnCount = 0\r\n\t\t\tfor( var t=0; t<_self.grid.columns.length; t++){\r\n\t\t\t\tif (OAT_JS.grid.gridData[_self.grid.UcId].columnVisible[t])\r\n\t\t\t\t\tcolumnCount = columnCount + 1\r\n\t\t\t\tif (_self.grid.columns[t].getAttribute(\"dataField\") == _self.dataField)\r\n\t\t\t\t\tcolNumber = columnCount-1\r\n\t\t\t}\t\t\r\n\t\t}\r\n\r\n\t\tvar coords = pos;\r\n\t\tvar event = pos;\r\n\r\n\t\tif (_self.grid.isSD) { //android\r\n\t\t\tjQuery(\".oat_winrect_container\").css({ left: \"-1500px\", top: jQuery(event.currentTarget).offset().top + \"px\" })\r\n\t\t} else {\r\n\t\t\tjQuery(\".oat_winrect_container\").css({ left: jQuery(event.currentTarget).offset().left + \"px\", top: jQuery(event.currentTarget).offset().top + \"px\" })\r\n\t\t}\r\n\r\n\t\tOAT.Dom.clear(div);\r\n\t\ttoAppend.push(div);\r\n\t\t/* contents */\r\n\r\n\t\t//add title\r\n\t\tjQuery(\".oat_winrect_title\").find(\".winrect_title_label\").remove()\r\n\r\n\t\tvar spantitle = OAT.Dom.create(\"label\");\r\n\t\tif (_self.grid.isSD) { //android\r\n\t\t\tjQuery(\".oat_winrect_container\").addClass(\"oat_winrect_container_small\")\r\n\t\t\tspantitle.setAttribute(\"class\", \"winrect_title_label winrect_title_label_small\");\r\n\t\t} else {\r\n\t\t\tspantitle.setAttribute(\"class\", \"winrect_title_label\");\r\n\t\t}\r\n\t\t\r\n\t\tvar dimension_Title = _self.grid.columns[colNumber].getAttribute(\"displayName\")\r\n\t\tfor(var iC = 0; iC < _self.grid.columns.length; iC++)\r\n\t\t{\r\n\t\t\tif (_self.dataField == _self.grid.columns[iC].getAttribute(\"dataField\"))\r\n\t\t\t{\r\n\t\t\t\tdimension_Title = _self.grid.columns[iC].getAttribute(\"displayName\")\r\n\t\t\t}\r\n\t\t}\r\n\t\tOAT.addTextNode(spantitle, dimension_Title);\r\n\t\t\r\n\t\t//OAT.addTextNode(spantitle, _self.grid.columns[colNumber].getAttribute(\"displayName\"));\r\n\t\tjQuery(\".oat_winrect_title\").append(spantitle)\r\n\r\n\t\t\r\n\t\tvar cached = Math.floor(Math.random() * 10000)\r\n\t\t\r\n\t\tif (!_self.grid.disableColumnSort) {\r\n\t\t\tvar div_order = document.createElement(\"div\");\r\n\t\t\tdiv_order.setAttribute(\"class\", \"first_popup_subdiv\");\r\n\r\n\t\t\tvar asc = OAT.Dom.radio(\"order\");\r\n\t\t\t\r\n\t\t\tvar ascForId = \"pivot_order_asc\" + \"_\" + _self.grid.ContainerName + \"_\" + _self.grid.TableDataFilds[_self.number] + cached;\r\n\t\t\tasc.id = ascForId;\r\n\t\t\tasc.className = \"input_radio_popup\"\r\n\t\t\tasc.checked = (_self.grid.conditions[colNumber].sort === 2);  // _self.grid.conditions[colNumber] puede dar undefined\r\n\t\t\tOAT.Dom.attach(asc, \"change\", function () { });\r\n\t\t\tOAT.Dom.attach(asc, \"click\", function () {\r\n\t\t\t\tvar previousSortValue = _self.grid.conditions[colNumber].sort;\r\n\t\t\t\t_self.grid.sort(colNumber, OAT.GridData.SORT_ASC, _self.number);\r\n\t\t\t\tvar currentSortValue = _self.grid.conditions[colNumber].sort;\r\n\t\t\t\tif (qv.util.isGeneXusPreview()) {\r\n\t\t\t\t\tif (currentSortValue != previousSortValue && previousSortValue != OAT.GridData.SORT_NONE) {\t\t// First ascending sort must not fire event\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\tvar datastr = \"<DATA event=\\\"OrderChanged\\\" name=\\\"\" + _self.grid.columns[_self.number].getAttribute(\"name\") + \"\\\" displayName=\\\"\" + _self.grid.columns[_self.number].getAttribute(\"displayName\") + \"\\\"  order=\\\"ascending\\\">\"\r\n\t\t\t\t\t\t\tdatastr = datastr + \"</DATA>\"\r\n\t\t\t\t\t\t\twindow.external.SendText(qv.collection[OAT_JS.grid.gridData[UcId].IdForQueryViewerCollection].ControlName, datastr);\r\n\t\t\t\t\t\t} catch (error) { }\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\tvar origen = _self.container.parentNode.cellIndex; \r\n\t\t\t\t\tvar dataFieldId;\r\n\t\t\t\t\tif (origen < 0) \r\n\t\t\t\t\t\tdataFieldId = _self.dataField\r\n\t\t\t\t\telse\r\n\t\t\t\t\t    dataFieldId = OAT_JS.grid.gridData[_self.grid.UcId].columnDataField[origen];\r\n\t\t\t\t\tself.getDataForTable(_self.grid.UcId, 1, _self.grid.rowsPerPage, false, dataFieldId, \"Ascending\", \"\", \"\")\r\n\t\t\t\t\r\n\t\t\t\tvar idI = \"i_\" + this.getAttribute(\"id\");\r\n\t\t\t\tvar inputAsc = document.getElementById(idI);\r\n\t\t\t\tinputAsc.textContent = \"radio_button_checked\";\r\n\t\t\t\tvar inputDsc = document.getElementById(idI.replace(\"asc\", \"desc\"));\r\n\t\t\t\tinputDsc.textContent = \"radio_button_unchecked\";\r\n\t\t\t\t\r\n\t\t\t});\r\n\t\t\tdiv_order.appendChild(asc);\r\n\r\n\t\t\tvar alabel = OAT.Dom.create(\"label\");\r\n\t\t\talabel.className = \"first_div_label\";\r\n\t\t\talabel.htmlFor = ascForId;\r\n\t\t\t\r\n\t\t\tvar IStyle = OAT.isIE() ? \"top:-10px;\" : \"\"; \r\n\t\t\tOAT.addImageNode(alabel, (_self.grid.conditions[colNumber].sort === 2)?\"radio_button_checked\":\"radio_button_unchecked\", IStyle, \"i_\"+ascForId);\r\n\t\t\tOAT.addTextNode(alabel, self.translations.GXPL_QViewerJSAscending); //gx.getMessage(\"GXPL_QViewerJSAscending\"))\r\n\t\t\tdiv_order.appendChild(alabel);\r\n\t\t\tdiv_order.appendChild(OAT.Dom.create(\"br\"));\r\n\t\t\t\r\n\t\t\tvar desc = OAT.Dom.radio(\"order\");\r\n\t\t\tvar dscForId = \"pivot_order_desc\" + \"_\" + _self.grid.ContainerName + \"_\" + _self.grid.TableDataFilds[_self.number] + cached;\r\n\t\t\tdesc.id = dscForId;\r\n\t\t\tdesc.className = \"input_radio_popup\"\r\n\t\t\tdesc.checked = (_self.grid.conditions[colNumber].sort === 3);\r\n\t\t\tOAT.Dom.attach(desc, \"change\", function () { });\r\n\t\t\tOAT.Dom.attach(desc, \"click\", function () {\r\n\t\t\t\tvar previousSortValue = _self.grid.conditions[colNumber].sort;\r\n\t\t\t\t_self.grid.sort(colNumber, OAT.GridData.SORT_DESC, _self.number);\r\n\t\t\t\tvar currentSortValue = _self.grid.conditions[colNumber].sort;\r\n\t\t\t\tif (qv.util.isGeneXusPreview()) {\r\n\t\t\t\t\tif (currentSortValue != previousSortValue) {\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\tvar datastr = \"<DATA event=\\\"OrderChanged\\\" name=\\\"\" + _self.grid.columns[_self.number].getAttribute(\"name\") + \"\\\" displayName=\\\"\" + _self.grid.columns[_self.number].getAttribute(\"displayName\") + \"\\\"  order=\\\"descending\\\">\"\r\n\t\t\t\t\t\t\tdatastr = datastr + \"</DATA>\"\r\n\t\t\t\t\t\t\twindow.external.SendText(qv.collection[OAT_JS.grid.gridData[UcId].IdForQueryViewerCollection].ControlName, datastr);\r\n\t\t\t\t\t\t} catch (error) { }\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t\tvar origen = _self.container.parentNode.cellIndex; \r\n\t\t\t\t\tvar dataFieldId;\r\n\t\t\t\t\tif (origen < 0) \r\n\t\t\t\t\t\tdataFieldId = _self.dataField\r\n\t\t\t\t\telse\r\n\t\t\t\t\t    dataFieldId = OAT_JS.grid.gridData[_self.grid.UcId].columnDataField[origen]; //_self.grid.columns[colNumber].getAttribute(\"dataField\"); \r\n\t\t\t\t\tself.getDataForTable(_self.grid.UcId, 1, _self.grid.rowsPerPage, false, dataFieldId, \"Descending\", \"\", \"\");\r\n\t\t\t\t\r\n\t\t\t\tvar idI = \"i_\" + this.getAttribute(\"id\");\r\n\t\t\t\tvar inputDsc = document.getElementById(idI);\r\n\t\t\t\tinputDsc.textContent = \"radio_button_checked\";\r\n\t\t\t\tvar inputAsc = document.getElementById(idI.replace(\"desc\", \"asc\"));\r\n\t\t\t\tinputAsc.textContent = \"radio_button_unchecked\";\r\n\t\t\t\t\r\n\t\t\t});\r\n\t\t\tvar dlabel = OAT.Dom.create(\"label\");\r\n\t\t\tdlabel.className = \"first_div_label\";\r\n\t\t\tdlabel.htmlFor = dscForId;\r\n\t\t\tOAT.addImageNode(dlabel, (_self.grid.conditions[colNumber].sort === 3)?\"radio_button_checked\":\"radio_button_unchecked\", IStyle, \"i_\"+dscForId);\r\n\t\t\tOAT.addTextNode(dlabel, self.translations.GXPL_QViewerJSDescending); //gx.getMessage(\"GXPL_QViewerJSDescending\"))\r\n\r\n\t\t\tdiv_order.appendChild(desc);\r\n\t\t\tdiv_order.appendChild(dlabel);\r\n\r\n\t\t\ttoAppend.push(div_order);\r\n\r\n\t\t\tif (self.header.length > 1) {\r\n\t\t\t\tvar hr4 = OAT.Dom.create(\"hr\", {});\r\n\t\t\t\t//begin drag options\r\n\t\t\t\ttoAppend.push(hr4);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar hr3 = OAT.Dom.create(\"hr\", {});\r\n\r\n\t\t//to left\r\n\t\tvar dragDiv = OAT.Dom.create(\"div\");\r\n\t\tif (_self.grid.disableColumnSort) {\r\n\t\t\tdragDiv.setAttribute(\"class\", \"first_popup_subdiv\");\r\n\t\t}\r\n\t\tif ((_self.container.parentNode.cellIndex > 0)) {\r\n\r\n\t\t\tvar dragDiv_L_sel_div = document.createElement(\"div\");\r\n\t\t\tdragDiv_L_sel_div.setAttribute(\"class\", \"move_item_img\");\r\n\r\n\t\t\tOAT.Dom.attach(dragDiv_L_sel_div, \"click\", function () {\r\n\t\t\t\tvar origen = _self.container.parentNode.cellIndex; //the real position of the item click\r\n\t\t\t\tvar destino = origen - 1;\r\n\t\t\t\t\r\n\t\t\t\twhile ((destino >= 0) && (_self.container.parentNode.parentNode.children[destino].clientWidth == 0))\r\n\t\t\t\t{\r\n\t\t\t\t\tdestino = destino - 1\r\n\t\t\t\t}\r\n\t\t\t\tif (destino == -1) return; \r\n\t\t\t\t\r\n\t\t\t\tvar i1 = 0;\r\n\t\t\t\tvar i2 = 0;\r\n\r\n\t\t\t\tvar strDestino = _self.container.parentNode.parentNode.children[destino].getAttribute('title_v');\r\n\t\t\t\tfor (var i = 0; i < _self.grid.header.cells.length; i++) {\r\n\t\t\t\t\tif (_self.container.children[0].getAttribute('title_v') === _self.grid.header.cells[i].value.firstChild.textContent.replace(/\\u00A0/g, \" \")) {\r\n\t\t\t\t\t\ti1 = i; //pos on cell array\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (strDestino === _self.grid.header.cells[i].value.firstChild.textContent.replace(/\\u00A0/g, \" \")) {\r\n\t\t\t\t\t\ti2 = i;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t_self.grid.header.cells[i1].html.parentNode.insertBefore(_self.grid.header.cells[i1].html, _self.grid.header.cells[i2].html);\r\n\r\n\t\t\t\t\r\n\t\t\t\t\tOAT_JS.grid.gridData[_self.grid.UcId].redrawHeader = true;\r\n\t\t\t\t\tfor (var i = 0; i < _self.grid.rows.length; i++) {\r\n\t\t\t\t\t\t_self.grid.rows[i].cells[i1].html.parentNode.insertBefore(_self.grid.rows[i].cells[i1].html, _self.grid.rows[i].cells[i2].html);\r\n\t\t\t\t\t}\r\n\t\t\t\t\r\n\r\n\t\t\t\tvar dataFieldsPos = [];\r\n\t\t\t\tfor (var idF = 0; idF < jQuery(\"#\" + _self.grid.controlName).find(\"thead td\").length; idF++) {\r\n\t\t\t\t\tdataFieldsPos.push(jQuery(\"#\" + _self.grid.controlName).find(\"thead td\")[idF].getAttribute(\"dataField\"))\r\n\t\t\t\t}\r\n\t\t\t\tOAT_JS.grid.setDataFieldPosition(_self.grid.UcId, dataFieldsPos);\r\n\t\t\t\trefresh();\r\n\t\t\t});\r\n\r\n\t\t\tvar draglabel = OAT.Dom.create(\"label\");\r\n\t\t\tOAT.addTextNode(draglabel, self.translations.GXPL_QViewerJSMoveColumnToLeft); //gx.getMessage(\"GXPL_QViewerJSMoveColumnToLeft\"))\r\n\t\t\tdraglabel.htmlFor = \"move_column_to_left\" + cached;\r\n\t\t\tdragDiv_L_sel_div.appendChild(draglabel);\r\n\r\n\t\t\tOAT.Dom.append([dragDiv, dragDiv_L_sel_div]);\r\n\t\t\tif (_self.container.parentNode.cellIndex >= _self.grid.header.cells.length - 2) { \r\n\t\t\t\ttoAppend.push(dragDiv);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//to right\r\n\t\tif (_self.container.parentNode.cellIndex < _self.grid.header.cells.length - 1) { //si no es la ultima columna\r\n\r\n\t\t\tvar dragDiv_R_sel_div = document.createElement(\"div\");\r\n\t\t\tdragDiv_R_sel_div.setAttribute(\"class\", \"move_item_img\");\r\n\r\n\t\t\tOAT.Dom.attach(dragDiv_R_sel_div, \"click\", function () {\r\n\t\t\t\tvar origen = _self.container.parentNode.cellIndex; //the real position of the item click\r\n\t\t\t\tif (origen == -1){\r\n\t\t\t\t\tfor (var c = 0; c < _self.grid.html.tHead.rows[0].cells.length; c++){\r\n\t\t\t\t\t\tif (_self.container.children[0].getAttribute('title_v') == _self.grid.html.tHead.rows[0].cells[c].getAttribute('title_v')){\r\n\t\t\t\t\t\t\torigen = c;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tvar destino = origen + 1;\r\n\t\t\t\t\r\n\t\t\t\tvar headers = _self.container.parentNode.parentNode\r\n\t\t\t\t\r\n\t\t\t\tif (_self.container.parentNode.parentNode == undefined)\r\n\t\t\t\t\theaders = _self.grid.div.children[1].children[0].children[0]\r\n\t\t\t\t\r\n\t\t\t\twhile ((destino < headers.children.length-1) && (headers.children[destino].clientWidth == 0))\r\n\t\t\t\t{\r\n\t\t\t\t\tdestino = destino + 1\r\n\t\t\t\t}\r\n\t\t\t\tif (destino >= headers.children.length) return;\r\n\t\t\t\t\r\n\t\t\t\tvar i1 = 0;\r\n\t\t\t\tvar i2 = 0;\r\n\r\n\t\t\t\t//var strDestino = _self.container.parentNode.parentNode.children[destino].textContent;\r\n\t\t\t\tvar strDestino;\r\n\t\t\t\tif (_self.container.parentNode.parentNode != undefined){\r\n\t\t\t\t\tstrDestino = _self.container.parentNode.parentNode.children[destino].getAttribute('title_v');\r\n\t\t\t\t} else {\r\n\t\t\t\t\tstrDestino = _self.grid.html.tHead.rows[0].cells[destino].getAttribute('title_v')\r\n\t\t\t\t}\r\n\t\t\t\tfor (var i = 0; i < _self.grid.header.cells.length; i++) {\r\n\t\t\t\t\tif (_self.container.children[0].getAttribute('title_v') /*textContent*/ === _self.grid.header.cells[i].value.firstChild.textContent.replace(/\\u00A0/g, \" \")) {\r\n\t\t\t\t\t\ti1 = i; //pos on cell array\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (strDestino === _self.grid.header.cells[i].value.firstChild.textContent.replace(/\\u00A0/g, \" \")) {\r\n\t\t\t\t\t\ti2 = i;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t_self.grid.header.cells[i1].html.parentNode.insertBefore(_self.grid.header.cells[i2].html, _self.grid.header.cells[i1].html);\r\n\r\n\t\t\t\t\r\n\t\t\t\t\tOAT_JS.grid.gridData[_self.grid.UcId].redrawHeader = true;\r\n\t\t\t\t\tfor (var i = 0; i < _self.grid.rows.length; i++) {\r\n\t\t\t\t\t\t_self.grid.rows[i].cells[i1].html.parentNode.insertBefore(_self.grid.rows[i].cells[i2].html, _self.grid.rows[i].cells[i1].html);\r\n\t\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tvar dataFieldsPos = [];\r\n\t\t\t\tfor (var idF = 0; idF < jQuery(\"#\" + _self.grid.controlName).find(\"thead td\").length; idF++) {\r\n\t\t\t\t\tdataFieldsPos.push(jQuery(\"#\" + _self.grid.controlName).find(\"thead td\")[idF].getAttribute(\"dataField\"))\r\n\t\t\t\t}\r\n\t\t\t\tOAT_JS.grid.setDataFieldPosition(_self.grid.UcId, dataFieldsPos);\r\n\t\t\t\trefresh();\r\n\t\t\t});\r\n\r\n\r\n\t\t\tvar draglabelR = OAT.Dom.create(\"label\");\r\n\t\t\tOAT.addTextNode(draglabelR, self.translations.GXPL_QViewerJSMoveColumnToRight)//gx.getMessage(\"GXPL_QViewerJSMoveColumnToRight\"))\r\n\t\t\tdraglabelR.htmlFor = \"move_column_to_right\" + cached;\r\n\t\t\tdragDiv_R_sel_div.appendChild(draglabelR);\r\n\t\t\tOAT.Dom.append([dragDiv, dragDiv_R_sel_div]);\r\n\t\t\ttoAppend.push(dragDiv);\r\n\t\t}\r\n\t\t//end drag options\r\n\r\n\t\tif (OAT.gridStateChanged(_self)) {\r\n\r\n\t\t\tvar restoreview = OAT.Dom.create(\"div\");\r\n\t\t\tvar restoreview_sel_div = document.createElement(\"div\");\r\n\r\n\t\t\tOAT.Dom.attach(restoreview_sel_div, \"click\", function () {\r\n\t\t\t\tself.getDataForTable(_self.grid.UcId, 1, _self.grid.rowsPerPage, true, \"\", \"\", \"\", \"\", true)\r\n\t\t\t\trefresh()\r\n\t\t\t});\r\n\r\n\t\t\tvar rl = OAT.Dom.create(\"label\");\r\n\t\t\tOAT.addTextNode(rl, self.translations.GXPL_QViewerJSRestoreDefaultView);//gx.getMessage(\"GXPL_QViewerJSRestoreDefaultView\"))\r\n\t\t\trl.htmlFor = \"pivot_checkbox_restoreview\";\r\n\t\t\trestoreview_sel_div.appendChild(rl);\r\n\t\t\tOAT.Dom.append([restoreview, restoreview_sel_div]);\r\n\t\t\ttoAppend.push(restoreview);\r\n\t\t}\r\n\r\n\t\tvar distinct = OAT.Dom.create(\"div\");\r\n\t\tdistinct.setAttribute(\"class\", \"last_div_popup\");\r\n\t\tOAT.distinctDivs(_self, distinct);\r\n\t\ttoAppend.push(hr3);\r\n\r\n\t\ttoAppend.push(distinct);\r\n\r\n\r\n\t\tOAT.Dom.append(toAppend);\r\n\r\n\r\n\r\n\r\n\t\t//for smart device center pop-up\r\n\t\tif (_self.grid.isSD) {//android\r\n\t\t\tsetTimeout(function () {\r\n\r\n\t\t\t\tvar screenWidth = window.innerWidth;\r\n\t\t\t\tvar initialPopUpWidth = jQuery(\".oat_winrect_container\")[0].clientWidth\r\n\r\n\r\n\t\t\t\tif (initialPopUpWidth == 0) {\r\n\t\t\t\t\tvar last = jQuery(\".oat_winrect_container\").length;\r\n\t\t\t\t\tinitialPopUpWidth = jQuery(\".oat_winrect_container\")[last - 1].clientWidth\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\tif (initialPopUpWidth < 220) {\r\n\t\t\t\t\tinitialPopUpWidth = 220\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar padding = (screenWidth - initialPopUpWidth) / 2 + jQuery(window).scrollLeft()\r\n\r\n\t\t\t\tjQuery(\".oat_winrect_container\").css({ left: padding + \"px\", width: initialPopUpWidth + \"px\" })\r\n\r\n\r\n\t\t\t}, 50)\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tOAT.distinctDivs = function (_self, div) { /* set of distinct values checkboxes */\r\n\t\tvar colNumber = _self.grid.columns.length - 1 - _self.number;\r\n\t\tvar realColNumber = _self.container.parentNode.cellIndex; //the real position of the item click\r\n\t\r\n\t\t\tif (realColNumber > -1) {\r\n\t\t\t\tcolNumber = realColNumber\r\n\t\t\t} else {\r\n\t\t\t\tcolNumber = _self.number\r\n\t\t\t}\r\n\t\t\r\n\r\n\t\t//var colNumber = _self.grid.rows[0].cells.length - 1 - _self.number;\r\n\t\tvar getPair = function (text, id) {\r\n\t\t\tvar div = OAT.Dom.create(\"div\");\r\n\t\t\tvar ch = OAT.Dom.create(\"input\");\r\n\t\t\t//ch.type = \"checkbox\";\r\n\t\t\t//ch.id = id;\r\n\t\t\tvar t = OAT.Dom.create(\"label\");\r\n\r\n\t\t\tOAT.addTextNode(t, text)\r\n\t\t\tt.htmlFor = id;\r\n\t\t\t//div.appendChild(ch);\r\n\t\t\tdiv.appendChild(t);\r\n\t\t\treturn [div, ch];\r\n\t\t}\r\n\t\t\r\n\t\tvar getPairWithIcon = function (text, id, checked_value) {\r\n\t\t\tvar div = OAT.Dom.create(\"div\");\r\n\t\t\tvar ch = OAT.Dom.create(\"input\");\r\n\t\t\t//ch.type = \"checkbox\";\r\n\t\t\t//ch.id = id;\r\n\t\t\tvar t = OAT.Dom.create(\"label\");\r\n\r\n\t\t\tOAT.addTextNode(t, text)\r\n\t\t\tt.htmlFor = id;\r\n\t\t\t//div.appendChild(ch);\r\n\t\t\t\r\n\t\t\tOAT.addImageNode(div, checked_value ? \"check_box\" : \"check_box_outline_blank\", \"\");\r\n\t\t\t\r\n\t\t\tdiv.appendChild(t);\r\n\t\t\treturn [div, ch];\r\n\t\t}\r\n\r\n\t\tvar getRef = function (ch, value) {\r\n\t\t\treturn function () {\r\n\t\t\t\tif (ch.checked) {\r\n\t\t\t\t\tOAT.ShowGridRow(_self, colNumber, value);\r\n\t\t\t\t\tOAT.actualizeBlackList(\"pop\", _self.grid, colNumber, value, _self.grid.serverPaging);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tOAT.HideGridRow(_self, colNumber, value);\r\n\t\t\t\t\tOAT.actualizeBlackList(\"push\", _self.grid, colNumber, value, _self.grid.serverPaging);\r\n\t\t\t\t}\r\n\t\t\t\tOAT.onFilteredChangedEventHandle(_self, colNumber);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar getRefBool = function (checked, value) {\r\n\t\t\tvar oper = \"pop\";\r\n\t\t\tif (checked) {\r\n\r\n\t\t\t\tOAT.actualizeBlackList(\"pop\", _self.grid, colNumber, value, _self.grid.serverPaging);\r\n\t\t\t} else {\r\n\r\n\t\t\t\toper = \"push\";\r\n\t\t\t\tOAT.actualizeBlackList(\"push\", _self.grid, colNumber, value, _self.grid.serverPaging);\r\n\t\t\t}\r\n\r\n\t\t\t\r\n\t\t\t\tvar dataFieldId = OAT_JS.grid.gridData[_self.grid.UcId].columnDataField[colNumber];//_self.grid.columns[colNumber].getAttribute(\"dataField\")\r\n\t\t\t\tself.getDataForTable(_self.grid.UcId, 1, _self.grid.rowsPerPage, true, \"\", \"\", dataFieldId, { op: oper, values: value })\r\n\t\t\t\r\n\r\n\t\t\tOAT.onFilteredChangedEventHandle(_self, colNumber);\r\n\t\t}\r\n\r\n\t\tvar allRef = function () {\r\n\t\t\t\r\n\t\t\t\tvar dataFieldId = OAT_JS.grid.gridData[_self.grid.UcId].columnDataField[colNumber];\r\n\t\t\t\t//_self.grid.conditions[colNumber].blackList = [];\r\n\t\t\t\tself.getDataForTable(_self.grid.UcId, 1, _self.grid.rowsPerPage, true, \"\", \"\", dataFieldId, { op: \"all\", values: [] })\r\n\t\t\t\r\n\t\t\tOAT.onFilteredChangedEventHandle(_self, colNumber);\r\n\t\t\tOAT.distinctDivs(_self, div);\r\n\t\t}\r\n\r\n\t\tvar noneRef = function () {\r\n\t\t\t\r\n\t\t\t\tvar dataFieldId = OAT_JS.grid.gridData[_self.grid.UcId].columnDataField[colNumber];\r\n\t\t\t\tself.getDataForTable(_self.grid.UcId, 1, _self.grid.rowsPerPage, true, \"\", \"\", dataFieldId, { op: \"none\", values: [] })\r\n\t\t\t\r\n\r\n\t\t\tOAT.onFilteredChangedEventHandle(_self, colNumber);\r\n\t\t\tOAT.distinctDivs(_self, div);\r\n\t\t}\r\n\r\n\t\tvar reverseRef = function () {\r\n\t\t\t\r\n\t\t\t\tvar dataFieldId = OAT_JS.grid.gridData[_self.grid.UcId].columnDataField[colNumber];\r\n\t\t\t\tself.getDataForTable(_self.grid.UcId, 1, _self.grid.rowsPerPage, true, \"\", \"\", dataFieldId, { op: \"reverse\", values: [] })\r\n\t\t\t\r\n\r\n\t\t\tOAT.distinctDivs(_self, div);\r\n\t\t\tOAT.onFilteredChangedEventHandle(_self, colNumber);\r\n\t\t}\r\n\r\n\t\tvar searchFilterClick = function () {\r\n\t\t\tself.getValuesForColumn(_self.grid.UcId, colNumber, this.value)\r\n\t\t}\r\n\r\n\t\tOAT.Dom.clear(div);\r\n\t\tvar d = OAT.Dom.create(\"div\");\r\n\t\td.setAttribute(\"class\", \"div_buttons_popup\");\r\n\r\n\t\tvar all = document.createElement(\"button\");\r\n\t\tall.textContent = self.translations.GXPL_QViewerJSAll; //gx.getMessage(\"GXPL_QViewerJSAll\");\r\n\t\tall.setAttribute(\"class\", \"btn\");\r\n\t\tjQuery(all).click(allRef);\r\n\r\n\t\tvar none = document.createElement(\"button\");\r\n\t\tnone.textContent = self.translations.GXPL_QViewerJSNone; //gx.getMessage(\"GXPL_QViewerJSNone\");\r\n\t\tnone.setAttribute(\"class\", \"btn\");\r\n\t\tjQuery(none).click(noneRef);\r\n\r\n\t\tvar reverse = document.createElement(\"button\");\r\n\t\treverse.textContent = self.translations.GXPL_QViewerJSReverse; //gx.getMessage(\"GXPL_QViewerJSReverse\");\r\n\t\treverse.setAttribute(\"class\", \"btn\");\r\n\t\tjQuery(reverse).click(reverseRef);\r\n\r\n\t\tOAT.Dom.append([d, all, none, reverse], [div, d]);\r\n\r\n\t\tvar div_search = OAT.Dom.create(\"div\");\r\n\t\tdiv_search.setAttribute(\"class\", \"div_filter_input\");\r\n\t\tOAT.addImageNode(div_search, \"search\", \"\");\r\n\r\n\t\t\r\n\t\t\tvar searchInput = document.createElement(\"input\");\r\n\t\t\tsearchInput.textContent = \"none\";\r\n\t\t\tsearchInput.setAttribute(\"class\", \"search_input\");\r\n\t\t\tsearchInput.setAttribute(\"type\", \"text\");\r\n\t\t\tsearchInput.setAttribute(\"label\", self.translations.GXPL_QViewerSearch); //gx.getMessage(\"GXPL_QViewerSearch\"));\r\n\t\t\tsearchInput.setAttribute(\"title\", self.translations.GXPL_QViewerSearch);  \r\n\t\t\tsearchInput.setAttribute(\"placeholder\", self.translations.GXPL_QViewerSearch); \r\n\t\t\tsearchInput.setAttribute(\"id\", _self.grid.UcId + OAT_JS.grid.gridData[_self.grid.UcId].columnDataField[colNumber]);\r\n\t\t\tjQuery(searchInput).keyup(searchFilterClick);\r\n\r\n\t\t\tOAT.Dom.append([div_search, searchInput], [div, div_search]);\r\n\t\t\r\n\r\n\t\tvar fixHeigthDiv = OAT.Dom.create(\"div\");\r\n\r\n\r\n\t\t\tvar cantPairs = OAT_JS.grid.getCantDifferentValues(_self.grid.UcId, colNumber);\r\n\t\t\tfor (var i = 0; i < cantPairs; i++) {\r\n\t\t\t\tvar pairData = OAT_JS.grid.getDifferentValues(_self.grid.UcId, colNumber, i)\r\n\t\t\t\tif (pairData) {\r\n\t\t\t\t\tvar value = pairData.value;\r\n\t\t\t\t\tvar pict_value = pairData.pict_value;\r\n\t\t\t\t\tif ((pairData.value == \"#NuN#\") || (pict_value.trimpivot() == \"\")) {\r\n\t\t\t\t\t\tpict_value = pict_value + \"\\u00A0\"\r\n\t\t\t\t\t}\r\n\t\t\t\t\tpict_value = pict_value.replace(/\\&amp;/g, \"&\").replace(/\\u00A0/g, \" \")\r\n\t\t\t\t\tif (pict_value.length > 33) {\r\n\t\t\t\t\t\tvar resto = (pict_value.substring(32, pict_value.length).trimpivot().length > 0) ? '...' : '';\r\n\t\t\t\t\t\tpict_value = pict_value.substring(0, 32) + resto\r\n\t\t\t\t\t}\r\n\t\t\t\t\tpict_value = pict_value.replace(/ /g, \"\\u00A0\") + '\\u00A0\\u00A0\\u00A0\\u00A0\\u00A0'\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar checked_value = pairData.checked;\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar pair = getPairWithIcon(pict_value, \"pivot_distinct_\" + i, checked_value);\r\n\t\t\t\t\tpair[0].setAttribute('value', value);\r\n\t\t\t\t\tfixHeigthDiv.appendChild(pair[0]);\r\n\r\n\t\t\t\t\tvar class_check_div = (checked_value) ? \"check_item_img\" : \"uncheck_item_img\";\r\n\t\t\t\t\tif (_self.grid.isSD) {//android\r\n\t\t\t\t\t\tvar class_check_div = (checked_value) ? \"check_item_img_small\" : \"uncheck_item_img_small\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\tpair[0].setAttribute(\"class\", class_check_div);\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\tOAT.Dom.attach(pair[0], \"click\", function () {\r\n\t\t\t\t\t\tvar checkedClass = \"check_item_img\"\r\n\t\t\t\t\t\tvar unCheckedClass = \"uncheck_item_img\"\r\n\t\t\t\t\t\tif (_self.grid.isSD) {//android\r\n\t\t\t\t\t\t\tcheckedClass = \"check_item_img_small\"\r\n\t\t\t\t\t\t\tunCheckedClass = \"uncheck_item_img_small\"\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar checked = !(this.getAttribute(\"class\") === checkedClass);\r\n\t\t\t\t\t\tvar newClass = (this.getAttribute(\"class\") === checkedClass) ? unCheckedClass : checkedClass;\r\n\t\t\t\t\t\tthis.setAttribute(\"class\", newClass);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tjQuery(this).find(\"i\")[0].textContent = checked ? \"check_box\" : \"check_box_outline_blank\";\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tgetRefBool(checked, this.getAttribute(\"value\"));\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (OAT_JS.grid.getCantDifferentValues(_self.grid.UcId, colNumber) <= 9) {\r\n\t\t\t\tfixHeigthDiv.setAttribute(\"class\", \"pivot_popup_auto\");\r\n\t\t\t} else {\r\n\t\t\t\tfixHeigthDiv.setAttribute(\"class\", \"pivot_popup_fix\");\r\n\t\t\t}\r\n\t\t\tfixHeigthDiv.setAttribute(\"ucid\", _self.grid.UcId);\r\n\t\t\tfixHeigthDiv.setAttribute(\"columnnumber\", colNumber);\r\n\t\t\tfixHeigthDiv.setAttribute(\"id\", \"values_\" + _self.grid.UcId + \"_\" + OAT_JS.grid.gridData[_self.grid.UcId].columnDataField[colNumber])//_self.grid.UcId + \"_\" + colNumber)\r\n\t\t\r\n\r\n\r\n\t\tdiv.appendChild(fixHeigthDiv);\r\n\t}\r\n\r\n\r\n\tOAT.appendNewPairToPopUp = function (_self, value, colNumber, checked, pict_value, dataField) {\r\n\t\tvar getPair = function (text, id) {\r\n\t\t\tvar div = OAT.Dom.create(\"div\");\r\n\t\t\tvar ch = OAT.Dom.create(\"input\");\r\n\t\t\tvar t = OAT.Dom.create(\"label\");\r\n\t\t\tOAT.addTextNode(t, text)\r\n\t\t\tt.htmlFor = id;\r\n\t\t\tdiv.appendChild(t);\r\n\t\t\treturn [div, ch];\r\n\t\t}\r\n\t\t\r\n\t\tvar getPairWithIcon = function (text, id, checked_value) {\r\n\t\t\tvar div = OAT.Dom.create(\"div\");\r\n\t\t\tvar ch = OAT.Dom.create(\"input\");\r\n\t\t\tvar t = OAT.Dom.create(\"label\");\r\n\t\t\tOAT.addTextNode(t, text)\r\n\t\t\tt.htmlFor = id;\r\n\t\t\tOAT.addImageNode(div, checked_value ? \"check_box\" : \"check_box_outline_blank\", \"\");\r\n\t\t\tdiv.appendChild(t);\r\n\t\t\treturn [div, ch];\r\n\t\t}\r\n\r\n\t\tvar getRefBool = function (checked, value) {\r\n\t\t\tvar oper = \"pop\";\r\n\t\t\tif (!checked) {\r\n\t\t\t\toper = \"push\";\r\n\t\t\t}\r\n\t\t\tvar filteredValues = _self.grid.conditions[colNumber].blackList\r\n\t\t\tself.getDataForTable(_self.grid.UcId, 1, _self.grid.rowsPerPage, true, \"\", \"\", dataField, { op: oper, values: value })\r\n\r\n\t\t\tOAT.onFilteredChangedEventHandle(_self, colNumber);\r\n\t\t}\r\n\r\n\t\tvar pict_value = pict_value;\r\n\t\tif (value == \"#NuN#\") {\r\n\t\t\tpict_value = \"\\u00A0\"\r\n\t\t}\r\n\t\tpict_value = pict_value.replace(/\\&amp;/g, \"&\").replace(/\\u00A0/g, \" \")\r\n\t\tif (pict_value.length > 33) {\r\n\t\t\tvar resto = (pict_value.substring(32, pict_value.length).trimpivot().length > 0) ? '...' : '';\r\n\t\t\tpict_value = pict_value.substring(0, 32) + resto\r\n\t\t}\r\n\t\tpict_value = pict_value.replace(/ /g, \"\\u00A0\") + '\\u00A0\\u00A0\\u00A0\\u00A0\\u00A0'\r\n\t\tvar pair = getPairWithIcon(pict_value, \"pivot_distinct_\" + i, checked);\r\n\t\tpair[0].setAttribute('value', value);\r\n\t\tvar fixHeigthDiv = jQuery(\"#values_\" + _self.grid.UcId + \"_\" + dataField)[0]//colNumber)[0]\r\n\t\tfixHeigthDiv.appendChild(pair[0]);\r\n\r\n\t\tvar checked_value = checked;\r\n\t\tvar class_check_div = (checked_value) ? \"check_item_img\" : \"uncheck_item_img\";\r\n\t\tif (_self.grid.isSD) {//android\r\n\t\t\tvar class_check_div = (checked_value) ? \"check_item_img_small\" : \"uncheck_item_img_small\";\r\n\t\t}\r\n\t\tpair[0].setAttribute(\"class\", class_check_div);\r\n\r\n\t\tOAT.Dom.attach(pair[0], \"click\", function () {\r\n\t\t\tvar checkedClass = \"check_item_img\"\r\n\t\t\tvar unCheckedClass = \"uncheck_item_img\"\r\n\t\t\tif (_self.grid.isSD) {//android\r\n\t\t\t\tcheckedClass = \"check_item_img_small\"\r\n\t\t\t\tunCheckedClass = \"uncheck_item_img_small\"\r\n\t\t\t}\r\n\t\t\tvar checked = !(this.getAttribute(\"class\") === checkedClass);\r\n\t\t\tvar newClass = (this.getAttribute(\"class\") === checkedClass) ? unCheckedClass : checkedClass;\r\n\t\t\t\r\n\t\t\tjQuery(this).find(\"i\")[0].textContent = checked ? \"check_box\" : \"check_box_outline_blank\";\r\n\t\t\t\r\n\t\t\tthis.setAttribute(\"class\", newClass);\r\n\t\t\tgetRefBool(checked, this.getAttribute(\"value\"));\r\n\t\t});\r\n\r\n\t}\r\n\r\n\tOAT.removeAllPairsFromPopUp = function (_self, colNumber, withScroll) {\r\n\t\tvar checkedClass = \"check_item_img\"\r\n\t\tvar unCheckedClass = \"uncheck_item_img\"\r\n\t\tif (_self.grid.isSD) { //android\r\n\t\t\tcheckedClass = \"check_item_img_small\"\r\n\t\t\tunCheckedClass = \"uncheck_item_img_small\"\r\n\t\t}\r\n\r\n\t\tjQuery(\"#values_\" + _self.grid.UcId + \"_\" + OAT_JS.grid.gridData[_self.grid.UcId].columnDataField[colNumber]).find(\".\" + checkedClass).remove()\r\n\t\tjQuery(\"#values_\" + _self.grid.UcId + \"_\" + OAT_JS.grid.gridData[_self.grid.UcId].columnDataField[colNumber]).find(\".\" + unCheckedClass).remove()\r\n\r\n\t\tjQuery(\".last_div_popup .\" + checkedClass).remove()\r\n\t\tjQuery(\".last_div_popup .\" + unCheckedClass).remove()\r\n\r\n\t\t//set class of pairs container\r\n\t\tif (withScroll) {\r\n\t\t\tjQuery(\"#values_\" + _self.grid.UcId + \"_\" + OAT_JS.grid.gridData[_self.grid.UcId].columnDataField[colNumber]).removeClass(\"pivot_popup_auto\");\r\n\t\t\tjQuery(\"#values_\" + _self.grid.UcId + \"_\" + OAT_JS.grid.gridData[_self.grid.UcId].columnDataField[colNumber]).addClass(\"pivot_popup_fix\");\r\n\t\t} else {\r\n\t\t\tjQuery(\"#values_\" + _self.grid.UcId + \"_\" + OAT_JS.grid.gridData[_self.grid.UcId].columnDataField[colNumber]).removeClass(\"pivot_popup_fix\");\r\n\t\t\tjQuery(\"#values_\" + _self.grid.UcId + \"_\" + OAT_JS.grid.gridData[_self.grid.UcId].columnDataField[colNumber]).addClass(\"pivot_popup_auto\");\r\n\t\t}\r\n\t}\r\n\t/* statefull Rutines */\r\n\tOAT.onFilteredChangedEventHandle = function (self, dimensionNumber) {\r\n\r\n\t\t\t\r\n\t\t\tvar dimensionDataField = self.dataField\r\n\t\t\t\r\n\t\t\tvar columnNumber = dimensionNumber\r\n\t\t\tfor(var col=0; col < self.grid.columns.length; col++)\r\n\t\t\t{\r\n\t\t\t\tif (dimensionDataField == self.grid.columns[col].getAttribute(\"dataField\"))\r\n\t\t\t\t\tcolumnNumber = col;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn OAT_JS.grid.setFilterChangedWhenServerPagination(self.grid.UcId, self.grid.columns[columnNumber]);\r\n\r\n\t}\r\n\r\n\tOAT.setClickEventHandlers = function (self, td, itemValue, MeasureOrDimension, dimensionNumber, itemData) {\r\n\t\tvar span = jQuery(td).find(\"#span_txt_pivot\")[0];\r\n\t\tif (span) {\r\n\t\t\tjQuery(td).data('itemValue', itemValue);\r\n\t\t\tjQuery(td).data('numberMorD', dimensionNumber);\r\n\t\t\tjQuery(td).data('itemInfo', itemData);\r\n\t\t\t\r\n\t\t\tjQuery(span).data('itemValue', itemValue);\r\n\t\t\tjQuery(span).data('typeMorD', MeasureOrDimension);\r\n\t\t\tjQuery(span).data('numberMorD', dimensionNumber);\r\n\t\t\tjQuery(span).data('itemInfo', itemData);\r\n\t\t\tvar qViewer = self.grid.QueryViewerCollection[self.grid.IdForQueryViewerCollection];\r\n\t\t\t\r\n\t\t\tvar RaiseItemClick = true;\r\n\t\t\tfor (var iT = 0; iT < qViewer.Metadata.Axes.length; iT++){\r\n\t\t\t\tif (self.grid.TableDataFilds[dimensionNumber] == qViewer.Metadata.Axes[iT].DataField)\r\n\t\t\t\t{\r\n\t\t\t\t\tRaiseItemClick = qViewer.Metadata.Axes[iT].RaiseItemClick\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfor (var iT = 0; iT < qViewer.Metadata.Data.length; iT++){\r\n\t\t\t\tif (self.grid.TableDataFilds[dimensionNumber] == qViewer.Metadata.Data[iT].DataField)\r\n\t\t\t\t{\r\n\t\t\t\t\tRaiseItemClick = qViewer.Metadata.Data[iT].RaiseItemClick\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tif (qViewer.ItemClick && RaiseItemClick){//qViewer.Metadata.Axes[dimensionNumber].RaiseItemClick) {\r\n\t\t\t\tspan.onclick = function () { \r\n\t\t\t\t\t\tOAT.onClickEventHandle(self, this); \r\n\t\t\t\t\t\tif (OAT_JS.grid.gridData[self.grid.UcId].selection.Allow){ \r\n\t\t\t\t\t\t\tOAT.onClickSelectNode(td, self);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\tspan.classList.add(\"gx-qv-clickable-element\");\r\n\t\t\t} else if (OAT_JS.grid.gridData[self.grid.UcId].selection.Allow){ \r\n\t\t\t\tspan.onclick = function () { OAT.onClickSelectNode(td, self); }\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tvar alreadyclicked = false;\r\n\tvar alreadyclickedTimeout;\r\n\tOAT.onClickEventHandle = function (self, elemvalue) {\r\n\t\tvar datastr = OAT.PreClickHandle(self, elemvalue);\r\n\t\t\r\n\t\t//qv.pivot.onItemClickEvent(self.grid.QueryViewerCollection[spl], datastr, false);\r\n\t\t/*if (alreadyclicked) {\r\n\t\t\t//double click\r\n\t\t\talreadyclicked = false;\r\n\t\t\tclearTimeout(alreadyclickedTimeout);\r\n\t\t\tvar datastr = OAT.ClickHandle(self, elemvalue);\r\n\t\t\tvar spl = self.grid.IdForQueryViewerCollection\r\n\t\t\tqv.pivot.onItemClickEvent(self.grid.QueryViewerCollection[spl], datastr, true)\r\n\t\t} else {\r\n\t\t\tvar delay = 300\r\n\t\t\tif (self.grid.QueryViewerCollection[self.grid.IdForQueryViewerCollection].ItemDoubleClick == undefined) {\r\n\t\t\t\tdelay = 0\r\n\t\t\t}\r\n\t\t\talreadyclicked = true;\r\n\t\t\talreadyclickedTimeout = setTimeout(function () {\r\n\t\t\t\talreadyclicked = false;\r\n\t\t\t\t//single click\r\n\t\t\t\tvar datastr = OAT.ClickHandle(self, elemvalue);\r\n\t\t\t\tvar spl = self.grid.IdForQueryViewerCollection;\r\n\t\t\t\tqv.pivot.onItemClickEvent(self.grid.QueryViewerCollection[spl], datastr, false);\r\n\t\t\t}, delay);\r\n\t\t}*/\r\n\t}\r\n\t\r\n\t\r\n\t/*OAT.onDblClickEventHandle = function (self, elemvalue) {\r\n\t\tvar datastr = OAT.ClickHandle(self, elemvalue);\r\n\t\tvar spl = self.grid.IdForQueryViewerCollection //self.grid.controlName.toUpperCase().split(\"_\")[0] + \"_\" + self.grid.controlName.split(\"_\")[0];\r\n\t\tqv.pivot.onItemClickEvent(self.grid.QueryViewerCollection[spl], datastr, true);\r\n\t}*/\r\n\r\n\tOAT.PreClickHandle = function (self, elemvalue) {\r\n\t\t//if (self.grid.HideDataFilds.length) {\r\n\t\t\tOAT_JS.grid.lastCallData = { \"self\": self, \"elemvalue\": elemvalue }\r\n\t\t\tif (self.grid.HideDataFilds.length) {\r\n\t\t\t\tOAT_JS.grid.requestDataSynForTable(self.grid.IdForQueryViewerCollection)\r\n\t\t\t} else {\r\n\t\t\t\tOAT.ClickHandle(self, elemvalue);\r\n\t\t\t}\t\r\n\t\t//}\r\n\t}\r\n\r\n\tOAT.ClickHandle = function (self, elemvalue, dataSync) {\r\n\t\tif (self.grid.HideDataFilds.length) {\r\n\t\t\tvar spl = self.grid.IdForQueryViewerCollection\r\n\t\t\tvar temp = dataSync //self.grid.QueryViewerCollection[spl].getPivottableDataSync();\r\n\r\n\t\t\tself.grid.allRowsPivot = []\r\n\t\t\tself.grid.allFullRowsPivot = []\r\n\t\t\tvar stringRecord = temp.split(\"<Record>\")\r\n\t\t\tfor (var i = 1; i < stringRecord.length; i++) {\r\n\t\t\t\tvar recordData = [];\r\n\t\t\t\tvar fullRecordData = [];\r\n\t\t\t\tfor (var j = 0; j < self.grid.TableDataFilds.length; j++) {\r\n\t\t\t\t\trecordData[j] = \"#NuN#\"\r\n\t\t\t\t\tvar dt = stringRecord[i].split(\"<\" + self.grid.TableDataFilds[j] + \">\")\r\n\t\t\t\t\tif (dt.length > 1) {\r\n\t\t\t\t\t\tvar at = dt[1].split(\"</\" + self.grid.TableDataFilds[j] + \">\")\r\n\t\t\t\t\t\trecordData[j] = at[0]\r\n\t\t\t\t\t\tfullRecordData[j] = recordData[j]\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (stringRecord[i].indexOf(\"<\" + self.grid.TableDataFilds[j] + \"/>\") >= 0) {\r\n\t\t\t\t\t\t\trecordData[j] = \"\"\r\n\t\t\t\t\t\t\tfullRecordData[j] = \"\"\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\trecordData[j] = \"#NuN#\"\r\n\t\t\t\t\t\t\tfullRecordData[j] = \"#NuN#\"\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tself.grid.allRowsPivot.push(recordData);\r\n\r\n\t\t\t\t//add hide columns values\r\n\t\t\t\tfor (var j = 0; j < self.grid.HideDataFilds.length; j++) {\r\n\t\t\t\t\tvar dt = stringRecord[i].split(\"<\" + self.grid.HideDataFilds[j] + \">\")\r\n\t\t\t\t\tif (dt.length > 1) {\r\n\t\t\t\t\t\tvar at = dt[1].split(\"</\" + self.grid.HideDataFilds[j] + \">\")\r\n\t\t\t\t\t\tfullRecordData[fullRecordData.length + j] = at[0]\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (stringRecord[i].indexOf(\"<\" + self.grid.HideDataFilds[j] + \"/>\") >= 0) {\r\n\t\t\t\t\t\t\tfullRecordData[fullRecordData.length + j] = \"\"\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tfullRecordData[fullRecordData.length + j]  = \"#NuN#\"\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tself.grid.allFullRowsPivot.push(fullRecordData);\r\n\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar pseudoRow = []\r\n\r\n\t\tvar value = jQuery(elemvalue).data('itemValue');\r\n\t\tvar type = jQuery(elemvalue).data('typeMorD');\r\n\t\tvar number = jQuery(elemvalue).data('numberMorD');\r\n\t\tvar columnNumber = jQuery(elemvalue).data('itemInfo');\r\n\t\tvar selected = OAT.IsNodeSelected(self.cells[number].html);\r\n\t\tvar datastr = \"<DATA><ITEM type=\\\"\" + type + \"\\\" \";\r\n\t\t\r\n\t\tdatastr = datastr + \"name=\\\"\" + self.grid.columns[number].getAttribute(\"name\") + \"\\\" \";\r\n\t\tdatastr = datastr + \"displayName=\\\"\" + self.grid.columns[number].getAttribute(\"displayName\") + \"\\\" \";\r\n\t\tdatastr = datastr + \"selected=\\\"\" + selected.toString() + \"\\\" \";\r\n\t\tdatastr = datastr + \"location=\\\"rows\\\">\"\r\n\t\tdatastr = datastr + value\r\n\r\n\r\n\t\tdatastr = datastr + \"</ITEM>\";\r\n\r\n\t\tdatastr = datastr + \"<CONTEXT>\";\r\n\t\tdatastr = datastr + \"<RELATED>\";\r\n\t\tfor (var i = 0; i < self.grid.rows[columnNumber].cells.length; i++) {\r\n\t\t\tdatastr = datastr + \"<ITEM name=\\\"\" + self.grid.columns[i].getAttribute(\"name\") + \"\\\">\";\r\n\t\t\tdatastr = datastr + \"<VALUES\";\r\n\t\t\tvar existNullValue = false;\r\n\t\t\tvar stringValues = \"\";\r\n\t\t\t\r\n\t\t\tif (self.grid.rows[columnNumber].cells[i].options.value != \"#NuN#\"){\r\n\t\t\t\tstringValues = stringValues + \"<VALUE>\" + self.grid.rows[columnNumber].cells[i].options.value + \"</VALUE>\";\r\n\t\t\t} else {\r\n\t\t\t\texistNullValue = true\r\n\t\t\t}\r\n\t\t\tpseudoRow.push(self.grid.rows[columnNumber].cells[i].options.value)\r\n\t\t\t\r\n\t\t\tif (existNullValue){\r\n\t\t\t\tdatastr = datastr + \" Null=\\\"true\\\"\"\r\n\t\t\t}\r\n\t\t\tdatastr = datastr + \">\" + stringValues \r\n\t\t\tdatastr = datastr + \"</VALUES>\";\r\n\t\t\tdatastr = datastr + \"</ITEM>\";\r\n\t\t}\r\n\t\tif (self.grid.HideDataFilds.length) {\r\n\t\t\tvar coinc = function (row1, row2) {\r\n\t\t\t\tfor (var o = 0; o < row1.length; o++) {\r\n\t\t\t\t\tif ((row1[o] != undefined) && (row1[o] != row2[o])) {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tfor (var r = 0; r < self.grid.allFullRowsPivot.length; r++) {\r\n\t\t\t\tif (coinc(pseudoRow, self.grid.allFullRowsPivot[r])) {\r\n\t\t\t\t\tfor (var h = 0; h < self.grid.HideDataFilds.length; h++) {\r\n\t\t\t\t\t\tdatastr = datastr + \"<ITEM name=\\\"\" + self.grid.OrderFildsHidden[h] + \"\\\">\";\r\n\t\t\t\t\t\tdatastr = datastr + \"<VALUES\";\r\n\t\t\t\t\t\tvar existNullValue = false;\r\n\t\t\t\t\t\tvar stringValues = \"\";\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (self.grid.rows[columnNumber].cells[i].options.value != \"#NuN#\"){\r\n\t\t\t\t\t\t\tstringValues = stringValues + \"<VALUE>\" + self.grid.allFullRowsPivot[r][h + self.grid.rows[columnNumber].cells.length] + \"</VALUE>\";\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\texistNullValue = true\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (existNullValue){\r\n\t\t\t\t\t\t\tdatastr = datastr + \" Null=\\\"true\\\"\"\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tdatastr = datastr + \">\" + stringValues \r\n\t\t\t\t\t\tdatastr = datastr + \"</VALUES>\";\r\n\t\t\t\t\t\tdatastr = datastr + \"</ITEM>\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\tdatastr = datastr + \"</RELATED>\";\r\n\t\tdatastr = datastr + \"<FILTERS>\";\r\n\t\tdatastr = datastr + \"</FILTERS>\";\r\n\t\tdatastr = datastr + \"</CONTEXT>\";\r\n\r\n\t\tdatastr = datastr + \"</DATA>\"\r\n\r\n\r\n\t\tvar spl = self.grid.IdForQueryViewerCollection;\r\n\t\tOAT_JS.grid.fireOnItemClickEvent(self.grid.QueryViewerCollection[spl], datastr, false)\r\n\t\t//return datastr;\r\n\t}\r\n\r\n\tOAT.onClickSelectNode = function (elemvalue, self) {\r\n\t\t \r\n\t\tvar value = jQuery(elemvalue).data('itemValue');\r\n\t\tvar number = jQuery(elemvalue).data('numberMorD');\r\n\t\tvar rowNumber = jQuery(elemvalue).data('itemInfo');\r\n\t\t\r\n\t\tvar colNumber = OAT_JS.grid.gridData[self.grid.UcId].columnDataField.indexOf(self.grid.TableDataFilds[number]);\r\n\t\t\r\n\t\tif (OAT_JS.grid.gridData[self.grid.UcId].selection.Allow){ \r\n\t\t\tOAT.SelectNodes(self, value, false, colNumber, rowNumber);\r\n\t\t}\r\n\t\t\t\r\n\t}\r\n\r\n\r\n\tOAT.SelectNodes = function(self, value, isRefresh, colNumber, rowNumber, selectedItemNumber, conditions) {\r\n\t\tif (rowNumber >= 0) {\r\n\r\n\t\t\tvar row = jQuery(\"#\" + self.grid.controlName + \" tbody\").find(\"tr\")[rowNumber];\r\n\r\n\t\t\tif (OAT.IsNodeSelected(jQuery(row).find(\"td\")[colNumber])) {\r\n\t\t\t\tOAT.ClearSelectedNodes(jQuery(self.grid.html));\r\n\t\t\t\tOAT_JS.grid.gridData[self.grid.UcId].selection.SelectedNode = [];\r\n\t\t\t} else {\r\n\r\n\t\t\t\tif (!isRefresh) {\r\n\t\t\t\t\tOAT.SetSelectedNodeBackgroundColor(jQuery(row).find(\"td\")[colNumber], self.grid.selection.Color, jQuery(self.grid.html))\r\n\r\n\t\t\t\t\t//save selected node\r\n\t\t\t\t\tOAT_JS.grid.gridData[self.grid.UcId].selection.SelectedNode = []\r\n\t\t\t\t\tOAT_JS.grid.gridData[self.grid.UcId].selection.SelectedNode[0] = {\r\n\t\t\t\t\t\tvalue : value,\r\n\t\t\t\t\t\tdataField : OAT_JS.grid.gridData[self.grid.UcId].columnDataField[colNumber],\r\n\t\t\t\t\t\trowData : [OAT_JS.grid.gridData[self.grid.UcId].rowsData[rowNumber]],\r\n\t\t\t\t\t\tclicked : true\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tOAT.SetNodeBackgroundColor(jQuery(row).find(\"td\")[colNumber], self.grid.selection.Color);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (OAT_JS.grid.gridData[self.grid.UcId].selection.EntireLine) {\r\n\t\t\t\t\tfor (var t = 0; t < self.grid.rows[rowNumber].cells.length; t++) {\r\n\t\t\t\t\t\tif (t != colNumber) {\r\n\t\t\t\t\t\t\tOAT.SetNodeBackgroundColor(jQuery(row).find(\"td\")[t], OAT_JS.grid.gridData[self.grid.UcId].selection.Color)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else {\r\n\r\n\t\t\t//search for row\r\n\t\t\tif (!isRefresh)\r\n\t\t\t\tOAT_JS.grid.gridData[self.grid.UcId].selection.SelectedNode[selectedItemNumber] = {\r\n\t\t\t\t\tvalue : value,\r\n\t\t\t\t\tdataField : OAT_JS.grid.gridData[self.grid.UcId].columnDataField[colNumber],\r\n\t\t\t\t\trowData : [],\r\n\t\t\t\t\tclicked : false,\r\n\t\t\t\t\tconditions : conditions\r\n\t\t\t\t}\r\n\r\n\t\t\tfor (var i = 0; i < jQuery(\"#\" + self.grid.controlName + \" tbody\").find(\"tr\").length; i++) {\r\n\r\n\t\t\t\tvar dataType = self.grid.columnsDataType[ self.grid.TableDataFilds.indexOf(OAT_JS.grid.gridData[self.grid.UcId].columnDataField[colNumber])];\r\n\r\n\t\t\t\tvar cellValue = OAT_JS.grid.gridData[self.grid.UcId].rowsData[i][self.grid.TableDataFilds.indexOf(OAT_JS.grid.gridData[self.grid.UcId].columnDataField[colNumber])];\r\n\t\t\t\tvar sameValue = false;\r\n\r\n\t\t\t\tif ((dataType == \"real\") || (dataType == \"integer\")) {\r\n\t\t\t\t\tsameValue = (parseFloat(value) == cellValue);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsameValue = (cellValue.trim() == value.trim());\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (sameValue) {\r\n\t\t\t\t\t//check all conditions\r\n\t\t\t\t\tif (OAT.checkConditions(self, OAT_JS.grid.gridData[self.grid.UcId].rowsData[i], conditions)) {\r\n\t\t\t\t\t\tvar row = jQuery(\"#\" + self.grid.controlName + \" tbody\").find(\"tr\")[i];\r\n\r\n\t\t\t\t\t\tOAT.SetNodeBackgroundColor(jQuery(row).find(\"td\")[colNumber], self.grid.selection.Color, jQuery(self.grid.html))\r\n\t\t\t\t\t\t//save selected node\r\n\t\t\t\t\t\tOAT_JS.grid.gridData[self.grid.UcId].selection.SelectedNode[selectedItemNumber].rowData.push(OAT_JS.grid.gridData[self.grid.UcId].rowsData[i]);\r\n\r\n\t\t\t\t\t\tif (OAT_JS.grid.gridData[self.grid.UcId].selection.EntireLine) {\r\n\t\t\t\t\t\t\tfor (var t = 0; t < self.grid.rows[i].cells.length; t++) {\r\n\t\t\t\t\t\t\t\tif (t != colNumber) {\r\n\t\t\t\t\t\t\t\t\tOAT.SetNodeBackgroundColor(jQuery(row).find(\"td\")[t], OAT_JS.grid.gridData[self.grid.UcId].selection.Color)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tOAT.checkConditions = function(self, rowData, conditions){\r\n\t\tvar sameRow = true;\r\n\t\t\r\n\t\tfor(var s = 0; s < conditions.length; s++){\r\n\t\t\tvar colNumber = OAT_JS.grid.gridData[self.grid.UcId].columnDataField.indexOf(conditions[s].DataField);\r\n\t\t\tvar dataType = self.grid.columnsDataType[ self.grid.TableDataFilds.indexOf(OAT_JS.grid.gridData[self.grid.UcId].columnDataField[colNumber])];\r\n\t\t\tvar sameValue = true;\r\n\t\t\tif ((dataType == \"real\") || (dataType == \"integer\")) {\r\n\t\t\t\tsameValue = (parseFloat(conditions[s].Value) == parseFloat(rowData[colNumber]));\r\n\t\t\t} else {\r\n\t\t\t\tsameValue = (conditions[s].Value.trim() == rowData[colNumber].trim());\r\n\t\t\t}\r\n\t\t\tif (!sameValue){\r\n\t\t\t\treturn false;\r\n\t\t\t}\t\t\r\n\t\t}\r\n\t\t\r\n\t\treturn sameRow;\r\n\t}\r\n\t\r\n\tOAT.RedrawSelectedNode = function(grid){\r\n\t\tif (OAT_JS.grid.gridData[grid.UcId].selection.SelectedNode) {\r\n\t\t\tOAT.ClearSelectedNodes(jQuery(grid.html));\r\n\t\t\t\r\n\t\t\tfor (var s = 0; s < OAT_JS.grid.gridData[grid.UcId].selection.SelectedNode.length; s++) {\r\n\t\t\t\r\n\t\t\t\tif (OAT_JS.grid.gridData[grid.UcId].selection.SelectedNode[s].clicked){\r\n\t\t\t\t\t//search for row\r\n\t\t\t\t\tfor (var r = 0; r < OAT_JS.grid.gridData[grid.UcId].selection.SelectedNode[s].rowData.length; r++){\r\n\t\t\t\t\t\tvar selectedRow = OAT_JS.grid.gridData[grid.UcId].selection.SelectedNode[s].rowData[r];\r\n\t\t\t\t\t\tfor (var i = 0; i < OAT_JS.grid.gridData[grid.UcId].rowsData.length; i++){\r\n\t\t\t\t\t\t\tvar sameRow = true;\r\n\t\t\t\t\t\t\tfor (var j = 0; j < OAT_JS.grid.gridData[grid.UcId].rowsData[i].length; j++)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tif (OAT_JS.grid.gridData[grid.UcId].rowsData[i][j] != selectedRow[j])\r\n\t\t\t\t\t\t\t\t\tsameRow = false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\t\t\tif (sameRow)\r\n\t\t\t\t\t\t\t\tOAT.SelectNodes({grid: grid}, OAT_JS.grid.gridData[grid.UcId].selection.SelectedNode[s].value, true, OAT_JS.grid.gridData[self.UcId].columnDataField.indexOf(OAT_JS.grid.gridData[grid.UcId].selection.SelectedNode[s].dataField), i)\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\r\n\t\t\t\t\tOAT.SelectNodes({grid: grid}, OAT_JS.grid.gridData[grid.UcId].selection.SelectedNode[s].value, true, OAT_JS.grid.gridData[self.UcId].columnDataField.indexOf(OAT_JS.grid.gridData[grid.UcId].selection.SelectedNode[s].dataField), -1, s, OAT_JS.grid.gridData[grid.UcId].selection.SelectedNode[s].conditions);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tOAT.gridStateChanged = function (self) { //true is state changed\r\n\t\t\r\n\t\treturn OAT_JS.grid.getStateChange(self.grid.UcId)\r\n\t\t\r\n\t}\r\n\r\n\tOAT.createXMLDimensionInfo = function (self, iCV) {\r\n\t\treturn  '<name>' + self.columns[iCV].getAttribute(\"name\") + '</name> '\r\n\t\t\t\t+ '<displayName>' + self.columns[iCV].getAttribute(\"displayName\") + '</displayName> '\r\n\t\t \t\t+ '<description>' + self.columns[iCV].getAttribute(\"description\") + '</description> '\r\n\t\t\t\t+ '<dataField>' + self.columns[iCV].getAttribute(\"dataField\") + '</dataField> '\r\n\t\t \t\t+ '<dataType>' + self.columns[iCV].getAttribute(\"dataType\") + '</dataType> '\r\n\t\t \t\t+ '<summarize>' + self.columns[iCV].getAttribute(\"summarize\") + '</summarize> '\r\n\t\t\t\t+ '<align>' + self.columns[iCV].getAttribute(\"align\") + '</align> '\r\n\t\t\t \t+ '<axis>' + self.columns[iCV].getAttribute(\"axis\") + '</axis> ';\r\n\t}\r\n\t\r\n\tOAT.createXMLMetadata = function (self, columnNumber, serverPagination) {\r\n\r\n\t\tvar xml = '<OLAPCube format=\"' + \"compact\" + '\" thousandsSeparator=\"' + \",\" + '\" decimalSeparator=\"' + \".\" + '\" dateFormat=\"' + \"MDY\" + '\">';\r\n\r\n\t\tfor (var iC = 0; iC <= self.grid.columns.length - 1; iC++) {\r\n\t\t\tvar iCV = iC;\r\n\t\t\t\r\n\t\t\txml = xml + '<OLAPDimension> ';\r\n\t\t\t\r\n\t\t\txml = xml + OAT.createXMLDimensionInfo(self.grid, iCV);\r\n\t\t\t\r\n\t\t\tvar posHeader = 0\r\n\t\t\tfor(var pH = 0; pH < self.grid.header.cells.length; pH++){\r\n\t\t\t\tif (self.grid.header.cells[pH].dataField == self.grid.columns[iCV].getAttribute(\"dataField\")){\r\n\t\t\t\t\tposHeader = pH\r\n\t\t\t\t}\t\t\t\t\r\n\t\t\t}\r\n\t\t\tif (self.grid.header.cells[posHeader].html.style.display == \"none\") {\r\n\t\t\t\txml = xml + '<hidden>true</hidden>'\r\n\t\t\t}\r\n\r\n\t\t\tif (self.grid.columns[iCV].getAttribute(\"picture\") === \"\") {\r\n\t\t\t\txml = xml + '<picture/> '\r\n\t\t\t} else {\r\n\t\t\t\txml = xml + '<picture>' + self.grid.columns[iCV].getAttribute(\"picture\") + '</picture> ';\r\n\t\t\t}\r\n\r\n\t\t\tif (self.grid.columns[iCV].getAttribute(\"picture\") === \"\") {\r\n\t\t\t\txml = xml + '<format/> ';\r\n\t\t\t} else {\r\n\t\t\t\txml = xml + '<format>' + self.grid.columns[iCV].getAttribute(\"format\") + '</format> ';\r\n\t\t\t}\r\n\r\n\t\t\tif (OAT_JS.grid.gridData[self.grid.UcId].dataFieldOrder == self.grid.columns[iCV].getAttribute(\"dataField\")){\r\n\t\t\t\tif (OAT_JS.grid.gridData[self.grid.UcId].orderType == \"Descending\")\r\n\t\t\t\t\txml = xml + '<order>descending</order> '\r\n\t\t\t\telse\r\n\t\t\t\t\txml = xml + '<order>ascending</order> '\r\n\t\t\t} else {\r\n\t\t\t\txml = xml + '<order>none</order> '\r\n\t\t\t}\r\n\r\n\t\t\txml = xml + '<customOrder/> ';\r\n\t\t\txml = xml + '<include> ';\r\n\r\n\t\t\t\r\n\t\t\t\tvar dF = self.grid.columns[iCV].getAttribute(\"dataField\");\r\n\t\t\t\tif ((self.blackLists[dF].state != \"none\") && (self.blackLists[dF].state != \"all\")) {\r\n\t\t\t\t\tfor (var i = 0; i < self.blackLists[dF].visibles.length; i++) {\r\n\t\t\t\t\t\txml = xml + '<value>' + self.blackLists[dF].visibles[i].trimpivot() + '</value> ';\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (self.blackLists[dF].state != \"none\") {\r\n\t\t\t\t\tfor (var i = 0; i < self.differentValues[dF].length; i++) {\r\n\t\t\t\t\t\txml = xml + '<value>' + self.differentValues[dF][i].trimpivot() + '</value> ';\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\r\n\t\t\txml = xml + '<value>TOTAL</value> </include> <collapse/> ';\r\n\r\n\t\t\txml = xml + '<hide> '\r\n\t\t\t\r\n\t\t\t\tvar dF = self.grid.columns[iCV].getAttribute(\"dataField\");\r\n\t\t\t\tif ((self.blackLists[dF].state != \"none\") && (self.blackLists[dF].state != \"all\")) {\r\n\t\t\t\t\tfor (var i = 0; i < self.blackLists[dF].hiddens.length; i++) {\r\n\t\t\t\t\t\txml = xml + '<value>' + self.blackLists[dF].hiddens[i].trimpivot() + '</value> ';\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (self.blackLists[dF].state != \"all\") {\r\n\t\t\t\t\tfor (var i = 0; i < self.differentValues[dF].length; i++) {\r\n\t\t\t\t\t\txml = xml + '<value>' + self.differentValues[dF][i].trimpivot() + '</value> ';\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\r\n\t\t\txml = xml + '</hide> '\r\n\r\n\t\t\tvar numCol = self.grid.columnsDataType.length - 1 - iCV;\r\n\t\t\ttry {\r\n\t\t\t\tif (self.grid.header.cells[numCol] != undefined) {\r\n\t\t\t\t\tif (self.grid.header.cells[numCol].html.style.display === \"\") {\r\n\t\t\t\t\t\txml = xml + '<condition>table</condition> ';\r\n\t\t\t\t\t\txml = xml + '<filterbar>no</filterbar> ';\r\n\t\t\t\t\t\t//xml = xml + '<position>' + self.columnDataField.indexOf(self.grid.columns[iCV].getAttribute(\"dataField\")) + '</position>'\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\txml = xml + '<condition>none</condition> ';\r\n\t\t\t\t\t\txml = xml + '<filterbar>yes</filterbar> ';\r\n\t\t\t\t\t\t//xml = xml + '<position>' + self.columnDataField.indexOf(self.grid.columns[iCV].getAttribute(\"dataField\")) + '</position>'\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} catch (ERROR) { }\r\n\t\t\t\r\n\t\t\tvar cantVisibles = 0\r\n\t\t\tvar located = false\r\n\t\t\tvar pos = -1;\r\n\t\t\tfor (var colGrid = 0; (self.columnDataField) && (colGrid < self.columnDataField.length) && (!located); colGrid++)\r\n\t\t\t\t{\r\n\t\t\t\t\tvar dataFieldColumn = self.columnDataField[colGrid];\r\n\t\t\t\t\tvar isHidden = false;\r\n\t\t\t\t\tfor (var columnI = 0; columnI < self.grid.columns.length; columnI++){\r\n\t\t\t\t\t\tif (dataFieldColumn == self.grid.columns[columnI].getAttribute(\"dataField\"))\r\n\t\t\t\t\t\t\tisHidden = (self.grid.columns[columnI].getAttribute(\"visible\").toLowerCase() == \"never\")\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!isHidden)\r\n\t\t\t\t\t\tcantVisibles=cantVisibles+1\r\n\t\t\t\t\tif (dataFieldColumn==self.grid.columns[iCV].getAttribute(\"dataField\")){\r\n\t\t\t\t\t\tlocated=true;\r\n\t\t\t\t\t\tif (!isHidden) pos = cantVisibles\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (pos>0)\r\n\t\t\t\t\txml = xml + '<position>' + pos + '</position> ';\r\n\t\t\t\telse\r\n\t\t\t\t\txml = xml + '<position/>'\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t/*try {\r\n\t\t\t\tvar axisOrder = self.columnDataField.indexOf(self.grid.columns[iCV].getAttribute(\"dataField\")) + 1\r\n\t\t\t\txml = xml + '<axisOrder>' + axisOrder + '</axisOrder>'\r\n\t\t\t} catch (ERROR) { }*/\r\n\r\n\t\t\txml = xml + '<restoreview>no</restoreview> ';\r\n\t\t\txml = xml + ' </OLAPDimension>';\r\n\t\t}\r\n\r\n\r\n\t\txml = xml + \"</OLAPCube>\";\r\n\r\n\t\treturn xml;\r\n\t}\r\n\r\n\tOAT.ExportToPdf = function (_self, fileName) {\r\n\t\t//count hidden columns\r\n\t\tvar hiddenColumns = [];\r\n\t\tfor (var i = 0; i < 1; i++) {\r\n\t\t\tvar tRow = jQuery(\"#\" + _self.grid.controlName + \" tr\")[i];\r\n\t\t\tfor (var j = 0; j < tRow.children.length; j++) {\r\n\t\t\t\tif (tRow.children[j].style.display == \"none\") {\r\n\t\t\t\t\thiddenColumns.push(j);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\t//calc max length of paper\r\n\t\tvar hgt = 20 + jQuery(\"#\" + _self.grid.controlName + \" tr\").length * 30 + 5;\r\n\t\tif (hgt < 841) {\r\n\t\t\thgt = 841;\r\n\t\t}\r\n\r\n\t\t//calc max width of paper\r\n\t\tvar wdt = 0;\r\n\t\tvar tRow = jQuery(\"#\" + _self.grid.controlName + \" tr\")[0].children.length - hiddenColumns.length;\r\n\t\twdt = 20 + tRow * (30 + 65) + 5;\r\n\t\tif (wdt < 595) {\r\n\t\t\twdt = 595;\r\n\t\t}\r\n\r\n\t\t//calculate columns width\r\n\t\tvar columnsWidth = [];\r\n\r\n\t\tfor (var i = 0; i < jQuery(\"#\" + _self.grid.controlName + \" tr\").length; i++) {\r\n\r\n\t\t\tvar tRow = jQuery(\"#\" + _self.grid.controlName + \" tr\")[i];\r\n\t\t\tvar columnInPdf = 0;\r\n\t\t\tfor (var j = 0; j < tRow.children.length; j++) {//for every cell in the row\r\n\t\t\t\tvar childText = tRow.children[j].textContent;\r\n\t\t\t\tvar hidden = tRow.children[j].getAttribute('hidden');\r\n\r\n\t\t\t\tif (tRow.children[j].style.display != \"none\") {\r\n\r\n\t\t\t\t\tif (hidden === null) {\r\n\t\t\t\t\t\tif (columnsWidth[columnInPdf] == undefined) {\r\n\t\t\t\t\t\t\tcolumnsWidth[columnInPdf] = 30;\r\n\t\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\t\t//japanese character\r\n\t\t\t\t\t\tvar jChar = 0;\r\n\t\t\t\t\t\tfor (var p = 0; p < childText.length; p++) {\r\n\t\t\t\t\t\t\tif (childText.charCodeAt(p) > 1000) {\r\n\t\t\t\t\t\t\t\tjChar++;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (jChar === 0) {\r\n\t\t\t\t\t\t\tif (childText.length > 14) {\r\n\t\t\t\t\t\t\t\tif (childText.length * 1.68 > columnsWidth[columnInPdf]) {\r\n\t\t\t\t\t\t\t\t\tcolumnsWidth[columnInPdf] = childText.length * 1.68;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tvar w = jChar * 2.8 + (childText.length - jChar) * 1.68;\r\n\t\t\t\t\t\t\tif (w > columnsWidth[columnInPdf]) {\r\n\t\t\t\t\t\t\t\tcolumnsWidth[columnInPdf] = w;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tcolumnInPdf = columnInPdf + 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t//recalculate width\r\n\t\tvar nw = 0\r\n\t\tfor (var i = 0; i < columnsWidth.length; i++) {\r\n\t\t\tnw = nw + columnsWidth[i] * 2.5 + 65;\r\n\t\t}\r\n\t\tnw = 20 + nw + 5;\r\n\t\tif (nw > wdt) {\r\n\t\t\twdt = nw;\r\n\t\t}\r\n\r\n\t\tvar getXOffset = function (colNro, columnsWidth) {\r\n\t\t\tvar offset = 0;\r\n\t\t\tfor (var i = 0; i < colNro; i++) {\r\n\t\t\t\toffset = offset + columnsWidth[i];\r\n\t\t\t}\r\n\t\t\treturn offset;\r\n\t\t}\r\n\r\n\t\tvar getYOffset = function (rowNro, rowsHeight) {\r\n\t\t\tvar offsety = 0;\r\n\t\t\tfor (var j = 0; j < rowNro; j++) {\r\n\t\t\t\toffsety = offsety + rowsHeight[j];\r\n\t\t\t}\r\n\t\t\treturn offsety;\r\n\t\t}\r\n\r\n\t\tvar doc;\r\n\t\tif (wdt <= hgt) {\r\n\t\t\tdoc = new jsPDF('portrait', 'mm', 'a4', false, wdt, 792); //landscape or portrait\r\n\t\t} else {\r\n\t\t\tdoc = new jsPDF('landscape', 'mm', 'a4', false, wdt, 792); //landscape or portrait\r\n\t\t}\r\n\t\tdoc.setFontSize(8);\r\n\r\n\t\tdoc.line(18, 13, 20 + getXOffset(jQuery(\"#\" + _self.grid.controlName + \" tr\")[0].children.length - hiddenColumns.length, columnsWidth), 13);\r\n\r\n\t\tvar y = -1;\r\n\t\tvar nroPag = 1\r\n\t\tvar verticalHeight = Math.min((jQuery(\"#\" + _self.grid.controlName + \" tr\").length) - (nroPag - 1) * 26, 26)\r\n\t\tfor (var i = 0; i < jQuery(\"#\" + _self.grid.controlName + \" tr\").length; i++) {\r\n\t\t\ty++;\r\n\t\t\tvar tRow = jQuery(\"#\" + _self.grid.controlName + \" tr\")[i];\r\n\r\n\t\t\tvar columnInPdf = 0;\r\n\r\n\t\t\tfor (var j = 0; j < tRow.children.length; j++) {//for every cell in the row\r\n\r\n\t\t\t\tif (tRow.children[j].style.display != \"none\") {\r\n\t\t\t\t\t//vertical line\r\n\t\t\t\t\tdoc.line(18 + getXOffset(columnInPdf, columnsWidth), 13, 18 + getXOffset(columnInPdf, columnsWidth), 23 + (verticalHeight - 1) * 10);\r\n\r\n\t\t\t\t\tvar childText = OAT.removeIconFont(tRow.children[j].textContent);\r\n\t\t\t\t\tvar hidden = tRow.children[j].getAttribute('hidden');\r\n\r\n\t\t\t\t\tvar imgTxtData = []\r\n\t\t\t\t\tif (childText.charCodeAt(0) > 1000) {\r\n\t\t\t\t\t\tfor (var cNo = 0; cNo < childText.length; cNo++) {\r\n\t\t\t\t\t\t\timgTxtData[cNo] = OAT.getCharacterImg(childText.charCodeAt(cNo))\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvar posI = -1;\r\n\t\t\t\t\t\tfor (var p = 1; p < childText.length; p++) {\r\n\t\t\t\t\t\t\tif (childText.charCodeAt(p) > 1000) {\r\n\t\t\t\t\t\t\t\tposI = p;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (posI > 0) {\r\n\t\t\t\t\t\t\tvar tempchildText = childText.substring(0, posI);\r\n\t\t\t\t\t\t\tvar posE = 0\r\n\t\t\t\t\t\t\tfor (var cNo = posI; cNo < childText.length; cNo++) {\r\n\t\t\t\t\t\t\t\timgTxtData[posE] = OAT.getCharacterImg(childText.charCodeAt(cNo))\r\n\t\t\t\t\t\t\t\tposE++;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tchildText = tempchildText;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t//set styles\r\n\t\t\t\t\tvar hasBackground = false;\r\n\t\t\t\t\tdoc.setTextColor(0, 0, 0);\r\n\t\t\t\t\tdoc.setFontStyle('normal');\r\n\t\t\t\t\tvar IsTextAlignRight = !isNaN(parseFloat(childText));\r\n\t\t\t\t\tvar textWidht = doc.getStringUnitWidth(childText);\r\n\t\t\t\t\tif ((tRow.children[j].getAttribute(\"style\") != undefined) && (tRow.children[j].getAttribute(\"style\") != null)) {\r\n\t\t\t\t\t\tvar attributes = tRow.children[j].getAttribute(\"style\").split(\";\");\r\n\t\t\t\t\t\tfor (var at = 0; at < attributes.length; at++) {\r\n\t\t\t\t\t\t\tvar detail = attributes[at].split(\":\");\r\n\t\t\t\t\t\t\tif (detail[0].replace(/^\\s+|\\s+$/g, '') === \"color\") {\r\n\t\t\t\t\t\t\t\tvar rgb = detail[1].replace(/^\\s+|\\s+$/g, '');\r\n\t\t\t\t\t\t\t\trgb = rgb.substring(4, rgb.length);\r\n\t\t\t\t\t\t\t\trgb = rgb.substring(0, rgb.length - 1);\r\n\t\t\t\t\t\t\t\tdoc.setTextColor(parseInt(rgb.split(\",\")[0]), parseInt(rgb.split(\",\")[1]), parseInt(rgb.split(\",\")[2]));\r\n\r\n\t\t\t\t\t\t\t} else if (detail[0].replace(/^\\s+|\\s+$/g, '') === \"text-align\") {\r\n\t\t\t\t\t\t\t\t//var alg = detail[1].replace(/^\\s+|\\s+$/g, '');\r\n\t\t\t\t\t\t\t\tIsTextAlignRight = (detail[1].replace(/^\\s+|\\s+$/g, '') == \"right\")\r\n\t\t\t\t\t\t\t} else if (detail[0].replace(/^\\s+|\\s+$/g, '') === \"font-style\") {\r\n\t\t\t\t\t\t\t\tdoc.setFontStyle('italic')\r\n\t\t\t\t\t\t\t} else if (detail[0].replace(/^\\s+|\\s+$/g, '') === \"font-weight\") {\r\n\t\t\t\t\t\t\t\tif (detail[1].replace(/^\\s+|\\s+$/g, '') === \"bold\") {\r\n\t\t\t\t\t\t\t\t\tdoc.setFontStyle('bold')\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else if (detail[0].replace(/^\\s+|\\s+$/g, '') === \"background-color\") {\r\n\t\t\t\t\t\t\t\tvar rgb = detail[1].replace(/^\\s+|\\s+$/g, '');\r\n\t\t\t\t\t\t\t\trgb = rgb.substring(4, rgb.length);\r\n\t\t\t\t\t\t\t\trgb = rgb.substring(0, rgb.length - 1);\r\n\t\t\t\t\t\t\t\tdoc.setFillColor(parseInt(rgb.split(\",\")[0]), parseInt(rgb.split(\",\")[1]), parseInt(rgb.split(\",\")[2]));\r\n\t\t\t\t\t\t\t\thasBackground = true;\r\n\t\t\t\t\t\t\t} else if (detail[0].replace(/^\\s+|\\s+$/g, '') === \"border-color\") {\r\n\t\t\t\t\t\t\t\tvar rgb = detail[1].replace(/^\\s+|\\s+$/g, '');\r\n\t\t\t\t\t\t\t\trgb = rgb.substring(4, rgb.length);\r\n\t\t\t\t\t\t\t\trgb = rgb.substring(0, rgb.length - 1);\r\n\t\t\t\t\t\t\t\tdoc.setDrawColor(parseInt(rgb.split(\",\")[0]), parseInt(rgb.split(\",\")[1]), parseInt(rgb.split(\",\")[2]));\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ((hasBackground) && (j == (tRow.children.length - 1))) {//for the last column more width\r\n\t\t\t\t\t\tdoc.rect(18 + getXOffset(columnInPdf, columnsWidth), 23 + (y - 1) * 10, 32, 10, 'FD');\r\n\t\t\t\t\t} else if (hasBackground) {\r\n\t\t\t\t\t\tdoc.rect(18 + getXOffset(columnInPdf, columnsWidth), 23 + (y - 1) * 10, 30, 10, 'FD');\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tdoc.setDrawColor(0, 0, 0);\r\n\t\t\t\t\tdoc.setFontSize(8);\r\n\r\n\t\t\t\t\tif ((hidden === null) /*&& (tRow.children[j].style.display != \"none\")*/) {\r\n\t\t\t\t\t\tvar preImage = 0;\r\n\t\t\t\t\t\tif (childText.charCodeAt(0) < 1000) {\r\n\t\t\t\t\t\t\tpreImage = childText.length + 2\r\n\t\t\t\t\t\t\tif (IsTextAlignRight) {\r\n\t\t\t\t\t\t\t\tdoc.text(20 + getXOffset(columnInPdf + 1, columnsWidth) - textWidht * 3 - 4, 20 + y * 10, childText);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tdoc.text(20 + getXOffset(columnInPdf, columnsWidth), 20 + y * 10, childText);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (imgTxtData.length > 0) {\r\n\t\t\t\t\t\t\tfor (var cNo = 0; cNo < imgTxtData.length; cNo++) {\r\n\t\t\t\t\t\t\t\tdoc.addImage(imgTxtData[cNo], 'JPEG', 20 + getXOffset(columnInPdf, columnsWidth) + preImage + cNo * 2.5, 20 + y * 10 - 2.5, 2.5, 2.5);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tcolumnInPdf = columnInPdf + 1;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t\t//last vertical line\r\n\t\t\tdoc.line(20 + getXOffset(tRow.children.length - hiddenColumns.length, columnsWidth), 13, 20 + getXOffset(tRow.children.length - hiddenColumns.length, columnsWidth), 23 + (verticalHeight - 1) * 10);\r\n\r\n\t\t\tdoc.line(18, 23 + y * 10, 20 + getXOffset(tRow.children.length - hiddenColumns.length, columnsWidth), 23 + y * 10);\r\n\t\t\tif (y >= 25) {\r\n\t\t\t\tdoc.setDrawColor(0, 0, 0)\r\n\t\t\t\tnroPag++\r\n\t\t\t\tverticalHeight = Math.min((jQuery(\"#\" + _self.grid.controlName + \" tr\").length - 1) - (nroPag - 1) * 26 + 1, 26)\r\n\t\t\t\ty = -1\r\n\t\t\t\tdoc.addPage()\r\n\t\t\t\t//top horizontal line\r\n\t\t\t\tdoc.line(18, 13, 20 + getXOffset(jQuery(\"#\" + _self.grid.controlName + \" tr\")[0].children.length - hiddenColumns.length, columnsWidth), 13);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tisSD = OAT.isSD();\r\n\t\t\r\n\t\tif (OAT.isSafari() || (isSD)) { //for safari\r\n\t\t\tdoc.output('dataurlnewwindow');\r\n\t\t} else  {\r\n\t\t\tdoc.save(fileName + '.pdf');\r\n\t\t}\r\n\t}\r\n\r\n\tOAT.ExportToExcel = function (_self, fileName) {\r\n\t\t\r\n\t\tvar table = '<table><tbody>'\r\n\r\n\t\tfor (var i = 0; i < jQuery(\"#\" + _self.grid.controlName + \" tr\").length; i++) {//for every row\r\n\t\t\ttable = table + '<tr>';\r\n\r\n\t\t\tvar tRow = jQuery(\"#\" + _self.grid.controlName + \" tr\")[i];\r\n\t\t\tfor (var j = 0; j < tRow.children.length; j++) {//for every cell in the row\r\n\t\t\t\tvar childText;\r\n\t\t\t\tif (i === 0) {\r\n\t\t\t\t\tchildText = tRow.children[j].getAttribute(\"title_v\");\r\n\t\t\t\t\tif (childText === undefined) {\r\n\t\t\t\t\t\tchildText = OAT.removeIconFont(tRow.children[j].textContent).trim();\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tchildText = tRow.children[j].getAttribute(\"title\"); \r\n\t\t\t\t\t//childText = OAT.removeIconFont(tRow.children[j].title/*.textContent*/).trim();\r\n\t\t\t\t\tif (childText === undefined) {\r\n\t\t\t\t\t\tchildText = tRow.children[j].textContent;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t/*if (((_self.grid.columns[j].getAttribute(\"dataType\") == \"date\") || (_self.grid.columns[j].getAttribute(\"dataType\") == \"datetime\")) \r\n\t\t\t\t\t\t&& (OAT_JS.grid.gridData[UcId].rowsMetadata.defaultPicture.getAttribute(\"dateFormat\") == \"YMD\"))\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tchildText = '=\"' + childText + '\"';\r\n\t\t\t\t\t}*/\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tchildText = childText.replace(/\\u00A0/g, \" \")\r\n\t\t\t\tvar hidden = tRow.children[j].getAttribute('hidden');\r\n\t\t\t\tif (tRow.children[j].style.display != \"none\") {\r\n\t\t\t\t\tif (hidden === null) {\r\n\t\t\t\t\t\tvar rowSpan = tRow.children[j].getAttribute('rowspan');\r\n\t\t\t\t\t\tvar colSpan = tRow.children[j].getAttribute('colspan');\r\n\r\n\t\t\t\t\t\tvar styleString = \"\";\r\n\t\t\t\t\t\tif ((tRow.children[j].getAttribute(\"style\") != undefined) && (tRow.children[j].getAttribute(\"style\") != null)) {\r\n\t\t\t\t\t\t\tstyleString = \" style=\\\"\" + tRow.children[j].getAttribute(\"style\") + \"\\\" \";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t/*if (((_self.grid.columns[j].getAttribute(\"dataType\") == \"date\") || (_self.grid.columns[j].getAttribute(\"dataType\") == \"datetime\")) \r\n\t\t\t\t\t\t&& (OAT_JS.grid.gridData[UcId].rowsMetadata.defaultPicture.getAttribute(\"dateFormat\") == \"YMD\"))\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tif (_self.grid.columns[j].getAttribute(\"dataType\") == \"date\")\r\n\t\t\t\t\t\t\t\tstyleString = ' style=\"width:80px;\" ';\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\tstyleString = ' style=\"width:140px;\" ';\r\n\t\t\t\t\t\t}*/\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif ((rowSpan === null) && (colSpan === null)) {\r\n\t\t\t\t\t\t\ttable = table + '<td ' + styleString + '>' + childText + '</td>';\r\n\t\t\t\t\t\t} else if (colSpan === null) {\r\n\t\t\t\t\t\t\ttable = table + '<td ' + styleString + ' rowspan=\"' + rowSpan + '\">' + childText + '</td>';\r\n\t\t\t\t\t\t} else if (rowSpan === null) {\r\n\t\t\t\t\t\t\ttable = table + '<td ' + styleString + ' colspan=\"' + colSpan + '\">' + childText + '</td>';\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\ttable = table + '<td ' + styleString + ' colspan=\"' + colSpan + '\" rowspan=\"' + rowSpan + '\">' + childText + '</td>';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\ttable = table + '</tr>';\r\n\t\t}\r\n\r\n\r\n\t\ttable = table + '</tbody></table>';\r\n\t\t\r\n\t\t//add header for special characters \r\n\t\tvar header = '<head><meta http-equiv=\"Content-Type\" content=\"text/html;charset=utf-8\"></head><body>'\r\n\t\ttable = header + table + '</body>'\r\n\t\t\r\n\t\tvar dtltbl = table;\r\n\t\t\r\n\t\tisSD = OAT.isSD();\r\n\t\t\r\n\t\t\r\n\t\tif (OAT.isSafari() || (isSD)){\r\n\t\t\twindow.open('data:application/vnd.ms-excel,' + encodeURIComponent(dtltbl));\r\n\t\t} else {\r\n\t\t\treturn dtltbl;\r\n\t\t}\r\n\r\n\r\n\t}\r\n\r\n\r\n\tOAT.ExportToExcel2010 = function (_self, fileName, serverPagination, recordData, UcId) {\r\n\r\n\r\n\t\tfunction componentToHex(c) {\r\n\t\t\tvar hex = c.toString(16);\r\n\t\t\treturn hex.length == 1 ? \"0\" + hex : hex;\r\n\t\t}\r\n\r\n\t\tfunction rgbToHex(r, g, b) {\r\n\t\t\treturn componentToHex(r) + componentToHex(g) + componentToHex(b);\r\n\t\t}\r\n\r\n\r\n\r\n\t\tdataTable = [];\r\n\r\n\t\tvar rowsToAdd = jQuery(\"#\" + _self.grid.controlName + \" tr\").length;\r\n\t\tif ((serverPagination != undefined) && (serverPagination)) {\r\n\t\t\trowsToAdd = 1;\r\n\t\t}\r\n\r\n\t\tvar hiddenColumns = []\r\n\r\n\t\tfor (var i = 0; i < rowsToAdd; i++) {//for every row\r\n\t\t\tdataRow = [];\r\n\r\n\t\t\tvar tRow = jQuery(\"#\" + _self.grid.controlName + \" tr\")[i];\r\n\t\t\tfor (var j = 0; j < tRow.children.length; j++) {//for every cell in the row\r\n\t\t\t\tvar childText = tRow.children[j].textContent;\r\n\t\t\t\tvar hidden = tRow.children[j].getAttribute('hidden');\r\n\t\t\t\tif (tRow.children[j].style.display != \"none\") {\r\n\t\t\t\t\tif (hidden === null) {\r\n\t\t\t\t\t\tvar rowSpan = tRow.children[j].getAttribute('rowspan');\r\n\t\t\t\t\t\tvar colSpan = tRow.children[j].getAttribute('colspan');\r\n\r\n\t\t\t\t\t\tvar styleString = \"\";\r\n\t\t\t\t\t\tvar cellObject = { value: childText };\r\n\t\t\t\t\t\tif ((tRow.children[j].getAttribute(\"style\") != undefined) && (tRow.children[j].getAttribute(\"style\") != null)) {\r\n\t\t\t\t\t\t\tvar attributes = tRow.children[j].getAttribute(\"style\").split(\";\");\r\n\t\t\t\t\t\t\tfor (var at = 0; at < attributes.length; at++) {\r\n\t\t\t\t\t\t\t\tvar detail = attributes[at].split(\":\");\r\n\t\t\t\t\t\t\t\tif (detail[0].replace(/^\\s+|\\s+$/g, '') === \"color\") {\r\n\t\t\t\t\t\t\t\t\tvar rgb = detail[1].replace(/^\\s+|\\s+$/g, '');\r\n\t\t\t\t\t\t\t\t\trgb = rgb.substring(4, rgb.length);\r\n\t\t\t\t\t\t\t\t\trgb = rgb.substring(0, rgb.length - 1);\r\n\t\t\t\t\t\t\t\t\tvar hex = rgbToHex(parseInt(rgb.split(\",\")[0]), parseInt(rgb.split(\",\")[1]), parseInt(rgb.split(\",\")[2]))\r\n\t\t\t\t\t\t\t\t\tcellObject.fontColor = hex;\r\n\t\t\t\t\t\t\t\t} else if (detail[0].replace(/^\\s+|\\s+$/g, '') === \"text-align\") {\r\n\t\t\t\t\t\t\t\t\tvar alg = detail[1].replace(/^\\s+|\\s+$/g, '');\r\n\t\t\t\t\t\t\t\t\tcellObject.hAlign = alg;\r\n\t\t\t\t\t\t\t\t} else if (detail[0].replace(/^\\s+|\\s+$/g, '') === \"font-style\") {\r\n\t\t\t\t\t\t\t\t\tif (detail[1].replace(/^\\s+|\\s+$/g, '') === \"italic\") {\r\n\t\t\t\t\t\t\t\t\t\tcellObject.italic = 1;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} else if (detail[0].replace(/^\\s+|\\s+$/g, '') === \"font-weight\") {\r\n\t\t\t\t\t\t\t\t\tif (detail[1].replace(/^\\s+|\\s+$/g, '') === \"bold\") {\r\n\t\t\t\t\t\t\t\t\t\tcellObject.bold = 1;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} else if (detail[0].replace(/^\\s+|\\s+$/g, '') === \"background-color\") {\r\n\t\t\t\t\t\t\t\t\tvar rgb = detail[1].replace(/^\\s+|\\s+$/g, '');\r\n\t\t\t\t\t\t\t\t\trgb = rgb.substring(4, rgb.length);\r\n\t\t\t\t\t\t\t\t\trgb = rgb.substring(0, rgb.length - 1);\r\n\t\t\t\t\t\t\t\t\tvar hex = rgbToHex(parseInt(rgb.split(\",\")[0]), parseInt(rgb.split(\",\")[1]), parseInt(rgb.split(\",\")[2]))\r\n\t\t\t\t\t\t\t\t\tcellObject.fill = hex;\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif ((rowSpan === null) && (colSpan === null)) {\r\n\t\t\t\t\t\t\tdataRow.push(cellObject)\r\n\t\t\t\t\t\t} else if (colSpan === null) {\r\n\t\t\t\t\t\t\tcellObject.rowSpan = parseInt(rowSpan);\r\n\t\t\t\t\t\t\tdataRow.push(cellObject)\r\n\t\t\t\t\t\t} else if (rowSpan === null) {\r\n\t\t\t\t\t\t\tcellObject.colSpan = parseInt(colSpan);\r\n\t\t\t\t\t\t\tdataRow.push(cellObject)\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tcellObject.colSpan = parseInt(colSpan);\r\n\t\t\t\t\t\t\tcellObject.rowSpan = parseInt(rowSpan);\r\n\t\t\t\t\t\t\tdataRow.push(cellObject)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\thiddenColumns.push(j);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tdataTable.push(dataRow);\r\n\t\t}\r\n\r\n\r\n\t\tif ((serverPagination != undefined) && (serverPagination)) {\r\n\t\t\tfor (var i = 0; i < recordData.length; i++) {\r\n\t\t\t\tdataRow = [];\r\n\t\t\t\tfor (var j = 0; j < recordData[i].length; j++) {\r\n\t\t\t\t\tif (hiddenColumns.indexOf(j) == -1) {\r\n\t\t\t\t\t\tvar childText = OAT.ApplyPictureValue(recordData[i][j], \"\", OAT_JS.grid.gridData[UcId].rowsMetadata.defaultPicture, OAT_JS.grid.gridData[UcId].rowsMetadata.forPivotCustomPicture[j]) /* Apply Picture */\r\n\r\n\t\t\t\t\t\tvar td = OAT.Dom.create(\"td\");\r\n\r\n\t\t\t\t\t\ttd.setAttribute(\"title\", childText);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tvar cellvalue =  recordData[i][j]\r\n\t\t\t\t\t\tif (_self.grid.columnsDataType[j] == \"date\") {\r\n\t\t\t\t\t\t\tcellvalue = OAT.ApplyPictureValue(recordData[i][j], _self.grid.columnsDataType[j], OAT_JS.grid.gridData[UcId].rowsMetadata.defaultPicture, OAT_JS.grid.gridData[UcId].rowsMetadata.forPivotCustomPicture[j]) /* Apply Picture */\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ttd = OAT.applyFormatValues(td, cellvalue, _self.grid.columnsDataType, j, OAT_JS.grid.gridData[UcId].rowsMetadata.formatValues, OAT_JS.grid.gridData[UcId].rowsMetadata.conditionalFormatsColumns, OAT_JS.grid.gridData[UcId].rowsMetadata.forPivotCustomFormat);\r\n\r\n\t\t\t\t\t\t//align numbers right\r\n\t\t\t\t\t\tif ( ((_self.grid.columnsDataType[j] != \"character\") && (_self.grid.columnsDataType[j] != \"guid\")) || (_self.grid.columnsDataType[j] === 'date')) {\r\n\t\t\t\t\t\t\ttd.style.textAlign = \"right\";\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t//td.style.textAlign = \"left\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tvar cellObject = { value: childText };\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif ( !isNaN(parseFloat(childText)) && (_self.grid.columnsDataType[j] != \"character\")\r\n\t\t\t\t\t\t\t && (_self.grid.columnsDataType[j] != \"date\") && (_self.grid.columnsDataType[j] != \"datetime\") && (_self.grid.columnsDataType[j] != \"guid\") ) \r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tcellObject = { value: parseFloat(childText) + \"\" };\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif ((td.getAttribute(\"style\") != undefined) && (td.getAttribute(\"style\") != null)) {\r\n\t\t\t\t\t\t\tvar attributes = td.getAttribute(\"style\").split(\";\");\r\n\t\t\t\t\t\t\tfor (var at = 0; at < attributes.length; at++) {\r\n\t\t\t\t\t\t\t\tvar detail = attributes[at].split(\":\");\r\n\t\t\t\t\t\t\t\tif (detail[0].replace(/^\\s+|\\s+$/g, '') === \"color\") {\r\n\t\t\t\t\t\t\t\t\tvar rgb = detail[1].replace(/^\\s+|\\s+$/g, '');\r\n\t\t\t\t\t\t\t\t\trgb = rgb.substring(4, rgb.length);\r\n\t\t\t\t\t\t\t\t\trgb = rgb.substring(0, rgb.length - 1);\r\n\t\t\t\t\t\t\t\t\tvar hex = rgbToHex(parseInt(rgb.split(\",\")[0]), parseInt(rgb.split(\",\")[1]), parseInt(rgb.split(\",\")[2]))\r\n\t\t\t\t\t\t\t\t\tcellObject.fontColor = hex;\r\n\t\t\t\t\t\t\t\t} else if (detail[0].replace(/^\\s+|\\s+$/g, '') === \"text-align\") {\r\n\t\t\t\t\t\t\t\t\tvar alg = detail[1].replace(/^\\s+|\\s+$/g, '');\r\n\t\t\t\t\t\t\t\t\tcellObject.hAlign = alg;\r\n\t\t\t\t\t\t\t\t} else if (detail[0].replace(/^\\s+|\\s+$/g, '') === \"font-style\") {\r\n\t\t\t\t\t\t\t\t\tif (detail[1].replace(/^\\s+|\\s+$/g, '') === \"italic\") {\r\n\t\t\t\t\t\t\t\t\t\tcellObject.italic = 1;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} else if (detail[0].replace(/^\\s+|\\s+$/g, '') === \"font-weight\") {\r\n\t\t\t\t\t\t\t\t\tif (detail[1].replace(/^\\s+|\\s+$/g, '') === \"bold\") {\r\n\t\t\t\t\t\t\t\t\t\tcellObject.bold = 1;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} else if (detail[0].replace(/^\\s+|\\s+$/g, '') === \"background-color\") {\r\n\t\t\t\t\t\t\t\t\tvar rgb = detail[1].replace(/^\\s+|\\s+$/g, '');\r\n\t\t\t\t\t\t\t\t\trgb = rgb.substring(4, rgb.length);\r\n\t\t\t\t\t\t\t\t\trgb = rgb.substring(0, rgb.length - 1);\r\n\t\t\t\t\t\t\t\t\tvar hex = rgbToHex(parseInt(rgb.split(\",\")[0]), parseInt(rgb.split(\",\")[1]), parseInt(rgb.split(\",\")[2]))\r\n\t\t\t\t\t\t\t\t\tcellObject.fill = hex;\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif ((_self.grid.columnsDataType[j] == \"real\") || (_self.grid.columnsDataType[j] == \"integer\")){\r\n\t\t\t\t\t\t\tcellObject.formatCode = OAT_JS.grid.gridData[UcId].rowsMetadata.forPivotCustomPicture[j].replace(/Z/g,\"#\").replace(/9/g, \"0\")\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (_self.grid.columnsDataType[j] == \"date\"){\r\n\t\t\t\t\t\t\tif (OAT_JS.grid.gridData[UcId].rowsMetadata.forPivotCustomPicture[j] != undefined){ \r\n\t\t\t\t\t\t\t\t var datePicture = OAT_JS.grid.gridData[UcId].rowsMetadata.forPivotCustomPicture[j].trim()\r\n\t\t\t\t\t\t\t\t var dateDefaultFormat = OAT_JS.grid.gridData[UcId].rowsMetadata.defaultPicture.getAttribute(\"dateFormat\")\r\n\t\t\t\t\t\t\t\t if (datePicture == \"99/99/99\")\r\n\t\t\t\t\t\t\t\t {\r\n\t\t\t\t\t\t\t\t \tcellObject.formatCode = \"mm/dd/yy\"\r\n\t\t\t\t\t\t\t\t\tif (dateDefaultFormat == \"DMY\")\r\n\t\t\t\t\t\t\t\t\t\tcellObject.formatCode = \"dd/mm/yy\"\r\n\t\t\t\t\t\t\t\t\tif (dateDefaultFormat == \"YMD\")\r\n\t\t\t\t\t\t\t\t\t\tcellObject.formatCode = \"yy/mm/dd\"\r\n\t\t\t\t\t\t\t\t }\r\n\t\t\t\t\t\t\t\t if (datePicture == \"99/99/9999\"){\r\n\t\t\t\t\t\t\t\t\tcellObject.formatCode = \"mm/dd/yyyy\"\r\n\t\t\t\t\t\t\t\t\tif (dateDefaultFormat == \"DMY\")\r\n\t\t\t\t\t\t\t\t\t\tcellObject.formatCode = \"dd/mm/yyyy\"\r\n\t\t\t\t\t\t\t\t\tif (dateDefaultFormat == \"YMD\")\r\n\t\t\t\t\t\t\t\t\t\tcellObject.formatCode = \"yyyy/mm/dd\"\r\n\t\t\t\t\t\t\t\t }\r\n\t\t\t\t\t\t\t\t if (datePicture == \"9999/99/99\"){\r\n\t\t\t\t\t\t\t\t\tcellObject.formatCode = \"yyyy/mm/dd\"\r\n\t\t\t\t\t\t\t\t\tif (dateDefaultFormat == \"YDM\")\r\n\t\t\t\t\t\t\t\t\t\tcellObject.formatCode = \"yyyy/dd/mm\"\r\n\t\t\t\t\t\t\t\t\tif (dateDefaultFormat == \"YMD\")\r\n\t\t\t\t\t\t\t\t\t\tcellObject.formatCode = \"yyyy/mm/dd\"\r\n\t\t\t\t\t\t\t\t }\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (_self.grid.columnsDataType[j] == \"datetime\"){\r\n\t\t\t\t\t\t\tif (OAT_JS.grid.gridData[UcId].rowsMetadata.forPivotCustomPicture[j] != undefined){ \r\n\t\t\t\t\t\t\t\tvar datePicture = OAT_JS.grid.gridData[UcId].rowsMetadata.forPivotCustomPicture[j].trim().split(\" \")\r\n\t\t\t\t\t\t\t\tvar formatDatePicture = \"\"\r\n\t\t\t\t\t\t\t\tvar dateTimeDefaultFormat = OAT_JS.grid.gridData[UcId].rowsMetadata.defaultPicture.getAttribute(\"dateFormat\")\r\n\t\t\t\t\t\t\t\tif (datePicture[0] == \"99/99/99\")\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t \tformatDatePicture = \"mm/dd/yy\"\r\n\t\t\t\t\t\t\t\t\tif (dateTimeDefaultFormat == \"DMY\")\r\n\t\t\t\t\t\t\t\t\t\tcellObject.formatCode = \"dd/mm/yy\"\r\n\t\t\t\t\t\t\t\t\tif (dateTimeDefaultFormat == \"YMD\")\r\n\t\t\t\t\t\t\t\t\t\tcellObject.formatCode = \"yy/mm/dd\"\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (datePicture[0] == \"99/99/9999\"){\r\n\t\t\t\t\t\t\t\t\tformatDatePicture = \"mm/dd/yyyy\"\r\n\t\t\t\t\t\t\t\t\tif (dateTimeDefaultFormat == \"DMY\")\r\n\t\t\t\t\t\t\t\t\t\tcellObject.formatCode = \"dd/mm/yyyy\"\r\n\t\t\t\t\t\t\t\t\tif (dateTimeDefaultFormat == \"YMD\")\r\n\t\t\t\t\t\t\t\t\t\tcellObject.formatCode = \"yyyy/mm/dd\"\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (datePicture[0] == \"9999/99/99\"){\r\n\t\t\t\t\t\t\t\t\tformatDatePicture = \"yyyy/mm/dd\"\r\n\t\t\t\t\t\t\t\t\tif (dateTimeDefaultFormat == \"YDM\")\r\n\t\t\t\t\t\t\t\t\t\tcellObject.formatCode = \"yyyy/dd/mm\"\r\n\t\t\t\t\t\t\t\t\tif (dateTimeDefaultFormat == \"YMD\")\r\n\t\t\t\t\t\t\t\t\t\tcellObject.formatCode = \"yyyy/mm/dd\"\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t/*if (datePicture[1] == \"99\")\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tcellObject.formatCode = formatDatePicture + \" hh\"\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (datePicture[1] == \"99:99\")\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tcellObject.formatCode = formatDatePicture + \" hh:mm\"\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (datePicture[1] == \"99:99:99\")\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tcellObject.formatCode = formatDatePicture + \" hh:mm:ss\"\t\t\r\n\t\t\t\t\t\t\t\t}\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tif (datePicture[1] == \"99:99:99.999\")\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tcellObject.formatCode = formatDatePicture + \" hh:mm:ss\"\r\n\t\t\t\t\t\t\t\t}*/\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tcellObject.genexusType = _self.grid.columnsDataType[j];\r\n\t\t\t\t\t\tcellObject.genexusPicture = OAT_JS.grid.gridData[UcId].rowsMetadata.forPivotCustomPicture[j];\r\n\r\n\t\t\t\t\t\tdataRow.push(cellObject)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tdataTable.push(dataRow);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar sheet = xlsx({\r\n\t\t\tcreator: 'Genexus',\r\n\t\t\tlastModifiedBy: 'Genexus',\r\n\t\t\tpivot: false,\r\n\t\t\tworksheets: [{\r\n\t\t\t\tdata: dataTable,\r\n\t\t\t\tname: 'Sheet 1'\r\n\t\t\t}]\r\n\t\t});\r\n\t\t\r\n\t\tisSD = OAT.isSD();\r\n\t\t\t\t\r\n\t\tif (OAT.isSafari() || (isSD)){ //for safari\r\n\t\t\twindow.location = sheet.href();\r\n\t\t} else  {\r\n\t\t\t//window.location = sheet.href();\r\n\t\t\tvar byteCharacters = atob(sheet.base64);\r\n\t\t\tfunction charCodeFromCharacter(c) {\r\n\t\t\t\treturn c.charCodeAt(0);\r\n\t\t\t}\r\n\r\n\t\t\tvar byteNumbers = Array.prototype.map.call(byteCharacters, charCodeFromCharacter);\r\n\t\t\tvar uint8Data = new Uint8Array(byteNumbers);\r\n\r\n\t\t\tvar blob = new Blob([uint8Data], { type: \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\" });\r\n\t\t\tsaveAs(blob, fileName + \".xlsx\");\r\n\t\t} \r\n\t}\r\n\r\n\tOAT.ExportToXML = function (self, fileName) {\r\n\t\tvar hiddenColumns = [];\r\n\t\tfor (var i = 0; i < 1; i++) {\r\n\t\t\tvar tRow = jQuery(\"#\" + self.grid.controlName + \" tr\")[i];\r\n\t\t\tfor (var j = 0; j < tRow.children.length; j++) {\r\n\t\t\t\tif (tRow.children[j].style.display == \"none\") {\r\n\t\t\t\t\thiddenColumns.push(j);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar xml = '<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?><EXPORT format=\"XML\" type=\"flat\">';\r\n\t\txml = xml + '<METADATA>';\r\n\t\tfor (var iCV = 0; iCV < self.grid.columns.length; iCV++) {\r\n\t\t\tif (hiddenColumns.indexOf(iCV) == -1) {\r\n\t\t\t\tvar position = 'row';\r\n\r\n\t\t\t\txml = xml + '<OLAPDimension ';\r\n\t\t\t\txml = xml + 'name=\"' + self.grid.columns[iCV].getAttribute(\"dataField\") + '\" ';\r\n\t\t\t\txml = xml + 'label=\"' + self.grid.columns[iCV].getAttribute(\"displayName\") + '\" ';\r\n\t\t\t\txml = xml + 'picture=\"' + self.grid.columns[iCV].getAttribute(\"picture\") + '\" ';\r\n\t\t\t\txml = xml + 'datatype=\"' + self.grid.columns[iCV].getAttribute(\"dataType\") + '\" ';\r\n\t\t\t\txml = xml + 'showAll=\"false\" ';\r\n\t\t\t\txml = xml + 'position=\"' + position + '\">';\r\n\r\n\r\n\t\t\t\tvar previusValue = [];\r\n\t\t\t\tfor (var i = 0; i < self.grid.rows.length; i++) {\r\n\t\t\t\t\tif (previusValue.findIndex(self.grid.rows[i].cells[iCV].options.value) === -1) {\r\n\t\t\t\t\t\txml = xml + '<VALUE CHECKED=';\r\n\t\t\t\t\t\tif (self.grid.conditions[iCV].blackList.findIndex(self.grid.rows[i].cells[iCV].options.value) === -1) {\r\n\t\t\t\t\t\t\tpreviusValue.push(self.grid.rows[i].cells[iCV].options.value);\r\n\t\t\t\t\t\t\txml = xml + '\"true\"';\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\txml = xml + '\"false\"';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\txml = xml + ' COLLAPSED=\"false\">'\r\n\r\n\t\t\t\t\t\t/*Set the value with the original format, for numeric values*/\r\n\t\t\t\t\t\tvar valuetoString = self.grid.rows[i].cells[iCV].options.value;\r\n\t\t\t\t\t\tif (!isNaN(parseFloat(self.grid.rows[i].cells[iCV].options.value))) {\r\n\t\t\t\t\t\t\tvar numRecord = parseFloat(self.grid.rows[i].cells[iCV].options.value);\r\n\t\t\t\t\t\t\tif (data != undefined) {\r\n\t\t\t\t\t\t\t\tfor (var di = 0; di < data.length; di++) {\r\n\t\t\t\t\t\t\t\t\tif (data[di] != undefined) {\r\n\t\t\t\t\t\t\t\t\t\tfor (var dj = 0; dj < data[di].length; dj++) {\r\n\t\t\t\t\t\t\t\t\t\t\tif ((parseFloat(data[di][dj]) != undefined) && (!isNaN(data[di][dj]))) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (parseFloat(data[di][dj]) === parseFloat(self.grid.rows[i].cells[iCV].options.value)) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvaluetoString = data[di][dj];\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\txml = xml + valuetoString + '</VALUE>';\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\txml = xml + '</OLAPDimension>';\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor (var iCV = 0; iCV < measures.length; iCV++) {\r\n\t\t\txml = xml + '<OLAPMeasure ';\r\n\t\t\txml = xml + 'name=\"' + measures[iCV].getAttribute(\"dataField\") + '\" ';\r\n\t\t\txml = xml + 'label=\"' + measures[iCV].getAttribute(\"displayName\") + '\" ';\r\n\t\t\txml = xml + 'picture=\"' + measures[iCV].getAttribute(\"picture\") + '\" ';\r\n\t\t\txml = xml + 'datatype=\"' + measures[iCV].getAttribute(\"dataType\") + '\" ';\r\n\t\t\txml = xml + 'showAll=\"true\" ';\r\n\t\t\txml = xml + 'aggregator=\"sum\"/>';\r\n\t\t}\r\n\r\n\t\txml = xml + '</METADATA>';\r\n\r\n\t\txml = xml + '<FLATDATA>';\r\n\t\tif (data != undefined) {\r\n\t\t\tfor (var i = 0; i < data.length; i++) {\r\n\t\t\t\txml = xml + '<ROW ';\r\n\t\t\t\tfor (var iCV = 0; iCV < data[0].length; iCV++) {\r\n\t\t\t\t\tif (hiddenColumns.indexOf(iCV) == -1) {\r\n\t\t\t\t\t\tvar valuetoString = data[i][iCV];\r\n\t\t\t\t\t\txml = xml + self.grid.columns[iCV].getAttribute(\"dataField\") + '=\"' + valuetoString + '\" ';\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\txml = xml + '/>';\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tfor (var i = 0; i < self.grid.rows.length; i++) {\r\n\t\t\t\txml = xml + '<ROW ';\r\n\r\n\r\n\t\t\t\tfor (var iCV = 0; iCV < self.grid.rows[0].cells.length; iCV++) {\r\n\t\t\t\t\t/*Set the value with the original format, for numeric values*/\r\n\t\t\t\t\tvar valuetoString = \"\";\r\n\t\t\t\t\tvaluetoString = self.grid.rows[i].cells[iCV].options.value;\r\n\t\t\t\t\tif (!isNaN(parseFloat(self.grid.rows[i].cells[iCV].options.value))) {\r\n\t\t\t\t\t\tvar numRecord = parseFloat(self.grid.rows[i].cells[iCV].options.value);\r\n\t\t\t\t\t\tif (data != undefined) {\r\n\t\t\t\t\t\t\tfor (var di = 0; di < data.length; di++) {\r\n\t\t\t\t\t\t\t\tif (data[di] != undefined) {\r\n\t\t\t\t\t\t\t\t\tfor (var dj = 0; dj < data[di].length; dj++) {\r\n\t\t\t\t\t\t\t\t\t\tif ((parseFloat(data[di][dj]) != undefined) && (!isNaN(data[di][dj]))) {\r\n\t\t\t\t\t\t\t\t\t\t\tif (parseFloat(data[di][dj]) === parseFloat(self.grid.rows[i].cells[iCV].options.value)) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tvaluetoString = data[di][dj];\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\txml = xml + self.grid.columns[iCV].getAttribute(\"dataField\") + '=\"' + valuetoString + '\" ';\r\n\t\t\t\t}\r\n\r\n\t\t\t\txml = xml + '/>'\r\n\t\t\t}\r\n\t\t}\r\n\t\txml = xml + '</FLATDATA>';\r\n\r\n\r\n\t\txml = xml + '<HTML>';\r\n\r\n\t\txml = xml + '<HEAD>';\r\n\t\txml = xml + '<META content=\"text/html; charset=utf-8\" http-equiv=\"Content-Type\"/>';\r\n\r\n\t\txml = xml + '<STYLE>';\r\n\r\n\t\txml = xml + '.odd {background-color: #FEFEFE; font-family: Verdana; font-size: 10pt;}\\n';\r\n\t\txml = xml + '.event {background-color: #EBEBEB; font-family: Verdana; font-size: 10pt;}\\n';\r\n\t\txml = xml + '.even {background-color: #FEFEFE;\tfont-weight: normal; font-family: Verdana; font-size: 10pt;\tpadding: 5px; }\\n';\r\n\t\txml = xml + 'tr {border-left: 1px solid #BBBBBB; border-right: 1px solid #BBBBBB; line-height: 22px;}\\n';\r\n\t\txml = xml + 'table {border-collapse: collapse;}\\n'\r\n\r\n\t\txml = xml + '</STYLE>';\r\n\t\txml = xml + '</HEAD>';\r\n\t\txml = xml + '<BODY>';\r\n\r\n\t\tfor (var i = 0; i < jQuery(\"#\" + self.grid.controlName + \" tr\").length; i++) {//for every row\r\n\t\t\txml = xml + '<TR>';\r\n\r\n\t\t\tvar tRow = jQuery(\"#\" + self.grid.controlName + \" tr\")[i];\r\n\t\t\tfor (var j = 0; j < tRow.children.length; j++) {//for every cell in the row\r\n\t\t\t\tvar childText = OAT.removeIconFont(tRow.children[j].textContent).trim();\r\n\t\t\t\tvar hidden = tRow.children[j].getAttribute('hidden');\r\n\t\t\t\tif (tRow.children[j].style.display != \"none\") {\r\n\t\t\t\t\tif (hidden === null) {\r\n\t\t\t\t\t\tvar rowSpan = tRow.children[j].getAttribute('rowspan');\r\n\t\t\t\t\t\tvar colSpan = tRow.children[j].getAttribute('colspan');\r\n\r\n\t\t\t\t\t\tvar styleString = \"\";\r\n\t\t\t\t\t\tif ((tRow.children[j].getAttribute(\"style\") != undefined) && (tRow.children[j].getAttribute(\"style\") != null)) {\r\n\t\t\t\t\t\t\tstyleString = \" style=\\\"\" + tRow.children[j].getAttribute(\"style\") + \"\\\" \";\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvar classString = \"\";\r\n\t\t\t\t\t\tif ((tRow.getAttribute(\"class\") != undefined) && (tRow.getAttribute(\"class\") != null)) {\r\n\t\t\t\t\t\t\tclassString = \" class=\\\"\" + tRow.getAttribute(\"class\") + \"\\\" \";\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif ((rowSpan === null) && (colSpan === null)) {\r\n\t\t\t\t\t\t\txml = xml + '<TD ' + classString + ' ' + styleString + ' >' + childText + '</TD>';\r\n\t\t\t\t\t\t} else if (colSpan === null) {\r\n\t\t\t\t\t\t\txml = xml + '<TD ' + classString + ' ' + styleString + ' rowspan=\"' + rowSpan + '\">' + childText + '</TD>';\r\n\t\t\t\t\t\t} else if (rowSpan === null) {\r\n\t\t\t\t\t\t\txml = xml + '<TD ' + classString + ' ' + styleString + ' colspan=\"' + colSpan + '\">' + childText + '</TD>';\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\txml = xml + '<TD ' + classString + ' ' + styleString + ' colspan=\"' + colSpan + '\" rowspan=\"' + rowSpan + '\">' + childText + '</TD>';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\txml = xml + '</TR>';\r\n\t\t}\r\n\r\n\r\n\t\txml = xml + '</BODY>';\r\n\t\txml = xml + '</HTML>';\r\n\r\n\r\n\t\txml = xml + \"</EXPORT>\";\r\n\r\n\t\tvar isSD = OAT.isSD();\r\n\t\t\r\n\r\n\t\t\r\n\t\t\txml = xml.replace(/\\&/g, \"&amp;\");\r\n\t\t\tif ((OAT.isSafari()) || (isSD)) { //for safari\t\t\t\r\n\t\t\t\twindow.open('data:text/xml,' + encodeURIComponent(xml));\r\n\t\t\t} else {\r\n\t\t\t\tvar blob = new Blob([xml], { type: \"text/xml\" });\r\n\t\t\t\tsaveAs(blob, fileName + \".xml\");\r\n\t\t\t}\r\n\t\t\r\n\t}\r\n\r\n\r\n\tOAT.SaveStateWhenServerPaging = function (self, UcId) {\r\n\t\tlocalStorage.setItem(OAT.getURL() + self.grid.controlName + self.grid.query, JSON.stringify({\r\n\t\t\tpageSize: self.rowsPerPage,\r\n\t\t\tdataFieldOrder: self.dataFieldOrder,\r\n\t\t\torderType: self.orderType,\r\n\t\t\tfilters: self.filterInfo,\r\n\t\t\tblackLists: self.blackLists,\r\n\t\t\tcolumnVisible: self.columnVisible,\r\n\t\t\tcolumnDataField: self.columnDataField\r\n\t\t}));\r\n\t}\r\n\r\n\tOAT.getStateWhenServingPaging = function (controlName, queryName) {\r\n\t\treturn JSON.parse(localStorage.getItem(OAT.getURL() + controlName + queryName));\r\n\t}\r\n\r\n\r\n\r\n\r\n\tOAT.getState = function (grid, actualPageSize) {\r\n\t\tif (typeof JSON.retrocycle !== 'function') {\r\n\t\t\tJSON.retrocycle = function retrocycle($) {\r\n\t\t\t\t'use strict';\r\n\r\n\t\t\t\tvar px =\r\n\t\t\t\t\t/^\\$(?:\\[(?:\\d+|\\\"(?:[^\\\\\\\"\\u0000-\\u001f]|\\\\([\\\\\\\"\\/bfnrt]|u[0-9a-zA-Z]{4}))*\\\")\\])*$/;\r\n\r\n\t\t\t\t(function rez(value) {\r\n\r\n\t\t\t\t\tvar i, item, name, path;\r\n\r\n\t\t\t\t\tif (value && typeof value === 'object') {\r\n\t\t\t\t\t\tif (Object.prototype.toString.apply(value) === '[object Array]') {\r\n\t\t\t\t\t\t\tfor (i = 0; i < value.length; i += 1) {\r\n\t\t\t\t\t\t\t\titem = value[i];\r\n\t\t\t\t\t\t\t\tif (item && typeof item === 'object') {\r\n\t\t\t\t\t\t\t\t\tpath = item.$ref;\r\n\t\t\t\t\t\t\t\t\tif (typeof path === 'string' && px.test(path)) {\r\n\t\t\t\t\t\t\t\t\t\tvalue[i] = eval(path);\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\trez(item);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tfor (name in value) {\r\n\t\t\t\t\t\t\t\tif (typeof value[name] === 'object') {\r\n\t\t\t\t\t\t\t\t\titem = value[name];\r\n\t\t\t\t\t\t\t\t\tif (item) {\r\n\t\t\t\t\t\t\t\t\t\tpath = item.$ref;\r\n\t\t\t\t\t\t\t\t\t\tif (typeof path === 'string' && px.test(path)) {\r\n\t\t\t\t\t\t\t\t\t\t\tvalue[name] = eval(path);\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\trez(item);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}($));\r\n\t\t\t\treturn $;\r\n\t\t\t};\r\n\t\t}\r\n\t\tvar retrievedObject = localStorage.getItem(OAT.getURL() + grid.controlName + grid.query);\r\n\t\tvar oldState = JSON.retrocycle(JSON.parse(retrievedObject));\r\n\r\n\t\tif ((oldState != null) && ((oldState.rowsPerPage + \" \") == (actualPageSize + \" \"))) {\r\n\r\n\t\t\tfor (var tC = 0; tC < grid.columnsDataType.length; tC++) {\r\n\t\t\t\tgrid.header.cells[tC].html.style.display = oldState.columnDisplay[tC];\r\n\t\t\t\tvar numCol = grid.columnsDataType.length - 1 - tC;\r\n\t\t\t\tvar j = 0;\r\n\t\t\t\tfor (j = 0; j < grid.rows.length; j++) {\r\n\t\t\t\t\tgrid.rows[j].cells[numCol].html.style.display = oldState.columnDisplay[tC];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tgrid.conditions = oldState.conditions;\r\n\t\t\tgrid.rowsPerPage = oldState.rowsPerPage;\r\n\t\t\treturn true;\r\n\t\t} else\r\n\t\t\treturn false;\r\n\r\n\t}\r\n\r\n\tOAT.SaveMetadata = function (metaDataString, key) {\r\n\t\ttry {\r\n\t\t\tif (!!window.localStorage) {\r\n\t\t\t\tlocalStorage.removeItem(OAT.getURL() + key);\r\n\t\t\t\tlocalStorage.setItem(OAT.getURL() + key, metaDataString);\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\r\n\t\t}\r\n\t}\r\n\r\n\tOAT.GetSavedMetadata = function (key) {\r\n\t\ttry {\r\n\t\t\tif (localStorage.getItem(OAT.getURL() + key) != null) {\r\n\t\t\t\tvar mdata = localStorage.getItem(OAT.getURL() + key);\r\n\t\t\t\tif ((mdata != undefined) && (mdata != null)) {\r\n\t\t\t\t\treturn mdata;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\treturn \"\";\r\n\t\t}\r\n\t\treturn \"\"\r\n\t}\r\n\r\n\r\n\ttry {\r\n\t\tOAT.Loader.featureLoaded(\"grid\");\r\n\t} catch (ERROR) {\r\n\r\n\t}\r\n\r\n\r\n\r\n\r\n\r\n//OAT_IMPL file\r\n\r\n\r\n\tthis.contains = function (a, obj) {\r\n\t\tfor (var i = 0; i < a.length; i++) {\r\n\t\t\tif (a[i] === obj) {\r\n\t\t\t\treturn i;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn -1;\r\n\t}\r\n\r\nif (typeof exports != \"undefined\") {\r\n\t\r\n\t\"use strict\";\r\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\r\n\texports.renderJSPivot = void 0;\r\n\texports.setPageDataForPivotTable = void 0;\r\n\texports.setAttributeValuesForPivotTable = void 0;\r\n\texports.setPivottableDataCalculation = void 0;\r\n\texports.setDataSynForPivotTable = void 0;\r\n\texports.setPageDataForTable = void 0;\r\n\texports.setAttributeForTable = void 0;\r\n\texports.setDataSynForTable = void 0;\r\n\texports.getDataXML = void 0;\r\n\texports.getFilteredDataXML = void 0;\r\n}\r\n\t\r\n\tfunction renderJSPivot(pivotParams, QueryViewerCollection, translations, qViewer) {\r\n\t\tif (pivotParams.RealType != \"Table\") {\r\n\t\t\tpivotParams.ServerPaging = false;\r\n\t\t}\r\n\t\tif (pivotParams.RealType == \"Table\") {\r\n\t\t\tpivotParams.ServerPagingPivot = false;\r\n\t\t\tif (qv.collection[pivotParams.UcId].AutoRefreshGroup == \"\") {\r\n\t\t\t\tjQuery(\".oat_winrect_container\").remove()\r\n\t\t\t}\r\n\t\t}\r\n\t\tif ((pivotParams.RememberLayout) && (pivotParams.ServerPaging) && (pivotParams.RealType != \"PivotTable\")) {\r\n\t\t\tvar state = OAT.getStateWhenServingPaging(pivotParams.UcId + '_' + pivotParams.ObjectName.replace(/\\./g, \"\"), pivotParams.ObjectName.replace(/\\./g, \"\"))\r\n\t\t\tif (!state) {\r\n\t\t\t\trenderJSPivotInter(pivotParams, QueryViewerCollection,translations, null, qViewer)\r\n\t\t\t} else {\r\n\t\t\t\tvar pageValue = 1;\r\n\t\t\t\tif (state.pageSize == \"\") { state.pageSize = undefined; pageValue = 0; }\r\n\t\t\t\t\r\n\t\t\t\tpivotParams.previousDataFieldOrder = state.dataFieldOrder;\r\n\t\t\t\tpivotParams.orderType = state.orderType;\r\n\t\t\t\trenderJSPivotInter(pivotParams, QueryViewerCollection,translations, state, qViewer)\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (pivotParams.RealType != \"Table\") {\r\n\t\t\t\trenderJSPivotInter(pivotParams, QueryViewerCollection,translations, null, qViewer)\r\n\t\t\t} else {\r\n\r\n\t\t\t\tpivotParams.customFilterInfo = \"\";\r\n\t\t\t\tvar xmlDoc = jQuery.parseXML(pivotParams.metadata);\r\n\t\t\t\tvar columns = xmlDoc.getElementsByTagName(\"OLAPDimension\");\r\n\r\n\t\t\t\tvar withOrderCustom = false\r\n\t\t\t\tvar dataFieldOrder = \"\"\r\n\t\t\t\tvar orderType = \"\"\r\n\r\n\t\t\t\tfor (var u = 0; u < columns.length; u++) {\r\n\t\t\t\t\tvar dataField = columns[u].getAttribute(\"dataField\")\r\n\r\n\t\t\t\t\tvar includeValues = []; //the only values to show\r\n\t\t\t\t\tvar applyFilter = false;\r\n\t\t\t\t\tfor (var h = 0; h < columns[u].childNodes.length; h++) {\r\n\t\t\t\t\t\tif ((columns[u].childNodes[h] != undefined) &&\r\n\t\t\t\t\t\t\t(columns[u].childNodes[h].localName != undefined) &&\r\n\t\t\t\t\t\t\t(columns[u].childNodes[h].localName === \"include\")) {\r\n\t\t\t\t\t\t\tapplyFilter = true;\r\n\t\t\t\t\t\t\tfor (var n = 0; n < columns[u].childNodes[h].childNodes.length; n++) {\r\n\t\t\t\t\t\t\t\tif ((columns[u].childNodes[h].childNodes[n].localName != null) &&\r\n\t\t\t\t\t\t\t\t\t(columns[u].childNodes[h].childNodes[n].localName.toLowerCase() === \"value\")) {\r\n\t\t\t\t\t\t\t\t\tincludeValues.push(columns[u].childNodes[h].childNodes[n].textContent);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\tif (!withOrderCustom) {\r\n\t\t\t\t\t\tif ((columns[u].getAttribute(\"order\") != undefined) && (columns[u].getAttribute(\"order\") != \"\")) {\r\n\t\t\t\t\t\t\tdataFieldOrder = columns[u].getAttribute(\"dataField\")\r\n\t\t\t\t\t\t\torderType = (columns[u].getAttribute(\"order\") == \"descending\") ? \"Descending\" : \"Ascending\";\r\n\t\t\t\t\t\t\twithOrderCustom = true//(columns[u].getAttribute(\"order\") == \"custom\")  \r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\tif (applyFilter) {\r\n\r\n\t\t\t\t\t\tvar res = QueryViewerCollection[pivotParams.UcId].getAttributeValuesSync([columns[u].getAttribute(\"dataField\"), 1, 0, \"\"]);\r\n\t\t\t\t\t\tvar res = JSON.parse(res);\r\n\t\t\t\t\t\tvar realValues = res.NotNullValues;\r\n\t\t\t\t\t\tvar realIncludeValues = [];\r\n\t\t\t\t\t\tfor (var j = 0; j < includeValues.length; j++) {\r\n\t\t\t\t\t\t\tfor (var h = 0; h < realValues.length; h++) {\r\n\t\t\t\t\t\t\t\tif (realValues[h].trimpivot() == includeValues[j].trimpivot()) {\r\n\t\t\t\t\t\t\t\t\trealIncludeValues.push(realValues[h])\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\t\tif (pivotParams.customFilterInfo == \"\") {\r\n\t\t\t\t\t\t\tpivotParams.customFilterInfo = [];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar obj = {\r\n\t\t\t\t\t\t\tDataField: columns[u].getAttribute(\"dataField\"),\r\n\t\t\t\t\t\t\tNotNullValues: {\r\n\t\t\t\t\t\t\t\tDefaultAction: \"Exclude\",\r\n\t\t\t\t\t\t\t\tExcluded: \"\",\r\n\t\t\t\t\t\t\t\tIncluded: realIncludeValues\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tNullIncluded: true\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tpivotParams.customFilterInfo.push(obj)\r\n\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/*if (pivotParams.ServerPaging && (pivotParams.customFilterInfo != \"\" || dataFieldOrder != \"\")) {\r\n\t\t\t\t\tQueryViewerCollection[pivotParams.UcId].getPageDataForTable((function (resXML) {\r\n\t\t\t\t\t\tpivotParams.data = resXML;\r\n\t\t\t\t\t\trenderJSPivotInter(pivotParams, QueryViewerCollection, null, queryself)\r\n\t\t\t\t\t}).closure(this), [1, pivotParams.PageSize, true, dataFieldOrder, orderType, pivotParams.customFilterInfo, false]);\r\n\t\t\t\t} else {*/\r\n\t\t\t\t\trenderJSPivotInter(pivotParams, QueryViewerCollection, translations, null, qViewer)\r\n\t\t\t\t//}\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\nif (typeof exports != \"undefined\") {\r\n\texports.renderJSPivot = renderJSPivot;\r\n}\r\n\r\n\r\n//PIVOT TABLE\r\n\tfunction setPageDataForPivotTable(oat_element, resXML){\r\n\t\toat_element.setPageDataForPivotTable(resXML)\r\n\t}\r\n\r\n\r\nif (typeof exports != \"undefined\") {\r\n\texports.setPageDataForPivotTable = setPageDataForPivotTable;\r\n}\r\n\r\nfunction setAttributeValuesForPivotTable(oat_element, resJSON){\r\n\t\toat_element.setAttributeValuesForPivotTable(resJSON);\r\n\t}\r\n\r\nif (typeof exports != \"undefined\") {\r\n\texports.setAttributeValuesForPivotTable = setAttributeValuesForPivotTable;\r\n}\r\n\r\nfunction setPivottableDataCalculation(oat_element, resText){\r\n\t\toat_element.setPivottableDataCalculation(resText)\r\n\t}\r\n\r\nif (typeof exports != \"undefined\") {\r\n\texports.setPivottableDataCalculation = setPivottableDataCalculation;\r\n}\r\n\r\nfunction setDataSynForPivotTable(oat_element, result){\r\n\t\toat_element.setDataSynForPivotTable(result)\r\n\t}\r\n\r\nif (typeof exports != \"undefined\") {\r\n\texports.setDataSynForPivotTable = setDataSynForPivotTable;\r\n}\r\n\r\n//TABLE\r\n\tfunction setPageDataForTable(oat_element, resXML){\r\n\t\toat_element.setPageDataForTable(resXML)\r\n\t}\r\n\r\n\r\nif (typeof exports != \"undefined\") {\r\n\texports.setPageDataForTable = setPageDataForTable;\r\n}\r\n\r\n\r\n\tfunction setAttributeForTable(oat_element, resJSON){\r\n\t\toat_element.setAttributeForTable(resJSON)\r\n\t}\r\n\r\n\r\nif (typeof exports != \"undefined\") {\r\n\texports.setAttributeForTable = setAttributeForTable;\r\n}\r\n\r\n\r\n\tfunction setDataSynForTable(oat_element, result){\r\n\t\toat_element.setDataSynForTable(result)\r\n\t}\r\n\r\nif (typeof exports != \"undefined\") {\r\n\texports.setDataSynForTable = setDataSynForTable;\r\n}\r\n\r\n//EVENTS\r\n\tfunction getDataXML(oat_element, serverData){\r\n\t\tresult = oat_element.getDataXML(serverData)\r\n\t\treturn result;\r\n\t}\r\n\r\nif (typeof exports != \"undefined\") {\r\n\texports.getDataXML = getDataXML;\r\n}\r\n\r\n\tfunction getFilteredDataXML(oat_element, serverData){\r\n\t\tresult = oat_element.getFilteredDataXML(serverData)\r\n\t\treturn result;\r\n\t}\r\n\r\nif (typeof exports != \"undefined\") {\r\n\texports.getFilteredDataXML = getFilteredDataXML;\r\n}\r\n\r\n\r\n\r\n\tvar renderJSPivotInter = function (pivotParams, QueryViewerCollection, translations, state, queryself) {\r\n\t\tvar type = pivotParams.RealType\r\n\t\tvar container = pivotParams.container\r\n\t\tvar page = pivotParams.page\r\n\t\tvar content = pivotParams.content\r\n\t\tvar metadata = pivotParams.metadata\r\n\t\tthis.dataString = pivotParams.data\r\n\t\tvar queryName = pivotParams.ObjectName\r\n\t\tvar controlName = pivotParams.ControlName\r\n\t\tvar pageSize = parseInt(pivotParams.PageSize)\r\n\t\tvar autoResize = pivotParams.AutoResize\r\n\t\tvar DisableColumnSort = pivotParams.DisableColumnSort\r\n\t\tvar UcId = pivotParams.UcId\r\n\t\tvar rememberLayout = pivotParams.RememberLayout\r\n\t\tthis.pivotParams = pivotParams\r\n\t\tthis.serverPaging = pivotParams.ServerPaging\r\n\t\tthis.previousDataFieldOrder = pivotParams.previousDataFieldOrder;\r\n\t\tthis.previousOrderType = pivotParams.orderType;\r\n\t\tthis.previousFilters = (state) ? state.filters : undefined;\r\n\t\tthis.previousColumnVisible = (state) ? state.columnVisible : undefined; this.initialColumnVisible = []\r\n\t\tthis.previousState = state\r\n\t\tthis.customFilterInfo = pivotParams.customFilterInfo\r\n\t\tthis.gridCacheSize = pivotParams.ServerPagingCacheSize;\r\n\t\tthis.hasShowValuesAs = (pivotParams.metadata.indexOf(\"showValuesAs\") > 0)\r\n\r\n\t\t//replace OLAPMeasure for OLAPDimensions\r\n\t\tif (pivotParams.RealType == \"Table\"){\r\n\t\t\tmetadata = metadata.replace(/\\<OLAPMeasure/g, '<OLAPMeasure axis=\"\" isMeasure=\"true\" '); \r\n\t\t\tmetadata = metadata.replace(/OLAPMeasure/g, \"OLAPDimension\")\r\n\t\t} \r\n\t\t//replace OLAPMeasure for OLAPDimensions when isComponent=true\r\n\t\tif (pivotParams.RealType != \"Table\"){\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tvar splitMetadata = metadata.split('<OLAPMeasure');\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tvar changeMetadata = splitMetadata[0];\r\n\t\t\t\r\n\t\t\tfor (var t=1; t < splitMetadata.length; t++)\r\n\t\t\t{\r\n\t\t\t\tvar line = \"\";\r\n\t\t\t\t\r\n\t\t\t\tif (splitMetadata[t].indexOf('isComponent=\"true\"') > -1)\r\n\t\t\t\t{\r\n\t\t\t\t\tline = '<OLAPDimension' + splitMetadata[t].replace(/OLAPMeasure/g, \"OLAPDimension\")\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tline = '<OLAPMeasure' + splitMetadata[t]\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tchangeMetadata = changeMetadata + line\r\n\t\t\t}\r\n\t\t\tmetadata = changeMetadata\r\n\t\t}\r\n\t\t\r\n\t\tvar ShowMeasuresAsRows = (pivotParams.ShowDataLabelsIn == \"Rows\")\r\n\t\tif ((rememberLayout == undefined) || (rememberLayout == \"false\")) {\r\n\t\t\trememberLayout = false\r\n\t\t}\r\n\t\t//recover metadata when metadata error, is there no metadata save it\r\n\t\ttry {\r\n\t\t\tif (rememberLayout) {\r\n\t\t\t\tvar savedMd = OAT.GetSavedMetadata(container.id + queryName + UcId + controlName + type + \"metadata\")\r\n\t\t\t\tif (savedMd === \"\") {\r\n\t\t\t\t\tOAT.SaveMetadata(metadata, container.id + queryName + UcId + controlName + type + \"metadata\")\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar t1 = savedMd.split('OLAPDimension').length === metadata.split('OLAPDimension').length;\r\n\t\t\t\t\tvar t2 = savedMd.split('OLAPMeasure').length === metadata.split('OLAPMeasure').length;\r\n\t\t\t\t\tvar t3 = savedMd.split('name').length === metadata.split('name').length;\r\n\t\t\t\t\tvar t4 = true\r\n\t\t\t\t\tif (t1 && t2 && t3) {\r\n\t\t\t\t\t\tfor (var i = 1; i < savedMd.split('name').length; i++) {\r\n\t\t\t\t\t\t\tvar name1 = savedMd.split('name')[i].substring(2, savedMd.split('name')[i].length).split(\"\\\"\")[0];\r\n\t\t\t\t\t\t\tvar name2 = metadata.split('name')[i].substring(2, metadata.split('name')[i].length).split(\"\\\"\")[0];\r\n\t\t\t\t\t\t\tif (name1 != name2) {\r\n\t\t\t\t\t\t\t\tt4 = false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!(t1 && t2 && t3 && t4)) {\r\n\t\t\t\t\t\tif (OAT.isIE()) {\r\n\t\t\t\t\t\t\trememberLayout = false\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\tif (!!window.localStorage) {\r\n\t\t\t\t\t\t\t\t\tlocalStorage.removeItem(OAT.getURL() + container.id + queryName + UcId + controlName + type + \"metadata\");\r\n\t\t\t\t\t\t\t\t\tlocalStorage.removeItem(OAT.getURL() + queryName + UcId);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} catch (ERROR) {\r\n\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} catch (ERROR) {\r\n\r\n\t\t}\r\n\r\n\t\tvar fullXmlData = jQuery.parseXML(metadata); //metada for formulas and hide columns\r\n\t\tthis.InitMetadata = {};\r\n\t\tthis.InitMetadata.Metadata = metadata\r\n\t\tthis.InitMetadata.DataString = dataString;\r\n\t\tthis.InitMetadata.Dimensions = []\r\n\t\tthis.InitMetadata.Conditions = []\r\n\t\tthis.InitMetadata.DataFields = []\r\n\t\tthis.InitMetadata.RowsPerPage = pageSize\r\n\t\tvar initColumns = fullXmlData.getElementsByTagName(\"OLAPDimension\");\r\n\t\tfor (var i = 0; i < initColumns.length; i++) {\r\n\t\t\tvar objectColumn = {}\r\n\t\t\tobjectColumn.name = initColumns[i].getAttribute(\"name\")\r\n\t\t\tobjectColumn.displayName = initColumns[i].getAttribute(\"displayName\")\r\n\t\t\tobjectColumn.description = initColumns[i].getAttribute(\"description\")\r\n\t\t\tobjectColumn.dataField = initColumns[i].getAttribute(\"dataField\")\r\n\t\t\t\r\n\t\t\t/*calculate default and valid position*/\r\n\t\t\t\r\n\t\t\tvar validPositions = \"\"\r\n\t\t\t\r\n\t\t\tvar metadatavisible = initColumns[i].getAttribute(\"visible\")\r\n\t\t\tif (metadatavisible == \"Never\"){\r\n\t\t\t\tobjectColumn.defaultPosition = \"hidden\"\r\n\t\t\t\tobjectColumn.Visible = false\r\n\t\t\t} else {\r\n\t\t\t\tif (metadatavisible == \"No\"){\r\n\t\t\t\t\tobjectColumn.Visible = false\r\n\t\t\t\t} else {\r\n\t\t\t\t\tobjectColumn.Visible = true\r\n\t\t\t\t}\r\n\t\t\t\tobjectColumn.defaultPosition = initColumns[i].getAttribute(\"axis\")\r\n\t\t\t\tvar j = 0;\r\n\t\t\t\tvalidPositions = (initColumns[i].getAttribute(\"canDragToPages\") == \"true\") ? \"filters;\" : \"\"\r\n\t\t\t\tvalidPositions = validPositions + \"rows;columns;hidden\"\r\n\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tobjectColumn.validPosition = validPositions\r\n\t\t\tthis.InitMetadata.Dimensions.push(objectColumn)\r\n\t\t\tthis.InitMetadata.Conditions.push(\"\")\r\n\t\t\tthis.InitMetadata.DataFields.push(objectColumn.dataField)\r\n\t\t}\r\n\t\tthis.InitMetadata.Measures = []\r\n\t\tvar initMeasures = fullXmlData.getElementsByTagName(\"OLAPMeasure\");\r\n\t\tfor (var i = 0; i < initMeasures.length; i++) {\r\n\t\t\tvar measureObject = {}\r\n\t\t\tmeasureObject.name = initMeasures[i].attributes.getNamedItem(\"name\").nodeValue;\r\n\t\t\tmeasureObject.displayName = initMeasures[i].attributes.getNamedItem(\"displayName\").nodeValue;\r\n\t\t\tmeasureObject.dataField = initMeasures[i].attributes.getNamedItem(\"dataField\").nodeValue;\r\n\t\t\tmeasureObject.dataType = initMeasures[i].attributes.getNamedItem(\"dataType\").nodeValue;\r\n\t\t\t\r\n\t\t\tmeasureObject.Visible = initMeasures[i].attributes.getNamedItem(\"visible\").nodeValue.toLowerCase() == \"yes\"\r\n\t\t\t\r\n\t\t\tif (initMeasures[i].attributes.getNamedItem(\"visible\").nodeValue.toLowerCase() != \"never\") {\r\n\t\t\t\tmeasureObject.defaultPosition = (initMeasures[i].attributes.getNamedItem(\"axis\")) ? initMeasures[i].attributes.getNamedItem(\"axis\") : \"data\"\r\n\t\t\t\tmeasureObject.validPosition = \"data;hidden\"\r\n\t\t\t} else {\r\n\t\t\t\tmeasureObject.defaultPosition = \"hidden\"\r\n\t\t\t\tmeasureObject.validPosition = \"hidden\"\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t//measureObject.Visible = measureObject.defaultPosition != \"hidden\"\r\n\t\t\tthis.InitMetadata.Measures.push(measureObject)\r\n\t\t}\r\n\t\tthis.InitMetadata.DimensionPosition = []\r\n\r\n\t\t//parse metadata\r\n\t\tthis.HideDataFilds = []\r\n\r\n\t\tvar result;\r\n\t\tvar previousState = OATgetState(queryName, UcId.replace(/,/g, \"\").replace(/\\./g, \"\"))\r\n\t\tif ((rememberLayout) && (previousState != undefined)) {\r\n\t\t\tvar hideDimension = [];\r\n\t\t\tfor (var i = 0; i < previousState.Dimensions.length; i++) {\r\n\t\t\t\tif (!previousState.Dimensions[i].Visible) {\r\n\t\t\t\t\thideDimension.push(previousState.Dimensions[i].dataField)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar hideMeasures = [];\r\n\t\t\tfor (var i = 0; i < previousState.Measures.length; i++) {\r\n\t\t\t\tif (!previousState.Measures[i].Visible) {\r\n\t\t\t\t\thideMeasures.push(previousState.Measures[i].dataField)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.InitMetadata.Measures = previousState.Measures\r\n\t\t\tthis.InitMetadata.Dimensions = previousState.Dimensions\r\n\t\t\tthis.InitMetadata.DataFields = previousState.DataFields\r\n\t\t\tthis.InitMetadata.DimensionPosition = previousState.DimensionPosition\r\n\r\n\t\t\tif (pivotParams.ServerPagingPivot) {\r\n\t\t\t\tthis.InitMetadata.Conditions = previousState.Conditions\r\n\t\t\t}\r\n\r\n\t\t\tresult = OATParseMetadata(metadata, hideDimension, hideMeasures, pivotParams.ServerPagingPivot, translations)\r\n\t\t} else {\r\n\t\t\tvar hideDimension = [];\r\n\t\t\tfor (var i = 0; i < this.InitMetadata.Dimensions.length; i++) {\r\n\t\t\t\tif (!this.InitMetadata.Dimensions[i].Visible) {\r\n\t\t\t\t\thideDimension.push(this.InitMetadata.Dimensions[i].dataField)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar hideMeasures = [];\r\n\t\t\tfor (var i = 0; i < this.InitMetadata.Measures.length; i++) {\r\n\t\t\t\tif (!this.InitMetadata.Measures[i].Visible) {\r\n\t\t\t\t\thideMeasures.push(this.InitMetadata.Measures[i].dataField)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif ((pivotParams.RealType == \"Table\")) {\r\n\t\t\t\tresult = OATParseMetadata(metadata, [], hideMeasures, pivotParams.ServerPagingPivot, translations)\r\n\t\t\t} else {\r\n\t\t\t\tresult = OATParseMetadata(metadata, hideDimension, hideMeasures, pivotParams.ServerPagingPivot, translations)\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tthis.InitMetadata.GrandTotalVisibility = { TotalForRows: pivotParams.TotalForRows, TotalForColumns: pivotParams.TotalForColumns }\r\n\t\t\r\n\r\n\t\tmetadata = result[0]; var orderFildsHidden = result[1]; var nameFildsHidden = result[3]; this.HideDataFilds = result[2];\r\n\r\n\r\n\t\tvar xmlDoc = jQuery.parseXML(metadata);\r\n\r\n\t\tvar defaultPicture = xmlDoc.childNodes[0];\r\n\r\n\t\tthis.IdForQueryViewerCollection = UcId;\r\n\t\tUcId = UcId.replace(/,/g, \"\").replace(/\\./g, \"\")\r\n\t\tthis.UcId = UcId;\r\n\t\tthis.pivotDiv = container.id;\r\n\t\tthis.query = queryName;\r\n\t\tthis.control = controlName;\r\n\t\tthis.pageSize = pageSize;\r\n\t\tthis.autoResize = autoResize;\r\n\t\tthis.disableColumnSort = DisableColumnSort;\r\n\t\tthis.header = [];\r\n\t\tthis.data = [];\r\n\t\tthis.columnNumbers = [];\r\n\t\tthis.rowNumbers = [];\r\n\t\tthis.filterNumbers = [];\r\n\t\tthis.cols = 0;\r\n\t\tthis.conditionalFormats = [];\r\n\t\tthis.conditionalFormatsColumns = []; //conditional format for columns - needed?\r\n\t\tthis.formatValues = [];\r\n\t\tthis.formatValuesMeasures = [];\r\n\r\n\t\tthis.forPivotFormatValues = [];\r\n\t\tthis.forPivotFormats = [];\r\n\t\tthis.forPivotCustomPicture = [];\r\n\t\tthis.forPivotCustomFormat = [];\r\n\r\n\r\n\t\t//Columns and measures names\r\n\t\tvar columns = xmlDoc.getElementsByTagName(\"OLAPDimension\");\r\n\t\tvar columnNames = [];\r\n\t\tvar rowNames = [];\r\n\t\tvar filterNames = [];\r\n\t\tthis.measures = xmlDoc.getElementsByTagName(\"OLAPMeasure\");\r\n\t\tvar columnsDataType = [];\r\n\t\tvar measureNames = []; var measuresNamesWidthHidden = [];\r\n\t\tvar j = 0;\r\n\t\tvar k = 0;\r\n\t\tvar preHeader = [];\r\n\t\tvar formulaInfo = { measureFormula: [], itemPosition: [] }\r\n\t\t//handle pictures\r\n\t\tvar orderFilds = [];\r\n\t\tvar datePictures = [];\r\n\t\tvar intPictures = [];\r\n\t\tvar dateFields = [];\r\n\t\tvar intFields = [];\r\n\r\n\t\tif ((pivotParams.RealType == \"Table\")) {\r\n\t\t\tfor (var i = 0; i < columns.length; i++) {\r\n\t\t\t\tthis.initialColumnVisible[i] = true\r\n\t\t\t\tif (columns[i].attributes.getNamedItem(\"visible\").nodeValue != \"Yes\") {\r\n\t\t\t\t\tthis.initialColumnVisible[i] = false\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//get columns\r\n\t\tfor (var i = 0; i < columns.length; i++) {\r\n\r\n\t\t\tif ((columns[i].attributes.getNamedItem(\"axis\").nodeValue == \"Rows\")\r\n\t\t\t\t|| (pivotParams.RealType == \"Table\") || (this.InitMetadata.Dimensions[i].validPosition == \"\")) {\r\n\t\t\t\tcolumnNames[j] = columns[i].attributes.getNamedItem(\"displayName\").nodeValue;\r\n\t\t\t\tpreHeader[i] = columnNames[j];\r\n\t\t\t\tj++;\r\n\t\t\t}\r\n\t\t\tif (columns[i].attributes.getNamedItem(\"axis\").nodeValue == \"Columns\") {\r\n\t\t\t\trowNames[k] = columns[i].attributes.getNamedItem(\"displayName\").nodeValue;\r\n\t\t\t\tpreHeader[i] = rowNames[k];\r\n\t\t\t\tk++;\r\n\t\t\t}\r\n\t\t\tif (columns[i].attributes.getNamedItem(\"axis\").nodeValue == \"Pages\") {\r\n\t\t\t\tfilterNames[k] = columns[i].attributes.getNamedItem(\"displayName\").nodeValue;\r\n\t\t\t\tpreHeader[i] = filterNames[k];\r\n\t\t\t\tk++;\r\n\t\t\t}\r\n\t\t\tif (pivotParams.ServerPagingPivot && (columns[i].attributes.getNamedItem(\"axis\").nodeValue == \"\")) {\r\n\t\t\t\tfor (var t = 0; t < this.InitMetadata.Dimensions.length; t++) {\r\n\t\t\t\t\tif (this.InitMetadata.Dimensions[t].dataField == columns[i].attributes.getNamedItem(\"dataField\").nodeValue) {\r\n\t\t\t\t\t\tif (this.InitMetadata.Dimensions[t].Visible) {\r\n\t\t\t\t\t\t\tcolumnNames[j] = columns[i].attributes.getNamedItem(\"displayName\").nodeValue;\r\n\t\t\t\t\t\t\tj++;\r\n\t\t\t\t\t\t\tpreHeader[i] = columns[i].attributes.getNamedItem(\"displayName\").nodeValue;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tcolumnsDataType[i] = columns[i].attributes.getNamedItem(\"dataType\").nodeValue;\r\n\t\t\t//handle formats values\r\n\t\t\tif (columns[i].childNodes.length > 0) {\r\n\t\t\t\tif (columns[i].childNodes != null) {\r\n\t\t\t\t\tfor (var m = 0; m < columns[i].childNodes.length; m++) {\r\n\t\t\t\t\t\tif (columns[i].childNodes[m].localName == \"formatValues\") {\r\n\t\t\t\t\t\t\tfor (var n = 0; n < columns[i].childNodes[m].childNodes.length; n++) {\r\n\t\t\t\t\t\t\t\tif (columns[i].childNodes[m].childNodes[n].localName == \"value\") {\r\n\t\t\t\t\t\t\t\t\tvar value = {};\r\n\t\t\t\t\t\t\t\t\tvalue.format = columns[i].childNodes[m].childNodes[n].attributes.getNamedItem(\"format\").nodeValue;\r\n\t\t\t\t\t\t\t\t\tvalue.recursive = columns[i].childNodes[m].childNodes[n].attributes.getNamedItem(\"recursive\").nodeValue;\r\n\t\t\t\t\t\t\t\t\tvar crude = columns[i].childNodes[m].childNodes[n].textContent;\r\n\t\t\t\t\t\t\t\t\tvalue.value = crude.replace(/^\\s+|\\s+$/g, '');\r\n\t\t\t\t\t\t\t\t\tvalue.columnNumber = i;\r\n\t\t\t\t\t\t\t\t\tthis.formatValues.push(value);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}//handle conditional formats\r\n\t\t\tif (columns[i].childNodes.length > 0) {\r\n\t\t\t\tif (columns[i].childNodes != null) {\r\n\t\t\t\t\tfor (var m = 0; m < columns[i].childNodes.length; m++) {\r\n\t\t\t\t\t\tif (columns[i].childNodes[m].localName == \"conditionalFormats\") {\r\n\t\t\t\t\t\t\tfor (var n = 0; n < columns[i].childNodes[m].childNodes.length; n++) {\r\n\t\t\t\t\t\t\t\tif (columns[i].childNodes[m].childNodes[n].localName == \"rule\") {\r\n\t\t\t\t\t\t\t\t\tvar format = {};\r\n\t\t\t\t\t\t\t\t\tformat.format = columns[i].childNodes[m].childNodes[n].attributes.getNamedItem(\"format\").nodeValue;\r\n\t\t\t\t\t\t\t\t\tformat.operation1 = columns[i].childNodes[m].childNodes[n].attributes.getNamedItem(\"op1\").nodeValue;\r\n\t\t\t\t\t\t\t\t\tformat.value1 = columns[i].childNodes[m].childNodes[n].attributes.getNamedItem(\"value1\").nodeValue;\r\n\t\t\t\t\t\t\t\t\tif (columns[i].childNodes[m].childNodes[n].attributes.getNamedItem(\"op2\") != null) {\r\n\t\t\t\t\t\t\t\t\t\tformat.operation2 = columns[i].childNodes[m].childNodes[n].attributes.getNamedItem(\"op2\").nodeValue;\r\n\t\t\t\t\t\t\t\t\t\tformat.value2 = columns[i].childNodes[m].childNodes[n].attributes.getNamedItem(\"value2\").nodeValue;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tformat.columnNumber = i;\r\n\t\t\t\t\t\t\t\t\tthis.conditionalFormatsColumns.push(format);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t//manage pictures\r\n\t\t\tif (columns[i].attributes.getNamedItem(\"picture\").nodeValue != \"\") {\r\n\t\t\t\tif (columns[i].attributes.getNamedItem(\"dataType\").nodeValue == \"date\") {\r\n\t\t\t\t\tdatePictures.push(columns[i].attributes.getNamedItem(\"picture\").nodeValue);\r\n\t\t\t\t\tdateFields.push(columns[i].attributes.getNamedItem(\"dataField\").nodeValue);\r\n\t\t\t\t}\r\n\t\t\t\t//if (columns[i].attributes.getNamedItem(\"dataType\").nodeValue == \"integer\" || measures[i].attributes.getNamedItem(\"dataType\").nodeValue == \"real\") {\r\n\t\t\t\tif (columns[i].attributes.getNamedItem(\"dataType\").nodeValue == \"integer\") {\r\n\t\t\t\t\tintPictures.push(columns[i].attributes.getNamedItem(\"picture\").nodeValue);\r\n\t\t\t\t\tintFields.push(columns[i].attributes.getNamedItem(\"dataField\").nodeValue);\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t\tthis.forPivotCustomPicture.push(columns[i].attributes.getNamedItem(\"picture\").nodeValue);\r\n\t\t\tthis.forPivotCustomFormat.push(columns[i].attributes.getNamedItem(\"format\").nodeValue);\r\n\t\t\torderFilds.push(columns[i].attributes.getNamedItem(\"dataField\").nodeValue);\r\n\r\n\t\t}\r\n\r\n\t\t//var measures;\r\n\t\tfor (var i = 0; i < this.measures.length; i++) {\r\n\r\n\t\t\tmeasureNames[i] = this.measures[i].attributes.getNamedItem(\"displayName\").nodeValue;\r\n\t\t\t//manage format values\r\n\t\t\tif (measures[i].childNodes.length > 0) {\r\n\t\t\t\tif (measures[i].childNodes != null) {\r\n\t\t\t\t\tfor (var m = 0; m < measures[i].childNodes.length; m++) {\r\n\t\t\t\t\t\tif (measures[i].childNodes[m].localName == \"formatValues\") {\r\n\t\t\t\t\t\t\tfor (var n = 0; n < measures[i].childNodes[m].childNodes.length; n++) {\r\n\t\t\t\t\t\t\t\tif (measures[i].childNodes[m].childNodes[n].localName == \"value\") {\r\n\t\t\t\t\t\t\t\t\tvar value = {};\r\n\t\t\t\t\t\t\t\t\tvalue.format = measures[i].childNodes[m].childNodes[n].attributes.getNamedItem(\"format\").nodeValue;\r\n\t\t\t\t\t\t\t\t\tvalue.recursive = measures[i].childNodes[m].childNodes[n].attributes.getNamedItem(\"recursive\").nodeValue;\r\n\t\t\t\t\t\t\t\t\tvar crude = measures[i].childNodes[m].childNodes[n].textContent;\r\n\t\t\t\t\t\t\t\t\tvalue.value = crude.replace(/^\\s+|\\s+$/g, '');\r\n\t\t\t\t\t\t\t\t\tvalue.columnNumber = i;\r\n\t\t\t\t\t\t\t\t\tthis.formatValuesMeasures.push(value);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t//manage conditional formats\r\n\t\t\tif (measures[i].childNodes.length > 0) {\r\n\t\t\t\tif (measures[i].childNodes != null) {\r\n\t\t\t\t\tfor (var m = 0; m < measures[i].childNodes.length; m++) {\r\n\t\t\t\t\t\tif (measures[i].childNodes[m].localName == \"conditionalFormats\") {\r\n\t\t\t\t\t\t\tfor (var n = 0; n < measures[i].childNodes[m].childNodes.length; n++) {\r\n\t\t\t\t\t\t\t\tif (measures[i].childNodes[m].childNodes[n].localName == \"rule\") {\r\n\t\t\t\t\t\t\t\t\tvar format = {};\r\n\t\t\t\t\t\t\t\t\tformat.format = measures[i].childNodes[m].childNodes[n].attributes.getNamedItem(\"format\").nodeValue;\r\n\t\t\t\t\t\t\t\t\tformat.operation1 = measures[i].childNodes[m].childNodes[n].attributes.getNamedItem(\"op1\").nodeValue;\r\n\t\t\t\t\t\t\t\t\tformat.value1 = measures[i].childNodes[m].childNodes[n].attributes.getNamedItem(\"value1\").nodeValue;\r\n\t\t\t\t\t\t\t\t\tif (measures[i].childNodes[m].childNodes[n].attributes.getNamedItem(\"op2\") != null) {\r\n\t\t\t\t\t\t\t\t\t\tformat.operation2 = measures[i].childNodes[m].childNodes[n].attributes.getNamedItem(\"op2\").nodeValue;\r\n\t\t\t\t\t\t\t\t\t\tformat.value2 = measures[i].childNodes[m].childNodes[n].attributes.getNamedItem(\"value2\").nodeValue;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tformat.columnNumber = i; //+ columns.length; Only the measure number\r\n\t\t\t\t\t\t\t\t\tthis.conditionalFormats.push(format);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t//manage pictures\r\n\t\t\tif (measures[i].attributes.getNamedItem(\"picture\").nodeValue != \"\") {\r\n\t\t\t\tif (measures[i].attributes.getNamedItem(\"dataType\").nodeValue == \"date\") {\r\n\t\t\t\t\tdatePictures.push(measures[i].attributes.getNamedItem(\"picture\").nodeValue);\r\n\t\t\t\t\tdateFields.push(measures[i].attributes.getNamedItem(\"dataField\").nodeValue);\r\n\t\t\t\t}\r\n\t\t\t\tif (measures[i].attributes.getNamedItem(\"dataType\").nodeValue == \"integer\" || measures[i].attributes.getNamedItem(\"dataType\").nodeValue == \"real\") {\r\n\t\t\t\t\tintPictures.push(measures[i].attributes.getNamedItem(\"picture\").nodeValue);\r\n\t\t\t\t\tintFields.push(measures[i].attributes.getNamedItem(\"dataField\").nodeValue);/* */\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t//manage formula\r\n\t\t\tif ((measures[i].attributes.getNamedItem(\"formula\") != undefined) && (measures[i].attributes.getNamedItem(\"formula\").nodeValue != \"\")) {\r\n\t\t\t\tformulaInfo.measureFormula.push({ hasFormula: true, textFormula: measures[i].attributes.getNamedItem(\"formula\").nodeValue })\r\n\t\t\t} else {\r\n\t\t\t\tformulaInfo.measureFormula.push({ hasFormula: false })\r\n\t\t\t}\r\n\r\n\t\t\tthis.forPivotCustomPicture.push(measures[i].attributes.getNamedItem(\"picture\").nodeValue);\r\n\t\t\torderFilds.push(measures[i].attributes.getNamedItem(\"dataField\").nodeValue);\r\n\t\t}\r\n\r\n\r\n\t\tthis.header = preHeader.concat(measureNames);\r\n\r\n\t\tthis.getDataFromXML = function (dataString, tableOrderField){\r\n\t\t\tvar stringRecord = dataString.split(\"<Record>\")\r\n\r\n\t\t\t//get server pagination info\r\n\t\t\tif (this.serverPaging) {\r\n\t\t\t\tthis.ServerRecordCount = parseToIntRegisterValue(stringRecord[0], \"RecordCount\")\r\n\t\t\t\tthis.ServerPageCount = parseToIntRegisterValue(stringRecord[0], \"PageCount\")\r\n\t\t\t\tthis.ServerPageNumber = parseToIntRegisterValue(stringRecord[0], \"PageNumber\")\r\n\t\t\t}\r\n\t\t\t//get records of the table\r\n\t\t\t/*var filds = orderFilds;\r\n\t\t\tif (this.TableOrderFilds != undefined) {\r\n\t\t\t\tfilds = this.TableOrderFilds;\r\n\t\t\t}*/\r\n\t\t\tfilds = tableOrderField;\r\n\t\t\t\r\n\t\t\tfor (var i = 1; i < stringRecord.length; i++) {\r\n\t\t\t\tvar recordData = [];\r\n\t\t\t\tvar fullRecordData = [];\r\n\t\t\t\tfor (var j = 0; j < filds.length; j++) {\r\n\t\t\t\t\trecordData[j] = \"#NuN#\"\r\n\t\t\t\t\tvar dt = stringRecord[i].split(\"<\" + filds[j] + \">\")\r\n\t\t\t\t\tif (dt.length > 1) {\r\n\t\t\t\t\t\tvar at = dt[1].split(\"</\" + filds[j] + \">\")\r\n\t\t\t\t\t\t/*var rp = at[0].replace(/^\\s+|\\s+$/g, '')\r\n\t\t\t\t\t\trecordData[j] = (rp != \"\") ? rp : undefined*/\r\n\t\t\t\t\t\trecordData[j] = at[0]\r\n\t\t\t\t\t\tfullRecordData[j] = recordData[j]\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (stringRecord[i].indexOf(\"<\" + filds[j] + \"/>\") >= 0) {\r\n\t\t\t\t\t\t\trecordData[j] = \"\"\r\n\t\t\t\t\t\t\tfullRecordData[j] = \"\"\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.data.push(recordData);\r\n\r\n\t\t\t\tvar pos_init = filds.length;\r\n\t\t\t\tfor (var j = 0; j < this.HideDataFilds.length; j++) {\r\n\t\t\t\t\tfullRecordData[pos_init + j] = undefined\r\n\t\t\t\t\tvar dt = stringRecord[i].split(\"<\" + this.HideDataFilds[j] + \">\")\r\n\t\t\t\t\tif (dt.length > 1) {\r\n\t\t\t\t\t\tvar at = dt[1].split(\"</\" + this.HideDataFilds[j] + \">\")\r\n\t\t\t\t\t\tfullRecordData[pos_init + j] = at[0]\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.fullRecord.push(fullRecordData);\r\n\t\t\t\tif (fullRecordData.length > this.maxLengthRecord) this.maxLengthRecord = fullRecordData.length;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.maxLengthRecord = 0;\r\n\t\tthis.data = []\r\n\t\tthis.fullRecord = []  //array to store extra data for formulas\r\n\t\tthis.orderFildsHidden = orderFildsHidden\r\n\t\tthis.TableOrderFilds = orderFilds;\r\n\t\tif (!pivotParams.ServerPagingPivot) {\r\n\t\t\tthis.getDataFromXML(pivotParams.data, this.TableOrderFilds);\r\n\t\t} else {\r\n\t\t\tShowMeasuresAsRows = ((ShowMeasuresAsRows) && (measures.length > 1))\r\n\t\t\tthis.pagingData = {}//OATGetDataFromXMLForPivot(this.dataString, ShowMeasuresAsRows);\r\n\t\t\tthis.pagingData.dataFields = orderFilds;\r\n\t\t}\r\n\r\n\t\tvar furmulaIndex = {}\r\n\t\tfor (var j = 0; j < orderFildsHidden.length; j++) {\r\n\t\t\tfurmulaIndex[orderFildsHidden[j]] = orderFilds.length + j\r\n\t\t}\r\n\t\tthis.orderFildsHidden = nameFildsHidden\r\n\t\tformulaInfo.itemPosition = furmulaIndex\r\n\t\tformulaInfo.recordDataLength = this.maxLengthRecord;\r\n\t\tformulaInfo.cantFormulaMeasures = 0;\r\n\r\n\t\tfor (var n = 0; n < formulaInfo.measureFormula.length; n++) {\r\n\t\t\tif (formulaInfo.measureFormula[n].hasFormula) {\r\n\t\t\t\tformulaInfo.cantFormulaMeasures++;\r\n\r\n\t\t\t\tvar inlineFormula = formulaInfo.measureFormula[n].textFormula\r\n\r\n\t\t\t\tvar inline = inlineFormula\r\n\t\t\t\tvar opers = ['*', '-', '+', '/', '(', ')']\r\n\t\t\t\tfor (var j = 0; j < opers.length; j++) {\r\n\t\t\t\t\tvar inline2 = inline.split(opers[j])\r\n\t\t\t\t\tif (inline2.length > 1) {\r\n\t\t\t\t\t\tinline = \"\"\r\n\t\t\t\t\t\tfor (var i = 0; i < inline2.length - 1; i++) {\r\n\t\t\t\t\t\t\tinline = inline + inline2[i] + \" \" + opers[j] + \" \"\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tinline = inline + inline2[inline2.length - 1]\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar polishNot = InfixToPostfix(inline)\r\n\t\t\t\tformulaInfo.measureFormula[n].polishNotationText = polishNot\r\n\t\t\t\tvar items = polishNot.split(\" \")\r\n\t\t\t\twhile (items.indexOf(\"\") != -1) {\r\n\t\t\t\t\titems.splice(items.indexOf(\"\"), 1)\r\n\t\t\t\t}\r\n\t\t\t\tvar relatedMeasure = []\r\n\t\t\t\tfor (var k = 0; k < items.length; k++) {\r\n\t\t\t\t\tif ((opers.indexOf(items[k]) == -1) && (isNaN(parseInt(items[k])))) {\r\n\t\t\t\t\t\t//add item\r\n\t\t\t\t\t\tvar operPositionInDataRow = formulaInfo.itemPosition[items[k]]\r\n\t\t\t\t\t\tif (relatedMeasure.indexOf(operPositionInDataRow) == -1)\r\n\t\t\t\t\t\t\trelatedMeasure.push(operPositionInDataRow)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tformulaInfo.measureFormula[n].relatedMeasures = relatedMeasure\r\n\r\n\t\t\t\tvar arrayNot = polishNot.split(\" \")\r\n\t\t\t\twhile (arrayNot.indexOf(\"\") != -1) {\r\n\t\t\t\t\tarrayNot.splice(arrayNot.indexOf(\"\"), 1)\r\n\t\t\t\t}\r\n\t\t\t\tformulaInfo.measureFormula[n].PolishNotation = arrayNot\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar l = 0;\r\n\t\tvar m = 0;\r\n\t\tvar d = 0;\r\n\t\tfor (var i = 0; i < preHeader.length; i++) {\r\n\t\t\tif (this.contains(columnNames, preHeader[i]) != -1) {\r\n\t\t\t\tthis.columnNumbers[l] = i;\r\n\t\t\t\tl++;\r\n\t\t\t}\r\n\t\t\tif (this.contains(rowNames, preHeader[i]) != -1) {\r\n\t\t\t\tthis.rowNumbers[m] = i;\r\n\t\t\t\tm++;\r\n\t\t\t}\r\n\t\t\tif (this.contains(filterNames, preHeader[i]) != -1) {\r\n\t\t\t\tthis.filterNumbers[d] = i;\r\n\t\t\t\td++;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//crear arreglo de columnas\r\n\t\tvar colms = new Array();\r\n\t\tfor (var t = 0; t < columns.length; t++) {\r\n\t\t\tcolms[t] = columns[t];\r\n\t\t}\r\n\r\n\t\tvar urlRelative = \"\"\r\n\r\n\t\tfor (var i = 0; i < jQuery('script').length; i++) {\r\n\t\t\tvar js_url = jQuery('script')[i].src\r\n\t\t\tif (js_url.indexOf(\"gxpivotjs\") > 0) {\r\n\t\t\t\turlRelative = js_url\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tif (js_url.indexOf(\"oat_loader\") > 0) {\r\n\t\t\t\turlRelative = js_url\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\r\n\t\tvar relativePath = urlRelative.substring(0, urlRelative.indexOf(\"QueryViewer/oatPivot\"));\r\n\t\tthis.relativePath = relativePath\r\n\t\r\n\t\tthis.fireOnPageChangeTable = function(UcId, move){\r\n\t\t\tsetTimeout( function() {\r\n\t\t\t\tvar paramobj = {\"QueryviewerId\": UcId, \"Navigation\": move};\r\n\t\t\t\tvar evt = document.createEvent(\"Events\")\r\n\t\t\t\tevt.initEvent(\"TableOnPageChangeEvent\", true, true);\r\n\t\t\t\tevt.parameter = paramobj;\r\n\t\t\t\tdocument.dispatchEvent(evt);\r\n\t\t\t}, 0)\r\n\t\t}\r\n\t\r\n\t\tvar pivot;\r\n\r\n\t\tqueryName = queryName.replace(/\\./g, \"\")\r\n\t\tthis.query = queryName\r\n\t\tthis.translations = translations\r\n\t\tif (type == \"PivotTable\") {\r\n\t\t\tpivot = OAT_JS.pivot.cb(this, this.pivotDiv, page, content, defaultPicture, QueryViewerCollection, colms,\r\n\t\t\t\tthis.formatValues, this.conditionalFormatsColumns, this.formatValuesMeasures, this.autoResize, this.disableColumnSort, this.UcId, this.IdForQueryViewerCollection,\r\n\t\t\t\trememberLayout, ShowMeasuresAsRows, formulaInfo, this.fullRecord,\r\n\t\t\t\tpivotParams.ServerPagingPivot, this.pagingData, this.HideDataFilds, this.orderFildsHidden, this.InitMetadata, this.relativePath,\r\n\t\t\t    this.pivotParams );\r\n\t\t\tif (pivot == 'error') {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (type == \"Table\") {\r\n\t\t\t\tpivot = OAT_JS.grid.cb(this.pivotDiv, this.UcId + '_' + queryName, columnsDataType, defaultPicture, this.forPivotCustomPicture, this.conditionalFormatsColumns,\r\n\t\t\t\t\tthis.formatValues, this.forPivotCustomFormat, colms, columns, QueryViewerCollection, this.pageSize, this.disableColumnSort, this.UcId, this.IdForQueryViewerCollection,\r\n\t\t\t\t\trememberLayout, this);\r\n\t\t\t}\r\n\t\t}\r\n\t\t//add pagination functionality\r\n\t\tif (type == \"Table\") {\r\n\t\t\tthis.pageSize = (this.previousState) ? this.previousState.pageSize : pageSize;\r\n\r\n\t\t\tvar rowNum = this.pageSize;\r\n\t\t\tif ((pivot.rowsPerPage != undefined) && (pivot.rowsPerPage != \"\")) {\r\n\t\t\t\trowNum = pivot.rowsPerPage;\r\n\t\t\t}\r\n\r\n\t\t\tif (QueryViewerCollection[this.UcId]._ControlRenderedTo) {\r\n\t\t\t\tjQuery(\"#\"+this.UcId + \"_\" + this.query + \"_tablePagination\").remove(); //jQuery(\".pivot_pag_div\").remove()\r\n\t\t\t}\r\n\r\n\t\t\tif (this.pageSize) {\r\n\t\t\t\t\r\n\t\t\t\t\tvar options = {\r\n\t\t\t\t\t\tcurrPage: this.ServerPageNumber,\r\n\t\t\t\t\t\tignoreRows: jQuery('tbody tr[visibQ=tf]', jQuery(\"#\" + this.UcId + \"_\" + this.query)),\r\n\t\t\t\t\t\toptionsForRows: OAT.AddItemToList([10, 15, 20], this.InitMetadata.RowsPerPage),\r\n\t\t\t\t\t\trowsPerPage: rowNum != 'undefined' ? rowNum : 10,\r\n\t\t\t\t\t\tjstype: \"table\",\r\n\t\t\t\t\t\ttopNav: false,\r\n\t\t\t\t\t\tcontrolName: this.UcId + \"_\" + this.query,\r\n\t\t\t\t\t\tcantPages: this.ServerPageCount,\r\n\t\t\t\t\t\tcontrolUcId: this.UcId,\r\n\t\t\t\t\t\ttranslations: translations,\r\n\t\t\t\t\t\tcontrol: this\r\n\t\t\t\t\t}\r\n\t\t\t\t\tOAT.partialTablePagination(jQuery(\"#\" + this.UcId + \"_\" + this.query),options);\r\n\t\t\t\t\tvar wd2 = jQuery(\"#\" + this.UcId + \"_\" + this.query)[0].clientWidth - 1;\r\n\t\t\t\t\tjQuery(\"#\" + this.UcId + \"_\" + this.query + \"_tablePagination\").css({ width: wd2 + \"px\" });\r\n\t\t\t\t\tif (jQuery(\"#\" + this.UcId + \"_\" + this.query + \"_tablePagination\").css('display') === 'none') {\r\n\t\t\t\t\t\tjQuery(\"#\" + this.UcId + \"_\" + this.query).css({ marginBottom: \"0px\" });\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tjQuery(\"#\" + this.UcId + \"_\" + this.query).css(\"margin-bottom\", \"0px\");\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ((jQuery(\"#\" + this.UcId + \"_\" + this.query + \"_tablePagination_paginater\").length > 0) && (jQuery(\"#\" + this.UcId + \"_\" + this.query + \"_tablePagination\")[0].getBoundingClientRect().bottom < jQuery(\"#\" + this.UcId + \"_\" + this.query + \"_tablePagination_paginater\")[0].getBoundingClientRect().bottom)) {\r\n\t\t\t\t\t\tjQuery(\"#\" + this.UcId + \"_\" + this.query + \"_tablePagination\").css({ marginBottom: \"0px\" })\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar wd = jQuery(\"#\" + this.UcId + \"_\" + this.query)[0].offsetWidth - 4;\r\n\t\t\t\t\tjQuery(\"#\" + this.UcId + \"_\" + this.query + \"_grid_top_div\").css({ width: wd + \"px\" });\r\n\r\n\t\t\t\t\tif ((this.serverPaging) && ((this.pageSize == 10) || (this.ServerRecordCount < 10))) {\r\n\t\t\t\t\t\tif (this.ServerPageCount <= 1) { //hide pagiantion\r\n\t\t\t\t\t\t\tjQuery(\"#\" + this.UcId + \"_\" + this.query + \"_tablePagination\").css({ display: \"none\" });\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\r\n\r\n\t\t\t}\r\n\t\t\tvar wd = jQuery(\"#\" + this.UcId + \"_\" + this.query)[0].offsetWidth - 4;\r\n\t\t\ttry {\r\n\t\t\t\tif (jQuery(\"#MAINFORM\")[0].className.indexOf(\"form-horizontal\") > -1) {\r\n\t\t\t\t\twd = wd + 4;\r\n\t\t\t\t}\r\n\t\t\t} catch (Error) {\r\n\t\t\t}\r\n\t\t\tjQuery(\"#\" + this.UcId + \"_\" + this.query + \"_grid_top_div\").css({ width: wd + \"px\" });\r\n\r\n\t\t\t//set interval for handler values infinite scroll\r\n\t\t\tif (self.serverPaging) {\r\n\t\t\t\tsetInterval(function () {\r\n\t\t\t\t\tfor (var t = 0; t < jQuery(\".oat_winrect_container .pivot_popup_fix\").length; t++) {\r\n\t\t\t\t\t\tif ((!jQuery(\".oat_winrect_container .pivot_popup_fix\").closest(\".oat_winrect_container\")[t].style.display) ||\r\n\t\t\t\t\t\t\t(jQuery(\".oat_winrect_container .pivot_popup_fix\").closest(\".oat_winrect_container\")[t].style.display != \"none\")) {\r\n\r\n\t\t\t\t\t\t\tif (jQuery(\".oat_winrect_container .pivot_popup_fix\").length > 0) {\r\n\t\t\t\t\t\t\t\tvar element = jQuery(\".oat_winrect_container .pivot_popup_fix\")[t];\r\n\t\t\t\t\t\t\t\tvar scrollBottom = element.scrollHeight - element.clientHeight - element.scrollTop\r\n\t\t\t\t\t\t\t\tif (scrollBottom < 25) {\r\n\t\t\t\t\t\t\t\t\tvar UcId = element.getAttribute(\"ucid\")\r\n\t\t\t\t\t\t\t\t\tvar columnNumber = parseInt(element.getAttribute(\"columnNumber\"))\r\n\t\t\t\t\t\t\t\t\tOAT_JS.grid.readScrollValue(UcId, columnNumber)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t\t250)\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif (!pivotParams.ServerPagingPivot) {\r\n\t\t\tif (this.autoResize) {\r\n\t\t\t\tjQuery(\"#\" + this.UcId + \"_\" + this.query).css({ minWidth: \"10px\" });\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.getDataForTable = function (UcId, pageNumber, rowsPerPage, recalculateCantPages, DataFieldOrder, OrderType, DataFieldFilter, DataFieldBlackList, restoreDefaultView, fromExternalRefresh) {\r\n\t\t\tvar layoutChanged = false;\r\n\t\t\tif ((recalculateCantPages) || (DataFieldOrder != \"\") || (DataFieldFilter != \"\")) {\r\n\t\t\t\tOAT_JS.grid.cleanCache(this, UcId);\r\n\t\t\t\tlayoutChanged = true;\r\n\t\t\t}\r\n\t\t\tif (DataFieldOrder != \"\") OAT_JS.grid.gridData[UcId].dataFieldOrder = DataFieldOrder;\r\n\t\t\tif (OrderType != \"\") OAT_JS.grid.gridData[UcId].orderType = OrderType;\r\n\t\t\tif (DataFieldFilter != \"\") OAT_JS.grid.updateFilterInfo(UcId, DataFieldFilter, DataFieldBlackList);\r\n\t\t\tif (restoreDefaultView) { OAT_JS.grid.restoreDefaultView(UcId); rowsPerPage = OAT_JS.grid.gridData[UcId].rowsPerPage }\r\n\r\n\t\t\tOAT_JS.grid.gridData[UcId].rowsPerPage = rowsPerPage\r\n\t\t\tif ((recalculateCantPages) || (DataFieldOrder != \"\") || (DataFieldFilter != \"\")) {//save state\r\n\t\t\t\tOAT.SaveStateWhenServerPaging(OAT_JS.grid.gridData[UcId], UcId, OAT_JS.grid.gridData[UcId].blackLists, OAT_JS.grid.gridData[UcId].columnVisible, OAT_JS.grid.gridData[UcId].columnDataField)\r\n\t\t\t}\r\n\r\n\t\t\t\r\n\t\t\tif (rowsPerPage == \"\") { rowsPerPage = undefined; pageNumber = 0; }\r\n\r\n\t\t\tif (!OAT_JS.grid.pageInCache(UcId, pageNumber)) {\r\n\t\t\t\t\r\n\t\t\t\tOAT_JS.grid.lastCallToQueryViewer = \"getDataForTable\"\r\n\t\t\t\tOAT_JS.grid.lastCallData = { \"self\": this, \"UcId\": OAT_JS.grid.gridData[UcId].IdForQueryViewerCollection, \"RecalculateCantPages\":recalculateCantPages, \"DataFieldOrder\":DataFieldOrder, \"PageNumber\": pageNumber, \"fromExternalRefresh\": fromExternalRefresh}\r\n\t\t\t\tthis.requestPageDataForTable(pageNumber, rowsPerPage, recalculateCantPages, OAT_JS.grid.gridData[UcId].dataFieldOrder, OAT_JS.grid.gridData[UcId].orderType, OAT_JS.grid.gridData[UcId].filterInfo, layoutChanged, OAT_JS.grid.gridData[UcId].IdForQueryViewerCollection)\r\n\t\t\t\t\r\n\t\t\t\t/*qv.collection[OAT_JS.grid.gridData[UcId].IdForQueryViewerCollection].getPageDataForTable((function (resXML) {\r\n\t\t\t\t\tif (pageNumber == 0) { pageNumber = 1, recalculateCantPages = false; }\r\n\t\t\t\t\tOAT_JS.grid.redraw(this, UcId, resXML, recalculateCantPages, DataFieldOrder != \"\", pageNumber, fromExternalRefresh)\r\n\t\t\t\t}).closure(this), [pageNumber, rowsPerPage, recalculateCantPages, OAT_JS.grid.gridData[UcId].dataFieldOrder, OAT_JS.grid.gridData[UcId].orderType, OAT_JS.grid.gridData[UcId].filterInfo, layoutChanged]);*/\r\n\t\t\t} else {\r\n\t\t\t\tOAT_JS.grid.redraw(this, UcId, OAT_JS.grid.pageInCache(UcId, pageNumber), false, false, pageNumber, true)\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\tthis.requestPageDataForTable = function(PageNumber, PageSize, recalculateCantPages, DataFieldOrder, OrderType, Filters, LayoutChange, IdForQueryViewerCollection){\r\n\t\t\tsetTimeout( function() {\r\n\t\t\t\tvar paramobj = {  \"PageNumber\": PageNumber, \"PageSize\": PageSize,\"RecalculateCantPages\":recalculateCantPages, \"DataFieldOrder\":DataFieldOrder, \r\n\t\t\t\t\t\"OrderType\":OrderType, \"Filters\":Filters, \"LayoutChange\":LayoutChange, \"QueryviewerId\": IdForQueryViewerCollection};\r\n\t\t\t\tvar evt = document.createEvent(\"Events\")\r\n\t\t\t\tevt.initEvent(\"RequestPageDataForTable\", true, true);\r\n\t\t\t\tevt.parameter = paramobj;\r\n\t\t\t\tdocument.dispatchEvent(evt);\r\n\t\t\t}, 0)\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\tthis.getActualCantPages = function(UcId){  \r\n\t\t \treturn OAT_JS.grid.gridData[UcId].actualCantPages\r\n\t\t}\r\n\t\t\r\n\t\tthis.getValuesForColumn = function (UcId, columnNumber, filterValue) {\r\n\t\t\tvar dataField = OAT_JS.grid.gridData[UcId].columnDataField[columnNumber]\r\n\t\t\tif (filterValue != \"\") {\r\n\t\t\t\tvar page = 1;\r\n\t\t\t\t\r\n\t\t\t\tOAT_JS.grid.lastCallToQueryViewer = \"getValuesForColumn\"\r\n\t\t\t\tOAT_JS.grid.lastCallData = { \"self\": this, \"UcId\": UcId, \"columnNumber\": columnNumber, \"filterValue\": filterValue, \"dataField\": dataField }\r\n\t\t\t\t\r\n\t\t\t\tthis.requestAttributeForTable(UcId, dataField, page, filterValue, 10)\r\n\t\t\t\t/*qv.collection[OAT_JS.grid.gridData[UcId].IdForQueryViewerCollection].getAttributeValues((function (resJSON) {\r\n\t\t\t\t\tvar res = JSON.parse(resJSON);\r\n\t\t\t\t\tOAT_JS.grid.changeValues(UcId, dataField, columnNumber, res, filterValue);\r\n\t\t\t\t}).closure(this), [dataField, page, 10, filterValue]);*/\r\n\t\t\t} else {\r\n\t\t\t\tOAT_JS.grid.resetScrollValue(UcId, dataField, columnNumber)\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\tthis.requestAttributeForTable = function(UcId, dataField, page, filterValue, pageSize){\r\n\t\t\tsetTimeout( function() {\r\n\t\t\t\tvar paramobj = {  \"Page\": page, \"PageSize\": pageSize, \"DataField\": dataField, \"Filters\":filterValue, \"QueryviewerId\": UcId};\r\n\t\t\t\tvar evt = document.createEvent(\"Events\")\r\n\t\t\t\tevt.initEvent(\"RequestAttributeForTable\", true, true);\r\n\t\t\t\tevt.parameter = paramobj;\r\n\t\t\t\tdocument.dispatchEvent(evt);\r\n\t\t\t}, 0)\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\tthis.fireOnFilterChanged = function(UcId, FilterChangedData){\r\n\t\t\tsetTimeout( function() {\r\n\t\t\t\tvar paramobj = {\"QueryViewerd\": UcId, \"FilterChangedData\": FilterChangedData};\r\n\t\t\t\tvar evt = document.createEvent(\"Events\")\r\n\t\t\t\tevt.initEvent(\"TableOnFilterChangedEvent\", true, true);\r\n\t\t\t\tevt.parameter = paramobj;\r\n\t\t\t\tdocument.dispatchEvent(evt);\r\n\t\t\t}, 0)\r\n\t\t}\r\n\t\t\r\n\t\tqueryself.oat_element = pivot;\r\n\r\n\r\n\t}\r\n\r\n\tvar OAT_JS = {};\r\n\r\n\tOAT_JS.grid = {\r\n\t\tpanel: 1,\r\n\t\ttab: 4,\r\n\t\tdiv: \"\",\r\n\t\tneeds: [\"grid\"],\r\n\t\tgridData: [],\r\n\t\tcb: function (content, controlName, columnsDataType, defaultPicture, forPivotCustomPicture, conditionalFormatsColumns, formatValues, forPivotCustomFormar, colms, columns,\r\n\t\t\tQueryViewerCollection, pageSize, disableColumnSort, UcId, IdForQueryViewerCollection, rememberLayout, _mthis) {\r\n\t\t\tthis.gridData[UcId] = {};\r\n\t\t\tthis.gridData[UcId].div = content;\r\n\t\t\tthis.gridData[UcId].controlName = controlName;\r\n\r\n\t\t\tthis.gridData[UcId].actualPageNumber = 1;\r\n\t\t\tthis.gridData[UcId].rowsPerPage = (_mthis.previousState) ? _mthis.previousState.pageSize : pageSize;\r\n\t\t\tthis.gridData[UcId].actualCantPages = _mthis.ServerPageCount;\r\n\t\t\t\r\n\t\t\tthis.gridData[UcId].autoResize = _mthis.autoResize;\r\n\t\t\tthis.gridData[UcId].selection = {Allow: _mthis.pivotParams.AllowSelection, EntireLine: _mthis.pivotParams.SelectLine, SelectedNode: []};\r\n\t\t\t\r\n\t\t\tthis.gridData[UcId].grid = new OAT.Grid(content, controlName, query, columnsDataType, colms, QueryViewerCollection, this.gridData[UcId].rowsPerPage,\r\n\t\t\t\tdisableColumnSort, UcId, IdForQueryViewerCollection, rememberLayout, _mthis.serverPaging, _mthis.HideDataFilds, _mthis.orderFildsHidden, _mthis.TableOrderFilds, _mthis.relativePath,\r\n\t\t\t\tthis.gridData[UcId].selection, _mthis.pivotParams.Title, _mthis.translations );\r\n\t\t\tthis.gridData[UcId].grid.oat_component = this;\r\n\t\t\t\r\n\r\n\t\t\t//initialize \r\n\t\t\tthis.gridData[UcId].columnDataField = []\r\n\t\t\tif ((_mthis.previousState) && (_mthis.previousState.columnDataField)){\r\n\t\t\t\tthis.gridData[UcId].columnDataField = _mthis.previousState.columnDataField\r\n\t\t\t\tvar header = [];\r\n\t\t\t\r\n\t\t\t\tfor(var i = 0; i < this.gridData[UcId].columnDataField.length; i++){\r\n\t\t\t\t\tvar dtF = this.gridData[UcId].columnDataField[i]\r\n\t\t\t\t\tfor(var j = 0 ; j < columns.length; j++){\r\n\t\t\t\t\t\tif (dtF == columns[j].getAttribute(\"dataField\"))\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\theader.push(columns[j].getAttribute(\"displayName\"));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.gridData[UcId].grid.createHeader(header, this.gridData[UcId].columnDataField);\r\n\t\t\t} else {\r\n\t\t\t\tfor (var id = 0; id < columns.length; id++) {\r\n\t\t\t\t\tthis.gridData[UcId].columnDataField[id] = columns[id].getAttribute(\"dataField\");\r\n\t\t\t\t}\r\n\t\t\t\tthis.gridData[UcId].grid.createHeader(_mthis.header, this.gridData[UcId].columnDataField);\r\n\t\t\t}\r\n\r\n\t\t\t\r\n\t\t\tthis.gridData[UcId].redrawHeader = false\r\n\t\t\t\r\n\t\t\t//initialize default data\r\n\t\t\tthis.gridData[UcId].defaultValues = {}\r\n\t\t\tthis.gridData[UcId].defaultValues.rowsPerPage = pageSize;\r\n\t\t\tthis.gridData[UcId].defaultValues.dataFieldOrder = \"\";\r\n\t\t\tthis.gridData[UcId].defaultValues.orderType = \"\"\r\n\t\t\tthis.gridData[UcId].defaultValues.filterInfo = [];\r\n\r\n\r\n\t\t\tthis.gridData[UcId].IdForQueryViewerCollection = IdForQueryViewerCollection;\r\n\t\t\t\r\n\t\t\tthis.gridData[UcId].TableOrderFields = _mthis.TableOrderFilds;\r\n\r\n\t\t\t//initialize cache\r\n\t\t\tthis.gridData[UcId].cacheSize = (_mthis.gridCacheSize == 0) ? (_mthis.ServerPageCount * ((this.gridData[UcId].rowsPerPage > 0) ? this.gridData[UcId].rowsPerPage : 1)) : _mthis.gridCacheSize;\r\n\t\t\tthis.gridData[UcId].gridCache = [];\r\n\t\t\tthis.gridData[UcId].gridCache[0] = { page: 1, pageData: _mthis.dataString };\r\n\t\t\tthis.gridData[UcId].nextCachePos = 1;\r\n\t\t\t//end initialize cache\r\n\t\t\t\r\n\t\t\t//initialize  dataFields\r\n\t\t\tthis.gridData[UcId].originalColumnDataField = []\r\n\t\t\tfor (var id = 0; id < columns.length; id++) {\r\n\t\t\t\tthis.gridData[UcId].originalColumnDataField[id] = columns[id].getAttribute(\"dataField\");\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t//initialize column visibility\r\n\t\t\tthis.gridData[UcId].columnVisible = [];\r\n\t\t\tfor (var id = 0; id < columns.length; id++) {\r\n\t\t\t\tthis.gridData[UcId].columnVisible[id] = true\r\n\t\t\t\tif (_mthis.previousColumnVisible) {\r\n\t\t\t\t\tthis.gridData[UcId].columnVisible[id] = _mthis.previousColumnVisible[id]\r\n\t\t\t\t\tif (!this.gridData[UcId].columnVisible[id]){\r\n\t\t\t\t\t\tvar dtF = this.gridData[UcId].originalColumnDataField[id]\t\r\n\t\t\t\t\t\tthis.gridData[UcId].grid.hideColumnHeader(this.gridData[UcId].columnDataField.indexOf(dtF));\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (_mthis.initialColumnVisible) {\r\n\t\t\t\t\tthis.gridData[UcId].columnVisible[id] = _mthis.initialColumnVisible[id]\r\n\t\t\t\t\tif (!this.gridData[UcId].columnVisible[id])\r\n\t\t\t\t\t\tthis.gridData[UcId].grid.hideColumnHeader(id);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\r\n\t\t\t//initialize filter info\r\n\t\t\tthis.gridData[UcId].filterInfo = [];\r\n\t\t\tthis.gridData[UcId].differentValues = [];\r\n\t\t\tthis.gridData[UcId].blackLists = [];\r\n\t\t\tthis.gridData[UcId].differentValuesPaginationInfo = [];\r\n\t\t\tthis.gridData[UcId].filteredValuesPaginationInfo = [];\r\n\t\t\tfor (var id = 0; id < columns.length; id++) {\r\n\t\t\t\tthis.gridData[UcId].differentValues[columns[id].getAttribute(\"dataField\")] = [];\r\n\t\t\t\tthis.gridData[UcId].blackLists[columns[id].getAttribute(\"dataField\")] = { state: \"all\", visibles: [], hiddens: [], defaultAction: \"Include\", hasNull: true };\r\n\t\t\t\tthis.gridData[UcId].differentValuesPaginationInfo[columns[id].getAttribute(\"dataField\")] = {\r\n\t\t\t\t\tblocked: false, previousPage: 0,\r\n\t\t\t\t\ttotalPages: true, filtered: false\r\n\t\t\t\t}\r\n\t\t\t\tthis.gridData[UcId].filteredValuesPaginationInfo[columns[id].getAttribute(\"dataField\")] = { previousPage: 0, totalPages: 0, filteredText: \"\", values: [] }\r\n\t\t\t}\r\n\r\n\t\t\tthis.gridData[UcId].defaultNullText = defaultPicture.getAttribute(\"textForNullValues\");\r\n\r\n\t\t\tif (_mthis.previousFilters != undefined) {//load previus state filter info\r\n\t\t\t\tthis.gridData[UcId].filterInfo = _mthis.previousFilters;\r\n\t\t\t\tfor (var u = 0; u < this.gridData[UcId].filterInfo.length; u++) {\r\n\t\t\t\t\tfor (var t = 0; t < this.gridData[UcId].filterInfo[u].NotNullValues.Included.length; t++) {\r\n\t\t\t\t\t\tvar val = this.gridData[UcId].filterInfo[u].NotNullValues.Included[t];\r\n\t\t\t\t\t\tif (this.gridData[UcId].blackLists[this.gridData[UcId].filterInfo[u].DataField].visibles.indexOf(val) == -1) {\r\n\t\t\t\t\t\t\tthis.gridData[UcId].blackLists[this.gridData[UcId].filterInfo[u].DataField].visibles.push(val);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfor (var t = 0; t < this.gridData[UcId].filterInfo[u].NotNullValues.Excluded.length; t++) {\r\n\t\t\t\t\t\tvar val = this.gridData[UcId].filterInfo[u].NotNullValues.Excluded[t];\r\n\t\t\t\t\t\tif (this.gridData[UcId].blackLists[this.gridData[UcId].filterInfo[u].DataField].hiddens.indexOf(val) == -1) {\r\n\t\t\t\t\t\t\tthis.gridData[UcId].blackLists[this.gridData[UcId].filterInfo[u].DataField].hiddens.push(val);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (this.gridData[UcId].filterInfo[u].NotNullValues.Included.length > 0) {\r\n\t\t\t\t\t\tthis.gridData[UcId].blackLists[this.gridData[UcId].filterInfo[u].DataField].state = \"\";\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.gridData[UcId].blackLists[this.gridData[UcId].filterInfo[u].DataField].state = \"none\";\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis.gridData[UcId].blackLists[this.gridData[UcId].filterInfo[u].DataField].defaultAction = this.gridData[UcId].filterInfo[u].NotNullValues.DefaultAction;\r\n\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif ((_mthis.customFilterInfo != undefined) & (_mthis.customFilterInfo != \"\")) {\r\n\t\t\t\t\tthis.gridData[UcId].filterInfo = _mthis.customFilterInfo;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t//end initialize filter info\r\n\t\t\t//initialize order info\r\n\t\t\tthis.gridData[UcId].dataFieldOrder = (_mthis.previousDataFieldOrder != undefined) ? _mthis.previousDataFieldOrder : \"\"\r\n\t\t\tthis.gridData[UcId].orderType = (_mthis.previousOrderType != undefined) ? _mthis.previousOrderType : \"\"\r\n\t\t\t//end initialize order info\r\n\t\t\t//for custom order\r\n\t\t\tthis.gridData[UcId].customOrderValues = [];\r\n\t\t\tfor (var index = 0; index < columns.length; index++) {\r\n\t\t\t\tif ((columns[index].getAttribute(\"order\") != undefined) && (columns[index].getAttribute(\"order\") === \"custom\")) {\r\n\t\t\t\t\tresult = this.gridData[UcId].grid.applyCustomSort(index, columns[index], data);\r\n\t\t\t\t\tdata = result[0]\r\n\t\t\t\t\tthis.gridData[UcId].customOrderValues[index] = result[1]\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.gridData[UcId].customOrderValues[index] = false\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.gridData[UcId].rowsMetadata = {\r\n\t\t\t\tcolumnsDataType: columnsDataType, defaultPicture: defaultPicture, forPivotCustomPicture: forPivotCustomPicture,\r\n\t\t\t\tconditionalFormatsColumns: conditionalFormatsColumns, formatValues: formatValues, forPivotCustomFormat: forPivotCustomFormat, columns: columns\r\n\t\t\t}\r\n\t\t\tthis.gridData[UcId].rowsData = data;\r\n\t\t\tfor (var i = 0; i < data.length; i++) {\r\n\t\t\t\tOAT.CreateGridRow(_mthis.data[i], this.gridData[UcId])\r\n\t\t\t}\r\n\r\n\t\t\t//for ascending or descending order\r\n\t\t\tif (!_mthis.serverPaging) {\r\n\t\t\t\tfor (var index = 0; index < columns.length; index++) {\r\n\t\t\t\t\tif ((columns[index].getAttribute(\"order\") != undefined) && (columns[index].getAttribute(\"order\") === \"ascending\")) {\r\n\t\t\t\t\t\tthis.gridData[UcId].grid.applySortOrderType(index, 2);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ((columns[index].getAttribute(\"order\") != undefined) && (columns[index].getAttribute(\"order\") === \"descending\")) {\r\n\t\t\t\t\t\tthis.gridData[UcId].grid.applySortOrderType(index, 3);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (columns[index].getAttribute(\"order\") != undefined) {\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tvar withOrderCustom = false\r\n\t\t\t\tfor (var index = 0; index < columns.length; index++) {\r\n\t\t\t\t\tif ((columns[index].getAttribute(\"order\") != undefined) && (columns[index].getAttribute(\"order\") != \"\")) {\r\n\t\t\t\t\t\tthis.gridData[UcId].dataFieldOrder = columns[index].getAttribute(\"dataField\")\r\n\t\t\t\t\t\tthis.gridData[UcId].orderType = (columns[index].getAttribute(\"order\") == \"descending\") ? \"Descending\" : \"Ascending\";\r\n\t\t\t\t\t\twithOrderCustom = (columns[index].getAttribute(\"order\") == \"custom\")\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ((this.gridData[UcId].dataFieldOrder != \"\") && (!withOrderCustom)) {\r\n\t\t\t\t\tvar columnOrderNumber = 0;\r\n\t\t\t\t\tfor (var t = 0; t < this.gridData[UcId].grid.columns.length; t++) {\r\n\t\t\t\t\t\tif (this.gridData[UcId].dataFieldOrder == this.gridData[UcId].columnDataField[t]) { //this.gridData[UcId].grid.columns[t].getAttribute(\"dataField\")){\r\n\t\t\t\t\t\t\tcolumnOrderNumber = t;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//var colNumber = columns.length - 1 - columnOrderNumber;\r\n\t\t\t\t\tthis.gridData[UcId].grid.applySortOrderType(columnOrderNumber, (this.gridData[UcId].orderType.toLowerCase() == \"ascending\") ? 2 : 3);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t//apply custom filters\r\n\t\t\t//this.gridData[UcId].mustRedraw = false; \r\n\t\t\tfor (var index = 0; index < columns.length; index++) {\r\n\t\t\t\tthis.gridData[UcId].grid.applyCustomFilter(index, columns[index]);\r\n\t\t\t\t//var toRedraw = this.gridData[UcId].grid.applyCustomFilter(index, columns[index]);\r\n\t\t\t\t//if (toRedraw) { this.gridData[UcId].mustRedraw = true; }\r\n\t\t\t}\r\n\r\n\t\t\t//load different values\r\n\t\t\tif (_mthis.serverPaging) {\r\n\t\t\t\t//OAT_JS.grid.initValueRead(UcId, 0)\r\n\t\t\t\tthis.gridData[UcId].endValueRead = false\r\n\t\t\t\t//call OnFirstPage on load\r\n\t\t\t\tqv.collection[this.gridData[UcId].IdForQueryViewerCollection].CurrentPage = 1;\r\n\t\t\t\tif (typeof (qv.collection[this.gridData[UcId].IdForQueryViewerCollection].OnFirstPage) == 'function') \r\n\t\t\t\t\t//qv.collection[this.gridData[UcId].IdForQueryViewerCollection].OnFirstPage()\r\n\t\t\t\t\tself.fireOnPageChangeTable(this.gridData[UcId].IdForQueryViewerCollection, \"OnFirstPage\")\r\n\t\t\t}\r\n\r\n\t\t\tif (!_mthis.serverPaging) {\r\n\t\t\t\tthis.gridData[UcId].grid.applySaveState(this.gridData[UcId].rowsPerPage);\r\n\t\t\t}\r\n\r\n\t\t\tif (_mthis.previousState) {\r\n\t\t\t\tvar __mthis = this\r\n\t\t\t\tsetTimeout( function() {\r\n\t\t\t\t\tself.getDataForTable(UcId, 1, __mthis.gridData[UcId].rowsPerPage, true, __mthis.gridData[UcId].dataFieldOrder, __mthis.gridData[UcId].orderType, \"\", \"\", \"\", false);\r\n\t\t\t\t} , 0)\r\n\t\t\t}\r\n\r\n\t\t\treturn this.gridData[UcId].grid;\r\n\t\t},\r\n\t\tredraw: function (_mthis, UcId, xmlData, recalculateCantPages, moveToFirstPage, pageNumber, fromExternalRefresh) {\r\n\t\t\t//add data to cache\r\n\t\t\tif (!this.pageInCache(UcId, pageNumber)) {\r\n\t\t\t\tthis.gridData[UcId].gridCache.push({ page: pageNumber, pageData: xmlData })\r\n\t\t\t\tif (this.gridData[UcId].gridCache.length > this.gridData[UcId].cacheSize) {\r\n\t\t\t\t\tthis.gridData[UcId].gridCache.splice(0, 1)\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tvar indCache = -1;\r\n\t\t\t\tfor (var cP = 0; cP < this.gridData[UcId].gridCache.length; cP++) {\r\n\t\t\t\t\tif (this.gridData[UcId].gridCache[cP].page == pageNumber) {\r\n\t\t\t\t\t\tindCache = cP;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.gridData[UcId].gridCache.splice(indCache, 1)\r\n\t\t\t\tthis.gridData[UcId].gridCache.push({ page: pageNumber, pageData: xmlData })\r\n\t\t\t}\r\n\t\t\t//end add data to cache\r\n\t\t\t_mthis.data = []\r\n\t\t\t_mthis.getDataFromXML(xmlData, this.gridData[UcId].TableOrderFields);\r\n\t\t\tif (_mthis.ServerPageCount >= 0) {\r\n\t\t\t\tthis.gridData[UcId].actualCantPages = _mthis.ServerPageCount;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t//redraw header when neded\r\n\t\t\tif (this.gridData[UcId].redrawHeader){\r\n\t\t\t\tvar actualheader = [];\r\n\t\t\t\r\n\t\t\t\tfor(var i = 0; i < this.gridData[UcId].columnDataField.length; i++){\r\n\t\t\t\t\tvar dtF = this.gridData[UcId].columnDataField[i]\r\n\t\t\t\t\tfor(var j = 0 ; j < this.gridData[UcId].rowsMetadata.columns.length; j++){\r\n\t\t\t\t\t\tif (dtF == this.gridData[UcId].rowsMetadata.columns[j].getAttribute(\"dataField\"))\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tactualheader.push(this.gridData[UcId].rowsMetadata.columns[j].getAttribute(\"displayName\"));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\r\n\t\t\t\tthis.gridData[UcId].grid.createHeader(actualheader, this.gridData[UcId].columnDataField);\r\n\t\t\t\r\n\t\t\t\tif ((this.gridData[UcId].dataFieldOrder != \"\")){ //&& (!withOrderCustom)) {\r\n\t\t\t\t\tvar columnOrderNumber = 0;\r\n\t\t\t\t\tfor (var t = 0; t < this.gridData[UcId].grid.columns.length; t++) {\r\n\t\t\t\t\t\tif (this.gridData[UcId].dataFieldOrder == this.gridData[UcId].columnDataField[t]) { //this.gridData[UcId].grid.columns[t].getAttribute(\"dataField\")){\r\n\t\t\t\t\t\t\tcolumnOrderNumber = t;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.gridData[UcId].grid.applySortOrderType(columnOrderNumber, (this.gridData[UcId].orderType.toLowerCase() == \"ascending\") ? 2 : 3);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t//hide hidden columns\r\n\t\t\t\tfor(var i = 0; i < this.gridData[UcId].columnVisible.length; i++){\r\n\t\t\t\t\tif (!this.gridData[UcId].columnVisible[i]){\r\n\t\t\t\t\t\tvar dtF = this.gridData[UcId].originalColumnDataField[i]\r\n\t\t\t\t\t\tthis.gridData[UcId].grid.hideColumnHeader(this.gridData[UcId].columnDataField.indexOf(dtF));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t}\t\t\t\r\n\t\t\t//end redraw header\r\n\t\t\t\r\n\t\t\tthis.gridData[UcId].grid.removeAllRows();\r\n\t\t\tif (recalculateCantPages) {\r\n\t\t\t\tif (jQuery(\"#\" + this.gridData[UcId].controlName + \"_tablePagination \" + \"#tablePagination_totalPages\").length > 0) {\r\n\t\t\t\t\tOAT.replaceTextNode(jQuery(\"#\" + this.gridData[UcId].controlName + \"_tablePagination \" + \"#tablePagination_totalPages\")[0], \" \" + _mthis.ServerPageCount)\r\n\t\t\t\t\tif ((_mthis.ServerPageCount <= 1) /*&& (this.gridData[UcId].rowsPerPage == 10)*/) { //hide pagiantion\r\n\t\t\t\t\t\tjQuery(\"#\" + this.gridData[UcId].controlName + \"_tablePagination \").css({ display: \"none\" });\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tjQuery(\"#\" + this.gridData[UcId].controlName + \"_tablePagination \").css({ display: \"\" });\r\n\t\t\t\t\t\tif (_mthis.ServerPageCount == 1) {\r\n\t\t\t\t\t\t\tjQuery('#' + this.gridData[UcId].controlName + '_tablePagination_paginater').css('display', 'none');\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tjQuery('#' + this.gridData[UcId].controlName + '_tablePagination_paginater').css('display', '');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t//call navigational events\r\n\t\t\tif (OAT_JS.grid.gridData[UcId].actualPageNumber != pageNumber) {\r\n\t\t\t\tqv.collection[this.gridData[UcId].IdForQueryViewerCollection].CurrentPage = pageNumber;\r\n\t\t\t\tif (pageNumber == 1) {\r\n\t\t\t\t\tif (typeof (qv.collection[this.gridData[UcId].IdForQueryViewerCollection].OnFirstPage) == 'function') \r\n\t\t\t\t\t//qv.collection[this.gridData[UcId].IdForQueryViewerCollection].OnFirstPage()\r\n\t\t\t\t\tself.fireOnPageChangeTable(this.gridData[UcId].IdForQueryViewerCollection, \"OnFirstPage\")\r\n\t\t\t\t} else if (pageNumber == this.gridData[UcId].actualCantPages) {\r\n\t\t\t\t\tif (typeof (qv.collection[this.gridData[UcId].IdForQueryViewerCollection].OnLastPage) == 'function') \r\n\t\t\t\t\t//qv.collection[this.gridData[UcId].IdForQueryViewerCollection].OnLastPage()\r\n\t\t\t\t\tself.fireOnPageChangeTable(this.gridData[UcId].IdForQueryViewerCollection, \"OnLastPage\")\r\n\t\t\t\t} else if (pageNumber < OAT_JS.grid.gridData[UcId].actualPageNumber) {\r\n\t\t\t\t\tif (typeof (qv.collection[this.gridData[UcId].IdForQueryViewerCollection].OnPreviousPage) == 'function') //qv.collection[this.gridData[UcId].IdForQueryViewerCollection].OnPreviousPage()\r\n\t\t\t\t\tself.fireOnPageChangeTable(this.gridData[UcId].IdForQueryViewerCollection, \"OnPreviousPage\")\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (typeof (qv.collection[this.gridData[UcId].IdForQueryViewerCollection].OnNextPage) == 'function') //qv.collection[this.gridData[UcId].IdForQueryViewerCollection].OnNextPage()\r\n\t\t\t\t\tself.fireOnPageChangeTable(this.gridData[UcId].IdForQueryViewerCollection, \"OnNextPage\")\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t//call autorefresh\r\n\t\t\tif ((!fromExternalRefresh) && (qv.collection[OAT_JS.grid.gridData[UcId].IdForQueryViewerCollection].AutoRefreshGroup != \"\")) {\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tOAT_JS.grid.initValueRead(UcId, 0)\r\n\t\t\t\t\r\n\t\t\t\tvar wait = function(){\r\n\t\t\t\t\tif (!OAT_JS.grid.gridData[UcId].endValueRead) {\r\n\t\t\t\t\t\tsetTimeout( wait , 100)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvar meta = OAT.createXMLMetadata(OAT_JS.grid.gridData[UcId], null, true);\r\n\t\t\t\t\t\tvar spl = OAT_JS.grid.gridData[UcId].IdForQueryViewerCollection;\r\n\t\t\t\t\t\t//var listennings = qv.collection[spl];\r\n\t\t\t\t\t\t/*if ((listennings != \"\") && (listennings != null) && (listennings != undefined)) {\r\n\t\t\t\t\t\t\tqv.util.autorefresh.UpdateLayoutSameGroup(listennings, qv.pivot.GetRuntimeMetadata(meta, listennings.RealType), true);\r\n\t\t\t\t\t\t}*/\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tsetTimeout( function() {\r\n\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tvar paramobj = {  \"QueryviewerId\": spl, \"Metadata\": meta};\r\n\t\t\t\t\t\t\t\t\tvar evt = document.createEvent(\"Events\")\r\n\t\t\t\t\t\t\t\t\tevt.initEvent(\"RequestUpdateLayoutSameGroup\", true, true);\r\n\t\t\t\t\t\t\t\t\tevt.parameter = paramobj;\r\n\t\t\t\t\t\t\t\t\tdocument.dispatchEvent(evt);\r\n\t\t\t\t\r\n\t\t\t\t\t\t\t\t}, 50)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\twait();\r\n\t\t\t}\r\n\r\n\t\t\t//set new current page\r\n\t\t\tOAT_JS.grid.gridData[UcId].actualPageNumber = pageNumber\r\n\t\t\tcurrPageNumber[this.gridData[UcId].controlName] = pageNumber\r\n\t\t\tjQuery(\"#\" + this.gridData[UcId].controlName + \"_tablePagination \" + \"#tablePagination_currPage\").val(pageNumber)\r\n\t\t\t\r\n\t\t\tthis.gridData[UcId].rowsData = _mthis.data;\r\n\t\t\tfor (var i = 0; i < _mthis.data.length; i++) {\r\n\t\t\t\tOAT.CreateGridRow(_mthis.data[i], this.gridData[UcId])\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t//redraw selection\r\n\t\t\tOAT.RedrawSelectedNode(this.gridData[UcId].grid)\r\n\t\t},\r\n\t\tgetDifferentValues: function (UcId, columnNumber, iter) { //return the list of distint values of a column, and if it checked or not\r\n\t\t\tvar dataField = this.gridData[UcId].columnDataField[columnNumber];//this.gridData[UcId].grid.columns[columnNumber].getAttribute(\"dataField\")\r\n\t\t\tvar value = this.gridData[UcId].differentValues[dataField][iter]\r\n\t\t\tvar pos = this.gridData[UcId].originalColumnDataField.indexOf(this.gridData[UcId].columnDataField[columnNumber])\r\n\t\t\tvar pict_value = OAT.ApplyPictureValue(value.trimpivot(), this.gridData[UcId].rowsMetadata.columnsDataType[pos],\r\n\t\t\t\tthis.gridData[UcId].rowsMetadata.defaultPicture, this.gridData[UcId].rowsMetadata.forPivotCustomPicture[pos]).replace(/ /g, \"\\u00A0\");\r\n\r\n\t\t\tif ((this.gridData[UcId].blackLists[dataField].hasNull) && (value.trimpivot() == this.gridData[UcId].defaultNullText)) {\r\n\t\t\t\tvalue = \"#NuN#\" //tomo este valor como el null\r\n\t\t\t\treturn false;//{value: \"\", checked: true, pict_value: \"\"} \r\n\t\t\t}\r\n\t\t\tvar checked = true;\r\n\t\t\tif (this.gridData[UcId].blackLists[dataField].state != \"all\") {\r\n\t\t\t\tif (this.gridData[UcId].blackLists[dataField].visibles.indexOf(value) < 0) {\r\n\t\t\t\t\tchecked = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn { value: value, checked: checked, pict_value: pict_value };\r\n\t\t},\r\n\t\tgetCantDifferentValues: function (UcId, columnNumber) {\r\n\t\t\tvar dataField = this.gridData[UcId].columnDataField[columnNumber];//this.gridData[UcId].grid.columns[columnNumber].getAttribute(\"dataField\")\r\n\t\t\treturn this.gridData[UcId].differentValues[dataField].length\r\n\t\t},\r\n\t\tcleanCache: function (_mthis, UcId) {\r\n\t\t\tfor (var cP = 0; cP < this.gridData[UcId].gridCache.length; cP++) {\r\n\t\t\t\tthis.gridData[UcId].gridCache[cP] = { page: -1, pageData: \"\" };\r\n\t\t\t}\r\n\t\t\tthis.gridData[UcId].nextCachePos = 0;\r\n\t\t},\r\n\t\tpageInCache: function (UcId, pageNumber) {\r\n\t\t\tfor (var cP = 0; cP < this.gridData[UcId].gridCache.length; cP++) {\r\n\t\t\t\tif (this.gridData[UcId].gridCache[cP].page == pageNumber) {\r\n\t\t\t\t\treturn this.gridData[UcId].gridCache[cP].pageData;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t},\r\n\t\tupdateFilterInfo: function (UcId, DataFieldFilter, NewFilter) {\r\n\t\t\tif (NewFilter.op == \"all\") {\r\n\t\t\t\t//remove filter from filterInof\r\n\t\t\t\tvar pos = -1;\r\n\t\t\t\tfor (var p = 0; p < this.gridData[UcId].filterInfo.length; p++) {\r\n\t\t\t\t\tif (DataFieldFilter == this.gridData[UcId].filterInfo[p].DataField) { pos = p; break; }\r\n\t\t\t\t}\r\n\t\t\t\tif (pos > -1) this.gridData[UcId].filterInfo.splice(pos, 1)\r\n\t\t\t\tthis.gridData[UcId].blackLists[DataFieldFilter].state = \"all\"\r\n\t\t\t\tthis.gridData[UcId].blackLists[DataFieldFilter].visibles = []\r\n\t\t\t\tthis.gridData[UcId].blackLists[DataFieldFilter].hiddens = []\r\n\t\t\t\tthis.gridData[UcId].blackLists[DataFieldFilter].defaultAction = \"Include\"\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif (this.gridData[UcId].blackLists[DataFieldFilter].state == \"none\") {\r\n\t\t\t\tthis.gridData[UcId].blackLists[DataFieldFilter].visibles = []\r\n\t\t\t\tfor (var u = 0; u < this.gridData[UcId].differentValues[DataFieldFilter].length; u++) {\r\n\t\t\t\t\tif (this.gridData[UcId].blackLists[DataFieldFilter].hiddens.indexOf(this.gridData[UcId].differentValues[DataFieldFilter][u]) == -1) {\r\n\t\t\t\t\t\tthis.gridData[UcId].blackLists[DataFieldFilter].hiddens.push(this.gridData[UcId].differentValues[DataFieldFilter][u])\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else if (this.gridData[UcId].blackLists[DataFieldFilter].state == \"all\") {\r\n\t\t\t\tthis.gridData[UcId].blackLists[DataFieldFilter].hiddens = []\r\n\t\t\t\tfor (var u = 0; u < this.gridData[UcId].differentValues[DataFieldFilter].length; u++) {\r\n\t\t\t\t\tif (this.gridData[UcId].blackLists[DataFieldFilter].visibles.indexOf(this.gridData[UcId].differentValues[DataFieldFilter][u]) == -1) {\r\n\t\t\t\t\t\tthis.gridData[UcId].blackLists[DataFieldFilter].visibles.push(this.gridData[UcId].differentValues[DataFieldFilter][u])\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar notNullValue = [];\r\n\t\t\tif (NewFilter.op == \"none\") {\r\n\t\t\t\tnotNullValue = [];\r\n\t\t\t\tthis.gridData[UcId].blackLists[DataFieldFilter].state = \"none\"\r\n\t\t\t\tthis.gridData[UcId].blackLists[DataFieldFilter].visibles = []\r\n\t\t\t\tthis.gridData[UcId].blackLists[DataFieldFilter].hiddens = []\r\n\t\t\t\tthis.gridData[UcId].blackLists[DataFieldFilter].defaultAction = \"Exclude\"\r\n\t\t\t} else {\r\n\r\n\t\t\t\tif (NewFilter.op == \"push\") {\r\n\t\t\t\t\tthis.gridData[UcId].blackLists[DataFieldFilter].state = \"\"\r\n\t\t\t\t\tvar pos = this.gridData[UcId].blackLists[DataFieldFilter].visibles.indexOf(NewFilter.values)\r\n\t\t\t\t\tif (pos > -1) this.gridData[UcId].blackLists[DataFieldFilter].visibles.splice(pos, 1);\r\n\t\t\t\t\tif (this.gridData[UcId].blackLists[DataFieldFilter].hiddens.indexOf(NewFilter.values) == -1)\r\n\t\t\t\t\t\tthis.gridData[UcId].blackLists[DataFieldFilter].hiddens.push(NewFilter.values)\r\n\t\t\t\t} else if (NewFilter.op == \"pop\") {\r\n\t\t\t\t\tthis.gridData[UcId].blackLists[DataFieldFilter].state = \"\"\r\n\t\t\t\t\tif (this.gridData[UcId].blackLists[DataFieldFilter].visibles.indexOf(NewFilter.values) == -1)\r\n\t\t\t\t\t\tthis.gridData[UcId].blackLists[DataFieldFilter].visibles.push(NewFilter.values)\r\n\t\t\t\t\tvar pos = this.gridData[UcId].blackLists[DataFieldFilter].hiddens.indexOf(NewFilter.values)\r\n\t\t\t\t\tif (pos > -1) this.gridData[UcId].blackLists[DataFieldFilter].hiddens.splice(pos, 1);\r\n\t\t\t\t} else if (NewFilter.op == \"reverse\") {\r\n\t\t\t\t\tif (this.gridData[UcId].blackLists[DataFieldFilter].defaultAction == \"Include\") {\r\n\t\t\t\t\t\tthis.gridData[UcId].blackLists[DataFieldFilter].defaultAction = \"Exclude\"\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.gridData[UcId].blackLists[DataFieldFilter].defaultAction = \"Include\"\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (this.gridData[UcId].blackLists[DataFieldFilter].state == \"none\") {//si el estado anterior es none pasa a all\r\n\t\t\t\t\t\tvar pos = -1;\r\n\t\t\t\t\t\tfor (var p = 0; p < this.gridData[UcId].filterInfo.length; p++) {\r\n\t\t\t\t\t\t\tif (DataFieldFilter == this.gridData[UcId].filterInfo[p].DataField) { pos = p; break; }\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (pos > -1) this.gridData[UcId].filterInfo.splice(pos, 1)\r\n\t\t\t\t\t\tthis.gridData[UcId].blackLists[DataFieldFilter].state = \"all\"\r\n\t\t\t\t\t\tthis.gridData[UcId].blackLists[DataFieldFilter].visibles = []\r\n\t\t\t\t\t\tthis.gridData[UcId].blackLists[DataFieldFilter].hiddens = []\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t} else if (this.gridData[UcId].blackLists[DataFieldFilter].state == \"all\") {//si el estado anterior es all pasa a none\r\n\t\t\t\t\t\tnotNullValue = [];\r\n\t\t\t\t\t\tthis.gridData[UcId].blackLists[DataFieldFilter].state = \"none\"\r\n\t\t\t\t\t\tthis.gridData[UcId].blackLists[DataFieldFilter].visibles = []\r\n\t\t\t\t\t\tthis.gridData[UcId].blackLists[DataFieldFilter].hiddens = []\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tvar tempArrayVisibles = []; for (var tit = 0; tit < this.gridData[UcId].blackLists[DataFieldFilter].visibles.length; tit++) { tempArrayVisibles.push(this.gridData[UcId].blackLists[DataFieldFilter].visibles[tit]) }\r\n\t\t\t\t\t\tvar tempArrayHiddens = []; for (var tit = 0; tit < this.gridData[UcId].blackLists[DataFieldFilter].hiddens.length; tit++) { tempArrayHiddens.push(this.gridData[UcId].blackLists[DataFieldFilter].hiddens[tit]) }\r\n\r\n\t\t\t\t\t\tthis.gridData[UcId].blackLists[DataFieldFilter].visibles = []\r\n\t\t\t\t\t\tthis.gridData[UcId].blackLists[DataFieldFilter].hiddens = []\r\n\r\n\t\t\t\t\t\tfor (var u = 0; u < this.gridData[UcId].differentValues[DataFieldFilter].length; u++) {\r\n\t\t\t\t\t\t\tvar val = this.gridData[UcId].differentValues[DataFieldFilter][u];\r\n\t\t\t\t\t\t\tif (tempArrayVisibles.indexOf(val) == -1) {\r\n\t\t\t\t\t\t\t\tthis.gridData[UcId].blackLists[DataFieldFilter].visibles.push(val)\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.gridData[UcId].blackLists[DataFieldFilter].hiddens.push(val)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tfor (var u = 0; u < tempArrayHiddens.length; u++) {\r\n\t\t\t\t\t\t\tif (this.gridData[UcId].blackLists[DataFieldFilter].visibles.indexOf(tempArrayHiddens[u]) == -1) {\r\n\t\t\t\t\t\t\t\tthis.gridData[UcId].blackLists[DataFieldFilter].visibles.push(tempArrayHiddens[u])\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tfor (var u = 0; u < tempArrayVisibles.length; u++) {\r\n\t\t\t\t\t\t\tif (this.gridData[UcId].blackLists[DataFieldFilter].hiddens.indexOf(tempArrayVisibles[u]) == -1) {\r\n\t\t\t\t\t\t\t\tthis.gridData[UcId].blackLists[DataFieldFilter].hiddens.push(tempArrayVisibles[u])\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar filterExist = false; var nullIncluded = true;\r\n\t\t\tvar included = [];\r\n\t\t\tfor (var t = 0; t < this.gridData[UcId].blackLists[DataFieldFilter].visibles.length; t++) {\r\n\t\t\t\tif (this.gridData[UcId].blackLists[DataFieldFilter].visibles[t] != \"#NuN#\") {\r\n\t\t\t\t\tincluded.push(this.gridData[UcId].blackLists[DataFieldFilter].visibles[t])\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar excluded = [];\r\n\t\t\tif (this.gridData[UcId].blackLists[DataFieldFilter].state != \"none\") {\r\n\t\t\t\tfor (var t = 0; t < this.gridData[UcId].differentValues[DataFieldFilter].length; t++) {\r\n\t\t\t\t\tvar val = this.gridData[UcId].differentValues[DataFieldFilter][t]\r\n\t\t\t\t\tif ((val != \"#NuN#\") && (included.indexOf(val) == -1)) {\r\n\t\t\t\t\t\texcluded.push(val)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tfor (var t = 0; t < this.gridData[UcId].blackLists[DataFieldFilter].hiddens.length; t++) {\r\n\t\t\t\t\tif ((this.gridData[UcId].blackLists[DataFieldFilter].hiddens[t] != \"#NuN#\")\r\n\t\t\t\t\t\t&& (excluded.indexOf(this.gridData[UcId].blackLists[DataFieldFilter].hiddens[t]) == -1)) {\r\n\t\t\t\t\t\texcluded.push(this.gridData[UcId].blackLists[DataFieldFilter].hiddens[t])\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif ((included.length == 0) && ((this.gridData[UcId].blackLists[DataFieldFilter].defaultAction == \"Exclude\"))) {\r\n\t\t\t\t\texcluded = [];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (NewFilter.op == \"none\") {\r\n\t\t\t\tnullIncluded = false;\r\n\t\t\t\tincluded = []; excluded = [];\r\n\t\t\t} else {\r\n\t\t\t\tif ((this.gridData[UcId].differentValues[DataFieldFilter].indexOf(\"#NuN#\") > -1) ||\r\n\t\t\t\t\t(excluded.indexOf(this.gridData[UcId].blackLists[DataFieldFilter].hiddens[t]) != -1)) {\r\n\t\t\t\t\tif (this.gridData[UcId].blackLists[DataFieldFilter].visibles.indexOf(\"#NuN#\") == -1) {\r\n\t\t\t\t\t\tnullIncluded = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (this.gridData[UcId].blackLists[DataFieldFilter].defaultAction == \"Exclude\") {\r\n\t\t\t\t\t\tnullIncluded = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\r\n\t\t\tif ((this.gridData[UcId].blackLists[DataFieldFilter].hasNull) && (!(NewFilter.op == \"none\"))) {\r\n\t\t\t\t//asociated psuedo-Null\r\n\t\t\t\tvar reallyPseudoNull = this.gridData[UcId].defaultNullText\r\n\t\t\t\tvar finded = false\r\n\t\t\t\tvar data_length = 0;\r\n\t\t\t\tfor (var u = 0; u < this.gridData[UcId].differentValues[DataFieldFilter].length; u++) {\r\n\t\t\t\t\tdata_length = this.gridData[UcId].differentValues[DataFieldFilter][u].length;\r\n\t\t\t\t}\r\n\t\t\t\tfor (var u = 0; u < this.gridData[UcId].differentValues[DataFieldFilter].length; u++) {\r\n\t\t\t\t\tif (this.gridData[UcId].differentValues[DataFieldFilter][u].trimpivot() == this.gridData[UcId].defaultNullText) {\r\n\t\t\t\t\t\treallyPseudoNull = this.gridData[UcId].differentValues[DataFieldFilter][u];\r\n\t\t\t\t\t\tfinded = true;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (!finded) {\r\n\t\t\t\t\tfor (var t = 0; t < data_length - this.gridData[UcId].defaultNullText.length; t++) {\r\n\t\t\t\t\t\treallyPseudoNull = reallyPseudoNull + \" \";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!nullIncluded) {\r\n\t\t\t\t\tif (excluded.indexOf(reallyPseudoNull) == -1) {\r\n\t\t\t\t\t\texcluded.push(reallyPseudoNull)\r\n\t\t\t\t\t\tif (this.gridData[UcId].blackLists[DataFieldFilter].hiddens.indexOf(reallyPseudoNull) == -1) {\r\n\t\t\t\t\t\t\tthis.gridData[UcId].blackLists[DataFieldFilter].hiddens.push(reallyPseudoNull)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (included.indexOf(reallyPseudoNull) != -1) {\r\n\t\t\t\t\t\tincluded.splice(included.indexOf(reallyPseudoNull), 1)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (this.gridData[UcId].blackLists[DataFieldFilter].visibles.indexOf(reallyPseudoNull) != -1) {\r\n\t\t\t\t\t\tthis.gridData[UcId].blackLists[DataFieldFilter].visibles.splice(this.gridData[UcId].blackLists[DataFieldFilter].visibles.indexOf(reallyPseudoNull), 1)\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (included.indexOf(reallyPseudoNull) == -1) {\r\n\t\t\t\t\t\tif (excluded.indexOf(reallyPseudoNull) != -1) {\r\n\t\t\t\t\t\t\texcluded.splice(excluded.indexOf(reallyPseudoNull), 1)\r\n\t\t\t\t\t\t\tincluded.push(reallyPseudoNull)\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (this.gridData[UcId].blackLists[DataFieldFilter].defaultAction == \"Exclude\") {\r\n\t\t\t\t\t\t\t\tincluded.push(reallyPseudoNull)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (this.gridData[UcId].blackLists[DataFieldFilter].hiddens.indexOf(reallyPseudoNull) != -1) {\r\n\t\t\t\t\t\t\tthis.gridData[UcId].blackLists[DataFieldFilter].hiddens.splice(this.gridData[UcId].blackLists[DataFieldFilter].hiddens.indexOf(reallyPseudoNull), 1)\r\n\t\t\t\t\t\t\tif (this.gridData[UcId].blackLists[DataFieldFilter].visibles.indexOf(reallyPseudoNull) == -1) {\r\n\t\t\t\t\t\t\t\tthis.gridData[UcId].blackLists[DataFieldFilter].visibles.push(reallyPseudoNull)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar allValuesLoaded = false;\r\n\t\t\tif (this.gridData[UcId].differentValuesPaginationInfo[DataFieldFilter] != null) {\r\n\t\t\t\tallValuesLoaded = (this.gridData[UcId].differentValuesPaginationInfo[DataFieldFilter].previousPage == this.gridData[UcId].differentValuesPaginationInfo[DataFieldFilter].totalPages)\r\n\t\t\t}\r\n\t\t\tvar noFilterNeeded = (((nullIncluded) || (!this.gridData[UcId].blackLists[DataFieldFilter].hasNull))\r\n\t\t\t\t&& (excluded.length == 0) && (NewFilter.op != \"none\") && (NewFilter.op != \"push\")\r\n\t\t\t\t&& ((this.gridData[UcId].blackLists[DataFieldFilter].defaultAction == \"Include\") || (allValuesLoaded))\r\n\t\t\t\t&& (!(NewFilter.op == \"reverse\"))\r\n\t\t\t);\r\n\r\n\t\t\tvar pos = 0;\r\n\t\t\tfor (var t = 0; t < this.gridData[UcId].filterInfo.length; t++) {\r\n\t\t\t\tif (this.gridData[UcId].filterInfo[t].DataField == DataFieldFilter) {\r\n\t\t\t\t\tfilterExist = true;\r\n\t\t\t\t\tthis.gridData[UcId].filterInfo[t].NullIncluded = nullIncluded\r\n\t\t\t\t\tthis.gridData[UcId].filterInfo[t].NotNullValues.Included = included\r\n\t\t\t\t\tthis.gridData[UcId].filterInfo[t].NotNullValues.Excluded = excluded\r\n\t\t\t\t\tthis.gridData[UcId].filterInfo[t].NotNullValues.DefaultAction = this.gridData[UcId].blackLists[DataFieldFilter].defaultAction\r\n\t\t\t\t\tpos = t;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (noFilterNeeded) {\r\n\t\t\t\tthis.gridData[UcId].filterInfo.splice(pos, 1)\r\n\t\t\t}\r\n\t\t\tif ((!filterExist) && (!noFilterNeeded)) {\r\n\t\t\t\tvar notNullValues = { Included: included, Excluded: excluded, DefaultAction: this.gridData[UcId].blackLists[DataFieldFilter].defaultAction }\r\n\t\t\t\tfilter = { DataField: DataFieldFilter, NullIncluded: nullIncluded, NotNullValues: notNullValues }\r\n\t\t\t\tthis.gridData[UcId].filterInfo.push(filter);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\treadScrollValue: function (UcId, columnNumber) {\r\n\t\t\tvar dataField = this.gridData[UcId].columnDataField[columnNumber];\r\n\t\t\tvar posColumnNumber = this.gridData[UcId].originalColumnDataField.indexOf(this.gridData[UcId].columnDataField[columnNumber])\r\n\t\t\tif (!this.gridData[UcId].differentValuesPaginationInfo[dataField].blocked) {\r\n\t\t\t\tthis.gridData[UcId].differentValuesPaginationInfo[dataField].blocked = true;\r\n\t\t\t\tif (!this.gridData[UcId].differentValuesPaginationInfo[dataField].filtered) {\r\n\t\t\t\t\tvar ValuePageInfo = this.gridData[UcId].differentValuesPaginationInfo[dataField]\r\n\t\t\t\t\tvar page = ValuePageInfo.previousPage + 1;\r\n\t\t\t\t\tthis.gridData[UcId].lastRequestValue = dataField;\r\n\t\t\t\t\t\r\n\t\t\t\t\tOAT_JS.grid.lastCallToQueryViewer = \"readScrollValue\"\r\n\t\t\t\t\tOAT_JS.grid.lastCallData = { \"self\": this, \"UcId\": UcId, \"columnNumber\": columnNumber, \"filterValue\": \"\", \"dataField\": dataField }\r\n\t\t\t\t\r\n\t\t\t\t\tself.requestAttributeForTable(UcId, dataField, page, \"\", 10)\r\n\t\t\t\t\t/*qv.collection[this.gridData[UcId].IdForQueryViewerCollection].getAttributeValues((function (resJSON) {\r\n\t\t\t\t\t\tvar res = JSON.parse(resJSON);\r\n\t\t\t\t\t\tOAT_JS.grid.appendNewValueData(UcId, res)\r\n\t\t\t\t\t}).closure(this), [dataField, page, 10, \"\"]);*/\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar ValuePageInfo = this.gridData[UcId].filteredValuesPaginationInfo[dataField]\r\n\t\t\t\t\tvar page = ValuePageInfo.previousPage + 1;\r\n\t\t\t\t\tthis.gridData[UcId].lastRequestValue = dataField;\r\n\t\t\t\t\tvar filterText = ValuePageInfo.filteredText\r\n\t\t\t\t\t\r\n\t\t\t\t\tOAT_JS.grid.lastCallToQueryViewer = \"readScrollValueFilter\"\r\n\t\t\t\t\tOAT_JS.grid.lastCallData = { \"self\": this, \"UcId\": UcId, \"columnNumber\": columnNumber, \"posColumnNumber\": posColumnNumber, \"filterValue\": filterText, \"dataField\": dataField, \"filterText\": filterText }\r\n\t\t\t\t\r\n\t\t\t\t\tself.requestAttributeForTable(UcId, dataField, page, filterText, 10)\r\n\t\t\t\t\t/*qv.collection[this.gridData[UcId].IdForQueryViewerCollection].getAttributeValues((function (resJSON) {\r\n\t\t\t\t\t\tvar res = JSON.parse(resJSON);\r\n\t\t\t\t\t\tOAT_JS.grid.appendNewFilteredValueData(UcId, res, posColumnNumber, filterText)\r\n\t\t\t\t\t}).closure(this), [dataField, page, 10, ValuePageInfo.filteredText]);*/\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar j = 0;\r\n\t\t},\r\n\t\tappendNewValueData: function (UcId, data, whenFilter) {\r\n\t\t\tvar dataField = this.gridData[UcId].lastRequestValue\r\n\t\t\tvar ValuePageInfo = this.gridData[UcId].differentValuesPaginationInfo[dataField]\r\n\t\t\tif ((data.PageNumber > ValuePageInfo.previousPage) || (whenFilter)) {\r\n\t\t\t\tthis.gridData[UcId].differentValuesPaginationInfo[dataField].previousPage = data.PageNumber\r\n\t\t\t\tthis.gridData[UcId].differentValuesPaginationInfo[dataField].totalPages = data.PagesCount\r\n\t\t\t\tvar newValues = [];\r\n\r\n\t\t\t\tif (data.Null) {\r\n\t\t\t\t\tif (this.gridData[UcId].differentValues[dataField].indexOf(\"#NuN#\") == -1) {\r\n\t\t\t\t\t\tthis.gridData[UcId].differentValues[dataField].push(\"#NuN#\")\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//add to differentValues\r\n\t\t\t\tfor (var i = 0; i < data.NotNullValues.length; i++) {\r\n\t\t\t\t\tvar val = data.NotNullValues[i];\r\n\t\t\t\t\tif (this.gridData[UcId].differentValues[dataField].indexOf(val) == -1) {\r\n\t\t\t\t\t\tthis.gridData[UcId].differentValues[dataField].push(val)\r\n\t\t\t\t\t\tnewValues.push(val)\r\n\t\t\t\t\t}//lo mismo\r\n\t\t\t\t\tif (this.gridData[UcId].blackLists[dataField].defaultAction == \"Include\") {\r\n\t\t\t\t\t\tif ((this.gridData[UcId].blackLists[dataField].visibles.indexOf(val) == -1)\r\n\t\t\t\t\t\t\t&& (this.gridData[UcId].blackLists[dataField].hiddens.indexOf(val) == -1)) {\r\n\t\t\t\t\t\t\tthis.gridData[UcId].blackLists[dataField].visibles.push(val)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif ((this.gridData[UcId].blackLists[dataField].visibles.indexOf(val) == -1)\r\n\t\t\t\t\t\t\t&& (this.gridData[UcId].blackLists[dataField].hiddens.indexOf(val) == -1)) {\r\n\t\t\t\t\t\t\tthis.gridData[UcId].blackLists[dataField].hiddens.push(val)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar columnNumber = this.gridData[UcId].columnDataField.indexOf(dataField);\r\n\t\t\t\tvar originalColumn = this.gridData[UcId].originalColumnDataField.indexOf(dataField)\r\n\r\n\t\t\t\tthis.gridData[UcId].grid.loadDifferentValues(columnNumber, this.gridData[UcId].differentValues[dataField])\r\n\r\n\t\t\t\tfor (var nI = 0; nI < newValues.length; nI++) {\r\n\t\t\t\t\tvar checked = true;\r\n\t\t\t\t\tif (this.gridData[UcId].blackLists[dataField].state != \"all\") {\r\n\t\t\t\t\t\tif (this.gridData[UcId].blackLists[dataField].visibles.indexOf(newValues[nI]) < 0) {\r\n\t\t\t\t\t\t\tchecked = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (!((this.gridData[UcId].blackLists[dataField].hasNull) && (newValues[nI].trimpivot() == this.gridData[UcId].defaultNullText))) {\r\n\t\t\t\t\t\tvar pict_value = OAT.ApplyPictureValue(newValues[nI].trimpivot(), this.gridData[UcId].rowsMetadata.columnsDataType[originalColumn],\r\n\t\t\t\t\t\t\tthis.gridData[UcId].rowsMetadata.defaultPicture, this.gridData[UcId].rowsMetadata.forPivotCustomPicture[originalColumn]).replace(/ /g, \"\\u00A0\");\r\n\t\t\t\t\t\tOAT.appendNewPairToPopUp(this.gridData[UcId], newValues[nI], columnNumber, checked, pict_value, dataField)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (this.gridData[UcId].differentValuesPaginationInfo[dataField].previousPage < data.PagesCount)\r\n\t\t\t\tthis.gridData[UcId].differentValuesPaginationInfo[dataField].blocked = false;\r\n\t\t},\r\n\t\tresetScrollValue: function (UcId, dataField, columnNumber) { //after filtered when input serach is clean, restor values without filter\r\n\t\t\tthis.gridData[UcId].differentValuesPaginationInfo[dataField].filtered = false;\r\n\t\t\tthis.gridData[UcId].differentValuesPaginationInfo[dataField].blocked = true;\r\n\r\n\t\t\tvar columnNumber = this.gridData[UcId].columnDataField.indexOf(dataField);\r\n\t\t\tvar originalColumn = this.gridData[UcId].originalColumnDataField.indexOf(dataField)\r\n\r\n\t\t\tOAT.removeAllPairsFromPopUp(this.gridData[UcId], columnNumber, OAT_JS.grid.cantPages(UcId, dataField) > 1);\r\n\r\n\t\t\tfor (var u = 0; u < this.gridData[UcId].differentValues[dataField].length; u++) {\r\n\t\t\t\tvar checked = true;\r\n\t\t\t\tvar value = this.gridData[UcId].differentValues[dataField][u];\r\n\t\t\t\tif (this.gridData[UcId].blackLists[dataField].state != \"all\") {\r\n\t\t\t\t\tif (this.gridData[UcId].blackLists[dataField].visibles.indexOf(value) < 0) {\r\n\t\t\t\t\t\tchecked = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tvar pict_value = OAT.ApplyPictureValue(value.trimpivot(), this.gridData[UcId].rowsMetadata.columnsDataType[originalColumn],\r\n\t\t\t\t\tthis.gridData[UcId].rowsMetadata.defaultPicture, this.gridData[UcId].rowsMetadata.forPivotCustomPicture[originalColumn]).replace(/ /g, \"\\u00A0\");\r\n\r\n\t\t\t\tif (!((this.gridData[UcId].blackLists[dataField].hasNull) && (value.trimpivot() == this.gridData[UcId].defaultNullText))) {\r\n\t\t\t\t\tOAT.appendNewPairToPopUp(this.gridData[UcId], value, columnNumber, checked, pict_value, dataField)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (this.gridData[UcId].differentValuesPaginationInfo[dataField].previousPage < OAT_JS.grid.cantPages(UcId, dataField))\r\n\t\t\t\tthis.gridData[UcId].differentValuesPaginationInfo[dataField].blocked = false;\r\n\t\t},\r\n\t\tresetAllScrollValue: function (UcId) { //when closing the filter popup\r\n\t\t\tfor (var id = 0; id < this.gridData[UcId].grid.columns.length; id++) {\r\n\t\t\t\tvar field = this.gridData[UcId].grid.columns[id].getAttribute(\"dataField\");\r\n\t\t\t\tthis.gridData[UcId].differentValuesPaginationInfo[field].filtered = false;\r\n\t\t\t\tthis.gridData[UcId].differentValuesPaginationInfo[field].blocked = true;\r\n\t\t\t\tif (this.gridData[UcId].differentValuesPaginationInfo[field].previousPage < this.gridData[UcId].differentValuesPaginationInfo[field].totalPages)\r\n\t\t\t\t\tthis.gridData[UcId].differentValuesPaginationInfo[field].blocked = false;\r\n\t\t\t}\r\n\t\t},\r\n\t\tappendNewFilteredValueData: function (UcId, data, columnNumber, filterValue) { //add pairs when filtering by filter input\r\n\t\t\tvar dataField = this.gridData[UcId].lastRequestValue\r\n\t\t\tvar columnNumber = this.gridData[UcId].columnDataField.indexOf(dataField);\r\n\t\t\tvar originalColumn = this.gridData[UcId].originalColumnDataField.indexOf(dataField)\r\n\r\n\t\t\tvar ValuePageInfo = this.gridData[UcId].filteredValuesPaginationInfo[dataField]\r\n\t\t\tif (((filterValue) || (filterValue == \"\")) && (ValuePageInfo.filteredText != filterValue)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (data.PageNumber > ValuePageInfo.previousPage) {\r\n\t\t\t\tthis.gridData[UcId].filteredValuesPaginationInfo[dataField].previousPage = data.PageNumber\r\n\t\t\t\tthis.gridData[UcId].filteredValuesPaginationInfo[dataField].totalPages = data.PagesCount\r\n\r\n\t\t\t\tif (data.Null) {\r\n\t\t\t\t\tif (this.gridData[UcId].differentValues[dataField].indexOf(\"#NuN#\") == -1) {\r\n\t\t\t\t\t\tthis.gridData[UcId].differentValues[dataField].push(\"#NuN#\")\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor (var i = 0; i < data.NotNullValues.length; i++) {\r\n\t\t\t\t\tvar alreadyInValues = (this.gridData[UcId].differentValues[dataField].indexOf(data.NotNullValues[i]) != -1)\r\n\t\t\t\t\t//append to different values\r\n\t\t\t\t\tif (this.gridData[UcId].differentValues[dataField].indexOf(data.NotNullValues[i]) == -1) {\r\n\t\t\t\t\t\tthis.gridData[UcId].differentValues[dataField].push(data.NotNullValues[i])\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ((this.gridData[UcId].blackLists[dataField].defaultAction == \"Include\") && (!alreadyInValues)) {\r\n\t\t\t\t\t\tif ((this.gridData[UcId].blackLists[dataField].visibles.indexOf(data.NotNullValues[i]) == -1)\r\n\t\t\t\t\t\t\t&& (this.gridData[UcId].blackLists[dataField].hiddens.indexOf(data.NotNullValues[i]) == -1)) {\r\n\t\t\t\t\t\t\tthis.gridData[UcId].blackLists[dataField].visibles.push(data.NotNullValues[i])\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif ((this.gridData[UcId].blackLists[dataField].visibles.indexOf(data.NotNullValues[i]) == -1)\r\n\t\t\t\t\t\t\t&& (this.gridData[UcId].blackLists[dataField].hiddens.indexOf(data.NotNullValues[i]) == -1)) {\r\n\t\t\t\t\t\t\tthis.gridData[UcId].blackLists[dataField].hiddens.push(data.NotNullValues[i])\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar checked = true;\r\n\t\t\t\t\tif (this.gridData[UcId].blackLists[dataField].state != \"all\") {\r\n\t\t\t\t\t\tif (this.gridData[UcId].blackLists[dataField].visibles.indexOf(data.NotNullValues[i]) < 0) {\r\n\t\t\t\t\t\t\tchecked = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar pict_value = OAT.ApplyPictureValue(data.NotNullValues[i].trimpivot(), this.gridData[UcId].rowsMetadata.columnsDataType[originalColumn],\r\n\t\t\t\t\t\tthis.gridData[UcId].rowsMetadata.defaultPicture, this.gridData[UcId].rowsMetadata.forPivotCustomPicture[originalColumn]).replace(/ /g, \"\\u00A0\");\r\n\t\t\t\t\tif (!((this.gridData[UcId].blackLists[dataField].hasNull) && (data.NotNullValues[i].trimpivot() == this.gridData[UcId].defaultNullText))) {\r\n\t\t\t\t\t\tOAT.appendNewPairToPopUp(this.gridData[UcId], data.NotNullValues[i], columnNumber, checked, pict_value, dataField)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (this.gridData[UcId].filteredValuesPaginationInfo[dataField].previousPage < data.PagesCount)\r\n\t\t\t\t\tthis.gridData[UcId].differentValuesPaginationInfo[dataField].blocked = false;\r\n\t\t\t}\r\n\t\t},\r\n\t\tinitValueRead: function (UcId, columnNumber, requestDataField) {\r\n\t\t\tif (columnNumber >= this.gridData[UcId].grid.columns.length) {\r\n\t\t\t\tthis.gridData[UcId].endValueRead = true;\r\n\t\t\t\treturn;\r\n\t\t\t} else {\r\n\t\t\t  if (this.gridData[UcId].grid.columns[columnNumber].getAttribute(\"visible\") != \"Never\"){\r\n\t\t\t  \tif (requestDataField == undefined){\r\n\t\t\t\t\tthis.gridData[UcId].grid.lastRequestValue = this.gridData[UcId].grid.columns[columnNumber].getAttribute(\"dataField\")\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.gridData[UcId].grid.lastRequestValue = requestDataField\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (this.gridData[UcId].differentValuesPaginationInfo[this.gridData[UcId].grid.lastRequestValue].previousPage > 0){\r\n\t\t\t\t\tif (requestDataField == undefined){\r\n\t\t\t\t\t\tcolumnNumber++;\r\n\t\t\t\t\t\tOAT_JS.grid.initValueRead(UcId, columnNumber)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tvar cantItems = 10;\r\n\t\t\t\tif ((qv.collection[this.gridData[UcId].IdForQueryViewerCollection].AutoRefreshGroup != \"\")) {\r\n\t\t\t\t\tcantItems = 0;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tOAT_JS.grid.lastCallToQueryViewer = \"initValueRead\"\r\n\t\t\t\tOAT_JS.grid.lastCallData = { \"self\": this, \"UcId\": UcId, \"columnNumber\": columnNumber, \"filterValue\": \"\", \"dataField\": requestDataField }\r\n\t\t\t\t\r\n\t\t\t\tself.requestAttributeForTable(UcId, this.gridData[UcId].grid.lastRequestValue, 1, \"\", cantItems)\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t/*qv.collection[this.gridData[UcId].IdForQueryViewerCollection].getAttributeValues((function (resJSON) {\r\n\t\t\t\t\tvar data = JSON.parse(resJSON);\r\n\t\t\t\t\t//load data\r\n\t\t\t\t\tdataField = this.gridData[UcId].grid.lastRequestValue\r\n\t\t\t\t\tthis.gridData[UcId].differentValuesPaginationInfo[dataField].previousPage = data.PageNumber\r\n\t\t\t\t\tthis.gridData[UcId].differentValuesPaginationInfo[dataField].totalPages = data.PagesCount\r\n\r\n\t\t\t\t\t//end load data\r\n\t\t\t\t\tvar columnNumber = 0;\r\n\t\t\t\t\tfor (var t = 0; t < this.gridData[UcId].grid.columns.length; t++) {\r\n\t\t\t\t\t\tif (this.gridData[UcId].grid.lastRequestValue == this.gridData[UcId].grid.columns[t].getAttribute(\"dataField\")) {\r\n\t\t\t\t\t\t\tcolumnNumber = t;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\t//null value?\r\n\t\t\t\t\tif (data.Null) {\r\n\t\t\t\t\t\tthis.gridData[UcId].blackLists[dataField].hasNull = true;\r\n\t\t\t\t\t\tif (this.gridData[UcId].differentValues[dataField].indexOf(\"#NuN#\") == -1) {\r\n\t\t\t\t\t\t\tthis.gridData[UcId].differentValues[dataField].push(\"#NuN#\")\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar nullIncluded = true;\r\n\t\t\t\t\t\tfor (var i = 0; i < this.gridData[UcId].filterInfo.length; i++) {\r\n\t\t\t\t\t\t\tif (this.gridData[UcId].filterInfo[i].DataField == dataField) {\r\n\t\t\t\t\t\t\t\tif (!this.gridData[UcId].filterInfo[i].NullIncluded) {\r\n\t\t\t\t\t\t\t\t\tnullIncluded = false;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif ((nullIncluded) && (this.gridData[UcId].blackLists[dataField].visibles.indexOf(\"#NuN#\") == -1)) {\r\n\t\t\t\t\t\t\tthis.gridData[UcId].blackLists[dataField].visibles.push(\"#NuN#\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.gridData[UcId].blackLists[dataField].hasNull = false;\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\tfor (var i = 0; i < data.NotNullValues.length; i++) {\r\n\t\t\t\t\t\tif (this.gridData[UcId].differentValues[dataField].indexOf(data.NotNullValues[i]) == -1) {\r\n\t\t\t\t\t\t\tthis.gridData[UcId].differentValues[dataField].push(data.NotNullValues[i])\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif ((this.gridData[UcId].blackLists[dataField].state == \"all\")\r\n\t\t\t\t\t\t\t&& (this.gridData[UcId].blackLists[dataField].visibles.indexOf(data.NotNullValues[i]) == -1)) {\r\n\t\t\t\t\t\t\tthis.gridData[UcId].blackLists[dataField].visibles.push(data.NotNullValues[i])\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif ((this.gridData[UcId].blackLists[dataField].state == \"none\")\r\n\t\t\t\t\t\t\t&& (this.gridData[UcId].blackLists[dataField].hiddens.indexOf(data.NotNullValues[i]) == -1)) {\r\n\t\t\t\t\t\t\tthis.gridData[UcId].blackLists[dataField].hiddens.push(data.NotNullValues[i])\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif ((this.gridData[UcId].blackLists[dataField].defaultAction == \"Exclude\")\r\n\t\t\t\t\t\t\t&& (this.gridData[UcId].blackLists[dataField].state == \"\") && (data.NotNullValues[i].trimpivot() != \"\")\r\n\t\t\t\t\t\t\t&& (this.gridData[UcId].blackLists[dataField].visibles.length > 0)) { //correct blanck spaces when initial user filter\r\n\t\t\t\t\t\t\tfor (var j = 0; j < this.gridData[UcId].blackLists[dataField].visibles.length; j++) {\r\n\t\t\t\t\t\t\t\tif (this.gridData[UcId].blackLists[dataField].visibles[j] == data.NotNullValues[i].trimpivot()) {\r\n\t\t\t\t\t\t\t\t\tthis.gridData[UcId].blackLists[dataField].visibles[j] = data.NotNullValues[i]\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\r\n\r\n\t\t\t\t\tthis.gridData[UcId].grid.loadDifferentValues(columnNumber, this.gridData[UcId].differentValues[dataField]);\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (requestDataField == undefined){\r\n\t\t\t\t\t\tcolumnNumber++;\r\n\t\t\t\t\t\tOAT_JS.grid.initValueRead(UcId, columnNumber)\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}).closure(this), [this.gridData[UcId].grid.lastRequestValue, 1, cantItems, \"\"]);*/\r\n\t\t\t  } else {\r\n\t\t\t  \t\tcolumnNumber++;\r\n\t\t\t\t\tOAT_JS.grid.initValueRead(UcId, columnNumber, requestDataField)\r\n\t\t\t  }\r\n\t\t\t}\r\n\t\t},\r\n\t\tinitValueLoad: function (data, UcId, requestDataField){\r\n\t\t\t//load data\r\n\t\t\tdataField = this.gridData[UcId].grid.lastRequestValue\r\n\t\t\tthis.gridData[UcId].differentValuesPaginationInfo[dataField].previousPage = data.PageNumber\r\n\t\t\tthis.gridData[UcId].differentValuesPaginationInfo[dataField].totalPages = data.PagesCount\r\n\r\n\t\t\t//end load data\r\n\t\t\tvar columnNumber = 0;\r\n\t\t\tfor (var t = 0; t < this.gridData[UcId].grid.columns.length; t++) {\r\n\t\t\t\tif (this.gridData[UcId].grid.lastRequestValue == this.gridData[UcId].grid.columns[t].getAttribute(\"dataField\")) {\r\n\t\t\t\t\tcolumnNumber = t;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\r\n\t\t\t//null value?\r\n\t\t\tif (data.Null) {\r\n\t\t\t\tthis.gridData[UcId].blackLists[dataField].hasNull = true;\r\n\t\t\t\tif (this.gridData[UcId].differentValues[dataField].indexOf(\"#NuN#\") == -1) {\r\n\t\t\t\t\tthis.gridData[UcId].differentValues[dataField].push(\"#NuN#\")\r\n\t\t\t\t}\r\n\t\t\t\tvar nullIncluded = true;\r\n\t\t\t\tfor (var i = 0; i < this.gridData[UcId].filterInfo.length; i++) {\r\n\t\t\t\t\tif (this.gridData[UcId].filterInfo[i].DataField == dataField) {\r\n\t\t\t\t\t\tif (!this.gridData[UcId].filterInfo[i].NullIncluded) {\r\n\t\t\t\t\t\t\tnullIncluded = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif ((nullIncluded) && (this.gridData[UcId].blackLists[dataField].visibles.indexOf(\"#NuN#\") == -1)) {\r\n\t\t\t\t\tthis.gridData[UcId].blackLists[dataField].visibles.push(\"#NuN#\");\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tthis.gridData[UcId].blackLists[dataField].hasNull = false;\r\n\t\t\t}\r\n\r\n\r\n\t\t\tfor (var i = 0; i < data.NotNullValues.length; i++) {\r\n\t\t\t\tif (this.gridData[UcId].differentValues[dataField].indexOf(data.NotNullValues[i]) == -1) {\r\n\t\t\t\t\tthis.gridData[UcId].differentValues[dataField].push(data.NotNullValues[i])\r\n\t\t\t\t}\r\n\t\t\t\tif ((this.gridData[UcId].blackLists[dataField].state == \"all\")\r\n\t\t\t\t\t&& (this.gridData[UcId].blackLists[dataField].visibles.indexOf(data.NotNullValues[i]) == -1)) {\r\n\t\t\t\t\tthis.gridData[UcId].blackLists[dataField].visibles.push(data.NotNullValues[i])\r\n\t\t\t\t}\r\n\t\t\t\tif ((this.gridData[UcId].blackLists[dataField].state == \"none\")\r\n\t\t\t\t\t&& (this.gridData[UcId].blackLists[dataField].hiddens.indexOf(data.NotNullValues[i]) == -1)) {\r\n\t\t\t\t\t\tthis.gridData[UcId].blackLists[dataField].hiddens.push(data.NotNullValues[i])\r\n\t\t\t\t}\r\n\t\t\t\tif ((this.gridData[UcId].blackLists[dataField].defaultAction == \"Exclude\")\r\n\t\t\t\t\t&& (this.gridData[UcId].blackLists[dataField].state == \"\") && (data.NotNullValues[i].trimpivot() != \"\")\r\n\t\t\t\t\t&& (this.gridData[UcId].blackLists[dataField].visibles.length > 0)) { //correct blanck spaces when initial user filter\r\n\t\t\t\t\tfor (var j = 0; j < this.gridData[UcId].blackLists[dataField].visibles.length; j++) {\r\n\t\t\t\t\t\tif (this.gridData[UcId].blackLists[dataField].visibles[j] == data.NotNullValues[i].trimpivot()) {\r\n\t\t\t\t\t\t\tthis.gridData[UcId].blackLists[dataField].visibles[j] = data.NotNullValues[i]\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\r\n\r\n\t\t\tthis.gridData[UcId].grid.loadDifferentValues(columnNumber, this.gridData[UcId].differentValues[dataField]);\r\n\t\t\t\t\t\r\n\t\t\tif (requestDataField == undefined){\r\n\t\t\t\tcolumnNumber++;\r\n\t\t\t\tOAT_JS.grid.initValueRead(UcId, columnNumber)\r\n\t\t\t}\r\n\t\t},\r\n\t\tchangeValues: function (UcId, dataField, columnNumber, data, filterText) { //when filter by search filter, delete pairs and show new ones\r\n\t\t\tvar searchInput = jQuery(\"#\" + UcId + dataField)[0];\r\n\r\n\t\t\tif (((searchInput.value) || (searchInput.value == \"\")) && (searchInput.value != filterText)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar columnNumber = this.gridData[UcId].columnDataField.indexOf(dataField);\r\n\t\t\tvar originalColumn = this.gridData[UcId].originalColumnDataField.indexOf(dataField)\r\n\r\n\t\t\tthis.gridData[UcId].differentValuesPaginationInfo[dataField].filtered = true;\r\n\t\t\tthis.gridData[UcId].differentValuesPaginationInfo[dataField].blocked = true;\r\n\t\t\tOAT.removeAllPairsFromPopUp(this.gridData[UcId], columnNumber, data.PagesCount > 1);\r\n\r\n\t\t\t//set filtered pagination info\r\n\t\t\tthis.gridData[UcId].filteredValuesPaginationInfo[dataField].previousPage = 1\r\n\t\t\tthis.gridData[UcId].filteredValuesPaginationInfo[dataField].totalPages = data.PagesCount\r\n\t\t\tthis.gridData[UcId].filteredValuesPaginationInfo[dataField].filteredText = filterText\r\n\r\n\t\t\tfor (var i = 0; i < data.NotNullValues.length; i++) {\r\n\t\t\t\tvar alreadyInValues = (this.gridData[UcId].differentValues[dataField].indexOf(data.NotNullValues[i]) != -1)\r\n\t\t\t\t//append to different values\r\n\t\t\t\tif (this.gridData[UcId].differentValues[dataField].indexOf(data.NotNullValues[i]) == -1) {\r\n\t\t\t\t\tthis.gridData[UcId].differentValues[dataField].push(data.NotNullValues[i])\r\n\t\t\t\t}\r\n\t\t\t\tif ((this.gridData[UcId].blackLists[dataField].state == \"all\") ||\r\n\t\t\t\t\t((this.gridData[UcId].blackLists[dataField].defaultAction == \"Include\") && (!alreadyInValues))) {\r\n\t\t\t\t\t//if Include new values and is a new value\r\n\t\t\t\t\tif ((this.gridData[UcId].blackLists[dataField].visibles.indexOf(data.NotNullValues[i]) == -1)\r\n\t\t\t\t\t\t&& (this.gridData[UcId].blackLists[dataField].hiddens.indexOf(data.NotNullValues[i]) == -1)) {\r\n\t\t\t\t\t\tthis.gridData[UcId].blackLists[dataField].visibles.push(data.NotNullValues[i])\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t//\r\n\r\n\r\n\t\t\t\tvar checked = true;\r\n\t\t\t\tif (this.gridData[UcId].blackLists[dataField].state != \"all\") {\r\n\t\t\t\t\tif (this.gridData[UcId].blackLists[dataField].visibles.indexOf(data.NotNullValues[i]) < 0) {\r\n\t\t\t\t\t\tchecked = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.gridData[UcId].filteredValuesPaginationInfo[dataField].values.push(data.NotNullValues[i]);\r\n\t\t\t\tvar pict_value = OAT.ApplyPictureValue(data.NotNullValues[i].trimpivot(), this.gridData[UcId].rowsMetadata.columnsDataType[originalColumn],\r\n\t\t\t\t\tthis.gridData[UcId].rowsMetadata.defaultPicture, this.gridData[UcId].rowsMetadata.forPivotCustomPicture[originalColumn]).replace(/ /g, \"\\u00A0\");\r\n\t\t\t\tif (!((this.gridData[UcId].blackLists[dataField].hasNull) && (data.NotNullValues[i].trimpivot() == this.gridData[UcId].defaultNullText))) {\r\n\t\t\t\t\tOAT.appendNewPairToPopUp(this.gridData[UcId], data.NotNullValues[i], columnNumber, checked, pict_value, dataField);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (data.PagesCount > 0)\r\n\t\t\t\tthis.gridData[UcId].differentValuesPaginationInfo[dataField].blocked = false;\r\n\t\t},\r\n\t\tsetColumnVisibleValue: function (UcId, column, visible) {\r\n\t\t\tvar origColumnNumber = this.gridData[UcId].originalColumnDataField.indexOf(this.gridData[UcId].columnDataField[column])\r\n\t\t\tthis.gridData[UcId].columnVisible[origColumnNumber] = visible\r\n\t\t\tOAT.SaveStateWhenServerPaging(OAT_JS.grid.gridData[UcId], UcId, OAT_JS.grid.gridData[UcId].blackLists, OAT_JS.grid.gridData[UcId].columnVisible,\r\n\t\t\t\tOAT_JS.grid.gridData[UcId].columnDataField)\r\n\r\n\t\t\t//call autorefresh\r\n\t\t\tif (qv.collection[OAT_JS.grid.gridData[UcId].IdForQueryViewerCollection].AutoRefreshGroup != \"\") {\r\n\t\t\t\t\r\n\t\t\t\tOAT_JS.grid.initValueRead(UcId, 0)\r\n\t\t\t\t\r\n\t\t\t\tvar wait = function(){\r\n\t\t\t\t\tif (!OAT_JS.grid.gridData[UcId].endValueRead) {\r\n\t\t\t\t\t\tsetTimeout( wait , 100)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvar meta = OAT.createXMLMetadata(OAT_JS.grid.gridData[UcId], null, true);\r\n\r\n\t\t\t\t\t\tvar spl = OAT_JS.grid.gridData[UcId].IdForQueryViewerCollection;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tsetTimeout( function() {\r\n\t\t\t\t\r\n\t\t\t\t\t\t\tvar paramobj = {  \"QueryviewerId\": spl, \"Metadata\": meta};\r\n\t\t\t\t\t\t\tvar evt = document.createEvent(\"Events\")\r\n\t\t\t\t\t\t\tevt.initEvent(\"RequestUpdateLayoutSameGroup\", true, true);\r\n\t\t\t\t\t\t\tevt.parameter = paramobj;\r\n\t\t\t\t\t\t\tdocument.dispatchEvent(evt);\r\n\t\t\t\t\r\n\t\t\t\t\t\t}, 50)\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t/*var listennings = qv.collection[spl];\r\n\t\t\t\t\t\tif ((listennings != \"\") && (listennings != null) && (listennings != undefined)) {\r\n\t\t\t\t\t\t\tqv.util.autorefresh.UpdateLayoutSameGroup(listennings, qv.pivot.GetRuntimeMetadata(meta, listennings.RealType), true);\r\n\t\t\t\t\t\t}*/\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\twait();\r\n\t\t\t}\r\n\r\n\t\t},\r\n\t\tgetTableWhenServerPagination: function (UcId, res) {\r\n\t\t\t//var res = qv.collection[OAT_JS.grid.gridData[UcId].IdForQueryViewerCollection].getPageDataForTableSync([1, 0, true, \"\", \"\", OAT_JS.grid.gridData[UcId].filterInfo, false]);\r\n\t\t\tvar t = 0;\r\n\t\t\tvar records = res.split(\"<Recordset\");\r\n\t\t\tvar rec = \"<Recordset\" + records[1]\r\n\t\t\tvar last = rec.split(\"</Page>\");\r\n\t\t\tvar finalRes = last[0] + '</Page>\\n</Recordset>';//\"</Table>\";\r\n\t\t\treturn finalRes;\r\n\t\t},\r\n\t\tsetFilterChangedWhenServerPagination: function (UcId, oatDimension) {\r\n\t\t\tif ((qv.collection[OAT_JS.grid.gridData[UcId].IdForQueryViewerCollection].FilterChanged) || (qv.util.isGeneXusPreview())) {\r\n\t\t\t\tvar df = oatDimension.getAttribute(\"dataField\")\r\n\r\n\t\t\t\tvar difValues = OAT_JS.grid.gridData[UcId].differentValues[df];\r\n\t\t\t\tvar diffValuesPagInfo = OAT_JS.grid.gridData[UcId].differentValuesPaginationInfo[df];\r\n\r\n\t\t\t\tif (OAT_JS.grid.gridData[UcId].differentValuesPaginationInfo[df].previousPage == OAT_JS.grid.gridData[UcId].differentValuesPaginationInfo[df].totalPages) {\r\n\r\n\t\t\t\t\tvar blacInfo = OAT_JS.grid.gridData[UcId].blackLists[df]\r\n\r\n\t\t\t\t\tvar datastr = \"<DATA event=\\\"FilterChanged\\\" name=\\\"\" + oatDimension.getAttribute(\"name\") + \"\\\" displayName=\\\"\" + oatDimension.getAttribute(\"displayName\") + \"\\\">\"\r\n\r\n\t\t\t\t\tfor (var dvi = 0; dvi < difValues.length; dvi++) {\r\n\t\t\t\t\t\tvar checked = true;\r\n\t\t\t\t\t\tif (OAT_JS.grid.gridData[UcId].blackLists[df].state != \"all\") {\r\n\t\t\t\t\t\t\tif (OAT_JS.grid.gridData[UcId].blackLists[df].visibles.indexOf(difValues[dvi]) < 0) {\r\n\t\t\t\t\t\t\t\tchecked = false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (checked) {\r\n\t\t\t\t\t\t\tdatastr = datastr + '<VALUE>' + difValues[dvi] + '</VALUE>';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tdatastr = datastr + \"</DATA>\"\r\n\r\n\r\n\t\t\t\t\tif (qv.util.isGeneXusPreview())\r\n\t\t\t\t\t\twindow.external.SendText(qv.collection[OAT_JS.grid.gridData[UcId].IdForQueryViewerCollection].ControlName, datastr);\r\n\r\n\t\t\t\t\tvar xml_doc = qv.util.dom.xmlDocument(datastr);\r\n\t\t\t\t\tvar Node = qv.util.dom.selectXPathNode(xml_doc, \"/DATA\");\r\n\t\t\t\t\t/*qv.collection[OAT_JS.grid.gridData[UcId].IdForQueryViewerCollection].FilterChangedData = {};\r\n\t\t\t\t\tqv.collection[OAT_JS.grid.gridData[UcId].IdForQueryViewerCollection].FilterChangedData.Name = Node.getAttribute(\"name\");\r\n\t\t\t\t\tqv.collection[OAT_JS.grid.gridData[UcId].IdForQueryViewerCollection].FilterChangedData.SelectedValues = [];\r\n\t\t\t\t\tvar valueIndex = -1;\r\n\t\t\t\t\tfor (var i = 0; i < Node.childNodes.length; i++)\r\n\t\t\t\t\t\tif (Node.childNodes[i].nodeName == \"VALUE\") {\r\n\t\t\t\t\t\t\tvalueIndex++;\r\n\t\t\t\t\t\t\tqv.collection[OAT_JS.grid.gridData[UcId].IdForQueryViewerCollection].FilterChangedData.SelectedValues[valueIndex] = Node.childNodes[i].firstChild.nodeValue;\r\n\t\t\t\t\t\t}*/\r\n\t\t\t\t\t\t\r\n\t\t\t\t\tvar FilterChangedData = {};\r\n\t\t\t\t\tFilterChangedData.Name = Node.getAttribute(\"name\");\r\n\t\t\t\t\tFilterChangedData.SelectedValues = [];\r\n\t\t\t\t\tvar valueIndex = -1;\r\n\t\t\t\t\tfor (var i = 0; i < Node.childNodes.length; i++)\r\n\t\t\t\t\t\tif (Node.childNodes[i].nodeName == \"VALUE\") {\r\n\t\t\t\t\t\t\tvalueIndex++;\r\n\t\t\t\t\t\t\tFilterChangedData.SelectedValues[valueIndex] = Node.childNodes[i].firstChild.nodeValue;\r\n\t\t\t\t\t\t}\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\tself.fireOnFilterChanged(UcId, FilterChangedData)\r\n\t\t\t\t\t/*if (qv.collection[OAT_JS.grid.gridData[UcId].IdForQueryViewerCollection].FilterChanged) {\r\n\t\t\t\t\t\tqv.collection[OAT_JS.grid.gridData[UcId].IdForQueryViewerCollection].FilterChanged();\r\n\t\t\t\t\t}*/\r\n\t\t\t\t} else {\r\n\t\t\t\t\tOAT_JS.grid.gridData[UcId].differentValuesPaginationInfo[df].blocked = true;\r\n\t\t\t\t\tvar ValuePageInfo = OAT_JS.grid.gridData[UcId].differentValuesPaginationInfo[df]\r\n\t\t\t\t\tvar page = ValuePageInfo.previousPage + 1;\r\n\t\t\t\t\tOAT_JS.grid.gridData[UcId].lastRequestValue = df;\r\n\t\t\t\t\t\r\n\t\t\t\t\tOAT_JS.grid.lastCallToQueryViewer = \"filterChange\"\r\n\t\t\t\t\tOAT_JS.grid.lastCallData = { \"self\": this, \"UcId\": UcId,  \"filterValue\": \"\", \"dataField\": df, \"oatDimension\": oatDimension }\r\n\t\t\t\t\r\n\t\t\t\t\tself.requestAttributeForTable(UcId, df, page, \"\", 0)\r\n\t\t\t\t\r\n\t\t\t\t\t/*qv.collection[OAT_JS.grid.gridData[UcId].IdForQueryViewerCollection].getAttributeValues((function (resJSON) {\r\n\t\t\t\t\t\tvar res = JSON.parse(resJSON);\r\n\t\t\t\t\t\tOAT_JS.grid.appendNewValueData(UcId, res, true)\r\n\t\t\t\t\t\tOAT_JS.grid.setFilterChangedWhenServerPagination(UcId, oatDimension)\r\n\t\t\t\t\t}).closure(this), [df, page, 0, \"\"]);*/\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t},\r\n\t\t\r\n\t\tgetAllDataRowsForExport: function (UcId, _selfgrid, fileName, format) {\r\n\t\t\t\r\n\t\t\tOAT_JS.grid.lastCallToQueryViewer = \"getAllDataRowsForExport\"\r\n\t\t\tOAT_JS.grid.lastCallData = {  \"UcId\": UcId, \"_selfgrid\":_selfgrid, \"fileName\":fileName, \"format\": format}\r\n\t\t\tself.requestPageDataForTable(1, 0, false, OAT_JS.grid.gridData[UcId].dataFieldOrder, OAT_JS.grid.gridData[UcId].orderType, OAT_JS.grid.gridData[UcId].filterInfo, false, OAT_JS.grid.gridData[UcId].IdForQueryViewerCollection)\r\n\t\t\t\t\r\n\t\t\t\r\n\t\t\t/*\r\n\t\t\tqv.collection[OAT_JS.grid.gridData[UcId].IdForQueryViewerCollection].getPageDataForTable((function (resXML) {\r\n\t\t\t\tvar dataString = resXML;\r\n\t\t\t\tvar stringRecord = dataString.split(\"<Record>\");\r\n\t\t\t\tvar data = []\r\n\t\t\t\tfor (var i = 1; i < stringRecord.length; i++) {\r\n\t\t\t\t\tvar recordData = [];\r\n\t\t\t\t\tfor (var j = 0; j < OAT_JS.grid.gridData[UcId].grid.columns.length; j++) {\r\n\t\t\t\t\t\trecordData[j] = \"#NuN#\"\r\n\t\t\t\t\t\tvar dt = stringRecord[i].split(\"<\" + OAT_JS.grid.gridData[UcId].grid.columns[j].getAttribute(\"dataField\") + \">\")\r\n\t\t\t\t\t\tif (dt.length > 1) {\r\n\t\t\t\t\t\t\tvar at = dt[1].split(\"</\" + OAT_JS.grid.gridData[UcId].grid.columns[j].getAttribute(\"dataField\") + \">\")\r\n\t\t\t\t\t\t\trecordData[j] = at[0]\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdata.push(recordData)\r\n\r\n\t\t\t\t\tif (format != \"xlsx\") {\r\n\t\t\t\t\t\tif ((i > OAT_JS.grid.gridData[UcId].rowsPerPage) && !(OAT_JS.grid.gridData[UcId].rowsPerPage == \"\")) {\r\n\t\t\t\t\t\t\tOAT.CreateGridRow(recordData, OAT_JS.grid.gridData[UcId], true)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tswitch (format) {\r\n\t\t\t\t\tcase \"pdf\": OAT.ExportToPdf(_selfgrid, fileName); break;\r\n\t\t\t\t\tcase \"xml\": OAT.ExportToXML(_selfgrid, fileName); break;\r\n\t\t\t\t\tcase \"html\": OAT_JS.grid.gridData[UcId].grid.ExportToHtml(_selfgrid, fileName); break;\r\n\t\t\t\t\tcase \"xls\": OAT.ExportToExcel(_selfgrid, fileName); break;\r\n\t\t\t\t\tcase \"xlsx\": OAT.ExportToExcel2010(_selfgrid, fileName, true, data, UcId); break;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tOAT_JS.grid.gridData[UcId].grid.removeAllCollapseRows()\r\n\r\n\t\t\t}).closure(this), [1, 0, false, OAT_JS.grid.gridData[UcId].dataFieldOrder, OAT_JS.grid.gridData[UcId].orderType, OAT_JS.grid.gridData[UcId].filterInfo], false);\r\n*/\r\n\t\t\t\r\n\t\t},\r\n\t\trestoreDefaultView: function (UcId) {\r\n\t\t\tthis.gridData[UcId].redrawHeader = true\r\n\t\t\tthis.gridData[UcId].columnDataField = this.gridData[UcId].originalColumnDataField\r\n\t\t\t//reset order\r\n\t\t\tOAT_JS.grid.gridData[UcId].dataFieldOrder = \"\"\r\n\t\t\tOAT_JS.grid.gridData[UcId].orderType = \"\"\r\n\t\t\t//reset filter info\r\n\t\t\tthis.gridData[UcId].filterInfo = [];\r\n\t\t\tvar tempInfo = [];\r\n\t\t\tfor (var id = 0; id < OAT_JS.grid.gridData[UcId].grid.columns.length; id++) {\r\n\t\t\t\ttempInfo[OAT_JS.grid.gridData[UcId].grid.columns[id].getAttribute(\"dataField\")] = this.gridData[UcId].blackLists[OAT_JS.grid.gridData[UcId].grid.columns[id].getAttribute(\"dataField\")].hasNull;\r\n\t\t\t}\r\n\t\t\tfor (var id = 0; id < OAT_JS.grid.gridData[UcId].grid.columns.length; id++) {\r\n\t\t\t\tthis.gridData[UcId].blackLists[OAT_JS.grid.gridData[UcId].grid.columns[id].getAttribute(\"dataField\")] = {\r\n\t\t\t\t\tstate: \"all\", visibles: [], defaultAction: \"Include\", hiddens: [],\r\n\t\t\t\t\thasNull: tempInfo[OAT_JS.grid.gridData[UcId].grid.columns[id].getAttribute(\"dataField\")]\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tvar indexHeader = 0\r\n\t\t\tfor (var c = 0; c < this.gridData[UcId].columnVisible.length; c++) {\r\n\t\t\t\tthis.gridData[UcId].grid.applySortOrderType(c, 1);\r\n\t\t\t\tthis.gridData[UcId].columnVisible[c] = OAT_JS.grid.gridData[UcId].grid.columns[c].getAttribute(\"visible\").toLowerCase() == \"yes\"; //true;\r\n\t\t\t\tif (this.gridData[UcId].columnVisible[c]){\r\n\t\t\t\t\tthis.gridData[UcId].grid.showColumnHeader(indexHeader);\r\n\t\t\t\t\tindexHeader = indexHeader + 1;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.gridData[UcId].grid.hideColumnHeader(indexHeader);\r\n\t\t\t\t\tindexHeader = indexHeader + 1;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.gridData[UcId].rowsPerPage = this.gridData[UcId].defaultValues.rowsPerPage\r\n\t\t\tif (jQuery(\"#\" + this.gridData[UcId].grid.controlName + \"tablePagination_rowsPerPage\").length > 0) {\r\n\t\t\t\tjQuery(\"#\" + this.gridData[UcId].grid.controlName + \"tablePagination_rowsPerPage\")[0].value = this.gridData[UcId].defaultValues.rowsPerPage\r\n\t\t\t}\r\n\r\n\t\t},\r\n\t\tgetStateChange: function (UcId) {\r\n\t\t\tif (this.gridData[UcId].rowsPerPage != this.gridData[UcId].defaultValues.rowsPerPage) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tif ((this.gridData[UcId].defaultValues.dataFieldOrder != OAT_JS.grid.gridData[UcId].dataFieldOrder) || (this.gridData[UcId].defaultValues.orderType != OAT_JS.grid.gridData[UcId].orderType)) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tif ((this.gridData[UcId].filterInfo != undefined) && (this.gridData[UcId].filterInfo.length > 0)) {\r\n\t\t\t\treturn true\r\n\t\t\t}\r\n\t\t\tfor (var t = 0; t < this.gridData[UcId].columnVisible.length; t++) {\r\n\t\t\t\tvar defaultVisible = OAT_JS.grid.gridData[UcId].grid.columns[t].getAttribute(\"visible\").toLowerCase() == \"yes\";\r\n\t\t\t\tif (this.gridData[UcId].columnVisible[t] != defaultVisible) {\r\n\t\t\t\t\treturn true\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfor (var c = 0; c < this.gridData[UcId].columnDataField.length; c++) {\r\n\t\t\t\tif (this.gridData[UcId].columnDataField[c] != this.gridData[UcId].originalColumnDataField[c])\r\n\t\t\t\t\treturn true\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn false\r\n\t\t},\r\n\t\trefreshPivotWhenServerPagination: function (UcId, dataFieldOrderChanged, OrderChanged, dataFieldPositions) {\r\n\r\n\t\t\tself.getDataForTable(UcId, 1, this.gridData[UcId].rowsPerPage, true, dataFieldOrderChanged, OrderChanged, \"\", \"\", \"\", true);\r\n\t\t},\r\n\t\tmoveToFirstPage: function (UcId) {\r\n\t\t\tif (this.gridData[UcId].actualPageNumber > 1) {\r\n\t\t\t\tself.getDataForTable(UcId, 1, this.gridData[UcId].rowsPerPage, false, \"\", \"\", \"\", \"\", false);\r\n\t\t\t}\r\n\t\t},\r\n\t\tmoveToNextPage: function (UcId) {\r\n\t\t\tif (this.gridData[UcId].actualPageNumber < this.gridData[UcId].actualCantPages) {\r\n\t\t\t\tself.getDataForTable(UcId, this.gridData[UcId].actualPageNumber + 1, this.gridData[UcId].rowsPerPage, false, \"\", \"\", \"\", \"\", false);\r\n\t\t\t}\r\n\t\t},\r\n\t\tmoveToLastPage: function (UcId) {\r\n\t\t\tif (this.gridData[UcId].actualPageNumber < this.gridData[UcId].actualCantPages) {\r\n\t\t\t\tself.getDataForTable(UcId, this.gridData[UcId].actualCantPages, this.gridData[UcId].rowsPerPage, false, \"\", \"\", \"\", \"\", false);\r\n\t\t\t}\r\n\t\t},\r\n\t\tmoveToPreviousPage: function (UcId) {\r\n\t\t\tif (this.gridData[UcId].actualPageNumber > 1) {\r\n\t\t\t\tself.getDataForTable(UcId, this.gridData[UcId].actualPageNumber - 1, this.gridData[UcId].rowsPerPage, false, \"\", \"\", \"\", \"\", false);\r\n\t\t\t}\r\n\t\t},\r\n\t\tcantPages: function (UcId, dataField) {\r\n\t\t\treturn this.gridData[UcId].differentValuesPaginationInfo[dataField].totalPages\r\n\t\t},\r\n\t\tsetDataFieldPosition: function (UcId, dataFieldPositions) {\r\n\t\t\tthis.gridData[UcId].columnDataField = []\r\n\t\t\tthis.gridData[UcId].columnDataField = dataFieldPositions\r\n\t\t\t\r\n\t\t\tOAT.SaveStateWhenServerPaging(this.gridData[UcId], UcId, this.gridData[UcId].blackLists, this.gridData[UcId].columnVisible,\r\n\t\t\t\tthis.gridData[UcId].columnDataField)\r\n\r\n\t\t\t//call autorefresh\r\n\t\t\tif (qv.collection[OAT_JS.grid.gridData[UcId].IdForQueryViewerCollection].AutoRefreshGroup != \"\") {\r\n\t\t\t\tOAT_JS.grid.initValueRead(UcId, 0)\r\n\t\t\t\t\r\n\t\t\t\tvar wait = function(){\r\n\t\t\t\t\tif (!OAT_JS.grid.gridData[UcId].endValueRead) {\r\n\t\t\t\t\t\tsetTimeout( wait , 100)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvar meta = OAT.createXMLMetadata(OAT_JS.grid.gridData[UcId], null, true);\r\n\t\t\t\t\t\tvar spl = OAT_JS.grid.gridData[UcId].IdForQueryViewerCollection;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tsetTimeout( function() {\r\n\t\t\t\t\r\n\t\t\t\t\t\t\tvar paramobj = {  \"QueryviewerId\": spl, \"Metadata\": meta};\r\n\t\t\t\t\t\t\tvar evt = document.createEvent(\"Events\")\r\n\t\t\t\t\t\t\tevt.initEvent(\"RequestUpdateLayoutSameGroup\", true, true);\r\n\t\t\t\t\t\t\tevt.parameter = paramobj;\r\n\t\t\t\t\t\t\tdocument.dispatchEvent(evt);\r\n\t\t\t\t\r\n\t\t\t\t\t\t}, 50)\r\n\t\t\t\t\t\t/*var listennings = qv.collection[spl];\r\n\t\t\t\t\t\tif ((listennings != \"\") && (listennings != null) && (listennings != undefined)) {\r\n\t\t\t\t\t\t\tqv.util.autorefresh.UpdateLayoutSameGroup(listennings, qv.pivot.GetRuntimeMetadata(meta, listennings.RealType), true);\r\n\t\t\t\t\t\t}*/\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\twait();\r\n\t\t\t}\r\n\t\t},\r\n\t\tfireOnItemClickEvent: function(query, datastr){\r\n\t\t\tsetTimeout( function() {\r\n\t\t\t\tvar paramobj = {\"QueryViewer\": query, \"Data\": datastr, \"QueryviewerId\": self.IdForQueryViewerCollection};\r\n\t\t\t\tvar evt = document.createEvent(\"Events\")\r\n\t\t\t\tevt.initEvent(\"TableOnItemClickEvent\", true, true);\r\n\t\t\t\tevt.parameter = paramobj;\r\n\t\t\t\tdocument.dispatchEvent(evt);\r\n\t\t\t}, 0)\r\n\t\t},\t\t\r\n\t\trequestDataSynForTable: function(UcId){\r\n\t\t\tsetTimeout( function() {\r\n\t\t\t\tvar paramobj = {\"QueryviewerId\": UcId};\r\n\t\t\t\tvar evt = document.createEvent(\"Events\")\r\n\t\t\t\tevt.initEvent(\"RequestDataSynForTable\", true, true);\r\n\t\t\t\tevt.parameter = paramobj;\r\n\t\t\t\tdocument.dispatchEvent(evt);\r\n\t\t\t}, 0)\r\n\t\t},\r\n\t\taddValueToDifferentValues: function (UcId, dataField, val) {\r\n\t\t\tvar originalColumn = this.gridData[UcId].originalColumnDataField.indexOf(dataField);\r\n\t\t\tvar dataType = this.gridData[UcId].grid.columnsDataType[originalColumn];\r\n\t\t\tvar sortInt = false;\r\n\t\t\tif ((dataType == \"integer\") || (dataType == \"real\")) {\r\n\t\t\t\tsortInt = true;\r\n\t\t\t}\r\n\r\n\r\n\r\n\t\t\tvar tempData = [];\r\n\t\t\tvar added = false;\r\n\r\n\t\t\tif (val == \"#NuN#\") {\r\n\t\t\t\ttempData.push(val);\r\n\t\t\t\tadded = true;\r\n\t\t\t}\r\n\r\n\t\t\tfor (var l = 0; l < this.gridData[UcId].differentValues[dataField].length; l++) {\r\n\t\t\t\tif (!sortInt) {\r\n\t\t\t\t\tif ((val < this.gridData[UcId].differentValues[dataField][l]) && (!added)) {\r\n\t\t\t\t\t\ttempData.push(val);\r\n\t\t\t\t\t\tadded = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttempData.push(this.gridData[UcId].differentValues[dataField][l])\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif ((parseFloat(val) < parseFloat(this.gridData[UcId].differentValues[dataField][l])) && (!added)) {\r\n\t\t\t\t\t\ttempData.push(val);\r\n\t\t\t\t\t\tadded = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttempData.push(this.gridData[UcId].differentValues[dataField][l])\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (!added) {\r\n\t\t\t\ttempData.push(val)\r\n\t\t\t}\r\n\r\n\t\t\tthis.gridData[UcId].differentValues[dataField] = tempData;\r\n\r\n\t\t}\r\n\t}\r\n\r\n\tOAT_JS.pivot = {\r\n\t\tpanel: 1,\r\n\t\ttab: 5,\r\n\t\tdiv: \"\",\r\n\t\tneeds: [\"pivot\", \"statistics\"],\r\n\t\tcb: function (_mthis, pivotdiv, page, content, defaultPicture, QueryViewerCollection, colms, formatValue, conditionalFormatsColumns,\r\n\t\t\tformatValueMeasures, autoResize, disableColumnSort, UcId, IdForQueryViewerCollection, rememberLayout, ShowMeasuresAsRows,\r\n\t\t\tformulaInfo, fullRecord, serverPagination, pagingData, HideDataFilds, OrderFildsHidden, initMetadata, relativePath, pivotParams) {\r\n\t\t\tthis.div = pivotdiv;\r\n\t\t\tvar cols = columnNumbers.length + rowNumbers.length + filterNumbers.length;\r\n\t\t\tif (measures.length > 1) {\r\n\t\t\t\tvar prevCol = cols;\r\n\t\t\t\tcols = cols + measures.length - 1;\r\n\t\t\t\tfor (var i = prevCol; i < cols; i++) {\r\n\t\t\t\t\tcolumnNumbers.push(i);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tfor (var i = 0; i < data.length; i++) {\r\n\t\t\t\t\tdata[i].push(\"0\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar pivot;\r\n\t\t\ttry {\r\n\t\t\t\tpivot = new OAT.Pivot(_mthis, content, page, header, data, columnNumbers, rowNumbers, filterNumbers, cols, query, conditionalFormats, UcId, pageSize, defaultPicture, QueryViewerCollection, colms, pivotdiv,\r\n\t\t\t\t\tformatValue, conditionalFormatsColumns, formatValueMeasures, measures, autoResize, disableColumnSort, UcId, IdForQueryViewerCollection, rememberLayout,\r\n\t\t\t\t\tShowMeasuresAsRows, formulaInfo, fullRecord, serverPagination, pagingData, HideDataFilds, OrderFildsHidden, initMetadata, relativePath,\r\n\t\t\t\t\t{ Allow: pivotParams.AllowSelection, EntireLine: pivotParams.SelectLine}, { TotalForRows: pivotParams.TotalForRows, TotalForColumns: pivotParams.TotalForColumns } , pivotParams.Title );\r\n\t\t\t} catch (Error) {\r\n\t\t\t\t//alert(Error)\r\n\t\t\t}\r\n\t\t\treturn pivot;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction parseToIntRegisterValue(string, registerValue) {\r\n\t\tif (string.indexOf(registerValue) > 0) {\r\n\t\t\tvar tmpstr = string.split(registerValue + '=\"');\r\n\t\t\tif (tmpstr.length == 1) {\r\n\t\t\t\ttmpstr = string.split(registerValue + \"='\");\r\n\t\t\t\treturn (tmpstr[1]) ? parseInt(tmpstr[1].split(\"'\")[0]) : -1;\r\n\t\t\t}\r\n\t\t\treturn (tmpstr[1]) ? parseInt(tmpstr[1].split('\"')[0]) : -1;\r\n\t\t}\r\n\t\treturn -1;\r\n\t}\r\n\r\n\tfunction parseToStringRegisterValue(string, registerValue) {\r\n\t\tif (string.indexOf(registerValue) > 0) {\r\n\t\t\tvar tmpstr = string.split(registerValue + '=\"');\r\n\t\t\tif (tmpstr.length == 1) {\r\n\t\t\t\ttmpstr = string.split(registerValue + \"='\");\r\n\t\t\t\treturn (tmpstr[1]) ? (tmpstr[1].split(\"'\")[0]) : -1;\r\n\t\t\t}\r\n\t\t\treturn (tmpstr[1]) ? (tmpstr[1].split('\"')[0]) : -1;\r\n\t\t}\r\n\t\treturn -1;\r\n\t}\r\n\r\n\tfunction EvaluateExpressionPivotJs(expression, data, formulaInfo) {\r\n\t\tvar tokens = []\r\n\t\tfor (var i = 0; i < expression.length; i++) {\r\n\t\t\ttokens[i] = expression[i]\r\n\t\t}\r\n\t\tvar evalStack = [];\r\n\r\n\t\twhile (tokens.length != 0) {\r\n\t\t\tvar currentToken = tokens.shift();\r\n\t\t\tif (isOperator(currentToken)) {\r\n\t\t\t\tvar operand1 = evalStack.pop();\r\n\t\t\t\tvar operand2 = evalStack.pop();\r\n\r\n\t\t\t\tvar result = PerformOperation(parseFloat(operand1), parseFloat(operand2), currentToken);\r\n\t\t\t\tevalStack.push(result);\r\n\t\t\t} else {\r\n\t\t\t\tif (isNaN(parseInt(currentToken))) {\r\n\t\t\t\t\tif (data[formulaInfo.itemPosition[currentToken]] == \"#NuN#\") return \"#NuN#\";\r\n\t\t\t\t\tevalStack.push(data[formulaInfo.itemPosition[currentToken]]);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tevalStack.push(currentToken);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn evalStack.pop();\r\n\t}\r\n\r\n\tfunction PerformOperation(operand1, operand2, operator) {\r\n\t\tswitch (operator) {\r\n\t\t\tcase '+':\r\n\t\t\t\treturn operand1 + operand2;\r\n\t\t\tcase '-':\r\n\t\t\t\treturn operand2 - operand1;\r\n\t\t\tcase '*':\r\n\t\t\t\treturn operand1 * operand2;\r\n\t\t\tcase '/':\r\n\t\t\t\treturn operand2 / operand1;\r\n\t\t\tdefault:\r\n\t\t\t\treturn;\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction InfixToPostfix(expression) {\r\n\t\t//var tokens = expression.split(/([0-9]+|[*+-\\/()])/);\r\n\t\tvar tokens = expression.split(\" \");\r\n\t\tvar outputQueue = [];\r\n\t\tvar operatorStack = [];\r\n\r\n\t\twhile (tokens.length != 0) {\r\n\t\t\tvar currentToken = tokens.shift();\r\n\r\n\t\t\tif (isOperator(currentToken)) {\r\n\t\t\t\twhile ((getAssociativity(currentToken) == 'left' &&\r\n\t\t\t\t\tgetPrecedence(currentToken) <= getPrecedence(operatorStack[operatorStack.length - 1])) ||\r\n\t\t\t\t\t(getAssociativity(currentToken) == 'right' &&\r\n\t\t\t\t\t\tgetPrecedence(currentToken) < getPrecedence(operatorStack[operatorStack.length - 1]))) {\r\n\t\t\t\t\toutputQueue.push(operatorStack.pop())\r\n\t\t\t\t}\r\n\r\n\t\t\t\toperatorStack.push(currentToken);\r\n\r\n\t\t\t}\r\n\t\t\telse if (currentToken == '(') {\r\n\t\t\t\toperatorStack.push(currentToken);\r\n\t\t\t}\r\n\t\t\telse if (currentToken == ')') {\r\n\t\t\t\twhile (operatorStack[operatorStack.length - 1] != '(') {\r\n\t\t\t\t\tif (operatorStack.length == 0)\r\n\t\t\t\t\t\tthrow (\"\");\r\n\r\n\t\t\t\t\toutputQueue.push(operatorStack.pop());\r\n\t\t\t\t}\r\n\t\t\t\toperatorStack.pop();\r\n\t\t\t} else {\r\n\t\t\t\toutputQueue.push(currentToken);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\twhile (operatorStack.length != 0) {\r\n\t\t\tif (!operatorStack[operatorStack.length - 1].match(/([()])/))\r\n\t\t\t\toutputQueue.push(operatorStack.pop());\r\n\t\t\telse\r\n\t\t\t\tthrow (\"Parenthesis balancing error! Shame on you!\");\r\n\t\t}\r\n\r\n\t\treturn outputQueue.join(\" \");\r\n\t}\r\n\r\n\r\n\tfunction isOperator(token) {\r\n\t\tif (!token.match(/([*+-\\/])/))\r\n\t\t\treturn false;\r\n\t\telse\r\n\t\t\treturn true;\r\n\t}\r\n\r\n\r\n\tfunction isNumber(token) {\r\n\t\tif (!token.match(/([0-9]+)/))\r\n\t\t\treturn false;\r\n\t\telse\r\n\t\t\treturn true;\r\n\t}\r\n\r\n\r\n\tfunction getPrecedence(token) {\r\n\t\tswitch (token) {\r\n\t\t\tcase '^':\r\n\t\t\t\treturn 9;\r\n\t\t\tcase '*':\r\n\t\t\tcase '/':\r\n\t\t\tcase '%':\r\n\t\t\t\treturn 8;\r\n\t\t\tcase '+':\r\n\t\t\tcase '-':\r\n\t\t\t\treturn 6;\r\n\t\t\tdefault:\r\n\t\t\t\treturn -1;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction getAssociativity(token) {\r\n\t\tswitch (token) {\r\n\t\t\tcase '+':\r\n\t\t\tcase '-':\r\n\t\t\tcase '*':\r\n\t\t\tcase '/':\r\n\t\t\t\treturn 'left';\r\n\t\t\tcase '^':\r\n\t\t\t\treturn 'right';\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tfunction OATSetCookie(name, value, expires, path, domain, secure) {\r\n\t\tdocument.cookie = name + \"=\" + escape(value) +\r\n\t\t\t((expires == null) ? \"\" : \"; expires=\" + expires.toGMTString()) +\r\n\t\t\t((path == null) ? \"\" : \"; path=\" + path) +\r\n\t\t\t((domain == null) ? \"\" : \"; domain=\" + domain) +\r\n\t\t\t((secure == null) ? \"\" : \"; secure\");\r\n\t}\r\n\tfunction OATGetCookie(name) {\r\n\t\tvar cname = name + \"=\";\r\n\t\tvar dc = document.cookie;\r\n\t\tif (dc.length > 0) {\r\n\t\t\tbegin = dc.indexOf(cname);\r\n\t\t\tif (begin != -1) {\r\n\t\t\t\tbegin += cname.length;\r\n\t\t\t\tend = dc.indexOf(\";\", begin);\r\n\t\t\t\tif (end == -1) end = dc.length;\r\n\t\t\t\treturn unescape(dc.substring(begin, end));\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\tfunction OATIsNotEmptyValue(value) {\r\n\t\treturn (value != \"#NaV#\") && (value != \"#NuN#\")\r\n\t}\r\n\r\n\tfunction OATGetRowsFromXML(data, obj, ShowMeasuresAsRows) {\r\n\t\tvar rows = [];\r\n\r\n\t\tvar rowsString = data.split(\"<Rows>\")\r\n\t\tif (rowsString.length) {\r\n\t\t\trowsString = rowsString[1].split(\"</Rows>\")\r\n\t\t\trowsString = rowsString[0].split(\"<Row>\")\r\n\t\t\tvar isTitle = 0;\r\n\t\t\tfor (var l = 1; l < rowsString.length; l++) {\r\n\t\t\t\tvar row = { headers: [], cells: [], subTotal: false, dataField: -1, rowSpan: 0 }\r\n\r\n\t\t\t\tvar subTotal = parseToStringRegisterValue(rowsString[l], \"Subtotal\")\r\n\t\t\t\tif (subTotal == \"true\") {\r\n\t\t\t\t\trow.subTotal = true\r\n\t\t\t\t}\r\n\t\t\t\tvar headerString\r\n\t\t\t\tif (rowsString[l].indexOf(\"</Header>\") > 0) {\r\n\t\t\t\t\theaderString = rowsString[l].split(\"</Header>\")[0].replace(\"<Header>\", \"\")\r\n\t\t\t\t} else {\r\n\t\t\t\t\theaderString = rowsString[l].split(\"/>\")[0].replace(\"<Header\", \"\")\r\n\t\t\t\t}\r\n\r\n\t\t\t\trow.dataField = parseToStringRegisterValue(headerString, \"DataField\"); //for columns in rows only\r\n\r\n\t\t\t\t//get dataFields of headers\r\n\t\t\t\tvar headerrep = headerString.replace(/<\\//g, \"-*-5\").replace(/\\/>/g, \"-*-5\")\r\n\t\t\t\tvar headersItems = headerrep.split(\"-*-5\");\r\n\r\n\t\t\t\tfor (var df = 1; df < headersItems.length; df++) {\r\n\t\t\t\t\tvar value;\r\n\t\t\t\t\tvar datafield = headersItems[df].split(\">\")[0]\r\n\t\t\t\t\tif (datafield == \"\") {\r\n\t\t\t\t\t\tdatafield = headersItems[df - 1].split(\"<\")[1].split(\" \")[0]\r\n\t\t\t\t\t\tvalue = \"#NuN#\";\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\tvalue = headersItems[df - 1].split(datafield + \">\")[1].split(\"<\")[0]\r\n\t\t\t\t\t\t} catch (ERROR) {\r\n\t\t\t\t\t\t\tvalue = \"#NuN#\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar h = { dataField: datafield, value: value, rowSpan: 1 }\r\n\r\n\r\n\t\t\t\t\tvar totalizedItems = headersItems.length - 1\r\n\t\t\t\t\tif (ShowMeasuresAsRows) {\r\n\t\t\t\t\t\ttotalizedItems = headersItems.length\r\n\t\t\t\t\t\tif (row.subTotal) {\r\n\t\t\t\t\t\t\ttotalizedItems--;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar sumarized = (df - totalizedItems >= 0)\r\n\r\n\t\t\t\t\tif ((rows.length > 0) && (!sumarized)) { //set rowspan\r\n\t\t\t\t\t\tif ((df - 1 == 0) || (row.headers[df - 2].rowSpan == 0)) { //no es la 1er columna, pero la anterior tiene span\r\n\t\t\t\t\t\t\tif (value == rows[l - 2].headers[df - 1].value) {\r\n\t\t\t\t\t\t\t\th.rowSpan = 0\r\n\t\t\t\t\t\t\t\tvar ant = l - 2\r\n\t\t\t\t\t\t\t\twhile (ant >= 0) {\r\n\t\t\t\t\t\t\t\t\tif (rows[ant].headers[df - 1].rowSpan > 0) {\r\n\t\t\t\t\t\t\t\t\t\trows[ant].headers[df - 1].rowSpan++\r\n\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tant--;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\trow.headers.push(h);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ((ShowMeasuresAsRows) && (row.subTotal)) {\r\n\t\t\t\t\tif ((l == 1) || (!rows[l - 2].subTotal) || (row.headers.length != rows[l - 2].headers.length)) {\r\n\t\t\t\t\t\trow.rowSpan = 1\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvar ant = l - 2;\r\n\t\t\t\t\t\twhile (ant >= 0) {\r\n\t\t\t\t\t\t\tif (rows[ant].rowSpan > 0) {\r\n\t\t\t\t\t\t\t\trows[ant].rowSpan++\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tant--\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t//get cells values\r\n\t\t\t\tvar cellsString = rowsString[l].split(\"<Cells>\")[1].split(\"</Cell>\")\r\n\t\t\t\tfor (var ci = 0; ci < cellsString.length - 1; ci++) {\r\n\r\n\t\t\t\t\tvar dField = (row.dataField != -1) ? row.dataField : obj.columnsHeaders[ci].dataField;\r\n\t\t\t\t\t//add empty cells\r\n\t\t\t\t\tfor (var ec = 1; ec < cellsString[ci].split(\"<Cell />\").length; ec++) {\r\n\t\t\t\t\t\tvar c = { value: \"#NuN#\", dataField: dField }\r\n\t\t\t\t\t\trow.cells.push(c);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar value = cellsString[ci].split(\"<Cell>\")[1]\r\n\t\t\t\t\tvar c = { value: value, dataField: dField }\r\n\t\t\t\t\trow.cells.push(c);\r\n\t\t\t\t}\r\n\t\t\t\t//add empty cells\r\n\t\t\t\tfor (var ec = 1; ec < cellsString[ci].split(\"<Cell />\").length; ec++) {\r\n\t\t\t\t\tvar c = { value: \"#NuN#\", dataField: dField }\r\n\t\t\t\t\trow.cells.push(c);\r\n\t\t\t\t}\r\n\r\n\t\t\t\trows.push(row);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\treturn rows;\r\n\t}\r\n\r\n\tfunction OATGetColumnsHeadersFromXML(dataString) {\r\n\t\tvar columnsString = dataString.split(\"<Columns>\")\r\n\t\tvar columnsHeaders = [];\r\n\t\tif (columnsString.length > 1) {\r\n\r\n\t\t\tcolumnsString = columnsString[1].split(\"</Columns>\")[0]\r\n\t\t\tvar headerString = columnsString.split(\"<Header\")\r\n\r\n\t\t\tfor (var t = 1; t < headerString.length; t++) {\r\n\t\t\t\tvar o = parseToStringRegisterValue(headerString[t], \"DataField\")\r\n\t\t\t\tvar subTotal = parseToStringRegisterValue(headerString[t], \"Subtotal\")\r\n\r\n\t\t\t\tvar subHeaders = [];\r\n\t\t\t\tvar subHeadersString = headerString[t].replace(\"DataField=\\\"\" + o + \"\\\">\", \"\").replace(\"DataField='\" + o + \"'>\", \"\").replace(\"</Header>\", \"\").replace(/IsNull=\"true\" \\/>/g, \">#NuN#<F>\").replace(/IsNull='true' \\/>/g, \">#NuN#<F>\").replace(/IsNull=\"true\"\\/>/g, \">#NuN#<F>\").split(\"<\")\r\n\t\t\t\tif (subHeadersString.length > 1) { //hay dimensiones en las columnas\r\n\t\t\t\t\tfor (var sh = 1; sh < subHeadersString.length - 1; sh++) {\r\n\t\t\t\t\t\tif (sh % 2 == 1) {\r\n\t\t\t\t\t\t\tvar datafield = subHeadersString[sh].split(\">\")[0]\r\n\t\t\t\t\t\t\tvar value = subHeadersString[sh].split(datafield + \">\")[1]\r\n\t\t\t\t\t\t\tvar h = { dataField: datafield, value: value, colSpan: 1 }\r\n\t\t\t\t\t\t\tsubHeaders.push(h)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcolumnsHeaders.push({ dataField: o, subTotal: (subTotal == \"true\"), subHeaders: subHeaders })\r\n\r\n\t\t\t}\r\n\r\n\t\t\t//obj.columnsHeaders = columnsHeaders;\r\n\t\t}\r\n\t\treturn columnsHeaders\r\n\t}\r\n\r\n\tfunction OATGetDataFromXMLForPivot(data, ShowMeasuresAsRows) {\r\n\t\tvar stringRecord = dataString.split(\"<Record>\")\r\n\r\n\t\tvar obj = {};\r\n\t\tobj.ServerRecordCount = parseToIntRegisterValue(data, \"RecordCount\")\r\n\t\tobj.ServerPageCount = parseToIntRegisterValue(data, \"PageCount\")\r\n\t\tobj.ServerPageNumber = parseToIntRegisterValue(data, \"PageNumber\")\r\n\r\n\t\tobj.columnsHeaders = OATGetColumnsHeadersFromXML(data);\r\n\t\tobj.rows = OATGetRowsFromXML(data, obj, ShowMeasuresAsRows);\r\n\r\n\r\n\t\treturn obj;\r\n\t}\r\n\r\n\tfunction OATGetNewDataFromXMLForPivot(data, obj, ShowMeasuresAsRows, exportTo) {\r\n\t\tdata = data.replace(/<Cell\\/>/g, \"<Cell \\/>\")\r\n\t\tif ((exportTo == undefined) || (exportTo == \"\")) {\r\n\t\t\tif (parseToIntRegisterValue(data, \"RecordCount\") != -1) {\r\n\t\t\t\tobj.ServerRecordCount = parseToIntRegisterValue(data, \"RecordCount\")\r\n\t\t\t}\r\n\t\t\tif (parseToIntRegisterValue(data, \"PageCount\") != -1) {\r\n\t\t\t\tobj.ServerPageCount = parseToIntRegisterValue(data, \"PageCount\")\r\n\t\t\t}\r\n\t\t}\r\n\t\tobj.ServerPageNumber = parseToIntRegisterValue(data, \"PageNumber\")\r\n\r\n\t\tif (data.split(\"<Columns>\").length > 1) {\r\n\t\t\tobj.columnsHeaders = OATGetColumnsHeadersFromXML(data);\r\n\t\t}\r\n\r\n\t\tobj.rows = OATGetRowsFromXML(data, obj, ShowMeasuresAsRows);\r\n\r\n\t\treturn obj;\r\n\t}\r\n\r\n\tfunction OATgetDataFromXMLOldFormat(dataString, orderFilds, orderFildsHidden) {\r\n\t\tvar stringRecord = dataString.split(\"<Record>\")\r\n\r\n\t\tvar data = [];\r\n\t\tvar fullData = [];\r\n\t\tfor (var i = 1; i < stringRecord.length; i++) {\r\n\t\t\tvar recordData = [];\r\n\t\t\tvar fullRecordData = [];\r\n\t\t\tfor (var j = 0; j < orderFilds.length; j++) {\r\n\t\t\t\trecordData[j] = \"#NuN#\"\r\n\t\t\t\tvar dt = stringRecord[i].split(\"<\" + orderFilds[j] + \">\")\r\n\t\t\t\tif (dt.length > 1) {\r\n\t\t\t\t\tvar at = dt[1].split(\"</\" + orderFilds[j] + \">\")\r\n\t\t\t\t\t/*var rp = at[0].replace(/^\\s+|\\s+$/g, '')\r\n\t\t\t\t\trecordData[j] = (rp != \"\") ? rp : undefined*/\r\n\t\t\t\t\trecordData[j] = at[0]\r\n\t\t\t\t\tfullRecordData[j] = recordData[j]\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tdata.push(recordData);\r\n\r\n\t\t\tif (orderFildsHidden != undefined) {\r\n\t\t\t\tvar pos_init = orderFilds.length;\r\n\t\t\t\tfor (var j = 0; j < orderFildsHidden.length; j++) {\r\n\t\t\t\t\tfullRecordData[pos_init + j] = undefined\r\n\t\t\t\t\tvar dt = stringRecord[i].split(\"<\" + orderFildsHidden[j] + \">\")\r\n\t\t\t\t\tif (dt.length > 1) {\r\n\t\t\t\t\t\tvar at = dt[1].split(\"</\" + orderFildsHidden[j] + \">\")\r\n\t\t\t\t\t\tfullRecordData[pos_init + j] = at[0]\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tfullData.push(fullRecordData);\r\n\t\t\t}\r\n\t\t\t/*\tif (fullRecordData.length > this.maxLengthRecord) this.maxLengthRecord = fullRecordData.length;*/\r\n\t\t}\r\n\r\n\t\tif (orderFildsHidden != undefined) {\r\n\t\t\treturn [data, fullData];\r\n\t\t} else {\r\n\t\t\treturn data;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction OATgetAllDataFromXMLOldFormat(dataString, orderFilds, orderFildsHidden) {\r\n\t\tvar stringRecord = dataString.split(\"<Record>\")\r\n\r\n\t\tvar data = [];\r\n\t\tvar fullData = [];\r\n\t\tfor (var i = 1; i < stringRecord.length; i++) {\r\n\t\t\tvar recordData = [];\r\n\t\t\tvar fullRecordData = [];\r\n\t\t\tfor (var j = 0; j < orderFilds.length; j++) {\r\n\t\t\t\trecordData[j] = \"#NuN#\"\r\n\t\t\t\tvar dt = stringRecord[i].split(\"<\" + orderFilds[j] + \">\")\r\n\t\t\t\tif (dt.length > 1) {\r\n\t\t\t\t\tvar at = dt[1].split(\"</\" + orderFilds[j] + \">\")\r\n\t\t\t\t\t/*var rp = at[0].replace(/^\\s+|\\s+$/g, '')\r\n\t\t\t\t\trecordData[j] = (rp != \"\") ? rp : undefined*/\r\n\t\t\t\t\trecordData[j] = at[0]\r\n\t\t\t\t\tfullRecordData[j] = recordData[j]\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tdata.push(recordData);\r\n\r\n\t\t\tvar pos_init = orderFilds.length;\r\n\t\t\tfor (var j = 0; j < orderFildsHidden.length; j++) {\r\n\t\t\t\tfullRecordData[pos_init + j] = undefined\r\n\t\t\t\tvar dt = stringRecord[i].split(\"<\" + orderFildsHidden[j] + \">\")\r\n\t\t\t\tif (dt.length > 1) {\r\n\t\t\t\t\tvar at = dt[1].split(\"</\" + orderFildsHidden[j] + \">\")\r\n\t\t\t\t\tfullRecordData[pos_init + j] = at[0]\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfullData.push(fullRecordData);\r\n\t\t\t//if (fullRecordData.length > this.maxLengthRecord) this.maxLengthRecord = fullRecordData.length; \r\n\t\t}\r\n\r\n\t\treturn [data, fullData];\r\n\t}\r\n\r\n\tvar OATParseMetadata = function (metadata, hideDimension, hideMeasures, serverPaging, translations) {\r\n\t\t//Parsear string metadata para remover measures ocultas\r\n\t\tvar orderFildsHidden = []; var hideDataFilds = []; var nameFildsHidden = [];\r\n\r\n\t\tvar removeMeasures = []; //number of remove measures\r\n\t\tvar headMetadata;\r\n\t\tif (metadata.indexOf('<OLAPDimension') != -1) {\r\n\t\t\theadMetadata = metadata.substring(0, metadata.indexOf('<OLAPDimension'));\r\n\t\t} else {\r\n\t\t\theadMetadata = metadata.substring(0, metadata.indexOf('<OLAPMeasure'));\r\n\t\t}\r\n\t\tvar restMetadata = metadata.substring(metadata.indexOf('<OLAPDimension'), metadata.length);\r\n\r\n\t\tvar dimensionString = restMetadata.split(\"<OLAPDimension\");\r\n\t\tfor (var i = 1; i < dimensionString.length; i++) {\r\n\t\t\tif (dimensionString[i].length > 0) {\r\n\t\t\t\tif (dimensionString[i].indexOf('</OLAPDimension>') != -1) {\r\n\t\t\t\t\tdimensionString[i] = dimensionString[i].substring(0, dimensionString[i].indexOf('</OLAPDimension>'));\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdimensionString[i] = dimensionString[i].substring(0, dimensionString[i].indexOf('/>')) + \">\";\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar hide = false\r\n\t\t\t\tif ((hideDimension != undefined) && (hideDimension.length > 0)) {\r\n\t\t\t\t\tvar dataField = dimensionString[i].split(\"dataField=\\\"\")[1].split(\"\\\"\")[0]\r\n\t\t\t\t\thide = (hideDimension.indexOf(dataField) != -1)\r\n\t\t\t\t}\r\n\t\t\t\t//if (serverPaging) hide = false;\r\n\r\n\t\t\t\tif (( ((dimensionString[i].indexOf(\"visible=\\\"No\\\"\") != -1) || (dimensionString[i].indexOf(\"visible=\\\"Never\\\"\") != -1)) && (hideDimension == undefined)) ||\r\n\t\t\t\t\t(hide && (hideDimension != undefined))) {//hide dimension\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tif (dimensionString[i].indexOf(\"displayName=\") != -1) {\r\n\t\t\t\t\t\t\tvar infoDisplayName = dimensionString[i].substring(dimensionString[i].indexOf(\"displayName=\") + 13)\r\n\t\t\t\t\t\t\torderFildsHidden.push(infoDisplayName.split('\"')[0])\r\n\t\t\t\t\t\t\thideDataFilds.push(dimensionString[i].substring(dimensionString[i].indexOf(\"dataField=\") + 11).split('\"')[0])\r\n\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\tnameFildsHidden.push(dimensionString[i].substring(dimensionString[i].indexOf(\"name=\") + 6).split('\"')[0])\r\n\t\t\t\t\t\t\t} catch (ERROR) {\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} catch (ERROR) { }\r\n\t\t\t\t\tdimensionString[i] = \"\";\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdimensionString[i] = \"<OLAPDimension \" + dimensionString[i] + \"</OLAPDimension>\"\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tdimensionString[i] = \"\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar measuresString = restMetadata.split(\"<OLAPMeasure\");\r\n\t\tvar allHide = true;\r\n\t\tfor (var i = 1; i < measuresString.length; i++) {\r\n\r\n\t\t\tvar hide = false\r\n\t\t\tif ((hideMeasures != undefined) && (hideMeasures.length > 0)) {\r\n\t\t\t\tvar dataField = measuresString[i].split(\"dataField=\\\"\")[1].split(\"\\\"\")[0]\r\n\t\t\t\thide = (hideMeasures.indexOf(dataField) != -1)\r\n\t\t\t}\r\n\t\t\t//if (serverPaging) hide = false;\r\n\r\n\t\t\tif (!hide) {\r\n\t\t\t\tif (measuresString[i].indexOf(\"</OLAPMeasure\") != -1) {\r\n\t\t\t\t\tmeasuresString[i] = \"<OLAPMeasure \" + measuresString[i].substring(0, measuresString[i].indexOf('</OLAPMeasure>')) + \"</OLAPMeasure>\"\r\n\t\t\t\t} else if (measuresString[i].indexOf(\"/>\") != -1) {\r\n\t\t\t\t\tmeasuresString[i] = \"<OLAPMeasure \" + measuresString[i].substring(0, measuresString[i].indexOf('/>')) + \"/>\";\r\n\t\t\t\t} else {\r\n\t\t\t\t\tmeasuresString[i] = \"\";\r\n\t\t\t\t}\r\n\t\t\t\tallHide = false;\r\n\t\t\t} else {\r\n\t\t\t\tmeasuresString[i] = \"\";\r\n\t\t\t}\r\n\t\t}\r\n\t\tif ((serverPaging) && (allHide)) {\r\n\t\t\tmeasuresString.push('<OLAPMeasure name=\"Quantity\" displayName=\"' + translations.GXPL_QViewerQuantity/*gx.getMessage(\"GXPL_QViewerQuantity\")*/ + '\" description=\"' + translations.GXPL_QViewerQuantity + '\" dataField=\"F0\" aggregation=\"count\" summarize=\"yes\" align=\"right\" picture=\"\" targetValue=\"0\" defaultPosition=\"data\" validPositions=\"data\" dataType=\"integer\" format=\"borderThickness:1\"> </OLAPMeasure>');\r\n\t\t}\r\n\r\n\t\tvar taileMetadata = \"</OLAPCube>\";\r\n\r\n\t\tmetadata = \"\";\r\n\t\tmetadata = headMetadata;\r\n\t\tfor (var i = 1; i < dimensionString.length; i++) {\r\n\t\t\tif (dimensionString[i].length > 0) {\r\n\t\t\t\tmetadata = metadata + dimensionString[i];\r\n\t\t\t}\r\n\t\t}\r\n\t\tfor (var i = 1; i < measuresString.length; i++) {\r\n\t\t\tif (measuresString[i].length > 0) {\r\n\t\t\t\tmetadata = metadata + measuresString[i]\r\n\t\t\t}\r\n\t\t}\r\n\t\tmetadata = metadata + taileMetadata;\r\n\t\t//end parsing metadata\r\n\t\treturn [metadata, orderFildsHidden, hideDataFilds, nameFildsHidden]\r\n\t}\r\n\r\n\r\n\tvar OATGetColumnsAndMeasureMeatadata = function (columns, measures, formulaInfo, OrderFildsHidden) {\r\n\t\tvar preHeader = []; var columnNames = []; var rowNames = []; var filterNames = [];\r\n\t\tvar formatValues = []; var conditionalFormatsColumns = []; var formatValuesMeasures = []; var conditionalFormats = [];\r\n\t\tvar orderFilds = []; var j = 0; var k = 0; var columnsDataType = []; var measureNames = [];\r\n\t\tvar forPivotCustomPicture = []; var forPivotCustomFormat = [];\r\n\t\t//get columns\r\n\t\tfor (var i = 0; i < columns.length; i++) {\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tif ((columns[i].attributes.getNamedItem(\"axis\").nodeValue.toLowerCase() == \"rows\") ||\r\n\t\t\t\t(columns[i].attributes.getNamedItem(\"axis\").nodeValue == \"\")) {\r\n\t\t\t\tcolumnNames[j] = columns[i].attributes.getNamedItem(\"displayName\").nodeValue;\r\n\t\t\t\tpreHeader[i] = columnNames[j];\r\n\t\t\t\tj++;\r\n\t\t\t}\r\n\t\t\tif (columns[i].attributes.getNamedItem(\"axis\").nodeValue.toLowerCase() == \"columns\") {\r\n\t\t\t\trowNames[k] = columns[i].attributes.getNamedItem(\"displayName\").nodeValue;\r\n\t\t\t\tpreHeader[i] = rowNames[k];\r\n\t\t\t\tk++;\r\n\t\t\t}\r\n\t\t\tif (columns[i].attributes.getNamedItem(\"axis\").nodeValue.toLowerCase() == \"pages\") {\r\n\t\t\t\tfilterNames[k] = columns[i].attributes.getNamedItem(\"displayName\").nodeValue;\r\n\t\t\t\tpreHeader[i] = filterNames[k];\r\n\t\t\t\tk++;\r\n\t\t\t}\r\n\r\n\t\t\tcolumnsDataType[i] = columns[i].attributes.getNamedItem(\"dataType\").nodeValue;\r\n\t\t\t//handle formats values\r\n\t\t\tif (columns[i].childNodes.length > 0) {\r\n\t\t\t\tif (columns[i].childNodes != null) {\r\n\t\t\t\t\tfor (var m = 0; m < columns[i].childNodes.length; m++) {\r\n\t\t\t\t\t\tif (columns[i].childNodes[m].localName == \"formatValues\") {\r\n\t\t\t\t\t\t\tfor (var n = 0; n < columns[i].childNodes[m].childNodes.length; n++) {\r\n\t\t\t\t\t\t\t\tif (columns[i].childNodes[m].childNodes[n].localName == \"value\") {\r\n\t\t\t\t\t\t\t\t\tvar value = {};\r\n\t\t\t\t\t\t\t\t\tvalue.format = columns[i].childNodes[m].childNodes[n].attributes.getNamedItem(\"format\").nodeValue;\r\n\t\t\t\t\t\t\t\t\tvalue.recursive = columns[i].childNodes[m].childNodes[n].attributes.getNamedItem(\"recursive\").nodeValue;\r\n\t\t\t\t\t\t\t\t\tvar crude = columns[i].childNodes[m].childNodes[n].textContent;\r\n\t\t\t\t\t\t\t\t\tvalue.value = crude.replace(/^\\s+|\\s+$/g, '');\r\n\t\t\t\t\t\t\t\t\tvalue.columnNumber = i;\r\n\t\t\t\t\t\t\t\t\tformatValues.push(value);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}//handle conditional formats\r\n\t\t\tif (columns[i].childNodes.length > 0) {\r\n\t\t\t\tif (columns[i].childNodes != null) {\r\n\t\t\t\t\tfor (var m = 0; m < columns[i].childNodes.length; m++) {\r\n\t\t\t\t\t\tif (columns[i].childNodes[m].localName == \"conditionalFormats\") {\r\n\t\t\t\t\t\t\tfor (var n = 0; n < columns[i].childNodes[m].childNodes.length; n++) {\r\n\t\t\t\t\t\t\t\tif (columns[i].childNodes[m].childNodes[n].localName == \"rule\") {\r\n\t\t\t\t\t\t\t\t\tvar format = {};\r\n\t\t\t\t\t\t\t\t\tformat.format = columns[i].childNodes[m].childNodes[n].attributes.getNamedItem(\"format\").nodeValue;\r\n\t\t\t\t\t\t\t\t\tformat.operation1 = columns[i].childNodes[m].childNodes[n].attributes.getNamedItem(\"op1\").nodeValue;\r\n\t\t\t\t\t\t\t\t\tformat.value1 = columns[i].childNodes[m].childNodes[n].attributes.getNamedItem(\"value1\").nodeValue;\r\n\t\t\t\t\t\t\t\t\tif (columns[i].childNodes[m].childNodes[n].attributes.getNamedItem(\"op2\") != null) {\r\n\t\t\t\t\t\t\t\t\t\tformat.operation2 = columns[i].childNodes[m].childNodes[n].attributes.getNamedItem(\"op2\").nodeValue;\r\n\t\t\t\t\t\t\t\t\t\tformat.value2 = columns[i].childNodes[m].childNodes[n].attributes.getNamedItem(\"value2\").nodeValue;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tformat.columnNumber = i;\r\n\t\t\t\t\t\t\t\t\tconditionalFormatsColumns.push(format);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t//manage pictures\r\n\t\t\t/*if (columns[i].attributes.getNamedItem(\"picture\").nodeValue != \"\") {\r\n\t\t\t\tif (columns[i].attributes.getNamedItem(\"dataType\").nodeValue == \"date\") {\r\n\t\t\t\t\tdatePictures.push(columns[i].attributes.getNamedItem(\"picture\").nodeValue);\r\n\t\t\t\t\tdateFields.push(columns[i].attributes.getNamedItem(\"dataField\").nodeValue);\r\n\t\t\t\t}\r\n\t\t\t\t//if (columns[i].attributes.getNamedItem(\"dataType\").nodeValue == \"integer\" || measures[i].attributes.getNamedItem(\"dataType\").nodeValue == \"real\") {\r\n\t\t\t\tif (columns[i].attributes.getNamedItem(\"dataType\").nodeValue == \"integer\") {\r\n\t\t\t\t\tintPictures.push(columns[i].attributes.getNamedItem(\"picture\").nodeValue);\r\n\t\t\t\t\tintFields.push(columns[i].attributes.getNamedItem(\"dataField\").nodeValue);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t}*/\r\n\t\t\tforPivotCustomPicture.push(columns[i].attributes.getNamedItem(\"picture\").nodeValue);\r\n\t\t\tforPivotCustomFormat.push(columns[i].attributes.getNamedItem(\"format\").nodeValue);\r\n\t\t\torderFilds.push(columns[i].attributes.getNamedItem(\"dataField\").nodeValue);\r\n\r\n\t\t}\r\n\r\n\t\t//var measures;\r\n\t\tvar measureFormula = [];\r\n\t\tfor (var i = 0; i < measures.length; i++) {\r\n\r\n\t\t\tmeasureNames[i] = measures[i].attributes.getNamedItem(\"displayName\").nodeValue;\r\n\t\t\t//manage format values\r\n\t\t\tif (measures[i].childNodes.length > 0) {\r\n\t\t\t\tif (measures[i].childNodes != null) {\r\n\t\t\t\t\tfor (var m = 0; m < measures[i].childNodes.length; m++) {\r\n\t\t\t\t\t\tif (measures[i].childNodes[m].localName == \"formatValues\") {\r\n\t\t\t\t\t\t\tfor (var n = 0; n < measures[i].childNodes[m].childNodes.length; n++) {\r\n\t\t\t\t\t\t\t\tif (measures[i].childNodes[m].childNodes[n].localName == \"value\") {\r\n\t\t\t\t\t\t\t\t\tvar value = {};\r\n\t\t\t\t\t\t\t\t\tvalue.format = measures[i].childNodes[m].childNodes[n].attributes.getNamedItem(\"format\").nodeValue;\r\n\t\t\t\t\t\t\t\t\tvalue.recursive = measures[i].childNodes[m].childNodes[n].attributes.getNamedItem(\"recursive\").nodeValue;\r\n\t\t\t\t\t\t\t\t\tvar crude = measures[i].childNodes[m].childNodes[n].textContent;\r\n\t\t\t\t\t\t\t\t\tvalue.value = crude.replace(/^\\s+|\\s+$/g, '');\r\n\t\t\t\t\t\t\t\t\tvalue.columnNumber = i;\r\n\t\t\t\t\t\t\t\t\tformatValuesMeasures.push(value);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t//manage conditional formats\r\n\t\t\tif (measures[i].childNodes.length > 0) {\r\n\t\t\t\tif (measures[i].childNodes != null) {\r\n\t\t\t\t\tfor (var m = 0; m < measures[i].childNodes.length; m++) {\r\n\t\t\t\t\t\tif (measures[i].childNodes[m].localName == \"conditionalFormats\") {\r\n\t\t\t\t\t\t\tfor (var n = 0; n < measures[i].childNodes[m].childNodes.length; n++) {\r\n\t\t\t\t\t\t\t\tif (measures[i].childNodes[m].childNodes[n].localName == \"rule\") {\r\n\t\t\t\t\t\t\t\t\tvar format = {};\r\n\t\t\t\t\t\t\t\t\tformat.format = measures[i].childNodes[m].childNodes[n].attributes.getNamedItem(\"format\").nodeValue;\r\n\t\t\t\t\t\t\t\t\tformat.operation1 = measures[i].childNodes[m].childNodes[n].attributes.getNamedItem(\"op1\").nodeValue;\r\n\t\t\t\t\t\t\t\t\tformat.value1 = measures[i].childNodes[m].childNodes[n].attributes.getNamedItem(\"value1\").nodeValue;\r\n\t\t\t\t\t\t\t\t\tif (measures[i].childNodes[m].childNodes[n].attributes.getNamedItem(\"op2\") != null) {\r\n\t\t\t\t\t\t\t\t\t\tformat.operation2 = measures[i].childNodes[m].childNodes[n].attributes.getNamedItem(\"op2\").nodeValue;\r\n\t\t\t\t\t\t\t\t\t\tformat.value2 = measures[i].childNodes[m].childNodes[n].attributes.getNamedItem(\"value2\").nodeValue;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tformat.columnNumber = i; //+ columns.length; Only the measure number\r\n\t\t\t\t\t\t\t\t\tconditionalFormats.push(format);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t//manage pictures\r\n\t\t\t/*if (measures[i].attributes.getNamedItem(\"picture\").nodeValue != \"\") {\r\n\t\t\t\tif (measures[i].attributes.getNamedItem(\"dataType\").nodeValue == \"date\") {\r\n\t\t\t\t\tdatePictures.push(measures[i].attributes.getNamedItem(\"picture\").nodeValue);\r\n\t\t\t\t\tdateFields.push(measures[i].attributes.getNamedItem(\"dataField\").nodeValue);\r\n\t\t\t\t}\r\n\t\t\t\tif (measures[i].attributes.getNamedItem(\"dataType\").nodeValue == \"integer\" || measures[i].attributes.getNamedItem(\"dataType\").nodeValue == \"real\") {\r\n\t\t\t\t\tintPictures.push(measures[i].attributes.getNamedItem(\"picture\").nodeValue);\r\n\t\t\t\t\tintFields.push(measures[i].attributes.getNamedItem(\"dataField\").nodeValue);\r\n\t\t\t\t}\r\n\t\t\t}*/\r\n\r\n\t\t\t//manage formula\r\n\t\t\tif ((measures[i].attributes.getNamedItem(\"formula\") != undefined) && (measures[i].attributes.getNamedItem(\"formula\").nodeValue != \"\")) {\r\n\t\t\t\tmeasureFormula.push({ hasFormula: true, textFormula: measures[i].attributes.getNamedItem(\"formula\").nodeValue })\r\n\t\t\t} else {\r\n\t\t\t\tmeasureFormula.push({ hasFormula: false })\r\n\t\t\t}\r\n\r\n\t\t\tforPivotCustomPicture.push(measures[i].attributes.getNamedItem(\"picture\").nodeValue);\r\n\t\t\torderFilds.push(measures[i].attributes.getNamedItem(\"dataField\").nodeValue);\r\n\t\t}\r\n\r\n\r\n\t\tvar furmulaIndex = {}\r\n\t\tfor (var j = 0; j < OrderFildsHidden.length; j++) {\r\n\t\t\tfurmulaIndex[OrderFildsHidden[j]] = orderFilds.length + j\r\n\t\t}\r\n\t\tformulaInfo.itemPosition = furmulaIndex\r\n\t\t//formulaInfo.recordDataLength = this.maxLengthRecord;\r\n\t\tformulaInfo.measureFormula = measureFormula\r\n\t\tformulaInfo.cantFormulaMeasures = 0;\r\n\r\n\t\tfor (var n = 0; n < formulaInfo.measureFormula.length; n++) {\r\n\t\t\tif (formulaInfo.measureFormula[n].hasFormula) {\r\n\t\t\t\tformulaInfo.cantFormulaMeasures++;\r\n\r\n\t\t\t\tvar inlineFormula = formulaInfo.measureFormula[n].textFormula\r\n\r\n\t\t\t\tvar inline = inlineFormula\r\n\t\t\t\tvar opers = ['*', '-', '+', '/', '(', ')']\r\n\t\t\t\tfor (var j = 0; j < opers.length; j++) {\r\n\t\t\t\t\tvar inline2 = inline.split(opers[j])\r\n\t\t\t\t\tif (inline2.length > 1) {\r\n\t\t\t\t\t\tinline = \"\"\r\n\t\t\t\t\t\tfor (var i = 0; i < inline2.length - 1; i++) {\r\n\t\t\t\t\t\t\tinline = inline + inline2[i] + \" \" + opers[j] + \" \"\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tinline = inline + inline2[inline2.length - 1]\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar polishNot = InfixToPostfix(inline)\r\n\t\t\t\tformulaInfo.measureFormula[n].polishNotationText = polishNot\r\n\t\t\t\tvar items = polishNot.split(\" \")\r\n\t\t\t\twhile (items.indexOf(\"\") != -1) {\r\n\t\t\t\t\titems.splice(items.indexOf(\"\"), 1)\r\n\t\t\t\t}\r\n\t\t\t\tvar relatedMeasure = []\r\n\t\t\t\tfor (var k = 0; k < items.length; k++) {\r\n\t\t\t\t\tif ((opers.indexOf(items[k]) == -1) && (isNaN(parseInt(items[k])))) {\r\n\t\t\t\t\t\t//add item\r\n\t\t\t\t\t\tvar operPositionInDataRow = formulaInfo.itemPosition[items[k]]\r\n\t\t\t\t\t\tif (relatedMeasure.indexOf(operPositionInDataRow) == -1)\r\n\t\t\t\t\t\t\trelatedMeasure.push(operPositionInDataRow)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tformulaInfo.measureFormula[n].relatedMeasures = relatedMeasure\r\n\r\n\t\t\t\tvar arrayNot = polishNot.split(\" \")\r\n\t\t\t\twhile (arrayNot.indexOf(\"\") != -1) {\r\n\t\t\t\t\tarrayNot.splice(arrayNot.indexOf(\"\"), 1)\r\n\t\t\t\t}\r\n\t\t\t\tformulaInfo.measureFormula[n].PolishNotation = arrayNot\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn [preHeader.concat(measureNames), orderFilds, measureFormula, conditionalFormats, conditionalFormatsColumns, forPivotCustomPicture, forPivotCustomFormat];\r\n\t}\r\n\r\n\r\n\tvar OATgetState = function (query, controlName) {\r\n\t\tif (typeof JSON.retrocycle !== 'function') {\r\n\t\t\tJSON.retrocycle = function retrocycle($) {\r\n\t\t\t\t'use strict';\r\n\r\n\t\t\t\tvar px =\r\n\t\t\t\t\t/^\\$(?:\\[(?:\\d+|\\\"(?:[^\\\\\\\"\\u0000-\\u001f]|\\\\([\\\\\\\"\\/bfnrt]|u[0-9a-zA-Z]{4}))*\\\")\\])*$/;\r\n\t\t\t\t(function rez(value) {\r\n\t\t\t\t\tvar i, item, name, path;\r\n\t\t\t\t\tif (value && typeof value === 'object') {\r\n\t\t\t\t\t\tif (Object.prototype.toString.apply(value) === '[object Array]') {\r\n\t\t\t\t\t\t\tfor (i = 0; i < value.length; i += 1) {\r\n\t\t\t\t\t\t\t\titem = value[i];\r\n\t\t\t\t\t\t\t\tif (item && typeof item === 'object') {\r\n\t\t\t\t\t\t\t\t\tpath = item.$ref;\r\n\t\t\t\t\t\t\t\t\tif (typeof path === 'string' && px.test(path)) {\r\n\t\t\t\t\t\t\t\t\t\tvalue[i] = eval(path);\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\trez(item);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tfor (name in value) {\r\n\t\t\t\t\t\t\t\tif (typeof value[name] === 'object') {\r\n\t\t\t\t\t\t\t\t\titem = value[name];\r\n\t\t\t\t\t\t\t\t\tif (item) {\r\n\t\t\t\t\t\t\t\t\t\tpath = item.$ref;\r\n\t\t\t\t\t\t\t\t\t\tif (typeof path === 'string' && px.test(path)) {\r\n\t\t\t\t\t\t\t\t\t\t\tvalue[name] = eval(path);\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\trez(item);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}($));\r\n\t\t\t\treturn $;\r\n\t\t\t};\r\n\t\t}\r\n\t\ttry {\r\n\t\t\tvar i;\r\n\t\t\tif (localStorage.getItem(OAT.getURL() + query + controlName + \"HiddenState\") != null) {\r\n\t\t\t\tvar retrievedObject = localStorage.getItem(OAT.getURL() + query + controlName + \"HiddenState\");\r\n\t\t\t\ti = JSON.retrocycle(JSON.parse(retrievedObject));\r\n\t\t\t}\r\n\r\n\t\t\tif (i == null) {\r\n\t\t\t\tvar cookieValue = OATGetCookie('\"' + OAT.getURL() + query + controlName + \"HiddenState\" + 'cookie' + '\"')\r\n\t\t\t\tif (cookieValue != null) {\r\n\t\t\t\t\ti = JSON.parse(cookieValue)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn i;\r\n\t\t} catch (error) {\r\n\t\t\ttry {\r\n\t\t\t\tvar cookieValue = OATGetCookie('\"' + OAT.getURL() + query + controlName + \"HiddenState\" + 'cookie' + '\"')\r\n\t\t\t\tvar i = JSON.parse(cookieValue)\r\n\t\t\t\treturn i\r\n\t\t\t} catch (error) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tfunction init() {\r\n\r\n\t}\r\n\t\r\n\t\r\n\t//FILE OAT.Layers\r\n\tOAT.Layers = function (f) {\r\n\t\tvar a = this;\r\n\t\tthis.baseOffset = f;\r\n\t\tthis.layers = [];\r\n\t\tthis.currentIndex = 0;\r\n\t\tthis.raise = function (b) {\r\n\t\t\tif (-1 != a.layers.indexOf(b)) {\r\n\t\t\t\tfor (var d = b.style.zIndex, c = 0; c < a.layers.length; c++) {\r\n\t\t\t\t\tvar e = a.layers[c];\r\n\t\t\t\t\te.style.zIndex > d && e.style.zIndex--\r\n\t\t\t\t}\r\n\t\t\t\tb.style.zIndex = a.currentIndex\r\n\t\t\t}\r\n\t\t};\r\n\t\tthis.addLayer = function (b, d) {\r\n\t\t\tvar c = OAT.$(b);\r\n\t\t\tc && (a.currentIndex++ , c.style.zIndex = a.currentIndex, a.layers.push(c), OAT.Dom.attach(c, d ? d : \"mousedown\", function () {\r\n\t\t\t\ta.raise(c)\r\n\t\t\t}))\r\n\t\t};\r\n\t\tthis.removeLayer = function (b) {\r\n\t\t\tb = OAT.$(b);\r\n\t\t\tb = a.layers.indexOf(b);\r\n\t\t\t-1 != b && a.layers.splice(b, 1)\r\n\t\t};\r\n\t\ta.currentIndex = a.baseOffset\r\n\t};\r\n\r\n\r\n\r\n\r\n\r\n\r\n\t; (function () {\r\n\t\t/*jshint eqeqeq:false curly:false latedef:false */\r\n\t\t\"use strict\";\r\n\r\n\t\tfunction setup($) {\r\n\t\t\t$.fn._fadeIn = $.fn.fadeIn;\r\n\r\n\t\t\tvar noOp = $.noop || function () { };\r\n\r\n\t\t\t// this bit is to ensure we don't call setExpression when we shouldn't (with extra muscle to handle\r\n\t\t\t// confusing userAgent strings on Vista)\r\n\t\t\tvar msie = /MSIE/.test(navigator.userAgent);\r\n\t\t\tvar ie6 = /MSIE 6.0/.test(navigator.userAgent) && ! /MSIE 8.0/.test(navigator.userAgent);\r\n\t\t\tvar mode = document.documentMode || 0;\r\n\t\t\tvar setExpr = $.isFunction(document.createElement('div').style.setExpression);\r\n\r\n\t\t\t// global $ methods for blocking/unblocking the entire page\r\n\t\t\t$.blockUI = function (opts) { install(window, opts); };\r\n\t\t\t$.unblockUI = function (opts) { remove(window, opts); };\r\n\r\n\t\t\t// convenience method for quick growl-like notifications  (http://www.google.com/search?q=growl)\r\n\t\t\t$.growlUI = function (title, message, timeout, onClose) {\r\n\t\t\t\tvar $m = $('<div class=\"growlUI\"></div>');\r\n\t\t\t\tif (title) $m.append('<h1>' + title + '</h1>');\r\n\t\t\t\tif (message) $m.append('<h2>' + message + '</h2>');\r\n\t\t\t\tif (timeout === undefined) timeout = 3000;\r\n\r\n\t\t\t\t// Added by konapun: Set timeout to 30 seconds if this growl is moused over, like normal toast notifications\r\n\t\t\t\tvar callBlock = function (opts) {\r\n\t\t\t\t\topts = opts || {};\r\n\r\n\t\t\t\t\t$.blockUI({\r\n\t\t\t\t\t\tmessage: $m,\r\n\t\t\t\t\t\tfadeIn: typeof opts.fadeIn !== 'undefined' ? opts.fadeIn : 700,\r\n\t\t\t\t\t\tfadeOut: typeof opts.fadeOut !== 'undefined' ? opts.fadeOut : 1000,\r\n\t\t\t\t\t\ttimeout: typeof opts.timeout !== 'undefined' ? opts.timeout : timeout,\r\n\t\t\t\t\t\tcenterY: false,\r\n\t\t\t\t\t\tshowOverlay: false,\r\n\t\t\t\t\t\tonUnblock: onClose,\r\n\t\t\t\t\t\tcss: $.blockUI.defaults.growlCSS\r\n\t\t\t\t\t});\r\n\t\t\t\t};\r\n\r\n\t\t\t\tcallBlock();\r\n\t\t\t\tvar nonmousedOpacity = $m.css('opacity');\r\n\t\t\t\t$m.mouseover(function () {\r\n\t\t\t\t\tcallBlock({\r\n\t\t\t\t\t\tfadeIn: 0,\r\n\t\t\t\t\t\ttimeout: 30000\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tvar displayBlock = $('.blockMsg');\r\n\t\t\t\t\tdisplayBlock.stop(); // cancel fadeout if it has started\r\n\t\t\t\t\tdisplayBlock.fadeTo(300, 1); // make it easier to read the message by removing transparency\r\n\t\t\t\t}).mouseout(function () {\r\n\t\t\t\t\t$('.blockMsg').fadeOut(1000);\r\n\t\t\t\t});\r\n\t\t\t\t// End konapun additions\r\n\t\t\t};\r\n\r\n\t\t\t// plugin method for blocking element content\r\n\t\t\t$.fn.block = function (opts) {\r\n\t\t\t\tif (this[0] === window) {\r\n\t\t\t\t\t$.blockUI(opts);\r\n\t\t\t\t\treturn this;\r\n\t\t\t\t}\r\n\t\t\t\tvar fullOpts = $.extend({}, $.blockUI.defaults, opts || {});\r\n\t\t\t\tthis.each(function () {\r\n\t\t\t\t\tvar $el = $(this);\r\n\t\t\t\t\tif (fullOpts.ignoreIfBlocked && $el.data('blockUI.isBlocked'))\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t$el.unblock({ fadeOut: 0 });\r\n\t\t\t\t});\r\n\r\n\t\t\t\treturn this.each(function () {\r\n\t\t\t\t\tif ($.css(this, 'position') == 'static') {\r\n\t\t\t\t\t\tthis.style.position = 'relative';\r\n\t\t\t\t\t\t$(this).data('blockUI.static', true);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.style.zoom = 1; // force 'hasLayout' in ie\r\n\t\t\t\t\tinstall(this, opts);\r\n\t\t\t\t});\r\n\t\t\t};\r\n\r\n\t\t\t// plugin method for unblocking element content\r\n\t\t\t$.fn.unblock = function (opts) {\r\n\t\t\t\tif (this[0] === window) {\r\n\t\t\t\t\t$.unblockUI(opts);\r\n\t\t\t\t\treturn this;\r\n\t\t\t\t}\r\n\t\t\t\treturn this.each(function () {\r\n\t\t\t\t\tremove(this, opts);\r\n\t\t\t\t});\r\n\t\t\t};\r\n\r\n\t\t\t$.blockUI.version = 2.70; // 2nd generation blocking at no extra cost!\r\n\r\n\t\t\t// override these in your code to change the default behavior and style\r\n\t\t\t$.blockUI.defaults = {\r\n\t\t\t\t// message displayed when blocking (use null for no message)\r\n\t\t\t\tmessage: '<h1>Please wait...</h1>',\r\n\r\n\t\t\t\ttitle: null,\t\t// title string; only used when theme == true\r\n\t\t\t\tdraggable: true,\t// only used when theme == true (requires jquery-ui.js to be loaded)\r\n\r\n\t\t\t\ttheme: false, // set to true to use with jQuery UI themes\r\n\r\n\t\t\t\t// styles for the message when blocking; if you wish to disable\r\n\t\t\t\t// these and use an external stylesheet then do this in your code:\r\n\t\t\t\t// $.blockUI.defaults.css = {};\r\n\t\t\t\tcss: {\r\n\t\t\t\t\tpadding: 0,\r\n\t\t\t\t\tmargin: 0,\r\n\t\t\t\t\twidth: '30%',\r\n\t\t\t\t\ttop: '40%',\r\n\t\t\t\t\tleft: '35%',\r\n\t\t\t\t\ttextAlign: 'center',\r\n\t\t\t\t\tcolor: '#000',\r\n\t\t\t\t\tborder: '3px solid #aaa',\r\n\t\t\t\t\tbackgroundColor: '#fff',\r\n\t\t\t\t\tcursor: 'wait'\r\n\t\t\t\t},\r\n\r\n\t\t\t\t// minimal style set used when themes are used\r\n\t\t\t\tthemedCSS: {\r\n\t\t\t\t\twidth: '30%',\r\n\t\t\t\t\ttop: '40%',\r\n\t\t\t\t\tleft: '35%'\r\n\t\t\t\t},\r\n\r\n\t\t\t\t// styles for the overlay\r\n\t\t\t\toverlayCSS: {\r\n\t\t\t\t\tbackgroundColor: '#000',\r\n\t\t\t\t\topacity: 0.1,\r\n\t\t\t\t\tcursor: 'wait'\r\n\t\t\t\t},\r\n\r\n\t\t\t\t// style to replace wait cursor before unblocking to correct issue\r\n\t\t\t\t// of lingering wait cursor\r\n\t\t\t\tcursorReset: 'default',\r\n\r\n\t\t\t\t// styles applied when using $.growlUI\r\n\t\t\t\tgrowlCSS: {\r\n\t\t\t\t\twidth: '350px',\r\n\t\t\t\t\ttop: '10px',\r\n\t\t\t\t\tleft: '',\r\n\t\t\t\t\tright: '10px',\r\n\t\t\t\t\tborder: 'none',\r\n\t\t\t\t\tpadding: '5px',\r\n\t\t\t\t\topacity: 0.6,\r\n\t\t\t\t\tcursor: 'default',\r\n\t\t\t\t\tcolor: '#fff',\r\n\t\t\t\t\tbackgroundColor: '#000',\r\n\t\t\t\t\t'-webkit-border-radius': '10px',\r\n\t\t\t\t\t'-moz-border-radius': '10px',\r\n\t\t\t\t\t'border-radius': '10px'\r\n\t\t\t\t},\r\n\r\n\t\t\t\t// IE issues: 'about:blank' fails on HTTPS and javascript:false is s-l-o-w\r\n\t\t\t\t// (hat tip to Jorge H. N. de Vasconcelos)\r\n\t\t\t\t/*jshint scripturl:true */\r\n\t\t\t\tiframeSrc: /^https/i.test(window.location.href || '') ? 'javascript:false' : 'about:blank',\r\n\r\n\t\t\t\t// force usage of iframe in non-IE browsers (handy for blocking applets)\r\n\t\t\t\tforceIframe: false,\r\n\r\n\t\t\t\t// z-index for the blocking overlay\r\n\t\t\t\tbaseZ: 1000,\r\n\r\n\t\t\t\t// set these to true to have the message automatically centered\r\n\t\t\t\tcenterX: true, // <-- only effects element blocking (page block controlled via css above)\r\n\t\t\t\tcenterY: true,\r\n\r\n\t\t\t\t// allow body element to be stetched in ie6; this makes blocking look better\r\n\t\t\t\t// on \"short\" pages.  disable if you wish to prevent changes to the body height\r\n\t\t\t\tallowBodyStretch: true,\r\n\r\n\t\t\t\t// enable if you want key and mouse events to be disabled for content that is blocked\r\n\t\t\t\tbindEvents: true,\r\n\r\n\t\t\t\t// be default blockUI will supress tab navigation from leaving blocking content\r\n\t\t\t\t// (if bindEvents is true)\r\n\t\t\t\tconstrainTabKey: true,\r\n\r\n\t\t\t\t// fadeIn time in millis; set to 0 to disable fadeIn on block\r\n\t\t\t\tfadeIn: 200,\r\n\r\n\t\t\t\t// fadeOut time in millis; set to 0 to disable fadeOut on unblock\r\n\t\t\t\tfadeOut: 400,\r\n\r\n\t\t\t\t// time in millis to wait before auto-unblocking; set to 0 to disable auto-unblock\r\n\t\t\t\ttimeout: 0,\r\n\r\n\t\t\t\t// disable if you don't want to show the overlay\r\n\t\t\t\tshowOverlay: true,\r\n\r\n\t\t\t\t// if true, focus will be placed in the first available input field when\r\n\t\t\t\t// page blocking\r\n\t\t\t\tfocusInput: true,\r\n\r\n\t\t\t\t// elements that can receive focus\r\n\t\t\t\tfocusableElements: ':input:enabled:visible',\r\n\r\n\t\t\t\t// suppresses the use of overlay styles on FF/Linux (due to performance issues with opacity)\r\n\t\t\t\t// no longer needed in 2012\r\n\t\t\t\t// applyPlatformOpacityRules: true,\r\n\r\n\t\t\t\t// callback method invoked when fadeIn has completed and blocking message is visible\r\n\t\t\t\tonBlock: null,\r\n\r\n\t\t\t\t// callback method invoked when unblocking has completed; the callback is\r\n\t\t\t\t// passed the element that has been unblocked (which is the window object for page\r\n\t\t\t\t// blocks) and the options that were passed to the unblock call:\r\n\t\t\t\t//\tonUnblock(element, options)\r\n\t\t\t\tonUnblock: null,\r\n\r\n\t\t\t\t// callback method invoked when the overlay area is clicked.\r\n\t\t\t\t// setting this will turn the cursor to a pointer, otherwise cursor defined in overlayCss will be used.\r\n\t\t\t\tonOverlayClick: null,\r\n\r\n\t\t\t\t// don't ask; if you really must know: http://groups.google.com/group/jquery-en/browse_thread/thread/36640a8730503595/2f6a79a77a78e493#2f6a79a77a78e493\r\n\t\t\t\tquirksmodeOffsetHack: 4,\r\n\r\n\t\t\t\t// class name of the message block\r\n\t\t\t\tblockMsgClass: 'blockMsg',\r\n\r\n\t\t\t\t// if it is already blocked, then ignore it (don't unblock and reblock)\r\n\t\t\t\tignoreIfBlocked: false\r\n\t\t\t};\r\n\r\n\t\t\t// private data and functions follow...\r\n\r\n\t\t\tvar pageBlock = null;\r\n\t\t\tvar pageBlockEls = [];\r\n\r\n\t\t\tfunction install(el, opts) {\r\n\t\t\t\tvar css, themedCSS;\r\n\t\t\t\tvar full = (el == window);\r\n\t\t\t\tvar msg = (opts && opts.message !== undefined ? opts.message : undefined);\r\n\t\t\t\topts = $.extend({}, $.blockUI.defaults, opts || {});\r\n\r\n\t\t\t\tif (opts.ignoreIfBlocked && $(el).data('blockUI.isBlocked'))\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\topts.overlayCSS = $.extend({}, $.blockUI.defaults.overlayCSS, opts.overlayCSS || {});\r\n\t\t\t\tcss = $.extend({}, $.blockUI.defaults.css, opts.css || {});\r\n\t\t\t\tif (opts.onOverlayClick)\r\n\t\t\t\t\topts.overlayCSS.cursor = 'pointer';\r\n\r\n\t\t\t\tthemedCSS = $.extend({}, $.blockUI.defaults.themedCSS, opts.themedCSS || {});\r\n\t\t\t\tmsg = msg === undefined ? opts.message : msg;\r\n\r\n\t\t\t\t// remove the current block (if there is one)\r\n\t\t\t\tif (full && pageBlock)\r\n\t\t\t\t\tremove(window, { fadeOut: 0 });\r\n\r\n\t\t\t\t// if an existing element is being used as the blocking content then we capture\r\n\t\t\t\t// its current place in the DOM (and current display style) so we can restore\r\n\t\t\t\t// it when we unblock\r\n\t\t\t\tif (msg && typeof msg != 'string' && (msg.parentNode || msg.jquery)) {\r\n\t\t\t\t\tvar node = msg.jquery ? msg[0] : msg;\r\n\t\t\t\t\tvar data = {};\r\n\t\t\t\t\t$(el).data('blockUI.history', data);\r\n\t\t\t\t\tdata.el = node;\r\n\t\t\t\t\tdata.parent = node.parentNode;\r\n\t\t\t\t\tdata.display = node.style.display;\r\n\t\t\t\t\tdata.position = node.style.position;\r\n\t\t\t\t\tif (data.parent)\r\n\t\t\t\t\t\tdata.parent.removeChild(node);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t$(el).data('blockUI.onUnblock', opts.onUnblock);\r\n\t\t\t\tvar z = opts.baseZ;\r\n\r\n\t\t\t\t// blockUI uses 3 layers for blocking, for simplicity they are all used on every platform;\r\n\t\t\t\t// layer1 is the iframe layer which is used to supress bleed through of underlying content\r\n\t\t\t\t// layer2 is the overlay layer which has opacity and a wait cursor (by default)\r\n\t\t\t\t// layer3 is the message content that is displayed while blocking\r\n\t\t\t\tvar lyr1, lyr2, lyr3, s;\r\n\t\t\t\tif (msie || opts.forceIframe)\r\n\t\t\t\t\tlyr1 = $('<iframe class=\"blockUI\" style=\"z-index:' + (z++) + ';display:none;border:none;margin:0;padding:0;position:absolute;width:100%;height:100%;top:0;left:0\" src=\"' + opts.iframeSrc + '\"></iframe>');\r\n\t\t\t\telse\r\n\t\t\t\t\tlyr1 = $('<div class=\"blockUI\" style=\"display:none\"></div>');\r\n\r\n\t\t\t\tif (opts.theme)\r\n\t\t\t\t\tlyr2 = $('<div class=\"blockUI blockOverlay ui-widget-overlay\" style=\"z-index:' + (z++) + ';display:none\"></div>');\r\n\t\t\t\telse\r\n\t\t\t\t\tlyr2 = $('<div class=\"blockUI blockOverlay\" style=\"z-index:' + (z++) + ';display:none;border:none;margin:0;padding:0;width:100%;height:100%;top:0;left:0\"></div>');\r\n\r\n\t\t\t\tif (opts.theme && full) {\r\n\t\t\t\t\ts = '<div class=\"blockUI ' + opts.blockMsgClass + ' blockPage ui-dialog ui-widget ui-corner-all\" style=\"z-index:' + (z + 10) + ';display:none;position:fixed\">';\r\n\t\t\t\t\tif (opts.title) {\r\n\t\t\t\t\t\ts += '<div class=\"ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle\">' + (opts.title || '&nbsp;') + '</div>';\r\n\t\t\t\t\t}\r\n\t\t\t\t\ts += '<div class=\"ui-widget-content ui-dialog-content\"></div>';\r\n\t\t\t\t\ts += '</div>';\r\n\t\t\t\t}\r\n\t\t\t\telse if (opts.theme) {\r\n\t\t\t\t\ts = '<div class=\"blockUI ' + opts.blockMsgClass + ' blockElement ui-dialog ui-widget ui-corner-all\" style=\"z-index:' + (z + 10) + ';display:none;position:absolute\">';\r\n\t\t\t\t\tif (opts.title) {\r\n\t\t\t\t\t\ts += '<div class=\"ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle\">' + (opts.title || '&nbsp;') + '</div>';\r\n\t\t\t\t\t}\r\n\t\t\t\t\ts += '<div class=\"ui-widget-content ui-dialog-content\"></div>';\r\n\t\t\t\t\ts += '</div>';\r\n\t\t\t\t}\r\n\t\t\t\telse if (full) {\r\n\t\t\t\t\ts = '<div class=\"blockUI ' + opts.blockMsgClass + ' blockPage\" style=\"z-index:' + (z + 10) + ';display:none;position:fixed\"></div>';\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\ts = '<div class=\"blockUI ' + opts.blockMsgClass + ' blockElement\" style=\"z-index:' + (z + 10) + ';display:none;position:absolute\"></div>';\r\n\t\t\t\t}\r\n\t\t\t\tlyr3 = $(s);\r\n\r\n\t\t\t\t// if we have a message, style it\r\n\t\t\t\tif (msg) {\r\n\t\t\t\t\tif (opts.theme) {\r\n\t\t\t\t\t\tlyr3.css(themedCSS);\r\n\t\t\t\t\t\tlyr3.addClass('ui-widget-content');\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tlyr3.css(css);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// style the overlay\r\n\t\t\t\tif (!opts.theme /*&& (!opts.applyPlatformOpacityRules)*/)\r\n\t\t\t\t\tlyr2.css(opts.overlayCSS);\r\n\t\t\t\tlyr2.css('position', full ? 'fixed' : 'absolute');\r\n\r\n\t\t\t\t// make iframe layer transparent in IE\r\n\t\t\t\tif (msie || opts.forceIframe)\r\n\t\t\t\t\tlyr1.css('opacity', 0.0);\r\n\r\n\t\t\t\t//$([lyr1[0],lyr2[0],lyr3[0]]).appendTo(full ? 'body' : el);\r\n\t\t\t\tvar layers = [lyr1, lyr2, lyr3], $par = full ? $('body') : $(el);\r\n\t\t\t\t$.each(layers, function () {\r\n\t\t\t\t\tthis.appendTo($par);\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif (opts.theme && opts.draggable && $.fn.draggable) {\r\n\t\t\t\t\tlyr3.draggable({\r\n\t\t\t\t\t\thandle: '.ui-dialog-titlebar',\r\n\t\t\t\t\t\tcancel: 'li'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// ie7 must use absolute positioning in quirks mode and to account for activex issues (when scrolling)\r\n\t\t\t\tvar expr = setExpr && (!$.support.boxModel || $('object,embed', full ? null : el).length > 0);\r\n\t\t\t\tif (ie6 || expr) {\r\n\t\t\t\t\t// give body 100% height\r\n\t\t\t\t\tif (full && opts.allowBodyStretch && $.support.boxModel)\r\n\t\t\t\t\t\t$('html,body').css('height', '100%');\r\n\r\n\t\t\t\t\t// fix ie6 issue when blocked element has a border width\r\n\t\t\t\t\tif ((ie6 || !$.support.boxModel) && !full) {\r\n\t\t\t\t\t\tvar t = sz(el, 'borderTopWidth'), l = sz(el, 'borderLeftWidth');\r\n\t\t\t\t\t\tvar fixT = t ? '(0 - ' + t + ')' : 0;\r\n\t\t\t\t\t\tvar fixL = l ? '(0 - ' + l + ')' : 0;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// simulate fixed position\r\n\t\t\t\t\t$.each(layers, function (i, o) {\r\n\t\t\t\t\t\tvar s = o[0].style;\r\n\t\t\t\t\t\ts.position = 'absolute';\r\n\t\t\t\t\t\tif (i < 2) {\r\n\t\t\t\t\t\t\tif (full)\r\n\t\t\t\t\t\t\t\ts.setExpression('height', 'Math.max(document.body.scrollHeight, document.body.offsetHeight) - (jQuery.support.boxModel?0:' + opts.quirksmodeOffsetHack + ') + \"px\"');\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\ts.setExpression('height', 'this.parentNode.offsetHeight + \"px\"');\r\n\t\t\t\t\t\t\tif (full)\r\n\t\t\t\t\t\t\t\ts.setExpression('width', 'jQuery.support.boxModel && document.documentElement.clientWidth || document.body.clientWidth + \"px\"');\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\ts.setExpression('width', 'this.parentNode.offsetWidth + \"px\"');\r\n\t\t\t\t\t\t\tif (fixL) s.setExpression('left', fixL);\r\n\t\t\t\t\t\t\tif (fixT) s.setExpression('top', fixT);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if (opts.centerY) {\r\n\t\t\t\t\t\t\tif (full) s.setExpression('top', '(document.documentElement.clientHeight || document.body.clientHeight) / 2 - (this.offsetHeight / 2) + (blah = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + \"px\"');\r\n\t\t\t\t\t\t\ts.marginTop = 0;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if (!opts.centerY && full) {\r\n\t\t\t\t\t\t\tvar top = (opts.css && opts.css.top) ? parseInt(opts.css.top, 10) : 0;\r\n\t\t\t\t\t\t\tvar expression = '((document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + ' + top + ') + \"px\"';\r\n\t\t\t\t\t\t\ts.setExpression('top', expression);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// show the message\r\n\t\t\t\tif (msg) {\r\n\t\t\t\t\tif (opts.theme)\r\n\t\t\t\t\t\tlyr3.find('.ui-widget-content').append(msg);\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tlyr3.append(msg);\r\n\t\t\t\t\tif (msg.jquery || msg.nodeType)\r\n\t\t\t\t\t\t$(msg).show();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ((msie || opts.forceIframe) && opts.showOverlay)\r\n\t\t\t\t\tlyr1.show(); // opacity is zero\r\n\t\t\t\tif (opts.fadeIn) {\r\n\t\t\t\t\tvar cb = opts.onBlock ? opts.onBlock : noOp;\r\n\t\t\t\t\tvar cb1 = (opts.showOverlay && !msg) ? cb : noOp;\r\n\t\t\t\t\tvar cb2 = msg ? cb : noOp;\r\n\t\t\t\t\tif (opts.showOverlay)\r\n\t\t\t\t\t\tlyr2._fadeIn(opts.fadeIn, cb1);\r\n\t\t\t\t\tif (msg)\r\n\t\t\t\t\t\tlyr3._fadeIn(opts.fadeIn, cb2);\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tif (opts.showOverlay)\r\n\t\t\t\t\t\tlyr2.show();\r\n\t\t\t\t\tif (msg)\r\n\t\t\t\t\t\tlyr3.show();\r\n\t\t\t\t\tif (opts.onBlock)\r\n\t\t\t\t\t\topts.onBlock.bind(lyr3)();\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// bind key and mouse events\r\n\t\t\t\tbind(1, el, opts);\r\n\r\n\t\t\t\tif (full) {\r\n\t\t\t\t\tpageBlock = lyr3[0];\r\n\t\t\t\t\tpageBlockEls = $(opts.focusableElements, pageBlock);\r\n\t\t\t\t\tif (opts.focusInput)\r\n\t\t\t\t\t\tsetTimeout(focus, 20);\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t\tcenter(lyr3[0], opts.centerX, opts.centerY);\r\n\r\n\t\t\t\tif (opts.timeout) {\r\n\t\t\t\t\t// auto-unblock\r\n\t\t\t\t\tvar to = setTimeout(function () {\r\n\t\t\t\t\t\tif (full)\r\n\t\t\t\t\t\t\t$.unblockUI(opts);\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t$(el).unblock(opts);\r\n\t\t\t\t\t}, opts.timeout);\r\n\t\t\t\t\t$(el).data('blockUI.timeout', to);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// remove the block\r\n\t\t\tfunction remove(el, opts) {\r\n\t\t\t\tvar count;\r\n\t\t\t\tvar full = (el == window);\r\n\t\t\t\tvar $el = $(el);\r\n\t\t\t\tvar data = $el.data('blockUI.history');\r\n\t\t\t\tvar to = $el.data('blockUI.timeout');\r\n\t\t\t\tif (to) {\r\n\t\t\t\t\tclearTimeout(to);\r\n\t\t\t\t\t$el.removeData('blockUI.timeout');\r\n\t\t\t\t}\r\n\t\t\t\topts = $.extend({}, $.blockUI.defaults, opts || {});\r\n\t\t\t\tbind(0, el, opts); // unbind events\r\n\r\n\t\t\t\tif (opts.onUnblock === null) {\r\n\t\t\t\t\topts.onUnblock = $el.data('blockUI.onUnblock');\r\n\t\t\t\t\t$el.removeData('blockUI.onUnblock');\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar els;\r\n\t\t\t\tif (full) // crazy selector to handle odd field errors in ie6/7\r\n\t\t\t\t\tels = $('body').children().filter('.blockUI').add('body > .blockUI');\r\n\t\t\t\telse\r\n\t\t\t\t\tels = $el.find('>.blockUI');\r\n\r\n\t\t\t\t// fix cursor issue\r\n\t\t\t\tif (opts.cursorReset) {\r\n\t\t\t\t\tif (els.length > 1)\r\n\t\t\t\t\t\tels[1].style.cursor = opts.cursorReset;\r\n\t\t\t\t\tif (els.length > 2)\r\n\t\t\t\t\t\tels[2].style.cursor = opts.cursorReset;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (full)\r\n\t\t\t\t\tpageBlock = pageBlockEls = null;\r\n\r\n\t\t\t\tif (opts.fadeOut) {\r\n\t\t\t\t\tcount = els.length;\r\n\t\t\t\t\tels.stop().fadeOut(opts.fadeOut, function () {\r\n\t\t\t\t\t\tif (--count === 0)\r\n\t\t\t\t\t\t\treset(els, data, opts, el);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t\treset(els, data, opts, el);\r\n\t\t\t}\r\n\r\n\t\t\t// move blocking element back into the DOM where it started\r\n\t\t\tfunction reset(els, data, opts, el) {\r\n\t\t\t\tvar $el = $(el);\r\n\t\t\t\tif ($el.data('blockUI.isBlocked'))\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tels.each(function (i, o) {\r\n\t\t\t\t\t// remove via DOM calls so we don't lose event handlers\r\n\t\t\t\t\tif (this.parentNode)\r\n\t\t\t\t\t\tthis.parentNode.removeChild(this);\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif (data && data.el) {\r\n\t\t\t\t\tdata.el.style.display = data.display;\r\n\t\t\t\t\tdata.el.style.position = data.position;\r\n\t\t\t\t\tdata.el.style.cursor = 'default'; // #59\r\n\t\t\t\t\tif (data.parent)\r\n\t\t\t\t\t\tdata.parent.appendChild(data.el);\r\n\t\t\t\t\t$el.removeData('blockUI.history');\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ($el.data('blockUI.static')) {\r\n\t\t\t\t\t$el.css('position', 'static'); // #22\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (typeof opts.onUnblock == 'function')\r\n\t\t\t\t\topts.onUnblock(el, opts);\r\n\r\n\t\t\t\t// fix issue in Safari 6 where block artifacts remain until reflow\r\n\t\t\t\tvar body = $(document.body), w = body.width(), cssW = body[0].style.width;\r\n\t\t\t\tbody.width(w - 1).width(w);\r\n\t\t\t\tbody[0].style.width = cssW;\r\n\t\t\t}\r\n\r\n\t\t\t// bind/unbind the handler\r\n\t\t\tfunction bind(b, el, opts) {\r\n\t\t\t\tvar full = el == window, $el = $(el);\r\n\r\n\t\t\t\t// don't bother unbinding if there is nothing to unbind\r\n\t\t\t\tif (!b && (full && !pageBlock || !full && !$el.data('blockUI.isBlocked')))\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t$el.data('blockUI.isBlocked', b);\r\n\r\n\t\t\t\t// don't bind events when overlay is not in use or if bindEvents is false\r\n\t\t\t\tif (!full || !opts.bindEvents || (b && !opts.showOverlay))\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t// bind anchors and inputs for mouse and key events\r\n\t\t\t\tvar events = 'mousedown mouseup keydown keypress keyup touchstart touchend touchmove';\r\n\t\t\t\tif (b)\r\n\t\t\t\t\t$(document).bind(events, opts, handler);\r\n\t\t\t\telse\r\n\t\t\t\t\t$(document).unbind(events, handler);\r\n\r\n\t\t\t\t// former impl...\r\n\t\t\t\t//\t\tvar $e = $('a,:input');\r\n\t\t\t\t//\t\tb ? $e.bind(events, opts, handler) : $e.unbind(events, handler);\r\n\t\t\t}\r\n\r\n\t\t\t// event handler to suppress keyboard/mouse events when blocking\r\n\t\t\tfunction handler(e) {\r\n\t\t\t\t// allow tab navigation (conditionally)\r\n\t\t\t\tif (e.type === 'keydown' && e.keyCode && e.keyCode == 9) {\r\n\t\t\t\t\tif (pageBlock && e.data.constrainTabKey) {\r\n\t\t\t\t\t\tvar els = pageBlockEls;\r\n\t\t\t\t\t\tvar fwd = !e.shiftKey && e.target === els[els.length - 1];\r\n\t\t\t\t\t\tvar back = e.shiftKey && e.target === els[0];\r\n\t\t\t\t\t\tif (fwd || back) {\r\n\t\t\t\t\t\t\tsetTimeout(function () { focus(back); }, 10);\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tvar opts = e.data;\r\n\t\t\t\tvar target = $(e.target);\r\n\t\t\t\tif (target.hasClass('blockOverlay') && opts.onOverlayClick)\r\n\t\t\t\t\topts.onOverlayClick(e);\r\n\r\n\t\t\t\t// allow events within the message content\r\n\t\t\t\tif (target.parents('div.' + opts.blockMsgClass).length > 0)\r\n\t\t\t\t\treturn true;\r\n\r\n\t\t\t\t// allow events for content that is not being blocked\r\n\t\t\t\treturn target.parents().children().filter('div.blockUI').length === 0;\r\n\t\t\t}\r\n\r\n\t\t\tfunction focus(back) {\r\n\t\t\t\tif (!pageBlockEls)\r\n\t\t\t\t\treturn;\r\n\t\t\t\tvar e = pageBlockEls[back === true ? pageBlockEls.length - 1 : 0];\r\n\t\t\t\tif (e)\r\n\t\t\t\t\te.focus();\r\n\t\t\t}\r\n\r\n\t\t\tfunction center(el, x, y) {\r\n\t\t\t\tvar p = el.parentNode, s = el.style;\r\n\t\t\t\tvar l = ((p.offsetWidth - el.offsetWidth) / 2) - sz(p, 'borderLeftWidth');\r\n\t\t\t\tvar t = ((p.offsetHeight - el.offsetHeight) / 2) - sz(p, 'borderTopWidth');\r\n\t\t\t\tif (x) s.left = l > 0 ? (l + 'px') : '0';\r\n\t\t\t\tif (y) s.top = t > 0 ? (t + 'px') : '0';\r\n\t\t\t}\r\n\r\n\t\t\tfunction sz(el, p) {\r\n\t\t\t\treturn parseInt($.css(el, p), 10) || 0;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\r\n\t\t/*global define:true */\r\n\t\tif (typeof define === 'function' && define.amd && define.amd.jQuery) {\r\n\t\t\tdefine(['jquery'], setup);\r\n\t\t} else {\r\n\t\t\tif(typeof jQuery != \"undefined\"){\r\n\t\t\t\tsetup(jQuery);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t})();\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\ttry {\r\n\t\tOAT.Loader.featureLoaded(\"layers\");\r\n\t} catch (ERROR) {\r\n\r\n\t}\r\n\r\n\r\n\t\r\n\r\n\r\n\r\n//FILE oat_pivot -----------------------------------------------------------------------------------------------------------------------------------------------\r\n\r\n\r\n\r\n\tif (GlobalPivotInterval == undefined) {\r\n\t\tvar GlobalPivotInterval = [];\r\n\t}\r\n\r\n\tOAT.Pivot = function (_mthis, div, filterDiv, headerRow, dataRows, headerRowIndexes,\r\n\t\theaderColIndexes, filterIndexes, dataColumnIndex, query,\r\n\t\tcondFormats, control, pageSize, defaultPicture, QueryViewerCollection,\r\n\t\tcolumns, containerName, formatValue, conditionalFormatsColumns, formatValueMeasures,\r\n\t\tmeasures, autoResize, disableColumnSort, UcId, IdForQueryViewerCollection, rememberLayout,\r\n\t\tShowMeasuresAsRows, formulaInfo, fullRecord, serverPagination, pageData, hideDataFilds,\r\n\t\torderFildsHidden, initMetadata, relativePath, selection, GrandTotalVisibility, pivotTitle) {\r\n\t\tvar self = this;\r\n\t\tthis.autoPaging = false;\r\n\t\tthis.nextRowWhenAutopaging = 0;\r\n\t\tthis.prevRowWhenAutopaging = 0;\r\n\t\tthis.paginationInfo = false;\r\n\t\tthis.TempDataStructForAggStepOptimization = [];\r\n\t\tthis.actualPaginationPage = 1;\r\n\t\tthis.allDataWithoutSort = jQuery.extend(true, [], dataRows);\r\n\t\tthis.IdForQueryViewerCollection = IdForQueryViewerCollection;\r\n\t\tthis.UcId = UcId;\r\n\t\tthis.ShowMeasuresAsRows = ShowMeasuresAsRows;\r\n\t\tthis.rememberLayoutStateVersion = (serverPagination) ? \"4.3.8SP\" : \"4.3.8\";\r\n\t\tif (measures.length < 2) { //si solo tiene una medida no aplica esta propiedad\r\n\t\t\tthis.ShowMeasuresAsRows = false\r\n\t\t}\r\n\t\tthis.allRowsPivot = \"vacio\";\r\n\t\tthis.HideDataFilds = hideDataFilds;\r\n\t\tthis.OrderFildsHidden = orderFildsHidden;\r\n\t\tthis.initMetadata = initMetadata;\r\n\t\tthis.relativePath = relativePath;\r\n\t\tthis.selection = selection;\r\n\t\tthis.GrandTotalVisibility = GrandTotalVisibility;\r\n\t\tthis.translations = _mthis.translations\r\n\t\tthis.isSD = OAT.isSD();\r\n\t\t\r\n\t\tfromUndefinedToBlanck(dataRows);\r\n\r\n\t\tif (dataRows[0] != undefined) {\r\n\r\n\t\t\t//agregar indice de fila\r\n\t\t\tif (formulaInfo.cantFormulaMeasures > 0) {\r\n\t\t\t\tfor (var i = 0; i < dataRows.length; i++) {\r\n\t\t\t\t\tdataRows[i][headerRow.length] = i;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t//end agregar indice a filas\r\n\t\t\tvar sortIntMemory = [];\r\n\r\n\t\t\t//get sort value\r\n\t\t\tfor (var index = headerRow.length - 1; index > -1; index--) { //*dataRows[0].length*/\r\n\t\t\t\tvar sortInt = true;\r\n\t\t\t\tfor (var ival = 0; ival < dataRows.length; ival++) {\r\n\t\t\t\t\tif ((sortInt) && (dataRows[ival][index] != parseInt(dataRows[ival][index]))) {\r\n\t\t\t\t\t\tsortInt = false;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tsortIntMemory[index] = sortInt;\r\n\t\t\t}\r\n\t\t\tvar index = 0;\r\n\t\t\tif (sortIntMemory[index]) {\r\n\t\t\t\tdataRows = dataRows.sort((function (index) {\r\n\t\t\t\t\treturn function (a, b) {\r\n\t\t\t\t\t\treturn (parseInt(a[index]) === parseInt(b[index]) ? 0 : (parseInt(a[index]) < parseInt(b[index]) ? -1 : 1));\r\n\t\t\t\t\t};\r\n\t\t\t\t})(index));\r\n\t\t\t} else {\r\n\t\t\t\tdataRows = dataRows.sort((function (index) {\r\n\t\t\t\t\treturn function (a, b) {\r\n\t\t\t\t\t\treturn (a[index] === b[index] ? 0 : (a[index] < b[index] ? -1 : 1));\r\n\t\t\t\t\t};\r\n\t\t\t\t})(index));\r\n\t\t\t}\r\n\r\n\t\t\tvar actualVal = dataRows[0][index];\r\n\t\t\tvar initPos = 0;\r\n\t\t\tfor (var i = 0; i < dataRows.length; i++) {\r\n\t\t\t\tif ((actualVal != dataRows[i][index])) {\r\n\t\t\t\t\tactualVal = dataRows[i][index]\r\n\t\t\t\t\tdataRows = OAT.PartialSort(dataRows, initPos, i - 1, index + 1, headerRow.length, sortIntMemory)\r\n\t\t\t\t\tinitPos = i;\r\n\t\t\t\t} else if ((i == dataRows.length - 1)) {\r\n\t\t\t\t\tdataRows = OAT.PartialSort(dataRows, initPos, i, index + 1, headerRow.length, sortIntMemory)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\t//collapse repeate rows\r\n\t\tvar tempDataRows = dataRows;\r\n\t\tdataRows = [];\r\n\t\tif (tempDataRows.length > 0) {\r\n\t\t\tdataRows[0] = tempDataRows[0]\r\n\t\t}\r\n\t\tvar act_pos = 0;\r\n\t\tfor (var i = 1; i < tempDataRows.length; i++) {\r\n\t\t\tvar repeated = true;\r\n\t\t\tfor (var j = 0; j < columns.length; j++) {\r\n\t\t\t\tif (tempDataRows[i][j] != tempDataRows[i - 1][j]) { repeated = false; break; }\r\n\t\t\t}\r\n\t\t\tif (repeated) {\r\n\t\t\t\tfor (var j = columns.length; j < columns.length + measures.length; j++) {\r\n\t\t\t\t\tvar tot = parseFloat(dataRows[act_pos][j]) + parseFloat(tempDataRows[i][j])\r\n\t\t\t\t\tif ((dataRows[act_pos][j] == \"#NuN#\") && (tempDataRows[i][j] == \"#NuN#\")) {\r\n\t\t\t\t\t\ttot = \"#NuN#\"\r\n\t\t\t\t\t} else if (dataRows[act_pos][j] == \"#NuN#\") {\r\n\t\t\t\t\t\ttot = tempDataRows[i][j] + \"\"\r\n\t\t\t\t\t} else if (tempDataRows[i][j] == \"#NuN#\") {\r\n\t\t\t\t\t\ttot = dataRows[act_pos][j] + \"\"\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdataRows[act_pos][j] = tot + \"\";\r\n\t\t\t\t}\r\n\t\t\t\t//colapsar filas de formula\r\n\t\t\t\tif (formulaInfo.cantFormulaMeasures > 0) {\r\n\t\t\t\t\tvar filaSumar = dataRows[act_pos][headerRow.length];\r\n\t\t\t\t\tvar filaRepetida = tempDataRows[i][headerRow.length];\r\n\t\t\t\t\tfor (var formulasI = 0; formulasI < formulaInfo.measureFormula.length; formulasI++) { //campos formulas\r\n\t\t\t\t\t\tif (formulaInfo.measureFormula[formulasI].hasFormula) {\r\n\t\t\t\t\t\t\tfor (var formulasJ = 0; formulasJ < formulaInfo.measureFormula[formulasI].relatedMeasures.length; formulasJ++) {\r\n\t\t\t\t\t\t\t\tvar pos = formulaInfo.measureFormula[formulasI].relatedMeasures[formulasJ];\r\n\t\t\t\t\t\t\t\tvar tot = parseFloat(fullRecord[filaSumar][pos]) + parseFloat(fullRecord[filaRepetida][pos])\r\n\t\t\t\t\t\t\t\tfullRecord[filaSumar][pos] = tot + \"\";\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfor (var j = columns.length; j < columns.length + measures.length; j++) { //restantes medidas para mantener coherencia\r\n\t\t\t\t\t\tvar tot = parseFloat(fullRecord[filaSumar][j]) + parseFloat(fullRecord[filaRepetida][j])\r\n\t\t\t\t\t\tfullRecord[filaSumar][j] = tot + \"\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfor (var posB = 0; posB < headerRow.length; posB++) { //anular fila ya sumada\r\n\t\t\t\t\t\tfullRecord[filaRepetida][posB] = \"\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t//end colapsar formula info\r\n\t\t\t} else {\r\n\t\t\t\tact_pos++\r\n\t\t\t\tdataRows[act_pos] = tempDataRows[i];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//eliminar indice de fila\r\n\t\tif (formulaInfo.cantFormulaMeasures > 0) {\r\n\t\t\tif (dataRows[0] != undefined) {\r\n\t\t\t\tfor (var it = 0; it < dataRows.length; it++) {\r\n\t\t\t\t\tdataRows[it].splice(headerRow.length, 1)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t//end borrar incide a filas\r\n\t\tthis.serverPagination = serverPagination;\r\n\t\tthis.pageData = pageData;\r\n\t\tif (this.serverPagination) {\r\n\t\t\tthis.pageData.PreviousPageNumber = -1;\r\n\t\t\tthis.pageData.AxisInfo = [];\r\n\t\t\tthis.pageData.FilterInfo = [];\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\tthis.autoPaging = false;\r\n\t\t\r\n\r\n\t\tthis.recordForFormula = fullRecord;\r\n\t\tthis.formulaInfo = formulaInfo;\r\n\t\tthis.filterIndexes = filterIndexes; /* indexes of column conditions */\r\n\t\tthis.initFilterIndexes = [];\r\n\t\tfor (var i = 0; i < this.filterIndexes.length; i++) {\r\n\t\t\tthis.initFilterIndexes[i] = this.filterIndexes[i];\r\n\t\t}\r\n\t\tthis.getFormulaRowByDataRow = function (row, measureNumber, caseId) {\r\n\t\t\tvar value = \"\"\r\n\t\t\tvar hallado = false\r\n\t\t\tvar numRow = 0\r\n\t\t\tvar searchIn = self.recordForFormula\r\n\t\t\t//if (self.filterIndexes.length > 0){ searchIn = self.filteredData }\r\n\t\t\tvar addedValues = []; for (var o = 0; o < self.formulaInfo.recordDataLength; o++) { addedValues[o] = 0 }\r\n\t\t\tfor (var i = 0; i < searchIn.length; i++) {\r\n\t\t\t\tvar coincide = false\r\n\t\t\t\tfor (var j = 0; j < row.length; j++) {\r\n\t\t\t\t\tif (self.filterIndexes.indexOf(j) != -1) { //case filter to top bar\r\n\t\t\t\t\t\tvar pos = self.filterIndexes.indexOf(j)\r\n\t\t\t\t\t\tif (self.filterDiv != undefined) {\r\n\t\t\t\t\t\t\tvar s = self.filterDiv.selects[pos]; /* select node */\r\n\t\t\t\t\t\t\tvar val = OAT.$v(s)\r\n\t\t\t\t\t\t\tif (val == \"[all]\") { coincide = true } //case [all]\r\n\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\tcoincide = (val == searchIn[i][j])\r\n\t\t\t\t\t\t\t\tif (!coincide) break;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tcoincide = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else if ((self.filterIndexes.length > 0) && (j >= row.length - measures.length)) { //case filter to top bar y measure item\r\n\t\t\t\t\t\tcoincide = true;\r\n\t\t\t\t\t} else if ((searchIn[i][j] == row[j]) || ((row[j] == \"#FoE#\") && (searchIn[i][j] == 0))) {\r\n\t\t\t\t\t\tcoincide = true;\r\n\t\t\t\t\t} else if ((headerRowIndexes != undefined) && (headerRowIndexes.indexOf(j) != -1)\r\n\t\t\t\t\t\t&& (headerRowIndexes.indexOf(j) > headerRowIndexes.length - measures.length)) { //if a measure, when rowConditions is not defined yet\r\n\t\t\t\t\t\tcoincide = true;\r\n\t\t\t\t\t} else if ((dataColumnIndex > 0) && (dataColumnIndex == j)) {\r\n\t\t\t\t\t\tcoincide = true;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif ((row[j] == undefined) && (self.filterIndexes.length > 0)) {\r\n\t\t\t\t\t\t\tcoincide = true;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tcoincide = false;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (coincide) {\r\n\t\t\t\t\tfor (var t = 0; t < self.formulaInfo.measureFormula[measureNumber].relatedMeasures.length; t++) {\r\n\t\t\t\t\t\tvar pos = self.formulaInfo.measureFormula[measureNumber].relatedMeasures[t]\r\n\t\t\t\t\t\taddedValues[pos] = addedValues[pos] + parseFloat(searchIn[i][pos]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\thallado = true\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (hallado)\r\n\t\t\t\treturn addedValues;\r\n\t\t\telse\r\n\t\t\t\treturn \"#NuN#\"//self.EmptyValue; //\"#NuN#\"\r\n\t\t}\r\n\r\n\r\n\t\t//calculate single measure formula value\r\n\t\tfor (var mforF = 0; mforF < measures.length; mforF++) {\r\n\t\t\tif (formulaInfo.measureFormula[mforF].hasFormula) {\r\n\t\t\t\tfor (var rforF = 0; rforF < dataRows.length; rforF++) {\r\n\t\t\t\t\tif (dataRows[rforF][dataRows[rforF].length - measures.length + mforF] == 0) {\r\n\t\t\t\t\t\tvar formula = this.getFormulaRowByDataRow(dataRows[rforF], mforF, \"\");\r\n\t\t\t\t\t\tvar result = EvaluateExpressionPivotJs(formulaInfo.measureFormula[mforF].PolishNotation, formula, formulaInfo)\r\n\t\t\t\t\t\tif ((result == Infinity) || isNaN(result)) {\r\n\t\t\t\t\t\t\tdataRows[rforF][dataRows[rforF].length - measures.length + mforF] = \"#FoE#\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.GeneralDataRows = dataRows;\r\n\t\tthis.autoPagingRowsPerPage = (pageSize != undefined) ? parseInt(pageSize) : 10;\r\n\t\tthis.TotalPagesPaging = parseInt(dataRows.length / this.autoPagingRowsPerPage);\r\n\t\tif ((dataRows.length % this.autoPagingRowsPerPage) != 0) {\r\n\t\t\tthis.TotalPagesPaging++;\r\n\t\t}\r\n\t\tthis.GeneralDistinctValues = [];\r\n\t\tthis.GrandTotalsPaging = [];\r\n\t\tthis.columns = columns;\r\n\t\tif (dataRows.length > 0) {\r\n\t\t\tfillGeneralDistinctValues(headerRow.length - measures.length, self, dataRows);\r\n\t\t}\r\n\t\t\r\n\t\tthis.RowsWhenMoveToFilter = []\r\n\t\tthis.FilterByTopFilter = false\r\n\t\tthis.options = {\r\n\t\t\theadingBefore: 1,\r\n\t\t\theadingAfter: 0,\r\n\t\t\tagg: 1, /* index of default statistic function, SUM */\r\n\t\t\taggTotals: 1, /* dtto for subtotals & totals */\r\n\t\t\tcustomType: function (data) {\r\n\t\t\t\treturn data;\r\n\t\t\t},\r\n\t\t\t//currencySymbol: \"$\",\r\n\t\t\tshowEmpty: 0,\r\n\t\t\tsubtotals: 1,\r\n\t\t\ttotals: 1\r\n\t\t}\r\n\r\n\r\n\t\tthis.firstTime = true;\r\n\t\tthis.readState = false;\r\n\t\tthis.deleteState = false;\r\n\t\tthis.defaultPicture = defaultPicture;\r\n\t\tthis.gd = new OAT.GhostDrag();\r\n\t\tthis.div = OAT.$(div);\r\n\t\tthis.filterDiv = OAT.$(filterDiv);\r\n\t\tthis.hasShowValuesAs = _mthis.hasShowValuesAs;\r\n\t\t\r\n\t\tthis.TitleDivId = filterDiv.replace(\"pivot_page\", \"title_div\")\r\n\t\tif (pivotTitle){\r\n\t\t\tthis.PivotTitle = pivotTitle\r\n\t\t\tthis.TitleDiv = OAT.$(this.TitleDivId);\r\n\t\t\tif (!this.TitleDiv){\r\n\t\t\t\t jQuery(\"#\"+this.TitleDivId).remove()\r\n\t\t\t\t this.TitleDiv = OAT.Dom.create(\"div\", {});\r\n\t\t\t\t this.TitleDiv.id = this.TitleDivId\r\n\t\t\t\t jQuery(\"#\" + containerName).prepend(this.TitleDiv); \r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tjQuery(\"#\"+this.TitleDivId).remove()\r\n\t\t}\r\n\t\t\r\n\t\tthis.defCArray = [\"rgb(153,153,255)\", \"rgb(153,51,205)\", \"rgb(255,255,204)\", \"rgb(204,255,255)\", \"rgb(102,0,102)\",\r\n\t\t\t\"rgb(255,128,128)\", \"rgb(0,102,204)\", \"rgb(204,204,255)\", \"rgb(0,0,128)\", \"rgb(255,0,255)\",\r\n\t\t\t\"rgb(0,255,255)\", \"rgb(255,255,0)\"];\r\n\t\tthis.QueryViewerCollection = QueryViewerCollection;\r\n\t\tthis.containerName = containerName;\r\n\t\tthis.formatValues = formatValue;\r\n\t\tthis.formatValuesMeasures = formatValueMeasures;\r\n\t\tthis.tempBlackLists = []; this.tempCollapsedValues = []; this.oldSortValues = [];\r\n\t\tthis.stateChanged = false;\r\n\t\tthis.rowsPerPage = pageSize;\r\n\r\n\r\n\r\n\t\tthis.headerRow = headerRow; /* store data */\r\n\t\tthis.allData = dataRows; /* store data */\r\n\t\tthis.filteredData = [];\r\n\t\tthis.tabularData = []; /* result */\r\n\r\n\t\tthis.dataColumnIndex = dataColumnIndex; /* store data */\r\n\t\tthis.rowConditions = headerRowIndexes; /* indexes of row conditions */\r\n\t\tthis.colConditions = headerColIndexes; /* indexes of column conditions */\r\n\r\n\t\tthis.initRowConditions = [];\r\n\t\tfor (var i = 0; i < this.rowConditions.length; i++) {\r\n\t\t\tthis.initRowConditions[i] = this.rowConditions[i];\r\n\t\t}\r\n\t\tthis.initColConditions = []\r\n\t\tfor (var i = 0; i < this.colConditions.length; i++) {\r\n\t\t\tthis.initColConditions[i] = this.colConditions[i];\r\n\t\t}\r\n\r\n\t\tif ((columns.length == 1) && (measures.length == 0)) {\r\n\t\t\tthis.rowConditions = [0];\r\n\t\t}\r\n\r\n\t\tthis.conditions = [];\r\n\t\tthis.filterDiv.selects = [];\r\n\t\tthis.rowStructure = {};\r\n\t\tthis.colStructure = {};\r\n\t\tthis.colPointers = [];\r\n\t\tthis.rowPointers = [];\r\n\t\tthis.rowTotals = [[], []];\r\n\t\tthis.colTotals = [[], []];\r\n\t\tthis.gTotal = [];\r\n\r\n\t\tthis.query = query;\r\n\t\tthis.controlName = control;\r\n\t\tthis.conditionalFormats = condFormats;\r\n\t\tthis.conditionalFormatsColumns = conditionalFormatsColumns;\r\n\t\tthis.GreyList = [];\r\n\t\tthis.EmptyValue = \"#NaV#\"\r\n\t\tthis.NullValue = \"#NuN#\"\r\n\r\n\t\tthis.initState = {};\r\n\r\n\t\t/* supplemental routines */\r\n\t\tif (typeof JSON.decycle !== 'function') {\r\n\t\t\tJSON.decycle = function decycle(object) {\r\n\t\t\t\t'use strict';\r\n\t\t\t\tvar objects = [], // Keep a reference to each unique object or array\r\n\t\t\t\t\tpaths = [];\r\n\t\t\t\treturn (function derez(value, path) {\r\n\t\t\t\t\tvar i, // The loop counter\r\n\t\t\t\t\t\tname, // Property name\r\n\t\t\t\t\t\tnu;\r\n\t\t\t\t\tswitch (typeof value) {\r\n\t\t\t\t\t\tcase 'object':\r\n\t\t\t\t\t\t\tif (!value) {\r\n\t\t\t\t\t\t\t\treturn null;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tfor (i = 0; i < objects.length; i += 1) {\r\n\t\t\t\t\t\t\t\tif (objects[i] === value) {\r\n\t\t\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t\t\t$ref: paths[i]\r\n\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tobjects.push(value);\r\n\t\t\t\t\t\t\tpaths.push(path);\r\n\t\t\t\t\t\t\tif (Object.prototype.toString.apply(value) === '[object Array]') {\r\n\t\t\t\t\t\t\t\tnu = [];\r\n\t\t\t\t\t\t\t\tfor (i = 0; i < value.length; i += 1) {\r\n\t\t\t\t\t\t\t\t\tnu[i] = derez(value[i], path + '[' + i + ']');\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tnu = {};\r\n\t\t\t\t\t\t\t\tfor (name in value) {\r\n\t\t\t\t\t\t\t\t\tif (Object.prototype.hasOwnProperty.call(value, name)) {\r\n\t\t\t\t\t\t\t\t\t\tnu[name] = derez(value[name], path + '[' + JSON.stringify(name) + ']');\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn nu;\r\n\t\t\t\t\t\tcase 'number':\r\n\t\t\t\t\t\tcase 'string':\r\n\t\t\t\t\t\tcase 'boolean':\r\n\t\t\t\t\t\t\treturn value;\r\n\t\t\t\t\t}\r\n\t\t\t\t}(object, '$'));\r\n\t\t\t};\r\n\t\t}\r\n\r\n\r\n\t\tthis.saveState = function (state) {\r\n\t\t\ttry {\r\n\t\t\t\tif (!!window.localStorage) {\r\n\t\t\t\t\tlocalStorage.removeItem(OAT.getURL() + self.query + self.controlName);\r\n\t\t\t\t\tlocalStorage.setItem(OAT.getURL() + self.query + self.controlName, JSON.stringify(JSON.decycle(state)));\r\n\t\t\t\t} else {\r\n\t\t\t\t\tOATSetCookie('\"' + OAT.getURL() + self.query + self.controlName + 'cookie' + '\"', JSON.stringify(state), null, \"/\");\r\n\t\t\t\t}\r\n\t\t\t} catch (error) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tOATSetCookie('\"' + OAT.getURL() + self.query + self.controlName + 'cookie' + '\"', JSON.stringify(state), null, \"/\");\r\n\t\t\t\t} catch (error) { }\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.saveHiddenState = function (state) {\r\n\t\t\ttry {\r\n\t\t\t\tif (!!window.localStorage) {\r\n\t\t\t\t\tlocalStorage.removeItem(OAT.getURL() + self.query + self.controlName + \"HiddenState\");\r\n\t\t\t\t\tlocalStorage.setItem(OAT.getURL() + self.query + self.controlName + \"HiddenState\", JSON.stringify(JSON.decycle(state)));\r\n\t\t\t\t} else {\r\n\t\t\t\t\tOATSetCookie('\"' + OAT.getURL() + self.query + self.controlName + \"HiddenState\" + 'cookie' + '\"', JSON.stringify(state), null, \"/\");\r\n\t\t\t\t}\r\n\t\t\t} catch (error) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tOATSetCookie('\"' + OAT.getURL() + self.query + self.controlName + \"HiddenState\" + 'cookie' + '\"', JSON.stringify(state), null, \"/\");\r\n\t\t\t\t} catch (error) { }\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.getState = function () {\r\n\t\t\tif (typeof JSON.retrocycle !== 'function') {\r\n\t\t\t\tJSON.retrocycle = function retrocycle($) {\r\n\t\t\t\t\t'use strict';\r\n\r\n\t\t\t\t\tvar px =\r\n\t\t\t\t\t\t/^\\$(?:\\[(?:\\d+|\\\"(?:[^\\\\\\\"\\u0000-\\u001f]|\\\\([\\\\\\\"\\/bfnrt]|u[0-9a-zA-Z]{4}))*\\\")\\])*$/;\r\n\r\n\t\t\t\t\t(function rez(value) {\r\n\r\n\t\t\t\t\t\tvar i, item, name, path;\r\n\r\n\t\t\t\t\t\tif (value && typeof value === 'object') {\r\n\t\t\t\t\t\t\tif (Object.prototype.toString.apply(value) === '[object Array]') {\r\n\t\t\t\t\t\t\t\tfor (i = 0; i < value.length; i += 1) {\r\n\t\t\t\t\t\t\t\t\titem = value[i];\r\n\t\t\t\t\t\t\t\t\tif (item && typeof item === 'object') {\r\n\t\t\t\t\t\t\t\t\t\tpath = item.$ref;\r\n\t\t\t\t\t\t\t\t\t\tif (typeof path === 'string' && px.test(path)) {\r\n\t\t\t\t\t\t\t\t\t\t\tvalue[i] = eval(path);\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\trez(item);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tfor (name in value) {\r\n\t\t\t\t\t\t\t\t\tif (typeof value[name] === 'object') {\r\n\t\t\t\t\t\t\t\t\t\titem = value[name];\r\n\t\t\t\t\t\t\t\t\t\tif (item) {\r\n\t\t\t\t\t\t\t\t\t\t\tpath = item.$ref;\r\n\t\t\t\t\t\t\t\t\t\t\tif (typeof path === 'string' && px.test(path)) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalue[name] = eval(path);\r\n\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\trez(item);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}($));\r\n\t\t\t\t\treturn $;\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\ttry {\r\n\t\t\t\tvar i;\r\n\t\t\t\tif (localStorage.getItem(OAT.getURL() + self.query + self.controlName) != null) {\r\n\t\t\t\t\tvar retrievedObject = localStorage.getItem(OAT.getURL() + self.query + self.controlName);\r\n\t\t\t\t\ti = JSON.retrocycle(JSON.parse(retrievedObject));\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (i == null) {\r\n\t\t\t\t\tvar cookieValue = OATGetCookie('\"' + OAT.getURL() + self.query + self.controlName + 'cookie' + '\"')\r\n\t\t\t\t\tif (cookieValue != null) {\r\n\t\t\t\t\t\ti = JSON.parse(cookieValue)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn i;\r\n\t\t\t} catch (error) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tvar cookieValue = OATGetCookie('\"' + OAT.getURL() + self.query + self.controlName + 'cookie' + '\"')\r\n\t\t\t\t\tvar i = JSON.parse(cookieValue)\r\n\t\t\t\t\treturn i\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tthis.cleanState = function () {\r\n\r\n\t\t\tfor (var il = 0; il < self.filterDiv.selects.length; il++) {\r\n\t\t\t\tself.filterDiv.selects[il].value = \"[all]\"\r\n\t\t\t}\r\n\t\t\tfor (var ci = 0; ci <= self.conditions.length - 1; ci++) {\r\n\t\t\t\tself.conditions[ci].blackList = [];\r\n\t\t\t\tself.conditions[ci].whiteList = [];\r\n\t\t\t\tself.conditions[ci].greyList = [];\r\n\t\t\t}\r\n\t\t\tlocalStorage.removeItem(OAT.getURL() + self.query + self.controlName);\r\n\t\t\tself.deleteState = false;\r\n\r\n\t\t\tvar viejcolCond = new Array()\r\n\t\t\tfor (var i = 0; i < self.initState.colConditions.length; i++) {\r\n\t\t\t\tviejcolCond[i] = self.initState.colConditions[i];\r\n\t\t\t}\r\n\t\t\tvar viejcolRow = new Array();\r\n\t\t\tfor (var i = 0; i < self.initState.rowConditions.length; i++) {\r\n\t\t\t\tviejcolRow[i] = self.initState.rowConditions[i];\r\n\t\t\t}\r\n\t\t\tvar viejcolFilt = new Array();\r\n\t\t\tfor (var i = 0; i < self.initState.filterIndexes.length; i++) {\r\n\t\t\t\tviejcolFilt[i] = self.initState.filterIndexes[i];\r\n\t\t\t}\r\n\t\t\tthis.conditions = jQuery.extend(true, [], self.initState.conditions);\r\n\t\t\tthis.rowConditions = viejcolRow;\r\n\t\t\tthis.colConditions = viejcolCond;\r\n\t\t\tthis.filterIndexes = viejcolFilt;\r\n\t\t\tthis.stateChanged = self.initState.stateChanged;\r\n\t\t\tthis.rowsPerPage = self.initState.rowsPerPage;\r\n\r\n\t\t\tvar state = {\r\n\t\t\t\tquery: self.query,\r\n\t\t\t\tconditions: self.conditions,\r\n\t\t\t\tcolConditions: self.colConditions,\r\n\t\t\t\trowConditions: self.rowConditions,\r\n\t\t\t\tfilterIndexes: self.filterIndexes,\r\n\t\t\t\tfilterDivSelects: [],\r\n\t\t\t\trowsPerPage: self.rowsPerPage,\r\n\t\t\t\tversion: self.rememberLayoutStateVersion\r\n\t\t\t};\r\n\r\n\r\n\t\t\tself.saveState(state);\r\n\r\n\r\n\t\t}\r\n\r\n\t\tthis.cleanStateWhenServerPagination = function () {\r\n\r\n\t\t\tfor (var il = 0; il < self.filterDiv.selects.length; il++) {\r\n\t\t\t\tself.filterDiv.selects[il].value = \"[all]\"\r\n\t\t\t}\r\n\t\t\tfor (var ci = 0; ci <= self.conditions.length - 1; ci++) {\r\n\t\t\t\tself.conditions[ci].blackList = [];\r\n\t\t\t}\r\n\t\t\t//localStorage.removeItem(OAT.getURL()+self.query+self.controlName);\r\n\t\t\t//self.deleteState = false;\r\n\r\n\t\t\tvar viejcolCond = new Array()\r\n\t\t\tfor (var i = 0; i < self.initState.colConditions.length; i++) {\r\n\t\t\t\tviejcolCond[i] = self.initState.colConditions[i];\r\n\t\t\t}\r\n\t\t\tvar viejcolRow = new Array();\r\n\t\t\tfor (var i = 0; i < self.initState.rowConditions.length; i++) {\r\n\t\t\t\tviejcolRow[i] = self.initState.rowConditions[i];\r\n\t\t\t}\r\n\t\t\tvar viejcolFilt = new Array();\r\n\t\t\tfor (var i = 0; i < self.initState.filterIndexes.length; i++) {\r\n\t\t\t\tviejcolFilt[i] = self.initState.filterIndexes[i];\r\n\t\t\t}\r\n\r\n\t\t\tfor (var i = 0; i < self.conditions.length; i++) {\r\n\t\t\t\tif ((self.conditions[i]) && (self.conditions[i].distinctValues) && (self.conditions[i].dataField)) {\r\n\t\t\t\t\tvar initValuePos = -1;\r\n\t\t\t\t\tfor (var t = 0; t < self.initState.conditions.length; t++) {\r\n\t\t\t\t\t\tif (self.initState.conditions[t]) {\r\n\t\t\t\t\t\t\tif (self.initState.conditions[t].dataField == self.conditions[i].dataField) {\r\n\t\t\t\t\t\t\t\tinitValuePos = t;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (initValuePos > -1) {\r\n\t\t\t\t\t\tself.initState.conditions[initValuePos].distinctValues = []\r\n\t\t\t\t\t\tfor (var j = 0; j < self.conditions[i].distinctValues.length; j++) {\r\n\t\t\t\t\t\t\tif ((self.initState.conditions[initValuePos]) && (self.initState.conditions[initValuePos].distinctValues.indexOf(self.conditions[i].distinctValues[j]) == -1)) {\r\n\t\t\t\t\t\t\t\tself.initState.conditions[initValuePos].distinctValues.push(self.conditions[i].distinctValues[j])\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tself.initState.conditions[initValuePos].previousPage = self.conditions[i].previousPage\r\n\t\t\t\t\t\tself.initState.conditions[initValuePos].totalPages = self.conditions[i].totalPages\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tself.conditions = jQuery.extend(true, [], self.initState.conditions);\r\n\r\n\t\t\tself.pageData.AxisInfo = jQuery.extend(true, [], self.initState.AxisInfo);\r\n\t\t\tself.pageData.DataInfo = jQuery.extend(true, [], self.initState.DataInfo);\r\n\t\t\tself.pageData.FilterInfo = jQuery.extend(true, [], self.initState.FilterInfo);\r\n\t\t\tself.pageData.CollapseInfo = jQuery.extend(true, [], self.initState.CollapseInfo);\r\n\r\n\t\t\tself.rowConditions = viejcolRow;\r\n\t\t\tself.colConditions = viejcolCond;\r\n\t\t\tself.filterIndexes = viejcolFilt;\r\n\t\t\tself.stateChanged = self.initState.stateChanged;\r\n\t\t\tself.rowsPerPage = self.initState.rowsPerPage;\r\n\t\t\tself.DefaultAction = self.initState.DefaultAction;\r\n\r\n\t\t\tself.initMetadata = jQuery.extend(true, {}, self.initState.InitMetadata);\r\n\r\n\t\t\t//self.initMetadata.Conditions = []\r\n\t\t\t\r\n\t\t\tfor (var iC = 0; iC < self.initMetadata.Conditions.length; iC++)\r\n\t\t\t{\r\n\t\t\t\tself.initMetadata.Conditions[iC] = \"\"\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t//self.initMetadata.Conditions = jQuery.extend(true, [] ,self.initState.conditions);\r\n\t\t\tfor (var ip = 0; ip < self.initState.conditions.length; ip++) {\r\n\t\t\t\tvar dF = self.initState.conditions[ip].dataField;\r\n\t\t\t\tif (dF){\r\n\t\t\t\t\tvar ix = self.initMetadata.DataFields.indexOf(dF);\r\n\t\t\t\t\tself.initMetadata.Conditions[ix] = self.conditions[ip];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (!OAT.isIE()){\r\n\t\t\t\tself.goWhenHide(true);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t/*this.requestDataSyncForPivotTable = function(){\r\n\t\t\tsetTimeout( function() {\r\n\t\t\t\tvar paramobj = { \"QueryviewerId\": self.IdForQueryViewerCollection} ;\r\n\t\t\t\tvar evt = document.createEvent(\"Events\")\r\n\t\t\t\tevt.initEvent(\"RequestDataSyncForPivotTable\", true, true);\r\n\t\t\t\tevt.parameter = paramobj;\r\n\t\t\t\tdocument.dispatchEvent(evt);\r\n\t\t\t}, 0)\r\n\t\t}*/\r\n\t\t\r\n\t\tthis.getDataXML = function(serverData) {\r\n\t\t\tvar dataStr = serverData.split(\"<Recordset\")[1];\r\n\t\t\t//var temp = self.QueryViewerCollection[self.IdForQueryViewerCollection].getPivottableDataSync();\r\n\t\t\tdataStr = \"<Recordset\" + dataStr;\r\n\t\t\treturn dataStr\r\n\t\t}\r\n\t\t\r\n\t\tthis.requestPageDataForPivotTable = function(PageNumber, PageSize, ReturnTotPages, AxesInfo, DataInfo, Filters, ExpandCollapse, LayoutChange){\r\n\t\t\tsetTimeout( function() {\r\n\t\t\t\tvar paramobj = {  \"PageNumber\": PageNumber, \"PageSize\": PageSize,\"ReturnTotPages\":ReturnTotPages, \"AxesInfo\":AxesInfo, \r\n\t\t\t\t\t\"DataInfo\":DataInfo, \"Filters\":Filters, \"ExpandCollapse\":ExpandCollapse, \"LayoutChange\":LayoutChange, \"QueryviewerId\": self.IdForQueryViewerCollection};\r\n\t\t\t\tvar evt = document.createEvent(\"Events\")\r\n\t\t\t\tevt.initEvent(\"RequestPageDataForPivotTable\", true, true);\r\n\t\t\t\tevt.parameter = paramobj;\r\n\t\t\t\tdocument.dispatchEvent(evt);\r\n\t\t\t}, 0)\r\n\t\t}\r\n\t\t\r\n\t\tthis.setPageDataForPivotTable = function(resXML) {\r\n\t\t\tswitch(self.lastCallToQueryViewer) {\r\n\t\t\t\tcase \"initWhenServerPagination\":\r\n\t\t\t\t\tif (!qv.util.anyError(resXML) || self.QueryViewerCollection[self.IdForQueryViewerCollection].debugServices) {\r\n\r\n\t\t\t\t\t\tself.pageData = OATGetNewDataFromXMLForPivot(resXML, self.pageData, self.ShowMeasuresAsRows);\r\n\t\t\t\t\t\tself.preGoWhenServerPagination(true);\r\n\r\n\t\t\t\t\t\tif (self.filterIndexes.length > 0) {\r\n\t\t\t\t\t\t\tself.initValueRead(self, 0, self.stateLoad);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tqv.util.hideActivityIndicator(self.QueryViewerCollection[self.IdForQueryViewerCollection]);\r\n\t\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvar errMsg = qv.util.getErrorFromText(resXML);\r\n\t\t\t\t\t\tqv.util.renderError(self.QueryViewerCollection[self.IdForQueryViewerCollection], errMsg);\r\n\t\t\t\t\t};\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"callServiceWhenCustomeValues\":\r\n\t\t\t\t\tif (!qv.util.anyError(resXML) || self.QueryViewerCollection[self.IdForQueryViewerCollection].debugServices) {\r\n\r\n\t\t\t\t\t\tself.pageData = OATGetNewDataFromXMLForPivot(resXML, self.pageData, self.ShowMeasuresAsRows);\r\n\t\t\t\t\t\tself.preGoWhenServerPagination(true);\r\n\t\t\t\t\t\tqv.util.hideActivityIndicator(self.QueryViewerCollection[self.IdForQueryViewerCollection]);\r\n\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvar errMsg = qv.util.getErrorFromText(resXML);\r\n\t\t\t\t\tqv.util.renderError(self.QueryViewerCollection[self.IdForQueryViewerCollection], errMsg);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"refreshPivot\":\r\n\t\t\t\t\tif (!qv.util.anyError(resXML) || self.QueryViewerCollection[self.IdForQueryViewerCollection].debugServices) {\r\n\r\n\t\t\t\t\t\tself.pageData = OATGetNewDataFromXMLForPivot(resXML, self.pageData, self.ShowMeasuresAsRows);\r\n\t\t\t\t\t\tself.goWhenServerPagination(false, true);\r\n\t\t\t\t\t\tqv.util.hideActivityIndicator(self.QueryViewerCollection[self.IdForQueryViewerCollection]);\r\n\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvar errMsg = qv.util.getErrorFromText(resXML);\r\n\t\t\t\t\t\tqv.util.renderError(self.QueryViewerCollection[self.IdForQueryViewerCollection], errMsg);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"hiddenDimension\":\t\r\n\t\t\t\t\tif (!qv.util.anyError(resXML) || self.QueryViewerCollection[self.IdForQueryViewerCollection].debugServices) {\r\n\t\t\t\t\t\tself.pageData = OATGetNewDataFromXMLForPivot(resXML, self.pageData, self.ShowMeasuresAsRows);\r\n\t\t\t\t\t\tself.goWhenServerPagination(false, false);\r\n\t\t\t\t\t\tqv.util.hideActivityIndicator(self.QueryViewerCollection[self.IdForQueryViewerCollection]);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvar errMsg = qv.util.getErrorFromText(resXML);\r\n\t\t\t\t\t\tqv.util.renderError(self.QueryViewerCollection[self.IdForQueryViewerCollection], errMsg);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"DataForPivot\":\t\r\n\t\t\t\t\tself.pageData = OATGetNewDataFromXMLForPivot(resXML, self.pageData, self.ShowMeasuresAsRows, self.ExportTo);\r\n\t\t\t\t\tself.preGoWhenServerPagination(self.lastNotAutorefreshIndicator);\r\n\t\t\t\t\tif (self.ExportTo != \"\") {\r\n\t\t\t\t\t\tvar FileName = self.query\r\n\t\t\t\t\t\tif (FileName == \"\") {\r\n\t\t\t\t\t\t\tFileName = \"Query\"\r\n\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\tFileName = self.controlName.split(\"_\")[0]\r\n\t\t\t\t\t\t\t} catch (error) { }\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (self.ExportTo == \"HTML\") {\r\n\t\t\t\t\t\t\tself.ExportToHTMLWhenServerPagination()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (self.ExportTo == \"PDF\") {\r\n\t\t\t\t\t\t\tOAT.GeneratePDFOutput(self, FileName)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (self.ExportTo == \"XLS\") {\r\n\t\t\t\t\t\t\tself.ExportToExcel(FileName);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (self.ExportTo == \"XML\") {\r\n\t\t\t\t\t\t\tself.ExportToXMLWhenServerPagination();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (self.ExportTo == \"XLSX\") {\r\n\t\t\t\t\t\t\tself.ExportToXLSXWhenServerPagination();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tself.cleanGridCache();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tqv.util.hideActivityIndicator(self.QueryViewerCollection[self.IdForQueryViewerCollection]);\r\n\t\t\t\t\tbreak;\r\n\t\t\t  }\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\tthis.requestAttributeValues = function(DataField, Page, PageSize, FilterText)\r\n\t\t{\r\n\t\t\tsetTimeout( function() {\r\n\t\t\t\t\r\n\t\t\t\tvar paramobj = {  \"DataField\": DataField, \"Page\": Page,\"PageSize\":PageSize, \"FilterText\":FilterText, \"QueryviewerId\": self.IdForQueryViewerCollection};\r\n\t\t\t\tvar evt = document.createEvent(\"Events\")\r\n\t\t\t\tevt.initEvent(\"RequestAttributeValuesForPivotTable\", true, true);\r\n\t\t\t\tevt.parameter = paramobj;\r\n\t\t\t\tdocument.dispatchEvent(evt);\r\n\t\t\t\t\r\n\t\t\t}, 0)\r\n\t\t}\r\n\t\t\r\n\t\tthis.setAttributeValuesForPivotTable = function(resJSON)\r\n\t\t{\r\n\t\t\t\r\n\t\t\tswitch(self.lastRequestAttributeValues) {\r\n\t\t\t\tcase \"initValueRead\":\r\n\t\t\t\t\tvar data = JSON.parse(resJSON);\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar columnNumber = self.lastRequestAttributeColumnNumber\r\n\t\t\t\t\tallData = self.lastRequestAttributeAllData \r\n\t\t\t\t\trequestDataField = self.lastRequestAttributeRequestDataField\r\n\t\t\t\t\t\r\n\t\t\t\t\tself.conditions[columnNumber].previousPage = data.PageNumber\r\n\t\t\t\t\tself.conditions[columnNumber].totalPages = data.PagesCount\r\n\t\t\t\t\tself.conditions[columnNumber].blocked = false\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (allData) {\r\n\t\t\t\t\t\tself.conditions[columnNumber].distinctValues = []\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//null value?\r\n\t\t\t\t\tif (data.Null) {\r\n\t\t\t\t\t\tself.conditions[columnNumber].hasNull = true;\r\n\t\t\t\t\t\tif (self.conditions[columnNumber].distinctValues.indexOf(\"#NuN#\") == -1) {\r\n\t\t\t\t\t\t\tself.conditions[columnNumber].distinctValues.push(\"#NuN#\")\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar nullIncluded = true;\r\n\r\n\t\t\t\t\t\tif (!self.conditions[columnNumber].NullIncluded) {\r\n\t\t\t\t\t\t\tnullIncluded = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif ((nullIncluded) && (self.conditions[columnNumber].visibles.indexOf(\"#NuN#\") == -1)) {\r\n\t\t\t\t\t\t\tself.conditions[columnNumber].visibles.push(\"#NuN#\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tself.conditions[columnNumber].hasNull = false;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar includeLists = [];\r\n\t\t\t\t\tfor (var i = 0; i < data.NotNullValues.length; i++) {\r\n\t\t\t\t\t\tvar value = data.NotNullValues[i]\r\n\t\t\t\t\t\tvar include = false;\r\n\t\t\t\t\t\tif ((self.conditions[columnNumber].state == \"none\") &&\r\n\t\t\t\t\t\t\t(self.UserFilterValues.length > 0) && (self.UserFilterValues[columnNumber] != undefined)\r\n\t\t\t\t\t\t\t&& (self.UserFilterValues[columnNumber].length > 0) && (self.UserFilterValues[columnNumber].indexOf(value.trimpivot()) != -1)) {\r\n\t\t\t\t\t\t\tinclude = true;\r\n\t\t\t\t\t\t\tincludeLists.push(value)\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (self.conditions[columnNumber].distinctValues.indexOf(value) == -1) {\r\n\t\t\t\t\t\t\tself.conditions[columnNumber].distinctValues.push(value)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif ((self.conditions[columnNumber].state == \"all\")\r\n\t\t\t\t\t\t\t&& (self.conditions[columnNumber].visibles.indexOf(value) == -1)) {\r\n\t\t\t\t\t\t\tself.conditions[columnNumber].visibles.push(value)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif ((self.conditions[columnNumber].state == \"none\")\r\n\t\t\t\t\t\t\t&& (self.conditions[columnNumber].blackList.indexOf(value) == -1)\r\n\t\t\t\t\t\t\t&& (!include)) {\r\n\t\t\t\t\t\t\tself.conditions[columnNumber].blackList.push(value)\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif ((allData) && (self.UserExpandValues.length > 0)) {//collapsed values\r\n\t\t\t\t\t\t\tif (self.UserExpandValues[columnNumber] != undefined) {\r\n\t\t\t\t\t\t\t\tif ((self.UserExpandValues[columnNumber][0] == \"#ALLCOLLAPSE#\") ||\r\n\t\t\t\t\t\t\t\t\t(self.UserExpandValues[columnNumber].indexOf(value.trimpivot()) == -1)) {\r\n\t\t\t\t\t\t\t\t\tself.conditions[columnNumber].collapsedValues.push(value);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfor (var i = 0; i < includeLists.length; i++) {\r\n\t\t\t\t\t\tself.createFilterInfo({ op: \"pop\", values: includeLists[i], dim: columnNumber }, true);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (requestDataField == undefined){\r\n\t\t\t\t\t\tcolumnNumber++;\r\n\t\t\t\t\t\tself.initValueRead(self, columnNumber, allData)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"DrawFilters\":\r\n\t\t\t\t\tvar data = JSON.parse(resJSON);\r\n\t\t\t\t\tvar columnNumber = self.lastRequestAttributeColumnNumber\r\n\t\t\t\t\t\r\n\t\t\t\t\tself.conditions[columnNumber].previousPage = data.PageNumber\r\n\t\t\t\t\tself.conditions[columnNumber].totalPages = data.PagesCount\r\n\t\t\t\t\tself.conditions[columnNumber].blocked = true\r\n\t\t\t\t\t//null value?\r\n\t\t\t\t\tif ((data.Null) && (!self.conditions[columnNumber].hasNull)) {\r\n\t\t\t\t\t\tself.conditions[columnNumber].hasNull = true;\r\n\t\t\t\t\t\tif (self.conditions[columnNumber].distinctValues.indexOf(\"#NuN#\") == -1) {\r\n\t\t\t\t\t\t\tself.conditions[columnNumber].distinctValues.push(\"#NuN#\")\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (self.conditions[columnNumber].defaultAction == \"Include\") {\r\n\t\t\t\t\t\t\tif (self.conditions[columnNumber].visibles.indexOf(\"#NuN#\") == -1) {\r\n\t\t\t\t\t\t\t\tself.conditions[columnNumber].visibles.push(\"#NuN#\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (self.conditions[columnNumber].blackList.indexOf(\"#NuN#\") == -1) {\r\n\t\t\t\t\t\t\t\tself.conditions[columnNumber].blackList.push(\"#NuN#\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfor (var i = 0; i < data.NotNullValues.length; i++) {\r\n\t\t\t\t\t\tvar value = data.NotNullValues[i]\r\n\t\t\t\t\t\tif (self.conditions[columnNumber].distinctValues.indexOf(value) == -1) {\r\n\t\t\t\t\t\t\tself.conditions[columnNumber].distinctValues.push(value)\r\n\r\n\t\t\t\t\t\t\tif ((self.conditions[columnNumber].defaultAction == \"Include\")\r\n\t\t\t\t\t\t\t\t&& (self.conditions[columnNumber].visibles.indexOf(value) == -1)) {\r\n\t\t\t\t\t\t\t\tself.conditions[columnNumber].visibles.push(value)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif ((self.conditions[columnNumber].state == \"Exclude\")\r\n\t\t\t\t\t\t\t\t&& (self.conditions[columnNumber].blackList.indexOf(value) == -1)) {\r\n\t\t\t\t\t\t\t\tself.conditions[columnNumber].blackList.push(value)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar actualValues = self.conditions[columnNumber].distinctValues;\r\n\t\t\t\t\tfor (var j = 0; j < actualValues.length; j++) {\r\n\t\t\t\t\t\tvar v = actualValues[j];\r\n\t\t\t\t\t\tif (self.conditions[columnNumber].filteredShowValues.indexOf(v) == -1) {\r\n\t\t\t\t\t\t\tself.conditions[columnNumber].filteredShowValues.push(v);\r\n\t\t\t\t\t\t\tif (v != \"#NuN#\") {\r\n\t\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\t\tOAT.Dom.option(self.dimensionPictureValue(v, columnNumber), v, s);\r\n\t\t\t\t\t\t\t\t} catch (Error) {\r\n\t\t\t\t\t\t\t\t\tOAT.Dom.option(v, v, s);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tOAT.Dom.option(\" \", v, s);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"hiddenDimension\":\r\n\t\t\t\t\t\tvar data = JSON.parse(resJSON);\r\n\t\t\t\t\t\tvar columnNumber = self.lastRequestAttributeColumnNumber\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tself.conditions[columnNumber].previousPage = data.PageNumber\r\n\t\t\t\t\t\tself.conditions[columnNumber].totalPages = data.PagesCount\r\n\t\t\t\t\t\tself.conditions[columnNumber].blocked = false\r\n\t\t\t\t\t\t//null value?\r\n\t\t\t\t\t\tif (data.Null) {\r\n\t\t\t\t\t\t\tself.conditions[columnNumber].hasNull = true;\r\n\t\t\t\t\t\t\tif (self.conditions[columnNumber].distinctValues.indexOf(\"#NuN#\") == -1) {\r\n\t\t\t\t\t\t\t\tself.conditions[columnNumber].distinctValues.push(\"#NuN#\")\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tvar nullIncluded = true;\r\n\r\n\t\t\t\t\t\t\tif (!self.conditions[columnNumber].NullIncluded) {\r\n\t\t\t\t\t\t\t\tnullIncluded = false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif ((nullIncluded) && (self.conditions[columnNumber].visibles.indexOf(\"#NuN#\") == -1)) {\r\n\t\t\t\t\t\t\t\tself.conditions[columnNumber].visibles.push(\"#NuN#\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tself.conditions[columnNumber].hasNull = false;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvar includeLists = [];\r\n\t\t\t\t\t\tfor (var i = 0; i < data.NotNullValues.length; i++) {\r\n\t\t\t\t\t\t\tvar value = data.NotNullValues[i]\r\n\t\t\t\t\t\t\tvar include = false;\r\n\t\t\t\t\t\t\tif ((self.conditions[columnNumber].state == \"none\") &&\r\n\t\t\t\t\t\t\t\t(self.UserFilterValues.length > 0) && (self.UserFilterValues[columnNumber] != undefined)\r\n\t\t\t\t\t\t\t\t&& (self.UserFilterValues[columnNumber].length > 0) && (self.UserFilterValues[columnNumber].indexOf(value.trimpivot()) != -1)) {\r\n\t\t\t\t\t\t\t\tinclude = true;\r\n\t\t\t\t\t\t\t\tincludeLists.push(value)\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif (self.conditions[columnNumber].distinctValues.indexOf(value) == -1) {\r\n\t\t\t\t\t\t\t\tself.conditions[columnNumber].distinctValues.push(value)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif ((self.conditions[columnNumber].state == \"all\")\r\n\t\t\t\t\t\t\t\t&& (self.conditions[columnNumber].visibles.indexOf(value) == -1)) {\r\n\t\t\t\t\t\t\t\tself.conditions[columnNumber].visibles.push(value)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif ((self.conditions[columnNumber].state == \"none\")\r\n\t\t\t\t\t\t\t\t&& (self.conditions[columnNumber].blackList.indexOf(value) == -1)\r\n\t\t\t\t\t\t\t\t&& (!include)) {\r\n\t\t\t\t\t\t\t\tself.conditions[columnNumber].blackList.push(value)\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif ((self.UserExpandValues.length > 0)) {//collapsed values\r\n\t\t\t\t\t\t\t\tif (self.UserExpandValues[columnNumber] != undefined) {\r\n\t\t\t\t\t\t\t\t\tif ((self.UserExpandValues[columnNumber][0] == \"#ALLCOLLAPSE#\") ||\r\n\t\t\t\t\t\t\t\t\t\t(self.UserExpandValues[columnNumber].indexOf(value.trimpivot()) == -1)) {\r\n\t\t\t\t\t\t\t\t\t\t\tself.conditions[columnNumber].collapsedValues.push(value);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tfor (var i = 0; i < includeLists.length; i++) {\r\n\t\t\t\t\t\t\tself.createFilterInfo({ op: \"pop\", values: includeLists[i], dim: columnNumber }, true);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"readScrollValueWithoutFilters\":\r\n\t\t\t\t\tvar res = JSON.parse(resJSON);\r\n\t\t\t\t\tself.appendNewValueData(self.lastRequestValue, res)\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"readScrollValueWithFilters\":\r\n\t\t\t\t\tvar res = JSON.parse(resJSON);\r\n\t\t\t\t\tvar columnNumber = self.lastRequestAttributeColumnNumber\r\n\t\t\t\t\tvar filterText = self.lastRequestAttributeFilterText\r\n\t\t\t\t\tself.appendNewFilteredValueData(res, columnNumber, filterText)\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"ValuesForColumn\":\r\n\t\t\t\t\tvar res = JSON.parse(resJSON);\r\n\t\t\t\t\tvar columnNumber = self.lastRequestAttributeColumnNumber \r\n\t\t\t\t\tvar filterValuePars = self.lastRequestAttributeFilterText\r\n\t\t\t\t\tvar dataField = self.lastRequestAttributeDataField\r\n\t\t\t\t\tvar UcId = self.lastRequestAttributeUcId = UcId\r\n\t\t\t\t\tself.changeValues(UcId, dataField, columnNumber, res, filterValuePars);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"ExpandCollapse\":\r\n\t\t\t\t\tvar data = JSON.parse(resJSON);\r\n\t\t\t\t\tvar columnNumber = self.lastColumnNumber\r\n\t\t\t\t\tvar elemvalue = self.lastRequestAttributeValuesElemValue\r\n\t\t\t\t\tvar action = self.lastRequestAttributeValuesAction \r\n\t\t\t\t\t\r\n\t\t\t\t\tself.conditions[columnNumber].previousPage = data.PageNumber\r\n\t\t\t\t\tself.conditions[columnNumber].totalPages = data.PagesCount\r\n\t\t\t\t\tself.conditions[columnNumber].blocked = true\r\n\r\n\t\t\t\t\t//null value?\r\n\t\t\t\t\tif ((data.Null) && (!self.conditions[columnNumber].hasNull)) {\r\n\t\t\t\t\t\tself.conditions[columnNumber].hasNull = true;\r\n\t\t\t\t\t\tif (self.conditions[columnNumber].distinctValues.indexOf(\"#NuN#\") == -1) {\r\n\t\t\t\t\t\t\tself.conditions[columnNumber].distinctValues.push(\"#NuN#\")\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (self.conditions[columnNumber].defaultAction == \"Include\") {\r\n\t\t\t\t\t\t\tif (self.conditions[columnNumber].visibles.indexOf(\"#NuN#\") == -1) {\r\n\t\t\t\t\t\t\t\tself.conditions[columnNumber].visibles.push(\"#NuN#\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (self.conditions[columnNumber].blackList.indexOf(\"#NuN#\") == -1) {\r\n\t\t\t\t\t\t\t\tself.conditions[columnNumber].blackList.push(\"#NuN#\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfor (var i = 0; i < data.NotNullValues.length; i++) {\r\n\t\t\t\t\t\tvar val = data.NotNullValues[i]\r\n\t\t\t\t\t\tif (self.conditions[columnNumber].distinctValues.indexOf(val) == -1) {\r\n\t\t\t\t\t\t\tself.conditions[columnNumber].distinctValues.push(val)\r\n\r\n\t\t\t\t\t\t\tif ((self.conditions[columnNumber].defaultAction == \"Include\")\r\n\t\t\t\t\t\t\t\t&& (self.conditions[columnNumber].visibles.indexOf(val) == -1)) {\r\n\t\t\t\t\t\t\t\tself.conditions[columnNumber].visibles.push(val)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif ((self.conditions[columnNumber].state == \"Exclude\")\r\n\t\t\t\t\t\t\t\t&& (self.conditions[columnNumber].blackList.indexOf(val) == -1)) {\r\n\t\t\t\t\t\t\t\tself.conditions[columnNumber].blackList.push(val)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar datastr = self.ExpandCollapseHandleWhenServerPaginationCreateXML(elemvalue, action)\r\n\t\t\t\t\tdatastr = datastr.replace(/\\&/g, '&amp;');\r\n\r\n\t\t\t\t\tself.getDataForPivot(self.UcId, self.pageData.ServerPageNumber, self.rowsPerPage, true, \"\", \"\", \"\", \"\", true);\r\n\t\t\t\t\tsetTimeout(function () {\r\n\t\t\t\t\t\tself.fireOnItemExpandCollapseEvent(self.QueryViewerCollection[IdForQueryViewerCollection], datastr, (action == \"collapse\"))\r\n\t\t\t\t\t\t//qv.pivot.onItemExpandCollapseEvent(self.QueryViewerCollection[IdForQueryViewerCollection], datastr, (action == \"collapse\"))\r\n\t\t\t\t\t}, 2000);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"FilteredChanged\":\r\n\t\t\t\t\tsetTimeout(function () {\r\n\t\t\t\t\t\tvar data = JSON.parse(resJSON);\r\n\t\t\t\t\t\tself.onFilteredChangedEventHandleWhenServerPaginationCreateXML(self.lastColumnNumber, data.NotNullValues, self.conditions[self.lastColumnNumber].blackList);\r\n\t\t\t\t\t}, 200)\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\tthis.fireOnItemExpandCollapseEvent = function(query, datastr, collapse){\r\n\t\t\tsetTimeout( function() {\r\n\t\t\t\tvar paramobj = {\"QueryViewer\": query, \"Data\": datastr, \"QueryviewerId\": self.IdForQueryViewerCollection, \"IsCollapse\": collapse};\r\n\t\t\t\tvar evt = document.createEvent(\"Events\")\r\n\t\t\t\tevt.initEvent(\"PivotTableOnItemExpandCollapseEvent\", true, true);\r\n\t\t\t\tevt.parameter = paramobj;\r\n\t\t\t\tdocument.dispatchEvent(evt);\r\n\t\t\t}, 0)\r\n\t\t}\r\n\t\t\r\n\t\tthis.requestCalculatePivottableData = function()\r\n\t\t{\r\n\t\t\tsetTimeout( function() {\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tvar evt = document.createEvent(\"Events\")\r\n\t\t\t\tvar paramobj = {\"QueryviewerId\": self.IdForQueryViewerCollection};\r\n\t\t\t\tevt.initEvent(\"RequestCalculatePivottableData\", true, true);\r\n\t\t\t\tevt.parameter = paramobj;\r\n\t\t\t\tdocument.dispatchEvent(evt);\r\n\t\t\t\t\r\n\t\t\t}, 0)\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\tthis.setPivottableDataCalculation = function(resText)\r\n\t\t{\r\n\t\t\t\r\n\t\t\tswitch(self.lastRequestCalculation) {\r\n\t\t\t\tcase \"ExportToXML\":\r\n\t\t\t\t\tself.allDataWithoutSort = OATgetDataFromXMLOldFormat(resText, self.pageData.dataFields)\r\n\t\t\t\t\tself.allData = self.allDataWithoutSort\r\n\r\n\t\t\t\t\tvar prevConditions = jQuery.extend(true, [], self.conditions);\r\n\t\t\t\t\tfor (var t = 0; t < self.conditions.length; t++) {\r\n\t\t\t\t\t\tif (self.conditions[t]) {\r\n\t\t\t\t\t\t\tfor (var i = 0; i < self.allData.length; i++) {\r\n\t\t\t\t\t\t\t\tvar value = self.allData[i][t];\r\n\t\t\t\t\t\t\t\tif (value == undefined) {\r\n\t\t\t\t\t\t\t\t\tvalue = \" \";\r\n\t\t\t\t\t\t\t\t\tself.allData[i][index] = \" \";\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (self.conditions[t].distinctValues.indexOf(value) == -1) {\r\n\t\t\t\t\t\t\t\t\tself.conditions[t].distinctValues.push(value);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\tself.sort(self.conditions[t], t);\r\n\t\t\t\t\t\t\t} catch (ERROR) { }\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tself.applyFilters();\r\n\t\t\t\t\tself.createAggStructure();\r\n\t\t\t\t\tself.fillAggStructure();\r\n\t\t\t\t\tself.checkAggStructure();\r\n\t\t\t\t\t//self.count();\r\n\r\n\t\t\t\t\tstr = self.ExportToXML();\r\n\t\t\t\t\tself.allDataWithoutSort = []; self.allData = []; self.filteredData = [];\r\n\t\t\t\t\tself.conditions = prevConditions;\r\n\r\n\t\t\t\t\tif ((OAT.isSafari()) || (self.isSD)) { //for safari\r\n\t\t\t\t\t\twindow.open('data:text/xml,' + encodeURIComponent('<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?>' + str));\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvar blob = new Blob([str], { type: \"text/xml\" });\r\n\t\t\t\t\t\tif (self.query != \"\") {\r\n\t\t\t\t\t\t\tsaveAs(blob, self.query + \".xml\");\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tvar name = 'Query'\r\n\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\tname = self.controlName.substr(4).split(\"_\")[0]\r\n\t\t\t\t\t\t\t} catch (error) { }\r\n\t\t\t\t\t\t\tsaveAs(blob, name + \".xml\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"ExportToXLSX\":\r\n\t\t\t\t\tvar dataFields = [];\r\n\t\t\t\t\r\n\t\t\t\t\tfor (var t = 0; t < self.initMetadata.Dimensions.length; t++){\r\n\t\t\t\t\t\tif (self.initMetadata.Dimensions[t].Visible)\r\n\t\t\t\t\t\t\tdataFields.push(self.initMetadata.Dimensions[t].dataField);\r\n\t\t\t\t\t}\t\t\t\t\r\n\t\t\t\t\tfor (var t = 0; t < self.pageData.AxisInfo.length; t++) {\r\n\t\t\t\t\t\tif ((self.pageData.AxisInfo[t].Axis != undefined) && (self.pageData.AxisInfo[t].Axis.Type == \"Hidden\")) {\r\n\t\t\t\t\t\t\tvar index = dataFields.indexOf(self.pageData.AxisInfo[t].DataField);\r\n\t\t\t\t\t\t\tif (index > -1) {\r\n\t\t\t\t\t\t\t\tdataFields.splice(index, 1)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\tfor (var t = 0; t < self.initMetadata.Measures.length; t++){\r\n\t\t\t\t\t\tif ((self.initMetadata.Measures[t].Visible) &&  (dataFields.indexOf(self.initMetadata.Measures[t].dataField) < 0))\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tdataFields.push(self.initMetadata.Measures[t].dataField)\r\n\t\t\t\t\t\t} \r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfor (var t = 0; t < measures.length; t++) {\r\n\t\t\t\t\t\tif (measures[t].getAttribute(\"aggregation\") == \"average\") {\r\n\t\t\t\t\t\t\tself.formulaInfo.measureFormula[t].hasFormula = true;\r\n\t\t\t\t\t\t\tself.formulaInfo.measureFormula[t].textFormula = measures[t].getAttribute(\"dataField\") + \"_N/\" + measures[t].getAttribute(\"dataField\") + \"_D\"\r\n\r\n\t\t\t\t\t\t\tself.formulaInfo.cantFormulaMeasures++;\r\n\r\n\t\t\t\t\t\t\tvar inlineFormula = self.formulaInfo.measureFormula[t].textFormula\r\n\r\n\t\t\t\t\t\t\tvar inline = inlineFormula\r\n\t\t\t\t\t\t\tvar opers = ['*', '-', '+', '/', '(', ')']\r\n\t\t\t\t\t\t\tfor (var j = 0; j < opers.length; j++) {\r\n\t\t\t\t\t\t\t\tvar inline2 = inline.split(opers[j])\r\n\t\t\t\t\t\t\t\tif (inline2.length > 1) {\r\n\t\t\t\t\t\t\t\t\tinline = \"\"\r\n\t\t\t\t\t\t\t\t\tfor (var i = 0; i < inline2.length - 1; i++) {\r\n\t\t\t\t\t\t\t\t\t\tinline = inline + inline2[i] + \" \" + opers[j] + \" \"\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tinline = inline + inline2[inline2.length - 1]\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\t\r\n\r\n\t\t\t\t\t\t\tvar polishNot = InfixToPostfix(inline)\r\n\t\t\t\t\t\t\tformulaInfo.measureFormula[t].polishNotationText = polishNot\r\n\t\t\t\t\t\t\tvar items = polishNot.split(\" \")\r\n\t\t\t\t\t\t\twhile (items.indexOf(\"\") != -1) {\r\n\t\t\t\t\t\t\t\titems.splice(items.indexOf(\"\"), 1)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tvar relatedMeasure = []\r\n\t\t\t\t\t\t\tfor (var k = 0; k < items.length; k++) {\r\n\t\t\t\t\t\t\t\tif ((opers.indexOf(items[k]) == -1) && (isNaN(parseInt(items[k])))) {\r\n\t\t\t\t\t\t\t\t//add item\r\n\t\t\t\t\t\t\t\t\tvar operPositionInDataRow = formulaInfo.itemPosition[items[k]]\r\n\t\t\t\t\t\t\t\t\tif (relatedMeasure.indexOf(operPositionInDataRow) == -1)\r\n\t\t\t\t\t\t\t\t\t\trelatedMeasure.push(operPositionInDataRow)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tself.formulaInfo.measureFormula[t].relatedMeasures = relatedMeasure\r\n\r\n\t\t\t\t\t\t\tvar arrayNot = polishNot.split(\" \")\r\n\t\t\t\t\t\t\twhile (arrayNot.indexOf(\"\") != -1) {\r\n\t\t\t\t\t\t\t\tarrayNot.splice(arrayNot.indexOf(\"\"), 1)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tself.formulaInfo.measureFormula[t].PolishNotation = arrayNot\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tresText = resText.replace(/\\&amp;/g, '&').replace(/\\&lt;/g, '<').replace(/\\&gt;/g, '>').replace(/\\&apos;/g, '\\'').replace(/\\&quot/g, '\\\"')\r\n\t\t\t\t\tvar res = OATgetDataFromXMLOldFormat(resText, dataFields, self.OrderFildsHidden)\r\n\t\t\t\t\tself.GeneralDataRows = res[0]\r\n\t\t\t\t\tself.recordForFormula = res[1]\r\n\t\t\t\t\tself.allData = self.GeneralDataRows\r\n\r\n\t\t\t\t\tvar prevConditions = jQuery.extend(true, [], self.conditions);\r\n\t\t\t\t\tself.GeneralDistinctValues = [];\r\n\t\t\t\t\tfor (var t = 0; t < self.conditions.length; t++) {\r\n\t\t\t\t\t\tif (self.conditions[t]) {\r\n\t\t\t\t\t\tself.GeneralDistinctValues[t] = []\r\n\t\t\t\t\t\tfor (var i = 0; i < self.allData.length; i++) {\r\n\t\t\t\t\t\t\tvar value = self.allData[i][t];\r\n\t\t\t\t\t\t\tif (value == undefined) {\r\n\t\t\t\t\t\t\t\tvalue = \" \";\r\n\t\t\t\t\t\t\t\tself.allData[i][index] = \" \";\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (self.conditions[t].distinctValues.indexOf(value) == -1) {\r\n\t\t\t\t\t\t\t\tself.conditions[t].distinctValues.push(value);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (self.GeneralDistinctValues[t].indexOf(value) == -1) {\r\n\t\t\t\t\t\t\t\tself.GeneralDistinctValues[t].push(value);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\tself.sort(self.conditions[t], t);\r\n\t\t\t\t\t\t} catch (ERROR) { }\r\n\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tself.applyFilters();\r\n\t\t\t\t\tself.createAggStructure();\r\n\t\t\t\t\tself.fillAggStructure();\r\n\t\t\t\t\tself.checkAggStructure();\r\n\t\t\t\t\t//self.count();\r\n\r\n\t\t\t\t\tvar FileName = self.query\r\n\t\t\t\t\tif (FileName == \"\") {\r\n\t\t\t\t\t\tFileName = \"Query\"\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\tFileName = self.controlName.split(\"_\")[0]\r\n\t\t\t\t\t\t} catch (error) { }\r\n\t\t\t\t\t}\r\n\t\t\t\t\tOAT.GenerateExcelOutput(FileName, self, measures);\r\n\r\n\t\t\t\t\tstr = self.ExportToXML();\r\n\t\t\t\t\tself.GeneralDataRows = []; self.allData = []; self.filteredData = []; self.GeneralDistinctValues = [];\r\n\t\t\t\t\tself.conditions = prevConditions;\r\n\r\n\t\t\t\t\t//quitar formulas averages\r\n\t\t\t\t\tfor (var t = 0; t < measures.length; t++) {\r\n\t\t\t\t\t\tif (measures[t].getAttribute(\"aggregation\") == \"average\") {\r\n\t\t\t\t\t\t\tself.formulaInfo.measureFormula[t] = { hasFormula: false };\r\n\t\t\t\t\t\t\tself.formulaInfo.cantFormulaMeasures--;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\tthis.getFilteredDataXML = function (serverData) {\r\n\t\t\t\r\n\t\t\t\t//var temp = self.QueryViewerCollection[self.IdForQueryViewerCollection].getPivottableDataSync();\r\n\t\t\t\ttemp = serverData.replace(/\\&amp;/g, '&').replace(/\\&lt;/g, '<').replace(/\\&gt;/g, '>').replace(/\\&apos;/g, '\\'').replace(/\\&quot/g, '\\\"');\r\n\t\t\t\tvar stringRecord = temp.split(\"<Record>\")\r\n\r\n\t\t\t\tvar tempData = [];\r\n\t\t\t\tfor (var i = 1; i < stringRecord.length; i++) {\r\n\t\t\t\t\tvar recordData = [];\r\n\t\t\t\t\tvar fullRecordData = [];\r\n\t\t\t\t\tvar visibleData = [];\r\n\t\t\t\t\tfor (var j = 0; j < self.pageData.dataFields.length; j++) {\r\n\t\t\t\t\t\trecordData[j] = \"#NuN#\"\r\n\t\t\t\t\t\tvar dt = stringRecord[i].split(\"<\" + self.pageData.dataFields[j] + \">\")\r\n\t\t\t\t\t\tif (dt.length > 1) {\r\n\t\t\t\t\t\t\tvar at = dt[1].split(\"</\" + self.pageData.dataFields[j] + \">\")\r\n\t\t\t\t\t\t\t/*var rp = at[0].replace(/^\\s+|\\s+$/g, '')\r\n\t\t\t\t\t\t\trecordData[j] = (rp != \"\") ? rp : undefined*/\r\n\t\t\t\t\t\t\trecordData[j] = at[0]\r\n\t\t\t\t\t\t\tfullRecordData[j] = recordData[j]\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tfor (var t=0; t< self.initMetadata.Dimensions.length; t++){\r\n\t\t\t\t\t\t\t\tif (self.initMetadata.Dimensions[t].dataField == self.pageData.dataFields[j]){\r\n\t\t\t\t\t\t\t\t\tvar displayName = self.initMetadata.Dimensions[t].displayName;\r\n\t\t\t\t\t\t\t\t\tif (self.headerRow.indexOf(displayName) != -1){\r\n\t\t\t\t\t\t\t\t\t\tvisibleData.push(at[0])\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (j >= self.initMetadata.Dimensions.length){\r\n\t\t\t\t\t\t\t\tvisibleData.push(at[0])\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (stringRecord[i].indexOf(\"<\" + self.pageData.dataFields[j] + \"/>\") >= 0) {\r\n\t\t\t\t\t\t\t\trecordData[j] = \"\"\r\n\t\t\t\t\t\t\t\tfullRecordData[j] = \"\"\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (self.filterDataXMLOK(visibleData)) {\r\n\t\t\t\t\t\ttempData.push(recordData);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//var dataStr = '<Table>\\n'\r\n\t\t\t\tvar dataStr = '<Recordset RecordCount=\\\"' + tempData.length + '\\\" PageCount=\\\"1\\\">\\n';\r\n\t\t\t\tdataStr = dataStr + '<Page PageNumber=\\\"1\\\">\\n';\r\n\r\n\t\t\t\tfor (var i = 0; i < tempData.length; i++) {\r\n\t\t\t\t\tdataStr = dataStr + '  <Record>\\n'\r\n\r\n\t\t\t\t\tfor (var iCV = 0; iCV < self.initMetadata.DataFields.length; iCV++) {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tvar dataField = self.initMetadata.DataFields[iCV]\r\n\t\t\t\t\t\tdataStr = dataStr + '    <' + dataField + '>'\r\n\t\t\t\t\t\tdataStr = dataStr + (tempData[i][iCV] || '').replace(/\\&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\"/g, '&quot;').replace(/'/g, '&#x27;');\r\n\t\t\t\t\t\tdataStr = dataStr + '</' + dataField + '>\\n'\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfor (var iCV = 0; iCV < measures.length; iCV++) {\r\n\t\t\t\t\t\tdataStr = dataStr + '    <' + measures[iCV].getAttribute(\"dataField\") + '>'\r\n\t\t\t\t\t\tdataStr = dataStr + (tempData[i][iCV + self.initMetadata.DataFields.length] || '').replace(/\\&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\"/g, '&quot;').replace(/'/g, '&#x27;');\r\n\t\t\t\t\t\tdataStr = dataStr + '</' + measures[iCV].getAttribute(\"dataField\") + '>\\n'\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tdataStr = dataStr + '  </Record>\\n'\r\n\t\t\t\t}\r\n\r\n\t\t\t\tdataStr = dataStr + '</Page>\\n</Recordset>';\r\n\t\t\t\treturn dataStr\r\n\t\t\t\r\n\t\t}\r\n\r\n\t\tthis.getMetadataXML = function () {\r\n\t\t\txml = '<OLAPCube format=\"' + this.defaultPicture.getAttribute(\"format\") + '\" thousandsSeparator=\"' + this.defaultPicture.getAttribute(\"thousandsSeparator\") + '\" decimalSeparator=\"' + this.defaultPicture.getAttribute(\"decimalSeparator\") + '\" dateFormat=\"' + this.defaultPicture.getAttribute(\"dateFormat\") + '\">'\r\n\r\n\t\t\tvar forMetadatacolumns = this.columns;\r\n\t\t\tif (self.initMetadata.Metadata) {\r\n\t\t\t\tvar xmlDoc = jQuery.parseXML(self.initMetadata.Metadata);\r\n\t\t\t\tforMetadatacolumns = []\r\n\t\t\t\tforMetadatacolumns = xmlDoc.getElementsByTagName(\"OLAPDimension\");\r\n\t\t\t}\r\n\r\n\t\t\tvar hiddenPos = 1\r\n\t\t\t\r\n\t\t\tvar rowPos = 0; var cantRowHidden = 0;\r\n\t\t\tvar colPos = 0; var cantColHidden = 0;\r\n\t\t\tvar pagePos = 0; var cantPageHidden = 0;\r\n\t\t\tfor (var iCV = 0; iCV < forMetadatacolumns.length; iCV++) {\r\n\t\t\t\tvar conPos = iCV;\r\n\t\t\t\tif (self.initMetadata.Metadata) {\r\n\t\t\t\t\tconPos = -1;\r\n\t\t\t\t\tfor (var c = 0; c < self.conditions.length; c++) {\r\n\t\t\t\t\t\tif (self.conditions[c].dataField == self.initMetadata.Dimensions[iCV].dataField) {\r\n\t\t\t\t\t\t\tconPos = c;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\txml = xml + '<OLAPDimension>'\r\n\r\n\t\t\t\txml = xml + '<name>' + forMetadatacolumns[iCV].getAttribute(\"name\") + '</name> '\r\n\t\t\t\txml = xml + '<displayName>' + forMetadatacolumns[iCV].getAttribute(\"displayName\") + '</displayName> ';\r\n\t\t\t\txml = xml + '<description>' + forMetadatacolumns[iCV].getAttribute(\"description\") + '</description> ';\r\n\t\t\t\txml = xml + '<dataField>' + forMetadatacolumns[iCV].getAttribute(\"dataField\") + '</dataField> ';\r\n\t\t\t\txml = xml + '<dataType>' + forMetadatacolumns[iCV].getAttribute(\"dataType\") + '</dataType> ';\r\n\t\t\t\t\r\n\t\t\t\tif ((self.initMetadata.Dimensions) && (!self.initMetadata.Dimensions[iCV].Visible)) {\r\n\t\t\t\t\txml = xml + '<hidden>true</hidden>'\r\n\t\t\t\t}\r\n\r\n\t\t\t\t\r\n\t\t\t\txml = xml + '<axis>'\r\n\t\t\t\tvar pos = 0;\r\n\t\t\t\tvar defaultPos = \"\";\r\n\t\t\t\t\tif (conPos == -1) {\r\n\t\t\t\t\t\tif (forMetadatacolumns[iCV].getAttribute(\"visible\").toLowerCase() != \"never\"){\r\n\t\t\t\t\t\t\txml = xml + forMetadatacolumns[iCV].getAttribute(\"axis\").toLowerCase()\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tvar type = self.initMetadata.Dimensions[iCV].defaultPosition \r\n\t\t\t\t\t\t\tif (type == \"Rows\") \r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tcantRowHidden=cantRowHidden + 1\r\n\t\t\t\t\t\t\t\tpos = rowPos + 1\r\n\t\t\t\t\t\t\t\trowPos = pos\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (type == \"Columns\")\r\n\t\t\t\t\t\t\t{ \r\n\t\t\t\t\t\t\t\tcantColHidden=cantColHidden + 1\r\n\t\t\t\t\t\t\t\tpos = colPos + 1\r\n\t\t\t\t\t\t\t\tcolPos = pos\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (type == \"Pages\") \r\n\t\t\t\t\t\t\t{ \r\n\t\t\t\t\t\t\t\tcantPageHidden=cantPageHidden + 1\r\n\t\t\t\t\t\t\t\tpos = pagePos + 1\r\n\t\t\t\t\t\t\t\tpagePos = pos\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\txml = xml + \"\"\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else if (self.rowConditions.indexOf(conPos) != -1) {\r\n\t\t\t\t\t\txml = xml + 'rows';\r\n\t\t\t\t\t\tpos = self.rowConditions.indexOf(conPos) + 1 + cantRowHidden\r\n\t\t\t\t\t\trowPos = pos\r\n\t\t\t\t\t\tdefaultPos = 'rows';\r\n\t\t\t\t\t} else if (self.colConditions.indexOf(conPos) != -1) {\r\n\t\t\t\t\t\txml = xml + 'columns';\r\n\t\t\t\t\t\tpos = self.colConditions.indexOf(conPos) + 1 + cantColHidden\r\n\t\t\t\t\t\tcolPos = pos;\r\n\t\t\t\t\t\tdefaultPos = 'columns'\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\txml = xml + 'pages';\r\n\t\t\t\t\t\tpos = self.filterIndexes.indexOf(conPos) + 1 + cantPageHidden\r\n\t\t\t\t\t\tpagePos = pos;\r\n\t\t\t\t\t\tdefaultPos = 'pages'\r\n\t\t\t\t\t}\r\n\t\t\t\r\n\t\t\t\t\r\n\t\t\t\txml = xml + '</axis> '\r\n\t\t\t\t\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\tif (forMetadatacolumns[iCV].getAttribute(\"visible\").toLowerCase() != \"never\"){\r\n\t\t\t\t\txml = xml + '<position>' + pos + '</position> ';\r\n\t\t\t\t} else {\r\n\t\t\t\t\txml = xml + '<position/>'\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\r\n\t\t\t\tvar summarize = forMetadatacolumns[iCV].getAttribute(\"summarize\");\r\n\t\t\t\tif (conPos >= 0) {\r\n\t\t\t\t\tsummarize = (self.conditions[conPos].subtotals) ? \"yes\" : \"no\";\r\n\t\t\t\t}\r\n\r\n\t\t\t\txml = xml + '<summarize>' + summarize + '</summarize> ';\r\n\t\t\t\txml = xml + '<align>' + forMetadatacolumns[iCV].getAttribute(\"align\") + '</align> ';\r\n\r\n\t\t\t\tif (forMetadatacolumns[iCV].getAttribute(\"picture\") === \"\") {\r\n\t\t\t\t\txml = xml + '<picture/> '\r\n\t\t\t\t} else {\r\n\t\t\t\t\txml = xml + '<picture>' + forMetadatacolumns[iCV].getAttribute(\"picture\") + '</picture> ';\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (forMetadatacolumns[iCV].getAttribute(\"picture\") === \"\") {\r\n\t\t\t\t\txml = xml + '<format/> ';\r\n\t\t\t\t} else {\r\n\t\t\t\t\txml = xml + '<format>' + forMetadatacolumns[iCV].getAttribute(\"format\") + '</format> ';\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar prevConPos = -1;\r\n\t\t\t\tif (self.initMetadata.Metadata) {\r\n\t\t\t\t\tprevConPos = -1;\r\n\t\t\t\t\tfor (var c = 0; c < self.initMetadata.Conditions.length; c++) {\r\n\t\t\t\t\t\tif (self.initMetadata.Conditions[c].dataField == self.initMetadata.Dimensions[iCV].dataField) {\r\n\t\t\t\t\t\t\tprevConPos = c;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tif (forMetadatacolumns[iCV].getAttribute(\"visible\").toLowerCase() != \"never\"){\r\n\t\t\t\t\tvar sortValue = (conPos > -1) ? self.conditions[conPos].sort : (prevConPos > - 1) ? self.initMetadata.Conditions[prevConPos].sort : \"metadata\";\r\n\t\t\t\t\tif (sortValue == \"metadata\") {\r\n\t\t\t\t\t\txml = xml + '<order>' + ((forMetadatacolumns[iCV].getAttribute(\"order\") != \"\") ? forMetadatacolumns[iCV].getAttribute(\"order\") : 'Ascending') + '</order> '\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (sortValue == 1)\r\n\t\t\t\t\t\t\txml = xml + '<order>Ascending</order> '\r\n\t\t\t\t\t\telse if (sortValue == -1)\r\n\t\t\t\t\t\t\txml = xml + '<order>Descending</order> '\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\txml = xml + '<order>Custom</order> '\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\txml = xml + '<order>' + forMetadatacolumns[iCV].getAttribute(\"order\") + '</order> '\r\n\t\t\t\t}\r\n\t\t\t\txml = xml + '<customOrder/> ';\r\n\r\n\t\t\t\txml = xml + '<filterType>'\r\n\r\n\t\t\t\tvar blackList = (conPos > -1) ? self.conditions[conPos].blackList : (prevConPos > - 1) ? self.initMetadata.Conditions[prevConPos].blackList : [];\r\n\t\t\t\t\r\n\t\t\t\tif (blackList.length == 0) {\r\n\t\t\t\t\tif ((conPos > -1) && (self.conditions[conPos].defaultAction == \"Exclude\")) {\r\n\t\t\t\t\t\tif (self.conditions[conPos].visibles.length == 0)   \r\n\t\t\t\t\t\t\txml = xml + 'HideAllValues';\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\txml = xml + 'ShowAllValues'\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\txml = xml + 'ShowAllValues';\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\txml = xml + 'ShowSomeValues';\r\n\t\t\t\t}\r\n\r\n\t\t\t\txml = xml + '</filterType>'\r\n\r\n\t\t\t\txml = xml + '<include> ';\r\n\r\n\t\t\t\tvar findex = (conPos > -1) ? self.filterIndexes.indexOf(conPos) : -1;\r\n\t\t\t\tif ((findex != -1) && (self.filterDiv.selects.length > findex) && (self.filterDiv.selects[findex].value != \"[all]\")) {\r\n\t\t\t\t\t\txml = xml + '<value>' + self.filterDiv.selects[findex].value + '</value> ';\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar distinctValues = (conPos > -1) ? self.conditions[conPos].distinctValues : (prevConPos > - 1) ? self.initMetadata.Conditions[prevConPos].distinctValues : [];\r\n\t\t\t\t\tif (!(((conPos > -1) && (self.conditions[conPos].defaultAction == \"Exclude\")) && (blackList.length == 0))) {\r\n\t\t\t\t\t\tfor (var val = 0; val < distinctValues.length; val++) {\r\n\t\t\t\t\t\t\tif (blackList.indexOf(distinctValues[val]) === -1) {\r\n\t\t\t\t\t\t\t\txml = xml + '<value>' + distinctValues[val] + '</value> ';\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\txml = xml + '<value>TOTAL</value> </include>'\r\n\r\n\t\t\t\txml = xml + '<collapseType>'\r\n\r\n\t\t\t\tvar collapsedValues = (conPos > -1) ? self.conditions[conPos].collapsedValues : (prevConPos > - 1) ? self.initMetadata.Conditions[prevConPos].collapsedValues : [];\r\n\t\t\t\tif ((collapsedValues == undefined) || (collapsedValues.length == 0)) {\r\n\t\t\t\t\txml = xml + 'ExpandAllValues'\r\n\t\t\t\t\txml = xml + '</collapseType>'\r\n\t\t\t\t} else {\r\n\t\t\t\t\txml = xml + 'ExpandSomeValues'\r\n\t\t\t\t\txml = xml + '</collapseType>'\r\n\t\t\t\t\tvar distinctValues = [];\r\n\t\t\t\t\t\r\n\t\t\t\t\tdistinctValues = (conPos > -1) ? self.conditions[conPos].distinctValues : (prevConPos > - 1) ? self.initMetadata.Conditions[prevConPos].distinctValues : [];\r\n\t\t\t\t\t\r\n\t\t\t\t\txml = xml + '<includeExpand> ';\r\n\r\n\t\t\t\t\tfor (var val = 0; val < distinctValues.length; val++) {\r\n\t\t\t\t\t\tif ((distinctValues[val] != undefined) && (collapsedValues.indexOf(distinctValues[val]) == -1)) {\r\n\t\t\t\t\t\t\txml = xml + '<value>' + distinctValues[val] + '</value>'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\txml = xml + '</includeExpand> ';\r\n\t\t\t\t}\r\n\r\n\t\t\t\txml = xml + '</OLAPDimension>'\r\n\t\t\t}\r\n\r\n\t\t\tvar forMetadatameasures = measures;\r\n\t\t\tif (self.initMetadata.Metadata) {\r\n\t\t\t\tvar xmlDoc = jQuery.parseXML(self.initMetadata.Metadata);\r\n\t\t\t\tforMetadatameasures = []\r\n\t\t\t\tforMetadatameasures = xmlDoc.getElementsByTagName(\"OLAPMeasure\");\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tvar measurePosition = rowPos;\r\n\t\t\tfor (var iCV = 0; iCV < forMetadatameasures.length; iCV++) {\r\n\t\t\t\txml = xml + '<OLAPMeasure> ';\r\n\r\n\t\t\t\txml = xml + '<name>' + forMetadatameasures[iCV].getAttribute(\"name\") + '</name> '\r\n\t\t\t\txml = xml + '<displayName>' + forMetadatameasures[iCV].getAttribute(\"displayName\") + '</displayName> ';\r\n\t\t\t\txml = xml + '<description>' + forMetadatameasures[iCV].getAttribute(\"description\") + '</description> ';\r\n\t\t\t\txml = xml + '<dataField>' + forMetadatameasures[iCV].getAttribute(\"dataField\") + '</dataField> ';\r\n\t\t\t\txml = xml + '<dataType>' + forMetadatameasures[iCV].getAttribute(\"dataType\") + '</dataType> ';\r\n\t\t\t\txml = xml + '<defaultAggregator>' + forMetadatameasures[iCV].getAttribute(\"defaultAggregator\") + '</defaultAggregator> ';\r\n\t\t\t\txml = xml + '<validAggregators>' + forMetadatameasures[iCV].getAttribute(\"validAggregators\") + '</validAggregators> ';\r\n\t\t\t\txml = xml + '<summarize>' + forMetadatameasures[iCV].getAttribute(\"summarize\") + '</summarize> ';\r\n\r\n\t\t\t\tif (forMetadatameasures[iCV].getAttribute(\"format\") === \"\") {\r\n\t\t\t\t\txml = xml + '<format/> ';\r\n\t\t\t\t} else {\r\n\t\t\t\t\txml = xml + '<format>' + forMetadatameasures[iCV].getAttribute(\"format\") + '</format> ';\r\n\t\t\t\t}\r\n\r\n\t\t\t\txml = xml + '<align>' + forMetadatameasures[iCV].getAttribute(\"align\") + '</align> ';\r\n\r\n\t\t\t\tif (forMetadatameasures[iCV].getAttribute(\"picture\") === \"\") {\r\n\t\t\t\t\txml = xml + '<picture/> '\r\n\t\t\t\t} else {\r\n\t\t\t\t\txml = xml + '<picture>' + forMetadatameasures[iCV].getAttribute(\"picture\") + '</picture> ';\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ((self.initMetadata.Measures) && (!self.initMetadata.Measures[iCV].Visible)) {\r\n\t\t\t\t\txml = xml + '<hidden>true</hidden>'\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (forMetadatameasures[iCV].getAttribute(\"visible\").toLowerCase() != \"never\"){\r\n\t\t\t\t\tmeasurePosition = measurePosition + 1;\r\n\t\t\t\t\txml = xml + '<position>' + measurePosition + '</position> ';\r\n\t\t\t\t} else {\r\n\t\t\t\t\txml = xml + '<position/>'\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\txml = xml + '</OLAPMeasure>';\r\n\t\t\t}\r\n\r\n\t\t\txml = xml + '</OLAPCube>'\r\n\t\t\txml = xml.replace(/\\&/g, \"&amp;\");\r\n\t\t\treturn xml\r\n\t\t}\r\n\r\n\t\tthis.createXMLMetadata = function () {\r\n\t\t\tvar xml = '<OLAPCube format=\"' + this.defaultPicture.getAttribute(\"format\") + '\" thousandsSeparator=\"' + this.defaultPicture.getAttribute(\"thousandsSeparator\") + '\" decimalSeparator=\"' + this.defaultPicture.getAttribute(\"decimalSeparator\") + '\" dateFormat=\"' + this.defaultPicture.getAttribute(\"dateFormat\") + '\">';\r\n\r\n\t\t\tfor (var iCV = 0; iCV < this.columns.length; iCV++) {\r\n\t\t\t\tif ((this.conditions[iCV] != false) && (this.conditions[iCV] != undefined)) {\r\n\t\t\t\t\txml = xml + '<OLAPDimension> ';\r\n\r\n\t\t\t\t\txml = xml + '<name>' + this.columns[iCV].getAttribute(\"name\") + '</name> '\r\n\t\t\t\t\txml = xml + '<displayName>' + this.columns[iCV].getAttribute(\"displayName\") + '</displayName> ';\r\n\t\t\t\t\txml = xml + '<description>' + this.columns[iCV].getAttribute(\"description\") + '</description> ';\r\n\t\t\t\t\txml = xml + '<dataField>' + this.columns[iCV].getAttribute(\"dataField\") + '</dataField> ';\r\n\t\t\t\t\txml = xml + '<dataType>' + this.columns[iCV].getAttribute(\"dataType\") + '</dataType> ';\r\n\t\t\t\t\txml = xml + '<summarize>' + this.columns[iCV].getAttribute(\"summarize\") + '</summarize> ';\r\n\t\t\t\t\txml = xml + '<align>' + this.columns[iCV].getAttribute(\"align\") + '</align> ';\r\n\r\n\t\t\t\t\tif (this.columns[iCV].getAttribute(\"picture\") === \"\") {\r\n\t\t\t\t\t\txml = xml + '<picture/> '\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\txml = xml + '<picture>' + this.columns[iCV].getAttribute(\"picture\") + '</picture> ';\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (this.columns[iCV].getAttribute(\"picture\") === \"\") {\r\n\t\t\t\t\t\txml = xml + '<format/> ';\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\txml = xml + '<format>' + this.columns[iCV].getAttribute(\"format\") + '</format> ';\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (this.conditions[iCV].sort === 1)\r\n\t\t\t\t\t\txml = xml + '<order>ascending</order> '\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\txml = xml + '<order>descending</order> '\r\n\t\t\t\t\txml = xml + '<customOrder/> ';\r\n\t\t\t\t\txml = xml + '<include> ';\r\n\r\n\t\t\t\t\tvar findex = self.filterIndexes.indexOf(iCV);\r\n\t\t\t\t\tif ((findex != -1) && (self.filterDiv.selects[findex].value != \"[all]\")) {\r\n\t\t\t\t\t\tif (this.conditions[iCV].blackList.indexOf(self.filterDiv.selects[findex].value) === -1) {\r\n\t\t\t\t\t\t\txml = xml + '<value>' + self.filterDiv.selects[findex].value.toString().trimpivot() + '</value> ';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (self.conditions[iCV].state != \"none\") {\r\n\t\t\t\t\t\t\t\tfor (var val = 0; val < this.conditions[iCV].distinctValues.length; val++) {\r\n\t\t\t\t\t\t\t\t\tif (this.conditions[iCV].blackList.indexOf(this.conditions[iCV].distinctValues[val]) === -1) {\r\n\t\t\t\t\t\t\t\t\t\txml = xml + '<value>' + this.conditions[iCV].distinctValues[val].toString().trimpivot() + '</value> ';\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\txml = xml + '<value>TOTAL</value> </include> <collapse/> ';\r\n\r\n\t\t\t\t\txml = xml + '<hide> '\r\n\t\t\t\t\t\r\n\t\t\t\t\t\tif (self.conditions[iCV].state == \"none\") {\r\n\t\t\t\t\t\t\tfor (var val = 0; val < this.conditions[iCV].distinctValues.length; val++) {\r\n\t\t\t\t\t\t\t\txml = xml + '<value>' + this.conditions[iCV].distinctValues[val].toString().trimpivot() + '</value> ';\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else if (self.conditions[iCV].state != \"all\") {\r\n\t\t\t\t\t\t\tfor (var yu = 0; yu < this.conditions[iCV].blackList.length; yu++) {\r\n\t\t\t\t\t\t\t\txml = xml + '<value>' + this.conditions[iCV].blackList[yu].toString().trimpivot() + '</value> ';\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\txml = xml + '</hide> '\r\n\r\n\t\t\t\t\tif (self.rowConditions.indexOf(iCV) != -1) {\r\n\t\t\t\t\t\txml = xml + '<condition>row</condition> ';\r\n\t\t\t\t\t\txml = xml + '<filterbar>no</filterbar> ';\r\n\t\t\t\t\t\txml = xml + '<position>' + self.rowConditions.indexOf(iCV) + '</position>'\r\n\t\t\t\t\t} else if (self.colConditions.indexOf(iCV) != -1) {\r\n\t\t\t\t\t\txml = xml + '<condition>col</condition> ';\r\n\t\t\t\t\t\txml = xml + '<filterbar>no</filterbar> ';\r\n\t\t\t\t\t\txml = xml + '<position>' + self.colConditions.indexOf(iCV) + '</position>'\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\txml = xml + '<condition>none</condition> ';\r\n\t\t\t\t\t\txml = xml + '<filterbar>yes</filterbar> ';\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\txml = xml + '<filterdivs> ';\r\n\t\t\t\t\tif (findex != -1) {\r\n\t\t\t\t\t\txml = xml + '<value>' + self.filterDiv.selects[findex].value.toString().trimpivot() + '</value> ';\r\n\t\t\t\t\t}\r\n\t\t\t\t\txml = xml + '</filterdivs> ';\r\n\r\n\t\t\t\t\txml = xml + '<restoreview>no</restoreview> ';\r\n\t\t\t\t\txml = xml + ' </OLAPDimension>';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfor (var iCV = 0; iCV < measures.length; iCV++) {\r\n\t\t\t\txml = xml + '<OLAPMeasure> ';\r\n\r\n\t\t\t\txml = xml + '<name>' + measures[iCV].getAttribute(\"name\") + '</name> '\r\n\t\t\t\txml = xml + '<displayName>' + measures[iCV].getAttribute(\"displayName\") + '</displayName> ';\r\n\t\t\t\txml = xml + '<description>' + measures[iCV].getAttribute(\"description\") + '</description> ';\r\n\t\t\t\txml = xml + '<dataField>' + measures[iCV].getAttribute(\"dataField\") + '</dataField> ';\r\n\t\t\t\txml = xml + '<dataType>' + measures[iCV].getAttribute(\"dataType\") + '</dataType> ';\r\n\t\t\t\txml = xml + '<defaultAggregator>' + measures[iCV].getAttribute(\"defaultAggregator\") + '</defaultAggregator> ';\r\n\t\t\t\txml = xml + '<validAggregators>' + measures[iCV].getAttribute(\"validAggregators\") + '</validAggregators> ';\r\n\t\t\t\txml = xml + '<summarize>' + measures[iCV].getAttribute(\"summarize\") + '</summarize> ';\r\n\r\n\t\t\t\tif (measures[iCV].getAttribute(\"format\") === \"\") {\r\n\t\t\t\t\txml = xml + '<format/> ';\r\n\t\t\t\t} else {\r\n\t\t\t\t\txml = xml + '<format>' + measures[iCV].getAttribute(\"format\") + '</format> ';\r\n\t\t\t\t}\r\n\r\n\t\t\t\txml = xml + '<align>' + measures[iCV].getAttribute(\"align\") + '</align> ';\r\n\r\n\t\t\t\tif (measures[iCV].getAttribute(\"picture\") === \"\") {\r\n\t\t\t\t\txml = xml + '<picture/> '\r\n\t\t\t\t} else {\r\n\t\t\t\t\txml = xml + '<picture>' + measures[iCV].getAttribute(\"picture\") + '</picture> ';\r\n\t\t\t\t}\r\n\r\n\t\t\t\txml = xml + ' </OLAPMeasure>';\r\n\r\n\t\t\t}\r\n\t\t\txml = xml + \"</OLAPCube>\";\r\n\r\n\t\t\treturn xml;\r\n\t\t}\r\n\r\n\t\tthis.ExportToXML = function () {\r\n\t\t\tvar xml = '<EXPORT format=\"XML\" type=\"pivot\">';\r\n\t\t\txml = xml + '<METADATA>';\r\n\t\t\tfor (var iCV = 0; iCV < this.columns.length; iCV++) {\r\n\r\n\t\t\t\tvar position = 'row';\r\n\t\t\t\tif (self.rowConditions.indexOf(iCV) != -1) {\r\n\t\t\t\t\tposition = 'row';\r\n\t\t\t\t} else if (self.colConditions.indexOf(iCV) != -1) {\r\n\t\t\t\t\tposition = 'column';\r\n\t\t\t\t} else {\r\n\t\t\t\t\tposition = 'filter';\r\n\t\t\t\t}\r\n\r\n\t\t\t\txml = xml + '<OLAPDimension ';\r\n\t\t\t\txml = xml + 'name=\"' + this.columns[iCV].getAttribute(\"dataField\") + '\" ';\r\n\t\t\t\txml = xml + 'label=\"' + this.columns[iCV].getAttribute(\"displayName\") + '\" ';\r\n\t\t\t\txml = xml + 'picture=\"' + this.columns[iCV].getAttribute(\"picture\") + '\" ';\r\n\t\t\t\txml = xml + 'datatype=\"' + this.columns[iCV].getAttribute(\"dataType\") + '\" ';\r\n\t\t\t\txml = xml + 'showAll=\"true\" ';\r\n\t\t\t\txml = xml + 'position=\"' + position + '\">';\r\n\r\n\t\t\t\tif ((this.conditions[iCV] != undefined) && (this.conditions[iCV].distinctValues != undefined)) {\r\n\t\t\t\t\tfor (var val = 0; val < this.conditions[iCV].distinctValues.length; val++) {\r\n\t\t\t\t\t\txml = xml + '<VALUE CHECKED=';\r\n\t\t\t\t\t\tif (this.conditions[iCV].blackList.indexOf(this.conditions[iCV].distinctValues[val]) === -1) {\r\n\t\t\t\t\t\t\txml = xml + '\"true\"';\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\txml = xml + '\"false\"';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (this.conditions[iCV].collapsedValues.indexOf(this.conditions[iCV].distinctValues[val]) == -1) {\r\n\t\t\t\t\t\t\txml = xml + ' COLLAPSED=\"false\">'\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\txml = xml + ' COLLAPSED=\"true\">'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\txml = xml + this.conditions[iCV].distinctValues[val] + '</VALUE>';\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\txml = xml + '</OLAPDimension>';\r\n\t\t\t}\r\n\r\n\t\t\tfor (var iCV = 0; iCV < measures.length; iCV++) {\r\n\t\t\t\txml = xml + '<OLAPMeasure ';\r\n\t\t\t\txml = xml + 'name=\"' + measures[iCV].getAttribute(\"dataField\") + '\" ';\r\n\t\t\t\txml = xml + 'label=\"' + measures[iCV].getAttribute(\"displayName\") + '\" ';\r\n\t\t\t\txml = xml + 'picture=\"' + measures[iCV].getAttribute(\"picture\") + '\" ';\r\n\t\t\t\txml = xml + 'datatype=\"' + measures[iCV].getAttribute(\"dataType\") + '\" ';\r\n\t\t\t\txml = xml + 'showAll=\"true\" ';\r\n\t\t\t\txml = xml + 'aggregator=\"sum\"/>';\r\n\t\t\t}\r\n\r\n\t\t\txml = xml + '</METADATA>';\r\n\r\n\t\t\txml = xml + '<FLATDATA>';\r\n\t\t\tfor (var i = 0; i < this.allDataWithoutSort.length; i++) {\r\n\t\t\t\txml = xml + '<ROW ';\r\n\t\t\t\tfor (var iCV = 0; iCV < this.columns.length; iCV++) {\r\n\t\t\t\t\txml = xml + this.columns[iCV].getAttribute(\"dataField\") + '=\"' + this.allDataWithoutSort[i][iCV] + '\" ';\r\n\t\t\t\t}\r\n\t\t\t\tfor (var iCV = 0; iCV < measures.length; iCV++) {\r\n\t\t\t\t\txml = xml + measures[iCV].getAttribute(\"dataField\") + '=\"' + this.allDataWithoutSort[i][iCV + this.columns.length] + '\" ';\r\n\t\t\t\t}\r\n\t\t\t\txml = xml + '/>'\r\n\t\t\t}\r\n\t\t\txml = xml + '</FLATDATA>';\r\n\r\n\t\t\txml = xml + '<COLITEMS>' //include measures & dimensions move to columns\r\n\t\t\tvar previuosXml = xml;\r\n\t\t\ttry {\r\n\t\t\t\tvar level = 0;\r\n\t\t\t\tvar maxlevel = this.colConditions.length;\r\n\t\t\t\tif (level === maxlevel) {\r\n\t\t\t\t\tfor (var iCV = 0; iCV < measures.length; iCV++) {\r\n\t\t\t\t\t\txml = xml + '<COLITEM measure=\"' + measures[iCV].getAttribute(\"displayName\") + '\" type=\"\"'\r\n\t\t\t\t\t\txml = xml + '/>';\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlevel++;\r\n\t\t\t\t\tfor (var iCV = 0; iCV < this.colStructure.items.length; iCV++) {\r\n\t\t\t\t\t\txml = xml + this.createXMLCOLITEMS(this.colStructure.items[iCV], level, maxlevel);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} catch (ERROR) {\r\n\t\t\t\txml = previuosXml;\r\n\t\t\t}\r\n\t\t\txml = xml + '</COLITEMS>'\r\n\r\n\t\t\txml = xml + '<ROWITEMS>'\r\n\t\t\tpreviuosXml = xml;\r\n\t\t\ttry {\r\n\t\t\t\tfor (var iCV = 0; iCV < this.rowStructure.items.length; iCV++) {\r\n\t\t\t\t\tvar level = 0;\r\n\t\t\t\t\tvar maxlevel = this.columns.length - this.colConditions.length - this.filterIndexes.length - 1;\r\n\t\t\t\t\tif (maxlevel >= level) {\r\n\t\t\t\t\t\txml = xml + this.createXMLROWITEMS(this.rowStructure.items[iCV], level, maxlevel);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} catch (ERROR) {\r\n\t\t\t\txml = previuosXml;\r\n\t\t\t}\r\n\t\t\txml = xml + '</ROWITEMS>'\r\n\r\n\r\n\t\t\t//add Html info\r\n\t\t\txml = xml + '<HTML>';\r\n\r\n\t\t\txml = xml + '<HEAD>';\r\n\t\t\txml = xml + '<META content=\"text/html; charset=utf-8\" http-equiv=\"Content-Type\"/>';\r\n\r\n\t\t\txml = xml + '<STYLE>';\r\n\r\n\t\t\txml = xml + '.h2title {background-color: #5C5D5F; border-color: #666666; font-family: Verdana; font-weight: normal; font-size: 10pt; height: 44px; color: #E0E0E0;}\\n';\r\n\t\t\txml = xml + '.h2titlewhite {background-color: #ffffff; font-family: Verdana; font-size: 10pt; font-weight: normal; height: 25px; color: black;}\\n';\r\n\t\t\txml = xml + '.even {background-color: #FEFEFE;\tfont-weight: normal; font-family: Verdana; font-size: 10pt;\tpadding: 5px; }\\n';\r\n\t\t\txml = xml + '.h2subtitle {background-color: #5C5D5F; border-color: #666666; font-family: Verdana; font-weight: normal; font-size: 10pt;\theight: 22px; color: #E0E0E0;}\\n';\r\n\t\t\txml = xml + '.gtotal {background-color: #EBEBEB; font-weight: normal; font-family: Verdana; font-size: 10pt;}\\n';\r\n\t\t\txml = xml + '.pivot_table td.total {background-color: #EBEBEB; font-weight: normal;\tfont-family: Verdana; font-size: 10pt;}\\n';\r\n\t\t\txml = xml + '.pivot_table td.subtotal {background-color: #EBEBEB; font-weight: normal;\tfont-family: Verdana; font-size: 10pt;}\\n';\r\n\r\n\t\t\txml = xml + '</STYLE>';\r\n\t\t\txml = xml + '</HEAD>';\r\n\r\n\t\t\txml = xml + '<BODY>';\r\n\t\t\txml = xml + '<TABLE border=\"2\">'\r\n\r\n\t\t\tfor (var i = 0; i < jQuery(\"#\" + self.controlName + \"_\" + self.query + \" tr\").length; i++) {//for every row\r\n\t\t\t\txml = xml + '<TR>';\r\n\r\n\t\t\t\tvar tRow = jQuery(\"#\" + self.controlName + \"_\" + self.query + \" tr\")[i];\r\n\t\t\t\tfor (var j = 0; j < tRow.children.length; j++) {\r\n\t\t\t\t\tvar childText = OAT.removeIconFont(tRow.children[j].textContent).trim();\r\n\t\t\t\t\tvar hidden = tRow.children[j].getAttribute('hidden');\r\n\r\n\t\t\t\t\tvar styleString = \"\";\r\n\t\t\t\t\tif ((tRow.children[j].getAttribute(\"style\") != undefined) && (tRow.children[j].getAttribute(\"style\") != null)) {\r\n\t\t\t\t\t\tstyleString = \" style=\\\"\" + tRow.children[j].getAttribute(\"style\") + \"\\\" \";\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar classString = \"\";\r\n\t\t\t\t\tif ((tRow.children[j].getAttribute(\"class\") != undefined) && (tRow.children[j].getAttribute(\"class\") != null)) {\r\n\t\t\t\t\t\tclassString = \" class=\\\"\" + tRow.children[j].getAttribute(\"class\") + \"\\\" \";\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (hidden === null) {\r\n\t\t\t\t\t\tvar rowSpan = tRow.children[j].getAttribute('rowspan');\r\n\t\t\t\t\t\tvar colSpan = tRow.children[j].getAttribute('colspan');\r\n\t\t\t\t\t\tif (((rowSpan === null) && (colSpan === null)) || (j === tRow.children.length - 1)) {\r\n\t\t\t\t\t\t\txml = xml + '<TD ' + classString + ' ' + styleString + '>' + childText + '</TD>';\r\n\t\t\t\t\t\t} else if (colSpan === null) {\r\n\t\t\t\t\t\t\txml = xml + '<TD ' + classString + \" \" + 'rowspan=\"' + rowSpan + '\" ' + styleString + ' >' + childText + '</TD>';\r\n\t\t\t\t\t\t} else if (rowSpan === null) {\r\n\t\t\t\t\t\t\txml = xml + '<TD ' + classString + \" \" + 'colspan=\"' + colSpan + '\" ' + styleString + ' >' + childText + '</TD>';\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\txml = xml + '<TD ' + classString + \" \" + 'colspan=\"' + colSpan + '\" rowspan=\"' + rowSpan + '\" ' + styleString + ' >' + childText + '</TD>';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\txml = xml + '</TR>';\r\n\t\t\t}\r\n\r\n\r\n\t\t\txml = xml + '</TABLE>';\r\n\r\n\t\t\txml = xml + '</BODY>';\r\n\r\n\t\t\txml = xml + '</HTML>';\r\n\t\t\t//\r\n\t\t\txml = xml + \"</EXPORT>\";\r\n\r\n\t\t\treturn xml.replace(/\\&/g, \"&amp;\");\r\n\r\n\t\t}\r\n\r\n\t\tthis.createXMLROWITEMS = function (item, level, maxlevel) {\r\n\t\t\tvar parentCollapse = ((item.parent == undefined) || (item.parent.collapsed == undefined)) ? false : item.parent.collapsed;\r\n\t\t\tvar str = '<ROWITEM dimension=\"' + columns[level].getAttribute('dataField') + '\" collapsed=\"' + item.collapsed + '\" parentCollapsed=\"' + parentCollapse + '\" value=\"' + item.value + '\" level=\"' + level + '\"'\r\n\t\t\tif (level === maxlevel) {\r\n\t\t\t\treturn str + \"/>\";\r\n\t\t\t} else {\r\n\t\t\t\tlevel++;\r\n\t\t\t\tstr = str + \">\";\r\n\t\t\t\tfor (var i = 0; i < item.items.length; i++) {\r\n\t\t\t\t\tstr = str + this.createXMLROWITEMS(item.items[i], level, maxlevel);\r\n\t\t\t\t}\r\n\t\t\t\tstr = str + '</ROWITEM>'\r\n\t\t\t\treturn str;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.createXMLCOLITEMS = function (item, level, maxlevel) {\r\n\t\t\tvar str = \"\"\r\n\t\t\tif (level === maxlevel) {\r\n\t\t\t\tfor (var iCV = 0; iCV < measures.length; iCV++) {\r\n\t\t\t\t\tstr = str + '<COLITEM measure=\"' + measures[iCV].getAttribute(\"displayName\") + '\" type=\"\">'\r\n\t\t\t\t\tvar inRow = self.rowConditions.length - measures.length + 1;\r\n\t\t\t\t\tstr = str + '<VALITEM dimension=\"' + columns[level - 1 + inRow].getAttribute('dataField') + '\" value=\"' + item.value + '\"/>' //level + cantidad de dimensiones que no estan movidas a las columnas\r\n\t\t\t\t\tvar superItem = item;\r\n\t\t\t\t\twhile (superItem.parent.depth != -1) {\r\n\t\t\t\t\t\tsuperItem = superItem.parent;\r\n\t\t\t\t\t\tstr = str + '<VALITEM dimension=\"' + columns[level - 1 + inRow].getAttribute('dataField') + '\" value=\"' + superItem.value + '\"/>'\r\n\t\t\t\t\t}\r\n\t\t\t\t\tstr = str + '</COLITEM>';\r\n\t\t\t\t}\r\n\t\t\t\treturn str;\r\n\t\t\t} else {\r\n\t\t\t\tlevel++;\r\n\t\t\t\tfor (var i = 0; i < item.items.length; i++) {\r\n\t\t\t\t\tstr = str + this.createXMLCOLITEMS(item.items[i], level, maxlevel);\r\n\t\t\t\t}\r\n\t\t\t\treturn str;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.ExportToExcel = function (fileName) {\r\n\t\t\tvar table = '<table border=\"2\">'\r\n\r\n\t\t\tfor (var i = 0; i < jQuery(\"#\" + self.controlName + \"_\" + self.query + \" tr\").length; i++) {//for every row\r\n\t\t\t\ttable = table + '<tr>';\r\n\r\n\t\t\t\tvar tRow = jQuery(\"#\" + self.controlName + \"_\" + self.query + \" tr\")[i];\r\n\t\t\t\tfor (var j = 0; j < tRow.children.length; j++) {\r\n\t\t\t\t\tvar childText = OAT.removeIconFont(tRow.children[j].textContent.replace(/^\\s+|\\s+$/g, '')).trim();\r\n\t\t\t\t\tvar hidden = tRow.children[j].getAttribute('hidden');\r\n\r\n\t\t\t\t\tvar styleString = \"\";\r\n\t\t\t\t\tif ((tRow.children[j].getAttribute(\"style\") != undefined) && (tRow.children[j].getAttribute(\"style\") != null)) {\r\n\t\t\t\t\t\tstyleString = \" style=\\\"\" + tRow.children[j].getAttribute(\"style\") + \"\\\" \";\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar parseText = \"\"\r\n\t\t\t\t\tvar previusJap = false;\r\n\t\t\t\t\t\r\n\t\t\t\t\tfor (var c = 0; c < childText.length; c++) {\r\n\t\t\t\t\t\tif (childText.charCodeAt(c) < 1000) {\r\n\t\t\t\t\t\t\tif (previusJap) {\r\n\t\t\t\t\t\t\t\tparseText = parseText + \" \" + childText[c];\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tparseText = parseText + childText[c];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tpreviusJap = false;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tvar Hex = childText.charCodeAt(c).toString(16);\r\n\t\t\t\t\t\t\tparseText = parseText + \"&#x\" + Hex;\r\n\t\t\t\t\t\t\tpreviusJap = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\t/*if (self.defaultPicture.getAttribute(\"dateFormat\") == \"YMD\") {\r\n\t\t\t\t\t\tvar count = parseText.match(/\\//igm)\r\n\t\t\t\t\t\tif (count != null && count.length == 2 && parseText.indexOf('o') < 0) {\r\n\t\t\t\t\t\t\tparseText = '=\"' + parseText + '\"'\r\n\t\t\t\t\t\t\tstyleString = ' style=\"width:80px;\" ';\r\n\t\t\t\t\t\t\tif (parseText.indexOf(':') > -1)\r\n\t\t\t\t\t\t\t\tstyleString = ' style=\"width:140px;\" ';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}*/\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (hidden === null) {\r\n\t\t\t\t\t\tvar rowSpan = tRow.children[j].getAttribute('rowspan');\r\n\t\t\t\t\t\tvar colSpan = tRow.children[j].getAttribute('colspan');\r\n\t\t\t\t\t\tif (((rowSpan === null) && (colSpan === null)) || (j === tRow.children.length - 1)) {\r\n\t\t\t\t\t\t\ttable = table + '<td ' + styleString + '>' + parseText + '</td>';\r\n\t\t\t\t\t\t} else if (colSpan === null) {\r\n\t\t\t\t\t\t\ttable = table + '<td rowspan=\"' + rowSpan + '\" ' + styleString + ' >' + parseText + '</td>';\r\n\t\t\t\t\t\t} else if (rowSpan === null) {\r\n\t\t\t\t\t\t\ttable = table + '<td colspan=\"' + colSpan + '\" ' + styleString + ' >' + parseText + '</td>';\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\ttable = table + '<td colspan=\"' + colSpan + '\" rowspan=\"' + rowSpan + '\" ' + styleString + ' >' + parseText + '</td>';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttable = table + '</tr>';\r\n\t\t\t}\r\n\r\n\t\t\ttable = table + '</table>'; //</tbody>\r\n\t\t\t\r\n\t\t\t//add header for special characters \r\n\t\t\tvar header = '<head><meta http-equiv=\"Content-Type\" content=\"text/html;charset=utf-8\"></head><body>'\r\n\t\t\ttable = header + table + '</body>'\r\n\t\t\t\r\n\t\t\tvar dtltbl = table;\r\n\r\n\t\t\tif ((OAT.isSafari()) || (self.isSD)) { //for safari\r\n\t\t\t\twindow.open('data:application/vnd.ms-excel,' + encodeURIComponent(dtltbl));\r\n\t\t\t} else {\r\n\t\t\t\tvar blob = new Blob([dtltbl], { type: \"application/vnd.ms-excel\" });\r\n\t\t\t\tsaveAs(blob, fileName + \".xls\");\r\n\t\t\t} \r\n\r\n\t\t}\r\n\r\n\r\n\t\tthis.lightOn = function () {\r\n\t\t\tfor (var i = 0; i < self.gd.targets.length; i++) {\r\n\t\t\t\tvar elm = self.gd.targets[i][0];\r\n\t\t\t\tif (OAT.isIE()) {\r\n\t\t\t\t\telm.className += \" drag-drop\";\r\n\t\t\t\t} else {\r\n\t\t\t\t\telm.classList.add(\"drag-drop\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.lightOff = function () {\r\n\t\t\tfor (var i = 0; i < self.gd.targets.length; i++) {\r\n\t\t\t\tvar elm = self.gd.targets[i][0];\r\n\t\t\t\ttry {\r\n\t\t\t\t\telm.classList.remove(\"drag-drop\");\r\n\t\t\t\t} catch (error) {\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tself.gd.onFail = self.lightOff;\r\n\r\n\t\tthis.process = function (elm) {\r\n\t\t\tself.lightOn();\r\n\r\n\t\t\tvar spanImageDragDrop = OAT.Dom.create(\"div\");\r\n\t\t\tvar spanImageArrow = OAT.Dom.create(\"div\");\r\n\t\t\tspanImageDragDrop.setAttribute(\"class\", \"drag_drop_indicator\");\r\n\t\t\tspanImageArrow.setAttribute(\"class\", \"drag_drop_arrow\");\r\n\t\t\tOAT.addImageNode(spanImageDragDrop, \"drag_indicator\", \"\");\r\n\t\t\tOAT.addImageNode(spanImageArrow, \"arrow_drop_up\", \"\");\r\n\t\t\telm.className = \"att_drag_drop\";\r\n\t\t\telm.appendChild(spanImageArrow);\r\n\t\t\telm.appendChild(spanImageDragDrop);\r\n\t\t}\r\n\r\n\t\tthis.filterOK = function (row) { \r\n\t\t\tfor (var i = 0; i < self.filterIndexes.length; i++) { \r\n\t\t\t\tvar fi = self.filterIndexes[i]; \r\n\t\t\t\tvar s = self.filterDiv.selects[i]; \r\n\t\t\t\tif (s.selectedIndex && OAT.$v(s) != row[fi]) { return false; }\r\n\t\t\t}\r\n\r\n\r\n\t\t\tfor (var i = 0; i < self.rowConditions.length; i++) { \r\n\t\t\t\tvar value = row[self.rowConditions[i]];\r\n\t\t\t\tvar cond = self.conditions[self.rowConditions[i]];\r\n\t\t\t\tif ((cond.blackList.length > 0) && (cond.blackList.indexOf(value) != -1)) { return false; }\r\n\t\t\t}\r\n\r\n\r\n\t\t\tfor (var i = 0; i < self.colConditions.length; i++) { \r\n\t\t\t\tvar value = row[self.colConditions[i]];\r\n\t\t\t\tvar cond = self.conditions[self.colConditions[i]];\r\n\t\t\t\tif ((cond.blackList.length > 0) && (cond.blackList.indexOf(value) != -1)) { return false; }\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\t\r\n\t\tthis.filterDataXMLOK = function (row) { \r\n\t\t\tfor (var i = 0; i < self.filterIndexes.length; i++) { \r\n\t\t\t\tvar fi = self.filterIndexes[i]; \r\n\t\t\t\tvar s = self.filterDiv.selects[i]; \r\n\t\t\t\tif (s.selectedIndex && OAT.$v(s) != row[fi]) { return false; }\r\n\t\t\t}\r\n\r\n\t\t\tfor (var i = 0; i < self.rowConditions.length; i++) { \r\n\t\t\t\tvar value = row[self.rowConditions[i]];\r\n\t\t\t\tvar cond = self.conditions[self.rowConditions[i]];\r\n\t\t\t\tif (cond.state == \"none\")  { return false; }\r\n\t\t\t\t\r\n\t\t\t\tif (cond.defaultAction == \"Exclude\") {\r\n\t\t\t\t\tif (cond.visibles.indexOf(value) == -1) { return false; }\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (cond.blackList.indexOf(value) != -1) { return false; }\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor (var i = 0; i < self.colConditions.length; i++) { \r\n\t\t\t\tvar value = row[self.colConditions[i]];\r\n\t\t\t\tvar cond = self.conditions[self.colConditions[i]];\r\n\t\t\t\tif (cond.state == \"none\")  { return false; }\r\n\t\t\t\tif (cond.defaultAction == \"Exclude\") {\r\n\t\t\t\t\tif (cond.visibles.indexOf(value) == -1) { return false; }\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (cond.blackList.indexOf(value) != -1) { return false; }\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tthis.sort = function (cond, index) { /* sort distinct values of a condition */\r\n\t\t\tvar sortFunc;\r\n\t\t\tvar coef = cond.sort; if (cond.sort == 0) { coef = 1 } if (cond.sort == 2) { coef = -1 }\r\n\t\t\tvar numSort = function (a, b) {\r\n\t\t\t\tif (a == b) { return 0; }\r\n\t\t\t\treturn coef * (parseInt(a) > parseInt(b) ? 1 : -1);\r\n\t\t\t}\r\n\t\t\tvar dictSort = function (a, b) {\r\n\t\t\t\tif (a == b) { return 0; }\r\n\t\t\t\treturn coef * (a > b ? 1 : -1);\r\n\t\t\t}\r\n\r\n\t\t\tif (cond.distinctValues == undefined) return;\r\n\r\n\t\t\t//new code\r\n\t\t\tvar sortInt = true;\r\n\t\t\tfor (var ival = 0; ival < cond.distinctValues.length; ival++) {\r\n\t\t\t\tif ((sortInt) && (cond.distinctValues[ival] != parseInt(cond.distinctValues[ival]))) {\r\n\t\t\t\t\tsortInt = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (sortInt) { sortFunc = numSort; } else { sortFunc = dictSort; } //decides the type of sorting\r\n\t\t\t//end new code\r\n\t\t\tvar testValue = cond.distinctValues[0];\r\n\r\n\t\t\tif ((cond.sort != 0) && (cond.sort != 2)) {\r\n\t\t\t\tcond.distinctValues.sort(sortFunc);\r\n\t\t\t} else {\r\n\t\t\t\tif ((index != undefined) && (self.columns[index] != undefined)) {\r\n\t\t\t\t\tcond.distinctValues.sort(sortFunc);\r\n\r\n\t\t\t\t\tvar prevValues = [];\r\n\t\t\t\t\tfor (var h = 0; h < cond.distinctValues.length; h++) {\r\n\t\t\t\t\t\tprevValues[h] = cond.distinctValues[h];\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tcond.distinctValues = [];\r\n\t\t\t\t\tif (cond.sort == 0) {\r\n\t\t\t\t\t\tfor (var h = 0; h < self.columns[index].childNodes.length; h++) {\r\n\t\t\t\t\t\t\tif ((self.columns[index].childNodes[h] != undefined) &&\r\n\t\t\t\t\t\t\t\t(self.columns[index].childNodes[h].localName != undefined) &&\r\n\t\t\t\t\t\t\t\t(self.columns[index].childNodes[h].localName === \"customOrder\")) {\r\n\t\t\t\t\t\t\t\tfor (var n = 0; n < self.columns[index].childNodes[h].childNodes.length; n++) {\r\n\t\t\t\t\t\t\t\t\tif (self.columns[index].childNodes[h].childNodes[n].localName == \"Value\") {\r\n\t\t\t\t\t\t\t\t\t\t//cond.distinctValues.push(self.columns[index].childNodes[h].childNodes[n].textContent);\r\n\t\t\t\t\t\t\t\t\t\tvar notTrimValue = self.columns[index].childNodes[h].childNodes[n].textContent\r\n\t\t\t\t\t\t\t\t\t\tfor (var m = 0; m < prevValues.length; m++) {\r\n\t\t\t\t\t\t\t\t\t\t\tif (prevValues[m].trimpivot() == notTrimValue.trimpivot()) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tcond.distinctValues.push(prevValues[m]);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tfor (var h = 0; h < self.columns[index].childNodes.length; h++) {\r\n\t\t\t\t\t\t\tif ((self.columns[index].childNodes[h] != undefined) &&\r\n\t\t\t\t\t\t\t\t(self.columns[index].childNodes[h].localName != undefined) &&\r\n\t\t\t\t\t\t\t\t(self.columns[index].childNodes[h].localName === \"customOrder\")) {\r\n\t\t\t\t\t\t\t\tfor (var n = self.columns[index].childNodes[h].childNodes.length - 1; n >= 0; n--) {\r\n\t\t\t\t\t\t\t\t\tif (self.columns[index].childNodes[h].childNodes[n].localName == \"Value\") {\r\n\t\t\t\t\t\t\t\t\t\t//cond.distinctValues.push(self.columns[index].childNodes[h].childNodes[n].textContent);\r\n\t\t\t\t\t\t\t\t\t\tvar notTrimValue = self.columns[index].childNodes[h].childNodes[n].textContent\r\n\t\t\t\t\t\t\t\t\t\tfor (var m = 0; m < prevValues.length; m++) {\r\n\t\t\t\t\t\t\t\t\t\t\tif (prevValues[m].trimpivot() == notTrimValue.trimpivot()) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tcond.distinctValues.push(prevValues[m]);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (cond.distinctValues.length < prevValues.length) {\r\n\t\t\t\t\t\tfor (var h = 0; h < prevValues.length; h++) {\r\n\t\t\t\t\t\t\tif (cond.distinctValues.indexOf(prevValues[h]) == -1) {\r\n\t\t\t\t\t\t\t\tcond.distinctValues.push(prevValues[h])\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif ((columns.length == 1) || (measures.length = 0)) {\r\n\t\t\t\tif (cond.sort == 1) {\r\n\t\t\t\t\tself.allData.sort((function (index) {\r\n\t\t\t\t\t\treturn function (a, b) {\r\n\t\t\t\t\t\t\treturn (a[index] === b[index] ? 0 : (a[index] < b[index] ? -1 : 1));\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t})(0));\r\n\t\t\t\t} else if (cond.sort == -1) {\r\n\t\t\t\t\tself.allData.sort((function (index) {\r\n\t\t\t\t\t\treturn function (a, b) {\r\n\t\t\t\t\t\t\treturn (a[index] === b[index] ? 0 : (a[index] > b[index] ? -1 : 1));\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t})(0));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} /* sort */\r\n\r\n\t\t/* init routines */\r\n\t\tthis.initCondition = function (index) {\r\n\t\t\tif ((index == self.dataColumnIndex) && (((columns.length > 1) || (measures.length > 0)))) { /* dummy condition */\r\n\t\t\t\tself.conditions.push(false);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar sortValue = 1;\r\n\r\n\t\t\tvar showSubtotals = 1;\r\n\t\t\tvar hideSubtotalsOption = false;\r\n\t\t\tvar validPosition = \"filters;rows;columns;hidden\";\r\n\t\t\tvar isDimension = false;\r\n\t\t\tif (self.columns[index] != undefined) {\r\n\t\t\t\tisDimension = true;\r\n\t\t\t\t\r\n\t\t\t\t\tif ((self.columns[index].getAttribute(\"order\") != undefined) && (self.columns[index].getAttribute(\"order\") === \"ascending\")) {\r\n\t\t\t\t\t\tsortValue = 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif ((self.columns[index].getAttribute(\"order\") != undefined) && (self.columns[index].getAttribute(\"order\") === \"descending\")) {\r\n\t\t\t\t\tsortValue = -1;\r\n\t\t\t\t}\r\n\t\t\t\tif ((self.columns[index].getAttribute(\"order\") != undefined) && (self.columns[index].getAttribute(\"order\") === \"custom\")) {\r\n\t\t\t\t\t//sortValue = 0;\r\n\t\t\t\t\t//if (self.serverPagination) {\r\n\t\t\t\t\t\tsortValue = 1;\r\n\t\t\t\t\t//}\r\n\t\t\t\t}\r\n\t\t\t\tif ((self.columns[index].getAttribute(\"summarize\") != undefined) && (self.columns[index].getAttribute(\"summarize\") === \"yes\")) {\r\n\t\t\t\t\tshowSubtotals = 1;\r\n\r\n\t\t\t\t\tfor (var h = 0; h < self.columns[index].childNodes.length; h++) {\r\n\t\t\t\t\t\tif ((self.columns[index].childNodes[h] != undefined) &&\r\n\t\t\t\t\t\t\t(self.columns[index].childNodes[h].localName != undefined) &&\r\n\t\t\t\t\t\t\t(self.columns[index].childNodes[h].localName === \"include\")) {\r\n\t\t\t\t\t\t\tshowSubtotals = false;\r\n\t\t\t\t\t\t\tfor (var n = 0; n < self.columns[index].childNodes[h].childNodes.length; n++) {\r\n\t\t\t\t\t\t\t\tif ((self.columns[index].childNodes[h].childNodes[n].localName != null) &&\r\n\t\t\t\t\t\t\t\t\t(self.columns[index].childNodes[h].childNodes[n].localName.toLowerCase() === \"value\")) {\r\n\t\t\t\t\t\t\t\t\tif (self.columns[index].childNodes[h].childNodes[n].textContent == \"TOTAL\") {\r\n\t\t\t\t\t\t\t\t\t\tshowSubtotals = true;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else if ((self.columns[index].childNodes[h] != undefined) &&\r\n\t\t\t\t\t\t\t(self.columns[index].childNodes[h].localName != undefined) &&\r\n\t\t\t\t\t\t\t(self.columns[index].childNodes[h].localName === \"exclude\")) {\r\n\t\t\t\t\t\t\tshowSubtotals = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t/*if ((self.columns[index].firstElementChild != undefined) && (self.columns[index].firstElementChild.localName == \"exclude\")){\r\n\t\t\t\t\t\tshowSubtotals = false;\r\n\t\t\t\t\t} else if ((self.columns[index].firstElementChild != undefined) && (self.columns[index].firstElementChild.localName == \"include\")) {\r\n\t\t\t\t\t\tshowSubtotals = false;\r\n\t\t\t\t\t\tfor (var n = 0; n < self.columns[index].firstElementChild.childNodes.length; n++) {\r\n\t\t\t\t\t\t\t\tif ((self.columns[index].firstElementChild.childNodes[n].localName != null) && \r\n\t\t\t\t\t\t\t\t(self.columns[index].firstElementChild.childNodes[n].localName.toLowerCase() === \"value\")) {\r\n\t\t\t\t\t\t\t\t\tif (self.columns[index].firstElementChild.childNodes[n].textContent == \"TOTAL\"){\r\n\t\t\t\t\t\t\t\t\t\tshowSubtotals = true;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}*/\r\n\t\t\t\t}\r\n\t\t\t\tif ((self.columns[index].getAttribute(\"summarize\") != undefined) && (self.columns[index].getAttribute(\"summarize\") === \"no\")) {\r\n\t\t\t\t\tshowSubtotals = false;\r\n\t\t\t\t\thideSubtotalsOption = true;\r\n\t\t\t\t}\r\n\t\t\t\tvar validPosition = \"\"\r\n\t\t\t\tvar metadatavisible = self.columns[index].getAttribute(\"visible\")\r\n\t\t\t\tif (metadatavisible != \"Never\"){\r\n\t\t\t\t\tvalidPosition = (self.columns[index].getAttribute(\"canDragToPages\") == \"true\") ? \"filters;\" : \"\"; \r\n\t\t\t\t\tvalidPosition = validPosition + \"rows;columns;hidden\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar cond = {\r\n\t\t\t\tdistinctValues: [], blackList: [], whiteList: [], greyList: [], collapsedValues: [],\r\n\t\t\t\tsort: sortValue, subtotals: showSubtotals, hideSubtotalOption: hideSubtotalsOption, validPosition: validPosition,\r\n\t\t\t\tdataRowPosition: index, isDimension: isDimension, topFilterValue: self.translations.GXPL_QViewerJSAllOption//gx.getMessage(\"GXPL_QViewerJSAllOption\")/*\"[all]\"*/\r\n\t\t\t}\r\n\t\t\r\n\t\t\t\tcond.topFilterValue = \"[all]\"\r\n\t\t\t\tcond.topFilterString = self.translations.GXPL_QViewerJSAllOption // gx.getMessage(\"GXPL_QViewerJSAllOption\")\r\n\t\t\t\r\n\r\n\t\t\tself.conditions.push(cond);\r\n\t\t\t\r\n\t\t\tif (self.columns[index] != undefined) {\r\n\t\t\t\tfor (var h = 0; h < self.columns[index].childNodes.length; h++) {\r\n\t\t\t\t\tif ((self.columns[index].childNodes[h] != undefined) &&\r\n\t\t\t\t\t\t(self.columns[index].childNodes[h].localName != undefined) &&\r\n\t\t\t\t\t\t(self.columns[index].childNodes[h].localName === \"include\")) {\r\n\t\t\t\t\t\tfor (var n = 0; n < self.columns[index].childNodes[h].childNodes.length; n++) {\r\n\t\t\t\t\t\t\tif ((self.columns[index].childNodes[h].childNodes[n].localName != null) &&\r\n\t\t\t\t\t\t\t\t(self.columns[index].childNodes[h].childNodes[n].localName.toLowerCase() === \"value\")) {\r\n\t\t\t\t\t\t\t\tif (self.columns[index].childNodes[h].childNodes[n].textContent != \"TOTAL\") {\r\n\t\t\t\t\t\t\t\t\tself.conditions[index].topFilterValue = self.columns[index].childNodes[h].childNodes[n].textContent;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tthis.restoreSubtotalsAndSortLayout = function (index) {\r\n\t\t\t//restore save conditions\r\n\t\t\ttry {\r\n\t\t\t\tif (rememberLayout) {\r\n\t\t\t\t\tmState = self.getState();\r\n\t\t\t\t\tif ((mState != undefined) && (mState.version != undefined) && (mState.version === self.rememberLayoutStateVersion)) { //check version\r\n\t\t\t\t\t\tif ((mState.query == self.query) && (self.conditions.length == mState.conditions.length)) {\r\n\t\t\t\t\t\t\tself.conditions[index].subtotals = mState.conditions[index].subtotals;\r\n\t\t\t\t\t\t\tself.conditions[index].sort = mState.conditions[index].sort;\r\n\t\t\t\t\t\t\tself.conditions[index].collapsedValues = mState.conditions[index].collapsedValues;\r\n\t\t\t\t\t\t\t\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} catch (Error) { }\r\n\t\t}\r\n\r\n\t\tthis.applyCustomFilters = function (index) {\r\n\t\t\ttry {\r\n\t\t\t\tif (index == self.dataColumnIndex) { /* dummy condition */\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (self.columns[index] != undefined) {\r\n\t\t\t\t\tfor (var h = 0; h < self.columns[index].childNodes.length; h++) {\r\n\t\t\t\t\t\tif ((self.columns[index].childNodes[h] != undefined) &&\r\n\t\t\t\t\t\t\t(self.columns[index].childNodes[h].localName != undefined) &&\r\n\t\t\t\t\t\t\t(self.columns[index].childNodes[h].localName === \"include\")) {\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tself.createFilterInfo({ op: \"none\", values: \"\", dim: index });\r\n\t\t\t\t\t\t\t\tfor (var n = 0; n < self.columns[index].childNodes[h].childNodes.length; n++) {\r\n\t\t\t\t\t\t\t\t\tif ((self.columns[index].childNodes[h].childNodes[n].localName != null) &&\r\n\t\t\t\t\t\t\t\t\t\t(self.columns[index].childNodes[h].childNodes[n].localName.toLowerCase() === \"value\")) {\r\n\t\t\t\t\t\t\t\t\t\tif (self.columns[index].childNodes[h].childNodes[n].textContent != \"TOTAL\") {\r\n\t\t\t\t\t\t\t\t\t\t\tif (self.UserFilterValues[index] == undefined) self.UserFilterValues[index] = [];\r\n\t\t\t\t\t\t\t\t\t\t\tself.UserFilterValues[index].push(self.columns[index].childNodes[h].childNodes[n].textContent.trimpivot());\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t//add expand collapse info\r\n\t\t\t\t\t\tvar rowPos = self.rowConditions.indexOf(index);\r\n\t\t\t\t\t\tvar colPos = self.colConditions.indexOf(index);\r\n\t\t\t\t\t\tif (((colPos < self.colConditions.length - 1) && (colPos != -1)) || ((rowPos < self.rowConditions.length - measures.length) && (rowPos != -1))) {\r\n\t\t\t\t\t\t\tif ((self.columns[index].childNodes[h] != undefined) &&\r\n\t\t\t\t\t\t\t\t(self.columns[index].childNodes[h].localName != undefined) &&\r\n\t\t\t\t\t\t\t\t(self.columns[index].childNodes[h].localName === \"expand\")) {\r\n\t\t\t\t\t\t\t\t\r\n\r\n\r\n\t\t\t\t\t\t\t\t\tfor (var n = 0; n < self.columns[index].childNodes[h].childNodes.length; n++) {\r\n\t\t\t\t\t\t\t\t\t\tif ((self.columns[index].childNodes[h].childNodes[n].localName != null) &&\r\n\t\t\t\t\t\t\t\t\t\t\t(self.columns[index].childNodes[h].childNodes[n].localName.toLowerCase() === \"value\")) {\r\n\t\t\t\t\t\t\t\t\t\t\tif (self.UserExpandValues[index] == undefined) self.UserExpandValues[index] = [];\r\n\t\t\t\t\t\t\t\t\t\t\tself.UserExpandValues[index].push(self.columns[index].childNodes[h].childNodes[n].textContent.trimpivot());\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tif (self.UserExpandValues[index] == undefined) {\r\n\t\t\t\t\t\t\t\t\t\tself.UserExpandValues[index] = [\"#ALLCOLLAPSE#\"];\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} catch (error) {\r\n\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\t\r\n\t\tthis.initWhenServerPagination = function () {\r\n\t\t\tself.propPage = OAT.Dom.create(\"div\", {});\r\n\t\t\tif ((self.QueryViewerCollection[self.IdForQueryViewerCollection].AutoRefreshGroup == \"\")) {\r\n\t\t\t\tjQuery(\".oat_winrect_container\").remove();\r\n\t\t\t}\r\n\t\t\tself.UserFilterValues = []; self.UserExpandValues = [];\r\n\t\t\tfor (var i = 0; i < self.headerRow.length; i++) {\r\n\t\t\t\tself.initCondition(i);\r\n\t\t\t\tif (self.conditions[i] && self.columns[i]) {\r\n\t\t\t\t\tself.conditions[i].dataField = self.columns[i].getAttribute(\"dataField\")\r\n\t\t\t\t\tself.conditions[i].state = \"all\"\r\n\t\t\t\t\tself.conditions[i].defaultAction = \"Include\"\r\n\t\t\t\t\tself.conditions[i].visibles = []\r\n\t\t\t\t\tself.conditions[i].searchInfo = { previousPage: 0, totalPages: 0, filteredText: \"\", values: [] }\r\n\t\t\t\t}\r\n\t\t\t\tself.applyCustomFilters(i);\r\n\t\t\t}\r\n\r\n\t\t\t//save default view values\r\n\t\t\tvar oldConditions = jQuery.extend(true, [], self.conditions);\r\n\r\n\t\t\tvar defcolCond = new Array()\r\n\t\t\tfor (var i = 0; i < self.initRowConditions.length; i++) {\r\n\t\t\t\tdefcolCond[i] = self.initRowConditions[i];\r\n\t\t\t}\r\n\t\t\tvar defcolRow = new Array();\r\n\t\t\tfor (var i = 0; i < self.initColConditions.length; i++) {\r\n\t\t\t\tdefcolRow[i] = self.initColConditions[i];\r\n\t\t\t}\r\n\t\t\tvar defStIndex = new Array();\r\n\t\t\tfor (var i = 0; i < self.initFilterIndexes.length; i++) {\r\n\t\t\t\tdefStIndex[i] = self.initFilterIndexes[i];\r\n\t\t\t}\r\n\r\n\t\t\tvar oldInitMetadata = jQuery.extend(true, {}, self.initMetadata)\r\n\r\n\t\t\tself.initState = {\r\n\t\t\t\tquery: self.query,\r\n\t\t\t\tconditions: oldConditions,\r\n\t\t\t\tcolConditions: defcolRow,\r\n\t\t\t\trowConditions: defcolCond,\r\n\t\t\t\tfilterDivSelects: [],\r\n\t\t\t\tfilterIndexes: defStIndex,\r\n\t\t\t\tstateChanged: false,\r\n\t\t\t\trowsPerPage: pageSize,\r\n\t\t\t\tAxisInfo: self.createAxisInfo(\"\"),\r\n\t\t\t\tNewAxisInfo: self.createNewAxisInfo(\"\"),\r\n\t\t\t\tDataInfo: self.createDataInfo(),\r\n\t\t\t\tNewDataInfo: self.createNewDataInfo(),\r\n\t\t\t\tCollapseInfo: [],\r\n\t\t\t\tFilterInfo: [],\r\n\t\t\t\tInitMetadata: oldInitMetadata\r\n\t\t\t};\r\n\t\t\t//end save default view values\r\n\r\n\t\t\tfor (var i = 0; i < self.headerRow.length; i++) {\r\n\t\t\t\tself.restoreSubtotalsAndSortLayout(i)\r\n\t\t\t}\r\n\r\n\t\t\t//get previuos state\r\n\t\t\tvar mState;\r\n\t\t\tif (rememberLayout) {\r\n\t\t\t\tmState = self.getState();\r\n\t\t\t} else {\r\n\t\t\t\tmState = null;\r\n\t\t\t}\r\n\r\n\t\t\tvar oldFilterDivValues = [];\r\n\t\t\tvar stateLoad = false; self.stateLoad = false;\r\n\t\t\tif (mState != null) {\r\n\t\t\t\tif ((mState.version != undefined) && (mState.version === self.rememberLayoutStateVersion)) {\r\n\t\t\t\t\tif ((mState.query == self.query) && (self.conditions.length == mState.conditions.length)) {\r\n\t\t\t\t\t\tstateLoad = true;\r\n\t\t\t\t\t\tself.stateLoad = true;\r\n\t\t\t\t\t\tself.UserFilterValues = []\r\n\t\t\t\t\t\tfor (var ci = 0; ci <= mState.conditions.length - 1; ci++) {\r\n\t\t\t\t\t\t\tif ((mState.conditions[ci] != false) && (self.conditions[ci] != false)) {\r\n\t\t\t\t\t\t\t\tfor (var p = 0; p < mState.conditions[ci].distinctValues.length; p++) {\r\n\t\t\t\t\t\t\t\t\tif ((self.conditions[ci].distinctValues.indexOf(mState.conditions[ci].distinctValues[p]) == -1)) {\r\n\t\t\t\t\t\t\t\t\t\tself.conditions[ci].distinctValues.push(mState.conditions[ci].distinctValues[p])\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tfor (var p = 0; p < mState.conditions[ci].blackList.length; p++) {\r\n\t\t\t\t\t\t\t\t\tif ((self.conditions[ci].blackList.indexOf(mState.conditions[ci].blackList[p]) == -1)) {\r\n\t\t\t\t\t\t\t\t\t\tself.conditions[ci].blackList.push(mState.conditions[ci].blackList[p])\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (mState.conditions[ci].visibles) {\r\n\t\t\t\t\t\t\t\t\tfor (var p = 0; p < mState.conditions[ci].visibles.length; p++) {\r\n\t\t\t\t\t\t\t\t\t\tif ((self.conditions[ci].visibles.indexOf(mState.conditions[ci].visibles[p]) == -1)) {\r\n\t\t\t\t\t\t\t\t\t\t\tself.conditions[ci].visibles.push(mState.conditions[ci].visibles[p])\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tfor (var p = 0; p < mState.conditions[ci].collapsedValues.length; p++) {\r\n\t\t\t\t\t\t\t\t\tif ((self.conditions[ci].collapsedValues.indexOf(mState.conditions[ci].collapsedValues[p]) == -1)) {\r\n\t\t\t\t\t\t\t\t\t\tself.conditions[ci].collapsedValues.push(mState.conditions[ci].collapsedValues[p])\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\t\tself.conditions[ci].sort = mState.conditions[ci].sort;\r\n\r\n\t\t\t\t\t\t\t\t\tself.oldSortValues[ci] = mState.conditions[ci].sort;\r\n\t\t\t\t\t\t\t\t\tself.conditions[ci].subtotals = mState.conditions[ci].subtotals;\r\n\t\t\t\t\t\t\t\t\tself.conditions[ci].defaultAction = mState.conditions[ci].defaultAction;\r\n\t\t\t\t\t\t\t\t\tself.conditions[ci].state = mState.conditions[ci].state;\r\n\t\t\t\t\t\t\t\t\tself.conditions[ci].topFilterValue = mState.conditions[ci].topFilterValue\r\n\r\n\t\t\t\t\t\t\t\t\tself.conditions[ci].totalPages = mState.conditions[ci].totalPages\r\n\t\t\t\t\t\t\t\t\tself.conditions[ci].previousPage = mState.conditions[ci].previousPage\r\n\t\t\t\t\t\t\t\t\tself.conditions[ci].blocked = mState.conditions[ci].blocked\r\n\r\n\t\t\t\t\t\t\t\t} catch (Error) { }\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tself.rowConditions = mState.rowConditions;\r\n\t\t\t\t\t\tself.colConditions = mState.colConditions;\r\n\t\t\t\t\t\tself.rowsPerPage = mState.rowsPerPage;\r\n\r\n\t\t\t\t\t\tself.filterIndexes = mState.filterIndexes;\r\n\t\t\t\t\t\tif (mState.filterDivSelects != undefined) {\r\n\t\t\t\t\t\t\tfor (var fiv = 0; fiv < mState.filterDivSelects.length; fiv++) {\r\n\t\t\t\t\t\t\t\toldFilterDivValues[fiv] = mState.filterDivSelects[fiv];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tself.stateChanged = true\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\ttry {\r\n\t\t\t\tif ((mState != null) && (mState.version === self.rememberLayoutStateVersion) && (mState.filterIndexes.length > 0)) {\r\n\t\t\t\t\tvar existElm = false;\r\n\t\t\t\t\tfor (var i = 0; i < self.conditions.length; i++) {//save the black list create from older state\r\n\t\t\t\t\t\tvar tmp = []\r\n\t\t\t\t\t\tif ((self.conditions[i]) && (self.conditions[i].blackList)) {\r\n\t\t\t\t\t\t\tfor (var j = 0; j < self.conditions[i].blackList.length; j++) {\r\n\t\t\t\t\t\t\t\ttmp.push(self.conditions[i].blackList[j])\r\n\t\t\t\t\t\t\t\texistElm = true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tself.tempBlackLists.push([tmp])\r\n\t\t\t\t\t\tvar tmp2 = []\r\n\t\t\t\t\t\tif ((self.conditions[i]) && (self.conditions[i].collapsedValues)) {\r\n\t\t\t\t\t\t\tfor (var j = 0; j < self.conditions[i].collapsedValues.length; j++) {\r\n\t\t\t\t\t\t\t\ttmp2.push(self.conditions[i].collapsedValues[j])\r\n\t\t\t\t\t\t\t\texistElm = true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tself.tempCollapsedValues.push([tmp2])\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!existElm) {\r\n\t\t\t\t\t\tself.tempBlackLists = false\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tself.tempBlackLists = false\r\n\t\t\t\t}\r\n\t\t\t} catch (error) {\r\n\t\t\t\tself.tempBlackLists = false\r\n\t\t\t}\r\n\r\n\r\n\t\t\tself.gd.clearSources();\r\n\t\t\tself.gd.clearTargets();\r\n\r\n\r\n\r\n\t\t\tif (GlobalPivotInterval[UcId] != undefined) {\r\n\t\t\t\tclearInterval(GlobalPivotInterval[UcId]);\r\n\t\t\t}\r\n\t\t\tvar previousValuePivotWidth = 0\r\n\t\t\tvar antepreviusValuePivotWidth = 0\r\n\t\t\tGlobalPivotInterval[UcId] = setInterval(function () {\r\n\t\t\t\tvar actual_rowsPerPage = 0;\r\n\t\t\t\t\r\n\t\t\t\t//find max width of inner_filter_div\r\n\t\t\t\tvar pageFilter = jQuery(\"#\" + UcId + \"_\" + self.query + \"_pivot_page\").find(\".inner_filter_div\")\r\n\t\t\t\tvar MaxWidthFilters = 0;\r\n\t\t\t\tfor (var pFIndx = 0; pFIndx < pageFilter.length; pFIndx++){\r\n\t\t\t\t\tif (MaxWidthFilters < pageFilter[pFIndx].offsetWidth){\r\n\t\t\t\t\t\tMaxWidthFilters = pageFilter[pFIndx].offsetWidth\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tMaxWidthFilters = (MaxWidthFilters > 0) ? MaxWidthFilters + 8 : MaxWidthFilters; \r\n\t\t\t\t\r\n\t\t\t\tif (jQuery(\"#\" + self.controlName + \"_\" + self.query + \"tablePagination_rowsPerPage\").length > 0) {\r\n\t\t\t\t\tactual_rowsPerPage = parseInt(jQuery(\"#\" + self.controlName + \"_\" + self.query + \"tablePagination_rowsPerPage\")[0].value);\r\n\t\t\t\t\tif (!isNaN(actual_rowsPerPage)) {\r\n\t\t\t\t\t\tif (jQuery(\"#\" + self.controlName + \"_\" + self.query)[0].getAttribute(\"class\") === \"pivot_table\") {\r\n\t\t\t\t\t\t\tif ((!autoResize)) {\r\n\t\t\t\t\t\t\t\tvar clientWdt = jQuery(\"#\" + self.containerName)[0].clientWidth\r\n\t\t\t\t\t\t\t\tif (clientWdt < MaxWidthFilters) {\r\n\t\t\t\t\t\t\t\t\tjQuery(\"#\" + self.controlName + \"_\" + self.query).css({ width: MaxWidthFilters + \"px\" });\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tjQuery(\"#\" + self.controlName + \"_\" + self.query).css({ width: (clientWdt) + \"px\" });\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tvar wd = jQuery(\"#\" + self.controlName + \"_\" + self.query)[0].offsetWidth;\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (wd >= MaxWidthFilters){\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tvar actualWidth = jQuery(\"#\" + self.controlName + \"_\" + self.query + \"_tablePagination\")[0].clientWidth\r\n\t\t\t\t\t\t\t\tif ((actualWidth > MaxWidthFilters + 1) || (actualWidth < MaxWidthFilters - 1)) {\r\n\t\t\t\t\t\t\t\t\tjQuery(\"#\" + UcId + \"_\" + self.query + \"_title_div\").css({ width: wd + \"px\" });\r\n\t\t\t\t\t\t\t\t\tjQuery(\"#\" + UcId + \"_\" + self.query + \"_pivot_page\").css({ width: wd + \"px\" });\r\n\t\r\n\t\t\t\t\t\t\t\t\tjQuery(\"#\" + self.controlName + \"_\" + self.query + \"_tablePagination\").css({ width: wd + \"px\" });\r\n\r\n\t\t\t\t\t\t\t\t\tantepreviusValuePivotWidth = previousValuePivotWidth\r\n\t\t\t\t\t\t\t\t\tpreviousValuePivotWidth = wd\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tjQuery(\"#\" + UcId + \"_\" + self.query + \"_title_div\").css({ width: MaxWidthFilters + \"px\" });\r\n\t\t\t\t\t\t\t\tjQuery(\"#\" + UcId + \"_\" + self.query + \"_pivot_page\").css({ width: MaxWidthFilters + \"px\" });\r\n\t\r\n\t\t\t\t\t\t\t\tjQuery(\"#\" + self.controlName + \"_\" + self.query + \"_tablePagination\").css({ width: MaxWidthFilters + \"px\" });\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tjQuery(\"#\" + self.controlName + \"_\" + self.query).css({ width: MaxWidthFilters + \"px\" });\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tantepreviusValuePivotWidth = previousValuePivotWidth\r\n\t\t\t\t\t\t\t\tpreviousValuePivotWidth = MaxWidthFilters\r\n\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (jQuery(\"#\" + self.controlName + \"_\" + self.query)[0] != undefined) {\r\n\t\t\t\t\t\tif (jQuery(\"#\" + self.controlName + \"_\" + self.query)[0].getAttribute(\"class\") === \"pivot_table\") {\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (!autoResize) {\r\n\t\t\t\t\t\t\t\tvar clientWdt = jQuery(\"#\" + self.containerName)[0].clientWidth\r\n\t\t\t\t\t\t\t\tif (clientWdt < MaxWidthFilters) {\r\n\t\t\t\t\t\t\t\t\tjQuery(\"#\" + self.controlName + \"_\" + self.query).css({ width: MaxWidthFilters + \"px\" });\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tjQuery(\"#\" + self.controlName + \"_\" + self.query).css({ width: (clientWdt) + \"px\" });\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tvar wd = jQuery(\"#\" + self.controlName + \"_\" + self.query)[0].offsetWidth\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (wd < MaxWidthFilters){\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tif ((antepreviusValuePivotWidth == 0) || (antepreviusValuePivotWidth == previousValuePivotWidth) ||\r\n\t\t\t\t\t\t\t\t\t((previousValuePivotWidth > MaxWidthFilters + 6) || (previousValuePivotWidth < MaxWidthFilters - 6)\r\n\t\t\t\t\t\t\t\t\t\t|| (antepreviusValuePivotWidth > previousValuePivotWidth + 6) || (antepreviusValuePivotWidth < previousValuePivotWidth - 6))) {\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tjQuery(\"#\" + UcId + \"_\" + self.query + \"_title_div\").css({ width: MaxWidthFilters + \"px\" });\r\n\t\t\t\t\t\t\t\t\tjQuery(\"#\" + UcId + \"_\" + self.query + \"_pivot_page\").css({ width: MaxWidthFilters + \"px\" });\r\n\t\t\t\t\t\t\t\t\tantepreviusValuePivotWidth = previousValuePivotWidth\r\n\t\t\t\t\t\t\t\t\tpreviousValuePivotWidth = MaxWidthFilters\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tjQuery(\"#\" + self.controlName + \"_\" + self.query).css({ width: MaxWidthFilters + \"px\" });\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tif ((antepreviusValuePivotWidth == 0) || (antepreviusValuePivotWidth == previousValuePivotWidth) ||\r\n\t\t\t\t\t\t\t\t\t((previousValuePivotWidth > wd + 6) || (previousValuePivotWidth < wd - 6)\r\n\t\t\t\t\t\t\t\t\t\t|| (antepreviusValuePivotWidth > previousValuePivotWidth + 6) || (antepreviusValuePivotWidth < previousValuePivotWidth - 6))) {\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tjQuery(\"#\" + UcId + \"_\" + self.query + \"_title_div\").css({ width: wd + \"px\" });\r\n\t\t\t\t\t\t\t\t\tjQuery(\"#\" + UcId + \"_\" + self.query + \"_pivot_page\").css({ width: wd + \"px\" });\r\n\t\t\t\t\t\t\t\t\tantepreviusValuePivotWidth = previousValuePivotWidth\r\n\t\t\t\t\t\t\t\t\tpreviousValuePivotWidth = wd\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}, 20);\r\n\r\n\r\n\r\n\t\t\tvar ParmAxisInfo;\r\n\t\t\tif ((mState != null) && (mState.AxisInfo != null)) {\r\n\t\t\t\tself.pageData.AxisInfo = mState.AxisInfo;\r\n\t\t\t\tParmAxisInfo =  jQuery.extend(true, {}, mState.NewAxisInfo)\r\n\t\t\t} else {\r\n\t\t\t\tself.pageData.AxisInfo = self.createAxisInfo(\"\");\r\n\t\t\t\tParmAxisInfo = self.createNewAxisInfo(\"\"); \r\n\t\t\t}\r\n\t\t\tvar ParmDataInfo;\r\n\t\t\tif ((mState != null) && (mState.DataInfo != null)) {\r\n\t\t\t\tself.pageData.DataInfo = mState.DataInfo;\r\n\t\t\t\tParmDataInfo = jQuery.extend(true, {}, mState.NewDataInfo)\r\n\t\t\t} else {\r\n\t\t\t\tself.pageData.DataInfo = self.createDataInfo();\r\n\t\t\t\tParmDataInfo = self.createNewDataInfo();\r\n\t\t\t}\r\n\r\n\t\t\tif ((mState != null) && (mState.FilterInfo != null)) {\r\n\t\t\t\tself.pageData.FilterInfo = mState.FilterInfo;\r\n\t\t\t}\r\n\r\n\t\t\tif ((self.UserFilterValues.length == 0) && (self.UserExpandValues.length == 0)) {\r\n\r\n\t\t\t\tself.pageData.CollapseInfo = self.CreateExpandCollapseInfo(\"\");\r\n\t\t\t\t\r\n\t\t\t\tself.lastCallToQueryViewer = \"initWhenServerPagination\"\r\n\t\t\t\t\r\n\t\t\t\tself.requestPageDataForPivotTable(1, self.rowsPerPage, true, ParmAxisInfo, ParmDataInfo, self.pageData.FilterInfo, self.pageData.CollapseInfo, true);\r\n\t\t\t\t\r\n\t\t\t\t\r\n\r\n\r\n\r\n\t\t\t} else {\r\n\t\t\t\t//when user customize filters or expand-collapsed\r\n\t\t\t\t\r\n\t\t\t\tself.initValueRead(self, 0, true);\r\n\r\n\t\t\t}\r\n\r\n\t\t\t//set interval for handler values infinite scroll\r\n\t\t\tsetInterval(function () {\r\n\t\t\t\tfor (var t = 0; t < jQuery(\".oat_winrect_container .pivot_popup_fix\").length; t++) {\r\n\t\t\t\t\tif ((!jQuery(\".oat_winrect_container .pivot_popup_fix\").closest(\".oat_winrect_container\")[t].style.display) ||\r\n\t\t\t\t\t\t(jQuery(\".oat_winrect_container .pivot_popup_fix\").closest(\".oat_winrect_container\")[t].style.display != \"none\")) {\r\n\r\n\t\t\t\t\t\tif (jQuery(\".oat_winrect_container .pivot_popup_fix\").length > 0) {\r\n\t\t\t\t\t\t\tvar element = jQuery(\".oat_winrect_container .pivot_popup_fix\")[t];\r\n\t\t\t\t\t\t\tvar scrollBottom = element.scrollHeight - element.clientHeight - element.scrollTop\r\n\t\t\t\t\t\t\tif (scrollBottom < 25) {\r\n\t\t\t\t\t\t\t\tvar UcId = element.getAttribute(\"ucid\")\r\n\t\t\t\t\t\t\t\tvar columnNumber = parseInt(element.getAttribute(\"columnNumber\"))\r\n\t\t\t\t\t\t\t\tif (UcId == self.UcId) {\r\n\t\t\t\t\t\t\t\t\tself.readScrollValue(columnNumber)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\t250)\r\n\r\n\r\n\t\t} /* initWhenServerPagination */\r\n\t\r\n\r\n\t\r\n\t\tthis.initValueRead = function (self, columnNumber, allData, requestDataField) {\r\n\t\t\tif (columnNumber >= self.columns.length) {\r\n\r\n\t\t\t\t//add items to page select if exists\r\n\t\t\t\ttry {\r\n\t\t\t\t\tfor (var iP = 0; iP < jQuery(\"#\" + self.UcId + \"_\" + self.query + \"_pivot_page\").find(\"select\").length; iP++) {\r\n\t\t\t\t\t\tvar s = jQuery(\"#\" + self.UcId + \"_\" + self.query + \"_pivot_page\").find(\"select\")[iP];\r\n\t\t\t\t\t\tvar filterDim = parseInt(s.getAttribute(\"id\").replace(\"page_select_\", \"\"))\r\n\t\t\t\t\t\tvar index = self.filterIndexes[filterDim]\r\n\r\n\t\t\t\t\t\tif (self.conditions[index].filteredShowValues == undefined) {\r\n\t\t\t\t\t\t\tself.conditions[index].filteredShowValues = []\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar actualValues = self.conditions[index].distinctValues;\r\n\t\t\t\t\t\tfor (var j = 0; j < actualValues.length; j++) {\r\n\t\t\t\t\t\t\tvar v = actualValues[j];\r\n\t\t\t\t\t\t\tif (self.conditions[index].filteredShowValues.indexOf(v) == -1) {\r\n\t\t\t\t\t\t\t\tself.conditions[index].filteredShowValues.push(v);\r\n\t\t\t\t\t\t\t\tif (v != \"#NuN#\") {\r\n\t\t\t\t\t\t\t\t\tOAT.Dom.option(v, v, s);\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tOAT.Dom.option(\" \", v, s);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif ((self.conditions[index].topFilterValue != \"[all]\") /*&& (self.conditions[index].topFilterValue!=\"\")*/) {\r\n\t\t\t\t\t\t\tvar v = self.conditions[index].topFilterValue\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tvar isInFilteredShowValues = -1;\r\n\t\t\t\t\t\t\tfor(var fV = 0; fV < self.conditions[index].filteredShowValues.length; fV++){\r\n\t\t\t\t\t\t\t\tif (String(self.conditions[index].filteredShowValues[fV]).trim() == String(v).trim()){\r\n\t\t\t\t\t\t\t\t\tisInFilteredShowValues = fV;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (isInFilteredShowValues > -1) {//(self.conditions[index].filteredShowValues.indexOf(v) != -1) { //value already load\r\n\t\t\t\t\t\t\t\ts.selectedIndex = isInFilteredShowValues + 1\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tself.conditions[index].filteredShowValues.push(v);\r\n\t\t\t\t\t\t\t\tif (v != \"#NuN#\") {\r\n\t\t\t\t\t\t\t\t\tOAT.Dom.option(v, v, s);\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tOAT.Dom.option(\" \", v, s);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\ts.selectedIndex = 1\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (ERROR) {\r\n\r\n\t\t\t\t}\r\n\r\n\r\n\r\n\t\t\t\tif (allData) {\r\n\t\t\t\t\tself.callServiceWhenCustomeValues();\r\n\t\t\t\t}\r\n\t\t\t\treturn;\r\n\t\t\t} else {\r\n\t\t\t\tvar cantItems = 10;\r\n\t\t\t\tif ((self.QueryViewerCollection[self.IdForQueryViewerCollection].AutoRefreshGroup != \"\") || (allData)) {\r\n\t\t\t\t\tcantItems = 0;\r\n\t\t\t\t}\r\n\t\t\t\tself.lastRequestValue = columnNumber;\r\n\t\t\t\t\r\n\t\t\t\tself.lastRequestAttributeValues = \"initValueRead\"\r\n\t\t\t\tself.lastRequestAttributeColumnNumber = columnNumber\r\n\t\t\t\tself.lastRequestAttributeAllData = allData\r\n\t\t\t\tself.lastRequestAttributeRequestDataField = requestDataField\r\n\t\t\t\t\r\n\t\t\t\tself.requestAttributeValues(self.columns[columnNumber].getAttribute(\"dataField\"), 1, cantItems, \"\")\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t\r\n\r\n\t\tthis.callServiceWhenCustomeValues = function () {\r\n\t\t\tself.pageData.CollapseInfo = self.CreateExpandCollapseInfo(\"\");\r\n\t\t\tvar ParmAxisInfo = self.createNewAxisInfo()\r\n\t\t\tvar ParmDataInfo = self.createNewDataInfo()\r\n\t\t\t\r\n\t\t\tself.lastCallToQueryViewer = \"callServiceWhenCustomeValues\"\r\n\t\t\t\t\r\n\t\t\tself.requestPageDataForPivotTable(1, self.rowsPerPage, true, ParmAxisInfo, ParmDataInfo, self.pageData.FilterInfo, self.pageData.CollapseInfo, true);\r\n\t\t\t\t\r\n\t\r\n\t\t}\r\n\r\n\r\n\r\n\t\t/* callback routines */\r\n\t\tthis.getOrderReference = function (conditionIndex, anchorRef, functionRef, divRef) { // ** move a row or column to filter bar ---\r\n\t\t\treturn function (target, x, y) {\r\n\t\t\t\t/* somehow reorder conditions */\r\n\r\n\t\t\t\tif ((self.conditions[conditionIndex].validPosition != undefined) && (self.conditions[conditionIndex].validPosition.indexOf(\"filters\") == -1)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tself.lightOff();\r\n\t\t\t\t\r\n\t\t\t\tvar sourceCI = conditionIndex; /* global index */\r\n\t\t\t\tvar targetCI = target.conditionIndex; /* global index */\r\n\t\t\t\tif ((sourceCI != targetCI) && (self.conditions[0].previousPage == undefined)) {\r\n\t\t\t\t\tself.initValueRead(self, 0, self.stateLoad);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t/* filters */\r\n\t\t\t\tif (target == self.filterDiv) {\r\n\t\t\t\t\tself.stateChanged = true\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar insert = false;\r\n\t\t\t\t\tfor (var fI = 0; (fI < self.filterIndexes.length) && !insert;  fI++){\r\n\t\t\t\t\t\tif (self.filterIndexes[fI] > conditionIndex){\r\n\t\t\t\t\t\t\tself.filterIndexes.splice(fI, 0, conditionIndex);\r\n\t\t\t\t\t\t\tinsert = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!insert){\r\n\t\t\t\t\t\tself.filterIndexes.push(conditionIndex);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\t//self.filterIndexes.push(conditionIndex);\r\n\t\t\t\t\tself.conditions[conditionIndex].blackList = [];\r\n\t\t\t\t\tfor (var i = 0; i < self.rowConditions.length; i++) {\r\n\t\t\t\t\t\tif (self.rowConditions[i] == conditionIndex) { self.rowConditions.splice(i, 1); }\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfor (var i = 0; i < self.colConditions.length; i++) {\r\n\t\t\t\t\t\tif (self.colConditions[i] == conditionIndex) { self.colConditions.splice(i, 1); }\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\r\n\t\t\t\t\tself.onDragundDropEventHandle(conditionIndex, \"pages\", self.filterIndexes.indexOf(conditionIndex)) //call event\r\n\r\n\t\t\t\t\tself.DiseablePivot();\r\n\t\t\t\t\tsetTimeout(function () {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tself.getDataForPivot(self.UcId, 1, self.rowsPerPage, true, self.conditions[conditionIndex].dataField, { op: \"all\", value: \"\", dim: conditionIndex }, \"\", \"\")\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tself.EneablePivot();\r\n\t\t\t\t\t}, 200)\r\n\t\t\t\t\treturn;\r\n\t\t\t\t} \r\n\t\t\t\t\r\n\t\t\t\tvar startInRows = self.rowConditions.indexOf(conditionIndex) > -1; \r\n\r\n\t\t\t\t\r\n\t\t\t\tif (sourceCI == targetCI) {\r\n\t\t\t\t\tif (OAT.isWebkit()) {\r\n\t\t\t\t\t\tif (anchorRef != undefined) {\r\n\t\t\t\t\t\t\tanchorRef.displayRef2([x, y])\r\n\t\t\t\t\t\t\tfunctionRef([x, y, divRef])\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn;\r\n\t\t\t\t} /* dragged onto the same */\r\n\t\t\t\tvar sourceType = false; var sourceI = -1; /* local */\r\n\t\t\t\tvar targetType = false; var targetI = -1; /* local */\r\n\t\t\t\tfor (var i = 0; i < self.rowConditions.length; i++) {\r\n\t\t\t\t\tif (self.rowConditions[i] == sourceCI) { sourceType = self.rowConditions; sourceI = i; }\r\n\t\t\t\t\tif (self.rowConditions[i] == targetCI) { targetType = self.rowConditions; targetI = i; }\r\n\t\t\t\t}\r\n\t\t\t\tfor (var i = 0; i < self.colConditions.length; i++) {\r\n\t\t\t\t\tif (self.colConditions[i] == sourceCI) { sourceType = self.colConditions; sourceI = i; }\r\n\t\t\t\t\tif (self.colConditions[i] == targetCI) { targetType = self.colConditions; targetI = i; }\r\n\t\t\t\t}\r\n\t\t\t\t/*if (targetCI == -1) {\r\n\t\t\t\t\t// no cols - lets create one \r\n\t\t\t\t\tself.colConditions.push(sourceCI);\r\n\t\t\t\t\tself.rowConditions.splice(sourceI, 1);\r\n\t\t\t\t\t\r\n\t\t\t\t\tself.preGoWhenMoveTopFilter(conditionIndex);\r\n\t\t\t\t\t\r\n\t\t\t\t\tself.go(self);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (targetCI == -2) {\r\n\t\t\t\t\t// no rows - lets create one \r\n\t\t\t\t\tself.rowConditions.push(sourceCI);\r\n\t\t\t\t\tself.colConditions.splice(sourceI, 1);\r\n\t\t\t\t\t\r\n\t\t\t\t\tself.preGoWhenMoveTopFilter(conditionIndex);\r\n\t\t\t\t\t\r\n\t\t\t\t\tself.go(self);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}*/\r\n\t\t\t\tif (sourceType == targetType) {\r\n\t\t\t\t\t/* same condition type */\r\n\t\t\t\t\tif (sourceI + 1 == targetI) {\r\n\t\t\t\t\t\t/* dragged on condition immediately after */\r\n\t\t\t\t\t\ttargetType.splice(targetI + 1, 0, sourceCI);\r\n\t\t\t\t\t\ttargetType.splice(sourceI, 1);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\ttargetType.splice(sourceI, 1);\r\n\t\t\t\t\t\ttargetType.splice(targetI, 0, sourceCI);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tself.changesrowposition = true\r\n\t\t\t\t\tself.onDragundDropEventHandle(conditionIndex, (startInRows) ? \"rows\" : \"columns\" , (startInRows) ? self.rowConditions.indexOf(conditionIndex) : self.colConditions.indexOf(conditionIndex))\r\n\t\t\t\t} else {\r\n\t\t\t\t\t/* different condition type */\r\n\t\t\t\t\tsourceType.splice(sourceI, 1);\r\n\t\t\t\t\ttargetType.splice(targetI, 0, sourceCI);\r\n\t\t\t\t\t\r\n\t\t\t\t\tself.onDragundDropEventHandle(conditionIndex, (startInRows) ? \"columns\" : \"rows\" , (startInRows) ? self.colConditions.indexOf(conditionIndex) : self.rowConditions.indexOf(conditionIndex))\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\r\n\t\t\t\t\tself.getDataForPivot(self.UcId, 1, self.rowsPerPage, true, self.conditions[conditionIndex].dataField, \"\", \"\", \"\")\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\tthis.getOrderReferenceProg = function (conditionIndex) { // ** move a row or column to filter bar programatically---\r\n\r\n\r\n\t\t\tif ((self.conditions[conditionIndex].validPosition != undefined) && (self.conditions[conditionIndex].validPosition.indexOf(\"filters\") == -1)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tself.stateChanged = true\r\n\t\t\tif (self.filterIndexes.indexOf(conditionIndex) < 0) {\r\n\t\t\t\tself.filterIndexes.push(conditionIndex);\r\n\t\t\t}\r\n\t\t\tself.conditions[conditionIndex].blackList = [];\r\n\t\t\tfor (var i = 0; i < self.rowConditions.length; i++) {\r\n\t\t\t\tif (self.rowConditions[i] == conditionIndex) { self.rowConditions.splice(i, 1); }\r\n\t\t\t}\r\n\t\t\tfor (var i = 0; i < self.colConditions.length; i++) {\r\n\t\t\t\tif (self.colConditions[i] == conditionIndex) { self.colConditions.splice(i, 1); }\r\n\t\t\t}\r\n\r\n\t\t\t\r\n\t\t\tself.onDragundDropEventHandle(conditionIndex, \"pages\", self.filterIndexes.indexOf(conditionIndex)) //call event\r\n\r\n\t\t\tself.DiseablePivot();\r\n\t\t\tsetTimeout(function () {\r\n\t\t\t\t\r\n\t\t\t\t\tself.getDataForPivot(self.UcId, 1, self.rowsPerPage, true, self.conditions[conditionIndex].dataField, { op: \"all\", value: \"\", dim: conditionIndex }, \"\", \"\")\r\n\t\t\t\t\r\n\t\t\t\tself.EneablePivot();\r\n\t\t\t}, 200)\r\n\t\t\treturn;\r\n\r\n\r\n\r\n\t\t}\r\n\r\n\t\tthis.getClickReference = function (cond, dimensionNumber, contentDiv) {\r\n\t\t\tvar anchorRef = OAT.Anchor.assign(contentDiv, {\r\n\t\t\t\ttitle: \" \",\r\n\t\t\t\tcontent: self.propPage,\r\n\t\t\t\tresult_control: false,\r\n\t\t\t\tactivation: \"click\",\r\n\t\t\t\ttype: OAT.WinData.TYPE_RECT,\r\n\t\t\t\twidth: \"auto\",\r\n\t\t\t\tcontainerQuery: qv.util.GetContainerControlClass(self.QueryViewerCollection[self.IdForQueryViewerCollection]) + \" FilterPopup \"\r\n\t\t\t});\r\n\r\n\t\t\tjQuery(contentDiv).data('anchorRef', anchorRef);\r\n\r\n\t\t\t/*var refresh = function () {\r\n\t\t\t\tself.propPage._Instant_hide();\r\n\t\t\t\tself.go(false);\r\n\t\t\t}*/\r\n\t\t\treturn [function (event) {\r\n\t\t\t\t\r\n\t\t\t\t\tif (self.conditions[dimensionNumber].previousPage == undefined) {\r\n\t\t\t\t\t\tself.initValueRead(self, dimensionNumber, self.stateLoad, self.conditions[dimensionNumber].dataField);\r\n\t\t\t\t\t\tjQuery(\".oat_winrect_container\").css({ left:  \"-10000000px\", top: \"-10000000px\" })\r\n\t\t\t\t\t\tvar clickEvent = jQuery.extend(true, {}, event);\r\n\t\t\t\t\t\tvar wait = function(){\r\n\t\t\t\t\t\t\tif (self.conditions[dimensionNumber].previousPage == undefined) {\r\n\t\t\t\t\t\t\t\tsetTimeout( wait , 100)\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tself.ShowPopUp(cond, dimensionNumber, clickEvent);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\twait();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tself.ShowPopUp(cond, dimensionNumber, event);\r\n\t\t\t\t\t}\r\n\t\t\t\t\r\n\r\n\t\t\t}, anchorRef]\r\n\t\t}\r\n\r\n\t\tthis.ShowPopUp = function (cond, dimensionNumber, event) {\r\n\r\n\t\t\tvar refresh = function () {\r\n\t\t\t\tjQuery(\".oat_winrect_container\").css({ display: \"none\" });\r\n\t\t\t}\r\n\t\t\tvar eventDiv;\r\n\t\t\tvar coords;\r\n\t\t\tif (event.currentTarget != undefined) {\r\n\t\t\t\teventDiv = event.currentTarget;\r\n\t\t\t\tcoords = OAT.Dom.eventPos(event);\r\n\t\t\t} else {\r\n\t\t\t\teventDiv = event[2]\r\n\t\t\t\tcoords = [event[0], event[1]]\r\n\t\t\t}\r\n\t\t\tvar toAppend = [];\r\n\r\n\t\t\tself.propPage.style.left = coords[0] + \"px\";\r\n\t\t\tself.propPage.style.top = coords[1] + \"px\";\r\n\r\n\r\n\t\t\tif (self.isSD) { //android\r\n\t\t\t\tjQuery(\".oat_winrect_container\").css({ left: \"-1500px\", top: jQuery(eventDiv).offset().top + \"px\" })\r\n\t\t\t\tjQuery(\".oat_winrect_container\").addClass(\"oat_winrect_container_small\")\r\n\t\t\t} else {\r\n\t\t\t\tjQuery(\".oat_winrect_container\").css({ left: jQuery(eventDiv).offset().left + \"px\", top: jQuery(eventDiv).offset().top + \"px\" })\r\n\t\t\t}\r\n\r\n\t\t\tself.propPage.setAttribute('id', 'pop-up');\r\n\t\t\tself.propPage.setAttribute('class', 'oat_pop-up');\r\n\t\t\tOAT.Dom.clear(self.propPage);\r\n\t\t\ttoAppend.push(self.propPage);\r\n\t\t\t/* contents */\r\n\r\n\r\n\t\t\tjQuery(\".oat_winrect_title\").find(\".winrect_title_label\").remove()\r\n\r\n\t\t\tvar spantitle = OAT.Dom.create(\"label\");\r\n\t\t\tif (self.isSD) {\r\n\t\t\t\tspantitle.setAttribute(\"class\", \"winrect_title_label winrect_title_label_small\");\r\n\t\t\t} else {\r\n\t\t\t\tspantitle.setAttribute(\"class\", \"winrect_title_label\");\r\n\t\t\t}\r\n\t\t\tOAT.addTextNode(spantitle, self.columns[dimensionNumber].getAttribute(\"displayName\"));\r\n\t\t\tjQuery(\".oat_winrect_title\").append(spantitle)\r\n\r\n\r\n\t\t\tif (!disableColumnSort) {\r\n\t\t\t\tvar div_order = document.createElement(\"div\");\r\n\t\t\t\tdiv_order.setAttribute(\"class\", \"first_popup_subdiv\");\r\n\r\n\t\t\t\tvar asc = OAT.Dom.radio(\"order\");\r\n\t\t\t\tvar ascForId = \"pivot_order_asc\" + \"_\" + self.containerName + \"_\" + self.columns[dimensionNumber].getAttribute(\"dataField\");\r\n\t\t\t\tasc.id = ascForId;\r\n\t\t\t\tasc.className = \"input_radio_popup\"\r\n\t\t\t\tOAT.Dom.attach(asc, \"change\", function () {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tvar datastr = \"<DATA event=\\\"OrderChanged\\\" name=\\\"\" + self.columns[dimensionNumber].getAttribute(\"name\") + \"\\\" displayName=\\\"\" + self.columns[dimensionNumber].getAttribute(\"displayName\") + \"\\\"  order=\\\"ascending\\\">\"\r\n\t\t\t\t\t\tdatastr = datastr + \"</DATA>\"\r\n\t\t\t\t\t\tif (qv.util.isGeneXusPreview())\r\n\t\t\t\t\t\t\twindow.external.SendText(self.QueryViewerCollection[self.IdForQueryViewerCollection].ControlName, datastr);\r\n\t\t\t\t\t} catch (error) { }\r\n\r\n\t\t\t\t\t\r\n\t\t\t\t\t\tcond.sort = 1; self.stateChanged = true;\r\n\t\t\t\t\t\tself.getDataForPivot(self.UcId, 1, self.rowsPerPage, true, cond.dataField, \"\", \"\", \"\")\r\n\t\t\t\t\t\tvar idI = \"i_\" + this.getAttribute(\"id\");\r\n\t\t\t\t\t\tvar inputAsc = document.getElementById(idI);\r\n\t\t\t\t\t\tinputAsc.textContent = \"radio_button_checked\";\r\n\t\t\t\t\t\tvar inputDsc = document.getElementById(idI.replace(\"asc\", \"desc\"));\r\n\t\t\t\t\t\tinputDsc.textContent = \"radio_button_unchecked\";\r\n\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\r\n\t\t\t\t\t\r\n\t\t\t\t});\r\n\t\t\t\tdiv_order.appendChild(asc);\r\n\r\n\t\t\t\tvar IStyle = OAT.isIE() ? \"top:-10px;\" : \"\"; \r\n\r\n\t\t\t\tvar alabel = OAT.Dom.create(\"label\");\r\n\t\t\t\talabel.className = \"first_div_label\";\r\n\t\t\t\talabel.htmlFor = ascForId;\r\n\t\t\t\tdiv_order.appendChild(alabel);\r\n\t\t\t\tdiv_order.appendChild(OAT.Dom.create(\"br\"));\r\n\t\t\t\tOAT.addImageNode(alabel, (cond.sort == 1)?\"radio_button_checked\":\"radio_button_unchecked\", IStyle, \"i_\"+ascForId);\r\n\t\t\t\tOAT.addTextNode(alabel,self.translations.GXPL_QViewerJSAscending /*gx.getMessage(\"GXPL_QViewerJSAscending\")*/)\r\n\t\t\t\t\r\n\t\t\t\tvar desc = OAT.Dom.radio(\"order\");\r\n\t\t\t\tvar dscForId = \"pivot_order_desc\" + \"_\" + self.containerName + \"_\" + self.columns[dimensionNumber].getAttribute(\"dataField\");\r\n\t\t\t\tdesc.id = dscForId;\r\n\t\t\t\tdesc.className = \"input_radio_popup\"\r\n\t\t\t\tOAT.Dom.attach(desc, \"change\", function () {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tvar datastr = \"<DATA event=\\\"OrderChanged\\\" name=\\\"\" + self.columns[dimensionNumber].getAttribute(\"name\") + \"\\\" displayName=\\\"\" + self.columns[dimensionNumber].getAttribute(\"displayName\") + \"\\\"  order=\\\"descending\\\">\"\r\n\t\t\t\t\t\tdatastr = datastr + \"</DATA>\"\r\n\t\t\t\t\t\tif (qv.util.isGeneXusPreview())\r\n\t\t\t\t\t\t\twindow.external.SendText(self.QueryViewerCollection[self.IdForQueryViewerCollection].ControlName, datastr);\r\n\t\t\t\t\t} catch (error) { }\r\n\r\n\r\n\t\t\t\t\t\r\n\t\t\t\t\t\tcond.sort = -1; self.stateChanged = true;\r\n\t\t\t\t\t\tself.getDataForPivot(self.UcId, 1, self.rowsPerPage, true, cond.dataField, \"\", \"\", \"\")\r\n\t\t\t\t\t\tvar idI = \"i_\" + this.getAttribute(\"id\");\r\n\t\t\t\t\t\tvar inputDsc = document.getElementById(idI);\r\n\t\t\t\t\t\tinputDsc.textContent = \"radio_button_checked\";\r\n\t\t\t\t\t\tvar inputAsc = document.getElementById(idI.replace(\"desc\", \"asc\"));\r\n\t\t\t\t\t\tinputAsc.textContent = \"radio_button_unchecked\";\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t});\r\n\t\t\t\tdiv_order.appendChild(desc);\r\n\r\n\t\t\t\tvar dlabel = OAT.Dom.create(\"label\");\r\n\t\t\t\tdlabel.className = \"first_div_label\";\r\n\t\t\t\tdlabel.htmlFor = dscForId;\r\n\t\t\t\tdiv_order.appendChild(dlabel);\r\n\t\t\t\tOAT.addImageNode(dlabel, (cond.sort == 1)?\"radio_button_unchecked\":\"radio_button_checked\", IStyle, \"i_\"+dscForId);\r\n\t\t\t\tOAT.addTextNode(dlabel, self.translations.GXPL_QViewerJSDescending /*gx.getMessage(\"GXPL_QViewerJSDescending\")*/)\r\n\t\t\t\t\r\n\r\n\t\t\t\ttoAppend.push(div_order);\r\n\r\n\t\t\t\tvar hr1 = OAT.Dom.create(\"hr\", {});\r\n\t\t\t\ttoAppend.push(hr1);\r\n\t\t\t}\r\n\r\n\t\t\tvar hr2 = OAT.Dom.create(\"hr\", {});\r\n\t\t\tvar hr4 = OAT.Dom.create(\"hr\", {});\r\n\r\n\t\t\tif (((cond.hideSubtotalOption === undefined) || (!cond.hideSubtotalOption))\r\n\t\t\t\t&& ((!self.autoPaging) || (self.colConditions.length == 0))\r\n\t\t\t) {\r\n\t\t\t\tvar subtotals = OAT.Dom.create(\"div\");\r\n\t\t\t\tif (disableColumnSort) {\r\n\t\t\t\t\tsubtotals.setAttribute(\"class\", \"first_popup_subdiv\");\r\n\t\t\t\t}\r\n\t\t\t\tvar subtotal_sel_div = document.createElement(\"div\");\r\n\t\t\t\tvar class_check_div = (cond.subtotals) ? \"check_item_img\" : \"uncheck_item_img\";\r\n\t\t\t\tif (self.isSD) { //android\r\n\t\t\t\t\tvar class_check_div = (cond.subtotals) ? \"check_item_img_small\" : \"uncheck_item_img_small\";\r\n\t\t\t\t}\r\n\t\t\t\tsubtotal_sel_div.setAttribute(\"class\", class_check_div);\r\n\t\t\t\tOAT.Dom.attach(subtotal_sel_div, \"click\", function () {\r\n\t\t\t\t\tvar checkedClass = \"check_item_img\"\r\n\t\t\t\t\tvar unCheckedClass = \"uncheck_item_img\"\r\n\t\t\t\t\tif (self.isSD) { //android\r\n\t\t\t\t\t\tcheckedClass = \"check_item_img_small\"\r\n\t\t\t\t\t\tunCheckedClass = \"uncheck_item_img_small\"\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tcond.subtotals = !(this.getAttribute(\"class\") === checkedClass);\r\n\t\t\t\t\tvar newClass = (this.getAttribute(\"class\") === checkedClass) ? unCheckedClass : checkedClass;\r\n\t\t\t\t\tthis.setAttribute(\"class\", newClass);\r\n\t\t\t\t\tjQuery(this).find(\"i\")[0].textContent = cond.subtotals ? \"check_box\" : \"check_box_outline_blank\";\r\n\t\t\t\t\tself.stateChanged = true;\r\n\t\t\t\t\t\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tvar datastr = \"<DATA event=\\\"SubtotalsChanged\\\" name=\\\"\" + self.columns[dimensionNumber].getAttribute(\"name\") + \"\\\" displayName=\\\"\" + self.columns[dimensionNumber].getAttribute(\"displayName\") + \"\\\"  subtotals=\\\"\" + cond.subtotals + \"\\\">\"\r\n\t\t\t\t\t\tdatastr = datastr + \"</DATA>\"\r\n\t\t\t\t\t\tif (qv.util.isGeneXusPreview())\r\n\t\t\t\t\t\t\twindow.external.SendText(self.QueryViewerCollection[self.IdForQueryViewerCollection].ControlName, datastr);\r\n\t\t\t\t\t} catch (error) { }\r\n\r\n\t\t\t\t\t\r\n\t\t\t\t\tself.getDataForPivot(self.UcId, 1, self.rowsPerPage, true, cond.dataField, \"\", \"\", \"\")\r\n\t\t\t\t\t\r\n\t\t\t\t});\r\n\r\n\t\t\t\tvar sl = OAT.Dom.create(\"label\");\r\n\t\t\t\t\r\n\t\t\t\tOAT.addImageNode(sl, cond.subtotals ? \"check_box\" : \"check_box_outline_blank\", \"\");\r\n\t\t\t\t\r\n\t\t\t\tOAT.addTextNode(sl, self.translations.GXPL_QViewerJSSubtotals/*gx.getMessage(\"GXPL_QViewerJSSubtotals\")*/)\r\n\t\t\t\tsl.htmlFor = \"pivot_checkbox_subtotals\";\r\n\t\t\t\tsubtotal_sel_div.appendChild(sl);\r\n\t\t\t\tOAT.Dom.append([subtotals, subtotal_sel_div]);\r\n\t\t\t\ttoAppend.push(subtotals);\r\n\t\t\t\ttoAppend.push(hr2);\r\n\t\t\t}\r\n\r\n\t\t\tif ((self.stateChanged) || (self.pivotStateChanged())) {\r\n\t\t\t\tvar restoreview = OAT.Dom.create(\"div\");\r\n\t\t\t\tvar restoreview_sel_div = document.createElement(\"div\");\r\n\r\n\t\t\t\tOAT.Dom.attach(restoreview_sel_div, \"click\", function () {\r\n\t\t\t\t\t\tself.cleanStateWhenServerPagination();\r\n\t\t\t\t\t\tself.getDataForPivot(self.UcId, 1, self.rowsPerPage, true, cond.dataField, \"\", \"\", \"\")\r\n\t\t\t\t\t\trefresh(); self.stateChanged = false;\r\n\t\t\t\t\t\r\n\t\t\t\t});\r\n\r\n\r\n\t\t\t\tvar rl = OAT.Dom.create(\"label\");\r\n\t\t\t\tOAT.addTextNode(rl, self.translations.GXPL_QViewerJSRestoreDefaultView /*gx.getMessage(\"GXPL_QViewerJSRestoreDefaultView\")*/)\r\n\t\t\t\trl.setAttribute(\"id\", \"restore_default_view\");\r\n\t\t\t\trl.htmlFor = \"pivot_checkbox_restoreview\";\r\n\t\t\t\trl.setAttribute(\"class\", \"pivot_checkbox_restoreview\");\r\n\t\t\t\trestoreview_sel_div.appendChild(rl);\r\n\t\t\t\tOAT.Dom.append([restoreview, restoreview_sel_div]);\r\n\t\t\t\ttoAppend.push(restoreview);\r\n\t\t\t}\r\n\r\n\t\t\tvar appendActionsSeparator = false;\r\n\r\n\t\t\t/* for pivoting purpuses*/\r\n\t\t\tif (measures.length > 0) {\r\n\t\t\t\tvar pivotpurp = OAT.Dom.create(\"div\");\r\n\t\t\t\tvar pivotpurp_sel_div = document.createElement(\"div\");\r\n\r\n\t\t\t\tOAT.Dom.attach(pivotpurp_sel_div, \"click\", function () {\r\n\t\t\t\t\t\r\n\t\t\t\t\t\tself.stateChanged = true;\r\n\t\t\t\t\t\tself.changedFromColumnToRow(dimensionNumber);\r\n\t\t\t\t\t\tself.getDataForPivot(self.UcId, 1, self.rowsPerPage, true, cond.dataField, \"\", \"\", \"\")\r\n\t\t\t\t\t\trefresh();\r\n\t\t\t\t\t\r\n\t\t\t\t});\r\n\r\n\t\t\t\tvar pvpl = OAT.Dom.create(\"label\");\r\n\t\t\t\tif (self.rowConditions.indexOf(dimensionNumber) != -1)\r\n\t\t\t\t\tOAT.addTextNode(pvpl, self.translations.GXPL_QViewerJSPivotDimensionToColumn /*gx.getMessage(\"GXPL_QViewerJSPivotDimensionToColumn\")*/)\r\n\t\t\t\telse\r\n\t\t\t\t\tOAT.addTextNode(pvpl, self.translations.GXPL_QViewerJSPivotDimensionToRow /*gx.getMessage(\"GXPL_QViewerJSPivotDimensionToRow\")*/)\r\n\r\n\t\t\t\tpvpl.htmlFor = \"pivot_checkbox_restoreview\";\r\n\t\t\t\tpvpl.setAttribute(\"class\", \"pivot_checkbox_restoreview\");\r\n\t\t\t\tpvpl.setAttribute(\"id\", \"move_to_column\");\r\n\r\n\t\t\t\tpivotpurp_sel_div.appendChild(pvpl);\r\n\t\t\t\tOAT.Dom.append([pivotpurp, pivotpurp_sel_div]);\r\n\t\t\t\ttoAppend.push(pivotpurp);\r\n\t\t\t\tappendActionsSeparator = true;\r\n\t\t\t}\r\n\t\t\t/* end pivoting option*/\r\n\r\n\t\t\t/*for Ipad & Iphone move to top filter*/\r\n\t\t\tif (measures.length > 0) {\r\n\t\t\t\t\r\n\t\t\t\tif (OAT.isSD()) {\r\n\t\t\t\t\tif (self.filterIndexes.indexOf(dimensionNumber) === -1) {\r\n\t\t\t\t\t\tvar Ipadpurp = OAT.Dom.create(\"div\");\r\n\t\t\t\t\t\tvar Ipadpurp_sel_div = document.createElement(\"div\");\r\n\r\n\r\n\t\t\t\t\t\tOAT.Dom.attach(Ipadpurp_sel_div, \"click\", function () {\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tself.getOrderReferenceProg(dimensionNumber);\r\n\t\t\t\t\t\t\t\trefresh();\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tvar ippl = OAT.Dom.create(\"label\");\r\n\t\t\t\t\t\tOAT.addTextNode(ippl, self.translations.GXPL_QViewerJSMoveToFilterBar /*gx.getMessage(\"GXPL_QViewerJSMoveToFilterBar\")*/)\r\n\t\t\t\t\t\tippl.htmlFor = \"pivot_checkbox_movetocolumn\";\r\n\t\t\t\t\t\tIpadpurp_sel_div.appendChild(ippl);\r\n\r\n\t\t\t\t\t\tOAT.Dom.append([Ipadpurp, Ipadpurp_sel_div]);\r\n\t\t\t\t\t\ttoAppend.push(Ipadpurp);\r\n\t\t\t\t\t\tappendActionsSeparator = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t/*end move to top filter*/\r\n\r\n\t\t\tif (appendActionsSeparator)\r\n\t\t\t\ttoAppend.push(hr4);\r\n\r\n\t\t\tvar distinct = OAT.Dom.create(\"div\");\r\n\t\t\tdistinct.setAttribute(\"class\", \"last_div_popup\");\r\n\t\t\tvar br1, br2, br3;\r\n\t\t\tif (!OAT.isIE()) {\r\n\t\t\t\tbr1 = OAT.Dom.create(\"br\"); var br2 = OAT.Dom.create(\"br\"); var br3 = OAT.Dom.create(\"br\");\r\n\t\t\t} else {\r\n\t\t\t\tbr1 = OAT.Dom.create(\"span\"); var br2 = OAT.Dom.create(\"span\"); var br3 = OAT.Dom.create(\"span\");\r\n\t\t\t}\r\n\t\t\ttoAppend.push(distinct);\r\n\r\n\t\t\tOAT.Dom.append(toAppend);\r\n\r\n\t\t\tself.distinctDivs(cond, distinct, dimensionNumber);\r\n\r\n\t\t\tif (!disableColumnSort) {\r\n\t\t\t\t/* this needs to be here because of IE :/ */\r\n\t\t\t\tasc.checked = (cond.sort == 1) || (cond.sort == 0);\r\n\t\t\t\tasc.__checked = asc.checked;\r\n\t\t\t\tdesc.checked = (cond.sort == -1) || (cond.sort == 2);\r\n\t\t\t\tdesc.__checked = desc.checked;\r\n\t\t\t}\r\n\r\n\r\n\t\t\t//for smart device center pop-up\r\n\t\t\tif (self.isSD) {//android\r\n\t\t\t\tsetTimeout(function () {\r\n\r\n\t\t\t\t\tvar screenWidth = window.innerWidth;\r\n\t\t\t\t\tvar initialPopUpWidth = jQuery(\".oat_winrect_container\")[0].clientWidth\r\n\r\n\r\n\t\t\t\t\tif (initialPopUpWidth == 0) {\r\n\t\t\t\t\t\tvar last = jQuery(\".oat_winrect_container\").length;\r\n\t\t\t\t\t\tinitialPopUpWidth = jQuery(\".oat_winrect_container\")[last - 1].clientWidth\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\tif (initialPopUpWidth < 245) {\r\n\t\t\t\t\t\tinitialPopUpWidth = 245\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar padding = (screenWidth - initialPopUpWidth) / 2 + jQuery(window).scrollLeft()\r\n\r\n\t\t\t\t\tjQuery(\".oat_winrect_container\").css({ left: padding + \"px\", width: initialPopUpWidth + \"px\" })\r\n\r\n\r\n\t\t\t\t}, 50)\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tthis.updateRowConditions = function(dimensionNumber, measures, fromFilters){\r\n\t\t\tvar addCol = false\r\n\t\t\tvar unhiddenDim = self.initRowConditions.length + self.initColConditions.length <= self.rowConditions.length + self.colConditions.length\r\n\t\t\tif (unhiddenDim) addCol = true;\r\n\t\t\t\r\n\t\t\tvar tempRowConditions = [];\r\n\t\t\tfor (var nI = 0; nI < self.initRowConditions.length - (measures.length - 1); nI++) {\r\n\t\t\t\tif (self.initRowConditions[nI] == dimensionNumber) {\r\n\t\t\t\t\ttempRowConditions.push(dimensionNumber)\r\n\t\t\t\t}\r\n\t\t\t\tif (self.rowConditions.indexOf(self.initRowConditions[nI]) > -1) {\r\n\t\t\t\t\ttempRowConditions.push(self.initRowConditions[nI])\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfor (var nI = 0; nI < self.initColConditions.length; nI++) {\r\n\t\t\t\tif (self.initColConditions[nI] == dimensionNumber) {\r\n\t\t\t\t\ttempRowConditions.push(dimensionNumber)\r\n\t\t\t\t}\r\n\t\t\t\tif (self.rowConditions.indexOf(self.initColConditions[nI]) > -1) {\r\n\t\t\t\t\ttempRowConditions.push(self.initColConditions[nI])\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfor (var nI = 0; nI < self.initFilterIndexes.length; nI++) {\r\n\t\t\t\tif ((self.initFilterIndexes[nI] == dimensionNumber) && (tempRowConditions.indexOf(dimensionNumber) == -1)){ \r\n\t\t\t\t\ttempRowConditions.push(dimensionNumber)\r\n\t\t\t\t}\r\n\t\t\t\tif (self.rowConditions.indexOf(self.initFilterIndexes[nI]) > -1) {\r\n\t\t\t\t\tif (tempRowConditions.indexOf(self.initFilterIndexes[nI]) == -1)\r\n\t\t\t\t\t\ttempRowConditions.push(self.initFilterIndexes[nI])\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (tempRowConditions.indexOf(dimensionNumber) < 0) {\r\n\t\t\t\t\ttempRowConditions.push(dimensionNumber)\r\n\t\t\t}\r\n\t\t\tif (addCol) {\r\n\t\t\t\tfor (var nO = 0; nO < self.rowConditions.length; nO++){\r\n\t\t\t\t\tif (tempRowConditions.indexOf(self.rowConditions[nO]) < 0)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttempRowConditions.push(self.rowConditions[nO])\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\ttempRowConditions.sort((function () {\r\n\t\t\t\treturn function (a, b) {\r\n\t\t\t\t\treturn (a == b ? 0 : (a < b ? -1 : 1));\r\n\t\t\t\t};\r\n\t\t\t})(0));\r\n\t\t\tfor (var nI = self.initRowConditions.length - (measures.length - 1); nI < Math.min(self.initRowConditions.length , self.dataColumnIndex); nI++) {\r\n\t\t\t\tif (tempRowConditions.indexOf(self.initRowConditions[nI]) < 0)\r\n\t\t\t\t\ttempRowConditions.push(self.initRowConditions[nI])\r\n\t\t\t}\r\n\r\n\t\t\tself.rowConditions = [];\r\n\t\t\tfor (var nI = 0; nI < tempRowConditions.length; nI++) {\r\n\t\t\t\tself.rowConditions[nI] = tempRowConditions[nI];\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tthis.changedFromColumnToRow = function (dimensionNumber) {\r\n\r\n\t\t\tvar index = self.rowConditions.indexOf(dimensionNumber);\r\n\t\t\tvar axis = \"columns\";\r\n\t\t\tvar position = 0;\r\n\t\t\tif (index != -1) { //when move to row\r\n\t\t\t\tself.rowConditions.splice(index, 1);\r\n\t\t\t\tif (measures.length > 1)\r\n\t\t\t\t\tself.colConditions = [dimensionNumber].concat(self.colConditions);\r\n\t\t\t\telse\r\n\t\t\t\t\tself.colConditions.push(dimensionNumber);\r\n\t\t\t\tposition = self.colConditions.indexOf(dimensionNumber);\r\n\t\t\t} else {\r\n\t\t\t\t\r\n\t\t\t\t\taxis = \"rows\";\r\n\t\t\t\t\tindex = self.colConditions.indexOf(dimensionNumber);\r\n\t\t\t\t\tself.colConditions.splice(index, 1);\r\n\t\t\t\t\t\r\n\t\t\t\t\tself.updateRowConditions(dimensionNumber, measures, false);\r\n\t\t\t\t\tposition = self.rowConditions.indexOf(dimensionNumber);\r\n\t\t\t\t\r\n\t\t\t}\r\n\r\n\t\t\tself.onDragundDropEventHandle(dimensionNumber, axis, position);\r\n\t\t}\r\n\r\n\t\t\r\n\r\n\t\tthis.getDelFilterReference = function (index) {\r\n\t\t\treturn function () {\r\n\t\t\t\tvar idx = self.filterIndexes.indexOf(index);\r\n\t\t\t\tif (idx != -1) {\r\n\t\t\t\t\tself.filterIndexes.splice(idx, 1);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tself.updateRowConditions(index, measures, true);\r\n\t\t\t\t\r\n\t\t\t\tfor (var ifs = 0; ifs < self.filterDiv.selects.length; ifs++) {\r\n\t\t\t\t\tif (index == self.filterDiv.selects[ifs].filterIndex) {\r\n\t\t\t\t\t\tself.filterDiv.selects.splice(ifs, 1);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tself.stateChanged = true\r\n\t\t\t\t\r\n\t\t\t\tself.onDragundDropEventHandle(index, \"rows\", self.rowConditions.indexOf(index))\r\n\r\n\t\t\t\tself.DiseablePivot();\r\n\t\t\t\tsetTimeout(function () {\r\n\t\t\t\t\t\r\n\t\t\t\t\t\tself.conditions[index].topFilterValue = \"[all]\"\r\n\t\t\t\t\t\tself.getDataForPivot(self.UcId, 1, self.rowsPerPage, true, self.conditions[index].dataField, { op: \"all\", values: \"\", dim: index }, \"\", \"\")\r\n\t\t\t\t\t\r\n\t\t\t\t\tself.EneablePivot();\r\n\t\t\t\t}, 200)\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.valueIsShowed = function (value, dimensionNumber) {\r\n\t\t\t\r\n\t\t\t\tif (self.conditions[dimensionNumber].state == \"all\") {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t} else if (self.conditions[dimensionNumber].state == \"none\") {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t} else if (self.conditions[dimensionNumber].blackList.indexOf(value) != -1) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t} else if (self.conditions[dimensionNumber].distinctValues.indexOf(value) != -1) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t} else if (self.conditions[dimensionNumber].defaultAction == \"Exclude\") {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\r\n\t\tthis.distinctDivs = function (cond, div, dimensionNumber, allFilters) { /* set of distinct values checkboxes */\r\n\t\t\tvar getPair = function (text, id) {\r\n\t\t\t\tvar div = OAT.Dom.create(\"div\");\r\n\r\n\t\t\t\tvar checkedClass = \"check_item_img\"\r\n\t\t\t\tvar unCheckedClass = \"uncheck_item_img\"\r\n\t\t\t\tif (self.isSD) {//android\r\n\t\t\t\t\tcheckedClass = \"check_item_img_small\"\r\n\t\t\t\t\tunCheckedClass = \"uncheck_item_img_small\"\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tOAT.addImageNode(div, self.valueIsShowed(value, dimensionNumber) ? \"check_box\" : \"check_box_outline_blank\", \"\");\r\n\r\n\t\t\t\tvar class_check_div = (cond.blackList.indexOf(value) == -1) && self.valueIsShowed(value, dimensionNumber) ? checkedClass : unCheckedClass;\r\n\t\t\t\t\r\n\t\t\t\t\tvar class_check_div = self.valueIsShowed(value, dimensionNumber) ? checkedClass : unCheckedClass;\r\n\t\t\t\t\r\n\t\t\t\tdiv.setAttribute(\"class\", class_check_div);\r\n\t\t\t\tvar ch = OAT.Dom.create(\"input\");\r\n\t\t\t\tch.type = \"checkbox\";\r\n\t\t\t\tch.id = id;\r\n\t\t\t\tvar t = OAT.Dom.create(\"label\");\r\n\t\t\t\tOAT.addTextNode(t, text)\r\n\t\t\t\tt.htmlFor = id;\r\n\t\t\t\tdiv.appendChild(t);\r\n\t\t\t\treturn [div, ch];\r\n\t\t\t}\r\n\r\n\r\n\t\t\tvar getRefBool = function (checked, value) {\r\n\r\n\r\n\t\t\t\tsetTimeout(function () {\r\n\r\n\t\t\t\t\t\tvar oper = \"pop\";\r\n\t\t\t\t\t\tif (!checked) {\r\n\t\t\t\t\t\t\toper = \"push\";\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tself.getDataForPivot(self.UcId, 1, self.rowsPerPage, true, self.conditions[dimensionNumber].dataField, { op: oper, values: value, dim: dimensionNumber }, \"\", \"\")\r\n\r\n\t\t\t\t\t\tself.stateChanged = true;\r\n\t\t\t\t\t\tself.onFilteredChangedEventHandleWhenServerPagination(dimensionNumber);\r\n\t\t\t\t\t\tself.EneablePivot();\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t}, 200);\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar allRef = function () {\r\n\t\t\t\tself.DiseablePivot();\r\n\r\n\t\t\t\tsetTimeout(function () {\r\n\r\n\r\n\t\t\t\t\t\r\n\t\t\t\t\t\tvar oper = \"all\";\r\n\t\t\t\t\t\t\r\n\r\n\t\t\t\t\t\tself.getDataForPivot(self.UcId, 1, self.rowsPerPage, true, self.conditions[dimensionNumber].dataField, { op: oper, values: \"\", dim: dimensionNumber }, \"\", \"\")\r\n\r\n\t\t\t\t\t\tself.stateChanged = true;\r\n\t\t\t\t\t\tself.onFilteredChangedEventHandleWhenServerPagination(dimensionNumber);\r\n\t\t\t\t\t\tself.distinctDivs(cond, div, dimensionNumber);\r\n\t\t\t\t\t\tself.EneablePivot();\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\r\n\r\n\t\t\t\t\t\r\n\t\t\t\t}, 200)\r\n\t\t\t}\r\n\r\n\t\t\tvar noneRef = function () {\r\n\t\t\t\tself.DiseablePivot()\r\n\r\n\t\t\t\tsetTimeout(function () {\r\n\t\t\t\t\t\r\n\t\t\t\t\t\tvar oper = \"none\";\r\n\t\t\t\t\t\t\r\n\r\n\t\t\t\t\t\tself.getDataForPivot(self.UcId, 1, self.rowsPerPage, true, self.conditions[dimensionNumber].dataField, { op: oper, values: \"\", dim: dimensionNumber }, \"\", \"\")\r\n\r\n\t\t\t\t\t\tself.stateChanged = true;\r\n\t\t\t\t\t\tself.onFilteredChangedEventHandleWhenServerPagination(dimensionNumber);\r\n\t\t\t\t\t\tself.distinctDivs(cond, div, dimensionNumber);\r\n\t\t\t\t\t\tself.EneablePivot();\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t}, 200)\r\n\t\t\t}\r\n\r\n\t\t\tvar reverseRef = function () {\r\n\t\t\t\tself.DiseablePivot();\r\n\r\n\t\t\t\tsetTimeout(function () {\r\n\t\t\t\t\t\r\n\t\t\t\t\t\tvar oper = \"reverse\";\r\n\t\t\t\t\t\tself.getDataForPivot(self.UcId, 1, self.rowsPerPage, true, self.conditions[dimensionNumber].dataField, { op: oper, values: \"\", dim: dimensionNumber }, \"\", \"\")\r\n\r\n\t\t\t\t\t\tself.stateChanged = true;\r\n\t\t\t\t\t\tself.onFilteredChangedEventHandleWhenServerPagination(dimensionNumber);\r\n\t\t\t\t\t\tself.distinctDivs(cond, div, dimensionNumber);\r\n\t\t\t\t\t\tself.EneablePivot();\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\r\n\r\n\t\t\t\t\t\r\n\t\t\t\t}, 200)\r\n\t\t\t}\r\n\r\n\t\t\tvar searchFilterClick = function () {\r\n\t\t\t\tself.getValuesForColumn(self.UcId, dimensionNumber, this.value)\r\n\t\t\t}\r\n\r\n\t\t\tOAT.Dom.clear(div);\r\n\t\t\tvar d = OAT.Dom.create(\"div\");\r\n\t\t\td.setAttribute(\"class\", \"div_buttons_popup\");\r\n\t\t\tvar all = document.createElement(\"button\");\r\n\t\t\tall.textContent = self.translations.GXPL_QViewerJSAll; /*gx.getMessage(\"GXPL_QViewerJSAll\");*/\r\n\t\t\tall.setAttribute(\"class\", \"btn\");\r\n\t\t\tjQuery(all).click(allRef);\r\n\r\n\t\t\tvar none = document.createElement(\"button\");\r\n\t\t\tnone.textContent = self.translations.GXPL_QViewerJSNone //gx.getMessage(\"GXPL_QViewerJSNone\");\r\n\t\t\tnone.setAttribute(\"class\", \"btn\");\r\n\t\t\tjQuery(none).click(noneRef);\r\n\r\n\t\t\tvar reverse = document.createElement(\"button\");\r\n\t\t\treverse.textContent = self.translations.GXPL_QViewerJSReverse //gx.getMessage(\"GXPL_QViewerJSReverse\");\r\n\t\t\treverse.setAttribute(\"class\", \"btn\");\r\n\t\t\tjQuery(reverse).click(reverseRef);\r\n\r\n\r\n\t\t\tOAT.Dom.append([d, all, none, reverse], [div, d]);\r\n\r\n\t\t\t\r\n\t\t\t\tvar div_search = OAT.Dom.create(\"div\");\r\n\t\t\t\tdiv_search.setAttribute(\"class\", \"div_filter_input\");\r\n\r\n\t\t\t\t\r\n\t\t\t\t\tvar searchInput = document.createElement(\"input\");\r\n\t\t\t\t\tOAT.addImageNode(div_search, \"search\", \"\");\r\n\t\t\t\t\tsearchInput.textContent = \"none\";\r\n\t\t\t\t\tsearchInput.setAttribute(\"class\", \"search_input\");\r\n\t\t\t\t\tsearchInput.setAttribute(\"type\", \"text\");\r\n\t\t\t\t\tsearchInput.setAttribute(\"label\", self.translations.GXPL_QViewerSearch/*gx.getMessage(\"GXPL_QViewerSearch\")*/);\r\n\t\t\t\t\tsearchInput.setAttribute(\"title\", self.translations.GXPL_QViewerSearch/*gx.getMessage(\"GXPL_QViewerSearch\")*/);\r\n\t\t\t\t\tsearchInput.setAttribute(\"placeholder\", self.translations.GXPL_QViewerSearch /*gx.getMessage(\"GXPL_QViewerSearch\")*/);\r\n\t\t\t\t\tsearchInput.setAttribute(\"id\", self.UcId + dimensionNumber);\r\n\t\t\t\t\tjQuery(searchInput).keyup(searchFilterClick);\r\n\r\n\t\t\t\t\tOAT.Dom.append([div_search, searchInput], [div, div_search]);\r\n\t\t\t\t\r\n\t\t\t\r\n\r\n\t\t\t\r\n\r\n\t\t\t\tvar fixHeigthDiv = OAT.Dom.create(\"div\");\r\n\t\t\t\t\r\n\t\t\t\t\tcond = self.conditions[dimensionNumber]\r\n\t\t\t\t\r\n\t\t\t\tif (cond.distinctValues.length <= 9) {\r\n\t\t\t\t\tfixHeigthDiv.setAttribute(\"class\", \"pivot_popup_auto\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfixHeigthDiv.setAttribute(\"class\", \"pivot_popup_fix\");\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\tfor (var i = 0; i < cond.distinctValues.length; i++) {\r\n\r\n\t\t\t\t\tvar value = cond.distinctValues[i];\r\n\t\t\t\t\tif (!\r\n\t\t\t\t\t\t (\r\n\t\t\t\t\t\t \t (self.conditions[dimensionNumber].hasNull) && \r\n\t\t\t\t\t\t \t (value.trimpivot() == self.defaultPicture.getAttribute(\"textForNullValues\"))\r\n\t\t\t\t\t\t )\r\n\t\t\t\t\t\t) {\r\n\r\n\t\t\t\t\t\tvar pict_value = self.dimensionPictureValue(value, dimensionNumber);\r\n\t\t\t\t\t\tpict_value = pict_value.replace(/\\&amp;/g, \"&\").replace(/\\u00A0/g, \" \")\r\n\t\t\t\t\t\tif (pict_value.length > 33) {\r\n\t\t\t\t\t\t\tvar resto = (pict_value.substring(32, pict_value.length).trimpivot().length > 0) ? '...' : '';\r\n\t\t\t\t\t\t\tpict_value = pict_value.substring(0, 32) + resto\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tpict_value = pict_value.replace(/ /g, \"\\u00A0\") + '\\u00A0\\u00A0\\u00A0\\u00A0\\u00A0'\r\n\t\t\t\t\t\tvar pair = getPair(pict_value, \"pivot_distinct_\" + i);\r\n\t\t\t\t\t\tpair[0].setAttribute('value', value);\r\n\t\t\t\t\t\tfixHeigthDiv.appendChild(pair[0]);\r\n\r\n\r\n\r\n\t\t\t\t\t\tOAT.Dom.attach(pair[0], \"click\", function () {\r\n\t\t\t\t\t\t\tself.DiseablePivot();\r\n\r\n\t\t\t\t\t\t\tvar checkedClass = \"check_item_img\"\r\n\t\t\t\t\t\t\tvar unCheckedClass = \"uncheck_item_img\"\r\n\t\t\t\t\t\t\tif (self.isSD) {//android\r\n\t\t\t\t\t\t\t\tcheckedClass = \"check_item_img_small\"\r\n\t\t\t\t\t\t\t\tunCheckedClass = \"uncheck_item_img_small\"\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tvar checked = !(this.getAttribute(\"class\") === checkedClass);\r\n\t\t\t\t\t\t\tvar newClass = (this.getAttribute(\"class\") === checkedClass) ? unCheckedClass : checkedClass;\r\n\t\t\t\t\t\t\tthis.setAttribute(\"class\", newClass);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tjQuery(this).find(\"i\")[0].textContent = checked ? \"check_box\" : \"check_box_outline_blank\";\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tgetRefBool(checked, this.getAttribute(\"value\"));//this.textContent);            \t\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tfixHeigthDiv.setAttribute(\"ucid\", self.UcId);\r\n\t\t\t\tfixHeigthDiv.setAttribute(\"columnnumber\", dimensionNumber);\r\n\t\t\t\tfixHeigthDiv.setAttribute(\"id\", \"values_\" + self.UcId + \"_\" + dimensionNumber)\r\n\t\t\t\tdiv.appendChild(fixHeigthDiv);\r\n\t\t\t\r\n\t\t}\r\n\r\n\r\n\t\tthis.DiseablePivot = function () {\r\n\t\t\ttry {\r\n\t\t\t\tvar divDis = jQuery('<div class=\"disable_popup\" ></div>');\r\n\r\n\t\t\t\tif (jQuery(\"#\" + self.containerName).length > 0) {\r\n\t\t\t\t\tvar ht = Math.min(jQuery(\"#\" + UcId + \"_\" + self.query + \"_pivot_page\")[0].clientHeight\r\n\t\t\t\t\t\t+ jQuery(\"#\" + UcId + \"_\" + self.query + \"_pivot_content\")[0].clientHeight,\r\n\t\t\t\t\t\tjQuery(\"#\" + self.containerName)[0].clientHeight\r\n\t\t\t\t\t)\r\n\t\t\t\t\tvar wd = Math.min(jQuery(\"#\" + UcId + \"_\" + self.query)[0].clientWidth,\r\n\t\t\t\t\t\tjQuery(\"#\" + self.containerName)[0].clientWidth\r\n\t\t\t\t\t)\r\n\t\t\t\t\tif (jQuery(\"#\" + self.containerName).closest(\".gxwebcomponent\").length > 0) { //for gxQuery\r\n\t\t\t\t\t\tif (jQuery(\"#\" + UcId + \"_\" + self.query + \"_tablePagination\").length > 0) {\r\n\t\t\t\t\t\t\tht = ht + jQuery(\"#\" + UcId + \"_\" + self.query + \"_tablePagination\")[0].clientHeight\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tjQuery(divDis).css({\r\n\t\t\t\t\t\t\t'width': wd,\r\n\t\t\t\t\t\t\t'height': ht,\r\n\t\t\t\t\t\t\t'position': 'absolute',\r\n\t\t\t\t\t\t\t'top': jQuery(\"#\" + self.containerName)[0].offsetTop,//jQuery(\"#\" + self.containerName)[0].offsetTop,\r\n\t\t\t\t\t\t\t'left': jQuery(\"#\" + self.containerName)[0].offsetLeft,\r\n\t\t\t\t\t\t\t'background-color': 'rgba(0,0,0,0.1)',\r\n\t\t\t\t\t\t\t'cursor': 'wait',\r\n\t\t\t\t\t\t\t'z-index': 99\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tjQuery(divDis).css({\r\n\t\t\t\t\t\t\t'width': wd,\r\n\t\t\t\t\t\t\t'height': ht,\r\n\t\t\t\t\t\t\t'position': 'absolute',\r\n\t\t\t\t\t\t\t'top': jQuery(\"#\" + self.containerName)[0].offsetTop,//jQuery(\"#\" + self.containerName).offset().top,//0 \t\r\n\t\t\t\t\t\t\t'left': jQuery(\"#\" + UcId + \"_\" + self.query).offset().left,\r\n\t\t\t\t\t\t\t'background-color': 'rgba(0,0,0,0.1)',\r\n\t\t\t\t\t\t\t'cursor': 'wait',\r\n\t\t\t\t\t\t\t'z-index': 999\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tjQuery(\"#\" + self.containerName).append(divDis)\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar ht = Math.min(jQuery(\"#\" + UcId + \"_\" + self.query).closest(\".gx_usercontrol\").find(\".pivot_filter_div\")[0].clientHeight\r\n\t\t\t\t\t\t+ jQuery(\"#\" + UcId + \"_\" + self.query).closest(\".conteiner_table_div\")[0].clientHeight,\r\n\t\t\t\t\t\tjQuery(\"#\" + UcId + \"_\" + self.query).closest(\".gx_usercontrol\")[0].clientHeight\r\n\t\t\t\t\t)\r\n\r\n\t\t\t\t\tvar wd = Math.min(jQuery(\"#\" + UcId + \"_\" + self.query)[0].clientWidth,\r\n\t\t\t\t\t\tjQuery(\"#\" + UcId + \"_\" + self.query).closest(\".gx_usercontrol\")[0].clientWidth\r\n\t\t\t\t\t)\r\n\r\n\t\t\t\t\tif (jQuery(\"#\" + UcId + \"_\" + self.query).closest(\".gx_usercontrol\").find(\".pivot_pag_div\").length > 0) {\r\n\t\t\t\t\t\tht = ht + jQuery(\"#\" + UcId + \"_\" + self.query).closest(\".gx_usercontrol\").find(\".pivot_pag_div\")[0].clientHeight\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tjQuery(divDis).css({\r\n\t\t\t\t\t\t'width': wd,\r\n\t\t\t\t\t\t'height': ht,\r\n\t\t\t\t\t\t'position': 'absolute',\r\n\t\t\t\t\t\t'top': jQuery(\"#\" + UcId + \"_\" + self.query).closest(\".gx_usercontrol\")[0].offsetTop,\r\n\t\t\t\t\t\t'left': jQuery(\"#\" + UcId + \"_\" + self.query).closest(\".gx_usercontrol\")[0].offsetLeft,\r\n\t\t\t\t\t\t'background-color': 'rgba(0,0,0,0.1)',\r\n\t\t\t\t\t\t'cursor': 'wait',\r\n\t\t\t\t\t\t'z-index': 99\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tjQuery(\"#\" + UcId + \"_\" + self.query).closest(\".gx_usercontrol\").append(divDis)\r\n\t\t\t\t}\r\n\t\t\t\tjQuery(\".oat_winrect_container\").block({ message: null })\r\n\t\t\t} catch (ERROR) { }\r\n\t\t}\r\n\r\n\t\tthis.EneablePivot = function () {\r\n\t\t\tjQuery(\".disable_popup\").remove()\r\n\t\t\twhile (jQuery(\".disable_popup\").length > 0) {\r\n\t\t\t\tjQuery(\".disable_popup\").remove()\r\n\t\t\t}\r\n\t\t\tjQuery(\".oat_winrect_container\").unblock()\r\n\t\t}\r\n\r\n\t\tthis.addExpandCollapseFunctionality = function (th, item, rowConditionNumber, expanded, rowDimension) {\r\n\t\t\tif (true) {\r\n\t\t\t\tvar divImg = OAT.Dom.create(\"div\", {});\r\n\r\n\t\t\t\tif (expanded) {\r\n\t\t\t\t\tdivImg.className += \" expanded\";\r\n\t\t\t\t\tOAT.addImageNode(divImg, \"remove\", \"\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdivImg.className += \" collapsed\";\r\n\t\t\t\t\tOAT.addImageNode(divImg, \"add\", \"\");\r\n\t\t\t\t}\r\n\t\t\t\tth.insertBefore(divImg, th.firstChild);\r\n\t\t\t\tth.style.paddingLeft = \"0px\";\r\n\r\n\t\t\t\tvar spanTxt = jQuery(th).find(\"#span_txt_pivot\")[0]\r\n\r\n\r\n\t\t\t\tif (rowDimension) {\r\n\t\t\t\t\tself.setExpandCollapseEventHandlers(divImg, item.value, \"DIMENSION\", self.rowConditions[rowConditionNumber], item);\r\n\t\t\t\t\tif ((self.QueryViewerCollection[self.IdForQueryViewerCollection].ItemDoubleClick == undefined) &&\r\n\t\t\t\t\t\t(self.QueryViewerCollection[self.IdForQueryViewerCollection].ItemClick == undefined) &&\r\n\t\t\t\t\t\t(!self.selection.Allow)) {\r\n\t\t\t\t\t\tself.setExpandCollapseEventHandlers(spanTxt, item.value, \"DIMENSION\", self.rowConditions[rowConditionNumber], item);\r\n\t\t\t\t\t\tjQuery(spanTxt).css({ cursor: \"pointer\" });\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tself.setExpandCollapseEventHandlers(divImg, item.value, \"DIMENSION\", self.colConditions[rowConditionNumber], item);\r\n\t\t\t\t\tif ((self.QueryViewerCollection[self.IdForQueryViewerCollection].ItemDoubleClick == undefined) &&\r\n\t\t\t\t\t\t(self.QueryViewerCollection[self.IdForQueryViewerCollection].ItemClick == undefined) &&\r\n\t\t\t\t\t\t(!self.selection.Allow)) {\r\n\t\t\t\t\t\tself.setExpandCollapseEventHandlers(spanTxt, item.value, \"DIMENSION\", self.colConditions[rowConditionNumber], item);\r\n\t\t\t\t\t\tjQuery(spanTxt).css({ cursor: \"pointer\" });\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t\treturn th;\r\n\t\t}\r\n\r\n\t\tthis.setClickEventHandlers = function (td, itemValue, MeasureOrDimension, dimensionNumber, itemData) {\r\n\t\t\tif ((!self.ShowMeasuresAsRows) || (self.h < 500)) {\r\n\t\t\t\tvar span = jQuery(td).find(\"#span_txt_pivot\")[0];\r\n\t\t\t\tif (span) {\r\n\t\t\t\t\tjQuery(span).data('itemValue', itemValue);\r\n\t\t\t\t\tjQuery(span).data('typeMorD', MeasureOrDimension);\r\n\t\t\t\t\tjQuery(span).data('numberMorD', dimensionNumber);\r\n\t\t\t\t\tjQuery(span).data('itemInfo', itemData);\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\tjQuery(td).data('itemValue', itemValue);\r\n\t\t\t\t\tjQuery(td).data('typeMorD', MeasureOrDimension);\r\n\t\t\t\t\tjQuery(td).data('numberMorD', dimensionNumber);\r\n\t\t\t\t\tjQuery(td).data('itemInfo', itemData);\r\n\t\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\tvar qViewer = self.QueryViewerCollection[IdForQueryViewerCollection];\r\n\t\t\t\t\tvar raiseItemClick = MeasureOrDimension == \"DIMENSION\" ? qViewer.Metadata.Axes[dimensionNumber].RaiseItemClick : qViewer.Metadata.Data[dimensionNumber].RaiseItemClick;\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (qViewer.ItemClick && raiseItemClick) {\r\n\t\t\t\t\t\tspan.onclick = function () { \r\n\t\t\t\t\t\t\tself.onClickEventHandle(this); \r\n\t\t\t\t\t\t\tif (self.selection.Allow){ \r\n\t\t\t\t\t\t\t\tself.onClickSelectNode(this);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tspan.classList.add(\"gx-qv-clickable-element\")\r\n\t\t\t\t\t} else if (self.selection.Allow){ \r\n\t\t\t\t\t\tspan.onclick = function () { \r\n\t\t\t\t\t\t\tself.onClickSelectNode(this); \r\n\t\t\t\t\t\t} \r\n\t\t\t\t\t}\t\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.setExpandCollapseEventHandlers = function (td, itemValue, MeasureOrDimension, dimensionNumber, itemData) {\r\n\t\t\tif ((!self.ShowMeasuresAsRows) || (self.h < 500)) {\r\n\t\t\t\tjQuery(td).data('itemValue', itemValue);\r\n\t\t\t\t//jQuery(td).data('typeMorD', MeasureOrDimension);\r\n\t\t\t\tjQuery(td).data('numberMorD', dimensionNumber);\r\n\t\t\t\tjQuery(td).data('itemInfoEC', itemData);\r\n\t\t\t\ttd.onclick = function () { \r\n\t\t\t\t\tself.onClickExpandCollapse(this); \r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.getPerFilterValue = function (prevFilterSelectedValue, actualfilterIndex) {\r\n\t\t\tvar hayfiltro = false;\r\n\t\t\tfor (var i = 0; i < prevFilterSelectedValue.length; i++) {\r\n\t\t\t\tif (prevFilterSelectedValue[i] != null) {\r\n\t\t\t\t\thayfiltro = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (!hayfiltro) return false;\r\n\r\n\t\t\tvar distinctPerFilterValue = [];\r\n\t\t\tfor (var i = 0; i < self.GeneralDataRows.length; i++) { //for each row\r\n\t\t\t\tvar coincide = true;\r\n\t\t\t\tfor (var j = 0; j < prevFilterSelectedValue.length; j++) {\r\n\t\t\t\t\tif (prevFilterSelectedValue[j] != null) {\r\n\t\t\t\t\t\tif (self.GeneralDataRows[i][self.filterIndexes[j]] != prevFilterSelectedValue[j]) {\r\n\t\t\t\t\t\t\tcoincide = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (coincide) {\r\n\t\t\t\t\tdistinctPerFilterValue.push(self.GeneralDataRows[i][self.filterIndexes[actualfilterIndex]])\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn distinctPerFilterValue;\r\n\r\n\t\t}\r\n\t\t\r\n\t\tthis.drawTitleDiv = function(){\r\n\t\t\tif (self.PivotTitle) { \r\n\t\t\t\tOAT.Dom.clear(self.TitleDiv);\r\n\t\t\t\t\t\t\r\n\t\t\t\tvar ua = navigator.userAgent.toLowerCase();\r\n\t\t\t\tvar isAndroid = ua.indexOf(\"android\") > -1;\r\n\t\t\t\tif ((OAT.isIE()) || OAT.isAndroid()) {\r\n\t\t\t\t\tself.TitleDiv.className += \" pivot_title_div\";\r\n\t\t\t\t} else {\r\n\t\t\t\t\tself.TitleDiv.classList.add(\"pivot_title_div\");\r\n\t\t\t\t}\r\n\t\t\t\r\n\t\t\t\tOAT.addTextNode(self.TitleDiv, self.PivotTitle)\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tthis.drawFilters = function () {\r\n\t\t\tvar savedValues = [];\r\n\t\t\tvar div = self.filterDiv;\r\n\t\t\tvar filterInfoIcon = OAT.Dom.create(\"div\");\r\n\t\t\tvar spanHover = OAT.Dom.create(\"span\");\r\n\r\n\t\t\tvar ua = navigator.userAgent.toLowerCase();\r\n\t\t\tvar isAndroid = ua.indexOf(\"android\") > -1;\r\n\t\t\tif (OAT.isIE() || OAT.isAndroid()) {\r\n\t\t\t\tself.filterDiv.className += \" pivot_filter_div\";\r\n\t\t\t} else {\r\n\t\t\t\tself.filterDiv.classList.add(\"pivot_filter_div\");\r\n\t\t\t}\r\n\t\t\tif (!self.isSD && self.filterIndexes.length == 0) {\r\n\t\t\t\tfilterInfoIcon.href = \"#\";\r\n\t\t\t\tfilterInfoIcon.setAttribute(\"class\", \"filterInfoUser\");\r\n\t\t\t\tspanHover.setAttribute(\"class\", \"spanHoverLabel\");\r\n\t\t\t\tspanHover.setAttribute(\"id\", \"filterSpanInfo\");\r\n\t\t\t\tOAT.addImageNode(filterInfoIcon, \"info\", \"\");\r\n\t\t\t\tOAT.addTextNode(spanHover, self.translations.GXPL_QViewerInfoUser /*gx.getMessage(\"GXPL_QViewerInfoUser\")*/);\r\n\t\t\t}\r\n\r\n\t\t\tfor (var i = 0; i < div.selects.length; i++) {\r\n\t\t\t\tsavedValues.push([div.selects[i].filterIndex, div.selects[i].selectedIndex, div.selects[i].value]);\r\n\t\t\t}\r\n\t\t\tOAT.Dom.clear(div);\r\n\t\t\tself.gd.addTarget(div);\r\n\t\t\tdiv.selects = [];\r\n\t\t\tif (!self.filterIndexes.length) {\r\n\t\t\t\tvar strng = self.translations.GXPL_QViewerJSDropFiltersHere;// gx.getMessage(\"GXPL_QViewerJSDropFiltersHere\");\r\n\r\n\t\t\t\tif (self.isSD) {\r\n\t\t\t\t\tstrng = \"\";\r\n\t\t\t\t}\r\n\r\n\r\n\r\n\t\t\t\tif ((strng[strng.length - 1] === \"\\\"\") || (strng[strng.length - 1] === \"'\") || (strng[strng.length - 1] === \"]\") || (strng[strng.length - 1] === \"}\") || (strng[strng.length - 1] === \"`\")) {\r\n\t\t\t\t\tstrng = strng.substring(0, strng.length - 1);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (strng != \"\") {\r\n\t\t\t\t\tvar spanText = document.createElement('span')\r\n\t\t\t\t\tspanText.textContent = strng;\r\n\t\t\t\t\tdiv.appendChild(spanText);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar loadItems = function () {\r\n\t\t\t\tvar s = this;\r\n\t\t\t\tvar actualValues = self.conditions[this.filterIndex].distinctValues;\r\n\t\t\t\tfor (var j = 0; j < actualValues.length; j++) {\r\n\t\t\t\t\tvar v = actualValues[j];\r\n\t\t\t\t\tif (self.conditions[this.filterIndex].filteredShowValues.indexOf(v) == -1) {\r\n\t\t\t\t\t\tself.conditions[this.filterIndex].filteredShowValues.push(v);\r\n\t\t\t\t\t\tif (v != \"#NuN#\") {\r\n\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\tOAT.Dom.option(self.dimensionPictureValue(v, this.filterIndex), v, s);\r\n\t\t\t\t\t\t\t} catch (Error) {\r\n\t\t\t\t\t\t\t\tOAT.Dom.option(v, v, s);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tOAT.Dom.option(\" \", v, s);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t//load all other items\r\n\t\t\t\tself.lastRequestValue = this.filterIndex; var columnNumber = this.filterIndex;\r\n\t\t\t\tif (self.conditions[columnNumber].previousPage < self.conditions[columnNumber].totalPages) {\r\n\t\t\t\t\t\r\n\t\t\t\t\tself.lastRequestAttributeValues = \"DrawFilters\"\r\n\t\t\t\t\tself.lastRequestAttributeColumnNumber = columnNumber\r\n\t\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\tself.requestAttributeValues(self.columns[this.filterIndex].getAttribute(\"dataField\"), 1, 0, \"\")\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar callgo = function () {\r\n\t\t\t\tself.stateChanged = true\r\n\t\t\t\t\r\n\t\t\t\t\tself.DiseablePivot();\r\n\t\t\t\t\tself.conditions[this.filterIndex].topFilterValue = this.value\r\n\t\t\t\t\tself.getDataForPivot(self.UcId, 1, self.rowsPerPage, true, self.conditions[this.filterIndex].dataField, { op: \"pagefilter\", values: this.value, dim: this.filterIndex }, \"\", \"\")\r\n\t\t\t\t\tself.EneablePivot();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t\r\n\r\n\t\t\t}\r\n\t\t\tvar prevFilterSelectedValue = [];\r\n\t\t\tvar loaded = [];\r\n\t\t\tfor (var i = 0; i < self.filterIndexes.length; i++) {\r\n\t\t\t\tif (loaded.indexOf(self.filterIndexes[i]) < 0) {\r\n\t\t\t\t\tloaded.push(self.filterIndexes[i])\r\n\t\t\t\t\tvar index = self.filterIndexes[i];\r\n\t\t\t\t\tvar s = OAT.Dom.create(\"select\");\r\n\t\t\t\t\ts.setAttribute(\"id\", \"page_select_\" + i)\r\n\t\t\t\t\tOAT.Dom.option(self.translations.GXPL_QViewerJSAllOption /*gx.getMessage(\"GXPL_QViewerJSAllOption\")*/, \"[all]\", s);\r\n\r\n\t\t\t\t\tvar actualValues;\r\n\t\t\t\t\t\r\n\t\t\t\t\tactualValues = []\r\n\t\t\t\t\t\r\n\r\n\t\t\t\t\tif (self.GeneralDistinctValues.length > 0) {\r\n\t\t\t\t\t\tfor (var j = 0; j < self.GeneralDistinctValues[index].length; j++) {\r\n\t\t\t\t\t\t\tvar v = self.GeneralDistinctValues[index][j];\r\n\t\t\t\t\t\t\tif (!actualValues) {\r\n\t\t\t\t\t\t\t\tif (v != \"#NuN#\") {\r\n\t\t\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\t\t\tOAT.Dom.option(self.dimensionPictureValue(v, index), v, s);\r\n\t\t\t\t\t\t\t\t\t} catch (Error) {\r\n\t\t\t\t\t\t\t\t\t\tOAT.Dom.option(v, v, s);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tOAT.Dom.option(\" \", v, s);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tif (actualValues.indexOf(v) != -1) {\r\n\t\t\t\t\t\t\t\t\tif (v != \"#NuN#\") {\r\n\t\t\t\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\t\t\t\tOAT.Dom.option(self.dimensionPictureValue(v, index), v, s);\r\n\t\t\t\t\t\t\t\t\t\t} catch (Error) {\r\n\t\t\t\t\t\t\t\t\t\t\tOAT.Dom.option(v, v, s);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tOAT.Dom.option(\" \", v, s);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\tvar pos = 0;\r\n\t\t\t\t\t\t\tfor (var j = 0; j < self.GeneralDistinctValues[index].length; j++) {\r\n\t\t\t\t\t\t\t\tvar v = self.GeneralDistinctValues[index][j];\r\n\t\t\t\t\t\t\t\tif (self.conditions[index].topFilterValue === v) {\r\n\t\t\t\t\t\t\t\t\ts.selectedIndex = pos + 1;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (!actualValues) {\r\n\t\t\t\t\t\t\t\t\tpos++;\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tif (actualValues.indexOf(v) != -1) {\r\n\t\t\t\t\t\t\t\t\t\tpos++;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} catch (error) {\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\r\n\t\t\t\t\t\tself.conditions[index].filteredShowValues = []\r\n\t\t\t\t\t\tvar actualValues = self.conditions[index].distinctValues;\r\n\t\t\t\t\t\tfor (var j = 0; j < actualValues.length; j++) {\r\n\t\t\t\t\t\t\tvar v = actualValues[j];\r\n\t\t\t\t\t\t\tif (self.conditions[index].filteredShowValues.indexOf(v) == -1) {\r\n\t\t\t\t\t\t\t\tself.conditions[index].filteredShowValues.push(v);\r\n\t\t\t\t\t\t\t\tif (v != \"#NuN#\") {\r\n\t\t\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\t\t\tOAT.Dom.option(self.dimensionPictureValue(v, index), v, s);\r\n\t\t\t\t\t\t\t\t\t} catch (Error) {\r\n\t\t\t\t\t\t\t\t\t\tOAT.Dom.option(v, v, s);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tOAT.Dom.option(\" \", v, s);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif ((self.conditions[index].topFilterValue != \"[all]\") /*&& (self.conditions[index].topFilterValue!=\"\")*/) {\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tvar v = self.conditions[index].topFilterValue\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tvar isInFilteredShowValues = -1;\r\n\t\t\t\t\t\t\tfor(var fV = 0; fV < self.conditions[index].filteredShowValues.length; fV++){\r\n\t\t\t\t\t\t\t\tif (String(self.conditions[index].filteredShowValues[fV]).trim() == String(v).trim()){\r\n\t\t\t\t\t\t\t\t\tisInFilteredShowValues = fV;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (isInFilteredShowValues > -1) {//(self.conditions[index].filteredShowValues.indexOf(v) != -1) { //value already load\r\n\t\t\t\t\t\t\t\ts.selectedIndex = isInFilteredShowValues + 1\r\n\t\t\t\t\t\t\t//if (self.conditions[index].filteredShowValues.indexOf(v) != -1) { //value already load\r\n\t\t\t\t\t\t\t//\ts.selectedIndex = self.conditions[index].filteredShowValues.indexOf(v) + 1\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tself.conditions[index].filteredShowValues.push(v);\r\n\t\t\t\t\t\t\t\tif (v != \"#NuN#\") {\r\n\t\t\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\t\t\tOAT.Dom.option(self.dimensionPictureValue(v, index), v, s);\r\n\t\t\t\t\t\t\t\t\t} catch (Error) {\r\n\t\t\t\t\t\t\t\t\t\tOAT.Dom.option(v, v, s);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tOAT.Dom.option(\" \", v, s);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\ts.selectedIndex = 1\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\r\n\t\t\t\t\ts.filterIndex = index;\r\n\t\t\t\t\tfor (var j = 0; j < savedValues.length; j++) {\r\n\t\t\t\t\t\tif (savedValues[j][0] == index) {\r\n\t\t\t\t\t\t\tfor (var it = 0; it < s.length; it++) {\r\n\t\t\t\t\t\t\t\tif (s[it].value == savedValues[j][2]) {\r\n\t\t\t\t\t\t\t\t\ts.selectedIndex = it\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (s.selectedIndex > 0) {\r\n\t\t\t\t\t\tprevFilterSelectedValue[i] = s.value;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tprevFilterSelectedValue[i] = null\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\r\n\t\t\t\t\t\tOAT.Dom.attach(s, \"click\", loadItems);\r\n\t\t\t\t\t\r\n\t\t\t\t\tOAT.Dom.attach(s, \"change\", callgo);\r\n\t\t\t\t\tdiv.selects.push(s);\r\n\t\t\t\t\tvar d = OAT.Dom.create(\"div\");\r\n\t\t\t\t\td.setAttribute(\"class\", \"inner_filter_div\");\r\n\r\n\t\t\t\t\tOAT.addTextNode(d, self.headerRow[index])\r\n\r\n\r\n\t\t\t\t\tvar close = document.createElement(\"div\");\r\n\t\t\t\t\tclose.setAttribute(\"class\", \"close_span_filter\");\r\n\t\t\t\t\tOAT.addImageNode(close, \"close\", \"\");\r\n\t\t\t\t\t\r\n\t\t\t\t\tclose.style.cursor = \"pointer\";\r\n\t\t\t\t\tvar ref = self.getDelFilterReference(index);\r\n\t\t\t\t\tOAT.Dom.attach(close, \"click\", ref);\r\n\r\n\t\t\t\t\t\r\n\t\t\t\t\t\tOAT.Dom.append([self.filterDiv, d], [d, s, close]);\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\r\n\t\t\t//draw export image and pop up of export options\r\n\t\t\tvar exportImg = OAT.Dom.create(\"div\");\r\n\t\t\texportImg.href = \"#\";\r\n\t\t\tif (self.isSD) {//android\r\n\t\t\t\texportImg.setAttribute(\"class\", \"exportOptionsAnchor exportOptionsAnchor_small\");\r\n\t\t\t} else {\r\n\t\t\t\texportImg.setAttribute(\"class\", \"exportOptionsAnchor\");\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tOAT.addImageNode(exportImg, \"menu\", \"\")\r\n\r\n\t\t\tself.filterIcon = OAT.Dom.create(\"div\", {});\r\n\r\n\t\t\tself.exportPage = OAT.Dom.create(\"div\", {});\r\n\r\n\r\n\t\t\tvar checkToClose = function (b) {\r\n\t\t\t\tsource = OAT.Event.source(b);\r\n\t\t\t\tvar clean = false;\r\n\t\t\t\tvar closing = false;\r\n\t\t\t\tfor (var i = 0; i < jQuery(\".oat_winrect_container\").length; i++) {\r\n\t\t\t\t\tvar obj = jQuery(\".oat_winrect_container\")[i];\r\n\t\t\t\t\tif (!(source == obj) && !OAT.Dom.isChild(source, obj)) {\r\n\t\t\t\t\t\tclean = true;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tclean = false; break;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tfor (var i = 0; i < jQuery(\".oat_winrect_container\").length; i++) {\r\n\t\t\t\t\tif (jQuery(\".oat_winrect_container\")[i].style.display != \"none\") {\r\n\t\t\t\t\t\tclosing = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (\r\n\t\t\t\t\t((source.getAttribute(\"class\") == \"oat_winrect_close_b\") || (!OAT.Dom.isChild(source, obj))) &&\r\n\t\t\t\t\t(closing)) {\r\n\t\t\t\t\tself.resetAllScrollValue(self.UcId);\r\n\t\t\t\t}\r\n\t\t\t\tif (clean) {\r\n\t\t\t\t\tjQuery(\".oat_winrect_container\").css({ display: \"none\" });\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tvar checkInfoFilters = function (b) {\r\n\t\t\t\tsource = OAT.Event.source(b);\r\n\t\t\t\tvar clean = false;\r\n\t\t\t\tvar closing = false;\r\n\t\t\t\tfor (var i = 0; i < jQuery(\".oat_winrect_container\").length; i++) {\r\n\t\t\t\t\tvar obj = jQuery(\".oat_winrect_container\")[i];\r\n\t\t\t\t\tif (!(source == obj) && !OAT.Dom.isChild(source, obj)) {\r\n\t\t\t\t\t\tclean = true;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tclean = false; break;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tfor (var i = 0; i < jQuery(\".oat_winrect_container\").length; i++) {\r\n\t\t\t\t\tif (jQuery(\".oat_winrect_container\")[i].style.display != \"none\") {\r\n\t\t\t\t\t\tclosing = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (\r\n\t\t\t\t\t((source.getAttribute(\"class\") == \"oat_winrect_close_b\") || (!OAT.Dom.isChild(source, obj))) &&\r\n\t\t\t\t\t(closing)) {\r\n\t\t\t\t\tself.resetAllScrollValue(self.UcId);\r\n\t\t\t\t}\r\n\t\t\t\tif (clean) {\r\n\t\t\t\t\tjQuery(\".oat_winrect_container\").css({ display: \"none\" });\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tOAT.Dom.attach(document, \"mousedown\", checkToClose)\r\n\t\t\tOAT.Dom.attach(document, \"onmouseout\", checkInfoFilters)\r\n\t\t\t\r\n\t\t\tOAT.Anchor.assign(exportImg, {\r\n\t\t\t\ttitle: \" \",\r\n\t\t\t\tcontent: self.exportPage,\r\n\t\t\t\tresult_control: false,\r\n\t\t\t\tactivation: \"click\",\r\n\t\t\t\ttype: OAT.WinData.TYPE_RECT,\r\n\t\t\t\twidth: \"auto\",\r\n\t\t\t\tcontainerQuery: qv.util.GetContainerControlClass(self.QueryViewerCollection[self.IdForQueryViewerCollection]) + \" ExportPopup \"\r\n\t\t\t});\r\n\r\n\t\t\tvar clickRef = function (event) {\r\n\t\t\t\tvar coords = OAT.Event.position(event);\r\n\t\t\t\tself.exportPage.style.left = coords[0] + \"px\";\r\n\t\t\t\tself.exportPage.style.top = coords[1] + \"px\";\r\n\t\t\t\tself.exportPage.id = \"exportOptionsContainer\";\r\n\r\n\r\n\t\t\t\tvar screenWidth = window.innerWidth;\r\n\t\t\t\tvar initialPopUpWidth = Math.max(jQuery(\".ExportPopup\")[0].clientWidth, 300)\r\n\t\t\t\tvar offsetLeft = jQuery(event.currentTarget).offset().left\r\n\r\n\t\t\t\tvar iconExport = event.currentTarget\r\n\r\n\t\t\t\t/* title */\r\n\t\t\t\tjQuery(\".oat_winrect_title\").find(\".winrect_title_label\").remove()\r\n\r\n\t\t\t\tvar spantitle = OAT.Dom.create(\"label\");\r\n\t\t\t\tif (self.isSD) {\r\n\t\t\t\t\tjQuery(\".oat_winrect_container\").addClass(\"oat_winrect_container_small\")\r\n\t\t\t\t\tspantitle.setAttribute(\"class\", \"winrect_title_label winrect_title_label_small\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tspantitle.setAttribute(\"class\", \"winrect_title_label\");\r\n\t\t\t\t}\r\n\t\t\t\tOAT.addTextNode(spantitle, self.translations.GXPL_QViewerPopupTitle/*gx.getMessage(\"GXPL_QViewerPopupTitle\")*/);\r\n\t\t\t\tjQuery(\".oat_winrect_title\").append(spantitle)\r\n\r\n\r\n\t\t\t\tjQuery(\".ExportPopup\").css({ left: -2500 + \"px\", top: 0 + \"px\" })\r\n\r\n\r\n\t\t\t\tOAT.Dom.clear(self.exportPage);\r\n\t\t\t\t//begin export options\r\n\t\t\t\tvar div_upper = document.createElement(\"div\");\r\n\t\t\t\tdiv_upper.setAttribute(\"class\", \"upper_container\");\r\n\r\n\t\t\t\t//botton to allow show all filters in pop up\r\n\t\t\t\tjQuery('#divtoxml').remove();\r\n\t\t\t\tjQuery('#divtoxls').remove();\r\n\t\t\t\tjQuery('#divtoxlsx').remove();\r\n\t\t\t\tjQuery('#divtoexport').remove();\r\n\t\t\t\tjQuery('#divtohtml').remove();\r\n\t\t\t\tvar someExport = false;\r\n\t\t\t\tself.appendExportToXmlOption(div_upper, someExport);\r\n\t\t\t\tself.appendExportToHtmlOption(div_upper, someExport);\r\n\t\t\t\tself.appendExportToPdfOption(div_upper, someExport);\r\n\t\t\t\tself.appendExportToExcelOption(div_upper, someExport);\r\n\t\t\t\tself.appendExportToExcel2010Option(div_upper, someExport);\r\n\r\n\t\t\t\tself.exportPage.appendChild(div_upper);\r\n\r\n\t\t\t\tif ((self.QueryViewerCollection[IdForQueryViewerCollection].ExportToXML) || (self.QueryViewerCollection[IdForQueryViewerCollection].ExportToHTML)\r\n\t\t\t\t|| (self.QueryViewerCollection[IdForQueryViewerCollection].ExportToPDF) || (self.QueryViewerCollection[IdForQueryViewerCollection].ExportToXLS)\r\n\t\t\t\t|| (self.QueryViewerCollection[IdForQueryViewerCollection].ExportToXLSX)) {\r\n\t\t\t\t\tvar hr = OAT.Dom.create(\"hr\", {});\r\n\t\t\t\t\tself.exportPage.appendChild(hr);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar div_down = document.createElement(\"div\");\r\n\t\t\t\tdiv_down.setAttribute(\"class\", \"down_container\");\r\n\t\t\t\tself.exportPage.appendChild(div_down);\r\n\r\n\t\t\t\tvar label = document.createElement(\"span\");\r\n\t\t\t\tlabel.textContent = self.translations.GXPL_QViewerJSVisibleColumns//gx.getMessage(\"GXPL_QViewerJSVisibleColumns\")\r\n\t\t\t\tvar div_label = document.createElement(\"div\");\r\n\t\t\t\tdiv_label.setAttribute(\"class\", \"div_label_win\");\r\n\t\t\t\tdiv_label.appendChild(label);\r\n\t\t\t\tdiv_down.appendChild(div_label);\r\n\r\n\r\n\t\t\t\tvar generatePair = function (index, isDimension) {\r\n\t\t\t\t\tif ((isDimension) && (self.initMetadata.Dimensions[index].validPosition == \"\"))\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ((!isDimension) && (self.initMetadata.Measures[index].validPosition == \"hidden\"))\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\treturn false\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar dataField; var displayName;\r\n\t\t\t\t\tif (isDimension) {\r\n\t\t\t\t\t\tdataField = self.initMetadata.Dimensions[index].dataField;\r\n\t\t\t\t\t\tdisplayName = self.initMetadata.Dimensions[index].displayName;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdataField = self.initMetadata.Measures[index].dataField;\r\n\t\t\t\t\t\tdisplayName = self.initMetadata.Measures[index].displayName;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar state = self.headerRow.indexOf(displayName) != -1;\r\n\t\t\t\t\tvar pair = OAT.Dom.create(\"div\");\r\n\t\t\t\t\tvar check_class = (state) ? \"check_item_img\" : \"uncheck_item_img\";\r\n\t\t\t\t\tif (self.isSD) {//android\r\n\t\t\t\t\t\tcheck_class = (state) ? \"check_item_img_small\" : \"uncheck_item_img_small\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\tOAT.addImageNode(pair, state ? \"check_box\" : \"check_box_outline_blank\", \"\");\r\n\r\n\t\t\t\t\tpair.setAttribute(\"class\", check_class);\r\n\t\t\t\t\tpair.setAttribute(\"dataField\", displayName);\r\n\t\t\t\t\tpair.setAttribute(\"isDimension\", isDimension);\r\n\t\t\t\t\tpair.setAttribute(\"index\", index);\r\n\t\t\t\t\tvar span = OAT.Dom.create(\"span\");\r\n\t\t\t\t\tif (isDimension) {\r\n\t\t\t\t\t\tOAT.addTextNode(span, \" \" + self.initMetadata.Dimensions[index].displayName)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tOAT.addTextNode(span, \" \" + self.initMetadata.Measures[index].displayName)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar show = ((self.formulaInfo.itemPosition[dataField] == undefined) || (self.formulaInfo.cantFormulaMeasures == 0))\r\n\t\t\t\t\tif (isDimension) {\r\n\t\t\t\t\t\tshow = show && (self.initMetadata.Dimensions[index].validPosition != \"hidden\")\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tshow = show && (self.initMetadata.Measures[index].validPosition != \"hidden\")\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (show) {\r\n\t\t\t\t\t\tpair.appendChild(span);\r\n\t\t\t\t\t\tOAT.Event.attach(pair, \"click\", function () { // this hide or show the columns\r\n\t\t\t\t\t\t\tvar isDimension = (pair.getAttribute(\"isDimension\") == \"true\");\r\n\t\t\t\t\t\t\tvar dataField = pair.getAttribute(\"dataField\");\r\n\t\t\t\t\t\t\tvar index = parseInt(pair.getAttribute(\"index\"));\r\n\r\n\t\t\t\t\t\t\tvar checkedClass = \"check_item_img\"\r\n\t\t\t\t\t\t\tvar unCheckedClass = \"uncheck_item_img\"\r\n\t\t\t\t\t\t\tif (self.isSD) {//android\r\n\t\t\t\t\t\t\t\tcheckedClass = \"check_item_img_small\"\r\n\t\t\t\t\t\t\t\tunCheckedClass = \"uncheck_item_img_small\"\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tvar newClass = (this.getAttribute(\"class\") === checkedClass) ? unCheckedClass : checkedClass;\r\n\t\t\t\t\t\t\tthis.setAttribute(\"class\", newClass);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tjQuery(this).find(\"i\")[0].textContent = (this.getAttribute(\"class\") === checkedClass) ? \"check_box\" : \"check_box_outline_blank\";\r\n\r\n\t\t\t\t\t\t\tif (isDimension) {\r\n\t\t\t\t\t\t\t\tself.initMetadata.Dimensions[index].Visible = !self.initMetadata.Dimensions[index].Visible\r\n\t\t\t\t\t\t\t\tself.preGoWhenShowHideDimension(index);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tself.initMetadata.Measures[index].Visible = !self.initMetadata.Measures[index].Visible\r\n\t\t\t\t\t\t\t\tself.preGoWhenShowHideMeasures(index);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\treturn pair;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar start = (self.autoNumber ? 1 : 0);\r\n\t\t\t\tfor (var i = start; i < self.initMetadata.Dimensions.length; i++) {\r\n\t\t\t\t\tvar pair = generatePair(i, true);\r\n\t\t\t\t\tif (pair)\r\n\t\t\t\t\t\tdiv_down.appendChild(pair);\r\n\t\t\t\t}\r\n\t\t\t\tfor (var i = start; i < self.initMetadata.Measures.length; i++) {\r\n\t\t\t\t\tvar pair = generatePair(i, false);\r\n\t\t\t\t\tif (pair)\r\n\t\t\t\t\t\tdiv_down.appendChild(pair);\r\n\t\t\t\t}\r\n\r\n\r\n\r\n\r\n\t\t\t\tsetTimeout(function () {\r\n\r\n\t\t\t\t\tvar screenWidth = window.innerWidth;\r\n\t\t\t\t\tvar initialPopUpWidth = jQuery(\".ExportPopup\")[0].clientWidth\r\n\r\n\r\n\t\t\t\t\tif (initialPopUpWidth == 0) {\r\n\t\t\t\t\t\tvar last = jQuery(\".ExportPopup\").length;\r\n\t\t\t\t\t\tinitialPopUpWidth = jQuery(\".ExportPopup\")[last - 1].clientWidth\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (self.isSD) {//android\t\t\r\n\t\t\t\t\t\tif (initialPopUpWidth < 240) {\r\n\t\t\t\t\t\t\tinitialPopUpWidth = 240\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvar padding = (screenWidth - initialPopUpWidth) / 2 + jQuery(window).scrollLeft()\r\n\r\n\t\t\t\t\t\tjQuery(\".ExportPopup\").css({ left: padding + \"px\", top: jQuery(iconExport).offset().top + \"px\", width: initialPopUpWidth + \"px\" })\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tvar offsetLeft = jQuery(iconExport).offset().left\r\n\r\n\t\t\t\t\t\tif (offsetLeft + initialPopUpWidth + 15 < screenWidth) {\r\n\t\t\t\t\t\t\tjQuery(\".ExportPopup\").css({ left: jQuery(iconExport).offset().left + \"px\", top: jQuery(iconExport).offset().top + \"px\" })\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tjQuery(\".ExportPopup\").css({ left: (offsetLeft - initialPopUpWidth + 16) + \"px\", top: jQuery(iconExport).offset().top + \"px\" })\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t}, 50)\r\n\r\n\r\n\r\n\t\t\t} /* clickref */\r\n\t\t\tOAT.Event.attach(exportImg, \"click\", clickRef);\r\n\r\n\t\t\t\r\n\t\t\tself.filterDiv.appendChild(exportImg);\r\n\r\n\t\t\tfilterInfoIcon.appendChild(spanHover);\r\n\r\n\t\t\tself.filterDiv.appendChild(filterInfoIcon);\r\n\r\n\r\n\t\t}\r\n\r\n\t\tthis.appendExportToXmlOption = function (content, someExport) {\r\n\t\t\tvar exportXMLButton;\r\n\t\t\tif (self.QueryViewerCollection[IdForQueryViewerCollection].ExportToXML) {\r\n\r\n\t\t\t\t\texportXMLButton = OAT.Dom.create(\"div\");\r\n\t\t\t\t\t\r\n\r\n\t\t\t\t\texportXMLButtonSub = self.createExportButton(exportXMLButton)\r\n\r\n\t\t\t\t\tvar pvpl = OAT.Dom.create(\"label\");\r\n\t\t\t\t\tOAT.addTextNode(pvpl, self.translations.GXPL_QViewerContextMenuExportXml/*gx.getMessage(\"GXPL_QViewerContextMenuExportXml\")*/)\r\n\t\t\t\t\tpvpl.htmlFor = \"pivot_checkbox_restoreview\";\r\n\t\t\t\t\tpvpl.setAttribute(\"class\", \"pivot_checkbox_restoreview\");\r\n\t\t\t\t\texportXMLButton.appendChild(pvpl);\r\n\t\t\t\t\tvar span = document.createElement(\"span\");\r\n\t\t\t\t\texportXMLButton.appendChild(span);\r\n\r\n\t\t\t\t\tOAT.Dom.attach(exportXMLButtonSub, \"click\", function () {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tself.getDataForPivot(self.UcId, 1, -1, true, \"\", \"\", \"XML\", \"\", \"\", true)\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tif (someExport) {\r\n\t\t\t\t\tif (!OAT.isIE()) {\r\n\t\t\t\t\t\tcontent.appendChild(OAT.Dom.create(\"br\"));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tcontent.appendChild(exportXMLButton);\r\n\t\t\t\tsomeExport = true;\r\n\t\t\t}\r\n\t\t}\r\n\t\r\n\t\t\r\n\t\t\r\n\t\tthis.ExportToXMLWhenServerPagination = function () {\r\n\t\t\t\r\n\t\t\tself.lastRequestPivotDataCalculation = \"\"\r\n\t\t\tself.lastRequestCalculation = \"ExportToXML\"\r\n\t\t\tself.requestCalculatePivottableData() \r\n\t\t\t\r\n\r\n\t\t}\r\n\r\n\t\tthis.ExportToHTMLWhenServerPagination = function () {\r\n\t\t\tvar dir = OAT.resourceURL(self.relativePath + 'QueryViewer/oatPivot/css/pivot.css')\r\n\r\n\t\t\tvar str = \"<!DOCTYPE><HTML><BODY>\";\r\n\t\t\tstr = str + \"<HEAD>\";\r\n\t\t\tstr = str + '<META content=\"text/html; charset=utf-8\" http-equiv=\"Content-Type\"/>'\r\n\r\n\t\t\tstr = str + '<link id=\"gxtheme_css_reference\" rel=\"stylesheet\" type=\"text/css\" href=\"' + dir + '\" />'\r\n\t\t\t\r\n\t\t\t//add other css file\r\n\t\t\tfor(var i = 0; i < jQuery('link').length; i++)\r\n\t\t\t{\r\n\t\t\t\tif (jQuery('link')[i].href.indexOf(\"QueryViewer.css\") < 0) {\r\n\t\t\t\t\tstr = str + '<link id=\"gxtheme_css_reference\" rel=\"stylesheet\" type=\"text/css\" href=\"' + jQuery('link')[i].href + '\" />'\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tstr = str + \"</HEAD><DIV style=\\\"margin-bottom: 5px;\\\">\"\r\n\t\t\t\r\n\t\t\tstr = str + '<div class=\"gx_usercontrol qv-pivottable QueryViewer-pivottable\">'\r\n\t\t\t\r\n\t\t\tstr = str + '<table class=\"pivot_table\" style=\"width: 100%;\">'\r\n\t\t\t\r\n\t\t\tstr = str + OAT.removeIconFont(jQuery(\"#\" + self.controlName + \"_\" + self.query)[0].innerHTML.replace(/display: none;/g, \"\").replace(/sort-asc/g, \"\").replace(/sort-desc/g, \"\"));\r\n\t\t\t\r\n\t\t\tstr = str + '</table>'\r\n\t\t\t\r\n\t\t\tstr = str + '</div>'\r\n\t\t\tstr = str + \"</DIV></BODY></HTML>\";\r\n\r\n\t\t\tif ((OAT.isSafari()) || (self.isSD)) { //for safari\r\n\t\t\t\twindow.open('data:text/html,' + str);\r\n\t\t\t} else {\r\n\t\t\t\tvar blob = new Blob([str], { type: \"text/html\" });\r\n\t\t\t\tif (self.query != \"\") {\r\n\t\t\t\t\tsaveAs(blob, self.query + \".html\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar name = 'Query'\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tname = self.controlName.substr(4).split(\"_\")[0]\r\n\t\t\t\t\t} catch (error) { }\r\n\t\t\t\t\tsaveAs(blob, name + \".html\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.appendExportToHtmlOption = function (content, someExport) {\r\n\t\t\tvar exportHTMLButton;\r\n\t\t\tif (self.QueryViewerCollection[IdForQueryViewerCollection].ExportToHTML) {\r\n\t\t\t\t\r\n\r\n\t\t\t\t\tvar exportHTMLButton = OAT.Dom.create(\"div\");\r\n\t\t\t\t\t// exportHTMLButton.style.marginBottom = \"10px\"\r\n\r\n\t\t\t\t\texportButtonSub = self.createExportButton(exportHTMLButton)\r\n\r\n\t\t\t\t\tvar pvpl = OAT.Dom.create(\"label\");\r\n\t\t\t\t\tOAT.addTextNode(pvpl, self.translations.GXPL_QViewerContextMenuExportHtml/*gx.getMessage(\"GXPL_QViewerContextMenuExportHtml\")*/)\r\n\t\t\t\t\tpvpl.htmlFor = \"pivot_checkbox_restoreview\";\r\n\t\t\t\t\tpvpl.setAttribute(\"class\", \"pivot_checkbox_restoreview\");\r\n\t\t\t\t\texportHTMLButton.appendChild(pvpl);\r\n\r\n\r\n\r\n\t\t\t\t\tOAT.Dom.attach(exportButtonSub, \"click\", function () {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tself.getDataForPivot(self.UcId, 1, -1, true, \"\", \"\", \"HTML\", \"\", \"\", true)\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tif (someExport) {\r\n\t\t\t\t\tif (!OAT.isIE()) {\r\n\t\t\t\t\t\tcontent.appendChild(OAT.Dom.create(\"br\"));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tcontent.appendChild(exportHTMLButton);\r\n\t\t\t\tsomeExport = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\tthis.appendExportToPdfOption = function (content, someExport) {\r\n\t\t\tvar exportPdfButton;\r\n\t\t\tif (self.QueryViewerCollection[IdForQueryViewerCollection].ExportToPDF) {\r\n\t\t\t\tsomeExport = true;\r\n\t\t\t\t\r\n\t\t\t\t\tvar exportPdfButton = OAT.Dom.create(\"div\");\r\n\r\n\t\t\t\t\texportButtonSub = self.createExportButton(exportPdfButton)\r\n\r\n\t\t\t\t\tvar pvpl = OAT.Dom.create(\"label\");\r\n\t\t\t\t\tOAT.addTextNode(pvpl, self.translations.GXPL_QViewerContextMenuExportPdf /*gx.getMessage(\"GXPL_QViewerContextMenuExportPdf\")*/)\r\n\t\t\t\t\tpvpl.htmlFor = \"pivot_checkbox_restoreview\";\r\n\t\t\t\t\tpvpl.setAttribute(\"class\", \"pivot_checkbox_restoreview\");\r\n\t\t\t\t\texportPdfButton.appendChild(pvpl);\r\n\r\n\t\t\t\t\tvar FileName = self.query\r\n\t\t\t\t\tif (FileName == \"\") {\r\n\t\t\t\t\t\tFileName = \"Query\"\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\tFileName = self.controlName.split(\"_\")[0]\r\n\t\t\t\t\t\t} catch (error) { }\r\n\t\t\t\t\t}\r\n\t\t\t\t\tOAT.Dom.attach(exportButtonSub, \"click\", function () {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tself.getDataForPivot(self.UcId, 1, -1, true, \"\", \"\", \"PDF\", \"\", \"\", true)\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t});\r\n\t\t\t\t\r\n\r\n\t\t\t\tcontent.appendChild(exportPdfButton);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\r\n\t\tthis.appendExportToExcelOption = function (content, someExport) {\r\n\t\t\tvar exportXLSButton;\r\n\t\t\tif (self.QueryViewerCollection[IdForQueryViewerCollection].ExportToXLS) {\r\n\r\n\t\t\t\t\r\n\t\t\t\t\tvar exportXLSButton = OAT.Dom.create(\"div\");\r\n\r\n\t\t\t\t\texportButtonSub = self.createExportButton(exportXLSButton)\r\n\r\n\t\t\t\t\tvar pvpl = OAT.Dom.create(\"label\");\r\n\t\t\t\t\tOAT.addTextNode(pvpl,self.translations.GXPL_QViewerContextMenuExportXls2003 /*gx.getMessage(\"GXPL_QViewerContextMenuExportXls2003\")*/)\r\n\t\t\t\t\t//gx.getMessage(\"GXPL_QViewerContextMenuExportPdf\")\r\n\t\t\t\t\tpvpl.htmlFor = \"pivot_checkbox_restoreview\";\r\n\t\t\t\t\tpvpl.setAttribute(\"class\", \"pivot_checkbox_restoreview\");\r\n\t\t\t\t\texportXLSButton.appendChild(pvpl);\r\n\r\n\t\t\t\t\tvar FileName = self.query\r\n\t\t\t\t\tif (FileName == \"\") {\r\n\t\t\t\t\t\tFileName = \"Query\"\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\tFileName = self.controlName.split(\"_\")[0]\r\n\t\t\t\t\t\t} catch (error) { }\r\n\t\t\t\t\t}\r\n\t\t\t\t\tOAT.Dom.attach(exportButtonSub, \"click\", function () {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tself.getDataForPivot(self.UcId, 1, -1, true, \"\", \"\", \"XLS\", \"\", \"\", true)\r\n\t\t\t\t\t\t\r\n\r\n\t\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tif (someExport) {\r\n\t\t\t\t\tif (!OAT.isIE()) {\r\n\t\t\t\t\t\tcontent.appendChild(OAT.Dom.create(\"br\"));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tcontent.appendChild(exportXLSButton);\r\n\t\t\t\tsomeExport = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.ExportToXLSXWhenServerPagination = function () {\r\n\t\t\t\r\n\t\t\tself.lastRequestCalculation = \"ExportToXLSX\"\r\n\t\t\tself.requestCalculatePivottableData()\r\n\r\n\t\t}\r\n\r\n\t\tthis.appendExportToExcel2010Option = function (content, someExport) {\r\n\t\t\tvar exportXLSButton;\r\n\t\t\tif ((self.QueryViewerCollection[IdForQueryViewerCollection].ExportToXLSX) && ((self.allData.length > 0) || (self.serverPagination))) {\r\n\r\n\t\t\t\t\r\n\t\t\t\t\tvar exportXLSButton = OAT.Dom.create(\"div\");\r\n\r\n\t\t\t\t\texportButtonSub = self.createExportButton(exportXLSButton)\r\n\r\n\t\t\t\t\tvar pvpl = OAT.Dom.create(\"label\");\r\n\t\t\t\t\tOAT.addTextNode(pvpl, self.translations.GXPL_QViewerContextMenuExportXlsx /*gx.getMessage(\"GXPL_QViewerContextMenuExportXlsx\")*/)\r\n\t\t\t\t\tpvpl.htmlFor = \"pivot_checkbox_restoreview\";\r\n\t\t\t\t\tpvpl.setAttribute(\"class\", \"pivot_checkbox_restoreview\");\r\n\t\t\t\t\texportXLSButton.appendChild(pvpl);\r\n\r\n\t\t\t\t\tvar FileName = self.query\r\n\t\t\t\t\tif (FileName == \"\") {\r\n\t\t\t\t\t\tFileName = \"Query\"\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t//FileName = self.controlName.substr(4).split(\"_\")[0]\r\n\t\t\t\t\t\t\tFileName = self.controlName.split(\"_\")[0]\r\n\t\t\t\t\t\t} catch (error) { }\r\n\t\t\t\t\t}\r\n\t\t\t\t\tOAT.Dom.attach(exportXLSButton, \"click\", function () {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tself.getDataForPivot(self.UcId, 1, -1, true, \"\", \"\", \"XLSX\", \"\", \"\", true);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\tif (someExport) {\r\n\t\t\t\t\tif (!OAT.isIE()) {\r\n\t\t\t\t\t\tcontent.appendChild(OAT.Dom.create(\"br\"));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tcontent.appendChild(exportXLSButton);\r\n\t\t\t\tsomeExport = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\tthis.createExportButton = function (divContainer) {\r\n\r\n\t\t\tvar exportButtonSub = OAT.Dom.create(\"div\", {});\r\n\t\t\texportButtonSub.setAttribute('id', 'divtoxml');\r\n\t\t\tdivContainer.appendChild(exportButtonSub);\r\n\r\n\t\t\tif (self.isSD) {//android\t\t\t\t\r\n\t\t\t\texportButtonSub.setAttribute(\"class\", \"download_file_img_small\");\r\n\t\t\t} else {\r\n\t\t\t\texportButtonSub.setAttribute(\"class\", \"download_file_img\");\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tOAT.addImageNode(exportButtonSub, \"download\", \"\");\r\n\r\n\t\t\tdivContainer.setAttribute(\"class\", \"export_item_div\");\r\n\t\t\tif (self.isSD) {//android\t\t\r\n\t\t\t\tdivContainer.setAttribute(\"class\", \"export_item_div export_item_div_small\");\r\n\t\t\t}\r\n\t\t\treturn divContainer;\r\n\t\t}\r\n\r\n\r\n\r\n\t\tthis._drawCorner = function (th, target) {\r\n\t\t\tif (measures.length > 0) {\r\n\t\t\t\tOAT.addTextNode(th, self.headerRow[self.dataColumnIndex])\r\n\t\t\t\tth.className = \"h2titlewhite\";\r\n\t\t\t\tthis.setTitleTexrtAlign(th, th.textContent);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\r\n\t\tthis._drawRowConditionsHeadingsCustom = function (tr) {\r\n\t\t\t/* rowConditions headings */\r\n\t\t\tfor (var j = 0; j < self.rowConditions.length; j++) {\r\n\t\t\t\tvar cond = self.conditions[self.rowConditions[j]];\r\n\t\t\t\tif (self.isMeasureByName(self.headerRow[self.rowConditions[j]], cond.dataField, cond.isDimension)) {\r\n\t\t\t\t\tif (!self.ShowMeasuresAsRows) {\r\n\t\t\t\t\t\tvar th = OAT.Dom.create(\"th\", {}, \"h2titlewhite\");\r\n\t\t\t\t\t\tvar div = OAT.Dom.create(\"div\");\r\n\t\t\t\t\t\tOAT.addTextNode(div, self.headerRow[self.rowConditions[j]])\r\n\t\t\t\t\t\tthis.setTitleTexrtAlign(div, self.headerRow[self.rowConditions[j]]);\r\n\t\t\t\t\t\tth.rowSpan = self.colConditions.length + 2;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar th = OAT.Dom.create(\"th\", {}, \"h2title\");\r\n\t\t\t\t\tvar divCont = OAT.Dom.create(\"div\", { position: \"relative\" });\r\n\r\n\t\t\t\t\tvar div = OAT.Dom.create(\"div\", { overflow: \"hidden\"});\r\n\t\t\t\t\t\r\n\t\t\t\t\t\tOAT.addTextNode(div, self.headerRow[self.rowConditions[j]].replace(/ /g, \"\\u00A0\") + \"\\u00A0\\u00A0\\u00A0\\u00A0\")\r\n\t\t\t\t\t\r\n\t\t\t\t\tif ((self.GeneralDataRows.length > 0) || (self.serverPagination)) {\r\n\t\t\t\t\t\tvar resp = self.getClickReference(cond, self.rowConditions[j], div);\r\n\t\t\t\t\t\tvar ref = resp[0]\r\n\t\t\t\t\t\tvar anchorRef = resp[1]\r\n\t\t\t\t\t\tOAT.Dom.attach(th, \"click\", ref);\r\n\t\t\t\t\t\tvar callback = self.getOrderReference(self.rowConditions[j], anchorRef, ref, div);\r\n\t\t\t\t\t\tself.gd.addSource(div, self.process, callback);\r\n\t\t\t\t\t\tself.gd.addTarget(th);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tth.conditionIndex = self.rowConditions[j];\r\n\t\t\t\t\tif (!self.ShowMeasuresAsRows) {\r\n\t\t\t\t\t\tth.rowSpan = self.colConditions.length + 2;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tth.rowSpan = self.colConditions.length + 1;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar divImg = OAT.Dom.create(\"div\", { position: \"absolute\", right: \"-6px\", bottom: \"0px\"});\r\n\t\t\t\t\tOAT.addImageNode(divImg, \"arrow_drop_down\", \"\");\r\n\t\t\t\t\tvar divIcon = OAT.Dom.create(\"div\");\r\n\t\t\t\t\tdivIcon.className = \"div_settings\";\r\n\t\t\t\t\tOAT.addImageNode(divIcon, \"settings\", \"\");\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tthis.updateSortImage(divImg, cond.sort);\r\n\t\t\t\t\t} catch (Error) { }\r\n\t\t\t\t\tOAT.Dom.append([th, divCont], [divCont, div], [divCont, divImg], [div, divIcon], [tr, th]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (self.ShowMeasuresAsRows) //add title of Measure\r\n\t\t\t{\r\n\t\t\t\tvar largo = 80;\r\n\t\t\t\tvar th = OAT.Dom.create(\"th\", {}, \"h2title\");\r\n\t\t\t\tvar divCont = OAT.Dom.create(\"div\", { position: \"relative\", minWidth: largo + \"px\" });\r\n\t\t\t\tvar div = OAT.Dom.create(\"div\", { overflow: \"hidden\" });\r\n\t\t\t\tOAT.addTextNode(div, self.translations.GXPL_QViewerJSMeasures /*gx.getMessage(\"GXPL_QViewerJSMeasures\")*/ + \"\\u00A0\\u00A0\\u00A0\")\r\n\t\t\t\tOAT.Dom.append([th, divCont], [divCont, div], [tr, th]);\r\n\t\t\t\tth.rowSpan = self.colConditions.length + 1;\r\n\t\t\t\tOAT.Dom.append([th, div], [tr, th]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.isMeasureByName = function (headerName, dataField, isDimension) {\r\n\t\t\tvar ismeasure = false;\r\n\t\t\tfor (var i = 0; i < measures.length - 1; i++) {\r\n\t\t\t\tif (measures[i].attributes.getNamedItem(\"displayName\").nodeValue == headerName) {\r\n\t\t\t\t\tismeasure = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t\tif (dataField){\r\n\t\t\t\tvar ismeasure = false;\r\n\t\t\t\tfor (var pd = 0; pd<self.pageData.DataInfo.length; pd++){\r\n\t\t\t\t\tif (dataField == self.pageData.DataInfo[pd].DataField)\r\n\t\t\t\t\t\tismeasure = true;\r\n\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\r\n\r\n\t\t\treturn ismeasure;\r\n\t\t}\r\n\r\n\t\tthis.setTitleTexrtAlign = function (div, header) {\r\n\t\t\tfor (var i = 0; i < measures.length; i++) {\r\n\t\t\t\tif (measures[i].getAttribute(\"displayName\") === header) {\r\n\t\t\t\t\tif ((measures[i].getAttribute(\"dataType\") === \"integer\") || (measures[i].getAttribute(\"dataType\") === \"real\")) {\r\n\t\t\t\t\t\tdiv.style.textAlign = \"left\"\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (measures[i].getAttribute(\"date\") === \"integer\") {\r\n\t\t\t\t\t\tdiv.style.textAlign = \"right\"\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.updateSortImage = function (div, order) {\r\n\t\t\tvar path = \"none\";\r\n\t\t\tswitch (order) {\r\n\t\t\t\tcase 0: path = \"asc\"; break;\r\n\t\t\t\tcase 1: path = \"asc\"; break;   \r\n\t\t\t\tcase -1: path = \"desc\"; break; \r\n\t\t\t\tcase 2: path = \"desc\"; break;\r\n\t\t\t}\r\n\r\n\t\r\n\t\t\tif (OAT.isIE() || (OAT.isAndroid())) {\r\n\t\t\t\tdiv.className.replace(\"sort-none\");\r\n\t\t\t\tdiv.className.replace(\"sort-asc\");\r\n\t\t\t\tdiv.className.replace(\"sort-desc\");\r\n\t\t\t} else {\r\n\t\t\t\tdiv.classList.remove(\"sort-none\");\r\n\t\t\t\tdiv.classList.remove(\"sort-asc\");\r\n\t\t\t\tdiv.classList.remove(\"sort-desc\");\r\n\t\t\t}\r\n\t\t\tif (OAT.isIE() || (OAT.isAndroid())) {\r\n\t\t\t\tdiv.className += \" sort-\" + path;\r\n\t\t\t} else {\r\n\t\t\t\tdiv.classList.add(\"sort-\" + path);\r\n\t\t\t}\r\n\t\t\tjQuery(div).find(\"i\")[0].textContent = (path == \"asc\") ? \"arrow_drop_up\" : \"arrow_drop_down\";\r\n\t\t}\r\n\r\n\t\tthis._drawRowConditionsHeadings = function (tbody) {\r\n\t\t\t/* rowConditions headings */\r\n\t\t\tvar tr = OAT.Dom.create(\"tr\");\r\n\t\t\tfor (var j = 0; j < self.rowConditions.length; j++) {\r\n\t\t\t\tvar cond = self.conditions[self.rowConditions[j]];\r\n\t\t\t\tif (self.isMeasureByName(self.headerRow[self.rowConditions[j]], cond.dataField, cond.isDimension)) {\r\n\t\t\t\t\tif (!self.ShowMeasuresAsRows) {\r\n\t\t\t\t\t\tvar th = OAT.Dom.create(\"th\", {}, \"h2titlewhite\");\r\n\t\t\t\t\t\tvar div = OAT.Dom.create(\"div\");\r\n\t\t\t\t\t\tOAT.addTextNode(div, self.headerRow[self.rowConditions[j]])\r\n\t\t\t\t\t\tself.setTitleTexrtAlign(div, self.headerRow[self.rowConditions[j]]);\r\n\t\t\t\t\t\tOAT.Dom.append([th, div], [tr, th]);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar largo = (self.headerRow[self.rowConditions[j]].length > 8) ? self.headerRow[self.rowConditions[j]].length * 10 : 80;\r\n\t\t\t\t\tvar th = OAT.Dom.create(\"th\", {}, \"h2title\");\r\n\t\t\t\t\tvar divCont = OAT.Dom.create(\"div\", { position: \"relative\", minWidth: largo + \"px\" });\r\n\t\t\t\t\tvar div = OAT.Dom.create(\"div\", { overflow: \"hidden\" });\r\n\t\t\t\t\tOAT.addTextNode(div, self.headerRow[self.rowConditions[j]] + \"\\u00A0\\u00A0\\u00A0\")\r\n\t\t\t\t\tvar resp = self.getClickReference(cond, self.rowConditions[j], div);\r\n\t\t\t\t\tvar ref = resp[0];\r\n\t\t\t\t\tvar anchorRef = resp[1];\r\n\t\t\t\t\tOAT.Dom.attach(th, \"click\", ref);\r\n\t\t\t\t\tvar callback = self.getOrderReference(self.rowConditions[j], anchorRef, ref, div);\r\n\t\t\t\t\tself.gd.addSource(div, self.process, callback);\r\n\t\t\t\t\tself.gd.addTarget(th);\r\n\t\t\t\t\tth.conditionIndex = self.rowConditions[j];\r\n\r\n\t\t\t\t\tvar divImg = OAT.Dom.create(\"div\", { position: \"absolute\", right: \"-6px\", bottom: \"0px\"});\r\n\t\t\t\t\tOAT.addImageNode(divImg, \"arrow_drop_down\", \"\");\r\n\t\t\t\t\tvar divIcon = OAT.Dom.create(\"div\");\r\n\t\t\t\t\tdivIcon.className = \"div_settings\";\r\n\t\t\t\t\tOAT.addImageNode(divIcon, \"settings\", \"\");\r\n\t\t\t\t\tif (cond != undefined) {\r\n\t\t\t\t\t\tthis.updateSortImage(divImg, cond.sort);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.updateSortImage(divImg, 0);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tOAT.Dom.append([th, divCont], [divCont, div], [divCont, divImg], [div, divIcon], [tr, th]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\r\n\t\t\tif (self.ShowMeasuresAsRows) {\r\n\t\t\t\t//\"Measure\" Title\r\n\t\t\t\tvar largo = 80;\r\n\t\t\t\tvar th = OAT.Dom.create(\"th\", {}, \"h2title\");\r\n\t\t\t\tvar divCont = OAT.Dom.create(\"div\", { position: \"relative\", minWidth: largo + \"px\" });\r\n\t\t\t\tvar div = OAT.Dom.create(\"div\", { overflow: \"hidden\" });\r\n\r\n\t\t\t\tOAT.addTextNode(div, self.translations.GXPL_QViewerJSMeasures /*gx.getMessage(\"GXPL_QViewerJSMeasures\")*/ + \"\\u00A0\\u00A0\\u00A0\")\r\n\t\t\t\tOAT.Dom.append([th, divCont], [divCont, div], [tr, th]);\r\n\t\t\t\t//\"Value\" Title\r\n\t\t\t\tvar th = OAT.Dom.create(\"th\", {}, \"h2titlewhite\");\r\n\t\t\t\tvar div = OAT.Dom.create(\"div\");\r\n\r\n\t\t\t\tOAT.addTextNode(div, self.translations.GXPL_QViewerJSValue /*gx.getMessage(\"GXPL_QViewerJSValue\")*/)\r\n\t\t\t\tth.style.textAlign = \"end\"\r\n\t\t\t\tOAT.Dom.append([th, div], [tr, th]);\r\n\t\t\t}\r\n\r\n\r\n\t\t\tvar th = OAT.Dom.create(\"th\"); /* blank space above */\r\n\t\t\tif (!self.colConditions.length) {\r\n\t\t\t\tself._drawCorner(th, true);\r\n\t\t\t\tth.conditionIndex = -1;\r\n\t\t\t} else { th.style.border = \"none\"; }\r\n\t\t\tif (self.colStructure.span != null) {\r\n\t\t\t\tth.colSpan = self.colStructure.span + (self.options.headingBefore ? 1 : 0) + (self.options.totals ? 1 : 0);\r\n\t\t\t} else {\r\n\t\t\t\tth.colSpan = (self.options.headingBefore ? 1 : 0) + (self.options.totals ? 1 : 0);\r\n\t\t\t}\r\n\t\t\tif ((measures.length > 0) && (!self.ShowMeasuresAsRows)) {\r\n\t\t\t\ttr.appendChild(th);\r\n\t\t\t}\r\n\t\t\tif (self.colConditions.length) { /* blank space after */\r\n\t\t\t\tvar th = OAT.Dom.create(\"th\", { border: \"none\", width: \"0px;\" });\r\n\t\t\t\ttr.appendChild(th);\r\n\t\t\t}\r\n\t\t\t//if ((measures.length > 0) && (tr.cells[1] != undefined) && (tr.cells[1].textContent == \"\")) { tr.hidden = true; } //hideemptycolrow\r\n\t\t\t//else {\r\n\t\t\tself.appendRowToTable(tbody, tr, true);\r\n\t\t\t//}\r\n\t\t\t// MOVE FILTERS TO TOOLBAR\r\n\t\t\tif ((measures.length > 0) && (tr.cells[1] != undefined) && (tr.cells[1].textContent == \"\")) {\r\n\t\t\t\tvar toolbarTable = document.getElementById(self.controlName + \"_\" + self.query + \"_toolbar\");\r\n\t\t\t\tif (toolbarTable.rows[0])\r\n\t\t\t\t\ttoolbarTable.rows[0].appendChild(tr.cells[0]);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\r\n\t\tthis._drawColConditionsHeadingsCustom = function (tr, i, last) {\r\n\t\t\tvar cond = self.conditions[self.colConditions[i]];\r\n\t\t\tvar th = OAT.Dom.create(\"th\", { cursor: \"pointer\" }, \"h2title\");\r\n\t\t\tvar largo = (self.headerRow[self.colConditions[i]].length > 8) ? ((self.headerRow[self.colConditions[i]].length + 3) * 10) : 80;\r\n\t\t\tvar divCont = OAT.Dom.create(\"div\", { position: \"relative\", minWidth: largo + \"px\" });\r\n\t\t\tif (last) {\r\n\t\t\t\tth.style.borderRightColor = \"transparent\";\r\n\t\t\t}\r\n\t\t\tvar div = OAT.Dom.create(\"div\", { overflow: \"hidden\" });\r\n\t\t\t\r\n\t\t\t\tOAT.addTextNode(div, self.headerRow[self.colConditions[i]].replace(/ /g, \"\\u00A0\") + \"\\u00A0\\u00A0\\u00A0\")\r\n\t\t\t\r\n\t\t\tif ((self.GeneralDataRows.length > 0) || (self.serverPagination)) {\r\n\t\t\t\tvar resp = self.getClickReference(cond, self.colConditions[i], div);\r\n\t\t\t\tvar ref = resp[0]\r\n\t\t\t\tvar anchorRef = resp[1]\r\n\r\n\t\t\t\tOAT.Dom.attach(th, \"click\", ref);\r\n\t\t\t\tvar callback = self.getOrderReference(self.colConditions[i], anchorRef, ref, div);\r\n\t\t\t\tself.gd.addSource(div, self.process, callback);\r\n\t\t\t\tself.gd.addTarget(th);\r\n\t\t\t}\r\n\t\t\tvar divImg = OAT.Dom.create(\"div\", { position: \"absolute\", right: \"0px\", bottom: \"2px\", width: \"12px\", height: \"12px\" });\r\n\t\t\tOAT.addImageNode(divImg, \"arrow_drop_down\", \"\");\r\n\t\t\tvar divIcon = OAT.Dom.create(\"div\");\r\n\t\t\tdivIcon.className = \"div_settings\";\r\n\t\t\tOAT.addImageNode(divIcon, \"settings\", \"\");\r\n\t\t\ttry {\r\n\t\t\t\tthis.updateSortImage(divImg, cond.sort);\r\n\t\t\t} catch (error) { }\r\n\t\t\tdivCont.appendChild(div);\r\n\t\t\tdiv.appendChild(divIcon);\r\n\t\t\tdivCont.appendChild(divImg);\r\n\t\t\t\r\n\r\n\t\t\tth.conditionIndex = self.colConditions[i];\r\n\t\t\tth.appendChild(divCont);\r\n\t\t\t//th.hidden = true;\r\n\t\t\ttr.appendChild(th);\r\n\r\n\t\t\treturn tr;\r\n\t\t}\r\n\r\n\t\tthis._drawColConditionsHeadings = function (tr, i) {\r\n\t\t\tvar cond = self.conditions[self.colConditions[i]];\r\n\t\t\tvar th = OAT.Dom.create(\"th\", { cursor: \"pointer\" }, \"even gx-pv-even-row\");\r\n\t\t\tvar div = OAT.Dom.create(\"div\");\r\n\t\t\tOAT.addTextNode(div, self.headerRow[self.colConditions[i]])\r\n\t\t\tvar resp = self.getClickReference(cond, self.colConditions[i], div);\r\n\t\t\tvar ref = resp[0]\r\n\t\t\tvar anchorRef = resp[1]\r\n\t\t\tOAT.Dom.attach(th, \"click\", ref);\r\n\t\t\tvar callback = self.getOrderReference(self.colConditions[i], anchorRef, ref, div);\r\n\t\t\tself.gd.addSource(div, self.process, callback);\r\n\t\t\tself.gd.addTarget(th);\r\n\t\t\tth.conditionIndex = self.colConditions[i];\r\n\t\t\tth.appendChild(div);\r\n\t\t\tth.hidden = true;\r\n\r\n\r\n\t\t\t/////////////////////////////////////////////////// MOVE FILTERS TO TOOLBAR\r\n\t\t\tif (th.textContent == self.headerRow[self.colConditions[i]]) {\r\n\t\t\t\tvar toolbarTable = document.getElementById(self.controlName + \"_\" + self.query + \"_toolbar\");\r\n\t\t\t\tth.hidden = false;\r\n\t\t\t\tif (toolbarTable.rows[0])\r\n\t\t\t\t\ttoolbarTable.rows[0].appendChild(th);\r\n\t\t\t}\r\n\t\t\t/////////////////////////////////////////////////// MOVE FILTERS TO TOOLBAR\r\n\t\t}\r\n\r\n\t\tthis.getClassName = function (i, j) { /* decide odd/even class */\r\n\t\t\treturn \"even gx-pv-even-row\";\r\n\t\t}\r\n\r\n\t\tthis.setStyleValues = function (elem, styleValues) {\r\n\t\t\tfunction hexToRgb(hex) {\r\n\t\t\t\t// Expand shorthand form (e.g. \"03F\") to full form (e.g. \"0033FF\")\r\n\t\t\t\tvar shorthandRegex = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\r\n\t\t\t\thex = hex.replace(shorthandRegex, function (m, r, g, b) {\r\n\t\t\t\t\treturn r + r + g + g + b + b;\r\n\t\t\t\t});\r\n\r\n\t\t\t\tvar result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\r\n\t\t\t\treturn result ? {\r\n\t\t\t\t\tr: parseInt(result[1], 16),\r\n\t\t\t\t\tg: parseInt(result[2], 16),\r\n\t\t\t\t\tb: parseInt(result[3], 16)\r\n\t\t\t\t} : null;\r\n\t\t\t}\r\n\r\n\t\t\tvar styleSplit = styleValues.split(\";\");\r\n\t\t\tfor (var j = 0; j < styleSplit.length; j++) {\r\n\t\t\t\tvar particularStyleSplit = styleSplit[j].split(\":\");\r\n\t\t\t\tvar property = qv.util.trim(particularStyleSplit[0]);\r\n\t\t\t\tvar value = qv.util.trim(particularStyleSplit[1]);\r\n\r\n\t\t\t\tswitch (property) {\r\n\t\t\t\t\tcase \"color\": if ((value[0] != undefined) && (value[0] === '#')) {\r\n\t\t\t\t\t\telem.style.color = 'rgb(' + hexToRgb(value).r + ',' + hexToRgb(value).g + ',' + hexToRgb(value).b + ')'\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\telem.style.color = value;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"fontStyle\": elem.style.fontStyle = value;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"backgroundColor\": elem.style.backgroundColor = value;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"textDecoration\": elem.style.textDecoration = value;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"fontWeight\": elem.style.fontWeight = value;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"fontFamily\": elem.style.fontFamily = value;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"fontVariant\": elem.style.fontVariant = value;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"fontSize\": elem.style.fontSize = value.replace(\"px\", \"\") + \"px\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"textAlign\": elem.style.textAlign = value;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"lineHeight\": elem.style.lineHeight = value;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"textIndent\": elem.style.textIndent = value;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"verticalAlign\": elem.style.verticalAlign = value;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"wordSpacing\": elem.style.wordSpacing = value;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"display\": elem.style.display = value;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"borderThickness\": elem.style.borderThickness = value;\r\n\t\t\t\t\t\telem.style.borderWidth = value + \"px\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"borderColor\": elem.style.borderColor = value;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"borderWith\": elem.style.borderWith = value;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"borderStyle\": elem.style.borderStyle = value;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"padding\": elem.style.padding = value;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"paddingBottom\": elem.style.paddingBottom = value;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"paddingLeft\": elem.style.paddingLeft = value;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"paddingRight\": elem.style.paddingRight = value;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"paddingTop\": elem.style.paddingTop = value;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn elem;\r\n\t\t}\r\n\r\n\t\tthis.underRecursionStyle = [];\r\n\t\tthis.applyFormatValues = function (th, value, columnNumber) { /* Format for dimensions (\"header columns\") */\r\n\t\t\tvar columndatatype = self.columns[columnNumber].getAttribute(\"dataType\");\r\n\t\t\tif (columndatatype == \"date\") {\r\n\t\t\t\tvalue = self.dimensionPictureValue(value, columnNumber)\r\n\t\t\t}\r\n\t\t\t//apply default format\r\n\t\t\tvar defaultFormats = self.columns[columnNumber].getAttribute(\"format\");\r\n\t\t\tif ((defaultFormats != null) && (defaultFormats != \"\")) {\r\n\t\t\t\tth = self.setStyleValues(th, defaultFormats);\r\n\t\t\t}\r\n\t\t\t//apply format value\r\n\t\t\tself.underRecursionStyle = [];\r\n\t\t\tfor (var i = 0; i < self.formatValues.length; i++) {\r\n\t\t\t\tif (self.formatValues[i].columnNumber == columnNumber) { //a format for this column\r\n\t\t\t\t\tif (self.formatValues[i].value === value.trimpivot()) {\r\n\t\t\t\t\t\tth = self.setStyleValues(th, self.formatValues[i].format);\r\n\t\t\t\t\t\tif ((self.formatValues[i].recursive != undefined) && (self.formatValues[i].recursive == \"yes\")) {\r\n\t\t\t\t\t\t\tself.underRecursionStyle.push(self.formatValues[i]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar measureDataType = self.columns[columnNumber].getAttribute(\"dataType\");\r\n\t\t\t//apply conditional values\r\n\t\t\tvar equal = [];\r\n\t\t\tvar notequal = [];\r\n\t\t\tvar greaterThan = [];\r\n\t\t\tvar greaterOrEqual = [];\r\n\t\t\tvar lessThan = [];\r\n\t\t\tvar lessOrEqual = [];\r\n\t\t\tvar greaterOrEqual = [];\r\n\t\t\tvar between = [];\r\n\t\t\tfor (var i = 0; i < self.conditionalFormatsColumns.length; i++) {\r\n\t\t\t\tif (self.conditionalFormatsColumns[i].columnNumber == columnNumber) {\r\n\t\t\t\t\tif (self.conditionalFormatsColumns[i].operation1 == \"equal\") {\r\n\t\t\t\t\t\tif ((measureDataType === \"real\") || (measureDataType === \"integer\")) {\r\n\t\t\t\t\t\t\tequal[0] = parseFloat(self.conditionalFormatsColumns[i].value1);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tequal[0] = self.conditionalFormatsColumns[i].value1\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tequal[1] = self.conditionalFormatsColumns[i].format;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (self.conditionalFormatsColumns[i].operation1 == \"notequal\") {\r\n\t\t\t\t\t\tif ((measureDataType === \"real\") || (measureDataType === \"integer\")) {\r\n\t\t\t\t\t\t\tnotequal[0] = parseFloat(self.conditionalFormatsColumns[i].value1);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tnotequal[0] = self.conditionalFormatsColumns[i].value1\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tnotequal[1] = self.conditionalFormatsColumns[i].format;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (self.conditionalFormatsColumns[i].operation1 == \"less\") {\r\n\t\t\t\t\t\tif ((measureDataType === \"real\") || (measureDataType === \"integer\")) {\r\n\t\t\t\t\t\t\tlessThan[0] = parseFloat(self.conditionalFormatsColumns[i].value1);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tlessThan[0] = self.conditionalFormatsColumns[i].value1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tlessThan[1] = self.conditionalFormatsColumns[i].format;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (self.conditionalFormatsColumns[i].operation1 == \"greater\") {\r\n\t\t\t\t\t\tif ((measureDataType === \"real\") || (measureDataType === \"integer\")) {\r\n\t\t\t\t\t\t\tgreaterThan[0] = parseFloat(self.conditionalFormatsColumns[i].value1);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tgreaterThan[0] = self.conditionalFormatsColumns[i].value1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tgreaterThan[1] = self.conditionalFormatsColumns[i].format;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ((self.conditionalFormatsColumns[i].operation1 == \"greaterequal\") && (self.conditionalFormatsColumns[i].operation2 == undefined)) {\r\n\t\t\t\t\t\tif ((measureDataType === \"real\") || (measureDataType === \"integer\")) {\r\n\t\t\t\t\t\t\tgreaterOrEqual[0] = parseFloat(self.conditionalFormatsColumns[i].value1);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tgreaterOrEqual[0] = self.conditionalFormatsColumns[i].value1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tgreaterThan[1] = self.conditionalFormatsColumns[i].format;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (self.conditionalFormatsColumns[i].operation1 == \"lessequal\") {\r\n\t\t\t\t\t\tif ((measureDataType === \"real\") || (measureDataType === \"integer\")) {\r\n\t\t\t\t\t\t\tlessOrEqual[0] = parseFloat(self.conditionalFormatsColumns[i].value1);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tlessOrEqual[0] = self.conditionalFormatsColumns[i].value1\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tlessThan[1] = self.conditionalFormatsColumns[i].format;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (self.conditionalFormatsColumns[i].operation2 && self.conditionalFormatsColumns[i].operation1 == \"greaterequal\") {  //when interval\r\n\t\t\t\t\t\t//greaterOrEqual = []\r\n\t\t\t\t\t\tif ((measureDataType === \"real\") || (measureDataType === \"integer\")) {\r\n\t\t\t\t\t\t\tbetween[0] = parseFloat(self.conditionalFormatsColumns[i].value1);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tbetween[0] = self.conditionalFormatsColumns[i].value1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (self.conditionalFormatsColumns[i].operation2 && self.conditionalFormatsColumns[i].operation2 == \"lessequal\") {\r\n\t\t\t\t\t\t\tif ((measureDataType === \"real\") || (measureDataType === \"integer\")) {\r\n\t\t\t\t\t\t\t\tbetween[1] = parseFloat(self.conditionalFormatsColumns[i].value2);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tbetween[1] = self.conditionalFormatsColumns[i].value2;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tbetween[2] = self.conditionalFormatsColumns[i].format;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar comparisons = new Array(3);\r\n\r\n\t\t\tth.style.textAlign = \"start\";\r\n\t\t\tif (measureDataType === \"real\") {\r\n\t\t\t\tth.style.textAlign = \"start\";\r\n\t\t\t\tvalue = parseFloat(value);\r\n\t\t\t}\r\n\r\n\t\t\tif (measureDataType === \"integer\") {\r\n\r\n\t\t\t\tth.style.textAlign = \"right\";\r\n\t\t\t\tvalue = parseInt(value);\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif (measureDataType === \"real\") {\r\n\t\t\t\tth.style.textAlign = \"end\";\r\n\t\t\t}\r\n\r\n\t\t\tif (measureDataType != \"date\") {\r\n\t\t\t\tif ((equal[0] != undefined) && (value == equal[0])) {\r\n\t\t\t\t\tth = self.setStyleValues(th, equal[1]);\r\n\t\t\t\t}\r\n\t\t\t\tif ((notequal[0] != undefined) && (value != notequal[0])) {\r\n\t\t\t\t\tth = self.setStyleValues(th, notequal[1]);\r\n\t\t\t\t}\r\n\t\t\t\tif (((greaterThan[0] != undefined) && (value > greaterThan[0])) ||\r\n\t\t\t\t\t((greaterOrEqual[0] != undefined) && (value >= greaterOrEqual[0]))) {\r\n\t\t\t\t\tth = self.setStyleValues(th, greaterThan[1]);\r\n\t\t\t\t}\r\n\t\t\t\tif (((lessThan[0] != undefined) && (value < lessThan[0])) ||\r\n\t\t\t\t\t((lessOrEqual[0] != undefined) && (value <= lessOrEqual[0]))) {\r\n\t\t\t\t\tth = self.setStyleValues(th, lessThan[1]);\r\n\t\t\t\t}\r\n\t\t\t\tif ((between[0] != undefined && between[1] != undefined) && (value >= between[0] && value <= between[1])) {\r\n\t\t\t\t\tth = self.setStyleValues(th, between[2]);\r\n\t\t\t\t}\r\n\t\t\t\treturn th;\r\n\t\t\t}\r\n\r\n\r\n\t\t\tif (measureDataType === \"date\") {\r\n\t\t\t\tth.style.textAlign = \"right\";\r\n\t\t\t\tvar dates = value.split(\"-\");\r\n\t\t\t\tif ((self.defaultPicture.getAttribute(\"dateFormat\") != undefined) && (self.defaultPicture.getAttribute(\"dateFormat\") != null)) {\r\n\t\t\t\t\tpicture = self.defaultPicture.getAttribute(\"dateFormat\").split(\"\");\r\n\t\t\t\t}\r\n\t\t\t\tvar dateElements = new Array(3);\r\n\t\t\t\tdateElements[0] = parseInt(dates[0]);\r\n\t\t\t\tdateElements[1] = parseInt(dates[1]);\r\n\t\t\t\tdateElements[2] = parseInt(dates[2]);\r\n\r\n\r\n\t\t\t\tif ((greaterThan[0] != undefined)) {\r\n\t\t\t\t\tvar cmpar = greaterThan[0].split(\"-\");\r\n\t\t\t\t\tvar cmparElements = new Array(3);\r\n\t\t\t\t\tcmparElements[1] = parseInt(cmpar[1]);\r\n\t\t\t\t\tcmparElements[2] = parseInt(cmpar[2]);\r\n\t\t\t\t\tcmparElements[0] = parseInt(cmpar[0]);\r\n\r\n\t\t\t\t\tif ((cmparElements[0] < dateElements[0]) || ((cmparElements[0] <= dateElements[0]) && (cmparElements[1] < dateElements[1]))\r\n\t\t\t\t\t\t|| ((cmparElements[0] <= dateElements[0]) && (cmparElements[1] <= dateElements[1]) && (cmparElements[2] < dateElements[2]))) {\r\n\t\t\t\t\t\tth = self.setStyleValues(th, greaterThan[1]);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\tif ((lessThan[0] != undefined)) {\r\n\t\t\t\t\tvar cmpar = lessThan[0].split(\"-\");\r\n\t\t\t\t\tcmparElements = new Array(3);\r\n\t\t\t\t\tcmparElements[1] = parseInt(cmpar[1]);\r\n\t\t\t\t\tcmparElements[2] = parseInt(cmpar[2]);\r\n\t\t\t\t\tcmparElements[0] = parseInt(cmpar[0]);\r\n\r\n\t\t\t\t\tif ((cmparElements[0] > dateElements[0]) || ((cmparElements[0] >= dateElements[0]) && (cmparElements[1] > dateElements[1]))\r\n\t\t\t\t\t\t|| ((cmparElements[0] >= dateElements[0]) && (cmparElements[1] >= dateElements[1]) && (cmparElements[2] > dateElements[2]))) {\r\n\t\t\t\t\t\tth = self.setStyleValues(th, lessThan[1]);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ((between[0] != undefined) && (between[1] != undefined)) {\r\n\t\t\t\t\tvar cmpar = between[0].split(\"-\");\r\n\t\t\t\t\tvar cmpar2 = between[1].split(\"-\");\r\n\t\t\t\t\tcmparElements = new Array(3);\r\n\t\t\t\t\tcmparElements2 = new Array(3);\r\n\t\t\t\t\tcmparElements[1] = parseInt(cmpar[1]);\r\n\t\t\t\t\tcmparElements[2] = parseInt(cmpar[2]);\r\n\t\t\t\t\tcmparElements[0] = parseInt(cmpar[0]);\r\n\r\n\t\t\t\t\tcmparElements2[1] = parseInt(cmpar2[1]);\r\n\t\t\t\t\tcmparElements2[2] = parseInt(cmpar2[2]);\r\n\t\t\t\t\tcmparElements2[0] = parseInt(cmpar2[0]);\r\n\r\n\t\t\t\t\tif (((cmparElements[0] <= dateElements[0]) || ((cmparElements[0] <= dateElements[0]) && (cmparElements[1] < dateElements[1]))\r\n\t\t\t\t\t\t|| ((cmparElements[0] <= dateElements[0]) && (cmparElements[1] <= dateElements[1]) && (cmparElements[2] < dateElements[2])))\r\n\t\t\t\t\t\t&&\r\n\t\t\t\t\t\t((cmparElements2[0] > dateElements[0]) || ((cmparElements2[0] >= dateElements[0]) && (cmparElements2[1] > dateElements[1]))\r\n\t\t\t\t\t\t\t|| ((cmparElements2[0] >= dateElements[0]) && (cmparElements2[1] >= dateElements[1]) && (cmparElements2[2] > dateElements[2])))\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\tth = self.setStyleValues(th, between[2]);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\r\n\t\t\tif (value > greaterThan[0]) {\r\n\t\t\t\tth = self.setStyleValues(th, greaterThan[1]);\r\n\t\t\t} else {\r\n\t\t\t\tif (value < lessThan[0]) {\r\n\t\t\t\t\tth = self.setStyleValues(th, lessThan[1]);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (value >= between[0] && value <= between[1]) {\r\n\t\t\t\t\t\tth = self.setStyleValues(th, between[2]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn th;\r\n\t\t}\r\n\r\n\t\tthis.applyConditionalFormats = function (td, value, lastMEasure, measureNumber) { /* format for measures (row data) */\r\n\t\t\tif (measures.length > 0) {\r\n\t\t\t\tvar defaultFormats;\r\n\t\t\t\tvar measureDataType;\r\n\t\t\t\tif (lastMEasure) {\r\n\t\t\t\t\tmeasureNumber = measures.length - 1;\r\n\t\t\t\t\tmeasureDataType = measures[measures.length - 1].getAttribute(\"dataType\");\r\n\t\t\t\t\tdefaultFormats = measures[measures.length - 1].getAttribute(\"format\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tmeasureDataType = measures[measureNumber].getAttribute(\"dataType\");\r\n\t\t\t\t\tdefaultFormats = measures[measureNumber].getAttribute(\"format\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//apply default format\r\n\t\t\t\tif ((defaultFormats != null) && (defaultFormats != \"\")) {\r\n\t\t\t\t\ttd = self.setStyleValues(td, defaultFormats);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//apply format value\r\n\t\t\t\tfor (var i = 0; i < self.formatValuesMeasures.length; i++) {\r\n\t\t\t\t\tif (self.formatValuesMeasures[i].columnNumber == measureNumber) { //a format for this column\r\n\t\t\t\t\t\tif (self.formatValuesMeasures[i].value === value) {\r\n\t\t\t\t\t\t\ttd = self.setStyleValues(td, self.formatValuesMeasures[i].format);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (self.underRecursionStyle) {\r\n\t\t\t\t\tfor (var i = 0; i < self.underRecursionStyle.length; i++) {\r\n\t\t\t\t\t\ttd = self.setStyleValues(td, self.underRecursionStyle[i].format);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t//apply conditional values\r\n\t\t\t\tvar equal = [];\r\n\t\t\t\tvar notequal = [];\r\n\t\t\t\tvar greaterThan = [];\r\n\t\t\t\tvar greaterOrEqual = [];\r\n\t\t\t\tvar lessThan = [];\r\n\t\t\t\tvar lessOrEqual = [];\r\n\t\t\t\tvar greaterOrEqual = [];\r\n\t\t\t\tvar between = [];\r\n\t\t\t\tfor (var i = 0; i < self.conditionalFormats.length; i++) {\r\n\t\t\t\t\tif (self.conditionalFormats[i].columnNumber == measureNumber) {\r\n\t\t\t\t\t\tif (self.conditionalFormats[i].operation1 == \"equal\") {\r\n\t\t\t\t\t\t\tif ((measureDataType === \"real\") || (measureDataType === \"integer\")) {\r\n\t\t\t\t\t\t\t\tequal[0] = parseFloat(self.conditionalFormats[i].value1);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tequal[0] = self.conditionalFormats[i].value1\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tequal[1] = self.conditionalFormats[i].format;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (self.conditionalFormats[i].operation1 == \"notequal\") {\r\n\t\t\t\t\t\t\tif ((measureDataType === \"real\") || (measureDataType === \"integer\")) {\r\n\t\t\t\t\t\t\t\tnotequal[0] = parseFloat(self.conditionalFormats[i].value1);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tnotequal[0] = self.conditionalFormats[i].value1\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tnotequal[1] = self.conditionalFormats[i].format;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (self.conditionalFormats[i].operation1 == \"less\") {\r\n\t\t\t\t\t\t\tif ((measureDataType === \"real\") || (measureDataType === \"integer\")) {\r\n\t\t\t\t\t\t\t\tlessThan[0] = parseFloat(self.conditionalFormats[i].value1);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tlessThan[0] = self.conditionalFormats[i].value1\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tlessThan[1] = self.conditionalFormats[i].format;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif ((self.conditionalFormats[i].operation1 == \"lessequal\") && (!self.conditionalFormats[i].operation2)) {\r\n\t\t\t\t\t\t\tif ((measureDataType === \"real\") || (measureDataType === \"integer\")) {\r\n\t\t\t\t\t\t\t\tlessOrEqual[0] = parseFloat(self.conditionalFormats[i].value1);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tlessOrEqual[0] = self.conditionalFormats[i].value1\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tlessThan[1] = self.conditionalFormats[i].format;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (self.conditionalFormats[i].operation1 == \"greater\") {\r\n\t\t\t\t\t\t\tif ((measureDataType === \"real\") || (measureDataType === \"integer\")) {\r\n\t\t\t\t\t\t\t\tgreaterThan[0] = parseFloat(self.conditionalFormats[i].value1);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tgreaterThan[0] = self.conditionalFormats[i].value1;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tgreaterThan[1] = self.conditionalFormats[i].format;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif ((self.conditionalFormats[i].operation1 == \"greaterequal\") && (!self.conditionalFormats[i].operation2)) {\r\n\t\t\t\t\t\t\tif ((measureDataType === \"real\") || (measureDataType === \"integer\")) {\r\n\t\t\t\t\t\t\t\tgreaterOrEqual[0] = parseFloat(self.conditionalFormats[i].value1);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tgreaterOrEqual[0] = self.conditionalFormats[i].value1;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tgreaterThan[1] = self.conditionalFormats[i].format;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (self.conditionalFormats[i].operation2 && self.conditionalFormats[i].operation1 == \"greaterequal\") {  //when interval\r\n\t\t\t\t\t\t\t//greaterOrEqual = []\r\n\t\t\t\t\t\t\tif ((measureDataType === \"real\") || (measureDataType === \"integer\")) {\r\n\t\t\t\t\t\t\t\tbetween[0] = parseFloat(self.conditionalFormats[i].value1);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tbetween[0] = self.conditionalFormats[i].value1;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (self.conditionalFormats[i].operation2 && self.conditionalFormats[i].operation2 == \"lessequal\") {\r\n\t\t\t\t\t\t\t\tif ((measureDataType === \"real\") || (measureDataType === \"integer\")) {\r\n\t\t\t\t\t\t\t\t\tbetween[1] = parseFloat(self.conditionalFormats[i].value2);\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tbetween[1] = self.conditionalFormats[i].value2;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tbetween[2] = self.conditionalFormats[i].format;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (measureDataType != \"date\") {\r\n\t\t\t\t\tif ((equal[0] != undefined) && (value == equal[0])) {\r\n\t\t\t\t\t\ttd = self.setStyleValues(td, equal[1]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ((notequal[0] != undefined) && (value != notequal[0])) {\r\n\t\t\t\t\t\ttd = self.setStyleValues(td, notequal[1]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (((greaterThan[0] != undefined) && (value > greaterThan[0])) ||\r\n\t\t\t\t\t\t((greaterOrEqual[0] != undefined) && (value >= greaterOrEqual[0]))) {\r\n\t\t\t\t\t\ttd = self.setStyleValues(td, greaterThan[1]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (((lessThan[0] != undefined) && (value < lessThan[0])) ||\r\n\t\t\t\t\t\t((lessOrEqual[0] != undefined) && (value <= lessOrEqual[0]))) {\r\n\t\t\t\t\t\ttd = self.setStyleValues(td, lessThan[1]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ((between[0] != undefined && between[1] != undefined) && (value >= between[0] && value <= between[1])) {\r\n\t\t\t\t\t\ttd = self.setStyleValues(td, between[2]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (measureDataType === \"date\") {\r\n\t\t\t\t\tvar dates = value.split(\"-\");\r\n\t\t\t\t\tif ((self.defaultPicture.getAttribute(\"dateFormat\") != undefined) && (self.defaultPicture.getAttribute(\"dateFormat\") != null)) {\r\n\t\t\t\t\t\tpicture = self.defaultPicture.getAttribute(\"dateFormat\").split(\"\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar dateElements = new Array(3);\r\n\t\t\t\t\tdateElements[0] = parseInt(dates[0]);\r\n\t\t\t\t\tdateElements[1] = parseInt(dates[1]);\r\n\t\t\t\t\tdateElements[2] = parseInt(dates[2]);\r\n\t\t\t\t\t//for (var i=0; i<=2; i++ ){\r\n\t\t\t\t\t//if (picture[i] != undefined){\r\n\t\t\t\t\t//\tif (picture[i] === \"M\") dateElements[1] = parseInt(dates[1]);\r\n\t\t\t\t\t//\tif (picture[i] === \"D\") dateElements[2] = parseInt(dates[2]);\r\n\t\t\t\t\t//\tif (picture[i] === \"Y\") dateElements[0] = parseInt(dates[0]);\r\n\t\t\t\t\t//} //falta el caso en que no hay picture por defecto\r\n\t\t\t\t\t//}\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tif ((equal[0] != undefined) || (greaterOrEqual[0] != undefined) || (lessOrEqual[0] != undefined)) {\r\n\t\t\t\t\t\t\tvar cmpar;\r\n\t\t\t\t\t\t\tif (equal[0] != undefined) {\r\n\t\t\t\t\t\t\t\tcmpar = equal[0].split(\"-\");\r\n\t\t\t\t\t\t\t} else if (greaterOrEqual[0] != undefined) {\r\n\t\t\t\t\t\t\t\tcmpar = greaterOrEqual[0].split(\"-\");\r\n\t\t\t\t\t\t\t} else if (greaterOrEqual[0] != undefined) {\r\n\t\t\t\t\t\t\t\tcmpar = lessOrEqual[0].split(\"-\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tvar cmparElements = new Array(3);\r\n\t\t\t\t\t\t\tcmparElements[1] = parseInt(cmpar[1]);\r\n\t\t\t\t\t\t\tcmparElements[2] = parseInt(cmpar[2]);\r\n\t\t\t\t\t\t\tcmparElements[0] = parseInt(cmpar[0]);\r\n\r\n\t\t\t\t\t\t\tif ((cmparElements[0] == dateElements[0]) || ((cmparElements[0] == dateElements[0]) && (cmparElements[1] == dateElements[1]))) {\r\n\t\t\t\t\t\t\t\tif (equal[1] != undefined)\r\n\t\t\t\t\t\t\t\t\ttd = self.setStyleValues(td, equal[1]);\r\n\t\t\t\t\t\t\t\telse if (greaterThan[1] != undefined)\r\n\t\t\t\t\t\t\t\t\ttd = self.setStyleValues(td, greaterThan[1]);\r\n\t\t\t\t\t\t\t\telse if (lessThan[1] != undefined)\r\n\t\t\t\t\t\t\t\t\ttd = self.setStyleValues(td, lessThan[1]);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif ((notequal[0] != undefined)) {\r\n\t\t\t\t\t\t\tvar cmpar = notequal[0].split(\"-\");\r\n\t\t\t\t\t\t\tvar cmparElements = new Array(3);\r\n\t\t\t\t\t\t\tcmparElements[1] = parseInt(cmpar[1]);\r\n\t\t\t\t\t\t\tcmparElements[2] = parseInt(cmpar[2]);\r\n\t\t\t\t\t\t\tcmparElements[0] = parseInt(cmpar[0]);\r\n\r\n\t\t\t\t\t\t\tif ((cmparElements[0] != dateElements[0]) || ((cmparElements[0] != dateElements[0]) && (cmparElements[1] != dateElements[1]))) {\r\n\t\t\t\t\t\t\t\ttd = self.setStyleValues(td, notequal[1]);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif ((greaterThan[0] != undefined) || (greaterOrEqual[0] != undefined)) {\r\n\t\t\t\t\t\t\tvar cmpar;\r\n\t\t\t\t\t\t\tif (greaterThan[0].split(\"-\") != undefined) {\r\n\t\t\t\t\t\t\t\tcmpar = greaterThan[0].split(\"-\");\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tcmpar = greaterOrEqual[0].split(\"-\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tvar cmparElements = new Array(3);\r\n\t\t\t\t\t\t\tcmparElements[1] = parseInt(cmpar[1]);\r\n\t\t\t\t\t\t\tcmparElements[2] = parseInt(cmpar[2]);\r\n\t\t\t\t\t\t\tcmparElements[0] = parseInt(cmpar[0]);\r\n\r\n\t\t\t\t\t\t\tif ((cmparElements[0] < dateElements[0]) || ((cmparElements[0] <= dateElements[0]) && (cmparElements[1] < dateElements[1]))\r\n\t\t\t\t\t\t\t\t|| ((cmparElements[0] <= dateElements[0]) && (cmparElements[1] <= dateElements[1]) && (cmparElements[2] < dateElements[2]))) {\r\n\t\t\t\t\t\t\t\ttd = self.setStyleValues(td, greaterThan[1]);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\t\tif ((lessThan[0] != undefined) || (lessOrEqual[0] != undefined)) {\r\n\t\t\t\t\t\t\tvar cmpar;\r\n\t\t\t\t\t\t\tif (lessThan[0].split(\"-\") != undefined) {\r\n\t\t\t\t\t\t\t\tcmpar = lessThan[0].split(\"-\");\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tcmpar = lessOrEqual[0].split(\"-\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tcmparElements = new Array(3);\r\n\t\t\t\t\t\t\tcmparElements[1] = parseInt(cmpar[1]);\r\n\t\t\t\t\t\t\tcmparElements[2] = parseInt(cmpar[2]);\r\n\t\t\t\t\t\t\tcmparElements[0] = parseInt(cmpar[0]);\r\n\r\n\t\t\t\t\t\t\tif ((cmparElements[0] > dateElements[0]) || ((cmparElements[0] >= dateElements[0]) && (cmparElements[1] > dateElements[1]))\r\n\t\t\t\t\t\t\t\t|| ((cmparElements[0] >= dateElements[0]) && (cmparElements[1] >= dateElements[1]) && (cmparElements[2] > dateElements[2]))) {\r\n\t\t\t\t\t\t\t\ttd = self.setStyleValues(td, lessThan[1]);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif ((between[0] != undefined) && (between[1] != undefined)) {\r\n\t\t\t\t\t\t\tvar cmpar = between[0].split(\"-\");\r\n\t\t\t\t\t\t\tvar cmpar2 = between[1].split(\"-\");\r\n\t\t\t\t\t\t\tcmparElements = new Array(3);\r\n\t\t\t\t\t\t\tcmparElements2 = new Array(3);\r\n\t\t\t\t\t\t\tcmparElements[1] = parseInt(cmpar[1]);\r\n\t\t\t\t\t\t\tcmparElements[2] = parseInt(cmpar[2]);\r\n\t\t\t\t\t\t\tcmparElements[0] = parseInt(cmpar[0]);\r\n\r\n\t\t\t\t\t\t\tcmparElements2[1] = parseInt(cmpar2[1]);\r\n\t\t\t\t\t\t\tcmparElements2[2] = parseInt(cmpar2[2]);\r\n\t\t\t\t\t\t\tcmparElements2[0] = parseInt(cmpar2[0]);\r\n\r\n\t\t\t\t\t\t\tif (((cmparElements[0] <= dateElements[0]) || ((cmparElements[0] <= dateElements[0]) && (cmparElements[1] < dateElements[1]))\r\n\t\t\t\t\t\t\t\t|| ((cmparElements[0] <= dateElements[0]) && (cmparElements[1] <= dateElements[1]) && (cmparElements[2] < dateElements[2])))\r\n\t\t\t\t\t\t\t\t&&\r\n\t\t\t\t\t\t\t\t((cmparElements2[0] > dateElements[0]) || ((cmparElements2[0] >= dateElements[0]) && (cmparElements2[1] > dateElements[1]))\r\n\t\t\t\t\t\t\t\t\t|| ((cmparElements2[0] >= dateElements[0]) && (cmparElements2[1] >= dateElements[1]) && (cmparElements2[2] > dateElements[2])))\r\n\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\ttd = self.setStyleValues(td, between[2]);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} catch (ERROR) {\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\r\n\r\n\t\t\t}\r\n\t\t\treturn td;\r\n\r\n\t\t}\r\n\r\n\t\tthis.dimensionPictureValue = function (value, dimensionNumber) {  //Picture for dimensions values\r\n\t\t\tif (value == \"#NuN#\") {\r\n\t\t\t\tvar defaultNull = self.defaultPicture.getAttribute(\"textForNullValues\");\r\n\t\t\t\tif (defaultNull != undefined) {\r\n\t\t\t\t\treturn defaultNull;\r\n\t\t\t\t}\r\n\t\t\t\treturn \"\";\r\n\t\t\t}\r\n\t\t\tvar result = \"\";\r\n\t\t\tvar dat\r\n\t\t\tvar customPicture;\r\n\r\n\t\t\tdat = self.columns[dimensionNumber].getAttribute(\"dataType\");\r\n\t\t\tcustomPicture = self.columns[dimensionNumber].getAttribute(\"picture\");\r\n\t\t\tvar newValue = OAT.ApplyPictureValue(value, dat, self.defaultPicture, customPicture);\r\n\r\n\t\t\treturn newValue;\r\n\t\t}\r\n\r\n\t\tthis.getMeasureNumber = function (dataField, measures) {\r\n\t\t\tfor (var mI = 0; mI < measures.length; mI++) {\r\n\t\t\t\tif (measures[mI].getAttribute(\"dataField\") == dataField) {\r\n\t\t\t\t\treturn mI;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.getMeasureName = function (dataField, measures) {\r\n\t\t\tfor (var mI = 0; mI < measures.length; mI++) {\r\n\t\t\t\tif (measures[mI].getAttribute(\"dataField\") == dataField) {\r\n\t\t\t\t\treturn measures[mI].getAttribute(\"displayName\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.defaultPictureValue = function (value, lastMEasure, measureNumber) { //Picture for measures values\r\n\t\t\tif (value == \"#NuN#\") {\r\n\t\t\t\tvar defaultNull = self.defaultPicture.getAttribute(\"textForNullValues\");\r\n\t\t\t\tif (defaultNull != undefined) {\r\n\t\t\t\t\treturn defaultNull;\r\n\t\t\t\t}\r\n\t\t\t\treturn \"\";\r\n\t\t\t}\r\n\t\t\tif ((value == \"#NaV#\") || (isNaN(value))) {\r\n\t\t\t\treturn \"-\"\r\n\t\t\t}\r\n\t\t\tvar result = \"\";\r\n\t\t\tvar dat\r\n\t\t\tvar customPicture;\r\n\r\n\t\t\tif (measures.length > 0) {\r\n\t\t\t\tif (lastMEasure) {\r\n\t\t\t\t\tdat = measures[measures.length - 1].getAttribute(\"dataType\");\r\n\t\t\t\t\tcustomPicture = measures[measures.length - 1].getAttribute(\"picture\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdat = measures[measureNumber].getAttribute(\"dataType\");\r\n\t\t\t\t\tcustomPicture = measures[measureNumber].getAttribute(\"picture\");\r\n\t\t\t\t}\r\n\t\t\t\tvar newValue = OAT.ApplyPictureValue(value, dat, self.defaultPicture, customPicture);\r\n\t\t\t\treturn newValue;\r\n\t\t\t} else {\r\n\t\t\t\treturn value;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\tthis.countedRows = 0;\r\n\r\n\t\tthis.appendRowToTable = function (tbody, row, isTitleRow) {\r\n\t\t\tif ( (pageSize) && (!self.serverPagination)) {\r\n\t\t\t\tif (!isTitleRow) {\r\n\t\t\t\t\tself.countedRows++;\r\n\t\t\t\t}\r\n\t\t\t\tif (self.countedRows > pageSize) {\r\n\t\t\t\t\trow.style.display = \"none\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif ((self.serverPagination) && (self.ExportTo)) {\r\n\t\t\t\tif (!isTitleRow) {\r\n\t\t\t\t\tself.countedRows++;\r\n\t\t\t\t}\r\n\t\t\t\tif (self.countedRows > self.rowsPerPage) {\r\n\t\t\t\t\trow.style.display = \"none\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (isTitleRow) {\r\n\t\t\t\trow.setAttribute(\"title_row\", true);\r\n\t\t\t}\r\n\r\n\t\t\t\r\n\t\t\ttbody.appendChild(row);\r\n\t\t}\r\n\r\n\t\tthis.drawTableWhenServerPagination = function () {\r\n\t\t\tOAT.Dom.clear(self.div);\r\n\t\t\t// START create toolbar table\r\n\r\n\t\t\tself.div.setAttribute(\"class\", \"conteiner_table_div\");\r\n\t\t\tvar myTable = OAT.Dom.create(\"table\", {}, \"\");\r\n\t\t\tmyTable.id = self.controlName + \"_\" + self.query + \"_toolbar\";\r\n\t\t\tvar myTbody = OAT.Dom.create(\"tbody\");\r\n\t\t\tvar myRow = OAT.Dom.create(\"tr\");\r\n\t\t\tself.div.appendChild(myTable);\r\n\t\t\t// END\r\n\r\n\t\t\tvar table = OAT.Dom.create(\"table\", {}, \"pivot_table\");\r\n\t\t\ttable.id = this.controlName + \"_\" + this.query;\r\n\t\t\t//add control name and query name as the id of main table\r\n\t\t\tvar tbody = OAT.Dom.create(\"tbody\");\r\n\t\t\t\r\n\t\t\tself.drawTitleDiv();\r\n\t\t\tself.drawFilters();\r\n\t\t\tself.countedRows = 0;\r\n\t\t\tif (OAT.isIE()) {\r\n\t\t\t\tvar divIeContainer = document.createElement(\"div\");\r\n\t\t\t\tdivIeContainer.setAttribute(\"class\", \"divIeContainer\");\r\n\t\t\t\tself.div.appendChild(divIeContainer);\r\n\t\t\t\tOAT.Dom.append([table, tbody], [divIeContainer, table]);\r\n\t\t\t\ttable.style.marginBottom = \"0px\";\r\n\t\t\t} else {\r\n\t\t\t\tOAT.Dom.append([table, tbody], [self.div, table]);\r\n\t\t\t}\r\n\r\n\t\t\tself.countedRows = 0;\r\n\t\t\tvar firstRow;\r\n\t\t\tvar firstRowTotalSpan = self.colConditions.length;\r\n\t\t\tif (self.colConditions.length > 0) {\r\n\t\t\t\tvar i = 0;\r\n\t\t\t\tvar tr = OAT.Dom.create(\"tr\");\r\n\t\t\t\tself._drawRowConditionsHeadingsCustom(tr);\r\n\t\t\t\t// create a list of the dimension name, that are not pivot, with heigth span equal to   colConditions.length\r\n\t\t\t\tfor (var ni = 0; ni < self.colConditions.length; ni++) {// creat a list of the dimension name, that are pivot as columns\r\n\t\t\t\t\ttr = self._drawColConditionsHeadingsCustom(tr, ni, (ni === self.colConditions.length - 1));\r\n\t\t\t\t}\r\n\t\t\t\t//tr.setAttribute(\"title_row\", true);\r\n\t\t\t\tself.appendRowToTable(tbody, tr, true);//tbody.appendChild(tr);\r\n\t\t\t\tfirstRow = tr;\r\n\t\t\t}\r\n\t\t\ttry {\r\n\r\n\t\t\t\tfor (var i = 0; i < self.colConditions.length; i++) { //show columns particular values\r\n\t\t\t\t\tvar tr = OAT.Dom.create(\"tr\");\r\n\r\n\r\n\t\t\t\t\tvar j = 0\r\n\t\t\t\t\twhile (j < self.pageData.columnsHeaders.length) {\r\n\r\n\r\n\t\t\t\t\t\tvar h;\r\n\t\t\t\t\t\tif ((!self.pageData.columnsHeaders[j].subTotal)) {\r\n\t\t\t\t\t\t\th = j;\r\n\t\t\t\t\t\t\tvar colSpan = 1;\r\n\t\t\t\t\t\t\tvar columnValue = (self.pageData.columnsHeaders[j].subHeaders.length > i) ? self.pageData.columnsHeaders[j].subHeaders[i].value : \"\";\r\n\t\t\t\t\t\t\twhile ((j + 1 < self.pageData.columnsHeaders.length)\r\n\t\t\t\t\t\t\t\t&& ((!self.pageData.columnsHeaders[j + 1].subTotal) || (i < self.pageData.columnsHeaders[j + 1].subHeaders.length - 1))\r\n\t\t\t\t\t\t\t\t&& ((self.pageData.columnsHeaders[j + 1].subHeaders.length > i) && (self.pageData.columnsHeaders[j + 1].subHeaders[i].value == columnValue))) {\r\n\t\t\t\t\t\t\t\tcolSpan++;\r\n\t\t\t\t\t\t\t\tj++;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tj++;\r\n\r\n\r\n\t\t\t\t\t\t\tvar th = OAT.Dom.create(\"th\", {}, \"even gx-pv-even-row\");\r\n\t\t\t\t\t\t\tth.colSpan = colSpan;\r\n\t\t\t\t\t\t\tOAT.addTextNode(th, self.dimensionPictureValue(columnValue.trimpivot(), self.colConditions[i]))\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tself.setClickEventHandlers(th, columnValue, \"DIMENSION\", self.colConditions[i], { axis: \"columns\", columnnumber: h, columndimension: self.pageData.columnsHeaders[h], rownumber: i });\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tth = self.applyFormatValues(th, columnValue.trimpivot(), self.colConditions[i]);\r\n\t\t\t\t\t\t\ttr.appendChild(th);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tvar hiddenGrandTotal = (self.GrandTotalVisibility.TotalForColumns == \"No\" ) ? measures.length : 0;\r\n\t\t\t\t\t\t\tvar isGrandTotal = (j >= (self.pageData.columnsHeaders.length - measures.length + hiddenGrandTotal))\r\n\t\t\t\t\t\t\tif (self.ShowMeasuresAsRows) {\r\n\t\t\t\t\t\t\t\tisGrandTotal = ((j >= (self.pageData.columnsHeaders.length - 1)) && (self.GrandTotalVisibility.TotalForColumns == \"Yes\" ))\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (isGrandTotal) {\r\n\t\t\t\t\t\t\t\t//Grand Total\r\n\t\t\t\t\t\t\t\tif (self.GrandTotalVisibility.TotalForColumns == \"Yes\"){\r\n\t\t\t\t\t\t\t\t\tif (i == 0) {\r\n\t\t\t\t\t\t\t\t\t\tvar th = OAT.Dom.create(\"th\", {}, \"h2subtitle\");\r\n\t\t\t\t\t\t\t\t\t\tOAT.addTextNode(th, self.translations.GXPL_QViewerJSTotal/*gx.getMessage(\"GXPL_QViewerJSTotal\")*/)\r\n\t\t\t\t\t\t\t\t\t\tth.rowSpan = self.colConditions.length;\r\n\t\t\t\t\t\t\t\t\t\tif (!self.ShowMeasuresAsRows) {\r\n\t\t\t\t\t\t\t\t\t\t\tth.colSpan = measures.length;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\ttr.appendChild(th);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (!self.ShowMeasuresAsRows) {\r\n\t\t\t\t\t\t\t\t\tj = j + measures.length\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tj++;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t//subtotal columns\r\n\t\t\t\t\t\t\t\tif (i < self.pageData.columnsHeaders[j].subHeaders.length) {\r\n\t\t\t\t\t\t\t\t\tvar th = OAT.Dom.create(\"th\", {}, \"h2subtitle \");\r\n\r\n\t\t\t\t\t\t\t\t\tvar columnValue = (self.pageData.columnsHeaders[j].subHeaders.length > i) ? self.pageData.columnsHeaders[j].subHeaders[i].value : \"\";\r\n\t\t\t\t\t\t\t\t\tOAT.addTextNode(th, self.translations.GXPL_QViewerJSTotalFor/*gx.getMessage(\"GXPL_QViewerJSTotalFor\")*/ + \" \" + self.dimensionPictureValue(columnValue.trimpivot(), self.colConditions[i] ))\r\n\t\t\t\t\t\t\t\t\tself.setClickEventHandlers(th, self.translations.GXPL_QViewerJSTotalFor/*gx.getMessage(\"GXPL_QViewerJSTotalFor\")*/ + \" \" + self.dimensionPictureValue(columnValue.trimpivot(), self.colConditions[i] ),\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t \"DIMENSION\", self.colConditions[i], ['PtrTotals', columnValue, \"\", h, \"columns\", i]);\r\n\t\t\t\t\t\t\t\t\tth.rowSpan = self.colConditions.length - i;\r\n\t\t\t\t\t\t\t\t\tif (!self.ShowMeasuresAsRows) {\r\n\t\t\t\t\t\t\t\t\t\tth.colSpan = measures.length;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\ttr.appendChild(th);\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\tif (!self.ShowMeasuresAsRows) {\r\n\t\t\t\t\t\t\t\t\tj = j + measures.length\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tj++;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tself.appendRowToTable(tbody, tr, true);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (self.colConditions.length > 0) {\r\n\t\t\t\t\tif (self.pageData.columnsHeaders.length - self.colConditions.length > 0) { //fill first row\r\n\t\t\t\t\t\tvar th = OAT.Dom.create(\"th\", {}, \"h2subtitle \");\r\n\t\t\t\t\t\tOAT.addTextNode(th, \"\")\r\n\t\t\t\t\t\tth.colSpan = self.pageData.columnsHeaders.length - self.colConditions.length\r\n\t\t\t\t\t\tth.style.borderLeftColor = \"transparent\";\r\n\t\t\t\t\t\tfirstRow.appendChild(th);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t//add a column only with the name of  measures\r\n\t\t\t\t\tif (!self.ShowMeasuresAsRows) {\r\n\t\t\t\t\t\tvar tr = OAT.Dom.create(\"tr\");\r\n\t\t\t\t\t\tvar repeticiones = (self.pageData.columnsHeaders.length / measures.length)\r\n\t\t\t\t\t\tfor (var j = 0; j < repeticiones; j++) {\r\n\t\t\t\t\t\t\tfor (var m = 0; m < measures.length; m++) {\r\n\t\t\t\t\t\t\t\tvar th = OAT.Dom.create(\"th\", {}, \"h2titlewhite\");\r\n\t\t\t\t\t\t\t\tth.colSpan = 1;\r\n\t\t\t\t\t\t\t\tOAT.addTextNode(th, measures[m].attributes.getNamedItem(\"displayName\").nodeValue)\r\n\t\t\t\t\t\t\t\tself.setTitleTexrtAlign(th, th.textContent);\r\n\t\t\t\t\t\t\t\ttr.appendChild(th);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tself.appendRowToTable(tbody, tr, true);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//end of column only with the name of  measures\r\n\t\t\t\t}\r\n\r\n\r\n\r\n\t\t\t\t// first connector\r\n\t\t\t\tif ((self.rowConditions.length && self.options.headingBefore) && (self.colConditions.length === 0)) {\r\n\t\t\t\t\tself._drawRowConditionsHeadings(tbody);\r\n\t\t\t\t} else if ((self.rowConditions.length == 0) && (self.options.headingBefore) && (self.colConditions.length === 0)) {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tself._drawRowConditionsHeadings(tbody);\r\n\t\t\t\t\t} catch (Error) { }\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar several_totals = measures.length > 1;\r\n\t\t\t\tvar colSpan;\r\n\t\t\t\tif (several_totals) {\r\n\t\t\t\t\tcolSpan = self.rowConditions.length - (measures.length - 1);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcolSpan = self.rowConditions.length;\r\n\t\t\t\t}\r\n\t\t\t\tif (self.colConditions.length > 0) self.underRecursionStyle = [];\r\n\r\n\t\t\t\tvar lineaEnBlanco = false;\r\n\t\t\t\tvar skipRow = false;\r\n\t\t\t\t//for all rows\r\n\t\t\t\tfor (var i = 0; i < self.pageData.rows.length; i++) {\r\n\r\n\t\t\t\t\tvar tr = OAT.Dom.create(\"tr\");\r\n\t\t\t\t\tvar row = self.pageData.rows[i];\r\n\t\t\t\t\t// row header values\r\n\t\t\t\t\tfor (var j = 0; j < row.headers.length; j++) {\r\n\t\t\t\t\t\t//add collapse image option\r\n\t\t\t\t\t\tvar item = row.headers[j]\r\n\r\n\t\t\t\t\t\tif (item.rowSpan > 0) {\r\n\t\t\t\t\t\t\tvar th = OAT.Dom.create(\"th\", {}, \"even gx-pv-even-row\");\r\n\r\n\t\t\t\t\t\t\tth.rowSpan = item.rowSpan\r\n\r\n\t\t\t\t\t\t\tOAT.addTextNode(th, self.dimensionPictureValue(item.value.trimpivot(), self.rowConditions[j]))\r\n\t\t\t\t\t\t\t//picture for columns\r\n\t\t\t\t\t\t\tth = self.applyFormatValues(th, item.value, self.rowConditions[j]);\r\n\t\t\t\t\t\t\t//format for columns \r\n\t\t\t\t\t\t\t//event handlers\r\n\t\t\t\t\t\t\tself.setClickEventHandlers(th, item.value, \"DIMENSION\", self.rowConditions[j], { cell: j, row: row });\r\n\t\t\t\t\t\t\tif ((j < self.rowConditions.length - (measures.length - 1) - 1) && (!self.ShowMeasuresAsRows)) {\r\n\t\t\t\t\t\t\t\tvar itemCollapsed = (self.conditions[self.rowConditions[j]].collapsedValues.indexOf(item.value) != -1)\r\n\t\t\t\t\t\t\t\tth = self.addExpandCollapseFunctionality(th, item, j, !itemCollapsed, true);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tlineaEnBlanco = false;\r\n\t\t\t\t\t\t\ttr.appendChild(th);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t//add blank spaces when row is collapsed\r\n\t\t\t\t\tif (row.headers.length < self.rowConditions.length - (measures.length - 1)) {\r\n\t\t\t\t\t\tvar collapsedCells = self.rowConditions.length - (measures.length - 1) - row.headers.length;\r\n\t\t\t\t\t\tfor (var cc = 0; cc < collapsedCells; cc++) {\r\n\t\t\t\t\t\t\tvar th = OAT.Dom.create(\"th\", {}, \"even gx-pv-even-row\");\r\n\t\t\t\t\t\t\tOAT.addTextNode(th, \"\")\r\n\t\t\t\t\t\t\ttr.appendChild(th);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// blank space before\r\n\t\t\t\t\tif ((self.rowConditions.length - (measures.length - 1) == 0) && (i > 0) && (measures.length > 0)) {\r\n\t\t\t\t\t\tlineaEnBlanco = true;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (self.ShowMeasuresAsRows) {\r\n\t\t\t\t\t\t// add cell with measure name \r\n\t\t\t\t\t\tvar td = OAT.Dom.create(\"td\", {}, \"even gx-pv-even-row\");\r\n\r\n\t\t\t\t\t\tvar measureTitle = self.getMeasureName(row.dataField, measures);\r\n\t\t\t\t\t\tOAT.addTextNode(td, measureTitle)\r\n\t\t\t\t\t\ttd.style.textAlign = \"start\"\r\n\t\t\t\t\t\tself.setClickEventHandlers(td, measureTitle, \"MEASURE\", getMeasureNumberByName(measureTitle, measures), \"GrandTotal\");\r\n\r\n\t\t\t\t\t\ttr.appendChild(td);\r\n\t\t\t\t\t\t// end cell with measure name \r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// initial \"crude data\" part of a row, only the data of the measures shows in one column\r\n\t\t\t\t\tvar mesauresList = new Array();\r\n\r\n\t\t\t\t\tvar measureslength = measures.length;\r\n\t\t\t\t\tif (measureslength === 0) {\r\n\t\t\t\t\t\tmeasureslength = 1;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (!row.subTotal) { //value cells\r\n\t\t\t\t\t\tfor (var ji = 0; ji < row.cells.length; ji++) {\r\n\t\t\t\t\t\t\tvar value = row.cells[ji].value;\r\n\r\n\t\t\t\t\t\t\tif ((self.colConditions.length > 0) && (self.pageData.columnsHeaders[ji].subTotal)) { //subtotal or total column\r\n\t\t\t\t\t\t\t\tvar td = OAT.Dom.create(\"td\", {}, \"subtotal\");\r\n\r\n\t\t\t\t\t\t\t\tif (value != self.EmptyValue) {\r\n\t\t\t\t\t\t\t\t\tvar mN = self.getMeasureNumber(row.cells[ji].dataField, measures);\r\n\r\n\t\t\t\t\t\t\t\t\tOAT.addTextNode(td, self.defaultPictureValue(value, false, mN))\r\n\t\t\t\t\t\t\t\t\ttd = self.applyConditionalFormats(td, value, false, mN);\r\n\t\t\t\t\t\t\t\t\tself.setClickEventHandlers(td, value, \"MEASURE\", mN, ['PtrTotals', value, row, ji]);\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tOAT.addTextNode(td, \"\")\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\ttr.appendChild(td);\r\n\t\t\t\t\t\t\t} else { //normal crude data\r\n\t\t\t\t\t\t\t\tvar td = OAT.Dom.create(\"td\", {}, \"even gx-pv-even-row\");\r\n\r\n\t\t\t\t\t\t\t\tif (value != self.EmptyValue) {\r\n\t\t\t\t\t\t\t\t\tvar mN = self.getMeasureNumber(row.cells[ji].dataField, measures);\r\n\r\n\t\t\t\t\t\t\t\t\tOAT.addTextNode(td, self.defaultPictureValue(value, false, mN))\r\n\t\t\t\t\t\t\t\t\ttd = self.applyConditionalFormats(td, value, false, mN);\r\n\t\t\t\t\t\t\t\t\tself.setClickEventHandlers(td, value, \"MEASURE\", mN, { cell: ji, row: row });\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tOAT.addTextNode(td, \"\")\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\ttr.appendChild(td);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t//subtotal or total row\r\n\t\t\t\t\t\tvar tr = OAT.Dom.create(\"tr\");\r\n\r\n\t\t\t\t\t\tif (row.headers.length == 0) {\r\n\t\t\t\t\t\t\t//grand Total\r\n\t\t\t\t\t\t\tif (self.GrandTotalVisibility.TotalForRows != \"Yes\") { \r\n\t\t\t\t\t\t\t\tskipRow = true\r\n\t\t\t\t\t\t\t} else {\t\r\n\t\t\t\t\t\t\t\tvar th = OAT.Dom.create(\"th\", {}, \"h2subtitle grandtotaltitle\");\r\n\t\t\t\t\t\t\t\tOAT.addTextNode(th, self.translations.GXPL_QViewerJSTotal /*gx.getMessage(\"GXPL_QViewerJSTotal\")*/)\r\n\t\t\t\t\t\t\t\tth.colSpan = colSpan;\r\n\t\t\t\t\t\t\t\tif (self.ShowMeasuresAsRows) {\r\n\t\t\t\t\t\t\t\t\tif (row.rowSpan > 0) {\r\n\t\t\t\t\t\t\t\t\t\tth.rowSpan = row.rowSpan\r\n\t\t\t\t\t\t\t\t\t\ttr.appendChild(th);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\ttr.appendChild(th);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t//sub total\r\n\t\t\t\t\t\t\tif (i == 0) {//append header, not totalized, only for firsr row\r\n\t\t\t\t\t\t\t\tfor (var h = 0; h < row.headers.length - 1; h++) {\r\n\t\t\t\t\t\t\t\t\tvar item = row.headers[h]\r\n\t\t\t\t\t\t\t\t\tvar th = OAT.Dom.create(\"th\", {}, \"even gx-pv-even-row\");\r\n\t\t\t\t\t\t\t\t\tth.rowSpan = item.rowSpan\r\n\t\t\t\t\t\t\t\t\tOAT.addTextNode(th, self.dimensionPictureValue(item.value.trimpivot(), self.rowConditions[h]))\r\n\t\t\t\t\t\t\t\t\tth = self.applyFormatValues(th, item.value, self.rowConditions[h]);\r\n\t\t\t\t\t\t\t\t\tself.setClickEventHandlers(th, item.value, \"DIMENSION\", self.rowConditions[h], { cell: h, row: row, isTotal: false });\r\n\t\t\t\t\t\t\t\t\ttr.appendChild(th);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tvar subtitleClass = (row.headers.length == 1) ? \"subtitleFirstLevel\" : \"\";\r\n\r\n\r\n\t\t\t\t\t\t\tvar th = OAT.Dom.create(\"th\", {}, \"h2subtitle \" + subtitleClass);\r\n\t\t\t\t\t\t\tth.colSpan = colSpan - (row.headers.length - 1);\r\n\t\t\t\t\t\t\tvar value = row.headers[row.headers.length - 1].value.trimpivot()\r\n\t\t\t\t\t\t\tif (value == \"#NuN#\") {\r\n\t\t\t\t\t\t\t\tOAT.addTextNode(th, self.translations.GXPL_QViewerJSTotalFor/*gx.getMessage(\"GXPL_QViewerJSTotalFor\")*/ + \" \" + self.defaultPicture.getAttribute(\"textForNullValues\"))\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tOAT.addTextNode(th, self.translations.GXPL_QViewerJSTotalFor/*gx.getMessage(\"GXPL_QViewerJSTotalFor\")*/ + \" \" +  self.dimensionPictureValue( OAT.Dom.fromSafeXML(value), self.rowConditions[row.headers.length - 1] ) )\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tself.setClickEventHandlers(th, self.translations.GXPL_QViewerJSTotalFor + \" \" + item.value, \"DIMENSION\", getMeasureNumberByDataField(item.dataField, columns), ['PtrTotals', value, row, -1]);\r\n\t\t\t\t\t\t\tif (self.ShowMeasuresAsRows) {\r\n\t\t\t\t\t\t\t\tif (row.rowSpan > 0) {\r\n\t\t\t\t\t\t\t\t\tth.rowSpan = row.rowSpan\r\n\t\t\t\t\t\t\t\t\ttr.appendChild(th);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\ttr.appendChild(th);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (self.ShowMeasuresAsRows) {\r\n\t\t\t\t\t\t\t// add cell with measure name\r\n\t\t\t\t\t\t\tvar valueClass = (row.headers.length == 0) ? \"grandtotalvalue\" : (row.headers.length == 1) ? \"firstlevelvalue\" : \"\";\r\n\r\n\t\t\t\t\t\t\tvar td = OAT.Dom.create(\"td\", {}, \"gtotal \" + valueClass);\r\n\r\n\t\t\t\t\t\t\tvar measureTitle = self.getMeasureName(row.dataField, measures);\r\n\t\t\t\t\t\t\tOAT.addTextNode(td, measureTitle)\r\n\t\t\t\t\t\t\ttd.style.textAlign = \"start\"\r\n\r\n\t\t\t\t\t\t\ttr.appendChild(td);\r\n\t\t\t\t\t\t\t// end cell with measure names\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tfor (var ind = 0; ind < row.cells.length; ind++) {\r\n\t\t\t\t\t\t\tvar value = row.cells[ind].value;\r\n\r\n\t\t\t\t\t\t\tvar mN = self.getMeasureNumber(row.cells[ind].dataField, measures);\r\n\r\n\t\t\t\t\t\t\tvar valueClass = (row.headers.length == 0) ? \"grandtotalvalue\" : (row.headers.length == 1) ? \"firstlevelvalue\" : \"\";\r\n\r\n\t\t\t\t\t\t\tvar td = OAT.Dom.create(\"td\", {}, \"gtotal \" + valueClass);\r\n\t\t\t\t\t\t\tOAT.addTextNode(td, self.defaultPictureValue(value, false, mN))\r\n\t\t\t\t\t\t\tif ((row.headers.length == 0) && (self.colConditions.length == 0)) {\r\n\t\t\t\t\t\t\t\tself.underRecursionStyle = [];\r\n\t\t\t\t\t\t\t\ttd = self.applyConditionalFormats(td, value, false, mN);\r\n\t\t\t\t\t\t\t\tself.setClickEventHandlers(td, value, \"MEASURE\", mN, 'GrandTotal');\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\ttd = self.applyConditionalFormats(td, value, false, mN);\r\n\t\t\t\t\t\t\t\tself.setClickEventHandlers(td, value, \"MEASURE\", mN, ['PtrTotals', value, row, ind]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\ttr.appendChild(td);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (!skipRow)\r\n\t\t\t\t\t\tself.appendRowToTable(tbody, tr, false);\r\n\t\t\t\t\tif (self.colConditions.length > 0) self.underRecursionStyle = [];\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t} // for each row\r\n\r\n\t\t\t} catch (ERROR) {\r\n\t\t\t\t//alert(ERROR);\r\n\t\t\t}\r\n\r\n\r\n\r\n\t\t} /* drawTableWhenServerPagination */\r\n\r\n\r\n\r\n\t\tthis.drawTableWhenShowMeasuresAsRows = function () {\r\n\t\t\tOAT.Dom.clear(self.div);\r\n\t\t\t// START create toolbar table\r\n\r\n\t\t\tself.div.setAttribute(\"class\", \"conteiner_table_div\");\r\n\t\t\tvar myTable = OAT.Dom.create(\"table\", {}, \"\");\r\n\t\t\tmyTable.id = self.controlName + \"_\" + self.query + \"_toolbar\";\r\n\t\t\tvar myTbody = OAT.Dom.create(\"tbody\");\r\n\t\t\tvar myRow = OAT.Dom.create(\"tr\");\r\n\t\t\tself.div.appendChild(myTable);\r\n\t\t\t// END\r\n\r\n\t\t\tvar table = OAT.Dom.create(\"table\", {}, \"pivot_table\");\r\n\t\t\ttable.id = this.controlName + \"_\" + this.query;\r\n\t\t\t//add control name and query name as the id of main table\r\n\t\t\tvar tbody = OAT.Dom.create(\"tbody\");\r\n\t\t\t\r\n\t\t\tself.drawTitleDiv();\r\n\t\t\tself.drawFilters();\r\n\t\t\tself.countedRows = 0;\r\n\t\t\tif (OAT.isIE()) {\r\n\t\t\t\tvar divIeContainer = document.createElement(\"div\");\r\n\t\t\t\tdivIeContainer.setAttribute(\"class\", \"divIeContainer\");\r\n\t\t\t\tself.div.appendChild(divIeContainer);\r\n\t\t\t\tOAT.Dom.append([table, tbody], [divIeContainer, table]);\r\n\t\t\t\ttable.style.marginBottom = \"0px\";\r\n\t\t\t} else {\r\n\t\t\t\tOAT.Dom.append([table, tbody], [self.div, table]);\r\n\t\t\t}\r\n\r\n\t\t\tif ((self.autoPaging) && (self.allData.length < self.filteredData.length) && (self.colPointers.length > 1)) {\r\n\t\t\t\tself.allData = self.filteredData;\r\n\t\t\t} else if ((self.autoPaging) && (self.filteredData.length > self.allData.length) && (self.colPointers.length === 0)) {\r\n\t\t\t\tself.filteredData = self.allData;\r\n\t\t\t}\r\n\r\n\t\t\tvar firstRow;\r\n\t\t\tvar firstRowTotalSpan = self.colConditions.length;\r\n\t\t\tif (self.colConditions.length > 0) {\r\n\t\t\t\tvar i = 0;\r\n\t\t\t\tvar tr = OAT.Dom.create(\"tr\");\r\n\t\t\t\tself._drawRowConditionsHeadingsCustom(tr);\r\n\t\t\t\t// create a list of the dimension name, that are not pivot, with heigth span equal to   colConditions.length\r\n\t\t\t\tfor (var ni = 0; ni < self.colConditions.length; ni++) {// creat a list of the dimension name, that are pivot as columns\r\n\t\t\t\t\ttr = self._drawColConditionsHeadingsCustom(tr, ni, (ni === self.colConditions.length - 1));\r\n\t\t\t\t}\r\n\t\t\t\ttr.setAttribute(\"title_row\", true);\r\n\t\t\t\t//tbody.appendChild(tr);\r\n\t\t\t\tself.appendRowToTable(tbody, tr, true);\r\n\t\t\t\tfirstRow = tr;\r\n\t\t\t}\r\n\t\t\ttry {\r\n\t\t\t\tvar _mtotalSpan = 0 - firstRowTotalSpan;\r\n\t\t\t\tvar collapsedColInfo = [false, 0, 0] //firts son of a collapsed parent, the collapsed parent, total hidden \r\n\t\t\t\tvar columnsDataHide = []\r\n\t\t\t\tvar columnsDataHideFillWithBlanck = []\r\n\t\t\t\tvar td_temp_forCollapseInfo = false;\r\n\t\t\t\tvar td_collection_forCollapseInfo = [];\r\n\t\t\t\tfor (var i = 0; i < measures.length; i++) {\r\n\t\t\t\t\ttd_collection_forCollapseInfo[i] = false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor (var i = 0; i < self.colConditions.length; i++) {\r\n\t\t\t\t\tvar tr = OAT.Dom.create(\"tr\");\r\n\r\n\t\t\t\t\tvar stack = self.colPointers[i];\r\n\t\t\t\t\tvar drawColumn = 0; //number of actual column being draw \r\n\t\t\t\t\tfor (var j = 0; j < stack.length; j++) {//column values here the diferents values of the pivoted dimensions\r\n\t\t\t\t\t\tvar item = stack[j];\r\n\t\t\t\t\t\tvar th = OAT.Dom.create(\"th\", {}, \"even gx-pv-even-row\");\r\n\t\t\t\t\t\tif (item.span === 0)\r\n\t\t\t\t\t\t\titem.span = 1;\r\n\t\t\t\t\t\tth.colSpan = item.span/* * (measures.length-1); */\r\n\t\t\t\t\t\tif (i == 0) {\r\n\t\t\t\t\t\t\tif (item.span === 0) {//calc for the span of the top right blanck cell\r\n\t\t\t\t\t\t\t\t_mtotalSpan++;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t_mtotalSpan = _mtotalSpan + (item.span * measures.length);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tOAT.addTextNode(th, self.dimensionPictureValue(item.value, self.colConditions[i]))\r\n\r\n\t\t\t\t\t\tth = self.applyFormatValues(th, item.value, self.colConditions[i]);\r\n\r\n\r\n\t\t\t\t\t\t//find if some parent of the item is collapsed\r\n\t\t\t\t\t\tvar tempItem = item;\r\n\t\t\t\t\t\tvar hide = false;\r\n\t\t\t\t\t\tvar blankcell = false;\r\n\t\t\t\t\t\twhile (tempItem.parent) {\r\n\t\t\t\t\t\t\tif (tempItem.parent.collapsed == undefined) {\r\n\t\t\t\t\t\t\t\tcollapsedColInfo[0] = false;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (tempItem.parent.collapsed) {\r\n\t\t\t\t\t\t\t\tif ((!collapsedColInfo[0]) || (tempItem.parent != collapsedColInfo[1])) {\r\n\t\t\t\t\t\t\t\t\tblankcell = true;\r\n\t\t\t\t\t\t\t\t\tif (i == self.colConditions.length - 1) {\r\n\t\t\t\t\t\t\t\t\t\tcolumnsDataHideFillWithBlanck.push(j);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tcollapsedColInfo[2]++;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif ((i == self.colConditions.length - 1) && (!blankcell)) //the last col conditions\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tcolumnsDataHide.push(j);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tcollapsedColInfo[0] = true;\r\n\t\t\t\t\t\t\t\tcollapsedColInfo[1] = tempItem.parent;\r\n\t\t\t\t\t\t\t\tOAT.addTextNode(th, \"\")\r\n\t\t\t\t\t\t\t\thide = true;\r\n\t\t\t\t\t\t\t\tth.colSpan = 1;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\ttempItem = tempItem.parent;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif ((!hide) || (blankcell)) { //when no hide or when collapse add one column blank cells\r\n\t\t\t\t\t\t\ttr.appendChild(th);\r\n\t\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\t\t//advance the column counter\r\n\t\t\t\t\t\tdrawColumn = drawColumn + item.span * measures.length\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ((self.options.totals && i == 0) && (self.GrandTotalVisibility.TotalForColumns == \"Yes\"))  {\r\n\t\t\t\t\t\tvar th = OAT.Dom.create(\"th\", {}, \"h2subtitle\");\r\n\t\t\t\t\t\tOAT.addTextNode(th, self.translations.GXPL_QViewerJSTotal /*gx.getMessage(\"GXPL_QViewerJSTotal\")*/)\r\n\t\t\t\t\t\t//\"TOTAL\" gran total\r\n\t\t\t\t\t\tth.rowSpan = self.colConditions.length;\r\n\t\t\t\t\t\tif (self.colConditions.length > 0) {\r\n\t\t\t\t\t\t\tth.colSpan = measures.length;\r\n\t\t\t\t\t\t\t_mtotalSpan = _mtotalSpan + self.colConditions.length + (measures.length - 1)\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t_mtotalSpan = _mtotalSpan + self.colConditions.length\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ttotalSpan = self.colConditions.length\r\n\t\t\t\t\t\ttr.appendChild(th);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (self.options.headingAfter) {// column headings after\r\n\t\t\t\t\t\tself._drawColConditionsHeadings(tr, i);\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttr.setAttribute(\"title_row\", true);\r\n\t\t\t\t\t//tbody.appendChild(tr);\r\n\t\t\t\t\tself.appendRowToTable(tbody, tr, true);\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\tif (_mtotalSpan > 2) {\r\n\t\t\t\t\tvar th = OAT.Dom.create(\"th\", {}, \"h2subtitle \");\r\n\t\t\t\t\tOAT.addTextNode(th, \"\")\r\n\t\t\t\t\tif (_mtotalSpan < 1000) {\r\n\t\t\t\t\t\tth.colSpan = _mtotalSpan;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tth.style.borderLeftColor = \"transparent\";\r\n\t\t\t\t\tfirstRow.appendChild(th);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/* first connector */\r\n\t\t\t\tif ((self.rowConditions.length && self.options.headingBefore) && (self.colConditions.length === 0)) {\r\n\t\t\t\t\tself._drawRowConditionsHeadings(tbody);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar several_totals = measures.length > 1;\r\n\t\t\t\tvar colSpan;\r\n\t\t\t\tif (several_totals) {\r\n\t\t\t\t\tcolSpan = self.rowConditions.length - (measures.length - 1);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcolSpan = self.rowConditions.length;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar collapsedInfo = [false, 9999, true, 0]\r\n\t\t\t\t//[working under collapse item, row condition of the collapse item, first row of collapses rows, actual row condition]\r\n\t\t\t\tvar subtotalsmeasuresList = []; for (var l = 0; l < measures.length; l++) { subtotalsmeasuresList[l] = []; subtotalsmeasuresList[l][0] = []; }\r\n\t\t\t\t/* store values to show in the grandTotal row */\r\n\t\t\t\tvar grandtotalsmeasuresList = []; for (var l = 0; l < measures.length; l++) { grandtotalsmeasuresList[l] = []; grandtotalsmeasuresList[l][0] = []; }\r\n\r\n\t\t\t\tvar searchIn = []; for (var l = 0; l < self.recordForFormula.length; l++) { searchIn[l] = self.recordForFormula[l]; }\r\n\t\t\t\tvar searchVal = [];\r\n\t\t\t\tif (self.colConditions.length > 0) {\r\n\t\t\t\t\tsearchVal = []; for (var l = 0; l < self.allData.length; l++) { searchVal[l] = self.allData[l]; }\r\n\t\t\t\t}\r\n\t\t\t\tvar rowsPositions = [];\r\n\t\t\t\tfor (var i = 0; i < self.h; i++) {\r\n\t\t\t\t\t//actualColumnIndex = 0;\r\n\t\t\t\t\tvar tr = OAT.Dom.create(\"tr\");\r\n\t\t\t\t\tif (self.rowConditions.length) {\r\n\t\t\t\t\t\tvar dim = self.rowConditions.length - (measures.length - 1)\r\n\t\t\t\t\t\tvar item = self.rowPointers[dim][i];\r\n\t\t\t\t\t\t/* stack has number of values equal to height of table */\r\n\t\t\t\t\t\tvar ptrArray = [];\r\n\t\t\t\t\t\tvar ptr = item;\r\n\t\t\t\t\t\twhile (ptr.parent) {\r\n\t\t\t\t\t\t\tptrArray.unshift(ptr);\r\n\t\t\t\t\t\t\tptr = ptr.parent;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvar ptrArray = [self.rowPointers[0][0]];\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar firstCellPositionOfthisRow = -1//the column number where is draw the cell of this row\r\n\r\n\t\t\t\t\tfor (var j = 0; j < self.rowConditions.length - (measures.length - 1); j++) {/* row header values */\r\n\t\t\t\t\t\tvar item = ptrArray[j];\r\n\t\t\t\t\t\tif ((item != undefined) && (item.offset == i)) {\r\n\t\t\t\t\t\t\tif (firstCellPositionOfthisRow == -1) {\r\n\t\t\t\t\t\t\t\tfirstCellPositionOfthisRow = j\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t//add collapse image option\r\n\t\t\t\t\t\t\tvar itemCollapsed = (self.conditions[self.rowConditions[j]].collapsedValues.indexOf(item.value) != -1);\r\n\t\t\t\t\t\t\tif (j >= (self.rowConditions.length - (measures.length - 1) - 1)) {\r\n\t\t\t\t\t\t\t\titemCollapsed = false;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tvar th = OAT.Dom.create(\"th\", {}, \"even gx-pv-even-row\");\r\n\t\t\t\t\t\t\tif ((!collapsedInfo[0]) || (collapsedInfo[1] >= j)) {//if the line is not collapsed\r\n\t\t\t\t\t\t\t\tth.rowSpan = ptrArray[j].span;\r\n\t\t\t\t\t\t\t\tOAT.addTextNode(th, self.dimensionPictureValue(item.value, self.rowConditions[j]))\r\n\t\t\t\t\t\t\t\t/* picture for columns */\r\n\t\t\t\t\t\t\t\tth = self.applyFormatValues(th, item.value, self.rowConditions[j]);\r\n\t\t\t\t\t\t\t\t/* format  for columns */\r\n\t\t\t\t\t\t\t\tself.setClickEventHandlers(th, item.value, \"DIMENSION\", self.rowConditions[j], item);\r\n\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tth.rowSpan = 1;\r\n\t\t\t\t\t\t\t\tOAT.addTextNode(th, \"\")\r\n\t\t\t\t\t\t\t\t/* picture for columns */\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif (collapsedInfo[1] >= j) {\r\n\t\t\t\t\t\t\t\tcollapsedInfo[0] = itemCollapsed;\r\n\t\t\t\t\t\t\t\tcollapsedInfo[3] = item;\r\n\t\t\t\t\t\t\t\tif (itemCollapsed) {\r\n\t\t\t\t\t\t\t\t\tcollapsedInfo[1] = j;\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tcollapsedInfo[1] = 9999;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tcollapsedInfo[2] = true;\r\n\t\t\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\t\t\ttr.appendChild(th);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t/* blank space before */\r\n\t\t\t\t\tvar measureslength = measures.length;\r\n\t\t\t\t\tif (measureslength === 0) {\r\n\t\t\t\t\t\tmeasureslength = 1;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t/* add cell with measure name */\r\n\t\t\t\t\tvar td = OAT.Dom.create(\"td\", {}, \"even gx-pv-even-row\");\r\n\t\t\t\t\tvar item = ptrArray[self.rowConditions.length - (measureslength - 1)];\r\n\t\t\t\t\tif (item.value != self.EmptyValue) {\r\n\t\t\t\t\t\tif (!collapsedInfo[0]) {\r\n\t\t\t\t\t\t\tOAT.addTextNode(td, item.value)\r\n\t\t\t\t\t\t\ttd.style.textAlign = \"start\"\r\n\t\t\t\t\t\t\tself.setClickEventHandlers(td, item.value, \"MEASURE\", getMeasureNumberByName(measureTitle, measures), \"GrandTotal\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tOAT.addTextNode(td, \"\")\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttr.appendChild(td);\r\n\t\t\t\t\t/* end cell with measure name */\r\n\r\n\t\t\t\t\t/* initial \"crude data\" part of a row, only the data of the measures shows in one column*/\r\n\t\t\t\t\tvar mesauresList = new Array();\r\n\t\t\t\t\t/* store values to lateral total */\r\n\t\t\t\t\tvar lateralMeasureList = [];\r\n\t\t\t\t\t/* add cell with measure value */\r\n\t\t\t\t\tvar measureTitle = item.value;\r\n\t\t\t\t\tvar measureNumber = getMeasureNumberByName(measureTitle, measures);\r\n\t\t\t\t\tif (self.colConditions.length == 0) {\r\n\t\t\t\t\t\tvar itemMV = item.items[0];\r\n\t\t\t\t\t\tvar td = OAT.Dom.create(\"td\", {}, \"even gx-pv-even-row\");\r\n\t\t\t\t\t\tif (itemMV != self.EmptyValue) {\r\n\t\t\t\t\t\t\tif (!collapsedInfo[0]) {\r\n\t\t\t\t\t\t\t\tOAT.addTextNode(td, self.defaultPictureValue(itemMV.value, false, measureNumber))\r\n\t\t\t\t\t\t\t\ttd = self.applyConditionalFormats(td, itemMV.value, false, measureNumber);\r\n\r\n\t\t\t\t\t\t\t\t//for total calculation\r\n\t\t\t\t\t\t\t\tself.setClickEventHandlers(td, itemMV.value, \"MEASURE\", measureNumber, [Math.floor(item.row / measures.length)]);\r\n\t\t\t\t\t\t\t\tif (self.formulaInfo.measureFormula[measureNumber].hasFormula) {\r\n\t\t\t\t\t\t\t\t\tvar formulaRow = self.getFormulaRowByCoord(item, [], measureNumber, \"MeasureInRows\", searchIn);\r\n\t\t\t\t\t\t\t\t\tif (formulaRow != self.EmptyValue) {\r\n\t\t\t\t\t\t\t\t\t\tgrandtotalsmeasuresList[measureNumber][0].push(formulaRow)\r\n\t\t\t\t\t\t\t\t\t\tsubtotalsmeasuresList[measureNumber][0].push([formulaRow, -1])\r\n\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tvar saveValue = (itemMV.value != \"#NuN#\") ? parseFloat(itemMV.value) : \"#NuN#\";\r\n\t\t\t\t\t\t\t\t\tgrandtotalsmeasuresList[measureNumber][0].push(saveValue)\r\n\t\t\t\t\t\t\t\t\tsubtotalsmeasuresList[measureNumber][0].push([saveValue, -1])\r\n\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tOAT.addTextNode(td, \"\")\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (collapsedInfo[0] && (!td_collection_forCollapseInfo[ji])) {\r\n\t\t\t\t\t\t\ttd_collection_forCollapseInfo[ji] = td;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tmesauresList.push([[itemMV.value, [itemMV.row]]]);\r\n\t\t\t\t\t\tif (self.colConditions.length === 0) {\r\n\t\t\t\t\t\t\ttr.appendChild(td);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/* end add cell with measure value */\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t/* add cells with measures value */\r\n\t\t\t\t\t\tvar colPointerNumber = self.colPointers.length - 1\r\n\t\t\t\t\t\tif (self.colPointers[self.colPointers.length - 1].length == 0) colPointerNumber--;\r\n\t\t\t\t\t\tif (self.colPointers[colPointerNumber] != undefined) {\r\n\t\t\t\t\t\t\tif (measureNumber == 0) {\r\n\t\t\t\t\t\t\t\tif ((rowsPositions.length > 0) && (!isNaN(rowsPositions[0]))) {\r\n\t\t\t\t\t\t\t\t\tsearchVal.splice(rowsPositions[0], 1)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\trowsPositions = [];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tfor (var j = 0; j < self.colPointers[colPointerNumber].length; j++) {\r\n\t\t\t\t\t\t\t\tvar columnCoord = self.colPointers[colPointerNumber][j]\r\n\t\t\t\t\t\t\t\tvar rowCoord = item\r\n\r\n\r\n\t\t\t\t\t\t\t\tvar value\r\n\t\t\t\t\t\t\t\tif (measureNumber > 0) {\r\n\t\t\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\t\t\tif (rowsPositions[j] != self.EmptyValue) {\r\n\t\t\t\t\t\t\t\t\t\t\tvalue = [searchVal[rowsPositions[j]][self.headerRow.indexOf(measureTitle)], rowsPositions[j]]\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tvalue = self.EmptyValue;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t} catch (Error) {\r\n\t\t\t\t\t\t\t\t\t\tvar t;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tvalue = self.getMeasureValueCoord(rowCoord, columnCoord, self.headerRow.indexOf(measureTitle), searchVal);\r\n\t\t\t\t\t\t\t\t\tif ((value != self.EmptyValue) && (measureNumber == 0)) {\r\n\t\t\t\t\t\t\t\t\t\trowsPositions.push(value[1]);\r\n\t\t\t\t\t\t\t\t\t} else if (measureNumber == 0) { rowsPositions.push(self.EmptyValue); }\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tvar td = OAT.Dom.create(\"td\", {}, \"even gx-pv-even-row\");\r\n\t\t\t\t\t\t\t\tif (value != self.EmptyValue) {\r\n\t\t\t\t\t\t\t\t\tOAT.addTextNode(td, self.defaultPictureValue(value[0], false, measureNumber))\r\n\t\t\t\t\t\t\t\t\ttd = self.applyConditionalFormats(td, value[0], false, measureNumber);\r\n\r\n\t\t\t\t\t\t\t\t\tself.setClickEventHandlers(td, value[0], \"MEASURE\", measureNumber, [value[1]]);\r\n\r\n\t\t\t\t\t\t\t\t\t//for total calculation\r\n\t\t\t\t\t\t\t\t\tvar subValue = parseFloat(value[0])\r\n\t\t\t\t\t\t\t\t\tif (value[0] == \"#NuN#\") { subValue = \"#NuN#\" }\r\n\t\t\t\t\t\t\t\t\tif (self.formulaInfo.measureFormula[measureNumber].hasFormula) {\r\n\t\t\t\t\t\t\t\t\t\tsubValue = self.getFormulaRowByCoord(rowCoord, columnCoord, measureNumber, \"MeasureInRows\", searchIn);\r\n\t\t\t\t\t\t\t\t\t\tif (subValue == self.EmptyValue) { subValue = NaN }\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\tif (grandtotalsmeasuresList[measureNumber][j] == undefined) {\r\n\t\t\t\t\t\t\t\t\t\tgrandtotalsmeasuresList[measureNumber][j] = [subValue];\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tgrandtotalsmeasuresList[measureNumber][j].push(subValue);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tif (subtotalsmeasuresList[measureNumber][j] == undefined) {\r\n\t\t\t\t\t\t\t\t\t\tsubtotalsmeasuresList[measureNumber][j] = [[subValue, -1]];\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tsubtotalsmeasuresList[measureNumber][j].push([subValue, -1])\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tlateralMeasureList.push(subValue);\r\n\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tOAT.addTextNode(td, \"\")\r\n\t\t\t\t\t\t\t\t\tif (grandtotalsmeasuresList[measureNumber][j] == undefined) {\r\n\t\t\t\t\t\t\t\t\t\tgrandtotalsmeasuresList[measureNumber][j] = [0];\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tgrandtotalsmeasuresList[measureNumber][j].push(0);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tif (subtotalsmeasuresList[measureNumber][j] == undefined) {\r\n\t\t\t\t\t\t\t\t\t\tsubtotalsmeasuresList[measureNumber][j] = [[NaN, -1]];\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tsubtotalsmeasuresList[measureNumber][j].push([NaN, -1])\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\ttr.appendChild(td);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/* end cells with mwasures values*/\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\tif (self.colConditions.length && i == 0 && self.options.headingAfter) {/* blank space after */\r\n\t\t\t\t\t\tvar th = OAT.Dom.create(\"th\");\r\n\t\t\t\t\t\tif (!self.rowConditions.length) {\r\n\t\t\t\t\t\t\tself._drawCorner(th, true);\r\n\t\t\t\t\t\t\tth.conditionIndex = -2;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tth.style.border = \"none\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tth.rowSpan = self.rowStructure.span + (self.options.totals && self.rowConditions.length ? 1 : 0);\r\n\t\t\t\t\t\ttr.appendChild(th);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (collapsedInfo[0] && !collapsedInfo[2]) {\r\n\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tself.appendRowToTable(tbody, tr, false);\r\n\t\t\t\t\t\t//tbody.appendChild(tr);\r\n\t\t\t\t\t\tcollapsedInfo[2] = false;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar subTotalRowNumber = self.rowConditions.length - 2;\r\n\t\t\t\t\tif ((several_totals) && (self.rowConditions.length - 2 >= 0) && (ptrArray[self.rowConditions.length - 2] != undefined) && (ptrArray[self.rowConditions.length - 2].items != undefined) && (ptrArray[self.rowConditions.length - 2].items.length <= 1) && (self.colConditions.length <= 0)) {\r\n\t\t\t\t\t\tsubTotalRowNumber = self.rowConditions.length - 2 - (measureslength - 1);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t//add lateral total\r\n\t\t\t\t\tif ((self.options.totals && self.colConditions.length) && (self.GrandTotalVisibility.TotalForColumns == \"Yes\")) {\r\n\t\t\t\t\t\tvar td = OAT.Dom.create(\"td\", {}, \"total\");\r\n\t\t\t\t\t\ttotal_ = 0\r\n\t\t\t\t\t\tif (lateralMeasureList.length > 0) {\r\n\t\t\t\t\t\t\tif (self.formulaInfo.measureFormula[getMeasureNumberByName(measureTitle, measures)].hasFormula) {\r\n\t\t\t\t\t\t\t\ttotal_ = self.calculateFormulaTotal(lateralMeasureList, getMeasureNumberByName(measureTitle, measures), \"MeasureInRows\")\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\ttotal_ = lateralMeasureList.reduce(function (a, b) { if (!isNaN(a) && !isNaN(b)) { return a + b } if (isNaN(a) && isNaN(b)) { return 0 } else if (isNaN(a)) { return b } else { return a; }; })\r\n\t\t\t\t\t\t\t\tif (isNaN(total_) && (total_ != \"#NuN#\") && (total_ != \"#FoE#\")) total_ = 0;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (total_ != 0) {\r\n\t\t\t\t\t\t\tOAT.addTextNode(td, self.defaultPictureValue(total_.toString(), false, getMeasureNumberByName(measureTitle, measures)))\r\n\t\t\t\t\t\t\ttd = self.applyConditionalFormats(td, total_.toString(), false, getMeasureNumberByName(measureTitle, measures));\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tOAT.addTextNode(td, \"\")\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ttr.appendChild(td);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlateralMeasureList = [];\r\n\t\t\t\t\t//add subtotals row\r\n\t\t\t\t\tif (self.options.totals) {\r\n\t\t\t\t\t\tif (((self.rowConditions.length - (measures.length - 1)) > 1)) {\r\n\t\t\t\t\t\t\tvar MaxDept = self.rowConditions.length - (measures.length - 1) - 2\r\n\t\t\t\t\t\t\tfor (var relativeDim = MaxDept; relativeDim >= 0; relativeDim--) {\r\n\t\t\t\t\t\t\t\tvar addSubTotal = false;\r\n\t\t\t\t\t\t\t\t//var relativeDim = 0 \r\n\t\t\t\t\t\t\t\tif (i + 1 < self.rowPointers[dim].length) {\r\n\t\t\t\t\t\t\t\t\tvar itemTemp = self.rowPointers[dim][i + 1];\r\n\t\t\t\t\t\t\t\t\tvar ptrArrayTemp = [];\r\n\t\t\t\t\t\t\t\t\tvar ptrTemp = itemTemp;\r\n\t\t\t\t\t\t\t\t\twhile (ptrTemp.parent) {\r\n\t\t\t\t\t\t\t\t\t\tptrArrayTemp.unshift(ptrTemp);\r\n\t\t\t\t\t\t\t\t\t\tptrTemp = ptrTemp.parent;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t//var nexRowValue = ptrArrayTemp[relativeDim].value \r\n\t\t\t\t\t\t\t\t\t//var actualValue = ptrArray[relativeDim].value\r\n\t\t\t\t\t\t\t\t\t//addSubTotal = (nexRowValue != actualValue) //if next value is different add subtotal\r\n\t\t\t\t\t\t\t\t\tfor (var pDim = relativeDim; pDim >= 0; pDim--) {\r\n\t\t\t\t\t\t\t\t\t\tif (ptrArrayTemp[pDim].value != ptrArray[pDim].value) {\r\n\t\t\t\t\t\t\t\t\t\t\taddSubTotal = true;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\taddSubTotal = true\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\taddSubTotal = addSubTotal && (self.conditions[self.rowConditions[relativeDim]].subtotals == 1)\r\n\r\n\t\t\t\t\t\t\t\tif (addSubTotal) {\r\n\t\t\t\t\t\t\t\t\tfor (var sumM = 0; sumM < measures.length; sumM++) { //one row for each measures\r\n\t\t\t\t\t\t\t\t\t\tvar tr = OAT.Dom.create(\"tr\");\r\n\r\n\t\t\t\t\t\t\t\t\t\tif (sumM == 0) {\r\n\t\t\t\t\t\t\t\t\t\t\tvar th = OAT.Dom.create(\"th\", {}, \"h2subtitle\");\r\n\t\t\t\t\t\t\t\t\t\t\tth.colSpan = (self.rowConditions.length - (measures.length - 1)) - relativeDim;\r\n\t\t\t\t\t\t\t\t\t\t\tth.rowSpan = measures.length\r\n\t\t\t\t\t\t\t\t\t\t\tOAT.addTextNode(th, self.translations.GXPL_QViewerJSTotalFor + \" \" + ptrArray[relativeDim].value)\r\n\t\t\t\t\t\t\t\t\t\t\ttr.appendChild(th);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\t//add measure name\r\n\t\t\t\t\t\t\t\t\t\tvar td = OAT.Dom.create(\"td\", {}, \"total\");\r\n\t\t\t\t\t\t\t\t\t\tvar value = measures[sumM].getAttribute(\"displayName\");\r\n\t\t\t\t\t\t\t\t\t\tOAT.addTextNode(td, value)\r\n\t\t\t\t\t\t\t\t\t\ttd.style.textAlign = \"start\"\r\n\t\t\t\t\t\t\t\t\t\tself.setClickEventHandlers(td, value, \"MEASURE\", sumM, \"GrandTotal\");\r\n\t\t\t\t\t\t\t\t\t\ttr.appendChild(td);\r\n\r\n\t\t\t\t\t\t\t\t\t\t//add sub total value\r\n\t\t\t\t\t\t\t\t\t\tif (self.colConditions.length == 0) {\r\n\t\t\t\t\t\t\t\t\t\t\t//add sub-total value\r\n\t\t\t\t\t\t\t\t\t\t\tvar td = OAT.Dom.create(\"td\", {}, \"total\");\r\n\t\t\t\t\t\t\t\t\t\t\tvar valuesToOperate = []\r\n\t\t\t\t\t\t\t\t\t\t\tfor (var vt = 0; vt < subtotalsmeasuresList[sumM][0].length; vt++) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tif ((subtotalsmeasuresList[sumM][0][vt][1] == -1) || (subtotalsmeasuresList[sumM][0][vt][1] > relativeDim)) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tif ((!isNaN(subtotalsmeasuresList[sumM][0][vt][0]) || (subtotalsmeasuresList[sumM][0][vt][0] == \"#NuN#\")) || self.formulaInfo.measureFormula[sumM].hasFormula) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvaluesToOperate.push(subtotalsmeasuresList[sumM][0][vt][0])\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsubtotalsmeasuresList[sumM][0][vt][1] = relativeDim\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\tvar total_ = 0\r\n\t\t\t\t\t\t\t\t\t\t\tif (valuesToOperate.length != 0) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (self.formulaInfo.measureFormula[sumM].hasFormula) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttotal_ = self.calculateFormulaTotal(valuesToOperate, sumM, \"MeasureInRows\")\r\n\t\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (self.IsReduceNuN(valuesToOperate)) total_ = \"#NuN#\"; else\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttotal_ = valuesToOperate.reduce(function (a, b) { if (!isNaN(a) && !isNaN(b)) { return a + b } if (isNaN(a) && isNaN(b)) { return 0 } else if (isNaN(a)) { return b } else { return a; }; })\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (isNaN(total_) && (total_ != \"#NuN#\") && (total_ != \"#FoE#\")) total_ = 0;\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\tlateralMeasureList.push(parseFloat(total_))\r\n\t\t\t\t\t\t\t\t\t\t\tif (total_ != 0) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tOAT.addTextNode(td, self.defaultPictureValue(total_.toString(), false, sumM))\r\n\t\t\t\t\t\t\t\t\t\t\t\ttd = self.applyConditionalFormats(td, total_.toString(), false, sumM);\r\n\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\tOAT.addTextNode(td, \"\")\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\ttr.appendChild(td);\r\n\r\n\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t//add sub-total values\r\n\t\t\t\t\t\t\t\t\t\t\tvar colPointerNumber = self.colPointers.length - 1\r\n\t\t\t\t\t\t\t\t\t\t\tif (self.colPointers[self.colPointers.length - 1].length == 0) colPointerNumber--;\r\n\t\t\t\t\t\t\t\t\t\t\tif (self.colPointers[colPointerNumber] != undefined) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tfor (var cP = 0; cP < self.colPointers[colPointerNumber].length; cP++) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvar td = OAT.Dom.create(\"td\", {}, \"total\");\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvar valuesToOperate = []\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tfor (var vt = 0; vt < subtotalsmeasuresList[sumM][cP].length; vt++) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif ((subtotalsmeasuresList[sumM][cP][vt][1] == -1) || (subtotalsmeasuresList[sumM][cP][vt][1] > relativeDim)) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif ((!isNaN(subtotalsmeasuresList[sumM][cP][vt][0])) || (subtotalsmeasuresList[sumM][cP][vt][0] == \"#NuN#\") || self.formulaInfo.measureFormula[sumM].hasFormula) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvaluesToOperate.push(subtotalsmeasuresList[sumM][cP][vt][0])\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsubtotalsmeasuresList[sumM][cP][vt][1] = relativeDim\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvar total_ = 0\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (valuesToOperate.length != 0) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (self.formulaInfo.measureFormula[sumM].hasFormula) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttotal_ = self.calculateFormulaTotal(valuesToOperate, sumM, \"MeasureInRows\")\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (self.IsReduceNuN(valuesToOperate)) total_ = \"#NuN#\"; else\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttotal_ = valuesToOperate.reduce(function (a, b) { if (!isNaN(a) && !isNaN(b)) { return a + b } if (isNaN(a) && isNaN(b)) { return 0 } else if (isNaN(a)) { return b } else { return a; }; })\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (isNaN(total_) && (total_ != \"#NuN#\") && (total_ != \"#FoE#\")) total_ = 0;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tif ((total_ != 0) && ((!isNaN(total_)) || (total_ == \"#NuN#\") || (total_ == \"#FoE#\"))) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (self.formulaInfo.measureFormula[sumM].hasFormula) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlateralMeasureList.push(valuesToOperate)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlateralMeasureList.push(parseFloat(total_))\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tOAT.addTextNode(td, self.defaultPictureValue(total_.toString(), false, sumM))\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttd = self.applyConditionalFormats(td, total_.toString(), false, sumM);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tOAT.addTextNode(td, \"\")\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttr.appendChild(td);\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\tif ((self.colConditions.length) && (self.GrandTotalVisibility.TotalForColumns == \"Yes\")) { //add lateral total to this sub-total row\r\n\t\t\t\t\t\t\t\t\t\t\t\tvar td = OAT.Dom.create(\"td\", {}, \"gtotal\");\r\n\t\t\t\t\t\t\t\t\t\t\t\tvar total_ = 0\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (lateralMeasureList.length != 0) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (self.formulaInfo.measureFormula[sumM].hasFormula) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttotal_ = self.calculateFormulaTotal(lateralMeasureList, sumM, \"MeasureInRows\")\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (self.IsReduceNuN(lateralMeasureList)) total_ = \"#NuN#\"; else\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttotal_ = lateralMeasureList.reduce(function (a, b) { if (!isNaN(a) && !isNaN(b)) { return a + b } if (isNaN(a) && isNaN(b)) { return 0 } else if (isNaN(a)) { return b } else { return a; }; })\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\tOAT.addTextNode(td, self.defaultPictureValue(total_.toString(), false, sumM))\r\n\t\t\t\t\t\t\t\t\t\t\t\ttd = self.applyConditionalFormats(td, total_.toString(), false, sumM);\r\n\t\t\t\t\t\t\t\t\t\t\t\ttr.appendChild(td);\r\n\t\t\t\t\t\t\t\t\t\t\t\tlateralMeasureList = [];\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\tself.appendRowToTable(tbody, tr, false);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t} /* for each row */\r\n\r\n\r\n\r\n\t\t\t\t/* code for the last row, GRAND TOTAL ROW */\r\n\t\t\t\t/* GRAND TOTAL ROW\t*/\r\n\t\t\t\tif ((measures.length > 0) && ((self.rowConditions.length - measures.length + 1) > 0) && (self.GrandTotalVisibility.TotalForRows == \"Yes\") ) {\r\n\r\n\t\t\t\t\tif ((self.options.totals && self.rowConditions.length) && ((!self.autoPaging) || (self.TotalPagesPaging == self.actualPaginationPage) || (self.FilterByTopFilter))) {\r\n\r\n\t\t\t\t\t\tfor (var m = 0; m < measures.length; m++) { //for every measure\r\n\r\n\t\t\t\t\t\t\tvar tr = OAT.Dom.create(\"tr\");\r\n\r\n\t\t\t\t\t\t\tif ((colSpan != 0) && (m == 0)) { //add grandTotal title cell\r\n\t\t\t\t\t\t\t\tvar th = OAT.Dom.create(\"th\", {}, \"h2subtitle\");\r\n\t\t\t\t\t\t\t\tOAT.addTextNode(th, self.translations.GXPL_QViewerJSTotal /*gx.getMessage(\"GXPL_QViewerJSTotal\")*/)\r\n\t\t\t\t\t\t\t\tth.colSpan = colSpan;\r\n\t\t\t\t\t\t\t\tth.rowSpan = measures.length;\r\n\t\t\t\t\t\t\t\ttr.appendChild(th);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t//add measure title cell\r\n\t\t\t\t\t\t\tvar td = OAT.Dom.create(\"td\", {}, \"gtotal\");\r\n\t\t\t\t\t\t\tvar value = measures[m].getAttribute(\"displayName\");\r\n\t\t\t\t\t\t\tif (value != self.EmptyValue) {\r\n\t\t\t\t\t\t\t\tOAT.addTextNode(td, value)\r\n\t\t\t\t\t\t\t\ttd.style.textAlign = \"start\"\r\n\t\t\t\t\t\t\t\tself.setClickEventHandlers(td, value, \"MEASURE\", m, \"GrandTotal\");\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tOAT.addTextNode(td, \"\")\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\ttr.appendChild(td);\r\n\r\n\t\t\t\t\t\t\tvar lateralMeasureList = [];\r\n\t\t\t\t\t\t\tif (self.colConditions.length == 0) {\r\n\t\t\t\t\t\t\t\t//add grand total value\r\n\t\t\t\t\t\t\t\tvar td = OAT.Dom.create(\"td\", {}, \"gtotal\");\r\n\t\t\t\t\t\t\t\tvar total_ = 0\r\n\t\t\t\t\t\t\t\tif (grandtotalsmeasuresList[m][0].length > 0) {\r\n\t\t\t\t\t\t\t\t\tif (self.formulaInfo.measureFormula[m].hasFormula) {\r\n\t\t\t\t\t\t\t\t\t\ttotal_ = self.calculateFormulaTotal(grandtotalsmeasuresList[m][0], m, \"MeasureInRows\")\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tif (self.IsReduceNuN(grandtotalsmeasuresList[m][0])) total_ = \"#NuN#\"; else\r\n\t\t\t\t\t\t\t\t\t\t\ttotal_ = grandtotalsmeasuresList[m][0].reduce(function (a, b) { if (!isNaN(a) && !isNaN(b)) { return a + b } if (isNaN(a) && isNaN(b)) { return 0 } else if (isNaN(a)) { return b } else { return a; }; })\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (!isNaN(total_) || (total_ == \"#NuN#\") || (total_ == \"#FoE#\")) {\r\n\t\t\t\t\t\t\t\t\tOAT.addTextNode(td, self.defaultPictureValue(total_.toString(), false, m))\r\n\t\t\t\t\t\t\t\t\ttd = self.applyConditionalFormats(td, total_.toString(), false, m);\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tOAT.addTextNode(td, \"\")\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\ttr.appendChild(td);\r\n\r\n\t\t\t\t\t\t\t\t//lateralMeasureList.push(parseFloat(total_))\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t//add grand total values\r\n\t\t\t\t\t\t\t\tvar colPointerNumber = self.colPointers.length - 1\r\n\t\t\t\t\t\t\t\tif (self.colPointers[self.colPointers.length - 1].length == 0) colPointerNumber--;\r\n\t\t\t\t\t\t\t\tif (self.colPointers[colPointerNumber] != undefined) {\r\n\t\t\t\t\t\t\t\t\tfor (var j = 0; j < self.colPointers[colPointerNumber].length; j++) {\r\n\t\t\t\t\t\t\t\t\t\tvar td = OAT.Dom.create(\"td\", {}, \"gtotal\");\r\n\t\t\t\t\t\t\t\t\t\tvar total_ = 0\r\n\t\t\t\t\t\t\t\t\t\tif ((grandtotalsmeasuresList[m][j] != undefined) && (grandtotalsmeasuresList[m][j].length > 0)) {\r\n\t\t\t\t\t\t\t\t\t\t\tif (self.formulaInfo.measureFormula[m].hasFormula) {\r\n\t\t\t\t\t\t\t\t\t\t\t\ttotal_ = self.calculateFormulaTotal(grandtotalsmeasuresList[m][j], m, \"MeasureInRows\")\r\n\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (self.IsReduceNuN(grandtotalsmeasuresList[m][j])) total_ = \"#NuN#\"; else\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttotal_ = grandtotalsmeasuresList[m][j].reduce(function (a, b) { if (!isNaN(a) && !isNaN(b)) { return a + b } if (isNaN(a) && isNaN(b)) { return 0 } else if (isNaN(a)) { return b } else { return a; }; })\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tif (!isNaN(total_) || (total_ == \"#NuN#\") || (total_ == \"#FoE#\")) {\r\n\t\t\t\t\t\t\t\t\t\t\tOAT.addTextNode(td, self.defaultPictureValue(total_.toString(), false, m))\r\n\t\t\t\t\t\t\t\t\t\t\ttd = self.applyConditionalFormats(td, total_.toString(), false, m);\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tOAT.addTextNode(td, \"\")\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\ttr.appendChild(td);\r\n\r\n\t\t\t\t\t\t\t\t\t\tif (self.formulaInfo.measureFormula[m].hasFormula) {\r\n\t\t\t\t\t\t\t\t\t\t\tlateralMeasureList.push(grandtotalsmeasuresList[m][j])\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tif (!isNaN(total_)) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tlateralMeasureList.push(parseFloat(total_))\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t//add lateral total to grand total\r\n\t\t\t\t\t\t\tif ((self.options.totals && self.colConditions.length) && (self.GrandTotalVisibility.TotalForColumns == \"Yes\") ) {\r\n\t\t\t\t\t\t\t\tvar td = OAT.Dom.create(\"td\", {}, \"gtotal\");\r\n\t\t\t\t\t\t\t\tvar total_ = 0\r\n\t\t\t\t\t\t\t\tif (lateralMeasureList.length != 0) {\r\n\t\t\t\t\t\t\t\t\tif (self.formulaInfo.measureFormula[m].hasFormula) {\r\n\t\t\t\t\t\t\t\t\t\ttotal_ = self.calculateFormulaTotal(lateralMeasureList, m, \"MeasureInRows\")\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tif (self.IsReduceNuN(lateralMeasureList)) total_ = \"#NuN#\"; else\r\n\t\t\t\t\t\t\t\t\t\t\ttotal_ = lateralMeasureList.reduce(function (a, b) { if (!isNaN(a) && !isNaN(b)) { return a + b } if (isNaN(a) && isNaN(b)) { return 0 } else if (isNaN(a)) { return b } else { return a; }; })\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tOAT.addTextNode(td, self.defaultPictureValue(total_.toString(), false, m))\r\n\t\t\t\t\t\t\t\ttd = self.applyConditionalFormats(td, total_.toString(), false, m);\r\n\t\t\t\t\t\t\t\ttr.appendChild(td);\r\n\t\t\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\t\t\tself.appendRowToTable(tbody, tr, false);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t}\r\n\r\n\r\n\r\n\r\n\t\t\t} catch (ERROR) {\r\n\r\n\t\t\t}\r\n\r\n\t\t} /* drawTableWhenShowMeasuresAsRows */\r\n\r\n\r\n\t\tthis.IsReduceNuN = function (values) {\r\n\t\t\tisNuN = false;\r\n\t\t\tfor (var vft = 0; vft < values.length; vft++) {\r\n\t\t\t\tif ((values[vft] != \"#NuN#\") && (values[vft] != 0)) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tif (values[vft] == \"#NuN#\") isNuN = true;\r\n\t\t\t}\r\n\t\t\treturn isNuN;\r\n\t\t}\r\n\r\n\t\tthis.applyFilters = function () { /* create filteredData from allData */\r\n\t\t\tself.filteredData = [];\r\n\t\t\tfor (var i = 0; i < self.allData.length; i++) {\r\n\t\t\t\tif (self.filterOK(self.allData[i])) { self.filteredData.push(self.allData[i]); }\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\tthis.createTempDataStructForAggStepOptimization = function () {\r\n\t\t\ttry {\r\n\t\t\t\tfor (var row = 0; row < self.GeneralDataRows.length; row++) {\r\n\t\t\t\t\tfor (var i = 0; i < self.GeneralDataRows[0].length; i++) {\r\n\t\t\t\t\t\tfor (var j = 0; j < self.GeneralDataRows[0].length; j++) {\r\n\t\t\t\t\t\t\tif (self.TempDataStructForAggStepOptimization[self.GeneralDataRows[row][i]] == undefined) {\r\n\t\t\t\t\t\t\t\tself.TempDataStructForAggStepOptimization[self.GeneralDataRows[row][i]] = [];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tself.TempDataStructForAggStepOptimization[self.GeneralDataRows[row][i]][self.GeneralDataRows[row][j]] = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} catch (error) {\r\n\t\t\t\t//alert(error)\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.getMeasureValue = function (item, measureNumber, colDim) {\r\n\t\t\tvar rowFromItem = [];\r\n\t\t\tvar temp = item;\r\n\t\t\tvar dimValues = [];\r\n\r\n\t\t\tvar dimPosition = [];\r\n\t\t\tfor (var i = 0; i < colDim.length - measures.length + 1; i++) {\r\n\t\t\t\tdimPosition[i] = colDim[colDim.length - measures.length + 1 - (i + 1)];\r\n\t\t\t}\r\n\r\n\r\n\t\t\tfor (var i = 0; i < dimPosition.length; i++) {\r\n\t\t\t\tdimValues[dimPosition[i]] = temp.value;\r\n\t\t\t\ttemp = temp.parent//temp.items\r\n\t\t\t}\r\n\r\n\t\t\tvar value = \"\"\r\n\t\t\tvar hallado = false\r\n\t\t\tvar searchIn = self.allData\r\n\t\t\tif (self.filterIndexes.length > 0) { searchIn = self.filteredData }\r\n\t\t\tfor (var i = 0; i < searchIn.length; i++) { //allData\r\n\t\t\t\tvar coincide = false\r\n\t\t\t\tfor (var j = 0; j < dimPosition.length; j++) {\r\n\t\t\t\t\tif (searchIn[i][dimPosition[j]] == dimValues[dimPosition[j]]) {\r\n\t\t\t\t\t\tcoincide = true;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tcoincide = false;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (coincide) {\r\n\t\t\t\t\tvalue = searchIn[i][colDim.length + self.filterIndexes.length - measures.length + 1 + measureNumber];\r\n\t\t\t\t\thallado = true\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (hallado)\r\n\t\t\t\treturn value;\r\n\t\t\telse\r\n\t\t\t\treturn self.EmptyValue;\r\n\r\n\t\t}\r\n\r\n\t\tthis.getMeasureValueCoord = function (rowsCoord, colCoord, measurePosition, searchVal) {\r\n\t\t\tvar rowFromItem = [];\r\n\t\t\tvar dimValues = [];\r\n\r\n\t\t\tvar dimPosition = [];\r\n\t\t\tfor (var i = 0; i < self.rowConditions.length - measures.length + 1; i++) {\r\n\t\t\t\tdimPosition[i] = self.rowConditions[self.rowConditions.length - measures.length + 1 - (i + 1)];\r\n\t\t\t}\r\n\r\n\r\n\t\t\tfor (var i = self.colConditions.length - 1; i >= 0; i--) {\r\n\t\t\t\tdimValues[self.colConditions[i]] = colCoord.value;\r\n\t\t\t\tcolCoord = colCoord.parent\r\n\t\t\t}\r\n\t\t\tvar temp = rowsCoord.parent;\r\n\t\t\tfor (var i = 0; i < dimPosition.length; i++) {\r\n\t\t\t\tdimValues[dimPosition[i]] = temp.value;\r\n\t\t\t\ttemp = temp.parent//temp.items\r\n\t\t\t}\r\n\r\n\t\t\tvar value = \"\"\r\n\t\t\tvar hallado = false\r\n\t\t\tvar numRow = 0\r\n\t\t\tvar searchIn = searchVal\r\n\r\n\t\t\tfor (var i = 0; i < searchIn.length; i++) {\r\n\t\t\t\tvar coincide = false\r\n\t\t\t\tfor (var j = 0; j < dimValues.length; j++) {\r\n\t\t\t\t\tif (searchIn[i][j] == dimValues[j]) {\r\n\t\t\t\t\t\tcoincide = true;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif ((dimValues[j] == undefined) && (self.filterIndexes.length > 0)) {\r\n\t\t\t\t\t\t\tcoincide = true;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tcoincide = false;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (coincide) {\r\n\t\t\t\t\tvalue = searchIn[i][measurePosition];\r\n\t\t\t\t\tnumRow = i;\r\n\t\t\t\t\thallado = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (hallado) {\r\n\t\t\t\treturn [value, numRow];\r\n\t\t\t} else\r\n\t\t\t\treturn self.EmptyValue;\r\n\t\t}\r\n\r\n\t\tthis.getFormulaRowByCoord = function (rowsCoord, colCoord, measureNumber, caseId, tosearch) {\r\n\r\n\t\t\tvar rowFromItem = [];\r\n\t\t\tvar dimValues = [];\r\n\r\n\t\t\tvar dimPosition = [];\r\n\t\t\tfor (var i = 0; i < self.rowConditions.length - measures.length + 1; i++) {\r\n\t\t\t\tdimPosition[i] = self.rowConditions[self.rowConditions.length - measures.length + 1 - (i + 1)];\r\n\t\t\t}\r\n\r\n\t\t\tif (colCoord) {\r\n\t\t\t\tfor (var i = self.colConditions.length - 1; i >= 0; i--) {\r\n\t\t\t\t\tdimValues[self.colConditions[i]] = colCoord.value;\r\n\t\t\t\t\tcolCoord = colCoord.parent\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar temp = rowsCoord.parent;\r\n\t\t\tfor (var i = 0; i < dimPosition.length; i++) {\r\n\t\t\t\tdimValues[dimPosition[i]] = temp.value;\r\n\t\t\t\ttemp = temp.parent//temp.items\r\n\t\t\t}\r\n\r\n\t\t\tfor (var i = 0; i < self.filterIndexes.length; i++) {\r\n\t\t\t\tvar s = self.filterDiv.selects[i];\r\n\t\t\t\tvar val = OAT.$v(s)\r\n\t\t\t\tif (val == \"[all]\"/*\"\"*/) {\r\n\t\t\t\t\tdimValues[self.filterIndexes[i]] = undefined\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdimValues[self.filterIndexes[i]] = val\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar value = \"\"\r\n\t\t\tvar hallado = false\r\n\t\t\tvar numRow = 0\r\n\t\t\tif (tosearch != undefined) { searchIn = tosearch }\r\n\t\t\telse {\r\n\t\t\t\tvar searchIn = self.recordForFormula\r\n\t\t\t}\r\n\t\t\tvar coinciden = [];\r\n\t\t\t//if (self.filterIndexes.length > 0){ searchIn = self.filteredData }\r\n\t\t\tvar addedValues = []; for (var o = 0; o < self.formulaInfo.recordDataLength; o++) { addedValues[o] = 0 }\r\n\t\t\tfor (var i = 0; i < searchIn.length; i++) {\r\n\t\t\t\tvar coincide = false\r\n\t\t\t\tfor (var j = 0; j < dimValues.length; j++) {\r\n\t\t\t\t\tif (searchIn[i][j] == dimValues[j]) {\r\n\t\t\t\t\t\tcoincide = true;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif ((dimValues[j] == undefined) && (self.filterIndexes.indexOf(j) != -1)) {\r\n\t\t\t\t\t\t\tcoincide = true;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tcoincide = false;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (coincide) {\r\n\t\t\t\t\tfor (var t = 0; t < self.formulaInfo.measureFormula[measureNumber].relatedMeasures.length; t++) {\r\n\t\t\t\t\t\tvar pos = self.formulaInfo.measureFormula[measureNumber].relatedMeasures[t]\r\n\t\t\t\t\t\tif (searchIn[i][pos] == undefined) {\r\n\t\t\t\t\t\t\tif (addedValues[pos] == 0) addedValues[pos] = \"#NuN#\";\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (addedValues[pos] == \"#NuN#\") addedValues[pos] = 0;\r\n\t\t\t\t\t\t\taddedValues[pos] = addedValues[pos] + parseFloat(searchIn[i][pos]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\thallado = true\r\n\t\t\t\t\tcoinciden.push(i);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (hallado) {\r\n\t\t\t\tif (self.formulaInfo.cantFormulaMeasures == 1) {\r\n\t\t\t\t\tfor (var pC = 0; pC < coinciden.length; pC++) {\r\n\t\t\t\t\t\ttosearch.splice(coinciden[pC], 1)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn addedValues;\r\n\t\t\t} else\r\n\t\t\t\treturn self.EmptyValue;\r\n\r\n\r\n\t\t}\r\n\r\n\r\n\r\n\t\tthis.calculateFormulaTotal = function (inputData, measureNumber, caseId) {\r\n\t\t\ttry {\r\n\t\t\t\tvar addedValues = [];\r\n\r\n\t\t\t\tif (inputData.length == 0) return \"#NuN#\"\r\n\r\n\t\t\t\t//if ( caseId == \"MeasureInRows\"){\r\n\t\t\t\tfor (var j = 0; j < inputData.length; j++) {\r\n\t\t\t\t\t//if (inputData[j] == \"#NuN#\"){\r\n\t\t\t\t\t//\treturn \"#NuN#\";\r\n\t\t\t\t\t//}\r\n\t\t\t\t\tif ((inputData[j] != self.EmptyValue) && (inputData[j] != 0) && ((inputData[j] != \"#NuN#\") || (self.ShowMeasuresAsRows))) {\r\n\t\t\t\t\t\tfor (var i = 0; i < inputData[j].length; i++) {\r\n\t\t\t\t\t\t\tif (addedValues[i] == undefined) { addedValues[i] = 0 }\r\n\t\t\t\t\t\t\tif (!isNaN(inputData[j][i]) && (inputData[j][i] != \"#NuN#\")) {\r\n\t\t\t\t\t\t\t\tif (addedValues[i] == \"#NuN#\") addedValues[i] = 0;\r\n\t\t\t\t\t\t\t\taddedValues[i] = addedValues[i] + inputData[j][i];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (inputData[j][i] == \"#NuN#\" && addedValues[i] == 0) {\r\n\t\t\t\t\t\t\t\taddedValues[i] = \"#NuN#\"\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t//}\r\n\t\t\t\tif (!self.ShowMeasuresAsRows) {\r\n\t\t\t\t\tif (addedValues.length == 0) return \"#NuN#\"\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (addedValues.length == 0) return NaN\r\n\t\t\t\t}\r\n\t\t\t\tvar result = EvaluateExpressionPivotJs(self.formulaInfo.measureFormula[measureNumber].PolishNotation,\r\n\t\t\t\t\taddedValues, self.formulaInfo)\r\n\t\t\t\tif ((result == Infinity) || isNaN(result)) {\r\n\t\t\t\t\treturn \"#FoE#\";\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn result;\r\n\t\t\t} catch (Error) {\r\n\t\t\t\treturn self.EmptyValue;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\tthis.addToStack = function (iterator, item, value, conditionList) {\r\n\t\t\tif (self.GeneralDataRows.length > 3000)\r\n\t\t\t\treturn true\r\n\t\t\tif (iterator < 1)\r\n\t\t\t\treturn true;\r\n\t\t\tif (item.value == undefined)\r\n\t\t\t\treturn true;\r\n\r\n\t\t\tvar value_cond_row_pos = self.conditions[conditionList[iterator]].dataRowPosition;\r\n\t\t\tvar value_prev_cond_row_pos = self.conditions[conditionList[iterator - 1]].dataRowPosition;\r\n\t\t\t//search if the row exists\r\n\t\t\tif ((self.allData.length > 800) && (self.filterIndexes.length > 0)) {\r\n\t\t\t\treturn true\r\n\t\t\t}\r\n\r\n\t\t\tfor (var i = 0; i < self.allData.length; i++) {\r\n\t\t\t\tif (self.allData[i][value_cond_row_pos] == value) {\r\n\t\t\t\t\tif (item.value == self.allData[i][value_prev_cond_row_pos]) {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (self.rowConditions.length < 8) {\r\n\t\t\t\tfor (var i = 0; i < self.GeneralDataRows.length; i++) {\r\n\t\t\t\t\tif (self.GeneralDataRows[i][value_cond_row_pos] == value) {\r\n\t\t\t\t\t\tif (item.value == self.GeneralDataRows[i][value_prev_cond_row_pos]) {\r\n\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tthis.createAggStructure = function () { /* create a multidimensional aggregation structure */\r\n\t\t\tfunction createPart(struct, arr, rows, tempSearchData) {\r\n\t\t\t\tstruct.items = false;\r\n\t\t\t\tstruct.depth = -1;\r\n\t\t\t\tvar stack = [struct];\r\n\t\t\t\tvar dimensionLenght = arr.length;\r\n\t\t\t\tif ((self.ShowMeasuresAsRows) && rows) {\r\n\t\t\t\t\tdimensionLenght -= measures.length - 1;\r\n\t\t\t\t}\r\n\t\t\t\tfor (var i = 0; i < dimensionLenght; i++) { /* for all conditions */\r\n\t\t\t\t\t/*ordenar tempSearchData*/\r\n\t\t\t\t\tvar cond = self.conditions[arr[i]];\r\n\r\n\r\n\t\t\t\t\tvar filaAOrdenar = self.conditions[arr[i]].dataRowPosition\r\n\t\t\t\t\tvar index = filaAOrdenar;\r\n\r\n\t\t\t\t\tvar coef = cond.sort;\r\n\r\n\r\n\t\t\t\t\tif ((i >= 1) && (self.rowConditions.length > 16) && (self.GeneralDataRows.length > 1200)) {\r\n\t\t\t\t\t\tcond = self.conditions[arr[i - 1]];\r\n\t\t\t\t\t\tfilaAOrdenar = self.conditions[arr[i - 1]].dataRowPosition\r\n\t\t\t\t\t\tindex = filaAOrdenar;\r\n\r\n\t\t\t\t\t\tcoef = cond.sort;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ((coef != 0) && (coef != 2)) {\r\n\t\t\t\t\t\tvar sortNumeric = true;\r\n\t\t\t\t\t\tfor (var ival = 0; ival < cond.distinctValues.length; ival++) {\r\n\t\t\t\t\t\t\tif ((sortNumeric) && (cond.distinctValues[ival] != parseInt(cond.distinctValues[ival]))) {\r\n\t\t\t\t\t\t\t\tsortNumeric = false; break;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (sortNumeric) {\r\n\t\t\t\t\t\t\ttempSearchData.sort((function (index) {\r\n\t\t\t\t\t\t\t\treturn function (a, b) {\r\n\t\t\t\t\t\t\t\t\treturn coef * (parseInt(a[index]) === parseInt(b[index]) ? 0 : (parseInt(a[index]) < parseInt(b[index]) ? -1 : 1));\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t})(index));\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\ttempSearchData.sort((function (index) {\r\n\t\t\t\t\t\t\t\treturn function (a, b) {\r\n\t\t\t\t\t\t\t\t\treturn coef * (a[index] === b[index] ? 0 : (a[index] < b[index] ? -1 : 1));\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t})(index));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\r\n\r\n\r\n\t\t\t\t\tvar newstack = [];\r\n\r\n\t\t\t\t\tvar itemsInclude = cond.distinctValues.length;\r\n\t\t\t\t\t//if ((coef != 0) && (coef == 1)) cond.distinctValues.sort();\r\n\r\n\t\t\t\t\tif ((i >= 1) && (self.rowConditions.length > 16) && (self.GeneralDataRows.length > 1200)) {\r\n\t\t\t\t\t\tvar value_cond_row_pos = self.conditions[arr[i]].dataRowPosition;\r\n\t\t\t\t\t\tvar newStackValues = [];\r\n\t\t\t\t\t\tfor (var j = 0; j < stack.length; j++) {\r\n\t\t\t\t\t\t\tvar items = [];\r\n\r\n\t\t\t\t\t\t\tfor (var l = 0; l < tempSearchData.length; l++) {\r\n\t\t\t\t\t\t\t\tvar crudeRow = tempSearchData[l];\r\n\r\n\t\t\t\t\t\t\t\tvalue = tempSearchData[l][value_cond_row_pos];\r\n\r\n\t\t\t\t\t\t\t\tvar res = self.addToStack3(i, stack[j], tempSearchData[l], arr, coef, sortNumeric)\r\n\t\t\t\t\t\t\t\tif (res == 'break') break;\r\n\r\n\t\t\t\t\t\t\t\tif (newStackValues.indexOf(value) == -1) {\r\n\t\t\t\t\t\t\t\t\t//stack[j] y crudeRow \"coinciden\"\r\n\r\n\r\n\r\n\t\t\t\t\t\t\t\t\tif (res) {\r\n\t\t\t\t\t\t\t\t\t\tnewStackValues.push(value);\r\n\r\n\t\t\t\t\t\t\t\t\t\tvar collapsed = false;\r\n\t\t\t\t\t\t\t\t\t\tif (cond.collapsedValues.indexOf(value) != -1)\r\n\t\t\t\t\t\t\t\t\t\t\tcollapsed = true;\r\n\t\t\t\t\t\t\t\t\t\tvar o = { value: value, parent: stack[j], used: false, items: false, depth: i, collapsed: collapsed, conditionNumber: arr[i] };\r\n\t\t\t\t\t\t\t\t\t\titems.push(o);\r\n\t\t\t\t\t\t\t\t\t\tnewstack.push(o);\r\n\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tnewStackValues = [];\r\n\r\n\r\n\t\t\t\t\t\t\tstack[j].items = items;\r\n\t\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tfor (var j = 0; j < stack.length; j++) { // for all items to be filled \r\n\t\t\t\t\t\t\tvar items = [];\r\n\r\n\t\t\t\t\t\t\tvar valuePositionInSearchData = [0];\r\n\t\t\t\t\t\t\tfor (var k = 0; k < itemsInclude; k++) { // for all currently distinct values\r\n\r\n\t\t\t\t\t\t\t\tvar value = cond.distinctValues[k];\r\n\t\t\t\t\t\t\t\tif (cond.blackList.indexOf(value) == -1) { //if not in black list\r\n\r\n\t\t\t\t\t\t\t\t\tif (self.addToStack2(i, stack[j], value, arr, tempSearchData, valuePositionInSearchData, coef, sortNumeric)) {//search if this rows exists\r\n\r\n\t\t\t\t\t\t\t\t\t\tvar collapsed = false;\r\n\t\t\t\t\t\t\t\t\t\tif (cond.collapsedValues.indexOf(value) != -1)\r\n\t\t\t\t\t\t\t\t\t\t\tcollapsed = true;\r\n\t\t\t\t\t\t\t\t\t\tvar o = { value: value, parent: stack[j], used: false, items: false, depth: i, collapsed: collapsed, conditionNumber: arr[i] };\r\n\t\t\t\t\t\t\t\t\t\titems.push(o);\r\n\t\t\t\t\t\t\t\t\t\tnewstack.push(o);\r\n\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} // distinct values \r\n\t\t\t\t\t\t\tstack[j].items = items;\r\n\t\t\t\t\t\t} // items in stack\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\tstack = newstack;\r\n\t\t\t\t} /* conditions */\r\n\r\n\r\n\t\t\t\t//add measure & value row\r\n\t\t\t\tif ((self.ShowMeasuresAsRows) && (rows)) {\r\n\t\t\t\t\t//if (arr.length > 0){\r\n\t\t\t\t\tvar newstack = [];\r\n\t\t\t\t\tfor (var j = 0; j < stack.length; j++) { /* for all items to be filled */\r\n\t\t\t\t\t\tvar items = [];\r\n\t\t\t\t\t\tvar itemsInclude = measures.length;\r\n\r\n\t\t\t\t\t\tfor (var k = 0; k < itemsInclude; k++) { //for all measures\r\n\t\t\t\t\t\t\tvar measureName = measures[k].getAttribute(\"displayName\")\r\n\t\t\t\t\t\t\tvar collapsed = false;\r\n\t\t\t\t\t\t\tvar o = { value: measureName, parent: stack[j], used: false, items: false, depth: dimensionLenght, collapsed: collapsed };\r\n\t\t\t\t\t\t\t//items.push(o);\r\n\t\t\t\t\t\t\tvar podar = false\r\n\t\t\t\t\t\t\tif (self.colConditions.length == 0) {\r\n\t\t\t\t\t\t\t\tvar measureValue = self.getMeasureValue(stack[j], k, arr);\r\n\t\t\t\t\t\t\t\tif (measureValue == self.EmptyValue) {\r\n\t\t\t\t\t\t\t\t\tpodar = true;\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tvar v = { value: measureValue, parent: o, used: false, items: false, depth: dimensionLenght + 1, collapsed: collapsed };\r\n\t\t\t\t\t\t\t\t\to.items = []\r\n\t\t\t\t\t\t\t\t\to.items.push(v)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t//var collapseFalse\r\n\t\t\t\t\t\t\tif (!podar) {\r\n\t\t\t\t\t\t\t\titems.push(o)\r\n\t\t\t\t\t\t\t\tif (self.colConditions.length == 0) {\r\n\t\t\t\t\t\t\t\t\tnewstack.push(v);\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tnewstack.push(o);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tstack[j].items = items;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tstack = newstack;\r\n\t\t\t\t\t//}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t//create copy of self.allData\r\n\t\t\tvar tempSearchData = [];\r\n\t\t\tfor (var i = 0; i < self.allData.length; i++) {\r\n\t\t\t\ttempSearchData.push(self.allData[i])\r\n\t\t\t}\r\n\r\n\t\t\t//self.createTempDataStructForAggStepOptimization();\r\n\t\t\tcreatePart(self.rowStructure, self.rowConditions, true, tempSearchData);\r\n\t\t\tcreatePart(self.colStructure, self.colConditions, false, tempSearchData);\r\n\t\t\t//self.TempDataStructForAggStepOptimization = [];\r\n\t\t}\r\n\r\n\t\tthis.addToStack3 = function (iterator, item, row, conditionList, orden, sortNumeric) {\r\n\t\t\tif (item.value == undefined)\r\n\t\t\t\treturn true;\r\n\r\n\t\t\t//var value_cond_row_pos = self.conditions[conditionList[iterator]].dataRowPosition;\r\n\t\t\tvar value_prev_cond_row_pos = self.conditions[conditionList[iterator - 1]].dataRowPosition;\r\n\r\n\t\t\tif (item.value == row[value_prev_cond_row_pos]) {\r\n\r\n\t\t\t\tvar tempItem = item;\r\n\t\t\t\tvar flag = true;\r\n\t\t\t\tfor (var resto = 1; resto < iterator; resto++) {\r\n\t\t\t\t\tvar value_prev = self.conditions[conditionList[iterator - 1 - resto]].dataRowPosition;\r\n\t\t\t\t\ttempItem = tempItem.parent;\r\n\t\t\t\t\tif (tempItem.value != row[value_prev]) {\r\n\t\t\t\t\t\tflag = false;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (flag) return true;\r\n\r\n\t\t\t} else {\r\n\t\t\t\tif ((orden == 0) || (orden == 2) ||\r\n\t\t\t\t\t((orden == 1) && (!sortNumeric) && (row[value_prev_cond_row_pos] <= item.value)) ||\r\n\t\t\t\t\t((orden == -1) && (!sortNumeric) && (row[value_prev_cond_row_pos] >= item.value)) ||\r\n\t\t\t\t\t((orden == 1) && (sortNumeric) && (parseInt(row[value_prev_cond_row_pos]) <= parseInt(item.value))) ||\r\n\t\t\t\t\t((orden == -1) && (sortNumeric) && (parseInt(row[value_prev_cond_row_pos]) >= parseInt(item.value)))\r\n\t\t\t\t) {\r\n\t\t\t\t\treturn false\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn 'break'\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tthis.addToStack2 = function (iterator, item, value, conditionList, tempSearchData, valuePosition, orden, sortNumeric) {\r\n\t\t\tif ((self.GeneralDataRows.length > 3000))\r\n\t\t\t\treturn true\r\n\t\t\tif (iterator < 1)\r\n\t\t\t\treturn true;\r\n\t\t\tif (item.value == undefined)\r\n\t\t\t\treturn true;\r\n\r\n\t\t\tvar value_cond_row_pos = self.conditions[conditionList[iterator]].dataRowPosition;\r\n\t\t\tvar value_prev_cond_row_pos = self.conditions[conditionList[iterator - 1]].dataRowPosition;\r\n\t\t\t//search if the row exists\r\n\t\t\tif ((self.allData.length > 1000) && (self.filterIndexes.length > 0) && (self.rowConditions.length < 8)) {\r\n\t\t\t\treturn true\r\n\t\t\t}\r\n\r\n\t\t\tvar first = true;\r\n\t\t\tfor (var i = valuePosition[0]; i < tempSearchData.length/*self.allData.length*/; i++) {\r\n\t\t\t\tif ((orden == 0) || (orden == 2) ||\r\n\t\t\t\t\t((orden == 1) && (!sortNumeric) && (tempSearchData[i][value_cond_row_pos] <= value)) ||\r\n\t\t\t\t\t((orden == -1) && (!sortNumeric) && (tempSearchData[i][value_cond_row_pos] >= value)) ||\r\n\t\t\t\t\t((orden == 1) && (sortNumeric) && (parseInt(tempSearchData[i][value_cond_row_pos]) <= parseInt(value))) ||\r\n\t\t\t\t\t((orden == -1) && (sortNumeric) && (parseInt(tempSearchData[i][value_cond_row_pos]) >= parseInt(value)))\r\n\t\t\t\t) {\r\n\t\t\t\t\tif (tempSearchData[i][value_cond_row_pos] == value) {\r\n\t\t\t\t\t\tif ((first) && (orden != 0) && (orden != 2)) {\r\n\t\t\t\t\t\t\tvaluePosition[0] = i; first = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (item.value == tempSearchData[i][value_prev_cond_row_pos]) {\r\n\t\t\t\t\t\t\tvar tempItem = item;\r\n\t\t\t\t\t\t\tvar flag = true;\r\n\t\t\t\t\t\t\tfor (var resto = 1; resto < iterator; resto++) {\r\n\t\t\t\t\t\t\t\tvar value_prev = self.conditions[conditionList[iterator - 1 - resto]].dataRowPosition;\r\n\t\t\t\t\t\t\t\ttempItem = tempItem.parent;\r\n\t\t\t\t\t\t\t\tif (tempItem.value != tempSearchData[i][value_prev]) {\r\n\t\t\t\t\t\t\t\t\tflag = false;\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (flag) return true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {//se supero el valor\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif ((/*(!self.autoPaging) ||*/ (self.GeneralDataRows.length < 500)) //limitado evitar loop grande\r\n\t\t\t\t&& (self.GeneralDataRows.length > self.allData.length)) {\r\n\t\t\t\tfor (var i = 0; i < self.GeneralDataRows.length; i++) {\r\n\t\t\t\t\tif (self.GeneralDataRows[i][value_cond_row_pos] == value) {\r\n\t\t\t\t\t\tif (item.value == self.GeneralDataRows[i][value_prev_cond_row_pos]) {\r\n\t\t\t\t\t\t\tif (iterator > 1) {\r\n\r\n\t\t\t\t\t\t\t\tvar value_prev = self.conditions[conditionList[iterator - 2]].dataRowPosition;\r\n\t\t\t\t\t\t\t\tif (item.parent.value == self.GeneralDataRows[i][value_prev]) {\r\n\t\t\t\t\t\t\t\t\treturn true\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tthis.fillAggStructure = function () { /* mark used branches of aggregation structure */\r\n\t\t\tfunction fillPart(struct, arr, row, rowNumber) {\r\n\t\t\t\tif (!self.ShowMeasuresAsRows) {\r\n\t\t\t\t\tvar ptr = struct;\r\n\t\t\t\t\tfor (var i = 0; i < arr.length; i++) {\r\n\t\t\t\t\t\tvar rindex = arr[i];\r\n\t\t\t\t\t\tvar value = row[rindex];\r\n\t\t\t\t\t\tvar o = false;\r\n\t\t\t\t\t\tfor (var j = 0; j < ptr.items.length; j++) {\r\n\t\t\t\t\t\t\tif (ptr.items[j].value == value) {\r\n\t\t\t\t\t\t\t\to = ptr.items[j];\r\n\t\t\t\t\t\t\t\tptr.items[j].row = rowNumber;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (o) ptr = o;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t} /* for all conditions */\r\n\t\t\t\t\tptr.used = true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar posTitleMeasure = row.length - measures.length;\r\n\t\t\t\t\trow.splice(posTitleMeasure, 0, \"\");\r\n\t\t\t\t\tfor (var m = 0; m < measures.length; m++) {\r\n\t\t\t\t\t\t//agrego a la fila el valor de la medida\r\n\t\t\t\t\t\tvar measureName = measures[m].getAttribute(\"displayName\")\r\n\t\t\t\t\t\trow[posTitleMeasure] = measureName;\r\n\r\n\t\t\t\t\t\tvar ptr = struct;\r\n\t\t\t\t\t\tfor (var i = 0; i < arr.length; i++) {\r\n\t\t\t\t\t\t\tvar rindex = arr[i];//i; //arr[i]; \r\n\t\t\t\t\t\t\tvar value = row[rindex];\r\n\t\t\t\t\t\t\tvar o = false;\r\n\t\t\t\t\t\t\tfor (var j = 0; j < ptr.items.length; j++) {\r\n\t\t\t\t\t\t\t\tif (ptr.items[j].value == value) {\r\n\t\t\t\t\t\t\t\t\to = ptr.items[j];\r\n\t\t\t\t\t\t\t\t\t//ptr.items[j].row = rowNumber*measures.length + m;\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (!self.autoPaging) {\r\n\t\t\t\t\t\t\t\t//if (!o) { \r\n\t\t\t\t\t\t\t\t//\t/*alert(\"Value not found in distinct?!?!? PANIC!!!\"); */}\r\n\t\t\t\t\t\t\t\tif (o) ptr = o;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tif (o) ptr = o;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} /* for all conditions */\r\n\t\t\t\t\t\tptr.used = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\trow.splice(posTitleMeasure, 1)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfunction fillAllPart(struct) {\r\n\t\t\t\tvar ptr = struct;\r\n\t\t\t\tif (!ptr.items) {\r\n\t\t\t\t\tptr.used = true;\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tfor (var i = 0; i < ptr.items.length; i++) { fillAllPart(ptr.items[i]); }\r\n\t\t\t}\r\n\r\n\t\t\tif (self.options.showEmpty) {\r\n\t\t\t\tfillAllPart(self.rowStructure);\r\n\t\t\t\tfillAllPart(self.colStructure);\r\n\t\t\t} else {\r\n\t\t\t\tfor (var i = 0; i < self.filteredData.length; i++) {\r\n\t\t\t\t\tvar row = self.filteredData[i];\r\n\t\t\t\t\tfillPart(self.rowStructure, self.rowConditions, row, i);\r\n\t\t\t\t\tfillPart(self.colStructure, self.colConditions, row, i);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.checkAggStructure = function () { /* check structure for empty parts and delete them */\r\n\t\t\tfunction check(ptrT) { /* recursive function */\r\n\t\t\t\tif (!self.ShowMeasuresAsRows) {\r\n\t\t\t\t\tif (!ptrT.items) { return ptrT.used; } /* for leaves, return their usage state */\r\n\t\t\t\t\tfor (var i = ptrT.items.length - 1; i >= 0; i--) { /* if node, decide based on children count */\r\n\t\t\t\t\t\tif (!check(ptrT.items[i])) {\r\n\t\t\t\t\t\t\tptrT.items.splice(i, 1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn (ptrT.items.length > 0); /* return children state */\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (self.colConditions > 0) {\r\n\t\t\t\t\t\tvar tempPt = ptrT\r\n\t\t\t\t\t\tif (!tempPt.items) { return tempPt.used; }\r\n\t\t\t\t\t\tvar itemLg = tempPt.items.length\r\n\t\t\t\t\t\tvar to = 5;\r\n\t\t\t\t\t\tvar iterI;\r\n\t\t\t\t\t\tfor (iterI = itemLg - 1; iterI > -1; iterI--) {\r\n\t\t\t\t\t\t\tif (iterI > -1) {\r\n\t\t\t\t\t\t\t\tvar ol = 0;\r\n\t\t\t\t\t\t\t\tvar resultado = check(tempPt.items[iterI]);\r\n\t\t\t\t\t\t\t\tif ((resultado != undefined) && (!resultado)) {\r\n\t\t\t\t\t\t\t\t\ttempPt.items.splice(iterI, 1);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn (tempPt.items.length > 0);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tcheck(self.rowStructure);\r\n\t\t\tif (!self.ShowMeasuresAsRows) {\r\n\t\t\t\tcheck(self.colStructure);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.applyDefaultFormats = function (td, value) {\r\n\t\t\tvar type = typeof value;\r\n\t\t\tswitch (type) {\r\n\t\t\t\tcase \"number\":\r\n\t\t\t\t\tvalue = OAT.charReplace(value.toString(), \".\", gx.decimalPoint);\r\n\t\t\t\t\tOAT.addTextNode(td, value)\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"date\":\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\treturn td;\r\n\t\t}\r\n\r\n\t\tthis.refreshPivot = function (metadata, data, sameQuery) {\r\n\t\t\tif ((metadata != \"\") && (data != \"\")) {\r\n\t\t\t\tvar parser = new DOMParser();\r\n\t\t\t\tvar xmlData = parser.parseFromString(metadata, 'text/xml');\r\n\t\t\t\tvar dimensions = xmlData.getElementsByTagName(\"OLAPDimension\");\r\n\t\t\t\tvar index;\r\n\r\n\t\t\t\t//add hide elements to blacklist\r\n\t\t\t\tfor (var bli = 0; bli < self.conditions.length; bli++) {\r\n\t\t\t\t\tif ((self.conditions[bli])) {\r\n\t\t\t\t\t\tvar tempBlack = jQuery.extend(true, [], self.conditions[bli].blackList);\r\n\t\t\t\t\t\tfor (var ib = 0; ib < tempBlack.length; ib++) {\r\n\t\t\t\t\t\t\tself.createFilterInfo({ op: \"pop\", values: tempBlack[ib], dim: bli });\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tself.conditions[bli].blackList = []\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar rowPosition = []; var colPosition = [];\r\n\t\t\t\tfor (var dim = 0; dim < dimensions.length; dim++) { //for every dimensions of the other querie\r\n\r\n\t\t\t\t\tvar dimID = dimensions[dim].getElementsByTagName(\"name\")[0].childNodes[0].nodeValue; //get the name - \"Identifier\" of this dimension\r\n\r\n\t\t\t\t\t//now search for this name at this querie\r\n\t\t\t\t\tvar dimPos = -1;\r\n\t\t\t\t\tfor (var itC = 0; itC < self.columns.length; itC++) {\r\n\t\t\t\t\t\tif (self.columns[itC].attributes.getNamedItem(\"name\").nodeValue === dimID)\r\n\t\t\t\t\t\t\tdimPos = itC;\t\t//this is the number identifier of this dimension at this pivot\t\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\tif (dimPos != -1) {//the dimension exist in this pivot\r\n\t\t\t\t\t\t//columns and rows dimensions and filters\r\n\t\t\t\t\t\tvar position = dimensions[dim].getElementsByTagName(\"condition\")[0].childNodes[0].nodeValue; //where's the dimension? row, columns, filter\r\n\t\t\t\t\t\tif (position === \"row\") {\r\n\t\t\t\t\t\t\tindex = self.colConditions.indexOf(dimPos);\r\n\t\t\t\t\t\t\tif (index != -1) { //if it is as columns, change to rows\r\n\t\t\t\t\t\t\t\tself.colConditions.splice(index, 1);\r\n\t\t\t\t\t\t\t\tif (measures.length > 1)\r\n\t\t\t\t\t\t\t\t\tself.rowConditions = [dimPos].concat(self.rowConditions);\r\n\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t\tself.rowConditions.push(dimPos);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tindex = self.filterIndexes.indexOf(dimPos);\r\n\t\t\t\t\t\t\t\tif (index != -1) {\r\n\t\t\t\t\t\t\t\t\tself.filterIndexes.splice(index, 1);\r\n\t\t\t\t\t\t\t\t\tif (measures.length > 1)\r\n\t\t\t\t\t\t\t\t\t\tself.rowConditions = [dimPos].concat(self.rowConditions);\r\n\t\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t\t\tself.rowConditions.push(dimPos);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\trowPosition[parseInt(dimensions[dim].getElementsByTagName(\"position\")[0].childNodes[0].nodeValue)] = dimPos\r\n\t\t\t\t\t\t} else if (position === \"col\") {\r\n\t\t\t\t\t\t\tindex = self.rowConditions.indexOf(dimPos);\r\n\t\t\t\t\t\t\tif (index != -1) {\r\n\t\t\t\t\t\t\t\tself.rowConditions.splice(index, 1);\r\n\t\t\t\t\t\t\t\tif (measures.length > 1)\r\n\t\t\t\t\t\t\t\t\tself.colConditions = [dimPos].concat(self.colConditions);\r\n\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t\tself.colConditions.push(dimPos);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tindex = self.filterIndexes.indexOf(dimPos);\r\n\t\t\t\t\t\t\t\tif (index != -1) {\r\n\t\t\t\t\t\t\t\t\tself.filterIndexes.splice(index, 1);\r\n\t\t\t\t\t\t\t\t\tif (measures.length > 1)\r\n\t\t\t\t\t\t\t\t\t\tself.colConditions = [dimPos].concat(self.colConditions);\r\n\t\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t\t\tself.colConditions.push(dimPos);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tcolPosition[parseInt(dimensions[dim].getElementsByTagName(\"position\")[0].childNodes[0].nodeValue)] = dimPos\r\n\t\t\t\t\t\t} else if (position === \"none\") {//to filter\r\n\t\t\t\t\t\t\tindex = self.colConditions.indexOf(dimPos);\r\n\t\t\t\t\t\t\tif (index != -1) {\r\n\t\t\t\t\t\t\t\tself.colConditions.splice(index, 1);\r\n\t\t\t\t\t\t\t\tif (measures.length > 1)\r\n\t\t\t\t\t\t\t\t\tself.filterIndexes = [dimPos].concat(self.filterIndexes);\r\n\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t\tself.filterIndexes.push(dimPos);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tindex = self.rowConditions.indexOf(dimPos);\r\n\t\t\t\t\t\t\t\tif (index != -1) {\r\n\t\t\t\t\t\t\t\t\tself.rowConditions.splice(index, 1);\r\n\t\t\t\t\t\t\t\t\tif (measures.length > 1)\r\n\t\t\t\t\t\t\t\t\t\tself.filterIndexes = [dimPos].concat(self.filterIndexes);\r\n\t\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t\t\tself.filterIndexes.push(dimPos);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t//set order value\r\n\t\t\t\t\t\tvar order = dimensions[dim].getElementsByTagName(\"order\")[0].childNodes[0].nodeValue;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (order == \"descending\") {\r\n\t\t\t\t\t\t\t\tself.conditions[dimPos].sort = -1\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tself.conditions[dimPos].sort = 1\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\r\n\t\t\t\t\t\t//reset blacklists\r\n\t\t\t\t\t\tvar hides = dimensions[dim].getElementsByTagName(\"hide\")[0].childNodes;\r\n\t\t\t\t\t\tfor (var sofs = 0; sofs < hides.length; sofs++) {\r\n\t\t\t\t\t\t\tif (hides[sofs].tagName === \"value\") {\r\n\t\t\t\t\t\t\t\tvar index = self.conditions[dimPos].blackList.indexOf(hides[sofs].textContent);\r\n\t\t\t\t\t\t\t\t//if not already in the list\r\n\t\t\t\t\t\t\t\tif (index === -1) {\r\n\t\t\t\t\t\t\t\t\tfor (var t = 0; t < self.conditions[dimPos].distinctValues.length; t++) {\r\n\t\t\t\t\t\t\t\t\t\tvar trimValue = self.conditions[dimPos].distinctValues[t].toString().trimpivot();\r\n\t\t\t\t\t\t\t\t\t\tif (trimValue == hides[sofs].textContent) {\r\n\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t\tself.createFilterInfo({ op: \"push\", values: self.conditions[dimPos].distinctValues[t], dim: dimPos });\r\n\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t//set values of filter bars\r\n\t\t\t\t\t\tif (dimensions[dim].getElementsByTagName(\"filterdivs\").length > 0) {\r\n\t\t\t\t\t\t\tvar fils = dimensions[dim].getElementsByTagName(\"filterdivs\")[0].childNodes;\r\n\t\t\t\t\t\t\tfor (var sofs = 0; sofs < fils.length; sofs++) {\r\n\t\t\t\t\t\t\t\tif (fils[sofs].tagName === \"value\") {\r\n\t\t\t\t\t\t\t\t\tvar findex = self.filterIndexes.indexOf(dimPos);\r\n\t\t\t\t\t\t\t\t\tif (findex != -1) {\r\n\t\t\t\t\t\t\t\t\t\tif (self.filterDiv.selects[findex] != undefined) {\r\n\t\t\t\t\t\t\t\t\t\t\tself.filterDiv.selects[findex].value = fils[sofs].textContent;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} //else the dimension not exists in this pivot\r\n\r\n\r\n\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//set dimension position\r\n\t\t\t\tif ((self.rowConditions.length - (measures.length - 1)) == rowPosition.length) {\r\n\t\t\t\t\tfor (var i = 0; i < rowPosition.length; i++) {\r\n\t\t\t\t\t\tself.rowConditions[i] = rowPosition[i];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (self.colConditions.length == colPosition.length) {\r\n\t\t\t\t\tfor (var i = 0; i < colPosition.length; i++) {\r\n\t\t\t\t\t\tself.colConditions[i] = colPosition[i];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\r\n\t\t\t\t\tfor (var c = 0; c < self.columns.length; c++) {\r\n\t\t\t\t\t\tself.pageData.AxisInfo = self.createAxisInfo(self.columns[c].getAttribute(\"dataField\"));\r\n\t\t\t\t\t}\r\n\t\t\t\t\tself.pageData.CollapseInfo = self.CreateExpandCollapseInfo(\"\");\r\n\t\t\t\t\tself.pageData.DataInfo = self.createDataInfo()\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar ParmDataInfo = self.createNewDataInfo()\r\n\t\t\t\t\tvar ParmAxisInfo =  self.createNewAxisInfo();\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\tself.lastCallToQueryViewer = \"refreshPivot\"\r\n\t\t\t\t\r\n\t\t\t\t\tself.requestPageDataForPivotTable(1, self.rowsPerPage, true, ParmAxisInfo, ParmDataInfo, self.pageData.FilterInfo, self.pageData.CollapseInfo, true);\r\n\r\n\t\t\t\t\t\r\n\t\t\t\t\t/*self.QueryViewerCollection[self.IdForQueryViewerCollection].getPageDataForPivotTable((function (resXML) {\r\n\t\t\t\t\t\tif (!qv.util.anyError(resXML) || self.QueryViewerCollection[self.IdForQueryViewerCollection].debugServices) {\r\n\r\n\t\t\t\t\t\t\tself.pageData = OATGetNewDataFromXMLForPivot(resXML, self.pageData, self.ShowMeasuresAsRows);\r\n\t\t\t\t\t\t\tself.goWhenServerPagination(false, true);\r\n\t\t\t\t\t\t\tqv.util.hideActivityIndicator(self.QueryViewerCollection[self.IdForQueryViewerCollection]);\r\n\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tvar errMsg = qv.util.getErrorFromText(resXML);\r\n\t\t\t\t\t\t\tqv.util.renderError(self.QueryViewerCollection[self.IdForQueryViewerCollection], errMsg);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}).closure(this), [1, self.rowsPerPage, true, ParmAxisInfo, ParmDataInfo, self.pageData.FilterInfo, self.pageData.CollapseInfo, true]);*/\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\r\n\r\n\t\tthis.getRowFromDimensionRow = function (row, rowCollection) {\r\n\t\t\tfor (var rCL = 0; rCL < rowCollection.length; rCL++) {\r\n\t\t\t\tvar same = true;\r\n\t\t\t\tfor (var rwoI = 0; rwoI < row.length; rwoI++) {\r\n\t\t\t\t\tif (row[rwoI] != undefined) {\r\n\t\t\t\t\t\tif (row[rwoI] != rowCollection[rCL][rwoI]) {\r\n\t\t\t\t\t\t\tsame = false;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (same) {\r\n\t\t\t\t\treturn rowCollection[rCL]\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn null\r\n\t\t}\r\n\r\n\t\t\r\n\t\t\r\n\r\n\r\n\t\tthis.notInBlackList = function (row, conditions) {\r\n\t\t\tvar esta = false;\r\n\t\t\tfor (var i = 0; i < row.length; i++) {\r\n\t\t\t\tif ((conditions[i] != undefined) && (conditions[i].blackList != undefined) && (conditions[i].blackList.indexOf(row[i]) != -1)) {\r\n\t\t\t\t\testa = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn esta;\r\n\t\t}\r\n\r\n\r\n\t\tthis.preGoWhenShowHideMeasures = function (index) {\r\n\t\t\tvar displayName = self.initMetadata.Measures[index].displayName;\r\n\r\n\t\t\t//column hide\r\n\t\t\tvar columnIndex = self.headerRow.indexOf(displayName);\r\n\t\t\tif (!self.initMetadata.Measures[index].Visible) {\r\n\t\t\t\tif (measures.length > 1) {\r\n\t\t\t\t\tself.rowConditions.splice(self.rowConditions.length - 1, 1)\r\n\t\t\t\t\tself.dataColumnIndex = self.dataColumnIndex - 1\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t} else {\r\n\t\t\t\tvar presentMeasures = measures.length - 1;\r\n\t\t\t\tfor (var o = 0; o < presentMeasures; o++) {\r\n\t\t\t\t\tself.rowConditions.splice(self.rowConditions.length - 1, 1)\r\n\t\t\t\t}\r\n\t\t\t\tif ((presentMeasures >= 0) && (measures[0].getAttribute(\"dataField\") != \"F0\")) {\r\n\t\t\t\t\tvar cols = self.rowConditions.length + self.colConditions.length + self.filterIndexes.length;\r\n\t\t\t\t\tif (measures.length > 0) {\r\n\t\t\t\t\t\tvar prevCol = cols;\r\n\t\t\t\t\t\tcols = cols + measures.length;\r\n\t\t\t\t\t\tfor (var i = prevCol; i < cols; i++) {\r\n\t\t\t\t\t\t\tself.rowConditions.push(i);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfor (var i = 0; i < self.columns.length; i++) {\r\n\t\t\t\tvar dF = self.columns[i].getAttribute(\"dataField\")\r\n\t\t\t\tvar index = self.initMetadata.DataFields.indexOf(dF);\r\n\t\t\t\tself.initMetadata.Conditions[index] = self.conditions[i];\r\n\t\t\t}\r\n\r\n\t\t\tthis.goWhenHide();\r\n\t\t}\r\n\r\n\r\n\t\tthis.preGoWhenShowHideDimension = function (index) {\r\n\t\t\tfor (var ip = 0; ip < self.columns.length; ip++) {\r\n\t\t\t\tvar dF = self.columns[ip].getAttribute(\"dataField\")\r\n\t\t\t\tvar ix = self.initMetadata.DataFields.indexOf(dF);\r\n\t\t\t\tself.initMetadata.Conditions[ix] = self.conditions[ip];\r\n\t\t\t}\r\n\r\n\t\t\tvar conditionIndex;\r\n\t\t\tvar DataFile = self.initMetadata.DataFields[index]\r\n\t\t\tfor (var ip = 0; ip < self.columns.length; ip++) {\r\n\t\t\t\tvar dF = self.columns[ip].getAttribute(\"dataField\")\r\n\t\t\t\tif (DataFile == dF) {\r\n\t\t\t\t\tconditionIndex = ip\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\r\n\t\t\tif (!self.initMetadata.Dimensions[index].Visible) {\r\n\t\t\t\tself.initMetadata.DimensionPosition[index] = \"row\"\r\n\t\t\t\t//self.conditions[conditionIndex].position = \"row\"\r\n\t\t\t\tif (self.colConditions.indexOf(conditionIndex) > -1) {\r\n\t\t\t\t\tself.initMetadata.DimensionPosition[index] = \"col\"\r\n\t\t\t\t\t//self.conditions[conditionIndex].position = \"col\"\r\n\t\t\t\t}\r\n\t\t\t\tif (self.filterIndexes.indexOf(conditionIndex) > -1) {\r\n\t\t\t\t\tself.initMetadata.DimensionPosition[index] = \"fil\"\r\n\t\t\t\t\t//self.conditions[conditionIndex].position = \"fil\"\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar displayName = self.initMetadata.Dimensions[index].displayName;\r\n\r\n\t\t\t//column hide\r\n\t\t\tvar columnIndex = self.headerRow.indexOf(displayName);\r\n\t\t\tif (!self.initMetadata.Dimensions[index].Visible) {\r\n\t\t\t\tif (self.rowConditions.indexOf(columnIndex) > -1) {\r\n\t\t\t\t\tself.rowConditions.splice(self.rowConditions.indexOf(columnIndex), 1)\r\n\t\t\t\t} else if (self.colConditions.indexOf(columnIndex) > -1) {\r\n\t\t\t\t\tself.colConditions.splice(self.colConditions.indexOf(columnIndex), 1)\r\n\t\t\t\t} else if (self.filterIndexes.indexOf(columnIndex) > -1) {\r\n\t\t\t\t\tself.filterIndexes.splice(self.filterIndexes.indexOf(columnIndex), 1)\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//correct measure and dimension number\r\n\t\t\t\tself.dataColumnIndex = self.dataColumnIndex - 1\r\n\t\t\t\tfor (var i = 0; i < self.rowConditions.length; i++) {\r\n\t\t\t\t\tif (self.rowConditions[i] > columnIndex) {\r\n\t\t\t\t\t\tself.rowConditions[i] = self.rowConditions[i] - 1\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tfor (var i = 0; i < self.colConditions.length; i++) {\r\n\t\t\t\t\tif (self.colConditions[i] > columnIndex) {\r\n\t\t\t\t\t\tself.colConditions[i] = self.colConditions[i] - 1\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tfor (var i = 0; i < self.filterIndexes.length; i++) {\r\n\t\t\t\t\tif (self.filterIndexes[i] > columnIndex) {\r\n\t\t\t\t\t\tself.filterIndexes[i] = self.filterIndexes[i] - 1\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\t\t\t\tvar previousPosition = self.initMetadata.DimensionPosition[index]//self.initMetadata.Conditions[index].position;\r\n\r\n\t\t\t\tif (previousPosition == undefined) {\r\n\t\t\t\t\tvar defpos = self.initMetadata.Dimensions[index].defaultPosition.toLowerCase()\r\n\r\n\t\t\t\t\tif (defpos.indexOf(\"rows\") > -1) previousPosition = \"row\";\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tif (defpos.indexOf(\"columns\") > -1) previousPosition = \"col\";\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\tif ((defpos.indexOf(\"filters\") > -1) || (defpos.indexOf(\"pages\") > -1)) previousPosition = \"fil\";\r\n\t\t\t\t\t\t\telse previousPosition = \"row\";\r\n\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\tvar posIndex = 0\r\n\t\t\t\tfor (var i = 0; i < index; i++) {\r\n\t\t\t\t\tif (self.initMetadata.Dimensions[i].Visible) posIndex = posIndex + 1\r\n\t\t\t\t}\r\n\r\n\t\t\t\tindex = posIndex;\r\n\t\t\t\tif (previousPosition == \"row\") {\r\n\t\t\t\t\tvar tempRowConsition = [];\r\n\t\t\t\t\tvar existe = (self.rowConditions.indexOf(index) > -1)\r\n\t\t\t\t\tfor (var t = 0; t < self.rowConditions.length; t++) {\r\n\t\t\t\t\t\tif (self.rowConditions[t] < index) {\r\n\t\t\t\t\t\t\ttempRowConsition.push(self.rowConditions[t])\r\n\t\t\t\t\t\t} else if (self.rowConditions[t] == index) {\r\n\t\t\t\t\t\t\ttempRowConsition.push(index)\r\n\t\t\t\t\t\t\ttempRowConsition.push(index + 1)\r\n\t\t\t\t\t\t\texiste = true\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (!existe) {\r\n\t\t\t\t\t\t\t\ttempRowConsition.push(index)\r\n\t\t\t\t\t\t\t\texiste = true\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\ttempRowConsition.push(self.rowConditions[t] + 1)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!existe) {\r\n\t\t\t\t\t\ttempRowConsition.push(index)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tself.rowConditions = []\r\n\t\t\t\t\tself.rowConditions = tempRowConsition\r\n\r\n\t\t\t\t\tself.dataColumnIndex = self.dataColumnIndex + 1\r\n\r\n\r\n\t\t\t\t\tvar tempColConsition = [];\r\n\t\t\t\t\tfor (var t = 0; t < self.colConditions.length; t++) {\r\n\t\t\t\t\t\tif (self.colConditions[t] >= index) {\r\n\t\t\t\t\t\t\ttempColConsition.push(self.colConditions[t] + 1)\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\ttempColConsition.push(self.colConditions[t])\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tself.colConditions = []\r\n\t\t\t\t\tself.colConditions = tempColConsition\r\n\r\n\t\t\t\t\tvar tempFilConsition = [];\r\n\t\t\t\t\tfor (var t = 0; t < self.filterIndexes.length; t++) {\r\n\t\t\t\t\t\tif (self.filterIndexes[t] >= index) {\r\n\t\t\t\t\t\t\ttempFilConsition.push(self.filterIndexes[t] + 1)\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\ttempFilConsition.push(self.filterIndexes[t])\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tself.filterIndexes = []\r\n\t\t\t\t\tself.filterIndexes = tempFilConsition\r\n\r\n\r\n\t\t\t\t} else if (previousPosition == \"col\") {\r\n\r\n\t\t\t\t\tvar tempRowConsition = [];\r\n\t\t\t\t\tfor (var t = 0; t < self.rowConditions.length; t++) {\r\n\t\t\t\t\t\tif (self.rowConditions[t] >= index) {\r\n\t\t\t\t\t\t\ttempRowConsition.push(self.rowConditions[t] + 1)\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\ttempRowConsition.push(self.rowConditions[t])\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tself.rowConditions = []\r\n\t\t\t\t\tself.rowConditions = tempRowConsition\r\n\r\n\t\t\t\t\tself.dataColumnIndex = self.dataColumnIndex + 1\r\n\r\n\r\n\r\n\t\t\t\t\tvar tempColConsition = [];\r\n\t\t\t\t\tvar existe = (self.colConditions.indexOf(index) > -1)\r\n\t\t\t\t\tfor (var t = 0; t < self.colConditions.length; t++) {\r\n\t\t\t\t\t\tif (self.colConditions[t] < index) {\r\n\t\t\t\t\t\t\ttempColConsition.push(self.colConditions[t])\r\n\t\t\t\t\t\t} else if (self.colConditions[t] == index) {\r\n\t\t\t\t\t\t\ttempColConsition.push(index)\r\n\t\t\t\t\t\t\ttempColConsition.push(index + 1)\r\n\t\t\t\t\t\t\texiste = true\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (!existe) {\r\n\t\t\t\t\t\t\t\ttempColConsition.push(index)\r\n\t\t\t\t\t\t\t\texiste = true\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\ttempColConsition.push(self.colConditions[t] + 1)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!existe) {\r\n\t\t\t\t\t\ttempColConsition.push(index)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tself.colConditions = []\r\n\t\t\t\t\tself.colConditions = tempColConsition\r\n\r\n\r\n\r\n\r\n\t\t\t\t\tvar tempFilConsition = [];\r\n\t\t\t\t\tfor (var t = 0; t < self.filterIndexes.length; t++) {\r\n\t\t\t\t\t\tif (self.filterIndexes[t] >= index) {\r\n\t\t\t\t\t\t\ttempFilConsition.push(self.filterIndexes[t] + 1)\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\ttempFilConsition.push(self.filterIndexes[t])\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tself.filterIndexes = []\r\n\t\t\t\t\tself.filterIndexes = tempFilConsition\r\n\t\t\t\t} else if (previousPosition == \"fil\") {\r\n\r\n\t\t\t\t\tvar tempRowConsition = [];\r\n\t\t\t\t\tfor (var t = 0; t < self.rowConditions.length; t++) {\r\n\t\t\t\t\t\tif (self.rowConditions[t] >= index) {\r\n\t\t\t\t\t\t\ttempRowConsition.push(self.rowConditions[t] + 1)\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\ttempRowConsition.push(self.rowConditions[t])\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tself.rowConditions = []\r\n\t\t\t\t\tself.rowConditions = tempRowConsition\r\n\r\n\t\t\t\t\tself.dataColumnIndex = self.dataColumnIndex + 1\r\n\r\n\r\n\t\t\t\t\tvar tempColConsition = [];\r\n\t\t\t\t\tfor (var t = 0; t < self.colConditions.length; t++) {\r\n\t\t\t\t\t\tif (self.colConditions[t] >= index) {\r\n\t\t\t\t\t\t\ttempColConsition.push(self.colConditions[t] + 1)\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\ttempColConsition.push(self.colConditions[t])\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tself.colConditions = []\r\n\t\t\t\t\tself.colConditions = tempColConsition\r\n\r\n\r\n\t\t\t\t\tvar tempFilConsition = [];\r\n\t\t\t\t\tvar existe = (self.filterIndexes.indexOf(index) > -1)\r\n\t\t\t\t\tfor (var t = 0; t < self.filterIndexes.length; t++) {\r\n\t\t\t\t\t\tif (self.filterIndexes[t] < index) {\r\n\t\t\t\t\t\t\ttempFilConsition.push(self.filterIndexes[t])\r\n\t\t\t\t\t\t} else if (self.filterIndexes[t] == index) {\r\n\t\t\t\t\t\t\ttempFilConsition.push(index)\r\n\t\t\t\t\t\t\ttempFilConsition.push(index + 1)\r\n\t\t\t\t\t\t\texiste = true\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (!existe) {\r\n\t\t\t\t\t\t\t\ttempFilConsition.push(index)\r\n\t\t\t\t\t\t\t\texiste = true\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\ttempFilConsition.push(self.filterIndexes[t] + 1)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!existe) {\r\n\t\t\t\t\t\ttempFilConsition.push(index)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tself.filterIndexes = []\r\n\t\t\t\t\tself.filterIndexes = tempFilConsition\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tself.initRowConditions = []\r\n\t\t\tfor(var i = 0; i<self.rowConditions.length; i++){\r\n\t\t\t\tself.initRowConditions.push(self.rowConditions[i])\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis.goWhenHide();\r\n\t\t}\r\n\r\n\t\tthis.goWhenHide = function (clean) {\r\n\t\t\tvar hideDimension = [];\r\n\t\t\tfor (var i = 0; i < self.initMetadata.Dimensions.length; i++) {\r\n\t\t\t\tif (!self.initMetadata.Dimensions[i].Visible) {\r\n\t\t\t\t\thideDimension.push(self.initMetadata.Dimensions[i].dataField)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar hideMeasures = [];\r\n\t\t\tfor (var i = 0; i < self.initMetadata.Measures.length; i++) {\r\n\t\t\t\tif (!self.initMetadata.Measures[i].Visible) {\r\n\t\t\t\t\thideMeasures.push(self.initMetadata.Measures[i].dataField)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar stateHidden = {\r\n\t\t\t\tDataFields: self.initMetadata.DataFields,\r\n\t\t\t\tDimensions: self.initMetadata.Dimensions,\r\n\t\t\t\tMeasures: self.initMetadata.Measures,\r\n\t\t\t\tDimensionPosition: self.initMetadata.DimensionPosition,\r\n\t\t\t\tConditions: self.initMetadata.Conditions,\r\n\t\t\t\tversion: self.rememberLayoutStateVersion\r\n\t\t\t}\r\n\t\t\tself.saveHiddenState(stateHidden)\r\n\r\n\r\n\t\t\tvar result = OATParseMetadata(self.initMetadata.Metadata, hideDimension, hideMeasures, self.serverPagination)\r\n\t\t\tvar newMetadata = result[0]; self.HideDataFilds = result[2]; self.OrderFildsHidden = result[1];\r\n\r\n\t\t\tvar xmlDoc = jQuery.parseXML(newMetadata);\r\n\t\t\tmeasures = xmlDoc.getElementsByTagName(\"OLAPMeasure\");\r\n\t\t\tself.columns = xmlDoc.getElementsByTagName(\"OLAPDimension\");\r\n\r\n\t\t\tvar result = OATGetColumnsAndMeasureMeatadata(self.columns, measures, self.formulaInfo, self.OrderFildsHidden)\r\n\t\t\tself.headerRow = result[0];\r\n\t\t\tself.formulaInfo.measureFormula = result[2];\r\n\t\t\tself.conditionalFormats = result[3];\r\n\t\t\tself.conditionalFormatsColumns = result[4];\r\n\r\n\t\t\tvar orderFilds = result[1];\r\n\r\n\t\t\r\n\r\n\t\t\tif (measures.length > 0) {\r\n\t\t\t\tself.dataColumnIndex = self.headerRow.length - 1;\r\n\t\t\t}\r\n\r\n\r\n\r\n\t\t\t\tself.conditions = [];\r\n\t\t\t\tfor (var i = 0; i < self.headerRow.length; i++) {\r\n\t\t\t\t\tself.initCondition(i);\r\n\t\t\t\t\t//add info for server paging porpouse\r\n\t\t\t\t\tif (self.conditions[i] && self.columns[i]) {\r\n\t\t\t\t\t\tself.conditions[i].dataField = self.columns[i].getAttribute(\"dataField\")\r\n\t\t\t\t\t\tself.conditions[i].state = \"all\"\r\n\t\t\t\t\t\tself.conditions[i].defaultAction = \"Include\"\r\n\t\t\t\t\t\tself.conditions[i].visibles = []\r\n\t\t\t\t\t\tself.conditions[i].searchInfo = { previousPage: 0, totalPages: 0, filteredText: \"\", values: [] }\r\n\t\t\t\t\t}\r\n\t\t\t\t\tself.applyCustomFilters(i);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor (var i = 0; i < self.columns.length; i++) {\r\n\t\t\t\t\tvar dF = self.columns[i].getAttribute(\"dataField\")\r\n\t\t\t\t\tvar index = self.initMetadata.DataFields.indexOf(dF);\r\n\t\t\t\t\tif (self.initMetadata.Conditions[index] != \"\") {\r\n\t\t\t\t\t\tself.initMetadata.Conditions[index].dataRowPosition = self.conditions[i].dataRowPosition\r\n\t\t\t\t\t\tself.conditions[i] = self.initMetadata.Conditions[index];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tself.cleanGridCache();\r\n\r\n\t\t\t\tself.pageData.AxisInfo = self.createAxisInfo();\r\n\r\n\t\t\t\tvar ParmAxisInfo = self.createNewAxisInfo();\r\n\t\t\t\t\r\n\t\t\t\tself.pageData.DataInfo = self.createDataInfo()\r\n\t\t\t\t\r\n\t\t\t\tvar ParmDataInfo = self.createNewDataInfo();\r\n\t\t\t\t\r\n\t\t\t\tself.lastCallToQueryViewer = \"hiddenDimension\"\r\n\t\t\t\t\r\n\t\t\t\tself.requestPageDataForPivotTable(1, self.rowsPerPage, true, ParmAxisInfo, ParmDataInfo, self.pageData.FilterInfo, self.pageData.CollapseInfo, true);\r\n\r\n\t\t\t\t\r\n\t\t\t\t/*self.QueryViewerCollection[self.IdForQueryViewerCollection].getPageDataForPivotTable((function (resXML) {\r\n\t\t\t\t\tif (!qv.util.anyError(resXML) || self.QueryViewerCollection[self.IdForQueryViewerCollection].debugServices) {\r\n\t\t\t\t\t\tself.pageData = OATGetNewDataFromXMLForPivot(resXML, self.pageData, self.ShowMeasuresAsRows);\r\n\t\t\t\t\t\tself.goWhenServerPagination(false, false);\r\n\t\t\t\t\t\tqv.util.hideActivityIndicator(self.QueryViewerCollection[self.IdForQueryViewerCollection]);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvar errMsg = qv.util.getErrorFromText(resXML);\r\n\t\t\t\t\t\tqv.util.renderError(self.QueryViewerCollection[self.IdForQueryViewerCollection], errMsg);\r\n\t\t\t\t\t}\r\n\t\t\t\t}).closure(this), [1, self.rowsPerPage, true, ParmAxisInfo, ParmDataInfo, self.pageData.FilterInfo, self.pageData.CollapseInfo, true]);*/\r\n\r\n\t\t\t\tif (clean) {\r\n\t\t\t\t\tself.initValueRead(self, 0);\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tfor (var i = 0; i < self.columns.length; i++) {\r\n\t\t\t\t\t\tif (self.conditions[i].totalPages == undefined) {\r\n\t\t\t\t\t\t\t//load values\r\n\t\t\t\t\t\t\tvar cantItems = 10;\r\n\t\t\t\t\t\t\tif ((self.QueryViewerCollection[self.IdForQueryViewerCollection].AutoRefreshGroup != \"\")) {\r\n\t\t\t\t\t\t\t\tcantItems = 0;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tvar columnNumber = i;\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tself.lastRequestAttributeValues = \"hiddenDimension\"\r\n\t\t\t\t\t\t\tself.lastRequestAttributeColumnNumber = columnNumber\r\n\t\t\t\t\r\n\t\t\t\t\t\t\tself.requestAttributeValues(self.columns[columnNumber].getAttribute(\"dataField\"), 1, cantItems, \"\")\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t/*self.QueryViewerCollection[self.IdForQueryViewerCollection].getAttributeValues((function (resJSON) {\r\n\t\t\t\t\t\t\t\tvar data = JSON.parse(resJSON);\r\n\r\n\t\t\t\t\t\t\t\tself.conditions[columnNumber].previousPage = data.PageNumber\r\n\t\t\t\t\t\t\t\tself.conditions[columnNumber].totalPages = data.PagesCount\r\n\t\t\t\t\t\t\t\tself.conditions[columnNumber].blocked = false\r\n\t\t\t\t\t\t\t\t//null value?\r\n\t\t\t\t\t\t\t\tif (data.Null) {\r\n\t\t\t\t\t\t\t\t\tself.conditions[columnNumber].hasNull = true;\r\n\t\t\t\t\t\t\t\t\tif (self.conditions[columnNumber].distinctValues.indexOf(\"#NuN#\") == -1) {\r\n\t\t\t\t\t\t\t\t\t\tself.conditions[columnNumber].distinctValues.push(\"#NuN#\")\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tvar nullIncluded = true;\r\n\r\n\t\t\t\t\t\t\t\t\tif (!self.conditions[columnNumber].NullIncluded) {\r\n\t\t\t\t\t\t\t\t\t\tnullIncluded = false;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tif ((nullIncluded) && (self.conditions[columnNumber].visibles.indexOf(\"#NuN#\") == -1)) {\r\n\t\t\t\t\t\t\t\t\t\tself.conditions[columnNumber].visibles.push(\"#NuN#\");\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tself.conditions[columnNumber].hasNull = false;\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\tvar includeLists = [];\r\n\t\t\t\t\t\t\t\tfor (var i = 0; i < data.NotNullValues.length; i++) {\r\n\t\t\t\t\t\t\t\t\tvar value = data.NotNullValues[i]\r\n\t\t\t\t\t\t\t\t\tvar include = false;\r\n\t\t\t\t\t\t\t\t\tif ((self.conditions[columnNumber].state == \"none\") &&\r\n\t\t\t\t\t\t\t\t\t\t(self.UserFilterValues.length > 0) && (self.UserFilterValues[columnNumber] != undefined)\r\n\t\t\t\t\t\t\t\t\t\t&& (self.UserFilterValues[columnNumber].length > 0) && (self.UserFilterValues[columnNumber].indexOf(value.trimpivot()) != -1)) {\r\n\t\t\t\t\t\t\t\t\t\tinclude = true;\r\n\t\t\t\t\t\t\t\t\t\tincludeLists.push(value)\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\tif (self.conditions[columnNumber].distinctValues.indexOf(value) == -1) {\r\n\t\t\t\t\t\t\t\t\t\tself.conditions[columnNumber].distinctValues.push(value)\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tif ((self.conditions[columnNumber].state == \"all\")\r\n\t\t\t\t\t\t\t\t\t\t&& (self.conditions[columnNumber].visibles.indexOf(value) == -1)) {\r\n\t\t\t\t\t\t\t\t\t\tself.conditions[columnNumber].visibles.push(value)\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tif ((self.conditions[columnNumber].state == \"none\")\r\n\t\t\t\t\t\t\t\t\t\t&& (self.conditions[columnNumber].blackList.indexOf(value) == -1)\r\n\t\t\t\t\t\t\t\t\t\t&& (!include)) {\r\n\t\t\t\t\t\t\t\t\t\tself.conditions[columnNumber].blackList.push(value)\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\tif ((self.UserExpandValues.length > 0)) {//collapsed values\r\n\t\t\t\t\t\t\t\t\t\tif (self.UserExpandValues[columnNumber] != undefined) {\r\n\t\t\t\t\t\t\t\t\t\t\tif ((self.UserExpandValues[columnNumber][0] == \"#ALLCOLLAPSE#\") ||\r\n\t\t\t\t\t\t\t\t\t\t\t\t(self.UserExpandValues[columnNumber].indexOf(value.trimpivot()) == -1)) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tself.conditions[columnNumber].collapsedValues.push(value);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\tfor (var i = 0; i < includeLists.length; i++) {\r\n\t\t\t\t\t\t\t\t\tself.createFilterInfo({ op: \"pop\", values: includeLists[i], dim: columnNumber }, true);\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\r\n\r\n\t\t\t\t\t\t\t}).closure(this), [self.columns[columnNumber].getAttribute(\"dataField\"), 1, cantItems, \"\"]);*/\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\r\n\t\t}\r\n\r\n\t\t\r\n\r\n\t\tthis.canBeConsiderNoNew = function (row, dataRows, helperList) {\r\n\t\t\tif (self.colConditions.length > 0) {\r\n\t\t\t\tvar notNew = false;\r\n\t\t\t\tfor (var i = 0; i < dataRows.length; i++) {\r\n\t\t\t\t\tvar same = true;\r\n\t\t\t\t\tfor (var j = 0; j < self.rowConditions.length; j++) {\r\n\t\t\t\t\t\tif (dataRows[i][self.rowConditions[j]] != row[self.rowConditions[j]]) {\r\n\t\t\t\t\t\t\tsame = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (same == true) {\r\n\t\t\t\t\t\tnotNew = true;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (self.filterIndexes.length > 0)//si hay dimensiones en los filtros superiores, hay filas que pueden colapsarse\r\n\t\t\t{\r\n\t\t\t\tvar notNew = false;\r\n\r\n\t\t\t\tfor (var i = 0; i < helperList.length; i++) {\r\n\t\t\t\t\tvar same = true;\r\n\t\t\t\t\tfor (var j = 0; j < self.rowConditions.length - measures.length + 1; j++) {\r\n\r\n\t\t\t\t\t\tif (helperList[i][self.rowConditions[j]] != row[self.rowConditions[j]]) {\r\n\t\t\t\t\t\t\tsame = false;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (same == true) {\r\n\t\t\t\t\t\tnotNew = true;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (!notNew) {\r\n\t\t\t\t\thelperList.push(row);\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t}\r\n\t\t\treturn notNew;\r\n\t\t}\r\n\r\n\t\tthis.preGoWhenMoveTopFilter = function (filterIndex, initLoad) {\r\n\t\t\tif (initLoad == undefined) {\r\n\t\t\t\tfor (var i = 0; i < self.filterDiv.selects.length; i++) {\r\n\t\t\t\t\tself.filterDiv.selects[i].value = \"[all]\"\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tvar out = false;\r\n\t\t\t\tfor (var i = 0; i < self.filterDiv.selects.length; i++) {\r\n\t\t\t\t\tif (self.filterDiv.selects[i].value != \"[all]\") {\r\n\t\t\t\t\t\tout = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (out) return;\r\n\t\t\t}\r\n\t\t\tself.FilterByTopFilter = false\r\n\t\t\t//get the index of the columns values in the data records of GeneralData, less filter index\r\n\t\t\tvar dataColumns = [];\r\n\t\t\tfor (var i = 0; i < columns.length; i++) {\r\n\t\t\t\tvar pos = i;//parseInt(columns[i].attributes.dataField.nodeValue.substr(1)) -1;\r\n\t\t\t\tif (((pos) != filterIndex) && (self.filterIndexes.indexOf(pos) == -1)) {\r\n\t\t\t\t\tdataColumns.push(pos)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar dataRows = self.GeneralDataRows;\r\n\r\n\t\t\t\r\n\t\t\t\t//remove extra data rows, that have the same columns values, except for the value of the columns index\r\n\t\t\t\tvar tempDataRows = [];\r\n\t\t\t\tfor (var i = 0; i < dataRows.length; i++) {\r\n\r\n\t\t\t\t\tvar existe = false;\r\n\t\t\t\t\tvar previousRecord = 0;\r\n\t\t\t\t\tfor (var j = 0; j < tempDataRows.length; j++) {\r\n\t\t\t\t\t\tvar same = true;\r\n\t\t\t\t\t\tfor (var h = 0; h < dataColumns.length; h++) {\r\n\t\t\t\t\t\t\tif (dataRows[i][dataColumns[h]] != tempDataRows[j][dataColumns[h]]) {\r\n\r\n\t\t\t\t\t\t\t\tsame = false;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (same) {\r\n\t\t\t\t\t\t\tpreviousRecord = j;\r\n\t\t\t\t\t\t\texiste = true;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!existe) {\r\n\t\t\t\t\t\tvar newRecord = [];\r\n\t\t\t\t\t\tfor (var p = 0; p < dataRows[i].length; p++) {\r\n\t\t\t\t\t\t\tnewRecord.push([dataRows[i][p]]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ttempDataRows.push([newRecord]);\r\n\r\n\t\t\t\t\t\tfor (var t = 0; t < measures.length; t++) {\r\n\t\t\t\t\t\t\tvar pos;\r\n\t\t\t\t\t\t\tif (t < measures.length - 1) {\r\n\t\t\t\t\t\t\t\tpos = self.rowConditions[self.rowConditions.length - measures.length + 1 + t]\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tpos = self.dataColumnIndex\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif ((self.formulaInfo.measureFormula[t].hasFormula) && (self.filterIndexes.length > 0)) {\r\n\t\t\t\t\t\t\t\tvar valuesToOperate = self.getFormulaRowByDataRow(dataRows[i], t, \"\")\r\n\t\t\t\t\t\t\t\tif ((valuesToOperate != self.EmptyValue) && (valuesToOperate != \"#NuN#\")) {\r\n\t\t\t\t\t\t\t\t\tvar result = self.calculateFormulaTotal([valuesToOperate], t, \"MeasureInRows\")\r\n\t\t\t\t\t\t\t\t\tif (!isNaN(result)) {\r\n\t\t\t\t\t\t\t\t\t\tnewRecord[pos] = result.toString()\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else { //increase prevoius record value\r\n\r\n\t\t\t\t\t\t//increase the entry of the column index (the last one)\r\n\t\t\t\t\t\tif (measures.length > 0) {\r\n\t\t\t\t\t\t\tif (!self.formulaInfo.measureFormula[measures.length - 1].hasFormula) {\r\n\t\t\t\t\t\t\t\tif ((tempDataRows[previousRecord][self.dataColumnIndex] != \"#NuN#\") && (dataRows[i][self.dataColumnIndex] != \"#NuN#\")) {\r\n\t\t\t\t\t\t\t\t\ttempDataRows[previousRecord][self.dataColumnIndex] = (parseFloat(tempDataRows[previousRecord][self.dataColumnIndex]) + parseFloat(dataRows[i][self.dataColumnIndex])).toString()\r\n\t\t\t\t\t\t\t\t} else if (tempDataRows[previousRecord][self.dataColumnIndex] == \"#NuN#\") {\r\n\t\t\t\t\t\t\t\t\ttempDataRows[previousRecord][self.dataColumnIndex] = dataRows[i][self.dataColumnIndex]\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t//increase the entries of other columns\r\n\t\t\t\t\t\tfor (var t = 0; t < measures.length - 1; t++) {\r\n\t\t\t\t\t\t\tvar pos = self.rowConditions[self.rowConditions.length - measures.length + 1 + t]\r\n\t\t\t\t\t\t\tif ((self.formulaInfo.measureFormula[t].hasFormula) && (self.filterIndexes.length > 0)) {\r\n\t\t\t\t\t\t\t\t//var addedValues = self.getFormulaRowByDataRow(dataRows[i], t, \"\")\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\ttempDataRows[previousRecord][pos] = (parseFloat(tempDataRows[previousRecord][pos]) + parseFloat(dataRows[i][pos])).toString()\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t//end remove extra data rows, that have the same columns values, except for the value of the columns index\r\n\r\n\t\t\t\tself.allData = tempDataRows;\r\n\t\t\t\tself.conditions = [];\r\n\t\t\t\tfor (var i = 0; i < self.headerRow.length; i++) {\r\n\t\t\t\t\tself.initCondition(i);\r\n\t\t\t\t}\r\n\t\t\t\tfor (var i = 0; i < self.headerRow.length; i++) {\r\n\t\t\t\t\tself.restoreSubtotalsAndSortLayout(i)\r\n\t\t\t\t}\r\n\t\t\t\r\n\r\n\t\t}\r\n\r\n\t\tthis.isNotFilterByTopFilter = function (row) {\r\n\t\t\tfor (var i = 0; i < self.filterIndexes.length; i++) { /* for all filters */\r\n\t\t\t\tvar fi = self.filterIndexes[i]; /* this column is important */\r\n\t\t\t\tvar s = self.filterDiv.selects[i]; /* select node */\r\n\t\t\t\tif ((s != undefined) && (s.selectedIndex && (OAT.$v(s) != \"[all]\") && (OAT.$v(s) != row[fi]))) { return false; }\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tthis.preGoWhenFilterByTopFilter = function (init) {\r\n\t\t\t\r\n\t\t\t\tself.FilterByTopFilter = true;\r\n\t\t\t\tself.allData = self.GeneralDataRows;\r\n\t\t\t\tself.conditions = [];\r\n\r\n\t\t\t\tfor (var i = 0; i < self.headerRow.length; i++) {\r\n\t\t\t\t\tself.initCondition(i);\r\n\t\t\t\t}\r\n\t\t\t\tfor (var i = 0; i < self.headerRow.length; i++) {\r\n\t\t\t\t\tself.restoreSubtotalsAndSortLayout(i)\r\n\t\t\t\t}\r\n\t\t\t \r\n\t\t}\r\n\r\n\t\t\r\n\t\r\n\t\tthis.gridCache = []\r\n\r\n\t\tthis.cleanGridCache = function () {\r\n\t\t\tself.gridCache = [];\r\n\t\t}\r\n\r\n\t\tthis.addPageToCache = function (pageNum, data) {\r\n\t\t\tself.gridCache.push({ page: pageNum, data: data });\r\n\t\t}\r\n\r\n\t\tthis.getPageDataFromCache = function (pageNum) {\r\n\t\t\tfor (var it = 0; it < self.gridCache.length; it++) {\r\n\t\t\t\tif (self.gridCache[it].page == pageNum) {\r\n\t\t\t\t\treturn self.gridCache[it].data;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\t\r\n\t\tthis.fireOnPageChange = function(move){\r\n\t\t\tsetTimeout( function() {\r\n\t\t\t\tvar paramobj = {\"QueryviewerId\": self.IdForQueryViewerCollection, \"Navigation\": move};\r\n\t\t\t\tvar evt = document.createEvent(\"Events\")\r\n\t\t\t\tevt.initEvent(\"PivotTableOnPageChangeEvent\", true, true);\r\n\t\t\t\tevt.parameter = paramobj;\r\n\t\t\t\tdocument.dispatchEvent(evt);\r\n\t\t\t}, 0)\r\n\t\t}\r\n\t\t\r\n\t\tthis.goWhenServerPagination = function (load, autorefreshflag) {\r\n\r\n\t\t\tif (!self.getPageDataFromCache(self.pageData.ServerPageNumber)) { //add page data to cache\r\n\t\t\t\tself.addPageToCache(self.pageData.ServerPageNumber, self.pageData.rows)\r\n\t\t\t}\r\n\t\t\t//call navigational events\r\n\t\t\tif (self.pageData.ServerPageNumber != self.pageData.PreviousPageNumber) {\r\n\t\t\t\tself.QueryViewerCollection[self.IdForQueryViewerCollection].CurrentPage = self.pageData.ServerPageNumber;\r\n\t\t\t\tif (self.pageData.ServerPageNumber == 1) {\r\n\t\t\t\t\tif (typeof (self.QueryViewerCollection[self.IdForQueryViewerCollection].OnFirstPage) == 'function') \r\n\t\t\t\t\t\t//self.QueryViewerCollection[self.IdForQueryViewerCollection].OnFirstPage()\r\n\t\t\t\t\t\tself.fireOnPageChange(\"OnFirstPage\")\r\n\t\t\t\t} else if (self.pageData.ServerPageNumber == self.pageData.ServerPageCount) {\r\n\t\t\t\t\tif (typeof (self.QueryViewerCollection[self.IdForQueryViewerCollection].OnLastPage) == 'function') \r\n\t\t\t\t\t\tself.fireOnPageChange(\"OnLastPage\")\r\n\t\t\t\t\t\t//self.QueryViewerCollection[self.IdForQueryViewerCollection].OnLastPage()\r\n\t\t\t\t} else if (self.pageData.ServerPageNumber < self.pageData.PreviousPageNumber) {\r\n\t\t\t\t\tif (typeof (self.QueryViewerCollection[self.IdForQueryViewerCollection].OnPreviousPage) == 'function') \r\n\t\t\t\t\t\t//self.QueryViewerCollection[self.IdForQueryViewerCollection].OnPreviousPage()\r\n\t\t\t\t\t\tself.fireOnPageChange(\"OnPreviousPage\")\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (typeof (self.QueryViewerCollection[self.IdForQueryViewerCollection].OnNextPage) == 'function') \r\n\t\t\t\t\t\t//self.QueryViewerCollection[self.IdForQueryViewerCollection].OnNextPage()\r\n\t\t\t\t\t\tself.fireOnPageChange(\"OnNextPage\")\r\n\t\t\t\t}\r\n\t\t\t\tself.pageData.PreviousPageNumber = self.pageData.ServerPageNumber\r\n\t\t\t}\r\n\r\n\r\n\t\t\tif (!load) {\r\n\t\t\t\tself.gd.clearSources();\r\n\t\t\t\tself.gd.clearTargets();\r\n\t\t\t\tself.drawFilters();\r\n\t\t\t\tif (self.QueryViewerCollection[self.IdForQueryViewerCollection].AutoRefreshGroup != \"\") {\r\n\t\t\t\t\tif (((autorefreshflag === undefined) || (autorefreshflag === null) || (!autorefreshflag))) {\r\n\t\t\t\t\t\tif ((!self.firstTime) || ((self.getState()) && (self.getState().version == self.rememberLayoutStateVersion))) {\r\n\t\t\t\t\t\t\t//something change, call QQ\r\n\t\t\t\t\t\t\tvar meta;\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tmeta = self.getMetadataXML();\r\n\t\t\t\t\t\t\t\tmeta = meta.replace(/\\&amp;/g, \"&\");\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t//\tmeta = qv.pivot.GetRuntimeMetadata(meta, listennings.RealType)\r\n\t\t\t\t\t\t\t//var listennings = self.QueryViewerCollection[self.IdForQueryViewerCollection];\r\n\t\t\t\t\t\t\t//if ((listennings != \"\") && (listennings != null) && (listennings != undefined)) {\r\n\t\t\t\t\t\t\t\t//qv.util.autorefresh.UpdateLayoutSameGroup(listennings, qv.pivot.GetRuntimeMetadata(meta, listennings.RealType), true);\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tsetTimeout( function() {\r\n\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tvar paramobj = {  \"QueryviewerId\": self.IdForQueryViewerCollection, \"Metadata\": meta};\r\n\t\t\t\t\t\t\t\t\tvar evt = document.createEvent(\"Events\")\r\n\t\t\t\t\t\t\t\t\tevt.initEvent(\"RequestUpdateLayoutSameGroup\", true, true);\r\n\t\t\t\t\t\t\t\t\tevt.parameter = paramobj;\r\n\t\t\t\t\t\t\t\t\tdocument.dispatchEvent(evt);\r\n\t\t\t\t\r\n\t\t\t\t\t\t\t\t}, 50)\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t//}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/* get filtered selected values*/\r\n\t\t\tvar filterDivSelects = new Array();\r\n\t\t\tfor (var fiv = 0; fiv < self.filterDiv.selects.length; fiv++) {\r\n\t\t\t\tfilterDivSelects[fiv] = self.filterDiv.selects[fiv].value;\r\n\t\t\t}\r\n\r\n\t\t\tif (!self.firstTime) {\r\n\r\n\t\t\t\tvar state = {\r\n\t\t\t\t\tquery: self.query,\r\n\t\t\t\t\tconditions: self.conditions,\r\n\t\t\t\t\tcolConditions: self.colConditions,\r\n\t\t\t\t\trowConditions: self.rowConditions,\r\n\t\t\t\t\tfilterIndexes: self.filterIndexes,\r\n\t\t\t\t\tfilterDivSelects: filterDivSelects,\r\n\t\t\t\t\trowsPerPage: self.rowsPerPage,\r\n\t\t\t\t\tAxisInfo: self.pageData.AxisInfo,\r\n\t\t\t\t\tFilterInfo: self.pageData.FilterInfo,\r\n\t\t\t\t\tversion: self.rememberLayoutStateVersion,\r\n\t\t\t\t\tDataInfo: self.pageData.DataInfo,\r\n\t\t\t\t\tNewAxisInfo: self.createNewAxisInfo(),\r\n\t\t\t\t\tNewDataInfo: self.createNewDataInfo()\r\n\t\t\t\t};\r\n\r\n\r\n\t\t\t\tif ((!self.deleteState)) {\r\n\t\t\t\t\tself.saveState(state);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tself.cleanState();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tself.readState = true;\r\n\t\t\t} else {\r\n\t\t\t\tself.firstTime = false;\r\n\t\t\t}\r\n\r\n\t\t\tself.drawTableWhenServerPagination();\r\n\r\n\t\t\t//add paging functionality\r\n\t\t\tvar actual_rowsPerPage = 0;\r\n\r\n\t\t\tif ((self.pageData.ServerPageCount > 0) && ((self.pageData.ServerPageCount > 1) || (self.pageData.rows.length > 10))\r\n\t\t\t\t&& (self.rowsPerPage > 0)) {\r\n\t\t\t\t//if pivot has less than 10 rows => no need to paging\r\n\t\t\t\tvar options = {\r\n\t\t\t\t\tcurrPage: self.pageData.ServerPageNumber,\r\n\t\t\t\t\tignoreRows: jQuery('tbody tr[title_row=true]', jQuery(\"#\" + this.controlName + \"_\" + self.query)),\r\n\t\t\t\t\toptionsForRows: OAT.AddItemToList( [10, 15, 20], initMetadata.RowsPerPage ),\r\n\t\t\t\t\trowsPerPage: self.rowsPerPage,\r\n\t\t\t\t\ttopNav: false,\r\n\t\t\t\t\tcontrolName: this.controlName + \"_\" + self.query,\r\n\t\t\t\t\tcantPages: self.pageData.ServerPageCount,\r\n\t\t\t\t\tcontrolUcId: UcId,\r\n\t\t\t\t\ttranslations: self.translations,\r\n\t\t\t\t\tcontrol: self\r\n\t\t\t\t}\r\n\r\n\t\t\t\tOAT.partialTablePagination(jQuery(\"#\" + self.controlName + \"_\" + self.query), options);\r\n\r\n\t\t\t\tjQuery(\"#\" + this.controlName + \"_\" + self.query).css(\"margin-bottom\", \"0px\");\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ((jQuery(\"#\" + this.controlName + \"_\" + self.query).length > 0) && (!autoResize)) {\r\n\t\t\t\tvar clientWdt = jQuery(\"#\" + this.containerName)[0].clientWidth\r\n\t\t\t\tjQuery(\"#\" + this.controlName + \"_\" + self.query).css({ width: (clientWdt - 4) + \"px\" })\r\n\t\t\t}\r\n\r\n\t\t\ttry {\r\n\t\t\t\tvar wd = jQuery(\"#\" + this.controlName + \"_\" + self.query)[0].offsetWidth - 4;\r\n\t\t\t\tif (jQuery(\"#MAINFORM\")[0].className.indexOf(\"form-horizontal\") > -1) {\r\n\t\t\t\t\twd = wd + 4;\r\n\t\t\t\t}\r\n\t\t\t} catch (Error) {\r\n\t\t\t}\r\n\r\n\r\n\r\n\t\t\ttry {\r\n\t\t\t\tvar wd2 = jQuery(\"#\" + this.controlName + \"_\" + self.query)[0].offsetWidth - 1;\r\n\t\t\t\tjQuery(\"#\" + UcId + \"_\" + self.query + \"_title_div\").css({ width: wd + \"px\" }); \r\n\t\t\t\tjQuery(\"#\" + UcId + \"_\" + self.query + \"_pivot_page\").css({ width: wd + \"px\" }); \r\n\t\t\t\tjQuery(\"#\" + this.controlName + \"_\" + self.query + \"_tablePagination\").css({ width: wd2 + \"px\" });\r\n\r\n\t\t\t\tif ((jQuery(\"#\" + this.controlName + \"_\" + self.query + \"_tablePagination_paginater\").length > 0) && (jQuery(\"#\" + this.controlName + \"_\" + self.query + \"_tablePagination\")[0].getBoundingClientRect().bottom < jQuery(\"#\" + this.controlName + \"_\" + self.query + \"_tablePagination_paginater\")[0].getBoundingClientRect().bottom)) {\r\n\r\n\t\t\t\t\tjQuery(\"#\" + this.controlName + \"_\" + self.query + \"_tablePagination\")\r\n\r\n\t\t\t\t}\r\n\t\t\t} catch (Error) {\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t//draw selected node\r\n\t\t\tself.RedrawSelectedNode();\r\n\t\t\t\r\n\t\t\tsetInterval(function () {\r\n\t\t\t\t//verificar que sea pivot\r\n\t\t\t\tif ((jQuery(\"#\" + self.controlName + \"_\" + self.query).length > 0) && (jQuery(\"#\" + self.controlName + \"_\" + self.query)[0].getAttribute(\"class\") === \"pivot_table\")) {\r\n\t\t\t\t\tif ((jQuery(\"#\" + self.controlName + \"_\" + self.query + \"_tablePagination_paginater\").length > 0) && (jQuery(\"#\" + self.controlName + \"_\" + self.query + \"_tablePagination\")[0].getBoundingClientRect().bottom < jQuery(\"#\" + self.controlName + \"_\" + self.query + \"_tablePagination_paginater\")[0].getBoundingClientRect().bottom)) {\r\n\t\t\t\t\t\tjQuery(\"#\" + this.controlName + \"_\" + self.query + \"_tablePagination\")\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\t150)\r\n\r\n\t\t\t\r\n\r\n\r\n\t\t}\r\n\r\n\t\tthis.getDataForPivot = function (UcId, pageNumber, rowsPerPage, recalculateCantPages, AxisChangeDataField, DataFieldFilter,\r\n\t\t\tExportTo, restoreDefaultView, layoutForCollapseExpand, notAutorefresh) {\r\n\t\t\tif ((recalculateCantPages)) {\r\n\t\t\t\tself.cleanGridCache();\r\n\t\t\t}\r\n\r\n\t\t\tif ((recalculateCantPages) && (rowsPerPage > -1)) {\r\n\t\t\t\tself.rowsPerPage = rowsPerPage;\r\n\t\t\t}\r\n\t\t\tself.pageData.PreviousPageNumber = self.pageData.ServerPageNumber\r\n\t\t\tif ((!recalculateCantPages) && (self.getPageDataFromCache(pageNumber))) {\r\n\t\t\t\tself.pageData.ServerPageNumber = pageNumber\r\n\t\t\t\tself.pageData.rows = self.getPageDataFromCache(self.pageData.ServerPageNumber)\r\n\t\t\t\tself.preGoWhenServerPagination(true);\r\n\t\t\t} else {\r\n\t\t\t\t//re-create axis info\r\n\t\t\t\tif (AxisChangeDataField != \"\") {\r\n\t\t\t\t\tself.pageData.AxisInfo = self.createAxisInfo(AxisChangeDataField);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tif (DataFieldFilter != \"\") {\r\n\t\t\t\t\tself.createFilterInfo(DataFieldFilter);\r\n\t\t\t\t}\r\n\t\t\t\tself.pageData.CollapseInfo = self.CreateExpandCollapseInfo(\"\");\r\n\r\n\t\t\t\tself.ExportTo = \"\"\r\n\t\t\t\tif (rowsPerPage < 0) { //for export show all pivot\r\n\t\t\t\t\trowsPerPage = 0;\r\n\t\t\t\t\tself.ExportTo = ExportTo\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar layoutChange = true;\r\n\t\t\t\tif ((pageNumber > 1) || (!recalculateCantPages)) {\r\n\t\t\t\t\tlayoutChange = false;\r\n\t\t\t\t}\r\n\t\t\t\tif ((layoutForCollapseExpand != undefined) && (layoutForCollapseExpand != \"\")) {\r\n\t\t\t\t\tlayoutChange = true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tself.pageData.AxisInfo = self.createAxisInfo(AxisChangeDataField);\r\n\t\t\t\tvar ParmAxisInfo =  self.createNewAxisInfo(AxisChangeDataField);\r\n\t\t\t\t\r\n\t\t\t\tself.pageData.DataInfo = self.createDataInfo();\r\n\t\t\t\tvar ParmDataInfo = self.createNewDataInfo();\r\n\t\t\t\t\r\n\t\t\t\tself.lastCallToQueryViewer = \"DataForPivot\"\r\n\t\t\t\tself.lastNotAutorefreshIndicator = notAutorefresh\r\n\t\t\t\t\r\n\t\t\t\tself.requestPageDataForPivotTable(pageNumber, rowsPerPage, recalculateCantPages, ParmAxisInfo, ParmDataInfo, self.pageData.FilterInfo, self.pageData.CollapseInfo, layoutChange);\r\n\r\n\t\t\t\t\r\n\t\t\t\t/*self.QueryViewerCollection[self.IdForQueryViewerCollection].getPageDataForPivotTable((function (resXML) {\r\n\t\t\t\t\tself.pageData = OATGetNewDataFromXMLForPivot(resXML, self.pageData, self.ShowMeasuresAsRows, self.ExportTo);\r\n\t\t\t\t\tself.preGoWhenServerPagination(notAutorefresh);\r\n\t\t\t\t\tif (self.ExportTo != \"\") {\r\n\t\t\t\t\t\tvar FileName = self.query\r\n\t\t\t\t\t\tif (FileName == \"\") {\r\n\t\t\t\t\t\t\tFileName = \"Query\"\r\n\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\tFileName = self.controlName.split(\"_\")[0]\r\n\t\t\t\t\t\t\t} catch (error) { }\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (self.ExportTo == \"HTML\") {\r\n\t\t\t\t\t\t\tself.ExportToHTMLWhenServerPagination()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (self.ExportTo == \"PDF\") {\r\n\t\t\t\t\t\t\tOAT.GeneratePDFOutput(self, FileName)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (self.ExportTo == \"XLS\") {\r\n\t\t\t\t\t\t\tself.ExportToExcel(FileName);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (self.ExportTo == \"XML\") {\r\n\t\t\t\t\t\t\tself.ExportToXMLWhenServerPagination();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (self.ExportTo == \"XLSX\") {\r\n\t\t\t\t\t\t\tself.ExportToXLSXWhenServerPagination();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tself.cleanGridCache();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tqv.util.hideActivityIndicator(self.QueryViewerCollection[self.IdForQueryViewerCollection]);\r\n\t\t\t\t}).closure(this), [pageNumber, rowsPerPage, recalculateCantPages, ParmAxisInfo, ParmDataInfo,\r\n\t\t\t\t\t\tself.pageData.FilterInfo, self.pageData.CollapseInfo, layoutChange]);*/\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tthis.CreateExpandCollapseInfo = function (dataField) {\r\n\t\t\tvar CollapseInfo = [];\r\n\t\t\tvar obj = {};\r\n\t\t\tfor (var i = 0; i < self.columns.length; i++) {\r\n\t\t\t\tvar pos = -1;\r\n\t\t\t\tfor (var j = 0; j < self.conditions.length; j++) {\r\n\t\t\t\t\tif (self.conditions[j].dataField == self.columns[i].getAttribute(\"dataField\")) {\r\n\t\t\t\t\t\tpos = j;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (self.conditions[pos].collapsedValues.length) {\r\n\t\t\t\t\tvar notNullVal = {\r\n\t\t\t\t\t\tExpanded: [],\r\n\t\t\t\t\t\tCollapsed: self.conditions[pos].collapsedValues,\r\n\t\t\t\t\t\tDefaultAction: \"Expand\"\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar obj = {\r\n\t\t\t\t\t\tDataField: self.conditions[pos].dataField,\r\n\t\t\t\t\t\tNullExpanded: true,\r\n\t\t\t\t\t\tNotNullValues: notNullVal\r\n\t\t\t\t\t}\r\n\t\t\t\t\tCollapseInfo.push(obj);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn CollapseInfo\r\n\t\t}\r\n\r\n\t\tthis.createAxisInfo = function (dataField) {\r\n\t\t\tvar AxisInfo = []; var hiddenPos = 1;\r\n\t\t\tfor (var i = 0; i < self.initMetadata.Dimensions.length; i++) {\r\n\t\t\t\tvar pos = -1;\r\n\t\t\t\t\r\n\t\t\t\tvar hidden = !self.initMetadata.Dimensions[i].Visible;\r\n\t\t\t\tvar type = \"Rows\"; var position = 1;\r\n\t\t\t\tvar Order = \"Ascending\";\r\n\t\t\t\tvar Subtotal = true;\r\n\t\t\t\tif (!hidden) {\r\n\r\n\r\n\t\t\t\t\tfor (var j = 0; j < self.conditions.length; j++) {\r\n\t\t\t\t\t\tif (self.conditions[j].dataField == self.initMetadata.Dimensions[i].dataField) {\r\n\t\t\t\t\t\t\tpos = j;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tOrder = (self.conditions[pos].sort == 1) ? \"Ascending\" : \"Descending\"\r\n\t\t\t\t\tSubtotal = ((self.conditions[pos].subtotals == 1) || (self.conditions[pos].subtotals)) ? true : false\r\n\r\n\t\t\t\t\tif (self.rowConditions.indexOf(pos) > -1) {\r\n\t\t\t\t\t\tposition = self.rowConditions.indexOf(pos) + 1\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (self.colConditions.indexOf(pos) > -1) {\r\n\t\t\t\t\t\ttype = \"Columns\";\r\n\t\t\t\t\t\tposition = self.colConditions.indexOf(pos) + 1\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (self.filterIndexes.indexOf(pos) > -1) {\r\n\t\t\t\t\t\ttype = \"Pages\";\r\n\t\t\t\t\t\tposition = self.filterIndexes.indexOf(pos) + 1\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttype = \"Hidden\"\r\n\t\t\t\t\tposition = hiddenPos\r\n\t\t\t\t\thiddenPos = hiddenPos + 1\r\n\t\t\t\t}\r\n\t\t\t\tvar obj = {\r\n\t\t\t\t\tDataField: self.initMetadata.Dimensions[i].dataField,\r\n\t\t\t\t\tOrder: Order,\r\n\t\t\t\t\tAxis: {\r\n\t\t\t\t\t\tType: type,\r\n\t\t\t\t\t\tPosition: position\r\n\t\t\t\t\t},\r\n\t\t\t\t\tSubtotals: Subtotal\r\n\t\t\t\t}\r\n\t\t\t\tAxisInfo.push(obj)\r\n\t\t\t}\r\n\t\t\treturn AxisInfo;\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\tthis.createNewAxisInfo = function (dataField) {\r\n\t\t\tvar AxisInfo = []; var hiddenPos = 1;\r\n\t\t\tvar rowPos = 0; var cantRowHidden = 0;\r\n\t\t\tvar colPos = 0; var cantColHidden = 0;\r\n\t\t\tvar pagePos = 0; var cantPageHidden = 0;\r\n\t\t\tfor (var i = 0; i < self.initMetadata.Dimensions.length; i++) {\r\n\t\t\t\tvar pos = -1;\r\n\t\t\t\t//if hidden?\r\n\t\t\t\tvar hidden = !self.initMetadata.Dimensions[i].Visible;\r\n\t\t\t\t/*for (var h=0; h < self.initMetadata.Dimensions.length; h++){\r\n\t\t\t\t\tif (self.columns[i].getAttribute(\"dataField\") == self.initMetadata.Dimensions[h].dataField){\r\n\t\t\t\t\t\thidden = !self.initMetadata.Dimensions[h].Visible\r\n\t\t\t\t\t}\r\n\t\t\t\t}*/\r\n\r\n\t\t\t\tvar type = \"Rows\"; var position = 1;\r\n\t\t\t\tvar Order = \"Ascending\";\r\n\t\t\t\tvar Subtotal = true;\r\n\t\t\t\tif (!hidden) {\r\n\r\n\r\n\t\t\t\t\tfor (var j = 0; j < self.conditions.length; j++) {\r\n\t\t\t\t\t\tif (self.conditions[j].dataField == self.initMetadata.Dimensions[i].dataField) {\r\n\t\t\t\t\t\t\tpos = j;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tOrder = (self.conditions[pos].sort == 1) ? \"Ascending\" : \"Descending\"\r\n\t\t\t\t\tSubtotal = ((self.conditions[pos].subtotals == 1) || (self.conditions[pos].subtotals)) ? true : false\r\n\r\n\t\t\t\t\tif (self.rowConditions.indexOf(pos) > -1) {\r\n\t\t\t\t\t\tif (self.changesrowposition) {\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tposition = self.rowConditions.indexOf(pos) + 1 + cantRowHidden\r\n\t\t\t\t\t\t\trowPos = position\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tvar posincol = self.rowConditions.indexOf(pos)\r\n\t\t\t\t\t\t\tvar cont = 0; var noterminar = true;\r\n\t\t\t\t\t\t\tfor (var iterRC = posincol+1; iterRC < self.rowConditions.length && noterminar; iterRC++) //buscar dimensiones desplazadas\r\n\t\t\t\t\t\t\t{\t\r\n\t\t\t\t\t\t\t\tcont++\r\n\t\t\t\t\t\t\t\tif (self.rowConditions[iterRC] < pos) {\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tdataFieldRC = self.conditions[self.rowConditions[iterRC]].dataField\r\n\t\t\t\t\t\t\t\t\tfor (var itAI = 0; itAI < AxisInfo.length; itAI++)\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\tif (dataFieldRC == AxisInfo[itAI].DataField) \r\n\t\t\t\t\t\t\t\t\t\t\tpositionDF = AxisInfo[itAI].Axis.Position\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tposition = positionDF - cont/*AxisInfo[self.rowConditions[iterRC]].Axis.Position - cont*/\r\n\t\t\t\t\t\t\t\t\trowPos = position\r\n\t\t\t\t\t\t\t\t\tnoterminar = false\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t/*if ((self.rowConditions.length > posincol+1) && (self.rowConditions[posincol+1] < pos)){\r\n\t\t\t\t\t\t\t\tposition = AxisInfo[self.rowConditions[posincol+1]].Axis.Position - 1\r\n\t\t\t\t\t\t\t\trowPos = position\t\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tposition = self.rowConditions.indexOf(pos) + 1 + cantRowHidden\r\n\t\t\t\t\t\t\t\trowPos = position\r\n\t\t\t\t\t\t\t}*/\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tposition = self.rowConditions.indexOf(pos) + 1 + cantRowHidden\r\n\t\t\t\t\t\t\trowPos = position\r\n\t\t\t\t\t\t} \r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (self.colConditions.indexOf(pos) > -1) {\r\n\t\t\t\t\t\ttype = \"Columns\";\r\n\t\t\t\t\t\tposition = self.colConditions.indexOf(pos) + 1 + cantColHidden\r\n\t\t\t\t\t\tcolPos = position \r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (self.filterIndexes.indexOf(pos) > -1) {\r\n\t\t\t\t\t\ttype = \"Pages\";\r\n\t\t\t\t\t\tposition = self.filterIndexes.indexOf(pos) + 1 + cantPageHidden\r\n\t\t\t\t\t\tpagePos = position\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (self.initMetadata.Dimensions[i].defaultPosition != \"hidden\"){\r\n\t\t\t\t\t\ttype = self.initMetadata.Dimensions[i].defaultPosition \r\n\t\t\t\t\t\tif (type == \"Rows\") \r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tcantRowHidden=cantRowHidden + 1\r\n\t\t\t\t\t\t\tposition = rowPos + 1\r\n\t\t\t\t\t\t\trowPos = position\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (type == \"Columns\")\r\n\t\t\t\t\t\t{ \r\n\t\t\t\t\t\t\tcantColHidden=cantColHidden + 1\r\n\t\t\t\t\t\t\tposition = colPos + 1\r\n\t\t\t\t\t\t\tcolPos = position\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (type == \"Pages\") \r\n\t\t\t\t\t\t{ \r\n\t\t\t\t\t\t\tcantPageHidden=cantPageHidden + 1\r\n\t\t\t\t\t\t\tposition = pagePos + 1\r\n\t\t\t\t\t\t\tpagePos = position\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\ttype = \"\"\r\n\t\t\t\t\t\tposition = \"\"\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\t//hiddenPos = hiddenPos + 1\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\tvar obj = {\r\n\t\t\t\t\tDataField: self.initMetadata.Dimensions[i].dataField,\r\n\t\t\t\t\tOrder: Order,\r\n\t\t\t\t\tAxis: {\r\n\t\t\t\t\t\tType: type,\r\n\t\t\t\t\t\tPosition: position\r\n\t\t\t\t\t},\r\n\t\t\t\t\tSubtotals: Subtotal,\r\n\t\t\t\t\tHidden:hidden\r\n\t\t\t\t}\r\n\t\t\t\tAxisInfo.push(obj)\r\n\t\t\t}\r\n\t\t\treturn AxisInfo;\r\n\t\t}\r\n\r\n\t\tthis.createDataInfo = function () {\r\n\t\t\tvar DataInfo = []; var hiddenPos = 1;\r\n\t\t\tvar visiblePos = 1\r\n\t\t\tfor (var h = 0; h < self.initMetadata.Measures.length; h++) {\r\n\r\n\t\t\t\t//if hidden?\r\n\t\t\t\tvar hidden = !self.initMetadata.Measures[h].Visible;\r\n\r\n\t\t\t\tvar type = self.initMetadata.Measures[h].Visible ? \"Data\" : \"Hidden\";\r\n\t\t\t\tvar position = self.initMetadata.Measures[h].Visible ? visiblePos : hiddenPos;\r\n\r\n\r\n\t\t\t\tvar obj = {\r\n\t\t\t\t\tDataField: self.initMetadata.Measures[h].dataField,\r\n\t\t\t\t\tAxis: {\r\n\t\t\t\t\t\tType: type,\r\n\t\t\t\t\t\tPosition: position\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tDataInfo.push(obj)\r\n\t\t\t\tif (self.initMetadata.Measures[h].Visible) {\r\n\t\t\t\t\tvisiblePos = visiblePos + 1\r\n\t\t\t\t} else {\r\n\t\t\t\t\thiddenPos = hiddenPos + 1\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t\treturn DataInfo;\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\tthis.createNewDataInfo = function () {\r\n\t\t\tvar DataInfo = [];\r\n\t\t\t\r\n\t\t\tfor (var h = 0; h < self.initMetadata.Measures.length; h++) {\r\n\t\t\t\tvar hidden = !self.initMetadata.Measures[h].Visible;\r\n\t\t\t\tvar obj = {\r\n\t\t\t\t\tDataField: self.initMetadata.Measures[h].dataField,\r\n\t\t\t\t\tHidden: hidden,\r\n\t\t\t\t\tPosition: h+1\r\n\t\t\t\t}\r\n\t\t\t\tDataInfo.push(obj)\r\n\t\t\t}\r\n\t\t\treturn DataInfo;\r\n\t\t}\r\n\r\n\t\tthis.createFilterInfo = function (NewFilter, isFromMetadata) {\r\n\t\t\tDataFieldFilter = self.conditions[NewFilter.dim].dataField\r\n\t\t\tif ((NewFilter.op == \"all\") || ((NewFilter.op == \"pagefilter\") && (NewFilter.values == \"[all]\"))) {\r\n\t\t\t\t//remove filter from filterInof\r\n\t\t\t\tvar pos = -1;\r\n\t\t\t\tfor (var p = 0; p < self.pageData.FilterInfo.length; p++) {\r\n\t\t\t\t\tif (DataFieldFilter == self.pageData.FilterInfo[p].DataField) { pos = p; break; }\r\n\t\t\t\t}\r\n\t\t\t\tif (pos > -1) self.pageData.FilterInfo.splice(pos, 1)\r\n\t\t\t\tself.conditions[NewFilter.dim].state = \"all\"\r\n\t\t\t\tself.conditions[NewFilter.dim].visibles = []\r\n\t\t\t\tself.conditions[NewFilter.dim].blackList = []\r\n\t\t\t\tself.conditions[NewFilter.dim].defaultAction = \"Include\"\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif (self.conditions[NewFilter.dim].state == \"none\") {\r\n\t\t\t\tself.conditions[NewFilter.dim].visibles = []\r\n\t\t\t\tfor (var u = 0; u < self.conditions[NewFilter.dim].distinctValues.length; u++) {\r\n\t\t\t\t\tif (self.conditions[NewFilter.dim].blackList.indexOf(self.conditions[NewFilter.dim].distinctValues[u]) == -1) {\r\n\t\t\t\t\t\tself.conditions[NewFilter.dim].blackList.push(self.conditions[NewFilter.dim].distinctValues[u])\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else if (self.conditions[NewFilter.dim].state == \"all\") {\r\n\t\t\t\tself.conditions[NewFilter.dim].blackList = []\r\n\t\t\t\tfor (var u = 0; u < self.conditions[NewFilter.dim].distinctValues.length; u++) {\r\n\t\t\t\t\tif (self.conditions[NewFilter.dim].visibles.indexOf(self.conditions[NewFilter.dim].distinctValues[u]) == -1) {\r\n\t\t\t\t\t\tself.conditions[NewFilter.dim].visibles.push(self.conditions[NewFilter.dim].distinctValues[u])\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar notNullValue = [];\r\n\t\t\tif (NewFilter.op == \"none\") {\r\n\t\t\t\tnotNullValue = [];\r\n\t\t\t\tself.conditions[NewFilter.dim].state = \"none\"\r\n\t\t\t\tself.conditions[NewFilter.dim].visibles = []\r\n\t\t\t\tself.conditions[NewFilter.dim].blackList = []\r\n\t\t\t\tself.conditions[NewFilter.dim].defaultAction = \"Exclude\"\r\n\t\t\t} else {\r\n\t\t\t\tif (NewFilter.op == \"push\") {\r\n\t\t\t\t\tself.conditions[NewFilter.dim].state = \"\"\r\n\t\t\t\t\tvar pos = self.conditions[NewFilter.dim].visibles.indexOf(NewFilter.values)\r\n\t\t\t\t\tif (pos > -1) self.conditions[NewFilter.dim].visibles.splice(pos, 1);\r\n\t\t\t\t\tif (self.conditions[NewFilter.dim].blackList.indexOf(NewFilter.values) == -1)\r\n\t\t\t\t\t\tself.conditions[NewFilter.dim].blackList.push(NewFilter.values)\r\n\t\t\t\t} else if (NewFilter.op == \"pop\") {\r\n\t\t\t\t\tself.conditions[NewFilter.dim].state = \"\"\r\n\t\t\t\t\tif (self.conditions[NewFilter.dim].visibles.indexOf(NewFilter.values) == -1)\r\n\t\t\t\t\t\tself.conditions[NewFilter.dim].visibles.push(NewFilter.values)\r\n\t\t\t\t\tvar pos = self.conditions[NewFilter.dim].blackList.indexOf(NewFilter.values)\r\n\t\t\t\t\tif (pos > -1) self.conditions[NewFilter.dim].blackList.splice(pos, 1);\r\n\t\t\t\t} else if (NewFilter.op == \"pagefilter\") {\r\n\t\t\t\t\tself.conditions[NewFilter.dim].state = \"\"\r\n\t\t\t\t\tself.conditions[NewFilter.dim].defaultAction = \"Exclude\"\r\n\t\t\t\t\tself.conditions[NewFilter.dim].visibles = [];\r\n\t\t\t\t\tself.conditions[NewFilter.dim].visibles.push(NewFilter.values);\r\n\t\t\t\t\tfor (var p = 0; p < self.conditions[NewFilter.dim].distinctValues.length; p++) {\r\n\t\t\t\t\t\tvar val = self.conditions[NewFilter.dim].distinctValues[p]\r\n\t\t\t\t\t\tif ((self.conditions[NewFilter.dim].blackList.indexOf(val) == -1) && (val != NewFilter.values)) {\r\n\t\t\t\t\t\t\tself.conditions[NewFilter.dim].blackList.push(val)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (NewFilter.op == \"reverse\") {\r\n\t\t\t\t\tif (self.conditions[NewFilter.dim].defaultAction == \"Include\") {\r\n\t\t\t\t\t\tself.conditions[NewFilter.dim].defaultAction = \"Exclude\"\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tself.conditions[NewFilter.dim].defaultAction = \"Include\"\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (self.conditions[NewFilter.dim].state == \"none\") {//si el estado anterior es none pasa a all\r\n\t\t\t\t\t\tvar pos = -1;\r\n\t\t\t\t\t\tfor (var p = 0; p < self.pageData.FilterInfo.length; p++) {\r\n\t\t\t\t\t\t\tif (DataFieldFilter == self.pageData.FilterInfo[p].DataField) { pos = p; break; }\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (pos > -1) self.pageData.FilterInfo.splice(pos, 1)\r\n\t\t\t\t\t\tself.conditions[NewFilter.dim].state = \"all\"\r\n\t\t\t\t\t\tself.conditions[NewFilter.dim].visibles = []\r\n\t\t\t\t\t\tself.conditions[NewFilter.dim].blackList = []\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t} else if (self.conditions[NewFilter.dim].state == \"all\") {//si el estado anterior es all pasa a none\r\n\t\t\t\t\t\tnotNullValue = [];\r\n\t\t\t\t\t\tself.conditions[NewFilter.dim].state = \"none\"\r\n\t\t\t\t\t\tself.conditions[NewFilter.dim].visibles = []\r\n\t\t\t\t\t\tself.conditions[NewFilter.dim].blackList = []\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tvar tempArrayVisibles = []; for (var tit = 0; tit < self.conditions[NewFilter.dim].visibles.length; tit++) { tempArrayVisibles.push(self.conditions[NewFilter.dim].visibles[tit]) }\r\n\t\t\t\t\t\tvar tempArrayHiddens = []; for (var tit = 0; tit < self.conditions[NewFilter.dim].blackList.length; tit++) { tempArrayHiddens.push(self.conditions[NewFilter.dim].blackList[tit]) }\r\n\r\n\t\t\t\t\t\tself.conditions[NewFilter.dim].visibles = []\r\n\t\t\t\t\t\tself.conditions[NewFilter.dim].blackList = []\r\n\r\n\t\t\t\t\t\tfor (var u = 0; u < self.conditions[NewFilter.dim].distinctValues.length; u++) {\r\n\t\t\t\t\t\t\tvar val = self.conditions[NewFilter.dim].distinctValues[u];\r\n\t\t\t\t\t\t\tif (tempArrayVisibles.indexOf(val) == -1) {\r\n\t\t\t\t\t\t\t\tself.conditions[NewFilter.dim].visibles.push(val)\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tself.conditions[NewFilter.dim].blackList.push(val)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tfor (var u = 0; u < tempArrayHiddens.length; u++) {\r\n\t\t\t\t\t\t\tif (self.conditions[NewFilter.dim].visibles.indexOf(tempArrayHiddens[u]) == -1) {\r\n\t\t\t\t\t\t\t\tself.conditions[NewFilter.dim].visibles.push(tempArrayHiddens[u])\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tfor (var u = 0; u < tempArrayVisibles.length; u++) {\r\n\t\t\t\t\t\t\tif (self.conditions[NewFilter.dim].blackList.indexOf(tempArrayVisibles[u]) == -1) {\r\n\t\t\t\t\t\t\t\tself.conditions[NewFilter.dim].blackList.push(tempArrayVisibles[u])\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar filterExist = false; var nullIncluded = true;\r\n\t\t\tvar included = [];\r\n\t\t\tfor (var t = 0; t < self.conditions[NewFilter.dim].visibles.length; t++) {\r\n\t\t\t\tif (self.conditions[NewFilter.dim].visibles[t] != \"#NuN#\") {\r\n\t\t\t\t\tincluded.push(self.conditions[NewFilter.dim].visibles[t])\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar excluded = [];\r\n\t\t\tif (self.conditions[NewFilter.dim].state != \"none\") {\r\n\t\t\t\tfor (var t = 0; t < self.conditions[NewFilter.dim].distinctValues.length; t++) {\r\n\t\t\t\t\tvar val = self.conditions[NewFilter.dim].distinctValues[t]\r\n\t\t\t\t\tif ((val != \"#NuN#\") && (included.indexOf(val) == -1)) {\r\n\t\t\t\t\t\texcluded.push(val)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tfor (var t = 0; t < self.conditions[NewFilter.dim].blackList.length; t++) {\r\n\t\t\t\t\tif ((self.conditions[NewFilter.dim].blackList[t] != \"#NuN#\")\r\n\t\t\t\t\t\t&& (excluded.indexOf(self.conditions[NewFilter.dim].blackList[t]) == -1)) {\r\n\t\t\t\t\t\texcluded.push(self.conditions[NewFilter.dim].blackList[t])\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif ((included.length == 0) && ((self.conditions[NewFilter.dim].defaultAction == \"Exclude\"))) {\r\n\t\t\t\t\texcluded = [];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (NewFilter.op == \"none\") {\r\n\t\t\t\tnullIncluded = false;\r\n\t\t\t\tincluded = []; excluded = [];\r\n\t\t\t} else {\r\n\t\t\t\tif ((self.conditions[NewFilter.dim].distinctValues.indexOf(\"#NuN#\") > -1) ||\r\n\t\t\t\t\t(excluded.indexOf(self.conditions[NewFilter.dim].blackList[t]) != -1)) {\r\n\t\t\t\t\tif (self.conditions[NewFilter.dim].visibles.indexOf(\"#NuN#\") == -1) {\r\n\t\t\t\t\t\tnullIncluded = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (self.conditions[NewFilter.dim].defaultAction == \"Exclude\") {\r\n\t\t\t\t\t\tnullIncluded = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif ((self.conditions[NewFilter.dim].hasNull) && (!(NewFilter.op == \"none\"))) {\r\n\t\t\t\t//asociated psuedo-Null\r\n\t\t\t\tvar reallyPseudoNull = self.defaultPicture.getAttribute(\"textForNullValues\")\r\n\t\t\t\tvar finded = false\r\n\t\t\t\tvar data_length = 0;\r\n\t\t\t\tfor (var u = 0; u < self.conditions[NewFilter.dim].distinctValues.length; u++) {\r\n\t\t\t\t\tdata_length = self.conditions[NewFilter.dim].distinctValues[u].length;\r\n\t\t\t\t}\r\n\t\t\t\tfor (var u = 0; u < self.conditions[NewFilter.dim].distinctValues.length; u++) {\r\n\t\t\t\t\tif (self.conditions[NewFilter.dim].distinctValues[u].trimpivot() == self.defaultPicture.getAttribute(\"textForNullValues\")) {\r\n\t\t\t\t\t\treallyPseudoNull = self.conditions[NewFilter.dim].distinctValues[u];\r\n\t\t\t\t\t\tfinded = true;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (!finded) {\r\n\t\t\t\t\tfor (var t = 0; t < data_length - self.defaultPicture.getAttribute(\"textForNullValues\").length; t++) {\r\n\t\t\t\t\t\treallyPseudoNull = reallyPseudoNull + \" \";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!nullIncluded) {\r\n\t\t\t\t\tif (excluded.indexOf(reallyPseudoNull) == -1) {\r\n\t\t\t\t\t\texcluded.push(reallyPseudoNull)\r\n\t\t\t\t\t\tif (self.conditions[NewFilter.dim].blackList.indexOf(reallyPseudoNull) == -1) {\r\n\t\t\t\t\t\t\tself.conditions[NewFilter.dim].blackList.push(reallyPseudoNull)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (included.indexOf(reallyPseudoNull) != -1) {\r\n\t\t\t\t\t\tincluded.splice(included.indexOf(reallyPseudoNull), 1)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (self.conditions[NewFilter.dim].visibles.indexOf(reallyPseudoNull) != -1) {\r\n\t\t\t\t\t\tself.conditions[NewFilter.dim].visibles.splice(self.conditions[NewFilter.dim].visibles.indexOf(reallyPseudoNull), 1)\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (included.indexOf(reallyPseudoNull) == -1) {\r\n\t\t\t\t\t\tif (excluded.indexOf(reallyPseudoNull) != -1) {\r\n\t\t\t\t\t\t\texcluded.splice(excluded.indexOf(reallyPseudoNull), 1)\r\n\t\t\t\t\t\t\tincluded.push(reallyPseudoNull)\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (self.conditions[NewFilter.dim].defaultAction == \"Exclude\") {\r\n\t\t\t\t\t\t\t\tincluded.push(reallyPseudoNull)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (self.conditions[NewFilter.dim].blackList.indexOf(reallyPseudoNull) != -1) {\r\n\t\t\t\t\t\t\tself.conditions[NewFilter.dim].blackList.splice(self.conditions[NewFilter.dim].blackList.indexOf(reallyPseudoNull), 1)\r\n\t\t\t\t\t\t\tif (self.conditions[NewFilter.dim].visibles.indexOf(reallyPseudoNull) == -1) {\r\n\t\t\t\t\t\t\t\tself.conditions[NewFilter.dim].visibles.push(reallyPseudoNull)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar allValuesLoaded = (self.conditions[NewFilter.dim].previousPage == self.conditions[NewFilter.dim].totalPages)\r\n\t\t\tvar noFilterNeeded = (((nullIncluded) || (!self.conditions[NewFilter.dim].hasNull))\r\n\t\t\t\t&& (excluded.length == 0) && (NewFilter.op != \"none\") && (NewFilter.op != \"push\")\r\n\t\t\t\t&& ((self.conditions[NewFilter.dim].defaultAction == \"Include\") || (allValuesLoaded))\r\n\t\t\t\t&& (!isFromMetadata)\r\n\t\t\t\t&& (!(NewFilter.op == \"reverse\"))\r\n\t\t\t);\r\n\r\n\t\t\tvar pos = 0; var toDelete = false;\r\n\t\t\tfor (var t = 0; t < self.pageData.FilterInfo.length; t++) {\r\n\t\t\t\tif (self.pageData.FilterInfo[t].DataField == DataFieldFilter) {\r\n\t\t\t\t\tfilterExist = true; toDelete = true;\r\n\t\t\t\t\tself.pageData.FilterInfo[t].NullIncluded = nullIncluded\r\n\t\t\t\t\tself.pageData.FilterInfo[t].NotNullValues.Included = included\r\n\t\t\t\t\tself.pageData.FilterInfo[t].NotNullValues.Excluded = excluded\r\n\t\t\t\t\tself.pageData.FilterInfo[t].NotNullValues.DefaultAction = self.conditions[NewFilter.dim].defaultAction\r\n\t\t\t\t\tpos = t;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif ((noFilterNeeded) && (toDelete)) {\r\n\t\t\t\tself.pageData.FilterInfo.splice(pos, 1)\r\n\t\t\t}\r\n\t\t\tif ((!filterExist) && (!noFilterNeeded)) {\r\n\t\t\t\tvar notNullValues = { Included: included, Excluded: excluded, DefaultAction: self.conditions[NewFilter.dim].defaultAction }\r\n\t\t\t\tfilter = { DataField: DataFieldFilter, NullIncluded: nullIncluded, NotNullValues: notNullValues }\r\n\t\t\t\tself.pageData.FilterInfo.push(filter);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tthis.moveToNextPage = function () {\r\n\t\t\tif (this.pageData.ServerPageNumber < this.pageData.ServerPageCount) {\r\n\t\t\t\tthis.getDataForPivot(this.UcId, this.pageData.ServerPageNumber + 1, this.rowsPerPage, false, \"\", \"\", \"\", \"\")\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.moveToFirstPage = function () {\r\n\t\t\tif (this.pageData.ServerPageNumber > 1) {\r\n\t\t\t\tthis.getDataForPivot(this.UcId, 1, this.rowsPerPage, false, \"\", \"\", \"\", \"\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.moveToLastPage = function () {\r\n\t\t\tif (this.pageData.ServerPageNumber < this.pageData.ServerPageCount) {\r\n\t\t\t\tthis.getDataForPivot(this.UcId, this.pageData.ServerPageCount, this.rowsPerPage, false, \"\", \"\", \"\", \"\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.moveToPreviousPage = function () {\r\n\t\t\tif (this.pageData.ServerPageNumber > 1) {\r\n\t\t\t\tself.getDataForPivot(UcId, this.pageData.ServerPageNumber - 1, this.rowsPerPage, false, \"\", \"\", \"\", \"\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.preGoWhenServerPagination = function (load) {\r\n\t\t\tself.goWhenServerPagination(load, false);\r\n\t\t}\r\n\r\n\r\n\t\tthis.readScrollValue = function (columnNumber) {\r\n\t\t\tvar dataField = self.conditions[columnNumber].dataField;\r\n\r\n\t\t\tif (!self.conditions[columnNumber].blocked) {\r\n\t\t\t\tself.conditions[columnNumber].blocked = true;\r\n\t\t\t\tif (!self.conditions[columnNumber].filtered) {\r\n\t\t\t\t\tvar page = self.conditions[columnNumber].previousPage + 1;\r\n\t\t\t\t\tself.lastRequestValue = columnNumber;\r\n\t\t\t\t\tself.lastRequestAttributeValues = \"readScrollValueWithoutFilters\"\r\n\t\t\t\t\tself.requestAttributeValues(dataField, page, 10, \"\")\r\n\t\t\t\t\t\r\n\t\t\t\t\t/*self.QueryViewerCollection[self.IdForQueryViewerCollection].getAttributeValues((function (resJSON) {\r\n\t\t\t\t\t\tvar res = JSON.parse(resJSON);\r\n\t\t\t\t\t\tself.appendNewValueData(self.lastRequestValue, res)\r\n\t\t\t\t\t}).closure(this), [dataField, page, 10, \"\"]);*/\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar ValuePageInfo = self.conditions[columnNumber].searchInfo\r\n\t\t\t\t\tvar page = ValuePageInfo.previousPage + 1;\r\n\t\t\t\t\tself.lastRequestValue = dataField;\r\n\t\t\t\t\tvar filterText = ValuePageInfo.filteredText\r\n\t\t\t\t\t\r\n\t\t\t\t\tself.lastRequestAttributeValues = \"readScrollValueWithFilters\"\r\n\t\t\t\t\tself.lastRequestAttributeColumnNumber = columnNumber\r\n\t\t\t\t\tself.lastRequestAttributeFilterText = filterText\r\n\t\t\t\t\tself.requestAttributeValues(dataField, page, 10, ValuePageInfo.filteredText)\r\n\t\t\t\t\t/*self.QueryViewerCollection[self.IdForQueryViewerCollection].getAttributeValues((function (resJSON) {\r\n\t\t\t\t\t\tvar res = JSON.parse(resJSON);\r\n\t\t\t\t\t\tself.appendNewFilteredValueData(res, columnNumber, filterText)\r\n\t\t\t\t\t}).closure(this), [dataField, page, 10, ValuePageInfo.filteredText]);*/\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.getValuesForColumn = function (UcId, columnNumber, filterValue) {\r\n\t\t\tvar dataField = self.conditions[columnNumber].dataField;\r\n\t\t\tif (filterValue != \"\") {\r\n\t\t\t\tvar page = 1\r\n\t\t\t\tvar filterValuePars = filterValue.replace(/\\\\/g, \"\\\\\\\\\")\r\n\t\t\t\t\r\n\t\t\t\tself.lastRequestAttributeValues = \"ValuesForColumn\"\r\n\t\t\t\tself.lastRequestAttributeColumnNumber = columnNumber\r\n\t\t\t\tself.lastRequestAttributeFilterText = filterValuePars\r\n\t\t\t\tself.lastRequestAttributeDataField = dataField\r\n\t\t\t\tself.lastRequestAttributeUcId = UcId\r\n\t\t\t\tself.requestAttributeValues(dataField, page, 10, filterValuePars)\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t/*self.QueryViewerCollection[self.IdForQueryViewerCollection].getAttributeValues((function (resJSON) {\r\n\t\t\t\t\tvar res = JSON.parse(resJSON);\r\n\t\t\t\t\tself.changeValues(UcId, dataField, columnNumber, res, filterValuePars);\r\n\t\t\t\t}).closure(this), [dataField, page, 10, filterValuePars]);*/\r\n\t\t\t} else {\r\n\t\t\t\tself.resetScrollValue(UcId, dataField, columnNumber)\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.appendNewValueData = function (columnNumber, data) {\r\n\t\t\tif (data.PageNumber > self.conditions[columnNumber].previousPage) {\r\n\t\t\t\tself.conditions[columnNumber].previousPage = data.PageNumber\r\n\t\t\t\tself.conditions[columnNumber].totalPages = data.PagesCount\r\n\t\t\t\tvar newValues = [];\r\n\r\n\t\t\t\tif (data.Null) {\r\n\t\t\t\t\tif (self.conditions[columnNumber].indexOf(\"#NuN#\") == -1) {\r\n\t\t\t\t\t\tself.conditions[columnNumber].distinctValues.push(\"#NuN#\")\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//add to differentValues\r\n\t\t\t\tfor (var i = 0; i < data.NotNullValues.length; i++) {\r\n\t\t\t\t\tvar val = data.NotNullValues[i]\r\n\t\t\t\t\tif (self.conditions[columnNumber].distinctValues.indexOf(val) == -1) {\r\n\t\t\t\t\t\tself.conditions[columnNumber].distinctValues.push(val)\r\n\t\t\t\t\t\tnewValues.push(val)\r\n\t\t\t\t\t}//lo mismo\r\n\t\t\t\t\tif (self.conditions[columnNumber].defaultAction == \"Include\") {\r\n\t\t\t\t\t\tif ((self.conditions[columnNumber].visibles.indexOf(val) == -1)\r\n\t\t\t\t\t\t\t&& (self.conditions[columnNumber].blackList.indexOf(val) == -1)) {\r\n\t\t\t\t\t\t\tself.conditions[columnNumber].visibles.push(val)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif ((self.conditions[columnNumber].visibles.indexOf(val) == -1)\r\n\t\t\t\t\t\t\t&& (self.conditions[columnNumber].blackList.indexOf(val) == -1)) {\r\n\t\t\t\t\t\t\tself.conditions[columnNumber].blackList.push(val)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor (var nI = 0; nI < newValues.length; nI++) {\r\n\t\t\t\t\tvar checked = true;\r\n\t\t\t\t\tif (self.conditions[columnNumber].state != \"all\") {\r\n\t\t\t\t\t\tif (self.conditions[columnNumber].blackList.indexOf(newValues[nI]) != -1) {\r\n\t\t\t\t\t\t\tchecked = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (!((self.conditions[columnNumber].hasNull) && (newValues[nI].trimpivot() == self.defaultPicture.getAttribute(\"textForNullValues\")))) {\r\n\t\t\t\t\t\tself.appendNewPairToPopUp(newValues[nI], columnNumber, checked)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (self.conditions[columnNumber].previousPage < data.PagesCount)\r\n\t\t\t\tself.conditions[columnNumber].blocked = false;\r\n\t\t}\r\n\r\n\t\tthis.changeValues = function (UcId, dataField, columnNumber, data, filterText) { //when filter by search filter, delete pairs and show new ones\r\n\t\t\tvar searchInput = jQuery(\"#\" + UcId + columnNumber)[0];\r\n\r\n\t\t\tvar sInput = searchInput.value;\r\n\t\t\tif (searchInput.value) {\r\n\t\t\t\tsInput = sInput.replace(/\\\\/g, \"\\\\\\\\\")\r\n\t\t\t}\r\n\t\t\tif (((searchInput.value) || (searchInput.value == \"\")) && (sInput != filterText)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tself.conditions[columnNumber].filtered = true;\r\n\t\t\tself.conditions[columnNumber].blocked = true;\r\n\t\t\tself.removeAllPairsFromPopUp(columnNumber, data.PagesCount > 1);\r\n\r\n\t\t\t//set filtered pagination info\r\n\t\t\tself.conditions[columnNumber].searchInfo.previousPage = 1\r\n\t\t\tself.conditions[columnNumber].searchInfo.totalPages = data.PagesCount\r\n\t\t\tself.conditions[columnNumber].searchInfo.filteredText = filterText;\r\n\r\n\t\t\tfor (var i = 0; i < data.NotNullValues.length; i++) {\r\n\t\t\t\tvar value = data.NotNullValues[i]\r\n\t\t\t\tvar alreadyInValues = (self.conditions[columnNumber].distinctValues.indexOf(value) != -1)\r\n\t\t\t\t//append to different values\r\n\t\t\t\tif (self.conditions[columnNumber].distinctValues.indexOf(value) == -1) {\r\n\t\t\t\t\tself.conditions[columnNumber].distinctValues.push(value)\r\n\t\t\t\t}\r\n\t\t\t\tif ((self.conditions[columnNumber].state == \"all\") ||\r\n\t\t\t\t\t((self.conditions[columnNumber].defaultAction == \"Include\") && (!alreadyInValues))) {\r\n\t\t\t\t\t//if Include new values and is a new value\r\n\t\t\t\t\tif ((self.conditions[columnNumber].visibles.indexOf(value) == -1)\r\n\t\t\t\t\t\t&& (self.conditions[columnNumber].blackList.indexOf(value) == -1)) {\r\n\t\t\t\t\t\tself.conditions[columnNumber].visibles.push(value)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t//\r\n\r\n\r\n\t\t\t\tvar checked = true;\r\n\t\t\t\tif (self.conditions[columnNumber].state != \"all\") {\r\n\t\t\t\t\tif (self.conditions[columnNumber].visibles.indexOf(value) < 0) {\r\n\t\t\t\t\t\tchecked = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tself.conditions[columnNumber].searchInfo.values.push(value);\r\n\t\t\t\tif (!((self.conditions[columnNumber].hasNull) && (value.trimpivot() == self.defaultPicture.getAttribute(\"textForNullValues\")))) {\r\n\t\t\t\t\tself.appendNewPairToPopUp(value, columnNumber, checked);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (data.PagesCount > 0)\r\n\t\t\t\tself.conditions[columnNumber].blocked = false;\r\n\t\t}\r\n\r\n\t\tthis.resetScrollValue = function (UcId, dataField, columnNumber) { //after filtered when input serach is clean, restor values without filter\r\n\t\t\tself.conditions[columnNumber].filtered = false;\r\n\t\t\tself.conditions[columnNumber].blocked = true;\r\n\r\n\t\t\tself.removeAllPairsFromPopUp(columnNumber, data.PagesCount > 1);\r\n\r\n\t\t\tfor (var u = 0; u < self.conditions[columnNumber].distinctValues.length; u++) {\r\n\t\t\t\tvar checked = true;\r\n\t\t\t\tvar value = self.conditions[columnNumber].distinctValues[u];\r\n\t\t\t\tif (self.conditions[columnNumber].state != \"all\") {\r\n\t\t\t\t\tif (self.conditions[columnNumber].visibles.indexOf(value) < 0) {\r\n\t\t\t\t\t\tchecked = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!((self.conditions[columnNumber].hasNull) && (value.trimpivot() == self.defaultPicture.getAttribute(\"textForNullValues\")))) {\r\n\t\t\t\t\tself.appendNewPairToPopUp(value, columnNumber, checked)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (self.conditions[columnNumber].previousPage < self.conditions[columnNumber].totalPages)\r\n\t\t\t\tself.conditions[columnNumber].blocked = false;\r\n\t\t}\r\n\r\n\t\tthis.resetAllScrollValue = function (UcId) { //when closing the filter popup\r\n\t\t\tfor (var id = 0; id < self.conditions.length; id++) {\r\n\t\t\t\tself.conditions[id].filtered = false;\r\n\t\t\t\tself.conditions[id].blocked = true;\r\n\t\t\t\tif (self.conditions[id].previousPage < self.conditions[id].totalPages)\r\n\t\t\t\t\tself.conditions[id].blocked = false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.appendNewFilteredValueData = function (data, columnNumber, filterValue) { //add pairs when filtering by filter input\r\n\t\t\tvar dataField = self.lastRequestValue\r\n\r\n\t\t\tvar ValuePageInfo = self.conditions[columnNumber].searchInfo\r\n\t\t\tif (((filterValue) || (filterValue == \"\")) && (ValuePageInfo.filteredText != filterValue)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (data.PageNumber > ValuePageInfo.previousPage) {\r\n\t\t\t\tself.conditions[columnNumber].searchInfo.previousPage = data.PageNumber\r\n\t\t\t\tself.conditions[columnNumber].searchInfo.totalPages = data.PagesCount\r\n\r\n\t\t\t\tif (data.Null) {\r\n\t\t\t\t\tif (self.conditions[columnNumber].distinctValues.indexOf(\"#NuN#\") == -1) {\r\n\t\t\t\t\t\tself.conditions[columnNumber].distinctValues.push(\"#NuN#\")\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor (var i = 0; i < data.NotNullValues.length; i++) {\r\n\t\t\t\t\tvar value = data.NotNullValues[i]\r\n\t\t\t\t\tvar alreadyInValues = (self.conditions[columnNumber].distinctValues.indexOf(value) != -1)\r\n\t\t\t\t\t//append to different values\r\n\t\t\t\t\tif (self.conditions[columnNumber].distinctValues.indexOf(value) == -1) {\r\n\t\t\t\t\t\tself.conditions[columnNumber].distinctValues.push(value)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ((self.conditions[columnNumber].defaultAction == \"Include\") && (!alreadyInValues)) {\r\n\t\t\t\t\t\tif ((self.conditions[columnNumber].visibles.indexOf(value) == -1)\r\n\t\t\t\t\t\t\t&& (self.conditions[columnNumber].blackList.indexOf(value) == -1)) {\r\n\t\t\t\t\t\t\tself.conditions[columnNumber].visibles.push(value)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif ((self.conditions[columnNumber].visibles.indexOf(value) == -1)\r\n\t\t\t\t\t\t\t&& (self.conditions[columnNumber].blackList.indexOf(value) == -1)) {\r\n\t\t\t\t\t\t\tself.conditions[columnNumber].blackList.push(value)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar checked = true;\r\n\t\t\t\t\tif (self.conditions[columnNumber].state != \"all\") {\r\n\t\t\t\t\t\tif (self.conditions[columnNumber].visibles.indexOf(value) < 0) {\r\n\t\t\t\t\t\t\tchecked = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!((self.conditions[columnNumber].hasNull) && (value.trimpivot() == self.defaultPicture.getAttribute(\"textForNullValues\")))) {\r\n\t\t\t\t\t\tself.appendNewPairToPopUp(value, columnNumber, checked)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (self.conditions[columnNumber].searchInfo.previousPage < self.conditions[columnNumber].searchInfo.totalPages)\r\n\t\t\t\t\tself.conditions[columnNumber].blocked = false;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t\tthis.appendNewPairToPopUp = function (value, colNumber, checked) {\r\n\t\t\t\tvar getPair = function (text, id, check) {\r\n\t\t\t\t\tvar div = OAT.Dom.create(\"div\");\r\n\t\t\t\t\tvar class_check_div = check ? \"check_item_img\" : \"uncheck_item_img\";\r\n\t\t\t\t\tif (self.isSD) {\r\n\t\t\t\t\t\tclass_check_div = check ? \"check_item_img_small\" : \"uncheck_item_img_small\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tOAT.addImageNode(div, check  ? \"check_box\" : \"check_box_outline_blank\", \"\");\r\n\r\n\t\t\t\t\tdiv.setAttribute(\"class\", class_check_div);\r\n\t\t\t\t\tvar ch = OAT.Dom.create(\"input\");\r\n\t\t\t\t\tch.type = \"checkbox\";\r\n\t\t\t\t\tch.id = id;\r\n\t\t\t\t\tvar t = OAT.Dom.create(\"label\");\r\n\t\t\t\t\tOAT.addTextNode(t, text)\r\n\t\t\t\t\tt.htmlFor = id;\r\n\t\t\t\t\tdiv.appendChild(t);\r\n\t\t\t\t\treturn [div, ch];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar getRefBool = function (checked, value) {\r\n\t\t\t\t\t\r\n\t\t\t\t\t\tvar oper = \"pop\";\r\n\t\t\t\t\t\tif (!checked) {\r\n\t\t\t\t\t\t\toper = \"push\";\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tself.getDataForPivot(self.UcId, 1, self.rowsPerPage, true, self.conditions[colNumber].dataField, { op: oper, values: value, dim: colNumber }, \"\", \"\")\r\n\r\n\t\t\t\t\t\tself.stateChanged = true;\r\n\t\t\t\t\t\tself.onFilteredChangedEventHandleWhenServerPagination(colNumber);\r\n\t\t\t\t\t\tself.EneablePivot();\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\tvar pict_value = self.dimensionPictureValue(value, colNumber);\r\n\t\t\t\tif (value == \"#NuN#\") {\r\n\t\t\t\t\tpict_value = \"\\u00A0\"\r\n\t\t\t\t}\r\n\t\t\t\tpict_value = pict_value.replace(/\\&amp;/g, \"&\").replace(/\\&nbsp;/g, \" \")\r\n\t\t\t\tif (pict_value.length > 33) {\r\n\t\t\t\t\tvar resto = (pict_value.substring(32, pict_value.length).trimpivot().length > 0) ? '...' : '';\r\n\t\t\t\t\tpict_value = pict_value.substring(0, 32) + resto\r\n\t\t\t\t}\r\n\r\n\t\t\t\tpict_value = pict_value.replace(/ /g, \"\\u00A0\") + '\\u00A0\\u00A0\\u00A0\\u00A0\\u00A0'\r\n\t\t\t\tvar pair = getPair(pict_value, \"pivot_distinct_\" + i, checked);\r\n\t\t\t\tpair[0].setAttribute('value', value);\r\n\t\t\t\tvar fixHeigthDiv = jQuery(\"#values_\" + self.UcId + \"_\" + colNumber)[0]\r\n\t\t\t\tfixHeigthDiv.appendChild(pair[0]);\r\n\r\n\t\t\t\tif (fixHeigthDiv.children.length > 9) {\r\n\t\t\t\t\tfixHeigthDiv.setAttribute(\"class\", \"pivot_popup_fix\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\tOAT.Dom.attach(pair[0], \"click\", function () {\r\n\t\t\t\t\tself.DiseablePivot();\r\n\r\n\t\t\t\t\tvar checkedClass = \"check_item_img\"\r\n\t\t\t\t\tvar unCheckedClass = \"uncheck_item_img\"\r\n\t\t\t\t\tif (self.isSD) {//android\r\n\t\t\t\t\t\tcheckedClass = \"check_item_img_small\"\r\n\t\t\t\t\t\tunCheckedClass = \"uncheck_item_img_small\"\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar checked = !(this.getAttribute(\"class\") === checkedClass);\r\n\t\t\t\t\tvar newClass = (this.getAttribute(\"class\") === checkedClass) ? unCheckedClass : checkedClass;\r\n\t\t\t\t\t\r\n\t\t\t\t\tjQuery(this).find(\"i\")[0].textContent = checked ? \"check_box\" : \"check_box_outline_blank\";\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.setAttribute(\"class\", newClass);\r\n\t\t\t\t\tgetRefBool(checked, this.getAttribute(\"value\"));//this.textContent);            \t\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\tthis.removeAllPairsFromPopUp = function (colNumber, withScroll) {\r\n\t\t\tvar checkedClass = \"check_item_img\"\r\n\t\t\tvar unCheckedClass = \"uncheck_item_img\"\r\n\t\t\tif (self.isSD) {//android\r\n\t\t\t\tcheckedClass = \"check_item_img_small\"\r\n\t\t\t\tunCheckedClass = \"uncheck_item_img_small\"\r\n\t\t\t}\r\n\r\n\t\t\tjQuery(\"#values_\" + self.UcId + \"_\" + colNumber).find(\".\" + checkedClass).remove()\r\n\t\t\tjQuery(\"#values_\" + self.UcId + \"_\" + colNumber).find(\".\" + unCheckedClass).remove()\r\n\r\n\t\t\tjQuery(\".last_div_popup .\" + checkedClass).remove()\r\n\t\t\tjQuery(\".last_div_popup .\" + unCheckedClass).remove()\r\n\r\n\t\t\t//set class of pairs container\r\n\t\t\tif (withScroll) {\r\n\t\t\t\tjQuery(\"#values_\" + self.UcId + \"_\" + colNumber).removeClass(\"pivot_popup_auto\");\r\n\t\t\t\tjQuery(\"#values_\" + self.UcId + \"_\" + colNumber).addClass(\"pivot_popup_fix\");\r\n\t\t\t} else {\r\n\t\t\t\tjQuery(\"#values_\" + self.UcId + \"_\" + colNumber).removeClass(\"pivot_popup_fix\");\r\n\t\t\t\tjQuery(\"#values_\" + self.UcId + \"_\" + colNumber).addClass(\"pivot_popup_auto\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar alreadyclicked = false;\r\n\t\tvar alreadyclickedTimeout;\r\n\t\tthis.onClickEventHandle = function (elemvalue, type, number, item) {\r\n\t\t\tself.ClickHandle(elemvalue);\r\n\t\t\t\r\n\t\t\t/*if (alreadyclicked) {\r\n\t\t\t\t//double click\r\n\t\t\t\talreadyclicked = false;\r\n\t\t\t\tclearTimeout(alreadyclickedTimeout);\r\n\t\t\t\tvar datastr = self.ClickHandle(elemvalue);\r\n\t\t\t\tdatastr = datastr.replace(/\\&/g, '&amp;');\r\n\t\t\t\tqv.pivot.onItemClickEvent(this.QueryViewerCollection[IdForQueryViewerCollection], datastr, true);\r\n\t\t\t} else {\r\n\t\t\t\talreadyclicked = true;\r\n\t\t\t\tvar delay = 300\r\n\t\t\t\tif (self.QueryViewerCollection[IdForQueryViewerCollection].ItemDoubleClick == undefined) {\r\n\t\t\t\t\tdelay = 0\r\n\t\t\t\t}\r\n\t\t\t\talreadyclickedTimeout = setTimeout(function () {\r\n\t\t\t\t\talreadyclicked = false;\r\n\t\t\t\t\t//single click\r\n\t\t\t\t\tvar datastr = self.ClickHandle(elemvalue);\r\n\t\t\t\t\tdatastr = datastr.replace(/\\&/g, '&amp;');\r\n\t\t\t\t\tqv.pivot.onItemClickEvent(self.QueryViewerCollection[IdForQueryViewerCollection], datastr, false)\r\n\t\t\t\t}, delay);\r\n\t\t\t}*/\r\n\t\t}\r\n\r\n\t\tthis.onClickExpandCollapse = function (elemvalue) {\r\n\r\n\t\t\tvar value = jQuery(elemvalue).data('itemValue');\r\n\t\t\t//var type = jQuery(elemvalue).data('typeMorD');\r\n\t\t\tvar number = jQuery(elemvalue).data('numberMorD');\r\n\t\t\tvar item = jQuery(elemvalue).data('itemInfoEC');\r\n\t\t\tif (self.conditions[number].collapsedValues.indexOf(value) == -1) {\r\n\t\t\t\t//collapse value\r\n\t\t\t\tself.conditions[number].collapsedValues.push(value);\r\n\t\t\t\tself.ExpandCollapseHandleWhenServerPagination(elemvalue, \"collapse\")\r\n\t\t\t\t\r\n\t\t\t} else {\r\n\t\t\t\t//expand value\r\n\t\t\t\tself.conditions[number].collapsedValues.splice(self.conditions[number].collapsedValues.indexOf(value), 1);\r\n\t\t\t\tself.ExpandCollapseHandleWhenServerPagination(elemvalue, \"expande\")\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t//self.go(false);\r\n\t\t\t\r\n\t\t}\r\n\r\n\t\t/*this.onDblClickEventHandle = function (elemvalue) {\r\n\t\t\tvar datastr = self.ClickHandle(elemvalue);\r\n\t\t\tdatastr = datastr.replace(/\\&/g, '&amp;');\r\n\t\t\tqv.pivot.onItemClickEvent(this.QueryViewerCollection[IdForQueryViewerCollection], datastr, true);\r\n\t\t}*/\r\n\r\n\t\tthis.cleanValueForNull = function (value) {\r\n\t\t\tif (value == \"#NuN#\") {\r\n\t\t\t\tvar defaultNull = self.defaultPicture.getAttribute(\"textForNullValues\");\r\n\t\t\t\tif (defaultNull != undefined) {\r\n\t\t\t\t\treturn defaultNull;\r\n\t\t\t\t}\r\n\t\t\t\treturn \"\";\r\n\t\t\t}\r\n\t\t\treturn value;\r\n\t\t}\r\n\r\n\t\tthis.isClickedRow = function (row, value, columnOfValue, otherrow, dimension, isColumnDimensionValue) {\r\n\t\t\tif (!isColumnDimensionValue){\r\n\t\t\t\tif (self.rowConditions.indexOf(dimension) == -1) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\tfor (var col = 0; col < columnOfValue; col++) {\r\n\t\t\t\t\tvar dimensionNumber = self.rowConditions[col];\r\n\t\t\t\t\tif (row[dimensionNumber] != otherrow[dimensionNumber]) {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\t\r\n\t\t\telse \r\n\t\t\t{\r\n\t\t\t\tif (self.colConditions.indexOf(dimension) == -1) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\tfor (var col = 0; col < columnOfValue; col++) {\r\n\t\t\t\t\tvar dimensionNumber = self.colConditions[col];\r\n\t\t\t\t\tif (row[dimensionNumber] != otherrow[dimensionNumber]) {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tthis.isClickedRowMeasure = function (row, value, otherrow) {\r\n\t\t\tfor (var col = 0; col < row.length; col++) {\r\n\t\t\t\tif ((row[col] != undefined) && (row[col] != otherrow[col])) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tthis.onClickSelectNode = function (elemvalue) { \r\n\t\t\tvar value = jQuery(elemvalue).data('itemValue');\r\n\t\t\tvar type = jQuery(elemvalue).data('typeMorD');\r\n\t\t\tvar number = jQuery(elemvalue).data('numberMorD');\r\n\t\t\tvar item = jQuery(elemvalue).data('itemInfo');\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tself.selection.SelectedNode = [];\r\n\t\t\t\r\n\t\t\tself.SelectNodes(value, type, number, item);\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\tthis.requestDataSynForPivotTable = function(){\r\n\t\t\tsetTimeout( function() {\r\n\t\t\t\tvar paramobj = {\"QueryviewerId\": self.IdForQueryViewerCollection};\r\n\t\t\t\tvar evt = document.createEvent(\"Events\")\r\n\t\t\t\tevt.initEvent(\"RequestDataSynForPivotTable\", true, true);\r\n\t\t\t\tevt.parameter = paramobj;\r\n\t\t\t\tdocument.dispatchEvent(evt);\r\n\t\t\t}, 0)\r\n\t\t}\r\n\t\t\r\n\t\tthis.ClickHandle = function (elemvalue) { \r\n\t\t\t\r\n\t\t\tself.LastElemValue = elemvalue\r\n\t\t\t\r\n\t\t\tself.requestDataSynForPivotTable()\r\n\t\t}\r\n\t\t\r\n\t\tthis.setDataSynForPivotTable = function(serverData){\r\n\t\t\tvar elemvalue = self.LastElemValue\r\n\t\t\tvar temp = serverData\r\n\t\t\t\r\n\t\t\tvar value = jQuery(elemvalue).data('itemValue');\r\n\t\t\tvar type = jQuery(elemvalue).data('typeMorD');\r\n\t\t\tvar number = jQuery(elemvalue).data('numberMorD');\r\n\t\t\tvar item = jQuery(elemvalue).data('itemInfo');\r\n\t\t\tvar selected = OAT.IsNodeSelected(elemvalue.parentElement);\r\n\t\t\tvar datastr = \"<DATA><ITEM type=\\\"\" + type + \"\\\" \";\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tif (type === \"MEASURE\") {\r\n\t\t\t\tdatastr = datastr + \"name=\\\"\" + measures[number].getAttribute(\"name\") + \"\\\" \";\r\n\t\t\t\tdatastr = datastr + \"displayName=\\\"\" + measures[number].getAttribute(\"displayName\") + \"\\\" \";\r\n\t\t\t\tdatastr = datastr + \"selected=\\\"\" + selected.toString() + \"\\\" \";\r\n\t\t\t\tdatastr = datastr + \"location=\\\"data\\\">\"\r\n\t\t\t\tdatastr = datastr + self.cleanValueForNull(value)\r\n\t\t\t} else {//DIMENSION\r\n\t\t\t\tdatastr = datastr + \"name=\\\"\" + self.columns[number].getAttribute(\"name\") + \"\\\" \";\r\n\t\t\t\tdatastr = datastr + \"displayName=\\\"\" + self.columns[number].getAttribute(\"displayName\") + \"\\\" \";\r\n\t\t\t\tdatastr = datastr + \"selected=\\\"\" + selected.toString() + \"\\\" \";\r\n\t\t\t\t\r\n\t\t\t\tif ((item != \"\") && (((item.axis != undefined) &&  (item.axis == \"columns\")) || (item[4] == \"columns\") ))\r\n\t\t\t\t\tdatastr = datastr + \"location=\\\"columns\\\">\"\r\n\t\t\t\telse\r\n\t\t\t\t\tdatastr = datastr + \"location=\\\"rows\\\">\"\r\n\t\t\t\tdatastr = datastr + self.cleanValueForNull(value)\r\n\t\t\t}\r\n\r\n\t\t\tdatastr = datastr + \"</ITEM>\";\r\n\t\t\t//datastr = datastr + \"</DATA>\";\r\n\r\n\t\t\tdatastr = datastr + \"<CONTEXT>\";\r\n\t\t\tdatastr = datastr + \"<RELATED>\";\r\n\t\t\tvar previuosDat = datastr;\r\n\t\t\ttry {\r\n\t\t\t\t\r\n\t\t\t\t\tvar dataFieldsList = []\r\n\t\t\t\t\tfor (var i = 0; i < self.conditions.length; i++){\r\n\t\t\t\t\t\tif (self.conditions[i].dataField != undefined) {\r\n\t\t\t\t\t\t\tdataFieldsList.push(self.conditions[i].dataField)\r\n\t\t\t\t\t\t} \r\n\t\t\t\t\t}\r\n\t\t\t\t\tfor (var i = 0; i < measures.length; i++){\r\n\t\t\t\t\t\tif (measures[i].getAttribute(\"dataField\") != undefined) {\r\n\t\t\t\t\t\t\tdataFieldsList.push(measures[i].getAttribute(\"dataField\"))\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t//if (self.allRowsPivot == \"vacio\") {\r\n\t\t\t\t\t\tself.allRowsPivot = []\r\n\t\t\t\t\t\tself.allFullRowsPivot = []\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t//var temp = self.QueryViewerCollection[self.IdForQueryViewerCollection].getPivottableDataSync();\r\n\t\t\t\t\t\tvar stringRecord = temp.split(\"<Record>\")\r\n\t\t\t\t\t\tfor (var i = 1; i < stringRecord.length; i++) {\r\n\t\t\t\t\t\t\tvar recordData = [];\r\n\t\t\t\t\t\t\tvar fullRecordData = [];\r\n\t\t\t\t\t\t\tfor (var j = 0; j < dataFieldsList.length; j++) {\r\n\t\t\t\t\t\t\t\trecordData[j] = \"#NuN#\"\r\n\t\t\t\t\t\t\t\tvar dt = stringRecord[i].split(\"<\" + dataFieldsList[j] + \">\")\r\n\t\t\t\t\t\t\t\tif (dt.length > 1) {\r\n\t\t\t\t\t\t\t\t\tvar at = dt[1].split(\"</\" + dataFieldsList[j] + \">\")\r\n\t\t\t\t\t\t\t\t\trecordData[j] = at[0]\r\n\t\t\t\t\t\t\t\t\tfullRecordData[j] = recordData[j]\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tif (stringRecord[i].indexOf(\"<\" + dataFieldsList[j] + \"/>\") >= 0) {\r\n\t\t\t\t\t\t\t\t\t\trecordData[j] = \"\"\r\n\t\t\t\t\t\t\t\t\t\tfullRecordData[j] = \"\"\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\trecordData[j] = \"#NuN#\"\r\n\t\t\t\t\t\t\t\t\t\tfullRecordData[j] = \"#NuN#\"\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif ((type == \"MEASURE\") && (self.formulaInfo.cantFormulaMeasures) && (self.formulaInfo.measureFormula[number].hasFormula)){\r\n\t\t\t\t\t\t\t\trecordData[number + this.columns.length] = parseFloat(recordData[number + this.columns.length]).toFixed(15).toString()\r\n\t\t\t\t\t\t\t\tfullRecordData[number + this.columns.length] = parseFloat(fullRecordData[number + this.columns.length]).toFixed(15).toString()\r\n\t\t\t\t\t\t\t} \r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tself.allRowsPivot.push(recordData);\r\n\r\n\t\t\t\t\t\t\t//add hide columns values\r\n\t\t\t\t\t\t\tfor (var j = 0; j < self.HideDataFilds.length; j++) {\r\n\t\t\t\t\t\t\t\tvar dt = stringRecord[i].split(\"<\" + self.HideDataFilds[j] + \">\")\r\n\t\t\t\t\t\t\t\tif (dt.length > 1) {\r\n\t\t\t\t\t\t\t\t\tvar at = dt[1].split(\"</\" + self.HideDataFilds[j] + \">\")\r\n\t\t\t\t\t\t\t\t\tfullRecordData[fullRecordData.length] = at[0]\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tif (stringRecord[i].indexOf(\"<\" + self.HideDataFilds[j] + \"/>\") >= 0) {\r\n\t\t\t\t\t\t\t\t\t\tfullRecordData[fullRecordData.length] = \"\"\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tfullRecordData[fullRecordData.length] = \"#NuN#\"\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tself.allFullRowsPivot.push(fullRecordData);\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t//}\r\n\r\n\t\t\t\t\tvar isNotSubtotal = false;\r\n\t\t\t\t\tif (item.row) {\r\n\t\t\t\t\t\tisNotSubtotal = !item.row.subTotal\r\n\t\t\t\t\t\tif ((!isNotSubtotal) && (item.isTotal != undefined) && (!item.isTotal)) {\r\n\t\t\t\t\t\t\tisNotSubtotal = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar isColumnDimensionValue = (item.axis != undefined) && (item.axis == \"columns\")\r\n\t\t\t\t\tif (isColumnDimensionValue){\r\n\t\t\t\t\t\tisNotSubtotal = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (((item.row != undefined) || isColumnDimensionValue) && (isNotSubtotal)) {\r\n\t\t\t\t\t\tvar row = item.row\r\n\t\t\t\t\t\tvar cellNumber = item.cell\r\n\t\t\t\t\t\tvar numRow = self.pageData.rows.indexOf(row)\r\n\t\t\t\t\t\tvar colPos = item.cell\r\n\t\t\t\t\t\tvar numCol = self.pageData.columnsHeaders[colPos]\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (isColumnDimensionValue){\r\n\t\t\t\t\t\t\tcellNumber = item.rownumber\r\n\t\t\t\t\t\t\tcolPos = item.columnnumber\r\n\t\t\t\t\t\t\tnumCol = self.pageData.columnsHeaders[colPos]\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tvar pseudoRow = [];\r\n\t\t\t\t\t\tfor (var i = 0; i < self.pageData.dataFields.length; i++) {\r\n\t\t\t\t\t\t\tpseudoRow[i] = undefined;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (item.row != undefined) {\r\n\t\t\t\t\t\t\tfor (var i = 0; i < row.headers.length; i++) {\r\n\t\t\t\t\t\t\t\tvar pos = dataFieldsList.indexOf(row.headers[i].dataField) //self.pageData.dataFields.indexOf(row.headers[i].dataField)\r\n\t\t\t\t\t\t\t\tif ((row.headers[i] != undefined) && (row.headers[i].value != undefined)) {\r\n\t\t\t\t\t\t\t\t\tpseudoRow[pos] = row.headers[i].value\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (numCol != undefined){\r\n\t\t\t\t\t\t\tfor (var i = 0; i < numCol.subHeaders.length; i++) {\r\n\t\t\t\t\t\t\t\tif ((isColumnDimensionValue) && (item.rownumber < i)) break;\r\n\t\t\t\t\t\t\t\tif (numCol.subHeaders[i] != undefined) {\r\n\t\t\t\t\t\t\t\t\tvar pos = self.pageData.dataFields.indexOf(numCol.subHeaders[i].dataField)\r\n\t\t\t\t\t\t\t\t\tif (numCol.subHeaders[i].value != undefined) {\r\n\t\t\t\t\t\t\t\t\t\tpseudoRow[pos] = numCol.subHeaders[i].value\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tfor (var i = 0; i < this.columns.length; i++) {\r\n\t\t\t\t\t\t\tdatastr = datastr + \"<ITEM name=\\\"\" + this.columns[i].getAttribute(\"name\") + \"\\\">\"\r\n\t\t\t\t\t\t\tdatastr = datastr + \"<VALUES\";\r\n\t\t\t\t\t\t\tvar existNullValue = false;\r\n\t\t\t\t\t\t\tvar stringValues = \"\";\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif ((type === \"MEASURE\")) {\r\n\t\t\t\t\t\t\t\tif (pseudoRow[i] != undefined) {\r\n\t\t\t\t\t\t\t\t\tif (pseudoRow[i] != \"#NuN#\"){\t\r\n\t\t\t\t\t\t\t\t\t\tstringValues = stringValues + \"<VALUE>\" + self.cleanValueForNull(pseudoRow[i]) + \"</VALUE>\";\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\texistNullValue = true\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tif (self.filterIndexes.indexOf(i) != -1) {\r\n\t\t\t\t\t\t\t\t\t\tvar prevValues = [];\r\n\t\t\t\t\t\t\t\t\t\tfor (var iCV = 0; iCV < self.allRowsPivot.length; iCV++) {\r\n\t\t\t\t\t\t\t\t\t\t\tif ((prevValues.indexOf(self.allRowsPivot[iCV][i]) === -1) && (self.filterOK(self.allRowsPivot[iCV])) &&\r\n\t\t\t\t\t\t\t\t\t\t\t\tself.isClickedRowMeasure(pseudoRow, value, self.allRowsPivot[iCV])) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tprevValues = prevValues.concat(self.allRowsPivot[iCV][i])\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (self.allRowsPivot[iCV][i] != \"#NuN#\"){\t\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tstringValues = stringValues + \"<VALUE>\" + self.cleanValueForNull(self.allRowsPivot[iCV][i]) + \"</VALUE>\";\r\n\t\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\texistNullValue = true\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tvar prevValues = [];\r\n\t\t\t\t\t\t\t\tfor (var iCV = 0; iCV < self.allRowsPivot.length; iCV++) {\r\n\t\t\t\t\t\t\t\t\tif ((self.allRowsPivot[iCV][number] === value) && (self.isClickedRow(pseudoRow, value, cellNumber, self.allRowsPivot[iCV], number, isColumnDimensionValue))\r\n\t\t\t\t\t\t\t\t\t\t&& (prevValues.indexOf(self.allRowsPivot[iCV][i]) === -1) && self.filterOK(self.allRowsPivot[iCV])) {\r\n\t\t\t\t\t\t\t\t\t\tprevValues = prevValues.concat(self.allRowsPivot[iCV][i])\r\n\t\t\t\t\t\t\t\t\t\tif (self.allRowsPivot[iCV][i] != \"#NuN#\"){\r\n\t\t\t\t\t\t\t\t\t\t\tstringValues = stringValues + \"<VALUE>\" + self.cleanValueForNull(self.allRowsPivot[iCV][i]) + \"</VALUE>\";\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\texistNullValue = true\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (existNullValue){\r\n\t\t\t\t\t\t\t\tdatastr = datastr + \" Null=\\\"true\\\"\"\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tdatastr = datastr + \">\" + stringValues \r\n\t\t\t\t\t\t\tdatastr = datastr + \"</VALUES>\";\r\n\t\t\t\t\t\t\tdatastr = datastr + \"</ITEM>\";\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tfor (var i = 0; i < measures.length; i++) {\r\n\t\t\t\t\t\t\tdatastr = datastr + \"<ITEM name=\\\"\" + measures[i].getAttribute(\"name\") + \"\\\">\"\r\n\t\t\t\t\t\t\tdatastr = datastr + \"<VALUES\";\r\n\t\t\t\t\t\t\tvar existNullValue = false;\r\n\t\t\t\t\t\t\tvar stringValues = \"\";\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (type === \"MEASURE\") {\r\n\t\t\t\t\t\t\t\tif (pseudoRow[i + this.columns.length] != undefined) {\r\n\t\t\t\t\t\t\t\t\tif (pseudoRow[i + this.columns.length] != \"#NuN#\"){\r\n\t\t\t\t\t\t\t\t\t\tstringValues = stringValues + \"<VALUE>\" + self.cleanValueForNull(pseudoRow[i + this.columns.length]) + \"</VALUE>\";\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\texistNullValue = true\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tif (number == i) {\r\n\t\t\t\t\t\t\t\t\t\tif (value != \"#NuN#\"){\r\n\t\t\t\t\t\t\t\t\t\t\tstringValues = stringValues + \"<VALUE>\" + self.cleanValueForNull(value) + \"</VALUE>\";\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\texistNullValue = true\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tvar prevValues = [];\r\n\t\t\t\t\t\t\t\t\t\tfor (var iCV = 0; iCV < self.allRowsPivot.length; iCV++) {\r\n\t\t\t\t\t\t\t\t\t\t\tif ((parseFloat(self.allRowsPivot[iCV][number + this.columns.length]) === parseFloat(value)) && (self.isClickedRowMeasure(pseudoRow, value, self.allRowsPivot[iCV]))\r\n\t\t\t\t\t\t\t\t\t\t\t\t&& self.filterOK(self.allRowsPivot[iCV]) && (prevValues.indexOf(self.allRowsPivot[iCV][i + this.columns.length]) === -1)) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (self.allRowsPivot[iCV][i + this.columns.length] != \"#NuN#\"){\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tstringValues = stringValues + \"<VALUE>\" + self.cleanValueForNull(self.allRowsPivot[iCV][i + this.columns.length]) + \"</VALUE>\";\r\n\t\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\texistNullValue = true\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tvar prevValues = [];\r\n\t\t\t\t\t\t\t\tfor (var iCV = 0; iCV < self.allRowsPivot.length; iCV++) {\r\n\t\t\t\t\t\t\t\t\tif ((self.allRowsPivot[iCV][number] === value) && (self.isClickedRow(pseudoRow, value, cellNumber , self.allRowsPivot[iCV], number, isColumnDimensionValue))\r\n\t\t\t\t\t\t\t\t\t\t&& self.filterOK(self.allRowsPivot[iCV]) && (prevValues.indexOf(self.allRowsPivot[iCV][i + this.columns.length]) === -1)) {\r\n\t\t\t\t\t\t\t\t\t\tprevValues = prevValues.concat(self.allRowsPivot[iCV][i + this.columns.length])\r\n\t\t\t\t\t\t\t\t\t\tif (self.allRowsPivot[iCV][i + this.columns.length] != \"#NuN#\"){\r\n\t\t\t\t\t\t\t\t\t\t\tstringValues = stringValues + \"<VALUE>\" + self.cleanValueForNull(self.allRowsPivot[iCV][i + this.columns.length]) + \"</VALUE>\";\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\texistNullValue = true\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (existNullValue){\r\n\t\t\t\t\t\t\t\tdatastr = datastr + \" Null=\\\"true\\\"\"\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tdatastr = datastr + \">\" + stringValues \r\n\t\t\t\t\t\t\tdatastr = datastr + \"</VALUES>\";\r\n\t\t\t\t\t\t\tdatastr = datastr + \"</ITEM>\";\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t//add hidden values\r\n\t\t\t\t\t\tfor (var i = 0; i < self.HideDataFilds.length; i++) {\r\n\t\t\t\t\t\t\tdatastr = datastr + \"<ITEM name=\\\"\" + self.OrderFildsHidden[i] + \"\\\">\"\r\n\t\t\t\t\t\t\tdatastr = datastr + \"<VALUES\";\r\n\t\t\t\t\t\t\tvar existNullValue = false;\r\n\t\t\t\t\t\t\tvar stringValues = \"\";\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tvar coinc = function (row1, row2) {\r\n\t\t\t\t\t\t\t\tfor (var o = 0; o < row1.length; o++) {\r\n\t\t\t\t\t\t\t\t\tif ((row1[o] != undefined) && (row1[o] != row2[o])) {\r\n\t\t\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tvar stringValues = \"\";\r\n\t\t\t\t\t\t\tif (type === \"MEASURE\") {\r\n\t\t\t\t\t\t\t\tvar prevValues = [];\r\n\t\t\t\t\t\t\t\tfor (var iCV = 0; iCV < self.allFullRowsPivot.length; iCV++) {\r\n\t\t\t\t\t\t\t\t\tif (coinc(pseudoRow, self.allFullRowsPivot[iCV]) && self.isClickedRowMeasure(pseudoRow, value, self.allFullRowsPivot[iCV])\r\n\t\t\t\t\t\t\t\t\t\t&& self.filterOK(self.allFullRowsPivot[iCV]) && (prevValues.indexOf(self.allFullRowsPivot[iCV][i + this.columns.length + measures.length]) === -1)) {\r\n\t\t\t\t\t\t\t\t\t\tprevValues = prevValues.concat(self.allFullRowsPivot[iCV][i + this.columns.length + measures.length])\r\n\t\t\t\t\t\t\t\t\t\tif (self.allFullRowsPivot[iCV][i + this.columns.length + measures.length] != \"#NuN#\"){\r\n\t\t\t\t\t\t\t\t\t\t\tstringValues = stringValues + \"<VALUE>\" + self.cleanValueForNull(self.allFullRowsPivot[iCV][i + this.columns.length + measures.length]) + \"</VALUE>\";\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\texistNullValue = true\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tvar prevValues = [];\r\n\t\t\t\t\t\t\t\tfor (var iCV = 0; iCV < self.allFullRowsPivot.length; iCV++) {\r\n\t\t\t\t\t\t\t\t\tif ((self.allFullRowsPivot[iCV][number] === value) && (self.isClickedRow(pseudoRow, value, cellNumber, self.allFullRowsPivot[iCV], number, isColumnDimensionValue))\r\n\t\t\t\t\t\t\t\t\t\t&& self.filterOK(self.allFullRowsPivot[iCV]) && (prevValues.indexOf(self.allFullRowsPivot[iCV][i + this.columns.length + measures.length]) === -1)) {\r\n\t\t\t\t\t\t\t\t\t\tprevValues = prevValues.concat(self.allFullRowsPivot[iCV][i + this.columns.length + measures.length])\r\n\t\t\t\t\t\t\t\t\t\tif (self.allFullRowsPivot[iCV][i + this.columns.length + measures.length] != \"#NuN#\"){\r\n\t\t\t\t\t\t\t\t\t\t\tstringValues = stringValues + \"<VALUE>\" + self.cleanValueForNull(self.allFullRowsPivot[iCV][i + this.columns.length + measures.length]) + \"</VALUE>\";\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\texistNullValue = true\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (existNullValue){\r\n\t\t\t\t\t\t\t\tdatastr = datastr + \" Null=\\\"true\\\"\"\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tdatastr = datastr + \">\" + stringValues \r\n\t\t\t\t\t\t\tdatastr = datastr + \"</VALUES>\";\r\n\t\t\t\t\t\t\tdatastr = datastr + \"</ITEM>\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (item === \"GrandTotal\") {\t//Grand Total, include all data\r\n\r\n\t\t\t\t\t\t\tfor (var i = 0; i < this.columns.length; i++) {\r\n\t\t\t\t\t\t\t\tdatastr = datastr + \"<ITEM name=\\\"\" + this.columns[i].getAttribute(\"name\") + \"\\\">\"\r\n\t\t\t\t\t\t\t\tdatastr = datastr + \"<VALUES\";\r\n\t\t\t\t\t\t\t\tvar existNullValue = false;\r\n\t\t\t\t\t\t\t\tvar stringValues = \"\";\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tvar prevValues = [];\r\n\t\t\t\t\t\t\t\tfor (var iCV = 0; iCV < self.allRowsPivot.length; iCV++) {\r\n\t\t\t\t\t\t\t\t\tif ((prevValues.indexOf(self.allRowsPivot[iCV][i]) === -1) && self.filterOK(self.allRowsPivot[iCV])) {\r\n\t\t\t\t\t\t\t\t\t\tprevValues = prevValues.concat(self.allRowsPivot[iCV][i])\r\n\t\t\t\t\t\t\t\t\t\tif (self.allRowsPivot[iCV][i] != \"#NuN#\"){\r\n\t\t\t\t\t\t\t\t\t\t\tstringValues = stringValues + \"<VALUE>\" + self.cleanValueForNull(self.allRowsPivot[iCV][i]) + \"</VALUE>\";\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\texistNullValue = true\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tif (existNullValue){\r\n\t\t\t\t\t\t\t\t\tdatastr = datastr + \" Null=\\\"true\\\"\"\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tdatastr = datastr + \">\" + stringValues \r\n\t\t\t\t\t\t\t\tdatastr = datastr + \"</VALUES>\";\r\n\t\t\t\t\t\t\t\tdatastr = datastr + \"</ITEM>\";\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t//add hide values\r\n\t\t\t\t\t\t\tfor (var i = 0; i < self.HideDataFilds.length; i++) {\r\n\t\t\t\t\t\t\t\tdatastr = datastr + \"<ITEM name=\\\"\" + self.OrderFildsHidden[i] + \"\\\">\"\r\n\t\t\t\t\t\t\t\tdatastr = datastr + \"<VALUES\";\r\n\t\t\t\t\t\t\t\tvar existNullValue = false;\r\n\t\t\t\t\t\t\t\tvar stringValues = \"\";\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tvar prevValues = [];\r\n\t\t\t\t\t\t\t\tfor (var iCV = 0; iCV < self.allFullRowsPivot.length; iCV++) {\r\n\t\t\t\t\t\t\t\t\tif ((prevValues.indexOf(self.allFullRowsPivot[iCV][i + this.columns.length + measures.length]) === -1) && self.filterOK(self.allFullRowsPivot[iCV])) {\r\n\t\t\t\t\t\t\t\t\t\tprevValues = prevValues.concat(self.allFullRowsPivot[iCV][i + this.columns.length + measures.length])\r\n\t\t\t\t\t\t\t\t\t\tif (self.allFullRowsPivot[iCV][i + this.columns.length + measures.length] != \"#NuN#\"){\r\n\t\t\t\t\t\t\t\t\t\t\tstringValues = stringValues + \"<VALUE>\" + self.cleanValueForNull(self.allFullRowsPivot[iCV][i + this.columns.length + measures.length]) + \"</VALUE>\";\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\texistNullValue = true\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (existNullValue){\r\n\t\t\t\t\t\t\t\t\tdatastr = datastr + \" Null=\\\"true\\\"\"\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tdatastr = datastr + \">\" + stringValues \r\n\t\t\t\t\t\t\t\tdatastr = datastr + \"</VALUES>\";\r\n\t\t\t\t\t\t\t\tdatastr = datastr + \"</ITEM>\";\r\n\t\t\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\t\t\tfor (var i = 0; i < measures.length; i++) {\r\n\t\t\t\t\t\t\t\tdatastr = datastr + \"<ITEM name=\\\"\" + measures[i].getAttribute(\"name\") + \"\\\">\"\r\n\t\t\t\t\t\t\t\tdatastr = datastr + \"<VALUES\";\r\n\t\t\t\t\t\t\t\tvar existNullValue = false;\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tvar stringValues = \"\";\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tvar prevValues = [];\r\n\t\t\t\t\t\t\t\tfor (var iCV = 0; iCV < self.allRowsPivot.length; iCV++) {\r\n\t\t\t\t\t\t\t\t\tif ((prevValues.indexOf(self.allRowsPivot[iCV][i + this.columns.length]) === -1) && self.filterOK(self.allRowsPivot[iCV])) {\r\n\t\t\t\t\t\t\t\t\t\tprevValues = prevValues.concat(self.allRowsPivot[iCV][i + this.columns.length])\r\n\t\t\t\t\t\t\t\t\t\tif (self.allRowsPivot[iCV][i + this.columns.length] != \"#NuN#\"){\r\n\t\t\t\t\t\t\t\t\t\t\tstringValues = stringValues + \"<VALUE>\" + self.cleanValueForNull(self.allRowsPivot[iCV][i + this.columns.length]) + \"</VALUE>\";\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\texistNullValue = true\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tif (existNullValue){\r\n\t\t\t\t\t\t\t\t\tdatastr = datastr + \" Null=\\\"true\\\"\"\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tdatastr = datastr + \">\" + stringValues \r\n\t\t\t\t\t\t\t\tdatastr = datastr + \"</VALUES>\";\r\n\t\t\t\t\t\t\t\tdatastr = datastr + \"</ITEM>\";\r\n\t\t\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\t\t} else if (item[0] === 'PtrTotals') {\r\n\t\t\t\t\t\t\tvar row = item[2]\r\n\t\t\t\t\t\t\tvar colPos = item[3]\r\n\t\t\t\t\t\t\tif (colPos > -1) {\r\n\t\t\t\t\t\t\t\tvar numCol = self.pageData.columnsHeaders[colPos]\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tisColumnDimensionValue = (item[4] == \"columns\")\r\n\t\t\t\t\t\t\tvar rownumber = item[5]\r\n\t\t\t\t\t\t\tvar pseudoRow = [];\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tfor (var i = 0; i < self.pageData.dataFields.length; i++) {\r\n\t\t\t\t\t\t\t\tpseudoRow[i] = undefined;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (!isColumnDimensionValue) {\r\n\t\t\t\t\t\t\t\tfor (var i = 0; i < row.headers.length; i++) {\r\n\t\t\t\t\t\t\t\t\tvar pos = self.pageData.dataFields.indexOf(row.headers[i].dataField)\r\n\t\t\t\t\t\t\t\t\tif ((row.headers[i] != undefined) && (row.headers[i].value != undefined)) {\r\n\t\t\t\t\t\t\t\t\t\tpseudoRow[pos] = row.headers[i].value\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} \r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (colPos > -1) {\r\n\t\t\t\t\t\t\t\tfor (var i = 0; i < numCol.subHeaders.length; i++) {\r\n\t\t\t\t\t\t\t\t\tif (numCol.subHeaders[i] != undefined) {\r\n\t\t\t\t\t\t\t\t\t\tif ((isColumnDimensionValue) && (rownumber < i)) break;\r\n\t\t\t\t\t\t\t\t\t\tvar pos = self.pageData.dataFields.indexOf(numCol.subHeaders[i].dataField)\r\n\t\t\t\t\t\t\t\t\t\tif (numCol.subHeaders[i].value != undefined) {\r\n\t\t\t\t\t\t\t\t\t\t\tpseudoRow[pos] = numCol.subHeaders[i].value\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tvar filtRows = []; var filtFullRows = [];\r\n\t\t\t\t\t\t\tfor (var i = 0; i < self.allRowsPivot.length; i++) {\t\t\t//get the list of filtered rows involve in this sum\r\n\t\t\t\t\t\t\t\tif (self.filterOK(self.allRowsPivot[i])) {\r\n\t\t\t\t\t\t\t\t\tif (self.isClickedRowMeasure(pseudoRow, value, self.allRowsPivot[i])) {\r\n\t\t\t\t\t\t\t\t\t\tfiltRows.push(self.allRowsPivot[i]);\r\n\t\t\t\t\t\t\t\t\t\tif (self.HideDataFilds.length > 0) {\r\n\t\t\t\t\t\t\t\t\t\t\tfiltFullRows.push(self.allFullRowsPivot[i])\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tfor (var i = 0; i < this.columns.length; i++) {\r\n\t\t\t\t\t\t\t\tdatastr = datastr + \"<ITEM name=\\\"\" + this.columns[i].getAttribute(\"name\") + \"\\\">\"\r\n\t\t\t\t\t\t\t\tdatastr = datastr + \"<VALUES\";\r\n\t\t\t\t\t\t\t\tvar existNullValue = false;\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tvar stringValues = \"\";\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tvar prevValues = [];\r\n\t\t\t\t\t\t\t\tfor (var j = 0; j < filtRows.length; j++) {\r\n\t\t\t\t\t\t\t\t\tif (prevValues.indexOf(filtRows[j][i]) === -1) {\r\n\t\t\t\t\t\t\t\t\t\tprevValues = prevValues.concat(filtRows[j][i])\r\n\t\t\t\t\t\t\t\t\t\tif (filtRows[j][i] != \"#NuN#\"){\r\n\t\t\t\t\t\t\t\t\t\t\tstringValues = stringValues + \"<VALUE>\" + self.cleanValueForNull(filtRows[j][i]) + \"</VALUE>\";\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\texistNullValue = true\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tif (existNullValue){\r\n\t\t\t\t\t\t\t\t\tdatastr = datastr + \" Null=\\\"true\\\"\"\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tdatastr = datastr + \">\" + stringValues \r\n\t\t\t\t\t\t\t\tdatastr = datastr + \"</VALUES>\";\r\n\t\t\t\t\t\t\t\tdatastr = datastr + \"</ITEM>\";\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t//add hide values\r\n\t\t\t\t\t\t\tfor (var i = 0; i < self.HideDataFilds.length; i++) {\r\n\t\t\t\t\t\t\t\tdatastr = datastr + \"<ITEM name=\\\"\" + self.OrderFildsHidden[i] + \"\\\">\"\r\n\t\t\t\t\t\t\t\tdatastr = datastr + \"<VALUES\";\r\n\t\t\t\t\t\t\t\tvar existNullValue = false;\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tvar stringValues = \"\";\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tvar prevValues = [];\r\n\t\t\t\t\t\t\t\tfor (var j = 0; j < filtRows.length; j++) {\r\n\t\t\t\t\t\t\t\t\tif (prevValues.indexOf(filtRows[j][i]) === -1) {\r\n\t\t\t\t\t\t\t\t\t\tprevValues = prevValues.concat(filtRows[j][i])\r\n\t\t\t\t\t\t\t\t\t\tif (filtFullRows[j][i + this.columns.length + measures.length] != \"#NuN#\"){\r\n\t\t\t\t\t\t\t\t\t\t\tstringValues = stringValues + \"<VALUE>\" + self.cleanValueForNull(filtFullRows[j][i + this.columns.length + measures.length]) + \"</VALUE>\";\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\texistNullValue = true\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tif (existNullValue){\r\n\t\t\t\t\t\t\t\t\tdatastr = datastr + \" Null=\\\"true\\\"\"\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tdatastr = datastr + \">\" + stringValues \r\n\t\t\t\t\t\t\t\tdatastr = datastr + \"</VALUES>\";\r\n\t\t\t\t\t\t\t\tdatastr = datastr + \"</ITEM>\";\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tfor (var i = 0; i < measures.length; i++) {\r\n\t\t\t\t\t\t\t\tdatastr = datastr + \"<ITEM name=\\\"\" + measures[i].getAttribute(\"name\") + \"\\\">\"\r\n\t\t\t\t\t\t\t\tdatastr = datastr + \"<VALUES\";\r\n\t\t\t\t\t\t\t\tvar existNullValue = false;\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tvar stringValues = \"\";\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tvar prevValues = [];\r\n\t\t\t\t\t\t\t\tfor (var iCV = 0; iCV < filtRows.length; iCV++) {\r\n\t\t\t\t\t\t\t\t\tif (prevValues.indexOf(filtRows[iCV][i + this.columns.length]) === -1) {\r\n\t\t\t\t\t\t\t\t\t\tprevValues = prevValues.concat(filtRows[iCV][i + this.columns.length])\r\n\t\t\t\t\t\t\t\t\t\tif (filtRows[iCV][i + this.columns.length] != \"#NuN#\"){\r\n\t\t\t\t\t\t\t\t\t\t\tstringValues = stringValues + \"<VALUE>\" + self.cleanValueForNull(filtRows[iCV][i + this.columns.length]) + \"</VALUE>\";\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\texistNullValue = true\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tif (existNullValue){\r\n\t\t\t\t\t\t\t\t\tdatastr = datastr + \" Null=\\\"true\\\"\"\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tdatastr = datastr + \">\" + stringValues \r\n\t\t\t\t\t\t\t\tdatastr = datastr + \"</VALUES>\";\r\n\t\t\t\t\t\t\t\tdatastr = datastr + \"</ITEM>\";\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\r\n\t\t\t} catch (Error) {\r\n\t\t\t\tdatastr = previuosDat;\r\n\t\t\t}\r\n\t\t\tdatastr = datastr + \"</RELATED>\";\r\n\t\t\tdatastr = datastr + \"<FILTERS>\";\r\n\t\t\tpreviuosDat = datastr;\r\n\t\t\ttry {\r\n\t\t\t\tfor (var i = 0; i < self.filterIndexes.length; i++) {\r\n\t\t\t\t\tdatastr = datastr + \"<ITEM name=\\\"\" + this.columns[self.filterIndexes[i]].getAttribute(\"name\") + \"\\\" displayName=\\\"\" + this.columns[self.filterIndexes[i]].getAttribute(\"displayName\") + \"\\\">\";\r\n\t\t\t\t\tdatastr = datastr + \"<VALUES>\"\r\n\t\t\t\t\tdatastr = datastr + \"<VALUE>\"\r\n\t\t\t\t\tif (self.filterDiv.selects[i].value === \"[all]\") {\r\n\t\t\t\t\t\tdatastr = datastr + self.translations.GXPL_QViewerJSAllOption;//gx.getMessage(\"GXPL_QViewerJSAllOption\");//\"\\\"ALL\\\"\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tdatastr = datastr + self.cleanValueForNull(self.filterDiv.selects[i].value);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdatastr = datastr + \"</VALUE>\"\r\n\t\t\t\t\tdatastr = datastr + \"</VALUES>\"\r\n\t\t\t\t\tdatastr = datastr + '</ITEM>';\r\n\t\t\t\t}\r\n\t\t\t} catch (Error) {\r\n\t\t\t\tdatastr = previuosDat;\r\n\t\t\t}\r\n\t\t\tdatastr = datastr + \"</FILTERS>\";\r\n\t\t\tdatastr = datastr + \"</CONTEXT>\";\r\n\t\t\tdatastr = datastr + \"</DATA>\"\r\n\r\n\t\t\t\r\n\t\t\tself.fireOnItemClickEvent(self.QueryViewerCollection[IdForQueryViewerCollection], datastr)\r\n\t\t\t//qv.pivot.onItemClickEvent(self.QueryViewerCollection[IdForQueryViewerCollection], datastr, false)\r\n\t\t}\r\n\r\n\t\tthis.fireOnItemClickEvent = function(query, datastr){\r\n\t\t\tsetTimeout( function() {\r\n\t\t\t\tvar paramobj = {\"QueryViewer\": query, \"Data\": datastr, \"QueryviewerId\": self.IdForQueryViewerCollection};\r\n\t\t\t\tvar evt = document.createEvent(\"Events\")\r\n\t\t\t\tevt.initEvent(\"PivotTableOnItemClickEvent\", true, true);\r\n\t\t\t\tevt.parameter = paramobj;\r\n\t\t\t\tdocument.dispatchEvent(evt);\r\n\t\t\t}, 0)\r\n\t\t}\r\n\r\n\t\tthis.SelectNodes = function(SelectedValue, SelectedType, SelectedMorDNumber, SelectedItem, refresh, selectedItemNumber, conditions) {\r\n\r\n\t\t\tvar found = false;\r\n\r\n\t\t\tvar dataField = (SelectedType == \"DIMENSION\") ? self.columns[SelectedMorDNumber].getAttribute(\"dataField\") : measures[SelectedMorDNumber].getAttribute(\"dataField\");\r\n\r\n\t\t\tfor (var i = 0; i < jQuery(\"#\" + self.controlName + \"_\" + self.query + \" tr\").length && (!found); i++) {//search selected cell in every row\r\n\t\t\t\tvar tRow = jQuery(\"#\" + self.controlName + \"_\" + self.query + \" tr\")[i];\r\n\t\t\t\tfor (var j = 0; j < tRow.children.length && (!found); j++) {\r\n\t\t\t\t\tvar value = jQuery(tRow.children[j]).data('itemValue');\r\n\t\t\t\t\tvar type = jQuery(tRow.children[j]).data('typeMorD');\r\n\t\t\t\t\tvar number = jQuery(tRow.children[j]).data('numberMorD');\r\n\t\t\t\t\tvar item = jQuery(tRow.children[j]).data('itemInfo');\r\n\r\n\t\t\t\t\tif (item && (SelectedMorDNumber == number) && (SelectedType == type)) {\r\n\r\n\t\t\t\t\t\tif ((SelectedItem == \"GrandTotal\") && (item == \"GrandTotal\")) {\r\n\r\n\t\t\t\t\t\t\tif (OAT.IsNodeSelected(tRow.children[j])) {\r\n\t\t\t\t\t\t\t\tif (!refresh) {\r\n\t\t\t\t\t\t\t\t\tOAT.ClearSelectedNodes(jQuery(\"#\" + self.controlName + \"_\" + self.query));\r\n\t\t\t\t\t\t\t\t\tself.selection.SelectedNode = [];\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\t\tif (!refresh) {\r\n\t\t\t\t\t\t\t\t\tOAT.SetSelectedNodeBackgroundColor(tRow.children[j], self.selection.Color, jQuery(\"#\" + self.controlName + \"_\" + self.query))\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tOAT.SetNodeBackgroundColor(tRow.children[j], self.selection.Color)\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\tif (!refresh)\r\n\t\t\t\t\t\t\t\t\tself.selection.SelectedNode.push( {\r\n\t\t\t\t\t\t\t\t\t\tvalue : SelectedValue,\r\n\t\t\t\t\t\t\t\t\t\tdataField : dataField,\r\n\t\t\t\t\t\t\t\t\t\ttype : SelectedType,\r\n\t\t\t\t\t\t\t\t\t\trowData : [\"GrandTotal\"],\r\n\t\t\t\t\t\t\t\t\t\tclicked : true\r\n\t\t\t\t\t\t\t\t\t} );\r\n\r\n\t\t\t\t\t\t\t\tif (self.selection.EntireLine) {\r\n\t\t\t\t\t\t\t\t\t//select only data column\r\n\r\n\t\t\t\t\t\t\t\t\tselectedCellOffset = tRow.children[j].offsetLeft\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tvar firstRow = (self.colConditions.length > 0) ? self.colConditions.length + 1 : 0;\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tfor (var prevRow = firstRow+1; prevRow < jQuery(\"#\" + self.controlName + \"_\" + self.query + \" tr\").length; prevRow++) {\r\n\t\t\t\t\t\t\t\t\t\tvar row = jQuery(\"#\" + self.controlName + \"_\" + self.query + \" tr\")[prevRow];\r\n\t\t\t\t\t\t\t\t\t\tOAT.SelectAllRow(row, self.selection.Color)\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t} else if ((SelectedItem[0] == \"PtrTotals\") && (item != \"GrandTotal\") && (item.length > 0) && (SelectedType == \"MEASURE\")) {\r\n\t\t\t\t\t\t\tvar sameRow = ((SelectedItem[2].headers.length == item[2].headers.length) && (SelectedItem[3] == item[3]));\r\n\t\t\t\t\t\t\tif (sameRow) {\r\n\t\t\t\t\t\t\t\tfor (var h = 0; h < SelectedItem[2].headers.length; h++) {\r\n\t\t\t\t\t\t\t\t\tif (SelectedItem[2].headers[h].value != item[2].headers[h].value) {\r\n\t\t\t\t\t\t\t\t\t\tsameRow = false;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif (sameRow) {\r\n\t\t\t\t\t\t\t\tfound = true;\r\n\t\t\t\t\t\t\t\tif (OAT.IsNodeSelected(tRow.children[j])) {\r\n\t\t\t\t\t\t\t\t\tif (!refresh) {\r\n\t\t\t\t\t\t\t\t\t\tOAT.ClearSelectedNodes(jQuery(\"#\" + self.controlName + \"_\" + self.query));\r\n\t\t\t\t\t\t\t\t\t\tself.selection.SelectedNode = [];\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\t\t\tif (!refresh) {\r\n\t\t\t\t\t\t\t\t\t\tOAT.SetSelectedNodeBackgroundColor(tRow.children[j], self.selection.Color, jQuery(\"#\" + self.controlName + \"_\" + self.query))\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tOAT.SetNodeBackgroundColor(tRow.children[j], self.selection.Color)\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\tif (!refresh)\r\n\t\t\t\t\t\t\t\t\t\tself.selection.SelectedNode.push( {\r\n\t\t\t\t\t\t\t\t\t\t\tvalue : SelectedValue,\r\n\t\t\t\t\t\t\t\t\t\t\tdataField : dataField,\r\n\t\t\t\t\t\t\t\t\t\t\ttype : SelectedType,\r\n\t\t\t\t\t\t\t\t\t\t\trowData : [SelectedItem],\r\n\t\t\t\t\t\t\t\t\t\t\tclicked : true\r\n\t\t\t\t\t\t\t\t\t\t} );\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tif (self.selection.EntireLine) {\r\n\t\t\t\t\t\t\t\t\t\t//search first dimension subtotal/total\r\n\t\t\t\t\t\t\t\t\t\tvar foundTotal = false;\r\n\t\t\t\t\t\t\t\t\t\tfor (var posTotal = 0; posTotal < tRow.children.length && (!foundTotal); posTotal++) {\r\n\t\t\t\t\t\t\t\t\t\t\tvar typeTotal = jQuery(tRow.children[posTotal]).data('typeMorD');\r\n\t\t\t\t\t\t\t\t\t\t\tvar itemTotal = jQuery(tRow.children[posTotal]).data('itemInfo');\r\n\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\tif ((typeTotal == \"DIMENSION\") && (itemTotal[0]!=undefined) && (itemTotal[0] == \"PtrTotals\"))\r\n\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t\tOAT.SetNodeBackgroundColor(tRow.children[posTotal], self.selection.Color)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t\t//select items from the same row\r\n\t\t\t\t\t\t\t\t\t\t\t\tOAT.SelectAllRow(tRow, self.selection.Color, posTotal)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t\tselectedCellOffset = tRow.children[posTotal].offsetLeft\r\n\t\t\t\t\t\t\t\t\t\t\t\tselectedRowOffset = tRow.children[0].offsetLeft\r\n\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t\tvar exit = false;\r\n\t\t\t\t\t\t\t\t\t\t\t\tvar lastRow = -1;\r\n\t\t\t\t\t\t\t\t\t\t\t\tvar firstRow = (self.colConditions.length > 0) ? self.colConditions.length + 1 : 0;\r\n\t\t\t\t\t\t\t\t\t\t\t\tfor (var prevRow = i - 1; (prevRow > firstRow) && !exit; prevRow--) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvar row = jQuery(\"#\" + self.controlName + \"_\" + self.query + \" tr\")[prevRow];\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvar iterRowOffset = row.children[0].offsetLeft\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (jQuery(row.children[0]).hasClass(\"h2subtitle\")) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (iterRowOffset <= selectedRowOffset) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\texit = true;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlastRow = prevRow;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (!exit) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tOAT.SelectAllRow(row, self.selection.Color)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t\tfor (var prevRow = lastRow; prevRow >= 0; prevRow--) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvar topRow = jQuery(\"#\" + self.controlName + \"_\" + self.query + \" tr\")[prevRow];\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (!jQuery(topRow.children[0]).hasClass(\"h2subtitle\")) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfor (var iterTopRow = 0; iterTopRow < topRow.children.length; iterTopRow++) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar rowSpan = parseInt(jQuery(topRow.children[iterTopRow]).attr(\"rowspan\"));\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (prevRow + rowSpan > i) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tOAT.SetNodeBackgroundColor(topRow.children[iterTopRow], self.selection.Color)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t}\t\r\n\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else if (self.sameValue(SelectedValue, value, SelectedType, SelectedMorDNumber, SelectedItem)) {\r\n\r\n\t\t\t\t\t\t\tif ((SelectedItem.cell != undefined) && (SelectedItem.cell == item.cell)) {\r\n\t\t\t\t\t\t\t\tif (SelectedItem.row != undefined && item.row != undefined) {\r\n\t\t\t\t\t\t\t\t\tvar sameRow = (SelectedItem.row.headers.length == item.row.headers.length);\r\n\t\t\t\t\t\t\t\t\tfor (var h = 0; h < SelectedItem.row.headers.length; h++) {\r\n\t\t\t\t\t\t\t\t\t\tif (SelectedItem.row.headers[h].value != item.row.headers[h].value) {\r\n\t\t\t\t\t\t\t\t\t\t\tsameRow = false;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tif (sameRow) {\r\n\t\t\t\t\t\t\t\t\t\tfound = true;\r\n\t\t\t\t\t\t\t\t\t\tif (OAT.IsNodeSelected(tRow.children[j])) {\r\n\t\t\t\t\t\t\t\t\t\t\tif (!refresh) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tOAT.ClearSelectedNodes(jQuery(\"#\" + self.controlName + \"_\" + self.query));\r\n\t\t\t\t\t\t\t\t\t\t\t\tself.selection.SelectedNode = [];\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\t\t\t\t\tif (!refresh) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tOAT.SetSelectedNodeBackgroundColor(tRow.children[j], self.selection.Color, jQuery(\"#\" + self.controlName + \"_\" + self.query))\r\n\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\tOAT.SetNodeBackgroundColor(tRow.children[j], self.selection.Color)\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\tif (!refresh)\r\n\t\t\t\t\t\t\t\t\t\t\t\tself.selection.SelectedNode.push ({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue : SelectedValue,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tdataField : dataField,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype : SelectedType,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\trowData : [self.createDataRowFromItem(item, SelectedType)],\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclicked : true\r\n\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\t\t\t\t\tif (self.selection.EntireLine) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t//select items from the same row\r\n\t\t\t\t\t\t\t\t\t\t\t\tOAT.SelectAllRow(tRow, self.selection.Color, j);\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t//search previous rows\r\n\t\t\t\t\t\t\t\t\t\t\t\tfor (var prevRow = i - 1; prevRow >= 0; prevRow--) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvar topRow = jQuery(\"#\" + self.controlName + \"_\" + self.query + \" tr\")[prevRow];\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tfor (var iterTopRow = 0; iterTopRow < topRow.children.length; iterTopRow++) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar rowSpan = parseInt(jQuery(topRow.children[iterTopRow]).attr(\"rowspan\"));\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (prevRow + rowSpan > i) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tOAT.SetNodeBackgroundColor(topRow.children[iterTopRow], self.selection.Color)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t//search bellow rows\r\n\t\t\t\t\t\t\t\t\t\t\t\tvar selectedItemRowSpam = parseInt(jQuery(tRow.children[j]).attr(\"rowspan\"));\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (selectedItemRowSpam >= 1) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tfor (var postRow = i + 1; postRow < i + selectedItemRowSpam; postRow++) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar bellowRow = jQuery(\"#\" + self.controlName + \"_\" + self.query + \" tr\")[postRow];\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tOAT.SelectAllRow(bellowRow, self.selection.Color)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t//search for subtotals of selected item\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvar postRow = i + selectedItemRowSpam;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvar bellowRow = jQuery(\"#\" + self.controlName + \"_\" + self.query + \" tr\")[postRow];\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tif ((bellowRow != undefined) && jQuery(bellowRow.children[0]).hasClass(\"h2subtitle\") && !jQuery(bellowRow.children[0]).hasClass(\"grandtotaltitle\")) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tselectedCellOffset = tRow.children[j].offsetLeft\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\trowOffset = bellowRow.children[0].offsetLeft\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (rowOffset == selectedCellOffset) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tOAT.SelectAllRow(bellowRow, self.selection.Color)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\tif ((self.colConditions.length > 0) && (SelectedType == \"MEASURE\")) {\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tselectedCellOffset = tRow.children[j].offsetLeft\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tfor (var prevRow = 1; prevRow < jQuery(\"#\" + self.controlName + \"_\" + self.query + \" tr\").length; prevRow++) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (prevRow != i) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar exit = false\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar row = jQuery(\"#\" + self.controlName + \"_\" + self.query + \" tr\")[prevRow];\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfor (var iterRow = 0; iterRow < row.children.length && !exit; iterRow++) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar offsetIter = row.children[iterRow].offsetLeft + row.children[iterRow].offsetWidth\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (offsetIter > selectedCellOffset + 1){\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\texit = true;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tOAT.SetNodeBackgroundColor(row.children[iterRow], self.selection.Color)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else if ((SelectedItem[0] == \"PtrTotals\") && (SelectedItem[1] == item[1]) && (SelectedType == \"DIMENSION\")) {\r\n\t\t\t\t\t\t\t\tvar sameRow = ((SelectedItem[2].headers.length == item[2].headers.length) && (SelectedItem[3] == item[3]));\r\n\t\t\t\t\t\t\t\tif (sameRow) {\r\n\t\t\t\t\t\t\t\t\tfor (var h = 0; h < SelectedItem[2].headers.length; h++) {\r\n\t\t\t\t\t\t\t\t\t\tif (SelectedItem[2].headers[h].value != item[2].headers[h].value) {\r\n\t\t\t\t\t\t\t\t\t\t\tsameRow = false;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\tif (sameRow) {\r\n\t\t\t\t\t\t\t\t\tfound = true;\r\n\t\t\t\t\t\t\t\t\tif (OAT.IsNodeSelected(tRow.children[j])) {\r\n\t\t\t\t\t\t\t\t\t\tif (!refresh) {\r\n\t\t\t\t\t\t\t\t\t\t\tOAT.ClearSelectedNodes(jQuery(\"#\" + self.controlName + \"_\" + self.query));\r\n\t\t\t\t\t\t\t\t\t\t\tself.selection.SelectedNode = [];\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\t\t\t\tOAT.ClearSelectedNodes(jQuery(\"#\" + self.controlName + \"_\" + self.query));\r\n\r\n\t\t\t\t\t\t\t\t\t\tif (!refresh) {\r\n\t\t\t\t\t\t\t\t\t\t\tOAT.SetSelectedNodeBackgroundColor(tRow.children[j], self.selection.Color, jQuery(\"#\" + self.controlName + \"_\" + self.query))\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tOAT.SetNodeBackgroundColor(tRow.children[j], self.selection.Color)\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\tif (!refresh)\r\n\t\t\t\t\t\t\t\t\t\t\tself.selection.SelectedNode.push({\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalue : SelectedValue,\r\n\t\t\t\t\t\t\t\t\t\t\t\tdataField : dataField,\r\n\t\t\t\t\t\t\t\t\t\t\t\ttype : SelectedType,\r\n\t\t\t\t\t\t\t\t\t\t\t\trowData : [SelectedItem],\r\n\t\t\t\t\t\t\t\t\t\t\t\tclicked : true\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\t\t\t\tif (self.selection.EntireLine) {\r\n\t\t\t\t\t\t\t\t\t\t\t//select items from the same row\r\n\t\t\t\t\t\t\t\t\t\t\tOAT.SelectAllRow(tRow, self.selection.Color, j)\r\n\r\n\t\t\t\t\t\t\t\t\t\t\tselectedCellOffset = tRow.children[j].offsetLeft\r\n\t\t\t\t\t\t\t\t\t\t\tselectedRowOffset = tRow.children[0].offsetLeft\r\n\r\n\t\t\t\t\t\t\t\t\t\t\tvar exit = false;\r\n\t\t\t\t\t\t\t\t\t\t\tvar lastRow = -1;\r\n\t\t\t\t\t\t\t\t\t\t\tvar firstRow = (self.colConditions.length > 0) ? self.colConditions.length + 1 : 0;\r\n\t\t\t\t\t\t\t\t\t\t\tfor (var prevRow = i - 1; (prevRow > firstRow) && !exit; prevRow--) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tvar row = jQuery(\"#\" + self.controlName + \"_\" + self.query + \" tr\")[prevRow];\r\n\t\t\t\t\t\t\t\t\t\t\t\tvar iterRowOffset = row.children[0].offsetLeft\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (jQuery(row.children[0]).hasClass(\"h2subtitle\")) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (iterRowOffset <= selectedRowOffset) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\texit = true;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlastRow = prevRow;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (!exit) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tOAT.SelectAllRow(row, self.selection.Color)\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\tfor (var prevRow = lastRow; prevRow >= 0; prevRow--) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tvar topRow = jQuery(\"#\" + self.controlName + \"_\" + self.query + \" tr\")[prevRow];\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (!jQuery(topRow.children[0]).hasClass(\"h2subtitle\")) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tfor (var iterTopRow = 0; iterTopRow < topRow.children.length; iterTopRow++) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar rowSpan = parseInt(jQuery(topRow.children[iterTopRow]).attr(\"rowspan\"));\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (prevRow + rowSpan > i) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tOAT.SetNodeBackgroundColor(topRow.children[iterTopRow], self.selection.Color)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else if ((SelectedItem == \"EventSelection\")) {\r\n\r\n\t\t\t\t\t\t\t\tif (self.sameValue(SelectedValue, value, SelectedType, SelectedMorDNumber, SelectedItem)) {\r\n\r\n\t\t\t\t\t\t\t\t\tif (!jQuery(tRow.children[0]).hasClass(\"h2subtitle\") && !jQuery(tRow.children[j]).hasClass(\"gtotal\") && !jQuery(tRow.children[j]).hasClass(\"subtotal\")) {\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\tif (self.checkConditions(conditions, item)) {\r\n\r\n\t\t\t\t\t\t\t\t\t\t\tOAT.SetNodeBackgroundColor(tRow.children[j], self.selection.Color, jQuery(\"#\" + self.controlName + \"_\" + self.query))\r\n\r\n\t\t\t\t\t\t\t\t\t\t\tif (self.selection.SelectedNode.length <= selectedItemNumber) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tself.selection.SelectedNode.push({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue : SelectedValue,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tdataField : dataField,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype : SelectedType,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\trowData : [self.createDataRowFromItem(item, SelectedType)],\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclicked : false\r\n\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\tself.selection.SelectedNode[selectedItemNumber].rowData.push(self.createDataRowFromItem(item, SelectedType));\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\tif (self.selection.EntireLine) {\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\tOAT.SelectAllRow(tRow, self.selection.Color, j)\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\tfor (var pos = i - 1; pos > 0; pos--) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvar iterRow = jQuery(\"#\" + self.controlName + \"_\" + self.query + \" tr\")[pos];\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tfor (var cell = 0; cell < iterRow.children.length; cell++) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar rowSpan = parseInt(jQuery(iterRow.children[cell]).attr(\"rowspan\"));\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (pos + rowSpan > i) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tOAT.SetNodeBackgroundColor(iterRow.children[cell], self.selection.Color)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\tvar itemRowSpan = parseInt(jQuery(tRow.children[j]).attr(\"rowspan\"));\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (itemRowSpan >= 1) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tfor (var pos = i + 1; pos < i + itemRowSpan; pos++) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tOAT.SelectAllRow(jQuery(\"#\" + self.controlName + \"_\" + self.query + \" tr\")[pos], self.selection.Color)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvar pos = i + itemRowSpan;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvar iterRow = jQuery(\"#\" + self.controlName + \"_\" + self.query + \" tr\")[pos];\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tif ((iterRow != undefined) && jQuery(iterRow.children[0]).hasClass(\"h2subtitle\") && !jQuery(iterRow.children[0]).hasClass(\"grandtotaltitle\")) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tselectedCellOffset = tRow.children[j].offsetLeft\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\trowOffset = iterRow.children[0].offsetLeft\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (rowOffset == selectedCellOffset) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tOAT.SelectAllRow(iterRow, self.selection.Color)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\tif ((self.colConditions.length > 0) && (SelectedType == \"MEASURE\")) {\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tselectedCellOffset = tRow.children[j].offsetLeft\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tfor (var prevRow = 1; prevRow < jQuery(\"#\" + self.controlName + \"_\" + self.query + \" tr\").length; prevRow++) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (prevRow != i) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar exit = false\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar row = jQuery(\"#\" + self.controlName + \"_\" + self.query + \" tr\")[prevRow];\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfor (var iterRow = 0; iterRow < row.children.length && !exit; iterRow++) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar offsetIter = row.children[iterRow].offsetLeft + row.children[iterRow].offsetWidth\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (offsetIter > selectedCellOffset) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\texit = true;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tOAT.SetNodeBackgroundColor(row.children[iterRow], self.selection.Color)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t\r\n\t\t\r\n\t\tthis.getRowInitialShift = function(table, rowNumber){\r\n\t\t\tvar initialShift = 0;\r\n\t\t\t\r\n\t\t\tfor(var prevRow = rowNumber-1; prevRow >=0; prevRow--)\r\n\t\t\t{\r\n\t\t\t\t\tvar topRow = table[prevRow];\r\n\t\t\t\t\tfor (var iterTopRow = 0; iterTopRow < topRow.children.length; iterTopRow++){\r\n\t\t\t\t\t\tvar rowSpan = parseInt(jQuery(topRow.children[iterTopRow]).attr(\"rowspan\"));\r\n\t\t\t\t\t\tif (prevRow + rowSpan > rowNumber) {\r\n\t\t\t\t\t\t\tinitialShift=initialShift+1\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\treturn  initialShift;\r\n\t\t}\r\n\t\t\r\n\t\tthis.getCellPositionSpanWithSpans = function(table, rowNumber, posWithoutSpan)\r\n\t\t{\r\n\t\t\t\r\n\t\t\tvar row = table[rowNumber];\r\n\t\t\tvar position = 0;\r\n\t\t\tvar posWithSpan = posWithoutSpan;\r\n\t\t\t\r\n\t\t\tvar cellPos = 0;\r\n\t\t\tfor (var iterTopRow = 0; iterTopRow < row.children.length && position < posWithoutSpan; iterTopRow++)\r\n\t\t\t{\r\n\t\t\t\tvar colspan\t= parseInt(jQuery(row.children[iterTopRow]).attr(\"colspan\"));\r\n\t\t\t\tif (colspan > 1) {\r\n\t\t\t\t\t(posWithSpan < colspan) ? (posWithSpan = posWithSpan - (colspan)) : (posWithSpan = posWithSpan - (colspan),cellPos = cellPos + 1);\r\n\t\t\t\t\tposition = position + colspan; \r\n\t\t\t\t} else {\r\n\t\t\t\t\tposition = position + 1\r\n\t\t\t\t\tcellPos = cellPos + 1; \r\n\t\t\t\t}\r\n\t\t\t\t\t  \r\n\t\t\t}\r\n\t\t\treturn cellPos;\r\n\t\t}\r\n\t\t\r\n\t\tthis.RedrawSelectedNode = function() {\r\n\t\t\tif (self.selection.SelectedNode) {\r\n\r\n\t\t\t\tfor (var s = 0; s < self.selection.SelectedNode.length; s++) {\r\n\t\t\t\t\tvar SelectedMorDNumber;\r\n\t\t\t\t\tif (self.selection.SelectedNode[s].type == \"DIMENSION\") {\r\n\t\t\t\t\t\tfor (var i = 0; i < self.columns.length; i++) {\r\n\t\t\t\t\t\t\tif (self.selection.SelectedNode[s].dataField == self.columns[i].getAttribute(\"dataField\")) {\r\n\t\t\t\t\t\t\t\tSelectedMorDNumber = i;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tfor (var i = 0; i < measures.length; i++) {\r\n\t\t\t\t\t\t\tif (self.selection.SelectedNode[s].dataField == measures[i].getAttribute(\"dataField\")) {\r\n\t\t\t\t\t\t\t\tSelectedMorDNumber = i;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (self.selection.SelectedNode[s].rowData[0] == \"GrandTotal\") {\r\n\t\t\t\t\t\tself.SelectNodes(self.selection.SelectedNode[s].value, self.selection.SelectedNode[s].type, SelectedMorDNumber, \"GrandTotal\", true);\r\n\t\t\t\t\t} else if ((self.selection.SelectedNode[s].rowData[0].length > 0) && (self.selection.SelectedNode[s].rowData[0][0] == \"PtrTotals\")) {//sub total\r\n\t\t\t\t\t\tself.SelectNodes(self.selection.SelectedNode[s].value, self.selection.SelectedNode[s].type, SelectedMorDNumber, self.selection.SelectedNode[s].rowData[0], true);\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tfor (var i = 0; i < jQuery(\"#\" + self.controlName + \"_\" + self.query + \" tr\").length; i++) {//search selected cell in every row\r\n\t\t\t\t\t\t\tvar tRow = jQuery(\"#\" + self.controlName + \"_\" + self.query + \" tr\")[i];\r\n\t\t\t\t\t\t\tfor (var j = 0; j < tRow.children.length; j++) {\r\n\t\t\t\t\t\t\t\tvar value = jQuery(tRow.children[j]).data('itemValue');\r\n\t\t\t\t\t\t\t\tvar type = jQuery(tRow.children[j]).data('typeMorD');\r\n\t\t\t\t\t\t\t\tvar number = jQuery(tRow.children[j]).data('numberMorD');\r\n\t\t\t\t\t\t\t\tvar item = jQuery(tRow.children[j]).data('itemInfo');\r\n\r\n\t\t\t\t\t\t\t\tif ((self.sameValue(self.selection.SelectedNode[s].value, value, self.selection.SelectedNode[s].type, SelectedMorDNumber, item)) && (SelectedMorDNumber == number) && (self.selection.SelectedNode[s].type == type)) {\r\n\t\t\t\t\t\t\t\t\tif (item.row != undefined) {\r\n\t\t\t\t\t\t\t\t\t\tvar itemDataRow = self.createDataRowFromItem(item, type);\r\n\r\n\t\t\t\t\t\t\t\t\t\tfor (var v = 0; v < self.selection.SelectedNode[s].rowData.length; v++) {\r\n\r\n\t\t\t\t\t\t\t\t\t\t\tvar sameRow = true;\r\n\r\n\t\t\t\t\t\t\t\t\t\t\tfor (var t = 0; t < self.selection.SelectedNode[s].rowData[v].length; t++) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tif ((self.selection.SelectedNode[s].rowData[v][t] != undefined) && (itemDataRow[t] != undefined) && (!(self.filterIndexes.indexOf(t) > -1)) && (!(self.colConditions.indexOf(t) > -1))) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tif ((self.selection.SelectedNode[s].rowData[v][t] != \"[all]\") && (itemDataRow[t] != \"[all]\") && (self.selection.SelectedNode[s].rowData[v][t].trim() != itemDataRow[t].trim())) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsameRow = false;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\tif (sameRow)\r\n\t\t\t\t\t\t\t\t\t\t\t\tself.SelectNodes(self.selection.SelectedNode[s].value, self.selection.SelectedNode[s].type, SelectedMorDNumber, item, true, s);\r\n\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t\r\n\t\tthis.sameValue = function(val1, val2, type, NumberMorD, item){\r\n\t\t\ttry {\r\n\t\t\t\tvar sameValue = false;\r\n\t\t\t\tif (val2 != undefined){ \t \r\n\t\t\t\t\tvar dataType = (type == \"DIMENSION\") ? self.columns[NumberMorD].getAttribute(\"dataType\") : measures[NumberMorD].getAttribute(\"dataType\");\r\n\t\t\t\t\t\t \r\n\t\t\t\t\tif ((dataType == \"real\") || (dataType == \"integer\")){\r\n\t\t\t\t\t\tsameValue = (parseFloat(val1) == parseFloat(val2));\t\r\n\t\t\t\t\t\tif ((!sameValue) && (type == \"DIMENSION\") && (item[0] != undefined) && (item[0] == \"PtrTotals\") && (val1.trim() == val2.trim())) \r\n\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t \tsameValue = (val1.trim() == val2.trim());\t\r\n\t\t\t\t\t} \r\n\t\t\t\t}\r\n\t\t\t\treturn sameValue;\r\n\t\t\t} catch (error) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\tthis.checkConditions = function(conditions, item){\r\n\t\t\tvar sameRow = true;\r\n\t\t\tfor(var s = 0; s < conditions.length; s++){\r\n\t\t\t\tif (!item.row || !item.row.headers) return false;\r\n\t\t\t\tfor(var h = 0; h < item.row.headers.length; h++){\r\n\t\t\t\t\tif (item.row.headers[h].dataField == conditions[s].DataField){\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tvar numberMorD;\r\n\t\t\t\t\t\tfor (var i = 0; i < self.columns.length; i++) {\r\n\t\t\t\t\t\t\tif (item.row.headers[h].dataField  == self.columns[i].getAttribute(\"dataField\")) {\r\n\t\t\t\t\t\t\t\tnumberMorD = i;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (!self.sameValue(conditions[s].Value, item.row.headers[h].value, \"DIMENSION\", numberMorD, item))\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\treturn false\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tfor(var c = 0; c < item.row.cells.length; c++){\r\n\t\t\t\t\t//get dataField of cell\r\n\t\t\t\t\tvar numberMorD;\r\n\t\t\t\t\tvar nameMeasure;\r\n\t\t\t\t\tfor (var i = 0; i < measures.length; i++) {\r\n\t\t\t\t\t\tif (item.row.cells[c].dataField == measures[i].getAttribute(\"dataField\")) {\r\n\t\t\t\t\t\t\tnumberMorD = i;\r\n\t\t\t\t\t\t\tnameMeasure = measures[i].getAttribute(\"name\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (nameMeasure == conditions[s].Name){\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (!self.sameValue(conditions[s].Value, item.row.cells[c].value, \"MEASURE\", numberMorD, item))\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\treturn false\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\treturn sameRow;\r\n\t\t}\t\t\r\n\t\t\r\n\t\tthis.selectValue = function (selection) {\r\n\r\n\t\t\tOAT.ClearSelectedNodes(jQuery(\"#\" + self.controlName + \"_\" + self.query));\r\n\t\t\tself.selection.SelectedNode = [];\r\n\t\t\t\r\n\t\t\tvar s = -2;\t\t\t\r\n\t\t\tvar maxNumberMorD = -2\r\n\t\t\tvar MorD;\r\n\t\t\tvar numberMorD;\r\n\t\t\t\r\n\t\t\tfor (var t = 0; t < selection.length; t++)\r\n\t\t\t{\r\n\t\t\t\tvar tempMorD;\r\n\t\t\t\tvar tempnumberMorD;\r\n\t\t\t\tfor (var i = 0; i < measures.length; i++) {\r\n\t\t\t\t\tif (selection[t].Name == measures[i].getAttribute(\"name\")) {\r\n\t\t\t\t\t\ttempMorD = \"MEASURE\"\r\n\t\t\t\t\t\ttempnumberMorD = i;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor (var i = 0; i < self.columns.length; i++) {\r\n\t\t\t\t\tif (selection[t].Name == self.columns[i].getAttribute(\"name\")) {\r\n\t\t\t\t\t\ttempMorD = \"DIMENSION\"\r\n\t\t\t\t\t\ttempnumberMorD = i;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\t\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tif (self.rowConditions.indexOf(tempnumberMorD) >=  maxNumberMorD)\r\n\t\t\t\t{\r\n\t\t\t\t\ts = t;\r\n\t\t\t\t\tmaxNumberMorD = self.rowConditions.indexOf(tempnumberMorD);\r\n\t\t\t\t\tMorD = tempMorD;\r\n\t\t\t\t\tnumberMorD = tempnumberMorD;\r\n\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tself.SelectNodes(selection[s].Value, MorD, numberMorD, \"EventSelection\", false, 0, selection);\r\n\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\tthis.deselectValue = function(){\r\n\t\t\tOAT.ClearSelectedNodes(jQuery(\"#\" + self.controlName + \"_\" + self.query));\r\n\t\t\tself.selection.SelectedNode = [];\r\n\t\t}\r\n\t\t\r\n\t\tthis.createDataRowFromItem = function(item, type){\r\n\t\t\tvar row = item.row\r\n\t\t\tvar cellNumber = item.cell\r\n\t\t\tvar numRow = self.pageData.rows.indexOf(row)\r\n\t\t\tvar colPos = item.cell\r\n\t\t\tvar numCol = self.pageData.columnsHeaders[colPos]\r\n\r\n\t\t\tvar pseudoRow = [];\r\n\t\t\tfor (var i = 0; i < self.pageData.dataFields.length; i++) {\r\n\t\t\t\tpseudoRow[i] = undefined;\r\n\t\t\t}\r\n\t\t\tif ((row != undefined) && (row.headers != undefined)){\r\n\t\t\t\tfor (var i = 0; i < row.headers.length; i++) {\r\n\t\t\t\t\tvar pos = self.pageData.dataFields.indexOf(row.headers[i].dataField)\r\n\t\t\t\t\tif ((row.headers[i] != undefined) && (row.headers[i].value != undefined)) {\r\n\t\t\t\t\t\tpseudoRow[pos] = row.headers[i].value\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (type != \"DIMENSION\") {\r\n\t\t\t\t\r\n\t\t\t\tif (numCol != undefined){\r\n\t\t\t\t\tfor (var i = 0; i < numCol.subHeaders.length; i++) {\r\n\t\t\t\t\t\tif (numCol.subHeaders[i] != undefined) {\r\n\t\t\t\t\t\t\tvar pos = self.pageData.dataFields.indexOf(numCol.subHeaders[i].dataField)\r\n\t\t\t\t\t\t\tif (numCol.subHeaders[i].value != undefined) {\r\n\t\t\t\t\t\t\t\tpseudoRow[pos] = numCol.subHeaders[i].value\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tfor (var i = 0; i < self.filterIndexes.length; i++){\r\n\t\t\t\tpseudoRow[self.filterIndexes[i]] = self.filterDiv.selects[i].value;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn pseudoRow;\r\n\t\t}\r\n\t\t\r\n\t\tthis.ExpandCollapseHandle = function (elemvalue, eventName) {\r\n\t\t\tvar value = jQuery(elemvalue).data('itemValue');\r\n\t\t\tvar type = jQuery(elemvalue).data('typeMorD');\r\n\t\t\tvar number = jQuery(elemvalue).data('numberMorD');\r\n\t\t\tvar item = jQuery(elemvalue).data('itemInfo');\r\n\t\t\tvar datastr = \"<DATA event=\\\"\" + eventName + \"\\\"><ITEM \";\r\n\r\n\t\t\tdatastr = datastr + \"name=\\\"\" + columns[number].getAttribute(\"name\") + \"\\\" \";\r\n\t\t\tdatastr = datastr + \"displayName=\\\"\" + columns[number].getAttribute(\"displayName\") + \"\\\" \";\r\n\t\t\tdatastr = datastr + \">\";\r\n\t\t\tdatastr = datastr + self.cleanValueForNull(value)\r\n\t\t\tdatastr = datastr + \"</ITEM>\";\r\n\r\n\r\n\t\t\tdatastr = datastr + \"<CONTEXT>\";\r\n\t\t\tdatastr = datastr + \"<EXPANDEDVALUES>\";\r\n\t\t\tvar previuosDat = datastr;\r\n\t\t\ttry {\r\n\t\t\t\tif (item != \"\") {\r\n\t\t\t\t\tvar numRow\r\n\t\t\t\t\tif (item.row != undefined)\r\n\t\t\t\t\t\tnumRow = item.row;\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tnumRow = item[0];\r\n\r\n\t\t\t\t\tvar prevValues = [];\r\n\t\t\t\t\tfor (var iCV = 0; iCV < this.GeneralDataRows.length; iCV++) {\r\n\t\t\t\t\t\tif (prevValues.indexOf(this.GeneralDataRows[iCV][number]) == -1) {\r\n\t\t\t\t\t\t\tprevValues = prevValues.concat(this.GeneralDataRows[iCV][number])\r\n\t\t\t\t\t\t\tif (self.conditions[number].collapsedValues.indexOf(this.GeneralDataRows[iCV][number]) === -1) {\r\n\t\t\t\t\t\t\t\tdatastr = datastr + \"<VALUE>\" + self.cleanValueForNull(this.GeneralDataRows[iCV][number]) + \"</VALUE>\";\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} catch (Error) {\r\n\t\t\t\tdatastr = previuosDat;\r\n\t\t\t}\r\n\r\n\t\t\tdatastr = datastr + \"</EXPANDEDVALUES>\";\r\n\t\t\tdatastr = datastr + \"</CONTEXT>\";\r\n\t\t\tdatastr = datastr + \"</DATA>\"\r\n\r\n\t\t\treturn datastr;\r\n\t\t}\r\n\r\n\t\tthis.ExpandCollapseHandleWhenServerPagination = function (elemvalue, action) {\r\n\t\t\tif ((typeof (self.QueryViewerCollection[IdForQueryViewerCollection].ItemExpand) == 'function') || (qv.util.isGeneXusPreview())) {\r\n\t\t\t\tvar number = jQuery(elemvalue).data('numberMorD');\r\n\t\t\t\tif (self.conditions[number].previousPage >= self.conditions[number].totalPages) {\r\n\t\t\t\t\tvar datastr = self.ExpandCollapseHandleWhenServerPaginationCreateXML(elemvalue, action)\r\n\t\t\t\t\tdatastr = datastr.replace(/\\&/g, '&amp;');\r\n\t\t\t\t\t//if (qv.util.isGeneXusPreview())\r\n\t\t\t\t\t//window.external.SendText(self.QueryViewerCollection[self.IdForQueryViewerCollection].ControlName, datastr);\r\n\t\t\t\t\t//qv.pivot.onItemExpandCollapseEvent(self.QueryViewerCollection[IdForQueryViewerCollection], datastr, (action == \"collapse\"))\r\n\t\t\t\t\tself.fireOnItemExpandCollapseEvent(self.QueryViewerCollection[IdForQueryViewerCollection], datastr, (action == \"collapse\"))\r\n\t\t\t\t\tself.getDataForPivot(self.UcId, self.pageData.ServerPageNumber, self.rowsPerPage, true, \"\", \"\", \"\", \"\", true)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tself.lastColumnNumber = number;\r\n\t\t\t\t\tself.lastRequestAttributeValues = \"ExpandCollapse\"\r\n\t\t\t\t\tself.lastRequestAttributeValuesElemValue = elemvalue\r\n\t\t\t\t\tself.lastRequestAttributeValuesAction = action\r\n\t\t\t\t\tself.requestAttributeValues(self.columns[number].getAttribute(\"dataField\"), 1, 0, \"\")\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tself.getDataForPivot(self.UcId, self.pageData.ServerPageNumber, self.rowsPerPage, true, \"\", \"\", \"\", \"\", true);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.ExpandCollapseHandleWhenServerPaginationCreateXML = function (elemvalue, action) {\r\n\t\t\tvar value = jQuery(elemvalue).data('itemValue');\r\n\t\t\tvar type = jQuery(elemvalue).data('typeMorD');\r\n\t\t\tvar number = jQuery(elemvalue).data('numberMorD');\r\n\t\t\tvar item = jQuery(elemvalue).data('itemInfo');\r\n\r\n\t\t\tactionName = 'event=\"ItemExpand\"'\r\n\t\t\tif (action == \"collapse\") {\r\n\t\t\t\tactionName = 'event=\"ItemCollapse\"'\r\n\t\t\t}\r\n\r\n\t\t\tvar datastr = \"<DATA \" + actionName + \"><ITEM \";\r\n\r\n\t\t\tdatastr = datastr + \"name=\\\"\" + columns[number].getAttribute(\"name\") + \"\\\" \";\r\n\t\t\tdatastr = datastr + \"displayName=\\\"\" + columns[number].getAttribute(\"displayName\") + \"\\\" \";\r\n\t\t\tdatastr = datastr + \">\";\r\n\t\t\tdatastr = datastr + value\r\n\t\t\tdatastr = datastr + \"</ITEM>\";\r\n\r\n\r\n\t\t\tdatastr = datastr + \"<CONTEXT>\";\r\n\t\t\tdatastr = datastr + \"<EXPANDEDVALUES>\";\r\n\r\n\t\t\tfor (var ex = 0; ex < self.conditions[number].distinctValues.length; ex++) {\r\n\t\t\t\tif (self.conditions[number].collapsedValues.indexOf(self.conditions[number].distinctValues[ex]) == -1) {\r\n\t\t\t\t\tdatastr = datastr + \"<VALUE>\" + self.conditions[number].distinctValues[ex] + \"</VALUE>\"\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tdatastr = datastr + \"</EXPANDEDVALUES>\";\r\n\t\t\tdatastr = datastr + \"</CONTEXT>\";\r\n\t\t\tdatastr = datastr + \"</DATA>\"\r\n\r\n\t\t\treturn datastr;\r\n\t\t}\r\n\t\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\tthis.onFilteredChangedEventHandleWhenServerPagination = function (dimensionNumber) {\r\n\t\t\tif ((self.QueryViewerCollection[IdForQueryViewerCollection].FilterChanged) || (qv.util.isGeneXusPreview())) {\r\n\t\t\t\tif (self.conditions[dimensionNumber].previousPage >= self.conditions[dimensionNumber].totalPages) {\r\n\t\t\t\t\tself.onFilteredChangedEventHandleWhenServerPaginationCreateXML(dimensionNumber, self.conditions[dimensionNumber].distinctValues, self.conditions[dimensionNumber].blackList);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tself.lastColumnNumber = dimensionNumber;\r\n\t\t\t\t\tself.lastRequestAttributeValues = \"FilteredChanged\"\r\n\t\t\t\t\tself.requestAttributeValues(self.columns[dimensionNumber].getAttribute(\"dataField\"), 1, 0, \"\")\r\n\t\t\t\t\t\r\n\t\t\t\t\t/*self.QueryViewerCollection[self.IdForQueryViewerCollection].getAttributeValues((function (resJSON) {\r\n\t\t\t\t\t\tsetTimeout(function () {\r\n\t\t\t\t\t\t\tvar data = JSON.parse(resJSON);\r\n\t\t\t\t\t\t\tself.onFilteredChangedEventHandleWhenServerPaginationCreateXML(self.lastColumnNumber, data.NotNullValues, self.conditions[dimensionNumber].blackList);\r\n\t\t\t\t\t\t}, 200)\r\n\t\t\t\t\t}).closure(this), [self.columns[dimensionNumber].getAttribute(\"dataField\"), 1, 0, \"\"]);*/\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tthis.fireOnFilterChangedEvent = function(QueryviewerId, FilterChangedData){\r\n\t\t\tsetTimeout( function() {\r\n\t\t\t\tvar paramobj = {\"QueryviewerId\": QueryviewerId, \"FilterChangedData\": FilterChangedData};\r\n\t\t\t\tvar evt = document.createEvent(\"Events\")\r\n\t\t\t\tevt.initEvent(\"PivotTableOnFilterChangedEvent\", true, true);\r\n\t\t\t\tevt.parameter = paramobj;\r\n\t\t\t\tdocument.dispatchEvent(evt);\r\n\t\t\t}, 0)\r\n\t\t}\r\n\t\t\r\n\t\tthis.onFilteredChangedEventHandleWhenServerPaginationCreateXML = function (dimensionNumber, distinctValues, blackList) {\r\n\t\t\tvar datastr = \"<DATA event=\\\"FilterChanged\\\" name=\\\"\" + self.columns[dimensionNumber].getAttribute(\"name\") + \"\\\" displayName=\\\"\" + self.columns[dimensionNumber].getAttribute(\"displayName\") + \"\\\">\"\r\n\t\t\tfor (var i = 0; i < distinctValues.length; i++) {\r\n\t\t\t\tvar value = distinctValues[i]\r\n\t\t\t\tvar checked = true;\r\n\t\t\t\tif (self.conditions[dimensionNumber].state == \"all\") {\r\n\t\t\t\t\tchecked = true;\r\n\t\t\t\t} else if (self.conditions[dimensionNumber].state == \"none\") {\r\n\t\t\t\t\tchecked = false;\r\n\t\t\t\t} else if (self.conditions[dimensionNumber].blackList.indexOf(value) != -1) {\r\n\t\t\t\t\tchecked = false;\r\n\t\t\t\t} else if (distinctValues.indexOf(value) != -1) {\r\n\t\t\t\t\tchecked = true;\r\n\t\t\t\t} else if (self.conditions[dimensionNumber].defaultAction == \"Exclude\") {\r\n\t\t\t\t\tchecked = false;\r\n\t\t\t\t}\r\n\t\t\t\tif (checked) {\r\n\t\t\t\t\tdatastr = datastr + '<VALUE>' + value + '</VALUE>';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tdatastr = datastr + \"</DATA>\"\r\n\r\n\t\t\tif (qv.util.isGeneXusPreview())\r\n\t\t\t\twindow.external.SendText(self.QueryViewerCollection[self.IdForQueryViewerCollection].ControlName, datastr);\r\n\t\t\tif ((self.QueryViewerCollection[IdForQueryViewerCollection].FilterChanged)) {\r\n\t\t\t\tdatastr = datastr.replace(/\\&/g, '&amp;');\r\n\t\t\t\tvar xml_doc = qv.util.dom.xmlDocument(datastr);\r\n\t\t\t\tvar Node = qv.util.dom.selectXPathNode(xml_doc, \"/DATA\");\r\n\t\t\t\t/*self.QueryViewerCollection[IdForQueryViewerCollection].FilterChangedData = {}\r\n\t\t\t\tself.QueryViewerCollection[IdForQueryViewerCollection].FilterChangedData.Name = Node.getAttribute(\"name\");\r\n\t\t\t\tself.QueryViewerCollection[IdForQueryViewerCollection].FilterChangedData.SelectedValues = [];\r\n\t\t\t\tvar valueIndex = -1;\r\n\t\t\t\tfor (var i = 0; i < Node.childNodes.length; i++) {\r\n\t\t\t\t\tif (Node.childNodes[i].nodeName == \"VALUE\") {\r\n\t\t\t\t\t\tvalueIndex++;\r\n\t\t\t\t\t\tself.QueryViewerCollection[IdForQueryViewerCollection].FilterChangedData.SelectedValues[valueIndex] = Node.childNodes[i].firstChild.nodeValue;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tself.QueryViewerCollection[IdForQueryViewerCollection].FilterChanged();*/\r\n\t\t\t\tvar FilterChangedData = {}\r\n\t\t\t\tFilterChangedData.Name = Node.getAttribute(\"name\");\r\n\t\t\t\tFilterChangedData.SelectedValues = [];\r\n\t\t\t\tvar valueIndex = -1;\r\n\t\t\t\tfor (var i = 0; i < Node.childNodes.length; i++) {\r\n\t\t\t\t\tif (Node.childNodes[i].nodeName == \"VALUE\") {\r\n\t\t\t\t\t\tvalueIndex++;\r\n\t\t\t\t\t\tFilterChangedData.SelectedValues[valueIndex] = Node.childNodes[i].firstChild.nodeValue;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tself.fireOnFilterChangedEvent(IdForQueryViewerCollection, FilterChangedData)\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\tthis.onDragundDropEventHandle = function (conditionIndex, axis, position) {\r\n\t\t\tvar datastr = \"<DATA event=\\\"DragAndDrop\\\" name=\\\"\" + this.columns[conditionIndex].getAttribute(\"name\") + \"\\\" displayName=\\\"\" + this.columns[conditionIndex].getAttribute(\"displayName\") \r\n\t\t\t\t\t+ \"\\\" axis=\\\"\" + axis + \"\\\"  position=\\\"\" + (position+1) + \"\\\" />\"\r\n\t\t\t\tdatastr = datastr.replace(/\\&/g, '&amp;');\r\n\t\t\t\tself.fireOnDragundDropEvent(this.QueryViewerCollection[IdForQueryViewerCollection], datastr);\r\n\t\t\t\t//qv.pivot.onOAT_PIVOTDragAndDropEvent(this.QueryViewerCollection[IdForQueryViewerCollection], datastr);\r\n\r\n\t\t}\r\n\t\t\r\n\t\tthis.fireOnDragundDropEvent = function(query, datastr){\r\n\t\t\tsetTimeout( function() {\r\n\t\t\t\tvar paramobj = {\"QueryViewer\": query, \"Data\": datastr, \"QueryviewerId\": self.IdForQueryViewerCollection};\r\n\t\t\t\tvar evt = document.createEvent(\"Events\")\r\n\t\t\t\tevt.initEvent(\"PivotTableOnDragundDropEvent\", true, true);\r\n\t\t\t\tevt.parameter = paramobj;\r\n\t\t\t\tdocument.dispatchEvent(evt);\r\n\t\t\t}, 0)\r\n\t\t}\r\n\t\t\r\n\t\tthis.pivotStateChanged = function()\r\n\t\t{\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tfor (var iAI = 0; iAI < self.pageData.AxisInfo.length; iAI++)\r\n\t\t\t{\r\n\t\t\t\tif (self.pageData.AxisInfo[iAI].Axis.Type != self.initState.AxisInfo[iAI].Axis.Type) return true\r\n\t\t\t}\r\n\t\t\tfor (var iDI = 0; iDI < self.pageData.DataInfo.length; iDI++)\r\n\t\t\t{\r\n\t\t\t\tif (self.pageData.DataInfo[iDI].Axis.Type != self.initState.DataInfo[iDI].Axis.Type) return true\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (self.initState.CollapseInfo.length != self.pageData.CollapseInfo.length) return true\r\n\t\t\t\r\n\t\t\tvar initCollapseInfo = JSON.stringify(self.initState.CollapseInfo);\r\n\t\t\tvar actualCollapseInfo = JSON.stringify(self.pageData.CollapseInfo);\r\n\t\t\tif (initCollapseInfo!=actualCollapseInfo) return true;\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t\r\n\t\t\treturn false\r\n\t\t}\r\n\t\t\r\n\r\n\t\r\n\r\n\t\t\r\n\t\tself.initWhenServerPagination();\r\n\t\t\r\n\t\t\r\n\t}\r\n\ttry {\r\n\t\tOAT.Loader.featureLoaded(\"pivot\");\r\n\t} catch (ERROR) {\r\n\r\n\t}\r\n\r\n\r\n\tfunction sortUnidimensionalArray(arr, index, self) { /* sort distinct values of a condition */\r\n\t\t//var months = [\"january\", \"february\", \"march\", \"april\", \"may\", \"june\", \"july\", \"august\", \"september\", \"october\", \"november\", \"december\"];\r\n\t\tvar sortFunc;\r\n\t\tvar coef = 1;\r\n\t\tvar numSort = function (a, b) {\r\n\t\t\tif (a == b) { return 0; }\r\n\t\t\treturn coef * (parseInt(a) > parseInt(b) ? 1 : -1);\r\n\t\t}\r\n\t\tvar dictSort = function (a, b) {\r\n\t\t\tif (a == b) { return 0; }\r\n\t\t\treturn coef * (a > b ? 1 : -1);\r\n\t\t}\r\n\r\n\r\n\t\t//new code\r\n\t\tvar sortInt = true;\r\n\t\tfor (var ival = 0; ival < arr.length; ival++) {\r\n\t\t\tif ((sortInt) && (arr[ival] != parseInt(arr[ival]))) {\r\n\t\t\t\tsortInt = false;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (sortInt) { sortFunc = numSort; } else { sortFunc = dictSort; } //decides the type of sorting\r\n\t\t//end new code\r\n\t\tvar testValue = arr[0];\r\n\r\n\t\t//if (months.find(testValue.toString().toLowerCase()) != -1) { sortFunc = dateSort; }\r\n\r\n\t\tarr.sort(sortFunc);\r\n\r\n\t\t//when custom order \r\n\t\tfor (var h = 0; h < self.columns[index].childNodes.length; h++) {\r\n\t\t\tif ((self.columns[index].childNodes[h] != undefined) &&\r\n\t\t\t\t(self.columns[index].childNodes[h].localName != undefined) &&\r\n\t\t\t\t(self.columns[index].childNodes[h].localName === \"customOrder\")) {\r\n\t\t\t\tarr = []\r\n\t\t\t\tfor (var n = 0; n < self.columns[index].childNodes[h].childNodes.length; n++) {\r\n\t\t\t\t\tif (self.columns[index].childNodes[h].childNodes[n].localName == \"Value\") {\r\n\t\t\t\t\t\tarr.push(self.columns[index].childNodes[h].childNodes[n].textContent);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\r\n\t\treturn arr;\r\n\t} /* sort */\r\n\r\n\tfunction fillGeneralDistinctValues(numConds, self, rows) {\r\n\t\tself.GeneralDistinctValues = [];\r\n\t\tfor (var i = 0; i < numConds; i++) {\r\n\t\t\tvar elems = [];\r\n\t\t\tfor (var j = 0; j < rows.length; j++) {\r\n\t\t\t\tif (rows[j][i] == undefined) {\r\n\t\t\t\t\tif (elems.indexOf(\" \") == -1) {\r\n\t\t\t\t\t\telems.push(\" \");\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (elems.indexOf(rows[j][i]) == -1) {\r\n\t\t\t\t\t\telems.push(rows[j][i]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tself.GeneralDistinctValues[i] = sortUnidimensionalArray(elems, i, self);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction fromUndefinedToBlanck(dataRows) {\r\n\t\tfor (var i = 0; i < dataRows.length; i++) {\r\n\t\t\tfor (var j = 0; j < dataRows[i].length; j++) {\r\n\t\t\t\tif (dataRows[i][j] == undefined) {\r\n\t\t\t\t\tdataRows[i][j] = \" \";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t\r\n\tfunction notInBlackListB(row, conditions) {\r\n\t\tvar esta = false;\r\n\t\tfor (var i = 0; i < row.length; i++) {\r\n\t\t\tif ((conditions[i] != undefined) && (conditions[i].blackList != undefined) && (conditions[i].blackList.indexOf(row[i]) != -1)) {\r\n\t\t\t\testa = true;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn esta;\r\n\t}\r\n\r\n\r\n\tfunction belongToCollection(row, rowCollection) {\r\n\t\tfor (var j = 0; j < rowCollection.length; j++) {\r\n\t\t\tvar coincide = true;\r\n\t\t\tfor (var i = 0; i < row.length - measures.length; i++) {\r\n\t\t\t\tif (rowCollection[j][i] != row[i]) {\r\n\t\t\t\t\tcoincide = false;\r\n\t\t\t\t}\r\n\t\t\t\tif (!coincide) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (coincide) return true;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\t\r\n\r\n\tfunction getMeasureNumberByName(name, measures) {\r\n\t\tvar number = 0;\r\n\t\tfor (var i = 0; i < measures.length; i++) {\r\n\t\t\tif (measures[i].getAttribute(\"displayName\") == name) {\r\n\t\t\t\treturn i\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn 0\r\n\t}\r\n\r\n\tfunction getMeasureNumberByDataField(dataField, measures) {\r\n\t\tvar number = 0;\r\n\t\tfor (var i = 0; i < measures.length; i++) {\r\n\t\t\tif (measures[i].getAttribute(\"dataField\") == dataField) {\r\n\t\t\t\treturn i\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn 0\r\n\t}\r\n\r\n\r\n\r\n\tfunction getValueMeasureFromMeasureList(measureList, rowNumber, fg, filterData, cantMeasures) {\r\n\t\tfor (var itMl = 0; itMl < measureList.length; itMl++) {\r\n\t\t\tif ((measureList[itMl][fg] != undefined) && (measureList[itMl][fg][1] != undefined) && (measureList[itMl][fg][1][0] == rowNumber)) {\r\n\t\t\t\treturn measureList[itMl][fg][0]\r\n\t\t\t}\r\n\t\t}\r\n\t\t//when is not in the measure list search in filterData\r\n\t\treturn filterData[rowNumber][filterData[0].length - cantMeasures + fg]\r\n\t}\r\n\r\n\r\n\t\r\n\r\n\r\n\r\n\tOAT.Statistics = {\r\n\t\tlist: [{\r\n\t\t\tlongDesc: \"Count\",\r\n\t\t\tshortDesc: \"COUNT\",\r\n\t\t\tfunc: \"count\"\r\n\t\t}, {\r\n\t\t\tlongDesc: \"Sum\",\r\n\t\t\tshortDesc: \"SUM\",\r\n\t\t\tfunc: \"sum\"\r\n\t\t}, {\r\n\t\t\tlongDesc: \"Product\",\r\n\t\t\tshortDesc: \"PRODUCT\",\r\n\t\t\tfunc: \"product\"\r\n\t\t}, {\r\n\t\t\tlongDesc: \"Arithmetic mean\",\r\n\t\t\tshortDesc: \"MEAN\",\r\n\t\t\tfunc: \"amean\"\r\n\t\t}, {\r\n\t\t\tlongDesc: \"Maximum\",\r\n\t\t\tshortDesc: \"MAX\",\r\n\t\t\tfunc: \"max\"\r\n\t\t}, {\r\n\t\t\tlongDesc: \"Minimum\",\r\n\t\t\tshortDesc: \"MIN\",\r\n\t\t\tfunc: \"min\"\r\n\t\t}, {\r\n\t\t\tlongDesc: \"Distinct values\",\r\n\t\t\tshortDesc: \"DISTINCT\",\r\n\t\t\tfunc: \"distinct\"\r\n\t\t}, {\r\n\t\t\tlongDesc: \"Variance\",\r\n\t\t\tshortDesc: \"VAR\",\r\n\t\t\tfunc: \"variance\"\r\n\t\t}, {\r\n\t\t\tlongDesc: \"Standard deviation\",\r\n\t\t\tshortDesc: \"STDDEV\",\r\n\t\t\tfunc: \"deviation\"\r\n\t\t}, {\r\n\t\t\tlongDesc: \"Median\",\r\n\t\t\tshortDesc: \"MEDIAN\",\r\n\t\t\tfunc: \"median\"\r\n\t\t}, {\r\n\t\t\tlongDesc: \"Mode\",\r\n\t\t\tshortDesc: \"MODE\",\r\n\t\t\tfunc: \"mode\"\r\n\t\t}],\r\n\t\tcount: function (a) {\r\n\t\t\treturn a.length\r\n\t\t},\r\n\t\tsum: function (a) {\r\n\t\t\tif (a == \"#FoE#\") return \"#NaV#\"\r\n\t\t\tvar allNuN = (a.length > 0);\r\n\t\t\tfor (var c = 0, b = 0; b < a.length; b++) {\r\n\t\t\t\tif (a[b] != \"#NuN#\") allNuN = false;\r\n\t\t\t\tif (!isNaN(a[b]))\r\n\t\t\t\t\tc += a[b];\r\n\t\t\t}\r\n\t\t\tif (allNuN) return \"#NuN#\"\r\n\t\t\treturn c\r\n\t\t},\r\n\t\tproduct: function (a) {\r\n\t\t\tfor (var c = 1, b = 0; b < a.length; b++)\r\n\t\t\t\tc *= a[b];\r\n\t\t\treturn c\r\n\t\t},\r\n\t\tamean: function (a) {\r\n\t\t\tfor (var c = 0, b = 0; b < a.length; b++)\r\n\t\t\t\tc += a[b];\r\n\t\t\treturn c = a.length ? c / a.length : 0\r\n\t\t},\r\n\t\tmax: function (a) {\r\n\t\t\tfor (var c = Number.MIN_VALUE, b = 0; b < a.length; b++)a[b] > c && (c = a[b]);\r\n\t\t\treturn c\r\n\t\t},\r\n\t\tmin: function (a) {\r\n\t\t\tfor (var c = Number.MAX_VALUE, b = 0; b < a.length; b++)a[b] < c && (c = a[b]);\r\n\t\t\treturn c\r\n\t\t},\r\n\t\tdistinct: function (a) {\r\n\t\t\tfor (var c = 0, b = {}, d = 0; d < a.length; d++)\r\n\t\t\t\tb[a[d]] = 1;\r\n\t\t\tfor (p in b)\r\n\t\t\t\tc++;\r\n\t\t\treturn c\r\n\t\t},\r\n\t\tdeviation: function (a) {\r\n\t\t\ta = OAT.Statistics.variance(a);\r\n\t\t\treturn Math.sqrt(a)\r\n\t\t},\r\n\t\tvariance: function (a) {\r\n\t\t\tif (2 > a.length)\r\n\t\t\t\treturn 0;\r\n\t\t\tfor (var c = 0, b = OAT.Statistics.amean(a), d = 0; d < a.length; d++)\r\n\t\t\t\tc += (a[d] - b) * (a[d] - b);\r\n\t\t\treturn c / (a.length - 1)\r\n\t\t},\r\n\t\tmedian: function (a) {\r\n\t\t\treturn a.sort(function (a, b) { return a - b })[Math.floor(a.length / 2)]\r\n\t\t},\r\n\t\tmode: function (a) {\r\n\t\t\tfor (var c = {}, b = 0; b < a.length; b++) {\r\n\t\t\t\tvar d = a[b] + \"\";\r\n\t\t\t\td in c ? c[d]++ : c[d] = 1\r\n\t\t\t}\r\n\t\t\tvar a = 0, b = \"\", e;\r\n\t\t\tfor (e in c) d = c[e], d > a && (a = d, b = e);\r\n\t\t\treturn parseFloat(b)\r\n\t\t}\r\n\t};\r\n\ttry {\r\n\t\tOAT.Loader.featureLoaded(\"statistics\");\r\n\t} catch (ERROR) {\r\n\r\n\t}\r\n\r\n\tOAT.WinData = {\r\n\t\tTYPE_TEMPLATE: -1,\r\n\t\tTYPE_AUTO: 0,\r\n\t\tTYPE_MS: 1,\r\n\t\tTYPE_MAC: 2,\r\n\t\tTYPE_ROUND: 3,\r\n\t\tTYPE_RECT: 4,\r\n\t\tTYPE_ODS: 5\r\n\t};\r\n\tOAT.Win = function (a) {\r\n\t\tvar b = this;\r\n\t\tthis.options = {\r\n\t\t\ttitle: \"\",\r\n\t\t\tx: 0,\r\n\t\t\ty: 0,\r\n\t\t\tvisibleButtons: \"cmMfr\",\r\n\t\t\tenabledButtons: \"cmMfr\",\r\n\t\t\tinnerWidth: 0,\r\n\t\t\tinnerHeight: 0,\r\n\t\t\touterWidth: 350,\r\n\t\t\touterHeight: !1,\r\n\t\t\tstackGroupBase: 100,\r\n\t\t\ttype: OAT.WinData.TYPE_AUTO,\r\n\t\t\ttemplate: !1,\r\n\t\t\tclassName: !1\r\n\t\t};\r\n\t\tfor (var c in a)\r\n\t\t\tthis.options[c] = a[c];\r\n\t\tb.dom = {\r\n\t\t\tbuttons: {\r\n\t\t\t\tc: !1,\r\n\t\t\t\tm: !1,\r\n\t\t\t\tM: !1,\r\n\t\t\t\tf: !1,\r\n\t\t\t\tr: !1\r\n\t\t\t},\r\n\t\t\tcontainer: !1,\r\n\t\t\tcontent: !1,\r\n\t\t\ttitle: !1,\r\n\t\t\tcaption: !1,\r\n\t\t\tstatus: !1,\r\n\t\t\tresizeContainer: !1\r\n\t\t};\r\n\t\tb.moveTo = function (a, c) {\r\n\t\t\tb.dom.container.style.left = a + \"px\";\r\n\t\t\tb.dom.container.style.top = c + \"px\"\r\n\t\t};\r\n\t\tb.innerResizeTo = function () {\r\n\t\t};\r\n\t\tb.outerResizeTo = function () {\r\n\t\t};\r\n\t\tb.show = function () {\r\n\t\t\tdocument.body.appendChild(b.dom.container);\r\n\t\t\tOAT.Dom.show(b.dom.container)\r\n\t\t};\r\n\t\tb.hide = function () {\r\n\t\t\tOAT.Dom.hide(b.dom.container)\r\n\t\t};\r\n\t\tb.close = b.hide();\r\n\t\tb.minimize = function () {\r\n\t\t};\r\n\t\tb.maximize = function () {\r\n\t\t};\r\n\t\tb.flip = function () {\r\n\t\t};\r\n\t\tb.accomodate = function (a) {\r\n\t\t\ta = OAT.Dom.getWH(a);\r\n\t\t\tb.innerResizeTo(a[0], a[1])\r\n\t\t};\r\n\t\tb.options.type == OAT.WinData.TYPE_TEMPLATE && OAT.WinTemplate(b);\r\n\t\tb.options.type == OAT.WinData.TYPE_MS && OAT.WinMS(b);\r\n\t\tb.options.type == OAT.WinData.TYPE_MAC && OAT.WinMAC(b);\r\n\t\tb.options.type == OAT.WinData.TYPE_RECT && OAT.WinRECT(b, a.containerQuery);\r\n\t\tb.options.type == OAT.WinData.TYPE_ROUND && OAT.WinROUND(b);\r\n\t\tb.options.type == OAT.WinData.TYPE_ODS && OAT.WinODS(b);\r\n\t\t-1 != b.options.enabledButtons.indexOf(\"m\") && b.dom.buttons.m && OAT.Dom.attach(b.dom.buttons.m, \"click\", b.minimize);\r\n\t\t-1 != b.options.enabledButtons.indexOf(\"M\") && b.dom.buttons.M && OAT.Dom.attach(b.dom.buttons.M, \"click\", b.maximize);\r\n\t\t-1 != b.options.enabledButtons.indexOf(\"c\") && b.dom.buttons.c && OAT.Dom.attach(b.dom.buttons.c, \"click\", b.hide);\r\n\t\t-1 != b.options.enabledButtons.indexOf(\"f\") && b.dom.buttons.f && OAT.Dom.attach(b.dom.buttons.f, \"click\", b.flip);\r\n\t\t-1 != b.options.enabledButtons.indexOf(\"r\") && b.dom.buttons.r && OAT.Resize.create(b.dom.buttons.r, b.dom.resizeContainer, OAT.Resize.TYPE_XY);\r\n\t\tb.dom.title && OAT.Drag.create(b.dom.title, b.dom.container);\r\n\t\tb.moveTo(b.options.x, b.options.y);\r\n\t\t(b.options.outerWidth || b.options.outerHeight) && b.outerResizeTo(b.options.outerWidth, b.options.outerHeight);\r\n\t\t(b.options.innerWidth || b.options.innerHeight) && b.innerResizeTo(b.options.innerWidth, b.options.innerHeight);\r\n\t\tb.dom.caption && (OAT.addTextNode(b.dom.caption, b.options));\r\n\t\tb.options.stackGroupBase && OAT.WinManager.addWindow(b.options.stackGroupBase, b.dom.container);\r\n\t\tb.hide()\r\n\t};\r\n\tOAT.WinTemplate = function (a) {\r\n\t\tvar b = a.options.template;\r\n\t\tif (b) {\r\n\t\t\tfor (var c = \"function\" == typeof b ? b() : OAT.$(b).cloneNode(!0), g = {\r\n\t\t\t\toat_w_ctr: \"container\",\r\n\t\t\t\toat_w_title_ctr: \"title\",\r\n\t\t\t\toat_w_title_t_ctr: \"caption\",\r\n\t\t\t\toat_w_content: \"content\",\r\n\t\t\t\toat_w_max_b: [\"buttons\", \"M\"],\r\n\t\t\t\toat_w_min_b: [\"buttons\", \"m\"],\r\n\t\t\t\toat_w_close_b: [\"buttons\", \"c\"],\r\n\t\t\t\toat_w_flip_b: [\"buttons\", \"f\"],\r\n\t\t\t\toat_w_resize_handle: [\"buttons\", \"r\"]\r\n\t\t\t}, e = [c], b = c.getElementsByTagName(\"*\"), c = 0; c < b.length; c++)\r\n\t\t\t\te.push(b[c]);\r\n\t\t\tfor (c = 0; c < e.length; c++) {\r\n\t\t\t\tvar b = e[c], f;\r\n\t\t\t\tfor (f in g)\r\n\t\t\t\t\tif (OAT.Dom.isClass(b, f)) {\r\n\t\t\t\t\t\tvar d = g[f];\r\n\t\t\t\t\t\td instanceof Array ? a.dom[d[0]][d[1]] = b : a.dom[d] = b\r\n\t\t\t\t\t}\r\n\t\t\t}\r\n\t\t\ta.moveTo = function (b, c) {\r\n\t\t\t\ta.dom.container.style.left = b + \"px\";\r\n\t\t\t\ta.dom.container.style.top = c + \"px\"\r\n\t\t\t};\r\n\t\t\ta.outerResizeTo = function (b, c) {\r\n\t\t\t\ta.dom.container.style.width = b ? b + \"px\" : \"auto\";\r\n\t\t\t\ta.dom.container.style.height = c ? c + \"px\" : \"auto\"\r\n\t\t\t};\r\n\t\t\ta.innerResizeTo = function (b, c) {\r\n\t\t\t\ta.dom.content.style.width = b ? b + \"px\" : \"auto\";\r\n\t\t\t\ta.dom.content.style.height = c ? c + \"px\" : \"auto\"\r\n\t\t\t}\r\n\t\t} else\r\n\t\t\talert(\"OAT Window cannot be created, as a template is required but not specified!\")\r\n\t};\r\n\tOAT.WinMS = function (a) {\r\n\t\tOAT.Style.include(\"winms.css\");\r\n\t\ta.dom.container = OAT.Dom.create(\"div\", {\r\n\t\t\tposition: \"absolute\"\r\n\t\t}, \"oat_winms_container\");\r\n\t\ta.dom.resizeContainer = a.dom.container;\r\n\t\ta.dom.content = OAT.Dom.create(\"div\", {}, \"oat_winms_content\");\r\n\t\ta.dom.title = OAT.Dom.create(\"div\", {}, \"oat_winms_title\");\r\n\t\ta.dom.caption = OAT.Dom.create(\"span\", {}, \"oat_winms_caption\");\r\n\t\ta.dom.status = OAT.Dom.create(\"div\", {}, \"oat_winms_status\");\r\n\t\tOAT.Dom.append([a.dom.container, a.dom.title, a.dom.content, a.dom.status]);\r\n\t\t-1 != a.options.visibleButtons.indexOf(\"c\") && (a.dom.buttons.c = OAT.Dom.create(\"div\", {}, \"oat_winms_close_b\"), OAT.Dom.append([a.dom.title, a.dom.buttons.c]));\r\n\t\t-1 != a.options.visibleButtons.indexOf(\"M\") && (a.dom.buttons.M = OAT.Dom.create(\"div\", {}, \"oat_winms_max_b\"), OAT.Dom.append([a.dom.title, a.dom.buttons.M]));\r\n\t\t-1 != a.options.visibleButtons.indexOf(\"m\") && (a.dom.buttons.m = OAT.Dom.create(\"div\", {}, \"oat_winms_min_b\"), OAT.Dom.append([a.dom.title, a.dom.buttons.m]));\r\n\t\t-1 != a.options.visibleButtons.indexOf(\"r\") && (a.dom.buttons.r = OAT.Dom.create(\"div\", {}, \"oat_winms_resize_b\"), OAT.Dom.append([a.dom.container, a.dom.buttons.r]));\r\n\t\tOAT.Dom.append([a.dom.title, a.dom.caption]);\r\n\t\ta.outerResizeTo = function (b, c) {\r\n\t\t\ta.dom.container.style.width = b ? b + \"px\" : \"auto\";\r\n\t\t\ta.dom.container.style.height = c ? c + \"px\" : \"auto\"\r\n\t\t}\r\n\t};\r\n\tOAT.WinMAC = function (a) {\r\n\t\tOAT.Style.include(\"winmac.css\");\r\n\t\ta.dom.container = OAT.Dom.create(\"div\", {\r\n\t\t\tposition: \"absolute\"\r\n\t\t}, \"oat_winmac_container\");\r\n\t\ta.dom.resizeContainer = a.dom.container;\r\n\t\ta.dom.content = OAT.Dom.create(\"div\", {}, \"oat_winmac_content\");\r\n\t\ta.dom.title = OAT.Dom.create(\"div\", {}, \"oat_winmac_title\");\r\n\t\ta.dom.caption = OAT.Dom.create(\"span\", {}, \"oat_winmac_caption\");\r\n\t\ta.dom.status = OAT.Dom.create(\"div\", {}, \"oat_winmac_status\");\r\n\t\tOAT.Dom.append([a.dom.container, a.dom.title, a.dom.content, a.dom.status]);\r\n\t\ta.dom.buttons.lc = OAT.Dom.create(\"div\", {}, \"oat_winmac_leftCorner\");\r\n\t\tOAT.Dom.append([a.dom.title, a.dom.buttons.lc]);\r\n\t\ta.dom.buttons.rc = OAT.Dom.create(\"div\", {}, \"oat_winmac_rightCorner\");\r\n\t\tOAT.Dom.append([a.dom.title, a.dom.buttons.rc]);\r\n\t\t-1 != a.options.visibleButtons.indexOf(\"c\") && (a.dom.buttons.c = OAT.Dom.create(\"div\", {}, \"oat_winmac_close_b\"), OAT.Dom.append([a.dom.title, a.dom.buttons.c]));\r\n\t\t-1 != a.options.visibleButtons.indexOf(\"M\") && (a.dom.buttons.M = OAT.Dom.create(\"div\", {}, \"oat_winmac_max_b\"), OAT.Dom.append([a.dom.title, a.dom.buttons.M])); -1 != a.options.visibleButtons.indexOf(\"m\") && (a.dom.buttons.m = OAT.Dom.create(\"div\", {}, \"oat_winmac_min_b\"), OAT.Dom.append([a.dom.title, a.dom.buttons.m]));\r\n\t\t-1 != a.options.visibleButtons.indexOf(\"r\") && (a.dom.buttons.r = OAT.Dom.create(\"div\", {}, \"oat_winmac_resize_b\"), OAT.Dom.append([a.dom.container, a.dom.buttons.r]));\r\n\t\tOAT.Dom.append([a.dom.title, a.dom.caption]);\r\n\t\ta.outerResizeTo = function (b, c) {\r\n\t\t\ta.dom.container.style.width = b ? b + \"px\" : \"auto\";\r\n\t\t\ta.dom.container.style.height = c ? c - 8 + \"px\" : \"auto\"\r\n\t\t}\r\n\t};\r\n\tOAT.WinRECT = function (a, className) {\r\n\t\t//OAT.Style.include(\"winrect.css\");\r\n\t\tif (className != undefined)\r\n\t\t\ta.dom.container = OAT.Dom.create(\"div\", {\r\n\t\t\t\tposition: \"absolute\"\r\n\t\t\t}, className + \" oat_winrect_container\");\r\n\t\telse\r\n\t\t\ta.dom.container = OAT.Dom.create(\"div\", {\r\n\t\t\t\tposition: \"absolute\"\r\n\t\t\t}, \"oat_winrect_container\");\r\n\r\n\t\ta.dom.resizeContainer = a.dom.container;\r\n\t\t//a.dom.content = OAT.Dom.create(\"div\", {}, \"oat_winrect_content\");\r\n\r\n\t\t\r\n\t\tif ( OAT.isSD() ) {\r\n\t\t\ta.dom.content = OAT.Dom.create(\"div\", {}, \"oat_winrect_content oat_winrect_content_small\");\r\n\t\t\ta.dom.title = OAT.Dom.create(\"div\", {}, \"oat_winrect_title oat_winrect_title_small\");\r\n\t\t} else {\r\n\t\t\ta.dom.content = OAT.Dom.create(\"div\", {}, \"oat_winrect_content\");\r\n\t\t\ta.dom.title = OAT.Dom.create(\"div\", {}, \"oat_winrect_title\");\r\n\t\t}\r\n\r\n\r\n\t\ta.dom.caption = OAT.Dom.create(\"span\", {}, \"oat_winrect_caption\");\r\n\t\ta.dom.status = OAT.Dom.create(\"div\", {}, \"oat_winrect_status\");\r\n\r\n\t\tOAT.Dom.append([a.dom.container, a.dom.title, a.dom.content, a.dom.status]);\r\n\r\n\t\tif ( OAT.isSD() ) {\r\n\t\t\ta.dom.buttons.c = OAT.Dom.create(\"div\", {}, \"oat_winrect_close_b oat_winrect_close_small\");\r\n\t\t} else {\r\n\t\t\ta.dom.buttons.c = OAT.Dom.create(\"div\", {}, \"oat_winrect_close_b\");\r\n\t\t}\r\n\t\tOAT.addImageNode(a.dom.buttons.c, \"close\", \"\");\r\n\r\n\t\tOAT.Dom.append([a.dom.title, a.dom.buttons.c]);\r\n\r\n\t\ta.outerResizeTo = function (b, c) {\r\n\t\t\ta.dom.container.style.width = b ? b + \"px\" : \"auto\";\r\n\t\t\ta.dom.container.style.height = c ? c + \"px\" : \"auto\"\r\n\t\t}\r\n\t};\r\n\tOAT.WinROUND = function (a) {\r\n\t\tOAT.Style.include(\"winround.css\");\r\n\t\ta.dom.container = OAT.Dom.create(\"div\", {\r\n\t\t\tposition: \"absolute\"\r\n\t\t}, \"oat_winround_container\");\r\n\t\ta.dom.resizeContainer = a.dom.container;\r\n\t\ta.dom.table = OAT.Dom.create(\"table\", {}, \"oat_winround_wrapper\");\r\n\t\ta.dom.tr_t = OAT.Dom.create(\"tr\", {});\r\n\t\ta.dom.td_lt = OAT.Dom.create(\"td\", {}, \"oat_winround_lt\");\r\n\t\ta.dom.td_t = OAT.Dom.create(\"td\", {}, \"oat_winround_t\");\r\n\t\ta.dom.td_rt = OAT.Dom.create(\"td\", {}, \"oat_winround_rt\");\r\n\t\ta.dom.tr_m = OAT.Dom.create(\"tr\", {});\r\n\t\ta.dom.td_l = OAT.Dom.create(\"td\", {}, \"oat_winround_l\");\r\n\t\ta.dom.td_m = OAT.Dom.create(\"td\", {}, \"oat_winround_m\");\r\n\t\ta.dom.td_r = OAT.Dom.create(\"td\", {}, \"oat_winround_r\");\r\n\t\ta.dom.tr_b = OAT.Dom.create(\"tr\", {});\r\n\t\ta.dom.td_lb = OAT.Dom.create(\"td\", {}, \"oat_winround_lb\");\r\n\t\ta.dom.td_b = OAT.Dom.create(\"td\", {}, \"oat_winround_b\");\r\n\t\ta.dom.td_rb = OAT.Dom.create(\"td\", {}, \"oat_winround_rb\");\r\n\t\ta.dom.content = OAT.Dom.create(\"div\", {}, \"oat_winround_content\");\r\n\t\ta.dom.title = OAT.Dom.create(\"div\", {}, \"oat_winround_title\");\r\n\t\ta.dom.caption = OAT.Dom.create(\"span\", {}, \"oat_winround_caption\");\r\n\t\ta.dom.status = OAT.Dom.create(\"div\", {}, \"oat_winround_status\");\r\n\t\t-1 != a.options.visibleButtons.indexOf(\"c\") && (a.dom.buttons.c = OAT.Dom.create(\"div\", {}, \"oat_winround_close_b\"), OAT.Dom.append([a.dom.title, a.dom.buttons.c]));\r\n\t\t-1 != a.options.visibleButtons.indexOf(\"r\") && (a.dom.buttons.r = OAT.Dom.create(\"div\", {}, \"oat_winround_resize_b\"), OAT.Dom.append([a.dom.td_rb, a.dom.buttons.r]));\r\n\t\tOAT.Dom.append([a.dom.title, a.dom.caption]);\r\n\t\tOAT.Browser.isIE ? (\r\n\t\t\tOAT.addTextNode(a.dom.container, '<table class=\"oat_winround_wrapper\"><tr><td class=\"oat_winround_lt\"></td><td class=\"oat_winround_t\"></td><td class=\"oat_winround_rt\"></td></tr><tr><td class=\"oat_winround_l\"></td><td class=\"oat_winround_m\"></td><td class=\"oat_winround_r\"></td></tr><tr><td class=\"oat_winround_lb\"></td><td class=\"oat_winround_b\"></td><td class=\"oat_winround_rb\"></td></tr></table>'),\r\n\t\t\ta.dom.container.childNodes[0].childNodes[0].childNodes[0].childNodes[1].appendChild(a.dom.title), a.dom.container.childNodes[0].childNodes[0].childNodes[1].childNodes[1].appendChild(a.dom.content), a.dom.container.childNodes[0].childNodes[0].childNodes[2].childNodes[1].appendChild(a.dom.status), a.dom.container.childNodes[0].childNodes[0].childNodes[2].childNodes[2].appendChild(a.dom.buttons.r)) : (OAT.Dom.append([a.dom.tr_t, a.dom.td_lt, a.dom.td_t, a.dom.td_rt]), OAT.Dom.append([a.dom.tr_m, a.dom.td_l, a.dom.td_m, a.dom.td_r]), OAT.Dom.append([a.dom.tr_b, a.dom.td_lb, a.dom.td_b, a.dom.td_rb]), OAT.Dom.append([a.dom.table, a.dom.tr_t, a.dom.tr_m, a.dom.tr_b]), OAT.Dom.append([a.dom.td_t, a.dom.title]), OAT.Dom.append([a.dom.td_m, a.dom.content]), OAT.Dom.append([a.dom.td_b, a.dom.status]), OAT.Dom.append([a.dom.container, a.dom.table]));\r\n\t\ta.outerResizeTo = function (b, c) {\r\n\t\t\ta.dom.container.style.width = b ? b + \"px\" : \"auto\";\r\n\t\t\ta.dom.container.style.height = c ? c + \"px\" : \"auto\"\r\n\t\t}\r\n\t};\r\n\tOAT.WinODS = function (a) {\r\n\t\tOAT.Style.include(\"winods.css\");\r\n\t\ta.dom.container = OAT.Dom.create(\"div\", {\r\n\t\t\tposition: \"absolute\"\r\n\t\t}, \"oat_winods_container\");\r\n\t\ta.dom.resizeContainer = a.dom.container;\r\n\t\ta.dom.content = OAT.Dom.create(\"div\", {}, \"oat_winods_content\");\r\n\t\ta.dom.title = OAT.Dom.create(\"div\", {}, \"oat_winods_title\");\r\n\t\ta.dom.caption = OAT.Dom.create(\"span\", {}, \"oat_winods_caption\");\r\n\t\ta.dom.status = OAT.Dom.create(\"div\", {}, \"oat_winods_status\");\r\n\t\tOAT.Dom.append([a.dom.container, a.dom.title, a.dom.content, a.dom.status]);\r\n\t\t-1 != a.options.visibleButtons.indexOf(\"c\") && (a.dom.buttons.c = OAT.Dom.create(\"div\", {}, \"oat_winods_close_b\"), OAT.Dom.append([a.dom.title, a.dom.buttons.c]));\r\n\t\t-1 != a.options.visibleButtons.indexOf(\"r\") && (a.dom.buttons.r = OAT.Dom.create(\"div\", {}, \"oat_winods_resize_b\"), OAT.Dom.append([a.dom.container, a.dom.buttons.r]));\r\n\t\tOAT.Dom.append([a.dom.title, a.dom.caption]);\r\n\t\ta.outerResizeTo = function (b, c) {\r\n\t\t\ta.dom.container.style.width = b ? b + \"px\" : \"auto\";\r\n\t\t\ta.dom.container.style.height = c ? c + \"px\" : \"auto\"\r\n\t\t}\r\n\t};\r\n\tOAT.WinManager = {\r\n\t\tstackingGroups: {},\r\n\t\taddWindow: function (a, b) {\r\n\t\t\tif (a in OAT.WinManager.stackingGroups)\r\n\t\t\t\tvar c = OAT.WinManager.stackingGroups[a];\r\n\t\t\telse\r\n\t\t\t\tc = new OAT.Layers(a), OAT.WinManager.stackingGroups[a] = c\r\n\t\t\tc.addLayer(b, \"click\")\r\n\t\t},\r\n\t\tremoveWindow: function () {\r\n\t\t\tif (zI in OAT.WinManager.stackingGroups)\r\n\t\t\t\tvar a = OAT.WinManager.stackingGroups[zI];\r\n\t\t\telse\r\n\t\t\t\ta = new OAT.Layers(zI), OAT.WinManager.stackingGroups[zI] = a\r\n\t\t\ta.removeLayer(container)\r\n\t\t}\r\n\t};\r\n\ttry {\r\n\t\tOAT.Loader.featureLoaded(\"win\");\r\n\t} catch (ERROR) {\r\n\r\n\t}\r\n\r\n\tOAT.Resize = {\r\n\t\tTYPE_X: 1, TYPE_Y: 2, TYPE_XY: 3, element: [], mouse_x: 0, mouse_y: 0, move: function (a) {\r\n\t\t\tif (OAT.Resize.element.length) {\r\n\t\t\t\tfor (var e = a.clientX - OAT.Resize.mouse_x, f = a.clientY - OAT.Resize.mouse_y, b = 1, c = 0; c < OAT.Resize.element.length; c++) {\r\n\t\t\t\t\tvar d = OAT.Resize.element[c][0], d = OAT.Dom.getWH(d), i = OAT.Resize.element[c][2], g = e, h = f; switch (OAT.Resize.element[c][1]) {\r\n\t\t\t\t\t\tcase OAT.Resize.TYPE_X: h = 0; break; case -OAT.Resize.TYPE_X: g = -e; h = 0; break; case OAT.Resize.TYPE_Y: g = 0; break; case -OAT.Resize.TYPE_Y: g = 0; h = -f; break; case -OAT.Resize.TYPE_XY: g =\r\n\t\t\t\t\t\t\t-e, h = -f\r\n\t\t\t\t\t}i(d[0] + g, d[1] + h) && (b = 0)\r\n\t\t\t\t} if (b) {\r\n\t\t\t\t\tfor (c = 0; c < OAT.Resize.element.length; c++)switch (d = OAT.Resize.element[c][0], OAT.Resize.element[c][1]) { case OAT.Resize.TYPE_X: OAT.Dom.resizeBy(d, e, 0); break; case -OAT.Resize.TYPE_X: OAT.Dom.resizeBy(d, -e, 0); break; case OAT.Resize.TYPE_Y: OAT.Dom.resizeBy(d, 0, f); break; case -OAT.Resize.TYPE_Y: OAT.Dom.resizeBy(d, 0, -f); break; case OAT.Resize.TYPE_XY: OAT.Dom.resizeBy(d, e, f); break; case -OAT.Resize.TYPE_XY: OAT.Dom.resizeBy(d, -e, -f) }OAT.Resize.mouse_x = a.clientX; OAT.Resize.mouse_y =\r\n\t\t\t\t\t\ta.clientY\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}, up: function () { for (var a = 0; a < OAT.Resize.element.length; a++)OAT.Resize.element[a][3](); OAT.Resize.element = [] }, create: function (a, e, f, b, c) {\r\n\t\t\tvar d = OAT.$(a), a = OAT.$(e), e = function () { return !1 }, i = function () { return !1 }; b && (e = b); c && (i = c); switch (f) { case OAT.Resize.TYPE_XY: d.style.cursor = \"nw-resize\"; break; case OAT.Resize.TYPE_X: d.style.cursor = \"w-resize\"; break; case OAT.Resize.TYPE_Y: d.style.cursor = \"n-resize\" }b = function (a) {\r\n\t\t\t\tOAT.Resize.element = d._Resize_movers; OAT.Resize.mouse_x = a.clientX; OAT.Resize.mouse_y = a.clientY;\r\n\t\t\t\ta.cancelBubble = !0\r\n\t\t\t}; d._Resize_movers || (OAT.Dom.attach(d, \"mousedown\", b), d._Resize_movers = []); d._Resize_movers.push([a, f, e, i])\r\n\t\t}, remove: function (a, e) { var f = OAT.$(a); OAT.$(e); if (f._Resize_movers) { for (var b = -1, c = 0; c < f._Resize_movers.length; c++)f._Resize_movers[c][0] == e && (b = c); -1 != b && f._Resize_movers.splice(b, 1) } }, removeAll: function (a) { a = OAT.$(a); a._Resize_movers && (a._Resize_movers = []) }, createDefault: function (a, e, f) {\r\n\t\t\tif (OAT.Preferences.allowDefaultResize) {\r\n\t\t\t\tvar b = OAT.Dom.create(\"div\", {\r\n\t\t\t\t\tposition: \"absolute\", width: \"10px\",\r\n\t\t\t\t\theight: \"10px\", right: \"0px\", fontSize: \"1px\", bottom: \"0px\"\r\n\t\t\t\t}); a.appendChild(b); OAT.Resize.create(b, a, OAT.Resize.TYPE_XY, e, f); OAT.Dom.hide(b); var c = function () { b._Resize_pending && OAT.Dom.hide(b) }; OAT.Dom.attach(a, \"mouseover\", function () { OAT.Dom.show(b); b._Resize_pending = 0 }); OAT.Dom.attach(a, \"mouseout\", function () { b._Resize_pending = 1; setTimeout(c, 2E3) })\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tif(typeof document != \"undefined\") { \r\n\t\tOAT.Dom.attach(document, \"mousemove\", OAT.Resize.move);\r\n\t\tOAT.Dom.attach(document, \"mouseup\", OAT.Resize.up);\r\n\t}\r\n\ttry {\r\n\t\tOAT.Loader.featureLoaded(\"resize\");\r\n\t} catch (ERROR) {\r\n\r\n\t}\r\n\r\n\tOAT.XMLHTTP = function () {\r\n\t\tthis.obj = this.iframe = !1;\r\n\t\tthis.open = function (a, c, d) {\r\n\t\t\tthis.iframe ? this.temp_src = c : this.obj.open(a, c, d)\r\n\t\t};\r\n\t\tthis.send = function (a) {\r\n\t\t\tthis.iframe ? this.ifr.src = this.temp_src : this.obj.send(a)\r\n\t\t};\r\n\t\tthis.setResponse = function (a) {\r\n\t\t\tthis.iframe ? OAT.Dom.attach(this.ifr, \"load\", a) : this.obj.onreadystatechange = a\r\n\t\t};\r\n\t\tthis.getResponseText = function () {\r\n\r\n\t\t};\r\n\t\tthis.getResponseXML = function () {\r\n\t\t\treturn this.iframe ? (alert(\"IFRAME mode active -> XML data not supported\"), \"\") : this.obj.responseXML\r\n\t\t};\r\n\t\tthis.getReadyState = function () {\r\n\t\t\treturn this.iframe ? 4 : this.obj.readyState\r\n\t\t};\r\n\t\tthis.getStatus = function () {\r\n\t\t\treturn this.iframe ? 200 : this.obj.status\r\n\t\t};\r\n\t\tthis.setRequestHeader = function (a, c) {\r\n\t\t\tthis.iframe || this.obj.setRequestHeader(a, c)\r\n\t\t};\r\n\t\tthis.getAllResponseHeaders = function () {\r\n\t\t\treturn !this.iframe ? this.obj.getAllResponseHeaders() : {}\r\n\t\t};\r\n\t\tthis.isIframe = function () {\r\n\t\t\treturn this.iframe\r\n\t\t};\r\n\t\twindow.XMLHttpRequest ? this.obj = new XMLHttpRequest : window.ActiveXObject && (this.obj = new ActiveXObject(\"Microsoft.XMLHTTP\"));\r\n\t\tthis.obj || (this.iframe = !0, this.ifr = OAT.Dom.create(\"iframe\"), this.ifr.style.display = \"none\", this.ifr.src = \"javascript:;\", document.body.appendChild(this.ifr))\r\n\t};\r\n\tOAT.XMLHTTP_supported = function () {\r\n\t\treturn !(new OAT.XMLHTTP).isIframe()\r\n\t};\r\n\ttry {\r\n\t\tOAT.Loader.featureLoaded(\"ajax\");\r\n\t} catch (ERROR) {\r\n\r\n\t}\r\n\r\n\r\n\tOAT.AnchorData = { active: !1, window: !1 };\r\n\tOAT.Anchor = {\r\n\t\tappendContent: function (b) {\r\n\t\t\tif (b.content && b.window) {\r\n\t\t\t\t\"function\" == typeof b.content && (b.content = b.content());\r\n\t\t\t\tvar d = b.window;\r\n\t\t\t\tOAT.Dom.clear(d.dom.content);\r\n\t\t\t\td.dom.content.appendChild(b.content); OAT.Anchor.fixSize(d)\r\n\t\t\t}\r\n\t\t},\r\n\t\tcallForData: function (b, d) {\r\n\t\t\tvar e = b.window;\r\n\t\t\tb.stat = 1;\r\n\r\n\t\t\tb.status && (OAT.addTextNode(e.dom.status, b.status));\r\n\t\t\tvar a = b.datasource;\r\n\t\t\tif (a) {\r\n\t\t\ta.connection = b.connection; var f = b.elm.innerHTML, c = function () {\r\n\t\t\t\te.dom.caption.innerHTML = b.elm.innerHTML;\r\n\t\t\t\tif (b.title) e.dom.caption.innerHTML = b.title\r\n\t\t\t}; a.bindRecord(c); a.bindEmpty(c)\r\n\t\t\t}\r\n\t\t\tswitch (b.result_control) {\r\n\t\t\t\tcase \"grid\": c = new OAT.FormObject.grid(0, 0, 0, 1); c.showAll = !0; b.content = c.elm; c.elm.style.position = \"relative\"; c.init(); a.bindRecord(c.bindRecordCallback); a.bindPage(c.bindPageCallback); a.bindHeader(c.bindHeaderCallback); break; case \"form\": var h = !1; b.content = OAT.Dom.create(\"div\");\r\n\t\t\t\t\th = new OAT.Form(b.content, { onDone: function () { e.resizeTo(h.totalWidth + 5, h.totalHeight + 5); b.anchorTo(d[0], d[1]) } }); a.bindFile(function (a) {\r\n\t\t\t\t\t\ta = OAT.Xml.createXmlDoc(a);\r\n\t\t\t\t\t\th.createFromXML(a)\r\n\t\t\t\t\t}); break; case \"timeline\": c = new OAT.FormObject.timeline(0, 20, 0); b.content = c.elm; c.elm.style.position = \"relative\"; c.elm.style.width = b.width - 5 + \"px\"; c.elm.style.height = b.height - 65 + \"px\"; c.init(); for (var i = 0; i < c.datasources[0].fieldSets.length; i++)c.datasources[0].fieldSets[i].realIndexes = [i]; a.bindPage(c.bindPageCallback)\r\n\t\t\t}OAT.Anchor.appendContent(b); if (a) {\r\n\t\t\t\ta.options.query = a.options.query.replace(/\\$link_name/g, f); b.connection.options.endpoint = b.href; b.connection.options.url = b.href; switch (a.type) {\r\n\t\t\t\t\tcase OAT.DataSourceData.TYPE_SPARQL: f =\r\n\t\t\t\t\t\tnew OAT.SparqlQuery; f.fromString(a.options.query); f = f.variables.length ? \"format=xml\" : \"format=rdf\"; a.options.query = \"query=\" + encodeURIComponent(a.options.query) + \"&\" + f; break; case OAT.DataSourceData.TYPE_GDATA: a.options.query = a.options.query ? \"q=\" + encodeURIComponent(a.options.query) : \"\"\r\n\t\t\t\t}a.advanceRecord(0)\r\n\t\t\t}\r\n\t\t}, fixSize: function (b) {\r\n\t\t\tsetTimeout(\r\n\t\t\t\tfunction () {\r\n\t\t\t\t\t/*if(OAT.AJAX.requests.length)\r\n\t\t\t\t\t\tOAT.Anchor.fixSize(b);\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tfor(var d = OAT.Dom.getWH(b.dom.content)[1]; OAT.Dom.getWH(b.dom.content)[1] + 50 > OAT.Dom.getWH(b.dom.container)[1]; ) {650 > OAT.Dom.getWH(b.dom.container)[0] && (b.dom.container.style.width = OAT.Dom.getWH(b.dom.container)[0] + 100 + \"px\");\r\n\t\t\t\t\t\t\tif(d == OAT.Dom.getWH(b.dom.content)[1]) {\r\n\t\t\t\t\t\t\t\tb.dom.container.style.width = OAT.Dom.getWH(b.dom.container)[0] - 100 + \"px\";\r\n\t\t\t\t\t\t\t\t300 < OAT.Dom.getWH(b.dom.content)[1] && (b.dom.content.style.height = \"300px\", b.dom.content.style.overflow = \"auto\");\r\n\t\t\t\t\t\t\t\tb.dom.container.style.height = OAT.Dom.getWH(b.dom.content)[1] + 40 + \"px\";\r\n\t\t\t\t\t\t\t\tbreak\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\td = OAT.Dom.getWH(b.dom.content)[1]\r\n\t\t\t\t\t\t}*/\r\n\t\t\t\t}\r\n\t\t\t\t, 50)\r\n\t\t}\r\n\t\t, assign: function (b, d) {\r\n\t\t\tvar e = OAT.$(b),\r\n\t\t\t\ta = {\r\n\t\t\t\t\thref: !1,\r\n\t\t\t\t\tnewHref: \"javascript:void(0)\",\r\n\t\t\t\t\tconnection: !1,\r\n\t\t\t\t\tdatasource: !1,\r\n\t\t\t\t\tcontent: !1,\r\n\t\t\t\t\tstatus: !1,\r\n\t\t\t\t\ttitle: !1,\r\n\t\t\t\t\tresult_control: \"grid\",\r\n\t\t\t\t\tactivation: \"hover\",\r\n\t\t\t\t\twidth: 340,\r\n\t\t\t\t\theight: !1,\r\n\t\t\t\t\telm: e,\r\n\t\t\t\t\twindow: !1,\r\n\t\t\t\t\tarrow: !1,\r\n\t\t\t\t\ttype: OAT.WinData.TYPE_RECT,\r\n\t\t\t\t\tvisibleButtons: \"cr\",\r\n\t\t\t\t\tenabledButtons: \"cr\",\r\n\t\t\t\t\ttemplate: !1\r\n\t\t\t\t},\r\n\t\t\t\tf;\r\n\t\t\tfor (f in d)\r\n\t\t\t\ta[f] = d[f];\r\n\t\t\tvar c = new OAT.Win({\r\n\t\t\t\touterWidth: a.width,\r\n\t\t\t\touterHeight: a.height,\r\n\t\t\t\ttitle: \"\",\r\n\t\t\t\ttype: a.type,\r\n\t\t\t\tstatus: a.status,\r\n\t\t\t\tvisibleButtons: a.visibleButtons,\r\n\t\t\t\tenabledButtons: a.enabledButtons,\r\n\t\t\t\ttemplate: a.template,\r\n\t\t\t\tcontainerQuery: a.containerQuery\r\n\t\t\t});\r\n\t\t\tOAT.Dom.attach(c.dom.container, \"mouseover\", function () {\r\n\t\t\t\tvar a = OAT.AnchorData.active; a && \"hover\" == a.activation && a.endClose()\r\n\t\t\t});\r\n\t\t\tOAT.Dom.attach(c.dom.container, \"mouseout\", function () {\r\n\t\t\t\tvar a = OAT.AnchorData.active;\r\n\t\t\t\ta && \"hover\" == a.activation && a.startClose()\r\n\t\t\t});\r\n\t\t\tf = OAT.Dom.create(\"div\", {});\r\n\t\t\t//OAT.Dom.append([c.dom.container, f]);\r\n\r\n\t\t\t//a.arrow = f;\r\n\t\t\ta.window = c;\r\n\t\t\tc.close = function () {\r\n\t\t\t\tOAT.Dom.hide(c.dom.container)\r\n\t\t\t};\r\n\t\t\tc.onclose = c.close;\r\n\t\t\tc.close();\r\n\t\t\ta.stat = 0;\r\n\t\t\t!a.href && \"href\" in e && (a.href = e.href);\r\n\t\t\t\"a\" == e.tagName.toString().toLowerCase() && OAT.Dom.changeHref(e, a.newHref);\r\n\t\t\ta.displayRef = function (b) {\r\n\t\t\t\tvar c = a.window;\r\n\t\t\t\tc.hide();\r\n\t\t\t\tOAT.AnchorData.active = a;\r\n\t\t\t\tb = OAT.Dom.eventPos(b);\r\n\t\t\t\tOAT.AnchorData.window = c;\r\n\t\t\t\ta.stat ? OAT.Anchor.appendContent(a) : OAT.Anchor.callForData(a, b);\r\n\t\t\t\ta.activation == \"focus\" && (b = OAT.Dom.position(e));\r\n\t\t\t\ta.anchorTo(b[0], b[1]);\r\n\t\t\t\tc.show();\r\n\t\t\t\ta.anchorTo(b[0], b[1])\r\n\t\t\t};\r\n\t\t\ta.displayRef2 = function (b) {\r\n\t\t\t\tvar c = a.window;\r\n\t\t\t\tc.hide();\r\n\t\t\t\tOAT.AnchorData.active = a;\r\n\t\t\t\t//b = OAT.Dom.eventPos(b);\r\n\t\t\t\tOAT.AnchorData.window = c;\r\n\t\t\t\ta.stat ? OAT.Anchor.appendContent(a) : OAT.Anchor.callForData(a, b);\r\n\t\t\t\ta.activation == \"focus\" && (b = OAT.Dom.position(e));\r\n\t\t\t\ta.anchorTo(b[0], b[1]);\r\n\t\t\t\tc.show();\r\n\t\t\t\ta.anchorTo(b[0], b[1])\r\n\t\t\t};\r\n\t\t\ta.anchorTo = function (b, c) {\r\n\t\t\t\tvar e = a.window, d = OAT.Dom.getFreeSpace(b, c), f = OAT.Dom.getWH(e.dom.container);\r\n\t\t\t\tif (d[1])\r\n\t\t\t\t\tvar j = c - 30 - f[1], g = \"bottom\";\r\n\t\t\t\telse {\r\n\t\t\t\t\tj = c + 30;\r\n\t\t\t\t\tg = \"top\"\r\n\t\t\t\t}\r\n\t\t\t\tif (d[0]) {\r\n\t\t\t\t\td = b + 20 - f[0];\r\n\t\t\t\t\tg = g + \"right\"\r\n\t\t\t\t} else {\r\n\t\t\t\t\td = b - 30;\r\n\t\t\t\t\tg = g + \"left\"\r\n\t\t\t\t} d < 0 && (d = 10);\r\n\t\t\t\tj < 0 && (j = 10);\r\n\t\t\t\t//OAT.Dom.addClass(a.arrow, \"oat_anchor_arrow_\" + g);\r\n\t\t\t\te.moveTo(d, j - 20)\r\n\t\t\t};\r\n\t\t\ta.closeRef = function () {\r\n\r\n\t\t\t\tif (a.closeFlag) {\r\n\t\t\t\t\ta.window.hide();\r\n\t\t\t\t\tOAT.AnchorData.active = false\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\ta.close = function () { a.window.hide() };\r\n\t\t\ta.startClose = function () { a.closeFlag = 1; setTimeout(a.closeRef, 1E3) };\r\n\t\t\ta.endClose = function () { a.closeFlag = 0 };\r\n\t\t\tswitch (a.activation) {\r\n\t\t\t\tcase \"hover\": OAT.Dom.attach(e, \"mouseover\", a.displayRef);\r\n\t\t\t\t\tOAT.Dom.attach(e, \"mouseout\", a.startClose);\r\n\t\t\t\t\tbreak; case \"click\": OAT.Dom.attach(e, \"click\", a.displayRef);\r\n\t\t\t\t\tbreak; case \"dblclick\": OAT.Dom.attach(e, \"dblclick\", a.displayRef);\r\n\t\t\t\t\tbreak; case \"focus\": OAT.Dom.attach(e, \"focus\", a.displayRef), OAT.Dom.attach(e, \"blur\", a.close)\r\n\t\t\t}\r\n\r\n\t\t\treturn a\r\n\r\n\t\t},\r\n\r\n\r\n\t\tclose: function (b, d) {\r\n\t\t\tb = OAT.$(b);\r\n\t\t\t\"BODY\" != b.tagName && (b.className.match(/^oat_win.+_container$/) ? (OAT.Dom.hide(b), d && this.close(b.parentNode)) : this.close(b.parentNode))\r\n\t\t},\r\n\t\topenAnchor: function () {\r\n\t\t\tvar c = this.window;\r\n\t\t\tc.hide();\r\n\t\t\tOAT.AnchorData.active = this;\r\n\t\t\tb = OAT.Dom.eventPos(b);\r\n\t\t\tOAT.AnchorData.window = c;\r\n\t\t\ta.stat ? OAT.Anchor.appendContent(a) : OAT.Anchor.callForData(a, b);\r\n\t\t\ta.activation == \"focus\" && (b = OAT.Dom.position(e));\r\n\t\t\ta.anchorTo(b[0], b[1]);\r\n\t\t\tc.show();\r\n\t\t\ta.anchorTo(b[0], b[1])\r\n\t\t}\r\n\t};\r\n\ttry {\r\n\t\tOAT.Loader.featureLoaded(\"anchor\");\r\n\t} catch (ERROR) {\r\n\r\n\t}\r\n\r\n\r\n\tOAT.Animation = function (f, d) {\r\n\t\tvar b = this;\r\n\t\tthis.elm = OAT.$(f);\r\n\t\tthis.options = {\r\n\t\t\tdelay: 50,\r\n\t\t\tstartFunction: function () {\r\n\t\t\t},\r\n\t\t\tconditionFunction: function () {\r\n\t\t\t},\r\n\t\t\tstepFunction: function () {\r\n\t\t\t},\r\n\t\t\tstopFunction: function () {\r\n\t\t\t}\r\n\t\t};\r\n\t\tfor (var e in d)\r\n\t\t\tb.options[e] = d[e];\r\n\t\tthis.step = function () {\r\n\t\t\tsetTimeout(function () {\r\n\t\t\t\tb.running && (b.options.conditionFunction(b) ? (b.running = 0, b.options.stopFunction(b), OAT.MSG.send(b, OAT.MSG.ANIMATION_STOP, b)) : (b.options.stepFunction(b), b.step(b)))\r\n\t\t\t}, b.options.delay)\r\n\t\t};\r\n\t\tthis.start = function () {\r\n\t\t\tb.running = 1;\r\n\t\t\tb.options.startFunction(b);\r\n\t\t\tb.step()\r\n\t\t};\r\n\t\tthis.stop = function () {\r\n\t\t\tb.running = 0\r\n\t\t}\r\n\t};\r\n\tOAT.AnimationSize = function (f, d) {\r\n\t\tvar b = this;\r\n\t\tthis.options = {\r\n\t\t\twidth: -1,\r\n\t\t\theight: -1,\r\n\t\t\tdelay: 50,\r\n\t\t\tspeed: 1\r\n\t\t};\r\n\t\tfor (var e in d)\r\n\t\t\tb.options[e] = d[e];\r\n\t\tthis.animation = new OAT.Animation(f, {\r\n\t\t\tdelay: b.options.delay,\r\n\t\t\tstartFunction: function (a) {\r\n\t\t\t\ta.stepX = 0;\r\n\t\t\t\ta.stepY = 0;\r\n\t\t\t\tvar c = OAT.Dom.getWH(a.elm);\r\n\t\t\t\ta.width = c[0];\r\n\t\t\t\ta.height = c[1];\r\n\t\t\t\ta.diffX = -1 == b.options.width ? 0 : b.options.width - c[0];\r\n\t\t\t\ta.diffY = -1 == b.options.height ? 0 : b.options.height - c[1];\r\n\t\t\t\ta.signX = 0 <= a.diffX ? 1 : -1;\r\n\t\t\t\ta.signY = 0 <= a.diffY ? 1 : -1;\r\n\t\t\t\tvar c = a.diffX * a.diffX, d = a.diffY * a.diffY;\r\n\t\t\t\ta.stepX = a.signX * Math.sqrt(b.options.speed * b.options.speed * c / (c + d));\r\n\t\t\t\ta.stepY = a.signY * Math.sqrt(b.options.speed * b.options.speed * d / (c + d))\r\n\t\t\t},\r\n\t\t\tstopFunction: function (a) {\r\n\t\t\t-1 != b.options.width && (a.elm.style.width = b.options.width + \"px\");\r\n\t\t\t\t-1 != b.options.height && (a.elm.style.height = b.options.height + \"px\")\r\n\t\t\t},\r\n\t\t\tconditionFunction: function (a) {\r\n\t\t\t\tvar c = 0 < a.signX ? a.width >= b.options.width : a.width <= b.options.width, a = 0 < a.signY ? a.height >= b.options.height : a.height <= b.options.height;\r\n\t\t\t\t-1 == b.options.width && (c = 1);\r\n\t\t\t\t-1 == b.options.height && (a = 1);\r\n\t\t\t\treturn c && a\r\n\t\t\t},\r\n\t\t\tstepFunction: function (a) {\r\n\t\t\t\ta.width += a.stepX;\r\n\t\t\t\ta.height += a.stepY;\r\n\t\t\t\tvar c = parseInt(a.width), d = parseInt(a.height);\r\n\t\t\t\t-1 != b.options.width && (a.elm.style.width = (0 <= c ? c : 0) + \"px\");\r\n\t\t\t\t-1 != b.options.height && (a.elm.style.height = (0 <= d ? d : 0) + \"px\")\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.start = b.animation.start;\r\n\t\tthis.stop = b.animation.stop\r\n\t};\r\n\tOAT.AnimationPosition = function (f, d) {\r\n\t\tvar b = this;\r\n\t\tthis.options = {\r\n\t\t\tleft: -1,\r\n\t\t\ttop: -1,\r\n\t\t\tdelay: 50,\r\n\t\t\tspeed: 1\r\n\t\t};\r\n\t\tfor (var e in d)\r\n\t\t\tb.options[e] = d[e];\r\n\t\tthis.animation = new OAT.Animation(f, {\r\n\t\t\tdelay: b.options.delay,\r\n\t\t\tstartFunction: function (a) {\r\n\t\t\t\ta.stepX = 0;\r\n\t\t\t\ta.stepY = 0;\r\n\t\t\t\tvar c = OAT.Dom.getLT(a.elm);\r\n\t\t\t\ta.left = c[0];\r\n\t\t\t\ta.top = c[1];\r\n\t\t\t\ta.diffX = -1 == b.options.left ? 0 : b.options.left - c[0];\r\n\t\t\t\ta.diffY = -1 == b.options.top ? 0 : b.options.top - c[1];\r\n\t\t\t\ta.signX = 0 <= a.diffX ? 1 : -1;\r\n\t\t\t\ta.signY = 0 <= a.diffY ? 1 : -1;\r\n\t\t\t\tvar c = a.diffX * a.diffX, d = a.diffY * a.diffY;\r\n\t\t\t\ta.stepX = a.signX * Math.sqrt(b.options.speed * b.options.speed * c / (c + d));\r\n\t\t\t\ta.stepY = a.signY * Math.sqrt(b.options.speed * b.options.speed * d / (c + d))\r\n\t\t\t},\r\n\t\t\tstopFunction: function (a) {\r\n\t\t\t-1 != b.options.left && (a.elm.style.left = b.options.left + \"px\");\r\n\t\t\t\t-1 != b.options.top && (a.elm.style.top = b.options.top + \"px\")\r\n\t\t\t},\r\n\t\t\tconditionFunction: function (a) {\r\n\t\t\t\tvar c = 0 < a.signX ? a.left >= b.options.left : a.left <= b.options.left, a = 0 < a.signY ? a.top >= b.options.top : a.top <= b.options.top;\r\n\t\t\t\t-1 == b.options.left && (c = 1);\r\n\t\t\t\t-1 == b.options.top && (a = 1);\r\n\t\t\t\treturn c && a\r\n\t\t\t},\r\n\t\t\tstepFunction: function (a) {\r\n\t\t\t\ta.left += a.stepX;\r\n\t\t\t\ta.top += a.stepY;\r\n\t\t\t\tvar c = parseInt(a.left), d = parseInt(a.top);\r\n\t\t\t\t-1 != b.options.left && (a.elm.style.left = c + \"px\");\r\n\t\t\t\t-1 != b.options.top && (a.elm.style.top = d + \"px\")\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.start = b.animation.start;\r\n\t\tthis.stop = b.animation.stop\r\n\t};\r\n\tOAT.AnimationOpacity = function (f, d) {\r\n\t\tvar b = this;\r\n\t\tthis.options = {\r\n\t\t\topacity: 1,\r\n\t\t\tdelay: 50,\r\n\t\t\tspeed: 0.1\r\n\t\t};\r\n\t\tfor (var e in d)\r\n\t\t\tb.options[e] = d[e];\r\n\t\tthis.animation = new OAT.Animation(f, {\r\n\t\t\tdelay: b.options.delay,\r\n\t\t\tstartFunction: function (a) {\r\n\t\t\t\ta.opacity = 1;\r\n\t\t\t\t(!OAT.Dom.isKHTML() && navigator.userAgent.match(/Gecko/i)) && (a.opacity = parseFloat(OAT.Dom.style(a.elm, \"opacity\")));\r\n\t\t\t\tif (OAT.isIE()) {\r\n\t\t\t\t\tvar c = OAT.Dom.style(a.elm, \"filter\").match(/alpha\\(opacity=([^\\)]+)\\)/);\r\n\t\t\t\t\tc && (a.opacity = parseFloat(c[1]) / 100)\r\n\t\t\t\t}\r\n\t\t\t\ta.step_ = 1;\r\n\t\t\t\ta.diff = b.options.opacity - a.opacity;\r\n\t\t\t\ta.sign = 0 <= a.diff ? 1 : -1;\r\n\t\t\t\ta.step_ = a.sign * b.options.speed\r\n\t\t\t},\r\n\t\t\tstopFunction: function (a) {\r\n\t\t\t\tOAT.Style.opacity(a.elm, b.options.opacity)\r\n\t\t\t},\r\n\t\t\tconditionFunction: function (a) {\r\n\t\t\t\treturn 0 < a.sign ? a.opacity + 1.0E-4 >= b.options.opacity : a.opacity - 1.0E-4 <= b.options.opacity\r\n\t\t\t},\r\n\t\t\tstepFunction: function (a) {\r\n\t\t\t\ta.opacity += a.step_;\r\n\t\t\t\tOAT.Style.opacity(a.elm, a.opacity)\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.start = b.animation.start;\r\n\t\tthis.stop = b.animation.stop\r\n\t};\r\n\tOAT.AnimationCSS = function (f, d) {\r\n\t\tvar b = this;\r\n\t\tthis.options = {\r\n\t\t\tdelay: 50,\r\n\t\t\tproperty: !1,\r\n\t\t\tstart: 0,\r\n\t\t\tstep: 1,\r\n\t\t\tstop: 10\r\n\t\t};\r\n\t\tfor (var e in d)\r\n\t\t\tb.options[e] = d[e];\r\n\t\tthis.animation = new OAT.Animation(f, {\r\n\t\t\tdelay: b.options.delay,\r\n\t\t\tstartFunction: function (a) {\r\n\t\t\t\ta[b.options.property] = b.options.start;\r\n\t\t\t\ta.elm.style[b.options.property] = b.options.start\r\n\t\t\t},\r\n\t\t\tstopFunction: function (a) {\r\n\t\t\t\ta.elm.style[b.options.property] = b.options.stop\r\n\t\t\t},\r\n\t\t\tconditionFunction: function (a) {\r\n\t\t\t\treturn a[b.options.property] == b.options.stop\r\n\t\t\t},\r\n\t\t\tstepFunction: function (a) {\r\n\t\t\t\ta[b.options.property] += b.options.step;\r\n\t\t\t\ta.elm.style[b.options.property] = a[b.options.property]\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.start = b.animation.start;\r\n\t\tthis.stop = b.animation.stop\r\n\t};\r\n\ttry {\r\n\t\tOAT.Loader.featureLoaded(\"animation\");\r\n\t} catch (ERROR) {\r\n\r\n\t}\r\n\r\n\tOAT.getURL = function () {\r\n\t\ttry {\r\n\t\t\tvar dir = location.href.substring(0, location.href.lastIndexOf('\\/'));\r\n\t\t\tvar dom = dir;\r\n\t\t\tif (dom.substr(0, 7) == 'http:\\/\\/')\r\n\t\t\t\tdom = dom.substr(7);\r\n\t\t\tvar path = '';\r\n\t\t\tvar pos = dom.indexOf('\\/');\r\n\t\t\tif (pos > -1) {\r\n\t\t\t\tpath = dom.substr(pos + 1);\r\n\t\t\t\tdom = dom.substr(0, pos);\r\n\t\t\t}\r\n\t\t\tvar page = location.href.substring(dir.length + 1, location.href.length + 1);\r\n\t\t\tvar pos = page.indexOf('?');\r\n\t\t\tif (pos > -1) {\r\n\t\t\t\tpage = page.substring(0, pos);\r\n\t\t\t}\r\n\t\t\tpos = page.indexOf('#');\r\n\t\t\tif (pos > -1) {\r\n\t\t\t\tpage = page.substring(0, pos);\r\n\t\t\t}\r\n\t\t\tvar ext = '';\r\n\t\t\tpos = page.indexOf('.');\r\n\t\t\tif (pos > -1) {\r\n\t\t\t\text = page.substring(pos + 1);\r\n\t\t\t\tpage = page.substr(0, pos);\r\n\t\t\t}\r\n\t\t\tvar file = page;\r\n\t\t\tif (ext != '')\r\n\t\t\t\tfile += '.' + ext;\r\n\t\t\tif (file == '')\r\n\t\t\t\tpage = 'index';\r\n\t\t\targs = location.search.substr(1).split(\"?\");\r\n\r\n\t\t\treturn path + page;\r\n\t\t} catch (ERROR) {\r\n\t\t\treturn \"\";\r\n\t\t}\r\n\t}\r\n\r\n\tOAT.PartialSort = function (data, a, z, index, arrayLength, sortIntMemory) {\r\n\t\tvar partialArray = []\r\n\t\tfor (var p = 0; p <= z - a; p++) {\r\n\t\t\tpartialArray[p] = data[a + p]\r\n\t\t}\r\n\r\n\t\tif (sortIntMemory[index]) {\r\n\t\t\tpartialArray.sort((function (index) {\r\n\t\t\t\treturn function (a, b) {\r\n\t\t\t\t\treturn (parseInt(a[index]) === parseInt(b[index]) ? 0 : (parseInt(a[index]) < parseInt(b[index]) ? -1 : 1));\r\n\t\t\t\t};\r\n\t\t\t})(index));\r\n\t\t} else {\r\n\t\t\tpartialArray.sort((function (index) {\r\n\t\t\t\treturn function (a, b) {\r\n\t\t\t\t\treturn (a[index] === b[index] ? 0 : (a[index] < b[index] ? -1 : 1));\r\n\t\t\t\t};\r\n\t\t\t})(index));\r\n\t\t}\r\n\r\n\t\t//recursive call\r\n\t\tif (index < arrayLength - 1) {\r\n\t\t\tvar actualVal = partialArray[0][index];\r\n\t\t\tvar initPos = 0;\r\n\t\t\tfor (var i = 0; i < partialArray.length; i++) {\r\n\t\t\t\tif ((actualVal != partialArray[i][index])) {\r\n\t\t\t\t\tactualVal = partialArray[i][index]\r\n\t\t\t\t\tpartialArray = OAT.PartialSort(partialArray, initPos, i - 1, index + 1, arrayLength, sortIntMemory)\r\n\t\t\t\t\tinitPos = i;\r\n\t\t\t\t} else if ((i == partialArray.length - 1)) {\r\n\t\t\t\t\tpartialArray = OAT.PartialSort(partialArray, initPos, i, index + 1, arrayLength, sortIntMemory)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor (var p = a; p <= z; p++) {\r\n\t\t\tdata[p] = partialArray[p - a]\r\n\t\t}\r\n\t\treturn data\r\n\t}\r\n\r\n\r\n\r\n\r\n\r\n\tvar currPageNumber = [];\r\n\r\n\tOAT.partialTablePagination = function (container, settings) {\r\n\t\tvar defaults = {\r\n\t\t\t\trowsPerPage: 5,\r\n\t\t\t\tcurrPage: 1,\r\n\t\t\t\tjstype: \"pivot\",\r\n\t\t\t\toptionsForRows: [5, 10, 25, 50, 100],\r\n\t\t\t\tignoreRows: [],\r\n\t\t\t\ttopNav: false,\r\n\t\t\t\tcantPages: 10\r\n\t\t};\r\n\t\tsettings = jQuery.extend(defaults, settings);\r\n\t\t\r\n\t\treturn container.each(function () {\r\n\t\t\t\tvar table = jQuery(this)[0];\r\n\t\t\t\tvar totalPagesId, currPageId, rowsPerPageId, firstPageId, prevPageId, nextPageId, lastPageId;\r\n\t\t\t\ttotalPagesId = '#tablePagination_totalPages';\r\n\t\t\t\tcurrPageId = '#tablePagination_currPage';\r\n\t\t\t\trowsPerPageId = '#' + settings.controlName + 'tablePagination_rowsPerPage';\r\n\t\t\t\tfirstPageId = '#tablePagination_firstPage';\r\n\t\t\t\tprevPageId = '#tablePagination_prevPage';\r\n\t\t\t\tnextPageId = '#tablePagination_nextPage';\r\n\t\t\t\tlastPageId = '#tablePagination_lastPage';\r\n\t\t\t\tvar tblLocation = (defaults.topNav) ? \"prev\" : \"next\";\r\n\r\n\t\t\t\ttry {\r\n\t\t\t\t\tdefaults.rowsPerPage = parseInt(defaults.rowsPerPage);\r\n\t\t\t\t} catch (ERROR) {\r\n\t\t\t\t\tdefaults.rowsPerPage = 10;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar possibleTableRows = jQuery.makeArray(jQuery('tbody tr', table));\r\n\t\t\t\tvar tableRows = jQuery.grep(possibleTableRows, function (value, index) {\r\n\t\t\t\t\treturn (jQuery.inArray(value, defaults.ignoreRows) == -1);\r\n\t\t\t\t}, false)\r\n\r\n\t\t\t\tvar numRows = tableRows.length\r\n\t\t\t\tvar totalPages = resetTotalPages();\r\n\t\t\t\tcurrPageNumber[settings.controlName] = (defaults.currPage > totalPages) ? 1 : defaults.currPage;\r\n\t\t\t\tif (jQuery.inArray(defaults.rowsPerPage, defaults.optionsForRows) == -1)\r\n\t\t\t\t\tdefaults.optionsForRows.push(defaults.rowsPerPage);\r\n\r\n\t\t\t\tfunction resetTotalPages() {\r\n\t\t\t\t\treturn defaults.cantPages;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction resetCurrentPage(currPageNum, recalculateCantPages) {\t//sets current page value\r\n\t\t\t\t\tif (currPageNum < 1 || (currPageNum > jQuery(\"#\" + settings.controlName + \"_tablePagination_paginater #tablePagination_totalPages\")[0].innerHTML.replace(\"&nbsp;\", \"\")))\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\tcurrPageNumber[settings.controlName] = currPageNum;\r\n\t\t\t\t\tjQuery(table)[tblLocation]().find(currPageId).val(currPageNumber[settings.controlName]);\r\n\r\n\t\t\t\t\t(currPageNumber[settings.controlName] > 1) ? jQuery(\"#tablePagination_firstPage,#tablePagination_prevPage\").removeClass(\"disabled_pivot_button\") :\r\n\t\t\t\t\t\tjQuery(\"#tablePagination_firstPage,#tablePagination_prevPage\").addClass(\"disabled_pivot_button\");\r\n\r\n\t\t\t\t\t(currPageNumber[settings.controlName] != totalPages) ? jQuery(\"#tablePagination_nextPage,#tablePagination_lastPage\").removeClass(\"disabled_pivot_button\") :\r\n\t\t\t\t\t\tjQuery(\"#tablePagination_nextPage,#tablePagination_lastPage\").addClass(\"disabled_pivot_button\");\r\n\r\n\r\n\t\t\t\t\tif ((settings.control) && (settings.jstype == \"table\")) {\r\n\t\t\t\t\t\tvar cantRows = (recalculateCantPages) ? defaults.rowsPerPage : OAT_JS.grid.gridData[settings.controlUcId].rowsPerPage\r\n\t\t\t\t\t\tsettings.control.getDataForTable(settings.controlUcId, currPageNum, cantRows, recalculateCantPages, \"\", \"\", \"\", \"\", \"\", true)\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tsetTimeout ( function(){\r\n\t\t\t\t\t\t\ttotalPages = settings.control.getActualCantPages(settings.controlUcId);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t(currPageNumber[settings.controlName] != totalPages) ? jQuery(\"#tablePagination_nextPage,#tablePagination_lastPage\").removeClass(\"disabled_pivot_button\") :\r\n\t\t\t\t\t\t\t\tjQuery(\"#tablePagination_nextPage,#tablePagination_lastPage\").addClass(\"disabled_pivot_button\");\r\n\t\t\t\t\t\t} , 500)\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t} else if (settings.control) {\r\n\t\t\t\t\t\tvar cantRows = (recalculateCantPages) ? defaults.rowsPerPage : settings.control.rowsPerPage\r\n\t\t\t\t\t\tsettings.control.getDataForPivot(settings.controlUcId, currPageNum, cantRows, recalculateCantPages, \"\", \"\", \"\", \"\", \"\", true)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction resetPerPageValues() {\r\n\t\t\t\t\tvar isRowsPerPageMatched = false;\r\n\t\t\t\t\tvar optsPerPage = defaults.optionsForRows;\r\n\t\t\t\t\toptsPerPage.sort(function (a, b) { return a - b; });\r\n\t\t\t\t\tvar perPageDropdown = jQuery(table)[tblLocation]().find(rowsPerPageId)[0];\r\n\t\t\t\t\tperPageDropdown.length = 0;\r\n\t\t\t\t\tfor (var i = 0; i < optsPerPage.length; i++) {\r\n\t\t\t\t\t\tif (optsPerPage[i] == defaults.rowsPerPage) {\r\n\t\t\t\t\t\t\tperPageDropdown.options[i] = new Option(optsPerPage[i], optsPerPage[i], true, true);\r\n\t\t\t\t\t\t\tisRowsPerPageMatched = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\tperPageDropdown.options[i] = new Option(optsPerPage[i], optsPerPage[i]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\r\n\r\n\t\t\t\t\tif ((totalPages == 1) || (totalPages == 0)) {\r\n\t\t\t\t\t\tjQuery('#' + settings.controlName + '_tablePagination_paginater').css('display', 'none');\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tjQuery('#' + settings.controlName + '_tablePagination_paginater').css('display', '');\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction createPaginationElements() {\r\n\t\t\t\t\tvar size = 1;\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tvar mul = 100;\r\n\t\t\t\t\t\tif ( (OAT.isWebkit()) &&\r\n\t\t\t\t\t\t\t(!(jQuery(\"#\" + settings.controlName).closest(\".gxwebcomponent\").length > 0))) {\r\n\t\t\t\t\t\t\tmul = mul * 100;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (currPageNumber[settings.controlName] > mul * 10) {\r\n\t\t\t\t\t\t\tif (jQuery(\"#\" + settings.controlName).closest(\".gxwebcomponent\").length > 0) {\r\n\t\t\t\t\t\t\t\tsize = size + 2;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tvar d = currPageNumber[settings.controlName] / mul\r\n\t\t\t\t\t\t\twhile (d > 10) {\r\n\t\t\t\t\t\t\t\td = d / 10;\r\n\t\t\t\t\t\t\t\tsize++;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} catch (ERROR) { }\r\n\r\n\r\n\t\t\t\t\tvar prevButtonsClass = (currPageNumber[settings.controlName] == 1) ? \" disabled_pivot_button\" : \"\"\r\n\t\t\t\t\tvar postButtonsClass = (currPageNumber[settings.controlName] == totalPages) ? \" disabled_pivot_button\" : \"\"\r\n\r\n\r\n\t\t\t\t\tvar ua = navigator.userAgent.toLowerCase();\r\n\t\t\t\t\tvar isAndroid = ua.indexOf(\"android\") > -1;\r\n\t\t\t\t\tif (!(OAT.isSD())) {\r\n\t\t\t\t\t\tvar htmlBuffer = [];\r\n\t\t\t\t\t\thtmlBuffer.push(\"<div id='\" + settings.controlName + \"_tablePagination' class='pivot_pag_div'>\");\r\n\t\t\t\t\t\thtmlBuffer.push(\"<span id='tablePagination_perPage'>\");\r\n\r\n\t\t\t\t\t\thtmlBuffer.push(\"<select id='\" + settings.controlName + \"tablePagination_rowsPerPage'></select>\");\r\n\r\n\t\t\t\t\t\thtmlBuffer.push(\" \" + settings.translations.GXPL_QViewerJSPerPage + \" \");\r\n\t\t\t\t\t\thtmlBuffer.push(\"</span>\");\r\n\t\t\t\t\t\thtmlBuffer.push(\"<span id='\" + settings.controlName + \"_tablePagination_paginater'>\");\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\thtmlBuffer.push(\"<div class='pagefirst \" + prevButtonsClass + \"' id='tablePagination_firstPage' >\");\r\n\t\t\t\t\t\thtmlBuffer.push('<i class=\"material-icons\">first_page</i>')\r\n\t\t\t\t\t\thtmlBuffer.push(\"</div>\")\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\thtmlBuffer.push(\"<div class='pageprev \" + prevButtonsClass + \"' id='tablePagination_prevPage' >\");\r\n\t\t\t\t\t\thtmlBuffer.push('<i class=\"material-icons\">navigate_before</i>')\r\n\t\t\t\t\t\thtmlBuffer.push(\"</div>\")\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\thtmlBuffer.push(\"<span style=''>&nbsp;\" + settings.translations.GXPL_QViewerJSPage + \"&nbsp;</span>\");\r\n\t\t\t\t\t\thtmlBuffer.push(\"<input id='tablePagination_currPage' type='input' value='\" + currPageNumber[settings.controlName] + \"' size='\" + size + \"'>\");\r\n\t\t\t\t\t\thtmlBuffer.push(\"<span>&nbsp;\" + settings.translations.GXPL_QViewerJSOf + \"</span><span id='tablePagination_totalPages'>&nbsp;\" + totalPages + \"</span>\");\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\thtmlBuffer.push(\"<div class='pagenext \" + postButtonsClass + \"' id='tablePagination_nextPage' >\");\r\n\t\t\t\t\t\thtmlBuffer.push('<i class=\"material-icons\">navigate_next</i>')\r\n\t\t\t\t\t\thtmlBuffer.push(\"</div>\")\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\thtmlBuffer.push(\"<div class='pagelast \" + postButtonsClass + \"' id='tablePagination_lastPage'>\");\r\n\t\t\t\t\t\thtmlBuffer.push('<i class=\"material-icons\">last_page</i>')\r\n\t\t\t\t\t\thtmlBuffer.push(\"</div>\")\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\thtmlBuffer.push(\"</span>\");\r\n\t\t\t\t\t\thtmlBuffer.push(\"</div>\");\r\n\t\t\t\t\t\treturn htmlBuffer.join(\"\").toString();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvar htmlBuffer = [];\r\n\t\t\t\t\t\thtmlBuffer.push(\"<div id='\" + settings.controlName + \"_tablePagination' class='pivot_pag_div pivot_pag_div_sd'>\");\r\n\t\t\t\t\t\thtmlBuffer.push(\"<span id='tablePagination_perPage'>\");\r\n\r\n\t\t\t\t\t\thtmlBuffer.push(\"<select id='\" + settings.controlName + \"tablePagination_rowsPerPage'><option value='5'>5</option></select>\");\r\n\r\n\t\t\t\t\t\thtmlBuffer.push(\" \" + settings.translations.GXPL_QViewerJSPerPage  + \" \");\r\n\t\t\t\t\t\thtmlBuffer.push(\"</span>\");\r\n\t\t\t\t\t\thtmlBuffer.push(\"<span id='\" + settings.controlName + \"_tablePagination_paginater'>\");\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\thtmlBuffer.push(\"<div class='pagefirst \" + prevButtonsClass + \"' id='tablePagination_firstPage' >\");\r\n\t\t\t\t\t\thtmlBuffer.push('<i class=\"material-icons\">first_page</i>')\r\n\t\t\t\t\t\thtmlBuffer.push(\"</div>\")\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\thtmlBuffer.push(\"<div class='pageprev \" + prevButtonsClass + \"' id='tablePagination_prevPage' >\");\r\n\t\t\t\t\t\thtmlBuffer.push('<i class=\"material-icons\">navigate_before</i>')\r\n\t\t\t\t\t\thtmlBuffer.push(\"</div>\")\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\thtmlBuffer.push(\"<span style=''>&nbsp;\" + settings.translations.GXPL_QViewerJSPage + \"&nbsp;</span>\");\r\n\t\t\t\t\t\thtmlBuffer.push(\"<input id='tablePagination_currPage' type='input' value='\" + currPageNumber[settings.controlName] + \"' size='\" + size + \"'>\");\r\n\t\t\t\t\t\thtmlBuffer.push(\"<span>&nbsp;\" + settings.translations.GXPL_QViewerJSOf + \"</span><span id='tablePagination_totalPages'>&nbsp;\" + totalPages + \"</span>\");\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\thtmlBuffer.push(\"<div class='pagenext \" + postButtonsClass + \"' id='tablePagination_nextPage' >\");\r\n\t\t\t\t\t\thtmlBuffer.push('<i class=\"material-icons\">navigate_next</i>')\r\n\t\t\t\t\t\thtmlBuffer.push(\"</div>\")\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\thtmlBuffer.push(\"<div class='pagelast \" + postButtonsClass + \"' id='tablePagination_lastPage'>\");\r\n\t\t\t\t\t\thtmlBuffer.push('<i class=\"material-icons\">last_page</i>')\r\n\t\t\t\t\t\thtmlBuffer.push(\"</div>\")\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\thtmlBuffer.push(\"</span>\");\r\n\t\t\t\t\t\thtmlBuffer.push(\"</div>\");\r\n\t\t\t\t\t\treturn htmlBuffer.join(\"\").toString();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (jQuery(table)[tblLocation]().find(totalPagesId).length == 0) {\r\n\t\t\t\t\tif (defaults.topNav) {\r\n\t\t\t\t\t\tjQuery(this).before(createPaginationElements());\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tjQuery(this).after(createPaginationElements());\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tjQuery(table)[tblLocation]().find(currPageId).val(currPageNumber[settings.controlName]);\r\n\t\t\t\t}\r\n\t\t\t\tresetPerPageValues();\r\n\r\n\t\t\t\tjQuery(table)[tblLocation]().find(firstPageId).bind('click', function (e) {\r\n\t\t\t\t\tresetCurrentPage(1, false)\r\n\t\t\t\t});\r\n\r\n\t\t\t\tjQuery(table)[tblLocation]().find(prevPageId).bind('click', function (e) {\r\n\t\t\t\t\tresetCurrentPage(currPageNumber[settings.controlName] - 1, false)\r\n\t\t\t\t});\r\n\r\n\t\t\t\tjQuery(table)[tblLocation]().find(nextPageId).bind('click', function (e) {\r\n\t\t\t\t\tresetCurrentPage(parseInt(currPageNumber[settings.controlName]) + 1, false)  //bind event \r\n\t\t\t\t});\r\n\r\n\t\t\t\tjQuery(table)[tblLocation]().find(lastPageId).bind('click', function (e) {\r\n\t\t\t\t\tresetCurrentPage(parseInt(jQuery(\"#\" + settings.controlName + \"_tablePagination_paginater #tablePagination_totalPages\")[0].textContent.replace(\"&nbsp;\", \"\")), false);\r\n\t\t\t\t});\r\n\r\n\t\t\t\tjQuery(table)[tblLocation]().find(currPageId).bind('change', function (e) {\r\n\t\t\t\t\tresetCurrentPage(parseInt(this.value, 10), false)\r\n\t\t\t\t});\r\n\r\n\t\t\t\tjQuery(table)[tblLocation]().find(rowsPerPageId).bind('change', function (e) {\r\n\t\t\t\t\tdefaults.rowsPerPage = parseInt(this.value, 10);\r\n\t\t\t\t\ttotalPages = resetTotalPages();\r\n\t\t\t\t\tresetCurrentPage(1, true);\r\n\t\t\t\t});\r\n\r\n\t\t\t})\r\n\t\t\r\n\t\t\r\n\t}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","#QUERYVIEWER1Container {\r\n    width: 100%; \r\n    height: 100%; \r\n    overflow: auto;\r\n}","import { Component, Listen, Prop, h } from '@stencil/core';\n// import * as $ from 'jquery';\nimport {renderJSPivot} from \"jspivottable\";\n// import {setPageDataForPivotTable} from \"jspivottable\";\n// import {setAttributeValuesForPivotTable} from \"jspivottable\";\n// import {setPivottableDataCalculation} from \"jspivottable\";\n// import {setDataSynForPivotTable} from \"jspivottable\";\n// import {setPageDataForTable} from \"jspivottable\";\n// import {setAttributeForTable} from \"jspivottable\";\n// import {setDataSynForTable} from \"jspivottable\";\n// import { getDataXML } from \"jspivottable\";\n// import {getFilteredDataXML} from \"jspivottable\";\n\n@Component({\n  tag: 'my-pivot',\n  styleUrl: 'my-pivot.scss',\n  shadow: true,\n})\n\nexport class Pivot {\n  /**\n   * metadata\n   */\n  @Prop() metadata: string = '<?xml version = \"1.0\" encoding = \"UTF-8\"?>\\n\\r\\n<OLAPCube Version=\"2\" format=\"compact\" decimalSeparator=\".\" thousandsSeparator=\",\" dateFormat=\"MDY\" textForNullValues=\"\" ShowDataLabelsIn=\"Columns\">\\n\\t<OLAPDimension name=\"Element1\" displayName=\"Datos Dsc\" description=\"Datos Dsc\" dataField=\"F1\" visible=\"Yes\" axis=\"Rows\" canDragToPages=\"true\" summarize=\"yes\" align=\"left\" picture=\"\" dataType=\"character\" format=\"\">\\n\\t</OLAPDimension>\\n\\t<OLAPDimension name=\"Element2\" displayName=\"Datos Codigo\" description=\"Datos Codigo\" dataField=\"F2\" visible=\"Yes\" axis=\"Rows\" canDragToPages=\"true\" summarize=\"yes\" align=\"left\" picture=\"\" dataType=\"character\" format=\"\">\\n\\t</OLAPDimension>\\n\\t<OLAPMeasure name=\"Element3\" displayName=\"Datos Valor\" description=\"Datos Valor\" dataField=\"F3\" visible=\"Yes\" aggregation=\"\" align=\"right\" picture=\"ZZZ9\" targetValue=\"0\" maximumValue=\"0\" dataType=\"integer\" format=\"\">\\n\\t</OLAPMeasure>\\n</OLAPCube>\\n';\n\n  /**\n   * data\n   */\n  @Prop() data: string;\n\n  /**\n   * qv\n   */\n  @Prop() qv = {\n    collection: {\n      \"QUERYVIEWER1_Queryviewer1\": {\n        AutoRefreshGroup: \"\",\n        debugServices: false,\n        ControlName: \"Queryviewer1\",\n        Metadata: {\n          Axes: [\n            { RaiseItemClick: true },\n            { RaiseItemClick: true }\n          ],\n          Data: [\n            { RaiseItemClick: true },\n            { RaiseItemClick: true }\n          ]\n        }\n      }\n    },\n    fadeTimeouts: {}\n  };\n\n  \n  /**\n   * qViewer\n   */\n  @Prop() qViewer = { xml: {metadata:this.metadata},\n  pivotParams: {\n      page: \"QUERYVIEWER1_Queryviewer1_GeneralQuery1_pivot_page\",    \n      content: \"QUERYVIEWER1_Queryviewer1_GeneralQuery1_pivot_content\",\n      container: document.getElementById(\"QUERYVIEWER1Container\"),\n      RealType: \"PivotTable\",\n      ObjectName:  \"General.Query1\",\n      ControlName: \"Queryviewer1\",\n      PageSize: 20,\n      metadata: this.metadata,\n      UcId: \"QUERYVIEWER1_Queryviewer1\",\n      AutoResize: false,\n      DisableColumnSort: false,\n      RememberLayout: true,\n      ShowDataLabelsIn: \"Columns\",\n      ServerPaging: true,\n      ServerPagingPivot: true,\n      ServerPagingCacheSize: 0,\n      UseRecordsetCache: true,\n      AllowSelection: false,\n      SelectLine: true,\n      TotalForColumns: \"Yes\",\n      Title: \"\"\n  }};\n\n  /**\n   * QueryViewerTranslations\n   */\n  @Prop() QueryViewerTranslations = {\n    GXPL_QViewerSinceTheBeginningTrend: \"Trend Since The Beginning\",\n        GXPL_QViewerLastDayTrend: \"Trend Last Day\",\n        GXPL_QViewerLastHourTrend: \"Trend Last hour\",\n        GXPL_QViewerJSAllOption: \"Todos\",\n        GXPL_QViewerJSAscending: \"Ascending\",\n        GXPL_QViewerJSDescending: \"Descendiente\",\n        GXPL_QViewerJSSubtotals: \"Subtotal\",\n        GXPL_QViewerJSRestoreDefaultView: \"Restore\",\n        GXPL_QViewerJSPivotDimensionToColumn: \"To COlumns\",\n        GXPL_QViewerJSPivotDimensionToRow: \"To Dimensions\",\n        GXPL_QViewerJSMoveToFilterBar: \"To Filters\",\n        GXPL_QViewerJSAll: \"ALL\",\n        GXPL_QViewerJSNone: \"NONE\",\n        GXPL_QViewerJSReverse: \"Revert\",\n        GXPL_QViewerSearch: \"Search\",\n        GXPL_QViewerInfoUser: \"User Info\",\n        GXPL_QViewerJSDropFiltersHere: \"Drop her filters\",\n        GXPL_QViewerPopupTitle: \"Title p\",\n        GXPL_QViewerJSVisibleColumns: \"Visible columns\",\n        GXPL_QViewerContextMenuExportXml: \"Export to XML\",\n        GXPL_QViewerContextMenuExportHtml: \"To Html\",\n        GXPL_QViewerContextMenuExportPdf: \"To PDF\",\n        GXPL_QViewerContextMenuExportXls2003: \"To xls\",\n        GXPL_QViewerContextMenuExportXlsx: \"To Xlsx\",\n        GXPL_QViewerJSMeasures: \"Measures\",\n        GXPL_QViewerJSValue: \"Value\",\n        GXPL_QViewerJSTotal: \"Grand Total\",\n        GXPL_QViewerJSTotalFor: \"Total for\",\n        GXPL_QViewerJSPerPage: \"Roes:\",\n        GXPL_QViewerJSPage: \"Pags:\",\n        GXPL_QViewerJSOf: \"of\",\n        GXPL_QViewerJSMoveColumnToLeft: \"to left\",\n        GXPL_QViewerJSMoveColumnToRight: \"to right\"\n      };\n\n  @Listen(\"RequestPageDataForPivotTable\")\n  handledataforpivottable(e)\n  {     \n    let data = '<?xml version = \"1.0\" encoding = \"UTF-8\"?>\\n\\r\\n<Recordset RecordCount=\"50\" PageCount=\"3\">\\n\\t<Page PageNumber=\"1\">\\n\\t\\t<Columns>\\n\\t\\t\\t<Header DataField=\"F3\">\\n\\t\\t\\t</Header>\\n\\t\\t</Columns>\\n\\t\\t<Rows>\\n\\t\\t\\t<Row>\\n\\t\\t\\t\\t<Header>\\n\\t\\t\\t\\t\\t<F1>151                 </F1>\\n\\t\\t\\t\\t\\t<F2>1129                </F2>\\n\\t\\t\\t\\t</Header>\\n\\t\\t\\t\\t<Cells>\\n\\t\\t\\t\\t\\t<Cell>29</Cell>\\n\\t\\t\\t\\t</Cells>\\n\\t\\t\\t</Row>\\n\\t\\t\\t<Row>\\n\\t\\t\\t\\t<Header Subtotal=\"true\">\\n\\t\\t\\t\\t\\t<F1>151                 </F1>\\n\\t\\t\\t\\t</Header>\\n\\t\\t\\t\\t<Cells>\\n\\t\\t\\t\\t\\t<Cell>29</Cell>\\n\\t\\t\\t\\t</Cells>\\n\\t\\t\\t</Row>\\n\\t\\t\\t<Row>\\n\\t\\t\\t\\t<Header>\\n\\t\\t\\t\\t\\t<F1>51                  </F1>\\n\\t\\t\\t\\t\\t<F2>15                  </F2>\\n\\t\\t\\t\\t</Header>\\n\\t\\t\\t\\t<Cells>\\n\\t\\t\\t\\t\\t<Cell>15</Cell>\\n\\t\\t\\t\\t</Cells>\\n\\t\\t\\t</Row>\\n\\t\\t\\t<Row>\\n\\t\\t\\t\\t<Header Subtotal=\"true\">\\n\\t\\t\\t\\t\\t<F1>51                  </F1>\\n\\t\\t\\t\\t</Header>\\n\\t\\t\\t\\t<Cells>\\n\\t\\t\\t\\t\\t<Cell>15</Cell>\\n\\t\\t\\t\\t</Cells>\\n\\t\\t\\t</Row>\\n\\t\\t\\t<Row>\\n\\t\\t\\t\\t<Header>\\n\\t\\t\\t\\t\\t<F1>51P                 </F1>\\n\\t\\t\\t\\t\\t<F2>156                 </F2>\\n\\t\\t\\t\\t</Header>\\n\\t\\t\\t\\t<Cells>\\n\\t\\t\\t\\t\\t<Cell>1</Cell>\\n\\t\\t\\t\\t</Cells>\\n\\t\\t\\t</Row>\\n\\t\\t\\t<Row>\\n\\t\\t\\t\\t<Header Subtotal=\"true\">\\n\\t\\t\\t\\t\\t<F1>51P                 </F1>\\n\\t\\t\\t\\t</Header>\\n\\t\\t\\t\\t<Cells>\\n\\t\\t\\t\\t\\t<Cell>1</Cell>\\n\\t\\t\\t\\t</Cells>\\n\\t\\t\\t</Row>\\n\\t\\t\\t<Row>\\n\\t\\t\\t\\t<Header>\\n\\t\\t\\t\\t\\t<F1>5P                  </F1>\\n\\t\\t\\t\\t\\t<F2>352                 </F2>\\n\\t\\t\\t\\t</Header>\\n\\t\\t\\t\\t<Cells>\\n\\t\\t\\t\\t\\t<Cell>2</Cell>\\n\\t\\t\\t\\t</Cells>\\n\\t\\t\\t</Row>\\n\\t\\t\\t<Row>\\n\\t\\t\\t\\t<Header Subtotal=\"true\">\\n\\t\\t\\t\\t\\t<F1>5P                  </F1>\\n\\t\\t\\t\\t</Header>\\n\\t\\t\\t\\t<Cells>\\n\\t\\t\\t\\t\\t<Cell>2</Cell>\\n\\t\\t\\t\\t</Cells>\\n\\t\\t\\t</Row>\\n\\t\\t\\t<Row>\\n\\t\\t\\t\\t<Header>\\n\\t\\t\\t\\t\\t<F1>89                  </F1>\\n\\t\\t\\t\\t\\t<F2>1895                </F2>\\n\\t\\t\\t\\t</Header>\\n\\t\\t\\t\\t<Cells>\\n\\t\\t\\t\\t\\t<Cell>15</Cell>\\n\\t\\t\\t\\t</Cells>\\n\\t\\t\\t</Row>\\n\\t\\t\\t<Row>\\n\\t\\t\\t\\t<Header Subtotal=\"true\">\\n\\t\\t\\t\\t\\t<F1>89                  </F1>\\n\\t\\t\\t\\t</Header>\\n\\t\\t\\t\\t<Cells>\\n\\t\\t\\t\\t\\t<Cell>15</Cell>\\n\\t\\t\\t\\t</Cells>\\n\\t\\t\\t</Row>\\n\\t\\t\\t<Row>\\n\\t\\t\\t\\t<Header>\\n\\t\\t\\t\\t\\t<F1>AAB                 </F1>\\n\\t\\t\\t\\t\\t<F2>A32                 </F2>\\n\\t\\t\\t\\t</Header>\\n\\t\\t\\t\\t<Cells>\\n\\t\\t\\t\\t\\t<Cell>32</Cell>\\n\\t\\t\\t\\t</Cells>\\n\\t\\t\\t</Row>\\n\\t\\t\\t<Row>\\n\\t\\t\\t\\t<Header Subtotal=\"true\">\\n\\t\\t\\t\\t\\t<F1>AAB                 </F1>\\n\\t\\t\\t\\t</Header>\\n\\t\\t\\t\\t<Cells>\\n\\t\\t\\t\\t\\t<Cell>32</Cell>\\n\\t\\t\\t\\t</Cells>\\n\\t\\t\\t</Row>\\n\\t\\t\\t<Row>\\n\\t\\t\\t\\t<Header>\\n\\t\\t\\t\\t\\t<F1>AAM                 </F1>\\n\\t\\t\\t\\t\\t<F2>31                  </F2>\\n\\t\\t\\t\\t</Header>\\n\\t\\t\\t\\t<Cells>\\n\\t\\t\\t\\t\\t<Cell>31</Cell>\\n\\t\\t\\t\\t</Cells>\\n\\t\\t\\t</Row>\\n\\t\\t\\t<Row>\\n\\t\\t\\t\\t<Header Subtotal=\"true\">\\n\\t\\t\\t\\t\\t<F1>AAM                 </F1>\\n\\t\\t\\t\\t</Header>\\n\\t\\t\\t\\t<Cells>\\n\\t\\t\\t\\t\\t<Cell>31</Cell>\\n\\t\\t\\t\\t</Cells>\\n\\t\\t\\t</Row>\\n\\t\\t\\t<Row>\\n\\t\\t\\t\\t<Header>\\n\\t\\t\\t\\t\\t<F1>AB36                </F1>\\n\\t\\t\\t\\t\\t<F2>36                  </F2>\\n\\t\\t\\t\\t</Header>\\n\\t\\t\\t\\t<Cells>\\n\\t\\t\\t\\t\\t<Cell>36</Cell>\\n\\t\\t\\t\\t</Cells>\\n\\t\\t\\t</Row>\\n\\t\\t\\t<Row>\\n\\t\\t\\t\\t<Header Subtotal=\"true\">\\n\\t\\t\\t\\t\\t<F1>AB36                </F1>\\n\\t\\t\\t\\t</Header>\\n\\t\\t\\t\\t<Cells>\\n\\t\\t\\t\\t\\t<Cell>36</Cell>\\n\\t\\t\\t\\t</Cells>\\n\\t\\t\\t</Row>\\n\\t\\t\\t<Row>\\n\\t\\t\\t\\t<Header>\\n\\t\\t\\t\\t\\t<F1>AC32                </F1>\\n\\t\\t\\t\\t\\t<F2>32                  </F2>\\n\\t\\t\\t\\t</Header>\\n\\t\\t\\t\\t<Cells>\\n\\t\\t\\t\\t\\t<Cell>32</Cell>\\n\\t\\t\\t\\t</Cells>\\n\\t\\t\\t</Row>\\n\\t\\t\\t<Row>\\n\\t\\t\\t\\t<Header Subtotal=\"true\">\\n\\t\\t\\t\\t\\t<F1>AC32                </F1>\\n\\t\\t\\t\\t</Header>\\n\\t\\t\\t\\t<Cells>\\n\\t\\t\\t\\t\\t<Cell>32</Cell>\\n\\t\\t\\t\\t</Cells>\\n\\t\\t\\t</Row>\\n\\t\\t\\t<Row>\\n\\t\\t\\t\\t<Header>\\n\\t\\t\\t\\t\\t<F1>AC34                </F1>\\n\\t\\t\\t\\t\\t<F2>34                  </F2>\\n\\t\\t\\t\\t</Header>\\n\\t\\t\\t\\t<Cells>\\n\\t\\t\\t\\t\\t<Cell>34</Cell>\\n\\t\\t\\t\\t</Cells>\\n\\t\\t\\t</Row>\\n\\t\\t\\t<Row>\\n\\t\\t\\t\\t<Header Subtotal=\"true\">\\n\\t\\t\\t\\t\\t<F1>AC34                </F1>\\n\\t\\t\\t\\t</Header>\\n\\t\\t\\t\\t<Cells>\\n\\t\\t\\t\\t\\t<Cell>34</Cell>\\n\\t\\t\\t\\t</Cells>\\n\\t\\t\\t</Row>\\n\\t\\t</Rows>\\n\\t</Page>\\n</Recordset>\\n'\n  \n    let resXML = data\n    \n    if (typeof e.parameter.callback == \"function\") \n       e.parameter.callback(resXML)\n       \n  }\t\n\n  render() {\n    \n    renderJSPivot(this.qViewer.pivotParams, this.qv.collection, this.QueryViewerTranslations, this.qViewer);\n    return (\n    <div class=\"gx_usercontrol qv-pivottable QueryViewer-pivottable\" id=\"QUERYVIEWER1Container\">\n      <div id=\"QUERYVIEWER1_Queryviewer1_GeneralQuery1_pivot_page\" class=\"pivot_filter_div\">\n      </div>\n      <div id=\"QUERYVIEWER1_Queryviewer1_GeneralQuery1_pivot_content\" class=\"conteiner_table_div\">\n      </div>\n    </div>\n    )\n  }\n}\n"],"mappings":"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,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAChJ,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAChJ,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAC9I,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAChJ,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAChJ,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAChJ,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAA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AAI,EAAG,IAAK,EAAG,GAAI,EAAG,IAAK,EAAG,GAAI,EAAG,IAAK,EAAG,IAC/I,EAAG,IAAK,EAAG,EAAG,EAAG,IAAK,EAAG,GAAI,EAAG,IAAK,EAAG,GAAI,EAAG,IAAK,EAAG,IAAK,EAAG,IAAK,EAAG,GAAI,EAAG,IAAK,EAAG,GAAI,EAAG,IAAK,EAAG,GAAI,EAAG,IAAK,EAAG,IAAK,EAAG,IAAK,EAAG,EAAG,EAAG,IAAK,EAC/I,GAAI,EAAG,IAAK,EAAG,GAAI,EAAG,IAAK,EAAG,IAAK,EAAG,IAAK,EAAG,GAAI,EAAG,IAAK,EAAG,GAAI,EAAG,IAAK,EAAG,GAAI,EAAG,IAAK,EAAG,IAAK,EAAG,IAAK,EAAG,GAAI,EAAG,IAAK,EAAG,GAAI,EAAG,IAAK,EAAG,GAAI,EAC7I,IAAK,EAAG,IAAK,EAAG,IAAK,EAAG,GAAI,EAAG,IAAK,EAAG,GAAI,EAAG,IAAK,EAAG,GAAI,EAAG,IAAK,EAAG,IAAK,EAAG,IAAK,EAAG,GAAI,EAAG,IAAK,EAAG,IAAK,EAAG,IAAK,EAAG,GAAI,EAAG,IAAK,EAAG,IAAK,EAAG,IAAK,EAChJ,GAAI,EAAG,IAAK,EAAG,IAAK,EAAG,IAAK,EAAG,IAAK,EAAG,IAAK,EAAG,IAAK,EAAG,IAAK,EAAG,GAAI,EAAG,IAAK,EAAG,IAAK,EAAG,IAAK,EAAG,GAAI,EAAG,IAAK,EAAG,IAAK,EAAG,IAAK,EAAG,GAAI,EAAG,IAAK,EAAG,IAAK,EACjJ,IAAK,EAAG,IAAK,EAAG,IAAK,EAAG,IAAK,EAAG,IAAK,EAAG,GAAI,EAAG,IAAK,EAAG,IAAK,EAAG,IAAK,EAAG,GAAI,EAAG,IAAK,EAAG,IAAK,EAAG,IAAK,EAAG,GAAI,EAAG,IAAK,EAAG,IAAK,EAAG,IAAK,EAAG,IAAK,EAAG,IAC7I,EAAG,IAAK,EAAG,IAAK,EAAG,EAAG,EAAG,IAAK,EAAG,IAAK,EAAG,IAAK,EAAG,GAAI,EAAG,IAAK,EAAG,IAAK,EAAG,IAAK,EAAG,GAAI,EAAG,IAAK,EAAG,IAAK,EAAG,IAAK,EAAG,IAAK,EAAG,IAAK,EAAG,IAAK,EAAG,IAAK,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"}